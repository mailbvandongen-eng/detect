{"version":3,"file":"PanoramicMeshWorker-Dj1JiSBx.js","sources":["../../node_modules/@arcgis/core/widgets/PanoramicViewer/support/PanoramicMeshWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../../core/mathUtils.js\";import r from\"../../../layers/support/PixelBlock.js\";function e({distance:r,yaw:e,horizontalFieldOfView:n,pitch:o,verticalFieldOfView:i,origin:s=[0,0,0],positionLength:a=25}){const f=a-1,l=a*a,c=new Float32Array(2*l),u=new Float64Array(3*l),h=new Float32Array(3*l).fill(0),p=new Uint32Array(f**2*6);for(let w=0,m=0;w<l;w++){const l=Math.floor(w/a),g=w%a,y=1-g/f,A=l/f,b=2*w,d=3*w;c[b]=y,c[b+1]=A;const F=o+i/2-A*i,M=t(e-n/2+y*n),L=t(F),D=Math.sin(L),O=Math.cos(L),j=[D*Math.sin(M),Math.cos(M)*D,-O];u[d]=s[0]+r*j[0],u[d+1]=s[1]+r*j[1],u[d+2]=s[2]+r*j[2],h[d]=-j[0],h[d+1]=-j[1],h[d+2]=-j[2],l!==f&&g!==f&&(p[m++]=w,p[m++]=w+a,p[m++]=w+a+1,p[m++]=w,p[m++]=w+a+1,p[m++]=w+1)}return{result:{position:u,uv:c,normal:h,faces:p},transferList:[u.buffer,c.buffer,h.buffer,p?.buffer]}}function n(t){const e=r.fromJSON(t);e.premultiplyAlpha=!0;const n=e.getAsRGBA(),o=e.width,i=e.height,s=new ImageData(n,o,i);return{result:s,transferList:[s.data.buffer]}}function o({oldDistance:t,newDistance:r,position:e,origin:n=[0,0,0]}){const o=e.length/3;for(let i=0;i<o;i+=3){const o=3*i;e[o]=n[0]+(e[o]-n[0])*(r/t),e[o+1]=n[1]+(e[o+1]-n[1])*(r/t),e[o+2]=n[2]+(e[o+2]-n[2])*(r/t)}return{result:e,transferList:[e.buffer]}}export{n as convertPixelBlockToImageData,e as getFacesWithVertexAttributes,o as recomputePositions};\n"],"names":["e","r","n","o","i","s","a","f","l","c","u","h","p","w","m","g","y","A","b","d","F","t","L","D","O","j"],"mappings":"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","x_google_ignoreList":[0]}