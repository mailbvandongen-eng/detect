{"version":3,"file":"hillshadeLayers-BgjUlczK.js","sources":["../../src/layers/hillshadeLayers.ts"],"sourcesContent":["import TileLayer from 'ol/layer/Tile'\nimport ImageLayer from 'ol/layer/Image'\nimport LayerGroup from 'ol/layer/Group'\nimport TileWMS from 'ol/source/TileWMS'\nimport XYZ from 'ol/source/XYZ'\nimport ImageArcGISRest from 'ol/source/ImageArcGISRest'\n\n// AHN4 Hoogtekaart Kleur - 50cm resolutie met dynamische kleuren\n// Toont hoogteverschillen in kleur (blauw=laag → groen → oranje/bruin=hoog)\n// Dynamische color ramp past zich aan aan lokale hoogteverschillen\nexport function createAHN4ColorElevationLayerOL() {\n  const layer = new ImageLayer({\n    properties: { title: 'AHN4 Hoogtekaart Kleur', type: 'arcgis' },\n    visible: false,\n    opacity: 1.0,  // Volle dekking voor beste kleuren\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Color Ramp D'  // Dynamisch! blauw→groen→geel→bruin\n        })\n      },\n      crossOrigin: 'anonymous',\n      attributions: '© Esri Nederland, AHN4 50cm'\n    })\n  })\n\n  return layer\n}\n\n// AHN4 Hillshade Kleur - Combineert kleur + hillshade in één GroupLayer\n// Bron: Esri Nederland Hoogteviewer (apps.arcgisonline.nl/hoogteviewer)\n// Geeft 3D-effect door hillshade over de kleurlaag te leggen met multiply blend\nexport function createAHN4ShadedReliefLayerOL() {\n  // Onderlaag: Kleur gebaseerd op hoogte\n  const colorLayer = new ImageLayer({\n    properties: { title: 'Color Base' },\n    opacity: 1.0,\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Color Ramp D'\n        })\n      },\n      crossOrigin: 'anonymous',\n      attributions: '© Esri Nederland, AHN4 50cm'\n    })\n  })\n\n  // Bovenlaag: Hillshade met multiply blend\n  const hillshadeLayer = new ImageLayer({\n    properties: { title: 'Hillshade Overlay' },\n    opacity: 0.7,\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Hillshade'\n        })\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  // Canvas blend mode voor multiply effect (3D schaduwwerking)\n  hillshadeLayer.on('prerender', (evt) => {\n    if (evt.context) {\n      const ctx = evt.context as CanvasRenderingContext2D\n      ctx.globalCompositeOperation = 'multiply'\n    }\n  })\n  hillshadeLayer.on('postrender', (evt) => {\n    if (evt.context) {\n      const ctx = evt.context as CanvasRenderingContext2D\n      ctx.globalCompositeOperation = 'source-over'\n    }\n  })\n\n  // Groepeer beide lagen\n  const group = new LayerGroup({\n    properties: { title: 'AHN4 Hillshade Kleur', type: 'group' },\n    visible: false,\n    layers: [colorLayer, hillshadeLayer]\n  })\n\n  return group\n}\n\n// AHN4 Hillshade Netherlands - Esri Nederland ImageServer\n// Uses dynamic hillshade rendering from AHN4 DTM data\nexport function createAHN4HillshadeLayerOL() {\n  const layer = new ImageLayer({\n    properties: { title: 'AHN4 Hillshade NL', type: 'arcgis' },\n    visible: false,\n    opacity: 0.7,\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Hillshade'\n        })\n      },\n      crossOrigin: 'anonymous',\n      attributions: '© Esri Nederland, AHN'\n    })\n  })\n\n  return layer\n}\n\n// AHN4 Multidirectional Hillshade - Better for subtle relief\nexport function createAHN4MultiHillshadeLayerOL() {\n  const layer = new ImageLayer({\n    properties: { title: 'AHN4 Multi-Hillshade NL', type: 'arcgis' },\n    visible: false,\n    opacity: 0.7,\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Hillshade (Multidirectionaal)'\n        })\n      },\n      crossOrigin: 'anonymous',\n      attributions: '© Esri Nederland, AHN'\n    })\n  })\n\n  return layer\n}\n\n// AHN4 Slope visualization - Shows steepness\nexport function createAHN4SlopeLayerOL() {\n  const layer = new ImageLayer({\n    properties: { title: 'AHN4 Helling NL', type: 'arcgis' },\n    visible: false,\n    opacity: 0.6,\n    source: new ImageArcGISRest({\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\n      params: {\n        renderingRule: JSON.stringify({\n          rasterFunction: 'AHN - Slope'\n        })\n      },\n      crossOrigin: 'anonymous',\n      attributions: '© Esri Nederland, AHN'\n    })\n  })\n\n  return layer\n}\n\n// Esri World Hillshade - Global coverage, good base layer\n// minZoom 8 prevents \"Map data not yet available\" at low zoom levels\nexport function createWorldHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'World Hillshade', type: 'overlay' },\n    visible: false,\n    opacity: 0.6,\n    minZoom: 8,  // Voorkomt \"Map data not yet available\" foutmelding\n    source: new XYZ({\n      url: 'https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}',\n      attributions: '© Esri',\n      crossOrigin: 'anonymous',\n      maxZoom: 23\n    })\n  })\n\n  return layer\n}\n\n// Flanders DHMV II - Multidirectional hillshade 25cm resolution\n// Extremely detailed! Derived from 8 light directions, 35° sun height\nexport function createDHMVHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hillshade Vlaanderen 25cm', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\n      params: {\n        'LAYERS': 'DHMV_II_HILL_25cm',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      serverType: 'geoserver',\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// Flanders DHMV II - Skyview Factor 25cm\n// Excellent for detecting archaeological features in flat terrain\nexport function createDHMVSkyviewLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Skyview Vlaanderen 25cm', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\n      params: {\n        'LAYERS': 'DHMV_II_SVF_25cm',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      serverType: 'geoserver',\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// Flanders DHMV II - Digital Terrain Model 1m\nexport function createDHMVDTMLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'DTM Vlaanderen 1m', type: 'wms' },\n    visible: false,\n    opacity: 0.6,\n    source: new TileWMS({\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\n      params: {\n        'LAYERS': 'DHMVII_DTM_1m',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      serverType: 'geoserver',\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// NRW Germany - DGM Schummerung (Hillshade) 25cm resolution\n// Grayscale hillshade with NW light source\nexport function createNRWHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hillshade NRW 25cm', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung',\n      params: {\n        'LAYERS': 'nw_dgm-schummerung_pan',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// NRW Germany - DGM Schummerung Color\n// Colored hillshade with NW light source\nexport function createNRWHillshadeColorLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hillshade NRW Kleur', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung',\n      params: {\n        'LAYERS': 'nw_dgm-schummerung_col',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// France IGN - Hillshade from BD Alti (25m resolution)\n// Two light sources: NE at 45° elevation + zenith\nexport function createFranceHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hillshade Frankrijk', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://data.geopf.fr/wms-r/wms',\n      params: {\n        'LAYERS': 'ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW',\n        'STYLES': 'estompage_grayscale',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// France IGN - LiDAR HD MNT Hillshade (high resolution!)\n// Available for areas with LiDAR HD coverage\nexport function createFranceLidarHDHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'LiDAR HD Frankrijk', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://data.geopf.fr/wms-r/wms',\n      params: {\n        'LAYERS': 'IGNF_LIDAR-HD_MNT_ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// France IGN - RGE Alti High Resolution (1m DEM)\nexport function createFranceRGEAltiLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'RGE Alti Frankrijk 1m', type: 'wms' },\n    visible: false,\n    opacity: 0.6,\n    source: new TileWMS({\n      url: 'https://data.geopf.fr/wms-r/wms',\n      params: {\n        'LAYERS': 'ELEVATION.ELEVATIONGRIDCOVERAGE.HIGHRES',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// France IGN - Contour lines\nexport function createFranceContourLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hoogtelijn Frankrijk', type: 'wms' },\n    visible: false,\n    opacity: 0.8,\n    source: new TileWMS({\n      url: 'https://data.geopf.fr/wms-r/wms',\n      params: {\n        'LAYERS': 'ELEVATION.CONTOUR.LINE',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n\n// Wallonia Belgium - Hillshade MNT 2021-2022 (0.5m resolution)\n// Derived from LiDAR acquisition 2021-2022\nexport function createWallonieHillshadeLayerOL() {\n  const layer = new TileLayer({\n    properties: { title: 'Hillshade Wallonië', type: 'wms' },\n    visible: false,\n    opacity: 0.7,\n    source: new TileWMS({\n      url: 'https://geoservices.wallonie.be/arcgis/services/RELIEF/WALLONIE_MNT_2021_2022_HILLSHADE/MapServer/WMSServer',\n      params: {\n        'LAYERS': '0',\n        'STYLES': '',\n        'TILED': true,\n        'FORMAT': 'image/png'\n      },\n      crossOrigin: 'anonymous'\n    })\n  })\n\n  return layer\n}\n"],"names":["createAHN4ColorElevationLayerOL","ImageLayer","ImageArcGISRest","createAHN4ShadedReliefLayerOL","colorLayer","hillshadeLayer","evt","ctx","LayerGroup","createAHN4HillshadeLayerOL","createAHN4MultiHillshadeLayerOL"],"mappings":"sDAUO,SAASA,GAAkC,CAiBhD,OAhBc,IAAIC,EAAW,CAC3B,WAAY,CAAE,MAAO,yBAA0B,KAAM,QAAA,EACrD,QAAS,GACT,QAAS,EACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,oBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,6BAAA,CACf,CAAA,CACF,CAGH,CAKO,SAASC,GAAgC,CAE9C,MAAMC,EAAa,IAAIH,EAAW,CAChC,WAAY,CAAE,MAAO,YAAA,EACrB,QAAS,EACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,oBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,6BAAA,CACf,CAAA,CACF,EAGKG,EAAiB,IAAIJ,EAAW,CACpC,WAAY,CAAE,MAAO,mBAAA,EACrB,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,iBAAA,CACjB,CAAA,EAEH,YAAa,WAAA,CACd,CAAA,CACF,EAGD,OAAAG,EAAe,GAAG,YAAcC,GAAQ,CACtC,GAAIA,EAAI,QAAS,CACf,MAAMC,EAAMD,EAAI,QAChBC,EAAI,yBAA2B,UACjC,CACF,CAAC,EACDF,EAAe,GAAG,aAAeC,GAAQ,CACvC,GAAIA,EAAI,QAAS,CACf,MAAMC,EAAMD,EAAI,QAChBC,EAAI,yBAA2B,aACjC,CACF,CAAC,EAGa,IAAIC,EAAW,CAC3B,WAAY,CAAE,MAAO,uBAAwB,KAAM,OAAA,EACnD,QAAS,GACT,OAAQ,CAACJ,EAAYC,CAAc,CAAA,CACpC,CAGH,CAIO,SAASI,GAA6B,CAiB3C,OAhBc,IAAIR,EAAW,CAC3B,WAAY,CAAE,MAAO,oBAAqB,KAAM,QAAA,EAChD,QAAS,GACT,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,yFACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,iBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,uBAAA,CACf,CAAA,CACF,CAGH,CAGO,SAASQ,GAAkC,CAiBhD,OAhBc,IAAIT,EAAW,CAC3B,WAAY,CAAE,MAAO,0BAA2B,KAAM,QAAA,EACtD,QAAS,GACT,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,yFACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,qCAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,uBAAA,CACf,CAAA,CACF,CAGH"}