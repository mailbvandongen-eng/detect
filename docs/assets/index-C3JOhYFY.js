const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/romeinseFortenOL-DfIN-Wek.js","assets/iconStyles-De0xUUMX.js","assets/kastelenOL-CD_7gOxV.js","assets/ruinesOL-S2GzxBss.js","assets/hunebeddenOL-BZ_hyDGo.js","assets/uikavArcheoPuntenOL-Cz3YRmvX.js","assets/speeltuinenOL-DresBiP7.js","assets/museaOL-CsSbySJC.js","assets/kringloopwinkelsOL-B7oqoiBD.js","assets/fossielenOL-C3tHG5PR.js","assets/fossielUtils-MSDcOJ58.js","assets/fossielenBelgieOL-BpHOuE_g.js","assets/fossielenDuitslandOL-Dl6f8e48.js","assets/fossielenFrankrijkOL-C1-7lcbx.js","assets/bunkersOL-BSaK-gJY.js","assets/grafheuvelsOL-Di_-aQQ6.js","assets/slagveldenOL-DTj6rpL2.js","assets/frankrijkMonumentenOL-BkJ7qt6W.js","assets/inrapSitesFROL-C3cVBAt9.js","assets/IdentityManager-DiKupks4.js","assets/substitute--fi2IjIT.js","assets/ElevationLayer-CdWKfD_0.js","assets/MultiOriginJSONSupport-MLuW5oVB.js","assets/ArcGISCachedService-DXFklw5D.js","assets/TileInfoTilemapCache-SqGKhWsP.js","assets/TilemapCache-DFHhrsXW.js","assets/LRUCache-DWColguZ.js","assets/MemCache-UQ3Fan4o.js","assets/memoryEstimations-CWYwWoot.js","assets/ArcGISService-C102laIt.js","assets/OperationalLayer-DtLgQggQ.js","assets/layerContainerType-CSXZNpHb.js","assets/ElevationInfo-CmLz5uAt.js","assets/lengthUtils-BNqSLvIN.js","assets/PortalLayer-Azu7T8TZ.js","assets/portalItemUtils-C4b5E_OC.js","assets/WorkerHandle-D_jUzHgI.js","assets/portalLayers-BpoWL6Jy.js","assets/associatedFeatureServiceUtils-BmGeQdMt.js","assets/fetchService-7mqFQrox.js","assets/loadUtils-NtwMhQhU.js","assets/lazyLayerLoader-CXLDtp_2.js","assets/arcgisLayers-hGaMZZPY.js","assets/layersCreator-CWB8HTNG.js","assets/styleUtils-C9iQ0lUF.js","assets/ElevationQuery-XOnWf19x.js","assets/GeometryDescriptor-BhD7DE1v.js","assets/projectOperator-KhnimkpV.js","assets/operatorProject-CF9DbeSU.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/projectOperator-ChMYCACc.js","assets/statsWorker-CfJ9rl-Y.js","assets/utils-D-Rxv_pS.js","assets/quantizationUtils-BjHfJTT4.js","assets/heatmapUtils-BQKir1kj.js","assets/vec42-BwPTElF8.js","assets/vec4f64-DPb6J-GU.js","assets/utils-B0ig7Xs2.js","assets/utils-N3FBPf9X.js","assets/ClassBreaksDefinition-27RjaGfj.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-EKRLgug9.js","assets/date-DCujAECq.js","assets/OptimizedFeature-DYExzdqF.js","assets/FeatureStore-CVL51V0W.js","assets/featureConversionUtils-BUvoAnjI.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-BB1IGDgT.js","assets/PooledRBush-Cxm8a1-l.js","assets/timeSupport-Dm1qNIyi.js","assets/queryUtils-xUueMXra.js","assets/optimizedFeatureQueryEngineAdapter-CL05lfQY.js","assets/QueryEngine-f9YSEof8.js","assets/WhereClauseCache-tZv3tUJ_.js","assets/WhereClause-fxv7LZKk.js","assets/TimeOnly-BkwEiadv.js","assets/enum-Dvqq6Gh4.js","assets/UnknownTimeZone-zWDfEj_2.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-QSH7pah3.js","assets/NormalizationBinParametersMixin-BIVF9khF.js","assets/FieldsIndex-B9YYBwe9.js","assets/number-CLyGOnja.js","assets/locationUtils-BlWvYCrC.js","assets/clientSideDefaults-CHyTI_2X.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-BrddNVow.js","assets/workerHelper-Bp5DRx98.js","assets/InterleavedLayout-D6tq8mr5.js","assets/BufferView-Db9hD2VV.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-YFKcoGoO.js","assets/deduplicate-DQph_3lI.js","assets/Indices-DYsgZxQx.js","assets/Normals-CuDXHx4-.js","assets/ElevationSamplerWorker-K1nl4wxR.js","assets/MeshLocalVertexSpace-DE7evK7j.js","assets/vertexSpaceConversion-D4KhbNGY.js","assets/spatialReferenceEllipsoidUtils-DkWT_eIn.js","assets/computeTranslationToOriginAndRotation-Bko3q-23.js","assets/projectPointToVector-BgCUCDUZ.js","assets/meshVertexSpaceUtils-Dmfew3Gp.js","assets/vec3-BVjnNGkG.js","assets/vec4-CLGyF5V_.js","assets/FeatureServiceSnappingSourceWorker-BvOjkLMb.js","assets/symbologySnappingCandidates-BZEhlTmW.js","assets/pbfQueryUtils-Bi3OyAwt.js","assets/pbf-DpSn-tRW.js","assets/query-DG38VdeT.js","assets/queryZScale-5oMeGvRs.js","assets/GeoJSONSourceWorker-BFQlrKdf.js","assets/geojson-QCifJJVk.js","assets/sourceUtils-BYUKBwRF.js","assets/MemorySourceWorker-Cw2jaEF7.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-BqDtQmDr.js","assets/dehydratedFeatures-B6-9SzkO.js","assets/FeaturePipelineWorker-BRf9KWen.js","assets/diffUtils-B6-2GzwK.js","assets/AttributeStore-CCnAQkAQ.js","assets/Utils-BTV9iNHg.js","assets/BoundingBox-CoQm8Pq9.js","assets/UpdateTracking2D-DKEmItaV.js","assets/ArcadeExpression-CBKVtgZg.js","assets/FeatureStoreQueryAdapter-DrcqpCX9.js","assets/labelPoint-BWdw2i7q.js","assets/labelUtils-Dbz2abRe.js","assets/utils-DQaLv0i_.js","assets/defaultCIMValues-XI-Li77m.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/DictionaryScriptEvaluator-B4RIHBy5.js","assets/MeshWriterRegistry-Do0cw1jd.js","assets/rasterizingUtils-IWOT9gi8.js","assets/CIMSymbolHelper-CNycPCsF.js","assets/BidiEngine-BvER9tXK.js","assets/GeometryUtils-lvflCcrX.js","assets/Rect-CUzevAry.js","assets/defaults-s_YrkWro.js","assets/TexturedLineMeshWriter-LnuJynEb.js","assets/TurboLine-ChPkTAfh.js","assets/grouping-8xebqiPc.js","assets/QueueProcessor-Cs0c1rLm.js","assets/FeatureMetadata-CH6Wzxu2.js","assets/SourceChunkStore-CrID9q_6.js","assets/parquet-WShnxs5h.js","assets/operatorGeodeticDensify-snfluT5Z.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-D8_3Vo8z.js","assets/FeatureIdInfo-TT61qUJg.js","assets/displayFilterUtils-DcCawD0K.js","assets/ogcFeatureUtils-BgqJRfnb.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-B2nHmq63.js","assets/PointCloudWorker-CTLgCmrq.js","assets/quat-D94HkD4E.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-DZR8yu5R.js","assets/RendererLegendOptions-Cl2ba19W.js","assets/ColorStop-BEgelnzR.js","assets/I3SBinaryReader-BZ69mL7P.js","assets/orientedBoundingBox-Cw-D-FIa.js","assets/plane-CUfZqA7f.js","assets/vectorStacks-Clhq489X.js","assets/RasterWorker-Czs2iGl5.js","assets/PixelBlock-DxhoTckx.js","assets/RasterSymbolizer-D4tdf6Cs.js","assets/vectorFieldUtils-DKwLt4na.js","assets/colorUtils-Cf-CYymT.js","assets/rasterFunctionHelper-Kl22U8GZ.js","assets/clipUtils-Boxk040G.js","assets/rasterProjectionHelper-DQx_Y1M9.js","assets/colorRamps-g-IiZJE-.js","assets/PolynomialTransform-CZxwko61.js","assets/dataUtils-DvvDKlVP.js","assets/SceneLayerSnappingSourceWorker-DTs6wTmz.js","assets/lineSegment-DXWCVmMr.js","assets/sphere-c0j43xY2.js","assets/Octree-CgrAzCr1.js","assets/frustum-CPC-OtUa.js","assets/SceneLayerWorker-CRGmHckS.js","assets/projectVectorToVector-AneNvLXD.js","assets/WFSSourceWorker-DKx-ey2s.js","assets/wfsUtils-D1_eOyv0.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CqyjPdPl.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-DpMqCtyt.js","assets/StyleRepository-Crd0v5L9.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-DTO6C0uV.js","assets/jsonUtils-BsJIQevX.js","assets/typeUtils-B96jSaZ5.js","assets/ClassBreaksRenderer-D_fnHRQI.js","assets/commonProperties-DfhZAlTH.js","assets/visualVariableUtils-KYwunc5z.js","assets/jsonUtils-2Wisx-gz.js","assets/defaults3D-CHPPmL2B.js","assets/SimpleRenderer-DrfrwXF1.js","assets/UniqueValueRenderer-B2MVGAQd.js","assets/styleUtils-jKpxAVM-.js","assets/HUDMaterial.glsl-Dx3I9TmN.js","assets/hydratedFeatures-CKtTeCpt.js","assets/OutputColorHighlightOID.glsl-DLdSCsmv.js","assets/triangle-CoN13Wwp.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-Bo7wY2Bv.js","assets/placementUtils-C2or6QGB.js","assets/sdfPrimitives-d5DeGLOJ.js","assets/Texture-vRLI8CMr.js","assets/videoUtils-Bu53Dqm4.js","assets/requestImageUtils-Cuv_IY89.js","assets/RealisticTree.glsl-DcVpaTYU.js","assets/DefaultMaterial-DTbL0Ljf.js","assets/VertexBuffer-CJ5MkxjK.js","assets/BufferObject-CxEQZpTW.js","assets/boundedPlane-2oneZ_Gy.js","assets/FlowWorker-DuI1Vt2k.js","assets/ParquetSourceWorker-BvFeqe2T.js","assets/parquetUtils-COrE5H_y.js","assets/PanoramicMeshWorker-Blgv-ryR.js","assets/Popup-V3SrBaeO.js","assets/throttle-BwkCP8Gu.js","assets/unitFormatUtils-DlGn9gLS.js","assets/quantityUtils-Bl7hrXkC.js","assets/AttachmentInfo-XYdwMdIJ.js","assets/labelingInfo-RG5akMZ5.js","assets/featureUtils-DvE35aRp.js","assets/utils-DZrd1v6_.js","assets/cimSymbolUtils-C_Dvk0mM.js","assets/executeQueryJSON-tfDOoFIn.js","assets/FeatureSet-BkbKTa5E.js","assets/shared-BDH_2xsi.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/FeatureLayer-ot3b3njV.js","assets/FormTemplate-D0_wQYx9.js","assets/GraphicOrigin-DhzNGAmU.js","assets/editsZScale-Cd15wXwq.js","assets/APIKeyMixin-e6kZfCPZ.js","assets/BlendLayer-W5m_53wy.js","assets/jsonUtils-BwXzdzeO.js","assets/parser-CUryfDwH.js","assets/CustomParametersMixin-BQHI57mf.js","assets/DisplayFilteredLayer-DxhxlLnH.js","assets/scaleUtils-GAQqD3yh.js","assets/EditBusLayer-BzXmnJ1L.js","assets/FeatureEffectLayer-BJkl_RyY.js","assets/FeatureEffect-B_EC97Fm.js","assets/FeatureFilter-DWPD68Bg.js","assets/FeatureLayerBase-CQsZc1xB.js","assets/LayerFloorInfo-CK2qdzT9.js","assets/multiLayerServiceUtils-BPPgqvMQ.js","assets/Relationship-frBNRgiY.js","assets/serviceCapabilitiesUtils-fr0cjaIz.js","assets/infoFor3D-DhzudQro.js","assets/FeatureReductionLayer-Z0uEdiRy.js","assets/FeatureReductionSelection-Dg22-iR6.js","assets/OrderedLayer-BDjulG4H.js","assets/OrderByInfo-C3_FpHQH.js","assets/RefreshableLayer-BNpr-w2v.js","assets/ScaleRangeLayer-DMm-qftn.js","assets/TemporalLayer-Dzt2NDWB.js","assets/TimeInfo-Cu3O3xUW.js","assets/TrackableLayer-C92Qlhlp.js","assets/FeatureTemplate-fQOf3yKS.js","assets/FeatureType-vyxUPu06.js","assets/fieldProperties-BhdO_X7r.js","assets/TitleCreator-DgQBeSd3.js","assets/versionUtils-BNqYUoqC.js","assets/popupUtils-h9Xh7bvu.js","assets/NetworkElement-Da9jhDUq.js","assets/ReactiveSet-DnV7Kqd2.js","assets/symbolUtils-Cbeg4ZZj.js","assets/layerViewUtils-D94Fht4u.js","assets/arcadeUtils-CgF2_gaK.js","assets/arcade-CpAud98P.js","assets/arcadeEnvironment-CYiocv_u.js","assets/Dictionary-BOFa5nYQ.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-Btrc0b7v.js","assets/aiServices-DX296DEP.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-Cu3UdB64.js","assets/rasterFieldUtils-l28-YUNo.js","assets/batchExec-CX6Q5ux-.js","assets/webStyleSymbolUtils-C7mngta-.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/geometryServiceUtils-CSW5y3O7.js","assets/project-BPXZpPsI.js","assets/webglDeps-DTwTUbOo.js","assets/FramebufferObject-CDQCsHxW.js","assets/ProgramTemplate-BkYqvSgy.js","assets/VertexArrayObject-CrQyWlgN.js","assets/mapViewDeps-DMls4Tvk.js","assets/FeatureCommandQueue-DmdBSNlM.js","assets/GraphShaderModule-CyjcNX84.js","assets/utils-DjLrW99l.js","assets/WGLContainer-Vn7zDcsk.js","assets/Container-zOH_nXYC.js","assets/SDFHelper-C3ViweJd.js","assets/OverrideHelper-BPIn0cfo.js","assets/callExpressionWithFeature-D0KUcg4B.js","assets/GridShader-B6Zhc4yH.js","assets/testSVGPremultipliedAlpha-BWznBQtW.js","assets/SymbolFader-btMvajM8.js","assets/RenderingContext-BYkEdz37.js","assets/CIMResourceManager-DctHm823.js","assets/utils-kQDrQp0X.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-CCldMq4q.js","assets/GraphicContainer-CInDTaxO.js","assets/AGraphicContainer-B67bpyat.js","assets/TechniqueInstance-DxobVpJs.js","assets/TileContainer-DEwQq_q8.js","assets/gridUtils-BN9XHmFo.js","assets/geodesicUtils-BaaQ6aU4.js","assets/TileLayerView2D-DqKfQzcp.js","assets/imageUtils-Bo_TLHdU.js","assets/BitmapTechnique-BhwlNiCW.js","assets/bitmapUtils-DbMgaxwi.js","assets/LayerView2D-X4TLV-Wt.js","assets/HighlightGraphicContainer-CcK3OURI.js","assets/LayerView-CRBcMr37.js","assets/RefreshableLayerView-Cezaj-Eo.js","assets/MapServiceLayerViewHelper-UGo9Bf2q.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-BdKeqhiw.js","assets/sublayerUtils-BEQnBRaB.js","assets/popupUtils-DJ-WgnEJ.js","assets/highlightOptionsUtils-DYFS29r2.js","assets/FeatureLayerView2D-CCxJGulA.js","assets/timeSupport-CiMiYFVt.js","assets/AttributeBinsFeatureSet-NQiayvS8.js","assets/AttributeBinsQuery-DzdDMrjF.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-CNDDHbNH.js","assets/BitmapContainer-ClgtZDxp.js","assets/ExportStrategy-DSl2l7mT.js","assets/CatalogLayerView2D-Cjaoeo24.js","assets/CatalogDynamicGroupLayerView2D-DMI7Qs3G.js","assets/CatalogFootprintLayerView2D-D0VKZS19.js","assets/GeoRSSLayerView2D-CWMWQ1gb.js","assets/GraphicsLayerView2D-ByAjSKme.js","assets/GroupLayerView2D-B1TqYl58.js","assets/ImageryLayerView2D-CvjGIaux.js","assets/RasterVFDisplayObject-RIiQ93j8.js","assets/ImageryTileLayerView2D-BZox68Zr.js","assets/datasetUtils-DbeDsxv1.js","assets/rasterUtils-CUerUISH.js","assets/RawBlockCache-Dhz65Odg.js","assets/KMLLayerView2D-C7E32OeG.js","assets/kmlUtils-p9s555dR.js","assets/KnowledgeGraphLayerView2D-Bm9gmu5A.js","assets/MapImageLayerView2D-CygA5YbJ.js","assets/ExportImageParameters-DIYBZ7CA.js","assets/MapNotesLayerView2D-B0IZQQXz.js","assets/MediaLayerView2D-SWtPYO-N.js","assets/mediaLayerUtils-DZStmbCV.js","assets/OverlayContainer-CwzXBroY.js","assets/OGCFeatureLayerView2D-ZO_hJlcc.js","assets/RouteLayerView2D-DqWXM911.js","assets/Stop-CvBA5F7S.js","assets/networkEnums-oZoyK1Nh.js","assets/StreamLayerView2D-eYf4DQwP.js","assets/SubtypeGroupLayerView2D-D374UxK3.js","assets/VectorTileLayerView2D-DQRIwlgJ.js","assets/VideoLayerView2D-CqOyN4sJ.js","assets/GraphicsLayer-DnE-xBhE.js","assets/videoUtils-Bd5Hzkhk.js","assets/ControlPoint-D8J77bud.js","assets/WMSLayerView2D-B_8JiDFV.js","assets/ExportWMSImageParameters-BR5tHPl9.js","assets/WMTSLayerView2D-S-8XBWgK.js","assets/ElevationProfileAnalysisView2D-B7mb7nCz.js","assets/createUtils-DhEKKiWI.js","assets/distanceOperator-OyRLcJrL.js","assets/Point2D-ByVU2sJE.js","assets/Distance2DCalculator-CXhBP-8I-CObSmdFs.js","assets/ProjectionTransformation-C1_xzuB2.js","assets/Envelope2D-PYZ6irrd.js","assets/Transformation2D-HOoFpL6n.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-CrEAfhyR.js","assets/jsonConverter-ByCKxsmY.js","assets/simplifyOperator-FMvQm4KW.js","assets/operatorSimplify-B2cNcuA9.js","assets/mapCollectionUtils-G_-UctvW.js","assets/elevationInfoUtils-CnnRFkQ9.js","assets/getDefaultUnitForView-fIwQ9UVe.js","assets/SketchViewModel-BNk6PN7p.js","assets/hitTestSelectUtils-HcEV62yp.js","assets/geodeticLengthOperator-DJz1xMWq.js","assets/apng-CAQRQuzM.js","assets/index-DRubCFvG.js","assets/index-BlUxtbPa.js","assets/guid-LcV_DAvu.js","assets/useT9n-CepEZAQ0.js","assets/index-9AO_OPx6.js","assets/index-BewkzBMB.js","assets/dom-BsEQF65w.js","assets/observers-CQ52tLAy.js","assets/ref-DDaQFZc3.js","assets/static-D7CSsjXX.js","assets/form-DkF2X9pa.js","assets/interactive-B_IpKzAx.js","assets/label-CaHqd23i.js","assets/useSetFocus-BDo-_JzD.js"])))=>i.map(i=>d[i]);
var oke=Object.getPrototypeOf;var ake=Reflect.get;var TX=t=>{throw TypeError(t)};var C6=(t,e,n)=>e.has(t)||TX("Cannot "+n);var Nr=(t,e,n)=>(C6(t,e,"read from private field"),n?n.call(t):e.get(t)),Ru=(t,e,n)=>e.has(t)?TX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Mu=(t,e,n,r)=>(C6(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),AE=(t,e,n)=>(C6(t,e,"access private method"),n);var kX=(t,e,n)=>ake(oke(t),n,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I6={exports:{}},CE={},P6={exports:{}},Kn={};var AX;function lke(){if(AX)return Kn;AX=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(Z){return Z===null||typeof Z!="object"?null:(Z=h&&Z[h]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function b(Z,W,ne){this.props=Z,this.context=W,this.refs=_,this.updater=ne||g}b.prototype.isReactComponent={},b.prototype.setState=function(Z,W){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,W,"setState")},b.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function T(){}T.prototype=b.prototype;function A(Z,W,ne){this.props=Z,this.context=W,this.refs=_,this.updater=ne||g}var C=A.prototype=new T;C.constructor=A,y(C,b.prototype),C.isPureReactComponent=!0;var I=Array.isArray,R=Object.prototype.hasOwnProperty,V={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function N(Z,W,ne){var se,Q={},me=null,Ke=null;if(W!=null)for(se in W.ref!==void 0&&(Ke=W.ref),W.key!==void 0&&(me=""+W.key),W)R.call(W,se)&&!P.hasOwnProperty(se)&&(Q[se]=W[se]);var Ye=arguments.length-2;if(Ye===1)Q.children=ne;else if(1<Ye){for(var ke=Array(Ye),Ee=0;Ee<Ye;Ee++)ke[Ee]=arguments[Ee+2];Q.children=ke}if(Z&&Z.defaultProps)for(se in Ye=Z.defaultProps,Ye)Q[se]===void 0&&(Q[se]=Ye[se]);return{$$typeof:t,type:Z,key:me,ref:Ke,props:Q,_owner:V.current}}function L(Z,W){return{$$typeof:t,type:Z.type,key:W,ref:Z.ref,props:Z.props,_owner:Z._owner}}function O(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function F(Z){var W={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ne){return W[ne]})}var G=/\/+/g;function U(Z,W){return typeof Z=="object"&&Z!==null&&Z.key!=null?F(""+Z.key):W.toString(36)}function ue(Z,W,ne,se,Q){var me=typeof Z;(me==="undefined"||me==="boolean")&&(Z=null);var Ke=!1;if(Z===null)Ke=!0;else switch(me){case"string":case"number":Ke=!0;break;case"object":switch(Z.$$typeof){case t:case e:Ke=!0}}if(Ke)return Ke=Z,Q=Q(Ke),Z=se===""?"."+U(Ke,0):se,I(Q)?(ne="",Z!=null&&(ne=Z.replace(G,"$&/")+"/"),ue(Q,W,ne,"",function(Ee){return Ee})):Q!=null&&(O(Q)&&(Q=L(Q,ne+(!Q.key||Ke&&Ke.key===Q.key?"":(""+Q.key).replace(G,"$&/")+"/")+Z)),W.push(Q)),1;if(Ke=0,se=se===""?".":se+":",I(Z))for(var Ye=0;Ye<Z.length;Ye++){me=Z[Ye];var ke=se+U(me,Ye);Ke+=ue(me,W,ne,ke,Q)}else if(ke=f(Z),typeof ke=="function")for(Z=ke.call(Z),Ye=0;!(me=Z.next()).done;)me=me.value,ke=se+U(me,Ye++),Ke+=ue(me,W,ne,ke,Q);else if(me==="object")throw W=String(Z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Ke}function be(Z,W,ne){if(Z==null)return Z;var se=[],Q=0;return ue(Z,se,"","",function(me){return W.call(ne,me,Q++)}),se}function ze(Z){if(Z._status===-1){var W=Z._result;W=W(),W.then(function(ne){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ne)},function(ne){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ne)}),Z._status===-1&&(Z._status=0,Z._result=W)}if(Z._status===1)return Z._result.default;throw Z._result}var Ce={current:null},de={transition:null},Le={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:de,ReactCurrentOwner:V};function xe(){throw Error("act(...) is not supported in production builds of React.")}return Kn.Children={map:be,forEach:function(Z,W,ne){be(Z,function(){W.apply(this,arguments)},ne)},count:function(Z){var W=0;return be(Z,function(){W++}),W},toArray:function(Z){return be(Z,function(W){return W})||[]},only:function(Z){if(!O(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Kn.Component=b,Kn.Fragment=n,Kn.Profiler=i,Kn.PureComponent=A,Kn.StrictMode=r,Kn.Suspense=l,Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Le,Kn.act=xe,Kn.cloneElement=function(Z,W,ne){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var se=y({},Z.props),Q=Z.key,me=Z.ref,Ke=Z._owner;if(W!=null){if(W.ref!==void 0&&(me=W.ref,Ke=V.current),W.key!==void 0&&(Q=""+W.key),Z.type&&Z.type.defaultProps)var Ye=Z.type.defaultProps;for(ke in W)R.call(W,ke)&&!P.hasOwnProperty(ke)&&(se[ke]=W[ke]===void 0&&Ye!==void 0?Ye[ke]:W[ke])}var ke=arguments.length-2;if(ke===1)se.children=ne;else if(1<ke){Ye=Array(ke);for(var Ee=0;Ee<ke;Ee++)Ye[Ee]=arguments[Ee+2];se.children=Ye}return{$$typeof:t,type:Z.type,key:Q,ref:me,props:se,_owner:Ke}},Kn.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},Kn.createElement=N,Kn.createFactory=function(Z){var W=N.bind(null,Z);return W.type=Z,W},Kn.createRef=function(){return{current:null}},Kn.forwardRef=function(Z){return{$$typeof:a,render:Z}},Kn.isValidElement=O,Kn.lazy=function(Z){return{$$typeof:u,_payload:{_status:-1,_result:Z},_init:ze}},Kn.memo=function(Z,W){return{$$typeof:c,type:Z,compare:W===void 0?null:W}},Kn.startTransition=function(Z){var W=de.transition;de.transition={};try{Z()}finally{de.transition=W}},Kn.unstable_act=xe,Kn.useCallback=function(Z,W){return Ce.current.useCallback(Z,W)},Kn.useContext=function(Z){return Ce.current.useContext(Z)},Kn.useDebugValue=function(){},Kn.useDeferredValue=function(Z){return Ce.current.useDeferredValue(Z)},Kn.useEffect=function(Z,W){return Ce.current.useEffect(Z,W)},Kn.useId=function(){return Ce.current.useId()},Kn.useImperativeHandle=function(Z,W,ne){return Ce.current.useImperativeHandle(Z,W,ne)},Kn.useInsertionEffect=function(Z,W){return Ce.current.useInsertionEffect(Z,W)},Kn.useLayoutEffect=function(Z,W){return Ce.current.useLayoutEffect(Z,W)},Kn.useMemo=function(Z,W){return Ce.current.useMemo(Z,W)},Kn.useReducer=function(Z,W,ne){return Ce.current.useReducer(Z,W,ne)},Kn.useRef=function(Z){return Ce.current.useRef(Z)},Kn.useState=function(Z){return Ce.current.useState(Z)},Kn.useSyncExternalStore=function(Z,W,ne){return Ce.current.useSyncExternalStore(Z,W,ne)},Kn.useTransition=function(){return Ce.current.useTransition()},Kn.version="18.3.1",Kn}var CX;function ZA(){return CX||(CX=1,P6.exports=lke()),P6.exports}var IX;function cke(){if(IX)return CE;IX=1;var t=ZA(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,g=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:g,props:h,_owner:i.current}}return CE.Fragment=n,CE.jsx=o,CE.jsxs=o,CE}var PX;function uke(){return PX||(PX=1,I6.exports=cke()),I6.exports}var p=uke(),_P={},R6={exports:{}},Qa={},M6={exports:{}},N6={};var RX;function hke(){return RX||(RX=1,(function(t){function e(de,Le){var xe=de.length;de.push(Le);e:for(;0<xe;){var Z=xe-1>>>1,W=de[Z];if(0<i(W,Le))de[Z]=Le,de[xe]=W,xe=Z;else break e}}function n(de){return de.length===0?null:de[0]}function r(de){if(de.length===0)return null;var Le=de[0],xe=de.pop();if(xe!==Le){de[0]=xe;e:for(var Z=0,W=de.length,ne=W>>>1;Z<ne;){var se=2*(Z+1)-1,Q=de[se],me=se+1,Ke=de[me];if(0>i(Q,xe))me<W&&0>i(Ke,Q)?(de[Z]=Ke,de[me]=xe,Z=me):(de[Z]=Q,de[se]=xe,Z=se);else if(me<W&&0>i(Ke,xe))de[Z]=Ke,de[me]=xe,Z=me;else break e}}return Le}function i(de,Le){var xe=de.sortIndex-Le.sortIndex;return xe!==0?xe:de.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(de){for(var Le=n(c);Le!==null;){if(Le.callback===null)r(c);else if(Le.startTime<=de)r(c),Le.sortIndex=Le.expirationTime,e(l,Le);else break;Le=n(c)}}function I(de){if(_=!1,C(de),!y)if(n(l)!==null)y=!0,ze(R);else{var Le=n(c);Le!==null&&Ce(I,Le.startTime-de)}}function R(de,Le){y=!1,_&&(_=!1,T(N),N=-1),g=!0;var xe=f;try{for(C(Le),h=n(l);h!==null&&(!(h.expirationTime>Le)||de&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var W=Z(h.expirationTime<=Le);Le=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),C(Le)}else r(l);h=n(l)}if(h!==null)var ne=!0;else{var se=n(c);se!==null&&Ce(I,se.startTime-Le),ne=!1}return ne}finally{h=null,f=xe,g=!1}}var V=!1,P=null,N=-1,L=5,O=-1;function F(){return!(t.unstable_now()-O<L)}function G(){if(P!==null){var de=t.unstable_now();O=de;var Le=!0;try{Le=P(!0,de)}finally{Le?U():(V=!1,P=null)}}else V=!1}var U;if(typeof A=="function")U=function(){A(G)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,be=ue.port2;ue.port1.onmessage=G,U=function(){be.postMessage(null)}}else U=function(){b(G,0)};function ze(de){P=de,V||(V=!0,U())}function Ce(de,Le){N=b(function(){de(t.unstable_now())},Le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(de){de.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ze(R))},t.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<de?Math.floor(1e3/de):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(de){switch(f){case 1:case 2:case 3:var Le=3;break;default:Le=f}var xe=f;f=Le;try{return de()}finally{f=xe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(de,Le){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var xe=f;f=de;try{return Le()}finally{f=xe}},t.unstable_scheduleCallback=function(de,Le,xe){var Z=t.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?Z+xe:Z):xe=Z,de){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=xe+W,de={id:u++,callback:Le,priorityLevel:de,startTime:xe,expirationTime:W,sortIndex:-1},xe>Z?(de.sortIndex=xe,e(c,de),n(l)===null&&de===n(c)&&(_?(T(N),N=-1):_=!0,Ce(I,xe-Z))):(de.sortIndex=W,e(l,de),y||g||(y=!0,ze(R))),de},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(de){var Le=f;return function(){var xe=f;f=Le;try{return de.apply(this,arguments)}finally{f=xe}}}})(N6)),N6}var MX;function dke(){return MX||(MX=1,M6.exports=hke()),M6.exports}var NX;function fke(){if(NX)return Qa;NX=1;var t=ZA(),e=dke();function n(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function f(d){return l.call(h,d)?!0:l.call(u,d)?!1:c.test(d)?h[d]=!0:(u[d]=!0,!1)}function g(d,m,w,k){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,m,w,k){if(m===null||typeof m>"u"||g(d,m,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(d,m,w,k,M,D,K){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=k,this.attributeNamespace=M,this.mustUseProperty=w,this.propertyName=d,this.type=m,this.sanitizeURL=D,this.removeEmptyString=K}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new _(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];b[m]=new _(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new _(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new _(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new _(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new _(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new _(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new _(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new _(d,5,!1,d.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!0,!0)});function C(d,m,w,k){var M=b.hasOwnProperty(m)?b[m]:null;(M!==null?M.type!==0:k||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,w,M,k)&&(w=null),k||M===null?f(m)&&(w===null?d.removeAttribute(m):d.setAttribute(m,""+w)):M.mustUseProperty?d[M.propertyName]=w===null?M.type===3?!1:"":w:(m=M.attributeName,k=M.attributeNamespace,w===null?d.removeAttribute(m):(M=M.type,w=M===3||M===4&&w===!0?"":""+w,k?d.setAttributeNS(k,m,w):d.setAttribute(m,w))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),V=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),be=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),de=Symbol.iterator;function Le(d){return d===null||typeof d!="object"?null:(d=de&&d[de]||d["@@iterator"],typeof d=="function"?d:null)}var xe=Object.assign,Z;function W(d){if(Z===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);Z=m&&m[1]||""}return`
`+Z+d}var ne=!1;function se(d,m){if(!d||ne)return"";ne=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Fe){var k=Fe}Reflect.construct(d,[],m)}else{try{m.call()}catch(Fe){k=Fe}d.call(m.prototype)}else{try{throw Error()}catch(Fe){k=Fe}d()}}catch(Fe){if(Fe&&k&&typeof Fe.stack=="string"){for(var M=Fe.stack.split(`
`),D=k.stack.split(`
`),K=M.length-1,ce=D.length-1;1<=K&&0<=ce&&M[K]!==D[ce];)ce--;for(;1<=K&&0<=ce;K--,ce--)if(M[K]!==D[ce]){if(K!==1||ce!==1)do if(K--,ce--,0>ce||M[K]!==D[ce]){var fe=`
`+M[K].replace(" at new "," at ");return d.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",d.displayName)),fe}while(1<=K&&0<=ce);break}}}finally{ne=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?W(d):""}function Q(d){switch(d.tag){case 5:return W(d.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return d=se(d.type,!1),d;case 11:return d=se(d.type.render,!1),d;case 1:return d=se(d.type,!0),d;default:return""}}function me(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case P:return"Fragment";case V:return"Portal";case L:return"Profiler";case N:return"StrictMode";case U:return"Suspense";case ue:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case F:return(d.displayName||"Context")+".Consumer";case O:return(d._context.displayName||"Context")+".Provider";case G:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case be:return m=d.displayName||null,m!==null?m:me(d.type)||"Memo";case ze:m=d._payload,d=d._init;try{return me(d(m))}catch{}}return null}function Ke(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(m);case 8:return m===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Ye(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ke(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Ee(d){var m=ke(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),k=""+d[m];if(!d.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var M=w.get,D=w.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return M.call(this)},set:function(K){k=""+K,D.call(this,K)}}),Object.defineProperty(d,m,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(K){k=""+K},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function Dt(d){d._valueTracker||(d._valueTracker=Ee(d))}function Xe(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var w=m.getValue(),k="";return d&&(k=ke(d)?d.checked?"true":"false":d.value),d=k,d!==w?(m.setValue(d),!0):!1}function cn(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function jt(d,m){var w=m.checked;return xe({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function gn(d,m){var w=m.defaultValue==null?"":m.defaultValue,k=m.checked!=null?m.checked:m.defaultChecked;w=Ye(m.value!=null?m.value:w),d._wrapperState={initialChecked:k,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function wn(d,m){m=m.checked,m!=null&&C(d,"checked",m,!1)}function pt(d,m){wn(d,m);var w=Ye(m.value),k=m.type;if(w!=null)k==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(k==="submit"||k==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?zn(d,m.type,w):m.hasOwnProperty("defaultValue")&&zn(d,m.type,Ye(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function hr(d,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var k=m.type;if(!(k!=="submit"&&k!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,w||m===d.value||(d.value=m),d.defaultValue=m}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function zn(d,m,w){(m!=="number"||cn(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var Hn=Array.isArray;function ei(d,m,w,k){if(d=d.options,m){m={};for(var M=0;M<w.length;M++)m["$"+w[M]]=!0;for(w=0;w<d.length;w++)M=m.hasOwnProperty("$"+d[w].value),d[w].selected!==M&&(d[w].selected=M),M&&k&&(d[w].defaultSelected=!0)}else{for(w=""+Ye(w),m=null,M=0;M<d.length;M++){if(d[M].value===w){d[M].selected=!0,k&&(d[M].defaultSelected=!0);return}m!==null||d[M].disabled||(m=d[M])}m!==null&&(m.selected=!0)}}function xo(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return xe({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Rr(d,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(n(92));if(Hn(w)){if(1<w.length)throw Error(n(93));w=w[0]}m=w}m==null&&(m=""),w=m}d._wrapperState={initialValue:Ye(w)}}function Ai(d,m){var w=Ye(m.value),k=Ye(m.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),m.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),k!=null&&(d.defaultValue=""+k)}function js(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function wt(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qn(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?wt(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var dr,Vt=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,k,M){MSApp.execUnsafeLocalFunction(function(){return d(m,w,k,M)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=dr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function Dn(d,m){if(m){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=m;return}}d.textContent=m}var tn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wo=["Webkit","ms","Moz","O"];Object.keys(tn).forEach(function(d){wo.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),tn[m]=tn[d]})});function Ui(d,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||tn.hasOwnProperty(d)&&tn[d]?(""+m).trim():m+"px"}function Fs(d,m){d=d.style;for(var w in m)if(m.hasOwnProperty(w)){var k=w.indexOf("--")===0,M=Ui(w,m[w],k);w==="float"&&(w="cssFloat"),k?d.setProperty(w,M):d[w]=M}}var Nn=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ci(d,m){if(m){if(Nn[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function qe(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ie=null;function Pe(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var rn=null,z=null,Tt=null;function X(d){if(d=dE(d)){if(typeof rn!="function")throw Error(n(280));var m=d.stateNode;m&&(m=LI(m),rn(d.stateNode,d.type,m))}}function le(d){z?Tt?Tt.push(d):Tt=[d]:z=d}function Ve(){if(z){var d=z,m=Tt;if(Tt=z=null,X(d),m)for(d=0;d<m.length;d++)X(m[d])}}function te(d,m){return d(m)}function ve(){}var De=!1;function He(d,m,w){if(De)return d(m,w);De=!0;try{return te(d,m,w)}finally{De=!1,(z!==null||Tt!==null)&&(ve(),Ve())}}function Ge(d,m){var w=d.stateNode;if(w===null)return null;var k=LI(w);if(k===null)return null;w=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var Ze=!1;if(a)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Ze=!1}function Mt(d,m,w,k,M,D,K,ce,fe){var Fe=Array.prototype.slice.call(arguments,3);try{m.apply(w,Fe)}catch(ct){this.onError(ct)}}var Gt=!1,_n=null,q=!1,ie=null,ee={onError:function(d){Gt=!0,_n=d}};function re(d,m,w,k,M,D,K,ce,fe){Gt=!1,_n=null,Mt.apply(ee,arguments)}function oe(d,m,w,k,M,D,K,ce,fe){if(re.apply(this,arguments),Gt){if(Gt){var Fe=_n;Gt=!1,_n=null}else throw Error(n(198));q||(q=!0,ie=Fe)}}function ae(d){var m=d,w=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(w=m.return),d=m.return;while(d)}return m.tag===3?w:null}function Me(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Be(d){if(ae(d)!==d)throw Error(n(188))}function Re(d){var m=d.alternate;if(!m){if(m=ae(d),m===null)throw Error(n(188));return m!==d?null:d}for(var w=d,k=m;;){var M=w.return;if(M===null)break;var D=M.alternate;if(D===null){if(k=M.return,k!==null){w=k;continue}break}if(M.child===D.child){for(D=M.child;D;){if(D===w)return Be(M),d;if(D===k)return Be(M),m;D=D.sibling}throw Error(n(188))}if(w.return!==k.return)w=M,k=D;else{for(var K=!1,ce=M.child;ce;){if(ce===w){K=!0,w=M,k=D;break}if(ce===k){K=!0,k=M,w=D;break}ce=ce.sibling}if(!K){for(ce=D.child;ce;){if(ce===w){K=!0,w=D,k=M;break}if(ce===k){K=!0,k=D,w=M;break}ce=ce.sibling}if(!K)throw Error(n(189))}}if(w.alternate!==k)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:m}function Oe(d){return d=Re(d),d!==null?je(d):null}function je(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=je(d);if(m!==null)return m;d=d.sibling}return null}var ut=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,Pt=e.unstable_shouldYield,ht=e.unstable_requestPaint,dt=e.unstable_now,Tn=e.unstable_getCurrentPriorityLevel,Mr=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,_i=e.unstable_NormalPriority,Eu=e.unstable_LowPriority,Ic=e.unstable_IdlePriority,Fl=null,os=null;function Vp(d){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Fl,d,void 0,(d.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:E0,Rh=Math.log,Pc=Math.LN2;function E0(d){return d>>>=0,d===0?32:31-(Rh(d)/Pc|0)|0}var Mh=64,zp=4194304;function Er(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Qd(d,m){var w=d.pendingLanes;if(w===0)return 0;var k=0,M=d.suspendedLanes,D=d.pingedLanes,K=w&268435455;if(K!==0){var ce=K&~M;ce!==0?k=Er(ce):(D&=K,D!==0&&(k=Er(D)))}else K=w&~M,K!==0?k=Er(K):D!==0&&(k=Er(D));if(k===0)return 0;if(m!==0&&m!==k&&(m&M)===0&&(M=k&-k,D=m&-m,M>=D||M===16&&(D&4194240)!==0))return m;if((k&4)!==0&&(k|=w&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=k;0<m;)w=31-Ii(m),M=1<<w,k|=d[w],m&=~M;return k}function S0(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T0(d,m){for(var w=d.suspendedLanes,k=d.pingedLanes,M=d.expirationTimes,D=d.pendingLanes;0<D;){var K=31-Ii(D),ce=1<<K,fe=M[K];fe===-1?((ce&w)===0||(ce&k)!==0)&&(M[K]=S0(ce,m)):fe<=m&&(d.expiredLanes|=ce),D&=~ce}}function Wb(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Hb(){var d=Mh;return Mh<<=1,(Mh&4194240)===0&&(Mh=64),d}function qb(d){for(var m=[],w=0;31>w;w++)m.push(d);return m}function k0(d,m,w){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-Ii(m),d[m]=w}function oD(d,m){var w=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var k=d.eventTimes;for(d=d.expirationTimes;0<w;){var M=31-Ii(w),D=1<<M;m[M]=0,k[M]=-1,d[M]=-1,w&=~D}}function Kb(d,m){var w=d.entangledLanes|=m;for(d=d.entanglements;w;){var k=31-Ii(w),M=1<<k;M&m|d[k]&m&&(d[k]|=m),w&=~M}}var sr=0;function Nh(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Yb,Nv,Xb,Zb,Jb,Lh=!1,Lv=[],Oh=null,Dh=null,bo=null,A0=new Map,ef=new Map,$l=[],vI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gp(d,m){switch(d){case"focusin":case"focusout":Oh=null;break;case"dragenter":case"dragleave":Dh=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":A0.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(m.pointerId)}}function Su(d,m,w,k,M,D){return d===null||d.nativeEvent!==D?(d={blockedOn:m,domEventName:w,eventSystemFlags:k,nativeEvent:D,targetContainers:[M]},m!==null&&(m=dE(m),m!==null&&Nv(m)),d):(d.eventSystemFlags|=k,m=d.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),d)}function _I(d,m,w,k,M){switch(m){case"focusin":return Oh=Su(Oh,d,m,w,k,M),!0;case"dragenter":return Dh=Su(Dh,d,m,w,k,M),!0;case"mouseover":return bo=Su(bo,d,m,w,k,M),!0;case"pointerover":var D=M.pointerId;return A0.set(D,Su(A0.get(D)||null,d,m,w,k,M)),!0;case"gotpointercapture":return D=M.pointerId,ef.set(D,Su(ef.get(D)||null,d,m,w,k,M)),!0}return!1}function Ov(d){var m=R0(d.target);if(m!==null){var w=ae(m);if(w!==null){if(m=w.tag,m===13){if(m=Me(w),m!==null){d.blockedOn=m,Jb(d.priority,function(){Xb(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ti(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var w=Dv(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var k=new w.constructor(w.type,w);Ie=k,w.target.dispatchEvent(k),Ie=null}else return m=dE(w),m!==null&&Nv(m),d.blockedOn=w,!1;m.shift()}return!0}function xI(d,m,w){ti(d)&&w.delete(m)}function aD(){Lh=!1,Oh!==null&&ti(Oh)&&(Oh=null),Dh!==null&&ti(Dh)&&(Dh=null),bo!==null&&ti(bo)&&(bo=null),A0.forEach(xI),ef.forEach(xI)}function Up(d,m){d.blockedOn===m&&(d.blockedOn=null,Lh||(Lh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,aD)))}function Bp(d){function m(M){return Up(M,d)}if(0<Lv.length){Up(Lv[0],d);for(var w=1;w<Lv.length;w++){var k=Lv[w];k.blockedOn===d&&(k.blockedOn=null)}}for(Oh!==null&&Up(Oh,d),Dh!==null&&Up(Dh,d),bo!==null&&Up(bo,d),A0.forEach(m),ef.forEach(m),w=0;w<$l.length;w++)k=$l[w],k.blockedOn===d&&(k.blockedOn=null);for(;0<$l.length&&(w=$l[0],w.blockedOn===null);)Ov(w),w.blockedOn===null&&$l.shift()}var tf=I.ReactCurrentBatchConfig,nf=!0;function jh(d,m,w,k){var M=sr,D=tf.transition;tf.transition=null;try{sr=1,Qb(d,m,w,k)}finally{sr=M,tf.transition=D}}function wI(d,m,w,k){var M=sr,D=tf.transition;tf.transition=null;try{sr=4,Qb(d,m,w,k)}finally{sr=M,tf.transition=D}}function Qb(d,m,w,k){if(nf){var M=Dv(d,m,w,k);if(M===null)vD(d,m,k,Fh,w),Gp(d,k);else if(_I(M,d,m,w,k))k.stopPropagation();else if(Gp(d,k),m&4&&-1<vI.indexOf(d)){for(;M!==null;){var D=dE(M);if(D!==null&&Yb(D),D=Dv(d,m,w,k),D===null&&vD(d,m,k,Fh,w),D===M)break;M=D}M!==null&&k.stopPropagation()}else vD(d,m,k,null,w)}}var Fh=null;function Dv(d,m,w,k){if(Fh=null,d=Pe(k),d=R0(d),d!==null)if(m=ae(d),m===null)d=null;else if(w=m.tag,w===13){if(d=Me(m),d!==null)return d;d=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Fh=d,null}function jv(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tn()){case Mr:return 1;case Fr:return 4;case _i:case Eu:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var Vl=null,Fv=null,rf=null;function bI(){if(rf)return rf;var d,m=Fv,w=m.length,k,M="value"in Vl?Vl.value:Vl.textContent,D=M.length;for(d=0;d<w&&m[d]===M[d];d++);var K=w-d;for(k=1;k<=K&&m[w-k]===M[D-k];k++);return rf=M.slice(d,1<k?1-k:void 0)}function C0(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function $h(){return!0}function eE(){return!1}function zo(d){function m(w,k,M,D,K){this._reactName=w,this._targetInst=M,this.type=k,this.nativeEvent=D,this.target=K,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(w=d[ce],this[ce]=w?w(D):D[ce]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?$h:eE,this.isPropagationStopped=eE,this}return xe(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=$h)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=$h)},persist:function(){},isPersistent:$h}),m}var Vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I0=zo(Vh),Wp=xe({},Vh,{view:0,detail:0}),$v=zo(Wp),Vv,zv,zl,P0=xe({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ln,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==zl&&(zl&&d.type==="mousemove"?(Vv=d.screenX-zl.screenX,zv=d.screenY-zl.screenY):zv=Vv=0,zl=d),Vv)},movementY:function(d){return"movementY"in d?d.movementY:zv}}),tE=zo(P0),EI=xe({},P0,{dataTransfer:0}),SI=zo(EI),Gv=xe({},Wp,{relatedTarget:0}),Eo=zo(Gv),TI=xe({},Vh,{animationName:0,elapsedTime:0,pseudoElement:0}),kI=zo(TI),Hp=xe({},Vh,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),S=zo(Hp),j=xe({},Vh,{data:0}),B=zo(j),J={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Te={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Et(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=$e[d])?!!m[d]:!1}function Ln(){return Et}var as=xe({},Wp,{key:function(d){if(d.key){var m=J[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=C0(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Te[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ln,charCode:function(d){return d.type==="keypress"?C0(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?C0(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),$r=zo(as),_s=xe({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gl=zo(_s),sf=xe({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ln}),zh=zo(sf),Gh=xe({},Vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uv=zo(Gh),nE=xe({},P0,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),eTe=zo(nE),tTe=[9,13,27,32],lD=a&&"CompositionEvent"in window,rE=null;a&&"documentMode"in document&&(rE=document.documentMode);var nTe=a&&"TextEvent"in window&&!rE,yK=a&&(!lD||rE&&8<rE&&11>=rE),vK=" ",_K=!1;function xK(d,m){switch(d){case"keyup":return tTe.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wK(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Bv=!1;function rTe(d,m){switch(d){case"compositionend":return wK(m);case"keypress":return m.which!==32?null:(_K=!0,vK);case"textInput":return d=m.data,d===vK&&_K?null:d;default:return null}}function iTe(d,m){if(Bv)return d==="compositionend"||!lD&&xK(d,m)?(d=bI(),rf=Fv=Vl=null,Bv=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return yK&&m.locale!=="ko"?null:m.data;default:return null}}var sTe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bK(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!sTe[d.type]:m==="textarea"}function EK(d,m,w,k){le(k),m=RI(m,"onChange"),0<m.length&&(w=new I0("onChange","change",null,w,k),d.push({event:w,listeners:m}))}var iE=null,sE=null;function oTe(d){zK(d,0)}function AI(d){var m=Yv(d);if(Xe(m))return d}function aTe(d,m){if(d==="change")return m}var SK=!1;if(a){var cD;if(a){var uD="oninput"in document;if(!uD){var TK=document.createElement("div");TK.setAttribute("oninput","return;"),uD=typeof TK.oninput=="function"}cD=uD}else cD=!1;SK=cD&&(!document.documentMode||9<document.documentMode)}function kK(){iE&&(iE.detachEvent("onpropertychange",AK),sE=iE=null)}function AK(d){if(d.propertyName==="value"&&AI(sE)){var m=[];EK(m,sE,d,Pe(d)),He(oTe,m)}}function lTe(d,m,w){d==="focusin"?(kK(),iE=m,sE=w,iE.attachEvent("onpropertychange",AK)):d==="focusout"&&kK()}function cTe(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return AI(sE)}function uTe(d,m){if(d==="click")return AI(m)}function hTe(d,m){if(d==="input"||d==="change")return AI(m)}function dTe(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Tu=typeof Object.is=="function"?Object.is:dTe;function oE(d,m){if(Tu(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var w=Object.keys(d),k=Object.keys(m);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var M=w[k];if(!l.call(m,M)||!Tu(d[M],m[M]))return!1}return!0}function CK(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function IK(d,m){var w=CK(d);d=0;for(var k;w;){if(w.nodeType===3){if(k=d+w.textContent.length,d<=m&&k>=m)return{node:w,offset:m-d};d=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=CK(w)}}function PK(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?PK(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function RK(){for(var d=window,m=cn();m instanceof d.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)d=m.contentWindow;else break;m=cn(d.document)}return m}function hD(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function fTe(d){var m=RK(),w=d.focusedElem,k=d.selectionRange;if(m!==w&&w&&w.ownerDocument&&PK(w.ownerDocument.documentElement,w)){if(k!==null&&hD(w)){if(m=k.start,d=k.end,d===void 0&&(d=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(d,w.value.length);else if(d=(m=w.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var M=w.textContent.length,D=Math.min(k.start,M);k=k.end===void 0?D:Math.min(k.end,M),!d.extend&&D>k&&(M=k,k=D,D=M),M=IK(w,D);var K=IK(w,k);M&&K&&(d.rangeCount!==1||d.anchorNode!==M.node||d.anchorOffset!==M.offset||d.focusNode!==K.node||d.focusOffset!==K.offset)&&(m=m.createRange(),m.setStart(M.node,M.offset),d.removeAllRanges(),D>k?(d.addRange(m),d.extend(K.node,K.offset)):(m.setEnd(K.node,K.offset),d.addRange(m)))}}for(m=[],d=w;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)d=m[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var pTe=a&&"documentMode"in document&&11>=document.documentMode,Wv=null,dD=null,aE=null,fD=!1;function MK(d,m,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;fD||Wv==null||Wv!==cn(k)||(k=Wv,"selectionStart"in k&&hD(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),aE&&oE(aE,k)||(aE=k,k=RI(dD,"onSelect"),0<k.length&&(m=new I0("onSelect","select",null,m,w),d.push({event:m,listeners:k}),m.target=Wv)))}function CI(d,m){var w={};return w[d.toLowerCase()]=m.toLowerCase(),w["Webkit"+d]="webkit"+m,w["Moz"+d]="moz"+m,w}var Hv={animationend:CI("Animation","AnimationEnd"),animationiteration:CI("Animation","AnimationIteration"),animationstart:CI("Animation","AnimationStart"),transitionend:CI("Transition","TransitionEnd")},pD={},NK={};a&&(NK=document.createElement("div").style,"AnimationEvent"in window||(delete Hv.animationend.animation,delete Hv.animationiteration.animation,delete Hv.animationstart.animation),"TransitionEvent"in window||delete Hv.transitionend.transition);function II(d){if(pD[d])return pD[d];if(!Hv[d])return d;var m=Hv[d],w;for(w in m)if(m.hasOwnProperty(w)&&w in NK)return pD[d]=m[w];return d}var LK=II("animationend"),OK=II("animationiteration"),DK=II("animationstart"),jK=II("transitionend"),FK=new Map,$K="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qp(d,m){FK.set(d,m),s(m,[d])}for(var mD=0;mD<$K.length;mD++){var gD=$K[mD],mTe=gD.toLowerCase(),gTe=gD[0].toUpperCase()+gD.slice(1);qp(mTe,"on"+gTe)}qp(LK,"onAnimationEnd"),qp(OK,"onAnimationIteration"),qp(DK,"onAnimationStart"),qp("dblclick","onDoubleClick"),qp("focusin","onFocus"),qp("focusout","onBlur"),qp(jK,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yTe=new Set("cancel close invalid load scroll toggle".split(" ").concat(lE));function VK(d,m,w){var k=d.type||"unknown-event";d.currentTarget=w,oe(k,m,void 0,d),d.currentTarget=null}function zK(d,m){m=(m&4)!==0;for(var w=0;w<d.length;w++){var k=d[w],M=k.event;k=k.listeners;e:{var D=void 0;if(m)for(var K=k.length-1;0<=K;K--){var ce=k[K],fe=ce.instance,Fe=ce.currentTarget;if(ce=ce.listener,fe!==D&&M.isPropagationStopped())break e;VK(M,ce,Fe),D=fe}else for(K=0;K<k.length;K++){if(ce=k[K],fe=ce.instance,Fe=ce.currentTarget,ce=ce.listener,fe!==D&&M.isPropagationStopped())break e;VK(M,ce,Fe),D=fe}}}if(q)throw d=ie,q=!1,ie=null,d}function ui(d,m){var w=m[SD];w===void 0&&(w=m[SD]=new Set);var k=d+"__bubble";w.has(k)||(GK(m,d,2,!1),w.add(k))}function yD(d,m,w){var k=0;m&&(k|=4),GK(w,d,k,m)}var PI="_reactListening"+Math.random().toString(36).slice(2);function cE(d){if(!d[PI]){d[PI]=!0,r.forEach(function(w){w!=="selectionchange"&&(yTe.has(w)||yD(w,!1,d),yD(w,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[PI]||(m[PI]=!0,yD("selectionchange",!1,m))}}function GK(d,m,w,k){switch(jv(m)){case 1:var M=jh;break;case 4:M=wI;break;default:M=Qb}w=M.bind(null,m,w,d),M=void 0,!Ze||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),k?M!==void 0?d.addEventListener(m,w,{capture:!0,passive:M}):d.addEventListener(m,w,!0):M!==void 0?d.addEventListener(m,w,{passive:M}):d.addEventListener(m,w,!1)}function vD(d,m,w,k,M){var D=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var K=k.tag;if(K===3||K===4){var ce=k.stateNode.containerInfo;if(ce===M||ce.nodeType===8&&ce.parentNode===M)break;if(K===4)for(K=k.return;K!==null;){var fe=K.tag;if((fe===3||fe===4)&&(fe=K.stateNode.containerInfo,fe===M||fe.nodeType===8&&fe.parentNode===M))return;K=K.return}for(;ce!==null;){if(K=R0(ce),K===null)return;if(fe=K.tag,fe===5||fe===6){k=D=K;continue e}ce=ce.parentNode}}k=k.return}He(function(){var Fe=D,ct=Pe(w),ft=[];e:{var st=FK.get(d);if(st!==void 0){var Nt=I0,Ut=d;switch(d){case"keypress":if(C0(w)===0)break e;case"keydown":case"keyup":Nt=$r;break;case"focusin":Ut="focus",Nt=Eo;break;case"focusout":Ut="blur",Nt=Eo;break;case"beforeblur":case"afterblur":Nt=Eo;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=tE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=SI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=zh;break;case LK:case OK:case DK:Nt=kI;break;case jK:Nt=Uv;break;case"scroll":Nt=$v;break;case"wheel":Nt=eTe;break;case"copy":case"cut":case"paste":Nt=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Gl}var Yt=(m&4)!==0,ls=!Yt&&d==="scroll",Se=Yt?st!==null?st+"Capture":null:st;Yt=[];for(var ye=Fe,Ne;ye!==null;){Ne=ye;var gt=Ne.stateNode;if(Ne.tag===5&&gt!==null&&(Ne=gt,Se!==null&&(gt=Ge(ye,Se),gt!=null&&Yt.push(uE(ye,gt,Ne)))),ls)break;ye=ye.return}0<Yt.length&&(st=new Nt(st,Ut,null,w,ct),ft.push({event:st,listeners:Yt}))}}if((m&7)===0){e:{if(st=d==="mouseover"||d==="pointerover",Nt=d==="mouseout"||d==="pointerout",st&&w!==Ie&&(Ut=w.relatedTarget||w.fromElement)&&(R0(Ut)||Ut[of]))break e;if((Nt||st)&&(st=ct.window===ct?ct:(st=ct.ownerDocument)?st.defaultView||st.parentWindow:window,Nt?(Ut=w.relatedTarget||w.toElement,Nt=Fe,Ut=Ut?R0(Ut):null,Ut!==null&&(ls=ae(Ut),Ut!==ls||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Nt=null,Ut=Fe),Nt!==Ut)){if(Yt=tE,gt="onMouseLeave",Se="onMouseEnter",ye="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=Gl,gt="onPointerLeave",Se="onPointerEnter",ye="pointer"),ls=Nt==null?st:Yv(Nt),Ne=Ut==null?st:Yv(Ut),st=new Yt(gt,ye+"leave",Nt,w,ct),st.target=ls,st.relatedTarget=Ne,gt=null,R0(ct)===Fe&&(Yt=new Yt(Se,ye+"enter",Ut,w,ct),Yt.target=Ne,Yt.relatedTarget=ls,gt=Yt),ls=gt,Nt&&Ut)t:{for(Yt=Nt,Se=Ut,ye=0,Ne=Yt;Ne;Ne=qv(Ne))ye++;for(Ne=0,gt=Se;gt;gt=qv(gt))Ne++;for(;0<ye-Ne;)Yt=qv(Yt),ye--;for(;0<Ne-ye;)Se=qv(Se),Ne--;for(;ye--;){if(Yt===Se||Se!==null&&Yt===Se.alternate)break t;Yt=qv(Yt),Se=qv(Se)}Yt=null}else Yt=null;Nt!==null&&UK(ft,st,Nt,Yt,!1),Ut!==null&&ls!==null&&UK(ft,ls,Ut,Yt,!0)}}e:{if(st=Fe?Yv(Fe):window,Nt=st.nodeName&&st.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&st.type==="file")var Jt=aTe;else if(bK(st))if(SK)Jt=hTe;else{Jt=cTe;var dn=lTe}else(Nt=st.nodeName)&&Nt.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Jt=uTe);if(Jt&&(Jt=Jt(d,Fe))){EK(ft,Jt,w,ct);break e}dn&&dn(d,st,Fe),d==="focusout"&&(dn=st._wrapperState)&&dn.controlled&&st.type==="number"&&zn(st,"number",st.value)}switch(dn=Fe?Yv(Fe):window,d){case"focusin":(bK(dn)||dn.contentEditable==="true")&&(Wv=dn,dD=Fe,aE=null);break;case"focusout":aE=dD=Wv=null;break;case"mousedown":fD=!0;break;case"contextmenu":case"mouseup":case"dragend":fD=!1,MK(ft,w,ct);break;case"selectionchange":if(pTe)break;case"keydown":case"keyup":MK(ft,w,ct)}var fn;if(lD)e:{switch(d){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Bv?xK(d,w)&&(kn="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(kn="onCompositionStart");kn&&(yK&&w.locale!=="ko"&&(Bv||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Bv&&(fn=bI()):(Vl=ct,Fv="value"in Vl?Vl.value:Vl.textContent,Bv=!0)),dn=RI(Fe,kn),0<dn.length&&(kn=new B(kn,d,null,w,ct),ft.push({event:kn,listeners:dn}),fn?kn.data=fn:(fn=wK(w),fn!==null&&(kn.data=fn)))),(fn=nTe?rTe(d,w):iTe(d,w))&&(Fe=RI(Fe,"onBeforeInput"),0<Fe.length&&(ct=new B("onBeforeInput","beforeinput",null,w,ct),ft.push({event:ct,listeners:Fe}),ct.data=fn))}zK(ft,m)})}function uE(d,m,w){return{instance:d,listener:m,currentTarget:w}}function RI(d,m){for(var w=m+"Capture",k=[];d!==null;){var M=d,D=M.stateNode;M.tag===5&&D!==null&&(M=D,D=Ge(d,w),D!=null&&k.unshift(uE(d,D,M)),D=Ge(d,m),D!=null&&k.push(uE(d,D,M))),d=d.return}return k}function qv(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function UK(d,m,w,k,M){for(var D=m._reactName,K=[];w!==null&&w!==k;){var ce=w,fe=ce.alternate,Fe=ce.stateNode;if(fe!==null&&fe===k)break;ce.tag===5&&Fe!==null&&(ce=Fe,M?(fe=Ge(w,D),fe!=null&&K.unshift(uE(w,fe,ce))):M||(fe=Ge(w,D),fe!=null&&K.push(uE(w,fe,ce)))),w=w.return}K.length!==0&&d.push({event:m,listeners:K})}var vTe=/\r\n?/g,_Te=/\u0000|\uFFFD/g;function BK(d){return(typeof d=="string"?d:""+d).replace(vTe,`
`).replace(_Te,"")}function MI(d,m,w){if(m=BK(m),BK(d)!==m&&w)throw Error(n(425))}function NI(){}var _D=null,xD=null;function wD(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var bD=typeof setTimeout=="function"?setTimeout:void 0,xTe=typeof clearTimeout=="function"?clearTimeout:void 0,WK=typeof Promise=="function"?Promise:void 0,wTe=typeof queueMicrotask=="function"?queueMicrotask:typeof WK<"u"?function(d){return WK.resolve(null).then(d).catch(bTe)}:bD;function bTe(d){setTimeout(function(){throw d})}function ED(d,m){var w=m,k=0;do{var M=w.nextSibling;if(d.removeChild(w),M&&M.nodeType===8)if(w=M.data,w==="/$"){if(k===0){d.removeChild(M),Bp(m);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=M}while(w);Bp(m)}function Kp(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function HK(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return d;m--}else w==="/$"&&m++}d=d.previousSibling}return null}var Kv=Math.random().toString(36).slice(2),Uh="__reactFiber$"+Kv,hE="__reactProps$"+Kv,of="__reactContainer$"+Kv,SD="__reactEvents$"+Kv,ETe="__reactListeners$"+Kv,STe="__reactHandles$"+Kv;function R0(d){var m=d[Uh];if(m)return m;for(var w=d.parentNode;w;){if(m=w[of]||w[Uh]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(d=HK(d);d!==null;){if(w=d[Uh])return w;d=HK(d)}return m}d=w,w=d.parentNode}return null}function dE(d){return d=d[Uh]||d[of],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Yv(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function LI(d){return d[hE]||null}var TD=[],Xv=-1;function Yp(d){return{current:d}}function hi(d){0>Xv||(d.current=TD[Xv],TD[Xv]=null,Xv--)}function oi(d,m){Xv++,TD[Xv]=d.current,d.current=m}var Xp={},Go=Yp(Xp),Ka=Yp(!1),M0=Xp;function Zv(d,m){var w=d.type.contextTypes;if(!w)return Xp;var k=d.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===m)return k.__reactInternalMemoizedMaskedChildContext;var M={},D;for(D in w)M[D]=m[D];return k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=M),M}function Ya(d){return d=d.childContextTypes,d!=null}function OI(){hi(Ka),hi(Go)}function qK(d,m,w){if(Go.current!==Xp)throw Error(n(168));oi(Go,m),oi(Ka,w)}function KK(d,m,w){var k=d.stateNode;if(m=m.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var M in k)if(!(M in m))throw Error(n(108,Ke(d)||"Unknown",M));return xe({},w,k)}function DI(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Xp,M0=Go.current,oi(Go,d),oi(Ka,Ka.current),!0}function YK(d,m,w){var k=d.stateNode;if(!k)throw Error(n(169));w?(d=KK(d,m,M0),k.__reactInternalMemoizedMergedChildContext=d,hi(Ka),hi(Go),oi(Go,d)):hi(Ka),oi(Ka,w)}var af=null,jI=!1,kD=!1;function XK(d){af===null?af=[d]:af.push(d)}function TTe(d){jI=!0,XK(d)}function Zp(){if(!kD&&af!==null){kD=!0;var d=0,m=sr;try{var w=af;for(sr=1;d<w.length;d++){var k=w[d];do k=k(!0);while(k!==null)}af=null,jI=!1}catch(M){throw af!==null&&(af=af.slice(d+1)),ut(Mr,Zp),M}finally{sr=m,kD=!1}}return null}var Jv=[],Qv=0,FI=null,$I=0,Rc=[],Mc=0,N0=null,lf=1,cf="";function L0(d,m){Jv[Qv++]=$I,Jv[Qv++]=FI,FI=d,$I=m}function ZK(d,m,w){Rc[Mc++]=lf,Rc[Mc++]=cf,Rc[Mc++]=N0,N0=d;var k=lf;d=cf;var M=32-Ii(k)-1;k&=~(1<<M),w+=1;var D=32-Ii(m)+M;if(30<D){var K=M-M%5;D=(k&(1<<K)-1).toString(32),k>>=K,M-=K,lf=1<<32-Ii(m)+M|w<<M|k,cf=D+d}else lf=1<<D|w<<M|k,cf=d}function AD(d){d.return!==null&&(L0(d,1),ZK(d,1,0))}function CD(d){for(;d===FI;)FI=Jv[--Qv],Jv[Qv]=null,$I=Jv[--Qv],Jv[Qv]=null;for(;d===N0;)N0=Rc[--Mc],Rc[Mc]=null,cf=Rc[--Mc],Rc[Mc]=null,lf=Rc[--Mc],Rc[Mc]=null}var Ul=null,Bl=null,xi=!1,ku=null;function JK(d,m){var w=Dc(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=d,m=d.deletions,m===null?(d.deletions=[w],d.flags|=16):m.push(w)}function QK(d,m){switch(d.tag){case 5:var w=d.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Ul=d,Bl=Kp(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Ul=d,Bl=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=N0!==null?{id:lf,overflow:cf}:null,d.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=Dc(18,null,null,0),w.stateNode=m,w.return=d,d.child=w,Ul=d,Bl=null,!0):!1;default:return!1}}function ID(d){return(d.mode&1)!==0&&(d.flags&128)===0}function PD(d){if(xi){var m=Bl;if(m){var w=m;if(!QK(d,m)){if(ID(d))throw Error(n(418));m=Kp(w.nextSibling);var k=Ul;m&&QK(d,m)?JK(k,w):(d.flags=d.flags&-4097|2,xi=!1,Ul=d)}}else{if(ID(d))throw Error(n(418));d.flags=d.flags&-4097|2,xi=!1,Ul=d}}}function eY(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ul=d}function VI(d){if(d!==Ul)return!1;if(!xi)return eY(d),xi=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!wD(d.type,d.memoizedProps)),m&&(m=Bl)){if(ID(d))throw tY(),Error(n(418));for(;m;)JK(d,m),m=Kp(m.nextSibling)}if(eY(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(m===0){Bl=Kp(d.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}d=d.nextSibling}Bl=null}}else Bl=Ul?Kp(d.stateNode.nextSibling):null;return!0}function tY(){for(var d=Bl;d;)d=Kp(d.nextSibling)}function e_(){Bl=Ul=null,xi=!1}function RD(d){ku===null?ku=[d]:ku.push(d)}var kTe=I.ReactCurrentBatchConfig;function fE(d,m,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var k=w.stateNode}if(!k)throw Error(n(147,d));var M=k,D=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===D?m.ref:(m=function(K){var ce=M.refs;K===null?delete ce[D]:ce[D]=K},m._stringRef=D,m)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function zI(d,m){throw d=Object.prototype.toString.call(m),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function nY(d){var m=d._init;return m(d._payload)}function rY(d){function m(Se,ye){if(d){var Ne=Se.deletions;Ne===null?(Se.deletions=[ye],Se.flags|=16):Ne.push(ye)}}function w(Se,ye){if(!d)return null;for(;ye!==null;)m(Se,ye),ye=ye.sibling;return null}function k(Se,ye){for(Se=new Map;ye!==null;)ye.key!==null?Se.set(ye.key,ye):Se.set(ye.index,ye),ye=ye.sibling;return Se}function M(Se,ye){return Se=sm(Se,ye),Se.index=0,Se.sibling=null,Se}function D(Se,ye,Ne){return Se.index=Ne,d?(Ne=Se.alternate,Ne!==null?(Ne=Ne.index,Ne<ye?(Se.flags|=2,ye):Ne):(Se.flags|=2,ye)):(Se.flags|=1048576,ye)}function K(Se){return d&&Se.alternate===null&&(Se.flags|=2),Se}function ce(Se,ye,Ne,gt){return ye===null||ye.tag!==6?(ye=b6(Ne,Se.mode,gt),ye.return=Se,ye):(ye=M(ye,Ne),ye.return=Se,ye)}function fe(Se,ye,Ne,gt){var Jt=Ne.type;return Jt===P?ct(Se,ye,Ne.props.children,gt,Ne.key):ye!==null&&(ye.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ze&&nY(Jt)===ye.type)?(gt=M(ye,Ne.props),gt.ref=fE(Se,ye,Ne),gt.return=Se,gt):(gt=hP(Ne.type,Ne.key,Ne.props,null,Se.mode,gt),gt.ref=fE(Se,ye,Ne),gt.return=Se,gt)}function Fe(Se,ye,Ne,gt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ne.containerInfo||ye.stateNode.implementation!==Ne.implementation?(ye=E6(Ne,Se.mode,gt),ye.return=Se,ye):(ye=M(ye,Ne.children||[]),ye.return=Se,ye)}function ct(Se,ye,Ne,gt,Jt){return ye===null||ye.tag!==7?(ye=G0(Ne,Se.mode,gt,Jt),ye.return=Se,ye):(ye=M(ye,Ne),ye.return=Se,ye)}function ft(Se,ye,Ne){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=b6(""+ye,Se.mode,Ne),ye.return=Se,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case R:return Ne=hP(ye.type,ye.key,ye.props,null,Se.mode,Ne),Ne.ref=fE(Se,null,ye),Ne.return=Se,Ne;case V:return ye=E6(ye,Se.mode,Ne),ye.return=Se,ye;case ze:var gt=ye._init;return ft(Se,gt(ye._payload),Ne)}if(Hn(ye)||Le(ye))return ye=G0(ye,Se.mode,Ne,null),ye.return=Se,ye;zI(Se,ye)}return null}function st(Se,ye,Ne,gt){var Jt=ye!==null?ye.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Jt!==null?null:ce(Se,ye,""+Ne,gt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case R:return Ne.key===Jt?fe(Se,ye,Ne,gt):null;case V:return Ne.key===Jt?Fe(Se,ye,Ne,gt):null;case ze:return Jt=Ne._init,st(Se,ye,Jt(Ne._payload),gt)}if(Hn(Ne)||Le(Ne))return Jt!==null?null:ct(Se,ye,Ne,gt,null);zI(Se,Ne)}return null}function Nt(Se,ye,Ne,gt,Jt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Se=Se.get(Ne)||null,ce(ye,Se,""+gt,Jt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case R:return Se=Se.get(gt.key===null?Ne:gt.key)||null,fe(ye,Se,gt,Jt);case V:return Se=Se.get(gt.key===null?Ne:gt.key)||null,Fe(ye,Se,gt,Jt);case ze:var dn=gt._init;return Nt(Se,ye,Ne,dn(gt._payload),Jt)}if(Hn(gt)||Le(gt))return Se=Se.get(Ne)||null,ct(ye,Se,gt,Jt,null);zI(ye,gt)}return null}function Ut(Se,ye,Ne,gt){for(var Jt=null,dn=null,fn=ye,kn=ye=0,to=null;fn!==null&&kn<Ne.length;kn++){fn.index>kn?(to=fn,fn=null):to=fn.sibling;var vr=st(Se,fn,Ne[kn],gt);if(vr===null){fn===null&&(fn=to);break}d&&fn&&vr.alternate===null&&m(Se,fn),ye=D(vr,ye,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr,fn=to}if(kn===Ne.length)return w(Se,fn),xi&&L0(Se,kn),Jt;if(fn===null){for(;kn<Ne.length;kn++)fn=ft(Se,Ne[kn],gt),fn!==null&&(ye=D(fn,ye,kn),dn===null?Jt=fn:dn.sibling=fn,dn=fn);return xi&&L0(Se,kn),Jt}for(fn=k(Se,fn);kn<Ne.length;kn++)to=Nt(fn,Se,kn,Ne[kn],gt),to!==null&&(d&&to.alternate!==null&&fn.delete(to.key===null?kn:to.key),ye=D(to,ye,kn),dn===null?Jt=to:dn.sibling=to,dn=to);return d&&fn.forEach(function(om){return m(Se,om)}),xi&&L0(Se,kn),Jt}function Yt(Se,ye,Ne,gt){var Jt=Le(Ne);if(typeof Jt!="function")throw Error(n(150));if(Ne=Jt.call(Ne),Ne==null)throw Error(n(151));for(var dn=Jt=null,fn=ye,kn=ye=0,to=null,vr=Ne.next();fn!==null&&!vr.done;kn++,vr=Ne.next()){fn.index>kn?(to=fn,fn=null):to=fn.sibling;var om=st(Se,fn,vr.value,gt);if(om===null){fn===null&&(fn=to);break}d&&fn&&om.alternate===null&&m(Se,fn),ye=D(om,ye,kn),dn===null?Jt=om:dn.sibling=om,dn=om,fn=to}if(vr.done)return w(Se,fn),xi&&L0(Se,kn),Jt;if(fn===null){for(;!vr.done;kn++,vr=Ne.next())vr=ft(Se,vr.value,gt),vr!==null&&(ye=D(vr,ye,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr);return xi&&L0(Se,kn),Jt}for(fn=k(Se,fn);!vr.done;kn++,vr=Ne.next())vr=Nt(fn,Se,kn,vr.value,gt),vr!==null&&(d&&vr.alternate!==null&&fn.delete(vr.key===null?kn:vr.key),ye=D(vr,ye,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr);return d&&fn.forEach(function(ske){return m(Se,ske)}),xi&&L0(Se,kn),Jt}function ls(Se,ye,Ne,gt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===P&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case R:e:{for(var Jt=Ne.key,dn=ye;dn!==null;){if(dn.key===Jt){if(Jt=Ne.type,Jt===P){if(dn.tag===7){w(Se,dn.sibling),ye=M(dn,Ne.props.children),ye.return=Se,Se=ye;break e}}else if(dn.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ze&&nY(Jt)===dn.type){w(Se,dn.sibling),ye=M(dn,Ne.props),ye.ref=fE(Se,dn,Ne),ye.return=Se,Se=ye;break e}w(Se,dn);break}else m(Se,dn);dn=dn.sibling}Ne.type===P?(ye=G0(Ne.props.children,Se.mode,gt,Ne.key),ye.return=Se,Se=ye):(gt=hP(Ne.type,Ne.key,Ne.props,null,Se.mode,gt),gt.ref=fE(Se,ye,Ne),gt.return=Se,Se=gt)}return K(Se);case V:e:{for(dn=Ne.key;ye!==null;){if(ye.key===dn)if(ye.tag===4&&ye.stateNode.containerInfo===Ne.containerInfo&&ye.stateNode.implementation===Ne.implementation){w(Se,ye.sibling),ye=M(ye,Ne.children||[]),ye.return=Se,Se=ye;break e}else{w(Se,ye);break}else m(Se,ye);ye=ye.sibling}ye=E6(Ne,Se.mode,gt),ye.return=Se,Se=ye}return K(Se);case ze:return dn=Ne._init,ls(Se,ye,dn(Ne._payload),gt)}if(Hn(Ne))return Ut(Se,ye,Ne,gt);if(Le(Ne))return Yt(Se,ye,Ne,gt);zI(Se,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,ye!==null&&ye.tag===6?(w(Se,ye.sibling),ye=M(ye,Ne),ye.return=Se,Se=ye):(w(Se,ye),ye=b6(Ne,Se.mode,gt),ye.return=Se,Se=ye),K(Se)):w(Se,ye)}return ls}var t_=rY(!0),iY=rY(!1),GI=Yp(null),UI=null,n_=null,MD=null;function ND(){MD=n_=UI=null}function LD(d){var m=GI.current;hi(GI),d._currentValue=m}function OD(d,m,w){for(;d!==null;){var k=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),d===w)break;d=d.return}}function r_(d,m){UI=d,MD=n_=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(Xa=!0),d.firstContext=null)}function Nc(d){var m=d._currentValue;if(MD!==d)if(d={context:d,memoizedValue:m,next:null},n_===null){if(UI===null)throw Error(n(308));n_=d,UI.dependencies={lanes:0,firstContext:d}}else n_=n_.next=d;return m}var O0=null;function DD(d){O0===null?O0=[d]:O0.push(d)}function sY(d,m,w,k){var M=m.interleaved;return M===null?(w.next=w,DD(m)):(w.next=M.next,M.next=w),m.interleaved=w,uf(d,k)}function uf(d,m){d.lanes|=m;var w=d.alternate;for(w!==null&&(w.lanes|=m),w=d,d=d.return;d!==null;)d.childLanes|=m,w=d.alternate,w!==null&&(w.childLanes|=m),w=d,d=d.return;return w.tag===3?w.stateNode:null}var Jp=!1;function jD(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oY(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function hf(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function Qp(d,m,w){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(fr&2)!==0){var M=k.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),k.pending=m,uf(d,w)}return M=k.interleaved,M===null?(m.next=m,DD(k)):(m.next=M.next,M.next=m),k.interleaved=m,uf(d,w)}function BI(d,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,Kb(d,w)}}function aY(d,m){var w=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var M=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var K={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?M=D=K:D=D.next=K,w=w.next}while(w!==null);D===null?M=D=m:D=D.next=m}else M=D=m;w={baseState:k.baseState,firstBaseUpdate:M,lastBaseUpdate:D,shared:k.shared,effects:k.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=m:d.next=m,w.lastBaseUpdate=m}function WI(d,m,w,k){var M=d.updateQueue;Jp=!1;var D=M.firstBaseUpdate,K=M.lastBaseUpdate,ce=M.shared.pending;if(ce!==null){M.shared.pending=null;var fe=ce,Fe=fe.next;fe.next=null,K===null?D=Fe:K.next=Fe,K=fe;var ct=d.alternate;ct!==null&&(ct=ct.updateQueue,ce=ct.lastBaseUpdate,ce!==K&&(ce===null?ct.firstBaseUpdate=Fe:ce.next=Fe,ct.lastBaseUpdate=fe))}if(D!==null){var ft=M.baseState;K=0,ct=Fe=fe=null,ce=D;do{var st=ce.lane,Nt=ce.eventTime;if((k&st)===st){ct!==null&&(ct=ct.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Ut=d,Yt=ce;switch(st=m,Nt=w,Yt.tag){case 1:if(Ut=Yt.payload,typeof Ut=="function"){ft=Ut.call(Nt,ft,st);break e}ft=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Yt.payload,st=typeof Ut=="function"?Ut.call(Nt,ft,st):Ut,st==null)break e;ft=xe({},ft,st);break e;case 2:Jp=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,st=M.effects,st===null?M.effects=[ce]:st.push(ce))}else Nt={eventTime:Nt,lane:st,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ct===null?(Fe=ct=Nt,fe=ft):ct=ct.next=Nt,K|=st;if(ce=ce.next,ce===null){if(ce=M.shared.pending,ce===null)break;st=ce,ce=st.next,st.next=null,M.lastBaseUpdate=st,M.shared.pending=null}}while(!0);if(ct===null&&(fe=ft),M.baseState=fe,M.firstBaseUpdate=Fe,M.lastBaseUpdate=ct,m=M.shared.interleaved,m!==null){M=m;do K|=M.lane,M=M.next;while(M!==m)}else D===null&&(M.shared.lanes=0);F0|=K,d.lanes=K,d.memoizedState=ft}}function lY(d,m,w){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var k=d[m],M=k.callback;if(M!==null){if(k.callback=null,k=w,typeof M!="function")throw Error(n(191,M));M.call(k)}}}var pE={},Bh=Yp(pE),mE=Yp(pE),gE=Yp(pE);function D0(d){if(d===pE)throw Error(n(174));return d}function FD(d,m){switch(oi(gE,m),oi(mE,d),oi(Bh,pE),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Qn(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=Qn(m,d)}hi(Bh),oi(Bh,m)}function i_(){hi(Bh),hi(mE),hi(gE)}function cY(d){D0(gE.current);var m=D0(Bh.current),w=Qn(m,d.type);m!==w&&(oi(mE,d),oi(Bh,w))}function $D(d){mE.current===d&&(hi(Bh),hi(mE))}var Pi=Yp(0);function HI(d){for(var m=d;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var VD=[];function zD(){for(var d=0;d<VD.length;d++)VD[d]._workInProgressVersionPrimary=null;VD.length=0}var qI=I.ReactCurrentDispatcher,GD=I.ReactCurrentBatchConfig,j0=0,Ri=null,$s=null,Qs=null,KI=!1,yE=!1,vE=0,ATe=0;function Uo(){throw Error(n(321))}function UD(d,m){if(m===null)return!1;for(var w=0;w<m.length&&w<d.length;w++)if(!Tu(d[w],m[w]))return!1;return!0}function BD(d,m,w,k,M,D){if(j0=D,Ri=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,qI.current=d===null||d.memoizedState===null?RTe:MTe,d=w(k,M),yE){D=0;do{if(yE=!1,vE=0,25<=D)throw Error(n(301));D+=1,Qs=$s=null,m.updateQueue=null,qI.current=NTe,d=w(k,M)}while(yE)}if(qI.current=ZI,m=$s!==null&&$s.next!==null,j0=0,Qs=$s=Ri=null,KI=!1,m)throw Error(n(300));return d}function WD(){var d=vE!==0;return vE=0,d}function Wh(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Ri.memoizedState=Qs=d:Qs=Qs.next=d,Qs}function Lc(){if($s===null){var d=Ri.alternate;d=d!==null?d.memoizedState:null}else d=$s.next;var m=Qs===null?Ri.memoizedState:Qs.next;if(m!==null)Qs=m,$s=d;else{if(d===null)throw Error(n(310));$s=d,d={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},Qs===null?Ri.memoizedState=Qs=d:Qs=Qs.next=d}return Qs}function _E(d,m){return typeof m=="function"?m(d):m}function HD(d){var m=Lc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=$s,M=k.baseQueue,D=w.pending;if(D!==null){if(M!==null){var K=M.next;M.next=D.next,D.next=K}k.baseQueue=M=D,w.pending=null}if(M!==null){D=M.next,k=k.baseState;var ce=K=null,fe=null,Fe=D;do{var ct=Fe.lane;if((j0&ct)===ct)fe!==null&&(fe=fe.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),k=Fe.hasEagerState?Fe.eagerState:d(k,Fe.action);else{var ft={lane:ct,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};fe===null?(ce=fe=ft,K=k):fe=fe.next=ft,Ri.lanes|=ct,F0|=ct}Fe=Fe.next}while(Fe!==null&&Fe!==D);fe===null?K=k:fe.next=ce,Tu(k,m.memoizedState)||(Xa=!0),m.memoizedState=k,m.baseState=K,m.baseQueue=fe,w.lastRenderedState=k}if(d=w.interleaved,d!==null){M=d;do D=M.lane,Ri.lanes|=D,F0|=D,M=M.next;while(M!==d)}else M===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function qD(d){var m=Lc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=w.dispatch,M=w.pending,D=m.memoizedState;if(M!==null){w.pending=null;var K=M=M.next;do D=d(D,K.action),K=K.next;while(K!==M);Tu(D,m.memoizedState)||(Xa=!0),m.memoizedState=D,m.baseQueue===null&&(m.baseState=D),w.lastRenderedState=D}return[D,k]}function uY(){}function hY(d,m){var w=Ri,k=Lc(),M=m(),D=!Tu(k.memoizedState,M);if(D&&(k.memoizedState=M,Xa=!0),k=k.queue,KD(pY.bind(null,w,k,d),[d]),k.getSnapshot!==m||D||Qs!==null&&Qs.memoizedState.tag&1){if(w.flags|=2048,xE(9,fY.bind(null,w,k,M,m),void 0,null),eo===null)throw Error(n(349));(j0&30)!==0||dY(w,m,M)}return M}function dY(d,m,w){d.flags|=16384,d={getSnapshot:m,value:w},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.stores=[d]):(w=m.stores,w===null?m.stores=[d]:w.push(d))}function fY(d,m,w,k){m.value=w,m.getSnapshot=k,mY(m)&&gY(d)}function pY(d,m,w){return w(function(){mY(m)&&gY(d)})}function mY(d){var m=d.getSnapshot;d=d.value;try{var w=m();return!Tu(d,w)}catch{return!0}}function gY(d){var m=uf(d,1);m!==null&&Pu(m,d,1,-1)}function yY(d){var m=Wh();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_E,lastRenderedState:d},m.queue=d,d=d.dispatch=PTe.bind(null,Ri,d),[m.memoizedState,d]}function xE(d,m,w,k){return d={tag:d,create:m,destroy:w,deps:k,next:null},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.lastEffect=d.next=d):(w=m.lastEffect,w===null?m.lastEffect=d.next=d:(k=w.next,w.next=d,d.next=k,m.lastEffect=d)),d}function vY(){return Lc().memoizedState}function YI(d,m,w,k){var M=Wh();Ri.flags|=d,M.memoizedState=xE(1|m,w,void 0,k===void 0?null:k)}function XI(d,m,w,k){var M=Lc();k=k===void 0?null:k;var D=void 0;if($s!==null){var K=$s.memoizedState;if(D=K.destroy,k!==null&&UD(k,K.deps)){M.memoizedState=xE(m,w,D,k);return}}Ri.flags|=d,M.memoizedState=xE(1|m,w,D,k)}function _Y(d,m){return YI(8390656,8,d,m)}function KD(d,m){return XI(2048,8,d,m)}function xY(d,m){return XI(4,2,d,m)}function wY(d,m){return XI(4,4,d,m)}function bY(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function EY(d,m,w){return w=w!=null?w.concat([d]):null,XI(4,4,bY.bind(null,m,d),w)}function YD(){}function SY(d,m){var w=Lc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&UD(m,k[1])?k[0]:(w.memoizedState=[d,m],d)}function TY(d,m){var w=Lc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&UD(m,k[1])?k[0]:(d=d(),w.memoizedState=[d,m],d)}function kY(d,m,w){return(j0&21)===0?(d.baseState&&(d.baseState=!1,Xa=!0),d.memoizedState=w):(Tu(w,m)||(w=Hb(),Ri.lanes|=w,F0|=w,d.baseState=!0),m)}function CTe(d,m){var w=sr;sr=w!==0&&4>w?w:4,d(!0);var k=GD.transition;GD.transition={};try{d(!1),m()}finally{sr=w,GD.transition=k}}function AY(){return Lc().memoizedState}function ITe(d,m,w){var k=rm(d);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},CY(d))IY(m,w);else if(w=sY(d,m,w,k),w!==null){var M=ka();Pu(w,d,k,M),PY(w,m,k)}}function PTe(d,m,w){var k=rm(d),M={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(CY(d))IY(m,M);else{var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=m.lastRenderedReducer,D!==null))try{var K=m.lastRenderedState,ce=D(K,w);if(M.hasEagerState=!0,M.eagerState=ce,Tu(ce,K)){var fe=m.interleaved;fe===null?(M.next=M,DD(m)):(M.next=fe.next,fe.next=M),m.interleaved=M;return}}catch{}w=sY(d,m,M,k),w!==null&&(M=ka(),Pu(w,d,k,M),PY(w,m,k))}}function CY(d){var m=d.alternate;return d===Ri||m!==null&&m===Ri}function IY(d,m){yE=KI=!0;var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}function PY(d,m,w){if((w&4194240)!==0){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,Kb(d,w)}}var ZI={readContext:Nc,useCallback:Uo,useContext:Uo,useEffect:Uo,useImperativeHandle:Uo,useInsertionEffect:Uo,useLayoutEffect:Uo,useMemo:Uo,useReducer:Uo,useRef:Uo,useState:Uo,useDebugValue:Uo,useDeferredValue:Uo,useTransition:Uo,useMutableSource:Uo,useSyncExternalStore:Uo,useId:Uo,unstable_isNewReconciler:!1},RTe={readContext:Nc,useCallback:function(d,m){return Wh().memoizedState=[d,m===void 0?null:m],d},useContext:Nc,useEffect:_Y,useImperativeHandle:function(d,m,w){return w=w!=null?w.concat([d]):null,YI(4194308,4,bY.bind(null,m,d),w)},useLayoutEffect:function(d,m){return YI(4194308,4,d,m)},useInsertionEffect:function(d,m){return YI(4,2,d,m)},useMemo:function(d,m){var w=Wh();return m=m===void 0?null:m,d=d(),w.memoizedState=[d,m],d},useReducer:function(d,m,w){var k=Wh();return m=w!==void 0?w(m):m,k.memoizedState=k.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},k.queue=d,d=d.dispatch=ITe.bind(null,Ri,d),[k.memoizedState,d]},useRef:function(d){var m=Wh();return d={current:d},m.memoizedState=d},useState:yY,useDebugValue:YD,useDeferredValue:function(d){return Wh().memoizedState=d},useTransition:function(){var d=yY(!1),m=d[0];return d=CTe.bind(null,d[1]),Wh().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,w){var k=Ri,M=Wh();if(xi){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),eo===null)throw Error(n(349));(j0&30)!==0||dY(k,m,w)}M.memoizedState=w;var D={value:w,getSnapshot:m};return M.queue=D,_Y(pY.bind(null,k,D,d),[d]),k.flags|=2048,xE(9,fY.bind(null,k,D,w,m),void 0,null),w},useId:function(){var d=Wh(),m=eo.identifierPrefix;if(xi){var w=cf,k=lf;w=(k&~(1<<32-Ii(k)-1)).toString(32)+w,m=":"+m+"R"+w,w=vE++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=ATe++,m=":"+m+"r"+w.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},MTe={readContext:Nc,useCallback:SY,useContext:Nc,useEffect:KD,useImperativeHandle:EY,useInsertionEffect:xY,useLayoutEffect:wY,useMemo:TY,useReducer:HD,useRef:vY,useState:function(){return HD(_E)},useDebugValue:YD,useDeferredValue:function(d){var m=Lc();return kY(m,$s.memoizedState,d)},useTransition:function(){var d=HD(_E)[0],m=Lc().memoizedState;return[d,m]},useMutableSource:uY,useSyncExternalStore:hY,useId:AY,unstable_isNewReconciler:!1},NTe={readContext:Nc,useCallback:SY,useContext:Nc,useEffect:KD,useImperativeHandle:EY,useInsertionEffect:xY,useLayoutEffect:wY,useMemo:TY,useReducer:qD,useRef:vY,useState:function(){return qD(_E)},useDebugValue:YD,useDeferredValue:function(d){var m=Lc();return $s===null?m.memoizedState=d:kY(m,$s.memoizedState,d)},useTransition:function(){var d=qD(_E)[0],m=Lc().memoizedState;return[d,m]},useMutableSource:uY,useSyncExternalStore:hY,useId:AY,unstable_isNewReconciler:!1};function Au(d,m){if(d&&d.defaultProps){m=xe({},m),d=d.defaultProps;for(var w in d)m[w]===void 0&&(m[w]=d[w]);return m}return m}function XD(d,m,w,k){m=d.memoizedState,w=w(k,m),w=w==null?m:xe({},m,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var JI={isMounted:function(d){return(d=d._reactInternals)?ae(d)===d:!1},enqueueSetState:function(d,m,w){d=d._reactInternals;var k=ka(),M=rm(d),D=hf(k,M);D.payload=m,w!=null&&(D.callback=w),m=Qp(d,D,M),m!==null&&(Pu(m,d,M,k),BI(m,d,M))},enqueueReplaceState:function(d,m,w){d=d._reactInternals;var k=ka(),M=rm(d),D=hf(k,M);D.tag=1,D.payload=m,w!=null&&(D.callback=w),m=Qp(d,D,M),m!==null&&(Pu(m,d,M,k),BI(m,d,M))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var w=ka(),k=rm(d),M=hf(w,k);M.tag=2,m!=null&&(M.callback=m),m=Qp(d,M,k),m!==null&&(Pu(m,d,k,w),BI(m,d,k))}};function RY(d,m,w,k,M,D,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,D,K):m.prototype&&m.prototype.isPureReactComponent?!oE(w,k)||!oE(M,D):!0}function MY(d,m,w){var k=!1,M=Xp,D=m.contextType;return typeof D=="object"&&D!==null?D=Nc(D):(M=Ya(m)?M0:Go.current,k=m.contextTypes,D=(k=k!=null)?Zv(d,M):Xp),m=new m(w,D),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=JI,d.stateNode=m,m._reactInternals=d,k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=M,d.__reactInternalMemoizedMaskedChildContext=D),m}function NY(d,m,w,k){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,k),m.state!==d&&JI.enqueueReplaceState(m,m.state,null)}function ZD(d,m,w,k){var M=d.stateNode;M.props=w,M.state=d.memoizedState,M.refs={},jD(d);var D=m.contextType;typeof D=="object"&&D!==null?M.context=Nc(D):(D=Ya(m)?M0:Go.current,M.context=Zv(d,D)),M.state=d.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(XD(d,m,D,w),M.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(m=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),m!==M.state&&JI.enqueueReplaceState(M,M.state,null),WI(d,w,M,k),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308)}function s_(d,m){try{var w="",k=m;do w+=Q(k),k=k.return;while(k);var M=w}catch(D){M=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:m,stack:M,digest:null}}function JD(d,m,w){return{value:d,source:null,stack:w??null,digest:m??null}}function QD(d,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var LTe=typeof WeakMap=="function"?WeakMap:Map;function LY(d,m,w){w=hf(-1,w),w.tag=3,w.payload={element:null};var k=m.value;return w.callback=function(){sP||(sP=!0,p6=k),QD(d,m)},w}function OY(d,m,w){w=hf(-1,w),w.tag=3;var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var M=m.value;w.payload=function(){return k(M)},w.callback=function(){QD(d,m)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){QD(d,m),typeof k!="function"&&(tm===null?tm=new Set([this]):tm.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})}),w}function DY(d,m,w){var k=d.pingCache;if(k===null){k=d.pingCache=new LTe;var M=new Set;k.set(m,M)}else M=k.get(m),M===void 0&&(M=new Set,k.set(m,M));M.has(w)||(M.add(w),d=KTe.bind(null,d,m,w),m.then(d,d))}function jY(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function FY(d,m,w,k,M){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=hf(-1,1),m.tag=2,Qp(w,m,1))),w.lanes|=1),d):(d.flags|=65536,d.lanes=M,d)}var OTe=I.ReactCurrentOwner,Xa=!1;function Ta(d,m,w,k){m.child=d===null?iY(m,null,w,k):t_(m,d.child,w,k)}function $Y(d,m,w,k,M){w=w.render;var D=m.ref;return r_(m,M),k=BD(d,m,w,k,D,M),w=WD(),d!==null&&!Xa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~M,df(d,m,M)):(xi&&w&&AD(m),m.flags|=1,Ta(d,m,k,M),m.child)}function VY(d,m,w,k,M){if(d===null){var D=w.type;return typeof D=="function"&&!w6(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=D,zY(d,m,D,k,M)):(d=hP(w.type,null,k,m,m.mode,M),d.ref=m.ref,d.return=m,m.child=d)}if(D=d.child,(d.lanes&M)===0){var K=D.memoizedProps;if(w=w.compare,w=w!==null?w:oE,w(K,k)&&d.ref===m.ref)return df(d,m,M)}return m.flags|=1,d=sm(D,k),d.ref=m.ref,d.return=m,m.child=d}function zY(d,m,w,k,M){if(d!==null){var D=d.memoizedProps;if(oE(D,k)&&d.ref===m.ref)if(Xa=!1,m.pendingProps=k=D,(d.lanes&M)!==0)(d.flags&131072)!==0&&(Xa=!0);else return m.lanes=d.lanes,df(d,m,M)}return e6(d,m,w,k,M)}function GY(d,m,w){var k=m.pendingProps,M=k.children,D=d!==null?d.memoizedState:null;if(k.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(a_,Wl),Wl|=w;else{if((w&1073741824)===0)return d=D!==null?D.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,oi(a_,Wl),Wl|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=D!==null?D.baseLanes:w,oi(a_,Wl),Wl|=k}else D!==null?(k=D.baseLanes|w,m.memoizedState=null):k=w,oi(a_,Wl),Wl|=k;return Ta(d,m,M,w),m.child}function UY(d,m){var w=m.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function e6(d,m,w,k,M){var D=Ya(w)?M0:Go.current;return D=Zv(m,D),r_(m,M),w=BD(d,m,w,k,D,M),k=WD(),d!==null&&!Xa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~M,df(d,m,M)):(xi&&k&&AD(m),m.flags|=1,Ta(d,m,w,M),m.child)}function BY(d,m,w,k,M){if(Ya(w)){var D=!0;DI(m)}else D=!1;if(r_(m,M),m.stateNode===null)eP(d,m),MY(m,w,k),ZD(m,w,k,M),k=!0;else if(d===null){var K=m.stateNode,ce=m.memoizedProps;K.props=ce;var fe=K.context,Fe=w.contextType;typeof Fe=="object"&&Fe!==null?Fe=Nc(Fe):(Fe=Ya(w)?M0:Go.current,Fe=Zv(m,Fe));var ct=w.getDerivedStateFromProps,ft=typeof ct=="function"||typeof K.getSnapshotBeforeUpdate=="function";ft||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==k||fe!==Fe)&&NY(m,K,k,Fe),Jp=!1;var st=m.memoizedState;K.state=st,WI(m,k,K,M),fe=m.memoizedState,ce!==k||st!==fe||Ka.current||Jp?(typeof ct=="function"&&(XD(m,w,ct,k),fe=m.memoizedState),(ce=Jp||RY(m,w,ce,k,st,fe,Fe))?(ft||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=fe),K.props=k,K.state=fe,K.context=Fe,k=ce):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{K=m.stateNode,oY(d,m),ce=m.memoizedProps,Fe=m.type===m.elementType?ce:Au(m.type,ce),K.props=Fe,ft=m.pendingProps,st=K.context,fe=w.contextType,typeof fe=="object"&&fe!==null?fe=Nc(fe):(fe=Ya(w)?M0:Go.current,fe=Zv(m,fe));var Nt=w.getDerivedStateFromProps;(ct=typeof Nt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==ft||st!==fe)&&NY(m,K,k,fe),Jp=!1,st=m.memoizedState,K.state=st,WI(m,k,K,M);var Ut=m.memoizedState;ce!==ft||st!==Ut||Ka.current||Jp?(typeof Nt=="function"&&(XD(m,w,Nt,k),Ut=m.memoizedState),(Fe=Jp||RY(m,w,Fe,k,st,Ut,fe)||!1)?(ct||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(k,Ut,fe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(k,Ut,fe)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=Ut),K.props=k,K.state=Ut,K.context=fe,k=Fe):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&st===d.memoizedState||(m.flags|=1024),k=!1)}return t6(d,m,w,k,D,M)}function t6(d,m,w,k,M,D){UY(d,m);var K=(m.flags&128)!==0;if(!k&&!K)return M&&YK(m,w,!1),df(d,m,D);k=m.stateNode,OTe.current=m;var ce=K&&typeof w.getDerivedStateFromError!="function"?null:k.render();return m.flags|=1,d!==null&&K?(m.child=t_(m,d.child,null,D),m.child=t_(m,null,ce,D)):Ta(d,m,ce,D),m.memoizedState=k.state,M&&YK(m,w,!0),m.child}function WY(d){var m=d.stateNode;m.pendingContext?qK(d,m.pendingContext,m.pendingContext!==m.context):m.context&&qK(d,m.context,!1),FD(d,m.containerInfo)}function HY(d,m,w,k,M){return e_(),RD(M),m.flags|=256,Ta(d,m,w,k),m.child}var n6={dehydrated:null,treeContext:null,retryLane:0};function r6(d){return{baseLanes:d,cachePool:null,transitions:null}}function qY(d,m,w){var k=m.pendingProps,M=Pi.current,D=!1,K=(m.flags&128)!==0,ce;if((ce=K)||(ce=d!==null&&d.memoizedState===null?!1:(M&2)!==0),ce?(D=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(M|=1),oi(Pi,M&1),d===null)return PD(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(K=k.children,d=k.fallback,D?(k=m.mode,D=m.child,K={mode:"hidden",children:K},(k&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=K):D=dP(K,k,0,null),d=G0(d,k,w,null),D.return=m,d.return=m,D.sibling=d,m.child=D,m.child.memoizedState=r6(w),m.memoizedState=n6,d):i6(m,K));if(M=d.memoizedState,M!==null&&(ce=M.dehydrated,ce!==null))return DTe(d,m,K,k,ce,M,w);if(D){D=k.fallback,K=m.mode,M=d.child,ce=M.sibling;var fe={mode:"hidden",children:k.children};return(K&1)===0&&m.child!==M?(k=m.child,k.childLanes=0,k.pendingProps=fe,m.deletions=null):(k=sm(M,fe),k.subtreeFlags=M.subtreeFlags&14680064),ce!==null?D=sm(ce,D):(D=G0(D,K,w,null),D.flags|=2),D.return=m,k.return=m,k.sibling=D,m.child=k,k=D,D=m.child,K=d.child.memoizedState,K=K===null?r6(w):{baseLanes:K.baseLanes|w,cachePool:null,transitions:K.transitions},D.memoizedState=K,D.childLanes=d.childLanes&~w,m.memoizedState=n6,k}return D=d.child,d=D.sibling,k=sm(D,{mode:"visible",children:k.children}),(m.mode&1)===0&&(k.lanes=w),k.return=m,k.sibling=null,d!==null&&(w=m.deletions,w===null?(m.deletions=[d],m.flags|=16):w.push(d)),m.child=k,m.memoizedState=null,k}function i6(d,m){return m=dP({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function QI(d,m,w,k){return k!==null&&RD(k),t_(m,d.child,null,w),d=i6(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function DTe(d,m,w,k,M,D,K){if(w)return m.flags&256?(m.flags&=-257,k=JD(Error(n(422))),QI(d,m,K,k)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(D=k.fallback,M=m.mode,k=dP({mode:"visible",children:k.children},M,0,null),D=G0(D,M,K,null),D.flags|=2,k.return=m,D.return=m,k.sibling=D,m.child=k,(m.mode&1)!==0&&t_(m,d.child,null,K),m.child.memoizedState=r6(K),m.memoizedState=n6,D);if((m.mode&1)===0)return QI(d,m,K,null);if(M.data==="$!"){if(k=M.nextSibling&&M.nextSibling.dataset,k)var ce=k.dgst;return k=ce,D=Error(n(419)),k=JD(D,k,void 0),QI(d,m,K,k)}if(ce=(K&d.childLanes)!==0,Xa||ce){if(k=eo,k!==null){switch(K&-K){case 4:M=2;break;case 16:M=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:M=32;break;case 536870912:M=268435456;break;default:M=0}M=(M&(k.suspendedLanes|K))!==0?0:M,M!==0&&M!==D.retryLane&&(D.retryLane=M,uf(d,M),Pu(k,d,M,-1))}return x6(),k=JD(Error(n(421))),QI(d,m,K,k)}return M.data==="$?"?(m.flags|=128,m.child=d.child,m=YTe.bind(null,d),M._reactRetry=m,null):(d=D.treeContext,Bl=Kp(M.nextSibling),Ul=m,xi=!0,ku=null,d!==null&&(Rc[Mc++]=lf,Rc[Mc++]=cf,Rc[Mc++]=N0,lf=d.id,cf=d.overflow,N0=m),m=i6(m,k.children),m.flags|=4096,m)}function KY(d,m,w){d.lanes|=m;var k=d.alternate;k!==null&&(k.lanes|=m),OD(d.return,m,w)}function s6(d,m,w,k,M){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:M}:(D.isBackwards=m,D.rendering=null,D.renderingStartTime=0,D.last=k,D.tail=w,D.tailMode=M)}function YY(d,m,w){var k=m.pendingProps,M=k.revealOrder,D=k.tail;if(Ta(d,m,k.children,w),k=Pi.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&KY(d,w,m);else if(d.tag===19)KY(d,w,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}if(oi(Pi,k),(m.mode&1)===0)m.memoizedState=null;else switch(M){case"forwards":for(w=m.child,M=null;w!==null;)d=w.alternate,d!==null&&HI(d)===null&&(M=w),w=w.sibling;w=M,w===null?(M=m.child,m.child=null):(M=w.sibling,w.sibling=null),s6(m,!1,M,w,D);break;case"backwards":for(w=null,M=m.child,m.child=null;M!==null;){if(d=M.alternate,d!==null&&HI(d)===null){m.child=M;break}d=M.sibling,M.sibling=w,w=M,M=d}s6(m,!0,w,null,D);break;case"together":s6(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function eP(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function df(d,m,w){if(d!==null&&(m.dependencies=d.dependencies),F0|=m.lanes,(w&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(n(153));if(m.child!==null){for(d=m.child,w=sm(d,d.pendingProps),m.child=w,w.return=m;d.sibling!==null;)d=d.sibling,w=w.sibling=sm(d,d.pendingProps),w.return=m;w.sibling=null}return m.child}function jTe(d,m,w){switch(m.tag){case 3:WY(m),e_();break;case 5:cY(m);break;case 1:Ya(m.type)&&DI(m);break;case 4:FD(m,m.stateNode.containerInfo);break;case 10:var k=m.type._context,M=m.memoizedProps.value;oi(GI,k._currentValue),k._currentValue=M;break;case 13:if(k=m.memoizedState,k!==null)return k.dehydrated!==null?(oi(Pi,Pi.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?qY(d,m,w):(oi(Pi,Pi.current&1),d=df(d,m,w),d!==null?d.sibling:null);oi(Pi,Pi.current&1);break;case 19:if(k=(w&m.childLanes)!==0,(d.flags&128)!==0){if(k)return YY(d,m,w);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),oi(Pi,Pi.current),k)break;return null;case 22:case 23:return m.lanes=0,GY(d,m,w)}return df(d,m,w)}var XY,o6,ZY,JY;XY=function(d,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},o6=function(){},ZY=function(d,m,w,k){var M=d.memoizedProps;if(M!==k){d=m.stateNode,D0(Bh.current);var D=null;switch(w){case"input":M=jt(d,M),k=jt(d,k),D=[];break;case"select":M=xe({},M,{value:void 0}),k=xe({},k,{value:void 0}),D=[];break;case"textarea":M=xo(d,M),k=xo(d,k),D=[];break;default:typeof M.onClick!="function"&&typeof k.onClick=="function"&&(d.onclick=NI)}Ci(w,k);var K;w=null;for(Fe in M)if(!k.hasOwnProperty(Fe)&&M.hasOwnProperty(Fe)&&M[Fe]!=null)if(Fe==="style"){var ce=M[Fe];for(K in ce)ce.hasOwnProperty(K)&&(w||(w={}),w[K]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?D||(D=[]):(D=D||[]).push(Fe,null));for(Fe in k){var fe=k[Fe];if(ce=M?.[Fe],k.hasOwnProperty(Fe)&&fe!==ce&&(fe!=null||ce!=null))if(Fe==="style")if(ce){for(K in ce)!ce.hasOwnProperty(K)||fe&&fe.hasOwnProperty(K)||(w||(w={}),w[K]="");for(K in fe)fe.hasOwnProperty(K)&&ce[K]!==fe[K]&&(w||(w={}),w[K]=fe[K])}else w||(D||(D=[]),D.push(Fe,w)),w=fe;else Fe==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,ce=ce?ce.__html:void 0,fe!=null&&ce!==fe&&(D=D||[]).push(Fe,fe)):Fe==="children"?typeof fe!="string"&&typeof fe!="number"||(D=D||[]).push(Fe,""+fe):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(fe!=null&&Fe==="onScroll"&&ui("scroll",d),D||ce===fe||(D=[])):(D=D||[]).push(Fe,fe))}w&&(D=D||[]).push("style",w);var Fe=D;(m.updateQueue=Fe)&&(m.flags|=4)}},JY=function(d,m,w,k){w!==k&&(m.flags|=4)};function wE(d,m){if(!xi)switch(d.tailMode){case"hidden":m=d.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Bo(d){var m=d.alternate!==null&&d.alternate.child===d.child,w=0,k=0;if(m)for(var M=d.child;M!==null;)w|=M.lanes|M.childLanes,k|=M.subtreeFlags&14680064,k|=M.flags&14680064,M.return=d,M=M.sibling;else for(M=d.child;M!==null;)w|=M.lanes|M.childLanes,k|=M.subtreeFlags,k|=M.flags,M.return=d,M=M.sibling;return d.subtreeFlags|=k,d.childLanes=w,m}function FTe(d,m,w){var k=m.pendingProps;switch(CD(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bo(m),null;case 1:return Ya(m.type)&&OI(),Bo(m),null;case 3:return k=m.stateNode,i_(),hi(Ka),hi(Go),zD(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(d===null||d.child===null)&&(VI(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ku!==null&&(y6(ku),ku=null))),o6(d,m),Bo(m),null;case 5:$D(m);var M=D0(gE.current);if(w=m.type,d!==null&&m.stateNode!=null)ZY(d,m,w,k,M),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!k){if(m.stateNode===null)throw Error(n(166));return Bo(m),null}if(d=D0(Bh.current),VI(m)){k=m.stateNode,w=m.type;var D=m.memoizedProps;switch(k[Uh]=m,k[hE]=D,d=(m.mode&1)!==0,w){case"dialog":ui("cancel",k),ui("close",k);break;case"iframe":case"object":case"embed":ui("load",k);break;case"video":case"audio":for(M=0;M<lE.length;M++)ui(lE[M],k);break;case"source":ui("error",k);break;case"img":case"image":case"link":ui("error",k),ui("load",k);break;case"details":ui("toggle",k);break;case"input":gn(k,D),ui("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!D.multiple},ui("invalid",k);break;case"textarea":Rr(k,D),ui("invalid",k)}Ci(w,D),M=null;for(var K in D)if(D.hasOwnProperty(K)){var ce=D[K];K==="children"?typeof ce=="string"?k.textContent!==ce&&(D.suppressHydrationWarning!==!0&&MI(k.textContent,ce,d),M=["children",ce]):typeof ce=="number"&&k.textContent!==""+ce&&(D.suppressHydrationWarning!==!0&&MI(k.textContent,ce,d),M=["children",""+ce]):i.hasOwnProperty(K)&&ce!=null&&K==="onScroll"&&ui("scroll",k)}switch(w){case"input":Dt(k),hr(k,D,!0);break;case"textarea":Dt(k),js(k);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(k.onclick=NI)}k=M,m.updateQueue=k,k!==null&&(m.flags|=4)}else{K=M.nodeType===9?M:M.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=wt(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=K.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof k.is=="string"?d=K.createElement(w,{is:k.is}):(d=K.createElement(w),w==="select"&&(K=d,k.multiple?K.multiple=!0:k.size&&(K.size=k.size))):d=K.createElementNS(d,w),d[Uh]=m,d[hE]=k,XY(d,m,!1,!1),m.stateNode=d;e:{switch(K=qe(w,k),w){case"dialog":ui("cancel",d),ui("close",d),M=k;break;case"iframe":case"object":case"embed":ui("load",d),M=k;break;case"video":case"audio":for(M=0;M<lE.length;M++)ui(lE[M],d);M=k;break;case"source":ui("error",d),M=k;break;case"img":case"image":case"link":ui("error",d),ui("load",d),M=k;break;case"details":ui("toggle",d),M=k;break;case"input":gn(d,k),M=jt(d,k),ui("invalid",d);break;case"option":M=k;break;case"select":d._wrapperState={wasMultiple:!!k.multiple},M=xe({},k,{value:void 0}),ui("invalid",d);break;case"textarea":Rr(d,k),M=xo(d,k),ui("invalid",d);break;default:M=k}Ci(w,M),ce=M;for(D in ce)if(ce.hasOwnProperty(D)){var fe=ce[D];D==="style"?Fs(d,fe):D==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&Vt(d,fe)):D==="children"?typeof fe=="string"?(w!=="textarea"||fe!=="")&&Dn(d,fe):typeof fe=="number"&&Dn(d,""+fe):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?fe!=null&&D==="onScroll"&&ui("scroll",d):fe!=null&&C(d,D,fe,K))}switch(w){case"input":Dt(d),hr(d,k,!1);break;case"textarea":Dt(d),js(d);break;case"option":k.value!=null&&d.setAttribute("value",""+Ye(k.value));break;case"select":d.multiple=!!k.multiple,D=k.value,D!=null?ei(d,!!k.multiple,D,!1):k.defaultValue!=null&&ei(d,!!k.multiple,k.defaultValue,!0);break;default:typeof M.onClick=="function"&&(d.onclick=NI)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Bo(m),null;case 6:if(d&&m.stateNode!=null)JY(d,m,d.memoizedProps,k);else{if(typeof k!="string"&&m.stateNode===null)throw Error(n(166));if(w=D0(gE.current),D0(Bh.current),VI(m)){if(k=m.stateNode,w=m.memoizedProps,k[Uh]=m,(D=k.nodeValue!==w)&&(d=Ul,d!==null))switch(d.tag){case 3:MI(k.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&MI(k.nodeValue,w,(d.mode&1)!==0)}D&&(m.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[Uh]=m,m.stateNode=k}return Bo(m),null;case 13:if(hi(Pi),k=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(xi&&Bl!==null&&(m.mode&1)!==0&&(m.flags&128)===0)tY(),e_(),m.flags|=98560,D=!1;else if(D=VI(m),k!==null&&k.dehydrated!==null){if(d===null){if(!D)throw Error(n(318));if(D=m.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[Uh]=m}else e_(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Bo(m),D=!1}else ku!==null&&(y6(ku),ku=null),D=!0;if(!D)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(k=k!==null,k!==(d!==null&&d.memoizedState!==null)&&k&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(Pi.current&1)!==0?Vs===0&&(Vs=3):x6())),m.updateQueue!==null&&(m.flags|=4),Bo(m),null);case 4:return i_(),o6(d,m),d===null&&cE(m.stateNode.containerInfo),Bo(m),null;case 10:return LD(m.type._context),Bo(m),null;case 17:return Ya(m.type)&&OI(),Bo(m),null;case 19:if(hi(Pi),D=m.memoizedState,D===null)return Bo(m),null;if(k=(m.flags&128)!==0,K=D.rendering,K===null)if(k)wE(D,!1);else{if(Vs!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(K=HI(d),K!==null){for(m.flags|=128,wE(D,!1),k=K.updateQueue,k!==null&&(m.updateQueue=k,m.flags|=4),m.subtreeFlags=0,k=w,w=m.child;w!==null;)D=w,d=k,D.flags&=14680066,K=D.alternate,K===null?(D.childLanes=0,D.lanes=d,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=K.childLanes,D.lanes=K.lanes,D.child=K.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=K.memoizedProps,D.memoizedState=K.memoizedState,D.updateQueue=K.updateQueue,D.type=K.type,d=K.dependencies,D.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return oi(Pi,Pi.current&1|2),m.child}d=d.sibling}D.tail!==null&&dt()>l_&&(m.flags|=128,k=!0,wE(D,!1),m.lanes=4194304)}else{if(!k)if(d=HI(K),d!==null){if(m.flags|=128,k=!0,w=d.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),wE(D,!0),D.tail===null&&D.tailMode==="hidden"&&!K.alternate&&!xi)return Bo(m),null}else 2*dt()-D.renderingStartTime>l_&&w!==1073741824&&(m.flags|=128,k=!0,wE(D,!1),m.lanes=4194304);D.isBackwards?(K.sibling=m.child,m.child=K):(w=D.last,w!==null?w.sibling=K:m.child=K,D.last=K)}return D.tail!==null?(m=D.tail,D.rendering=m,D.tail=m.sibling,D.renderingStartTime=dt(),m.sibling=null,w=Pi.current,oi(Pi,k?w&1|2:w&1),m):(Bo(m),null);case 22:case 23:return _6(),k=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==k&&(m.flags|=8192),k&&(m.mode&1)!==0?(Wl&1073741824)!==0&&(Bo(m),m.subtreeFlags&6&&(m.flags|=8192)):Bo(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function $Te(d,m){switch(CD(m),m.tag){case 1:return Ya(m.type)&&OI(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return i_(),hi(Ka),hi(Go),zD(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return $D(m),null;case 13:if(hi(Pi),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(n(340));e_()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return hi(Pi),null;case 4:return i_(),null;case 10:return LD(m.type._context),null;case 22:case 23:return _6(),null;case 24:return null;default:return null}}var tP=!1,Wo=!1,VTe=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function o_(d,m){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){Bi(d,m,k)}else w.current=null}function a6(d,m,w){try{w()}catch(k){Bi(d,m,k)}}var QY=!1;function zTe(d,m){if(_D=nf,d=RK(),hD(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var M=k.anchorOffset,D=k.focusNode;k=k.focusOffset;try{w.nodeType,D.nodeType}catch{w=null;break e}var K=0,ce=-1,fe=-1,Fe=0,ct=0,ft=d,st=null;t:for(;;){for(var Nt;ft!==w||M!==0&&ft.nodeType!==3||(ce=K+M),ft!==D||k!==0&&ft.nodeType!==3||(fe=K+k),ft.nodeType===3&&(K+=ft.nodeValue.length),(Nt=ft.firstChild)!==null;)st=ft,ft=Nt;for(;;){if(ft===d)break t;if(st===w&&++Fe===M&&(ce=K),st===D&&++ct===k&&(fe=K),(Nt=ft.nextSibling)!==null)break;ft=st,st=ft.parentNode}ft=Nt}w=ce===-1||fe===-1?null:{start:ce,end:fe}}else w=null}w=w||{start:0,end:0}}else w=null;for(xD={focusedElem:d,selectionRange:w},nf=!1,Ft=m;Ft!==null;)if(m=Ft,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,Ft=d;else for(;Ft!==null;){m=Ft;try{var Ut=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var Yt=Ut.memoizedProps,ls=Ut.memoizedState,Se=m.stateNode,ye=Se.getSnapshotBeforeUpdate(m.elementType===m.type?Yt:Au(m.type,Yt),ls);Se.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:var Ne=m.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(gt){Bi(m,m.return,gt)}if(d=m.sibling,d!==null){d.return=m.return,Ft=d;break}Ft=m.return}return Ut=QY,QY=!1,Ut}function bE(d,m,w){var k=m.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var M=k=k.next;do{if((M.tag&d)===d){var D=M.destroy;M.destroy=void 0,D!==void 0&&a6(m,w,D)}M=M.next}while(M!==k)}}function nP(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&d)===d){var k=w.create;w.destroy=k()}w=w.next}while(w!==m)}}function l6(d){var m=d.ref;if(m!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof m=="function"?m(d):m.current=d}}function eX(d){var m=d.alternate;m!==null&&(d.alternate=null,eX(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[Uh],delete m[hE],delete m[SD],delete m[ETe],delete m[STe])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function tX(d){return d.tag===5||d.tag===3||d.tag===4}function nX(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||tX(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function c6(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(d,m):w.insertBefore(d,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(d,w)):(m=w,m.appendChild(d)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=NI));else if(k!==4&&(d=d.child,d!==null))for(c6(d,m,w),d=d.sibling;d!==null;)c6(d,m,w),d=d.sibling}function u6(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.insertBefore(d,m):w.appendChild(d);else if(k!==4&&(d=d.child,d!==null))for(u6(d,m,w),d=d.sibling;d!==null;)u6(d,m,w),d=d.sibling}var So=null,Cu=!1;function em(d,m,w){for(w=w.child;w!==null;)rX(d,m,w),w=w.sibling}function rX(d,m,w){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Fl,w)}catch{}switch(w.tag){case 5:Wo||o_(w,m);case 6:var k=So,M=Cu;So=null,em(d,m,w),So=k,Cu=M,So!==null&&(Cu?(d=So,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):So.removeChild(w.stateNode));break;case 18:So!==null&&(Cu?(d=So,w=w.stateNode,d.nodeType===8?ED(d.parentNode,w):d.nodeType===1&&ED(d,w),Bp(d)):ED(So,w.stateNode));break;case 4:k=So,M=Cu,So=w.stateNode.containerInfo,Cu=!0,em(d,m,w),So=k,Cu=M;break;case 0:case 11:case 14:case 15:if(!Wo&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){M=k=k.next;do{var D=M,K=D.destroy;D=D.tag,K!==void 0&&((D&2)!==0||(D&4)!==0)&&a6(w,m,K),M=M.next}while(M!==k)}em(d,m,w);break;case 1:if(!Wo&&(o_(w,m),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ce){Bi(w,m,ce)}em(d,m,w);break;case 21:em(d,m,w);break;case 22:w.mode&1?(Wo=(k=Wo)||w.memoizedState!==null,em(d,m,w),Wo=k):em(d,m,w);break;default:em(d,m,w)}}function iX(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new VTe),m.forEach(function(k){var M=XTe.bind(null,d,k);w.has(k)||(w.add(k),k.then(M,M))})}}function Iu(d,m){var w=m.deletions;if(w!==null)for(var k=0;k<w.length;k++){var M=w[k];try{var D=d,K=m,ce=K;e:for(;ce!==null;){switch(ce.tag){case 5:So=ce.stateNode,Cu=!1;break e;case 3:So=ce.stateNode.containerInfo,Cu=!0;break e;case 4:So=ce.stateNode.containerInfo,Cu=!0;break e}ce=ce.return}if(So===null)throw Error(n(160));rX(D,K,M),So=null,Cu=!1;var fe=M.alternate;fe!==null&&(fe.return=null),M.return=null}catch(Fe){Bi(M,m,Fe)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)sX(m,d),m=m.sibling}function sX(d,m){var w=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Iu(m,d),Hh(d),k&4){try{bE(3,d,d.return),nP(3,d)}catch(Yt){Bi(d,d.return,Yt)}try{bE(5,d,d.return)}catch(Yt){Bi(d,d.return,Yt)}}break;case 1:Iu(m,d),Hh(d),k&512&&w!==null&&o_(w,w.return);break;case 5:if(Iu(m,d),Hh(d),k&512&&w!==null&&o_(w,w.return),d.flags&32){var M=d.stateNode;try{Dn(M,"")}catch(Yt){Bi(d,d.return,Yt)}}if(k&4&&(M=d.stateNode,M!=null)){var D=d.memoizedProps,K=w!==null?w.memoizedProps:D,ce=d.type,fe=d.updateQueue;if(d.updateQueue=null,fe!==null)try{ce==="input"&&D.type==="radio"&&D.name!=null&&wn(M,D),qe(ce,K);var Fe=qe(ce,D);for(K=0;K<fe.length;K+=2){var ct=fe[K],ft=fe[K+1];ct==="style"?Fs(M,ft):ct==="dangerouslySetInnerHTML"?Vt(M,ft):ct==="children"?Dn(M,ft):C(M,ct,ft,Fe)}switch(ce){case"input":pt(M,D);break;case"textarea":Ai(M,D);break;case"select":var st=M._wrapperState.wasMultiple;M._wrapperState.wasMultiple=!!D.multiple;var Nt=D.value;Nt!=null?ei(M,!!D.multiple,Nt,!1):st!==!!D.multiple&&(D.defaultValue!=null?ei(M,!!D.multiple,D.defaultValue,!0):ei(M,!!D.multiple,D.multiple?[]:"",!1))}M[hE]=D}catch(Yt){Bi(d,d.return,Yt)}}break;case 6:if(Iu(m,d),Hh(d),k&4){if(d.stateNode===null)throw Error(n(162));M=d.stateNode,D=d.memoizedProps;try{M.nodeValue=D}catch(Yt){Bi(d,d.return,Yt)}}break;case 3:if(Iu(m,d),Hh(d),k&4&&w!==null&&w.memoizedState.isDehydrated)try{Bp(m.containerInfo)}catch(Yt){Bi(d,d.return,Yt)}break;case 4:Iu(m,d),Hh(d);break;case 13:Iu(m,d),Hh(d),M=d.child,M.flags&8192&&(D=M.memoizedState!==null,M.stateNode.isHidden=D,!D||M.alternate!==null&&M.alternate.memoizedState!==null||(f6=dt())),k&4&&iX(d);break;case 22:if(ct=w!==null&&w.memoizedState!==null,d.mode&1?(Wo=(Fe=Wo)||ct,Iu(m,d),Wo=Fe):Iu(m,d),Hh(d),k&8192){if(Fe=d.memoizedState!==null,(d.stateNode.isHidden=Fe)&&!ct&&(d.mode&1)!==0)for(Ft=d,ct=d.child;ct!==null;){for(ft=Ft=ct;Ft!==null;){switch(st=Ft,Nt=st.child,st.tag){case 0:case 11:case 14:case 15:bE(4,st,st.return);break;case 1:o_(st,st.return);var Ut=st.stateNode;if(typeof Ut.componentWillUnmount=="function"){k=st,w=st.return;try{m=k,Ut.props=m.memoizedProps,Ut.state=m.memoizedState,Ut.componentWillUnmount()}catch(Yt){Bi(k,w,Yt)}}break;case 5:o_(st,st.return);break;case 22:if(st.memoizedState!==null){lX(ft);continue}}Nt!==null?(Nt.return=st,Ft=Nt):lX(ft)}ct=ct.sibling}e:for(ct=null,ft=d;;){if(ft.tag===5){if(ct===null){ct=ft;try{M=ft.stateNode,Fe?(D=M.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ce=ft.stateNode,fe=ft.memoizedProps.style,K=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,ce.style.display=Ui("display",K))}catch(Yt){Bi(d,d.return,Yt)}}}else if(ft.tag===6){if(ct===null)try{ft.stateNode.nodeValue=Fe?"":ft.memoizedProps}catch(Yt){Bi(d,d.return,Yt)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===d)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===d)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===d)break e;ct===ft&&(ct=null),ft=ft.return}ct===ft&&(ct=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:Iu(m,d),Hh(d),k&4&&iX(d);break;case 21:break;default:Iu(m,d),Hh(d)}}function Hh(d){var m=d.flags;if(m&2){try{e:{for(var w=d.return;w!==null;){if(tX(w)){var k=w;break e}w=w.return}throw Error(n(160))}switch(k.tag){case 5:var M=k.stateNode;k.flags&32&&(Dn(M,""),k.flags&=-33);var D=nX(d);u6(d,D,M);break;case 3:case 4:var K=k.stateNode.containerInfo,ce=nX(d);c6(d,ce,K);break;default:throw Error(n(161))}}catch(fe){Bi(d,d.return,fe)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function GTe(d,m,w){Ft=d,oX(d)}function oX(d,m,w){for(var k=(d.mode&1)!==0;Ft!==null;){var M=Ft,D=M.child;if(M.tag===22&&k){var K=M.memoizedState!==null||tP;if(!K){var ce=M.alternate,fe=ce!==null&&ce.memoizedState!==null||Wo;ce=tP;var Fe=Wo;if(tP=K,(Wo=fe)&&!Fe)for(Ft=M;Ft!==null;)K=Ft,fe=K.child,K.tag===22&&K.memoizedState!==null?cX(M):fe!==null?(fe.return=K,Ft=fe):cX(M);for(;D!==null;)Ft=D,oX(D),D=D.sibling;Ft=M,tP=ce,Wo=Fe}aX(d)}else(M.subtreeFlags&8772)!==0&&D!==null?(D.return=M,Ft=D):aX(d)}}function aX(d){for(;Ft!==null;){var m=Ft;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Wo||nP(5,m);break;case 1:var k=m.stateNode;if(m.flags&4&&!Wo)if(w===null)k.componentDidMount();else{var M=m.elementType===m.type?w.memoizedProps:Au(m.type,w.memoizedProps);k.componentDidUpdate(M,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var D=m.updateQueue;D!==null&&lY(m,D,k);break;case 3:var K=m.updateQueue;if(K!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}lY(m,K,w)}break;case 5:var ce=m.stateNode;if(w===null&&m.flags&4){w=ce;var fe=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&w.focus();break;case"img":fe.src&&(w.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var Fe=m.alternate;if(Fe!==null){var ct=Fe.memoizedState;if(ct!==null){var ft=ct.dehydrated;ft!==null&&Bp(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Wo||m.flags&512&&l6(m)}catch(st){Bi(m,m.return,st)}}if(m===d){Ft=null;break}if(w=m.sibling,w!==null){w.return=m.return,Ft=w;break}Ft=m.return}}function lX(d){for(;Ft!==null;){var m=Ft;if(m===d){Ft=null;break}var w=m.sibling;if(w!==null){w.return=m.return,Ft=w;break}Ft=m.return}}function cX(d){for(;Ft!==null;){var m=Ft;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{nP(4,m)}catch(fe){Bi(m,w,fe)}break;case 1:var k=m.stateNode;if(typeof k.componentDidMount=="function"){var M=m.return;try{k.componentDidMount()}catch(fe){Bi(m,M,fe)}}var D=m.return;try{l6(m)}catch(fe){Bi(m,D,fe)}break;case 5:var K=m.return;try{l6(m)}catch(fe){Bi(m,K,fe)}}}catch(fe){Bi(m,m.return,fe)}if(m===d){Ft=null;break}var ce=m.sibling;if(ce!==null){ce.return=m.return,Ft=ce;break}Ft=m.return}}var UTe=Math.ceil,rP=I.ReactCurrentDispatcher,h6=I.ReactCurrentOwner,Oc=I.ReactCurrentBatchConfig,fr=0,eo=null,xs=null,To=0,Wl=0,a_=Yp(0),Vs=0,EE=null,F0=0,iP=0,d6=0,SE=null,Za=null,f6=0,l_=1/0,ff=null,sP=!1,p6=null,tm=null,oP=!1,nm=null,aP=0,TE=0,m6=null,lP=-1,cP=0;function ka(){return(fr&6)!==0?dt():lP!==-1?lP:lP=dt()}function rm(d){return(d.mode&1)===0?1:(fr&2)!==0&&To!==0?To&-To:kTe.transition!==null?(cP===0&&(cP=Hb()),cP):(d=sr,d!==0||(d=window.event,d=d===void 0?16:jv(d.type)),d)}function Pu(d,m,w,k){if(50<TE)throw TE=0,m6=null,Error(n(185));k0(d,w,k),((fr&2)===0||d!==eo)&&(d===eo&&((fr&2)===0&&(iP|=w),Vs===4&&im(d,To)),Ja(d,k),w===1&&fr===0&&(m.mode&1)===0&&(l_=dt()+500,jI&&Zp()))}function Ja(d,m){var w=d.callbackNode;T0(d,m);var k=Qd(d,d===eo?To:0);if(k===0)w!==null&&vt(w),d.callbackNode=null,d.callbackPriority=0;else if(m=k&-k,d.callbackPriority!==m){if(w!=null&&vt(w),m===1)d.tag===0?TTe(hX.bind(null,d)):XK(hX.bind(null,d)),wTe(function(){(fr&6)===0&&Zp()}),w=null;else{switch(Nh(k)){case 1:w=Mr;break;case 4:w=Fr;break;case 16:w=_i;break;case 536870912:w=Ic;break;default:w=_i}w=_X(w,uX.bind(null,d))}d.callbackPriority=m,d.callbackNode=w}}function uX(d,m){if(lP=-1,cP=0,(fr&6)!==0)throw Error(n(327));var w=d.callbackNode;if(c_()&&d.callbackNode!==w)return null;var k=Qd(d,d===eo?To:0);if(k===0)return null;if((k&30)!==0||(k&d.expiredLanes)!==0||m)m=uP(d,k);else{m=k;var M=fr;fr|=2;var D=fX();(eo!==d||To!==m)&&(ff=null,l_=dt()+500,V0(d,m));do try{HTe();break}catch(ce){dX(d,ce)}while(!0);ND(),rP.current=D,fr=M,xs!==null?m=0:(eo=null,To=0,m=Vs)}if(m!==0){if(m===2&&(M=Wb(d),M!==0&&(k=M,m=g6(d,M))),m===1)throw w=EE,V0(d,0),im(d,k),Ja(d,dt()),w;if(m===6)im(d,k);else{if(M=d.current.alternate,(k&30)===0&&!BTe(M)&&(m=uP(d,k),m===2&&(D=Wb(d),D!==0&&(k=D,m=g6(d,D))),m===1))throw w=EE,V0(d,0),im(d,k),Ja(d,dt()),w;switch(d.finishedWork=M,d.finishedLanes=k,m){case 0:case 1:throw Error(n(345));case 2:z0(d,Za,ff);break;case 3:if(im(d,k),(k&130023424)===k&&(m=f6+500-dt(),10<m)){if(Qd(d,0)!==0)break;if(M=d.suspendedLanes,(M&k)!==k){ka(),d.pingedLanes|=d.suspendedLanes&M;break}d.timeoutHandle=bD(z0.bind(null,d,Za,ff),m);break}z0(d,Za,ff);break;case 4:if(im(d,k),(k&4194240)===k)break;for(m=d.eventTimes,M=-1;0<k;){var K=31-Ii(k);D=1<<K,K=m[K],K>M&&(M=K),k&=~D}if(k=M,k=dt()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*UTe(k/1960))-k,10<k){d.timeoutHandle=bD(z0.bind(null,d,Za,ff),k);break}z0(d,Za,ff);break;case 5:z0(d,Za,ff);break;default:throw Error(n(329))}}}return Ja(d,dt()),d.callbackNode===w?uX.bind(null,d):null}function g6(d,m){var w=SE;return d.current.memoizedState.isDehydrated&&(V0(d,m).flags|=256),d=uP(d,m),d!==2&&(m=Za,Za=w,m!==null&&y6(m)),d}function y6(d){Za===null?Za=d:Za.push.apply(Za,d)}function BTe(d){for(var m=d;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var M=w[k],D=M.getSnapshot;M=M.value;try{if(!Tu(D(),M))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function im(d,m){for(m&=~d6,m&=~iP,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var w=31-Ii(m),k=1<<w;d[w]=-1,m&=~k}}function hX(d){if((fr&6)!==0)throw Error(n(327));c_();var m=Qd(d,0);if((m&1)===0)return Ja(d,dt()),null;var w=uP(d,m);if(d.tag!==0&&w===2){var k=Wb(d);k!==0&&(m=k,w=g6(d,k))}if(w===1)throw w=EE,V0(d,0),im(d,m),Ja(d,dt()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,z0(d,Za,ff),Ja(d,dt()),null}function v6(d,m){var w=fr;fr|=1;try{return d(m)}finally{fr=w,fr===0&&(l_=dt()+500,jI&&Zp())}}function $0(d){nm!==null&&nm.tag===0&&(fr&6)===0&&c_();var m=fr;fr|=1;var w=Oc.transition,k=sr;try{if(Oc.transition=null,sr=1,d)return d()}finally{sr=k,Oc.transition=w,fr=m,(fr&6)===0&&Zp()}}function _6(){Wl=a_.current,hi(a_)}function V0(d,m){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,xTe(w)),xs!==null)for(w=xs.return;w!==null;){var k=w;switch(CD(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&OI();break;case 3:i_(),hi(Ka),hi(Go),zD();break;case 5:$D(k);break;case 4:i_();break;case 13:hi(Pi);break;case 19:hi(Pi);break;case 10:LD(k.type._context);break;case 22:case 23:_6()}w=w.return}if(eo=d,xs=d=sm(d.current,null),To=Wl=m,Vs=0,EE=null,d6=iP=F0=0,Za=SE=null,O0!==null){for(m=0;m<O0.length;m++)if(w=O0[m],k=w.interleaved,k!==null){w.interleaved=null;var M=k.next,D=w.pending;if(D!==null){var K=D.next;D.next=M,k.next=K}w.pending=k}O0=null}return d}function dX(d,m){do{var w=xs;try{if(ND(),qI.current=ZI,KI){for(var k=Ri.memoizedState;k!==null;){var M=k.queue;M!==null&&(M.pending=null),k=k.next}KI=!1}if(j0=0,Qs=$s=Ri=null,yE=!1,vE=0,h6.current=null,w===null||w.return===null){Vs=1,EE=m,xs=null;break}e:{var D=d,K=w.return,ce=w,fe=m;if(m=To,ce.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Fe=fe,ct=ce,ft=ct.tag;if((ct.mode&1)===0&&(ft===0||ft===11||ft===15)){var st=ct.alternate;st?(ct.updateQueue=st.updateQueue,ct.memoizedState=st.memoizedState,ct.lanes=st.lanes):(ct.updateQueue=null,ct.memoizedState=null)}var Nt=jY(K);if(Nt!==null){Nt.flags&=-257,FY(Nt,K,ce,D,m),Nt.mode&1&&DY(D,Fe,m),m=Nt,fe=Fe;var Ut=m.updateQueue;if(Ut===null){var Yt=new Set;Yt.add(fe),m.updateQueue=Yt}else Ut.add(fe);break e}else{if((m&1)===0){DY(D,Fe,m),x6();break e}fe=Error(n(426))}}else if(xi&&ce.mode&1){var ls=jY(K);if(ls!==null){(ls.flags&65536)===0&&(ls.flags|=256),FY(ls,K,ce,D,m),RD(s_(fe,ce));break e}}D=fe=s_(fe,ce),Vs!==4&&(Vs=2),SE===null?SE=[D]:SE.push(D),D=K;do{switch(D.tag){case 3:D.flags|=65536,m&=-m,D.lanes|=m;var Se=LY(D,fe,m);aY(D,Se);break e;case 1:ce=fe;var ye=D.type,Ne=D.stateNode;if((D.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(tm===null||!tm.has(Ne)))){D.flags|=65536,m&=-m,D.lanes|=m;var gt=OY(D,ce,m);aY(D,gt);break e}}D=D.return}while(D!==null)}mX(w)}catch(Jt){m=Jt,xs===w&&w!==null&&(xs=w=w.return);continue}break}while(!0)}function fX(){var d=rP.current;return rP.current=ZI,d===null?ZI:d}function x6(){(Vs===0||Vs===3||Vs===2)&&(Vs=4),eo===null||(F0&268435455)===0&&(iP&268435455)===0||im(eo,To)}function uP(d,m){var w=fr;fr|=2;var k=fX();(eo!==d||To!==m)&&(ff=null,V0(d,m));do try{WTe();break}catch(M){dX(d,M)}while(!0);if(ND(),fr=w,rP.current=k,xs!==null)throw Error(n(261));return eo=null,To=0,Vs}function WTe(){for(;xs!==null;)pX(xs)}function HTe(){for(;xs!==null&&!Pt();)pX(xs)}function pX(d){var m=vX(d.alternate,d,Wl);d.memoizedProps=d.pendingProps,m===null?mX(d):xs=m,h6.current=null}function mX(d){var m=d;do{var w=m.alternate;if(d=m.return,(m.flags&32768)===0){if(w=FTe(w,m,Wl),w!==null){xs=w;return}}else{if(w=$Te(w,m),w!==null){w.flags&=32767,xs=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Vs=6,xs=null;return}}if(m=m.sibling,m!==null){xs=m;return}xs=m=d}while(m!==null);Vs===0&&(Vs=5)}function z0(d,m,w){var k=sr,M=Oc.transition;try{Oc.transition=null,sr=1,qTe(d,m,w,k)}finally{Oc.transition=M,sr=k}return null}function qTe(d,m,w,k){do c_();while(nm!==null);if((fr&6)!==0)throw Error(n(327));w=d.finishedWork;var M=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var D=w.lanes|w.childLanes;if(oD(d,D),d===eo&&(xs=eo=null,To=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||oP||(oP=!0,_X(_i,function(){return c_(),null})),D=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||D){D=Oc.transition,Oc.transition=null;var K=sr;sr=1;var ce=fr;fr|=4,h6.current=null,zTe(d,w),sX(w,d),fTe(xD),nf=!!_D,xD=_D=null,d.current=w,GTe(w),ht(),fr=ce,sr=K,Oc.transition=D}else d.current=w;if(oP&&(oP=!1,nm=d,aP=M),D=d.pendingLanes,D===0&&(tm=null),Vp(w.stateNode),Ja(d,dt()),m!==null)for(k=d.onRecoverableError,w=0;w<m.length;w++)M=m[w],k(M.value,{componentStack:M.stack,digest:M.digest});if(sP)throw sP=!1,d=p6,p6=null,d;return(aP&1)!==0&&d.tag!==0&&c_(),D=d.pendingLanes,(D&1)!==0?d===m6?TE++:(TE=0,m6=d):TE=0,Zp(),null}function c_(){if(nm!==null){var d=Nh(aP),m=Oc.transition,w=sr;try{if(Oc.transition=null,sr=16>d?16:d,nm===null)var k=!1;else{if(d=nm,nm=null,aP=0,(fr&6)!==0)throw Error(n(331));var M=fr;for(fr|=4,Ft=d.current;Ft!==null;){var D=Ft,K=D.child;if((Ft.flags&16)!==0){var ce=D.deletions;if(ce!==null){for(var fe=0;fe<ce.length;fe++){var Fe=ce[fe];for(Ft=Fe;Ft!==null;){var ct=Ft;switch(ct.tag){case 0:case 11:case 15:bE(8,ct,D)}var ft=ct.child;if(ft!==null)ft.return=ct,Ft=ft;else for(;Ft!==null;){ct=Ft;var st=ct.sibling,Nt=ct.return;if(eX(ct),ct===Fe){Ft=null;break}if(st!==null){st.return=Nt,Ft=st;break}Ft=Nt}}}var Ut=D.alternate;if(Ut!==null){var Yt=Ut.child;if(Yt!==null){Ut.child=null;do{var ls=Yt.sibling;Yt.sibling=null,Yt=ls}while(Yt!==null)}}Ft=D}}if((D.subtreeFlags&2064)!==0&&K!==null)K.return=D,Ft=K;else e:for(;Ft!==null;){if(D=Ft,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:bE(9,D,D.return)}var Se=D.sibling;if(Se!==null){Se.return=D.return,Ft=Se;break e}Ft=D.return}}var ye=d.current;for(Ft=ye;Ft!==null;){K=Ft;var Ne=K.child;if((K.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=K,Ft=Ne;else e:for(K=ye;Ft!==null;){if(ce=Ft,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:nP(9,ce)}}catch(Jt){Bi(ce,ce.return,Jt)}if(ce===K){Ft=null;break e}var gt=ce.sibling;if(gt!==null){gt.return=ce.return,Ft=gt;break e}Ft=ce.return}}if(fr=M,Zp(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Fl,d)}catch{}k=!0}return k}finally{sr=w,Oc.transition=m}}return!1}function gX(d,m,w){m=s_(w,m),m=LY(d,m,1),d=Qp(d,m,1),m=ka(),d!==null&&(k0(d,1,m),Ja(d,m))}function Bi(d,m,w){if(d.tag===3)gX(d,d,w);else for(;m!==null;){if(m.tag===3){gX(m,d,w);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(tm===null||!tm.has(k))){d=s_(w,d),d=OY(m,d,1),m=Qp(m,d,1),d=ka(),m!==null&&(k0(m,1,d),Ja(m,d));break}}m=m.return}}function KTe(d,m,w){var k=d.pingCache;k!==null&&k.delete(m),m=ka(),d.pingedLanes|=d.suspendedLanes&w,eo===d&&(To&w)===w&&(Vs===4||Vs===3&&(To&130023424)===To&&500>dt()-f6?V0(d,0):d6|=w),Ja(d,m)}function yX(d,m){m===0&&((d.mode&1)===0?m=1:(m=zp,zp<<=1,(zp&130023424)===0&&(zp=4194304)));var w=ka();d=uf(d,m),d!==null&&(k0(d,m,w),Ja(d,w))}function YTe(d){var m=d.memoizedState,w=0;m!==null&&(w=m.retryLane),yX(d,w)}function XTe(d,m){var w=0;switch(d.tag){case 13:var k=d.stateNode,M=d.memoizedState;M!==null&&(w=M.retryLane);break;case 19:k=d.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(m),yX(d,w)}var vX;vX=function(d,m,w){if(d!==null)if(d.memoizedProps!==m.pendingProps||Ka.current)Xa=!0;else{if((d.lanes&w)===0&&(m.flags&128)===0)return Xa=!1,jTe(d,m,w);Xa=(d.flags&131072)!==0}else Xa=!1,xi&&(m.flags&1048576)!==0&&ZK(m,$I,m.index);switch(m.lanes=0,m.tag){case 2:var k=m.type;eP(d,m),d=m.pendingProps;var M=Zv(m,Go.current);r_(m,w),M=BD(null,m,k,d,M,w);var D=WD();return m.flags|=1,typeof M=="object"&&M!==null&&typeof M.render=="function"&&M.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ya(k)?(D=!0,DI(m)):D=!1,m.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,jD(m),M.updater=JI,m.stateNode=M,M._reactInternals=m,ZD(m,k,d,w),m=t6(null,m,k,!0,D,w)):(m.tag=0,xi&&D&&AD(m),Ta(null,m,M,w),m=m.child),m;case 16:k=m.elementType;e:{switch(eP(d,m),d=m.pendingProps,M=k._init,k=M(k._payload),m.type=k,M=m.tag=JTe(k),d=Au(k,d),M){case 0:m=e6(null,m,k,d,w);break e;case 1:m=BY(null,m,k,d,w);break e;case 11:m=$Y(null,m,k,d,w);break e;case 14:m=VY(null,m,k,Au(k.type,d),w);break e}throw Error(n(306,k,""))}return m;case 0:return k=m.type,M=m.pendingProps,M=m.elementType===k?M:Au(k,M),e6(d,m,k,M,w);case 1:return k=m.type,M=m.pendingProps,M=m.elementType===k?M:Au(k,M),BY(d,m,k,M,w);case 3:e:{if(WY(m),d===null)throw Error(n(387));k=m.pendingProps,D=m.memoizedState,M=D.element,oY(d,m),WI(m,k,null,w);var K=m.memoizedState;if(k=K.element,D.isDehydrated)if(D={element:k,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},m.updateQueue.baseState=D,m.memoizedState=D,m.flags&256){M=s_(Error(n(423)),m),m=HY(d,m,k,w,M);break e}else if(k!==M){M=s_(Error(n(424)),m),m=HY(d,m,k,w,M);break e}else for(Bl=Kp(m.stateNode.containerInfo.firstChild),Ul=m,xi=!0,ku=null,w=iY(m,null,k,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(e_(),k===M){m=df(d,m,w);break e}Ta(d,m,k,w)}m=m.child}return m;case 5:return cY(m),d===null&&PD(m),k=m.type,M=m.pendingProps,D=d!==null?d.memoizedProps:null,K=M.children,wD(k,M)?K=null:D!==null&&wD(k,D)&&(m.flags|=32),UY(d,m),Ta(d,m,K,w),m.child;case 6:return d===null&&PD(m),null;case 13:return qY(d,m,w);case 4:return FD(m,m.stateNode.containerInfo),k=m.pendingProps,d===null?m.child=t_(m,null,k,w):Ta(d,m,k,w),m.child;case 11:return k=m.type,M=m.pendingProps,M=m.elementType===k?M:Au(k,M),$Y(d,m,k,M,w);case 7:return Ta(d,m,m.pendingProps,w),m.child;case 8:return Ta(d,m,m.pendingProps.children,w),m.child;case 12:return Ta(d,m,m.pendingProps.children,w),m.child;case 10:e:{if(k=m.type._context,M=m.pendingProps,D=m.memoizedProps,K=M.value,oi(GI,k._currentValue),k._currentValue=K,D!==null)if(Tu(D.value,K)){if(D.children===M.children&&!Ka.current){m=df(d,m,w);break e}}else for(D=m.child,D!==null&&(D.return=m);D!==null;){var ce=D.dependencies;if(ce!==null){K=D.child;for(var fe=ce.firstContext;fe!==null;){if(fe.context===k){if(D.tag===1){fe=hf(-1,w&-w),fe.tag=2;var Fe=D.updateQueue;if(Fe!==null){Fe=Fe.shared;var ct=Fe.pending;ct===null?fe.next=fe:(fe.next=ct.next,ct.next=fe),Fe.pending=fe}}D.lanes|=w,fe=D.alternate,fe!==null&&(fe.lanes|=w),OD(D.return,w,m),ce.lanes|=w;break}fe=fe.next}}else if(D.tag===10)K=D.type===m.type?null:D.child;else if(D.tag===18){if(K=D.return,K===null)throw Error(n(341));K.lanes|=w,ce=K.alternate,ce!==null&&(ce.lanes|=w),OD(K,w,m),K=D.sibling}else K=D.child;if(K!==null)K.return=D;else for(K=D;K!==null;){if(K===m){K=null;break}if(D=K.sibling,D!==null){D.return=K.return,K=D;break}K=K.return}D=K}Ta(d,m,M.children,w),m=m.child}return m;case 9:return M=m.type,k=m.pendingProps.children,r_(m,w),M=Nc(M),k=k(M),m.flags|=1,Ta(d,m,k,w),m.child;case 14:return k=m.type,M=Au(k,m.pendingProps),M=Au(k.type,M),VY(d,m,k,M,w);case 15:return zY(d,m,m.type,m.pendingProps,w);case 17:return k=m.type,M=m.pendingProps,M=m.elementType===k?M:Au(k,M),eP(d,m),m.tag=1,Ya(k)?(d=!0,DI(m)):d=!1,r_(m,w),MY(m,k,M),ZD(m,k,M,w),t6(null,m,k,!0,d,w);case 19:return YY(d,m,w);case 22:return GY(d,m,w)}throw Error(n(156,m.tag))};function _X(d,m){return ut(d,m)}function ZTe(d,m,w,k){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(d,m,w,k){return new ZTe(d,m,w,k)}function w6(d){return d=d.prototype,!(!d||!d.isReactComponent)}function JTe(d){if(typeof d=="function")return w6(d)?1:0;if(d!=null){if(d=d.$$typeof,d===G)return 11;if(d===be)return 14}return 2}function sm(d,m){var w=d.alternate;return w===null?(w=Dc(d.tag,m,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=m,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,m=d.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function hP(d,m,w,k,M,D){var K=2;if(k=d,typeof d=="function")w6(d)&&(K=1);else if(typeof d=="string")K=5;else e:switch(d){case P:return G0(w.children,M,D,m);case N:K=8,M|=8;break;case L:return d=Dc(12,w,m,M|2),d.elementType=L,d.lanes=D,d;case U:return d=Dc(13,w,m,M),d.elementType=U,d.lanes=D,d;case ue:return d=Dc(19,w,m,M),d.elementType=ue,d.lanes=D,d;case Ce:return dP(w,M,D,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case O:K=10;break e;case F:K=9;break e;case G:K=11;break e;case be:K=14;break e;case ze:K=16,k=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return m=Dc(K,w,m,M),m.elementType=d,m.type=k,m.lanes=D,m}function G0(d,m,w,k){return d=Dc(7,d,k,m),d.lanes=w,d}function dP(d,m,w,k){return d=Dc(22,d,k,m),d.elementType=Ce,d.lanes=w,d.stateNode={isHidden:!1},d}function b6(d,m,w){return d=Dc(6,d,null,m),d.lanes=w,d}function E6(d,m,w){return m=Dc(4,d.children!==null?d.children:[],d.key,m),m.lanes=w,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function QTe(d,m,w,k,M){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qb(0),this.expirationTimes=qb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qb(0),this.identifierPrefix=k,this.onRecoverableError=M,this.mutableSourceEagerHydrationData=null}function S6(d,m,w,k,M,D,K,ce,fe){return d=new QTe(d,m,w,ce,fe),m===1?(m=1,D===!0&&(m|=8)):m=0,D=Dc(3,null,null,m),d.current=D,D.stateNode=d,D.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},jD(D),d}function eke(d,m,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:k==null?null:""+k,children:d,containerInfo:m,implementation:w}}function xX(d){if(!d)return Xp;d=d._reactInternals;e:{if(ae(d)!==d||d.tag!==1)throw Error(n(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ya(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(Ya(w))return KK(d,w,m)}return m}function wX(d,m,w,k,M,D,K,ce,fe){return d=S6(w,k,!0,d,M,D,K,ce,fe),d.context=xX(null),w=d.current,k=ka(),M=rm(w),D=hf(k,M),D.callback=m??null,Qp(w,D,M),d.current.lanes=M,k0(d,M,k),Ja(d,k),d}function fP(d,m,w,k){var M=m.current,D=ka(),K=rm(M);return w=xX(w),m.context===null?m.context=w:m.pendingContext=w,m=hf(D,K),m.payload={element:d},k=k===void 0?null:k,k!==null&&(m.callback=k),d=Qp(M,m,K),d!==null&&(Pu(d,M,K,D),BI(d,M,K)),K}function pP(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function bX(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<m?w:m}}function T6(d,m){bX(d,m),(d=d.alternate)&&bX(d,m)}function tke(){return null}var EX=typeof reportError=="function"?reportError:function(d){console.error(d)};function k6(d){this._internalRoot=d}mP.prototype.render=k6.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(n(409));fP(d,m,null,null)},mP.prototype.unmount=k6.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;$0(function(){fP(null,d,null,null)}),m[of]=null}};function mP(d){this._internalRoot=d}mP.prototype.unstable_scheduleHydration=function(d){if(d){var m=Zb();d={blockedOn:null,target:d,priority:m};for(var w=0;w<$l.length&&m!==0&&m<$l[w].priority;w++);$l.splice(w,0,d),w===0&&Ov(d)}};function A6(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function gP(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function SX(){}function nke(d,m,w,k,M){if(M){if(typeof k=="function"){var D=k;k=function(){var Fe=pP(K);D.call(Fe)}}var K=wX(m,k,d,0,null,!1,!1,"",SX);return d._reactRootContainer=K,d[of]=K.current,cE(d.nodeType===8?d.parentNode:d),$0(),K}for(;M=d.lastChild;)d.removeChild(M);if(typeof k=="function"){var ce=k;k=function(){var Fe=pP(fe);ce.call(Fe)}}var fe=S6(d,0,!1,null,null,!1,!1,"",SX);return d._reactRootContainer=fe,d[of]=fe.current,cE(d.nodeType===8?d.parentNode:d),$0(function(){fP(m,fe,w,k)}),fe}function yP(d,m,w,k,M){var D=w._reactRootContainer;if(D){var K=D;if(typeof M=="function"){var ce=M;M=function(){var fe=pP(K);ce.call(fe)}}fP(m,K,d,M)}else K=nke(w,m,d,M,k);return pP(K)}Yb=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var w=Er(m.pendingLanes);w!==0&&(Kb(m,w|1),Ja(m,dt()),(fr&6)===0&&(l_=dt()+500,Zp()))}break;case 13:$0(function(){var k=uf(d,1);if(k!==null){var M=ka();Pu(k,d,1,M)}}),T6(d,1)}},Nv=function(d){if(d.tag===13){var m=uf(d,134217728);if(m!==null){var w=ka();Pu(m,d,134217728,w)}T6(d,134217728)}},Xb=function(d){if(d.tag===13){var m=rm(d),w=uf(d,m);if(w!==null){var k=ka();Pu(w,d,m,k)}T6(d,m)}},Zb=function(){return sr},Jb=function(d,m){var w=sr;try{return sr=d,m()}finally{sr=w}},rn=function(d,m,w){switch(m){case"input":if(pt(d,w),m=w.name,w.type==="radio"&&m!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var k=w[m];if(k!==d&&k.form===d.form){var M=LI(k);if(!M)throw Error(n(90));Xe(k),pt(k,M)}}}break;case"textarea":Ai(d,w);break;case"select":m=w.value,m!=null&&ei(d,!!w.multiple,m,!1)}},te=v6,ve=$0;var rke={usingClientEntryPoint:!1,Events:[dE,Yv,LI,le,Ve,v6]},kE={findFiberByHostInstance:R0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ike={bundleType:kE.bundleType,version:kE.version,rendererPackageName:kE.rendererPackageName,rendererConfig:kE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Oe(d),d===null?null:d.stateNode},findFiberByHostInstance:kE.findFiberByHostInstance||tke,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vP.isDisabled&&vP.supportsFiber)try{Fl=vP.inject(ike),os=vP}catch{}}return Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rke,Qa.createPortal=function(d,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A6(m))throw Error(n(200));return eke(d,m,null,w)},Qa.createRoot=function(d,m){if(!A6(d))throw Error(n(299));var w=!1,k="",M=EX;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(M=m.onRecoverableError)),m=S6(d,1,!1,null,null,w,!1,k,M),d[of]=m.current,cE(d.nodeType===8?d.parentNode:d),new k6(m)},Qa.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Oe(m),d=d===null?null:d.stateNode,d},Qa.flushSync=function(d){return $0(d)},Qa.hydrate=function(d,m,w){if(!gP(m))throw Error(n(200));return yP(null,d,m,!0,w)},Qa.hydrateRoot=function(d,m,w){if(!A6(d))throw Error(n(405));var k=w!=null&&w.hydratedSources||null,M=!1,D="",K=EX;if(w!=null&&(w.unstable_strictMode===!0&&(M=!0),w.identifierPrefix!==void 0&&(D=w.identifierPrefix),w.onRecoverableError!==void 0&&(K=w.onRecoverableError)),m=wX(m,null,d,1,w??null,M,!1,D,K),d[of]=m.current,cE(d),k)for(d=0;d<k.length;d++)w=k[d],M=w._getVersion,M=M(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,M]:m.mutableSourceEagerHydrationData.push(w,M);return new mP(m)},Qa.render=function(d,m,w){if(!gP(m))throw Error(n(200));return yP(null,d,m,!1,w)},Qa.unmountComponentAtNode=function(d){if(!gP(d))throw Error(n(40));return d._reactRootContainer?($0(function(){yP(null,null,d,!1,function(){d._reactRootContainer=null,d[of]=null})}),!0):!1},Qa.unstable_batchedUpdates=v6,Qa.unstable_renderSubtreeIntoContainer=function(d,m,w,k){if(!gP(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return yP(d,m,w,!1,k)},Qa.version="18.3.1-next-f1338f8080-20240426",Qa}var LX;function pke(){if(LX)return R6.exports;LX=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),R6.exports=fke(),R6.exports}var OX;function mke(){if(OX)return _P;OX=1;var t=pke();return _P.createRoot=t.createRoot,_P.hydrateRoot=t.hydrateRoot,_P}var gke=mke();const yke=cG(gke);var Y=ZA();const vke=cG(Y),Ps={ADD:"add",REMOVE:"remove"},r2={PROPERTYCHANGE:"propertychange"},En={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class JA{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function _ke(t,e,n){let r,i;n=n||op;let s=0,o=t.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+n(t[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function op(t,e){return t>e?1:t<e?-1:0}function xke(t,e){return t<e?1:t>e?-1:0}function j5(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const s=t[i];if(s===e)return i;if(s<e)return n(e,t[i-1],s)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function wke(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function xr(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function Kd(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function bke(t,e,n){const r=e||op;return t.every(function(i,s){if(s===0)return!0;const o=r(t[s-1],i);return!(o>0||o===0)})}function Vg(){return!0}function ib(){return!1}function bk(){}function ole(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!Kd(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function ale(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function lv(t){for(const e in t)delete t[e]}function T1(t){let e;for(e in t)return!1;return!e}class Cc{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let QA=class extends JA{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=n?new Cc(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let c=0,u=i.length;c<u;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(s):l=i[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,bk);delete o[r]}return l}disposeInternal(){this.listeners_&&lv(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=bk,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Yn(t,e,n,r,i){if(i){const o=n;n=function(a){return t.removeEventListener(e,n),o.call(r??this,a)}}else r&&r!==t&&(n=n.bind(r));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function B3(t,e,n,r){return Yn(t,e,n,r,!0)}function ni(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),lv(t))}class eC extends QA{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(En.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Yn(this,e[s],n);return i}return Yn(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=B3(this,e[s],n)}else r=B3(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)W$(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}eC.prototype.on;eC.prototype.once;eC.prototype.un;function W$(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ni(t[e]);else ni(t)}function Sn(){throw new Error("Unimplemented abstract method.")}let Eke=0;function en(t){return t.ol_uid||(t.ol_uid=String(++Eke))}class DX extends Cc{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class Yd extends eC{constructor(e){super(),this.on,this.once,this.un,en(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new DX(r,e,n)),r=r2.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new DX(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const s=i[e];i[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],T1(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const jX={LENGTH:"length"};class xP extends Cc{constructor(e,n,r){super(e),this.element=n,this.index=r}}class Fa extends Yd{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(jX.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new xP(Ps.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new xP(Ps.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new xP(Ps.REMOVE,i,e)),this.dispatchEvent(new xP(Ps.ADD,n,e))}updateLength_(){this.set(jX.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function ur(t,e){if(!t)throw new Error(e)}let yr=class lle extends Yd{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new lle(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ni(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yn(e,En.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Ske(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Ske(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(ur(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const ao={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ia(t){const e=Wa();for(let n=0,r=t.length;n<r;++n)hT(e,t[n]);return e}function ah(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function cle(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function cv(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function k1(t,e){return uG(t,e[0],e[1])}function ig(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function uG(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function H$(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1];let l=ao.UNKNOWN;return o<n?l=l|ao.LEFT:o>i&&(l=l|ao.RIGHT),a<r?l=l|ao.BELOW:a>s&&(l=l|ao.ABOVE),l===ao.UNKNOWN&&(l=ao.INTERSECTING),l}function Wa(){return[1/0,1/0,-1/0,-1/0]}function xp(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function tC(t){return xp(1/0,1/0,-1/0,-1/0,t)}function uT(t,e){const n=t[0],r=t[1];return xp(n,r,n,r,e)}function hG(t,e,n,r,i){const s=tC(i);return ule(s,t,e,n,r)}function A1(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function dG(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function hT(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ule(t,e,n,r,i){for(;n<r;n+=i)Tke(t,e[n],e[n+1]);return t}function Tke(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function fG(t,e){let n;return n=e(F5(t)),n||(n=e($5(t)),n)||(n=e(V5(t)),n)||(n=e(uv(t)),n)?n:!1}function q$(t){let e=0;return sb(t)||(e=Xn(t)*Ms(t)),e}function F5(t){return[t[0],t[1]]}function $5(t){return[t[2],t[1]]}function vh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function kke(t,e){let n;if(e==="bottom-left")n=F5(t);else if(e==="bottom-right")n=$5(t);else if(e==="top-left")n=uv(t);else if(e==="top-right")n=V5(t);else throw new Error("Invalid corner");return n}function W3(t,e,n,r,i){const[s,o,a,l,c,u,h,f]=hle(t,e,n,r);return xp(Math.min(s,a,c,h),Math.min(o,l,u,f),Math.max(s,a,c,h),Math.max(o,l,u,f),i)}function hle(t,e,n,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(n),a=Math.sin(n),l=i*o,c=i*a,u=s*o,h=s*a,f=t[0],g=t[1];return[f-l+h,g-c-u,f-l-h,g-c+u,f+l-h,g+c+u,f+l+h,g+c-u,f-l+h,g-c-u]}function Ms(t){return t[3]-t[1]}function ap(t,e,n){const r=n||Wa();return ca(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):tC(r),r}function uv(t){return[t[0],t[3]]}function V5(t){return[t[2],t[3]]}function Xn(t){return t[2]-t[0]}function ca(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function sb(t){return t[2]<t[0]||t[3]<t[1]}function Ake(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Cke(t,e,n){let r=!1;const i=H$(t,e),s=H$(t,n);if(i===ao.INTERSECTING||s===ao.INTERSECTING)r=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],f=n[0],g=n[1],y=(g-h)/(f-u);let _,b;s&ao.ABOVE&&!(i&ao.ABOVE)&&(_=f-(g-c)/y,r=_>=o&&_<=l),!r&&s&ao.RIGHT&&!(i&ao.RIGHT)&&(b=g-(f-l)*y,r=b>=a&&b<=c),!r&&s&ao.BELOW&&!(i&ao.BELOW)&&(_=f-(g-a)/y,r=_>=o&&_<=l),!r&&s&ao.LEFT&&!(i&ao.LEFT)&&(b=g-(f-o)*y,r=b>=a&&b<=c)}return r}function dle(t,e){const n=e.getExtent(),r=vh(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=Xn(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function fle(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];dle(t,e);const i=Xn(r);if(Xn(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function ri(t,e,n){return Math.min(Math.max(t,e),n)}function Ike(t,e,n,r,i,s){const o=i-n,a=s-r;if(o!==0||a!==0){const l=((t-n)*o+(e-r)*a)/(o*o+a*a);l>1?(n=i,r=s):l>0&&(n+=o*l,r+=a*l)}return lp(t,e,n,r)}function lp(t,e,n,r){const i=n-t,s=r-e;return i*i+s*s}function Pke(t){const e=t.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(t[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(t[a][r]);l>s&&(s=l,i=a)}if(s===0)return null;const o=t[i];t[i]=t[r],t[r]=o;for(let a=r+1;a<e;a++){const l=-t[a][r]/t[r][r];for(let c=r;c<e+1;c++)r==c?t[a][c]=0:t[a][c]+=l*t[r][c]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function FX(t){return t*180/Math.PI}function uu(t){return t*Math.PI/180}function Sg(t,e){const n=t%e;return n*e<0?n+e:n}function sc(t,e,n){return t+n*(e-t)}function ob(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function H3(t,e){return Math.round(ob(t,e))}function wP(t,e){return Math.floor(ob(t,e))}function sg(t,e){return Math.ceil(ob(t,e))}function K$(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function IE(t,e,n){const r=""+t;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function ple(t,e){const n=(""+t).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(n.length,r.length);i++){const s=parseInt(n[i]||"0",10),o=parseInt(r[i]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function Rke(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function pG(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=i[0],a=i[1],l=s[0],c=s[1],u=l-o,h=c-a,f=u===0&&h===0?0:(u*(n-o)+h*(r-a))/(u*u+h*h||0);let g,y;return f<=0?(g=o,y=a):f>=1?(g=l,y=c):(g=o+f*u,y=a+f*h),[g,y]}function Ra(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function mG(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,s=t[1]*n+t[0]*r;return t[0]=i,t[1]=s,t}function Mke(t,e){return t[0]*=e,t[1]*=e,t}function i2(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ix(t,e){return Math.sqrt(i2(t,e))}function Nke(t,e){return i2(t,pG(t,e))}function mle(t,e){if(e.canWrapX()){const n=Xn(e.getExtent()),r=gle(t,e,n);r&&(t[0]-=r*n)}return t}function gle(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Xn(r),i=Math.floor((t[0]-r[0])/n)),i}function yle(...t){console.warn(...t)}const s2={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let z5=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||s2[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const nC=6378137,Px=Math.PI*nC,Lke=[-Px,-Px,Px,Px],Oke=[-180,-85,180,85],bP=nC*Math.log(Math.tan(Math.PI/2));class u_ extends z5{constructor(e){super({code:e,units:"m",extent:Lke,global:!0,worldExtent:Oke,getPointResolution:function(n,r){return n/Math.cosh(r[1]/nC)}})}}const $X=[new u_("EPSG:3857"),new u_("EPSG:102100"),new u_("EPSG:102113"),new u_("EPSG:900913"),new u_("http://www.opengis.net/def/crs/EPSG/0/3857"),new u_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Dke(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=Px*t[s]/180;let o=nC*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>bP?o=bP:o<-bP&&(o=-bP),e[s+1]=o}return e}function jke(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*t[s]/Px,e[s+1]=360*Math.atan(Math.exp(t[s+1]/nC))/Math.PI-90;return e}const Fke=6378137,VX=[-180,-90,180,90],$ke=Math.PI*Fke/180;class U0 extends z5{constructor(e,n){super({code:e,units:"degrees",extent:VX,axisOrientation:n,global:!0,metersPerUnit:$ke,worldExtent:VX})}}const zX=[new U0("CRS:84"),new U0("EPSG:4326","neu"),new U0("urn:ogc:def:crs:OGC:1.3:CRS84"),new U0("urn:ogc:def:crs:OGC:2:84"),new U0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new U0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new U0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Y$={};function uM(t){return Y$[t]||Y$[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Vke(t,e){Y$[t]=e}let tw={};function C1(t,e,n){const r=t.getCode(),i=e.getCode();r in tw||(tw[r]={}),tw[r][i]=n}function hM(t,e){return t in tw&&e in tw[t]?tw[t][e]:null}const q3=.9996,hu=.00669438,G5=hu*hu,U5=G5*hu,$y=hu/(1-hu),GX=Math.sqrt(1-hu),o2=(1-GX)/(1+GX),vle=o2*o2,gG=vle*o2,yG=gG*o2,_le=yG*o2,xle=1-hu/4-3*G5/64-5*U5/256,zke=3*hu/8+3*G5/32+45*U5/1024,Gke=15*G5/256+45*U5/1024,Uke=35*U5/3072,Bke=3/2*o2-27/32*gG+269/512*_le,Wke=21/16*vle-55/32*yG,Hke=151/96*gG-417/128*_le,qke=1097/512*yG,K3=6378137;function Kke(t,e,n){const r=t-5e5,o=(n.north?e:e-1e7)/q3/(K3*xle),a=o+Bke*Math.sin(2*o)+Wke*Math.sin(4*o)+Hke*Math.sin(6*o)+qke*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,f=h*h,g=f*f,y=1-hu*c,_=Math.sqrt(1-hu*c),b=K3/_,T=(1-hu)/y,A=$y*u**2,C=A*A,I=r/(b*q3),R=I*I,V=R*I,P=V*I,N=P*I,L=N*I,O=a-h/T*(R/2-P/24*(5+3*f+10*A-4*C-9*$y))+L/720*(61+90*f+298*A+45*g-252*$y-3*C);let F=(I-V/6*(1+2*f+A)+N/120*(5-2*A+28*f-3*C+8*$y+24*g))/u;return F=K$(F+uu(wle(n.number)),-Math.PI,Math.PI),[FX(F),FX(O)]}const UX=-80,BX=84,Yke=-180,Xke=180;function Zke(t,e,n){t=K$(t,Yke,Xke),e<UX?e=UX:e>BX&&(e=BX);const r=uu(e),i=Math.sin(r),s=Math.cos(r),o=i/s,a=o*o,l=a*a,c=uu(t),u=wle(n.number),h=uu(u),f=K3/Math.sqrt(1-hu*i**2),g=$y*s**2,y=s*K$(c-h,-Math.PI,Math.PI),_=y*y,b=_*y,T=b*y,A=T*y,C=A*y,I=K3*(xle*r-zke*Math.sin(2*r)+Gke*Math.sin(4*r)-Uke*Math.sin(6*r)),R=q3*f*(y+b/6*(1-a+g)+A/120*(5-18*a+l+72*g-58*$y))+5e5;let V=q3*(I+f*o*(_/2+T/24*(5-a+9*g+4*g**2)+C/720*(61-58*a+l+600*g-330*$y)));return n.north||(V+=1e7),[R,V]}function wle(t){return(t-1)*6-180+3}const Jke=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function ble(t){let e=0;for(const i of Jke){const s=t.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function WX(t,e){return function(n,r,i,s){const o=n.length;i=i>1?i:2,s=s??i,r||(i>2?r=n.slice():r=new Array(o));for(let a=0;a<o;a+=s){const l=n[a],c=n[a+1],u=t(l,c,e);r[a]=u[0],r[a+1]=u[1]}return r}}function Qke(t){return ble(t)?new z5({code:t,units:"m"}):null}function eAe(t){const e=ble(t.getCode());return e?{forward:WX(Zke,e),inverse:WX(Kke,e)}:null}const vG=63710088e-1;function X$(t,e,n){n=n||vG;const r=uu(t[1]),i=uu(e[1]),s=(i-r)/2,o=uu(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function L6(t,e){let n=0;for(let r=0,i=t.length;r<i-1;++r)n+=X$(t[r],t[r+1],e);return n}function Ek(t,e){e=e||{};const n=e.radius||vG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=t.getCoordinates(),s=L6(o,n);break}case"MultiLineString":case"Polygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)s+=L6(o[l],n);break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],u=0,h=a.length;u<h;++u)s+=L6(a[u],n);break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=Ek(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}function EP(t,e){let n=0;const r=t.length;let i=t[r-1][0],s=t[r-1][1];for(let o=0;o<r;o++){const a=t[o][0],l=t[o][1];n+=uu(a-i)*(2+Math.sin(uu(s))+Math.sin(uu(l))),i=a,s=l}return n*e*e/2}function Z$(t,e){e=e||{};const n=e.radius||vG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=t.getCoordinates(),s=Math.abs(EP(o[0],n)),l=1,c=o.length;l<c;++l)s-=Math.abs(EP(o[l],n));break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(EP(a[0],n)),u=1,h=a.length;u<h;++u)s-=Math.abs(EP(a[u],n));break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=Z$(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}const tAe=[eAe],nAe=[Qke];let J$=!0;function Ele(t){J$=!1}function _G(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function Y3(t){Vke(t.getCode(),t),C1(t,t,_G)}function rAe(t){t.forEach(Y3)}function Jr(t){if(typeof t!="string")return t;const e=uM(t);if(e)return e;for(const n of nAe){const r=n(t);if(r)return r}return null}function X3(t,e,n,r){t=Jr(t);let i;const s=t.getPointResolutionFunc();if(s){if(i=s(e,n),r&&r!==t.getUnits()){const o=t.getMetersPerUnit();o&&(i=i*o/s2[r])}}else{const o=t.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=wG(t,Jr("EPSG:4326"));if(!a&&o!=="degrees")i=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const u=X$(c.slice(0,2),c.slice(2,4)),h=X$(c.slice(4,6),c.slice(6,8));i=(u+h)/2}const l=r?s2[r]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function Q$(t){rAe(t),t.forEach(function(e){t.forEach(function(n){e!==n&&C1(e,n,_G)})})}function iAe(t,e,n,r){t.forEach(function(i){e.forEach(function(s){C1(i,s,n),C1(s,i,r)})})}function xG(t,e){return t?typeof t=="string"?Jr(t):t:Jr(e)}function e8(t){return(function(e,n,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=i){const a=t(e.slice(o,o+r)),l=a.length;for(let c=0,u=i;c<u;++c)n[o+c]=c>=l?e[o+c]:a[c]}return n})}function sAe(t,e,n,r){const i=Jr(t),s=Jr(e);C1(i,s,e8(n)),C1(s,i,e8(r))}function Ni(t,e){return Ele(),ab(t,"EPSG:4326","EPSG:3857")}function $n(t,e){const n=ab(t,"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=Sg(r+180,360)-180),n}function i1(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||wG(t,e)===_G)&&n}function wG(t,e){const n=t.getCode(),r=e.getCode();let i=hM(n,r);if(i)return i;let s=null,o=null;for(const l of tAe)s||(s=l(t)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)i=O6(s.inverse,o.forward);else{const l=hM(n,a);l&&(i=O6(l,o.forward))}else{const l=hM(a,r);l&&(i=O6(s.inverse,l))}return i&&(Y3(t),Y3(e),C1(t,e,i)),i}function O6(t,e){return function(n,r,i,s){return r=t(n,r,i,s),e(r,r,i,s)}}function Sk(t,e){const n=Jr(t),r=Jr(e);return wG(n,r)}function ab(t,e,n){const r=Sk(e,n);if(!r){const i=Jr(e).getCode(),s=Jr(n).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(t,void 0,t.length)}function I1(t,e){return t}function Oi(t,e){return J$&&!Ra(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(J$=!1,yle("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function bG(t,e){return t}function lh(t,e){return t}function HX(t,e,n){return function(r){let i,s;if(t.canWrapX()){const o=t.getExtent(),a=Xn(o);r=r.slice(0),s=gle(r,t,a),s&&(r[0]=r[0]-s*a),r[0]=ri(r[0],o[0],o[2]),r[1]=ri(r[1],o[1],o[3]),i=n(r)}else i=n(r);return s&&e.canWrapX()&&(i[0]+=s*Xn(e.getExtent())),i}}function oAe(){Q$($X),Q$(zX),iAe(zX,$X,Dke,jke)}oAe();const aAe=new Array(6);function Hs(){return[1,0,0,1,0,0]}function Sle(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5];return t[0]=n*l+i*c,t[1]=r*l+s*c,t[2]=n*u+i*h,t[3]=r*u+s*h,t[4]=n*f+i*g+o,t[5]=r*f+s*g+a,t}function lAe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function Tle(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ji(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function cAe(t,e,n){return Sle(t,lAe(aAe,1,0,0,1,e,n))}function gu(t,e,n,r,i,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=r*c,t[1]=i*l,t[2]=-r*l,t[3]=i*c,t[4]=o*r*c-a*r*l+e,t[5]=o*i*l+a*i*c+n,t}function Tk(t,e){const n=uAe(e);ur(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-i/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-o*a)/n,t[5]=-(r*l-i*a)/n,t}function uAe(t){return t[0]*t[3]-t[1]*t[2]}const hAe=[1e5,1e5,1e5,1e5,2,2];function dAe(t){return"matrix("+t.join(", ")+")"}function t8(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function fAe(t,e){const n=t8(t),r=t8(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*hAe[i])!==0)return!1;return!0}function bd(t,e,n,r,i,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=r){const c=t[l],u=t[l+1];s[a++]=i[0]*c+i[2]*u+i[4],s[a++]=i[1]*c+i[3]*u+i[5];for(let h=2;h<o;h++)s[a++]=t[l+h]}return s&&s.length!=a&&(s.length=a),s}function EG(t,e,n,r,i,s,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),c=s[0],u=s[1];let h=0;for(let f=e;f<n;f+=r){const g=t[f]-c,y=t[f+1]-u;o[h++]=c+g*a-y*l,o[h++]=u+g*l+y*a;for(let _=f+2;_<f+r;++_)o[h++]=t[_]}return o&&o.length!=h&&(o.length=h),o}function pAe(t,e,n,r,i,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=r){const f=t[h]-l,g=t[h+1]-c;a[u++]=l+i*f,a[u++]=c+s*g;for(let y=h+2;y<h+r;++y)a[u++]=t[y]}return a&&a.length!=u&&(a.length=u),a}function mAe(t,e,n,r,i,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=r){o[a++]=t[l]+i,o[a++]=t[l+1]+s;for(let c=l+2;c<l+r;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const qX=Hs(),gAe=[NaN,NaN];class kle extends Yd{constructor(){super(),this.extent_=Wa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=ole((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return Sn()}closestPointXY(e,n,r,i){return Sn()}containsXY(e,n){return this.closestPointXY(e,n,gAe,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Sn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&tC(n),this.extentRevision_=this.getRevision()}return Ake(this.extent_,e)}rotate(e,n){Sn()}scale(e,n,r){Sn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Sn()}getType(){return Sn()}applyTransform(e){Sn()}intersectsExtent(e){return Sn()}translate(e,n){Sn()}transform(e,n){const r=Jr(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=Ms(c)/Ms(l);gu(qX,c[0],c[3],u,-u,0,0,0);const h=bd(s,0,s.length,a,qX,o),f=Sk(r,n);return f?f(h,h,a):h}:Sk(r,n);return this.applyTransform(i),this}}class u0 extends kle{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return hG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Sn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=Z3(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){Sn()}setLayout(e,n,r){let i;if(e)i=Z3(e);else{for(let s=0;s<r;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=hv(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();EG(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=vh(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();pAe(i,0,i.length,s,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();mAe(r,0,r.length,i,e,n,r),this.changed()}}}function hv(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function Z3(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function yAe(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return bd(r,0,r.length,i,e,n)}function KX(t,e,n,r,i,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(c===0&&u===0)h=e;else{const f=((i-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let g=0;g<r;++g)o[g]=sc(t[e+g],t[n+g],f);o.length=r;return}else h=e}for(let f=0;f<r;++f)o[f]=t[h+f];o.length=r}function SG(t,e,n,r,i){let s=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const a=t[e],l=t[e+1],c=lp(s,o,a,l);c>i&&(i=c),s=a,o=l}return i}function TG(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=SG(t,e,a,r,i),e=a}return i}function vAe(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=TG(t,e,a,r,i),e=a[a.length-1]}return i}function kG(t,e,n,r,i,s,o,a,l,c,u){if(e==n)return c;let h,f;if(i===0){if(f=lp(o,a,t[e],t[e+1]),f<c){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,f}return c}u=u||[NaN,NaN];let g=e+r;for(;g<n;)if(KX(t,g-r,g,r,o,a,u),f=lp(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r,g+=r}else g+=r*Math.max((Math.sqrt(f)-Math.sqrt(c))/i|0,1);if(s&&(KX(t,n-r,e,r,o,a,u),f=lp(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function AG(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=kG(t,e,g,r,i,s,o,a,l,c,u),e=g}return c}function _Ae(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=AG(t,e,g,r,i,s,o,a,l,c,u),e=g[g.length-1]}return c}function Ale(t,e,n,r){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}function B5(t,e,n,r){for(let i=0,s=n.length;i<s;++i){const o=n[i];for(let a=0;a<r;++a)t[e++]=o[a]}return e}function rC(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=B5(t,e,n[o],r);i[s++]=l,e=l}return i.length=s,i}function Cle(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=rC(t,e,n[o],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function og(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<n;o+=r)i[s++]=t.slice(o,o+r);return i.length=s,i}function kk(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=og(t,e,l,r,i[s]),e=l}return i.length=s,i}function n8(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=l.length===1&&l[0]===e?[]:kk(t,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function J3(t,e,n,r,i,s,o){let a,l;const c=(n-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let u=t[e],h=t[e+1],f=0;const g=[0];for(let b=e+r;b<n;b+=r){const T=t[b],A=t[b+1];f+=Math.sqrt((T-u)*(T-u)+(A-h)*(A-h)),g.push(f),u=T,h=A}const y=i*f,_=_ke(g,y);_<0?(l=(y-g[-_-2])/(g[-_-1]-g[-_-2]),a=e+(-_-2)*r):a=e+_*r}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?t[a+u]:sc(t[a+u],t[a+r+u],l);return s}function r8(t,e,n,r,i,s){if(n==e)return null;let o;if(i<t[e+r-1])return s?(o=t.slice(e,e+r),o[r-1]=i,o):null;if(t[n-1]<i)return s?(o=t.slice(n-r,n),o[r-1]=i,o):null;if(i==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){const f=a+l>>1;i<t[(f+1)*r-1]?l=f:a=f+1}const c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);const u=t[(a+1)*r-1],h=(i-c)/(u-c);o=[];for(let f=0;f<r-1;++f)o.push(sc(t[(a-1)*r+f],t[a*r+f],h));return o.push(i),o}function xAe(t,e,n,r,i,s,o){if(o)return r8(t,e,n[n.length-1],r,i,s);let a;if(i<t[r-1])return s?(a=t.slice(0,r),a[r-1]=i,a):null;if(t[t.length-1]<i)return s?(a=t.slice(t.length-r),a[r-1]=i,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(i<t[e+r-1])return null;if(i<=t[u-1])return r8(t,e,u,r,i,!1);e=u}}return null}function wAe(t,e,n,r,i){return!fG(i,function(o){return!Vy(t,e,n,r,o[0],o[1])})}function Vy(t,e,n,r,i,s){let o=0,a=t[n-r],l=t[n-r+1];for(;e<n;e+=r){const c=t[e],u=t[e+1];l<=s?u>s&&(c-a)*(s-l)-(i-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(i-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function CG(t,e,n,r,i,s){if(n.length===0||!Vy(t,e,n[0],r,i,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Vy(t,n[o-1],n[o],r,i,s))return!1;return!0}function bAe(t,e,n,r,i,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(CG(t,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function Ile(t,e,n,r,i){let s;for(e+=r;e<n;e+=r)if(s=i(t.slice(e-r,e),t.slice(e,e+r)),s)return s;return!1}function W5(t,e,n,r,i,s){return s=s??ule(Wa(),t,e,n,r),ca(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:Ile(t,e,n,r,function(o,a){return Cke(i,o,a)}):!1}function EAe(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){if(W5(t,e,n[s],r,i))return!0;e=n[s]}return!1}function Ple(t,e,n,r,i){return!!(W5(t,e,n,r,i)||Vy(t,e,n,r,i[0],i[1])||Vy(t,e,n,r,i[0],i[3])||Vy(t,e,n,r,i[2],i[1])||Vy(t,e,n,r,i[2],i[3]))}function Rle(t,e,n,r,i){if(!Ple(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(wAe(t,n[s-1],n[s],r,i)&&!W5(t,n[s-1],n[s],r,i))return!1;return!0}function SAe(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(Rle(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}function IG(t,e,n,r){let i=t[e],s=t[e+1],o=0;for(let a=e+r;a<n;a+=r){const l=t[a],c=t[a+1];o+=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),i=l,s=c}return o}function H5(t,e,n,r,i,s,o){const a=(n-e)/r;if(a<3){for(;e<n;e+=r)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-r];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let g=0;const y=t[f],_=t[f+1],b=t[h],T=t[h+1];for(let A=f+r;A<h;A+=r){const C=t[A],I=t[A+1],R=Ike(C,I,y,_,b,T);R>g&&(u=A,g=R)}g>i&&(l[(u-e)/r]=1,f+r<u&&c.push(f,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*r],s[o++]=t[e+h*r+1]);return o}function Mle(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=H5(t,e,u,r,i,s,o),a.push(o),e=u}return o}function ry(t,e){return e*Math.round(t/e)}function TAe(t,e,n,r,i,s,o){if(e==n)return o;let a=ry(t[e],i),l=ry(t[e+1],i);e+=r,s[o++]=a,s[o++]=l;let c,u;do if(c=ry(t[e],i),u=ry(t[e+1],i),e+=r,e==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<n;){const h=ry(t[e],i),f=ry(t[e+1],i);if(e+=r,h==c&&f==u)continue;const g=c-a,y=u-l,_=h-a,b=f-l;if(g*b==y*_&&(g<0&&_<g||g==_||g>0&&_>g)&&(y<0&&b<y||y==b||y>0&&b>y)){c=h,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=f}return s[o++]=c,s[o++]=u,o}function PG(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=TAe(t,e,u,r,i,s,o),a.push(o),e=u}return o}function kAe(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=PG(t,e,u,r,i,s,o,h),a.push(h),e=u[u.length-1]}return o}class ns extends u0{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){xr(this.flatCoordinates,e),this.changed()}clone(){const e=new ns(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return Ile(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,r8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return og(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return J3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return IG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=H5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new ns(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return W5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=B5(this.flatCoordinates,0,e,this.stride),this.changed()}}let ki=class Nle extends u0{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Nle(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=lp(e,n,s[0],s[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return uT(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return uG(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ale(this.flatCoordinates,0,e,this.stride),this.changed()}};const uo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},P1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",AAe=P1.includes("safari")&&!P1.includes("chrom"),CAe=AAe&&(P1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(P1)),IAe=P1.includes("webkit")&&!P1.includes("edge"),Lle=P1.includes("macintosh"),PAe=typeof devicePixelRatio<"u"?devicePixelRatio:1,hc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,RG=typeof Image<"u"&&Image.prototype.decode,Ole=typeof createImageBitmap=="function",Dle=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),zt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ls(t,e,n,r){let i;return n&&n.length?i=n.shift():hc?i=new class extends OffscreenCanvas{style={}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let D6;function Q3(){return D6||(D6=Ls(1,1)),D6}function q5(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function YX(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function RAe(t){for(;t.lastChild;)t.lastChild.remove()}function MAe(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){t.appendChild(s);continue}if(!s){t.removeChild(i),--r;continue}t.insertBefore(s,i)}}}function jle(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function ag(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}const MG=[NaN,NaN,NaN,0];let j6;function NAe(){return j6||(j6=Ls(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),j6}const LAe=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,OAe=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,DAe=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,jAe=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function SP(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function dT(t){throw new Error('failed to parse "'+t+'" as color')}function Fle(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(OAe)||t.match(LAe)||t.match(DAe);if(s){const o=s[4],a=100/255;return[ri(SP(s[1],a)+.5|0,0,255),ri(SP(s[2],a)+.5|0,0,255),ri(SP(s[3],a)+.5|0,0,255),o!==void 0?ri(SP(o,100),0,1):1]}dT(t)}if(t.startsWith("#")){if(jAe.test(t)){const s=t.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}dT(t)}const e=NAe();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&dT(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return Fle(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=ob(i[3]/255,3),i}function FAe(t){return typeof t=="string"?t:LG(t)}const $Ae=1024,PE={};let F6=0;function VAe(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function $6(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function V6(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function z6(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function G6(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function XX(t){const e=z6(t[0]),n=z6(t[1]),r=z6(t[2]),i=G6(e*.222488403+n*.716873169+r*.06060791),s=500*(G6(e*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-G6(e*.016863605+n*.117638439+r*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+o*o),a<0?a+360:a,t[3]]}function zAe(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=V6(e),s=V6(e+n/500*Math.cos(r)),o=V6(e-n/200*Math.sin(r)),a=$6(s*3.021973625-i*1.617392459-o*.404875592),l=$6(s*-.943766287+i*1.916279586+o*.027607165),c=$6(s*.069407491-i*.22898585+o*1.159737864);return[ri(a+.5|0,0,255),ri(l+.5|0,0,255),ri(c+.5|0,0,255),t[3]]}function NG(t){if(t==="none")return MG;if(PE.hasOwnProperty(t))return PE[t];if(F6>=$Ae){let n=0;for(const r in PE)(n++&3)===0&&(delete PE[r],--F6)}const e=Fle(t);e.length!==4&&dT(t);for(const n of e)isNaN(n)&&dT(t);return PE[t]=e,++F6,e}function yu(t){return Array.isArray(t)?t:NG(t)}function LG(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}class $le extends QA{constructor(e,n,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=typeof i=="function"?zt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(En.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==zt.IDLE&&this.loader){this.state=zt.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;ale(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||Ole&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=zt.LOADED}).catch(r=>{this.state=zt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function GAe(t,e,n){const r=t;let i=!0,s=!1,o=!1;const a=[B3(r,En.LOAD,function(){o=!0,s||e()})];return r.src&&RG?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(o?e():n())})):a.push(B3(r,En.ERROR,n)),function(){i=!1,a.forEach(ni)}}function UAe(t,e){return new Promise((n,r)=>{function i(){o(),n(t)}function s(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",s)}t.addEventListener("load",i),t.addEventListener("error",s)})}function Vle(t,e){return e&&(t.src=e),t.src&&RG?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):UAe(t)}function zle(t,e){return e&&(t.src=e),t.src&&RG&&Ole?t.decode().then(()=>createImageBitmap(t)).catch(n=>{if(t.complete&&t.width)return t;throw n}):Vle(t)}class BAe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){const i=U6(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){const i=U6(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,s){const o=U6(e,n,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===zt.IDLE&&i.load(),i.getImageState()===zt.LOADING?i.ready().then(()=>{this.patternCache_[o]=Q3().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=Q3().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function U6(t,e,n){const r=n?yu(n):"null";return e+":"+t+":"+r}const ou=new BAe;let RE=null;class Gle extends QA{constructor(e,n,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?zt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zt.LOADED){RE||(RE=Ls(1,1,void 0,{willReadFrequently:!0})),RE.drawImage(this.image_,0,0);try{RE.getImageData(0,0,1,1),this.tainted_=!1}catch{RE=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(En.CHANGE)}handleImageError_(){this.imageState_=zt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Ls(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===zt.IDLE){this.image_||this.initializeImage_(),this.imageState_=zt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Vle(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==zt.LOADED)return;const n=this.image_,r=Ls(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=FAe(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===zt.LOADED||this.imageState_===zt.ERROR)e();else{const n=()=>{(this.imageState_===zt.LOADED||this.imageState_===zt.ERROR)&&(this.removeEventListener(En.CHANGE,n),e())};this.addEventListener(En.CHANGE,n)}})),this.ready_}}function e4(t,e,n,r,i,s){let o=e===void 0?void 0:ou.get(e,n,i);return o||(o=new Gle(t,t&&"src"in t?t.src||void 0:e,n,r,i),ou.set(e,n,i,o,s)),s&&o&&!ou.getPattern(e,n,i)&&ou.set(e,n,i,o,s),o}function vd(t){return t?Array.isArray(t)?LG(t):typeof t=="object"&&"src"in t?WAe(t):t:null}function WAe(t){if(!t.offset||!t.size)return ou.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=ou.getPattern(e,void 0,t.color);if(n)return n;const r=ou.get(t.src,"anonymous",null);if(r.getImageState()!==zt.LOADED)return null;const i=Ls(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),e4(i.canvas,e,void 0,zt.LOADED,t.color,!0),ou.getPattern(e,void 0,t.color)}class Ule{drawCustom(e,n,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const TP="ol-hidden",iC="ol-unselectable",OG="ol-control",ZX="ol-collapsed",HAe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),JX=["style","variant","weight","size","lineHeight","family"],i8={normal:400,bold:700},s8=function(t){const e=t.match(HAe);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=JX.length;r<i;++r){const s=e[r+1];s!==void 0&&(n[JX[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(n.weight))&&n.weight in i8&&(n.weight=i8[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n},Ble="10px sans-serif",gl="#000",a2="round",cp=[],up=0,l2="round",Ak=10,Ck="#000",Ik="center",t4="middle",zy=[0,0,0,0],Pk=1,W_=new Yd;let ME=null,QX;const o8={},qAe=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function KAe(t,e,n){return`${t} ${e} 16px "${n}"`}const YAe=(function(){let e,n;async function r(s){await n.ready;const o=await n.load(s);if(o.length===0)return!1;const a=s8(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=i8[u.weight]||u.weight;return h===l&&u.style===a.style&&f==c})}async function i(){await n.ready;let s=!0;const o=W_.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await r(c)?(lv(o8),W_.set(c,100)):(u+=10,W_.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){n||(n=hc?self.fonts:document.fonts);const o=s8(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(qAe.has(c))continue;const u=KAe(o.style,o.weight,c);W_.get(u)===void 0&&(W_.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),XAe=(function(){let t;return function(e){let n=o8[e];if(n==null){if(hc){const r=s8(e),i=Wle(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);o8[e]=n}return n}})();function Wle(t,e){return ME||(ME=Ls(1,1)),t!=QX&&(ME.font=t,QX=ME.font),ME.measureText(e)}function Hle(t,e){return Wle(t,e).width}function eZ(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,Hle(t,s)),0);return n[e]=r,r}function ZAe(t,e){const n=[],r=[],i=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),i.push(o),o=0,a+=l,l=0;continue}const f=e[c+1]||t.font,g=Hle(f,h);n.push(g),o+=g;const y=XAe(f);r.push(y),l=Math.max(l,y)}return{width:s,height:a,widths:n,heights:r,lineWidths:i}}function JAe(t,e,n,r,i,s,o,a,l,c,u){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),QAe(r,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(r,i,s,o,a,0,0,o,a)):t.drawImage(r,i,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function QAe(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class eCe extends Ule{constructor(e,n,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?ob(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hs()}drawImages_(e,n,r,i){if(!this.image_)return;const s=bd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const f=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const y=f+this.imageAnchorX_,_=g+this.imageAnchorY_;gu(a,y,_,1,1,c,-y,-_),o.save(),o.transform.apply(o,a),o.translate(y,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=bd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<r;n+=i){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,n,r,i,s){const o=this.context_,a=bd(e,n,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,n,r,i){for(let s=0,o=r.length;s<o;++s)n=this.moveToLineTo_(e,n,r[s],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ca(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=yAe(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ca(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(ca(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(i,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ca(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ca(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];i=this.drawRings_(r,i,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),Kd(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Ik;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:vd(r||gl)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||cp;this.strokeState_={lineCap:i!==void 0?i:a2,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||up)*this.pixelRatio_,lineJoin:a!==void 0?a:l2,lineWidth:(l!==void 0?l:Pk)*this.pixelRatio_,miterLimit:c!==void 0?c:Ak,strokeStyle:vd(r||Ck)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:vd(g||gl)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),y=r.getLineCap(),_=r.getLineDash(),b=r.getLineDashOffset(),T=r.getLineJoin(),A=r.getWidth(),C=r.getMiterLimit();this.textStrokeState_={lineCap:y!==void 0?y:a2,lineDash:_||cp,lineDashOffset:b||up,lineJoin:T!==void 0?T:l2,lineWidth:A!==void 0?A:Pk,miterLimit:C!==void 0?C:Ak,strokeStyle:vd(g||Ck)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:i!==void 0?i:Ble,textAlign:h!==void 0?h:Ik,textBaseline:f!==void 0?f:t4},this.text_=u!==void 0?Array.isArray(u)?u.reduce((g,y,_)=>g+=_%2?" ":y,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const tCe=.5,qle={Point:cCe,LineString:oCe,Polygon:hCe,MultiPoint:uCe,MultiLineString:aCe,MultiPolygon:lCe,GeometryCollection:sCe,Circle:rCe};function nCe(t,e){return parseInt(en(t),10)-parseInt(en(e),10)}function tZ(t,e){const n=Kle(t,e);return n*n}function Kle(t,e){return tCe*t/e}function rCe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function nZ(t,e,n,r,i,s,o,a){const l=[],c=n.getImage();if(c){let f=!0;const g=c.getImageState();g==zt.LOADED||g==zt.ERROR?f=!1:g==zt.IDLE&&c.load(),f&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>i(null)),iCe(t,e,n,r,s,o,a),h}function iCe(t,e,n,r,i,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,i);if(n.getRenderer())Yle(t,l,n,e,o);else{const u=qle[l.getType()];u(t,l,n,e,o,s)}}function Yle(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Yle(t,o[a],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function sCe(t,e,n,r,i,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=qle[o[a].getType()];c(t,o[a],n,r,i,s)}}function oCe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function aCe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function lCe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function cCe(t,e,n,r,i,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=zt.LOADED)return;const u=t.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,r,i)}if(l){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,r,i)}}function uCe(t,e,n,r,i,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=zt.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,r,i)}if(c){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,r,i)}}function hCe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}let dCe=!1;function fCe(t,e,n,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=dCe,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:n,featureProjection:i}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function rZ(t,e){return function(n,r,i,s,o){fCe(t,e,n,r,i,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function pCe(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Xle(t,e,n,r){const i=[];let s=Wa();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=hG(t,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function DG(t,e,n,r,i,s,o){let a,l,c,u,h,f,g;const y=i[s+1],_=[];for(let A=0,C=n.length;A<C;++A){const I=n[A];for(u=t[I-r],f=t[I-r+1],a=e;a<I;a+=r)h=t[a],g=t[a+1],(y<=f&&g<=y||f<=y&&y<=g)&&(c=(y-f)/(g-f)*(h-u)+u,_.push(c)),u=h,f=g}let b=NaN,T=-1/0;for(_.sort(op),u=_[0],a=1,l=_.length;a<l;++a){h=_[a];const A=Math.abs(h-u);A>T&&(c=(u+h)/2,CG(t,e,n,r,c,y)&&(b=c,T=A)),u=h}return isNaN(b)&&(b=i[s]),o?(o.push(b,y,T),o):[b,y,T]}function Zle(t,e,n,r,i){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=DG(t,e,l,r,i,2*o,s),e=l[l.length-1]}return s}function mCe(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const s=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=s}e+=r,n-=r}}function jG(t,e,n,r){let i=0,s=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];i+=(a-s)*(l+o),s=a,o=l}return i===0?void 0:i>0}function FG(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=jG(t,e,a,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function Jle(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!FG(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function n4(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=jG(t,e,a,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&mCe(t,e,a,r),e=a}return e}function a8(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s)e=n4(t,e,n[s],r,i);return e}function Qle(t,e){const n=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=jG(t,r,l,2);if(s===void 0&&(s=c),c===s)n.push(e.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=o+1,r=l}return n}class K5 extends u0{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){const e=new K5(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=e-s[0],a=n-s[1],l=o*o+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=s[0]+c*o,r[1]=s[1]+c*a;for(let u=2;u<this.stride;++u)r[u]=s[u]}return r.length=this.stride,l}return i}containsXY(e,n){const r=this.flatCoordinates,i=e-r[0],s=n-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,r=n[this.stride]-n[0];return xp(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(ca(e,n)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:fG(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let s=1;s<n;++s)i[n+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=Ale(i,0,e,this.stride);i[s++]=i[0]+n;for(let o=1,a=this.stride;o<a;++o)i[s++]=i[o];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const r=this.getCenter(),i=this.getStride();this.setCenter(EG(r,0,r.length,i,e,n,r)),this.changed()}}K5.prototype.transform;class du extends kle{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ni),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(Yn(e[n],En.CHANGE,this.changed,this))}clone(){const e=new du(B6(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<cv(this.getExtent(),e,n))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,n,r,i);return i}containsXY(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){tC(e);const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)dG(e,n[r].getExtent());return e}getGeometries(){return B6(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(i=!0)}return i?new du(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=vh(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(B6(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function B6(t){return t.map(e=>e.clone())}function ece(t,e,n,r){let i=0;const s=t[n-r],o=t[n-r+1];let a=0,l=0;for(;e<n;e+=r){const c=t[e]-s,u=t[e+1]-o;i+=l*c-a*u,a=c,l=u}return i/2}function tce(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=ece(t,e,a,r),e=a}return i}function gCe(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=tce(t,e,a,r),e=a[a.length-1]}return i}class Rk extends u0{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Rk(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return ece(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return og(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=H5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Rk(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=B5(this.flatCoordinates,0,e,this.stride),this.changed()}}class _h extends u0{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const i=e,s=[],o=[];for(let l=0,c=i.length;l<c;++l){const u=i[l];xr(s,u.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){xr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new _h(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,xAe(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return kk(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ns(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new ns(e.slice(s,l),r);i.push(c),s=l}return i}getLength(){const e=this.ends_;let n=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=IG(this.flatCoordinates,n,e[i],this.stride),n=e[i];return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=J3(n,r,l,s,.5);xr(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Mle(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new _h(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return EAe(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=rC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class h0 extends u0{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){xr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new h0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<cv(this.getExtent(),e,n))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=lp(e,n,s[a],s[a+1]);if(c<i){i=c;for(let u=0;u<o;++u)r[u]=s[a+u];r.length=o}}return i}getCoordinates(){return og(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new ki(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new ki(e.slice(s,s+r),n);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let i=0,s=n.length;i<s;i+=r){const o=n[i],a=n[i+1];if(uG(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=B5(this.flatCoordinates,0,e,this.stride),this.changed()}}class Il extends u0{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?xr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Il(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return CG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return tce(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),n4(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,kk(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=vh(this.getExtent());this.flatInteriorPoint_=DG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ki(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Rk(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new Rk(n.slice(s,l),e);i.push(c),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;FG(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=n4(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=PG(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new Il(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Rle(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=rC(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function iZ(t){if(sb(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new Il(s,"XY",[s.length])}class wp extends u0{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,l=i.length;a<l;++a){const c=i[a],u=s.length,h=c.getEnds();for(let f=0,g=h.length;f<g;++f)h[f]+=u;xr(s,c.getFlatCoordinates()),o.push(h)}n=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;xr(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,s=n.length;i<s;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();const r=new wp(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vAe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_Ae(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return bAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return gCe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),a8(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,n8(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Xle(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Zle(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new h0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Jle(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=a8(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=kAe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new wp(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=n;return new Il(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const u=new Il(n.slice(s,c),e,l);i.push(u),s=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return SAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=Cle(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const sZ=Hs();class yl{constructor(e,n,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?uT(this.flatCoordinates_):hG(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=vh(this.getExtent());this.flatInteriorPoints_=DG(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Qle(this.flatCoordinates_,this.ends_),n=Xle(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Zle(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=J3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=J3(e,n,o,2,.5);xr(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Jr(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Ms(r)/Ms(n);gu(sZ,r[0],r[3],i,-i,0,0,0),bd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,sZ,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new yl(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=ole((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=H5(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Mle(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=PG(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new yl(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}yl.prototype.getFlatCoordinates=yl.prototype.getOrientedFlatCoordinates;function nce(t,e,n=0,r=t.length-1,i=yCe){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+f)),y=Math.min(r,Math.floor(e+(l-c)*h/l+f));nce(t,e,g,y,i)}const s=t[e];let o=n,a=r;for(NE(t,n,e),i(t[r],s)>0&&NE(t,n,r);o<a;){for(NE(t,o,a),o++,a--;i(t[o],s)<0;)o++;for(;i(t[a],s)>0;)a--}i(t[n],s)===0?NE(t,n,a):(a++,NE(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function NE(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function yCe(t,e){return t<e?-1:t>e?1:0}let rce=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!AP(e,n))return r;const i=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?i(a):a;AP(e,l)&&(n.leaf?r.push(a):H6(e,l)?this._all(a,r):s.push(a))}n=s.pop()}return r}collides(e){let n=this.data;if(!AP(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const s=n.children[i],o=n.leaf?this.toBBox(s):s;if(AP(e,o)){if(n.leaf||H6(e,o))return!0;r.push(s)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=H_([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const u=vCe(e,r.children,n);if(u!==-1)return r.children.splice(u,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&H6(r,i)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const s=r-n+1;let o=this._maxEntries,a;if(s<=o)return a=H_(e.slice(n,r+1)),h_(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=H_([]),a.leaf=!1,a.height=i;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));oZ(e,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const h=Math.min(u+c-1,r);oZ(e,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const g=Math.min(f+l-1,h);a.children.push(this._build(e,f,g,i-1))}}return h_(a,this.toBBox),a}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=W6(c),h=wCe(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,n,s);for(o.children.push(e),mS(o,i);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(i,s,n)}_split(e,n){const r=e[n],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=H_(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,h_(r,this.toBBox),h_(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,n){this.data=H_([e,n]),this.data.height=e.height+1,this.data.leaf=!1,h_(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,s=1/0,o=1/0;for(let a=n;a<=r-n;a++){const l=pS(e,0,a,this.toBBox),c=pS(e,a,r,this.toBBox),u=bCe(l,c),h=W6(l)+W6(c);u<s?(s=u,i=a,o=h<o?h:o):u===s&&h<o&&(o=h,i=a)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:_Ce,s=e.leaf?this.compareMinY:xCe,o=this._allDistMargin(e,n,r,i),a=this._allDistMargin(e,n,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const s=this.toBBox,o=pS(e,0,n,s),a=pS(e,r-n,r,s);let l=kP(o)+kP(a);for(let c=n;c<r-n;c++){const u=e.children[c];mS(o,e.leaf?s(u):u),l+=kP(o)}for(let c=r-n-1;c>=n;c--){const u=e.children[c];mS(a,e.leaf?s(u):u),l+=kP(a)}return l}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)mS(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():h_(e[n],this.toBBox)}};function vCe(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function h_(t,e){pS(t,0,t.children.length,e,t)}function pS(t,e,n,r,i){i||(i=H_(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];mS(i,t.leaf?r(o):o)}return i}function mS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _Ce(t,e){return t.minX-e.minX}function xCe(t,e){return t.minY-e.minY}function W6(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function kP(t){return t.maxX-t.minX+(t.maxY-t.minY)}function wCe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function bCe(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function H6(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function AP(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function H_(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oZ(t,e,n,r,i){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;nce(t,o,e,n,i),s.push(e,o,o,n)}}class l8{constructor(e){this.rbush_=new rce(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[en(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const o=e[i],a=n[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=l,this.items_[en(a)]=l}this.rbush_.load(r)}remove(e){const n=en(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[en(n)],i=[r.minX,r.minY,r.maxX,r.maxY];A1(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,s=e.length;i<s;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return T1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return xp(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class $G extends Yd{constructor(e){super(),this.projection=Jr(e.projection),this.attributions_=aZ(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=aZ(e),this.changed()}setState(e){this.state_=e,this.changed()}}function aZ(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const so={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class am extends Cc{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class Ll extends $G{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=bk,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ur(this.format_,"`format` must be set when `url` is set"),this.loader_=rZ(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:pCe;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new l8:null,this.loadedExtentsRtree_=new l8,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new Fa(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=en(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new am(so.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof yl||(this.featureChangeKeys_[e]=[Yn(n,En.CHANGE,this.handleFeatureChange_,this),Yn(n,r2.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof yl){const s=this.idIndex_[i];s instanceof yl?Array.isArray(s)?s.push(n):this.idIndex_[i]=[s,n]:r=!1}else r=!1}return r&&(ur(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=en(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=en(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(so.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new am(so.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(so.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(so.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(Ps.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(Ps.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ni);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new am(so.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof yl||s.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof yl||i.intersectsExtent(e)){const s=n(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),T1(this.nullGeometryFeatures_)||xr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=fle(e,n);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||Vg,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u instanceof yl?0:u.closestPointXY(r,i,o,a),a<h){s=c;const f=Math.sqrt(a);l[0]=r-f,l[1]=i-f,l[2]=r+f,l[3]=i+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=en(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new am(so.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:en(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&T1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,n,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];i.forEachInExtent(l,function(u){return ig(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new am(so.FEATURESLOADSTART)),this.loader_.call(this,l,n,r,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new am(so.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new am(so.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(A1(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=en(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[n]?.forEach(ni),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(so.REMOVEFEATURE)&&this.dispatchEvent(new am(so.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){ur(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(rZ(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class jn{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new jn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=e4(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===zt.IDLE&&n.load(),n.getImageState()===zt.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?en(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:yu(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Mn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Mn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function lZ(t){return t[0]>0&&t[1]>0}function ECe(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function $a(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class Y5{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=$a(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Y5({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Sn()}getImage(e){return Sn()}getHitDetectionImage(){return Sn()}getPixelRatio(e){return 1}getImageState(){return Sn()}getImageSize(){return Sn()}getOrigin(){return Sn()}getSize(){return Sn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$a(e)}listenImageChange(e){Sn()}load(){Sn()}unlistenImageChange(e){Sn()}ready(){return Promise.resolve()}}class X5 extends Y5{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?zt.LOADING:zt.LOADED,this.imageState_===zt.LOADING&&this.ready().then(()=>this.imageState_=zt.LOADED),this.render()}clone(){const e=this.getScale(),n=new X5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const n=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=ou.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=Ls(o,o);this.draw_(s,a,e),i=a.canvas,ou.set(r,null,null,new Gle(i,void 0,null,zt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const V=i;i=s,s=V}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=i-c,h=Math.sqrt(l*l+u*u),f=h/l;if(e==="miter"&&f<=r)return f*n;const g=n/2/f,y=n/2*(u/h),b=Math.sqrt((i+g)*(i+g)+y*y)-i;if(this.radius2_===void 0||e==="bevel")return b*2;const T=i*Math.sin(a),A=Math.sqrt(i*i-T*T),C=s-A,R=Math.sqrt(T*T+C*C)/T;if(R<=r){const V=R*n/2-s-i;return 2*Math.max(b,V)}return b*2}createRenderOptions(){let e=a2,n=l2,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=vd(this.stroke_.getColor()??Ck),a=this.stroke_.getWidth()??Pk,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??l2,e=this.stroke_.getLineCap()??a2,r=this.stroke_.getMiterLimit()??Ak);const l=this.calculateLineJoinSize_(n,a,r),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=gl),n.fillStyle=vd(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=yu(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Ls(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=gl,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ys extends X5{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new ys({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class xn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=cZ,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new xn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=cZ,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function SCe(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(ur(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let q6=null;function ice(t,e){if(!q6){const n=new jn({color:"rgba(255,255,255,0.4)"}),r=new Mn({color:"#3399CC",width:1.25});q6=[new xn({image:new ys({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return q6}function VG(){const t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new xn({fill:new jn({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new xn({stroke:new Mn({color:e,width:r+2})}),new xn({stroke:new Mn({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new xn({image:new ys({radius:r*2,fill:new jn({color:n}),stroke:new Mn({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function cZ(t){return t.getGeometry()}const TCe="#333";class mc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=$a(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new jn({color:TCe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new mc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof jn?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$a(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Cs={ANIMATING:0,INTERACTING:1},un={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},CP=[un.FILL],lg=[un.STROKE],Gy=[un.BEGIN_PATH],uZ=[un.CLOSE_PATH];class sC extends Ule{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)i[0]=e[a],i[1]=e[a+1],k1(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,n,r,i,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=i);let u=e[n],h=e[n+1];const f=this.tmpCoordinate_;let g=!0,y,_,b;for(y=n+i;y<r;y+=i)f[0]=e[y],f[1]=e[y+1],b=H$(c,f),b!==_?(g&&(a[l++]=u,a[l++]=h,g=!1),a[l++]=f[0],a[l++]=f[1]):b===ao.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],g=!1):g=!0,u=f[0],h=f[1],_=b;return(s&&g||y===n+i)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,n,r,i,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],c=this.appendFlatLineCoordinates(e,n,l,i,!1,!1);s.push(c),n=l}return n}drawCustom(e,n,r,i,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,f,g;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const y=e.getEndss();g=0;for(let _=0,b=y.length;_<b;++_){const T=[];g=this.drawCustomCoordinates_(c,g,y[_],a,T),f.push(T)}this.instructions.push([un.CUSTOM,l,f,e,r,n8,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,f,e,i||r,n8,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([un.CUSTOM,l,h,e,r,kk,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,h,e,i||r,kk,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([un.CUSTOM,l,u,e,r,og,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,og,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([un.CUSTOM,l,u,e,r,og,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,og,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([un.CUSTOM,l,u,e,r,void 0,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[un.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[un.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,s,o=-1;for(n=0;n<r;++n)i=e[n],s=i[0],s==un.END_GEOMETRY?o=n:s==un.BEGIN_GEOMETRY&&(i[2]=n,wke(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=vd(r||gl)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=vd(r||Ck);const i=e.getLineCap();n.lineCap=i!==void 0?i:a2;const s=e.getLineDash();n.lineDash=s?s.slice():cp;const o=e.getLineDashOffset();n.lineDashOffset=o||up;const a=e.getLineJoin();n.lineJoin=a!==void 0?a:l2;const l=e.getWidth();n.lineWidth=l!==void 0?l:Pk;const c=e.getMiterLimit();n.miterLimit=c!==void 0?c:Ak,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[un.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[un.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Kd(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[un.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=cle(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ah(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class kCe extends sC{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!k1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([un.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([un.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||k1(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([un.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([un.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class ACe extends sC{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),a=[un.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cp,up],Gy);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(lg),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cp,up],Gy);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(lg),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(lg),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(lg),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Gy)}}class hZ extends sC{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(Gy),this.hitDetectionInstructions.push(Gy);for(let c=0;c<l;++c){const u=r[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,u,i,!0,!a),g=[un.MOVE_TO_LINE_TO,h,f];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(uZ),this.hitDetectionInstructions.push(uZ)),n=u}return o&&(this.instructions.push(CP),this.hitDetectionInstructions.push(CP)),a&&(this.instructions.push(lg),this.hitDetectionInstructions.push(lg)),n}drawCircle(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cp,up]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[un.CIRCLE,c];this.instructions.push(Gy,u),this.hitDetectionInstructions.push(Gy,u),i.fillStyle!==void 0&&(this.instructions.push(CP),this.hitDetectionInstructions.push(CP)),i.strokeStyle!==void 0&&(this.instructions.push(lg),this.hitDetectionInstructions.push(lg)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cp,up]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cp,up]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=ry(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function CCe(t,e,n,r,i){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+i<r;){const[c,u]=l.slice(-2),h=e[o+i],f=e[o+i+1],g=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=g,a>=t){const y=(t-a+g)/g,_=sc(c,h,y),b=sc(u,f,y);l.push(_,b),s.push(l),l=[_,b],a==t&&(o+=i),a=0}else if(a<t)l.push(e[o+i],e[o+i+1]),o+=i;else{const y=g-a,_=sc(c,h,y/g),b=sc(u,f,y/g);l.push(_,b),s.push(l),l=[_,b],a=0,o+=i}}return a>0&&s.push(l),s}function ICe(t,e,n,r,i){let s=n,o=n,a=0,l=0,c=n,u,h,f,g,y,_,b,T,A,C;for(h=n;h<r;h+=i){const I=e[h],R=e[h+1];y!==void 0&&(A=I-y,C=R-_,g=Math.sqrt(A*A+C*C),b!==void 0&&(l+=f,u=Math.acos((b*A+T*C)/(f*g)),u>t&&(l>a&&(a=l,s=c,o=h),l=0,c=h-i)),f=g,b=A,T=C),y=I,_=R}return l+=g,l>a?[c,h]:[s,o]}const r4={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class PCe extends sC{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[gl]={fillStyle:gl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!ca(this.maxExtent,e.getExtent()))return;let f;if(u=e.getFlatCoordinates(),c=="LineString")f=[u.length];else if(c=="MultiLineString")f=e.getEnds();else if(c=="Polygon")f=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=e.getEndss();f=[];for(let T=0,A=b.length;T<A;++T)f.push(b[T][0])}this.beginGeometry(e,n,r);const g=o.repeat,y=g?void 0:o.textAlign;let _=0;for(let b=0,T=f.length;b<T;++b){let A;g?A=CCe(g*this.resolution,u,_,f[b],h):A=[u.slice(_,f[b])];for(let C=0,I=A.length;C<I;++C){const R=A[C];let V=0,P=R.length;if(y==null){const L=ICe(o.maxAngle,R,0,R.length,2);V=L[0],P=L[1]}for(let L=V;L<P;L+=h)a.push(R[L],R[L+1]);const N=a.length;_=f[b],this.drawChars_(l,N),l=N}}this.endGeometry(n)}else{let f=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||f.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const I=e.getFlatInteriorPoints();u=[];for(let R=0,V=I.length;R<V;R+=3)o.overflow||f.push(I[R+2]/this.resolution),u.push(I[R],I[R+1]);if(u.length===0)return;h=2;break}const g=this.appendFlatPointCoordinates(u,h);if(g===l)return;if(f&&(g-l)/2!==u.length/h){let I=l/2;f=f.filter((R,V)=>{const P=a[(I+V)*2]===u[V*h]&&a[(I+V)*2+1]===u[V*h+1];return P||--I,P})}this.saveTextStates_();const y=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,_=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,r);let b=o.padding;if(b!=zy&&(o.scale[0]<0||o.scale[1]<0)){let I=o.padding[0],R=o.padding[1],V=o.padding[2],P=o.padding[3];o.scale[0]<0&&(R=-R,P=-P),o.scale[1]<0&&(I=-I,V=-V),b=[I,R,V,P]}const T=this.pixelRatio;this.instructions.push([un.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==zy?zy:b.map(function(I){return I*T}),y,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const A=1/T,C=y?y.slice(0):null;C&&(C[1]=gl),this.hitDetectionInstructions.push([un.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,b,C,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?gl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||Ik,justify:n.justify,textBaseline:n.textBaseline||t4,scale:n.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=r4[i.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([un.DRAW_CHARS,e,n,c,i.overflow,a,i.maxAngle,l,u,s,f*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([un.DRAW_CHARS,e,n,c,i.overflow,a&&gl,i.maxAngle,l,u,s,f*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=vd(o.getColor()||gl)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),b=a.getLineDashOffset(),T=a.getWidth(),A=a.getMiterLimit();s.lineCap=a.getLineCap()||a2,s.lineDash=_?_.slice():cp,s.lineDashOffset=b===void 0?up:b,s.lineJoin=a.getLineJoin()||l2,s.lineWidth=T===void 0?Pk:T,s.miterLimit=A===void 0?Ak:A,s.strokeStyle=vd(a.getColor()||Ck)}r=this.textState_;const l=e.getFont()||Ble;YAe(l);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||t4,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||zy,r.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),g=e.getKeepUpright(),y=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=y===void 0?0:y,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:en(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+en(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const RCe={Circle:hZ,Default:sC,Image:kCe,LineString:ACe,Polygon:hZ,Text:PCe};class MCe{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const s=r[i].finish();e[n][i]=s}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[n];if(s===void 0){const o=RCe[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=s}return s}}function NCe(t,e,n,r,i,s,o,a,l,c,u,h,f=!0){let g=t[e],y=t[e+1],_=0,b=0,T=0,A=0;function C(){_=g,b=y,e+=r,g=t[e],y=t[e+1],A+=T,T=Math.sqrt((g-_)*(g-_)+(y-b)*(y-b))}do C();while(e<n-r&&A+T<s);let I=T===0?0:(s-A)/T;const R=sc(_,g,I),V=sc(b,y,I),P=e-r,N=A,L=s+a*l(c,i,u);for(;e<n-r&&A+T<L;)C();I=T===0?0:(L-A)/T;const O=sc(_,g,I),F=sc(b,y,I);let G=!1;if(f)if(h){const Ce=[R,V,O,F];EG(Ce,0,4,2,h,Ce,Ce),G=Ce[0]>Ce[2]}else G=R>O;const U=Math.PI,ue=[],be=P+r===e;e=P,T=0,A=N,g=t[e],y=t[e+1];let ze;if(be){C(),ze=Math.atan2(y-b,g-_),G&&(ze+=ze>0?-U:U);const Ce=(O+R)/2,de=(F+V)/2;return ue[0]=[Ce,de,(L-s)/2,ze,i],ue}i=i.replace(/\n/g," ");for(let Ce=0,de=i.length;Ce<de;){C();let Le=Math.atan2(y-b,g-_);if(G&&(Le+=Le>0?-U:U),ze!==void 0){let Q=Le-ze;if(Q+=Q>U?-2*U:Q<-U?2*U:0,Math.abs(Q)>o)return null}ze=Le;const xe=Ce;let Z=0;for(;Ce<de;++Ce){const Q=G?de-Ce-1:Ce,me=a*l(c,i[Q],u);if(e+r<n&&A+T<s+Z+me/2)break;Z+=me}if(Ce===xe)continue;const W=G?i.substring(de-xe,de-Ce):i.substring(xe,Ce);I=T===0?0:(s+Z/2-A)/T;const ne=sc(_,g,I),se=sc(b,y,I);ue.push([ne,se,Z/2,Le,W]),s+=Z}return ue}class sce{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Q3(),{get:(e,n)=>{if(typeof Q3()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const s=n[r];if(typeof s=="function"){s(e);continue}const o=n[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const d_=Wa(),lm=[],pf=[],mf=[],cm=[];function dZ(t){return t[3].declutterBox}const fZ=new RegExp("[-----]");function K6(t,e){return e==="start"?e=fZ.test(t)?"right":"left":e==="end"&&(e=fZ.test(t)?"left":"right"),r4[e]}function LCe(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function OCe(t,e,n){return n%2===0&&(t+=e),t}class DCe{constructor(e,n,r,i,s){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Hs(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new sce:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const s=e+n+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?r4[l.justify]:K6(Array.isArray(e)?e[0]:e,l.textAlign||Ik),f=i&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(LCe,[]),{width:y,height:_,widths:b,heights:T,lineWidths:A}=ZAe(l,g),C=y+f,I=[],R=(C+2)*u[0],V=(_+f)*u[1],P={width:R<0?Math.floor(R):Math.ceil(R),height:V<0?Math.floor(V):Math.ceil(V),contextInstructions:I};(u[0]!=1||u[1]!=1)&&I.push("scale",u),i&&(I.push("strokeStyle",o.strokeStyle),I.push("lineWidth",f),I.push("lineCap",o.lineCap),I.push("lineJoin",o.lineJoin),I.push("miterLimit",o.miterLimit),I.push("setLineDash",[o.lineDash]),I.push("lineDashOffset",o.lineDashOffset)),r&&I.push("fillStyle",a.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");const N=.5-h;let L=h*C+N*f;const O=[],F=[];let G=0,U=0,ue=0,be=0,ze;for(let Ce=0,de=g.length;Ce<de;Ce+=2){const Le=g[Ce];if(Le===`
`){U+=G,G=0,L=h*C+N*f,++be;continue}const xe=g[Ce+1]||l.font;xe!==ze&&(i&&O.push("font",xe),r&&F.push("font",xe),ze=xe),G=Math.max(G,T[ue]);const Z=[Le,L+N*b[ue]+h*(b[ue]-A[be]),.5*(f+G)+U];L+=b[ue],i&&O.push("strokeText",Z),r&&F.push("fillText",Z),++ue}return Array.prototype.push.apply(I,O),Array.prototype.push.apply(I,F),this.labels_[s]=P,P}replayTextBackground_(e,n,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){a*=f[0],l*=f[1];let T=r-a,A=i-l;const C=s+c>e?e-c:s,I=o+u>n?n-u:o,R=y[3]+C*f[0]+y[1],V=y[0]+I*f[1]+y[2],P=T-y[3],N=A-y[0];(_||h!==0)&&(lm[0]=P,cm[0]=P,lm[1]=N,pf[1]=N,pf[0]=P+R,mf[0]=pf[0],mf[1]=N+V,cm[1]=mf[1]);let L;return h!==0?(L=gu(Hs(),r,i,1,1,h,-r,-i),Ji(L,lm),Ji(L,pf),Ji(L,mf),Ji(L,cm),xp(Math.min(lm[0],pf[0],mf[0],cm[0]),Math.min(lm[1],pf[1],mf[1],cm[1]),Math.max(lm[0],pf[0],mf[0],cm[0]),Math.max(lm[1],pf[1],mf[1],cm[1]),d_)):xp(Math.min(P,P+R),Math.min(N,N+V),Math.max(P,P+R),Math.max(N,N+V),d_),g&&(T=Math.round(T),A=Math.round(A)),{drawImageX:T,drawImageY:A,drawImageW:C,drawImageH:I,originX:c,originY:u,declutterBox:{minX:d_[0],minY:d_[1],maxX:d_[2],maxY:d_[3],value:b},canvasTransform:L,scale:f}}replayImageOrLabel_(e,n,r,i,s,o,a){const l=!!(o||a),c=i.declutterBox,u=a?a[2]*i.scale[0]/2:0;return c.minX-u<=n[0]&&c.maxX+u>=0&&c.minY-u<=n[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,lm,pf,mf,cm,o,a),JAe(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=Ji(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const s=this.textStates[n],o=this.createLabel(e,n,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=K6(Array.isArray(e)?e[0]:e,s.textAlign||Ik),u=r4[s.textBaseline||t4],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],g=c*f+2*(.5-c)*h,y=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:g,anchorY:y}}execute_(e,n,r,i,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&Kd(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=bd(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Tle(this.renderedTransform_,r));let h=0;const f=i.length;let g=0,y,_,b,T,A,C,I,R,V,P,N,L,O,F=0,G=0;const U=this.coordinateCache_,ue=this.viewRotation_,be=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,ze={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ue},Ce=this.instructions!=i||this.overlaps?0:200;let de,Le,xe,Z;for(;h<f;){const W=i[h];switch(W[0]){case un.BEGIN_GEOMETRY:de=W[1],Z=W[3],de.getGeometry()?a!==void 0&&!ca(a,Z.getExtent())?h=W[2]+1:++h:h=W[2],c&&(c.zIndex=W[4]);break;case un.BEGIN_PATH:F>Ce&&(this.fill_(e),F=0),G>Ce&&(e.stroke(),G=0),!F&&!G&&(e.beginPath(),A=NaN,C=NaN),++h;break;case un.CIRCLE:g=W[1];const se=u[g],Q=u[g+1],me=u[g+2],Ke=u[g+3],Ye=me-se,ke=Ke-Q,Ee=Math.sqrt(Ye*Ye+ke*ke);e.moveTo(se+Ee,Q),e.arc(se,Q,Ee,0,2*Math.PI,!0),++h;break;case un.CLOSE_PATH:e.closePath(),++h;break;case un.CUSTOM:g=W[1],y=W[2];const Dt=W[3],Xe=W[4],cn=W[5];ze.geometry=Dt,ze.feature=de,h in U||(U[h]=[]);const jt=U[h];cn?cn(u,g,y,2,jt):(jt[0]=u[g],jt[1]=u[g+1],jt.length=2),c&&(c.zIndex=W[6]),Xe(jt,ze),++h;break;case un.DRAW_IMAGE:g=W[1],y=W[2],V=W[3],_=W[4],b=W[5];let gn=W[6];const wn=W[7],pt=W[8],hr=W[9],zn=W[10];let Hn=W[11];const ei=W[12];let xo=W[13];T=W[14]||"declutter";const Rr=W[15];if(!V&&W.length>=20){P=W[19],N=W[20],L=W[21],O=W[22];const Ve=this.drawLabelWithPointPlacement_(P,N,L,O);V=Ve.label,W[3]=V;const te=W[23];_=(Ve.anchorX-te)*this.pixelRatio,W[4]=_;const ve=W[24];b=(Ve.anchorY-ve)*this.pixelRatio,W[5]=b,gn=V.height,W[6]=gn,xo=V.width,W[13]=xo}let Ai;W.length>25&&(Ai=W[25]);let js,wt,Qn;W.length>17?(js=W[16],wt=W[17],Qn=W[18]):(js=zy,wt=null,Qn=null),zn&&be?Hn+=ue:!zn&&!be&&(Hn-=ue);let dr=0;for(;g<y;g+=2){if(Ai&&Ai[dr++]<xo/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(V.width,V.height,u[g],u[g+1],xo,gn,_,b,pt,hr,Hn,ei,s,js,!!wt||!!Qn,de),te=[e,n,V,Ve,wn,wt,Qn];if(l){let ve,De,He;if(Rr){const nt=y-g;if(!Rr[nt]){Rr[nt]={args:te,declutterMode:T};continue}const Mt=Rr[nt];ve=Mt.args,De=Mt.declutterMode,delete Rr[nt],He=dZ(ve)}let Ge,Ze;if(ve&&(De!=="declutter"||!l.collides(He))&&(Ge=!0),(T!=="declutter"||!l.collides(Ve.declutterBox))&&(Ze=!0),De==="declutter"&&T==="declutter"){const nt=Ge&&Ze;Ge=nt,Ze=nt}Ge&&(De!=="none"&&l.insert(He),this.replayImageOrLabel_.apply(this,ve)),Ze&&(T!=="none"&&l.insert(Ve.declutterBox),this.replayImageOrLabel_.apply(this,te))}else this.replayImageOrLabel_.apply(this,te)}++h;break;case un.DRAW_CHARS:const Vt=W[1],Dn=W[2],tn=W[3],wo=W[4];O=W[5];const Ui=W[6],Fs=W[7],Nn=W[8];L=W[9];const Ci=W[10];P=W[11],Array.isArray(P)&&(P=P.reduce(OCe,"")),N=W[12];const qe=[W[13],W[13]];T=W[14]||"declutter";const Ie=W[15],Pe=this.textStates[N],rn=Pe.font,z=[Pe.scale[0]*Fs,Pe.scale[1]*Fs];let Tt;rn in this.widths_?Tt=this.widths_[rn]:(Tt={},this.widths_[rn]=Tt);const X=IG(u,Vt,Dn,2),le=Math.abs(z[0])*eZ(rn,P,Tt);if(wo||le<=X){const Ve=this.textStates[N].textAlign,te=(X-le)*K6(P,Ve),ve=NCe(u,Vt,Dn,2,P,te,Ui,Math.abs(z[0]),eZ,rn,Tt,be?0:this.viewRotation_,Ie);e:if(ve){const De=[];let He,Ge,Ze,nt,Mt;if(L)for(He=0,Ge=ve.length;He<Ge;++He){Mt=ve[He],Ze=Mt[4],nt=this.createLabel(Ze,N,"",L),_=Mt[2]+(z[0]<0?-Ci:Ci),b=tn*nt.height+(.5-tn)*2*Ci*z[1]/z[0]-Nn;const Gt=this.calculateImageOrLabelDimensions_(nt.width,nt.height,Mt[0],Mt[1],nt.width,nt.height,_,b,0,0,Mt[3],qe,!1,zy,!1,de);if(l&&T==="declutter"&&l.collides(Gt.declutterBox))break e;De.push([e,n,nt,Gt,1,null,null])}if(O)for(He=0,Ge=ve.length;He<Ge;++He){Mt=ve[He],Ze=Mt[4],nt=this.createLabel(Ze,N,O,""),_=Mt[2],b=tn*nt.height-Nn;const Gt=this.calculateImageOrLabelDimensions_(nt.width,nt.height,Mt[0],Mt[1],nt.width,nt.height,_,b,0,0,Mt[3],qe,!1,zy,!1,de);if(l&&T==="declutter"&&l.collides(Gt.declutterBox))break e;De.push([e,n,nt,Gt,1,null,null])}l&&T!=="none"&&l.load(De.map(dZ));for(let Gt=0,_n=De.length;Gt<_n;++Gt)this.replayImageOrLabel_.apply(this,De[Gt])}}++h;break;case un.END_GEOMETRY:if(o!==void 0){de=W[1];const Ve=o(de,Z,T);if(Ve)return Ve}++h;break;case un.FILL:Ce?F++:this.fill_(e),++h;break;case un.MOVE_TO_LINE_TO:for(g=W[1],y=W[2],Le=u[g],xe=u[g+1],e.moveTo(Le,xe),A=Le+.5|0,C=xe+.5|0,g+=2;g<y;g+=2)Le=u[g],xe=u[g+1],I=Le+.5|0,R=xe+.5|0,(g==y-2||I!==A||R!==C)&&(e.lineTo(Le,xe),A=I,C=R);++h;break;case un.SET_FILL_STYLE:this.alignAndScaleFill_=W[2],F&&(this.fill_(e),F=0,G&&(e.stroke(),G=0)),e.fillStyle=W[1],++h;break;case un.SET_STROKE_STYLE:G&&(e.stroke(),G=0),this.setStrokeStyle_(e,W),++h;break;case un.STROKE:Ce?G++:e.stroke(),++h;break;default:++h;break}}F&&this.fill_(e),G&&e.stroke()}execute(e,n,r,i,s,o){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,s)}}const Py=["Polygon","Circle","LineString","Image","Text","Default"],oce=["Image","Text"],jCe=Py.filter(t=>!oce.includes(t));class FCe{constructor(e,n,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hs(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new DCe(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,s,o){i=Math.round(i);const a=i*2+1,l=gu(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Ls(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Wa(),hT(h,e),ah(h,n*(this.renderBuffer_+i),h));const f=$Ce(i);let g;function y(R,V,P){const N=u.getImageData(0,0,a,a).data;for(let L=0,O=f.length;L<O;L++)if(N[f[L]]>0){if(!o||P==="none"||g!=="Image"&&g!=="Text"||o.includes(R)){const F=(f[L]-3)/4,G=i-F%a,U=i-(F/a|0),ue=s(R,V,G*G+U*U);if(ue)return ue}u.clearRect(0,0,a,a);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(op);let b,T,A,C,I;for(b=_.length-1;b>=0;--b){const R=_[b].toString();for(A=this.executorsByZIndex_[R],T=Py.length-1;T>=0;--T)if(g=Py[T],C=A[g],C!==void 0&&(I=C.executeHitDetection(u,l,r,y,h),I))return I}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],s=n[2],o=n[3],a=[r,i,r,o,s,o,s,i];return bd(a,0,8,2,e,a),a}isEmpty(){return T1(this.executorsByZIndex_)}execute(e,n,r,i,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?xke:op),o=o||Py;const c=Py.length;for(let u=0,h=l.length;u<h;++u){const f=l[u].toString(),g=this.executorsByZIndex_[f];for(let y=0,_=o.length;y<_;++y){const b=o[y],T=g[b];if(T!==void 0){const A=a===null?void 0:T.getZIndexContext(),C=A?A.getContext():e,I=this.maxExtent_&&b!=="Image"&&b!=="Text";if(I&&(C.save(),this.clip(C,r)),!A||b==="Text"||b==="Image"?T.execute(C,n,r,i,s,a):A.pushFunction(R=>T.execute(R,n,r,i,s,a)),I&&C.restore(),A){A.offset();const R=l[u]*c+Py.indexOf(b);this.deferredZIndexContexts_[R]||(this.deferredZIndexContexts_[R]=[]),this.deferredZIndexContexts_[R].push(A)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(op);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[r]].length=0}}const Y6={};function $Ce(t){if(Y6[t]!==void 0)return Y6[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return Y6[t]=i,i}function pZ(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}let oC=class ace extends Y5{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;ur(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||en(o)),ur(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ur(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=zt.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?zt.LOADED:zt.IDLE:l=zt.LOADING:l=zt.LOADED),this.color_=e.color!==void 0?yu(e.color):null,this.iconImage_=e4(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(pZ(g[0],g[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(pZ(c,u,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ace({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=e4(null,e,this.crossOrigin_,zt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==zt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==zt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(En.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(En.CHANGE,e)}ready(){return this.iconImage_.ready()}};const pd=.5;function VCe(t,e,n,r,i,s,o,a,l){const c=i,u=t[0]*pd,h=t[1]*pd,f=Ls(u,h);f.imageSmoothingEnabled=!1;const g=f.canvas,y=new eCe(f,pd,i,null,o,a,null),_=n.length,b=Math.floor((256*256*256-1)/_),T={};for(let C=1;C<=_;++C){const I=n[C-1],R=I.getStyleFunction()||r;if(!R)continue;let V=R(I,s);if(!V)continue;Array.isArray(V)||(V=[V]);const N=(C*b).toString(16).padStart(7,"#00000");for(let L=0,O=V.length;L<O;++L){const F=V[L],G=F.getGeometryFunction()(I);if(!G||!ca(c,G.getExtent()))continue;const U=F.clone(),ue=U.getFill();ue&&ue.setColor(N);const be=U.getStroke();be&&(be.setColor(N),be.setLineDash(null)),U.setText(void 0);const ze=F.getImage();if(ze){const xe=ze.getImageSize();if(!xe)continue;const Z=Ls(xe[0],xe[1],void 0,{alpha:!1}),W=Z.canvas;Z.fillStyle=N,Z.fillRect(0,0,W.width,W.height),U.setImage(new oC({img:W,anchor:ze.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}const Ce=U.getZIndex()||0;let de=T[Ce];de||(de={},T[Ce]=de,de.Polygon=[],de.Circle=[],de.LineString=[],de.Point=[]);const Le=G.getType();if(Le==="GeometryCollection"){const xe=G.getGeometriesArrayRecursive();for(let Z=0,W=xe.length;Z<W;++Z){const ne=xe[Z];de[ne.getType().replace("Multi","")].push(ne,U)}}else de[Le.replace("Multi","")].push(G,U)}}const A=Object.keys(T).map(Number).sort(op);for(let C=0,I=A.length;C<I;++C){const R=T[A[C]];for(const V in R){const P=R[V];for(let N=0,L=P.length;N<L;N+=2){y.setStyle(P[N+1]);for(let O=0,F=e.length;O<F;++O)y.setTransform(e[O]),y.drawGeometry(P[N])}}}return f.getImageData(0,0,g.width,g.height)}function zCe(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*pd),s=Math.floor(Math.round(t[1])*pd),o=(ri(i,0,n.width-1)+ri(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&r.push(e[u/h-1])}return r}class fT extends Cc{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}const GCe=5;class lce extends eC{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=GCe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Sn()}getData(e){return null}prepareFrame(e){return Sn()}renderFrame(e,n){return Sn()}forEachFeatureAtCoordinate(e,n,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===zt.LOADED||n.getState()===zt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=zt.LOADED&&n!=zt.ERROR&&e.addEventListener(En.CHANGE,this.boundHandleImageChange_),n==zt.IDLE&&(e.load(),n=e.getState()),n==zt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const mZ=[];let q_=null;function UCe(){q_=Ls(1,1,void 0,{willReadFrequently:!0})}class zG extends lce{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Hs(),this.pixelTransform=Hs(),this.inversePixelTransform=Hs(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){q_||UCe(),q_.clearRect(0,0,1,1);let i;try{q_.drawImage(e,n,r,1,1,0,0,1,1),i=q_.getImageData(0,0,1,1).data}catch{return q_=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Kd(yu(e.style.backgroundColor),yu(r)))){const a=e.firstElementChild;ag(a)&&(o=a.getContext("2d"))}if(o&&fAe(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=hc?jle():document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Ls();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=uv(r),s=V5(r),o=$5(r),a=F5(r);Ji(n.coordinateToPixelTransform,i),Ji(n.coordinateToPixelTransform,s),Ji(n.coordinateToPixelTransform,o),Ji(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Ji(l,i),Ji(l,s),Ji(l,o),Ji(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Xn(r)/i*o),l=Math.round(Ms(r)/i*o);gu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),Tk(this.inversePixelTransform,this.pixelTransform);const c=dAe(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const s=new fT(e,this.inversePixelTransform,r,n);i.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(uo.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(uo.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new sce),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(uo.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(uo.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,s,o,a){const l=s/2,c=o/2,u=i/n,h=-u,f=-e[0]+a,g=-e[1];return gu(this.tempTransform,l,c,u,h,-r,f,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class BCe extends zG{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Wa(),this.wrappedRenderedExtent_=Wa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),g=n.pixelRatio,y=n.viewHints,_=!(y[Cs.ANIMATING]||y[Cs.INTERACTING]),b=this.context,T=Math.round(Xn(i)/a*g),A=Math.round(Ms(i)/a*g),C=h.getWrapX()&&l.canWrapX(),I=C?Xn(u):null,R=C?Math.ceil((i[2]-u[2])/I)+1:1;let V=C?Math.floor((i[0]-u[0])/I):0;do{let P=this.getRenderTransform(o,a,0,g,T,A,V*I);n.declutter&&(P=P.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],P,c,_,r===void 0?Py:r?oce:jCe,r?f&&n.declutter[f]:void 0)}while(++V<R)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ls(this.context.canvas.width,this.context.canvas.height,mZ))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,q5(this.context),mZ.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(uo.PRERENDER)||this.getLayer().hasListener(uo.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=lh(r.extent);a=ca(l,e.extent),this.clipped_=a&&!ig(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=r[0]*pd,f=r[1]*pd;u.push(this.getRenderTransform(i,s,o,pd,h,f,0).slice());const g=c.getSource(),y=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!ig(y,l)){let _=l[0];const b=Xn(y);let T=0,A;for(;_<y[0];)--T,A=b*T,u.push(this.getRenderTransform(i,s,o,pd,h,f,A).slice()),_+=b;for(T=0,_=l[2];_>y[2];)++T,A=b*T,u.push(this.getRenderTransform(i,s,o,pd,h,f,A).slice()),_-=b}this.hitDetectionImageData_=VCe(r,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,tZ(s,this.renderedPixelRatio_))}n(zCe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,y){const _=en(f),b=c[_];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return c[_]=!0,s.splice(s.lastIndexOf(b),1),i(f,l,g);b.geometry=g,b.distanceSq=y}}else{if(y===0)return c[_]=!0,i(f,l,g);s.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:y,callback:i})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,u,h?n.declutter?.[h]?.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[Cs.ANIMATING],s=e.viewHints[Cs.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,f=e.pixelRatio,g=n.getRevision(),y=n.getRenderBuffer();let _=n.getRenderOrder();_===void 0&&(_=nCe);const b=c.center.slice(),T=ah(l,y*h),A=T.slice(),C=[T.slice()],I=u.getExtent();if(r.getWrapX()&&u.canWrapX()&&!ig(I,e.extent)){const ue=Xn(I),be=Math.max(Xn(T)/2,ue);T[0]=I[0]-be,T[2]=I[2]+be,mle(b,u);const ze=dle(C[0],u);ze[0]<I[0]&&ze[2]<I[2]?C.push([ze[0]+ue,ze[1],ze[2]+ue,ze[3]]):ze[0]>I[0]&&ze[2]>I[2]&&C.push([ze[0]-ue,ze[1],ze[2]-ue,ze[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==_&&this.renderedFrameDeclutter_===!!e.declutter&&ig(this.wrappedRenderedExtent_,T))return Kd(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const R=new MCe(Kle(h,f),T,h,f);let V;for(let ue=0,be=C.length;ue<be;++ue)r.loadFeatures(C[ue],h,u);const P=tZ(h,f);let N=!0;const L=(ue,be)=>{let ze;const Ce=ue.getStyleFunction()||n.getStyleFunction();if(Ce&&(ze=Ce(ue,h)),ze){const de=this.renderFeature(ue,P,ze,R,V,this.getLayer().getDeclutter(),be);N=N&&!de}},O=bG(T),F=r.getFeaturesInExtent(O);_&&F.sort(_);for(let ue=0,be=F.length;ue<be;++ue)L(F[ue],ue);this.renderedFeatures_=F,this.ready=N;const G=R.finish(),U=new FCe(T,h,f,r.getOverlaps(),G,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=_,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=T,this.renderedCenter_=b,this.renderedProjection_=u,this.renderedPixelRatio_=f,this.replayGroup_=U,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,u=r.length;c<u;++c)l=nZ(i,e,r[c],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=nZ(i,e,r,n,this.boundHandleStyleImageChange_,s,o,a);return l}}let dv=0;const Rs=1<<dv++,Ht=1<<dv++,Bs=1<<dv++,Si=1<<dv++,Pl=1<<dv++,au=1<<dv++,IP=Math.pow(2,dv)-1,GG={[Rs]:"boolean",[Ht]:"number",[Bs]:"string",[Si]:"color",[Pl]:"number[]",[au]:"size"},WCe=Object.keys(GG).map(Number).sort(op);function HCe(t){return t in GG}function Rx(t){const e=[];for(const n of WCe)gS(t,n)&&e.push(GG[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function gS(t,e){return(t&e)===e}function ad(t,e){return t===e}class Gs{constructor(e,n){if(!HCe(e))throw new Error(`literal expressions must have a specific type, got ${Rx(e)}`);this.type=e,this.value=n}}class cce{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function UG(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function fo(t,e,n){switch(typeof t){case"boolean":{if(ad(e,Bs))return new Gs(Bs,t?"true":"false");if(!gS(e,Rs))throw new Error(`got a boolean, but expected ${Rx(e)}`);return new Gs(Rs,t)}case"number":{if(ad(e,au))return new Gs(au,$a(t));if(ad(e,Rs))return new Gs(Rs,!!t);if(ad(e,Bs))return new Gs(Bs,t.toString());if(!gS(e,Ht))throw new Error(`got a number, but expected ${Rx(e)}`);return new Gs(Ht,t)}case"string":{if(ad(e,Si))return new Gs(Si,NG(t));if(ad(e,Rs))return new Gs(Rs,!!t);if(!gS(e,Bs))throw new Error(`got a string, but expected ${Rx(e)}`);return new Gs(Bs,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return rIe(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(ad(e,au)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Gs(au,t)}if(ad(e,Si)){if(t.length===3)return new Gs(Si,[...t,1]);if(t.length===4)return new Gs(Si,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!gS(e,Pl))throw new Error(`got an array of numbers, but expected ${Rx(e)}`);return new Gs(Pl,t)}const Ae={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},qCe={[Ae.Get]:An(Fn(1,1/0),gZ),[Ae.Var]:An(Fn(1,1),KCe),[Ae.Has]:An(Fn(1,1/0),gZ),[Ae.Id]:An(YCe,f_),[Ae.Concat]:An(Fn(2,1/0),Sr(Bs)),[Ae.GeometryType]:An(XCe,f_),[Ae.LineMetric]:An(f_),[Ae.Resolution]:An(X6,f_),[Ae.Zoom]:An(X6,f_),[Ae.Time]:An(X6,f_),[Ae.Any]:An(Fn(2,1/0),Sr(Rs)),[Ae.All]:An(Fn(2,1/0),Sr(Rs)),[Ae.Not]:An(Fn(1,1),Sr(Rs)),[Ae.Equal]:An(Fn(2,2),Sr(IP)),[Ae.NotEqual]:An(Fn(2,2),Sr(IP)),[Ae.GreaterThan]:An(Fn(2,2),Sr(Ht)),[Ae.GreaterThanOrEqualTo]:An(Fn(2,2),Sr(Ht)),[Ae.LessThan]:An(Fn(2,2),Sr(Ht)),[Ae.LessThanOrEqualTo]:An(Fn(2,2),Sr(Ht)),[Ae.Multiply]:An(Fn(2,1/0),yZ),[Ae.Coalesce]:An(Fn(2,1/0),yZ),[Ae.Divide]:An(Fn(2,2),Sr(Ht)),[Ae.Add]:An(Fn(2,1/0),Sr(Ht)),[Ae.Subtract]:An(Fn(2,2),Sr(Ht)),[Ae.Clamp]:An(Fn(3,3),Sr(Ht)),[Ae.Mod]:An(Fn(2,2),Sr(Ht)),[Ae.Pow]:An(Fn(2,2),Sr(Ht)),[Ae.Abs]:An(Fn(1,1),Sr(Ht)),[Ae.Floor]:An(Fn(1,1),Sr(Ht)),[Ae.Ceil]:An(Fn(1,1),Sr(Ht)),[Ae.Round]:An(Fn(1,1),Sr(Ht)),[Ae.Sin]:An(Fn(1,1),Sr(Ht)),[Ae.Cos]:An(Fn(1,1),Sr(Ht)),[Ae.Atan]:An(Fn(1,2),Sr(Ht)),[Ae.Sqrt]:An(Fn(1,1),Sr(Ht)),[Ae.Match]:An(Fn(4,1/0),vZ,JCe),[Ae.Between]:An(Fn(3,3),Sr(Ht)),[Ae.Interpolate]:An(Fn(6,1/0),vZ,QCe),[Ae.Case]:An(Fn(3,1/0),ZCe,eIe),[Ae.In]:An(Fn(2,2),tIe),[Ae.Number]:An(Fn(1,1/0),Sr(IP)),[Ae.String]:An(Fn(1,1/0),Sr(IP)),[Ae.Array]:An(Fn(1,1/0),Sr(Ht)),[Ae.Color]:An(Fn(1,4),Sr(Ht)),[Ae.Band]:An(Fn(1,3),Sr(Ht)),[Ae.Palette]:An(Fn(2,2),nIe),[Ae.ToString]:An(Fn(1,1),Sr(Rs|Ht|Bs|Si))};function gZ(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=t[s+1];switch(typeof o){case"number":{i[s]=new Gs(Ht,o);break}case"string":{i[s]=new Gs(Bs,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return i}function KCe(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new Gs(Bs,r)]}function YCe(t,e,n){n.featureId=!0}function XCe(t,e,n){n.geometryType=!0}function X6(t,e,n){n.mapState=!0}function f_(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Fn(t,e){return function(n,r,i){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${s}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function yZ(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=fo(t[s+1],e,n);i[s]=o}return i}function Sr(t){return function(e,n,r){const i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=fo(e[o+1],t,r);s[o]=a}return s}}function ZCe(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function vZ(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function JCe(t,e,n){const r=t.length-1,i=Bs|Ht|Rs,s=fo(t[1],i,n),o=fo(t[t.length-1],e,n),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=fo(t[l+2],s.type,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=fo(t[l+3],o.type,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function QCe(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Gs(Ht,i);let o;try{o=fo(t[2],Ht,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const c=fo(t[l+3],Ht,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=fo(t[l+4],e,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function eIe(t,e,n){const r=fo(t[t.length-1],e,n),i=new Array(t.length-1);for(let s=0;s<i.length-1;s+=2){try{const o=fo(t[s+1],Rs,n);i[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=fo(t[s+2],r.type,n);i[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function tIe(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Bs}else i=Ht;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const l=fo(r[a],i,n);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[fo(t[1],i,n),...s]}function nIe(t,e,n){let r;try{r=fo(t[1],Ht,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let o=0;o<s.length;o++){let a;try{a=fo(i[o],Si,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Gs))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[r,...s]}function An(...t){return function(e,n,r){const i=e[0];let s;for(let o=0;o<t.length;o++){const a=t[o](e,n,r);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new cce(n,i,...s)}}function rIe(t,e,n){const r=t[0],i=qCe[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function BG(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return BG(t.getGeometries()[0]);default:return""}}function uce(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Mp(t,e,n){const r=fo(t,e,n);return xh(r)}function xh(t,e){if(t instanceof Gs){if(t.type===Si&&typeof t.value=="string"){const r=NG(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case Ae.Number:case Ae.String:case Ae.Coalesce:return iIe(t);case Ae.Get:case Ae.Var:case Ae.Has:return sIe(t);case Ae.Id:return r=>r.featureId;case Ae.GeometryType:return r=>r.geometryType;case Ae.Concat:{const r=t.args.map(i=>xh(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Ae.Resolution:return r=>r.resolution;case Ae.Any:case Ae.All:case Ae.Between:case Ae.In:case Ae.Not:return aIe(t);case Ae.Equal:case Ae.NotEqual:case Ae.LessThan:case Ae.LessThanOrEqualTo:case Ae.GreaterThan:case Ae.GreaterThanOrEqualTo:return oIe(t);case Ae.Multiply:case Ae.Divide:case Ae.Add:case Ae.Subtract:case Ae.Clamp:case Ae.Mod:case Ae.Pow:case Ae.Abs:case Ae.Floor:case Ae.Ceil:case Ae.Round:case Ae.Sin:case Ae.Cos:case Ae.Atan:case Ae.Sqrt:return lIe(t);case Ae.Case:return cIe(t);case Ae.Match:return uIe(t);case Ae.Interpolate:return hIe(t);case Ae.ToString:return dIe(t);default:throw new Error(`Unsupported operator ${n}`)}}function iIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Ae.Number:case Ae.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function sIe(t,e){const r=t.args[0].value;switch(t.operator){case Ae.Get:return i=>{const s=t.args;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case Ae.Var:return i=>i.variables[r];case Ae.Has:return i=>{const s=t.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function oIe(t,e){const n=t.operator,r=xh(t.args[0]),i=xh(t.args[1]);switch(n){case Ae.Equal:return s=>r(s)===i(s);case Ae.NotEqual:return s=>r(s)!==i(s);case Ae.LessThan:return s=>r(s)<i(s);case Ae.LessThanOrEqualTo:return s=>r(s)<=i(s);case Ae.GreaterThan:return s=>r(s)>i(s);case Ae.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function aIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case Ae.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case Ae.Between:return s=>{const o=i[0](s),a=i[1](s),l=i[2](s);return o>=a&&o<=l};case Ae.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case Ae.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function lIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case Ae.Divide:return s=>i[0](s)/i[1](s);case Ae.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case Ae.Subtract:return s=>i[0](s)-i[1](s);case Ae.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const l=i[2](s);return o>l?l:o};case Ae.Mod:return s=>i[0](s)%i[1](s);case Ae.Pow:return s=>Math.pow(i[0](s),i[1](s));case Ae.Abs:return s=>Math.abs(i[0](s));case Ae.Floor:return s=>Math.floor(i[0](s));case Ae.Ceil:return s=>Math.ceil(i[0](s));case Ae.Round:return s=>Math.round(i[0](s));case Ae.Sin:return s=>Math.sin(i[0](s));case Ae.Cos:return s=>Math.cos(i[0](s));case Ae.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Ae.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function cIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{for(let s=0;s<n-1;s+=2)if(r[s](i))return r[s+1](i);return r[n-1](i)}}function uIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{const s=r[0](i);for(let o=1;o<n-1;o+=2)if(s===r[o](i))return r[o+1](i);return r[n-1](i)}}function hIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,l;for(let c=2;c<n;c+=2){const u=r[c](i);let h=r[c+1](i);const f=Array.isArray(h);if(f&&(h=VAe(h)),u>=o)return c===2?h:f?fIe(s,o,a,l,u,h):yS(s,o,a,l,u,h);a=u,l=h}return l}}function dIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.ToString:return s=>{const o=i[0](s);return t.args[0].type===Si?LG(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function yS(t,e,n,r,i,s){const o=i-n;if(o===0)return r;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return r+l*(s-r)}function fIe(t,e,n,r,i,s){if(i-n===0)return r;const a=XX(r),l=XX(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[yS(t,e,n,a[0],i,l[0]),yS(t,e,n,a[1],i,l[1]),a[2]+yS(t,e,n,0,i,c),yS(t,e,n,r[3],i,s[3])];return zAe(u)}function pIe(t){return!0}function mIe(t){const e=UG(),n=gIe(t,e),r=uce();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=BG(i.getGeometry())),n(r)}}function _Z(t){const e=UG(),n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=c8(t[o],e);const i=uce(),s=new Array(n);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const c=o.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<n;++c){const u=r[c](i);u&&(s[l]=u,l+=1)}return s.length=l,s}}function gIe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const s=t[i],o="filter"in s?Mp(s.filter,Rs,e):pIe;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=c8(s.style[c],e)}else a=[c8(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<n;++a){const l=r[a].filter;if(l(i)&&!(t[a].else&&o)){o=!0;for(const c of r[a].styles){const u=c(i);u&&s.push(u)}}}return s}}function c8(t,e){const n=Mk(t,"",e),r=Nk(t,"",e),i=yIe(t,e),s=vIe(t,e),o=vl(t,"z-index",e);if(!n&&!r&&!i&&!s&&!T1(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new xn;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(r){const u=r(l);u&&(c=!1),a.setStroke(u)}if(i){const u=i(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Mk(t,e,n){let r;if(e+"fill-pattern-src"in t)r=bIe(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;r=WG(t,e+"fill-color",n)}if(!r)return null;const i=new jn;return function(s){const o=r(s);return o===MG?null:(i.setColor(o),i)}}function Nk(t,e,n){const r=vl(t,e+"stroke-width",n),i=WG(t,e+"stroke-color",n);if(!r&&!i)return null;const s=Wf(t,e+"stroke-line-cap",n),o=Wf(t,e+"stroke-line-join",n),a=hce(t,e+"stroke-line-dash",n),l=vl(t,e+"stroke-line-dash-offset",n),c=vl(t,e+"stroke-miter-limit",n),u=new Mn;return function(h){if(i){const f=i(h);if(f===MG)return null;u.setColor(f)}if(r&&u.setWidth(r(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function yIe(t,e){const n="text-",r=Wf(t,n+"value",e);if(!r)return null;const i=Mk(t,n,e),s=Mk(t,n+"background-",e),o=Nk(t,n,e),a=Nk(t,n+"background-",e),l=Wf(t,n+"font",e),c=vl(t,n+"max-angle",e),u=vl(t,n+"offset-x",e),h=vl(t,n+"offset-y",e),f=nw(t,n+"overflow",e),g=Wf(t,n+"placement",e),y=vl(t,n+"repeat",e),_=Z5(t,n+"scale",e),b=nw(t,n+"rotate-with-view",e),T=vl(t,n+"rotation",e),A=Wf(t,n+"align",e),C=Wf(t,n+"justify",e),I=Wf(t,n+"baseline",e),R=nw(t,n+"keep-upright",e),V=hce(t,n+"padding",e),P=J5(t,n+"declutter-mode"),N=new mc({declutterMode:P});return function(L){if(N.setText(r(L)),i&&N.setFill(i(L)),s&&N.setBackgroundFill(s(L)),o&&N.setStroke(o(L)),a&&N.setBackgroundStroke(a(L)),l&&N.setFont(l(L)),c&&N.setMaxAngle(c(L)),u&&N.setOffsetX(u(L)),h&&N.setOffsetY(h(L)),f&&N.setOverflow(f(L)),g){const O=g(L);if(O!=="point"&&O!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(O)}if(y&&N.setRepeat(y(L)),_&&N.setScale(_(L)),b&&N.setRotateWithView(b(L)),T&&N.setRotation(T(L)),A){const O=A(L);if(O!=="left"&&O!=="center"&&O!=="right"&&O!=="end"&&O!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(O)}if(C){const O=C(L);if(O!=="left"&&O!=="right"&&O!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(O)}if(I){const O=I(L);if(O!=="bottom"&&O!=="top"&&O!=="middle"&&O!=="alphabetic"&&O!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(O)}return V&&N.setPadding(V(L)),R&&N.setKeepUpright(R(L)),N}}function vIe(t,e){return"icon-src"in t?_Ie(t,e):"shape-points"in t?xIe(t,e):"circle-radius"in t?wIe(t,e):null}function _Ie(t,e){const n="icon-",r=n+"src",i=dce(t[r],r),s=i4(t,n+"anchor",e),o=Z5(t,n+"scale",e),a=vl(t,n+"opacity",e),l=i4(t,n+"displacement",e),c=vl(t,n+"rotation",e),u=nw(t,n+"rotate-with-view",e),h=wZ(t,n+"anchor-origin"),f=bZ(t,n+"anchor-x-units"),g=bZ(t,n+"anchor-y-units"),y=kIe(t,n+"color"),_=SIe(t,n+"cross-origin"),b=TIe(t,n+"offset"),T=wZ(t,n+"offset-origin"),A=s4(t,n+"width"),C=s4(t,n+"height"),I=EIe(t,n+"size"),R=J5(t,n+"declutter-mode"),V=new oC({src:i,anchorOrigin:h,anchorXUnits:f,anchorYUnits:g,color:y,crossOrigin:_,offset:b,offsetOrigin:T,height:C,width:A,size:I,declutterMode:R});return function(P){return a&&V.setOpacity(a(P)),l&&V.setDisplacement(l(P)),c&&V.setRotation(c(P)),u&&V.setRotateWithView(u(P)),o&&V.setScale(o(P)),s&&V.setAnchor(s(P)),V}}function xIe(t,e){const n="shape-",r=n+"points",i=n+"radius",s=u8(t[r],r),o=u8(t[i],i),a=Mk(t,n,e),l=Nk(t,n,e),c=Z5(t,n+"scale",e),u=i4(t,n+"displacement",e),h=vl(t,n+"rotation",e),f=nw(t,n+"rotate-with-view",e),g=s4(t,n+"radius2"),y=s4(t,n+"angle"),_=J5(t,n+"declutter-mode"),b=new X5({points:s,radius:o,radius2:g,angle:y,declutterMode:_});return function(T){return a&&b.setFill(a(T)),l&&b.setStroke(l(T)),u&&b.setDisplacement(u(T)),h&&b.setRotation(h(T)),f&&b.setRotateWithView(f(T)),c&&b.setScale(c(T)),b}}function wIe(t,e){const n="circle-",r=Mk(t,n,e),i=Nk(t,n,e),s=vl(t,n+"radius",e),o=Z5(t,n+"scale",e),a=i4(t,n+"displacement",e),l=vl(t,n+"rotation",e),c=nw(t,n+"rotate-with-view",e),u=J5(t,n+"declutter-mode"),h=new ys({radius:5,declutterMode:u});return function(f){return s&&h.setRadius(s(f)),r&&h.setFill(r(f)),i&&h.setStroke(i(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function vl(t,e,n){if(!(e in t))return;const r=Mp(t[e],Ht,n);return function(i){return u8(r(i),e)}}function Wf(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Bs,n);return function(i){return dce(r(i),e)}}function bIe(t,e,n){const r=Wf(t,e+"pattern-src",n),i=xZ(t,e+"pattern-offset",n),s=xZ(t,e+"pattern-size",n),o=WG(t,e+"color",n);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function nw(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Rs,n);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function WG(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Si,n);return function(i){return fce(r(i),e)}}function hce(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Pl,n);return function(i){return aC(r(i),e)}}function i4(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Pl,n);return function(i){const s=aC(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function xZ(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Pl,n);return function(i){return pce(r(i),e)}}function Z5(t,e,n){if(!(e in t))return null;const r=Mp(t[e],Pl|Ht,n);return function(i){return AIe(r(i),e)}}function s4(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function EIe(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return $a(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function SIe(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function wZ(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function bZ(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function TIe(t,e){const n=t[e];if(n!==void 0)return aC(n,e)}function J5(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function kIe(t,e){const n=t[e];if(n!==void 0)return fce(n,e)}function aC(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function dce(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function u8(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function fce(t,e){if(typeof t=="string")return t;const n=aC(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function pce(t,e){const n=aC(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function AIe(t,e){return typeof t=="number"?t:pce(t,e)}const Nu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function EZ(t,e,n){return(function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,c=e?0:s[1]*i,u=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+u,g=t[2]-l/2+u,y=t[1]+c/2+h,_=t[3]-c/2+h;f>g&&(f=(g+f)/2,g=f),y>_&&(y=(_+y)/2,_=y);let b=ri(r[0],f,g),T=ri(r[1],y,_);if(o&&n&&i){const A=30*i;b+=-A*Math.log(1+Math.max(0,f-r[0])/A)+A*Math.log(1+Math.max(0,r[0]-g)/A),T+=-A*Math.log(1+Math.max(0,y-r[1])/A)+A*Math.log(1+Math.max(0,r[1]-_)/A)}return[b,T]})}function CIe(t){return t}function mce(t){return Math.pow(t,3)}function lb(t){return 1-mce(1-t)}function IIe(t){return 3*t*t-2*t*t*t}function PIe(t){return t}function HG(t,e,n,r){const i=Xn(e)/n[0],s=Ms(e)/n[1];return r?Math.min(t,Math.max(i,s)):Math.min(t,Math.min(i,s))}function qG(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),ri(r,n/2,e*2)}function RIe(t,e,n,r){return e=e!==void 0?e:!0,(function(i,s,o,a){if(i!==void 0){const l=t[0],c=t[t.length-1],u=n?HG(l,n,o,r):l;if(a)return e?qG(i,u,c):ri(i,c,u);const h=Math.min(u,i),f=Math.floor(j5(t,h,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}})}function MIe(t,e,n,r,i,s){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(o,a,l,c){if(o!==void 0){const u=i?HG(e,i,l,s):e;if(c)return r?qG(o,u,n):ri(o,n,u);const h=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-h),g=-a*(.5-h)+.5,y=Math.min(u,o),_=Math.floor(Math.log(e/y)/Math.log(t)+g),b=Math.max(f,_),T=e/Math.pow(t,b);return ri(T,n,u)}})}function SZ(t,e,n,r,i){return n=n!==void 0?n:!0,(function(s,o,a,l){if(s!==void 0){const c=r?HG(t,r,a,i):t;return!n||!l?ri(s,e,c):qG(s,c,e)}})}function KG(t){if(t!==void 0)return 0}function TZ(t){if(t!==void 0)return t}function NIe(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function LIe(t){const e=uu(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const OIe=42,YG=256,Z6=0;class md extends Yd{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=xG(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Ele(),e.center&&(e.center=Oi(e.center,this.projection_)),e.extent&&(e.extent=lh(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in Nu)delete n[a];this.setProperties(n,!0);const r=jIe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=DIe(e),s=r.constraint,o=FIe(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-n[3]+n[1]-i[1]),a=s/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Oi(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Oi(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const u=arguments[i];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(i===n){r&&PP(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;i<n;++i){const u=arguments[i],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||IIe,callback:r};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=Sg(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}$Ie(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Cs.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Cs.ANIMATING]>0}getInteracting(){return this.hints_[Cs.INTERACTING]>0}cancelAnimations(){this.setHint(Cs.ANIMATING,-this.hints_[Cs.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&PP(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],g=l.sourceCenter[1],y=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=f+h*(y-f),T=g+h*(_-g);this.targetCenter_=[b,T]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?Sg(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Cs.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&PP(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],mG(r,e-this.getRotation()),Rke(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-i[0])/s,a=n[1]-e*(n[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&I1(e,this.getProjection())}getCenterInternal(){return this.get(Nu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return bG(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();ur(n,"The view center is not defined");const r=this.getResolution();ur(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ur(i!==void 0,"The view rotation is not defined"),W3(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Nu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(lh(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=Xn(e)/n[0],i=Ms(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(s){return n/Math.pow(e,s*i)})}getRotation(){return this.get(Nu.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/n;return(function(o){return Math.log(r/o)/n/s})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=J6(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const s=j5(this.resolutions_,e,1);n=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=ri(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ri(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(ur(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ur(!sb(e),"Cannot fit empty extent provided as `geometry`");const i=lh(e,this.getProjection());r=iZ(i)}else if(e.getType()==="Circle"){const i=lh(e.getExtent(),this.getProjection());r=iZ(i),r.rotate(this.getRotation(),vh(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=s.length;h<f;h+=o){const g=s[h]*r-s[h+1]*i,y=s[h]*i+s[h+1]*r;a=Math.min(a,g),l=Math.min(l,y),c=Math.max(c,g),u=Math.max(u,y)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=vh(a);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const g=f[0]*h-f[1]*u,y=f[1]*h+f[0]*u,_=this.getConstrainedCenter([g,y],l),b=n.callback?n.callback:bk;n.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:n.duration,easing:n.easing},b):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),PP(b,!0))}centerOn(e,n,r){this.centerOnInternal(Oi(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(J6(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=J6(e,i,[a[0]/2+o[3],a[1]/2+o[0]],n,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=I1(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Oi(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Oi(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Oi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(Nu.ROTATION)!==i&&this.set(Nu.ROTATION,i),this.get(Nu.RESOLUTION)!==o&&(this.set(Nu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Nu.CENTER)||!Ra(this.get(Nu.CENTER),a))&&this.set(Nu.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Ra(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:lb,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Cs.INTERACTING,1)}endInteraction(e,n,r){r=r&&Oi(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(Cs.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function PP(t,e){setTimeout(function(){t(e)},0)}function DIe(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return EZ(t.extent,t.constrainOnlyCenter,n)}const e=xG(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,EZ(n,!1,!1)}return CIe}function jIe(t){let e,n,r,o=t.minZoom!==void 0?t.minZoom:Z6,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=xG(t.projection,"EPSG:3857"),g=f.getExtent();let y=t.constrainOnlyCenter,_=t.extent;if(!c&&!_&&f.isGlobal()&&(y=!1,_=g),t.resolutions!==void 0){const b=t.resolutions;n=b[o],r=b[a]!==void 0?b[a]:b[b.length-1],t.constrainResolution?e=RIe(b,u,!y&&_,h):e=SZ(n,r,u,!y&&_,h)}else{const T=(g?Math.max(Xn(g),Ms(g)):360*s2.degrees/f.getMetersPerUnit())/YG/Math.pow(2,Z6),A=T/Math.pow(2,28-Z6);n=t.maxResolution,n!==void 0?o=0:n=T/Math.pow(l,o),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(l,a):r=T/Math.pow(l,a):r=A),a=o+Math.floor(Math.log(n/r)/Math.log(l)),r=n/Math.pow(l,a-o),t.constrainResolution?e=MIe(l,n,r,u,!y&&_,h):e=SZ(n,r,u,!y&&_,h)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:l}}function FIe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?LIe():n===!1?TZ:typeof n=="number"?NIe(n):TZ}return KG}function $Ie(t){return!(t.sourceCenter&&t.targetCenter&&!Ra(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function J6(t,e,n,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*r,l+=(n[1]-e[1]/2)*r,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const kr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class gce extends Yd{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[kr.OPACITY]=e.opacity!==void 0?e.opacity:1,ur(typeof n[kr.OPACITY]=="number","Layer opacity must be a number"),n[kr.VISIBLE]=e.visible!==void 0?e.visible:!0,n[kr.Z_INDEX]=e.zIndex,n[kr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[kr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[kr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[kr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ri(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return Sn()}getLayerStatesArray(e){return Sn()}getExtent(){return this.get(kr.EXTENT)}getMaxResolution(){return this.get(kr.MAX_RESOLUTION)}getMinResolution(){return this.get(kr.MIN_RESOLUTION)}getMinZoom(){return this.get(kr.MIN_ZOOM)}getMaxZoom(){return this.get(kr.MAX_ZOOM)}getOpacity(){return this.get(kr.OPACITY)}getSourceState(){return Sn()}getVisible(){return this.get(kr.VISIBLE)}getZIndex(){return this.get(kr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(kr.EXTENT,e)}setMaxResolution(e){this.set(kr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(kr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(kr.MAX_ZOOM,e)}setMinZoom(e){this.set(kr.MIN_ZOOM,e)}setOpacity(e){ur(typeof e=="number","Layer opacity must be a number"),this.set(kr.OPACITY,e)}setVisible(e){this.set(kr.VISIBLE,e)}setZIndex(e){this.set(kr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class lC extends gce{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(kr.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(kr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ni(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Yn(e,En.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof md?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return XG(i,n.viewState)&&(!s||ca(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];const n=this.getSource()?.getAttributions();if(!n)return[];const r=e instanceof md?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(kr.MAP,e)}getMapInternal(){return this.get(kr.MAP)}setMap(e){this.mapPrecomposeKey_&&(ni(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ni(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Yn(e,uo.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Yn(this,En.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);ur(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(kr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function XG(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}const kZ={RENDER_ORDER:"renderOrder"};class Q5 extends lC{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(kZ.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new rce(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(kZ.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?ice:e;const n=VIe(e);this.styleFunction_=e===null?void 0:SCe(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function VIe(t){if(t===void 0)return ice;if(!t)return null;if(typeof t=="function"||t instanceof xn)return t;if(!Array.isArray(t))return _Z([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof xn){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof xn))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in n){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return mIe(i)}return _Z(t)}class Ol extends Q5{constructor(e){super(e)}createRenderer(){return new BCe(this)}}const um={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Gm extends Cc{constructor(e,n){super(e),this.layer=n}}const Q6={LAYERS:"layers"};let eL=class yce extends gce{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Q6.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Fa(r.slice(),{unique:!0}):ur(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Fa(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ni),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Yn(e,Ps.ADD,this.handleLayersAdd_,this),Yn(e,Ps.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ni);lv(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const s=n[r];this.registerLayerListeners_(s),this.dispatchEvent(new Gm(um.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const n=[Yn(e,r2.PROPERTYCHANGE,this.handleLayerChange_,this),Yn(e,En.CHANGE,this.handleLayerChange_,this)];e instanceof yce&&n.push(Yn(e,um.ADDLAYER,this.handleLayerGroupAdd_,this),Yn(e,um.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[en(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Gm(um.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Gm(um.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Gm(um.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=en(n);this.listenerKeys_[r].forEach(ni),delete this.listenerKeys_[r],this.dispatchEvent(new Gm(um.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(Q6.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Gm(um.REMOVELAYER,r[i]))}this.set(Q6.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=n.length;o<a;o++){const l=n[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=ap(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}};const hn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function vce(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function h8(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const o4=34962,ZG=34963,zIe=35044,ej=35048,GIe=5121,UIe=5123,BIe=5125,_ce=5126,AZ=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function WIe(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!CAe},e);const n=AZ.length;for(let r=0;r<n;++r)try{const i=t.getContext(AZ[r],e);if(i)return i}catch{}return null}const HIe={STATIC_DRAW:zIe};class tj{constructor(e,n){this.array_=null,this.type_=e,ur(e===o4||e===ZG,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:HIe.STATIC_DRAW}ofSize(e){return this.array_=new(RP(this.type_))(e),this}fromArray(e){return this.array_=RP(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(RP(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=RP(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function RP(t){switch(t){case o4:return Float32Array;case ZG:return Uint32Array;default:return Float32Array}}const MP={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},qIe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,KIe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class CZ{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||qIe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||KIe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,c=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,c),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=en(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const Ef={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Io={UNSIGNED_BYTE:GIe,UNSIGNED_SHORT:UIe,UNSIGNED_INT:BIe,FLOAT:_ce},a4={};function IZ(t){return"shared/"+t}let PZ=0;function YIe(){const t="unique/"+PZ;return PZ+=1,t}function XIe(t){let e=a4[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:WIe(n)},a4[t]=e}return e.users+=1,e.context}function ZIe(t){const e=a4[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete a4[t]}class JIe extends JA{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?IZ(e.canvasCacheKey):YIe(),this.gl_=XIe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(MP.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(MP.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Hs(),this.offsetScaleMatrix_=Hs(),this.tmpMat4_=vce(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new CZ({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new CZ({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===IZ(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return ur(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const n=this.gl_,r=en(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=en(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(MP.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(MP.RESTORED,this.boundHandleWebGLContextRestored_),ZIe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(e,n,r){const i=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-e,a=e*s;r.drawElements(r.TRIANGLES,o,i,a)}drawElementsInstanced(e,n,r){const i=this.gl_;this.getExtension("OES_element_index_uint");const s=this.getInstancedRenderingExtension_(),o=i.UNSIGNED_INT,a=4,l=n-e,c=e*a;s.drawElementsInstancedANGLE(i.TRIANGLES,l,o,c,r);for(let u=0;u<this.maxAttributeCount_;u++)s.vertexAttribDivisorANGLE(u,0)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(Ef.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ef.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Ef.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Ef.PIXEL_RATIO,i),this.setUniformFloatVec2(Ef.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(Ef.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(Ef.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(Ef.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,h8(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=en(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=en(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return gu(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,n,r,i,s,o){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,n,r,!1,i,s),o&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,n){const r=QIe(e);let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.name&&this.enableAttributeArray_(o.name,o.size,o.type||_ce,r,i,n),i+=o.size*xce(o.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){lv(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,c=0,u=s.RGBA,h=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,n):n?s.texImage2D(s.TEXTURE_2D,a,l,u,h,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,null),r}}function QIe(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*xce(r.type)}return e}function xce(t){switch(t){case Io.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Io.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class JG extends QA{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(En.CHANGE)}release(){this.setState(hn.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==hn.EMPTY){if(this.state!==hn.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Sn()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:mce(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function d8(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const ePe=new Error("disposed"),tPe=[256,256];class RZ extends JG{constructor(e){const n=hn.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=d8(this.data_);return e?[e.width,e.height]:tPe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==hn.IDLE&&this.state!==hn.ERROR)return;this.state=hn.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=hn.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=hn.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(ePe),this.controller_=null),super.disposeInternal()}}class wce extends JG{constructor(e,n,r,i,s,o){super(e,n,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,hc?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=hn.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=hn.ERROR,this.unlistenImage_(),this.image_=nPe(),this.changed()}handleImageLoad_(){if(hc)this.state=hn.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=hn.LOADED:this.state=hn.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==hn.ERROR&&(this.state=hn.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==hn.IDLE&&(this.state=hn.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=GAe(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function nPe(){const t=Ls(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}let nj;const rw=[];function MZ(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function rj(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function rPe(){if(nj===void 0){const t=Ls(6,6,rw);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",MZ(t,4,5,4,0),MZ(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;nj=rj(e,0)||rj(e,4)||rj(e,8),q5(t),rw.push(t.canvas)}return nj}function l4(t,e,n,r){const i=ab(n,e,t);let s=X3(e,r,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||k1(l,i)){const c=X3(t,s,i)/s;isFinite(c)&&c>0&&(s/=c)}return s}function iPe(t,e,n,r){const i=vh(n);let s=l4(t,e,i,r);return(!isFinite(s)||s<=0)&&fG(n,function(o){return s=l4(t,e,o,r),isFinite(s)&&s>0}),s}function bce(t,e,n,r,i,s,o,a,l,c,u,h,f,g){const y=Ls(Math.round(n*t),Math.round(n*e),rw);if(h||(y.imageSmoothingEnabled=!1),l.length===0)return y.canvas;y.scale(n,n);function _(R){return Math.round(R*n)/n}y.globalCompositeOperation="lighter";const b=Wa();l.forEach(function(R,V,P){dG(b,R.extent)});let T;const A=n/r,C=(h?1:1+Math.pow(2,-24))/A;(!f||l.length!==1||c!==0)&&(T=Ls(Math.round(Xn(b)*A),Math.round(Ms(b)*A),rw),h||(T.imageSmoothingEnabled=!1),l.forEach(function(R,V,P){if(R.image.width>0&&R.image.height>0){if(R.clipExtent){T.save();const G=(R.clipExtent[0]-b[0])*A,U=-(R.clipExtent[3]-b[3])*A,ue=Xn(R.clipExtent)*A,be=Ms(R.clipExtent)*A;T.rect(h?G:Math.round(G),h?U:Math.round(U),h?ue:Math.round(G+ue)-Math.round(G),h?be:Math.round(U+be)-Math.round(U)),T.clip()}const N=(R.extent[0]-b[0])*A,L=-(R.extent[3]-b[3])*A,O=Xn(R.extent)*A,F=Ms(R.extent)*A;T.drawImage(R.image,c,c,R.image.width-2*c,R.image.height-2*c,h?N:Math.round(N),h?L:Math.round(L),h?O:Math.round(N+O)-Math.round(N),h?F:Math.round(L+F)-Math.round(L)),R.clipExtent&&T.restore()}}));const I=uv(o);return a.getTriangles().forEach(function(R,V,P){const N=R.source,L=R.target;let O=N[0][0],F=N[0][1],G=N[1][0],U=N[1][1],ue=N[2][0],be=N[2][1];const ze=_((L[0][0]-I[0])/s),Ce=_(-(L[0][1]-I[1])/s),de=_((L[1][0]-I[0])/s),Le=_(-(L[1][1]-I[1])/s),xe=_((L[2][0]-I[0])/s),Z=_(-(L[2][1]-I[1])/s),W=O,ne=F;O=0,F=0,G-=W,U-=ne,ue-=W,be-=ne;const se=[[G,U,0,0,de-ze],[ue,be,0,0,xe-ze],[0,0,G,U,Le-Ce],[0,0,ue,be,Z-Ce]],Q=Pke(se);if(!Q)return;if(y.save(),y.beginPath(),rPe()||!h){y.moveTo(de,Le);const Ke=4,Ye=ze-de,ke=Ce-Le;for(let Ee=0;Ee<Ke;Ee++)y.lineTo(de+_((Ee+1)*Ye/Ke),Le+_(Ee*ke/(Ke-1))),Ee!=Ke-1&&y.lineTo(de+_((Ee+1)*Ye/Ke),Le+_((Ee+1)*ke/(Ke-1)));y.lineTo(xe,Z)}else y.moveTo(de,Le),y.lineTo(ze,Ce),y.lineTo(xe,Z);y.clip(),y.transform(Q[0],Q[2],Q[1],Q[3],ze,Ce),y.translate(b[0]-W,b[3]-ne);let me;if(T)me=T.canvas,y.scale(C,-C);else{const Ke=l[0],Ye=Ke.extent;me=Ke.image,y.scale(Xn(Ye)/me.width,-Ms(Ye)/me.height)}y.drawImage(me,0,0),y.restore()}),T&&(q5(T),rw.push(T.canvas)),u&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,a.getTriangles().forEach(function(R,V,P){const N=R.target,L=(N[0][0]-I[0])/s,O=-(N[0][1]-I[1])/s,F=(N[1][0]-I[0])/s,G=-(N[1][1]-I[1])/s,U=(N[2][0]-I[0])/s,ue=-(N[2][1]-I[1])/s;y.beginPath(),y.moveTo(F,G),y.lineTo(L,O),y.lineTo(U,ue),y.closePath(),y.stroke()}),y.restore()),y.canvas}const sPe=10,NZ=.25;class Ece{constructor(e,n,r,i,s,o,a){this.sourceProj_=e,this.targetProj_=n;let l={};const c=a?e8(C=>Ji(a,ab(C,this.targetProj_,this.sourceProj_))):Sk(this.targetProj_,this.sourceProj_);this.transformInv_=function(C){const I=C[0]+"/"+C[1];return l[I]||(l[I]=c(C)),l[I]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Xn(i)>=Xn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xn(this.targetProj_.getExtent()):null;const u=uv(r),h=V5(r),f=$5(r),g=F5(r),y=this.transformInv_(u),_=this.transformInv_(h),b=this.transformInv_(f),T=this.transformInv_(g),A=sPe+(o?Math.max(0,Math.ceil(Math.log2(q$(r)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,g,y,_,b,T,A),this.wrapsXInSource_){let C=1/0;this.triangles_.forEach(function(I,R,V){C=Math.min(C,I.source[0][0],I.source[1][0],I.source[2][0])}),this.triangles_.forEach(I=>{if(Math.max(I.source[0][0],I.source[1][0],I.source[2][0])-C>this.sourceWorldWidth_/2){const R=[[I.source[0][0],I.source[0][1]],[I.source[1][0],I.source[1][1]],[I.source[2][0],I.source[2][1]]];R[0][0]-C>this.sourceWorldWidth_/2&&(R[0][0]-=this.sourceWorldWidth_),R[1][0]-C>this.sourceWorldWidth_/2&&(R[1][0]-=this.sourceWorldWidth_),R[2][0]-C>this.sourceWorldWidth_/2&&(R[2][0]-=this.sourceWorldWidth_);const V=Math.min(R[0][0],R[1][0],R[2][0]);Math.max(R[0][0],R[1][0],R[2][0])-V<this.sourceWorldWidth_/2&&(I.source=R)}})}l={}}addTriangle_(e,n,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,n,r]})}addQuad_(e,n,r,i,s,o,a,l,c){const u=Ia([s,o,a,l]),h=this.sourceWorldWidth_?Xn(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1;let y=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=Ia([e,n,r,i]);y=Xn(b)/this.targetWorldWidth_>NZ||y}!g&&this.sourceProj_.isGlobal()&&h&&(y=h>NZ||y)}if(!y&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ca(u,this.maxSourceExtent_))return;let _=0;if(!y&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)y=!0;else if(_=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!y){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(b);let A;g?A=(Sg(s[0],f)+Sg(a[0],f))/2-Sg(T[0],f):A=(s[0]+a[0])/2-T[0];const C=(s[1]+a[1])/2-T[1];y=A*A+C*C>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const b=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(b),A=[(i[0]+e[0])/2,(i[1]+e[1])/2],C=this.transformInv_(A);this.addQuad_(e,n,b,A,s,o,T,C,c-1),this.addQuad_(A,b,r,i,C,T,a,l,c-1)}else{const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(b),A=[(r[0]+i[0])/2,(r[1]+i[1])/2],C=this.transformInv_(A);this.addQuad_(e,b,A,i,s,T,C,l,c-1),this.addQuad_(b,n,r,A,T,o,a,C,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(_&11)==0&&this.addTriangle_(e,r,i,s,a,l),(_&14)==0&&this.addTriangle_(e,r,n,s,a,o),_&&((_&13)==0&&this.addTriangle_(n,i,e,o,l,s),(_&7)==0&&this.addTriangle_(n,i,r,o,l,a))}calculateSourceExtent(){const e=Wa();return this.triangles_.forEach(function(n,r,i){const s=n.source;hT(e,s[0]),hT(e,s[1]),hT(e,s[2])}),e}getTriangles(){return this.triangles_}}const Sce=.5;class Tce extends JG{constructor(e,n,r,i,s,o,a,l,c,u,h,f){super(s,hn.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const b=y?ap(g,y):g;if(q$(b)===0){this.state=hn.EMPTY;return}const T=e.getExtent();T&&(_?_=ap(_,T):_=T);const A=i.getResolution(this.wrappedTileCoord_[0]),C=iPe(e,r,b,A);if(!isFinite(C)||C<=0){this.state=hn.EMPTY;return}const I=u!==void 0?u:Sce;if(this.triangulation_=new Ece(e,r,b,_,C*I,A),this.triangulation_.getTriangles().length===0){this.state=hn.EMPTY;return}this.sourceZ_=n.getZForResolution(C);let R=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(R[1]=ri(R[1],_[1],_[3]),R[3]=ri(R[3],_[1],_[3])):R=ap(R,_)),!q$(R))this.state=hn.EMPTY;else{let V=0,P=0;e.canWrapX()&&(V=Xn(T),P=Math.floor((R[0]-T[0])/V)),fle(R.slice(),e,!0).forEach(L=>{const O=n.getTileRangeForExtentAndZ(L,this.sourceZ_);for(let F=O.minX;F<=O.maxX;F++)for(let G=O.minY;G<=O.maxY;G++){const U=c(this.sourceZ_,F,G,a);if(U){const ue=P*V;this.sourceTiles_.push({tile:U,offset:ue})}}++P}),this.sourceTiles_.length===0&&(this.state=hn.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==hn.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=n.offset,i[2]+=n.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=n.offset,s[2]+=n.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=hn.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=bce(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=hn.LOADED}this.changed()}load(){if(this.state==hn.IDLE){this.state=hn.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==hn.IDLE||r==hn.LOADING){e++;const i=Yn(n,En.CHANGE,s=>{const o=n.getState();(o==hn.LOADED||o==hn.ERROR||o==hn.EMPTY)&&(ni(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==hn.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ni),this.sourcesListenerKeys_=null}release(){this.canvas_&&(q5(this.canvas_.getContext("2d")),rw.push(this.canvas_),this.canvas_=null),super.release()}}class QG{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function p_(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new QG(t,e,n,r)}class LZ{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof JA&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return ur(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return ur(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){ur(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function c4(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function oPe(t,e,n){return t+"/"+e+"/"+n}function dM(t,e,n,r,i){return`${en(t)},${e},${oPe(n,r,i)}`}function kce(t){return aPe(t[0],t[1],t[2])}function aPe(t,e,n){return(e<<t)+n}function lPe(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(r,i):!0}class eU extends lce{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Hs(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(kr.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(uo.PRECOMPOSE)){const i=new fT(uo.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(uo.POSTCOMPOSE)){const i=new fT(uo.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof eU)){n=!0;continue}const u=l.getClassName();if((n||u!==i)&&(r+=1,n=!1),i=u,c===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new JIe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(kr.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){gu(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new fT(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(uo.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(uo.POSTRENDER,e,n)}}const ij={TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight"};class cPe{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function uPe(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function Tg(t){const e=t.toString();return e.includes(".")?e:e+".0"}function tU(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(Tg).join(", ")})`}function fM(t){const e=yu(t),n=e.length>3?e[3]:1;return tU([e[0]/255,e[1]/255,e[2]/255,n])}function hPe(t){const e=$a(t);return tU(e)}const sj={};let dPe=0;function Lk(t){return t in sj||(sj[t]=dPe++),sj[t]}function Hf(t){return Tg(Lk(t))}function nU(t){return"u_var_"+t}function Ace(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const oj="getBandValue",fPe="u_paletteTextures",Cce="featureId",Ice="geometryType",f8=-9999999;function pPe(t,e,n,r){const i=fo(t,e,n);return rU(i,e,r)}function _r(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=rU(n.args[o],r,e);return t(s,e)}}const mPe={[Ae.Get]:(t,e)=>{const r=e.args[0].value;r in t.properties||(t.properties[r]={name:r,type:e.type});let s="a_prop_"+r;return ad(e.type,Rs)&&(s=`(${s} > 0.0)`),s},[Ae.Id]:t=>(t.featureId=!0,"a_"+Cce),[Ae.GeometryType]:t=>(t.geometryType=!0,"a_"+Ice),[Ae.LineMetric]:()=>"currentLineMetric",[Ae.Var]:(t,e)=>{const r=e.args[0].value;r in t.variables||(t.variables[r]={name:r,type:e.type});let s=nU(r);return ad(e.type,Rs)&&(s=`(${s} > 0.0)`),s},[Ae.Has]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${Tg(f8)})`},[Ae.Resolution]:()=>"u_resolution",[Ae.Zoom]:()=>"u_zoom",[Ae.Time]:()=>"u_time",[Ae.Any]:_r(t=>`(${t.join(" || ")})`),[Ae.All]:_r(t=>`(${t.join(" && ")})`),[Ae.Not]:_r(([t])=>`(!${t})`),[Ae.Equal]:_r(([t,e])=>`(${t} == ${e})`),[Ae.NotEqual]:_r(([t,e])=>`(${t} != ${e})`),[Ae.GreaterThan]:_r(([t,e])=>`(${t} > ${e})`),[Ae.GreaterThanOrEqualTo]:_r(([t,e])=>`(${t} >= ${e})`),[Ae.LessThan]:_r(([t,e])=>`(${t} < ${e})`),[Ae.LessThanOrEqualTo]:_r(([t,e])=>`(${t} <= ${e})`),[Ae.Multiply]:_r(t=>`(${t.join(" * ")})`),[Ae.Divide]:_r(([t,e])=>`(${t} / ${e})`),[Ae.Add]:_r(t=>`(${t.join(" + ")})`),[Ae.Subtract]:_r(([t,e])=>`(${t} - ${e})`),[Ae.Clamp]:_r(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[Ae.Mod]:_r(([t,e])=>`mod(${t}, ${e})`),[Ae.Pow]:_r(([t,e])=>`pow(${t}, ${e})`),[Ae.Abs]:_r(([t])=>`abs(${t})`),[Ae.Floor]:_r(([t])=>`floor(${t})`),[Ae.Ceil]:_r(([t])=>`ceil(${t})`),[Ae.Round]:_r(([t])=>`floor(${t} + 0.5)`),[Ae.Sin]:_r(([t])=>`sin(${t})`),[Ae.Cos]:_r(([t])=>`cos(${t})`),[Ae.Atan]:_r(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[Ae.Sqrt]:_r(([t])=>`sqrt(${t})`),[Ae.Match]:_r(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],o=t[i+1];r=`(${e} == ${s} ? ${o} : ${r||n})`}return r}),[Ae.Between]:_r(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[Ae.Interpolate]:_r(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let c;t===Tg(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[Ae.Case]:_r(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[Ae.In]:_r(([t,...e],n)=>{const r=uPe("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[Ae.Array]:_r(t=>`vec${t.length}(${t.join(", ")})`),[Ae.Color]:_r(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[Ae.Band]:_r(([t,e,n],r)=>{if(!(oj in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${ij.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[oj]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${ij.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${ij.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${oj}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[Ae.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let c=0;c<r.length;c++){const u=r[c].value,h=yu(u),f=c*4;s[f]=h[0],s[f+1]=h[1],s[f+2]=h[2],s[f+3]=h[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${fPe}[${t.paletteTextures.length}]`,a=new cPe(o,s);t.paletteTextures.push(a);const l=rU(n,Ht,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function rU(t,e,n){if(t instanceof cce){const r=mPe[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&Ht)>0)return Tg(t.value);if((t.type&Rs)>0)return t.value.toString();if((t.type&Bs)>0)return Hf(t.value.toString());if((t.type&Si)>0)return fM(t.value);if((t.type&Pl)>0)return tU(t.value);if((t.type&au)>0)return hPe(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Rx(e)})`)}function gPe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const OZ=.985;function In(t,e,n){const r=UG();return pPe(e,n,r,t)}function yPe(t){const e=yu(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const vPe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function iU(t){return t===Si||t===au?2:t===Pl?4:1}function p8(t){const e=iU(t);return e>1?`vec${e}`:"float"}function Pce(t,e){for(const n in e.variables){const r=e.variables[n],i=nU(r.name);let s=p8(r.type);r.type===Si&&(s="vec4"),t.addUniform(i,s)}for(const n in e.properties){const r=e.properties[n],i=p8(r.type),s=`a_prop_${r.name}`;r.type===Si?t.addAttribute(s,i,`unpackColor(${s})`,"vec4"):t.addAttribute(s,i)}for(const n in e.functions)t.addVertexShaderFunction(e.functions[n]),t.addFragmentShaderFunction(e.functions[n])}function Rce(t,e){const n={};for(const r in t.variables){const i=t.variables[r],s=nU(i.name);n[s]=()=>{const o=e[i.name];if(typeof o=="number")return o;if(typeof o=="boolean")return o?1:0;if(i.type===Si){const a=[...yu(o||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??=1,a}return typeof o=="string"?Lk(o):o}}return n}function Mce(t){const e={};for(const n in t.properties){const r=t.properties[n],i=s=>{const o=s.get(r.name);return r.type===Si?yPe([...yu(o||"#eee")]):typeof o=="string"?Lk(o):typeof o=="boolean"?o?1:0:o};e[`prop_${r.name}`]={size:iU(r.type),callback:i}}return e}const m_=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${vPe}
`,g_=gPe();class Nce{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Tg(g_["circle-radius"])} + ${Tg(g_["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=fM(g_["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Tg(g_["stroke-width"]),this.strokeColorExpression_=fM(g_["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Hf("round"),this.strokeJoinExpression_=Hf("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=fM(g_["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,n){return this.uniforms_.push({name:e,type:n}),this}addAttribute(e,n,r,i){return this.attributes_.push({name:e,type:n,varyingName:e.replace(/^a_/,"v_"),varyingType:i??n,varyingExpression:r??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${OZ} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${OZ}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Hf("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Hf("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Hf("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Hf("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class u4{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=en(e),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(e){const n=en(e),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(e){const n=en(e),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(e,n){const r=e.getType();switch(r){case"GeometryCollection":{const i=e.getGeometriesArray();for(const s of i)this.addGeometry_(s,n);break}case"MultiPolygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEndss(),n,en(n),i.getStride());break}case"MultiLineString":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,en(n),i.getStride());break}case"MultiPoint":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),i.getStride());break}case"Polygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,en(n),i.getStride());break}case"Point":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),i.getStride());break}case"LineString":case"LinearRing":{const i=e,s=i.getStride();this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),s,i.getLayout?.());break}}}addCoordinates_(e,n,r,i,s,o,a){let l;switch(e){case"MultiPolygon":{const c=r;for(let u=0,h=c.length;u<h;u++){let f=c[u];const g=u>0?c[u-1]:null,y=g?g[g.length-1]:0,_=f[f.length-1];f=y>0?f.map(b=>b-y):f,this.addCoordinates_("Polygon",n.slice(y,_),f,i,s,o,a)}break}case"MultiLineString":{const c=r;for(let u=0,h=c.length;u<h;u++){const f=u>0?c[u-1]:0;this.addCoordinates_("LineString",n.slice(f,c[u]),null,i,s,o,a)}break}case"MultiPoint":for(let c=0,u=n.length;c<u;c+=o)this.addCoordinates_("Point",n.slice(c,c+2),null,i,s,null,null);break;case"Polygon":{const c=r;if(i instanceof yl){const f=Qle(n,c);if(f.length>1){this.addCoordinates_("MultiPolygon",n,f,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const u=r.length,h=r.map((f,g,y)=>g>0?(f-y[g-1])/o:f/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(_Pe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(h),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=u;for(let f=0,g=c.length;f<g;f++){const y=f>0?c[f-1]:0;this.addCoordinates_("LinearRing",n.slice(y,c[f]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(xPe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}removeRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e,n){if(!this.uidToRef_.get(en(e)))return;this.removeFeature(e);let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}removeFeature(e){let n=this.clearFeatureEntryInPointBatch_(e);n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.removeRef_(n.ref,en(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const n=new u4;n.globalCounter_=this.globalCounter_,n.uidToRef_=this.uidToRef_,n.refToFeature_=this.refToFeature_;let r=!0;for(const i of this.refToFeature_.values())e(i)&&(n.addFeature(i),r=!1);return r?new u4:n}}function _Pe(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function xPe(t,e,n){return e===3&&n==="XYM"?t:e===4?t.filter((r,i)=>i%e!==2):e===3?t.map((r,i)=>i%e!==2?r:0):new Array(t.length*1.5).fill(0).map((r,i)=>i%3===2?0:t[Math.round(i/1.5)])}function wPe(){const t='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function I(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const z=[],B={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function P(t,e,n,r,x){const o=t[e++],i=t[e++],f=z;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),B.instanceAttributesPosition=u,B}function N(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=E(f,[...l]),p=E(f,[...c]);function v(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}let b=-1,M=-1,m=s;const A=null!==x;if(null!==r){b=v(h,p,E(f,[...[t[r],t[r+1]]])),Math.cos(b)<=.985&&(m+=Math.tan((b-Math.PI)/2))}if(A){M=v(p,h,E(f,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((Math.PI-M)/2))}const g=Math.pow(2,24),Z=u%g,d=Math.floor(u/g)*g;return o.push(l[0],l[1],a,c[0],c[1],y,b,M,Z,d,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:m}}function R(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const S="GENERATE_POLYGON_BUFFERS",T="GENERATE_POINT_BUFFERS",_="GENERATE_LINE_STRING_BUFFERS",O=self;O.onmessage=t=>{const e=t.data;switch(e.type){case T:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=P(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);O.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case _:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(I(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=N(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);O.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case S:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=R(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);O.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}const aj={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function bPe(t,e){e=e||[];const n=256,r=n-1,i=Math.floor(t/n/n/n)/r,s=Math.floor(t/n/n)%n/r,o=Math.floor(t/n)%n/r,a=t%n/r;return e[0]=i*256*255+s*255,e[1]=o*256*255+a*255,e}function EPe(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function sU(t,e,n,r){let i=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);let l=a?.[0]??a;l===f8&&console.warn('The "has" operator might return false positives.'),l===void 0?l=f8:l===null&&(l=0),t[r+i++]=l,!(!o.size||o.size===1)&&(t[r+i++]=a[1],!(o.size<3)&&(t[r+i++]=a[2],!(o.size<4)&&(t[r+i++]=a[3])))}return i}function tL(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function SPe(t,e,n,r){const i=(2+tL(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++)s[0]=l.flatCoordss[c][0],s[1]=l.flatCoordss[c][1],Ji(r,s),e[o++]=s[0],e[o++]=s[1],o+=sU(e,n,l,o)}return e}function TPe(t,e,n,r){const i=3*t.verticesCount+(1+tL(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,bd(l.flatCoordss[c],0,s.length,3,r,s,3),o+=sU(e,n,l,o),e[o++]=s.length/3;for(let h=0,f=s.length;h<f;h+=3)e[o++]=s[h],e[o++]=s[h+1],e[o++]=s[h+2]}}return e}function kPe(t,e,n,r){const i=2*t.verticesCount+(1+tL(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,bd(l.flatCoordss[c],0,s.length,2,r,s),o+=sU(e,n,l,o),e[o++]=l.ringsVerticesCounts[c].length;for(let h=0,f=l.ringsVerticesCounts[c].length;h<f;h++)e[o++]=l.ringsVerticesCounts[c][h];for(let h=0,f=s.length;h<f;h+=2)e[o++]=s[h],e[o++]=s[h+1]}}return e}function h4(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function oU(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=In(n,t[`${r}radius`],Ht);if(`${r}radius2`in t){const s=In(n,t[`${r}radius2`],Ht);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${In(n,t[`${r}stroke-width`],Ht)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=In(n,t[`${r}scale`],au);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(In(n,t[`${r}displacement`],Pl)),`${r}rotation`in t&&e.setSymbolRotationExpression(In(n,t[`${r}rotation`],Ht)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function Lce(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function aU(t,e,n,r,i){const s=new Image;s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],ur(typeof t[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),s.src=t[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`u_texture${i}_size`,"vec2");const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,e.addUniform(`u_texture${i}`,"sampler2D"),o}function lU(t,e,n,r,i){let s=In(n,t[`${e}offset`],au);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function APe(t,e,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,oU(t,e,r,"circle-");let i=null;"circle-opacity"in t&&(i=In(r,t["circle-opacity"],Ht));let s="coordsPx";"circle-scale"in t&&(s=`coordsPx / ${In(r,t["circle-scale"],au)}`);let o=null;"circle-fill-color"in t&&(o=In(r,t["circle-fill-color"],Si));let a=null;"circle-stroke-color"in t&&(a=In(r,t["circle-stroke-color"],Si));let l=In(r,t["circle-radius"],Ht),c=null;"circle-stroke-width"in t&&(c=In(r,t["circle-stroke-width"],Ht),l=`(${l} + ${c} * 0.5)`);const u=`circleDistanceField(${s}, ${l})`,h=Lce(u,o,a,c,i);e.setSymbolColorExpression(h)}function CPe(t,e,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,oU(t,e,r,"shape-");let i=null;"shape-opacity"in t&&(i=In(r,t["shape-opacity"],Ht));let s="coordsPx";"shape-scale"in t&&(s=`coordsPx / ${In(r,t["shape-scale"],au)}`);let o=null;"shape-fill-color"in t&&(o=In(r,t["shape-fill-color"],Si));let a=null;"shape-stroke-color"in t&&(a=In(r,t["shape-stroke-color"],Si));let l=null;"shape-stroke-width"in t&&(l=In(r,t["shape-stroke-width"],Ht));const c=In(r,t["shape-points"],Ht);let u="0.";"shape-angle"in t&&(u=In(r,t["shape-angle"],Ht));let h,f=In(r,t["shape-radius"],Ht);if(l!==null&&(f=`${f} + ${l} * 0.5`),"shape-radius2"in t){let y=In(r,t["shape-radius2"],Ht);l!==null&&(y=`${y} + ${l} * 0.5`),h=`starDistanceField(${s}, ${c}, ${f}, ${y}, ${u})`}else h=`regularDistanceField(${s}, ${c}, ${f}, ${u})`;const g=Lce(h,o,a,l,i);e.setSymbolColorExpression(g)}function IPe(t,e,n,r){let i="vec4(1.0)";"icon-color"in t&&(i=In(r,t["icon-color"],Si)),"icon-opacity"in t&&(i=`${i} * vec4(1.0, 1.0, 1.0, ${In(r,t["icon-opacity"],Ht)})`);const s=h4(t["icon-src"]),o=aU(t,e,n,"icon-",s);if(e.setSymbolColorExpression(`${i} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(o),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${In(r,t["icon-width"],Ht)}, ${In(r,t["icon-height"],Ht)})`),"icon-offset"in t&&"icon-size"in t){const a=In(r,t["icon-size"],Pl),l=e.getSymbolSizeExpression();e.setSymbolSizeExpression(a);const c=lU(t,"icon-",r,"v_quadSizePx",a);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(oU(t,e,r,"icon-"),"icon-anchor"in t){const a=In(r,t["icon-anchor"],Pl);let l="1.0";"icon-scale"in t&&(l=In(r,t["icon-scale"],au));let c;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:t["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let u=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":u=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":u=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":u=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${u}`)}}function PPe(t,e,n,r){if("stroke-color"in t&&e.setStrokeColorExpression(In(r,t["stroke-color"],Si)),"stroke-pattern-src"in t){const i=h4(t["stroke-pattern-src"]),s=aU(t,e,n,"stroke-pattern-",i);let o=s,a="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(o=In(r,t["stroke-pattern-size"],Pl),a=lU(t,"stroke-pattern-",r,s,o));let l="0.";"stroke-pattern-spacing"in t&&(l=In(r,t["stroke-pattern-spacing"],Ht));let c="0.";"stroke-pattern-start-offset"in t&&(c=In(r,t["stroke-pattern-start-offset"],Ht)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const u=`u_texture${i}`;let h="1.";"stroke-color"in t&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${u}, ${s}, ${a}, ${o}, ${l}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`),r.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${o}, ${l}, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(In(r,t["stroke-width"],Ht)),"stroke-offset"in t&&e.setStrokeOffsetExpression(In(r,t["stroke-offset"],Ht)),"stroke-line-cap"in t&&e.setStrokeCapExpression(In(r,t["stroke-line-cap"],Bs)),"stroke-line-join"in t&&e.setStrokeJoinExpression(In(r,t["stroke-line-join"],Bs)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(In(r,t["stroke-miter-limit"],Ht)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Hf("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${Hf("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let i=t["stroke-line-dash"].map(y=>In(r,y,Ht));i.length%2===1&&(i=[...i,...i]);let s="0.";"stroke-line-dash-offset"in t&&(s=In(r,t["stroke-line-dash-offset"],Ht));const a=`dashDistanceField_${h4(t["stroke-line-dash"])}`,l=i.map((y,_)=>`float dashLength${_}`).join(", "),c=i.map((y,_)=>`dashLength${_}`).join(" + ");let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType, lineWidth)`;for(let y=2;y<i.length;y+=2)u=`${u} + dashLength${y-2} + dashLength${y-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${y}, totalDashLength, capType, lineWidth))`;r.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth, ${l}) {
  float totalDashLength = ${c};
  return ${h};
}`;const f=i.map((y,_)=>`${y}`).join(", ");e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType, v_width, ${f})`);let g=i.join(" + ");e.getStrokePatternLengthExpression()&&(r.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,g=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${g})`),e.setStrokePatternLengthExpression(g)}}function RPe(t,e,n,r){if("fill-color"in t&&e.setFillColorExpression(In(r,t["fill-color"],Si)),"fill-pattern-src"in t){const i=h4(t["fill-pattern-src"]),s=aU(t,e,n,"fill-pattern-",i);let o=s,a="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(o=In(r,t["fill-pattern-size"],Pl),a=lU(t,"fill-pattern-",r,s,o)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${i}`;let c="1.";"fill-color"in t&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function DZ(t,e,n){const r=Ace(),i=new Nce,s={};if("icon-src"in t?IPe(t,i,s,r):"shape-points"in t?CPe(t,i,s,r):"circle-radius"in t&&APe(t,i,s,r),PPe(t,i,s,r),RPe(t,i,s,r),n){const l=In(r,n,Rs);i.setFragmentDiscardExpression(`!${l}`)}const o={};function a(l,c,u,h){if(!r[l])return;const f=p8(u),g=iU(u);i.addAttribute(`a_${c}`,f),o[c]={size:g,callback:h}}return a("geometryType",Ice,Bs,l=>Lk(BG(l.getGeometry()))),a("featureId",Cce,Bs|Ht,l=>{const c=l.getId()??null;return typeof c=="string"?Lk(c):c}),Pce(i,r),{builder:i,attributes:{...o,...Mce(r)},uniforms:{...s,...Rce(r,e)}}}const MPe=[];let lj;function NPe(){return lj||(lj=wPe()),lj}let LPe=0;const jc={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class OPe{constructor(e,n,r,i){this.helper_,this.hitDetectionEnabled_=!!i,this.styleShaders=DPe(e,n),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return bPe(this.ref,MPe)},size:2});for(const s of this.styleShaders){for(const o in s.attributes)o in this.customAttributes_||(this.customAttributes_[o]=s.attributes[o]);for(const o in s.uniforms)o in this.uniforms_||(this.uniforms_[o]=s.uniforms[o])}this.renderPasses_=this.styleShaders.map(s=>{const o={},a=Object.entries(this.customAttributes_).map(([l,c])=>({name:l in s.attributes||l==="hitColor"?`a_${l}`:null,size:c.size||1,type:Io.FLOAT}));return s.builder.getFillVertexShader()&&(o.fillRenderPass={vertexShader:s.builder.getFillVertexShader(),fragmentShader:s.builder.getFillFragmentShader(),attributesDesc:[{name:jc.POSITION,size:2,type:Io.FLOAT},...a],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),s.builder.getStrokeVertexShader()&&(o.strokeRenderPass={vertexShader:s.builder.getStrokeVertexShader(),fragmentShader:s.builder.getStrokeFragmentShader(),attributesDesc:[{name:jc.LOCAL_POSITION,size:2,type:Io.FLOAT}],instancedAttributesDesc:[{name:jc.SEGMENT_START,size:2,type:Io.FLOAT},{name:jc.MEASURE_START,size:1,type:Io.FLOAT},{name:jc.SEGMENT_END,size:2,type:Io.FLOAT},{name:jc.MEASURE_END,size:1,type:Io.FLOAT},{name:jc.JOIN_ANGLES,size:2,type:Io.FLOAT},{name:jc.DISTANCE_LOW,size:1,type:Io.FLOAT},{name:jc.DISTANCE_HIGH,size:1,type:Io.FLOAT},{name:jc.ANGLE_TANGENT_SUM,size:1,type:Io.FLOAT},...a],instancePrimitiveVertexCount:6}),s.builder.getSymbolVertexShader()&&(o.symbolRenderPass={vertexShader:s.builder.getSymbolVertexShader(),fragmentShader:s.builder.getSymbolFragmentShader(),attributesDesc:[{name:jc.LOCAL_POSITION,size:2,type:Io.FLOAT}],instancedAttributesDesc:[{name:jc.POSITION,size:2,type:Io.FLOAT},...a],instancePrimitiveVertexCount:6}),o}),this.hasFill_=this.renderPasses_.some(s=>s.fillRenderPass),this.hasStroke_=this.renderPasses_.some(s=>s.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(s=>s.symbolRenderPass),this.setHelper(r)}async generateBuffers(e,n){if(e.isEmpty())return null;const r=this.generateRenderInstructions_(e,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=Tk(Hs(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,n){const r=this.hasFill_?kPe(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?TPe(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?SPe(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=LPe++;let s;switch(n){case"Polygon":s=aj.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=aj.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=aj.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:tL(this.customAttributes_)},a=NPe();return a.postMessage(o,[e.buffer]),e=null,new Promise(l=>{const c=u=>{const h=u.data;if(h.id!==i||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const f=new tj(ZG,ej).fromArrayBuffer(h.indicesBuffer),g=new tj(o4,ej).fromArrayBuffer(h.vertexAttributesBuffer),y=new tj(o4,ej).fromArrayBuffer(h.instanceAttributesBuffer);this.helper_.flushBufferData(f),this.helper_.flushBufferData(g),this.helper_.flushBufferData(y),l([f,g,y])};a.addEventListener("message",c)})}render(e,n,r){for(const i of this.renderPasses_)i.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],i.fillRenderPass,n,r),i.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],i.strokeRenderPass,n,r),i.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],i.symbolRenderPass,n,r)}renderInternal_(e,n,r,i,s,o){const a=e.getSize();if(a===0)return;const l=i.instancedAttributesDesc.length;if(this.helper_.useProgram(i.program,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i.attributesDesc),this.helper_.bindBuffer(r),this.helper_.enableAttributesInstanced(i.instancedAttributesDesc),o(),l){const c=i.instancedAttributesDesc.reduce((h,f)=>h+(f.size||1),0),u=r.getSize()/c;this.helper_.drawElementsInstanced(0,a,u)}else this.helper_.drawElements(0,a)}setHelper(e,n=null){this.helper_=e;for(const r of this.renderPasses_)r.fillRenderPass&&(r.fillRenderPass.program=this.helper_.getProgram(r.fillRenderPass.fragmentShader,r.fillRenderPass.vertexShader)),r.strokeRenderPass&&(r.strokeRenderPass.program=this.helper_.getProgram(r.strokeRenderPass.fragmentShader,r.strokeRenderPass.vertexShader)),r.symbolRenderPass&&(r.symbolRenderPass.program=this.helper_.getProgram(r.symbolRenderPass.fragmentShader,r.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1]),this.helper_.flushBufferData(n.polygonBuffers[2])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1]),this.helper_.flushBufferData(n.lineStringBuffers[2])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1]),this.helper_.flushBufferData(n.pointBuffers[2])))}}function DPe(t,e){const n=Array.isArray(t)?t:[t];if("style"in n[0]){const r=[],i=n,s=[];for(const o of i){const a=Array.isArray(o.style)?o.style:[o.style];let l=o.filter;o.else&&s.length&&(l=["all",...s.map(u=>["!",u])],o.filter&&l.push(o.filter),l.length<3&&(l=l[1])),o.filter&&s.push(o.filter);const c=a.map(u=>DZ(u,e,l));r.push(...c)}return r}return"builder"in n[0]?n:n.map(r=>DZ(r,e,null))}const qh=new Uint8Array(4);class jPe{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Kd(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return qh[0]=0,qh[1]=0,qh[2]=0,qh[3]=0,qh;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return qh[0]=this.data_[r*4],qh[1]=this.data_[r*4+1],qh[2]=this.data_[r*4+2],qh[3]=this.data_[r*4+3],qh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function FPe(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=i?Xn(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}const y_={...Ef,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class $Pe extends eU{constructor(e,n){const r={[y_.RENDER_EXTENT]:[0,0,0,0],[y_.PATTERN_ORIGIN]:[0,0],[y_.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Wa(),this.currentTransform_=Hs(),this.tmpCoords_=[0,0],this.tmpTransform_=Hs(),this.tmpMat4_=vce(),this.currentFrameStateTransform_=Hs(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(n),this.batch_=new u4,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Yn(n,so.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Yn(n,so.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Yn(n,so.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Yn(n,so.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new OPe(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new jPe(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e,n){const r=n.feature;this.batch_.changeFeature(r,e)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){Tle(this.tmpTransform_,this.currentFrameStateTransform_),Sle(this.tmpTransform_,e),this.helper.setUniformMatrixValue(y_.PROJECTION_MATRIX,h8(this.tmpMat4_,this.tmpTransform_)),Tk(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(y_.SCREEN_TO_WORLD_MATRIX,h8(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,Tk(this.tmpTransform_,e),Ji(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(y_.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=FPe(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[Cs.ANIMATING]&&!e.viewHints[Cs.INTERACTING],o=!A1(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,c=i.resolution,u=n instanceof Q5?n.getRenderBuffer():0,h=ah(e.extent,u*c);r.loadFeatures(h,c,l),this.ready=!1;const f=this.helper.makeProjectionTransform(e,Hs());this.styleRenderer_.generateBuffers(this.batch_,f).then(g=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=g,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),cAe(this.currentFrameStateTransform_,o*s,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)});while(++o<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(ur(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const o=Ji(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=EPe(l),u=this.batch_.getFeatureFromRef(c);if(u)return i(u,this.getLayer(),null)}disposeBuffers(e){const n=r=>{for(const i of r)i&&this.helper.deleteBuffer(i)};e.pointBuffers&&n(e.pointBuffers),e.lineStringBuffers&&n(e.lineStringBuffers),e.polygonBuffers&&n(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){ni(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const gf={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},VPe=["#00f","#0ff","#0f0","#ff0","#f00"];class zPe extends Q5{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(gf.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:VPe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(gf.BLUR)}getGradient(){return this.get(gf.GRADIENT)}getRadius(){return this.get(gf.RADIUS)}handleGradientChanged_(){this.gradient_=GPe(this.getGradient())}setBlur(e){const n=this.get(gf.BLUR);if(this.set(gf.BLUR,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(gf.GRADIENT,e)}setRadius(e){const n=this.get(gf.RADIUS);if(this.set(gf.RADIUS,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new Nce,n=Ace(),r=In(n,this.filter_,Rs);let i=In(n,this.getRadius(),Ht),s=In(n,this.getBlur(),Ht);const o={};typeof this.getBlur()=="number"&&(s="a_blur",o.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(i="a_radius",o.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const h=typeof this.weight_=="string"?f=>f.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:f=>{const g=h(f);return g!==void 0?ri(g,0,1):1}},l="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const h=["clamp",this.weight_,0,1];l=In(n,h,Ht)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${s});
  float radius = ${i};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${i} + ${s}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${i} + ${s}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),Pce(e,n);const c=Mce(n),u=Rce(n,this.styleVariables_);return new $Pe(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...c,...a},uniforms:{...u,...o}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function GPe(t){const r=Ls(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)i.addColorStop(o*s,t[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class UPe extends zG{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(n.extent!==void 0&&(l=ap(l,lh(n.extent,i.projection))),!a[Cs.ANIMATING]&&!a[Cs.INTERACTING]&&!sb(l))if(o){const c=i.projection,u=o.getImage(l,s,r,c);u&&(this.loadImage(u)?this.image=u:u.getState()===zt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Ji(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!k1(s,i))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=Xn(o),c=Math.floor(a.width*((i[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Ms(o),h=Math.floor(a.height*((o[3]-i[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,n){const r=this.image,i=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,f=h.center,g=h.resolution,y=u*o/(g*l),_=u*a/(g*l);this.prepareContainer(e,n);const b=this.context.canvas.width,T=this.context.canvas.height,A=this.getRenderContext(e);let C=!1,I=!0;if(c.extent){const L=lh(c.extent,h.projection);I=ca(L,e.extent),C=I&&!ig(L,e.extent),C&&this.clipUnrotated(A,e,L)}const R=r.getImage(),V=gu(this.tempTransform,b/2,T/2,y,_,0,l*(i[0]-f[0])/o,l*(f[1]-i[3])/a);this.renderedResolution=a*u/l;const P=R.width*V[0],N=R.height*V[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,e),I&&P>=.5&&N>=.5){const L=V[4],O=V[5],F=c.opacity;F!==1&&(A.save(),A.globalAlpha=F),A.drawImage(R,0,0,+R.width,+R.height,L,O,P,N),F!==1&&A.restore()}return this.postRender(this.context,e),C&&A.restore(),A.imageSmoothingEnabled=!0,this.container}}class BPe extends lC{constructor(e){e=e||{},super(e)}}class WPe extends BPe{constructor(e){super(e)}createRenderer(){return new UPe(this)}getData(e){return super.getData(e)}}function cj(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function HPe(t,e,n){const r=t[n];return r?r.delete(e):!1}function jZ(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=ap(e,lh(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=ap(e,i))}return e}class qPe extends zG{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Wa(),this.tempTileRange_=new QG(0,0,0,0),this.tempTileCoord_=c4(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new LZ(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new LZ(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const s=this.tileCache_,a=this.getLayer().getSource(),l=dM(a,a.getKey(),e,n,r);let c;if(s.containsKey(l))c=s.get(l);else{const u=i.viewState.projection,h=a.getProjection();if(c=a.getTile(e,n,r,i.pixelRatio,u,!h||i1(h,u)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,n,r,i){const s=this.getOrCreateTile(e,n,r,i);return s||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Ji(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!k1(s,i))return null;const o=n.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(n.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(i,u),f=this.getTile(u,h[1],h[2],n);if(!f||f.getState()!==hn.LOADED)continue;const g=l.getOrigin(u),y=$a(l.getTileSize(u)),_=l.getResolution(u);let b;if(f instanceof wce||f instanceof Tce)b=f.getImage();else if(f instanceof RZ){if(b=d8(f.getData()),!b)continue}else continue;const T=Math.floor(c*((i[0]-g[0])/_-h[1]*y[0])),A=Math.floor(c*((g[1]-i[1])/_-h[2]*y[1])),C=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(b,T+C,A+C)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=en(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],f=a.getMapInternal(),g=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),y=o.rotation,_=y?hle(o.center,o.resolution,y,e.size):void 0;for(let b=r;b>=g;--b){const T=c.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),A=c.getResolution(b);for(let C=T.minX;C<=T.maxX;++C)for(let I=T.minY;I<=T.maxY;++I){if(y&&!c.tileCoordIntersectsViewport([b,C,I],_))continue;const R=this.getTile(b,C,I,e);if(!R||!cj(i,R,b))continue;const P=R.getKey();if(h[P]=!0,R.getState()===hn.IDLE&&!e.tileQueue.isKeyQueued(P)){const N=c4(b,C,I,this.tempTileCoord_);e.tileQueue.enqueue([R,u,c.getTileCoordCenter(N),A])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=dM(this.getLayer().getSource(),a[l],i,s,o);if(r.containsKey(c)){const u=r.peek(c);if(u.getState()===hn.LOADED)return u.endTransition(en(this)),cj(n,u,i),!0}}return!1}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const f=dM(l,c,r,u,h);let g=!1;if(a.containsKey(f)){const y=a.peek(f);y.getState()===hn.LOADED&&(cj(i,y,r),g=!0)}g||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),f=h.getZForResolution(o,u.zDirection),g=h.getResolution(f),y=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==y&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=y):this.renderedSourceKey_=y;let _=e.extent;const b=u.getTilePixelRatio(l);this.prepareContainer(e,n);const T=this.context.canvas.width,A=this.context.canvas.height,C=r.extent&&lh(r.extent);C&&(_=ap(_,lh(r.extent)));const I=g*T/2/b,R=g*A/2/b,V=[a[0]-I,a[1]-R,a[0]+I,a[1]+R],P={};this.renderedTiles.length=0;const N=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const de=h.getZForResolution(i.nextResolution,u.zDirection),Le=jZ(e,e.nextExtent);this.enqueueTiles(e,Le,de,P,N)}const L=jZ(e,_);if(this.enqueueTiles(e,L,f,P,0),N>0&&setTimeout(()=>{this.enqueueTiles(e,L,f-1,P,N-1)},0),!(f in P))return this.container;const O=en(this),F=e.time;for(const de of P[f]){const Le=de.getState();if(Le===hn.EMPTY)continue;const xe=de.tileCoord;if(Le===hn.LOADED&&de.getAlpha(O,F)===1){de.endTransition(O);continue}if(Le!==hn.ERROR&&(this.renderComplete=!1),this.findStaleTile_(xe,P)){HPe(P,de,f),e.animate=!0;continue}if(this.findAltTiles_(h,xe,f+1,P))continue;const ne=h.getMinZoom();for(let se=f-1;se>=ne&&!this.findAltTiles_(h,xe,se,P);--se);}const G=g/o*l/b,U=this.getRenderContext(e);gu(this.tempTransform,T/2,A/2,G,G,0,-T/2,-A/2),r.extent&&this.clipUnrotated(U,e,C),u.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,e);const ue=Object.keys(P).map(Number);ue.sort(op);let be;const ze=[],Ce=[];for(let de=ue.length-1;de>=0;--de){const Le=ue[de],xe=u.getTilePixelSize(Le,l,s),W=h.getResolution(Le)/g,ne=xe[0]*W*G,se=xe[1]*W*G,Q=h.getTileCoordForCoordAndZ(uv(V),Le),me=h.getTileCoordExtent(Q),Ke=Ji(this.tempTransform,[b*(me[0]-V[0])/g,b*(V[3]-me[3])/g]),Ye=b*u.getGutterForProjection(s);for(const ke of P[Le]){if(ke.getState()!==hn.LOADED)continue;const Ee=ke.tileCoord,Dt=Q[1]-Ee[1],Xe=Math.round(Ke[0]-(Dt-1)*ne),cn=Q[2]-Ee[2],jt=Math.round(Ke[1]-(cn-1)*se),gn=Math.round(Ke[0]-Dt*ne),wn=Math.round(Ke[1]-cn*se),pt=Xe-gn,hr=jt-wn,zn=ue.length===1;let Hn=!1;be=[gn,wn,gn+pt,wn,gn+pt,wn+hr,gn,wn+hr];for(let ei=0,xo=ze.length;ei<xo;++ei)if(!zn&&Le<Ce[ei]){const Rr=ze[ei];ca([gn,wn,gn+pt,wn+hr],[Rr[0],Rr[3],Rr[4],Rr[7]])&&(Hn||(U.save(),Hn=!0),U.beginPath(),U.moveTo(be[0],be[1]),U.lineTo(be[2],be[3]),U.lineTo(be[4],be[5]),U.lineTo(be[6],be[7]),U.moveTo(Rr[6],Rr[7]),U.lineTo(Rr[4],Rr[5]),U.lineTo(Rr[2],Rr[3]),U.lineTo(Rr[0],Rr[1]),U.clip())}ze.push(be),Ce.push(Le),this.drawTile(ke,e,gn,wn,pt,hr,Ye,zn),Hn&&U.restore(),this.renderedTiles.unshift(ke),this.updateUsedTiles(e.usedTiles,u,ke)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!A1(this.renderedExtent_,V),this.renderedExtent_=V,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&U.restore(),U.imageSmoothingEnabled=!0,this.renderComplete){const de=(Le,xe)=>{const Z=en(u),W=xe.wantedTiles[Z],ne=W?Object.keys(W).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(de)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,s,o,a,l){let c;if(e instanceof RZ){if(c=d8(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(n),h=en(this),f=n.layerStatesArray[n.layerIndex],g=f.opacity*(l?e.getAlpha(h,n.time):1),y=g!==u.globalAlpha;y&&(u.save(),u.globalAlpha=g),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,s,o),y&&u.restore(),g!==f.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=en(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const NP={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class KPe extends lC{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(NP.PRELOAD)}setPreload(e){this.set(NP.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(NP.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(NP.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Ff extends KPe{constructor(e){super(e)}createRenderer(){return new qPe(this,{cacheSize:this.getCacheSize()})}}function m8(t){return Array.isArray(t)?Math.min(...t):t}const v_=[0,0,0],hm=5;class Oce{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ur(bke(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ur(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=uv(r)),ur(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ur(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:YG,ur(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new QG(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,l=i.maxY;a<=l;++a)r([n,s,a])}forEachTileCoordParentTileRange(e,n,r,i){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=p_(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,c,r),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return p_(s,s+1,o,o+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(n===i)return p_(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-i),c=Math.floor(s*l),u=Math.floor(o*l);if(n<i)return p_(c,c,u,u,r);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return p_(c,h,u,f,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,v_);const i=v_[1],s=v_[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,v_);const o=v_[1],a=v_[2];return p_(i,o,s,a,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=$a(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=$a(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,l=o+s[0]*i,c=a+s[1]*i;return xp(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),c=$a(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/r/c[0],h=a*(l[1]-n)/r/c[1];return i?(u=sg(u,hm)-1,h=sg(h,hm)-1):(u=wP(u,hm),h=wP(h,hm)),c4(o,u,h,s)}getTileCoordForXYAndZ_(e,n,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),l=$a(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return i?(c=sg(c,hm)-1,u=sg(u,hm)-1):(c=wP(c,hm),u=wP(u,hm)),c4(r,c,u,s)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=j5(this.resolutions_,e,n||0);return ri(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return Ple(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Dce(t){let e=t.getDefaultTileGrid();return e||(e=JPe(t),t.setDefaultTileGrid(e)),e}function YPe(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),s=cU(n);if(!k1(s,i)){const o=Xn(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,t.getTileCoordForCoordAndZ(i,r)}return e}function XPe(t,e,n,r){r=r!==void 0?r:"top-left";const i=jce(t,e,n);return new Oce({extent:t,origin:kke(t,r),resolutions:i,tileSize:n})}function ZPe(t){const e=t||{},n=e.extent||Jr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:jce(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Oce(r)}function jce(t,e,n,r){e=e!==void 0?e:OIe,n=$a(n!==void 0?n:YG);const i=Ms(t),s=Xn(t);r=r>0?r:Math.max(s/n[0],i/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function JPe(t,e,n,r){const i=cU(t);return XPe(i,e,n,r)}function cU(t){t=Jr(t);let e=t.getExtent();if(!e){const n=180*s2.degrees/t.getMetersPerUnit();e=xp(-n,-n,n,n)}return e}function uU(t,e){const n=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&n.push(i+"="+encodeURIComponent(e[i]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}const QPe=/\{z\}/g,eRe=/\{x\}/g,tRe=/\{y\}/g,nRe=/\{-y\}/g;function rRe(t,e,n,r,i){return t.replace(QPe,e.toString()).replace(eRe,n.toString()).replace(tRe,r.toString()).replace(nRe,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function iRe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function sRe(t,e){return(function(n,r,i){if(!n)return;let s;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return rRe(t,o,n[1],n[2],s)})}function oRe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=sRe(t[i],e);return aRe(r)}function aRe(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=kce(e),s=Sg(i,t.length);return t[s](e,n,r)})}class lRe extends $G{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&$a(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||en(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,s,o){return Sn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Dce(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),o=$a(i.getTileSize(e),this.tmpSize);return s==1?o:ECe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=YPe(i,e,r)),lPe(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class cRe extends Cc{constructor(e,n){super(e),this.tile=n}}const uj={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class hU extends lRe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===hU.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=en(n),i=n.getState();let s;i==hn.LOADING?(this.tileLoadingKeys_[r]=!0,s=uj.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==hn.ERROR?uj.TILELOADERROR:i==hn.LOADED?uj.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new cRe(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=iRe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(oRe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class Fce extends hU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:$ce,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:wce,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!i1(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||i1(n,e)))return this.tileGrid;const r=en(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Dce(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,s,o){const a=[e,n,r],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,i,s):void 0,u=new this.tileClass(a,c!==void 0?hn.IDLE:hn.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(En.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,r,i,s,o){const a=this.getProjection();if(!a||!s||i1(a,s))return this.getTileInternal(e,n,r,i,a||s);const l=[e,n,r],c=this.getKey(),u=this.getTileGridForProjection(a),h=this.getTileGridForProjection(s),f=this.getTileCoordForTileUrlFunction(l,s),g=new Tce(a,u,s,h,l,f,this.getTilePixelRatio(i),this.getGutter(),(y,_,b,T)=>this.getTileInternal(y,_,b,T,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,n,r,i,s,o){const a=this.getKey(),l=dM(this,a,e,n,r);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,n,r,i,s,a);return o?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=Jr(e);if(r){const i=en(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function $ce(t,e){if(hc){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const o=t.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),s.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class Um extends Fce{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:ZPe({extent:cU(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const uRe="modulepreload",hRe=function(t){return"/detect/"+t},FZ={},ge=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=hRe(c),c in FZ)return;FZ[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":uRe,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class dRe extends $le{constructor(e,n,r,i,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=n.getExtent();c&&n.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?ap(r,c):r,h=vh(u),f=l4(e,n,h,i),g=Sce,y=new Ece(e,n,u,l,f*g,i),_=y.calculateSourceExtent(),b=sb(_)?null:o(_,f,s),T=b?zt.IDLE:zt.EMPTY,A=b?b.getPixelRatio():1;super(r,i,A,T),this.targetProj_=n,this.maxSourceExtent_=l,this.triangulation_=y,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=A,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==zt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==zt.LOADED){const n=Xn(this.targetExtent_)/this.targetResolution_,r=Ms(this.targetExtent_)/this.targetResolution_;this.canvas_=bce(n,r,this.sourcePixelRatio_,m8(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==zt.IDLE){this.state=zt.LOADING,this.changed();const e=this.sourceImage_.getState();e==zt.LOADED||e==zt.ERROR?this.reproject_():(this.sourceListenerKey_=Yn(this.sourceImage_,En.CHANGE,n=>{const r=this.sourceImage_.getState();(r==zt.LOADED||r==zt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ni(this.sourceListenerKey_),this.sourceListenerKey_=null}}const cg=4,hj={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class fRe extends Cc{constructor(e,n){super(e),this.image=n}}class pRe extends $G{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const n=this.getResolutions();if(n){const r=j5(n,e,0);e=n[r]}return e}getImage(e,n,r,i){const s=this.getProjection();if(!s||!i||i1(s,i))return s&&(i=s),this.getImageInternal(e,n,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&i1(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==n&&A1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new dRe(s,i,e,n,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,n,r,i){if(this.loader){const s=Vce(e,n,r,1),o=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&ig(this.wantedExtent_,s)||ig(this.image.getExtent(),s))&&(this.wantedResolution_&&m8(this.wantedResolution_)===o||m8(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new $le(s,o,r,this.loader),this.image.addEventListener(En.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const n=e.target;let r;switch(n.getState()){case zt.LOADING:this.loading=!0,r=hj.IMAGELOADSTART;break;case zt.LOADED:this.loading=!1,r=hj.IMAGELOADEND;break;case zt.ERROR:this.loading=!1,r=hj.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new fRe(r,n))}}function mRe(t,e){t.getImage().src=e}function Vce(t,e,n,r){const i=e/n,s=vh(t),o=sg(Xn(t)/i,cg),a=sg(Ms(t)/i,cg),l=sg((r-1)*o/2,cg),c=o+2*l,u=sg((r-1)*a/2,cg),h=a+2*u;return W3(s,i,0,[c,h])}function gRe(t,e,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[H3(Xn(e)/a,cg),H3(Ms(e)/a,cg)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const c=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return uU(c,s)}function yRe(t){const e=t.load?t.load:zle,n=Jr(t.projection||"EPSG:3857"),r=t.ratio??1.5,i=t.crossOrigin??null;return function(s,o,a){a=t.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,t.params),s=Vce(s,o,a,r);const c=gRe(t.url,s,o,a,n,l),u=new Image;return u.crossOrigin=i,e(u,c).then(h=>{const f=Xn(s)/h.width*a;return{image:h,extent:s,resolution:f,pixelRatio:a}})}}class vRe extends pRe{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:mRe,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=yRe({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),zle(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const g8="1.3.0";function _Re(t,e,n,r,i){i.WIDTH=n[0],i.HEIGHT=n[1];const s=r.getAxisOrientation(),o=ple(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=r.getCode();const a=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),uU(t,i)}function xRe(t,e,n,r,i,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/n,l=[H3(Xn(t)/a,cg),H3(Ms(t)/a,cg)];if(n!=1)switch(o){case"geoserver":const u=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return _Re(i,t,l,r,s)}function $Z(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:g8,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}const wRe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class bRe extends Um{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[wRe];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,o)=>{const a=s.getImage();!hc&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||$ce)(s,o)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const d4=1/0;class ERe{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lv(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ur(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=d4?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,s=n[e],o=r[e],a=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<i&&r[c]<r[l]?c:l;n[e]=n[u],r[e]=r[u],e=u}n[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,s=r[n],o=i[n];for(;n>e;){const a=this.getParentIndex_(n);if(i[a]>o)r[n]=r[a],i[n]=i[a],n=a;else break}r[n]=s,i[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==d4?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=l,n[i++]=o);n.length=i,r.length=i,this.heapify_()}}class SRe extends ERe{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(En.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===hn.LOADED||r===hn.ERROR||r===hn.EMPTY){r!==hn.ERROR&&n.removeEventListener(En.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===hn.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function TRe(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return d4;const s=t.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}class kRe extends Fce{constructor(e){e=e||{};const n=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Wa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,n,r,i){const s=Jr(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=ab(e,s,o),c=l4(o,s,e,n),u=a.getZForResolution(c,this.zDirection),h=a.getResolution(u),f=a.getTileCoordForCoordAndZ(l,u);if(a.getResolutions().length<=f[0])return;let g=a.getTileCoordExtent(f,this.tmpExtent_);const y=this.gutter_;y!==0&&(g=ah(g,h*y,g));const _={QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,$Z(this.params_,"GetFeatureInfo"),i);const b=Math.floor((l[0]-g[0])/h),T=Math.floor((g[3]-l[1])/h);return _[this.v13_?"I":"X"]=b,_[this.v13_?"J":"Y"]=T,this.getRequestUrl_(f,g,1,o||s,_)}getLegendUrl(e,n){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:g8,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,n),uU(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=Sg(kce(e),o.length);a=o[l]}return xRe(n,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||g8;this.v13_=ple(e,"1.3")>=0}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=ah(o,s*a,o));const l=Object.assign({},$Z(this.params_,"GetMap"));return this.getRequestUrl_(e,o,n,r,l)}}class K_ extends Cc{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class $f extends K_{constructor(e,n,r,i,s,o){super(e,n,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const or={SINGLECLICK:"singleclick",CLICK:En.CLICK,DBLCLICK:En.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},y8={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class ARe extends QA{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Yn(r,y8.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yn(r,y8.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(En.TOUCHMOVE,this.boundHandleTouchMove_,Dle?{passive:!1}:!1)}emulateClick_(e){let n=new $f(or.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new $f(or.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new $f(or.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==or.POINTERUP||n.type==or.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==or.POINTERDOWN||n.type==or.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new $f(or.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new $f(or.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yn(r,or.POINTERMOVE,this.handlePointerMove_,this),Yn(r,or.POINTERUP,this.handlePointerUp_,this),Yn(this.element_,or.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Yn(this.element_.getRootNode(),or.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new $f(or.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new $f(or.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ni(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(En.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ni(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Im={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ea={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class nL extends Yd{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let n=0,r=this.listenerKeys.length;n<r;++n)ni(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==bk&&this.listenerKeys.push(Yn(e,Im.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class CRe extends nL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(En.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+iC+" "+OG+(this.collapsed_&&this.collapsible_?" "+ZX:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>ale(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Kd(n,this.renderedAttributions_)){RAe(this.ulElement_);for(let i=0,s=n.length;i<s;++i){const o=document.createElement("li");o.innerHTML=n[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ZX),this.collapsed_?YX(this.collapseLabel_,this.label_):YX(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class IRe extends nL{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(En.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+iC+" "+OG,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(TP)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:lb}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(TP);!s&&r===0?this.element.classList.add(TP):s&&r!==0&&this.element.classList.remove(TP)}this.label_.style.transform=i}this.rotation_=r}}class PRe extends nL{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(En.CLICK,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(En.CLICK,this.handleClick_.bind(this,-r),!1);const f=n+" "+iC+" "+OG,g=this.element;g.className=f,g.appendChild(u),g.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:lb})):r.setZoom(s)}}}function RRe(t){t=t||{};const e=new Fa;return(t.zoom===void 0||t.zoom)&&e.push(new PRe(t.zoomOptions)),(t.rotate===void 0||t.rotate)&&e.push(new IRe(t.rotateOptions)),(t.attribution===void 0||t.attribution)&&e.push(new CRe(t.attributionOptions)),e}class MRe{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[n]-this.points_[r],o=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const v8={ACTIVE:"active"};class cb extends Yd{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(v8.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(v8.ACTIVE,e)}setMap(e){this.map_=e}}function NRe(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:PIe,center:t.getConstrainedCenter(i)})}}function dU(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const s=t.getConstrainedZoom(i+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:r!==void 0?r:250,easing:lb})}class LRe extends cb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==or.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();dU(a,o,s,this.duration_),r.preventDefault(),n=!0}return!n}}function _8(t){const e=arguments;return function(n){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](n),!!r);++i);return r}}const ORe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},DRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},jRe=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},zce=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?jRe(t):!0},iw=Vg,Gce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(IAe&&Lle&&e.ctrlKey)},f4=ib,Uce=function(t){return t.type==or.SINGLECLICK},fU=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},FRe=function(t){const e=t.originalEvent;return Lle?e.metaKey:e.ctrlKey},p4=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Bce=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},dj=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},Wce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class fv extends cb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==or.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==or.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==or.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==or.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function pU(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class $Re extends fv{constructor(e){super({stopDown:ib}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:_8(fU,Wce);this.condition_=e.onFocusOnly?_8(zce,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(pU(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();Mke(s,a.getResolution()),mG(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:lb})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class VRe extends fv{constructor(e){e=e||{},super({stopDown:ib}),this.condition_=e.condition?e.condition:DRe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!dj(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===KG)return;const i=n.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return dj(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return dj(e)&&Gce(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class zRe extends JA{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Il([i])}getGeometry(){return this.geometry_}}const __={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class LE extends Cc{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class GRe extends fv{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new zRe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Gce,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],s=r[1]-n[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new LE(__.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new LE(n?__.BOXEND:__.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new LE(__.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new LE(__.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new LE(__.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class URe extends GRe{constructor(e){e=e||{};const n=e.condition?e.condition:p4;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:lb})}}const B0={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class BRe extends cb{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return fU(n)&&Bce(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==En.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==B0.DOWN||i==B0.LEFT||i==B0.RIGHT||i==B0.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;i==B0.DOWN?c=-a:i==B0.LEFT?l=-a:i==B0.RIGHT?l=a:c=a;const u=[l,c];mG(u,o.getRotation()),NRe(o,u,this.duration_),r.preventDefault(),n=!0}}return!n}}class WRe extends cb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!FRe(n)&&Bce(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==En.KEYDOWN||e.type==En.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();dU(a,o,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const HRe=40,qRe=300;class KRe extends cb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:iw;this.condition_=e.onFocusOnly?_8(zce,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==En.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=HRe;break;case WheelEvent.DOM_DELTA_PAGE:s*=qRe;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-ri(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),dU(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class YRe extends fv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=ib),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==KG&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(pU(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class XRe extends fv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=ib),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(pU(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function ZRe(t){t=t||{};const e=new Fa,n=new MRe(-.005,.05,100);return(t.altShiftDragRotate===void 0||t.altShiftDragRotate)&&e.push(new VRe),(t.doubleClickZoom===void 0||t.doubleClickZoom)&&e.push(new LRe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan===void 0||t.dragPan)&&e.push(new $Re({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate===void 0||t.pinchRotate)&&e.push(new YRe),(t.pinchZoom===void 0||t.pinchZoom)&&e.push(new XRe({duration:t.zoomDuration})),(t.keyboard===void 0||t.keyboard)&&(e.push(new BRe),e.push(new WRe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom===void 0||t.mouseWheelZoom)&&e.push(new KRe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom===void 0||t.shiftDragZoom)&&e.push(new URe({duration:t.zoomDuration})),e}class JRe extends JA{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){Sn()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;gu(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Tk(i,r)}forEachFeatureAtCoordinate(e,n,r,i,s,o,a,l){let c;const u=n.viewState;function h(I,R,V,P){return s.call(o,R,I?V:null,P)}const f=u.projection,g=mle(e.slice(),f),y=[[0,0]];if(f.canWrapX()&&i){const I=f.getExtent(),R=Xn(I);y.push([-R,0],[R,0])}const _=n.layerStatesArray,b=_.length,T=[],A=[];for(let I=0;I<y.length;I++)for(let R=b-1;R>=0;--R){const V=_[R],P=V.layer;if(P.hasRenderer()&&XG(V,u)&&a.call(l,P)){const N=P.getRenderer(),L=P.getSource();if(N&&L){const O=L.getWrapX()?g:e,F=h.bind(null,V.managed);A[0]=O[0]+y[I][0],A[1]=O[1]+y[I][1],c=N.forEachFeatureAtCoordinate(A,n,r,F,T)}if(c)return c}}if(T.length===0)return;const C=1/T.length;return T.forEach((I,R)=>I.distanceSq+=R*C),T.sort((I,R)=>I.distanceSq-R.distanceSq),T.some(I=>c=I.callback(I.feature,I.layer,I.geometry)),c}hasFeatureAtCoordinate(e,n,r,i,s,o){return this.forEachFeatureAtCoordinate(e,n,r,i,Vg,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Sn()}scheduleExpireIconCache(e){ou.canExpireCache()&&e.postRenderFunctions.push(QRe)}}function QRe(t,e){ou.expire()}class eMe extends JRe{constructor(e){super(e),this.fontChangeListenerKey_=Yn(W_,r2.PROPERTYCHANGE,e.redrawText,e),this.element_=hc?jle():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=iC+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new fT(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){ni(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(uo.PRECOMPOSE,e);const n=e.layerStatesArray.sort((c,u)=>c.zIndex-u.zIndex);n.some(c=>c.layer instanceof Q5&&c.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,u=n.length;c<u;++c){const h=n[c];e.layerIndex=c;const f=h.layer,g=f.getSourceState();if(!XG(h,i)||g!="ready"&&g!="undefined"){f.unrender();continue}const y=f.render(e,o);y&&(y!==o&&(this.children_.push(y),o=y),s.push(h))}this.declutter(e,s),MAe(this.element_,this.children_);const l=this.getMap().getTargetElement();if(ag(l)){const c=l.getContext("2d");for(const u of this.children_){const h=u.firstElementChild||u,f=u.style.backgroundColor;if(f&&(!ag(h)||h.width>0)&&(c.fillStyle=f,c.fillRect(0,0,l.width,l.height)),ag(h)&&h.width>0){const g=u.style.opacity||h.style.opacity;c.globalAlpha=g===""?1:Number(g);const y=h.style.transform;if(y)c.setTransform(...t8(y));else{const _=parseFloat(h.style.width)/h.width,b=parseFloat(h.style.height)/h.height;c.setTransform(_,0,0,b,0,0)}c.drawImage(h,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(uo.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function Hce(t){if(t instanceof lC){t.setMapInternal(null);return}t instanceof eL&&t.getLayers().forEach(Hce)}function qce(t,e){if(t instanceof lC){t.setMapInternal(e);return}if(t instanceof eL){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)qce(n[r],e)}}let tMe=class extends Yd{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=nMe(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:PAe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Hs(),this.pixelToCoordinateTransform_=Hs(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,hc||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,hc||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||(hc?new Fa:RRe()),this.interactions=n.interactions||(hc?new Fa:ZRe({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new SRe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ea.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ea.VIEW,this.handleViewChanged_),this.addChangeListener(ea.SIZE,this.handleSizeChanged_),this.addChangeListener(ea.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof md)&&e.view.then(function(i){r.setView(new md(i))}),this.controls.addEventListener(Ps.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Ps.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Ps.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Ps.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Ps.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Ps.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){qce(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Vg,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof eL?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Vg,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(ea.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return I1(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Ji(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ea.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Fa){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Oi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Ji(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ea.SIZE)}getView(){return this.get(ea.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return TRe(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new $f(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===y8.POINTERDOWN||r===En.WHEEL||r===En.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=n.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[Cs.ANIMATING]||o[Cs.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(uo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(uo.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new K_(Im.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new K_(Im.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ni(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(En.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(En.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ag(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ag(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new eMe(this)),!ag(n)){this.mapBrowserEventHandler_=new ARe(this,this.moveTolerance_);for(const i in or)this.mapBrowserEventHandler_.addEventListener(or[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(En.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(En.WHEEL,this.boundHandleBrowserEvent_,Dle?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=n.getRootNode();r=i instanceof ShadowRoot?i.host:n}if(this.targetChangeHandlerKeys_=[Yn(r,En.KEYDOWN,this.handleBrowserEvent,this),Yn(r,En.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ni(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ni(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yn(e,r2.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yn(e,En.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ni),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Gm("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Yn(e,r2.PROPERTYCHANGE,this.render,this),Yn(e,En.CHANGE,this.render,this),Yn(e,"addlayer",this.handleLayerAdd_,this),Yn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Hce(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(n!==void 0&&lZ(n)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:W3(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:en(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=W3(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!sb(this.previousExtent_)&&!A1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new K_(Im.MOVESTART,this,i)),this.previousExtent_=tC(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Cs.ANIMATING]&&!s.viewHints[Cs.INTERACTING]&&!A1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new K_(Im.MOVEEND,this,s)),cle(s.extent,this.previousExtent_))),this.dispatchEvent(new K_(Im.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Im.LOADSTART)||this.hasListener(Im.LOADEND)||this.hasListener(uo.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Gm("removelayer",n)),this.set(ea.LAYERGROUP,e)}setSize(e){this.set(ea.SIZE,e)}setTarget(e){this.set(ea.TARGET,e)}setView(e){if(!e||e instanceof md){this.set(ea.VIEW,e);return}this.set(ea.VIEW,new md);const n=this;e.then(function(r){n.setView(new md(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,s;if(ag(e))i=e.width,s=e.height;else{const o=getComputedStyle(e);i=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(n=[Math.max(0,i),Math.max(0,s)],!lZ(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&yle("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Kd(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function nMe(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new eL({layers:t.layers});n[ea.LAYERGROUP]=r,n[ea.TARGET]=t.target,n[ea.VIEW]=t.view instanceof md?t.view:new md;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new Fa(t.controls.slice()):(ur(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new Fa(t.interactions.slice()):(ur(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Fa(t.overlays.slice()):(ur(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Fa,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const fj="units",rMe=[1,2,5],OE=25.4/.28;class iMe extends nL{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+iC,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fj,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(fj)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(fj,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let o=X3(r,e.resolution,n,s);const a=this.minWidth_*(this.dpi_||OE)/OE,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||OE)/OE:void 0;let c=a*o,u="";if(i=="degrees"){const C=s2.degrees;c*=C,c<C/60?(u="",o*=3600):c<C?(u="",o*=60):u=""}else if(i=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(i=="nautical")o/=1852,u="NM";else if(i=="metric")c<1e-6?(u="nm",o*=1e9):c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(i=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,g,y,_=0,b,T;for(;;){y=Math.floor(h/3);const C=Math.pow(10,y);if(f=rMe[(h%3+3)%3]*C,g=Math.round(f/o),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&g>=l){f=_,g=b,y=T;break}else if(g>=a)break;_=f,b=g,T=y,++h}const A=this.scaleBar_?this.createScaleBar(g,f,u):f.toFixed(y<0?-y:0)+" "+u;this.renderedHTML_!=A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,n,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,i,s){const a=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:n/this.scaleBarSteps_*-1,c=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${r?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=X3(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||OE,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const sMe={},VZ=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const g=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(y=>y(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(sMe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},oMe=t=>t?VZ(t):VZ;var pj={exports:{}},mj={},gj={exports:{}},yj={};var zZ;function aMe(){if(zZ)return yj;zZ=1;var t=ZA();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var g=f(),y=r({inst:{value:g,getSnapshot:f}}),_=y[0].inst,b=y[1];return s(function(){_.value=g,_.getSnapshot=f,l(_)&&b({inst:_})},[h,g,f]),i(function(){return l(_)&&b({inst:_}),h(function(){l(_)&&b({inst:_})})},[h]),o(g),g}function l(h){var f=h.getSnapshot;h=h.value;try{var g=f();return!n(h,g)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return yj.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,yj}var GZ;function lMe(){return GZ||(GZ=1,gj.exports=aMe()),gj.exports}var UZ;function cMe(){if(UZ)return mj;UZ=1;var t=ZA(),e=lMe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return mj.useSyncExternalStoreWithSelector=function(c,u,h,f,g){var y=s(null);if(y.current===null){var _={hasValue:!1,value:null};y.current=_}else _=y.current;y=a(function(){function T(V){if(!A){if(A=!0,C=V,V=f(V),g!==void 0&&_.hasValue){var P=_.value;if(g(P,V))return I=P}return I=V}if(P=I,r(C,V))return P;var N=f(V);return g!==void 0&&g(P,N)?(C=V,P):(C=V,I=N)}var A=!1,C,I,R=h===void 0?null:h;return[function(){return T(u())},R===null?void 0:function(){return T(R())}]},[u,h,f,g]);var b=i(c,y[0],y[1]);return o(function(){_.hasValue=!0,_.value=b},[b]),l(b),b},mj}var BZ;function uMe(){return BZ||(BZ=1,pj.exports=cMe()),pj.exports}var hMe=uMe();const dMe=cG(hMe),Kce={},{useDebugValue:fMe}=vke,{useSyncExternalStoreWithSelector:pMe}=dMe;let WZ=!1;const mMe=t=>t;function gMe(t,e=mMe,n){(Kce?"commercial":void 0)!=="production"&&n&&!WZ&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),WZ=!0);const r=pMe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return fMe(r),r}const HZ=t=>{(Kce?"commercial":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?oMe(t):t,n=(r,i)=>gMe(e,r,i);return Object.assign(n,e),n},vo=t=>t?HZ(t):HZ;var Yce=Symbol.for("immer-nothing"),qZ=Symbol.for("immer-draftable"),wc=Symbol.for("immer-state");function eh(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ok=Object.getPrototypeOf;function c2(t){return!!t&&!!t[wc]}function R1(t){return t?Xce(t)||Array.isArray(t)||!!t[qZ]||!!t.constructor?.[qZ]||cC(t)||iL(t):!1}var yMe=Object.prototype.constructor.toString(),KZ=new WeakMap;function Xce(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=KZ.get(n);return r===void 0&&(r=Function.toString.call(n),KZ.set(n,r)),r===yMe}function m4(t,e,n=!0){rL(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function rL(t){const e=t[wc];return e?e.type_:Array.isArray(t)?1:cC(t)?2:iL(t)?3:0}function x8(t,e){return rL(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Zce(t,e,n){const r=rL(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function vMe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function cC(t){return t instanceof Map}function iL(t){return t instanceof Set}function iy(t){return t.copy_||t.base_}function w8(t,e){if(cC(t))return new Map(t);if(iL(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Xce(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[wc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Ok(t),r)}else{const r=Ok(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function mU(t,e=!1){return sL(t)||c2(t)||!R1(t)||(rL(t)>1&&Object.defineProperties(t,{set:LP,add:LP,clear:LP,delete:LP}),Object.freeze(t),e&&Object.values(t).forEach(n=>mU(n,!0))),t}function _Me(){eh(2)}var LP={value:_Me};function sL(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var xMe={};function M1(t){const e=xMe[t];return e||eh(0,t),e}var Dk;function Jce(){return Dk}function wMe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YZ(t,e){e&&(M1("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function b8(t){E8(t),t.drafts_.forEach(bMe),t.drafts_=null}function E8(t){t===Dk&&(Dk=t.parent_)}function XZ(t){return Dk=wMe(Dk,t)}function bMe(t){const e=t[wc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ZZ(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[wc].modified_&&(b8(e),eh(4)),R1(t)&&(t=g4(e,t),e.parent_||y4(e,t)),e.patches_&&M1("Patches").generateReplacementPatches_(n[wc].base_,t,e.patches_,e.inversePatches_)):t=g4(e,n,[]),b8(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Yce?t:void 0}function g4(t,e,n){if(sL(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[wc];if(!i)return m4(e,(s,o)=>JZ(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return y4(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),m4(o,(l,c)=>JZ(t,i,s,l,c,n,a),r),y4(t,s,!1),n&&t.patches_&&M1("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function JZ(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=sL(i);if(!(a&&!o)){if(c2(i)){const l=s&&e&&e.type_!==3&&!x8(e.assigned_,r)?s.concat(r):void 0,c=g4(t,i,l);if(Zce(n,r,c),c2(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(R1(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;g4(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(cC(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&y4(t,i)}}}function y4(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&mU(e,n)}function EMe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Jce(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=gU;n&&(i=[r],s=jk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var gU={get(t,e){if(e===wc)return t;const n=iy(t);if(!x8(n,e))return SMe(t,n,e);const r=n[e];return t.finalized_||!R1(r)?r:r===vj(t.base_,e)?(_j(t),t.copy_[e]=T8(r,t)):r},has(t,e){return e in iy(t)},ownKeys(t){return Reflect.ownKeys(iy(t))},set(t,e,n){const r=Qce(iy(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=vj(iy(t),e),s=i?.[wc];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(vMe(n,i)&&(n!==void 0||x8(t.base_,e)))return!0;_j(t),S8(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return vj(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,_j(t),S8(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=iy(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){eh(11)},getPrototypeOf(t){return Ok(t.base_)},setPrototypeOf(){eh(12)}},jk={};m4(gU,(t,e)=>{jk[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});jk.deleteProperty=function(t,e){return jk.set.call(this,t,e,void 0)};jk.set=function(t,e,n){return gU.set.call(this,t[0],e,n,t[0])};function vj(t,e){const n=t[wc];return(n?iy(n):t)[e]}function SMe(t,e,n){const r=Qce(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Qce(t,e){if(!(e in t))return;let n=Ok(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ok(n)}}function S8(t){t.modified_||(t.modified_=!0,t.parent_&&S8(t.parent_))}function _j(t){t.copy_||(t.copy_=w8(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var TMe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&eh(6),r!==void 0&&typeof r!="function"&&eh(7);let i;if(R1(e)){const s=XZ(this),o=T8(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?b8(s):E8(s)}return YZ(s,r),ZZ(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Yce&&(i=void 0),this.autoFreeze_&&mU(i,!0),r){const s=[],o=[];M1("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else eh(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){R1(t)||eh(8),c2(t)&&(t=kMe(t));const e=XZ(this),n=T8(t,void 0);return n[wc].isManual_=!0,E8(e),n}finishDraft(t,e){const n=t&&t[wc];(!n||!n.isManual_)&&eh(9);const{scope_:r}=n;return YZ(r,e),ZZ(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=M1("Patches").applyPatches_;return c2(t)?r(t,e):this.produce(t,i=>r(i,e))}};function T8(t,e){const n=cC(t)?M1("MapSet").proxyMap_(t,e):iL(t)?M1("MapSet").proxySet_(t,e):EMe(t,e);return(e?e.scope_:Jce()).drafts_.push(n),n}function kMe(t){return c2(t)||eh(10,t),eue(t)}function eue(t){if(!R1(t)||sL(t))return t;const e=t[wc];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=w8(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=w8(t,!0);return m4(n,(i,s)=>{Zce(n,i,eue(s))},r),e&&(e.finalized_=!1),n}var AMe=new TMe,CMe=AMe.produce;const IMe=t=>(e,n,r)=>(r.setState=(i,s,...o)=>{const a=typeof i=="function"?CMe(i):i;return e(a,s,...o)},t(r.setState,n,r)),ub=IMe,Is=vo()(ub((t,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,rawGPSHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,navigationMode:"free",config:{centerOnUser:!0},fetchPassivePosition:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{t(r=>{r.tracking||(r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy)})},()=>{},{enableHighAccuracy:!1,maximumAge:6e4,timeout:1e4})},startTracking:()=>{t(n=>{n.tracking=!0})},stopTracking:()=>{t(n=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),n.tracking=!1,n.speed=null,n.headingSource=null,n.heading=null,n.smoothHeading=null,n.rawGPSHeading=null,n.watchId=null,n.navigationMode="free"})},updatePosition:n=>{t(r=>{r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy,r.speed=n.coords.speed,r.rawGPSHeading=n.coords.heading,n.coords.accuracy!==null&&n.coords.accuracy<20?n.coords.heading!==null&&n.coords.speed!==null&&n.coords.speed>.5?r.headingSource="gps":r.headingSource="compass":r.headingSource=null})},setSmoothedHeading:n=>{t(r=>{r.smoothHeading=n,r.heading=n})},setWatchId:n=>{t(r=>{r.watchId=n})},resetFirstFix:()=>{t(n=>{n.firstFix=!1})},setNavigationMode:n=>{t(r=>{r.navigationMode=n})},toggleNavigationMode:()=>{t(n=>{n.navigationMode=n.navigationMode==="free"?"headingUp":"free"})}}))),Uy={Kansenkaart:{name:"Kansenkaart",factory:async()=>{const{createKansenkaartLayerOL:t}=await ge(async()=>{const{createKansenkaartLayerOL:e}=await import("./kansenkaartOL-BrDyKQl9.js");return{createKansenkaartLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:t}=await ge(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createAHNLayerOL:e}},[]);return t()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:t}=await ge(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createGeomorfologieLayerOL:e}},[]);return t()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:t}=await ge(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createBodemkaartLayerOL:e}},[]);return t()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:t}=await ge(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createIKAWLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:t}=await ge(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createFAMKESteentijdLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE IJzertijd":{name:"FAMKE IJzertijd",factory:async()=>{const{createFAMKEIJzertijdLayerOL:t}=await ge(async()=>{const{createFAMKEIJzertijdLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createFAMKEIJzertijdLayerOL:e}},[]);return t()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:t}=await ge(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createEssenLayerOL:e}},[]);return t()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:t}=await ge(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createRijksmonumentenLayerOL:e}},[]);return t()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:t}=await ge(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return t()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:t}=await ge(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createWerelderfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:t}=await ge(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-CAlO-CMg.js");return{createTerpenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:t}=await ge(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-C_lI5aF-.js");return{createLiniesLayerOL:e}},[]);return t()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:t}=await ge(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-C_lI5aF-.js");return{createInundatiesLayerOL:e}},[]);return t()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:t}=await ge(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-C_lI5aF-.js");return{createMilitaireObjectenLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:t}=await ge(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo800ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:t}=await ge(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo100ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:t}=await ge(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:t}=await ge(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo1500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:t}=await ge(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo2750vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:t}=await ge(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo5500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:t}=await ge(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-BNnRWf06.js");return{createPaleo9000vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:t}=await ge(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-hn75kKTw.js");return{createReligieusErfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:t}=await ge(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-B6kN4d8W.js");return{createAHN4ColorElevationLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:t}=await ge(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-B6kN4d8W.js");return{createAHN4HillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:t}=await ge(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-B6kN4d8W.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade Kleur":{name:"AHN4 Hillshade Kleur",factory:async()=>{const{createAHN4ShadedReliefLayerOL:t}=await ge(async()=>{const{createAHN4ShadedReliefLayerOL:e}=await import("./hillshadeLayers-B6kN4d8W.js");return{createAHN4ShadedReliefLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:t}=await ge(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createGewaspercelenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:t}=await ge(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createKadastraleKaartLayerOL:e}},[]);return t()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:t}=await ge(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createScheepswrakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:t}=await ge(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createWoonheuvelsLayerOL:e}},[]);return t()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:t}=await ge(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./romeinseFortenOL-DfIN-Wek.js");return{createRomeinseFortenLayerOL:e}},__vite__mapDeps([0,1]));return t()},immediateLoad:!1},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:t}=await ge(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createWindmolensLayerOL:e}},[]);return t()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:t}=await ge(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createErfgoedlijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:t}=await ge(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createOudeKernenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenPuntenLayerOL:t}=await ge(async()=>{const{createRelictenPuntenLayerOL:e}=await import("./relictenGelderlandOL-gjqyItbh.js");return{createRelictenPuntenLayerOL:e}},[]);return t()},immediateLoad:!1},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:t}=await ge(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:t}=await ge(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:t}=await ge(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-BelIJBj4.js");return{createVerdronkenDorpenLayerOL:e}},[]);return t()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:t}=await ge(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:t}=await ge(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKRomeinsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:t}=await ge(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKSteentijdLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:t}=await ge(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKVroegeMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:t}=await ge(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKLateMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:t}=await ge(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-DvCVzaFH.js");return{createAMKOverigLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:t}=await ge(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-COAEy6p5.js");return{createRomeinseWegenLayerOL:e}},[]);return t()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:t}=await ge(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-COAEy6p5.js");return{createRomeinseWegenWereldLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:t}=await ge(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-CD_7gOxV.js");return{createKastelenLayerOL:e}},__vite__mapDeps([2,1]));return t()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:t}=await ge(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-S2GzxBss.js");return{createRuinesLayerOL:e}},__vite__mapDeps([3,1]));return t()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:t}=await ge(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-BXdqV7XQ.js");return{createVeengebiedenLayerOL:e}},[]);return t()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:t}=await ge(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-BZ_hyDGo.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([4,1]));return t()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:t}=await ge(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-Cz3YRmvX.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([5,1]));return t()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:t}=await ge(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-Br4CHqBz.js");return{createUIKAVVlakkenLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:t}=await ge(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-N2_cJvD3.js");return{createUIKAVBufferlaagLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:t}=await ge(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-B5MdPBih.js");return{createUIKAVExpertLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:t}=await ge(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-B5hB6j6L.js");return{createUIKAVUiterwaardenLayerOL:e}},[]);return t()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:t}=await ge(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-DresBiP7.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([6,1]));return t()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:t}=await ge(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-CsSbySJC.js");return{createMuseaLayerOL:e}},__vite__mapDeps([7,1]));return t()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:t}=await ge(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-EDYSrTyl.js");return{createStrandjesLayerOL:e}},[]);return t()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:t}=await ge(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-CIdRyStd.js");return{createParkenLayerOL:e}},[]);return t()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:t}=await ge(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-B7oqoiBD.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([8,1]));return t()},immediateLoad:!1},Ruiterpaden:{name:"Ruiterpaden",factory:async()=>{const{createRuiterpadenLayerOL:t}=await ge(async()=>{const{createRuiterpadenLayerOL:e}=await import("./ruiterpadenOL-CuVXm42F.js");return{createRuiterpadenLayerOL:e}},[]);return t()},immediateLoad:!1},Laarzenpaden:{name:"Laarzenpaden",factory:async()=>{const{createLaarzenpadenLayerOL:t}=await ge(async()=>{const{createLaarzenpadenLayerOL:e}=await import("./laarzenpadenOL-BM0kg2sF.js");return{createLaarzenpadenLayerOL:e}},[]);return t()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:t}=await ge(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-C3tHG5PR.js");return{createFossielenLayerOL:e}},__vite__mapDeps([9,10,1]));return t()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:t}=await ge(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-BpHOuE_g.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([11,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:t}=await ge(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-Dl6f8e48.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([12,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:t}=await ge(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-C1-7lcbx.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([13,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:t}=await ge(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-jUt7JA-L.js");return{createFossielHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:t}=await ge(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-DA4OSwhK.js");return{createMineralenHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:t}=await ge(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-Dv4G6m9Y.js");return{createGoudrivierenLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:t}=await ge(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-BSaK-gJY.js");return{createBunkersLayerOL:e}},__vite__mapDeps([14,1]));return t()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:t}=await ge(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-Di_-aQQ6.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([15,1]));return t()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:t}=await ge(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-DTj6rpL2.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([16,1]));return t()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:t}=await ge(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-BueNZo9V.js");return{createVliegveldenLayerOL:e}},[]);return t()},immediateLoad:!1},"Monumenten BE":{name:"Monumenten BE",factory:async()=>{const{createBeschermdeMonumentenBELayerOL:t}=await ge(async()=>{const{createBeschermdeMonumentenBELayerOL:e}=await import("./belgieErfgoedLayers-Bp2kioEw.js");return{createBeschermdeMonumentenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Archeo Zones BE":{name:"Archeo Zones BE",factory:async()=>{const{createArcheoZonesBELayerOL:t}=await ge(async()=>{const{createArcheoZonesBELayerOL:e}=await import("./belgieErfgoedLayers-Bp2kioEw.js");return{createArcheoZonesBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Arch Sites BE":{name:"Arch Sites BE",factory:async()=>{const{createBeschArchSitesBELayerOL:t}=await ge(async()=>{const{createBeschArchSitesBELayerOL:e}=await import("./belgieErfgoedLayers-Bp2kioEw.js");return{createBeschArchSitesBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Erfgoed Landschap BE":{name:"Erfgoed Landschap BE",factory:async()=>{const{createErfgoedLandschappenBELayerOL:t}=await ge(async()=>{const{createErfgoedLandschappenBELayerOL:e}=await import("./belgieErfgoedLayers-Bp2kioEw.js");return{createErfgoedLandschappenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"CAI Elementen":{name:"CAI Elementen",factory:async()=>{const{createCAIElementenBELayerOL:t}=await ge(async()=>{const{createCAIElementenBELayerOL:e}=await import("./belgieErfgoedLayers-Bp2kioEw.js");return{createCAIElementenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Hist. Gebouwen FR":{name:"Hist. Gebouwen FR",factory:async()=>{const{createFrankrijkMonumentenLayerOL:t}=await ge(async()=>{const{createFrankrijkMonumentenLayerOL:e}=await import("./frankrijkMonumentenOL-BkJ7qt6W.js");return{createFrankrijkMonumentenLayerOL:e}},__vite__mapDeps([17,1]));return t()},immediateLoad:!1,regions:["fr"]},"INRAP Sites FR":{name:"INRAP Sites FR",factory:async()=>{const{createInrapSitesFRLayerOL:t}=await ge(async()=>{const{createInrapSitesFRLayerOL:e}=await import("./inrapSitesFROL-C3cVBAt9.js");return{createInrapSitesFRLayerOL:e}},__vite__mapDeps([18,1]));return t()},immediateLoad:!1,regions:["fr"]},"Archeo Sites Bretagne":{name:"Archeo Sites Bretagne",factory:async()=>{const{createArcheoBretagneLayerOL:t}=await ge(async()=>{const{createArcheoBretagneLayerOL:e}=await import("./archeoBretagneOL-f_dOOG2r.js");return{createArcheoBretagneLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Operaties Bretagne":{name:"Operaties Bretagne",factory:async()=>{const{createBretagneOperationsLayerOL:t}=await ge(async()=>{const{createBretagneOperationsLayerOL:e}=await import("./bretagneOperationsOL-BIdjU-Dj.js");return{createBretagneOperationsLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Archeo Parijs":{name:"Archeo Parijs",factory:async()=>{const{createParisArcheoLayerOL:t}=await ge(async()=>{const{createParisArcheoLayerOL:e}=await import("./parisArcheoOL-PCPGtY37.js");return{createParisArcheoLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine Occitanie":{name:"Sites Patrimoine Occitanie",factory:async()=>{const{createOccitaniePatrimoineLayerOL:t}=await ge(async()=>{const{createOccitaniePatrimoineLayerOL:e}=await import("./occitaniePatrimoineOL-Cknv81Ux.js");return{createOccitaniePatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine PACA":{name:"Sites Patrimoine PACA",factory:async()=>{const{createPacaPatrimoineLayerOL:t}=await ge(async()=>{const{createPacaPatrimoineLayerOL:e}=await import("./pacaPatrimoineOL-BaA735nH.js");return{createPacaPatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine Normandie":{name:"Sites Patrimoine Normandie",factory:async()=>{const{createNormandiePatrimoineLayerOL:t}=await ge(async()=>{const{createNormandiePatrimoineLayerOL:e}=await import("./normandiePatrimoineOL-BVDhhXjV.js");return{createNormandiePatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},Maginotlinie:{name:"Maginotlinie",factory:async()=>{const{createWikimaginotLayerOL:t}=await ge(async()=>{const{createWikimaginotLayerOL:e}=await import("./wikimaginotOL-DuVuugkr.js");return{createWikimaginotLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr","de"]},"Sites Classs Bretagne":{name:"Sites Classs Bretagne",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Bretagne")},immediateLoad:!1,regions:["fr"]},"Sites Classs Normandie":{name:"Sites Classs Normandie",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Normandie")},immediateLoad:!1,regions:["fr"]},"Sites Classs Hauts-de-France":{name:"Sites Classs Hauts-de-France",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Hauts-de-France")},immediateLoad:!1,regions:["fr"]},"Sites Classs Grand Est":{name:"Sites Classs Grand Est",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Grand Est")},immediateLoad:!1,regions:["fr"]},"Sites Classs le-de-France":{name:"Sites Classs le-de-France",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs le-de-France")},immediateLoad:!1,regions:["fr"]},"Sites Classs Centre-Val de Loire":{name:"Sites Classs Centre-Val de Loire",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Centre-Val de Loire")},immediateLoad:!1,regions:["fr"]},"Sites Classs Bourgogne-FC":{name:"Sites Classs Bourgogne-FC",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Bourgogne-FC")},immediateLoad:!1,regions:["fr"]},"Sites Classs Pays de la Loire":{name:"Sites Classs Pays de la Loire",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Pays de la Loire")},immediateLoad:!1,regions:["fr"]},"Sites Classs Nouvelle-Aquitaine":{name:"Sites Classs Nouvelle-Aquitaine",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Nouvelle-Aquitaine")},immediateLoad:!1,regions:["fr"]},"Sites Classs Auvergne-RA":{name:"Sites Classs Auvergne-RA",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Auvergne-RA")},immediateLoad:!1,regions:["fr"]},"Sites Classs Occitanie":{name:"Sites Classs Occitanie",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Occitanie")},immediateLoad:!1,regions:["fr"]},"Sites Classs PACA":{name:"Sites Classs PACA",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs PACA")},immediateLoad:!1,regions:["fr"]},"Sites Classs Corse":{name:"Sites Classs Corse",factory:async()=>{const{createSitesClassesRegionLayerOL:t}=await ge(async()=>{const{createSitesClassesRegionLayerOL:e}=await import("./sitesClassesRegionOL-Bj6Utq0E.js");return{createSitesClassesRegionLayerOL:e}},[]);return t("Sites Classs Corse")},immediateLoad:!1,regions:["fr"]},"Monumenten IDF":{name:"Monumenten IDF",factory:async()=>{const{createMonumentsIdfLayerOL:t}=await ge(async()=>{const{createMonumentsIdfLayerOL:e}=await import("./monumentsIdfOL-DMibJUrg.js");return{createMonumentsIdfLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]}};function PMe(){return Object.values(Uy).filter(t=>t.immediateLoad&&t.platform!=="arcgis")}const li=vo()(ub((t,e)=>({map:null,arcgisMap:null,arcgisView:null,arcgisInitialized:!1,rotation:0,rotationEnabled:!0,setMap:n=>{t(r=>{r.map=n})},setArcGISMap:(n,r)=>{t(i=>{i.arcgisMap=n,i.arcgisView=r,i.arcgisInitialized=!0})},setRotation:n=>{t(r=>{if(r.rotation=n,r.map&&r.rotationEnabled){const i=n*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{t(n=>{n.rotationEnabled=!0})},disableRotation:()=>{t(n=>{n.rotationEnabled=!1,n.rotation=0,n.map&&n.map.getView().animate({rotation:0,duration:500})})}}))),Ws=vo()(ub((t,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Satelliet (wereld)":!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,"FAMKE IJzertijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Archeo Onderzoeken":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN4 Hillshade Kleur":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,"Monumenten BE":!1,"Archeo Zones BE":!1,"Arch Sites BE":!1,"Erfgoed Landschap BE":!1,"CAI Elementen":!1,"Hist. Gebouwen FR":!1,"INRAP Sites FR":!1,"Archeo Sites Bretagne":!1,"Operaties Bretagne":!1,"Archeo Parijs":!1,"Sites Patrimoine Occitanie":!1,"Sites Patrimoine PACA":!1,"Sites Patrimoine Normandie":!1,Maginotlinie:!1,"Sites Classs Bretagne":!1,"Sites Classs Normandie":!1,"Sites Classs Hauts-de-France":!1,"Sites Classs Grand Est":!1,"Sites Classs le-de-France":!1,"Sites Classs Centre-Val de Loire":!1,"Sites Classs Bourgogne-FC":!1,"Sites Classs Pays de la Loire":!1,"Sites Classs Nouvelle-Aquitaine":!1,"Sites Classs Auvergne-RA":!1,"Sites Classs Occitanie":!1,"Sites Classs PACA":!1,"Sites Classs Corse":!1,"Monumenten IDF":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Ruiterpaden:!1,Laarzenpaden:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN4 Hillshade Kleur":.8,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"FAMKE Steentijd":.6,"FAMKE IJzertijd":.6,Essen:.6,Terpen:.7,"AMK Monumenten":.45,"AMK Romeins":.6,"AMK Steentijd":.6,"AMK Vroege ME":.6,"AMK Late ME":.6,"AMK Overig":.6,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5,"Sites Classs Bretagne":.5,"Sites Classs Normandie":.5,"Sites Classs Hauts-de-France":.5,"Sites Classs Grand Est":.5,"Sites Classs le-de-France":.5,"Sites Classs Centre-Val de Loire":.5,"Sites Classs Bourgogne-FC":.5,"Sites Classs Pays de la Loire":.5,"Sites Classs Nouvelle-Aquitaine":.5,"Sites Classs Auvergne-RA":.5,"Sites Classs Occitanie":.5,"Sites Classs PACA":.5,"Sites Classs Corse":.5},loadingState:{},layers:{},arcgisLayers:{},toggleLayer:n=>{const r=e(),i=!r.visible[n];t(a=>{a.visible[n]=i}),Uy[n]?.platform==="arcgis"?i&&!r.arcgisLayers[n]?e().loadLayer(n):r.arcgisLayers[n]&&(r.arcgisLayers[n].visible=i):i&&!r.layers[n]?e().loadLayer(n):r.layers[n]&&r.layers[n].setVisible(i)},setLayerVisibility:(n,r)=>{const i=e(),o=Uy[n]?.platform==="arcgis";t(l=>{if(l.visible[n]=r,o){const c=l.arcgisLayers[n];c&&(c.visible=r)}else{const c=l.layers[n];c&&c.setVisible(r)}});const a=o?i.arcgisLayers[n]:i.layers[n];r&&!a&&e().loadLayer(n)},setLayerOpacity:(n,r)=>{const s=Uy[n]?.platform==="arcgis";t(o=>{if(o.opacity[n]=r,s){const a=o.arcgisLayers[n];a&&(a.opacity=r)}else{const a=o.layers[n];a&&a.setOpacity(r)}})},registerLayer:(n,r)=>{t(i=>{i.layers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&r.setVisible(i.visible[n]),i.opacity[n]!==void 0&&r.setOpacity(i.opacity[n])})},registerArcGISLayer:(n,r)=>{t(i=>{i.arcgisLayers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&(r.visible=i.visible[n]),i.opacity[n]!==void 0&&(r.opacity=i.opacity[n])})},unregisterLayer:n=>{t(r=>{delete r.layers[n],delete r.arcgisLayers[n],delete r.loadingState[n]})},loadLayer:async n=>{const r=e(),i=Uy[n];if(!i){console.warn(` Layer "${n}" not found in registry`);return}const s=i.platform==="arcgis";if(r.loadingState[n]==="loading"||s&&r.arcgisLayers[n]||!s&&r.layers[n])return;const o=li.getState();if(s){if(!o.arcgisMap||!o.arcgisInitialized){console.warn(` Cannot load ArcGIS layer "${n}": ArcGIS map not initialized`);return}}else if(!o.map){console.warn(` Cannot load layer "${n}": map not initialized`);return}t(a=>{a.loadingState[n]="loading"}),console.log(` Loading ${s?"ArcGIS":"OL"} layer: ${n}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const l=e();if(s){const c=a;c.visible=l.visible[n]??!1,l.opacity[n]!==void 0&&(c.opacity=l.opacity[n]),o.arcgisMap.add(c),t(u=>{u.arcgisLayers[n]=c,u.loadingState[n]="loaded"})}else{const c=a;c.setVisible(l.visible[n]??!1),l.opacity[n]!==void 0&&c.setOpacity(l.opacity[n]),o.map.addLayer(c),t(u=>{u.layers[n]=c,u.loadingState[n]="loaded"})}console.log(` Layer loaded: ${n}`)}catch(a){console.error(` Failed to load layer "${n}":`,a),t(l=>{l.loadingState[n]="error"})}}}))),gr=vo()(ub((t,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,monumentSearchOpen:!1,monumentFilterOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstFormPhoto:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,routeDashboardOpen:!1,isDrawingMode:!1,collapsedCategories:new Set,closeAllPanels:()=>{t(n=>{n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1})},toggleLayerControl:()=>{t(n=>{n.layerControlOpen=!n.layerControlOpen})},toggleLegend:()=>{t(n=>{n.legendOpen=!n.legendOpen})},toggleBackgroundsPanel:()=>{t(n=>{const r=n.backgroundsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{t(n=>{const r=n.themesPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{t(n=>{const r=n.settingsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{t(n=>{const r=n.infoPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.infoPanelOpen=!0)})},togglePresetsPanel:()=>{t(n=>{const r=n.presetsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.presetsPanelOpen=!0)})},toggleCategory:n=>{t(r=>{r.collapsedCategories.has(n)?r.collapsedCategories.delete(n):r.collapsedCategories.add(n)})},setLayerControlOpen:n=>{t(r=>{r.layerControlOpen=n})},setLegendOpen:n=>{t(r=>{r.legendOpen=n})},openVondstForm:(n,r)=>{t(i=>{i.backgroundsPanelOpen=!1,i.themesPanelOpen=!1,i.settingsPanelOpen=!1,i.infoPanelOpen=!1,i.presetsPanelOpen=!1,i.vondstFormOpen=!0,i.vondstFormLocation=n||null,i.vondstFormPhoto=r||null})},closeVondstForm:()=>{t(n=>{n.vondstFormOpen=!1,n.vondstFormLocation=null,n.vondstFormPhoto=null})},toggleVondstDashboard:()=>{t(n=>{const r=n.vondstDashboardOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!1})},openAddPointModal:(n,r)=>{t(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=n,i.addPointModalLocation=r})},closeAddPointModal:()=>{t(n=>{n.addPointModalOpen=!1,n.addPointModalLayerId=null,n.addPointModalLocation=null})},openLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!1})},openLayerDashboard:n=>{t(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=n,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{t(n=>{n.layerDashboardOpen=!1,n.layerDashboardLayerId=null})},toggleRouteDashboard:()=>{t(n=>{n.routeDashboardOpen=!n.routeDashboardOpen})},toggleMonumentSearch:()=>{t(n=>{const r=n.monumentSearchOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentSearchOpen=!r})},closeMonumentSearch:()=>{t(n=>{n.monumentSearchOpen=!1})},toggleMonumentFilter:()=>{t(n=>{const r=n.monumentFilterOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.monumentFilterOpen=!0)})},closeMonumentFilter:()=>{t(n=>{n.monumentFilterOpen=!1})},setDrawingMode:n=>{t(r=>{r.isDrawingMode=n})}}))),RMe=()=>{};var QZ={};const tue=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MMe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[u],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tue(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MMe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new NMe;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NMe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LMe=function(t){const e=tue(t);return nue.encodeByteArray(e,!0)},v4=function(t){return LMe(t).replace(/\./g,"")},rue=function(t){try{return nue.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function iue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OMe=()=>iue().__FIREBASE_DEFAULTS__,DMe=()=>{if(typeof process>"u"||typeof QZ>"u")return;const t=QZ.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jMe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rue(t[1]);return e&&JSON.parse(e)},oL=()=>{try{return RMe()||OMe()||DMe()||jMe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sue=t=>oL()?.emulatorHosts?.[t],FMe=t=>{const e=sue(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oue=()=>oL()?.config,aue=t=>oL()?.[`_${t}`];let $Me=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function pv(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yU(t){return(await fetch(t,{credentials:"include"})).ok}function VMe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[v4(JSON.stringify(n)),v4(JSON.stringify(o)),""].join(".")}const pT={};function zMe(){const t={prod:[],emulator:[]};for(const e of Object.keys(pT))pT[e]?t.emulator.push(e):t.prod.push(e);return t}function GMe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eJ=!1;function lue(t,e){if(typeof window>"u"||typeof document>"u"||!pv(window.location.host)||pT[t]===e||pT[t]||eJ)return;pT[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=zMe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{eJ=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=GMe(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),T=n("preprendIcon"),A=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const C=f.element;a(C),u(b,_);const I=c();l(A,T),C.append(A,y,b,I),document.body.appendChild(C)}s?(y.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Ys(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UMe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ys())}function cue(){const t=oL()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BMe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WMe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HMe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qMe(){const t=Ys();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function uue(){return!cue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hue(){return!cue()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function due(){try{return typeof indexedDB=="object"}catch{return!1}}function KMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const YMe="FirebaseError";class Xd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YMe,Object.setPrototypeOf(this,Xd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uC.prototype.create)}}class uC{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XMe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xd(i,a,r)}}function XMe(t,e){return t.replace(ZMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZMe=/\{\$([^}]+)}/g;function JMe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function N1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tJ(s)&&tJ(o)){if(!N1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tJ(t){return t!==null&&typeof t=="object"}function hC(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function QMe(t,e){const n=new e3e(t,e);return n.subscribe.bind(n)}class e3e{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t3e(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xj),i.error===void 0&&(i.error=xj),i.complete===void 0&&(i.complete=xj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t3e(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xj(){}function go(t){return t&&t._delegate?t._delegate:t}class zg{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sy="[DEFAULT]";class n3e{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new $Me;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i3e(e))try{this.getOrInitializeService({instanceIdentifier:sy})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=sy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sy){return this.instances.has(e)}getOptions(e=sy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r3e(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sy){return this.component?this.component.multipleInstances?e:sy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r3e(t){return t===sy?void 0:t}function i3e(t){return t.instantiationMode==="EAGER"}class s3e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n3e(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var tr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tr||(tr={}));const o3e={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},a3e=tr.INFO,l3e={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},c3e=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=l3e[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vU{constructor(e){this.name=e,this._logLevel=a3e,this._logHandler=c3e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o3e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}const u3e=(t,e)=>e.some(n=>t instanceof n);let nJ,rJ;function h3e(){return nJ||(nJ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d3e(){return rJ||(rJ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fue=new WeakMap,k8=new WeakMap,pue=new WeakMap,wj=new WeakMap,_U=new WeakMap;function f3e(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(kg(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fue.set(n,t)}).catch(()=>{}),_U.set(e,t),e}function p3e(t){if(k8.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});k8.set(t,e)}let A8={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return k8.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pue.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m3e(t){A8=t(A8)}function g3e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bj(this),e,...n);return pue.set(r,e.sort?e.sort():[e]),kg(r)}:d3e().includes(t)?function(...e){return t.apply(bj(this),e),kg(fue.get(this))}:function(...e){return kg(t.apply(bj(this),e))}}function y3e(t){return typeof t=="function"?g3e(t):(t instanceof IDBTransaction&&p3e(t),u3e(t,h3e())?new Proxy(t,A8):t)}function kg(t){if(t instanceof IDBRequest)return f3e(t);if(wj.has(t))return wj.get(t);const e=y3e(t);return e!==t&&(wj.set(t,e),_U.set(e,t)),e}const bj=t=>_U.get(t);function v3e(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=kg(o);return r&&o.addEventListener("upgradeneeded",l=>{r(kg(o.result),l.oldVersion,l.newVersion,kg(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const _3e=["get","getKey","getAll","getAllKeys","count"],x3e=["put","add","delete","clear"],Ej=new Map;function iJ(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ej.get(e))return Ej.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=x3e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_3e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ej.set(e,s),s}m3e(t=>({...t,get:(e,n,r)=>iJ(e,n)||t.get(e,n,r),has:(e,n)=>!!iJ(e,n)||t.has(e,n)}));class w3e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b3e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function b3e(t){return t.getComponent()?.type==="VERSION"}const C8="@firebase/app",sJ="0.14.6";const bp=new vU("@firebase/app"),E3e="@firebase/app-compat",S3e="@firebase/analytics-compat",T3e="@firebase/analytics",k3e="@firebase/app-check-compat",A3e="@firebase/app-check",C3e="@firebase/auth",I3e="@firebase/auth-compat",P3e="@firebase/database",R3e="@firebase/data-connect",M3e="@firebase/database-compat",N3e="@firebase/functions",L3e="@firebase/functions-compat",O3e="@firebase/installations",D3e="@firebase/installations-compat",j3e="@firebase/messaging",F3e="@firebase/messaging-compat",$3e="@firebase/performance",V3e="@firebase/performance-compat",z3e="@firebase/remote-config",G3e="@firebase/remote-config-compat",U3e="@firebase/storage",B3e="@firebase/storage-compat",W3e="@firebase/firestore",H3e="@firebase/ai",q3e="@firebase/firestore-compat",K3e="firebase",Y3e="12.6.0";const I8="[DEFAULT]",X3e={[C8]:"fire-core",[E3e]:"fire-core-compat",[T3e]:"fire-analytics",[S3e]:"fire-analytics-compat",[A3e]:"fire-app-check",[k3e]:"fire-app-check-compat",[C3e]:"fire-auth",[I3e]:"fire-auth-compat",[P3e]:"fire-rtdb",[R3e]:"fire-data-connect",[M3e]:"fire-rtdb-compat",[N3e]:"fire-fn",[L3e]:"fire-fn-compat",[O3e]:"fire-iid",[D3e]:"fire-iid-compat",[j3e]:"fire-fcm",[F3e]:"fire-fcm-compat",[$3e]:"fire-perf",[V3e]:"fire-perf-compat",[z3e]:"fire-rc",[G3e]:"fire-rc-compat",[U3e]:"fire-gcs",[B3e]:"fire-gcs-compat",[W3e]:"fire-fst",[q3e]:"fire-fst-compat",[H3e]:"fire-vertex","fire-js":"fire-js",[K3e]:"fire-js-all"};const _4=new Map,Z3e=new Map,P8=new Map;function oJ(t,e){try{t.container.addComponent(e)}catch(n){bp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function L1(t){const e=t.name;if(P8.has(e))return bp.debug(`There were multiple attempts to register component ${e}.`),!1;P8.set(e,t);for(const n of _4.values())oJ(n,t);for(const n of Z3e.values())oJ(n,t);return!0}function aL(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _l(t){return t==null?!1:t.settings!==void 0}const J3e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ag=new uC("app","Firebase",J3e);class Q3e{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ag.create("app-deleted",{appName:this._name})}}const mv=Y3e;function mue(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:I8,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ag.create("bad-app-name",{appName:String(i)});if(n||(n=oue()),!n)throw Ag.create("no-options");const s=_4.get(i);if(s){if(N1(n,s.options)&&N1(r,s.config))return s;throw Ag.create("duplicate-app",{appName:i})}const o=new s3e(i);for(const l of P8.values())o.addComponent(l);const a=new Q3e(n,r,o);return _4.set(i,a),a}function gue(t=I8){const e=_4.get(t);if(!e&&t===I8&&oue())return mue();if(!e)throw Ag.create("no-app",{appName:t});return e}function Ed(t,e,n){let r=X3e[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bp.warn(o.join(" "));return}L1(new zg(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const e4e="firebase-heartbeat-database",t4e=1,Fk="firebase-heartbeat-store";let Sj=null;function yue(){return Sj||(Sj=v3e(e4e,t4e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fk)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ag.create("idb-open",{originalErrorMessage:t.message})})),Sj}async function n4e(t){try{const n=(await yue()).transaction(Fk),r=await n.objectStore(Fk).get(vue(t));return await n.done,r}catch(e){if(e instanceof Xd)bp.warn(e.message);else{const n=Ag.create("idb-get",{originalErrorMessage:e?.message});bp.warn(n.message)}}}async function aJ(t,e){try{const r=(await yue()).transaction(Fk,"readwrite");await r.objectStore(Fk).put(e,vue(t)),await r.done}catch(n){if(n instanceof Xd)bp.warn(n.message);else{const r=Ag.create("idb-set",{originalErrorMessage:n?.message});bp.warn(r.message)}}}function vue(t){return`${t.name}!${t.options.appId}`}const r4e=1024,i4e=30;class s4e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a4e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lJ();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>i4e){const i=l4e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bp.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lJ(),{heartbeatsToSend:n,unsentEntries:r}=o4e(this._heartbeatsCache.heartbeats),i=v4(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bp.warn(e),""}}}function lJ(){return new Date().toISOString().substring(0,10)}function o4e(t,e=r4e){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cJ(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cJ(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a4e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return due()?KMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n4e(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cJ(t){return v4(JSON.stringify({version:2,heartbeats:t})).length}function l4e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function c4e(t){L1(new zg("platform-logger",e=>new w3e(e),"PRIVATE")),L1(new zg("heartbeat",e=>new s4e(e),"PRIVATE")),Ed(C8,sJ,t),Ed(C8,sJ,"esm2020"),Ed("fire-js","")}c4e("");function _ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u4e=_ue,xue=new uC("auth","Firebase",_ue());const x4=new vU("@firebase/auth");function h4e(t,...e){x4.logLevel<=tr.WARN&&x4.warn(`Auth (${mv}): ${t}`,...e)}function pM(t,...e){x4.logLevel<=tr.ERROR&&x4.error(`Auth (${mv}): ${t}`,...e)}function Dd(t,...e){throw wU(t,...e)}function ph(t,...e){return wU(t,...e)}function xU(t,e,n){const r={...u4e(),[e]:n};return new uC("auth","Firebase",r).create(e,{appName:t.name})}function hp(t){return xU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wue(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dd(t,"argument-error"),xU(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wU(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xue.create(t,...e)}function Pn(t,e,...n){if(!t)throw wU(e,...n)}function tp(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pM(e),new Error(e)}function Ep(t,e){t||tp(e)}function R8(){return typeof self<"u"&&self.location?.href||""}function d4e(){return uJ()==="http:"||uJ()==="https:"}function uJ(){return typeof self<"u"&&self.location?.protocol||null}function f4e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d4e()||WMe()||"connection"in navigator)?navigator.onLine:!0}function p4e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class dC{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ep(n>e,"Short delay should be less than long delay!"),this.isMobile=UMe()||HMe()}get(){return f4e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bU(t,e){Ep(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class bue{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const m4e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const g4e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y4e=new dC(3e4,6e4);function lL(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function hb(t,e,n,r,i={}){return Eue(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hC({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return BMe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&pv(t.emulatorConfig.host)&&(c.credentials="include"),bue.fetch()(await Tue(t,t.config.apiHost,n,a),c)})}async function Eue(t,e,n){t._canInitEmulator=!1;const r={...m4e,...e};try{const i=new v4e(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw OP(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw OP(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw OP(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw OP(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xU(t,u,c);Dd(t,u)}}catch(i){if(i instanceof Xd)throw i;Dd(t,"network-request-failed",{message:String(i)})}}async function Sue(t,e,n,r,i={}){const s=await hb(t,e,n,r,i);return"mfaPendingCredential"in s&&Dd(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Tue(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?bU(t.config,i):`${t.config.apiScheme}://${i}`;return g4e.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class v4e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ph(this.auth,"network-request-failed")),y4e.get())})}}function OP(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ph(t,e,r);return i.customData._tokenResponse=n,i}async function _4e(t,e){return hb(t,"POST","/v1/accounts:delete",e)}async function w4(t,e){return hb(t,"POST","/v1/accounts:lookup",e)}function mT(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function x4e(t,e=!1){const n=go(t),r=await n.getIdToken(e),i=EU(r);Pn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:mT(Tj(i.auth_time)),issuedAtTime:mT(Tj(i.iat)),expirationTime:mT(Tj(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Tj(t){return Number(t)*1e3}function EU(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pM("JWT malformed, contained fewer than 3 sections"),null;try{const i=rue(n);return i?JSON.parse(i):(pM("Failed to decode base64 JWT payload"),null)}catch(i){return pM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hJ(t){const e=EU(t);return Pn(e,"internal-error"),Pn(typeof e.exp<"u","internal-error"),Pn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $k(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xd&&w4e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function w4e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class b4e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class M8{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mT(this.lastLoginAt),this.creationTime=mT(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function b4(t){const e=t.auth,n=await t.getIdToken(),r=await $k(t,w4(e,{idToken:n}));Pn(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?kue(i.providerUserInfo):[],o=S4e(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new M8(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function E4e(t){const e=go(t);await b4(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S4e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kue(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function T4e(t,e){const n=await Eue(t,{},async()=>{const r=hC({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Tue(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&pv(t.emulatorConfig.host)&&(l.credentials="include"),bue.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k4e(t,e){return hb(t,"POST","/v2/accounts:revokeToken",lL(t,e))}class sw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pn(e.idToken,"internal-error"),Pn(typeof e.idToken<"u","internal-error"),Pn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hJ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pn(e.length!==0,"internal-error");const n=hJ(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await T4e(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new sw;return r&&(Pn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Pn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Pn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sw,this.toJSON())}_performRefresh(){return tp("not implemented")}}function dm(t,e){Pn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ch{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new b4e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new M8(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $k(this,this.stsTokenManager.getToken(this.auth,e));return Pn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return x4e(this,e)}reload(){return E4e(this)}_assign(e){this!==e&&(Pn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ch({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await b4(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_l(this.auth.app))return Promise.reject(hp(this.auth));const e=await this.getIdToken();return await $k(this,_4e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:y,stsTokenManager:_}=n;Pn(h&&_,e,"internal-error");const b=sw.fromJSON(this.name,_);Pn(typeof h=="string",e,"internal-error"),dm(r,e.name),dm(i,e.name),Pn(typeof f=="boolean",e,"internal-error"),Pn(typeof g=="boolean",e,"internal-error"),dm(s,e.name),dm(o,e.name),dm(a,e.name),dm(l,e.name),dm(c,e.name),dm(u,e.name);const T=new ch({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(T.providerData=y.map(A=>({...A}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new sw;i.updateFromServerResponse(n);const s=new ch({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await b4(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?kue(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new sw;a.updateFromIdToken(r);const l=new ch({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new M8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}const dJ=new Map;function np(t){Ep(t instanceof Function,"Expected a class definition");let e=dJ.get(t);return e?(Ep(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dJ.set(t,e),e)}class Aue{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Aue.type="NONE";const fJ=Aue;function mM(t,e,n){return`firebase:${t}:${e}:${n}`}class ow{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mM(this.userKey,i.apiKey,s),this.fullPersistenceKey=mM("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await w4(this.auth,{idToken:e}).catch(()=>{});return n?ch._fromGetAccountInfoResponse(this.auth,n,e):null}return ch._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ow(np(fJ),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||np(fJ);const o=mM(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await w4(e,{idToken:u}).catch(()=>{});if(!f)break;h=await ch._fromGetAccountInfoResponse(e,f,u)}else h=ch._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new ow(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ow(s,e,r))}}function pJ(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rue(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cue(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nue(e))return"Blackberry";if(Lue(e))return"Webos";if(Iue(e))return"Safari";if((e.includes("chrome/")||Pue(e))&&!e.includes("edge/"))return"Chrome";if(Mue(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Cue(t=Ys()){return/firefox\//i.test(t)}function Iue(t=Ys()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pue(t=Ys()){return/crios\//i.test(t)}function Rue(t=Ys()){return/iemobile/i.test(t)}function Mue(t=Ys()){return/android/i.test(t)}function Nue(t=Ys()){return/blackberry/i.test(t)}function Lue(t=Ys()){return/webos/i.test(t)}function SU(t=Ys()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A4e(t=Ys()){return SU(t)&&!!window.navigator?.standalone}function C4e(){return qMe()&&document.documentMode===10}function Oue(t=Ys()){return SU(t)||Mue(t)||Lue(t)||Nue(t)||/windows phone/i.test(t)||Rue(t)}function Due(t,e=[]){let n;switch(t){case"Browser":n=pJ(Ys());break;case"Worker":n=`${pJ(Ys())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mv}/${r}`}class I4e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function P4e(t,e={}){return hb(t,"GET","/v2/passwordPolicy",lL(t,e))}const R4e=6;class M4e{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??R4e,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class N4e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mJ(this),this.idTokenSubscription=new mJ(this),this.beforeStateQueue=new I4e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=np(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ow.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await w4(this,{idToken:e}),r=await ch._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_l(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await b4(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=p4e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_l(this.app))return Promise.reject(hp(this));const n=e?go(e):null;return n&&Pn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _l(this.app)?Promise.reject(hp(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _l(this.app)?Promise.reject(hp(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(np(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P4e(this),n=new M4e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new uC("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k4e(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&np(e)||this._popupRedirectResolver;Pn(n,this,"argument-error"),this.redirectPersistenceManager=await ow.create(this,[np(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Due(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&h4e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gv(t){return go(t)}class mJ{constructor(e){this.auth=e,this.observer=null,this.addObserver=QMe(n=>this.observer=n)}get next(){return Pn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let TU={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L4e(t){TU=t}function O4e(t){return TU.loadJS(t)}function D4e(){return TU.gapiScript}function j4e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function F4e(t,e){const n=aL(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(N1(s,e??{}))return i;Dd(i,"already-initialized")}return n.initialize({options:e})}function $4e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(np);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function V4e(t,e,n){const r=gv(t);Pn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=jue(e),{host:o,port:a}=z4e(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pn(N1(c,r.config.emulator)&&N1(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,pv(o)?(yU(`${s}//${o}${l}`),lue("Auth",!0)):G4e()}function jue(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function z4e(t){const e=jue(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gJ(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gJ(o)}}}function gJ(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G4e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Fue{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return tp("not implemented")}_getIdTokenResponse(e){return tp("not implemented")}_linkToIdToken(e,n){return tp("not implemented")}_getReauthenticationResolver(e){return tp("not implemented")}}async function aw(t,e){return Sue(t,"POST","/v1/accounts:signInWithIdp",lL(t,e))}const U4e="http://localhost";class O1 extends Fue{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new O1(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new O1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return aw(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,aw(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,aw(e,n)}buildRequest(){const e={requestUri:U4e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hC(n)}return e}}class cL{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fC extends cL{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xm extends fC{constructor(){super("facebook.com")}static credential(e){return O1._fromParams({providerId:Xm.PROVIDER_ID,signInMethod:Xm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xm.credentialFromTaggedObject(e)}static credentialFromError(e){return Xm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xm.credential(e.oauthAccessToken)}catch{return null}}}Xm.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xm.PROVIDER_ID="facebook.com";class th extends fC{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return O1._fromParams({providerId:th.PROVIDER_ID,signInMethod:th.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return th.credentialFromTaggedObject(e)}static credentialFromError(e){return th.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return th.credential(n,r)}catch{return null}}}th.GOOGLE_SIGN_IN_METHOD="google.com";th.PROVIDER_ID="google.com";class Zm extends fC{constructor(){super("github.com")}static credential(e){return O1._fromParams({providerId:Zm.PROVIDER_ID,signInMethod:Zm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zm.credentialFromTaggedObject(e)}static credentialFromError(e){return Zm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zm.credential(e.oauthAccessToken)}catch{return null}}}Zm.GITHUB_SIGN_IN_METHOD="github.com";Zm.PROVIDER_ID="github.com";class Jm extends fC{constructor(){super("twitter.com")}static credential(e,n){return O1._fromParams({providerId:Jm.PROVIDER_ID,signInMethod:Jm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jm.credentialFromTaggedObject(e)}static credentialFromError(e){return Jm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jm.credential(n,r)}catch{return null}}}Jm.TWITTER_SIGN_IN_METHOD="twitter.com";Jm.PROVIDER_ID="twitter.com";async function B4e(t,e){return Sue(t,"POST","/v1/accounts:signUp",lL(t,e))}class Gg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ch._fromIdTokenResponse(e,r,i),o=yJ(r);return new Gg({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yJ(r);return new Gg({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yJ(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function W4e(t){if(_l(t.app))return Promise.reject(hp(t));const e=gv(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Gg({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await B4e(e,{returnSecureToken:!0}),r=await Gg._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class E4 extends Xd{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,E4.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new E4(e,n,r,i)}}function $ue(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?E4._fromErrorAndOperation(t,s,e,r):s})}async function H4e(t,e,n=!1){const r=await $k(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gg._forOperation(t,"link",r)}async function q4e(t,e,n=!1){const{auth:r}=t;if(_l(r.app))return Promise.reject(hp(r));const i="reauthenticate";try{const s=await $k(t,$ue(r,i,e,t),n);Pn(s.idToken,r,"internal-error");const o=EU(s.idToken);Pn(o,r,"internal-error");const{sub:a}=o;return Pn(t.uid===a,r,"user-mismatch"),Gg._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dd(r,"user-mismatch"),s}}async function K4e(t,e,n=!1){if(_l(t.app))return Promise.reject(hp(t));const r="signIn",i=await $ue(t,r,e),s=await Gg._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Y4e(t,e,n,r){return go(t).onIdTokenChanged(e,n,r)}function X4e(t,e,n){return go(t).beforeAuthStateChanged(e,n)}function Vue(t,e,n,r){return go(t).onAuthStateChanged(e,n,r)}function zue(t){return go(t).signOut()}const S4="__sak";class Gue{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(S4,"1"),this.storage.removeItem(S4),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Z4e=1e3,J4e=10;class Uue extends Gue{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oue(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);C4e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,J4e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Z4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uue.type="LOCAL";const Q4e=Uue;class Bue extends Gue{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Bue.type="SESSION";const Wue=Bue;function eNe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class uL{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new uL(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await eNe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}uL.receivers=[];function kU(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class tNe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=kU("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Sd(){return window}function nNe(t){Sd().location.href=t}function Hue(){return typeof Sd().WorkerGlobalScope<"u"&&typeof Sd().importScripts=="function"}async function rNe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iNe(){return navigator?.serviceWorker?.controller||null}function sNe(){return Hue()?self:null}const que="firebaseLocalStorageDb",oNe=1,T4="firebaseLocalStorage",Kue="fbase_key";class pC{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hL(t,e){return t.transaction([T4],e?"readwrite":"readonly").objectStore(T4)}function aNe(){const t=indexedDB.deleteDatabase(que);return new pC(t).toPromise()}function N8(){const t=indexedDB.open(que,oNe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(T4,{keyPath:Kue})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(T4)?e(r):(r.close(),await aNe(),e(await N8()))})})}async function vJ(t,e,n){const r=hL(t,!0).put({[Kue]:e,value:n});return new pC(r).toPromise()}async function lNe(t,e){const n=hL(t,!1).get(e),r=await new pC(n).toPromise();return r===void 0?null:r.value}function _J(t,e){const n=hL(t,!0).delete(e);return new pC(n).toPromise()}const cNe=800,uNe=3;class Yue{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N8(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uNe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hue()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uL._getInstance(sNe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rNe(),!this.activeServiceWorker)return;this.sender=new tNe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iNe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N8();return await vJ(e,S4,"1"),await _J(e,S4),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vJ(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>lNe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_J(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hL(i,!1).getAll();return new pC(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yue.type="LOCAL";const hNe=Yue;new dC(3e4,6e4);function AU(t,e){return e?np(e):(Pn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class CU extends Fue{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aw(e,this._buildIdpRequest())}_linkToIdToken(e,n){return aw(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return aw(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dNe(t){return K4e(t.auth,new CU(t),t.bypassAuthState)}function fNe(t){const{auth:e,user:n}=t;return Pn(n,e,"internal-error"),q4e(n,new CU(t),t.bypassAuthState)}async function pNe(t){const{auth:e,user:n}=t;return Pn(n,e,"internal-error"),H4e(n,new CU(t),t.bypassAuthState)}class Xue{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dNe;case"linkViaPopup":case"linkViaRedirect":return pNe;case"reauthViaPopup":case"reauthViaRedirect":return fNe;default:Dd(this.auth,"internal-error")}}resolve(e){Ep(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ep(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mNe=new dC(2e3,1e4);async function xJ(t,e,n){if(_l(t.app))return Promise.reject(ph(t,"operation-not-supported-in-this-environment"));const r=gv(t);wue(t,e,cL);const i=AU(r,n);return new By(r,"signInViaPopup",e,i).executeNotNull()}class By extends Xue{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,By.currentPopupAction&&By.currentPopupAction.cancel(),By.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pn(e,this.auth,"internal-error"),e}async onExecution(){Ep(this.filter.length===1,"Popup operations only handle one event");const e=kU();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ph(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ph(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,By.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ph(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mNe.get())};e()}}By.currentPopupAction=null;const gNe="pendingRedirect",gM=new Map;class yNe extends Xue{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gM.get(this.auth._key());if(!e){try{const r=await vNe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gM.set(this.auth._key(),e)}return this.bypassAuthState||gM.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vNe(t,e){const n=Jue(e),r=Zue(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function _Ne(t,e){return Zue(t)._set(Jue(e),"true")}function xNe(t,e){gM.set(t._key(),e)}function Zue(t){return np(t._redirectPersistence)}function Jue(t){return mM(gNe,t.config.apiKey,t.name)}function wNe(t,e,n){return bNe(t,e,n)}async function bNe(t,e,n){if(_l(t.app))return Promise.reject(hp(t));const r=gv(t);wue(t,e,cL),await r._initializationPromise;const i=AU(r,n);return await _Ne(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function ENe(t,e){return await gv(t)._initializationPromise,Que(t,e,!1)}async function Que(t,e,n=!1){if(_l(t.app))return Promise.reject(hp(t));const r=gv(t),i=AU(r,e),o=await new yNe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const SNe=600*1e3;class TNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kNe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ehe(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ph(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(wJ(e))}saveEventToCache(e){this.cachedEventUids.add(wJ(e)),this.lastProcessedEventTime=Date.now()}}function wJ(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function ehe({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function kNe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ehe(t);default:return!1}}async function ANe(t,e={}){return hb(t,"GET","/v1/projects",e)}const CNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,INe=/^https?/;async function PNe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ANe(t);for(const n of e)try{if(RNe(n))return}catch{}Dd(t,"unauthorized-domain")}function RNe(t){const e=R8(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!INe.test(n))return!1;if(CNe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const MNe=new dC(3e4,6e4);function bJ(){const t=Sd().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NNe(t){return new Promise((e,n)=>{function r(){bJ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bJ(),n(ph(t,"network-request-failed"))},timeout:MNe.get()})}if(Sd().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sd().gapi?.load)r();else{const i=j4e("iframefcb");return Sd()[i]=()=>{gapi.load?r():n(ph(t,"network-request-failed"))},O4e(`${D4e()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw yM=null,e})}let yM=null;function LNe(t){return yM=yM||NNe(t),yM}const ONe=new dC(5e3,15e3),DNe="__/auth/iframe",jNe="emulator/auth/iframe",FNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$Ne=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VNe(t){const e=t.config;Pn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bU(e,jNe):`https://${t.config.authDomain}/${DNe}`,r={apiKey:e.apiKey,appName:t.name,v:mv},i=$Ne.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hC(r).slice(1)}`}async function zNe(t){const e=await LNe(t),n=Sd().gapi;return Pn(n,t,"internal-error"),e.open({where:document.body,url:VNe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FNe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ph(t,"network-request-failed"),a=Sd().setTimeout(()=>{s(o)},ONe.get());function l(){Sd().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const GNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UNe=500,BNe=600,WNe="_blank",HNe="http://localhost";class EJ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qNe(t,e,n,r=UNe,i=BNe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...GNe,width:r.toString(),height:i.toString(),top:s,left:o},c=Ys().toLowerCase();n&&(a=Pue(c)?WNe:n),Cue(c)&&(e=e||HNe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(A4e(c)&&a!=="_self")return KNe(e||"",a),new EJ(null);const h=window.open(e||"",a,u);Pn(h,t,"popup-blocked");try{h.focus()}catch{}return new EJ(h)}function KNe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const YNe="__/auth/handler",XNe="emulator/auth/handler",ZNe=encodeURIComponent("fac");async function SJ(t,e,n,r,i,s){Pn(t.config.authDomain,t,"auth-domain-config-required"),Pn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mv,eventId:i};if(e instanceof cL){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JMe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof fC){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${ZNe}=${encodeURIComponent(l)}`:"";return`${JNe(t)}?${hC(a).slice(1)}${c}`}function JNe({config:t}){return t.emulator?bU(t,XNe):`https://${t.authDomain}/${YNe}`}const kj="webStorageSupport";class QNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wue,this._completeRedirectFn=Que,this._overrideRedirectResult=xNe}async _openPopup(e,n,r,i){Ep(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await SJ(e,n,r,R8(),i);return qNe(e,s,kU())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await SJ(e,n,r,R8(),i);return nNe(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ep(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zNe(e),r=new TNe(e);return n.register("authEvent",i=>(Pn(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(kj,{type:kj},i=>{const s=i?.[0]?.[kj];s!==void 0&&n(!!s),Dd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=PNe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Oue()||Iue()||SU()}}const e5e=QNe;var TJ="@firebase/auth",kJ="1.12.0";class t5e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function n5e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r5e(t){L1(new zg("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Pn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Due(t)},c=new N4e(r,i,s,l);return $4e(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),L1(new zg("auth-internal",e=>{const n=gv(e.getProvider("auth").getImmediate());return(r=>new t5e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ed(TJ,kJ,n5e(t)),Ed(TJ,kJ,"esm2020")}const i5e=300,s5e=aue("authIdTokenMaxAge")||i5e;let AJ=null;const o5e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>s5e)return;const i=n?.token;AJ!==i&&(AJ=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function a5e(t=gue()){const e=aL(t,"auth");if(e.isInitialized())return e.getImmediate();const n=F4e(t,{popupRedirectResolver:e5e,persistence:[hNe,Q4e,Wue]}),r=aue("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=o5e(s.toString());X4e(n,o,()=>o(n.currentUser)),Y4e(n,a=>o(a))}}const i=sue("auth");return i&&V4e(n,`http://${i}`),n}function l5e(){return document.getElementsByTagName("head")?.[0]??document}L4e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ph("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",l5e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r5e("Browser");var c5e="firebase",u5e="12.7.0";Ed(c5e,u5e,"app");var CJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Cg,the;(function(){var t;function e(P,N){function L(){}L.prototype=N.prototype,P.F=N.prototype,P.prototype=new L,P.prototype.constructor=P,P.D=function(O,F,G){for(var U=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)U[ue-2]=arguments[ue];return N.prototype[F].apply(O,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,N,L){L||(L=0);const O=Array(16);if(typeof N=="string")for(var F=0;F<16;++F)O[F]=N.charCodeAt(L++)|N.charCodeAt(L++)<<8|N.charCodeAt(L++)<<16|N.charCodeAt(L++)<<24;else for(F=0;F<16;++F)O[F]=N[L++]|N[L++]<<8|N[L++]<<16|N[L++]<<24;N=P.g[0],L=P.g[1],F=P.g[2];let G=P.g[3],U;U=N+(G^L&(F^G))+O[0]+3614090360&4294967295,N=L+(U<<7&4294967295|U>>>25),U=G+(F^N&(L^F))+O[1]+3905402710&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(L^G&(N^L))+O[2]+606105819&4294967295,F=G+(U<<17&4294967295|U>>>15),U=L+(N^F&(G^N))+O[3]+3250441966&4294967295,L=F+(U<<22&4294967295|U>>>10),U=N+(G^L&(F^G))+O[4]+4118548399&4294967295,N=L+(U<<7&4294967295|U>>>25),U=G+(F^N&(L^F))+O[5]+1200080426&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(L^G&(N^L))+O[6]+2821735955&4294967295,F=G+(U<<17&4294967295|U>>>15),U=L+(N^F&(G^N))+O[7]+4249261313&4294967295,L=F+(U<<22&4294967295|U>>>10),U=N+(G^L&(F^G))+O[8]+1770035416&4294967295,N=L+(U<<7&4294967295|U>>>25),U=G+(F^N&(L^F))+O[9]+2336552879&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(L^G&(N^L))+O[10]+4294925233&4294967295,F=G+(U<<17&4294967295|U>>>15),U=L+(N^F&(G^N))+O[11]+2304563134&4294967295,L=F+(U<<22&4294967295|U>>>10),U=N+(G^L&(F^G))+O[12]+1804603682&4294967295,N=L+(U<<7&4294967295|U>>>25),U=G+(F^N&(L^F))+O[13]+4254626195&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(L^G&(N^L))+O[14]+2792965006&4294967295,F=G+(U<<17&4294967295|U>>>15),U=L+(N^F&(G^N))+O[15]+1236535329&4294967295,L=F+(U<<22&4294967295|U>>>10),U=N+(F^G&(L^F))+O[1]+4129170786&4294967295,N=L+(U<<5&4294967295|U>>>27),U=G+(L^F&(N^L))+O[6]+3225465664&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^L&(G^N))+O[11]+643717713&4294967295,F=G+(U<<14&4294967295|U>>>18),U=L+(G^N&(F^G))+O[0]+3921069994&4294967295,L=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(L^F))+O[5]+3593408605&4294967295,N=L+(U<<5&4294967295|U>>>27),U=G+(L^F&(N^L))+O[10]+38016083&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^L&(G^N))+O[15]+3634488961&4294967295,F=G+(U<<14&4294967295|U>>>18),U=L+(G^N&(F^G))+O[4]+3889429448&4294967295,L=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(L^F))+O[9]+568446438&4294967295,N=L+(U<<5&4294967295|U>>>27),U=G+(L^F&(N^L))+O[14]+3275163606&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^L&(G^N))+O[3]+4107603335&4294967295,F=G+(U<<14&4294967295|U>>>18),U=L+(G^N&(F^G))+O[8]+1163531501&4294967295,L=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(L^F))+O[13]+2850285829&4294967295,N=L+(U<<5&4294967295|U>>>27),U=G+(L^F&(N^L))+O[2]+4243563512&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^L&(G^N))+O[7]+1735328473&4294967295,F=G+(U<<14&4294967295|U>>>18),U=L+(G^N&(F^G))+O[12]+2368359562&4294967295,L=F+(U<<20&4294967295|U>>>12),U=N+(L^F^G)+O[5]+4294588738&4294967295,N=L+(U<<4&4294967295|U>>>28),U=G+(N^L^F)+O[8]+2272392833&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^L)+O[11]+1839030562&4294967295,F=G+(U<<16&4294967295|U>>>16),U=L+(F^G^N)+O[14]+4259657740&4294967295,L=F+(U<<23&4294967295|U>>>9),U=N+(L^F^G)+O[1]+2763975236&4294967295,N=L+(U<<4&4294967295|U>>>28),U=G+(N^L^F)+O[4]+1272893353&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^L)+O[7]+4139469664&4294967295,F=G+(U<<16&4294967295|U>>>16),U=L+(F^G^N)+O[10]+3200236656&4294967295,L=F+(U<<23&4294967295|U>>>9),U=N+(L^F^G)+O[13]+681279174&4294967295,N=L+(U<<4&4294967295|U>>>28),U=G+(N^L^F)+O[0]+3936430074&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^L)+O[3]+3572445317&4294967295,F=G+(U<<16&4294967295|U>>>16),U=L+(F^G^N)+O[6]+76029189&4294967295,L=F+(U<<23&4294967295|U>>>9),U=N+(L^F^G)+O[9]+3654602809&4294967295,N=L+(U<<4&4294967295|U>>>28),U=G+(N^L^F)+O[12]+3873151461&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^L)+O[15]+530742520&4294967295,F=G+(U<<16&4294967295|U>>>16),U=L+(F^G^N)+O[2]+3299628645&4294967295,L=F+(U<<23&4294967295|U>>>9),U=N+(F^(L|~G))+O[0]+4096336452&4294967295,N=L+(U<<6&4294967295|U>>>26),U=G+(L^(N|~F))+O[7]+1126891415&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~L))+O[14]+2878612391&4294967295,F=G+(U<<15&4294967295|U>>>17),U=L+(G^(F|~N))+O[5]+4237533241&4294967295,L=F+(U<<21&4294967295|U>>>11),U=N+(F^(L|~G))+O[12]+1700485571&4294967295,N=L+(U<<6&4294967295|U>>>26),U=G+(L^(N|~F))+O[3]+2399980690&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~L))+O[10]+4293915773&4294967295,F=G+(U<<15&4294967295|U>>>17),U=L+(G^(F|~N))+O[1]+2240044497&4294967295,L=F+(U<<21&4294967295|U>>>11),U=N+(F^(L|~G))+O[8]+1873313359&4294967295,N=L+(U<<6&4294967295|U>>>26),U=G+(L^(N|~F))+O[15]+4264355552&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~L))+O[6]+2734768916&4294967295,F=G+(U<<15&4294967295|U>>>17),U=L+(G^(F|~N))+O[13]+1309151649&4294967295,L=F+(U<<21&4294967295|U>>>11),U=N+(F^(L|~G))+O[4]+4149444226&4294967295,N=L+(U<<6&4294967295|U>>>26),U=G+(L^(N|~F))+O[11]+3174756917&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~L))+O[2]+718787259&4294967295,F=G+(U<<15&4294967295|U>>>17),U=L+(G^(F|~N))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+N&4294967295,P.g[1]=P.g[1]+(F+(U<<21&4294967295|U>>>11))&4294967295,P.g[2]=P.g[2]+F&4294967295,P.g[3]=P.g[3]+G&4294967295}r.prototype.v=function(P,N){N===void 0&&(N=P.length);const L=N-this.blockSize,O=this.C;let F=this.h,G=0;for(;G<N;){if(F==0)for(;G<=L;)i(this,P,G),G+=this.blockSize;if(typeof P=="string"){for(;G<N;)if(O[F++]=P.charCodeAt(G++),F==this.blockSize){i(this,O),F=0;break}}else for(;G<N;)if(O[F++]=P[G++],F==this.blockSize){i(this,O),F=0;break}}this.h=F,this.o+=N},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var N=1;N<P.length-8;++N)P[N]=0;N=this.o*8;for(var L=P.length-8;L<P.length;++L)P[L]=N&255,N/=256;for(this.v(P),P=Array(16),N=0,L=0;L<4;++L)for(let O=0;O<32;O+=8)P[N++]=this.g[L]>>>O&255;return P};function s(P,N){var L=a;return Object.prototype.hasOwnProperty.call(L,P)?L[P]:L[P]=N(P)}function o(P,N){this.h=N;const L=[];let O=!0;for(let F=P.length-1;F>=0;F--){const G=P[F]|0;O&&G==N||(L[F]=G,O=!1)}this.g=L}var a={};function l(P){return-128<=P&&P<128?s(P,function(N){return new o([N|0],N<0?-1:0)}):new o([P|0],P<0?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return h;if(P<0)return b(c(-P));const N=[];let L=1;for(let O=0;P>=L;O++)N[O]=P/L|0,L*=4294967296;return new o(N,0)}function u(P,N){if(P.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P.charAt(0)=="-")return b(u(P.substring(1),N));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const L=c(Math.pow(N,8));let O=h;for(let G=0;G<P.length;G+=8){var F=Math.min(8,P.length-G);const U=parseInt(P.substring(G,G+F),N);F<8?(F=c(Math.pow(N,F)),O=O.j(F).add(c(U))):(O=O.j(L),O=O.add(c(U)))}return O}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();let P=0,N=1;for(let L=0;L<this.g.length;L++){const O=this.i(L);P+=(O>=0?O:4294967296+O)*N,N*=4294967296}return P},t.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(y(this))return"0";if(_(this))return"-"+b(this).toString(P);const N=c(Math.pow(P,6));var L=this;let O="";for(;;){const F=I(L,N).g;L=T(L,F.j(N));let G=((L.g.length>0?L.g[0]:L.h)>>>0).toString(P);if(L=F,y(L))return G+O;for(;G.length<6;)G="0"+G;O=G+O}},t.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function y(P){if(P.h!=0)return!1;for(let N=0;N<P.g.length;N++)if(P.g[N]!=0)return!1;return!0}function _(P){return P.h==-1}t.l=function(P){return P=T(this,P),_(P)?-1:y(P)?0:1};function b(P){const N=P.g.length,L=[];for(let O=0;O<N;O++)L[O]=~P.g[O];return new o(L,~P.h).add(f)}t.abs=function(){return _(this)?b(this):this},t.add=function(P){const N=Math.max(this.g.length,P.g.length),L=[];let O=0;for(let F=0;F<=N;F++){let G=O+(this.i(F)&65535)+(P.i(F)&65535),U=(G>>>16)+(this.i(F)>>>16)+(P.i(F)>>>16);O=U>>>16,G&=65535,U&=65535,L[F]=U<<16|G}return new o(L,L[L.length-1]&-2147483648?-1:0)};function T(P,N){return P.add(b(N))}t.j=function(P){if(y(this)||y(P))return h;if(_(this))return _(P)?b(this).j(b(P)):b(b(this).j(P));if(_(P))return b(this.j(b(P)));if(this.l(g)<0&&P.l(g)<0)return c(this.m()*P.m());const N=this.g.length+P.g.length,L=[];for(var O=0;O<2*N;O++)L[O]=0;for(O=0;O<this.g.length;O++)for(let F=0;F<P.g.length;F++){const G=this.i(O)>>>16,U=this.i(O)&65535,ue=P.i(F)>>>16,be=P.i(F)&65535;L[2*O+2*F]+=U*be,A(L,2*O+2*F),L[2*O+2*F+1]+=G*be,A(L,2*O+2*F+1),L[2*O+2*F+1]+=U*ue,A(L,2*O+2*F+1),L[2*O+2*F+2]+=G*ue,A(L,2*O+2*F+2)}for(P=0;P<N;P++)L[P]=L[2*P+1]<<16|L[2*P];for(P=N;P<2*N;P++)L[P]=0;return new o(L,0)};function A(P,N){for(;(P[N]&65535)!=P[N];)P[N+1]+=P[N]>>>16,P[N]&=65535,N++}function C(P,N){this.g=P,this.h=N}function I(P,N){if(y(N))throw Error("division by zero");if(y(P))return new C(h,h);if(_(P))return N=I(b(P),N),new C(b(N.g),b(N.h));if(_(N))return N=I(P,b(N)),new C(b(N.g),N.h);if(P.g.length>30){if(_(P)||_(N))throw Error("slowDivide_ only works with positive integers.");for(var L=f,O=N;O.l(P)<=0;)L=R(L),O=R(O);var F=V(L,1),G=V(O,1);for(O=V(O,2),L=V(L,2);!y(O);){var U=G.add(O);U.l(P)<=0&&(F=F.add(L),G=U),O=V(O,1),L=V(L,1)}return N=T(P,F.j(N)),new C(F,N)}for(F=h;P.l(N)>=0;){for(L=Math.max(1,Math.floor(P.m()/N.m())),O=Math.ceil(Math.log(L)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),G=c(L),U=G.j(N);_(U)||U.l(P)>0;)L-=O,G=c(L),U=G.j(N);y(G)&&(G=f),F=F.add(G),P=T(P,U)}return new C(F,P)}t.B=function(P){return I(this,P).h},t.and=function(P){const N=Math.max(this.g.length,P.g.length),L=[];for(let O=0;O<N;O++)L[O]=this.i(O)&P.i(O);return new o(L,this.h&P.h)},t.or=function(P){const N=Math.max(this.g.length,P.g.length),L=[];for(let O=0;O<N;O++)L[O]=this.i(O)|P.i(O);return new o(L,this.h|P.h)},t.xor=function(P){const N=Math.max(this.g.length,P.g.length),L=[];for(let O=0;O<N;O++)L[O]=this.i(O)^P.i(O);return new o(L,this.h^P.h)};function R(P){const N=P.g.length+1,L=[];for(let O=0;O<N;O++)L[O]=P.i(O)<<1|P.i(O-1)>>>31;return new o(L,P.h)}function V(P,N){const L=N>>5;N%=32;const O=P.g.length-L,F=[];for(let G=0;G<O;G++)F[G]=N>0?P.i(G+L)>>>N|P.i(G+L+1)<<32-N:P.i(G+L);return new o(F,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,the=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Cg=o}).apply(typeof CJ<"u"?CJ:typeof self<"u"?self:typeof window<"u"?window:{});var DP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nhe,vS,rhe,vM,L8,ihe,she,ohe;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof DP=="object"&&DP];for(var j=0;j<S.length;++j){var B=S[j];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(S,j){if(j)e:{var B=r;S=S.split(".");for(var J=0;J<S.length-1;J++){var Te=S[J];if(!(Te in B))break e;B=B[Te]}S=S[S.length-1],J=B[S],j=j(J),j!=J&&j!=null&&e(B,S,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(j){var B=[],J;for(J in j)Object.prototype.hasOwnProperty.call(j,J)&&B.push([J,j[J]]);return B}});var s=s||{},o=this||self;function a(S){var j=typeof S;return j=="object"&&S!=null||j=="function"}function l(S,j,B){return S.call.apply(S.bind,arguments)}function c(S,j,B){return c=l,c.apply(null,arguments)}function u(S,j){var B=Array.prototype.slice.call(arguments,1);return function(){var J=B.slice();return J.push.apply(J,arguments),S.apply(this,J)}}function h(S,j){function B(){}B.prototype=j.prototype,S.Z=j.prototype,S.prototype=new B,S.prototype.constructor=S,S.Ob=function(J,Te,$e){for(var Et=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)Et[Ln-2]=arguments[Ln];return j.prototype[Te].apply(J,Et)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function g(S){const j=S.length;if(j>0){const B=Array(j);for(let J=0;J<j;J++)B[J]=S[J];return B}return[]}function y(S,j){for(let J=1;J<arguments.length;J++){const Te=arguments[J];var B=typeof Te;if(B=B!="object"?B:Te?Array.isArray(Te)?"array":B:"null",B=="array"||B=="object"&&typeof Te.length=="number"){B=S.length||0;const $e=Te.length||0;S.length=B+$e;for(let Et=0;Et<$e;Et++)S[B+Et]=Te[Et]}else S.push(Te)}}class _{constructor(j,B){this.i=j,this.j=B,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function b(S){o.setTimeout(()=>{throw S},0)}function T(){var S=P;let j=null;return S.g&&(j=S.g,S.g=S.g.next,S.g||(S.h=null),j.next=null),j}class A{constructor(){this.h=this.g=null}add(j,B){const J=C.get();J.set(j,B),this.h?this.h.next=J:this.g=J,this.h=J}}var C=new _(()=>new I,S=>S.reset());class I{constructor(){this.next=this.g=this.h=null}set(j,B){this.h=j,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let R,V=!1,P=new A,N=()=>{const S=Promise.resolve(void 0);R=()=>{S.then(L)}};function L(){for(var S;S=T();){try{S.h.call(S.g)}catch(B){b(B)}var j=C;j.j(S),j.h<100&&(j.h++,S.next=j.g,j.g=S)}V=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(S,j){this.type=S,this.g=this.target=j,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,j=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const B=()=>{};o.addEventListener("test",B,j),o.removeEventListener("test",B,j)}catch{}return S})();function U(S){return/^[\s\xa0]*$/.test(S)}function ue(S,j){F.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,j)}h(ue,F),ue.prototype.init=function(S,j){const B=this.type=S.type,J=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=j,j=S.relatedTarget,j||(B=="mouseover"?j=S.fromElement:B=="mouseout"&&(j=S.toElement)),this.relatedTarget=j,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),ze=0;function Ce(S,j,B,J,Te){this.listener=S,this.proxy=null,this.src=j,this.type=B,this.capture=!!J,this.ha=Te,this.key=++ze,this.da=this.fa=!1}function de(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function Le(S,j,B){for(const J in S)j.call(B,S[J],J,S)}function xe(S,j){for(const B in S)j.call(void 0,S[B],B,S)}function Z(S){const j={};for(const B in S)j[B]=S[B];return j}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(S,j){let B,J;for(let Te=1;Te<arguments.length;Te++){J=arguments[Te];for(B in J)S[B]=J[B];for(let $e=0;$e<W.length;$e++)B=W[$e],Object.prototype.hasOwnProperty.call(J,B)&&(S[B]=J[B])}}function se(S){this.src=S,this.g={},this.h=0}se.prototype.add=function(S,j,B,J,Te){const $e=S.toString();S=this.g[$e],S||(S=this.g[$e]=[],this.h++);const Et=me(S,j,J,Te);return Et>-1?(j=S[Et],B||(j.fa=!1)):(j=new Ce(j,this.src,$e,!!J,Te),j.fa=B,S.push(j)),j};function Q(S,j){const B=j.type;if(B in S.g){var J=S.g[B],Te=Array.prototype.indexOf.call(J,j,void 0),$e;($e=Te>=0)&&Array.prototype.splice.call(J,Te,1),$e&&(de(j),S.g[B].length==0&&(delete S.g[B],S.h--))}}function me(S,j,B,J){for(let Te=0;Te<S.length;++Te){const $e=S[Te];if(!$e.da&&$e.listener==j&&$e.capture==!!B&&$e.ha==J)return Te}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),Ye={};function ke(S,j,B,J,Te){if(Array.isArray(j)){for(let $e=0;$e<j.length;$e++)ke(S,j[$e],B,J,Te);return null}return B=hr(B),S&&S[be]?S.J(j,B,a(J)?!!J.capture:!1,Te):Ee(S,j,B,!1,J,Te)}function Ee(S,j,B,J,Te,$e){if(!j)throw Error("Invalid event type");const Et=a(Te)?!!Te.capture:!!Te;let Ln=wn(S);if(Ln||(S[Ke]=Ln=new se(S)),B=Ln.add(j,B,J,Et,$e),B.proxy)return B;if(J=Dt(),B.proxy=J,J.src=S,J.listener=B,S.addEventListener)G||(Te=Et),Te===void 0&&(Te=!1),S.addEventListener(j.toString(),J,Te);else if(S.attachEvent)S.attachEvent(jt(j.toString()),J);else if(S.addListener&&S.removeListener)S.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Dt(){function S(B){return j.call(S.src,S.listener,B)}const j=gn;return S}function Xe(S,j,B,J,Te){if(Array.isArray(j))for(var $e=0;$e<j.length;$e++)Xe(S,j[$e],B,J,Te);else J=a(J)?!!J.capture:!!J,B=hr(B),S&&S[be]?(S=S.i,$e=String(j).toString(),$e in S.g&&(j=S.g[$e],B=me(j,B,J,Te),B>-1&&(de(j[B]),Array.prototype.splice.call(j,B,1),j.length==0&&(delete S.g[$e],S.h--)))):S&&(S=wn(S))&&(j=S.g[j.toString()],S=-1,j&&(S=me(j,B,J,Te)),(B=S>-1?j[S]:null)&&cn(B))}function cn(S){if(typeof S!="number"&&S&&!S.da){var j=S.src;if(j&&j[be])Q(j.i,S);else{var B=S.type,J=S.proxy;j.removeEventListener?j.removeEventListener(B,J,S.capture):j.detachEvent?j.detachEvent(jt(B),J):j.addListener&&j.removeListener&&j.removeListener(J),(B=wn(j))?(Q(B,S),B.h==0&&(B.src=null,j[Ke]=null)):de(S)}}}function jt(S){return S in Ye?Ye[S]:Ye[S]="on"+S}function gn(S,j){if(S.da)S=!0;else{j=new ue(j,this);const B=S.listener,J=S.ha||S.src;S.fa&&cn(S),S=B.call(J,j)}return S}function wn(S){return S=S[Ke],S instanceof se?S:null}var pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function hr(S){return typeof S=="function"?S:(S[pt]||(S[pt]=function(j){return S.handleEvent(j)}),S[pt])}function zn(){O.call(this),this.i=new se(this),this.M=this,this.G=null}h(zn,O),zn.prototype[be]=!0,zn.prototype.removeEventListener=function(S,j,B,J){Xe(this,S,j,B,J)};function Hn(S,j){var B,J=S.G;if(J)for(B=[];J;J=J.G)B.push(J);if(S=S.M,J=j.type||j,typeof j=="string")j=new F(j,S);else if(j instanceof F)j.target=j.target||S;else{var Te=j;j=new F(J,S),ne(j,Te)}Te=!0;let $e,Et;if(B)for(Et=B.length-1;Et>=0;Et--)$e=j.g=B[Et],Te=ei($e,J,!0,j)&&Te;if($e=j.g=S,Te=ei($e,J,!0,j)&&Te,Te=ei($e,J,!1,j)&&Te,B)for(Et=0;Et<B.length;Et++)$e=j.g=B[Et],Te=ei($e,J,!1,j)&&Te}zn.prototype.N=function(){if(zn.Z.N.call(this),this.i){var S=this.i;for(const j in S.g){const B=S.g[j];for(let J=0;J<B.length;J++)de(B[J]);delete S.g[j],S.h--}}this.G=null},zn.prototype.J=function(S,j,B,J){return this.i.add(String(S),j,!1,B,J)},zn.prototype.K=function(S,j,B,J){return this.i.add(String(S),j,!0,B,J)};function ei(S,j,B,J){if(j=S.i.g[String(j)],!j)return!0;j=j.concat();let Te=!0;for(let $e=0;$e<j.length;++$e){const Et=j[$e];if(Et&&!Et.da&&Et.capture==B){const Ln=Et.listener,as=Et.ha||Et.src;Et.fa&&Q(S.i,Et),Te=Ln.call(as,J)!==!1&&Te}}return Te&&!J.defaultPrevented}function xo(S,j){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=c(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:o.setTimeout(S,j||0)}function Rr(S){S.g=xo(()=>{S.g=null,S.i&&(S.i=!1,Rr(S))},S.l);const j=S.h;S.h=null,S.m.apply(null,j)}class Ai extends O{constructor(j,B){super(),this.m=j,this.l=B,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(S){O.call(this),this.h=S,this.g={}}h(js,O);var wt=[];function Qn(S){Le(S.g,function(j,B){this.g.hasOwnProperty(B)&&cn(j)},S),S.g={}}js.prototype.N=function(){js.Z.N.call(this),Qn(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=o.JSON.stringify,Vt=o.JSON.parse,Dn=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function tn(){}function wo(){}var Ui={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fs(){F.call(this,"d")}h(Fs,F);function Nn(){F.call(this,"c")}h(Nn,F);var Ci={},qe=null;function Ie(){return qe=qe||new zn}Ci.Ia="serverreachability";function Pe(S){F.call(this,Ci.Ia,S)}h(Pe,F);function rn(S){const j=Ie();Hn(j,new Pe(j))}Ci.STAT_EVENT="statevent";function z(S,j){F.call(this,Ci.STAT_EVENT,S),this.stat=j}h(z,F);function Tt(S){const j=Ie();Hn(j,new z(j,S))}Ci.Ja="timingevent";function X(S,j){F.call(this,Ci.Ja,S),this.size=j}h(X,F);function le(S,j){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},j)}function Ve(){this.g=!0}Ve.prototype.ua=function(){this.g=!1};function te(S,j,B,J,Te,$e){S.info(function(){if(S.g)if($e){var Et="",Ln=$e.split("&");for(let $r=0;$r<Ln.length;$r++){var as=Ln[$r].split("=");if(as.length>1){const _s=as[0];as=as[1];const Gl=_s.split("_");Et=Gl.length>=2&&Gl[1]=="type"?Et+(_s+"="+as+"&"):Et+(_s+"=redacted&")}}}else Et=null;else Et=$e;return"XMLHTTP REQ ("+J+") [attempt "+Te+"]: "+j+`
`+B+`
`+Et})}function ve(S,j,B,J,Te,$e,Et){S.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Te+"]: "+j+`
`+B+`
`+$e+" "+Et})}function De(S,j,B,J){S.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ge(S,B)+(J?" "+J:"")})}function He(S,j){S.info(function(){return"TIMEOUT: "+j})}Ve.prototype.info=function(){};function Ge(S,j){if(!S.g)return j;if(!j)return null;try{const $e=JSON.parse(j);if($e){for(S=0;S<$e.length;S++)if(Array.isArray($e[S])){var B=$e[S];if(!(B.length<2)){var J=B[1];if(Array.isArray(J)&&!(J.length<1)){var Te=J[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(let Et=1;Et<J.length;Et++)J[Et]=""}}}}return dr($e)}catch{return j}}var Ze={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mt;function Gt(){}h(Gt,tn),Gt.prototype.g=function(){return new XMLHttpRequest},Mt=new Gt;function _n(S){return encodeURIComponent(String(S))}function q(S){var j=1;S=S.split(":");const B=[];for(;j>0&&S.length;)B.push(S.shift()),j--;return S.length&&B.push(S.join(":")),B}function ie(S,j,B,J){this.j=S,this.i=j,this.l=B,this.S=J||1,this.V=new js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ee}function ee(){this.i=null,this.g="",this.h=!1}var re={},oe={};function ae(S,j,B){S.M=1,S.A=Qd(Pc(j)),S.u=B,S.R=!0,Me(S,null)}function Me(S,j){S.F=Date.now(),je(S),S.B=Pc(S.A);var B=S.B,J=S.S;Array.isArray(J)||(J=[String(J)]),Zb(B.i,"t",J),S.C=0,B=S.j.L,S.h=new ee,S.g=EI(S.j,B?j:null,!S.u),S.P>0&&(S.O=new Ai(c(S.Y,S,S.g),S.P)),j=S.V,B=S.g,J=S.ba;var Te="readystatechange";Array.isArray(Te)||(Te&&(wt[0]=Te.toString()),Te=wt);for(let $e=0;$e<Te.length;$e++){const Et=ke(B,Te[$e],J||j.handleEvent,!1,j.h||j);if(!Et)break;j.g[Et.key]=Et}j=S.J?Z(S.J):{},S.u?(S.v||(S.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,j)):(S.v="GET",S.g.ea(S.B,S.v,null,j)),rn(),te(S.i,S.v,S.B,S.l,S.S,S.u)}ie.prototype.ba=function(S){S=S.target;const j=this.O;j&&jh(S)==3?j.j():this.Y(S)},ie.prototype.Y=function(S){try{if(S==this.g)e:{const Ln=jh(this.g),as=this.g.ya(),$r=this.g.ca();if(!(Ln<3)&&(Ln!=3||this.g&&(this.h.h||this.g.la()||wI(this.g)))){this.K||Ln!=4||as==7||(as==8||$r<=0?rn(3):rn(2)),vt(this);var j=this.g.ca();this.X=j;var B=Be(this);if(this.o=j==200,ve(this.i,this.v,this.B,this.l,this.S,Ln,j),this.o){if(this.U&&!this.L){t:{if(this.g){var J,Te=this.g;if((J=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(J)){var $e=J;break t}}$e=null}if(S=$e)De(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dt(this,S);else{this.o=!1,this.m=3,Tt(12),ht(this),Pt(this);break e}}if(this.R){S=!0;let _s;for(;!this.K&&this.C<B.length;)if(_s=Oe(this,B),_s==oe){Ln==4&&(this.m=4,Tt(14),S=!1),De(this.i,this.l,null,"[Incomplete Response]");break}else if(_s==re){this.m=4,Tt(15),De(this.i,this.l,B,"[Invalid Chunk]"),S=!1;break}else De(this.i,this.l,_s,null),dt(this,_s);if(Re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||B.length!=0||this.h.h||(this.m=1,Tt(16),S=!1),this.o=this.o&&S,!S)De(this.i,this.l,B,"[Invalid Chunked Response]"),ht(this),Pt(this);else if(B.length>0&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.aa&&!Et.P&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),I0(Et),Et.P=!0,Tt(11))}}else De(this.i,this.l,B,null),dt(this,B);Ln==4&&ht(this),this.o&&!this.K&&(Ln==4?Vv(this.j,this):(this.o=!1,je(this)))}else Qb(this.g),j==400&&B.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),ht(this),Pt(this)}}}catch{}};function Be(S){if(!Re(S))return S.g.la();const j=wI(S.g);if(j==="")return"";let B="";const J=j.length,Te=jh(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return ht(S),Pt(S),"";S.h.i=new o.TextDecoder}for(let $e=0;$e<J;$e++)S.h.h=!0,B+=S.h.i.decode(j[$e],{stream:!(Te&&$e==J-1)});return j.length=0,S.h.g+=B,S.C=0,S.h.g}function Re(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Oe(S,j){var B=S.C,J=j.indexOf(`
`,B);return J==-1?oe:(B=Number(j.substring(B,J)),isNaN(B)?re:(J+=1,J+B>j.length?oe:(j=j.slice(J,J+B),S.C=J+B,j)))}ie.prototype.cancel=function(){this.K=!0,ht(this)};function je(S){S.T=Date.now()+S.H,ut(S,S.H)}function ut(S,j){if(S.D!=null)throw Error("WatchDog timer not null");S.D=le(c(S.aa,S),j)}function vt(S){S.D&&(o.clearTimeout(S.D),S.D=null)}ie.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(He(this.i,this.B),this.M!=2&&(rn(),Tt(17)),ht(this),this.m=2,Pt(this)):ut(this,this.T-S)};function Pt(S){S.j.I==0||S.K||Vv(S.j,S)}function ht(S){vt(S);var j=S.O;j&&typeof j.dispose=="function"&&j.dispose(),S.O=null,Qn(S.V),S.g&&(j=S.g,S.g=null,j.abort(),j.dispose())}function dt(S,j){try{var B=S.j;if(B.I!=0&&(B.g==S||Eu(B.h,S))){if(!S.L&&Eu(B.h,S)&&B.I==3){try{var J=B.Ba.g.parse(j)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Te=J;if(Te[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<S.F)$v(B),Vl(B);else break e;Vh(B),Tt(18)}}else B.xa=Te[1],0<B.xa-B.K&&Te[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=le(c(B.Va,B),6e3));_i(B.h)<=1&&B.ta&&(B.ta=void 0)}else zl(B,11)}else if((S.L||B.g==S)&&$v(B),!U(j))for(Te=B.Ba.g.parse(j),j=0;j<Te.length;j++){let $r=Te[j];const _s=$r[0];if(!(_s<=B.K))if(B.K=_s,$r=$r[1],B.I==2)if($r[0]=="c"){B.M=$r[1],B.ba=$r[2];const Gl=$r[3];Gl!=null&&(B.ka=Gl,B.j.info("VER="+B.ka));const sf=$r[4];sf!=null&&(B.za=sf,B.j.info("SVER="+B.za));const zh=$r[5];zh!=null&&typeof zh=="number"&&zh>0&&(J=1.5*zh,B.O=J,B.j.info("backChannelRequestTimeoutMs_="+J)),J=B;const Gh=S.g;if(Gh){const Uv=Gh.g?Gh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uv){var $e=J.h;$e.g||Uv.indexOf("spdy")==-1&&Uv.indexOf("quic")==-1&&Uv.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(Ic($e,$e.h),$e.h=null))}if(J.G){const nE=Gh.g?Gh.g.getResponseHeader("X-HTTP-Session-Id"):null;nE&&(J.wa=nE,Er(J.J,J.G,nE))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-S.F,B.j.info("Handshake RTT: "+B.T+"ms")),J=B;var Et=S;if(J.na=tE(J,J.L?J.ba:null,J.W),Et.L){Fl(J.h,Et);var Ln=Et,as=J.O;as&&(Ln.H=as),Ln.D&&(vt(Ln),je(Ln)),J.g=Et}else zo(J);B.i.length>0&&rf(B)}else $r[0]!="stop"&&$r[0]!="close"||zl(B,7);else B.I==3&&($r[0]=="stop"||$r[0]=="close"?$r[0]=="stop"?zl(B,7):jv(B):$r[0]!="noop"&&B.l&&B.l.qa($r),B.A=0)}}rn(4)}catch{}}var Tn=class{constructor(S,j){this.g=S,this.map=j}};function Mr(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Fr(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function _i(S){return S.h?1:S.g?S.g.size:0}function Eu(S,j){return S.h?S.h==j:S.g?S.g.has(j):!1}function Ic(S,j){S.g?S.g.add(j):S.h=j}function Fl(S,j){S.h&&S.h==j?S.h=null:S.g&&S.g.has(j)&&S.g.delete(j)}Mr.prototype.cancel=function(){if(this.i=os(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function os(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let j=S.i;for(const B of S.g.values())j=j.concat(B.G);return j}return g(S.i)}var Vp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ii(S,j){if(S){S=S.split("&");for(let B=0;B<S.length;B++){const J=S[B].indexOf("=");let Te,$e=null;J>=0?(Te=S[B].substring(0,J),$e=S[B].substring(J+1)):Te=S[B],j(Te,$e?decodeURIComponent($e.replace(/\+/g," ")):"")}}}function Rh(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;S instanceof Rh?(this.l=S.l,E0(this,S.j),this.o=S.o,this.g=S.g,Mh(this,S.u),this.h=S.h,zp(this,Jb(S.i)),this.m=S.m):S&&(j=String(S).match(Vp))?(this.l=!1,E0(this,j[1]||"",!0),this.o=S0(j[2]||""),this.g=S0(j[3]||"",!0),Mh(this,j[4]),this.h=S0(j[5]||"",!0),zp(this,j[6]||"",!0),this.m=S0(j[7]||"")):(this.l=!1,this.i=new sr(null,this.l))}Rh.prototype.toString=function(){const S=[];var j=this.j;j&&S.push(T0(j,Hb,!0),":");var B=this.g;return(B||j=="file")&&(S.push("//"),(j=this.o)&&S.push(T0(j,Hb,!0),"@"),S.push(_n(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&S.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&S.push("/"),S.push(T0(B,B.charAt(0)=="/"?k0:qb,!0))),(B=this.i.toString())&&S.push("?",B),(B=this.m)&&S.push("#",T0(B,Kb)),S.join("")},Rh.prototype.resolve=function(S){const j=Pc(this);let B=!!S.j;B?E0(j,S.j):B=!!S.o,B?j.o=S.o:B=!!S.g,B?j.g=S.g:B=S.u!=null;var J=S.h;if(B)Mh(j,S.u);else if(B=!!S.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var Te=j.h.lastIndexOf("/");Te!=-1&&(J=j.h.slice(0,Te+1)+J)}if(Te=J,Te==".."||Te==".")J="";else if(Te.indexOf("./")!=-1||Te.indexOf("/.")!=-1){J=Te.lastIndexOf("/",0)==0,Te=Te.split("/");const $e=[];for(let Et=0;Et<Te.length;){const Ln=Te[Et++];Ln=="."?J&&Et==Te.length&&$e.push(""):Ln==".."?(($e.length>1||$e.length==1&&$e[0]!="")&&$e.pop(),J&&Et==Te.length&&$e.push("")):($e.push(Ln),J=!0)}J=$e.join("/")}else J=Te}return B?j.h=J:B=S.i.toString()!=="",B?zp(j,Jb(S.i)):B=!!S.m,B&&(j.m=S.m),j};function Pc(S){return new Rh(S)}function E0(S,j,B){S.j=B?S0(j,!0):j,S.j&&(S.j=S.j.replace(/:$/,""))}function Mh(S,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);S.u=j}else S.u=null}function zp(S,j,B){j instanceof sr?(S.i=j,Lv(S.i,S.l)):(B||(j=T0(j,oD)),S.i=new sr(j,S.l))}function Er(S,j,B){S.i.set(j,B)}function Qd(S){return Er(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function S0(S,j){return S?j?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function T0(S,j,B){return typeof S=="string"?(S=encodeURI(S).replace(j,Wb),B&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Wb(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Hb=/[#\/\?@]/g,qb=/[#\?:]/g,k0=/[#\?]/g,oD=/[#\?@]/g,Kb=/#/g;function sr(S,j){this.h=this.g=null,this.i=S||null,this.j=!!j}function Nh(S){S.g||(S.g=new Map,S.h=0,S.i&&Ii(S.i,function(j,B){S.add(decodeURIComponent(j.replace(/\+/g," ")),B)}))}t=sr.prototype,t.add=function(S,j){Nh(this),this.i=null,S=Lh(this,S);let B=this.g.get(S);return B||this.g.set(S,B=[]),B.push(j),this.h+=1,this};function Yb(S,j){Nh(S),j=Lh(S,j),S.g.has(j)&&(S.i=null,S.h-=S.g.get(j).length,S.g.delete(j))}function Nv(S,j){return Nh(S),j=Lh(S,j),S.g.has(j)}t.forEach=function(S,j){Nh(this),this.g.forEach(function(B,J){B.forEach(function(Te){S.call(j,Te,J,this)},this)},this)};function Xb(S,j){Nh(S);let B=[];if(typeof j=="string")Nv(S,j)&&(B=B.concat(S.g.get(Lh(S,j))));else for(S=Array.from(S.g.values()),j=0;j<S.length;j++)B=B.concat(S[j]);return B}t.set=function(S,j){return Nh(this),this.i=null,S=Lh(this,S),Nv(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[j]),this.h+=1,this},t.get=function(S,j){return S?(S=Xb(this,S),S.length>0?String(S[0]):j):j};function Zb(S,j,B){Yb(S,j),B.length>0&&(S.i=null,S.g.set(Lh(S,j),g(B)),S.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],j=Array.from(this.g.keys());for(let J=0;J<j.length;J++){var B=j[J];const Te=_n(B);B=Xb(this,B);for(let $e=0;$e<B.length;$e++){let Et=Te;B[$e]!==""&&(Et+="="+_n(B[$e])),S.push(Et)}}return this.i=S.join("&")};function Jb(S){const j=new sr;return j.i=S.i,S.g&&(j.g=new Map(S.g),j.h=S.h),j}function Lh(S,j){return j=String(j),S.j&&(j=j.toLowerCase()),j}function Lv(S,j){j&&!S.j&&(Nh(S),S.i=null,S.g.forEach(function(B,J){const Te=J.toLowerCase();J!=Te&&(Yb(this,J),Zb(this,Te,B))},S)),S.j=j}function Oh(S,j){const B=new Ve;if(o.Image){const J=new Image;J.onload=u(bo,B,"TestLoadImage: loaded",!0,j,J),J.onerror=u(bo,B,"TestLoadImage: error",!1,j,J),J.onabort=u(bo,B,"TestLoadImage: abort",!1,j,J),J.ontimeout=u(bo,B,"TestLoadImage: timeout",!1,j,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=S}else j(!1)}function Dh(S,j){const B=new Ve,J=new AbortController,Te=setTimeout(()=>{J.abort(),bo(B,"TestPingServer: timeout",!1,j)},1e4);fetch(S,{signal:J.signal}).then($e=>{clearTimeout(Te),$e.ok?bo(B,"TestPingServer: ok",!0,j):bo(B,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Te),bo(B,"TestPingServer: error",!1,j)})}function bo(S,j,B,J,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),J(B)}catch{}}function A0(){this.g=new Dn}function ef(S){this.i=S.Sb||null,this.h=S.ab||!1}h(ef,tn),ef.prototype.g=function(){return new $l(this.i,this.h)};function $l(S,j){zn.call(this),this.H=S,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h($l,zn),t=$l.prototype,t.open=function(S,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=j,this.readyState=1,Su(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(j.body=S),(this.H||o).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gp(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Su(this)),this.g&&(this.readyState=3,Su(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vI(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function vI(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var j=S.value?S.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!S.done}))&&(this.response=this.responseText+=j)}S.done?Gp(this):Su(this),this.readyState==3&&vI(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Gp(this))},t.Na=function(S){this.g&&(this.response=S,Gp(this))},t.ga=function(){this.g&&Gp(this)};function Gp(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Su(S)}t.setRequestHeader=function(S,j){this.A.append(S,j)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],j=this.h.entries();for(var B=j.next();!B.done;)B=B.value,S.push(B[0]+": "+B[1]),B=j.next();return S.join(`\r
`)};function Su(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function _I(S){let j="";return Le(S,function(B,J){j+=J,j+=":",j+=B,j+=`\r
`}),j}function Ov(S,j,B){e:{for(J in B){var J=!1;break e}J=!0}J||(B=_I(B),typeof S=="string"?B!=null&&_n(B):Er(S,j,B))}function ti(S){zn.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ti,zn);var xI=/^https?$/i,aD=["POST","PUT"];t=ti.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,j,B,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);j=j?j.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(j,String(S),!0),this.B=!1}catch($e){Up(this,$e);return}if(S=B||"",B=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Te in J)B.set(Te,J[Te]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const $e of J.keys())B.set($e,J.get($e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(B.keys()).find($e=>$e.toLowerCase()=="content-type"),Te=o.FormData&&S instanceof o.FormData,!(Array.prototype.indexOf.call(aD,j,void 0)>=0)||J||Te||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,Et]of B)this.g.setRequestHeader($e,Et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch($e){Up(this,$e)}};function Up(S,j){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=j,S.o=5,Bp(S),nf(S)}function Bp(S){S.A||(S.A=!0,Hn(S,"complete"),Hn(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Hn(this,"complete"),Hn(this,"abort"),nf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nf(this,!0)),ti.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tf(this):this.Xa())},t.Xa=function(){tf(this)};function tf(S){if(S.h&&typeof s<"u"){if(S.v&&jh(S)==4)setTimeout(S.Ca.bind(S),0);else if(Hn(S,"readystatechange"),jh(S)==4){S.h=!1;try{const $e=S.ca();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var B;if(!(B=j)){var J;if(J=$e===0){let Et=String(S.D).match(Vp)[1]||null;!Et&&o.self&&o.self.location&&(Et=o.self.location.protocol.slice(0,-1)),J=!xI.test(Et?Et.toLowerCase():"")}B=J}if(B)Hn(S,"complete"),Hn(S,"success");else{S.o=6;try{var Te=jh(S)>2?S.g.statusText:""}catch{Te=""}S.l=Te+" ["+S.ca()+"]",Bp(S)}}finally{nf(S)}}}}function nf(S,j){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const B=S.g;S.g=null,j||Hn(S,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jh(S){return S.g?S.g.readyState:0}t.ca=function(){try{return jh(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var j=this.g.responseText;return S&&j.indexOf(S)==0&&(j=j.substring(S.length)),Vt(j)}};function wI(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Qb(S){const j={};S=(S.g&&jh(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<S.length;J++){if(U(S[J]))continue;var B=q(S[J]);const Te=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const $e=j[Te]||[];j[Te]=$e,$e.push(B)}xe(j,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fh(S,j,B){return B&&B.internalChannelParams&&B.internalChannelParams[S]||j}function Dv(S){this.za=0,this.i=[],this.j=new Ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Fh("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Fh("baseRetryDelayMs",5e3,S),this.Za=Fh("retryDelaySeedMs",1e4,S),this.Ta=Fh("forwardChannelMaxRetries",2,S),this.va=Fh("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Mr(S&&S.concurrentRequestLimit),this.Ba=new A0,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dv.prototype,t.ka=8,t.I=1,t.connect=function(S,j,B,J){Tt(0),this.W=S,this.H=j||{},B&&J!==void 0&&(this.H.OSID=B,this.H.OAID=J),this.F=this.X,this.J=tE(this,null,this.W),rf(this)};function jv(S){if(Fv(S),S.I==3){var j=S.V++,B=Pc(S.J);if(Er(B,"SID",S.M),Er(B,"RID",j),Er(B,"TYPE","terminate"),$h(S,B),j=new ie(S,S.j,j),j.M=2,j.A=Qd(Pc(B)),B=!1,o.navigator&&o.navigator.sendBeacon)try{B=o.navigator.sendBeacon(j.A.toString(),"")}catch{}!B&&o.Image&&(new Image().src=j.A,B=!0),B||(j.g=EI(j.j,null),j.g.ea(j.A)),j.F=Date.now(),je(j)}P0(S)}function Vl(S){S.g&&(I0(S),S.g.cancel(),S.g=null)}function Fv(S){Vl(S),S.v&&(o.clearTimeout(S.v),S.v=null),$v(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&o.clearTimeout(S.m),S.m=null)}function rf(S){if(!Fr(S.h)&&!S.m){S.m=!0;var j=S.Ea;R||N(),V||(R(),V=!0),P.add(j,S),S.D=0}}function bI(S,j){return _i(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=j.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=le(c(S.Ea,S,j),zv(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Te=new ie(this,this.j,S);let $e=this.o;if(this.U&&($e?($e=Z($e),ne($e,this.U)):$e=this.U),this.u!==null||this.R||(Te.J=$e,$e=null),this.S)e:{for(var j=0,B=0;B<this.i.length;B++){t:{var J=this.i[B];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(j+=J,j>4096){j=B;break e}if(j===4096||B===this.i.length-1){j=B+1;break e}}j=1e3}else j=1e3;j=eE(this,Te,j),B=Pc(this.J),Er(B,"RID",S),Er(B,"CVER",22),this.G&&Er(B,"X-HTTP-Session-Id",this.G),$h(this,B),$e&&(this.R?j="headers="+_n(_I($e))+"&"+j:this.u&&Ov(B,this.u,$e)),Ic(this.h,Te),this.Ra&&Er(B,"TYPE","init"),this.S?(Er(B,"$req",j),Er(B,"SID","null"),Te.U=!0,ae(Te,B,null)):ae(Te,B,j),this.I=2}}else this.I==3&&(S?C0(this,S):this.i.length==0||Fr(this.h)||C0(this))};function C0(S,j){var B;j?B=j.l:B=S.V++;const J=Pc(S.J);Er(J,"SID",S.M),Er(J,"RID",B),Er(J,"AID",S.K),$h(S,J),S.u&&S.o&&Ov(J,S.u,S.o),B=new ie(S,S.j,B,S.D+1),S.u===null&&(B.J=S.o),j&&(S.i=j.G.concat(S.i)),j=eE(S,B,1e3),B.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),Ic(S.h,B),ae(B,J,j)}function $h(S,j){S.H&&Le(S.H,function(B,J){Er(j,J,B)}),S.l&&Le({},function(B,J){Er(j,J,B)})}function eE(S,j,B){B=Math.min(S.i.length,B);const J=S.l?c(S.l.Ka,S.l,S):null;e:{var Te=S.i;let Ln=-1;for(;;){const as=["count="+B];Ln==-1?B>0?(Ln=Te[0].g,as.push("ofs="+Ln)):Ln=0:as.push("ofs="+Ln);let $r=!0;for(let _s=0;_s<B;_s++){var $e=Te[_s].g;const Gl=Te[_s].map;if($e-=Ln,$e<0)Ln=Math.max(0,Te[_s].g-100),$r=!1;else try{$e="req"+$e+"_"||"";try{var Et=Gl instanceof Map?Gl:Object.entries(Gl);for(const[sf,zh]of Et){let Gh=zh;a(zh)&&(Gh=dr(zh)),as.push($e+sf+"="+encodeURIComponent(Gh))}}catch(sf){throw as.push($e+"type="+encodeURIComponent("_badmap")),sf}}catch{J&&J(Gl)}}if($r){Et=as.join("&");break e}}Et=void 0}return S=S.i.splice(0,B),j.G=S,Et}function zo(S){if(!S.g&&!S.v){S.Y=1;var j=S.Da;R||N(),V||(R(),V=!0),P.add(j,S),S.A=0}}function Vh(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=le(c(S.Da,S),zv(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Wp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=le(c(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Vl(this),Wp(this))};function I0(S){S.B!=null&&(o.clearTimeout(S.B),S.B=null)}function Wp(S){S.g=new ie(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var j=Pc(S.na);Er(j,"RID","rpc"),Er(j,"SID",S.M),Er(j,"AID",S.K),Er(j,"CI",S.F?"0":"1"),!S.F&&S.ia&&Er(j,"TO",S.ia),Er(j,"TYPE","xmlhttp"),$h(S,j),S.u&&S.o&&Ov(j,S.u,S.o),S.O&&(S.g.H=S.O);var B=S.g;S=S.ba,B.M=1,B.A=Qd(Pc(j)),B.u=null,B.R=!0,Me(B,S)}t.Va=function(){this.C!=null&&(this.C=null,Vl(this),Vh(this),Tt(19))};function $v(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function Vv(S,j){var B=null;if(S.g==j){$v(S),I0(S),S.g=null;var J=2}else if(Eu(S.h,j))B=j.G,Fl(S.h,j),J=1;else return;if(S.I!=0){if(j.o)if(J==1){B=j.u?j.u.length:0,j=Date.now()-j.F;var Te=S.D;J=Ie(),Hn(J,new X(J,B)),rf(S)}else zo(S);else if(Te=j.m,Te==3||Te==0&&j.X>0||!(J==1&&bI(S,j)||J==2&&Vh(S)))switch(B&&B.length>0&&(j=S.h,j.i=j.i.concat(B)),Te){case 1:zl(S,5);break;case 4:zl(S,10);break;case 3:zl(S,6);break;default:zl(S,2)}}}function zv(S,j){let B=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(B*=2),B*j}function zl(S,j){if(S.j.info("Error code "+j),j==2){var B=c(S.bb,S),J=S.Ua;const Te=!J;J=new Rh(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||E0(J,"https"),Qd(J),Te?Oh(J.toString(),B):Dh(J.toString(),B)}else Tt(2);S.I=0,S.l&&S.l.pa(j),P0(S),Fv(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function P0(S){if(S.I=0,S.ja=[],S.l){const j=os(S.h);(j.length!=0||S.i.length!=0)&&(y(S.ja,j),y(S.ja,S.i),S.h.i.length=0,g(S.i),S.i.length=0),S.l.oa()}}function tE(S,j,B){var J=B instanceof Rh?Pc(B):new Rh(B);if(J.g!="")j&&(J.g=j+"."+J.g),Mh(J,J.u);else{var Te=o.location;J=Te.protocol,j=j?j+"."+Te.hostname:Te.hostname,Te=+Te.port;const $e=new Rh(null);J&&E0($e,J),j&&($e.g=j),Te&&Mh($e,Te),B&&($e.h=B),J=$e}return B=S.G,j=S.wa,B&&j&&Er(J,B,j),Er(J,"VER",S.ka),$h(S,J),J}function EI(S,j,B){if(j&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=S.Aa&&!S.ma?new ti(new ef({ab:B})):new ti(S.ma),j.Fa(S.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function SI(){}t=SI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gv(){}Gv.prototype.g=function(S,j){return new Eo(S,j)};function Eo(S,j){zn.call(this),this.g=new Dv(j),this.l=S,this.h=j&&j.messageUrlParams||null,S=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(S?S["X-WebChannel-Content-Type"]=j.messageContentType:S={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(S?S["X-WebChannel-Client-Profile"]=j.sa:S={"X-WebChannel-Client-Profile":j.sa}),this.g.U=S,(S=j&&j.Qb)&&!U(S)&&(this.g.u=S),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!U(j)&&(this.g.G=j,S=this.h,S!==null&&j in S&&(S=this.h,j in S&&delete S[j])),this.j=new Hp(this)}h(Eo,zn),Eo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Eo.prototype.close=function(){jv(this.g)},Eo.prototype.o=function(S){var j=this.g;if(typeof S=="string"){var B={};B.__data__=S,S=B}else this.v&&(B={},B.__data__=dr(S),S=B);j.i.push(new Tn(j.Ya++,S)),j.I==3&&rf(j)},Eo.prototype.N=function(){this.g.l=null,delete this.j,jv(this.g),delete this.g,Eo.Z.N.call(this)};function TI(S){Fs.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var j=S.__sm__;if(j){e:{for(const B in j){S=B;break e}S=void 0}(this.i=S)&&(S=this.i,j=j!==null&&S in j?j[S]:void 0),this.data=j}else this.data=S}h(TI,Fs);function kI(){Nn.call(this),this.status=1}h(kI,Nn);function Hp(S){this.g=S}h(Hp,SI),Hp.prototype.ra=function(){Hn(this.g,"a")},Hp.prototype.qa=function(S){Hn(this.g,new TI(S))},Hp.prototype.pa=function(S){Hn(this.g,new kI)},Hp.prototype.oa=function(){Hn(this.g,"b")},Gv.prototype.createWebChannel=Gv.prototype.g,Eo.prototype.send=Eo.prototype.o,Eo.prototype.open=Eo.prototype.m,Eo.prototype.close=Eo.prototype.close,ohe=function(){return new Gv},she=function(){return Ie()},ihe=Ci,L8={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,vM=Ze,nt.COMPLETE="complete",rhe=nt,wo.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",zn.prototype.listen=zn.prototype.J,vS=wo,ti.prototype.listenOnce=ti.prototype.K,ti.prototype.getLastError=ti.prototype.Ha,ti.prototype.getLastErrorCode=ti.prototype.ya,ti.prototype.getStatus=ti.prototype.ca,ti.prototype.getResponseJson=ti.prototype.La,ti.prototype.getResponseText=ti.prototype.la,ti.prototype.send=ti.prototype.ea,ti.prototype.setWithCredentials=ti.prototype.Fa,nhe=ti}).apply(typeof DP<"u"?DP:typeof self<"u"?self:typeof window<"u"?window:{});const IJ="@firebase/firestore",PJ="4.9.3";let ra=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ra.UNAUTHENTICATED=new ra(null),ra.GOOGLE_CREDENTIALS=new ra("google-credentials-uid"),ra.FIRST_PARTY=new ra("first-party-uid"),ra.MOCK_USER=new ra("mock-user");let db="12.7.0";const D1=new vU("@firebase/firestore");function Y_(){return D1.logLevel}function lt(t,...e){if(D1.logLevel<=tr.DEBUG){const n=e.map(IU);D1.debug(`Firestore (${db}): ${t}`,...n)}}function ps(t,...e){if(D1.logLevel<=tr.ERROR){const n=e.map(IU);D1.error(`Firestore (${db}): ${t}`,...n)}}function Vk(t,...e){if(D1.logLevel<=tr.WARN){const n=e.map(IU);D1.warn(`Firestore (${db}): ${t}`,...n)}}function IU(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function $t(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ahe(t,r,n)}function ahe(t,e,n){let r=`FIRESTORE (${db}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ps(r),new Error(r)}function nn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||ahe(e,i,r)}function Xt(t,e){return t}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends Xd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Td{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class h5e{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d5e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ra.UNAUTHENTICATED)))}shutdown(){}}class f5e{constructor(e){this.t=e,this.currentUser=ra.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Td;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Td,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Td)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new h5e(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new ra(e)}}class p5e{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ra.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m5e{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new p5e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ra.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g5e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_l(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const r=s=>{s.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,lt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RJ(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new RJ(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function y5e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class PU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=y5e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Rn(t,e){return t<e?-1:t>e?1:0}function O8(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Aj(i)===Aj(s)?Rn(i,s):Aj(i)?1:-1}return Rn(t.length,e.length)}const v5e=55296,_5e=57343;function Aj(t){const e=t.charCodeAt(0);return e>=v5e&&e<=_5e}function u2(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function lhe(t){return t+"\0"}const MJ="__name__";class ld{constructor(e,n,r){n===void 0?n=0:n>e.length&&$t(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$t(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ld.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ld.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Rn(e.length,n.length)}static compareSegments(e,n){const r=ld.isNumericId(e),i=ld.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ld.extractNumericId(e).compare(ld.extractNumericId(n)):O8(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cg.fromString(e.substring(4,e.length-2))}}class Ir extends ld{construct(e,n,r){return new Ir(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xt(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ir(n)}static emptyPath(){return new Ir([])}}const x5e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends ld{construct(e,n,r){return new ji(e,n,r)}static isValidIdentifier(e){return x5e.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MJ}static keyField(){return new ji([MJ])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new xt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new xt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ji(n)}static emptyPath(){return new ji([])}}class At{constructor(e){this.path=e}static fromPath(e){return new At(Ir.fromString(e))}static fromName(e){return new At(Ir.fromString(e).popFirst(5))}static empty(){return new At(Ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ir.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ir.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Ir(e.slice()))}}function che(t,e,n){if(!n)throw new xt(We.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function w5e(t,e,n,r){if(e===!0&&r===!0)throw new xt(We.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NJ(t){if(!At.isDocumentKey(t))throw new xt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LJ(t){if(At.isDocumentKey(t))throw new xt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uhe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dL(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$t(12329,{type:typeof t})}function jd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dL(t);throw new xt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ns(t,e){const n={typeString:t};return e&&(n.value=e),n}function mC(t,e){if(!uhe(t))throw new xt(We.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new xt(We.INVALID_ARGUMENT,n);return!0}const OJ=-62135596800,DJ=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*DJ);return new Ur(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<OJ)throw new xt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DJ}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mC(e,Ur._jsonSchema))return new Ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OJ;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ur._jsonSchemaVersion="firestore/timestamp/1.0",Ur._jsonSchema={type:Ns("string",Ur._jsonSchemaVersion),seconds:Ns("number"),nanoseconds:Ns("number")};class ln{static fromTimestamp(e){return new ln(e)}static min(){return new ln(new Ur(0,0))}static max(){return new ln(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const h2=-1;class k4{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function D8(t){return t.fields.find((e=>e.kind===2))}function oy(t){return t.fields.filter((e=>e.kind!==2))}k4.UNKNOWN_ID=-1;class _M{constructor(e,n){this.fieldPath=e,this.kind=n}}class zk{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new zk(0,bc.min())}}function hhe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ln.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new bc(i,At.empty(),e)}function dhe(t){return new bc(t.readTime,t.key,h2)}class bc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new bc(ln.min(),At.empty(),h2)}static max(){return new bc(ln.max(),At.empty(),h2)}}function RU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Rn(t.largestBatchId,e.largestBatchId))}const fhe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class phe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function d0(t){if(t.code!==We.FAILED_PRECONDITION||t.message!==fhe)throw t;lt("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((i=>i?we.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===s&&r(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new we(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}const rc="SimpleDb";class fL{static open(e,n,r,i){try{return new fL(n,e.transaction(i,r))}catch(s){throw new gT(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Td,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new gT(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=MU(r.target.error);this.S.reject(new gT(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(lt(rc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new E5e(n)}}class Ig{static delete(e){return lt(rc,"Removing database:",e),Ry(iue().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!due())return!1;if(Ig.F())return!0;const e=Ys(),n=Ig.M(e),r=0<n&&n<10,i=mhe(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ig.M(Ys())===12.2&&ps("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(lt(rc,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new gT(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new xt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new xt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new gT(e,o))},i.onupgradeneeded=s=>{lt(rc,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next((()=>{lt(rc,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=fL.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),we.reject(c)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(lt(rc,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mhe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class b5e{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ry(this.U.delete())}}class gT extends xt{constructor(e,n){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function f0(t){return t.name==="IndexedDbTransactionError"}class E5e{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(lt(rc,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(lt(rc,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ry(r)}add(e){return lt(rc,"ADD",this.store.name,e,e),Ry(this.store.add(e))}get(e){return Ry(this.store.get(e)).next((n=>(n===void 0&&(n=null),lt(rc,"GET",this.store.name,e,n),n)))}delete(e){return lt(rc,"DELETE",this.store.name,e),Ry(this.store.delete(e))}count(){return lt(rc,"COUNT",this.store.name),Ry(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new we(((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}}))}{const s=this.cursor(r),o=[];return this.H(s,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new we(((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){lt(rc,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((s,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new we(((r,i)=>{n.onerror=s=>{const o=MU(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new we(((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new b5e(a),c=n(a.primaryKey,a.value,l);if(c instanceof we){const u=c.catch((h=>(l.done(),we.reject(h))));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}})).next((()=>we.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ry(t){return new we(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=MU(r.target.error);n(i)}}))}let jJ=!1;function MU(t){const e=Ig.M(Ys());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new xt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jJ||(jJ=!0,setTimeout((()=>{throw r}),0)),r}}return t}const yT="IndexBackfiller";class S5e{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){lt(yT,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();lt(yT,`Documents written: ${n}`)}catch(n){f0(n)?lt(yT,"Ignoring IndexedDB error during index backfill: ",n):await d0(n)}await this.re(6e4)}))}}class T5e{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,s=!0;return we.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return lt(yT,`Processing collection: ${o}`),this.oe(e,o,i).next((a=>{i-=a,r.add(o)}));s=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,s))).next((a=>(lt(yT,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,s)=>{const o=dhe(s);RU(o,r)>0&&(r=o)})),new bc(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class wl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wl.ce=-1;const s1=-1;function pL(t){return t==null}function Gk(t){return t===0&&1/t==-1/0}function ghe(t){return typeof t=="number"&&Number.isInteger(t)&&!Gk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const A4="";function ya(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=FJ(e)),e=k5e(t.get(n),e);return FJ(e)}function k5e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case A4:n+="";break;default:n+=s}}return n}function FJ(t){return t+A4+""}function _d(t){const e=t.length;if(nn(e>=2,64408,{path:t}),e===2)return nn(t.charAt(0)===A4&&t.charAt(1)==="",56145,{path:t}),Ir.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(A4,s);switch((o<0||o>n)&&$t(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:$t(61167,{path:t})}s=o+2}return new Ir(r)}const ay="remoteDocuments",gC="owner",x_="owner",Uk="mutationQueues",A5e="userId",Ju="mutations",$J="batchId",Wy="userMutationsIndex",VJ=["userId","batchId"];function xM(t,e){return[t,ya(e)]}function yhe(t,e,n){return[t,ya(e),n]}const C5e={},d2="documentMutations",C4="remoteDocumentsV14",I5e=["prefixPath","collectionGroup","readTime","documentId"],wM="documentKeyIndex",P5e=["prefixPath","collectionGroup","documentId"],vhe="collectionGroupIndex",R5e=["collectionGroup","readTime","prefixPath","documentId"],Bk="remoteDocumentGlobal",j8="remoteDocumentGlobalKey",f2="targets",_he="queryTargetsIndex",M5e=["canonicalId","targetId"],p2="targetDocuments",N5e=["targetId","path"],NU="documentTargetsIndex",L5e=["path","targetId"],I4="targetGlobalKey",o1="targetGlobal",Wk="collectionParents",O5e=["collectionId","parent"],m2="clientMetadata",D5e="clientId",mL="bundles",j5e="bundleId",gL="namedQueries",F5e="name",LU="indexConfiguration",$5e="indexId",F8="collectionGroupIndex",V5e="collectionGroup",vT="indexState",z5e=["indexId","uid"],xhe="sequenceNumberIndex",G5e=["uid","sequenceNumber"],_T="indexEntries",U5e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],whe="documentKeyIndex",B5e=["indexId","uid","orderedDocumentKey"],yL="documentOverlays",W5e=["userId","collectionPath","documentId"],$8="collectionPathOverlayIndex",H5e=["userId","collectionPath","largestBatchId"],bhe="collectionGroupOverlayIndex",q5e=["userId","collectionGroup","largestBatchId"],OU="globals",K5e="name",Ehe=[Uk,Ju,d2,ay,f2,gC,o1,p2,m2,Bk,Wk,mL,gL],Y5e=[...Ehe,yL],She=[Uk,Ju,d2,C4,f2,gC,o1,p2,m2,Bk,Wk,mL,gL,yL],The=She,DU=[...The,LU,vT,_T],X5e=DU,khe=[...DU,OU],Z5e=khe;class V8 extends phe{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Zs(t,e){const n=Xt(t);return Ig.O(n.le,e)}function zJ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function p0(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ahe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ci{constructor(e,n){this.comparator=e,this.root=n||Lo.EMPTY}insert(e,n){return new ci(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lo.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jP(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jP(this.root,e,this.comparator,!1)}getReverseIterator(){return new jP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jP(this.root,e,this.comparator,!0)}}class jP{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lo{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Lo.RED,this.left=i??Lo.EMPTY,this.right=s??Lo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Lo(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Lo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Lo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $t(27949);return e+(this.isRed()?0:1)}}Lo.EMPTY=null,Lo.RED=!0,Lo.BLACK=!1;Lo.EMPTY=new class{constructor(){this.size=0}get key(){throw $t(57766)}get value(){throw $t(16141)}get color(){throw $t(16727)}get left(){throw $t(29726)}get right(){throw $t(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new GJ(this.data.getIterator())}getIteratorFrom(e){return new GJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hr(this.comparator);return n.data=e,n}}class GJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function w_(t){return t.hasNext()?t.getNext():void 0}class bl{constructor(e){this.fields=e,e.sort(ji.comparator)}static empty(){return new bl([])}unionWith(e){let n=new Hr(ji.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return u2(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Che extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vs{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Che("Invalid base64 string: "+s):s}})(e);return new vs(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new vs(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vs.EMPTY_BYTE_STRING=new vs("");const J5e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sp(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const n=J5e.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ei(t.seconds),nanos:Ei(t.nanos)}}function Ei(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tp(t){return typeof t=="string"?vs.fromBase64String(t):vs.fromUint8Array(t)}const Ihe="server_timestamp",Phe="__type__",Rhe="__previous_value__",Mhe="__local_write_time__";function jU(t){return(t?.mapValue?.fields||{})[Phe]?.stringValue===Ihe}function vL(t){const e=t.mapValue.fields[Rhe];return jU(e)?vL(e):e}function Hk(t){const e=Sp(t.mapValue.fields[Mhe].timestampValue);return new Ur(e.seconds,e.nanos)}class Q5e{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const P4="(default)";class j1{constructor(e,n){this.projectId=e,this.database=n||P4}static empty(){return new j1("","")}get isDefaultDatabase(){return this.database===P4}isEqual(e){return e instanceof j1&&e.projectId===this.projectId&&e.database===this.database}}const FU="__type__",Nhe="__max__",ug={mapValue:{fields:{__type__:{stringValue:Nhe}}}},$U="__vector__",g2="value",bM={nullValue:"NULL_VALUE"};function Ug(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jU(t)?4:Lhe(t)?9007199254740991:_L(t)?10:11:$t(28295,{value:t})}function Fd(t,e){if(t===e)return!0;const n=Ug(t);if(n!==Ug(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hk(t).isEqual(Hk(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sp(i.timestampValue),a=Sp(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Tp(i.bytesValue).isEqual(Tp(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ei(i.geoPointValue.latitude)===Ei(s.geoPointValue.latitude)&&Ei(i.geoPointValue.longitude)===Ei(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ei(i.integerValue)===Ei(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ei(i.doubleValue),a=Ei(s.doubleValue);return o===a?Gk(o)===Gk(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return u2(t.arrayValue.values||[],e.arrayValue.values||[],Fd);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zJ(o)!==zJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Fd(o[l],a[l])))return!1;return!0})(t,e);default:return $t(52216,{left:t})}}function qk(t,e){return(t.values||[]).find((n=>Fd(n,e)))!==void 0}function Bg(t,e){if(t===e)return 0;const n=Ug(t),r=Ug(e);if(n!==r)return Rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rn(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=Ei(s.integerValue||s.doubleValue),l=Ei(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return UJ(t.timestampValue,e.timestampValue);case 4:return UJ(Hk(t),Hk(e));case 5:return O8(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=Tp(s),l=Tp(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Rn(a[c],l[c]);if(u!==0)return u}return Rn(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Rn(Ei(s.latitude),Ei(o.latitude));return a!==0?a:Rn(Ei(s.longitude),Ei(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BJ(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},c=a[g2]?.arrayValue,u=l[g2]?.arrayValue,h=Rn(c?.values?.length||0,u?.values?.length||0);return h!==0?h:BJ(c,u)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===ug.mapValue&&o===ug.mapValue)return 0;if(s===ug.mapValue)return 1;if(o===ug.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=O8(l[h],u[h]);if(f!==0)return f;const g=Bg(a[l[h]],c[u[h]]);if(g!==0)return g}return Rn(l.length,u.length)})(t.mapValue,e.mapValue);default:throw $t(23264,{he:n})}}function UJ(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rn(t,e);const n=Sp(t),r=Sp(e),i=Rn(n.seconds,r.seconds);return i!==0?i:Rn(n.nanos,r.nanos)}function BJ(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Bg(n[i],r[i]);if(s)return s}return Rn(n.length,r.length)}function y2(t){return z8(t)}function z8(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Sp(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Tp(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=z8(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${z8(n.fields[o])}`;return i+"}"})(t.mapValue):$t(61005,{value:t})}function EM(t){switch(Ug(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vL(t);return e?16+EM(e):16;case 5:return 2*t.stringValue.length;case 6:return Tp(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+EM(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return p0(r.fields,((s,o)=>{i+=s.length+EM(o)})),i})(t.mapValue);default:throw $t(13486,{value:t})}}function Kk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function G8(t){return!!t&&"integerValue"in t}function Yk(t){return!!t&&"arrayValue"in t}function WJ(t){return!!t&&"nullValue"in t}function HJ(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function SM(t){return!!t&&"mapValue"in t}function _L(t){return(t?.mapValue?.fields||{})[FU]?.stringValue===$U}function xT(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return p0(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=xT(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xT(t.arrayValue.values[n]);return e}return{...t}}function Lhe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Nhe}const Ohe={mapValue:{fields:{[FU]:{stringValue:$U},[g2]:{arrayValue:{}}}}};function eLe(t){return"nullValue"in t?bM:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Kk(j1.empty(),At.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?_L(t)?Ohe:{mapValue:{}}:$t(35942,{value:t})}function tLe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Kk(j1.empty(),At.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Ohe:"mapValue"in t?_L(t)?{mapValue:{}}:ug:$t(61959,{value:t})}function qJ(t,e){const n=Bg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function KJ(t,e){const n=Bg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ua{constructor(e){this.value=e}static empty(){return new ua({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!SM(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xT(n)}setAll(e){let n=ji.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xT(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());SM(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fd(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];SM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){p0(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new ua(xT(this.value))}}function Dhe(t){const e=[];return p0(t.fields,((n,r)=>{const i=new ji([n]);if(SM(r)){const s=Dhe(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new bl(e)}class es{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new es(e,0,ln.min(),ln.min(),ln.min(),ua.empty(),0)}static newFoundDocument(e,n,r,i){return new es(e,1,n,ln.min(),r,i,0)}static newNoDocument(e,n){return new es(e,2,n,ln.min(),ln.min(),ua.empty(),0)}static newUnknownDocument(e,n){return new es(e,3,n,ln.min(),ln.min(),ua.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ua.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ua.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof es&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new es(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class v2{constructor(e,n){this.position=e,this.inclusive=n}}function YJ(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Bg(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function XJ(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fd(t.position[n],e.position[n]))return!1;return!0}class R4{constructor(e,n="asc"){this.field=e,this.dir=n}}function nLe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class jhe{}class rr extends jhe{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new rLe(e,n,r):n==="array-contains"?new oLe(e,r):n==="in"?new Uhe(e,r):n==="not-in"?new aLe(e,r):n==="array-contains-any"?new lLe(e,r):new rr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new iLe(e,r):new sLe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Bg(n,this.value)):n!==null&&Ug(this.value)===Ug(n)&&this.matchesComparison(Bg(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends jhe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return _2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _2(t){return t.op==="and"}function U8(t){return t.op==="or"}function VU(t){return Fhe(t)&&_2(t)}function Fhe(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function B8(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+y2(t.value);if(VU(t))return t.filters.map((e=>B8(e))).join(",");{const e=t.filters.map((n=>B8(n))).join(",");return`${t.op}(${e})`}}function $he(t,e){return t instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.field.isEqual(i.field)&&Fd(r.value,i.value)})(t,e):t instanceof Br?(function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&$he(o,i.filters[a])),!0):!1})(t,e):void $t(19439)}function Vhe(t,e){const n=t.filters.concat(e);return Br.create(n,t.op)}function zhe(t){return t instanceof rr?(function(n){return`${n.field.canonicalString()} ${n.op} ${y2(n.value)}`})(t):t instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(zhe).join(" ,")+"}"})(t):"Filter"}class rLe extends rr{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class iLe extends rr{constructor(e,n){super(e,"in",n),this.keys=Ghe("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sLe extends rr{constructor(e,n){super(e,"not-in",n),this.keys=Ghe("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Ghe(t,e){return(e.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class oLe extends rr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yk(n)&&qk(n.arrayValue,this.value)}}class Uhe extends rr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qk(this.value.arrayValue,n)}}class aLe extends rr{constructor(e,n){super(e,"not-in",n)}matches(e){if(qk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!qk(this.value.arrayValue,n)}}class lLe extends rr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>qk(this.value.arrayValue,r)))}}class cLe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function W8(t,e=null,n=[],r=[],i=null,s=null,o=null){return new cLe(t,e,n,r,i,s,o)}function F1(t){const e=Xt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>B8(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),pL(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>y2(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>y2(r))).join(",")),e.Te=n}return e.Te}function yC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nLe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$he(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XJ(t.startAt,e.startAt)&&XJ(t.endAt,e.endAt)}function M4(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function N4(t,e){return t.filters.filter((n=>n instanceof rr&&n.field.isEqual(e)))}function ZJ(t,e,n){let r=bM,i=!0;for(const s of N4(t,e)){let o=bM,a=!0;switch(s.op){case"<":case"<=":o=eLe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=bM}qJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];qJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function JJ(t,e,n){let r=ug,i=!0;for(const s of N4(t,e)){let o=ug,a=!0;switch(s.op){case">=":case">":o=tLe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ug}KJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];KJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class vC{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bhe(t,e,n,r,i,s,o,a){return new vC(t,e,n,r,i,s,o,a)}function xL(t){return new vC(t)}function QJ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Whe(t){return t.collectionGroup!==null}function wT(t){const e=Xt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hr(ji.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new R4(s,r))})),n.has(ji.keyField().canonicalString())||e.Ie.push(new R4(ji.keyField(),r))}return e.Ie}function gc(t){const e=Xt(t);return e.Ee||(e.Ee=uLe(e,wT(t))),e.Ee}function uLe(t,e){if(t.limitType==="F")return W8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new R4(i.field,s)}));const n=t.endAt?new v2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new v2(t.startAt.position,t.startAt.inclusive):null;return W8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function H8(t,e){const n=t.filters.concat([e]);return new vC(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function q8(t,e,n){return new vC(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wL(t,e){return yC(gc(t),gc(e))&&t.limitType===e.limitType}function Hhe(t){return`${F1(gc(t))}|lt:${t.limitType}`}function X_(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>zhe(i))).join(", ")}]`),pL(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>y2(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>y2(i))).join(",")),`Target(${r})`})(gc(t))}; limitType=${t.limitType})`}function _C(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):At.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of wT(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const c=YJ(o,a,l);return o.inclusive?c<=0:c<0})(r.startAt,wT(r),i)||r.endAt&&!(function(o,a,l){const c=YJ(o,a,l);return o.inclusive?c>=0:c>0})(r.endAt,wT(r),i))})(t,e)}function qhe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Khe(t){return(e,n)=>{let r=!1;for(const i of wT(t)){const s=hLe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hLe(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Bg(l,c):$t(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $t(19790,{direction:t.dir})}}class Np{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){p0(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Ahe(this.inner)}size(){return this.innerSize}}const dLe=new ci(At.comparator);function dc(){return dLe}const Yhe=new ci(At.comparator);function _S(...t){let e=Yhe;for(const n of t)e=e.insert(n.key,n);return e}function Xhe(t){let e=Yhe;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xd(){return bT()}function Zhe(){return bT()}function bT(){return new Np((t=>t.toString()),((t,e)=>t.isEqual(e)))}const fLe=new ci(At.comparator),pLe=new Hr(At.comparator);function qn(...t){let e=pLe;for(const n of t)e=e.add(n);return e}const mLe=new Hr(Rn);function zU(){return mLe}function GU(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gk(e)?"-0":e}}function Jhe(t){return{integerValue:""+t}}function gLe(t,e){return ghe(e)?Jhe(e):GU(t,e)}class bL{constructor(){this._=void 0}}function yLe(t,e,n){return t instanceof x2?(function(i,s){const o={fields:{[Phe]:{stringValue:Ihe},[Mhe]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jU(s)&&(s=vL(s)),s&&(o.fields[Rhe]=s),{mapValue:o}})(n,e):t instanceof w2?ede(t,e):t instanceof b2?tde(t,e):(function(i,s){const o=Qhe(i,s),a=eQ(o)+eQ(i.Ae);return G8(o)&&G8(i.Ae)?Jhe(a):GU(i.serializer,a)})(t,e)}function vLe(t,e,n){return t instanceof w2?ede(t,e):t instanceof b2?tde(t,e):n}function Qhe(t,e){return t instanceof Xk?(function(r){return G8(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class x2 extends bL{}class w2 extends bL{constructor(e){super(),this.elements=e}}function ede(t,e){const n=nde(e);for(const r of t.elements)n.some((i=>Fd(i,r)))||n.push(r);return{arrayValue:{values:n}}}class b2 extends bL{constructor(e){super(),this.elements=e}}function tde(t,e){let n=nde(e);for(const r of t.elements)n=n.filter((i=>!Fd(i,r)));return{arrayValue:{values:n}}}class Xk extends bL{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function eQ(t){return Ei(t.integerValue||t.doubleValue)}function nde(t){return Yk(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class rde{constructor(e,n){this.field=e,this.transform=n}}function _Le(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof w2&&i instanceof w2||r instanceof b2&&i instanceof b2?u2(r.elements,i.elements,Fd):r instanceof Xk&&i instanceof Xk?Fd(r.Ae,i.Ae):r instanceof x2&&i instanceof x2})(t.transform,e.transform)}class xLe{constructor(e,n){this.version=e,this.transformResults=n}}class fa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fa}static exists(e){return new fa(void 0,e)}static updateTime(e){return new fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function TM(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class EL{}function ide(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new SL(t.key,fa.none()):new fb(t.key,t.data,fa.none());{const n=t.data,r=ua.empty();let i=new Hr(ji.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lp(t.key,r,new bl(i.toArray()),fa.none())}}function wLe(t,e,n){t instanceof fb?(function(i,s,o){const a=i.value.clone(),l=nQ(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Lp?(function(i,s,o){if(!TM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=nQ(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(sde(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function ET(t,e,n,r){return t instanceof fb?(function(s,o,a,l){if(!TM(s.precondition,o))return a;const c=s.value.clone(),u=rQ(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Lp?(function(s,o,a,l){if(!TM(s.precondition,o))return a;const c=rQ(s.fieldTransforms,l,o),u=o.data;return u.setAll(sde(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(s,o,a){return TM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function bLe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Qhe(r.transform,i||null);s!=null&&(n===null&&(n=ua.empty()),n.set(r.field,s))}return n||null}function tQ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&u2(r,i,((s,o)=>_Le(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fb extends EL{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lp extends EL{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function sde(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function nQ(t,e,n){const r=new Map;nn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,vLe(o,a,n[i]))}return r}function rQ(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,yLe(s,o,e))}return r}class SL extends EL{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ode extends EL{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wLe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ET(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ET(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Zhe();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=ide(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ln.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qn())}isEqual(e){return this.batchId===e.batchId&&u2(this.mutations,e.mutations,((n,r)=>tQ(n,r)))&&u2(this.baseMutations,e.baseMutations,((n,r)=>tQ(n,r)))}}class BU{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return fLe})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new BU(e,n,r,i)}}class WU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ELe{constructor(e,n){this.count=e,this.unchangedNames=n}}var Es,ar;function SLe(t){switch(t){case We.OK:return $t(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return $t(15467,{code:t})}}function ade(t){if(t===void 0)return ps("GRPC error has no .code"),We.UNKNOWN;switch(t){case Es.OK:return We.OK;case Es.CANCELLED:return We.CANCELLED;case Es.UNKNOWN:return We.UNKNOWN;case Es.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Es.INTERNAL:return We.INTERNAL;case Es.UNAVAILABLE:return We.UNAVAILABLE;case Es.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Es.NOT_FOUND:return We.NOT_FOUND;case Es.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Es.ABORTED:return We.ABORTED;case Es.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Es.DATA_LOSS:return We.DATA_LOSS;default:return $t(39323,{code:t})}}(ar=Es||(Es={}))[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";function TLe(){return new TextEncoder}const kLe=new Cg([4294967295,4294967295],0);function iQ(t){const e=TLe().encode(t),n=new the;return n.update(e),new Uint8Array(n.digest())}function sQ(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cg([n,r],0),new Cg([i,s],0)]}class HU{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xS(`Invalid padding: ${n}`);if(r<0)throw new xS(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xS(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xS(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Cg.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Cg.fromNumber(r)));return i.compare(kLe)===1&&(i=new Cg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iQ(e),[r,i]=sQ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new HU(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=iQ(e),[r,i]=sQ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class xS extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xC{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wC.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xC(ln.min(),i,new ci(Rn),dc(),qn())}}class wC{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wC(r,n,qn(),qn(),qn())}}class kM{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class lde{constructor(e,n){this.targetId=e,this.Ce=n}}class cde{constructor(e,n,r=vs.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oQ{constructor(){this.ve=0,this.Fe=aQ(),this.Me=vs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qn(),n=qn(),r=qn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:$t(38017,{changeType:s})}})),new wC(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=aQ()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ALe{constructor(e){this.Ge=e,this.ze=new Map,this.je=dc(),this.Je=FP(),this.He=FP(),this.Ye=new ci(Rn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:$t(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(M4(s))if(r===0){const o=new At(s.path);this.et(n,o,es.newNoDocument(o,ln.min()))}else nn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Tp(r).toUint8Array()}catch(l){if(l instanceof Che)return Vk("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new HU(o,i,s)}catch(l){return Vk(l instanceof xS?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&M4(a.target)){const l=new At(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,es.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=qn();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new xC(e,n,this.Ye,this.je,r);return this.je=dc(),this.Je=FP(),this.He=FP(),this.Ye=new ci(Rn),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new oQ,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hr(Rn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hr(Rn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oQ),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function FP(){return new ci(At.comparator)}function aQ(){return new ci(At.comparator)}const CLe={asc:"ASCENDING",desc:"DESCENDING"},ILe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PLe={and:"AND",or:"OR"};class RLe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K8(t,e){return t.useProto3Json||pL(e)?e:{value:e}}function E2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ude(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function MLe(t,e){return E2(t,e.toTimestamp())}function Ga(t){return nn(!!t,49232),ln.fromTimestamp((function(n){const r=Sp(n);return new Ur(r.seconds,r.nanos)})(t))}function qU(t,e){return Y8(t,e).canonicalString()}function Y8(t,e){const n=(function(i){return new Ir(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function hde(t){const e=Ir.fromString(t);return nn(xde(e),10190,{key:e.toString()}),e}function L4(t,e){return qU(t.databaseId,e.path)}function a1(t,e){const n=hde(e);if(n.get(1)!==t.databaseId.projectId)throw new xt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(pde(n))}function dde(t,e){return qU(t.databaseId,e)}function fde(t){const e=hde(t);return e.length===4?Ir.emptyPath():pde(e)}function X8(t){return new Ir(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pde(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lQ(t,e,n){return{name:L4(t,e),fields:n.value.mapValue.fields}}function NLe(t,e,n){const r=a1(t,e.name),i=Ga(e.updateTime),s=e.createTime?Ga(e.createTime):ln.min(),o=new ua({mapValue:{fields:e.fields}}),a=es.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function LLe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$t(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,u){return c.useProto3Json?(nn(u===void 0||typeof u=="string",58123),vs.fromBase64String(u||"")):(nn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),vs.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const u=c.code===void 0?We.UNKNOWN:ade(c.code);return new xt(u,c.message||"")})(o);n=new cde(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=a1(t,r.document.name),s=Ga(r.document.updateTime),o=r.document.createTime?Ga(r.document.createTime):ln.min(),a=new ua({mapValue:{fields:r.document.fields}}),l=es.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kM(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=a1(t,r.document),s=r.readTime?Ga(r.readTime):ln.min(),o=es.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kM([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=a1(t,r.document),s=r.removedTargetIds||[];n=new kM([],s,i,null)}else{if(!("filter"in e))return $t(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new ELe(i,s),a=r.targetId;n=new lde(a,o)}}return n}function O4(t,e){let n;if(e instanceof fb)n={update:lQ(t,e.key,e.value)};else if(e instanceof SL)n={delete:L4(t,e.key)};else if(e instanceof Lp)n={update:lQ(t,e.key,e.data),updateMask:VLe(e.fieldMask)};else{if(!(e instanceof ode))return $t(16599,{Vt:e.type});n={verify:L4(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof x2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof w2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof b2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xk)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw $t(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:MLe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$t(27497)})(t,e.precondition)),n}function Z8(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?fa.updateTime(Ga(s.updateTime)):s.exists!==void 0?fa.exists(s.exists):fa.none()})(e.currentDocument):fa.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,a){let l=null;if("setToServerValue"in a)nn(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new x2;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new w2(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new b2(u)}else"increment"in a?l=new Xk(o,a.increment):$t(16584,{proto:a});const c=ji.fromServerFormat(a.fieldPath);return new rde(c,l)})(t,i))):[];if(e.update){e.update.name;const i=a1(t,e.update.name),s=new ua({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const c=l.fieldPaths||[];return new bl(c.map((u=>ji.fromServerFormat(u))))})(e.updateMask);return new Lp(i,s,o,n,r)}return new fb(i,s,n,r)}if(e.delete){const i=a1(t,e.delete);return new SL(i,n)}if(e.verify){const i=a1(t,e.verify);return new ode(i,n)}return $t(1463,{proto:e})}function OLe(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?Ga(i.updateTime):Ga(s);return o.isEqual(ln.min())&&(o=Ga(s)),new xLe(o,i.transformResults||[])})(n,e)))):[]}function mde(t,e){return{documents:[dde(t,e.path)]}}function gde(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dde(t,i);const s=(function(c){if(c.length!==0)return _de(Br.create(c,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(c){if(c.length!==0)return c.map((u=>(function(f){return{field:Z_(f.field),direction:jLe(f.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=K8(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function yde(t){let e=fde(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nn(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=(function(h){const f=vde(h);return f instanceof Br&&VU(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((f=>(function(y){return new R4(J_(y.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,pL(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(h){const f=!!h.before,g=h.values||[];return new v2(g,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const f=!h.before,g=h.values||[];return new v2(g,f)})(n.endAt)),Bhe(e,i,o,s,a,"F",l,c)}function DLe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vde(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=J_(n.unaryFilter.field);return rr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=J_(n.unaryFilter.field);return rr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=J_(n.unaryFilter.field);return rr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=J_(n.unaryFilter.field);return rr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $t(61313);default:return $t(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rr.create(J_(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $t(58110);default:return $t(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((r=>vde(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return $t(1026)}})(n.compositeFilter.op))})(t):$t(30097,{filter:t})}function jLe(t){return CLe[t]}function FLe(t){return ILe[t]}function $Le(t){return PLe[t]}function Z_(t){return{fieldPath:t.canonicalString()}}function J_(t){return ji.fromServerFormat(t.fieldPath)}function _de(t){return t instanceof rr?(function(n){if(n.op==="=="){if(HJ(n.value))return{unaryFilter:{field:Z_(n.field),op:"IS_NAN"}};if(WJ(n.value))return{unaryFilter:{field:Z_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HJ(n.value))return{unaryFilter:{field:Z_(n.field),op:"IS_NOT_NAN"}};if(WJ(n.value))return{unaryFilter:{field:Z_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Z_(n.field),op:FLe(n.op),value:n.value}}})(t):t instanceof Br?(function(n){const r=n.getFilters().map((i=>_de(i)));return r.length===1?r[0]:{compositeFilter:{op:$Le(n.op),filters:r}}})(t):$t(54877,{filter:t})}function VLe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function xde(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class rp{constructor(e,n,r,i,s=ln.min(),o=ln.min(),a=vs.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rp(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class wde{constructor(e){this.yt=e}}function zLe(t,e){let n;if(e.document)n=NLe(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=V1(e.noDocument.readTime);n=es.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t(56709);{const r=At.fromSegments(e.unknownDocument.path),i=V1(e.unknownDocument.version);n=es.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Ur(i[0],i[1]);return ln.fromTimestamp(s)})(e.readTime)),n}function cQ(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:D4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,o){return{name:L4(s,o.key),fields:o.data.value.mapValue.fields,updateTime:E2(s,o.version.toTimestamp()),createTime:E2(s,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$1(e.version)};else{if(!e.isUnknownDocument())return $t(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:$1(e.version)}}return r}function D4(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function $1(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function V1(t){const e=new Ur(t.seconds,t.nanoseconds);return ln.fromTimestamp(e)}function My(t,e){const n=(e.baseMutations||[]).map((s=>Z8(t.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Z8(t.yt,s))),i=Ur.fromMillis(e.localWriteTimeMs);return new UU(e.batchId,i,n,r)}function wS(t){const e=V1(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?V1(t.lastLimboFreeSnapshotVersion):ln.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){const o=s.documents.length;return nn(o===1,1966,{count:o}),gc(xL(fde(s.documents[0])))})(t.query):(function(s){return gc(yde(s))})(t.query),new rp(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,vs.fromBase64String(t.resumeToken))}function bde(t,e){const n=$1(e.snapshotVersion),r=$1(e.lastLimboFreeSnapshotVersion);let i;i=M4(e.target)?mde(t.yt,e.target):gde(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:F1(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Ede(t){const e=yde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?q8(e,e.limit,"L"):e}function Cj(t,e){return new WU(e.largestBatchId,Z8(t.yt,e.overlayMutation))}function uQ(t,e){const n=e.path.lastSegment();return[t,ya(e.path.popLast()),n]}function hQ(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:$1(r.readTime),documentKey:ya(r.documentKey.path),largestBatchId:r.largestBatchId}}class GLe{getBundleMetadata(e,n){return dQ(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:V1(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return dQ(e).put((function(i){return{bundleId:i.id,createTime:$1(Ga(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return fQ(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:Ede(s.bundledQuery),readTime:V1(s.readTime)}})(r)}))}saveNamedQuery(e,n){return fQ(e).put((function(i){return{name:i.name,readTime:$1(Ga(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function dQ(t){return Zs(t,mL)}function fQ(t){return Zs(t,gL)}class TL{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new TL(e,r)}getOverlay(e,n){return DE(e).get(uQ(this.userId,n)).next((r=>r?Cj(this.serializer,r):null))}getOverlays(e,n){const r=xd();return we.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,o)=>{const a=new WU(n,o);i.push(this.St(e,a))})),we.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(ya(o.getCollectionPath()))));const s=[];return i.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(DE(e).Z($8,a))})),we.waitFor(s)}getOverlaysForCollection(e,n,r){const i=xd(),s=ya(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return DE(e).J($8,o).next((a=>{for(const l of a){const c=Cj(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=xd();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return DE(e).ee({index:bhe,range:a},((l,c,u)=>{const h=Cj(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()})).next((()=>s))}St(e,n){return DE(e).put((function(i,s,o){const[a,l,c]=uQ(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:O4(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function DE(t){return Zs(t,yL)}class ULe{bt(e){return Zs(e,OU)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?vs.fromUint8Array(r):vs.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Ny{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ei(e.integerValue));else if("doubleValue"in e){const r=Ei(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Gk(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Sp(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Tp(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Lhe(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):_L(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):$t(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=g2,s=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ei(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),At.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Ny.Kt=new Ny;const b_=255;function BLe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function pQ(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const o=BLe(255&r[s]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class WLe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=pQ(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=pQ(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(b_),this.sn(255)}_n(){this.an(b_),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===b_?(this.sn(b_),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===b_?(this.an(b_),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HLe{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class qLe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class jE{constructor(){this.cn=new WLe,this.ln=new HLe(this.cn),this.hn=new qLe(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ly{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ly(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:AM(this.En),directionalValue:AM(this.dn),orderedDocumentKey:AM(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function fm(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=mQ(t.En,e.En),n!==0?n:(n=mQ(t.dn,e.dn),n!==0?n:At.comparator(t.In,e.In)))}function mQ(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function AM(t){return hue()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function gQ(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class yQ{constructor(e){this.mn=new Hr(((n,r)=>ji.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(nn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=D8(e);if(n!==void 0&&!this.wn(n))return!1;const r=oy(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Hr(ji.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new _M(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new _M(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new _M(r.field,r.dir==="asc"?0:1)));return new k4(k4.UNKNOWN_ID,this.collectionId,n,zk.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function Sde(t){if(nn(t instanceof rr||t instanceof Br,20012),t instanceof rr){if(t instanceof Uhe){const n=t.value.arrayValue?.values?.map((r=>rr.create(t.field,"==",r)))||[];return Br.create(n,"or")}return t}const e=t.filters.map((n=>Sde(n)));return Br.create(e,t.op)}function KLe(t){if(t.getFilters().length===0)return[];const e=e9(Sde(t));return nn(Tde(e),7391),J8(e)||Q8(e)?[e]:e.getFilters()}function J8(t){return t instanceof rr}function Q8(t){return t instanceof Br&&VU(t)}function Tde(t){return J8(t)||Q8(t)||(function(n){if(n instanceof Br&&U8(n)){for(const r of n.getFilters())if(!J8(r)&&!Q8(r))return!1;return!0}return!1})(t)}function e9(t){if(nn(t instanceof rr||t instanceof Br,34018),t instanceof rr)return t;if(t.filters.length===1)return e9(t.filters[0]);const e=t.filters.map((r=>e9(r)));let n=Br.create(e,t.op);return n=j4(n),Tde(n)?n:(nn(n instanceof Br,64498),nn(_2(n),40251),nn(n.filters.length>1,57927),n.filters.reduce(((r,i)=>KU(r,i))))}function KU(t,e){let n;return nn(t instanceof rr||t instanceof Br,38388),nn(e instanceof rr||e instanceof Br,25473),n=t instanceof rr?e instanceof rr?(function(i,s){return Br.create([i,s],"and")})(t,e):vQ(t,e):e instanceof rr?vQ(e,t):(function(i,s){if(nn(i.filters.length>0&&s.filters.length>0,48005),_2(i)&&_2(s))return Vhe(i,s.getFilters());const o=U8(i)?i:s,a=U8(i)?s:i,l=o.filters.map((c=>KU(c,a)));return Br.create(l,"or")})(t,e),j4(n)}function vQ(t,e){if(_2(e))return Vhe(e,t.getFilters());{const n=e.filters.map((r=>KU(t,r)));return Br.create(n,"or")}}function j4(t){if(nn(t instanceof rr||t instanceof Br,11850),t instanceof rr)return t;const e=t.getFilters();if(e.length===1)return j4(e[0]);if(Fhe(t))return t;const n=e.map((i=>j4(i))),r=[];return n.forEach((i=>{i instanceof rr?r.push(i):i instanceof Br&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Br.create(r,t.op)}class YLe{constructor(){this.Cn=new YU}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(bc.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(bc.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class YU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hr(Ir.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hr(Ir.comparator)).toArray()}}const _Q="IndexedDbIndexManager",$P=new Uint8Array(0);class XLe{constructor(e,n){this.databaseId=n,this.vn=new YU,this.Fn=new Np((r=>F1(r)),((r,i)=>yC(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const s={collectionId:r,parent:ya(i)};return xQ(e).put(s)}return we.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[lhe(n),""],!1,!0);return xQ(e).J(i).next((s=>{for(const o of s){if(o.collectionId!==n)break;r.push(_d(o.parent))}return r}))}addFieldIndex(e,n){const r=FE(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=S_(e);return s.next((a=>{o.put(hQ(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=FE(e),i=S_(e),s=E_(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=FE(e),r=E_(e),i=S_(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return we.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new yQ(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=E_(e);let i=!0;const s=new Map;return we.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{i&&(i=!!a),s.set(o,a)})))).next((()=>{if(i){let o=qn();const a=[];return we.forEach(s,((l,c)=>{lt(_Q,`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((I=>`${I.fieldPath}:${I.kind}`)).join(",")}`})(l)} to execute ${F1(n)}`);const u=(function(C,I){const R=D8(I);if(R===void 0)return null;for(const V of N4(C,R.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null})(c,l),h=(function(C,I){const R=new Map;for(const V of oy(I))for(const P of N4(C,V.fieldPath))switch(P.op){case"==":case"in":R.set(V.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return R.set(V.fieldPath.canonicalString(),P.value),Array.from(R.values())}return null})(c,l),f=(function(C,I){const R=[];let V=!0;for(const P of oy(I)){const N=P.kind===0?ZJ(C,P.fieldPath,C.startAt):JJ(C,P.fieldPath,C.startAt);R.push(N.value),V&&(V=N.inclusive)}return new v2(R,V)})(c,l),g=(function(C,I){const R=[];let V=!0;for(const P of oy(I)){const N=P.kind===0?JJ(C,P.fieldPath,C.endAt):ZJ(C,P.fieldPath,C.endAt);R.push(N.value),V&&(V=N.inclusive)}return new v2(R,V)})(c,l),y=this.On(l,c,f),_=this.On(l,c,g),b=this.Nn(l,c,h),T=this.Bn(l.indexId,u,y,f.inclusive,_,g.inclusive,b);return we.forEach(T,(A=>r.Y(A,n.limit).next((C=>{C.forEach((I=>{const R=At.fromSegments(I.documentKey);o.has(R)||(o=o.add(R),a.push(R))}))}))))})).next((()=>a))}return we.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=KLe(Br.create(e.filters,"and")).map((r=>W8(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):$P,g=this.kn(e,f,r[h%c],i),y=this.qn(e,f,s[h%c],o),_=a.map((b=>this.kn(e,f,b,!0)));u.push(...this.createRange(g,y,_))}return u}kn(e,n,r,i){const s=new Ly(e,At.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Ly(e,At.empty(),n,r);return i?s.An():s}xn(e,n){const r=new yQ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return we.forEach(i,(s=>this.xn(e,s).next((o=>{o?r!==0&&o.fields.length<(function(l){let c=new Hr(ji.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new jE;for(const i of oy(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Ny.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new jE;return Ny.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new jE;return Ny.Kt.Dt(Kk(this.databaseId,n),r.Pn((function(s){const o=oy(s);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new jE);let s=0;for(const o of oy(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Yk(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);Ny.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new jE;l.seed(a.un()),Ny.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find((r=>r instanceof rr&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=FE(e),i=S_(e);return(n?r.J(F8,IDBKeyRange.bound(n,n)):r.J()).next((s=>{const o=[];return we.forEach(s,(a=>i.get([a.indexId,this.uid]).next((l=>{o.push((function(u,h){const f=h?new zk(h.sequenceNumber,new bc(V1(h.readTime),new At(_d(h.documentKey)),h.largestBatchId)):zk.empty(),g=u.fields.map((([y,_])=>new _M(ji.fromServerFormat(y),_)));return new k4(u.indexId,u.collectionGroup,g,f)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Rn(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=FE(e),s=S_(e);return this.Gn(e).next((o=>i.J(F8,IDBKeyRange.bound(n,n)).next((a=>we.forEach(a,(l=>s.put(hQ(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return we.forEach(n,((i,s)=>{const o=r.get(i.collectionGroup);return(o?we.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),we.forEach(a,(l=>this.zn(e,i,l).next((c=>{const u=this.jn(s,l);return c.isEqual(u)?we.resolve():this.Jn(e,s,l,c,u)})))))))}))}Hn(e,n,r,i){return E_(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return E_(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=E_(e);let s=new Hr(fm);return i.ee({index:whe,range:IDBKeyRange.only([r.indexId,this.uid,AM(this.$n(r,n))])},((o,a)=>{s=s.add(new Ly(r.indexId,n,gQ(a.arrayValue),gQ(a.directionalValue)))})).next((()=>s))}jn(e,n){let r=new Hr(fm);const i=this.Qn(n,e);if(i==null)return r;const s=D8(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Yk(o))for(const a of o.arrayValue.values||[])r=r.add(new Ly(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ly(n.indexId,e.key,$P,i));return r}Jn(e,n,r,i,s){lt(_Q,"Updating index entries for document '%s'",n.key);const o=[];return(function(l,c,u,h,f){const g=l.getIterator(),y=c.getIterator();let _=w_(g),b=w_(y);for(;_||b;){let T=!1,A=!1;if(_&&b){const C=u(_,b);C<0?A=!0:C>0&&(T=!0)}else _!=null?A=!0:T=!0;T?(h(b),b=w_(y)):A?(f(_),_=w_(g)):(_=w_(g),b=w_(y))}})(i,s,fm,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),we.waitFor(o)}Gn(e){let n=1;return S_(e).ee({index:xhe,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>fm(o,a))).filter(((o,a,l)=>!a||fm(o,l[a-1])!==0));const i=[];i.push(e);for(const o of r){const a=fm(o,e),l=fm(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,$P,At.empty()),l=i[o+1].Vn(this.uid,$P,At.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return fm(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wQ)}getMinOffset(e,n){return we.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||$t(44426))))).next(wQ)}}function xQ(t){return Zs(t,Wk)}function E_(t){return Zs(t,_T)}function FE(t){return Zs(t,LU)}function S_(t){return Zs(t,vT)}function wQ(t){nn(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;RU(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new bc(e.readTime,e.documentKey,n)}const bQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kde=41943040;class ia{static withCacheSize(e){return new ia(e,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function Ade(t,e,n){const r=t.store(Ju),i=t.store(d2),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},((u,h,f)=>(a++,f.delete())));s.push(l.next((()=>{nn(a===1,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const h=yhe(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return we.waitFor(s).next((()=>c))}function F4(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw $t(14731);e=t.noDocument}return JSON.stringify(e).length}ia.DEFAULT_COLLECTION_PERCENTILE=10,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ia.DEFAULT=new ia(kde,ia.DEFAULT_COLLECTION_PERCENTILE,ia.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ia.DISABLED=new ia(-1,0,0);class kL{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){nn(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new kL(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pm(e).ee({index:Wy,range:r},((i,s,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=Q_(e),o=pm(e);return o.add({}).next((a=>{nn(typeof a=="number",49019);const l=new UU(a,n,r,i),c=(function(g,y,_){const b=_.baseMutations.map((A=>O4(g.yt,A))),T=_.mutations.map((A=>O4(g.yt,A)));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:T}})(this.serializer,this.userId,l),u=[];let h=new Hr(((f,g)=>Rn(f.canonicalString(),g.canonicalString())));for(const f of i){const g=yhe(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(s.put(g,C5e))}return h.forEach((f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),we.waitFor(u).next((()=>l))}))}lookupMutationBatch(e,n){return pm(e).get(n).next((r=>r?(nn(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),My(this.serializer,r)):null))}er(e,n){return this.Xn[n]?we.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return pm(e).ee({index:Wy,range:i},((o,a,l)=>{a.userId===this.userId&&(nn(a.batchId>=r,47524,{tr:r}),s=My(this.serializer,a)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=s1;return pm(e).ee({index:Wy,range:n,reverse:!0},((i,s,o)=>{r=s.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,s1],[this.userId,Number.POSITIVE_INFINITY]);return pm(e).J(Wy,n).next((r=>r.map((i=>My(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=xM(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Q_(e).ee({range:i},((o,a,l)=>{const[c,u,h]=o,f=_d(u);if(c===this.userId&&n.path.isEqual(f))return pm(e).get(h).next((g=>{if(!g)throw $t(61480,{nr:o,batchId:h});nn(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(My(this.serializer,g))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);const i=[];return n.forEach((s=>{const o=xM(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Q_(e).ee({range:a},((c,u,h)=>{const[f,g,y]=c,_=_d(g);f===this.userId&&s.path.isEqual(_)?r=r.add(y):h.done()}));i.push(l)})),we.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=xM(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Hr(Rn);return Q_(e).ee({range:o},((l,c,u)=>{const[h,f,g]=l,y=_d(f);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):u.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((s=>{i.push(pm(e).get(s).next((o=>{if(o===null)throw $t(35274,{batchId:s});nn(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(My(this.serializer,o))})))})),we.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Ade(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),we.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return we.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Q_(e).ee({range:r},((s,o,a)=>{if(s[0]===this.userId){const l=_d(s[1]);i.push(l)}else a.done()})).next((()=>{nn(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,n){return Cde(e,this.userId,n)}_r(e){return Ide(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:s1,lastStreamToken:""}))}}function Cde(t,e,n){const r=xM(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Q_(t).ee({range:s,X:!0},((a,l,c)=>{const[u,h,f]=a;u===e&&h===i&&(o=!0),c.done()})).next((()=>o))}function pm(t){return Zs(t,Ju)}function Q_(t){return Zs(t,d2)}function Ide(t){return Zs(t,Uk)}class z1{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new z1(0)}static cr(){return new z1(-1)}}class ZLe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new z1(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>ln.fromTimestamp(new Ur(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>T_(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(nn(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return T_(e).ee(((o,a)=>{const l=wS(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>we.waitFor(s))).next((()=>i))}forEachTarget(e,n){return T_(e).ee(((r,i)=>{const s=wS(i);n(s)}))}lr(e){return EQ(e).get(I4).next((n=>(nn(n!==null,2888),n)))}hr(e,n){return EQ(e).put(I4,n)}Pr(e,n){return T_(e).put(bde(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=F1(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return T_(e).ee({range:i,index:_he},((o,a,l)=>{const c=wS(a);yC(n,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=Qm(e);return n.forEach((o=>{const a=ya(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))})),we.waitFor(i)}removeMatchingKeys(e,n,r){const i=Qm(e);return we.forEach(n,(s=>{const o=ya(s.path);return we.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=Qm(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Qm(e);let s=qn();return i.ee({range:r,X:!0},((o,a,l)=>{const c=_d(o[1]),u=new At(c);s=s.add(u)})).next((()=>s))}containsKey(e,n){const r=ya(n.path),i=IDBKeyRange.bound([r],[lhe(r)],!1,!0);let s=0;return Qm(e).ee({index:NU,X:!0,range:i},(([o,a],l,c)=>{o!==0&&(s++,c.done())})).next((()=>s>0))}At(e,n){return T_(e).get(n).next((r=>r?wS(r):null))}}function T_(t){return Zs(t,f2)}function EQ(t){return Zs(t,o1)}function Qm(t){return Zs(t,p2)}const SQ="LruGarbageCollector",Pde=1048576;function TQ([t,e],[n,r]){const i=Rn(t,n);return i===0?Rn(e,r):i}class JLe{constructor(e){this.Ir=e,this.buffer=new Hr(TQ),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();TQ(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Rde{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){lt(SQ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){f0(n)?lt(SQ,"Ignoring IndexedDB error during garbage collection: ",n):await d0(n)}await this.Vr(3e5)}))}}class QLe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(wl.ce);const r=new JLe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(lt("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(bQ)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bQ):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),Y_()<=tr.DEBUG&&lt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function Mde(t,e){return new QLe(t,e)}class eOe{constructor(e,n){this.db=e,this.garbageCollector=Mde(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return VP(e,r)}removeReference(e,n,r){return VP(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return VP(e,n)}br(e,n){return(function(i,s){let o=!1;return Ide(i).te((a=>Cde(i,a,s).next((l=>(l&&(o=!0),we.resolve(!l)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((o,a)=>{if(a<=n){const l=this.br(e,o).next((c=>{if(!c)return s++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ln.min()),Qm(e).delete((function(h){return[0,ya(h.path)]})(o)))))}));i.push(l)}})).next((()=>we.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return VP(e,n)}Sr(e,n){const r=Qm(e);let i,s=wl.ce;return r.ee({index:NU},(([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==wl.ce&&n(new At(_d(i)),s),s=c,i=l):s=wl.ce})).next((()=>{s!==wl.ce&&n(new At(_d(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function VP(t,e){return Qm(t).put((function(r,i){return{targetId:0,path:ya(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class Nde{constructor(){this.changes=new Np((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class tOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return W0(e).put(r)}removeEntry(e,n,r){return W0(e).delete((function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],D4(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=es.newInvalidDocument(n);return W0(e).ee({index:wM,range:IDBKeyRange.only($E(n))},((i,s)=>{r=this.Cr(n,s)})).next((()=>r))}vr(e,n){let r={size:0,document:es.newInvalidDocument(n)};return W0(e).ee({index:wM,range:IDBKeyRange.only($E(n))},((i,s)=>{r={document:this.Cr(n,s),size:F4(s)}})).next((()=>r))}getEntries(e,n){let r=dc();return this.Fr(e,n,((i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=dc(),i=new ci(At.comparator);return this.Fr(e,n,((s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,F4(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return we.resolve();let i=new Hr(CQ);n.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound($E(i.first()),$E(i.last())),o=i.getIterator();let a=o.getNext();return W0(e).ee({index:wM,range:s},((l,c,u)=>{const h=At.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&CQ(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j($E(a)):u.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),D4(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return W0(e).J(IDBKeyRange.bound(a,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let u=dc();for(const h of c){const f=this.Cr(At.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(_C(n,f)||i.has(f.key))&&(u=u.insert(f.key,f))}return u}))}getAllFromCollectionGroup(e,n,r,i){let s=dc();const o=AQ(n,r),a=AQ(n,bc.max());return W0(e).ee({index:vhe,range:IDBKeyRange.bound(o,a,!0)},((l,c,u)=>{const h=this.Cr(At.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()})).next((()=>s))}newChangeBuffer(e){return new nOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return kQ(e).get(j8).next((n=>(nn(!!n,20021),n)))}Dr(e,n){return kQ(e).put(j8,n)}Cr(e,n){if(n){const r=zLe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ln.min())))return r}return es.newInvalidDocument(e)}}function Lde(t){return new tOe(t)}class nOe extends Nde{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Np((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Hr(((s,o)=>Rn(s.canonicalString(),o.canonicalString())));return this.changes.forEach(((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=cQ(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=F4(l);r+=c-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=cQ(this.Nr.serializer,o.convertToNoDocument(ln.min()));n.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.Nr.updateMetadata(e,r)),we.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})})),r)))}}function kQ(t){return Zs(t,Bk)}function W0(t){return Zs(t,C4)}function $E(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AQ(t,e){const n=e.documentKey.path.toArray();return[t,D4(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function CQ(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Rn(n[s],r[s]),i)return i;return i=Rn(n.length,r.length),i||(i=Rn(n[n.length-2],r[r.length-2]),i||Rn(n[n.length-1],r[r.length-1]))}class rOe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Ode{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&ET(r.mutation,i,bl.empty(),Ur.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qn()){const i=xd();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=_S();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=xd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qn())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=dc();const o=bT(),a=(function(){return bT()})();return n.forEach(((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Lp)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ET(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):o.set(c.key,bl.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>a.set(c,new rOe(u,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=bT();let i=new ci(((o,a)=>o-a)),s=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||bl.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||qn()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Zhe();u.forEach((f=>{if(!s.has(f)){const g=ide(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return we.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Whe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):we.resolve(xd());let a=h2,l=s;return o.next((c=>we.forEach(c,((u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?we.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,qn()))).next((u=>({batchId:a,changes:Xhe(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=_S();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=_S();return this.indexManager.getCollectionParents(e,s).next((a=>we.forEach(a,(l=>{const c=(function(h,f){return new vC(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((u=>{u.forEach(((h,f)=>{o=o.insert(h,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,es.newInvalidDocument(u)))}));let a=_S();return o.forEach(((l,c)=>{const u=s.get(l);u!==void 0&&ET(u.mutation,c,bl.empty(),Ur.now()),_C(n,c)&&(a=a.insert(l,c))})),a}))}}class iOe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ga(i.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Ede(i.bundledQuery),readTime:Ga(i.readTime)}})(n)),we.resolve()}}class sOe{constructor(){this.overlays=new ci(At.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xd();return we.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=xd(),s=n.length+1,o=new At(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ci(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=xd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=xd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return we.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WU(n,r));let s=this.qr.get(n);s===void 0&&(s=qn(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class oOe{constructor(){this.sessionToken=vs.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class XU{constructor(){this.Qr=new Hr(lo.$r),this.Ur=new Hr(lo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new lo(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new lo(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new At(new Ir([])),r=new lo(n,e),i=new lo(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new At(new Ir([])),r=new lo(n,e),i=new lo(n,e+1);let s=qn();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new lo(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return At.comparator(e.key,n.key)||Rn(e.Yr,n.Yr)}static Kr(e,n){return Rn(e.Yr,n.Yr)||At.comparator(e.key,n.key)}}class aOe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hr(lo.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new lo(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return we.resolve(o)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return we.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?s1:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lo(n,0),i=new lo(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),we.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);return n.forEach((i=>{const s=new lo(i,0),o=new lo(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;At.isDocumentKey(s)||(s=s.child(""));const o=new lo(new At(s),0);let a=new Hr(Rn);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),we.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){nn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(i=>{const s=new lo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new lo(n,0),i=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class lOe{constructor(e){this.ri=e,this.docs=(function(){return new ci(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():es.newInvalidDocument(n))}getEntries(e,n){let r=dc();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():es.newInvalidDocument(i))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=dc();const o=n.path,a=new At(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||RU(dhe(u),r)<=0||(i.has(u.key)||_C(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return we.resolve(s)}getAllFromCollectionGroup(e,n,r,i){$t(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new cOe(this)}getSize(e){return we.resolve(this.size)}}class cOe extends Nde{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class uOe{constructor(e){this.persistence=e,this.si=new Np((n=>F1(n)),yC),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.oi=0,this._i=new XU,this.targetCount=0,this.ai=z1.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new z1(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),we.waitFor(s).next((()=>i))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),we.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class ZU{constructor(e,n){this.ui={},this.overlays={},this.ci=new wl(0),this.li=!1,this.li=!0,this.hi=new oOe,this.referenceDelegate=e(this),this.Pi=new uOe(this),this.indexManager=new YLe,this.remoteDocumentCache=(function(i){return new lOe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new wde(n),this.Ii=new iOe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sOe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new aOe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){lt("MemoryPersistence","Starting transaction:",e);const i=new hOe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class hOe extends phe{constructor(e){super(),this.currentSequenceNumber=e}}class AL{constructor(e){this.persistence=e,this.Ri=new XU,this.Vi=null}static mi(e){return new AL(e)}get fi(){if(this.Vi)return this.Vi;throw $t(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const i=At.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,ln.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class $4{constructor(e,n){this.persistence=e,this.pi=new Np((r=>ya(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Mde(this,n)}static mi(e,n){return new $4(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?we.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,ln.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=EM(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dOe{constructor(e){this.serializer=e}k(e,n,r,i){const s=new fL("createOrUpgrade",n);r<1&&i>=1&&((function(l){l.createObjectStore(gC)})(e),(function(l){l.createObjectStore(Uk,{keyPath:A5e}),l.createObjectStore(Ju,{keyPath:$J,autoIncrement:!0}).createIndex(Wy,VJ,{unique:!0}),l.createObjectStore(d2)})(e),IQ(e),(function(l){l.createObjectStore(ay)})(e));let o=we.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(p2),l.deleteObjectStore(f2),l.deleteObjectStore(o1)})(e),IQ(e)),o=o.next((()=>(function(l){const c=l.store(o1),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ln.min().toTimestamp(),targetCount:0};return c.put(I4,u)})(s)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(l,c){return c.store(Ju).J().next((h=>{l.deleteObjectStore(Ju),l.createObjectStore(Ju,{keyPath:$J,autoIncrement:!0}).createIndex(Wy,VJ,{unique:!0});const f=c.store(Ju),g=h.map((y=>f.put(y)));return we.waitFor(g)}))})(e,s)))),o=o.next((()=>{(function(l){l.createObjectStore(m2,{keyPath:D5e})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(s)))),r<6&&i>=6&&(o=o.next((()=>((function(l){l.createObjectStore(Bk)})(e),this.wi(s))))),r<7&&i>=7&&(o=o.next((()=>this.Si(s)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,s)))),r<9&&i>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(s)))),r<11&&i>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(mL,{keyPath:j5e})})(e),(function(l){l.createObjectStore(gL,{keyPath:F5e})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(l){const c=l.createObjectStore(yL,{keyPath:W5e});c.createIndex($8,H5e,{unique:!1}),c.createIndex(bhe,q5e,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(l){const c=l.createObjectStore(C4,{keyPath:I5e});c.createIndex(wM,P5e),c.createIndex(vhe,R5e)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(ay)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(o=o.next((()=>(function(l){l.createObjectStore(LU,{keyPath:$5e,autoIncrement:!0}).createIndex(F8,V5e,{unique:!1}),l.createObjectStore(vT,{keyPath:z5e}).createIndex(xhe,G5e,{unique:!1}),l.createObjectStore(_T,{keyPath:U5e}).createIndex(whe,B5e,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(vT).clear()})).next((()=>{n.objectStore(_T).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(OU,{keyPath:K5e})})(e)}))),r<18&&i>=18&&hue()&&(o=o.next((()=>{n.objectStore(vT).clear()})).next((()=>{n.objectStore(_T).clear()}))),o}wi(e){let n=0;return e.store(ay).ee(((r,i)=>{n+=F4(i)})).next((()=>{const r={byteSize:n};return e.store(Bk).put(j8,r)}))}yi(e){const n=e.store(Uk),r=e.store(Ju);return n.J().next((i=>we.forEach(i,(s=>{const o=IDBKeyRange.bound([s.userId,s1],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Wy,o).next((a=>we.forEach(a,(l=>{nn(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=My(this.serializer,l);return Ade(e,s.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(p2),r=e.store(ay);return e.store(o1).get(I4).next((i=>{const s=[];return r.ee(((o,a)=>{const l=new Ir(o),c=(function(h){return[0,ya(h)]})(l);s.push(n.get(c).next((u=>u?we.resolve():(h=>n.put({targetId:0,path:ya(h),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>we.waitFor(s)))}))}bi(e,n){e.createObjectStore(Wk,{keyPath:O5e});const r=n.store(Wk),i=new YU,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ya(l)})}};return n.store(ay).ee({X:!0},((o,a)=>{const l=new Ir(o);return s(l.popLast())})).next((()=>n.store(d2).ee({X:!0},(([o,a,l],c)=>{const u=_d(a);return s(u.popLast())}))))}Di(e){const n=e.store(f2);return n.ee(((r,i)=>{const s=wS(i),o=bde(this.serializer,s);return n.put(o)}))}Ci(e,n){const r=n.store(ay),i=[];return r.ee(((s,o)=>{const a=n.store(C4),l=(function(h){return h.document?new At(Ir.fromString(h.document.name).popFirst(5)):h.noDocument?At.fromSegments(h.noDocument.path):h.unknownDocument?At.fromSegments(h.unknownDocument.path):$t(36783)})(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))})).next((()=>we.waitFor(i)))}Fi(e,n){const r=n.store(Ju),i=Lde(this.serializer),s=new ZU(AL.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let c=a.get(l.userId)??qn();My(this.serializer,l).keys().forEach((u=>c=c.add(u))),a.set(l.userId,c)})),we.forEach(a,((l,c)=>{const u=new ra(c),h=TL.wt(this.serializer,u),f=s.getIndexManager(u),g=kL.wt(u,this.serializer,f,s.referenceDelegate);return new Ode(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new V8(n,wl.ce),l).next()}))}))}}function IQ(t){t.createObjectStore(p2,{keyPath:N5e}).createIndex(NU,L5e,{unique:!0}),t.createObjectStore(f2,{keyPath:"targetId"}).createIndex(_he,M5e,{unique:!0}),t.createObjectStore(o1)}const mm="IndexedDbPersistence",Ij=18e5,Pj=5e3,Rj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fOe="main";class JU{constructor(e,n,r,i,s,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!JU.v())throw new xt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eOe(this,i),this.$i=n+fOe,this.serializer=new wde(l),this.Ui=new Ig(this.$i,this.Ni,new dOe(this.serializer)),this.hi=new ULe,this.Pi=new ZLe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Lde(this.serializer),this.Ii=new GLe,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&ps(mm,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xt(We.FAILED_PRECONDITION,Rj);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new wl(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>zP(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(f0(e))return lt(mm,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return lt(mm,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return VE(e).get(x_).next((n=>we.resolve(this.es(n))))}ts(e){return zP(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ij)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Zs(n,m2);return r.J().next((i=>{const s=this.ss(i,Ij),o=i.filter((a=>s.indexOf(a)===-1));return we.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?we.resolve(!0):VE(e).get(x_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Pj)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new xt(We.FAILED_PRECONDITION,Rj);return!1}}return!(!this.networkEnabled||!this.inForeground)||zP(e).J().next((r=>this.ss(r,Pj).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&lt(mm,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[gC,m2],(e=>{const n=new V8(e,wl.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>zP(e).J().next((n=>this.ss(n,Ij).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return kL.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new XLe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return TL.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){lt(mm,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?Z5e:l===17?khe:l===16?X5e:l===15?DU:l===14?The:l===13?She:l===12?Y5e:l===11?Ehe:void $t(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,s,(a=>(o=new V8(a,this.ci?this.ci.next():wl.ce),n==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw ps(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new xt(We.FAILED_PRECONDITION,fhe);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return VE(e).get(x_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Pj)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new xt(We.FAILED_PRECONDITION,Rj)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return VE(e).put(x_,n)}static v(){return Ig.v()}Zi(e){const n=VE(e);return n.get(x_).next((r=>this.es(r)?(lt(mm,"Releasing primary lease."),n.delete(x_)):we.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ps(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;uue()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return lt(mm,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ps(mm,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ps("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function VE(t){return Zs(t,gC)}function zP(t){return Zs(t,m2)}function Dde(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class QU{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=qn(),i=qn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new QU(e,n.fromCache,r,i)}}class pOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jde{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uue()?8:mhe(Ys())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new pOe;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(Y_()<=tr.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",X_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(Y_()<=tr.DEBUG&&lt("QueryEngine","Query:",X_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Y_()<=tr.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",X_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gc(n))):we.resolve())}ys(e,n){if(QJ(n))return we.resolve(null);let r=gc(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=q8(n,null,"F"),r=gc(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=qn(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,q8(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,i){return QJ(n)||i.isEqual(ln.min())?we.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?we.resolve(null):(Y_()<=tr.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),X_(n)),this.vs(e,o,n,hhe(i,h2)).next((a=>a)))}))}Ds(e,n){let r=new Hr(Khe(e));return n.forEach(((i,s)=>{_C(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Y_()<=tr.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",X_(n)),this.ps.getDocumentsMatchingQuery(e,n,bc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const eB="LocalStore",mOe=3e8;class gOe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ci(Rn),this.xs=new Np((s=>F1(s)),yC),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ode(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Fde(t,e,n,r){return new gOe(t,e,n,r)}async function $de(t,e){const n=Xt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=qn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function yOe(t,e){const n=Xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,u){const h=c.batch,f=h.keys();let g=we.resolve();return f.forEach((y=>{g=g.next((()=>u.getEntry(l,y))).next((_=>{const b=c.docVersions.get(y);nn(b!==null,48541),_.version.compareTo(b)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=qn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Vde(t){const e=Xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function vOe(t,e){const n=Xt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(s,u.addedDocuments,h))));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(vs.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(_,b,T){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=mOe?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(f,g,u)&&a.push(n.Pi.updateTargetData(s,g))}));let l=dc(),c=qn();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))})),a.push(_Oe(s,o,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(ln.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next((h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(u)}return we.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function _Oe(t,e,n){let r=qn(),i=qn();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=dc();return n.forEach(((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ln.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):lt(eB,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function xOe(t,e){const n=Xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=s1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function V4(t,e){const n=Xt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,we.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new rp(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function S2(t,e,n){const r=Xt(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!f0(o))throw o;lt(eB,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function t9(t,e,n){const r=Xt(t);let i=ln.min(),s=qn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,u){const h=Xt(l),f=h.xs.get(u);return f!==void 0?we.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)})(r,o,gc(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ln.min(),n?s:qn()))).next((a=>(Ude(r,qhe(e),a),{documents:a,Qs:s})))))}function zde(t,e){const n=Xt(t),r=Xt(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((o=>o?o.target:null))))}function Gde(t,e){const n=Xt(t),r=n.Os.get(e)||ln.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,hhe(r,h2),Number.MAX_SAFE_INTEGER))).then((i=>(Ude(n,e,i),i)))}function Ude(t,e,n){let r=t.Os.get(e)||ln.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}const Bde="firestore_clients";function PQ(t,e){return`${Bde}_${t}_${e}`}const Wde="firestore_mutations";function RQ(t,e,n){let r=`${Wde}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Hde="firestore_targets";function Mj(t,e){return`${Hde}_${t}_${e}`}const hd="SharedClientState";class z4{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new xt(i.error.code,i.error.message))),o?new z4(e,n,i.state,s):(ps(hd,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ST{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new xt(r.error.code,r.error.message))),s?new ST(e,r.state,i):(ps(hd,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class G4{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=zU();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=ghe(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new G4(e,s):(ps(hd,`Failed to parse client data for instance '${e}': ${n}`),null)}}class tB{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new tB(n.clientId,n.onlineState):(ps(hd,`Failed to parse online state: ${e}`),null)}}class n9{constructor(){this.activeTargetIds=zU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nj{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ci(Rn),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=PQ(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new n9),this.ro=new RegExp(`^${Bde}_${o}_([^_]*)$`),this.io=new RegExp(`^${Wde}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Hde}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(PQ(this.persistenceKey,r));if(i){const s=G4.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Mj(this.persistenceKey,e));if(i){const s=ST.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Mj(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return lt(hd,"READ",e,n),n}setItem(e,n){lt(hd,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){lt(hd,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(lt(hd,"EVENT",n.key,n.newValue),n.key===this.eo)return void ps("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(s){let o=wl.ce;if(s!=null)try{const a=JSON.parse(s);nn(typeof a=="number",30636,{So:s}),o=a}catch(a){ps(hd,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==wl.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new z4(this.currentUser,e,n,r),s=RQ(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=RQ(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Mj(this.persistenceKey,e),s=new ST(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return G4.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return z4.Ws(new ra(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return ST.Ws(i,n)}uo(e){return tB.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);lt(hd,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach((l=>{i.has(l)||o.push(l)})),i.forEach((l=>{s.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=zU();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class qde{constructor(){this.Mo=new n9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n9,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wOe{Oo(e){}shutdown(){}}const MQ="ConnectivityMonitor";class NQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lt(MQ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){lt(MQ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let GP=null;function r9(){return GP===null?GP=(function(){return 268435456+Math.round(2147483648*Math.random())})():GP++,"0x"+GP.toString(16)}const Lj="RestConnection",bOe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EOe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===P4?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=r9(),a=this.zo(e,n.toUriEncodedString());lt(Lj,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=pv(c);return this.Jo(e,a,l,r,u).then((h=>(lt(Lj,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw Vk(Lj,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+db})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=bOe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class SOe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ho="WebChannelConnection";class TOe extends EOe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=r9();return new Promise(((a,l)=>{const c=new nhe;c.setWithCredentials(!0),c.listenOnce(rhe.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case vM.NO_ERROR:const h=c.getResponseJson();lt(Ho,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case vM.TIMEOUT:lt(Ho,`RPC '${e}' ${o} timed out`),l(new xt(We.DEADLINE_EXCEEDED,"Request time out"));break;case vM.HTTP_ERROR:const f=c.getStatus();if(lt(Ho,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const _=(function(T){const A=T.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(A)>=0?A:We.UNKNOWN})(y.status);l(new xt(_,y.message))}else l(new xt(We.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new xt(We.UNAVAILABLE,"Connection failed."));break;default:$t(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{lt(Ho,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(i);lt(Ho,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const i=r9(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ohe(),a=she(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");lt(Ho,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,g=!1;const y=new SOe({Yo:b=>{g?lt(Ho,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(lt(Ho,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),lt(Ho,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),_=(b,T,A)=>{b.listen(T,(C=>{try{A(C)}catch(I){setTimeout((()=>{throw I}),0)}}))};return _(h,vS.EventType.OPEN,(()=>{g||(lt(Ho,`RPC '${e}' stream ${i} transport opened.`),y.o_())})),_(h,vS.EventType.CLOSE,(()=>{g||(g=!0,lt(Ho,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(h))})),_(h,vS.EventType.ERROR,(b=>{g||(g=!0,Vk(Ho,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),y.a_(new xt(We.UNAVAILABLE,"The operation could not be completed")))})),_(h,vS.EventType.MESSAGE,(b=>{if(!g){const T=b.data[0];nn(!!T,16349);const A=T,C=A?.error||A[0]?.error;if(C){lt(Ho,`RPC '${e}' stream ${i} received error:`,C);const I=C.status;let R=(function(N){const L=Es[N];if(L!==void 0)return ade(L)})(I),V=C.message;R===void 0&&(R=We.INTERNAL,V="Unknown error status: "+I+" with message "+C.message),g=!0,y.a_(new xt(R,V)),h.close()}else lt(Ho,`RPC '${e}' stream ${i} received:`,T),y.u_(T)}})),_(a,ihe.STAT_EVENT,(b=>{b.stat===L8.PROXY?lt(Ho,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===L8.NOPROXY&&lt(Ho,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Kde(){return typeof window<"u"?window:null}function CM(){return typeof document<"u"?document:null}function CL(t){return new RLe(t,!0)}class Yde{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&lt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const LQ="PersistentStream";class Xde{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yde(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new xt(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return lt(LQ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(lt(LQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kOe extends Xde{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LLe(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ln.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ln.min():o.readTime?Ga(o.readTime):ln.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=X8(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=M4(l)?{documents:mde(s,l)}:{query:gde(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ude(s,o.resumeToken);const c=K8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ln.min())>0){a.readTime=E2(s,o.snapshotVersion.toTimestamp());const c=K8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=DLe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=X8(this.serializer),n.removeTarget=e,this.q_(n)}}class AOe extends Xde{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=OLe(e.writeResults,e.commitTime),r=Ga(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=X8(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>O4(this.serializer,r)))};this.q_(n)}}class COe{}class IOe extends COe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,Y8(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xt(We.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Y8(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xt(We.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class POe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(n),this.aa=!1):lt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const G1="RemoteStore";class ROe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{yv(this)&&(lt(G1,"Restarting streams for network reachability change."),await(async function(l){const c=Xt(l);c.Ea.add(4),await bC(c),c.Ra.set("Unknown"),c.Ea.delete(4),await IL(c)})(this))}))})),this.Ra=new POe(r,i)}}async function IL(t){if(yv(t))for(const e of t.da)await e(!0)}async function bC(t){for(const e of t.da)await e(!1)}function PL(t,e){const n=Xt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iB(n)?rB(n):mb(n).O_()&&nB(n,e))}function T2(t,e){const n=Xt(t),r=mb(n);n.Ia.delete(e),r.O_()&&Zde(n,e),n.Ia.size===0&&(r.O_()?r.L_():yv(n)&&n.Ra.set("Unknown"))}function nB(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ln.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mb(t).Y_(e)}function Zde(t,e){t.Va.Ue(e),mb(t).Z_(e)}function rB(t){t.Va=new ALe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),mb(t).start(),t.Ra.ua()}function iB(t){return yv(t)&&!mb(t).x_()&&t.Ia.size>0}function yv(t){return Xt(t).Ea.size===0}function Jde(t){t.Va=void 0}async function MOe(t){t.Ra.set("Online")}async function NOe(t){t.Ia.forEach(((e,n)=>{nB(t,e)}))}async function LOe(t,e){Jde(t),iB(t)?(t.Ra.ha(e),rB(t)):t.Ra.set("Unknown")}async function OOe(t,e,n){if(t.Ra.set("Online"),e instanceof cde&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){lt(G1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await U4(t,r)}else if(e instanceof kM?t.Va.Ze(e):e instanceof lde?t.Va.st(e):t.Va.tt(e),!n.isEqual(ln.min()))try{const r=await Vde(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(vs.EMPTY_BYTE_STRING,u.snapshotVersion)),Zde(s,l);const h=new rp(u.target,l,c,u.sequenceNumber);nB(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){lt(G1,"Failed to raise snapshot:",r),await U4(t,r)}}async function U4(t,e,n){if(!f0(e))throw e;t.Ea.add(1),await bC(t),t.Ra.set("Offline"),n||(n=()=>Vde(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{lt(G1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await IL(t)}))}function Qde(t,e){return e().catch((n=>U4(t,n,e)))}async function pb(t){const e=Xt(t),n=Wg(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:s1;for(;DOe(e);)try{const i=await xOe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,jOe(e,i)}catch(i){await U4(e,i)}efe(e)&&tfe(e)}function DOe(t){return yv(t)&&t.Ta.length<10}function jOe(t,e){t.Ta.push(e);const n=Wg(t);n.O_()&&n.X_&&n.ea(e.mutations)}function efe(t){return yv(t)&&!Wg(t).x_()&&t.Ta.length>0}function tfe(t){Wg(t).start()}async function FOe(t){Wg(t).ra()}async function $Oe(t){const e=Wg(t);for(const n of t.Ta)e.ea(n.mutations)}async function VOe(t,e,n){const r=t.Ta.shift(),i=BU.from(r,e,n);await Qde(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await pb(t)}async function zOe(t,e){e&&Wg(t).X_&&await(async function(r,i){if((function(o){return SLe(o)&&o!==We.ABORTED})(i.code)){const s=r.Ta.shift();Wg(r).B_(),await Qde(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await pb(r)}})(t,e),efe(t)&&tfe(t)}async function OQ(t,e){const n=Xt(t);n.asyncQueue.verifyOperationInProgress(),lt(G1,"RemoteStore received new credentials");const r=yv(n);n.Ea.add(3),await bC(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await IL(n)}async function i9(t,e){const n=Xt(t);e?(n.Ea.delete(2),await IL(n)):e||(n.Ea.add(2),await bC(n),n.Ra.set("Unknown"))}function mb(t){return t.ma||(t.ma=(function(n,r,i){const s=Xt(n);return s.sa(),new kOe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:MOe.bind(null,t),t_:NOe.bind(null,t),r_:LOe.bind(null,t),H_:OOe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),iB(t)?rB(t):t.Ra.set("Unknown")):(await t.ma.stop(),Jde(t))}))),t.ma}function Wg(t){return t.fa||(t.fa=(function(n,r,i){const s=Xt(n);return s.sa(),new AOe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:FOe.bind(null,t),r_:zOe.bind(null,t),ta:$Oe.bind(null,t),na:VOe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await pb(t)):(await t.fa.stop(),t.Ta.length>0&&(lt(G1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class sB{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Td,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new sB(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oB(t,e){if(ps("AsyncQueue",`${e}: ${t}`),f0(t))return new xt(We.UNAVAILABLE,`${e}: ${t}`);throw t}class lw{static emptySet(e){return new lw(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=_S(),this.sortedSet=new ci(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lw)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lw;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class DQ{constructor(){this.ga=new ci(At.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$t(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class k2{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new k2(e,n,lw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wL(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class GOe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UOe{constructor(){this.queries=jQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Xt(n),s=i.queries;i.queries=jQ(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new xt(We.ABORTED,"Firestore shutting down"))}}function jQ(){return new Np((t=>Hhe(t)),wL)}async function nfe(t,e){const n=Xt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new GOe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=oB(o,`Initialization of query '${X_(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&aB(n)}async function rfe(t,e){const n=Xt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BOe(t,e){const n=Xt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&aB(n)}function WOe(t,e,n){const r=Xt(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function aB(t){t.Ca.forEach((e=>{e.next()}))}var s9,FQ;(FQ=s9||(s9={})).Ma="default",FQ.Cache="cache";class ife{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new k2(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=k2.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==s9.Cache}}class sfe{constructor(e){this.key=e}}class ofe{constructor(e){this.key=e}}class HOe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qn(),this.mutatedKeys=qn(),this.eu=Khe(e),this.tu=new lw(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new DQ,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,h)=>{const f=i.get(u),g=_C(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?y!==_&&(r.track({type:3,doc:g}),b=!0):this.su(f,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),b=!0):f&&!g&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,h)=>(function(g,y){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t(20277,{Rt:b})}};return _(g)-_(y)})(u.type,h.type)||this.eu(u.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new k2(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new ofe(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new sfe(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=qn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return k2.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gb="SyncEngine";class qOe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class KOe{constructor(e){this.key=e,this.hu=!1}}class YOe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Np((a=>Hhe(a)),wL),this.Iu=new Map,this.Eu=new Set,this.du=new ci(At.comparator),this.Au=new Map,this.Ru=new XU,this.Vu={},this.mu=new Map,this.fu=z1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XOe(t,e,n=!0){const r=RL(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await afe(r,e,n,!0),i}async function ZOe(t,e){const n=RL(t);await afe(n,e,!0,!1)}async function afe(t,e,n,r){const i=await V4(t.localStore,gc(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await lB(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&PL(t.remoteStore,i),a}async function lB(t,e,n,r,i){t.pu=(h,f,g)=>(async function(_,b,T,A){let C=b.view.ru(T);C.Cs&&(C=await t9(_.localStore,b.query,!1).then((({documents:P})=>b.view.ru(P,C))));const I=A&&A.targetChanges.get(b.targetId),R=A&&A.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(C,_.isPrimaryClient,I,R);return o9(_,b.targetId,V.au),V.snapshot})(t,h,f,g);const s=await t9(t.localStore,e,!0),o=new HOe(e,s.Qs),a=o.ru(s.documents),l=wC.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);o9(t,n,c.au);const u=new qOe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function JOe(t,e,n){const r=Xt(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!wL(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await S2(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&T2(r.remoteStore,i.targetId),A2(r,i.targetId)})).catch(d0)):(A2(r,i.targetId),await S2(r.localStore,i.targetId,!0))}async function QOe(t,e){const n=Xt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),T2(n.remoteStore,r.targetId))}async function eDe(t,e,n){const r=dB(t);try{const i=await(function(o,a){const l=Xt(o),c=Ur.now(),u=a.reduce(((g,y)=>g.add(y.key)),qn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let y=dc(),_=qn();return l.Ns.getEntries(g,u).next((b=>{y=b,y.forEach(((T,A)=>{A.isValidDocument()||(_=_.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,y))).next((b=>{h=b;const T=[];for(const A of a){const C=bLe(A,h.get(A.key).overlayedDocument);C!=null&&T.push(new Lp(A.key,C,Dhe(C.value.mapValue),fa.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,T,a)})).next((b=>{f=b;const T=b.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(g,b.batchId,T)}))})).then((()=>({batchId:f.batchId,changes:Xhe(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new ci(Rn)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(r,i.batchId,n),await m0(r,i.changes),await pb(r.remoteStore)}catch(i){const s=oB(i,"Failed to persist write");n.reject(s)}}async function lfe(t,e){const n=Xt(t);try{const r=await vOe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?nn(o.hu,14607):i.removedDocuments.size>0&&(nn(o.hu,42227),o.hu=!1))})),await m0(n,r,e)}catch(r){await d0(r)}}function $Q(t,e,n){const r=Xt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Xt(o);l.onlineState=a;let c=!1;l.queries.forEach(((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)})),c&&aB(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function tDe(t,e,n){const r=Xt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new ci(At.comparator);o=o.insert(s,es.newNoDocument(s,ln.min()));const a=qn().add(s),l=new xC(ln.min(),new Map,new ci(Rn),o,a);await lfe(r,l),r.du=r.du.remove(s),r.Au.delete(e),hB(r)}else await S2(r.localStore,e,!1).then((()=>A2(r,e,n))).catch(d0)}async function nDe(t,e){const n=Xt(t),r=e.batch.batchId;try{const i=await yOe(n.localStore,e);uB(n,r,null),cB(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await m0(n,i)}catch(i){await d0(i)}}async function rDe(t,e,n){const r=Xt(t);try{const i=await(function(o,a){const l=Xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next((h=>(nn(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);uB(r,e,n),cB(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await m0(r,i)}catch(i){await d0(i)}}function cB(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function uB(t,e,n){const r=Xt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function A2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||cfe(t,r)}))}function cfe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(T2(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),hB(t))}function o9(t,e,n){for(const r of n)r instanceof sfe?(t.Ru.addReference(r.key,e),iDe(t,r)):r instanceof ofe?(lt(gb,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||cfe(t,r.key)):$t(19791,{wu:r})}function iDe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(lt(gb,"New document in limbo: "+n),t.Eu.add(r),hB(t))}function hB(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new At(Ir.fromString(e)),r=t.fu.next();t.Au.set(r,new KOe(n)),t.du=t.du.insert(n,r),PL(t.remoteStore,new rp(gc(xL(n.path)),r,"TargetPurposeLimboResolution",wl.ce))}}async function m0(t,e,n){const r=Xt(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((c=>{if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){i.push(c);const u=QU.As(l.targetId,c);s.push(u)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,c){const u=Xt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>we.forEach(c,(f=>we.forEach(f.Es,(g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g))).next((()=>we.forEach(f.ds,(g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))))))}catch(h){if(!f0(h))throw h;lt(eB,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.Ms.get(f),y=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(f,_)}}})(r.localStore,s))}async function sDe(t,e){const n=Xt(t);if(!n.currentUser.isEqual(e)){lt(gb,"User change. New user:",e.toKey());const r=await $de(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new xt(We.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await m0(n,r.Ls)}}function oDe(t,e){const n=Xt(t),r=n.Au.get(e);if(r&&r.hu)return qn().add(r.key);{let i=qn();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function aDe(t,e){const n=Xt(t),r=await t9(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&o9(n,e.targetId,i.au),i}async function lDe(t,e){const n=Xt(t);return Gde(n.localStore,e).then((r=>m0(n,r)))}async function cDe(t,e,n,r){const i=Xt(t),s=await(function(a,l){const c=Xt(a),u=Xt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(h=>u.er(h,l).next((f=>f?c.localDocuments.getDocuments(h,f):we.resolve(null)))))})(i.localStore,e);s!==null?(n==="pending"?await pb(i.remoteStore):n==="acknowledged"||n==="rejected"?(uB(i,e,r||null),cB(i,e),(function(a,l){Xt(Xt(a).mutationQueue).ir(l)})(i.localStore,e)):$t(6720,"Unknown batchState",{Su:n}),await m0(i,s)):lt(gb,"Cannot apply mutation batch with id: "+e)}async function uDe(t,e){const n=Xt(t);if(RL(n),dB(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await VQ(n,r.toArray());n.gu=!0,await i9(n.remoteStore,!0);for(const s of i)PL(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then((()=>(A2(n,o),S2(n.localStore,o,!0)))),T2(n.remoteStore,o)})),await i,await VQ(n,r),(function(o){const a=Xt(o);a.Au.forEach(((l,c)=>{T2(a.remoteStore,c)})),a.Ru.Jr(),a.Au=new Map,a.du=new ci(At.comparator)})(n),n.gu=!1,await i9(n.remoteStore,!1)}}async function VQ(t,e,n){const r=Xt(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await V4(r.localStore,gc(l[0]));for(const c of l){const u=r.Tu.get(c),h=await aDe(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await zde(r.localStore,o);a=await V4(r.localStore,c),await lB(r,ufe(c),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function ufe(t){return Bhe(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function hDe(t){return(function(n){return Xt(Xt(n).persistence).Ts()})(Xt(t).localStore)}async function dDe(t,e,n,r){const i=Xt(t);if(i.gu)return void lt(gb,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Gde(i.localStore,qhe(s[0])),a=xC.createSynthesizedRemoteEventForCurrentChange(e,n==="current",vs.EMPTY_BYTE_STRING);await m0(i,o,a);break}case"rejected":await S2(i.localStore,e,!0),A2(i,e,r);break;default:$t(64155,n)}}async function fDe(t,e,n){const r=RL(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){lt(gb,"Adding an already active target "+i);continue}const s=await zde(r.localStore,i),o=await V4(r.localStore,s);await lB(r,ufe(s),o.targetId,!1,o.resumeToken),PL(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await S2(r.localStore,i,!1).then((()=>{T2(r.remoteStore,i),A2(r,i)})).catch(d0)}}function RL(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lfe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oDe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tDe.bind(null,e),e.Pu.H_=BOe.bind(null,e.eventManager),e.Pu.yu=WOe.bind(null,e.eventManager),e}function dB(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nDe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rDe.bind(null,e),e}class Zk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=CL(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Fde(this.persistence,new jde,e.initialUser,this.serializer)}Cu(e){return new ZU(AL.mi,this.serializer)}Du(e){return new qde}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zk.provider={build:()=>new Zk};class pDe extends Zk{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nn(this.persistence.referenceDelegate instanceof $4,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Rde(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ia.withCacheSize(this.cacheSizeBytes):ia.DEFAULT;return new ZU((r=>$4.mi(r,n)),this.serializer)}}class hfe extends Zk{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await dB(this.xu.syncEngine),await pb(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Fde(this.persistence,new jde,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Rde(r,e.asyncQueue,n)}Mu(e,n){const r=new T5e(n,this.persistence);return new S5e(e.asyncQueue,r)}Cu(e){const n=Dde(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ia.withCacheSize(this.cacheSizeBytes):ia.DEFAULT;return new JU(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Kde(),CM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new qde}}class mDe extends hfe{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Nj&&(this.sharedClientState.syncEngine={Co:cDe.bind(null,n),vo:dDe.bind(null,n),Fo:fDe.bind(null,n),Ts:hDe.bind(null,n),Do:lDe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await uDe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=Kde();if(!Nj.v(n))throw new xt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Dde(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Nj(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Jk{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$Q(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sDe.bind(null,this.syncEngine),await i9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UOe})()}createDatastore(e){const n=CL(e.databaseInfo.databaseId),r=(function(s){return new TOe(s)})(e.databaseInfo);return(function(s,o,a,l){return new IOe(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new ROe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>$Q(this.syncEngine,n,0)),(function(){return NQ.v()?new NQ:new wOe})())}createSyncEngine(e,n){return(function(i,s,o,a,l,c,u){const h=new YOe(i,s,o,a,l,c);return u&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Xt(n);lt(G1,"RemoteStore shutting down."),r.Ea.add(5),await bC(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Jk.provider={build:()=>new Jk};class dfe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Hg="FirestoreClient";class gDe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ra.UNAUTHENTICATED,this.clientId=PU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{lt(Hg,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(lt(Hg,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Td;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=oB(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Oj(t,e){t.asyncQueue.verifyOperationInProgress(),lt(Hg,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await $de(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zQ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yDe(t);lt(Hg,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>OQ(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>OQ(e.remoteStore,i))),t._onlineComponents=e}async function yDe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lt(Hg,"Using user provided OfflineComponentProvider");try{await Oj(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Vk("Error using user provided cache. Falling back to memory cache: "+n),await Oj(t,new Zk)}}else lt(Hg,"Using default OfflineComponentProvider"),await Oj(t,new pDe(void 0));return t._offlineComponents}async function ffe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lt(Hg,"Using user provided OnlineComponentProvider"),await zQ(t,t._uninitializedComponentsProvider._online)):(lt(Hg,"Using default OnlineComponentProvider"),await zQ(t,new Jk))),t._onlineComponents}function vDe(t){return ffe(t).then((e=>e.syncEngine))}async function pfe(t){const e=await ffe(t),n=e.eventManager;return n.onListen=XOe.bind(null,e.syncEngine),n.onUnlisten=JOe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZOe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QOe.bind(null,e.syncEngine),n}function _De(t,e,n={}){const r=new Td;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new dfe({next:f=>{u.Nu(),o.enqueueAndForget((()=>rfe(s,h)));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new xt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new xt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new ife(xL(a.path),u,{includeMetadataChanges:!0,qa:!0});return nfe(s,h)})(await pfe(t),t.asyncQueue,e,n,r))),r.promise}function xDe(t,e,n={}){const r=new Td;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new dfe({next:f=>{u.Nu(),o.enqueueAndForget((()=>rfe(s,h))),f.fromCache&&l.source==="server"?c.reject(new xt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new ife(a,u,{includeMetadataChanges:!0,qa:!0});return nfe(s,h)})(await pfe(t),t.asyncQueue,e,n,r))),r.promise}function mfe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const GQ=new Map;const wDe="firestore.googleapis.com",UQ=!0;class BQ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wDe,this.ssl=UQ}else this.host=e.host,this.ssl=e.ssl??UQ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kde;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pde)throw new xt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w5e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mfe(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fB{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BQ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new d5e;switch(r.type){case"firstParty":return new m5e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=GQ.get(n);r&&(lt("ComponentProvider","Removing Datastore"),GQ.delete(n),r.terminate())})(this),Promise.resolve()}}class yb{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yb(this.firestore,e,this._query)}}class gs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gs(this.firestore,e,this._key)}toJSON(){return{type:gs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mC(n,gs._jsonSchema))return new gs(e,r||null,new At(Ir.fromString(n.referencePath)))}}gs._jsonSchemaVersion="firestore/documentReference/1.0",gs._jsonSchema={type:Ns("string",gs._jsonSchemaVersion),referencePath:Ns("string")};class Pg extends yb{constructor(e,n,r){super(e,n,xL(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gs(this.firestore,null,new At(e))}withConverter(e){return new Pg(this.firestore,e,this._path)}}function WQ(t,e,...n){if(t=go(t),che("collection","path",e),t instanceof fB){const r=Ir.fromString(e,...n);return LJ(r),new Pg(t,null,r)}{if(!(t instanceof gs||t instanceof Pg))throw new xt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ir.fromString(e,...n));return LJ(r),new Pg(t.firestore,null,r)}}function eg(t,e,...n){if(t=go(t),arguments.length===1&&(e=PU.newId()),che("doc","path",e),t instanceof fB){const r=Ir.fromString(e,...n);return NJ(r),new gs(t,null,new At(r))}{if(!(t instanceof gs||t instanceof Pg))throw new xt(We.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ir.fromString(e,...n));return NJ(r),new gs(t.firestore,t instanceof Pg?t.converter:null,new At(r))}}const HQ="AsyncQueue";class qQ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yde(this,"async_queue_retry"),this._c=()=>{const r=CM();r&&lt(HQ,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=CM();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=CM();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Td;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!f0(e))throw e;lt(HQ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",KQ(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=sB.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&$t(47125,{Pc:KQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function KQ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class vv extends fB{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qQ,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qQ(e),this._firestoreClient=void 0,await e}}}function bDe(t,e,n){n||(n=P4);const r=aL(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(N1(s,e))return i;throw new xt(We.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xt(We.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Pde)throw new xt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&pv(e.host)&&yU(e.host),r.initialize({options:e,instanceIdentifier:n})}function pB(t){if(t._terminated)throw new xt(We.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||EDe(t),t._firestoreClient}function EDe(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new Q5e(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,mfe(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gDe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class ru{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ru(vs.fromBase64String(e))}catch(n){throw new xt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ru(vs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ru._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mC(e,ru._jsonSchema))return ru.fromBase64String(e.bytes)}}ru._jsonSchemaVersion="firestore/bytes/1.0",ru._jsonSchema={type:Ns("string",ru._jsonSchemaVersion),bytes:Ns("string")};class ML{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class NL{constructor(e){this._methodName=e}}class kd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kd._jsonSchemaVersion}}static fromJSON(e){if(mC(e,kd._jsonSchema))return new kd(e.latitude,e.longitude)}}kd._jsonSchemaVersion="firestore/geoPoint/1.0",kd._jsonSchema={type:Ns("string",kd._jsonSchemaVersion),latitude:Ns("number"),longitude:Ns("number")};class Ad{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ad._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mC(e,Ad._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ad(e.vectorValues);throw new xt(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ad._jsonSchemaVersion="firestore/vectorValue/1.0",Ad._jsonSchema={type:Ns("string",Ad._jsonSchemaVersion),vectorValues:Ns("object")};const SDe=/^__.*__$/;class TDe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lp(e,this.data,this.fieldMask,n,this.fieldTransforms):new fb(e,this.data,n,this.fieldTransforms)}}class gfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lp(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function yfe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t(40011,{Ac:t})}}class mB{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mB({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return B4(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(yfe(this.Ac)&&SDe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kDe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||CL(e)}Cc(e,n,r,i=!1){return new mB({Ac:e,methodName:n,Dc:r,path:ji.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function LL(t){const e=t._freezeSettings(),n=CL(t._databaseId);return new kDe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vfe(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);yB("Data must be an object, but it was:",o,r);const a=_fe(r,o);let l,c;if(s.merge)l=new bl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=a9(e,h,n);if(!o.contains(f))throw new xt(We.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);wfe(u,f)||u.push(f)}l=new bl(u),c=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,c=o.fieldTransforms;return new TDe(new ua(a),l,c)}class OL extends NL{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof OL}}class gB extends NL{_toFieldTransform(e){return new rde(e.path,new x2)}isEqual(e){return e instanceof gB}}function ADe(t,e,n,r){const i=t.Cc(1,e,n);yB("Data must be an object, but it was:",i,r);const s=[],o=ua.empty();p0(r,((l,c)=>{const u=vB(e,l,n);c=go(c);const h=i.yc(u);if(c instanceof OL)s.push(u);else{const f=EC(c,h);f!=null&&(s.push(u),o.set(u,f))}}));const a=new bl(s);return new gfe(o,a,i.fieldTransforms)}function CDe(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[a9(e,r,n)],l=[i];if(s.length%2!=0)throw new xt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(a9(e,s[f])),l.push(s[f+1]);const c=[],u=ua.empty();for(let f=a.length-1;f>=0;--f)if(!wfe(c,a[f])){const g=a[f];let y=l[f];y=go(y);const _=o.yc(g);if(y instanceof OL)c.push(g);else{const b=EC(y,_);b!=null&&(c.push(g),u.set(g,b))}}const h=new bl(c);return new gfe(u,h,o.fieldTransforms)}function IDe(t,e,n,r=!1){return EC(n,t.Cc(r?4:3,e))}function EC(t,e){if(xfe(t=go(t)))return yB("Unsupported field value:",e,t),_fe(t,e);if(t instanceof NL)return(function(r,i){if(!yfe(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=EC(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=go(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gLe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ur.fromDate(r);return{timestampValue:E2(i.serializer,s)}}if(r instanceof Ur){const s=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:E2(i.serializer,s)}}if(r instanceof kd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ru)return{bytesValue:ude(i.serializer,r._byteString)};if(r instanceof gs){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qU(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ad)return(function(o,a){return{mapValue:{fields:{[FU]:{stringValue:$U},[g2]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return GU(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${dL(r)}`)})(t,e)}function _fe(t,e){const n={};return Ahe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):p0(t,((r,i)=>{const s=EC(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function xfe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof kd||t instanceof ru||t instanceof gs||t instanceof NL||t instanceof Ad)}function yB(t,e,n){if(!xfe(n)||!uhe(n)){const r=dL(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function a9(t,e,n){if((e=go(e))instanceof ML)return e._internalPath;if(typeof e=="string")return vB(t,e);throw B4("Field path arguments must be of type string or ",t,!1,void 0,n)}const PDe=new RegExp("[~\\*/\\[\\]]");function vB(t,e,n){if(e.search(PDe)>=0)throw B4(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ML(...e.split("."))._internalPath}catch{throw B4(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function B4(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new xt(We.INVALID_ARGUMENT,a+t+l)}function wfe(t,e){return t.some((n=>n.isEqual(e)))}class bfe{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RDe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_B("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RDe extends bfe{data(){return super.data()}}function _B(t,e){return typeof e=="string"?vB(t,e):e instanceof ML?e._internalPath:e._delegate._internalPath}function MDe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xB{}class NDe extends xB{}function LDe(t,e,...n){let r=[];e instanceof xB&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((l=>l instanceof wB)).length,a=s.filter((l=>l instanceof DL)).length;if(o>1||o>0&&a>0)throw new xt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class DL extends NDe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new DL(e,n,r)}_apply(e){const n=this._parse(e);return Efe(e._query,n),new yb(e.firestore,e.converter,H8(e._query,n))}_parse(e){const n=LL(e.firestore);return(function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new xt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){XQ(h,u);const y=[];for(const _ of h)y.push(YQ(l,s,_));f={arrayValue:{values:y}}}else f=YQ(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||XQ(h,u),f=IDe(a,o,h,u==="in"||u==="not-in");return rr.create(c,u,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ODe(t,e,n){const r=e,i=_B("where",t);return DL._create(i,r,n)}class wB extends xB{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wB(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Efe(o,l),o=H8(o,l)})(e._query,n),new yb(e.firestore,e.converter,H8(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function YQ(t,e,n){if(typeof(n=go(n))=="string"){if(n==="")throw new xt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Whe(e)&&n.indexOf("/")!==-1)throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ir.fromString(n));if(!At.isDocumentKey(r))throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Kk(t,new At(r))}if(n instanceof gs)return Kk(t,n._key);throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dL(n)}.`)}function XQ(t,e){if(!Array.isArray(t)||t.length===0)throw new xt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Efe(t,e){const n=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xt(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DDe{convertValue(e,n="none"){switch(Ug(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $t(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return p0(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[g2].arrayValue?.values?.map((r=>Ei(r.doubleValue)));return new Ad(n)}convertGeoPoint(e){return new kd(Ei(e.latitude),Ei(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vL(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hk(e));default:return null}}convertTimestamp(e){const n=Sp(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ir.fromString(e);nn(xde(r),9688,{name:e});const i=new j1(r.get(1),r.get(3)),s=new At(r.popFirst(5));return i.isEqual(n)||ps(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Sfe(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class bS{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l1 extends bfe{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new IM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_B("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=l1._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}l1._jsonSchemaVersion="firestore/documentSnapshot/1.0",l1._jsonSchema={type:Ns("string",l1._jsonSchemaVersion),bundleSource:Ns("string","DocumentSnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class IM extends l1{data(e={}){return super.data(e)}}class cw{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bS(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new IM(this._firestore,this._userDataWriter,r.key,r,new bS(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new IM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new IM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:jDe(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=cw._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=PU.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jDe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t(61501,{type:t})}}function ZQ(t){t=jd(t,gs);const e=jd(t.firestore,vv);return _De(pB(e),t._key).then((n=>GDe(e,t,n)))}cw._jsonSchemaVersion="firestore/querySnapshot/1.0",cw._jsonSchema={type:Ns("string",cw._jsonSchemaVersion),bundleSource:Ns("string","QuerySnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class Tfe extends DDe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ru(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gs(this.firestore,null,n)}}function FDe(t){t=jd(t,yb);const e=jd(t.firestore,vv),n=pB(e),r=new Tfe(e);return MDe(t._query),xDe(n,t._query).then((i=>new cw(e,r,t,i)))}function UP(t,e,n){t=jd(t,gs);const r=jd(t.firestore,vv),i=Sfe(t.converter,e,n);return jL(r,[vfe(LL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fa.none())])}function $De(t,e,n,...r){t=jd(t,gs);const i=jd(t.firestore,vv),s=LL(i);let o;return o=typeof(e=go(e))=="string"||e instanceof ML?CDe(s,"updateDoc",t._key,e,n,r):ADe(s,"updateDoc",t._key,e),jL(i,[o.toMutation(t._key,fa.exists(!0))])}function VDe(t){return jL(jd(t.firestore,vv),[new SL(t._key,fa.none())])}function zDe(t,e){const n=jd(t.firestore,vv),r=eg(t),i=Sfe(t.converter,e);return jL(n,[vfe(LL(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fa.exists(!1))]).then((()=>r))}function jL(t,e){return(function(r,i){const s=new Td;return r.asyncQueue.enqueueAndForget((async()=>eDe(await vDe(r),i,s))),s.promise})(pB(t),e)}function GDe(t,e,n){const r=n.docs.get(e._key),i=new Tfe(t);return new l1(t,i,e._key,r,new bS(n.hasPendingWrites,n.fromCache),e.converter)}class UDe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=qDe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function BDe(t){return new UDe(t)}class WDe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Jk.provider,this._offlineComponentProvider={build:n=>new hfe(n,e?.cacheSizeBytes,this.forceOwnership)}}}class HDe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Jk.provider,this._offlineComponentProvider={build:n=>new mDe(n,e?.cacheSizeBytes)}}}function qDe(t){return new WDe(t?.forceOwnership)}function KDe(){return new HDe}function k_(){return new gB("serverTimestamp")}(function(e,n=!0){(function(i){db=i})(mv),L1(new zg("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vv(new f5e(r.getProvider("auth-internal")),new g5e(o,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j1(c.options.projectId,u)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),Ed(IJ,PJ,e),Ed(IJ,PJ,"esm2020")})();const kfe="firebasestorage.googleapis.com",YDe="storageBucket",XDe=120*1e3,ZDe=600*1e3;class Zd extends Xd{constructor(e,n,r=0){super(Dj(e),`Firebase Storage: ${n} (${Dj(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zd.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dj(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $d;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($d||($d={}));function Dj(t){return"storage/"+t}function JDe(){const t="An unknown error occurred, please check the error payload for server response.";return new Zd($d.UNKNOWN,t)}function QDe(){return new Zd($d.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e6e(){return new Zd($d.CANCELED,"User canceled the upload/download.")}function t6e(t){return new Zd($d.INVALID_URL,"Invalid URL '"+t+"'.")}function n6e(t){return new Zd($d.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function JQ(t){return new Zd($d.INVALID_ARGUMENT,t)}function Afe(){return new Zd($d.APP_DELETED,"The Firebase app was deleted.")}function r6e(t){return new Zd($d.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class uh{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=uh.makeFromUrl(e,n)}catch{return new uh(e,"")}if(r.path==="")return r;throw n6e(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},_=n===kfe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${_}/${i}/${b}`,"i"),C=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<C.length;I++){const R=C[I],V=R.regex.exec(e);if(V){const P=V[R.indices.bucket];let N=V[R.indices.path];N||(N=""),r=new uh(P,N),R.postModify(r);break}}if(r==null)throw t6e(e);return r}}class i6e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function s6e(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,t(g,l())},b)}function f(){s&&clearTimeout(s)}function g(b,...T){if(c){f();return}if(b){f(),u.call(null,b,...T);return}if(l()||o){f(),u.call(null,b,...T);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,h(C)}let y=!1;function _(b){y||(y=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function o6e(t){t(!1)}function a6e(t){return t!==void 0}function QQ(t,e,n,r){if(r<e)throw JQ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw JQ(`Invalid value for '${t}'. Expected ${n} or less.`)}function l6e(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var W4;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(W4||(W4={}));function c6e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class u6e{constructor(e,n,r,i,s,o,a,l,c,u,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,_)=>{this.resolve_=y,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new BP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===W4.NO_ERROR,l=s.getStatus();if(!a||c6e(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===W4.ABORT;r(!1,new BP(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new BP(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());a6e(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=JDe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Afe():e6e();o(l)}else{const l=QDe();o(l)}};this.canceled_?n(!1,new BP(!1,null,!0)):this.backoffId_=s6e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o6e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class BP{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function h6e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function d6e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f6e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p6e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function m6e(t,e,n,r,i,s,o=!0,a=!1){const l=l6e(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return f6e(u,e),h6e(u,n),d6e(u,s),p6e(u,r),new u6e(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function g6e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function y6e(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class H4{constructor(e,n){this._service=e,n instanceof uh?this._location=n:this._location=uh.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new H4(e,n)}get root(){const e=new uh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return y6e(this._location.path)}get storage(){return this._service}get parent(){const e=g6e(this._location.path);if(e===null)return null;const n=new uh(this._location.bucket,e);return new H4(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw r6e(e)}}function eee(t,e){const n=e?.[YDe];return n==null?null:uh.makeFromBucketSpec(n,t)}function v6e(t,e,n,r={}){t.host=`${e}:${n}`;const i=pv(e);i&&(yU(`https://${t.host}/b`),lue("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:VMe(s,t.app.options.projectId))}class _6e{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=kfe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XDe,this._maxUploadRetryTime=ZDe,this._requests=new Set,i!=null?this._bucket=uh.makeFromBucketSpec(i,this._host):this._bucket=eee(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=uh.makeFromBucketSpec(this._url,e):this._bucket=eee(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){QQ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){QQ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(_l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new H4(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new i6e(Afe());{const o=m6e(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const tee="@firebase/storage",nee="0.14.0";const Cfe="storage";function x6e(t=gue(),e){t=go(t);const r=aL(t,Cfe).getImmediate({identifier:e}),i=FMe("storage");return i&&w6e(r,...i),r}function w6e(t,e,n,r={}){v6e(t,e,n,r)}function b6e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _6e(n,r,i,e,mv)}function E6e(){L1(new zg(Cfe,b6e,"PUBLIC").setMultipleInstances(!0)),Ed(tee,nee,""),Ed(tee,nee,"esm2020")}E6e();const S6e={apiKey:"AIzaSyDiV9VX6oQExwnv6Zs5qBvuMkK-BW-tsio",authDomain:"detect-personal.firebaseapp.com",projectId:"detect-personal",storageBucket:"detect-personal.firebasestorage.app",messagingSenderId:"640587689726",appId:"1:640587689726:web:2ae2eb916c1ade465ebfaf"},bB=mue(S6e),qf=a5e(bB),ree=new th,ep=bDe(bB,{localCache:BDe({tabManager:KDe()})});x6e(bB);const T6e={};function k6e(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Qk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Qk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Qk(r)(n)}}}},A6e=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,T)=>({...T,...b}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...b)},r,i);const u=Qk(s.serialize),h=()=>{const b=s.partialize({...r()});let T;const A=u({state:b,version:s.version}).then(C=>c.setItem(s.name,C)).catch(C=>{T=C});if(T)throw T;return A},f=i.setState;i.setState=(b,T)=>{f(b,T),h()};const g=t((...b)=>{n(...b),h()},r,i);let y;const _=()=>{var b;if(!c)return;o=!1,a.forEach(A=>A(r()));const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,r()))||void 0;return Qk(c.getItem.bind(c))(s.name).then(A=>{if(A)return s.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var C;return y=s.merge(A,(C=r())!=null?C:g),n(y,!0),h()}).then(()=>{T?.(y,void 0),o=!0,l.forEach(A=>A(y))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:b=>{s={...s,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),y||g},C6e=(t,e)=>(n,r,i)=>{let s={storage:k6e(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const u=()=>{const _=s.partialize({...r()});return c.setItem(s.name,{state:_,version:s.version})},h=i.setState;i.setState=(_,b)=>{h(_,b),u()};const f=t((..._)=>{n(..._),u()},r,i);i.getInitialState=()=>f;let g;const y=()=>{var _,b;if(!c)return;o=!1,a.forEach(A=>{var C;return A((C=r())!=null?C:f)});const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(_=r())!=null?_:f))||void 0;return Qk(c.getItem.bind(c))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return[!0,s.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var C;const[I,R]=A;if(g=s.merge(R,(C=r())!=null?C:f),n(g,!0),I)return u()}).then(()=>{T?.(g,void 0),g=r(),o=!0,l.forEach(A=>A(g))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(c=_.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},s.skipHydration||y(),g||f},I6e=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((T6e?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),A6e(t,e)):C6e(t,e),kh=I6e,an=vo()(kh(t=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!1,showRouteRecordButton:!1,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,weatherFontScale:100,voiceFeedbackEnabled:!1,showStepCounter:!1,showFontSliders:!1,showWeatherButton:!1,hideWelcomeModal:!1,showMeasureTool:!0,showDrawTool:!0,showPrintTool:!0,setDefaultBackground:e=>t({defaultBackground:e}),setShowScaleBar:e=>t({showScaleBar:e}),setGpsAutoStart:e=>t({gpsAutoStart:e}),setShowAccuracyCircle:e=>t({showAccuracyCircle:e}),setHapticFeedback:e=>t({hapticFeedback:e}),setVondstenLocalOnly:e=>t({vondstenLocalOnly:e}),setShowVondstButton:e=>t({showVondstButton:e}),setShowRouteRecordButton:e=>t({showRouteRecordButton:e}),setShowLocalVondsten:e=>t({showLocalVondsten:e}),setShowCustomPointLayers:e=>t({showCustomPointLayers:e}),setFontScale:e=>t({fontScale:e}),setLayerPanelFontScale:e=>t({layerPanelFontScale:e}),setPresetPanelFontScale:e=>t({presetPanelFontScale:e}),setMenuFontScale:e=>t({menuFontScale:e}),setWeatherFontScale:e=>t({weatherFontScale:e}),setVoiceFeedbackEnabled:e=>t({voiceFeedbackEnabled:e}),setShowStepCounter:e=>t({showStepCounter:e}),setShowFontSliders:e=>t({showFontSliders:e}),setShowWeatherButton:e=>t({showWeatherButton:e}),setHideWelcomeModal:e=>t({hideWelcomeModal:e}),setShowMeasureTool:e=>t({showMeasureTool:e}),setShowDrawTool:e=>t({showDrawTool:e}),setShowPrintTool:e=>t({showPrintTool:e})}),{name:"detectorapp-settings",version:2,migrate:(t,e)=>e<2?{...t,showScaleBar:!0}:t})),FL=vo()(ub((t,e)=>({user:null,accessToken:null,loading:!1,error:null,initialized:!1,setUser:n=>{t(r=>{r.user=n,r.loading=!1})},setLoading:n=>{t(r=>{r.loading=n})},setError:n=>{t(r=>{r.error=n})},setAccessToken:n=>{t(r=>{r.accessToken=n})},signInWithGoogle:async()=>{t(n=>{n.loading=!0,n.error=null});try{try{await xJ(qf,ree)}catch(n){if(n.code==="auth/popup-blocked"||n.code==="auth/popup-closed-by-user")console.log("Popup blocked/closed, trying redirect..."),await wNe(qf,ree);else throw n}}catch(n){console.error("Google sign-in error:",n),t(r=>{r.error=n.message,r.loading=!1})}},connectGoogleFit:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new th;n.addScope("https://www.googleapis.com/auth/fitness.activity.read");const r=await xJ(qf,n),i=th.credentialFromResult(r);return i?.accessToken?(t(s=>{s.accessToken=i.accessToken||null,s.loading=!1}),console.log(" Google Fit gekoppeld"),!0):(t(s=>{s.loading=!1}),!1)}catch(n){return console.error("Google Fit connect error:",n),t(r=>{r.error=n.message,r.loading=!1}),!1}},logout:async()=>{t(n=>{n.loading=!0});try{await zue(qf),t(n=>{n.accessToken=null})}catch(n){console.error("Logout error:",n),t(r=>{r.error=n.message,r.loading=!1})}},initAuth:()=>{e().initialized||(t(n=>{n.initialized=!0}),ENe(qf).then(n=>{n?.user&&console.log(" Ingelogd via redirect")}).catch(n=>{console.error("Redirect result error:",n),t(r=>{r.error=n.message})}),Vue(qf,n=>{t(r=>{r.user=n,r.loading=!1}),n&&an.getState().setVondstenLocalOnly(!1)}))}})));vo()(ub((t,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async n=>{t(r=>{r.loading=!0});try{const r=LDe(WQ(ep,"vondsten"),ODe("userId","==",n)),s=(await FDe(r)).docs.map(o=>({id:o.id,...o.data()}));t(o=>{o.vondsten=s,o.loading=!1})}catch(r){t(i=>{i.error=r.message,i.loading=!1})}},addVondst:async n=>{const r=new Date().toISOString(),i={...n,createdAt:r,updatedAt:r},s=await zDe(WQ(ep,"vondsten"),i);return t(o=>{o.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(n,r)=>{const i=eg(ep,"vondsten",n);await $De(i,{...r,updatedAt:new Date().toISOString()}),t(s=>{const o=s.vondsten.findIndex(a=>a.id===n);o!==-1&&(s.vondsten[o]={...s.vondsten[o],...r})})},deleteVondst:async n=>{await VDe(eg(ep,"vondsten",n)),t(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==n)})}})));const WP=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","Geomorfologie","AHN4 Hoogtekaart Kleur","Kadastrale Grenzen"],baseLayer:"CartoDB (licht)",layerOpacities:{"AMK Monumenten":.5,Gewaspercelen:.25,Geomorfologie:.25,"AHN4 Hoogtekaart Kleur":.25},isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Gewaspercelen","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],iee=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],Ife=vo()(kh((t,e)=>({presets:[...WP],customDefaults:null,applyPreset:n=>{const r=e().presets.find(s=>s.id===n);if(!r)return;const i=Ws.getState();iee.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.layerOpacities&&Object.entries(r.layerOpacities).forEach(([s,o])=>{i.setLayerOpacity(s,o)}),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(o=>{i.setLayerVisibility(o,o===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(n,r)=>{const i=Ws.getState(),s=Object.entries(i.visible).filter(([a,l])=>l&&iee.includes(a)).map(([a])=>a),o={id:`custom-${Date.now()}`,name:n,icon:r,layers:s,isBuiltIn:!1};t(a=>({presets:[...a.presets,o]})),console.log(` Preset aangemaakt: ${n} met ${s.length} lagen`)},updatePreset:(n,r)=>{t(i=>({presets:i.presets.map(s=>s.id===n?{...s,...r}:s)}))},deletePreset:n=>{t(r=>({presets:r.presets.filter(i=>i.id!==n||i.isBuiltIn)}))},saveAsDefaults:()=>{const n=e().presets;t({customDefaults:[...n]}),console.log(" Presets opgeslagen als standaard")},resetToDefaults:()=>{const{customDefaults:n}=e();n?(t({presets:[...n]}),console.log(" Presets hersteld naar eigen standaard")):(t({presets:[...WP]}),console.log(" Presets hersteld naar originele standaard"))},resetToBuiltIn:()=>{t({presets:[...WP],customDefaults:null}),console.log(" Presets gereset naar originele instellingen")}}),{name:"detectorapp-presets",version:13,migrate:(t,e)=>e<13?{presets:[...WP]}:t})),see=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],SC=vo()(kh((t,e)=>({layers:[],addLayer:n=>{const r=crypto.randomUUID(),i=e().layers.length,s=see[i%see.length];return t(o=>({layers:[...o.layers,{...n,id:r,createdAt:new Date().toISOString(),color:n.color||s,visible:n.visible??!0,opacity:n.opacity??1}]})),r},removeLayer:n=>t(r=>({layers:r.layers.filter(i=>i.id!==n)})),updateLayer:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)})),toggleVisibility:n=>t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)})),setOpacity:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,opacity:r}:s)})),setColor:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,color:r}:s)})),clearAll:()=>t({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),P6e=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],EB=vo()(kh((t,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:n=>t({tier:n}),unlockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.includes(n)?r.unlockedRegions:[...r.unlockedRegions,n]})),lockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==n)})),setDevMode:n=>t({devMode:n}),isRegionUnlocked:n=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(n)},isLayerUnlocked:(n,r="free",i=["nl"])=>{const s=e();return s.devMode||P6e.includes(n)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(o=>s.unlockedRegions.includes(o)):!1},canAccessPremiumFeatures:()=>{const n=e();return n.devMode||n.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));vo()(kh(t=>({parkingLocation:null,showParkingButton:!0,setParkingLocation:e=>t({parkingLocation:e}),clearParkingLocation:()=>t({parkingLocation:null}),setShowParkingButton:e=>t({showParkingButton:e})}),{name:"detectorapp-parking"}));function oee(){return new Date().toISOString().split("T")[0]}vo()(kh((t,e)=>({steps:0,distance:0,startTime:null,isActive:!1,todaySteps:0,todayDate:oee(),stepLength:.75,incrementStep:()=>{const n=e(),r=oee(),i=n.todayDate===r?n.todaySteps+1:1;t({steps:n.steps+1,distance:(n.steps+1)*n.stepLength,todaySteps:i,todayDate:r})},resetSession:()=>{t({steps:0,distance:0,startTime:null})},setActive:n=>{t({isActive:n,startTime:n?Date.now():e().startTime})},setStepLength:n=>{const r=e();t({stepLength:n,distance:r.steps*n})}}),{name:"step-counter-storage",partialize:t=>({todaySteps:t.todaySteps,todayDate:t.todayDate,stepLength:t.stepLength})}));const aee={sunAzimuth:315,sunElevation:45,verticalExaggeration:2,colorRamp:"terrain",minElevation:-5,maxElevation:50,showControls:!1};vo()(kh(t=>({...aee,setSunAzimuth:e=>t({sunAzimuth:e}),setSunElevation:e=>t({sunElevation:e}),setVerticalExaggeration:e=>t({verticalExaggeration:e}),setColorRamp:e=>t({colorRamp:e}),setMinElevation:e=>t({minElevation:e}),setMaxElevation:e=>t({maxElevation:e}),setShowControls:e=>t({showControls:e}),resetToDefaults:()=>t(aee)}),{name:"detectorapp-hillshade"}));const R6e=()=>Math.random().toString(36).substring(2,9),M6e={0:"Helder",1:"Overwegend helder",2:"Halfbewolkt",3:"Bewolkt",45:"Mist",48:"Rijp/mist",51:"Lichte motregen",53:"Motregen",55:"Dichte motregen",56:"Lichte ijzel",57:"Ijzel",61:"Lichte regen",63:"Regen",65:"Hevige regen",66:"Lichte ijsregen",67:"IJsregen",71:"Lichte sneeuw",73:"Sneeuw",75:"Hevige sneeuw",77:"Korrelsneeuw",80:"Lichte buien",81:"Buien",82:"Hevige buien",85:"Lichte sneeuwbuien",86:"Sneeuwbuien",95:"Onweer",96:"Onweer met hagel",99:"Zwaar onweer met hagel"};function N6e(t){const e=["N","NNO","NO","ONO","O","OZO","ZO","ZZO","Z","ZZW","ZW","WZW","W","WNW","NW","NNW"],n=Math.round(t/22.5)%16;return e[n]}const TT=vo()(kh((t,e)=>({weatherData:null,isLoading:!1,error:null,savedLocations:[{id:"current",name:"Huidige locatie",lat:0,lon:0,isCurrentLocation:!0}],selectedLocationId:"current",weatherPanelOpen:!1,showBuienradar:!1,setWeatherData:n=>t({weatherData:n}),setIsLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),addLocation:n=>t(r=>({savedLocations:[...r.savedLocations,{...n,id:R6e()}]})),removeLocation:n=>t(r=>({savedLocations:r.savedLocations.filter(i=>i.id!==n),selectedLocationId:r.selectedLocationId===n?"current":r.selectedLocationId})),setSelectedLocation:n=>t({selectedLocationId:n}),updateCurrentLocation:(n,r)=>t(i=>({savedLocations:i.savedLocations.map(s=>s.isCurrentLocation?{...s,lat:n,lon:r}:s)})),toggleWeatherPanel:()=>t(n=>({weatherPanelOpen:!n.weatherPanelOpen})),setWeatherPanelOpen:n=>t({weatherPanelOpen:n}),setShowBuienradar:n=>t({showBuienradar:n}),fetchWeather:async(n,r)=>{const{setIsLoading:i,setError:s,setWeatherData:o,savedLocations:a,selectedLocationId:l}=e();i(!0),s(null);try{const c=new URL("https://api.open-meteo.com/v1/forecast");c.searchParams.set("latitude",n.toString()),c.searchParams.set("longitude",r.toString()),c.searchParams.set("current","temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m,wind_gusts_10m,cloud_cover,is_day,snow_depth"),c.searchParams.set("hourly","temperature_2m,precipitation,precipitation_probability,weather_code,wind_speed_10m,wind_direction_10m,relative_humidity_2m"),c.searchParams.set("daily","weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,wind_speed_10m_max,sunrise,sunset"),c.searchParams.set("minutely_15","precipitation"),c.searchParams.set("timezone","Europe/Amsterdam"),c.searchParams.set("forecast_days","7"),c.searchParams.set("past_days","7");const u=await fetch(c.toString());if(!u.ok)throw new Error("Kon weerdata niet ophalen");const h=await u.json();let f=0;const g=h.daily.temperature_2m_min||[],y=new Date().toISOString().split("T")[0],_=h.daily.time.indexOf(y);for(let L=_-1;L>=0&&g[L]<0;L--)f++;const b=a.find(L=>L.id===l)||a[0],T=new Date,A=[],C=[];if(h.minutely_15?.time&&h.minutely_15?.precipitation){const L=new Date(T.getTime()+72e5),O=new Date(T.getTime()+2880*60*1e3);for(let F=0;F<h.minutely_15.time.length;F++){const G=new Date(h.minutely_15.time[F]);G<T||(G<=L&&A.push({time:h.minutely_15.time[F],precipitation:h.minutely_15.precipitation[F]}),G<=O&&C.push({time:h.minutely_15.time[F],precipitation:h.minutely_15.precipitation[F]}))}}const I=T.getHours(),R=T.toISOString().split("T")[0],V=h.hourly.time.map((L,O)=>({time:L,temperature:h.hourly.temperature_2m[O],precipitation:h.hourly.precipitation[O],precipitationProbability:h.hourly.precipitation_probability[O],weatherCode:h.hourly.weather_code[O],windSpeed:h.hourly.wind_speed_10m[O],windDirection:h.hourly.wind_direction_10m[O],humidity:h.hourly.relative_humidity_2m[O]})).filter(L=>new Date(L.time)>=T).slice(0,24),P=h.daily.time.map((L,O)=>({date:L,temperatureMax:h.daily.temperature_2m_max[O],temperatureMin:h.daily.temperature_2m_min[O],precipitationSum:h.daily.precipitation_sum[O],precipitationProbability:h.daily.precipitation_probability_max[O],weatherCode:h.daily.weather_code[O],windSpeedMax:h.daily.wind_speed_10m_max[O],sunrise:h.daily.sunrise[O],sunset:h.daily.sunset[O]})).filter(L=>L.date>=R),N={location:{...b,lat:n,lon:r},current:{temperature:h.current.temperature_2m,apparentTemperature:h.current.apparent_temperature,humidity:h.current.relative_humidity_2m,precipitation:h.current.precipitation,weatherCode:h.current.weather_code,windSpeed:h.current.wind_speed_10m,windDirection:h.current.wind_direction_10m,windGusts:h.current.wind_gusts_10m,cloudCover:h.current.cloud_cover,isDay:h.current.is_day===1,snowDepth:h.current.snow_depth},hourly:V,daily:P,precipitation15min:A,precipitation48h:C,frostDays:f,lastUpdated:Date.now()};try{const L=new URL("https://air-quality-api.open-meteo.com/v1/air-quality");L.searchParams.set("latitude",n.toString()),L.searchParams.set("longitude",r.toString()),L.searchParams.set("current","grass_pollen,birch_pollen,alder_pollen,mugwort_pollen,ragweed_pollen,olive_pollen");const O=await fetch(L.toString());if(O.ok){const F=await O.json();if(F.current){const G=U=>Math.min(5,Math.round(U/20));N.pollen={grass:G(F.current.grass_pollen||0),birch:G(F.current.birch_pollen||0),alder:G(F.current.alder_pollen||0),mugwort:G(F.current.mugwort_pollen||0),ragweed:G(F.current.ragweed_pollen||0),olive:G(F.current.olive_pollen||0)}}}}catch{}o(N)}catch(c){s(c instanceof Error?c.message:"Onbekende fout")}finally{i(!1)}}}),{name:"detectorapp-weather",partialize:t=>({savedLocations:t.savedLocations,selectedLocationId:t.selectedLocationId,showBuienradar:t.showBuienradar})}));function L6e({target:t,viewOptions:e}){const n=Y.useRef(null),r=Y.useRef(null),i=li(o=>o.setMap),s=an(o=>o.showScaleBar);return Y.useEffect(()=>{if(!n.current){const o={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},a=new tMe({target:t,controls:[],view:new md({center:Ni(o.center),zoom:o.zoom,rotation:o.rotation,minZoom:o.minZoom,maxZoom:o.maxZoom})});n.current=a,i(a),window.__olMap=a}return()=>{n.current&&(n.current.setTarget(void 0),i(null),window.__olMap=null)}},[t,e,i]),Y.useEffect(()=>{const o=n.current;o&&(s?r.current||(r.current=new iMe({units:"metric",bar:!1,text:!0,minWidth:80}),o.addControl(r.current)):r.current&&(o.removeControl(r.current),r.current=null))},[s]),n.current}function x(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function nCt(t,e){return function(n,r){e(n,r,t)}}function rCt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function iCt(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var O6e=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function sCt(t){function e(s){t.error=t.hasError?new O6e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}let hg;const ko=globalThis;function _e(t){return typeof hg[t]=="function"?hg[t]=hg[t](ko):hg[t]}hg=ko.dojoConfig?.has||ko.esriConfig?.has?{...ko.dojoConfig?.has,...ko.esriConfig?.has}:{},_e.add=(t,e,n,r)=>{(r||hg[t]===void 0)&&(hg[t]=e),n&&_e(t)},_e.cache=hg,_e.add("big-integer-warning-enabled",!0),_e.add("esri-deprecation-warnings",!0),_e.add("esri-tests-disable-screenshots",!1),_e.add("esri-tests-use-full-window",!1),_e.add("esri-tests-post-to-influx",!0),_e.add("esri-cim-animations-enable-status","enabled"),_e.add("esri-cim-animations-spotlight",!1),_e.add("esri-cim-animations-freeze-time",!1),(()=>{_e.add("host-webworker",ko.WorkerGlobalScope!==void 0&&self instanceof ko.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(_e.add("host-browser",t),_e.add("host-node",!(typeof ko.process!="object"||!ko.process.versions?.node||!ko.process.versions.v8)),_e.add("dom",t),_e("host-browser")){const e=navigator,n=e.userAgent,r=e.appVersion,i=parseFloat(r);if(_e.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),_e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),_e.add("khtml",r.includes("Konqueror")?i:void 0),_e.add("edge",parseFloat(n.split("Edge/")[1])||void 0),_e.add("opr",parseFloat(n.split("OPR/")[1])||void 0),_e.add("webkit",!_e("wp")&&!_e("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),_e.add("chrome",!_e("edge")&&!_e("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),_e.add("android",!_e("wp")&&parseFloat(n.split("Android ")[1])||void 0),_e.add("safari",!r.includes("Safari")||_e("wp")||_e("chrome")||_e("android")||_e("edge")||_e("opr")?void 0:parseFloat(r.split("Version/")[1])),_e.add("mac",r.includes("Macintosh")),!_e("wp")&&/(iPhone|iPod|iPad)/.test(n)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));_e.add(s,a),_e.add("ios",a)}_e("webkit")||(!n.includes("Gecko")||_e("wp")||_e("khtml")||_e("edge")||_e.add("mozilla",i),_e("mozilla")&&_e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(ko.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),n=/iPhone/i.test(t);e&&_e.add("esri-mobile",e),n&&_e.add("esri-iPhone",n),_e.add("esri-geolocation",!!navigator.geolocation)}_e.add("esri-wasm","WebAssembly"in ko),_e.add("esri-performance-mode-frames-between-render",20),_e.add("esri-force-performance-mode",!1),_e.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in ko,e=ko.crossOriginIsolated===!1;return t&&!e}),_e.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),_e.add("esri-atomics","Atomics"in ko),_e.add("esri-workers","Worker"in ko),_e.add("web-feat:cache","caches"in ko),_e.add("esri-workers-arraybuffer-transfer",!_e("safari")||Number(_e("safari"))>=12),_e.add("workers-pool-size",8),_e.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),_e.add("featurelayer-simplify-payload-size-factors",[1,1,4]),_e.add("featurelayer-fast-triangulation-enabled",!0),_e.add("featurelayer-animation-enabled",!0),_e.add("featurelayer-snapshot-enabled",!0),_e.add("featurelayer-snapshot-initial-tolerance",0),_e.add("featurelayer-snapshot-point-min-threshold",8e4),_e.add("featurelayer-snapshot-point-max-threshold",4e5),_e.add("featurelayer-snapshot-multipoint-min-threshold",2e4),_e.add("featurelayer-snapshot-multipoint-max-threshold",1e5),_e.add("featurelayer-snapshot-polygon-min-threshold",2e3),_e.add("featurelayer-snapshot-polygon-max-threshold",2e3),_e.add("featurelayer-snapshot-polyline-min-threshold",2e3),_e.add("featurelayer-snapshot-polyline-max-threshold",2e3),_e.add("featurelayer-snapshot-max-vertex-count",25e4),_e.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),_e.add("featurelayer-snapshot-concurrency",4),_e.add("featurelayer-snapshot-coverage",.1),_e.add("featurelayer-query-max-depth",4),_e.add("featurelayer-query-pausing-enabled",!1),_e.add("featurelayer-query-tile-concurrency",4),_e.add("featurelayer-query-tile-max-features",6e5),_e.add("featurelayer-advanced-symbols",!1),_e.add("featurelayer-pbf",!0),_e.add("featurelayer-pbf-statistics",!1),_e.add("feature-layers-workers",!0),_e.add("feature-polyline-generalization-factor",1),_e.add("parquetlayer-full-query-feature-count",2e4),_e.add("parquetlayer-hittest-max-feature-count",1),_e.add("parquetlayer-persistence-enabled",!1),_e.add("mapview-transitions-duration",200),_e.add("mapview-essential-goto-duration",200),_e.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),_e.add("mapserver-pbf-version-support",10.81),_e.add("mapservice-popup-identify-max-tolerance",20),_e.add("request-queue-concurrency-hosted",16),_e.add("request-queue-concurrency-non-hosted",4),_e.add("curve-densification-coarse-segments",128),_e.add("curve-densification-max-segments",2e3),_e.add("curve-densification-min-segments",3),_e.add("curve-densification-pixel-deviation",.5),_e.add("view-readyState-waiting-delay",1e3),_e.add("gradient-depth-bias",.01),_e.add("gradient-depth-epsilon",1e-8),_e.add("enable-feature:esri-compress-textures",!0),_e("host-webworker")||_e("host-browser")&&(_e.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),_e.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function oCt(t){}function D6e(t){return()=>t}function aCt(t){return t}var dl;let j6e=(dl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*dl._m}getInt(){return this._seed=(dl._a*this._seed+dl._c)%dl._m,this._seed}getFloat(){return this.getInt()/(dl._m-1)}getIntRange(e,n){return Math.round(this.getFloatRange(e,n))}getFloatRange(e,n){const r=n-e;return e+this.getInt()/dl._m*r}},dl._m=2147483647,dl._a=48271,dl._c=0,dl);const F6e=1.5,lCt=1/F6e,cCt=.5;function Pfe(t){return t}function $6e(t,e=Pfe){if(!t||t.length===0)return;let n=t[0],r=e(n);for(let i=1;i<t.length;++i){const s=t[i],o=Number(e(s));o>r&&(r=o,n=s)}return n}function uCt(t,e=Pfe){return $6e(t,n=>-e(n))}function hCt(t,e){return e?t.filter((n,r,i)=>i.findIndex(e.bind(null,n))===r):Array.from(new Set(t))}function V6e(t,e,n,r,i,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),i=Math.max(0,i),n=Math.max(0,n<0?(t?.length??0)+n:n),s=Math.max(0,s<0?(r?.length??0)+s:s);const a=n-e;if(t==null||r==null||a!==s-i)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[i+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[i+l])return!1;return!0}function $L(t,e,n){return V6e(t,0,t?.length??0,e,0,e?.length??0,n)}function dCt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}function lee(t,e,n){let r,i;return n?(r=e.filter(s=>!t.some(o=>n(o,s))),i=t.filter(s=>!e.some(o=>n(o,s)))):(r=e.filter(s=>!t.includes(s)),i=t.filter(s=>!e.includes(s))),{added:r,removed:i}}function fCt(t){return t&&typeof t.length=="number"}function pCt(t,e){const n=t.length;if(n===0)return[];const r=[];for(let i=0;i<n;i+=e)r.push(t.slice(i,i+e));return r}let Rfe=class{constructor(){this.last=0}};const Mfe=new Rfe;function l9(t,e,n,r){r=r||Mfe;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function c9(t,e,n,r){const i=t.length,s=l9(t,e,i,r);if(s!==-1)return t[s]=t[i-1],t.pop(),e}const Lu=new Set;function z6e(t,e,n=t.length,r=e.length,i,s){if(r===0||n===0)return n;Lu.clear();for(let a=0;a<r;++a)Lu.add(e[a]);i=i||Mfe;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(Lu.has(t[a])&&(s?.push(t[a]),Lu.delete(t[a]),t[a]=t[n-1],--n,--a,Lu.size===0||n===0))return Lu.clear(),n;for(let a=0;a<o;++a)if(Lu.has(t[a])&&(s?.push(t[a]),Lu.delete(t[a]),t[a]=t[n-1],--n,--a,Lu.size===0||n===0))return Lu.clear(),n;return Lu.clear(),n}function G6e(t,e){let n=0;for(let r=0;r<t.length;++r){const i=t[r];e(i,r)&&(t[n]=i,n++)}return t.length=n,t}function gCt(t,e,n){const r=t.length;if(e>=r)return t.slice();const i=Nfe(n),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(i()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function Nfe(t){return t?(cee.seed=t,()=>cee.getFloat()):Math.random}const cee=new j6e;function yCt(t,e){if(!t)return t;const n=Nfe(e);for(let r=t.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=t[r];t[r]=t[i],t[i]=s}return t}function Lfe(t,e){const n=t.indexOf(e);return n!==-1?(t.splice(n,1),e):null}function C2(t,e){return t!=null}const vCt=[];function _Ct(t){return t instanceof ArrayBuffer}function SB(t){return t?.constructor?.name==="Int8Array"}function Ofe(t){return t?.constructor?.name==="Uint8Array"}function Dfe(t){return t?.constructor?.name==="Uint8ClampedArray"}function TB(t){return t?.constructor?.name==="Int16Array"}function jfe(t){return t?.constructor?.name==="Uint16Array"}function kB(t){return t?.constructor?.name==="Int32Array"}function Ffe(t){return t?.constructor?.name==="Uint32Array"}function U6e(t){return t?.constructor?.name==="Float16Array"}function VL(t){return t?.constructor?.name==="Float32Array"}function zL(t){return t?.constructor?.name==="Float64Array"}function B6e(t){return"buffer"in t}const $fe=1024;function xCt(t){return zL(t)||VL(t)||kB(t)||TB(t)||SB(t)}function wCt(t){return zL(t)||VL(t)}function bCt(t){return zL(t)?179769e303:U6e(t)?65504:VL(t)?3402823e32:Ffe(t)?4294967295:jfe(t)?65535:Ofe(t)||Dfe(t)?255:kB(t)?2147483647:TB(t)?32767:SB(t)?127:256}const ECt=-32768,SCt=-2147483648;function TCt(t){return t}function W6e(t,e){let n;for(n in t)t.hasOwnProperty(n)&&t[n]===void 0&&delete t[n];return t}function et(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Gfe(t);if(e!=null)return e;if(kT(t))return t.clone();if(Vfe(t))return t.map(et);if(zfe(t))throw new Error("Trying to clone an unclonable Accessor instance");const n={};for(const r of Object.getOwnPropertyNames(t))n[r]=et(t[r]);return n}function u9(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const n=Gfe(t);if(n!=null)return n;if(Vfe(t)){let i=!0;const s=t.map(o=>{const a=u9(o,e);return o!=null&&a==null&&(i=!1),a});return i?s:null}if(kT(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(zfe(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const i of Object.getOwnPropertyNames(t)){const s=t[i],o=u9(s);if(s!=null&&o==null)return null;r[i]=o}return r}function kT(t){return typeof t.clone=="function"}function Vfe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function zfe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function uee(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Gfe(t){if(SB(t)||Ofe(t)||Dfe(t)||TB(t)||jfe(t)||kB(t)||Ffe(t)||VL(t)||zL(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[n,r]of t)e.set(n,et(r));return e}if(t instanceof Set){const e=new Set;for(const n of t)e.add(et(n));return e}return null}function AB(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function Ufe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&$L(t,e):t instanceof Set?e instanceof Set&&q6e(t,e):t instanceof Map?e instanceof Map&&K6e(t,e):!!uee(t)&&uee(e)&&H6e(t,e))}function H6e(t,e){if(t===null||e===null)return!1;const n=Object.keys(t);if(e===null||Object.keys(e).length!==n.length)return!1;for(const r of n)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function q6e(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function K6e(t,e){if(t.size!==e.size)return!1;for(const[n,r]of t){const i=e.get(n);if(i!==r||i===void 0&&!e.has(n))return!1}return!0}function Y6e(t,e,n=!1){return Wfe(t,e,n)}function GL(t,e){if(e!=null)return e[t]||Bfe(t.split("."),!1,e)}function vb(t,e,n){const r=t.split("."),i=r.pop(),s=Bfe(r,!0,n);s&&i&&(s[i]=e)}function hee(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const n=e;if(t.length!==n.length)return!0;for(let r=0;r<t.length;r++)if(hee(t[r],n[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(hee(t[n],e[n]))return!0;return!1}return t!==e}function Bfe(t,e,n){let r=n;for(const i of t){if(r==null)return;if(!(i in r)){if(!e)return;r[i]={}}r=r[i]}return r}function Wfe(t,e,n){return e?Object.keys(e).reduce((r,i)=>{if(i==="__proto__")return r;let s=r[i],o=e[i];return s===o?r:s===void 0?(r[i]=et(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.slice():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.slice())):o&&typeof o=="object"?r[i]=Wfe(s,o,n):r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[i]=o),r)},t||{}):t}function kCt(t,e){for(const n of Object.entries(t))if(e===n[1])return n[0]}function UL(t,e){return Object.values(t).includes(e)}const nr={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Y6e(nr,globalThis.esriConfig,!0),delete nr.has),!nr.assetsPath){{const t="4.34";nr.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}nr.defaultAssetsPath=nr.assetsPath}const X6e=/\{([^}]+)\}/g;function dee(t){return t??""}function Hfe(t,e){return e?t.replaceAll(X6e,typeof e=="object"?(n,r)=>dee(GL(r,e)):(n,r)=>dee(e(r))):t}function ACt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,n=>e?.includes(n)?n:`\\${n}`)}function qfe(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}let fee;function CCt(t){return fee??=new DOMParser,fee.parseFromString(t||"","text/html").body.innerText||""}function ICt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function PCt(t,...e){let n=t[0];for(let r=0;r<e.length;++r)n+=e[r]+t[r+1];return n}const pee={info:0,warn:1,error:2,none:3};var hs;let kt=(hs=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,hs._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=hs.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,hs._loggers.get(e)||new hs({module:e})}_log(e,n,...r){if(this._matchLevel(e)){if(n!=="always"&&!hs._throttlingDisabled){const i=J6e(r),s=this._loggedMessages[e].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=hs._tickCounter)return;this._loggedMessages[e].set(i,hs._tickCounter),hs._scheduleTickCounterIncrement()}for(const i of nr.log.interceptors)if(i(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,n){let r=this;for(;r!=null;){const i=r[e];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",Z6e)}_matchLevel(e){const n=nr.log.level||"warn";return pee[this._parentWithMember("level",n)]<=pee[e]}static _scheduleTickCounterIncrement(){hs._tickCounterScheduled||(hs._tickCounterScheduled=!0,Promise.resolve().then(()=>{hs._tickCounter++,hs._tickCounterScheduled=!1}))}},hs._loggers=new Map,hs._tickCounter=0,hs._tickCounterScheduled=!1,hs._throttlingDisabled=!1,hs);function Z6e(t,e,...n){console[t](`[${e}]`,...n)}function J6e(...t){return qfe(JSON.stringify(t,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function Q6e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(n,r)=>r===""?"$":(GL(r,e)??"").toString())}let Kfe=class{constructor(e,n,r=void 0){this.name=e,this.details=r,this.message=(n&&Q6e(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Qe=class Yfe extends Kfe{constructor(e,n,r){super(e,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return et(n)}catch{return"[object]"}}))}}catch(e){throw kt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Yfe(e.name,e.message,e.details)}};Qe.prototype.type="error";function q4(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const eje=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,tje={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function mee(t){const e=t?.match(eje);if(!e)return null;const[,n,r,i]=e;if(!n)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=tje;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function Xfe(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function Zfe(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):n.test(t)?t=t.replace(n,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Jfe(t){const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}function nje(t){const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}const rje=()=>kt.getLogger("esri.core.urlUtils"),_b=nr.request,gee="esri/config: esriConfig.request.proxyUrl is not set.",Qfe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,epe=/^\s*http:/i,ije=/^\s*https:/i,sje=/^\s*file:/i,tpe=/:\d+$/,oje=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,aje=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),lje=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let uw=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(aje);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(lje),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const HP={},cje=new uw(nr.applicationUrl);let ha=cje;const uje=hje();let CB=uje;const IB=()=>ha,NCt=()=>CB;function hje(){const t=ha.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ha.scheme}://${ha.host}${ha.port!=null?`:${ha.port}`:""}`}${e}`}function Ha(t){if(!t)return null;const e={path:null,query:null},n=new uw(t),r=t.indexOf("?");return n.query===null?e.path=t:(e.path=t.slice(0,r),e.query=PB(n.query)),n.fragment&&(e.hash=n.fragment,n.query===null&&(e.path=e.path.slice(0,e.path.length-(n.fragment.length+1)))),e}function PB(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function eA(t,e){return t?Object.keys(t).map(n=>{const r=t[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=e?.[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>q4(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):q4(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function npe(t=!1){let e,n=_b.proxyUrl;if(typeof t=="string"){e=vje(t);const r=BL(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw rje().warn(gee),new Qe("urlUtils:proxy-not-set",gee);return e&&d9()&&(n=OB(n)),Ha(n)}function LCt(t,e=!1){const n=BL(t);let r,i;if(n){const s=RB(n.proxyUrl);r=s.path,i=s.query?PB(s.query):null}else if(e){const s=npe(t);r=s.path,i=s.query}if(r){const s=Ha(t);t=r+"?"+s.path;const o=eA({...i,...s.query});o&&(t=`${t}?${o}`)}return t}const zE={path:"",query:""};function RB(t){const e=t.indexOf("?");return e!==-1?(zE.path=t.slice(0,e),zE.query=t.slice(e+1)):(zE.path=t,zE.query=null),zE}function rpe(t){return t=(t=Y4(t=Eje(t=RB(t).path),!0)).toLowerCase()}function dje(t){const e={proxyUrl:t.proxyUrl,urlPrefix:rpe(t.urlPrefix)},n=_b.proxyRules,r=e.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;i=s;break}o.startsWith(r)&&(i=s+1)}return n.splice(i,0,e),i}function BL(t){const e=_b.proxyRules,n=rpe(t);for(let r=0;r<e.length;r++)if(n.startsWith(e[r].urlPrefix))return e[r]}function OCt(t,e){if(!t||!e)return!1;t=K4(t),e=K4(e);const n=mee(t),r=mee(e);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&U1(t,e,!0)}function fje(t,e){return t=K4(t),e=K4(e),Y4(t)===Y4(e)}function K4(t){const e=(t=Rg(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function h9(t,e=_b.interceptors){const n=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function U1(t,e,n=!1){if(!t||!e)return!1;const r=p9(t),i=p9(e);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function MB(t){if(typeof t=="string"){if(!kl(t))return!0;t=p9(t)}if(U1(t,ha))return!0;const e=_b.trustedServers||[];for(let n=0;n<e.length;n++){const r=pje(e[n]);for(let i=0;i<r.length;i++)if(U1(t,r[i]))return!0}return!1}function pje(t){return HP[t]||(LB(t)||Vd(t)?HP[t]=[new uw(iu(t))]:HP[t]=[new uw(`http://${t}`),new uw(`https://${t}`)]),HP[t]}function iu(t,e=CB,n){return Vd(t)?n?.preserveProtocolRelative?t:ha.scheme==="http"&&ha.authority===yc(t).slice(2)?`http:${t}`:`https:${t}`:LB(t)?t:TC(t.startsWith("/")?bje(e):e,t)}function NB(t,e=CB,n){if(t==null||!kl(t))return t;const r=Rg(t),i=r.toLowerCase(),s=Rg(e).toLowerCase().replace(/\/+$/,""),o=n?Rg(n).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const a=(h,f,g)=>(g=h.indexOf(f,g))===-1?h.length:g;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let h=0;h<u;h++)t=`../${t}`;else t=`./${t}`;return t}function Rg(t){return t=kje(t=Tje(t=Sje(t=iu(t=t.trim()))))}function TC(...t){const e=t.filter(C2);if(!e?.length)return;const n=[];if(kl(e[0])){const i=e[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),xje(e[0])&&(n[0]+="/"),e[0]=i.slice(s+2))}else e[0].startsWith("/")&&n.push("");const r=e.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function yc(t,e=!1){if(t==null||kC(t)||_v(t))return null;let n=t.indexOf("://");if(n===-1&&Vd(t))n=2;else{if(n===-1)return null;n+=3}const r=t.indexOf("/",n);return r!==-1&&(t=t.slice(0,r)),e&&(t=Y4(t,!0)),t}function kl(t){return Vd(t)||LB(t)}function kC(t){return t!=null&&t.startsWith("blob:")}function _v(t){return t!=null&&t.startsWith("data:")}function mje(t){const e=I2(t);return e?.isBase64?Jfe(e.data):null}function DCt(t){return nje(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const gje=/^data:(.*?)(;base64)?,(.*)$/;function I2(t){const e=t.match(gje);if(!e)return null;const[,n,r,i]=e;return{mediaType:n,isBase64:!!r,data:i}}function ipe(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function yje(t){return(await fetch(t)).blob()}function jCt(t){const e=mje(t);if(!e)return null;const n=I2(t);return new Blob([e],{type:n.mediaType})}function Vd(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function LB(t){return t!=null&&Qfe.test(t)}function vje(t){return t!=null&&ije.test(t)||ha.scheme==="https"&&Vd(t)}function _je(t){return t!=null&&epe.test(t)||ha.scheme==="http"&&Vd(t)}function xje(t){return t!=null&&sje.test(t)}function OB(t){return Vd(t)?`https:${t}`:t.replace(epe,"https:")}function wje(){return ha.scheme==="http"}function d9(){return ha.scheme==="https"}function Y4(t,e=!1){return Vd(t)?t.slice(2):(t=t.replace(Qfe,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function bje(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return n===-1?t:t.slice(0,n)}function FCt(t){let e=0;if(kl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function $Ct(t,e){if(!t)return"";const n=Ha(t).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!e?.length)return r;const i=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(i,"")}function Eje(t){return t.endsWith("/")?t:`${t}/`}function spe(t){return t.replace(/\/+$/,"")}function Sje(t){if(/^https?:\/\//i.test(t)){const e=RB(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function Tje(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function kje(t){const e=_b.httpsDomains;if(!_je(t))return t;const n=t.indexOf("/",7);let r;if(r=n===-1?t:t.slice(0,n),r=r.toLowerCase().slice(7),tpe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return wje()&&r===ha.authority&&!oje.test(t)||(d9()&&r===ha.authority||e&&e.some(i=>r===i||r.endsWith(`.${i}`))||d9()&&!BL(t))&&(t=OB(t)),t}function f9(t,e,n){if(!(e&&n&&t&&kl(t)))return t;const r=t.indexOf("//"),i=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(i<0?t.length:i,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${n}${t.slice(o)}`}function Aje(t,e){const n=new URL(t);return n.host=e,n.port&&!tpe.test(e)&&(n.port=""),n.toString()}function VCt(t){return new URL(t).host}function p9(t){return typeof t=="string"?new uw(iu(t)):(t.scheme||(t.scheme=ha.scheme),t)}function zCt(t){return Ije.test(t)}function ope(t,e){const n=Ha(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function Cje(t,e,n){const r=Ha(t),i=r.query||{};return i[e]=String(n),`${r.path}?${eA(i)}`}function jj(t,e){if(!e)return t;const n=Ha(t),r=n.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const i=eA(r);return i?`${n.path}?${i}`:n.path}function ape(t){if(t==null)return null;const e=t.match(lpe);return e?e[2]:null}function yee(t){if(t==null)return null;const e=t.match(lpe);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function GCt(t){return typeof t=="string"?I2(t)??{data:t}:new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(I2(r.result)),r.onerror=i=>n(i)})}const lpe=/([^.]*)\.([^/]*)$/,Ije=/(^data:image\/svg|\.svg$)/i,cpe="20251114",upe="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const Pje="4.34";let Zr,DB=Pje;function UCt(t){Zr=t}function BCt(t){const e=Zr?.findCredential(t);return e?.token?Cje(t,"token",e.token):t}DB="4.34.8",_e("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),_e("host-webworker");function Rje(t,e){for(const n of t.values())if(e(n))return!0;return!1}function WCt(t,e){for(const n of t.values())if(!e(n))return!1;return!0}function HCt(t,e){for(const n of t.values())if(e(n))return n;return null}function AC(t,e,n){const r=t.get(e);if(r!==void 0)return r;const i=n();return t.set(e,i),i}function qCt(t){const e=new Map;return n=>(e.has(n)||e.set(n,t(n)),e.get(n))}const Mje={remove:()=>{}};function Zn(t){return t?{remove(){t&&(t(),t=void 0)}}:Mje}function hpe(t){t.forEach(e=>e?.remove())}function KCt(t){hpe(t),t.length=0}function xv(t){return Zn(()=>hpe(t))}function YCt(t){return Zn(()=>t()?.remove())}function Nje(t){return Zn(()=>t?.abort())}function XCt(t){return Zn(t!=null?()=>t.destroy():void 0)}function Lje(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function ZCt(t){Lje(t)&&t.remove()}function JCt(t){return{[Symbol.dispose](){t.remove()}}}function Oje(t){return{setTimeout:(e,n)=>{const r=t.setTimeout(e,n);return Zn(()=>t.clearTimeout(r))}}}const xb=Oje(globalThis);function WL(t){return Dje(t)||dpe(t)}function Dje(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function dpe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function wb(t,e,n){if(!WL(t))throw new TypeError("target is not a Evented or EventTarget object");return dpe(t)?jje(t,e,n):t.on(e,n)}function jje(t,e,n,r){if(Array.isArray(e)){const i=e.slice();for(const s of i)t.addEventListener(s,n,r);return Zn(()=>{for(const s of i)t.removeEventListener(s,n,r)})}return t.addEventListener(e,n,r),Zn(()=>t.removeEventListener(e,n,r))}function fpe(t,e,n){if(!WL(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,n);const r=wb(t,e,i=>{r.remove(),n.call(t,i)});return r}function ppe(t,e){if(t==null)throw new Error(e??"value is None")}function Di(t){return t?.destroy(),null}function QCt(t){return t?.dispose(),null}function ii(t){return t?.remove(),null}function B1(t){return t?.abort(),null}function eIt(t){return t?.release(),null}function tIt(t,e,n){return t!=null&&e!=null?n!=null?n(t,e):t.equals(e):t===e}function Fje(t,e){let n;return t.some((r,i)=>(n=e(r,i),n!=null)),n??void 0}function Pr(t="Aborted"){return new Qe("AbortError",t)}function gi(t,e="Aborted"){if(va(t))throw Pr(e)}function CC(t){return t instanceof AbortSignal?t:t?.signal??void 0}function va(t){const e=CC(t);return e!=null&&e.aborted}function mpe(t){if(Sa(t))throw t}function vee(t){if(!Sa(t))throw t}function vu(t,e){const n=CC(t);if(n!=null){if(!n.aborted)return fpe(n,"abort",()=>e());e()}}function jB(t,e){const n=CC(t);if(n!=null)return gi(n),fpe(n,"abort",()=>e(Pr()))}function $je(t,e){return CC(e)==null?t:new Promise((n,r)=>{let i=vu(e,()=>r(Pr()));const s=()=>{i=ii(i)};t.then(s,s),t.then(n,r)})}function Sa(t){return t?.name==="AbortError"}async function X4(t){try{return await t}catch(e){if(!Sa(e))throw e;return}}async function FB(t){if(!t)return;if(typeof t.forEach!="function"){const n=Object.keys(t),r=n.map(o=>t[o]),i=await FB(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const e=t;return Promise.allSettled(e).then(n=>Array.from(e,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function Vje(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function nIt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function gpe(t,e=void 0,n){const r=new AbortController;return vu(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(e)},t);vu(r,()=>{o&&(clearTimeout(o),s(Pr()))})})}function rIt(t,e,n,r){const i=n&&"abort"in n?n:null;r!=null||i||(r=n);let s=setTimeout(()=>{s=0,i?.abort()},e);const o=()=>r||new Qe("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function zje(t,e){const n=new AbortController,r=setTimeout(()=>n.abort(),e);return vu(t,()=>{n.abort(),clearTimeout(r)}),{...t,signal:n.signal}}function _a(t){return t&&typeof t.then=="function"}function m9(t){return _a(t)?t:Promise.resolve(t)}function Gje(t,e=-1){let n,r,i,s,o=null;const a=(...l)=>{if(n){r=l,s&&s.reject(Pr()),s=Ec();const f=s.promise;if(o){const g=o;o=null,g.abort()}return f}if(i=s||Ec(),s=null,e>0){const f=new AbortController;n=m9(t(...l,f.signal));const g=n;gpe(e).then(()=>{n===g&&(s?f.abort():o=f)})}else n=1,n=m9(t(...l));const c=()=>{const f=r;r=i=n=o=null,f!=null&&a(...f)},u=n,h=i;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function Ec(){let t,e;const n=new Promise((i,s)=>{t=i,e=s}),r=i=>{t(i)};return r.resolve=i=>t(i),r.reject=i=>e(i),r.timeout=(i,s)=>xb.setTimeout(()=>r.reject(s),i),r.promise=n,r}function iIt(t,e){e.then(t.resolve,t.reject)}async function _ee(t){await Promise.resolve(),gi(t)}function bb(t,e){const n=e?.url?.path;if(t&&n&&(t=iu(t,n,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=NB(t,e.portalItem.itemUrl);r!=null&&r.startsWith(Uje)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=g9(t,e?.portal))&&qL.test(t)?$B(t):t}function P2(t,e,n=0){if((t=t&&qL.test(t)?xpe(t):t)==null)return t;!kl(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=iu(t);if(e){const i=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(i){const s=g9(i,e.portal),o=g9(r,e.portal);r=NB(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=_pe(r,e?.portal),kl(r)&&(r=Rg(r)),e?.resources&&e?.portalItem&&!kl(r)&&!_v(r)&&n===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function HL(t,e,n){return bb(t,n)}function R2(t,e,n,r){const i=P2(t,r);i!==void 0&&(e[n]=i)}const qL=/\/items\/([^/]+)\/resources\/(.*)/,Uje="./resources/";function ype(t){return(t?.match(qL)??null)?.[1]??null}function vpe(t){const e=t?.match(qL)??null;if(e==null)return null;const n=e[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=yee(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=yee(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function _pe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?f9(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function g9(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const n=`${e.urlKey}.${e.customBaseUrl}`,r=IB();return U1(r,`${r.scheme}://${n}`)?f9(t,e.portalHostname,n):f9(t,n,e.portalHostname)}function $B(t){if(!t)return t||null;let e=t;return e&&Zr&&!Zr.findCredential(e)&&(e=Zfe(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function xpe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Zr&&!Zr.findCredential(e)&&(e=Zfe(e)),e}const Bje=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:_pe,fromCDNUrl:xpe,fromJSON:bb,itemIdFromResourceUrl:ype,prefixAndFilenameFromResourceUrl:vpe,read:HL,toCDNUrl:$B,toJSON:P2,write:R2},Symbol.toStringTag,{value:"Module"})),wpe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},bpe=Object.values(wpe),Epe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${bpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Wje=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${bpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Hje=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function sIt(t){return Epe.test(t)}function IC(t){if(t==null)return null;const e=Ha(t),n=e?.path.match(Epe)||e?.path.match(Wje);if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:Spe(a!==-1?i.slice(a+1):i),serverType:wpe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function qje(t){const e=Ha(t).path.match(Hje);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function Spe(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function oIt(t,e){const n=[];if(t){const r=IC(t);r!=null&&r.title&&n.push(r.title)}if(e){const r=Spe(e);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function xee(t){let e=yc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function aIt(t,e){return t&&spe(ope(t,e))}function lIt(t){let{url:e}=t;if(!e)return{url:e};e=ope(e,t.logger);const n=Ha(e),r=IC(n.path);let i;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(i=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=qje(n.path);s!=null&&(e=s.serviceUrl,i=s.sublayerId)}return{url:spe(e),layerId:i}}function cIt(t,e,n,r,i){R2(e,r,"url",i),r.url&&t.layerId!=null&&(r.url=TC(r.url,n,t.layerId.toString()))}function uIt(t){if(!t)return!1;const e=t.toLowerCase(),n=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),i=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return n&&(r||i||s)}const Kje=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function VB(t){if(!zB(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),n=nr.apiKeys;if(Array.isArray(n.scopes)){for(const r of n.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return n.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?n.basemapStyles:nr.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?nr.apiKey:null}function y9(){return nr.apiKey!=null||nr.apiKeys.basemapStyles!=null}function Yje(t,e){return e?zB(t):VB(t)!=null}function zB(t){const e=yc(t,!0);return!!e&&!Kje.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function Xje(t,e,n=!1,r){return new Promise((i,s)=>{if(va(r))return void s(wee());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=async()=>{const u=t;try{await u.decode()}catch{}c(),i(u)},l=()=>{if(!t)return;const u=t;c(),u.src="",s(wee())};const c=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",o),t.addEventListener("load",a)})}function wee(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Tpe="Timeout exceeded";function Zje(){return new Error(Tpe)}function hIt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Tpe}function Jje(t){nr.request.crossOriginNoCorsDomains||(nr.request.crossOriginNoCorsDomains={});const e=nr.request.crossOriginNoCorsDomains;for(let n of t)n=n.toLowerCase(),/^https?:\/\//.test(n)?e[yc(n)??""]=0:(e[yc("http://"+n)??""]=0,e[yc("https://"+n)??""]=0)}function Qje(t){const e=nr.request.crossOriginNoCorsDomains;if(e){let n=yc(t);if(n)return n=n.toLowerCase(),!U1(n,IB())&&e[n]<Date.now()-36e5}return!1}async function eFe(t){const e=Ha(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const n=nr.request.crossOriginNoCorsDomains,r=yc(t);n&&r&&(n[r.toLowerCase()]=Date.now())}const v9=new Map;function tFe(t,e){const n=e?.preferredHost;if(!n||U1(t,`https://${n}`,!0))return;const r=IC(t);if(!r||r.serverType!=="FeatureServer"||Xfe(t))return;const i=r.url.path.toLowerCase();v9.has(i)||v9.set(i,n)}function bee(t){const e=IC(t)?.url.path.toLowerCase();if(!e)return t;const n=v9.get(e);return n?Aje(t,n):t}async function rs(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=PB(e.query.toString().replaceAll("+"," ")));const n=_v(t),r=kC(t);r||n||(t=Rg(t));const i={url:t,requestOptions:{...e}},s=g=>({data:g,getAllHeaders:M2,getHeader:M2,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=h9(t,eu.internalInterceptors);if(o){const g=await See(o,i);if(g!=null)return s(g)}let a=h9(t);if(a){const g=await See(a,i);if(g!=null)return s(g);a.after||a.error||(a=null)}if(t=i.url,(e=i.requestOptions).responseType==="image"&&(_e("host-webworker")||_e("host-node")))throw mh("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(e.method==="head"){if(e.body)throw mh("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw mh("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await oFe(),Z4)return Z4.execute(t,e);const l=new AbortController,c=vu(e,()=>l.abort()),u={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:eu.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=e.useRequestQueue?hFe(u):x9(u),f=await h.finally(()=>c?.remove());return a?.after?.(f),f}let Z4,kpe=!1;const eu=nr.request,Ape="FormData"in globalThis,nFe=new Set([499,498,403,401]),rFe=new Set(["COM_0056","COM_0057","SB_0008"]),iFe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],M2=()=>null,J4=Symbol();function sFe(t){const e=yc(t);e&&!rs._corsServers.includes(e)&&rs._corsServers.push(e)}function Eee(t){const e=yc(t);return!e||e.endsWith(".arcgis.com")||rs._corsServers.includes(e)||MB(e)}function mh(t,e,n,r){let i;const s={url:n.url,requestOptions:n.requestOptions,getAllHeaders:M2,getHeader:M2,ssl:!1};if(e instanceof Qe)return e.details?(e.details=et(e.details),e.details.url=n.url,e.details.requestOptions=n.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(u=>r.headers.get(u)),l=r?.status,c=e.message;c&&(i=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],i??=e.details):(s.messages=e.details,i??=s.messages?.[0]),s.raw=J4 in e?e[J4]:e}return i??="Error",Sa(e)?Pr():new Qe(t,i,s)}async function oFe(){_e("host-webworker")&&(!Z4&&globalThis.invokeStaticMessage?Z4=await ge(()=>import("./request-MFUmUy6O.js"),[]):kpe=!0)}async function _9(){Zr||await ge(()=>import("./IdentityManager-DiKupks4.js"),__vite__mapDeps([19,20]))}async function aFe(t){const e=t.params.url,n=t.params.requestOptions,r=t.controller.signal,i=n.body;let s=null,o=null;if(Ape&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),t.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},keepalive:n.keepAlive??!1,method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:eu.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(kpe||n.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||n.query?.token||s?.get("token")),!t.hasToken){const a=VB(e);a&&(n.query??={},n.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!Cpe(e)&&!va(r)){let a;n.authMode==="immediate"?(await _9(),a=await Zr.getCredential(e,{signal:r})):n.authMode==="no-prompt"?(await _9(),a=await Zr.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Zr&&(a=Zr.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function Cpe(t){return iFe.some(e=>e.test(t))}async function lFe(t){let e=t.params.url,n=bee(e);const r=t.params.requestOptions,i=t.fetchOptions??{},s=kC(e)||_v(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:eu.timeout;let l=!1;if(!s){t.useSSL&&(e=OB(e));let g={...r.query};t.credentialToken&&(g.token=t.credentialToken);let y=eA(g);_e("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const _=n.length+1+y.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>eu.maxUrlLength;const T=r.useProxy||!!BL(e);if(T){const A=npe(e);b=A.path,!l&&b.length+1+_>eu.maxUrlLength&&(l=!0),A.query&&(g={...A.query,...g})}if(i.method==="HEAD"&&(l||T)){if(l)throw _>eu.maxUrlLength?mh("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):mh("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(T)throw mh("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=jj(e,g):(i.body=eA(g),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):e=jj(e,g),T&&(t.useProxy=!0,e=`${b}?${e}`),g.token&&Ape&&i.body instanceof FormData&&!Xfe(e)&&i.body.set("token",g.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:U1(e,IB())||(MB(e)||Zr&&Zr.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include",Qje(e)&&await eFe(l?jj(e,g):e)),n=bee(e)}let c,u,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")u=i,u.url=n,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.keepalive||i.method!=="GET"||l||cFe(r.headers)||!s&&!t.useProxy&&eu.proxyUrl&&!Eee(e)){if(rs._beforeFetch&&await rs._beforeFetch(e,i),c=await fetch(n,i),rs._afterFetch&&await rs._afterFetch(c),t.useProxy||sFe(e),r.responseType==="native")u=c;else if(i.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":u=await c.arrayBuffer();break;case"blob":case"image":u=await c.blob();break;default:u=await c.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=Tee(u,"application/xml");break;case"document":u=Tee(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const g=c.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&u[o==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(u).json();y.error&&(u=y)}catch{}}o==="image"&&u instanceof Blob&&(u=await kee(URL.createObjectURL(u),t,!0))}}else{u=await c.text();try{u=JSON.parse(u)}catch{}}}else u=await kee(n,t)}catch(g){if(g.name==="AbortError")throw f?Zje():Pr("Request canceled");if(!(!c&&g instanceof TypeError&&eu.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||Eee(e))throw g;t.redoRequest=!0,dje({proxyUrl:eu.proxyUrl,urlPrefix:yc(e)??""})}finally{h&&clearTimeout(h)}return[c,u]}async function See(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let n,r;try{r=await t.before(e)}catch(i){n=mh("request:interceptor",i,e)}if((r instanceof Error||r instanceof Qe)&&(n=mh("request:interceptor",r,e)),n)throw t.error&&t.error(n),n;return r}}function cFe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function Tee(t,e){let n;try{n=new DOMParser().parseFromString(t,e)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}rs._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],rs._beforeFetch=void 0,rs._afterFetch=void 0;const uFe=new Map;async function hFe(t){const e=fFe(t.params.url);if(!e)return x9(t);const{QueueProcessor:n}=await ge(()=>import("./QueueProcessor-Cs0c1rLm.js"),[]);return AC(uFe,e.origin,()=>{const i=e.isHosted?_e("request-queue-concurrency-hosted"):_e("request-queue-concurrency-non-hosted");return new n({concurrency:i,process:s=>{if(va(s.params.requestOptions))throw mh("",Pr("Request canceled"),s.params);return x9(s)}})}).push(t)}async function x9(t){let e,n;await aFe(t);try{do[e,n]=await lFe(t);while(!await dFe(t,e,n))}catch(s){const o=mh("request:server",s,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(n)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&n.user?.username&&!MB(r)){const s=yc(r,!0);s&&eu.trustedServers.push(s)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&Jje(n.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&tFe(r,n);const i=t.credential;if(i&&Zr){let o=Zr.findServerInfo(i.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=Zr.findCredential(o,i.userId);a&&Zr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:n,getAllHeaders:e?()=>Array.from(e.headers):M2,getHeader:e?s=>e.headers.get(s):M2,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function dFe(t,e,n){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error&&typeof n.error=="object"?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[J4]=n,i.details=n.messages)),!i&&!e.ok)throw i=new Error(`Unable to load ${e.url} status: ${e.status}`),i[J4]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());const l=r.authMode;if(s===403&&(a===4||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&nFe.has(s)&&!Cpe(t.params.url)&&(s!==403||(!o||!rFe.has(o))&&(a==null||a===2&&t.credentialToken))){await _9();try{const c=await Zr.getCredential(t.params.url,{error:mh("request:server",i,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;i=c}}if(i)throw i;return!0}function kee(t,e,n=!1){const r=e.controller.signal,i=new Image;return e.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=eu.priority,i.src=t,Xje(i,t,n,r)}function fFe(t){let e,n;return typeof t=="string"?(e=yc(t,!0),n=xee(t)):(e=t.origin,n=xee(t.toString())),e==null?null:{origin:e,isHosted:n}}function pFe(t){return t?.release&&typeof t.release=="function"}function mFe(t){return t?.acquire&&typeof t.acquire=="function"}var jg;let Eb=(jg=class{constructor(e,n,r,i=1,s=0){this._creator=e,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){let n;if(jg.test.disabled)n=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=this._creator()}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...e):mFe(n)&&n.acquire(...e),n}release(e){e&&!jg.test.disabled&&(this._releaseFunction?this._releaseFunction(e):pFe(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let n=e;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},jg.test={disabled:!!_e("esri-tests-disable-memory-pools")},jg);function gFe(t){t.length=0}let Da=class{constructor(e=50,n=50){this._pool=new Eb(()=>[],void 0,gFe,n,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Fj.acquire()}static release(e){return Fj.release(e)}static prune(){Fj.prune()}};const Fj=new Da(100),Aee=new WeakMap;function yFe(t,e,n=!1){const r=` DEPRECATED - ${e}`;if(!n)return void t.warn(r);let i=Aee.get(t);i||(i=new Set,Aee.set(t,i)),i.has(e)||(i.add(e),t.warn(r))}const Q4="https://www.esriurl.com/";function vFe(t,e,n,r={}){_e("esri-deprecation-warnings")&&qg(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${Q4}${n}/`,`Esri's move to web components: ${Q4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function _Fe(t,e,n,r={}){_e("esri-deprecation-warnings")&&qg(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${Q4}${n}/`,`Esri's move to web components: ${Q4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function fIt(t,e,n={}){_e("esri-deprecation-warnings")&&qg(t,`Module: ${e}`,n)}function Ipe(t,e,n={}){if(_e("esri-deprecation-warnings")){const{moduleName:r}=n;qg(t,`Function: ${(r?r+"::":"")+e+"()"}`,n)}}function w9(t,e,n={}){if(_e("esri-deprecation-warnings")){const{moduleName:r}=n;qg(t,`Property: ${(r?r+"::":"")+e}`,n)}}function xFe(t,e,n={}){_e("esri-deprecation-warnings")&&qg(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...n})}function qg(t,e,n={}){if(_e("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),i&&(a+=`
	 Version: ${i}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;yFe(t,a,o)}}function pIt(t){const e=[];return function*(){yield*e;let n,r=e.length;for(;!(n=t.next()).done;)for(e.push(n.value),yield n.value;++r<e.length;)yield e[r]}}function wFe(t,e){for(const n of t)if(n!=null&&e(n))return n}function eN(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Sb=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(n=>{e+=n.length}),e}add(e,n){if(eN(e)){const r=this._getOrCreateGroup(n);for(const i of e)Iee(i)&&r.push(i)}else Iee(e)&&this._getOrCreateGroup(n).push(e);return this}forEach(e,n){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&n&&r.forEach(n)}}has(e){return this._groups.has(qP(e))}remove(e){if(typeof e!="string"&&eN(e)){for(const n of e)this.remove(n);return this}return this.has(e)?(Cee(this._getGroup(e)),this._groups.delete(qP(e)),this):this}removeAll(){return this._groups.forEach(Cee),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const n=[];return this._groups.set(qP(e),n),n}_getGroup(e){return this._groups.get(qP(e))}};function qP(t){return t||"_default_"}function Cee(t){for(const e of t)e instanceof Sb?e.removeAll():e.remove()}function Iee(t){return t!=null&&(!!t.remove||t instanceof Sb)}const Ppe=Symbol("Accessor-beforeDestroy");function Kg(t){return t.__accessor__??null}function bFe(t,e){return t?.metadata?.[e]!=null}function PM(t,e,n){return n?tN(t,e,{policy:n,path:""}):tN(t,e,null)}function tN(t,e,n){return e?Object.keys(e).reduce((r,i)=>{const s=i;if(s==="__proto__")return r;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=et(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(u=>{l.includes(u)||l.push(u)}));else if(c&&typeof c=="object")if(n){const u=n.path;n.path=o,r[s]=tN(l,c,n),n.path=u}else r[s]=tN(l,c,null);else r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[s]=c);return r},t||{}):t}function Rpe(t){return Array.isArray(t)?t:t.split(".")}function Pee(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function EFe(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...Pee(n));return e}return Pee(t)}function Mpe(t,e,n,r){const i=EFe(e);if(i.length!==1){const s=i.map(o=>r(t,o,n));return xv(s)}return r(t,i[0],n)}function Npe(t,e){const n=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}const r=Kg(e);return bFe(r,n)?r.get(n):e[n]}function Lpe(t,e,n){if(t==null)return t;const r=Npe(e[n],t);return!r&&n<e.length-1?void 0:n===e.length-1?r:Lpe(r,e,n+1)}function PC(t,e,n=0){return typeof e!="string"||e.includes(".")?Lpe(t,Rpe(e),n):Npe(e,t)}function wd(t,e){return PC(t,e)}function Ree(t,e){return PC(e,t)!==void 0}const oc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function Tb(t){let e=t.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!n){e=Object.create(e);for(const r in e)e[r]=et(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function RC(t,e){const n=Tb(t);let r=n[e];return r||(r=n[e]={}),r}function SFe(t,e){return PM(t,e,kFe)}const TFe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function kFe(t){return TFe.test(t)?"replace":"merge"}let AFe=class{constructor(e,n){this._observers=e,this._observer=n}remove(){Lfe(this._observers,this._observer)}},Ope=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return CFe;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===e){r=!0;break}}return r||(n.push(e),i&&this._removeDestroyedObservers()),new AFe(n,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const n=e.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&e[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;e[i]=e[i+r]}}e.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const n of e)n.onCommitted();this._observers=null}}};const CFe=Zn(),pi={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let KL=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const nN=new KL,ES=[];let AT=nN;function on(t){AT.onAccessed(t)}let RM=!1,MM=!1;function kp(t,e,n){if(RM)return GB(t,e,n);let r=null;return Dpe(t),r=e.call(n),jpe(),r}function IFe(t,e){return kp(nN,t,e)}function GB(t,e,n){const r=RM;RM=!0,Dpe(t);let i=null;try{i=e.call(n)}catch(s){MM&&kt.getLogger("esri.core.accessorSupport.tracking").error(s)}return jpe(),RM=r,i}function Dpe(t){AT=t,ES.push(t)}function jpe(){const t=ES.length;if(t>1){const e=ES.pop();AT=ES[t-2],e.onTrackingEnd()}else if(t===1){const e=ES.pop();AT=nN,e.onTrackingEnd()}else AT=nN}function Fpe(t,e){if(e.flags&pi.DepTrackingInitialized)return;e.flags|=pi.DepTrackingInitialized;const n=MM;MM=!1,e.flags&pi.AutoTracked?GB(e.trackingTarget,e.metadata.get,t):$pe(t,e),MM=n}const PFe=[];function $pe(t,e){e.flags&pi.ExplicitlyTracking||(e.flags|=pi.ExplicitlyTracking,GB(e.trackingTarget,()=>{const n=e.metadata.dependsOn||PFe;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=Rpe(r);for(let s=0,o=t;s<i.length&&o!=null&&typeof o=="object";++s)o=Mee(o,i[s],s!==i.length-1)}else Mee(t,r,!1)}),e.flags&=-129)}function Mee(t,e,n){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=Kg(t);if(i){const s=i.propertiesByName.get(r);s&&(on(s),Fpe(t,s))}return n?t[r]:void 0}let Nee=class extends Ope{constructor(e,n){super(),this.propertyName=e,this.metadata=n,this.trackingTarget=new KL(this),this.flags=0,this.flags=pi.Dirty|(n.nonNullable?pi.NonNullable:0)|(n.hasOwnProperty("value")?pi.HasDefaultValue:0)|(n.get===void 0?pi.DepTrackingInitialized:0)|(n.dependsOn===void 0?pi.AutoTracked:0)}destroy(){this.flags&pi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&on(this);const n=e.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&pi.Computing||~i&pi.Dirty&&n.has(r))return s;this.flags|=pi.Computing;const o=e.host;let a;i&pi.AutoTracked?a=kp(this.trackingTarget,this.metadata.get,o):($pe(o,this),a=this.metadata.get.call(o)),this.flags|=pi.DepTrackingInitialized,n.set(r,a,1);const l=n.get(r);return l===s?this.flags&=-2:IFe(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&pi.Overridden&&(this.flags|=pi.Dirty);const e=this._observers;if(e&&e.length>0)for(const n of e)n.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onCommitted()}}};const xIt=8;function UB(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function b9(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function RFe(t){return b9(t)}let MFe=class Vpe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new Vpe;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,et(r))}),n}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,n){this._values.set(e,n)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,n){return this.has(e)}isBelowOrigin(e,n){return!this.has(e)}forEach(e){this._values.forEach(e)}};function A_(t,e,n){return t!==void 0}function Lee(t,e,n,r){return t!==void 0&&(!(n==null&&t.flags&pi.NonNullable)||(r.lifecycle,!1))}let NFe=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=oc.INITIALIZING,this.store=new MFe,this.mutable=!0,this._origin=7;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new Nee(r,n[r]);this.propertiesByName.set(r,i)}this.metadata=n}initialize(){this.lifecycle=oc.CONSTRUCTING}constructed(){this.lifecycle=oc.CONSTRUCTED}destroy(){this.lifecycle=oc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==oc.INITIALIZING}get(e){const n=this.propertiesByName.get(e);if(!A_(n))return;if(n.metadata.get)return n.getComputed(this);this.mutable&&on(n);const r=this.store;return r.has(e)?r.get(e):n.metadata.value}originOf(e){const n=this.store.originOf(e);if(n===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&pi.HasDefaultValue)return"defaults"}return b9(n)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const n=this.propertiesByName.get(e);if(A_(n))return this.store.has(e)?this.store.get(e):n.metadata.value}internalSet(e,n){const r=this.propertiesByName.get(e);A_(r)&&this._internalSet(r,n)}getDependsInfo(e,n,r){const i=this.propertiesByName.get(n);if(!A_(i))return"";const s=new KL,o=kp(s,()=>i.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${n}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof Nee&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,n,r){const i=this.propertiesByName.get(e);if(A_(i))return this._setAtOrigin(i,n,r)}isOverridden(e){const n=this.propertiesByName.get(e);return n!==void 0&&!!(n.flags&pi.Overridden)}clearOrigin(e,n){const r=this.store,i=this.propertiesByName.get(e);if(!A_(i))return;const s=r.isAtOrigin(e,n)&&!(i.flags&pi.Overridden);r.delete(e,n),s&&i.notifyChange()}clearOverride(e){const n=this.propertiesByName.get(e);n&&n.flags&pi.Overridden&&(n.flags&=-3,n.notifyChange())}override(e,n){const r=this.propertiesByName.get(e);if(!Lee(r,e,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if($j.release(s),!o)return;n=a}r.flags|=pi.Overridden,this._internalSet(r,n)}set(e,n){const r=this.propertiesByName.get(e);if(!Lee(r,e,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:l}=o;if($j.release(o),!a)return;n=l}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(e){this._origin=UB(e)}getDefaultOrigin(){return b9(this._origin)}notifyChange(e){const n=this.propertiesByName.get(e);n!==void 0&&n.notifyChange()}invalidate(e){const n=this.propertiesByName.get(e);n!==void 0&&n.invalidate()}commit(e){const n=this.propertiesByName.get(e);n!==void 0&&n.commit()}_internalSet(e,n){const r=this.lifecycle!==oc.INITIALIZING?this._origin:0;this._setAtOrigin(e,n,r)}_setAtOrigin(e,n,r){const i=this.store,s=e.propertyName;if(i.isAtOrigin(s,r)&&AB(n,i.get(s))&&~e.flags&pi.Overridden)return;const o=i.isBelowOrigin(s,r)||i.isAtOrigin(s,r);o&&e.invalidate(),i.set(s,n,r),o&&e.commit(),Fpe(this.host,e)}_cast(e,n){const r=$j.acquire();return r.valid=!0,r.value=n,e&&(r.value=e.call(this.host,n,r)),r}},LFe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const $j=new Eb(()=>new LFe);function rN(t,e,n){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))rN(t,r,e[r]);else{if(e.includes(".")){const i=e.split("."),s=i.splice(-1,1)[0];return void rN(wd(t,i),s,n)}const r=t.__accessor__;r!=null&&OFe(e,r),t[e]=n}}function OFe(t,e){if(_e("esri-unknown-property-errors")&&!DFe(t,e))throw new Qe("set:unknown-property",jFe(t,e))}function DFe(t,e){return e.metadata[t]!=null}function jFe(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let FFe;function $Fe(){return FFe}let zpe=class extends Eb{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const n=super.acquire(...e);return this._set.delete(n),n}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const KP=[];function iN(t){KP.push(t),KP.length===1&&queueMicrotask(()=>{const e=KP.slice();KP.length=0;for(const n of e)n()})}let CT=class{constructor(e,n=30){this.name=e,this._counter=0,this._samples=new Array(n)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,n)=>e-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,n)=>e+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const sN=(t,e,n,r)=>{let i=e,s=e;const o=n>>>1,a=t[i-1];for(;s<=o;){s=i<<1,s<n&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,a)<=0)break;t[i-1]=l,i=s}t[i-1]=a},Gpe=(t,e)=>t<e?-1:t>e?1:0;function VFe(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Gpe);for(let s=n>>>1;s>e;s--)sN(t,s,n,r);const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,sN(t,i,s,r)}}function*zFe(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Gpe);for(let s=n>>>1;s>e;s--)sN(t,s,n,r),yield;const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,sN(t,i,s,r),yield}}const GFe=1.5,UFe=1.1;let Upe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Rfe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Oee(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];e(i)&&n.push(i)}return n}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,n){const r=this.data.indexOf(e,n);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let n=e;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,n=e.length){for(let r=0;r<n;r++)this.data[this._length++]=e[r]}fill(e,n){for(let r=0;r<n;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Oee(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const n=l9(this.data,e,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(l9(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,n=e.length,r){this.length=z6e(this.data,e,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,n){if(e>=this.length||n>=this.length||e===n)return;const r=this.data[e];this.data[e]=this.data[n],this.data[n]=r}sort(e){VFe(this.data,0,this.length,e)}iterableSort(e){return zFe(this.data,0,this.length,e)}some(e,n){for(let r=0;r<this.length;++r)if(e.call(n,this.data[r],r,this.data))return!0;return!1}find(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)if(e.call(n,r[s]))return r[s]}filterInPlace(e,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];e.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)e.call(n,r[s],s,r)}forEach(e,n){this.data.slice(0,this.length).forEach(e,n)}map(e,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=e.call(n,this.data[i],i,this.data);return r}reduce(e,n){let r=n;for(let i=0;i<this.length;++i)r=e(r,this.data[i],i,this.data);return r}has(e){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Oee(t){t.data.length>GFe*t.length&&(t.data.length=Math.floor(t.length*UFe))}function kIt(t){return t}function BFe(t){return 1e3*t}function AIt(t){return t}function CIt(t){return .001*t}let WFe=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},HFe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},E9=0;const GE={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},S9=["prepare","preRender","render","postRender","update","finish"],T9=[],W1=new Upe;let qFe=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Bpe()}};function KFe(){c1!=null&&(cancelAnimationFrame(c1),c1=requestAnimationFrame(BB))}function Bpe(){c1==null&&(E9=performance.now(),c1=requestAnimationFrame(BB))}const oN={frameTasks:W1,willDispatch:!1,clearFrameTasks:YFe,dispatch:Hpe,executeFrameTasks:XFe,reschedule:KFe};function kb(t){const e=new HFe(t);return T9.push(e),oN.willDispatch||(oN.willDispatch=!0,iN(Hpe)),e}function N2(t){const e=new WFe(t);return W1.push(e),Bpe(),new qFe(e)}let c1=null;function YFe(t=!1){W1.forAll(e=>{e.removed=!0}),t&&Wpe()}function BB(){const t=performance.now();c1=null,c1=W1.some(n=>!n.paused&&!n.removed)?requestAnimationFrame(BB):null,oN.executeFrameTasks(t)}function XFe(t){const e=t-E9;E9=t;const n=1e3/60,r=Math.max(0,e-n);GE.time=t,GE.frameDuration=n-r;for(let i=0;i<S9.length;i++){const s=performance.now(),o=S9[i];W1.forAll(a=>{a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(GE.elapsedFrameTime=performance.now()-t,GE.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,GE)))}),e$e[i].push(performance.now()-s)}Wpe(),t$e.push(performance.now()-t)}const YP=new Upe;function Wpe(){W1.forAll(t=>{t.removed&&YP.push(t)}),W1.removeUnorderedMany(YP.data,YP.length),YP.clear()}function Hpe(){for(;T9.length;){const t=T9.shift();t.isActive&&t.callback()}oN.willDispatch=!1}function ZFe(t=1,e){const n=Ec(),r=()=>{va(e)?n.reject(Pr()):t===0?n():(--t,iN(()=>r()))};return r(),n.promise}function JFe(t){return ZFe(1,t)}async function QFe(t){await JFe(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const e$e=S9.map(t=>new CT(t)),t$e=new CT("total");function qpe(t,e){for(const n of t.values())if(e(n))return!0;return!1}function Dee(t,e){if(!e)return t;for(const n of e)n!=null&&t.add(n);return t}function MIt(t,e){return e!=null&&t.add(e),t}function WB(t,e){const n=new Set;return Dee(n,t),Dee(n,e),n}function n$e(t,e){const n=new Set;for(const r of e)t.has(r)&&n.add(r);return n}function NIt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function LIt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function r$e(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function i$e(t,e){return r$e(WB(t,e),n$e(t,e))}let s$e=0;function NM(){return++s$e}let YL=class extends KL{constructor(e){super(new o$e(e)),this._observer&&jee.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&jee.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},o$e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=a$e}};const jee=new FinalizationRegistry(t=>{t.deref()?.destroy()});function a$e(){}let hw=!1;const aN=[];function Kpe(t,e){let n=new YL(s),r=null,i=!1;function s(){if(!n||i)return;if(hw)return void Xpe(s);const a=r;n.clear(),hw=!0,i=!0,r=kp(n,t),i=!1,hw=!1,e(r,a),Zpe()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=kp(n,t),i=!1,Zn(o)}function Ype(t,e){let n=new YL(i),r=null;function i(){e(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=kp(n,t),r):null}return o(),Zn(s)}function l$e(t,e){let n=!1,r=!1;const i=!!e?.sync;let s=new YL(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,s&&!n&&(hw?Xpe(o):(s.clear(),hw=!0,n=!0,kp(s,t),n=!1,hw=!1,Zpe()))}function a(){s&&(s.destroy(),s=null)}return n=!0,kp(s,t),n=!1,Zn(a)}function Xpe(t){aN.includes(t)||aN.unshift(t)}function Zpe(){for(;aN.length;)aN.pop()()}var _1;let HB=(_1=class{constructor(){this.uid=NM(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,n,r,i,s){return this.pool.acquire(0,e,n,r,i,s,AB)}static acquireTracked(e,n,r,i){return this.pool.acquire(1,e,n,r,null,null,i)}notify(e,n){this.type===0?this.callback.call(this.target,e,n,this.path,this.target):this.callback.call(null,e,n,void 0,void 0)}acquire(e,n,r,i,s,o,a){this.uid=NM(),this.removed=!1,this.type=e,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=NM(),this.removed=!0}},_1.pool=new zpe(()=>new _1),_1);const LM=new Da,dp=new Set;let lN;function cN(t){dp.delete(t),dp.add(t),Jpe()}function Jpe(){lN||(lN=kb(h$e))}function c$e(t){if(t.removed)return;const e=t.oldValue,n=t.getValue();t.equals(e,n)||(t.oldValue=n,t.notify(n,e))}function u$e(t){for(const e of dp.values())e.target===t&&(e.removed=!0)}function h$e(){let t=10;for(;lN&&t--;){lN=null;const e=d$e(),n=LM.acquire();for(const r of e){const i=r.uid;c$e(r),i===r.uid&&r.removed&&n.push(r)}for(const r of dp)r.removed&&(n.push(r),dp.delete(r));for(const r of n)HB.pool.release(r);LM.release(n),LM.release(e),k9.forEach(r=>r())}}function d$e(){const t=LM.acquire();t.length=dp.size;let e=0;for(const n of dp)t[e]=n,++e;return dp.clear(),t}const k9=new Set;function f$e(t){return k9.add(t),Zn(()=>k9.delete(t))}function p$e(t,e,n){let r=Mpe(t,e,n,(i,s,o)=>{let a,l,c=Ype(()=>PC(i,s),(u,h)=>{i.__accessor__?.lifecycle===oc.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=HB.acquireUntracked(u,o,h,i,s),l=a.uid),cN(a))});return Zn(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,cN(a)),a=null),r=c=null})});return r}function m$e(t,e,n){const r=Mpe(t,e,n,(i,s,o)=>{let a=!1;return Kpe(()=>PC(i,s),(l,c)=>{i.__accessor__.lifecycle!==oc.DESTROYED?a||(a=!0,AB(c,l)||o.call(i,l,c,s,i),a=!1):r.remove()})});return r}function g$e(t,e,n,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==oc.DESTROYED?r?m$e(t,e,n):p$e(t,e,n):Zn()}function y$e(t,e,n){let r,i,s=Ype(t,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=HB.acquireTracked(o,e,a,n),i=r.uid),cN(r))});return Zn(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,cN(r)),r=null),s=null})}function v$e(t,e,n){let r=!1;return Kpe(t,(i,s)=>{r||(r=!0,n(s,i)||e(i,s),r=!1)})}function _$e(t,e,n=!1,r=Ufe){return n?v$e(t,e,r):y$e(t,e,r)}function Fee(t){return qpe(dp,e=>e.oldValue===t)}const u1=()=>kt.getLogger("esri.core.accessorSupport.ensureTypes");function x$e(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(u1().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function w$e(t){return t==null?t:!!t}function b$e(t){return t==null?t:t.toString()}function ac(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function qB(t){return t==null?t:Math.round(parseFloat(t))}function E$e(t){return null}function S$e(t,e){return n=>{let r=t(n);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Qpe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function uN(t,e){return e!=null&&t&&!(e instanceof t)}function eme(t){return t&&"isCollection"in t}function $ee(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function T$e(t,e){if(!e?.constructor||!eme(e.constructor))return A9(t,e)?e:new t(e);const n=$ee(t.prototype.itemType),r=$ee(e.constructor.prototype.itemType);return n?r?n===r?e:n.prototype.isPrototypeOf(r.prototype)?new t(e):(A9(t,e),e):new t(e):e}function A9(t,e){return!!Qpe(e)&&(u1().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+ZL(t)+"'"),!0)}function XL(t,e){return e==null?e:eme(t)?T$e(t,e):uN(t,e)?A9(t,e)?e:new t(e):e}function ZL(t){return t?.prototype?.declaredClass||"unknown"}const k$e=new WeakMap;function A$e(t){switch(t){case Number:return e=>ac(e);case jr:return qB;case Boolean:return w$e;case String:return b$e;case Date:return x$e;case KB:return E$e;default:return AC(k$e,t,()=>XL.bind(null,t))}}function qa(t,e){const n=A$e(t);return arguments.length===1?n:n(e)}function tA(t,e,n){return arguments.length===1?tA.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,n)):[t(e,n)])}function C$e(t,e){return arguments.length===1?tA(n=>qa(t,n)):tA(n=>qa(t,n),e)}function tme(t,e,n){return e!==0&&Array.isArray(n)?n.map(r=>tme(t,e-1,r)):t(n)}function hN(t,e,n){if(arguments.length===2)return s=>hN(t,e,s);if(!n)return n;n=tme(t,e,n);let r=e,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function I$e(t,e,n){return arguments.length===2?hN(r=>qa(t,r),e):hN(r=>qa(t,r),e,n)}function nme(t){return!!Array.isArray(t)&&!t.some(e=>{const n=typeof e;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function C9(t,e){if(arguments.length===2)return C9(t).call(null,e);const n=new Set,r=t.filter(a=>typeof a!="function"),i=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(n.has(a)||i.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&i.some(h=>!uN(h,a))?a:(u&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),u1().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>ZL(h)).join(", ")),u1().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):u1().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Yg(t,e){if(arguments.length===2)return Yg(t).call(null,e);const n={},r=[],i=[];for(const l in t.typeMap){const c=t.typeMap[l];n[l]=qa(c),r.push(ZL(c)),i.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!uN(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,u=n[c];if(!u)return u1().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!uN(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Qpe(l)){const h={};for(const f in l)f!==t.key&&(h[f]=l[f]);return u(h)}return u(l)}}let jr=class{},KB=class{};const $It={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function P$e(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function rme(t){switch(t.type){case"native":return qa(t.value);case"array":return tA(rme(t.value));case"one-of":return R$e(t);default:return null}}function R$e(t){let e=null;return(n,r)=>P9(n,t)?n:(e==null&&(e=I9(t)),u1().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function I9(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case jr:return"integer";case Date:return"date";case KB:return"null";default:return ZL(t.value)}case"array":return`array of ${I9(t.value)}`;case"one-of":{const e=t.values.map(n=>I9(n));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function P9(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case jr:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case KB:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!P9(n,e.value));case"one-of":return e.values.some(n=>P9(t,n))}}function E(t={}){return(e,n)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,n),i=RC(e,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in t&&kt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${e.constructor.name}" already defined in the metadata`,t),i.value=t.value=r.value)),t.readOnly!=null&&(i.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;i.dependsOn=[l],i.get=function(){let h=wd(this,l);if(typeof h=="function"){u||(u=l.split(".").slice(0,-1).join("."));const f=wd(this,u);f&&(h=h.bind(f))}return h},i.readOnly||(i.set=c?function(h){this._override(n,h)}:function(h){rN(this,l,h)})}const o=t.type,a=t.types;if(!i.cast){let l;o?l=M$e(o):a&&(l=Array.isArray(a)?tA(Yg(a[0])):Yg(a)),t.cast=N$e(t.cast,l)}SFe(i,t),t.range&&(i.cast=S$e(i.cast,t.range))}}function YB(t,e,n){const r=RC(t,n);r.json||(r.json={});let i=r.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function M$e(t){let e=0,n=t;if(P$e(t))return rme(t);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],e++;const r=n;if(nme(r))return e===0?C9(r):hN(C9(r),e);if(e===1)return C$e(r);if(e>1)return I$e(r,e);const i=t;return i.from?i.from:qa(i)}function N$e(t,e){if(t||e)return t?e?(n,r)=>e(t(n,r),r):t:e}function L$e(t){if(t.json&&t.json.origins){const e=t.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(e[r]){const i=e[r];n[r].forEach(s=>{e[s]=i}),delete e[r]}}}let zd=class extends Kfe{constructor(e,n,r){super(e,n,r)}};zd.prototype.type="warning";function ime(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function O$e(t,e){return XB(t,"any",e?.origin)}function dN(t,e){return XB(t,"read",e?.origin)}function sme(t,e){return XB(t,"write",e?.origin)}function XB(t,e,n){let r=t?.json;if(r?.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(e==="any"||e in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(e==="any"||e in i)&&(r=i)}return r}const R9=()=>kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Vee(t,e,n){t&&(!n&&!e.read||e.read?.reader||e.read?.enabled===!1||F$e(t)&&vb("read.reader",ZB(t),e))}function ZB(t){const e=t.ndimArray??0;if(e>1)return j$e(t);if(e===1)return zee(t);if("type"in t&&ame(t.type)){const n=t.type.prototype?.itemType?.Type,r=zee(typeof n=="function"?{type:n}:{types:n});return(i,s,o)=>{const a=r(i,s,o);return a&&new t.type(a)}}return JB(t)}function JB(t){return"type"in t?D$e(t.type):$$e(t.types)}function D$e(t){return t.prototype.read?(e,n,r)=>{if(e==null)return e;const i=typeof e;if(i!=="object")return void R9().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${i}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function ome(t,e,n,r){return r!==0&&Array.isArray(e)?e.map(i=>ome(t,i,n,r-1)):t(e,void 0,n)}function j$e(t){const e=JB(t),n=ome.bind(null,e),r=t.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function zee(t){const e=JB(t);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const l=e(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=e(n,void 0,i);return s!==void 0?[s]:void 0}}function ame(t){if(!ime(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?QB(e.Type):lme(e.Type))}function F$e(t){return"types"in t?lme(t.types):QB(t.type)}function QB(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||ame(t))}function lme(t){for(const e in t.typeMap)if(!QB(t.typeMap[e]))return!1;return!0}function $$e(t){let e=null;const n=t.errorContext??"type",r=t.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void R9().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=z$e(t));const l=t.key;if(typeof l!="string")return;const c=i[V$e(l,e,o)],u=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const f=`Type '${c||"unknown"}' is not supported`;return o?.messages&&i&&o.messages.push(new zd(`${n}:unsupported`,f,{definition:i,context:o})),void R9().error(f)}const h=new u;return h.read(i,o),r?r(h):h}}function V$e(t,e,n){const r=Object.values(e)[0],i=Tb(r.prototype)[t],s=dN(i,n),o=s?.read?.source;return o&&typeof o=="string"?o:t}function z$e(t){const e={};for(const n in t.typeMap){const r=t.typeMap[n],i=Tb(r.prototype);if(typeof t.key=="function")continue;const s=i[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const o=s.json?.write;if(!o?.writer){e[n]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,c={};o.writer(n,c,l),c[l]&&(e[c[l]]=r)}return e}function G$e(t){if(t.json||(t.json={}),Uee(t.json),Bee(t.json),Gee(t.json),t.json.origins)for(const e in t.json.origins)Uee(t.json.origins[e]),Bee(t.json.origins[e]),Gee(t.json.origins[e]);return!0}function Gee(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function Uee(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function Bee(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function Wee(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const n=t?.ndimArray??0;t&&(n===1||"type"in t&&ime(t.type))?e.write.writer=W$e:n>1?e.write.writer=H$e(n):e.types?Array.isArray(e.types)?e.write.writer=B$e(e.types[0]):e.write.writer=U$e(e.types):e.write.writer=nA}function U$e(t){return(e,n,r,i)=>e?cme(e,t,i)?nA(e,n,r,i):void 0:nA(e,n,r,i)}function cme(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(n?.messages){const r=e.errorContext??"type",i=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new Qe(`${r}:unsupported`,i,{definition:t,context:n})),kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function B$e(t){return(e,n,r,i)=>!e||!Array.isArray(e)?nA(e,n,r,i):nA(e.filter(s=>cme(s,t,i)),n,r,i)}function nA(t,e,n,r){vb(n,fN(t,r),e)}function fN(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?pN(t):t}function pN(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function W$e(t,e,n,r){let i;t===null?i=null:t&&typeof t.map=="function"?(i=t.map(s=>fN(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[fN(t,r)],vb(n,i,e)}function ume(t,e,n){return n!==0&&Array.isArray(t)?t.map(r=>ume(r,e,n-1)):fN(t,e)}function H$e(t){return(e,n,r,i)=>{let s;if(e===null)s=null;else{s=ume(e,i,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}vb(r,s,n)}}function q$e(t){const e=K$e(t);if(t.json.origins)for(const n in t.json.origins){const r=t.json.origins[n],i=r.types?Y$e(r):e;Vee(i,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),Wee(i,r)}Vee(e,t.json,!0),Wee(e,t.json)}function K$e(t){return t.json.types?M9(t.json):t.type?hme(t):M9(t)}function Y$e(t){return t.type?hme(t):M9(t)}function hme(t){if(!t.type)return;let e=0,n=t.type;for(;Array.isArray(n)&&!nme(n);)n=n[0],e++;return{type:n,ndimArray:e}}function M9(t){if(!t.types)return;let e=0,n=t.types;for(;Array.isArray(n);)n=n[0],e++;return{types:n,ndimArray:e}}function X$e(t){G$e(t)&&(L$e(t),q$e(t))}const Vj=new Set,zj=new Set;function he(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,J$e(e);const n=[],r=[];let i=e.prototype;for(;i;)i.hasOwnProperty("initialize")&&!Vj.has(i.initialize)&&(Vj.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!zj.has(i.destroy)&&(zj.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);Vj.clear(),zj.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=n.length-1;l>=0;l--)n[l].call(this)}}),r.length){let l=!1;const c=this[Ppe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=oc.DESTROYING,l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=Tb(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function Z$e(t,e){return e.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r===void 0)return;n.mutable&&on(r);const i=n.store;return i.has(t)?i.get(t):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r!==void 0)return r.getComputed(n)}}function J$e(t){const e=t.prototype,n=Tb(e),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];X$e(s),r[i]={enumerable:!0,configurable:!0,get:Z$e(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?Hee("read-only",i):a.lifecycle===oc.CONSTRUCTED&&s.constructOnly?Hee("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const Hee=(t,e)=>{kt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var qee,Kee;function Q$e(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const gm=Symbol("Accessor-Handles"),Gj=Symbol("Accessor-Initialized");var Fg;let Kt=(Fg=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}Tb(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let h;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=u,f}return this.inherited=u,h}:e[a]}for(const a in n){const l=Q$e(n[a]);E(l)(o.prototype,a)}return he(r)(o)}static freeze(e){return e instanceof Fg?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Fg?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[qee]=null,this[Kee]=!1,this.constructor===Fg)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new NFe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),e.length>0&&(n.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,n=e.ctorArgs;e.initialize(),n&&(this.set(n),e.ctorArgs=null),e.constructed(),this.initialize(),this[Gj]=!0}initialize(){}[Ppe](){this[gm]=Di(this[gm])}destroy(){this.destroyed||(u$e(this),this.__accessor__.destroy(),$Fe()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Gj]}get destroyed(){return this.__accessor__?.lifecycle===oc.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===oc.DESTROYING||!1}commitProperty(e){wd(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,n){return rN(this,e,n),this}watch(e,n,r){return Ipe(kt.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),g$e(this,e,n,r)}addHandles(e,n){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const i of r)i.remove();return}(this[gm]??=new Sb).add(e,n)}removeHandles(e){this[gm]?.remove(e)}removeAllHandles(){this[gm]?.removeAll()}removeHandlesReference(e){this[gm]?.removeReference(e)}hasHandles(e){return this[gm]?.has(e)===!0}_override(e,n){n===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,n){n==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,n){return this.__accessor__.internalSet(e,n),this}},qee=gm,Kee=Gj,Fg);const JL=t=>{const e=t;class n extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(i,s){let o=this._listenersMap?.get(i);if(!o)return!1;let a=!1;for(const l of o.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,s):a=!0}return a&&(o=o.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return xv(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),Zn(()=>{const a=this._listenersMap?.get(i),l=a?.indexOf(s)??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove(),("deref"in s?s.deref():s)?.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap?.get(i);return s!=null&&s.length>0}}return n},dme=JL(class{}),e8e=dme,MC=JL(Kt);function fme(t){return(e,n)=>{e[n]=t}}let NC=class extends Ope{notify(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var Sf;let t8e=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},n8e=class{constructor(e,n,r,i,s){this.target=e,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const Fc=new Eb(()=>new t8e,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function Yee(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function Uj(t){return t?t instanceof Bm?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Bj(t){if(t?.length)return t[0]}function r8e(t,e,n,r){const i=Math.min(t.length-n,e.length-r);let s=0;for(;s<i&&t[n+s]===e[r+s];)s++;return s}function pme(t,e,n,r){e&&e.forEach((i,s,o)=>{t.push(i),pme(t,n.call(r,i,s,o),n,r)})}const ym=new Set,vm=new Set,_m=new Set,Wj=new Map;let i8e=0,Bm=Sf=class extends MC{static ofType(t){if(!t)return Sf;if(Wj.has(t))return Wj.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const i=t.typeMap[r].prototype.declaredClass;e?e+=` | ${i}`:e=i}let n=class extends Sf{};return x([fme({Type:t,ensureType:typeof t=="function"?qa(t):Yg(t)})],n.prototype,"itemType",void 0),n=x([he(`esri.core.Collection<${e}>`)],n),Wj.set(t,n),n}static isCollection(t){return t!=null&&t instanceof Sf}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new NC,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:i8e++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Sf?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return on(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,Uj(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Zn();if(t==="change"){const n=this._chgListeners,r={removed:!1,callback:e};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),Zn(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return super.on(t,e)}once(t,e){const n="deref"in e?()=>e.deref():()=>e,r=this.on(t,i=>{n()?.call(null,i),r.remove()});return r}add(t,e){if(on(this._observable),this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e??null);return this._splice(n,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(on(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e);return this._splice(n,0,Uj(t)),this._emitAfterChanges(1),this}at(t){if(on(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(on(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return on(this._observable),this._createNewInstance({items:this._items.map(et)})}concat(...t){on(this._observable);const e=t.map(Uj);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(on(this._observable),!this.length||this._emitBeforeChanges(2))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)t.call(e,n[i],i,n);this._emitAfterChanges(2)}destroyAll(){this.drain(Yee)}destroyMany(t){const e=this.removeMany(t);return e.forEach(Yee),e}every(t,e){return on(this._observable),this._items.every(t,e)}filter(t,e){on(this._observable);const n=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:n})}find(t,e){return on(this._observable),this._items.find(t,e)}findIndex(t,e){return on(this._observable),this._items.findIndex(t,e)}flatten(t,e){on(this._observable);const n=[];return pme(n,this,t,e),new Sf(n)}forEach(t,e){return on(this._observable),this._items.forEach(t,e)}getItemAt(t){return on(this._observable),this._items[t]}getNextIndex(t){on(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return on(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return on(this._observable),this._items.indexOf(t,e)}join(t=","){return on(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return on(this._observable),this._items.lastIndexOf(t,e)}map(t,e){on(this._observable);const n=this._items.map(t,e);return new Sf({items:n})}reorder(t,e=this.length-1){on(this._observable);const n=this.indexOf(t);if(n!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),n!==e){if(this._emitBeforeChanges(4))return t;this._splice(n,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(on(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Bj(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return on(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){on(this._observable);const n=this._items;return arguments.length===2?n.reduce(t,e):n.reduce(t)}reduceRight(t,e){on(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(t,e):n.reduceRight(t)}remove(t){return on(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(on(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=Bj(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(on(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof Sf?t.toArray():t,n=this._items,r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s],a=n.indexOf(o);if(a>-1){const l=1+r8e(e,n,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(on(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(on(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Bj(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return on(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return on(this._observable),this._items.some(t,e)}sort(t){if(on(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,n)=>e===n?0:e<n?-1:1){const e=this.length-1;for(let n=0;n<e;n++)if(t(this.items[n],this.items[n+1])>0)return!0;return!1}splice(t,e,...n){on(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(n.length?1:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(t,e,n)||[];return this._emitAfterChanges(r),i}toArray(){return on(this._observable),this._items.slice()}toJSON(t){return on(this._observable),this.toArray().map(e=>q4(e)?e.toJSON(t):e)}toLocaleString(){return on(this._observable),this._items.toLocaleString()}toString(){return on(this._observable),this._items.toString()}unshift(...t){return on(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=kb(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=Fc.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);Fc.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Fc.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);Fc.release(a)}}if(n?.length){if(i){const u=[];for(const h of n){const f=i.ensureType(h);f==null&&h!=null||u.push(f)}n=u}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const u=Fc.acquire();u.target=this,u.cancellable=!0;const h=Fc.acquire();h.target=this,h.cancellable=!1;for(const f of n)a?(u.reset(f),this.emit("before-add",u),u.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));Fc.release(h),Fc.release(u)}else{if(c)for(const u of n)r.push(u);else r.splice(t,0,...n);this._set("length",r.length)}}if((n?.length||o?.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new n8e(this,n,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const n=Fc.acquire();n.target=this,n.cancellable=!0,n.type=t,this.emit("before-changes",n),e=n.defaultPrevented,Fc.release(n)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Fc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Fc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const n=e.changes;ym.clear(),vm.clear(),_m.clear();for(const{added:l,removed:c}of n){if(l)if(_m.size===0&&vm.size===0)for(const u of l)ym.add(u);else for(const u of l)vm.has(u)?(_m.add(u),vm.delete(u)):_m.has(u)||ym.add(u);if(c)if(_m.size===0&&ym.size===0)for(const u of c)vm.add(u);else for(const u of c)ym.has(u)?ym.delete(u):(_m.delete(u),vm.add(u))}const r=Da.acquire();ym.forEach(l=>{r.push(l)});const i=Da.acquire();vm.forEach(l=>{i.push(l)});const s=this._items,o=e.items,a=Da.acquire();if(_m.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||i.length||a.length)){const l={target:this,added:r,removed:i,moved:a},c=e.listeners.length;for(let u=0;u<c;u++){const h=e.listeners[u];h.removed||h.callback.call(this,l)}}Da.release(r),Da.release(i),Da.release(a)}ym.clear(),vm.clear(),_m.clear()}};x([E()],Bm.prototype,"_updating",void 0),x([E()],Bm.prototype,"length",void 0),x([E()],Bm.prototype,"items",null),x([E({readOnly:!0})],Bm.prototype,"updating",null),Bm=Sf=x([he("esri.core.Collection")],Bm);const Lt=Bm;function Cd(t,e,n=Lt){return e||(e=new n),e===t||e.destroyed||(e.removeAll(),s8e(t)?e.addMany(t):t&&e.add(t)),e}function mme(t){return t}function s8e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let o8e=class gme{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new gme;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,et(r.value),r.origin)}),n}get(e,n){n=this._normalizeOrigin(n);const r=this._values.get(e);return n==null||r?.origin===n?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const n=[...this._values.keys()];return e==null?n:n.filter(r=>this._values.get(r)?.origin===e)}set(e,n,r){if((r=this._normalizeOrigin(r))===0){const i=this._values.get(e);if(i?.origin!=null&&i.origin>r)return}this._values.set(e,new a8e(n,r))}delete(e,n){(n=this._normalizeOrigin(n))!=null&&this._values.get(e)?.origin!==n||this._values.delete(e)}has(e,n){return(n=this._normalizeOrigin(n))!=null?this._values.get(e)?.origin===n:this._values.has(e)}isAtOrigin(e,n){return n=this._normalizeOrigin(n),this.has(e,n)&&this.originOf(e)===n}isBelowOrigin(e,n){return n=this._normalizeOrigin(n),!this.has(e)||this.originOf(e)<n}forEach(e){this._values.forEach(({value:n},r)=>e(n,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},a8e=class{constructor(e,n){this.value=e,this.origin=n}};function l8e(t,e,n){e.keys().forEach(i=>{n.set(i,e.get(i),0)});const r=t.metadata;Object.keys(r).forEach(i=>{t.internalGet(i)&&n.set(i,t.internalGet(i),0)})}function c8e(t,e,n){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&Ree(r,n))return!0}else for(const i of r)if(i===e||i.includes(".")&&i.startsWith(e)&&Ree(i,n))return!0;return!1}function u8e(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function h8e(t,e,n,r,i){let s=dN(e[n],i);u8e(s)&&(t[n]=!0);for(const o of Object.getOwnPropertyNames(e))s=dN(e[o],i),c8e(s,n,r)&&(t[o]=!0)}function d8e(t,e,n,r){const i=n.metadata,s=O$e(i[e],r),o=s?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&n.set(e,a)}const yme={origin:"service"};function f8e(t,e,n=yme){if(!e||typeof e!="object")return;const r=Kg(t),i=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))h8e(s,i,o,e,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=dN(i[o],n).read,l=a?.source;let c;c=l&&typeof l=="string"?PC(e,l):e[o],a?.reader&&(c=a.reader.call(t,c,e,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||d8e(t,o,r,n)}r.setDefaultOrigin("user")}function WIt(t,e,n,r=yme){const i={...r,messages:[]};n(i),i.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function p8e(t,e,n,r,i){const s={};return e.write?.writer?.call(t,r,s,n,i),s}function vme(t,e,n,r,i,s){if(!r?.write)return!1;const o=wd(t,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&s?.layerContainerType&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Qe("web-document-write:property-required",`Missing value for required property '${n}' on '${t.declaredClass}'`,{propertyName:n,target:t});return a&&s?.messages?s.messages.push(a):a&&!s&&kt.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(n)===0)&&m8e(t,n,s,r,o)||!i.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(n)<UB(s.origin))}function m8e(t,e,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(t,e,n??void 0);return $L(o,i)}return!1}return s===i}function HIt(t,e,n,r){const i=Kg(t),s=i.metadata,o=sme(s[e],r);return!!o&&vme(t,i,e,o,n,r)}function g8e(t,e,n){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return PM(e,t.toJSON(n));const r=Kg(t),i=r.metadata;for(const s in i){const o=sme(i[s],n);if(!vme(t,r,s,o,void 0,n))continue;const a=wd(t,s),l=p8e(t,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,n);Object.keys(l).length>0&&(e=PM(e,l),n?.resources?.pendingOperations?.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>PM(e,l,()=>"replace-arrays"))),n?.writtenProperties&&n.writtenProperties.push({target:t,propName:s,oldOrigin:RFe(r.store.originOf(s)),newOrigin:n.origin}))}return e}const g0=t=>{const e=t;let n=class extends e{constructor(...r){super(...r);const i=Kg(this),s=i.store,o=new o8e;i.store=o,l8e(i,s,o)}read(r,i){f8e(this,r,i)}write(r,i){return g8e(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return y8e.call(this,r,i)}};return n=x([he("esri.core.JSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function y8e(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(t,e),n}const qt=g0(Kt);let v8e=class{constructor(){this._resolver=Ec(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Pr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=Ec(),n=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||Sa(i)||this._resolver.reject(i)}),e.resolve()}};const _me=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._promiseProps=new v8e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(Nje(r)),this._promiseProps.addResolvingPromise(r.promise))}};return n=x([he("esri.core.Promise")],n),n},eW=_me(Kt),_8e="not-loaded",x8e="loading",w8e="failed",Xee="loaded",b8e=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const u=jB(o,c);this.destroyed&&c(new Qe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{u&&u.remove()})});if(this.loadStatus===_8e){this._set("loadStatus",x8e);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),a}})),this.when(()=>{this._set("loadStatus",Xee),this._loadController=null},i=>{this.destroyed||(this._set("loadStatus",w8e),this._set("loadError",i),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=B1(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Xee}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Qe("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return x([E({readOnly:!0})],n.prototype,"loaded",null),x([E({readOnly:!0})],n.prototype,"loadError",void 0),x([E({clonable:!1})],n.prototype,"loadStatus",void 0),x([E({type:[zd],readOnly:!0})],n.prototype,"loadWarnings",null),n=x([he("esri.core.Loadable")],n),n},LC=b8e(eW);function N9(t){return!(!t||!t.load)}function KIt(t,e,n){return FB(t.map((r,i)=>e.apply(n,[r,i])))}async function E8e(t,e,n){return(await FB(t.map((r,i)=>e.apply(n,[r,i])))).map(r=>r.value)}function tW(t){return{ok:!0,value:t}}function nW(t){return{ok:!1,error:t}}function S8e(t){return t!=null&&t.ok===!0?t.value:null}function T8e(t){return t!=null&&t.ok===!1?t.error:null}async function xme(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return tW(await t)}catch(e){return nW(e)}}async function YIt(t){try{return tW(await t)}catch(e){return mpe(e),nW(e)}}function QL(t,e){return new Pm(t,e)}let Pm=class extends Kt{get value(){return S8e(this._result)}get error(){return T8e(this._result)}get finished(){return this._result!=null}constructor(e,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=B1(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(i=>{this._result=tW(i),this._cleanup()},i=>{this._result=nW(i),this._cleanup()}),this._abortHandle=vu(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ii(this._abortHandle),this._abortController=null}};x([E()],Pm.prototype,"value",null),x([E()],Pm.prototype,"error",null),x([E()],Pm.prototype,"finished",null),x([E()],Pm.prototype,"promise",void 0),x([E()],Pm.prototype,"_result",void 0),Pm=x([he("esri.core.asyncUtils.ReactiveTask")],Pm);async function wme(t,e){return await t.load(),k8e(t,e)}async function k8e(t,e){const n=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Lt.isCollection(o)?o.forEach(a=>r(a)):N9(o)&&n.push(o))};e(r);let i=null;if(await E8e(n,async s=>{const o=await xme(A8e(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return t}function A8e(t){return"loadAll"in t&&typeof t.loadAll=="function"}function er(t,e,n){let r,i;return e===void 0?(i=t,r=[void 0]):typeof e!="string"?(i=t,r=[void 0],n=e):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=YB(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),n&&(c.write.target=n),c.write.writer=a[o]}}}let Xs=class{constructor(e,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=C8e(e),this.apiValues=Zee(this._apiToJSON),this.jsonValues=Zee(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&vb(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const n=this._apiToJSON[e];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function C8e(t){const e={};for(const n in t)e[t[n]]=n;return e}function Zee(t){const e=[];for(const n in t)e.push(n);return e.sort(),e}function Dl(){return function(t,e){return new Xs(t,{ignoreUnknown:!0,...e})}}let rW=class{constructor(e,n,r,i,s,o){this.semiMajorAxis=e,this.flattening=n,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=i,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const ss=new rW(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Id=new rW(3396190,1/169.8944472236118,23e4,6e4,.111),Xg=new rW(1737400,0,0,0,0);function qi(t){if(!nr.assetsPath)throw kt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Qe("assets:path-not-set","config.assetsPath is not set");return TC(nr.assetsPath,t)}let Hj,pe=null;function bme(){return!!pe}function I8e(){return!!_e("esri-wasm")}function P8e(){return Hj||(Hj=ge(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>qi(`esri/geometry/support/${e}`)})).then(t=>{Cme(t)}),Hj)}const OM={geogToProj(t,e,n){pe.ensureCache.prepare();const r=H1(n),i=n===r,s=pe.ensureFloat64(r),o=pe._pe_geog_to_proj(pe.getPointer(t),e,s);return o&&Zg(n,e,s,i),o},projGeog(t,e,n,r){switch(r){case Fi.PE_TRANSFORM_P_TO_G:return OM.projToGeog(t,e,n);case Fi.PE_TRANSFORM_G_TO_P:return OM.geogToProj(t,e,n)}return 0},projToGeog:(t,e,n)=>OM.projToGeogCenter(t,e,n,0),projToGeogCenter(t,e,n,r){pe.ensureCache.prepare();const i=H1(n),s=n===i,o=pe.ensureFloat64(i),a=pe._pe_proj_to_geog_center(pe.getPointer(t),e,o,r);return a&&Zg(n,e,o,s),a}};let Fi=class pr{static init(){pr.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,pr.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,pr.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,pr.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,pr.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,pr.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,pr.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,pr.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,pr.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,pr.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,pr.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,pr.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,pr.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,pr.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,pr.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,pr.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,pr.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,pr.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,pr.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,pr.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,pr.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,pr.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,pr.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,pr.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,pr.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,pr.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,pr.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,pr.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,pr.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,pr.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,pr.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,pr.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}},Eme=null;const Jee={},Qee={},ete=t=>{const e=t.getType();switch(e){case Fi.PE_TYPE_GEOGCS:t=pe.castObject(t,pe.PeGeogcs);break;case Fi.PE_TYPE_PROJCS:t=pe.castObject(t,pe.PeProjcs);break;case Fi.PE_TYPE_GEOGTRAN:t=pe.castObject(t,pe.PeGeogtran);break;default:e&Fi.PE_TYPE_UNIT&&(t=pe.castObject(t,pe.PeUnit))}return t},ex={initialize(){pe.PeFactory.prototype.initialize(null)},coordsys:t=>ex.factoryByType(Fi.PE_TYPE_COORDSYS,t),factoryByType(t,e){let n=null,r=Jee[t];if(r||(r={},Jee[t]=r),r.hasOwnProperty(String(e))&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.factoryByType(t,e);pe.compare(i,pe.NULL)||(n=ete(i),r[e]=n)}return n},fromString(t,e){let n=null,r=Qee[t];if(r||(r={},Qee[t]=r),r.hasOwnProperty(e)&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.fromString(t,e);pe.compare(i,pe.NULL)||(n=ete(i),r[e]=n)}return n},geogcs:t=>ex.factoryByType(Fi.PE_TYPE_GEOGCS,t),geogtran:t=>ex.factoryByType(Fi.PE_TYPE_GEOGTRAN,t),getCode:t=>pe.PeFactory.prototype.getCode(t),projcs:t=>ex.factoryByType(Fi.PE_TYPE_PROJCS,t),unit:t=>ex.factoryByType(Fi.PE_TYPE_UNIT,t)};let tte,Sme=null;const iW={PE_GTLIST_OPTS_COMMON:0,init(){iW.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,tte=pe._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,n,r,i,s){let o=null;const a=new pe.PeInteger(s);try{const l=pe.PeGTlistExtended.prototype.getGTlist(t,e,n,r,i,a);if((s=a.val)&&(o=[l],s>1)){const c=pe.getPointer(l);for(let u=1;u<s;u++)o.push(pe.wrapPointer(c+tte*u,pe.PeGTlistExtendedEntry))}}finally{pe.destroy(a)}return o}},R8e={destroy(t){if(t?.length){for(const e of t)Ku(e),e.getEntries().forEach(n=>{Ku(n);const r=n.getGeogtran();Ku(r),r.getParameters().forEach(Ku),[r.getGeogcs1(),r.getGeogcs2()].forEach(i=>{Ku(i);const s=i.getDatum();Ku(s),Ku(s.getSpheroid()),Ku(i.getPrimem()),Ku(i.getUnit())})});pe.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},M8e={geogToGeog(t,e,n,r,i){pe.ensureCache.prepare();const s=H1(n),o=n===s,a=pe.ensureFloat64(s);let l=0;r&&(l=pe.ensureFloat64(r));const c=pe._pe_geog_to_geog(pe.getPointer(t),e,a,l,i);return c&&Zg(n,e,a,o),c}},N8e={geodesicCoordinate(t,e,n,r,i,s,o,a){pe.PeLineType.prototype.geodesic_coordinate(t,e,n,r,i,s,o,a)},geodeticCoordinate(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.geodetic_coordinate(t,e,n,r,i,s,o,a,l)},geodeticDistance(t,e,n,r,i,s,o,a,l,c){pe.PeLineType.prototype.geodetic_distance(t,e,n,r,i,s,o,a,l,c)},greatEllipticDistance(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.great_elliptic_distance(t,e,n,r,i,s,o,a,l)}},L8e={phiToEta:(t,e)=>pe.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>pe.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>pe.PeMath.prototype.phi_to_phig(t,e),q:(t,e,n)=>pe.PeMath.prototype.q(t,e,n),q90:(t,e)=>pe.PeMath.prototype.q90(t,e)},qj=(t,e,n,r,i,s)=>{let o,a;switch(pe.ensureCache.prepare(),t){case"dd":o=pe._pe_geog_to_dd,a=Fi.PE_DD_MAX;break;case"ddm":o=pe._pe_geog_to_ddm,a=Fi.PE_DDM_MAX;break;case"dms":o=pe._pe_geog_to_dms,a=Fi.PE_DMS_MAX}let l=0;e&&(l=pe.getPointer(e));const c=H1(r),u=pe.ensureFloat64(c),h=eO(n,a),f=o(l,n,u,i,pe.ensureInt32(h));if(f)for(let g=0;g<n;g++)s[g]=pe.UTF8ToString(h[g]);return f},Kj=(t,e,n,r,i)=>{let s;switch(pe.ensureCache.prepare(),t){case"dd":s=pe._pe_dd_to_geog;break;case"ddm":s=pe._pe_ddm_to_geog;break;case"dms":s=pe._pe_dms_to_geog}let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=s(o,n,l,c);return u&&Zg(i,n,c),u},O8e={geogToDms:(t,e,n,r,i)=>qj("dms",t,e,n,r,i),dmsToGeog:(t,e,n,r)=>Kj("dms",t,e,n,r),geogToDdm:(t,e,n,r,i)=>qj("ddm",t,e,n,r,i),ddmToGeog:(t,e,n,r)=>Kj("ddm",t,e,n,r),geogToDd:(t,e,n,r,i)=>qj("dd",t,e,n,r,i),ddToGeog:(t,e,n,r)=>Kj("dd",t,e,n,r)};let Tme=class tx{static init(){tx.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,tx.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,tx.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,tx.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,tx.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,n,r,i,s,o,a){pe.ensureCache.prepare();let l=0;e&&(l=pe.getPointer(e));const c=H1(r),u=pe.ensureFloat64(c),h=eO(n,Fi.PE_MGRS_MAX),f=pe.ensureInt32(h),g=pe._pe_geog_to_mgrs_extended(l,n,u,i,s,o,f);if(g)for(let y=0;y<n;y++)a[y]=pe.UTF8ToString(h[y]);return g}static mgrsToGeogExtended(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_mgrs_to_geog_extended(o,n,l,i,c);return u&&Zg(s,n,c),u}};const D8e={geogToUsng(t,e,n,r,i,s,o){pe.ensureCache.prepare();let a=0;t&&(a=pe.getPointer(t));const l=H1(n),c=pe.ensureFloat64(l),u=eO(e,Fi.PE_MGRS_MAX),h=pe.ensureInt32(u),f=pe._pe_geog_to_usng(a,e,c,r,i,s,h);if(f)for(let g=0;g<e;g++)o[g]=pe.UTF8ToString(u[g]);return f},usngToGeog(t,e,n,r){pe.ensureCache.prepare();let i=0;t&&(i=pe.getPointer(t));const s=n.map(c=>pe.ensureString(c)),o=pe.ensureInt32(s),a=pe.ensureFloat64(new Array(2*e)),l=pe._pe_usng_to_geog(i,e,o,a);return l&&Zg(r,e,a),l}};let kme=class DM{static init(){DM.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,DM.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,DM.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=H1(r),l=pe.ensureFloat64(a),c=eO(n,Fi.PE_UTM_MAX),u=pe.ensureInt32(c),h=pe._pe_geog_to_utm(o,n,l,i,u);if(h)for(let f=0;f<n;f++)s[f]=pe.UTF8ToString(c[f]);return h}static utmToGeog(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_utm_to_geog(o,n,l,i,c);return u&&Zg(s,n,c),u}};var fl;let Ame=(fl=class{static init(){fl.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,fl.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,fl.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,fl.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,n=fl.PE_PCSINFO_OPTION_DOMAIN){let r=null,i=null;return fl.cache.has(e)&&(i=fl.cache.get(e),i[n]&&(r=i[n])),r||(r=pe.PePCSInfo.prototype.generate(e,n),i||(i=[],fl.cache.set(e,i)),i[n]=r),r}},fl.cache=new Map,fl);const j8e={versionString:()=>pe.PeVersion.prototype.version_string()};function Cme(t){function e(s,o,a){s[o]=a(s[o])}pe=t,Fi.init(),iW.init(),Tme.init(),kme.init(),Ame.init(),Eme=class extends pe.PeDouble{constructor(s=NaN){super(s)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},Sme=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const n=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const s of n)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Fi.PE_NAME_MAX))});for(const s of[pe.PeGeogtran,pe.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Fi.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=pe.getValue(l,"*");a[c]=u?pe.wrapPointer(u,pe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(pe.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return Zg(l,a,s.call(this),o),l}),e(pe.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=pe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+o*h,pe.PeGTlistExtendedGTs))}}return a}});const r=pe._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=l.getNump();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+r*h,pe.PeHorizon))}}return o.set(s,a),a};e(pe.PeProjcs.prototype,"horizonGcsGenerate",i),e(pe.PeProjcs.prototype,"horizonPcsGenerate",i),pe.PeObject.prototype.toString=function(s=Fi.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const o=pe.getPointer(this),a=pe.ensureInt8(new Array(Fi.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(o,s,a))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),Ku(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),Ku(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function Ku(t){if(!t)return;const e=pe.getClass(t);if(!e)return;const n=pe.getCache(e);if(!n)return;const r=pe.getPointer(t);r&&delete n[r]}function eO(t,e){const n=[],r=new Array(e);for(let i=0;i<t;i++)n.push(pe.ensureInt8(r));return n}function H1(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Zg(t,e,n,r=!1){if(r)for(let i=0;i<2*e;i++)t[i]=pe.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=t.length===0;for(let s=0;s<e;s++)i&&(t[s]=new Array(2)),t[s][0]=pe.getValue(n,"double"),t[s][1]=pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}const QIt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:OM,PeDefs:Fi,get PeDouble(){return Eme},PeFactory:ex,get PeGCSExtent(){return Sme},PeGTTransformations:M8e,PeGTlistExtended:iW,PeGTlistExtendedEntry:R8e,PeLineType:N8e,PeMath:L8e,PeNotationDms:O8e,PeNotationMgrs:Tme,PeNotationUsng:D8e,PeNotationUtm:kme,PePCSInfo:Ame,PeVersion:j8e,_init:Cme,get _pe(){return pe},isLoaded:bme,isSupported:I8e,load:P8e},Symbol.toStringTag,{value:"Module"}));let v;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(v=2e3;v<=2045;v++)H[v]=0;for(v=2056;v<=2065;v++)H[v]=0;for(v=2067;v<=2135;v++)H[v]=0;for(v=2137;v<=2154;v++)H[v]=0;for(v=2161;v<=2170;v++)H[v]=0;for(v=2172;v<=2193;v++)H[v]=0;for(v=2195;v<=2198;v++)H[v]=0;for(v=2200;v<=2203;v++)H[v]=0;for(v=2205;v<=2217;v++)H[v]=0;for(v=2222;v<=2224;v++)H[v]=1;for(v=2225;v<=2250;v++)H[v]=2;for(v=2251;v<=2253;v++)H[v]=1;for(v=2257;v<=2264;v++)H[v]=2;for(v=2274;v<=2279;v++)H[v]=2;for(v=2280;v<=2282;v++)H[v]=1;for(v=2283;v<=2289;v++)H[v]=2;for(v=2290;v<=2292;v++)H[v]=0;for(v=2308;v<=2313;v++)H[v]=0;for(v=2315;v<=2491;v++)H[v]=0;for(v=2494;v<=2866;v++)H[v]=0;for(v=2867;v<=2869;v++)H[v]=1;for(v=2870;v<=2888;v++)H[v]=2;for(v=2891;v<=2895;v++)H[v]=2;for(v=2896;v<=2898;v++)H[v]=1;for(v=2902;v<=2908;v++)H[v]=2;for(v=2915;v<=2920;v++)H[v]=2;for(v=2921;v<=2923;v++)H[v]=1;for(v=2924;v<=2930;v++)H[v]=2;for(v=2931;v<=2962;v++)H[v]=0;for(v=2964;v<=2968;v++)H[v]=2;for(v=2969;v<=2973;v++)H[v]=0;for(v=2975;v<=2991;v++)H[v]=0;for(v=2995;v<=3051;v++)H[v]=0;for(v=3054;v<=3079;v++)H[v]=0;for(v=3081;v<=3088;v++)H[v]=0;for(v=3092;v<=3101;v++)H[v]=0;for(v=3106;v<=3138;v++)H[v]=0;for(v=3146;v<=3151;v++)H[v]=0;for(v=3153;v<=3166;v++)H[v]=0;for(v=3168;v<=3172;v++)H[v]=0;for(v=3174;v<=3203;v++)H[v]=0;for(v=3294;v<=3358;v++)H[v]=0;for(v=3367;v<=3403;v++)H[v]=0;for(v=3408;v<=3416;v++)H[v]=0;for(v=3417;v<=3438;v++)H[v]=2;for(v=3441;v<=3446;v++)H[v]=2;for(v=3447;v<=3450;v++)H[v]=0;for(v=3451;v<=3459;v++)H[v]=2;for(v=3460;v<=3478;v++)H[v]=0;for(v=3554;v<=3559;v++)H[v]=0;for(v=3560;v<=3570;v++)H[v]=2;for(v=3571;v<=3581;v++)H[v]=0;for(v=3594;v<=3597;v++)H[v]=0;for(v=3601;v<=3604;v++)H[v]=0;for(v=3637;v<=3639;v++)H[v]=0;for(v=3665;v<=3667;v++)H[v]=0;for(v=3693;v<=3695;v++)H[v]=0;for(v=3701;v<=3727;v++)H[v]=0;for(v=3728;v<=3739;v++)H[v]=2;for(v=3740;v<=3751;v++)H[v]=0;for(v=3753;v<=3760;v++)H[v]=2;for(v=3761;v<=3773;v++)H[v]=0;for(v=3775;v<=3777;v++)H[v]=0;for(v=3779;v<=3781;v++)H[v]=0;for(v=3783;v<=3785;v++)H[v]=0;for(v=3788;v<=3791;v++)H[v]=0;for(v=3797;v<=3802;v++)H[v]=0;for(v=3814;v<=3816;v++)H[v]=0;for(v=3825;v<=3829;v++)H[v]=0;for(v=3832;v<=3841;v++)H[v]=0;for(v=3844;v<=3852;v++)H[v]=0;for(v=3873;v<=3885;v++)H[v]=0;for(v=3890;v<=3893;v++)H[v]=0;for(v=3907;v<=3912;v++)H[v]=0;for(v=3942;v<=3950;v++)H[v]=0;for(v=3968;v<=3970;v++)H[v]=0;for(v=3973;v<=3976;v++)H[v]=0;for(v=3986;v<=3989;v++)H[v]=0;for(v=3994;v<=3997;v++)H[v]=0;for(v=4048;v<=4051;v++)H[v]=0;for(v=4056;v<=4063;v++)H[v]=0;for(v=4093;v<=4096;v++)H[v]=0;for(v=4390;v<=4398;v++)H[v]=0;for(v=4399;v<=4413;v++)H[v]=2;for(v=4418;v<=4433;v++)H[v]=2;for(v=4455;v<=4457;v++)H[v]=2;for(v=4484;v<=4489;v++)H[v]=0;for(v=4491;v<=4554;v++)H[v]=0;for(v=4568;v<=4589;v++)H[v]=0;for(v=4652;v<=4656;v++)H[v]=0;for(v=4766;v<=4800;v++)H[v]=0;for(v=5014;v<=5016;v++)H[v]=0;for(v=5069;v<=5072;v++)H[v]=0;for(v=5105;v<=5130;v++)H[v]=0;for(v=5167;v<=5188;v++)H[v]=0;for(v=5253;v<=5259;v++)H[v]=0;for(v=5269;v<=5275;v++)H[v]=0;for(v=5292;v<=5311;v++)H[v]=0;for(v=5329;v<=5331;v++)H[v]=0;for(v=5343;v<=5349;v++)H[v]=0;for(v=5355;v<=5357;v++)H[v]=0;for(v=5387;v<=5389;v++)H[v]=0;for(v=5459;v<=5463;v++)H[v]=0;for(v=5479;v<=5482;v++)H[v]=0;for(v=5518;v<=5520;v++)H[v]=0;for(v=5530;v<=5539;v++)H[v]=0;for(v=5550;v<=5552;v++)H[v]=0;for(v=5562;v<=5583;v++)H[v]=0;for(v=5623;v<=5625;v++)H[v]=2;for(v=5631;v<=5639;v++)H[v]=0;for(v=5649;v<=5653;v++)H[v]=0;for(v=5663;v<=5680;v++)H[v]=0;for(v=5682;v<=5685;v++)H[v]=0;for(v=5875;v<=5877;v++)H[v]=0;for(v=5896;v<=5899;v++)H[v]=0;for(v=5921;v<=5940;v++)H[v]=0;for(v=6050;v<=6125;v++)H[v]=0;for(v=6244;v<=6275;v++)H[v]=0;for(v=6328;v<=6348;v++)H[v]=0;for(v=6350;v<=6356;v++)H[v]=0;for(v=6366;v<=6372;v++)H[v]=0;for(v=6381;v<=6387;v++)H[v]=0;for(v=6393;v<=6404;v++)H[v]=0;for(v=6480;v<=6483;v++)H[v]=0;for(v=6511;v<=6514;v++)H[v]=0;for(v=6579;v<=6581;v++)H[v]=0;for(v=6619;v<=6624;v++)H[v]=0;for(v=6625;v<=6627;v++)H[v]=2;for(v=6628;v<=6632;v++)H[v]=0;for(v=6634;v<=6637;v++)H[v]=0;for(v=6669;v<=6692;v++)H[v]=0;for(v=6707;v<=6709;v++)H[v]=0;for(v=6720;v<=6723;v++)H[v]=0;for(v=6732;v<=6738;v++)H[v]=0;for(v=6931;v<=6933;v++)H[v]=0;for(v=6956;v<=6959;v++)H[v]=0;for(v=7005;v<=7007;v++)H[v]=0;for(v=7057;v<=7070;v++)H[v]=2;for(v=7074;v<=7082;v++)H[v]=0;for(v=7109;v<=7118;v++)H[v]=0;for(v=7119;v<=7127;v++)H[v]=1;for(v=7374;v<=7376;v++)H[v]=0;for(v=7528;v<=7586;v++)H[v]=0;for(v=7587;v<=7645;v++)H[v]=2;for(v=7692;v<=7696;v++)H[v]=0;for(v=7755;v<=7787;v++)H[v]=0;for(v=7791;v<=7795;v++)H[v]=0;for(v=7799;v<=7801;v++)H[v]=0;for(v=7803;v<=7805;v++)H[v]=0;for(v=7825;v<=7831;v++)H[v]=0;for(v=7845;v<=7859;v++)H[v]=0;for(v=8013;v<=8032;v++)H[v]=0;for(v=8065;v<=8068;v++)H[v]=1;for(v=8518;v<=8529;v++)H[v]=2;for(v=8533;v<=8536;v++)H[v]=2;for(v=8538;v<=8540;v++)H[v]=2;for(v=8677;v<=8679;v++)H[v]=0;for(v=8836;v<=8840;v++)H[v]=0;for(v=8857;v<=8859;v++)H[v]=0;for(v=8908;v<=8910;v++)H[v]=0;for(v=9154;v<=9159;v++)H[v]=0;for(v=9205;v<=9218;v++)H[v]=0;for(v=9271;v<=9273;v++)H[v]=0;for(v=9295;v<=9297;v++)H[v]=0;for(v=9356;v<=9360;v++)H[v]=0;for(v=9404;v<=9407;v++)H[v]=0;for(v=9476;v<=9482;v++)H[v]=0;for(v=9487;v<=9494;v++)H[v]=0;for(v=9697;v<=9699;v++)H[v]=0;for(v=9821;v<=9865;v++)H[v]=0;for(v=10285;v<=10291;v++)H[v]=0;for(v=10314;v<=10317;v++)H[v]=0;for(v=10448;v<=10465;v++)H[v]=0;for(v=10726;v<=10729;v++)H[v]=0;for(v=10731;v<=10733;v++)H[v]=0;for(v=11114;v<=11118;v++)H[v]=0;for(v=20004;v<=20032;v++)H[v]=0;for(v=20047;v<=20049;v++)H[v]=0;for(v=20062;v<=20092;v++)H[v]=0;for(v=20135;v<=20138;v++)H[v]=0;for(v=20248;v<=20258;v++)H[v]=0;for(v=20348;v<=20358;v++)H[v]=0;for(v=20436;v<=20440;v++)H[v]=0;for(v=20822;v<=20824;v++)H[v]=0;for(v=20904;v<=20932;v++)H[v]=0;for(v=20934;v<=20936;v++)H[v]=0;for(v=21004;v<=21032;v++)H[v]=0;for(v=21035;v<=21037;v++)H[v]=0;for(v=21095;v<=21097;v++)H[v]=0;for(v=21148;v<=21150;v++)H[v]=0;for(v=21207;v<=21264;v++)H[v]=0;for(v=21307;v<=21364;v++)H[v]=0;for(v=21413;v<=21423;v++)H[v]=0;for(v=21453;v<=21463;v++)H[v]=0;for(v=21473;v<=21483;v++)H[v]=0;for(v=21780;v<=21782;v++)H[v]=0;for(v=21891;v<=21894;v++)H[v]=0;for(v=21896;v<=21899;v++)H[v]=0;for(v=22171;v<=22177;v++)H[v]=0;for(v=22181;v<=22187;v++)H[v]=0;for(v=22191;v<=22197;v++)H[v]=0;for(v=22207;v<=22222;v++)H[v]=0;for(v=22229;v<=22232;v++)H[v]=0;for(v=22234;v<=22236;v++)H[v]=0;for(v=22243;v<=22250;v++)H[v]=0;for(v=22262;v<=22265;v++)H[v]=0;for(v=22307;v<=22322;v++)H[v]=0;for(v=22348;v<=22357;v++)H[v]=0;for(v=22407;v<=22422;v++)H[v]=0;for(v=22462;v<=22465;v++)H[v]=0;for(v=22521;v<=22525;v++)H[v]=0;for(v=22607;v<=22622;v++)H[v]=0;for(v=22641;v<=22646;v++)H[v]=0;for(v=22648;v<=22657;v++)H[v]=0;for(v=22707;v<=22722;v++)H[v]=0;for(v=22762;v<=22765;v++)H[v]=0;for(v=22807;v<=22822;v++)H[v]=0;for(v=22991;v<=22994;v++)H[v]=0;for(v=23028;v<=23038;v++)H[v]=0;for(v=23301;v<=23333;v++)H[v]=2;for(v=23830;v<=23853;v++)H[v]=0;for(v=23866;v<=23872;v++)H[v]=0;for(v=23877;v<=23884;v++)H[v]=0;for(v=23886;v<=23894;v++)H[v]=0;for(v=23946;v<=23948;v++)H[v]=0;for(v=24311;v<=24313;v++)H[v]=0;for(v=24342;v<=24347;v++)H[v]=0;for(v=24370;v<=24374;v++)H[v]=10;for(v=24375;v<=24381;v++)H[v]=0;for(v=24718;v<=24721;v++)H[v]=0;for(v=24817;v<=24821;v++)H[v]=0;for(v=24877;v<=24882;v++)H[v]=0;for(v=24891;v<=24893;v++)H[v]=0;for(v=25391;v<=25395;v++)H[v]=0;for(v=25828;v<=25838;v++)H[v]=0;for(v=26191;v<=26195;v++)H[v]=0;for(v=26391;v<=26393;v++)H[v]=0;for(v=26701;v<=26722;v++)H[v]=0;for(v=26729;v<=26799;v++)H[v]=2;for(v=26801;v<=26803;v++)H[v]=2;for(v=26811;v<=26813;v++)H[v]=2;for(v=26847;v<=26870;v++)H[v]=2;for(v=26891;v<=26899;v++)H[v]=0;for(v=26901;v<=26923;v++)H[v]=0;for(v=26929;v<=26946;v++)H[v]=0;for(v=26948;v<=26998;v++)H[v]=0;for(v=27037;v<=27040;v++)H[v]=0;for(v=27205;v<=27232;v++)H[v]=0;for(v=27258;v<=27260;v++)H[v]=0;for(v=27391;v<=27398;v++)H[v]=0;for(v=27561;v<=27564;v++)H[v]=0;for(v=27571;v<=27574;v++)H[v]=0;for(v=27581;v<=27584;v++)H[v]=0;for(v=27591;v<=27594;v++)H[v]=0;for(v=27700;v<=27707;v++)H[v]=0;for(v=28191;v<=28193;v++)H[v]=0;for(v=28348;v<=28358;v++)H[v]=0;for(v=28402;v<=28432;v++)H[v]=0;for(v=28462;v<=28492;v++)H[v]=0;for(v=29118;v<=29122;v++)H[v]=0;for(v=29168;v<=29172;v++)H[v]=0;for(v=29177;v<=29185;v++)H[v]=0;for(v=29187;v<=29195;v++)H[v]=0;for(v=29900;v<=29903;v++)H[v]=0;for(v=30161;v<=30179;v++)H[v]=0;for(v=30491;v<=30494;v++)H[v]=0;for(v=30729;v<=30732;v++)H[v]=0;for(v=31251;v<=31259;v++)H[v]=0;for(v=31265;v<=31268;v++)H[v]=0;for(v=31275;v<=31279;v++)H[v]=0;for(v=31281;v<=31297;v++)H[v]=0;for(v=31461;v<=31469;v++)H[v]=0;for(v=31491;v<=31495;v++)H[v]=0;for(v=31917;v<=31922;v++)H[v]=0;for(v=31965;v<=32e3;v++)H[v]=0;for(v=32001;v<=32003;v++)H[v]=2;for(v=32005;v<=32031;v++)H[v]=2;for(v=32033;v<=32060;v++)H[v]=2;for(v=32064;v<=32067;v++)H[v]=2;for(v=32074;v<=32077;v++)H[v]=2;for(v=32081;v<=32086;v++)H[v]=0;for(v=32107;v<=32130;v++)H[v]=0;for(v=32133;v<=32159;v++)H[v]=0;for(v=32164;v<=32167;v++)H[v]=2;for(v=32180;v<=32199;v++)H[v]=0;for(v=32201;v<=32260;v++)H[v]=0;for(v=32301;v<=32360;v++)H[v]=0;for(v=32401;v<=32460;v++)H[v]=0;for(v=32501;v<=32560;v++)H[v]=0;for(v=32601;v<=32662;v++)H[v]=0;for(v=32664;v<=32667;v++)H[v]=2;for(v=32701;v<=32761;v++)H[v]=0;for(v=53001;v<=53004;v++)H[v]=0;for(v=53008;v<=53019;v++)H[v]=0;for(v=53021;v<=53032;v++)H[v]=0;for(v=53034;v<=53037;v++)H[v]=0;for(v=53042;v<=53046;v++)H[v]=0;for(v=53074;v<=53080;v++)H[v]=0;for(v=54001;v<=54004;v++)H[v]=0;for(v=54008;v<=54019;v++)H[v]=0;for(v=54021;v<=54032;v++)H[v]=0;for(v=54034;v<=54037;v++)H[v]=0;for(v=54042;v<=54046;v++)H[v]=0;for(v=54048;v<=54053;v++)H[v]=0;for(v=54074;v<=54080;v++)H[v]=0;for(v=54090;v<=54096;v++)H[v]=0;for(v=54098;v<=54101;v++)H[v]=0;for(v=65161;v<=65163;v++)H[v]=0;for(v=102001;v<=102040;v++)H[v]=0;for(v=102042;v<=102063;v++)H[v]=0;for(v=102065;v<=102067;v++)H[v]=0;for(v=102070;v<=102117;v++)H[v]=0;for(v=102122;v<=102216;v++)H[v]=0;for(v=102221;v<=102377;v++)H[v]=0;for(v=102382;v<=102388;v++)H[v]=0;for(v=102389;v<=102398;v++)H[v]=2;for(v=102399;v<=102444;v++)H[v]=0;for(v=102445;v<=102447;v++)H[v]=2;for(v=102448;v<=102458;v++)H[v]=0;for(v=102459;v<=102468;v++)H[v]=2;for(v=102469;v<=102499;v++)H[v]=0;for(v=102500;v<=102519;v++)H[v]=1;for(v=102520;v<=102524;v++)H[v]=0;for(v=102525;v<=102529;v++)H[v]=2;for(v=102530;v<=102588;v++)H[v]=0;for(v=102590;v<=102598;v++)H[v]=0;for(v=102601;v<=102603;v++)H[v]=0;for(v=102605;v<=102628;v++)H[v]=0;for(v=102629;v<=102646;v++)H[v]=2;for(v=102648;v<=102700;v++)H[v]=2;for(v=102701;v<=102703;v++)H[v]=0;for(v=102707;v<=102730;v++)H[v]=2;for(v=102733;v<=102758;v++)H[v]=2;for(v=102767;v<=102900;v++)H[v]=0;for(v=102901;v<=102933;v++)H[v]=2;for(v=102934;v<=102950;v++)H[v]=13;for(v=102951;v<=102963;v++)H[v]=0;for(v=102965;v<=102969;v++)H[v]=0;for(v=102971;v<=102973;v++)H[v]=0;for(v=102975;v<=102989;v++)H[v]=0;for(v=102990;v<=102992;v++)H[v]=1;for(v=102997;v<=103002;v++)H[v]=0;for(v=103003;v<=103008;v++)H[v]=2;for(v=103009;v<=103011;v++)H[v]=0;for(v=103012;v<=103014;v++)H[v]=2;for(v=103019;v<=103021;v++)H[v]=0;for(v=103022;v<=103024;v++)H[v]=2;for(v=103029;v<=103031;v++)H[v]=0;for(v=103032;v<=103034;v++)H[v]=2;for(v=103065;v<=103068;v++)H[v]=0;for(v=103074;v<=103076;v++)H[v]=0;for(v=103077;v<=103079;v++)H[v]=1;for(v=103080;v<=103082;v++)H[v]=0;for(v=103083;v<=103085;v++)H[v]=2;for(v=103090;v<=103093;v++)H[v]=0;for(v=103097;v<=103099;v++)H[v]=0;for(v=103100;v<=103102;v++)H[v]=2;for(v=103107;v<=103109;v++)H[v]=0;for(v=103110;v<=103112;v++)H[v]=2;for(v=103113;v<=103116;v++)H[v]=0;for(v=103117;v<=103120;v++)H[v]=2;for(v=103153;v<=103157;v++)H[v]=0;for(v=103158;v<=103162;v++)H[v]=2;for(v=103163;v<=103165;v++)H[v]=0;for(v=103166;v<=103168;v++)H[v]=1;for(v=103169;v<=103171;v++)H[v]=2;for(v=103186;v<=103188;v++)H[v]=0;for(v=103189;v<=103191;v++)H[v]=2;for(v=103192;v<=103195;v++)H[v]=0;for(v=103196;v<=103199;v++)H[v]=2;for(v=103200;v<=103224;v++)H[v]=0;for(v=103225;v<=103227;v++)H[v]=1;for(v=103232;v<=103237;v++)H[v]=0;for(v=103238;v<=103243;v++)H[v]=2;for(v=103244;v<=103246;v++)H[v]=0;for(v=103247;v<=103249;v++)H[v]=2;for(v=103254;v<=103256;v++)H[v]=0;for(v=103257;v<=103259;v++)H[v]=2;for(v=103264;v<=103266;v++)H[v]=0;for(v=103267;v<=103269;v++)H[v]=2;for(v=103300;v<=103375;v++)H[v]=0;for(v=103381;v<=103383;v++)H[v]=0;for(v=103384;v<=103386;v++)H[v]=1;for(v=103387;v<=103389;v++)H[v]=0;for(v=103390;v<=103392;v++)H[v]=2;for(v=103397;v<=103399;v++)H[v]=0;for(v=103400;v<=103471;v++)H[v]=2;for(v=103476;v<=103478;v++)H[v]=0;for(v=103479;v<=103481;v++)H[v]=2;for(v=103486;v<=103488;v++)H[v]=0;for(v=103489;v<=103491;v++)H[v]=2;for(v=103492;v<=103495;v++)H[v]=0;for(v=103496;v<=103499;v++)H[v]=2;for(v=103528;v<=103543;v++)H[v]=0;for(v=103544;v<=103548;v++)H[v]=2;for(v=103549;v<=103551;v++)H[v]=0;for(v=103552;v<=103554;v++)H[v]=1;for(v=103555;v<=103557;v++)H[v]=2;for(v=103558;v<=103560;v++)H[v]=0;for(v=103571;v<=103573;v++)H[v]=0;for(v=103574;v<=103576;v++)H[v]=2;for(v=103577;v<=103580;v++)H[v]=0;for(v=103581;v<=103583;v++)H[v]=2;for(v=103595;v<=103694;v++)H[v]=0;for(v=103696;v<=103699;v++)H[v]=0;for(v=103700;v<=103793;v++)H[v]=2;for(v=103794;v<=103890;v++)H[v]=0;for(v=103891;v<=103896;v++)H[v]=2;for(v=103900;v<=103971;v++)H[v]=2;for(v=103972;v<=103977;v++)H[v]=0;for(v=112e3;v<=112101;v++)H[v]=0;const Ime=[102100,102113,3857,3785,900913],F8e=[104905,104971],$8e=[104903],V8e=[4326,...Ime,...F8e,...$8e],rA=[-20037508342788905e-9,20037508342788905e-9],L9=[-20037508342787e-6,20037508342787e-6],Yj={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:rA,origin:L9,dx:1e-5},Pme={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:rA,origin:L9,dx:1e-5},102100:Yj,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:rA,origin:L9,dx:1e-5},3857:Yj,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Yj,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function yo(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const n=t.wkid,r=e.wkid;if(n!=null||r!=null){if(n===r||Gd(t)&&Gd(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&n===a}let i,s;return t.wkt2&&e.wkt2?(i=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(i=t.wkt,s=e.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function Ua(t){const e=t?.wkid;return e!=null&&e>=2e3&&Pme[e]||null}function Rme(t){if(!t)return;const{wkid:e,vcsWkid:n}=t;if(e)return n?JSON.stringify({wkid:e,vcsWkid:n}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?n?{wkt:r,vcsWkid:n}:{wkt:r}:{})}function Ab(t){if(!fc(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const n=t.wkt2||t.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function z8e(t){return!(Mme(t)||Nme(t))}function q1(t){return t?.wkid===4326}function ePt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function nte(t){return t?.wkid===4490}function Gd(t){const e=t?.wkid;return e!=null&&e>=2e3&&Ime.includes(e)}function G8e(t){return t?.wkid===32662}function tO(t){return t===104971||t===104905}function Mme(t){return tO(t?.wkid)}function nO(t){return t===104903}function Nme(t){return nO(t?.wkid)}function U8e(t){const e=t?.wkid;return e!=null&&e>=2e3&&V8e.includes(e)}function fc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Lme={wkid:4326,wkt:Hfe(Pme[4326].wkTemplate,{Central_Meridian:"0.0"})},Ome={wkid:102100,latestWkid:3857},B8e={wkid:32662};function sW(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const W8e=sW(ss),oW=sW(Id),aW=sW(Xg),H8e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ss.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},q8e=oW.wkt.toUpperCase(),K8e=aW.wkt.toUpperCase();function Y8e(t){if(t!=null&&fc(t)){const e=t.wkid,n=t.wkt2??t.wkt;if(tO(e))return Id;const r=n?.toUpperCase();if(n&&r===q8e)return Id;if(nO(e)||r&&r===K8e)return Xg}return ss}function tPt(t){return tO(t)?Id:nO(t)?Xg:ss}function mN(t){return yo(t,W8e)}function Jg(t){return mN(t)||yo(t,oW)||yo(t,aW)}const nPt=39.37,X8e=ss.radius*Math.PI/200,Dme=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,L2=H,jme=/UNIT\[([^\]]+)]/i,Z8e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),J8e=Dl()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Ou=t=>t*t,xm=t=>t*t*t,iA={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ou(.001)},"square-centimeters":{inBaseUnits:Ou(.01)},"square-decimeters":{inBaseUnits:Ou(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ou(1e3)},"square-inches":{inBaseUnits:Ou(.0254)},"square-feet":{inBaseUnits:Ou(.3048)},"square-yards":{inBaseUnits:Ou(.9144)},"square-miles":{inBaseUnits:Ou(1609.344)},"square-nautical-miles":{inBaseUnits:Ou(1852)},"square-us-feet":{inBaseUnits:Ou(1200/3937)},acres:{inBaseUnits:.0015625*Ou(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*xm(.001)},"cubic-centimeters":{inBaseUnits:1e3*xm(.01)},"cubic-decimeters":{inBaseUnits:1e3*xm(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*xm(1e3)},"cubic-inches":{inBaseUnits:1e3*xm(.0254)},"cubic-feet":{inBaseUnits:1e3*xm(.3048)},"cubic-yards":{inBaseUnits:1e3*xm(.9144)},"cubic-miles":{inBaseUnits:1e3*xm(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Q8e=(()=>{const t={};for(const e in iA)for(const n in iA[e].units)t[n]=e;return t})();function e9e(t,e,n){return t*iA[n].units[e].inBaseUnits}function t9e(t,e,n){return t/iA[n].units[e].inBaseUnits}const n9e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],r9e=["metric","imperial"],Fme=[...r9e,...n9e],i9e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function O9(t){const e=Q8e[t];if(!e)throw new Error("unknown type");return e}function rte(t,e=null){return e=e||O9(t),iA[e].baseUnit===t}function wh(t,e,n){if(e===n)return t;const r=O9(e);if(r!==O9(n))throw new Error("incompatible units");const i=rte(e,r)?t:e9e(t,e,r);return rte(n,r)?i:t9e(i,n,r)}function rPt(t,e,n,r=!1){if(!r&&Ab(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const i=wv(e);return i!==n&&(t=i?wh(t,i,n):wh(t*=Jd(e),"meters",n)),t}function iPt(t,e,n,r=!1){if(!r&&Ab(n))throw new Error("Unable to convert from a linear unit to an angular unit.");const i=wv(n);return e!==i&&(t=i?wh(t,e,i):wh(t,e,"meters")/Jd(n)),t}function s9e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function sPt(t){return s9e(t)}function oPt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function aPt(t,e,n){switch(n){case"metric":return o9e(t,e);case"imperial":return l9e(t,e);default:return n}}function lPt(t,e,n){switch(n){case"metric":return a9e(t,e);case"imperial":return c9e(t,e);default:return n}}function o9e(t,e){const n=wh(t,e,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function a9e(t,e){const n=wh(t,e,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function l9e(t,e){const n=wh(t,e,"feet");return Math.abs(n)<1e3?"feet":"miles"}function c9e(t,e){const n=wh(t,e,"feet");return Math.abs(n)<1e5?"feet":"miles"}function cPt(t,e){const n=wh(t,e,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function uPt(t,e){const n=wh(t,e,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function hPt(t,e,n){return wh(t,e,"meters")/(n*Math.PI/180)}function lW(t){return J8e.fromJSON(t.toLowerCase())||null}function ite(t){if(t!=null&&!z8e(t))return 1;const e=Jd(t);return e>1e5?1:e}function $me(t){return Jd(t)>=Y8e(t).metersPerDegree?"meters":wv(t)}function Jd(t,e=ss.metersPerDegree){return u9e(t,!0)??e}function u9e(t,e=!1){const n=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(n){if(tO(n))return Id.metersPerDegree;if(nO(n))return Xg.metersPerDegree;i=L2.values[L2[n]],!i&&e&&Z8e.has(n)&&(i=X8e)}else r&&(Gme(r)?i=ste(Dme.exec(r),i):zme(r)&&(i=ste(jme.exec(r),i)));return i}function dPt(t){return Ab(t)?1:Jd(t)}function ste(t,e){return t?.[1]?Vme(t[1]):e}function Vme(t){return parseFloat(t.split(",")[1])}function wv(t){const e=t?.wkid??null,n=t?.wkt2??t?.wkt??null;let r=null;if(e)r=L2.units[L2[e]];else if(n){const i=Gme(n)?Dme:zme(n)?jme:null;if(i){const s=i.exec(n);s?.[1]&&(r=d9e(s[1]))}}return r!=null?lW(r):null}function fPt(t){const e=wv(t);return e!=null&&Fme.includes(e)?e:null}function pPt(t){const e=$me(t);return e!=null&&Fme.includes(e)?e:null}function mPt(t){const e=wv(t);return e==null?null:i9e.get(e)}function zme(t){return/^GEOCCS/i.test(t)}function Gme(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const h9e=1e-7;function d9e(t){let n=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!n||!lW(n)){const r=Vme(t);n=null;const i=L2.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<h9e){n=L2.units[s];break}}return n}function gPt(t){const e=wv(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const f9e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},p9e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},m9e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},yPt=Dl()(f9e),vPt=Dl()(p9e),_Pt=Dl()(m9e);var Zh,gd;let Wt=(gd=class extends qt{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Zh.WebMercator;if(e?.wkid===4326)return Zh.WGS84;const n=new Zh;return n.read(e),n}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return q1(this)}get isWebMercator(){return Gd(this)}get isGeographic(){return Ab(this)}get isWrappable(){return U8e(this)}get metersPerUnit(){return Jd(this)}get unit(){return wv(this)||(this.isGeographic?"degrees":null)}writeWkt(e,n){this.wkid||(n.wkt=e)}clone(){if(this===Zh.WGS84)return new Zh(Lme);if(this===Zh.WebMercator)return new Zh(Ome);const e=new Zh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=et(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:n,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return n==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===n&&s.referenceServiceName===r:s.id===n}return yo(this,e)}toJSON(e){return this.write(void 0,e)}},Zh=gd,gd.GCS_NAD_1927=null,gd.WGS84=null,gd.WebMercator=null,gd.PlateCarree=null,gd);x([E({readOnly:!0})],Wt.prototype,"isWGS84",null),x([E({readOnly:!0})],Wt.prototype,"isWebMercator",null),x([E({readOnly:!0})],Wt.prototype,"isGeographic",null),x([E({readOnly:!0})],Wt.prototype,"isWrappable",null),x([E({type:jr,json:{write:!0}})],Wt.prototype,"latestWkid",void 0),x([E({readOnly:!0})],Wt.prototype,"metersPerUnit",null),x([E({readOnly:!0})],Wt.prototype,"unit",null),x([E({type:jr,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Wt.prototype,"wkid",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Wt.prototype,"wkt",void 0),x([er("wkt"),er("web-scene","wkt")],Wt.prototype,"writeWkt",null),x([E({type:String,json:{write:!1}})],Wt.prototype,"wkt2",void 0),x([E({type:jr,json:{write:!0}})],Wt.prototype,"vcsWkid",void 0),x([E({type:jr,json:{write:!0}})],Wt.prototype,"latestVcsWkid",void 0),x([E()],Wt.prototype,"imageCoordinateSystem",void 0),Wt=Zh=x([he("esri.geometry.SpatialReference")],Wt),Wt.prototype.toJSON.isDefaultToJSON=!0,Wt.GCS_NAD_1927=Kt.freeze(new Wt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Wt.WGS84=Kt.freeze(new Wt(Lme)),Wt.WebMercator=Kt.freeze(new Wt(Ome)),Wt.PlateCarree=Kt.freeze(new Wt(B8e));function cr(t,e,n){let r,i;return e===void 0||Array.isArray(e)?(i=t,n=e,r=[void 0]):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=YB(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],n&&(c.read.source=(c.read.source||[]).concat(n))})}}let Us=class extends qt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Wt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,n){if(e instanceof Wt)return e;if(e!=null){const r=new Wt;return r.read(e,n),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,n){this.cache[e]=n}};x([E()],Us.prototype,"type",void 0),x([E({readOnly:!0})],Us.prototype,"cache",null),x([E({readOnly:!0})],Us.prototype,"extent",null),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Us.prototype,"hasM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Us.prototype,"hasZ",void 0),x([E({type:Wt,json:{write:!0},value:Wt.WGS84})],Us.prototype,"spatialReference",void 0),x([cr("spatialReference")],Us.prototype,"readSpatialReference",null),Us=x([he("esri.geometry.Geometry")],Us);const g9e=Object.prototype.toString;function y9e(t){const e="__accessorMetadata__"in t?qa(t):t;return function(...n){if(n.push(e),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return v9e.apply(this,n)}}function v9e(t,e,n,r){RC(t,e).cast=r}function _9e(t){return(e,n)=>{RC(e,t).cast=e[n]}}function Ks(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&g9e.call(t[0])==="[object Function]"?y9e(t[0]):t.length===1&&typeof t[0]=="string"?_9e(t[0]):void 0}function O2(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new Qe("internal:mesh","Mesh geometries are not supported for this operation")}function x9e(t){t.forEach(O2)}const w9e=57.29577951308232,b9e=.017453292519943;function ote(t){return t*w9e}function ate(t){return t*b9e}function wPt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/ss.radius))}function D9(t){return t.wkid!=null||t.wkt!=null}const Xj=[0,0];function gN(t,e,n,r,i){const s=t,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,Xj,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,Xj,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,Xj,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const h=a[u];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(e(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function jM(t,e){const n=t&&(D9(t)?t:t.spatialReference),r=e&&(D9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!n||!r)&&(!!yo(r,n)||Gd(r)&&q1(n)||Gd(n)&&q1(r))}function rO(t,e){if(t==null)return null;const n=t.spatialReference,r=e&&(D9(e)?e:e.spatialReference);return jM(n,r)?yo(n,r)?et(t):Gd(r)?gN(t,Mx,Wt.WebMercator,!1,et(t)):q1(r)?gN(t,iO,Wt.WGS84,!1,et(t)):null:null}function Mx(t,e,n=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=ate(e);return n[0]=ate(t)*ss.radius,n[1]=ss.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function iO(t,e,n=[0,0],r=!1){if(t===rA[0])n[0]=-180;else if(t===rA[1])n[0]=180;else{const i=ote(t/ss.radius);n[0]=r?i:i-360*Math.floor((i+180)/360)}return n[1]=ote(Math.PI/2-2*Math.atan(Math.exp(-e/ss.radius))),n}function h1(t,e=!1,n=et(t)){return O2(t),O2(n),gN(t,Mx,Wt.WebMercator,e,n)}function SS(t,e=!1,n=et(t)){return O2(t),O2(n),gN(t,iO,Wt.WGS84,e,n)}function Ume(t,e){const n=t.x-e.x,r=t.y-e.y,i=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(n*n+r*r+i*i)}function E9e(t){return Bme(t,Wme)?.[0]??null}function S9e(t){return Bme(t,Wme)?.[1]??null}function Bme({x:t,y:e,spatialReference:n},r=[0,0]){if(n){if(Gd(n))return iO(t,e,r);if(Ab(n))return r[0]=t,r[1]=e,r}return null}const Wme=[0,0];var FM;const Zj=[0,0];function lte(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Qt=FM=class extends Us{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const n=t._get("spatialReference");e._set("spatialReference",Kt.isFrozen(n)?n:n.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,n,r,i){let s;if(Array.isArray(t))s=t,i=e,t=s[0],e=s[1],n=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Wt(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)kt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)kt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i?.isWebMercator){const a=Mx(s.longitude,s.latitude,Zj);t=a[0],e=a[1]}}}else lte(n)?(i=n,n=null):lte(r)&&(i=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?kt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&kt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return S9e(this)}set latitude(t){const{spatialReference:e,x:n}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Mx(n,t,Zj)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return E9e(this)}set longitude(t){const{y:e,spatialReference:n}=this;t!=null&&n&&(n.isWebMercator?this._set("x",Mx(t,e,Zj)[0]):n.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,n){e[n]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new FM;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return FM.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:u}=t;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=Mx(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=iO(l,c),u=s}return e===l&&n===c&&r===o&&i===a&&s.wkid===u.wkid}offset(t,e,n){return this.x+=t,this.y+=e,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const t=Ua(this.spatialReference);if(!t)return this;let e=this.x;const[n,r]=t.valid,i=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i),this._set("x",e),this}distance(t){return Ume(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],Qt.prototype,"cache",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasM",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasZ",null),x([E({type:Number})],Qt.prototype,"latitude",null),x([E({type:Number})],Qt.prototype,"longitude",null),x([E({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ks(t=>isNaN(t)?t:ac(t))],Qt.prototype,"x",void 0),x([er("x")],Qt.prototype,"writeX",null),x([cr("x")],Qt.prototype,"readX",null),x([E({type:Number,json:{write:!0}})],Qt.prototype,"y",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Qt.prototype,"z",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Qt.prototype,"m",void 0),Qt=FM=x([he("esri.geometry.Point")],Qt),Qt.prototype.toJSON.isDefaultToJSON=!0;const Jj=[0,0];function OC(t,e){return e!=null&&Pa(t,e.x,e.y,e.z)}function bPt(t,e){if(!e.points?.length)return!1;for(const n of e.points)if(!D2(t,n))return!1;return!0}function T9e(t,e){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Pa(t,n,r,i)&&Pa(t,n,o,i)&&Pa(t,s,o,i)&&Pa(t,s,r,i)&&Pa(t,n,r,a)&&Pa(t,n,o,a)&&Pa(t,s,o,a)&&Pa(t,s,r,a):Pa(t,n,r)&&Pa(t,n,o)&&Pa(t,s,o)&&Pa(t,s,r)}function D2(t,e){return Pa(t,e[0],e[1])}function k9e(t,e){return Pa(t,e[0],e[1],e[2])}function Pa(t,e,n,r){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function cW(t,e){return Jj[1]=e.y,Jj[0]=e.x,A9e(t,Jj)}function A9e(t,e){return uW(t.rings,e)}function uW(t,e){if(!t||t.length<1)return!1;if(C9e(t))return cte(!1,t,e);let n=!1;for(let r=0,i=t.length;r<i;r++)n=cte(n,t[r],e);return n}function C9e(t){return!Array.isArray(t[0][0])}function cte(t,e,n){const[r,i]=n;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=e[a],[h,f]=e[o];(u<i&&f>=i||f<i&&u>=i)&&c+(i-u)/(f-u)*(h-c)<r&&(s=!s)}return s}function I9e(t,e){return OC(t,e)}function P9e(t,e){const n=t.hasZ&&e.hasZ;let r,i,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(i=e.ymin,t.ymax<i)return!1}else if(i=t.ymin,e.ymax<i)return!1;if(n&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function R9e(t,e){const{points:n,hasZ:r}=e,i=r?k9e:D2;for(const s of n)if(i(t,s))return!0;return!1}const K1=[0,0],Y1=[0,0],X1=[0,0],Z1=[0,0],M9e=[K1,Y1,X1,Z1],Hme=[[X1,K1],[K1,Y1],[Y1,Z1],[Z1,X1]];function N9e(t,e){return L9e(t,e.rings)}function L9e(t,e){K1[0]=t.xmin,K1[1]=t.ymax,Y1[0]=t.xmax,Y1[1]=t.ymax,X1[0]=t.xmin,X1[1]=t.ymin,Z1[0]=t.xmax,Z1[1]=t.ymin;for(const n of M9e)if(uW(e,n))return!0;for(const n of e){if(!n.length)continue;let r=n[0];if(D2(t,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(D2(t,s)||qme(r,s,Hme))return!0;r=s}}return!1}function O9e(t,e){K1[0]=t.xmin,K1[1]=t.ymax,Y1[0]=t.xmax,Y1[1]=t.ymax,X1[0]=t.xmin,X1[1]=t.ymin,Z1[0]=t.xmax,Z1[1]=t.ymin;const n=e.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(D2(t,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(D2(t,o)||qme(i,o,Hme))return!0;i=o}}return!1}const no=[0,0];function D9e(t){for(let e=0;e<t.length;e++){const n=t[e];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],u=t[a][l+1];if(j9(s,o,c,u,no)&&!(no[0]===s[0]&&no[1]===s[1]||no[0]===c[0]&&no[1]===c[1]||no[0]===o[0]&&no[1]===o[1]||no[0]===u[0]&&no[1]===u[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let l=i+2;l<s;l++){const c=n[l],u=n[l+1];if(j9(o,a,c,u,no)&&!(no[0]===o[0]&&no[1]===o[1]||no[0]===c[0]&&no[1]===c[1]||no[0]===a[0]&&no[1]===a[1]||no[0]===u[0]&&no[1]===u[1]))return!0}}}return!1}function qme(t,e,n){for(let r=0;r<n.length;r++)if(j9(t,e,n[r][0],n[r][1]))return!0;return!1}function j9(t,e,n,r,i){const[s,o]=t,[a,l]=e,[c,u]=n,[h,f]=r,g=h-c,y=s-c,_=a-s,b=f-u,T=o-u,A=l-o,C=b*_-g*A;if(C===0)return!1;const I=(g*T-b*y)/C,R=(_*T-A*y)/C;return I>=0&&I<=1&&R>=0&&R<=1&&(i&&(i[0]=s+I*(a-s),i[1]=o+I*(l-o)),!0)}function j9e(t){switch(t){case"esriGeometryEnvelope":case"extent":return P9e;case"esriGeometryMultipoint":case"multipoint":return R9e;case"esriGeometryPoint":case"point":return I9e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return N9e;case"esriGeometryPolyline":case"polyline":return O9e}}var Bu;function F9e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function wm(t,e,n){return e==null?n:n==null?e:t(e,n)}let Vn=Bu=class extends Us{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,n,r,i){return F9e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Wt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:n,ymax:r,spatialReference:i??Wt.WGS84}}static fromPoint(t){return new Bu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Qt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Bu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&jM(e,n)&&(t=e.isWebMercator?h1(t):SS(t,!0)),t.type==="point"?OC(this,t):t.type==="extent"&&T9e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&jM(e,n)&&(t=e.isWebMercator?h1(t):SS(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),n=this.width*e,r=this.height*e;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*e;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*e;this.mmin+=i,this.mmax-=i}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,n=t.spatialReference;return e&&n&&!yo(e,n)&&jM(e,n)&&(t=e.isWebMercator?h1(t):SS(t,!0)),j9e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,n){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=wm(Math.min,this.zmin,t.zmin),this.zmax=wm(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=wm(Math.min,this.mmin,t.mmin),this.mmax=wm(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=wm(Math.max,this.zmin,t.zmin),this.zmax=wm(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=wm(Math.max,this.mmin,t.mmin),this.mmax=wm(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Ua(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,n=this._getCM(t);if(n){const r=e.isWebMercator?SS(n):n;this.xmin-=n.x,this.xmax-=n.x,e.isWebMercator||(r.x=Qj(r.x,t).x),this.spatialReference=new Wt(Hfe((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[n,r]=t.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(e=this.center),e}_normalize(t,e,n){const r=this.spatialReference;if(!r)return this;const i=n??Ua(r);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(t)return this._shiftCM(i);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;t=t||Ua(o);const[h,f]=t.valid;u=Qj(this.xmin,t);const g=u.x,y=u.frameId;u=Qj(this.xmax,t);const _=u.x,b=u.frameId,T=g===_&&a>0;if(a>2*f){const A=new Bu(l<c?g:_,i,f,s,o),C=new Bu(h,i,l<c?_:g,s,o),I=new Bu(0,i,f,s,o),R=new Bu(h,i,0,s,o),V=[],P=[];A.contains(I)&&V.push(y),A.contains(R)&&P.push(y),C.contains(I)&&V.push(b),C.contains(R)&&P.push(b);for(let N=y+1;N<b;N++)V.push(N),P.push(N);e.push({extent:A,frameIds:[y]},{extent:C,frameIds:[b]},{extent:I,frameIds:V},{extent:R,frameIds:P})}else g>_||T?e.push({extent:new Bu(g,i,f,s,o),frameIds:[y]},{extent:new Bu(h,i,_,s,o),frameIds:[b]}):e.push({extent:new Bu(g,i,_,s,o),frameIds:[y]});this.cache._parts=e}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(i)}return e}};function Qj(t,e){const[n,r]=e.valid,i=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i,o=s):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i,o=-s),{x:t,frameId:o}}x([E({readOnly:!0})],Vn.prototype,"cache",null),x([E({readOnly:!0})],Vn.prototype,"center",null),x([E({readOnly:!0})],Vn.prototype,"extent",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasM",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasZ",null),x([E({readOnly:!0})],Vn.prototype,"height",null),x([E({readOnly:!0})],Vn.prototype,"width",null),x([E({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Vn.prototype,"xmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"xmax",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmax",void 0),Vn=Bu=x([he("esri.geometry.Extent")],Vn),Vn.prototype.toJSON.isDefaultToJSON=!0;let IT;const $9e=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,F9=globalThis.document?.documentElement;function Kme(){const t=F9?.getAttribute("lang"),e=globalThis.navigator?.language;return $9e??t??e??"en"}function fu(){return IT===void 0&&(IT=Kme()),IT}const V9e=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function hW(t=fu()){return Xme(t)?.language}function Yme(t=fu()){const e=Xme(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function Xme(t=fu()){return V9e.exec(t)?.groups}const $M=[];function Zme(t){return $M.push(t),Zn(()=>{$M.splice($M.indexOf(t),1)})}const VM=[];function dW(t){return VM.push(t),Zn(()=>VM.splice(VM.indexOf(t),1))}function ute(){const t=Kme();IT!==t&&([...VM].forEach(e=>e(t)),IT=t,[...$M].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",ute),F9&&new MutationObserver(()=>{ute()}).observe(F9,{attributeFilter:["lang"]});let XP;function z9e(t){return XP&&!XP.destroyed||(XP=t()),XP}var $9;const G9e=new Xs({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ds=$9=class extends Kt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new $9({categories:this.categories?et(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=rO(this.extent,Wt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>G9e.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};x([E()],ds.prototype,"categories",void 0),x([E()],ds.prototype,"disableExtraQuery",void 0),x([E({type:Vn})],ds.prototype,"extent",void 0),x([E()],ds.prototype,"filter",void 0),x([E()],ds.prototype,"num",void 0),x([E()],ds.prototype,"query",void 0),x([E()],ds.prototype,"sortField",void 0),x([E()],ds.prototype,"sortOrder",null),x([E()],ds.prototype,"start",void 0),ds=$9=x([he("esri.portal.PortalQueryParams")],ds);var V9;let Hi=V9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const n=e.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):n})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new Qe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new V9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let n=qa(ds,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new ds,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",e)):(n=n?n.clone():new ds,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,e))}_fetchCategorySchemaSet(t,e){const n=this.portal;return n.fetchSelf(n.authMode,!0,e).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new ds({disableExtraQuery:!0,num:1,query:i});return n.queryGroups(s,e)}throw new Qe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new ds({num:1,query:`typekeywords:"${t}"`});return i.queryItems(s,e)}throw new Qe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(i=>{const s=i?.categorySchema;return s?.length?s:[]}):[])}};x([E()],Hi.prototype,"access",void 0),x([E({type:Date})],Hi.prototype,"created",void 0),x([E()],Hi.prototype,"description",void 0),x([E()],Hi.prototype,"id",void 0),x([E()],Hi.prototype,"isInvitationOnly",void 0),x([E({type:Date})],Hi.prototype,"modified",void 0),x([E()],Hi.prototype,"owner",void 0),x([E()],Hi.prototype,"portal",void 0),x([E()],Hi.prototype,"snippet",void 0),x([E()],Hi.prototype,"sortField",void 0),x([E()],Hi.prototype,"sortOrder",void 0),x([E()],Hi.prototype,"sourceJSON",void 0),x([E()],Hi.prototype,"tags",void 0),x([E()],Hi.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Hi.prototype,"thumbnailUrl",null),x([E()],Hi.prototype,"title",void 0),x([E({readOnly:!0})],Hi.prototype,"url",null),Hi=V9=x([he("esri.portal.PortalGroup")],Hi);let ly=class extends Kt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};x([E()],ly.prototype,"nextQueryParams",void 0),x([E()],ly.prototype,"queryParams",void 0),x([E()],ly.prototype,"results",void 0),x([E()],ly.prototype,"total",void 0),ly=x([he("esri.portal.PortalQueryResult")],ly);let Tf=class extends qt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Qe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};x([E({type:Date})],Tf.prototype,"created",void 0),x([E()],Tf.prototype,"id",void 0),x([E()],Tf.prototype,"portal",void 0),x([E()],Tf.prototype,"title",void 0),x([E({readOnly:!0})],Tf.prototype,"url",null),x([E()],Tf.prototype,"username",void 0),Tf=x([he("esri.portal.PortalFolder")],Tf);var z9;let Vr=z9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,n=t?.data,r=t?.folder,i={method:"post"};e&&(i.query=e.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let n=this.userContentUrl;t.ownerFolder&&(n+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const n=this.userContentUrl+"/deleteItems",r=[],i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:e}},o=await this.portal.request(n,s);for(const a of o.results){const l=t.find(h=>a.itemId===h.id),c=a.success;let u=null;c?(l.id=null,l.portal=null):a.error&&(u=new Qe("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:u})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let n;return n=e&&e.folders?e.folders.map(r=>{const i=Tf.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(n=>{const r=Hi.fromJSON(n);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:n}=await ge(()=>Promise.resolve().then(()=>Jme),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(e,{query:r});let s;return i?.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Hi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Qe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const n=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(n+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new Qe("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new z9({sourceJSON:t});return e.read(t),e}};x([E()],Vr.prototype,"access",void 0),x([E({type:Date})],Vr.prototype,"created",void 0),x([E()],Vr.prototype,"culture",void 0),x([E()],Vr.prototype,"description",void 0),x([E()],Vr.prototype,"email",void 0),x([E()],Vr.prototype,"favGroupId",void 0),x([E()],Vr.prototype,"fullName",void 0),x([E()],Vr.prototype,"id",void 0),x([E({type:Date})],Vr.prototype,"modified",void 0),x([E()],Vr.prototype,"orgId",void 0),x([E()],Vr.prototype,"portal",void 0),x([E()],Vr.prototype,"preferredView",void 0),x([E()],Vr.prototype,"privileges",void 0),x([E()],Vr.prototype,"region",void 0),x([E()],Vr.prototype,"role",void 0),x([E()],Vr.prototype,"roleId",void 0),x([E()],Vr.prototype,"sourceJSON",void 0),x([E()],Vr.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Vr.prototype,"thumbnailUrl",null),x([E()],Vr.prototype,"units",void 0),x([E({readOnly:!0})],Vr.prototype,"userContentUrl",null),x([E({readOnly:!0})],Vr.prototype,"url",null),x([E()],Vr.prototype,"username",void 0),x([E()],Vr.prototype,"userLicenseTypeId",void 0),x([E()],Vr.prototype,"userType",void 0),Vr=z9=x([he("esri.portal.PortalUser")],Vr);var Kl;let UE;const hte={PortalGroup:()=>Promise.resolve({default:Hi}),PortalItem:()=>ge(()=>Promise.resolve().then(()=>Jme),void 0),PortalUser:()=>Promise.resolve({default:Vr})};var yd;let ot=(yd=class extends g0(LC){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=nr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){dte.unregister(this),this.defaultBasemap=Di(this.defaultBasemap),this.defaultDevBasemap=Di(this.defaultDevBasemap),this.defaultVectorBasemap=Di(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ii(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const n of e)nr.request.trustedServers.includes(n)||nr.request.trustedServers.push(n);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,n=!e||this.canSearchPublic;return this.id&&!n?` AND orgid:${this.id}`:null}get hasAPIKey(){return Yje(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const n=e.indexOf("/sharing");e=n>0?e.slice(0,n):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,n=this.thumbnail;return e&&n?this._normalizeSSL(e+"/portals/self/resources/"+n):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let n=null;return e&&(n=Vr.fromJSON(e),n.portal=this),n}load(e){const n=ge(async()=>{const{default:r}=await Promise.resolve().then(()=>$ze);return{default:r}},void 0).then(({default:r})=>{gi(e),UE=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&Zr){const i=Zr;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==Kl.AUTH_MODE_AUTO&&this.authMode!==Kl.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",U9e(new WeakRef(this))),dte.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),n=(await ge(async()=>{const{default:r}=await import("./ElevationLayer-CdWKfD_0.js");return{default:r}},__vite__mapDeps([21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]))).default;return e?e.map(r=>new n({id:r.id,url:r.url})):[]}async fetchBasemaps(e,n){const r=await this._fetchBasemaps(e,n);if(n?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,n);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const n=new ds;n.query=this.default3DBasemapQuery,n.disableExtraQuery=!0;const r=(await this.queryItems(n,e)).results.find(i=>i.type==="Web Scene");return r?new UE({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(n=>n.categorySchema):va(e)?Promise.reject(Pr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(n=>n.classificationSchema):null}fetchFeaturedGroups(e){const n=this.featuredGroups,r=new ds({num:100,sortField:"title"});if(n?.length){const i=[];for(const s of n)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return va(e)?Promise.reject(Pr()):Promise.resolve([])}fetchRegions(e){const n=this.user?.culture||this.culture||fu();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:n}})}fetchSettings(e){const n=this.user?.culture||this.culture||fu();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:n}})}static getDefault(){return z9e(()=>new Kl)}queryGroups(e,n){return this.queryPortal("/community/groups",e,"PortalGroup",n)}queryItems(e,n){return this.queryPortal("/search",e,"PortalItem",n)}queryUsers(e,n){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",n)}fetchSelf(e=this.authMode,n=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:fu().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),n&&(s.query.default=!0),this.request(i,s)}queryPortal(e,n,r,i){const s=qa(ds,n),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(l=>{const c=s.clone();return c.start=l.nextStart,new ly({nextQueryParams:c,queryParams:s,total:l.total,results:Kl._resultsToTypedArray(a,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(mpe(c),l)));return r&&hte[r]?hte[r]().then(({default:a})=>(gi(i),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Qe("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Kl.AUTH_MODE_ANONYMOUS||this.authMode===Kl.AUTH_MODE_NO_PROMPT&&!Zr)return Promise.reject(new Qe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=n=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(n||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=n,this.fetchSelf("immediate"))):this.user&&this.credential===n?null:(this.credential=n,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Zr?Zr.getCredential(this.restUrl,{prompt:this.authMode!==Kl.AUTH_MODE_NO_PROMPT}).then(n=>e(n)):e(this.credential)}normalizeUrl(e){const n=this.credential?.token;return this._normalizeSSL(n?e+(e.includes("?")?"&":"?")+"token="+n:e)}requestToTypedArray(e,n,r){return this.request(e,n).then(i=>{const s=Kl._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():i)).then(()=>s,()=>s)})}request(e,n={}){const r={f:"json",...n.query},{authMode:i=this.authMode===Kl.AUTH_MODE_ANONYMOUS||this.authMode===Kl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=n,u={authMode:i,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return n.withCredentials&&(u.withCredentials=!0),rs(this._normalizeSSL(e),u).then(h=>h.data)}toJSON(){throw new Qe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Kl({sourceJSON:e})}_getHelperService(e){const n=this.helperServices?.[e];if(!n)throw new Qe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return n}async _fetchBasemaps(e,n){const r=new ds;r.query=e||(y9()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,n);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,n);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new UE({portalItem:a})):[]}async _fetchBasemaps3D(e,n){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(y9())return[];const i=new ds({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,n);if(!s.total)return[];const o=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=o.sortField||"name",i.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(i,n);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new UE({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const n=UE.fromJSON(e);return n.portalItem={portal:this},n}return null}static _resultsToTypedArray(e,n,r,i){let s;if(r){const o=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||n)&&(s=s.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,n);return typeof l.load=="function"&&l.load(o),l}))}else s=[];return s}},Kl=yd,yd.AUTH_MODE_ANONYMOUS="anonymous",yd.AUTH_MODE_AUTO="auto",yd.AUTH_MODE_IMMEDIATE="immediate",yd.AUTH_MODE_NO_PROMPT="no-prompt",yd);x([E()],ot.prototype,"access",void 0),x([E()],ot.prototype,"allSSL",void 0),x([E()],ot.prototype,"authMode",void 0),x([E()],ot.prototype,"authorizedCrossOriginDomains",void 0),x([cr("authorizedCrossOriginDomains")],ot.prototype,"readAuthorizedCrossOriginDomains",null),x([E()],ot.prototype,"basemapGalleryGroupQuery",void 0),x([E({json:{name:"3DBasemapGalleryGroupQuery"}})],ot.prototype,"basemapGalleryGroupQuery3D",void 0),x([E({json:{name:"g3DTilesGalleryGroupQuery"}})],ot.prototype,"g3DTilesGalleryGroupQuery",void 0),x([E({json:{name:"g3dTilesEnabled"}})],ot.prototype,"g3dTilesEnabled",void 0),x([E()],ot.prototype,"bingKey",void 0),x([E()],ot.prototype,"canListApps",void 0),x([E()],ot.prototype,"canListData",void 0),x([E()],ot.prototype,"canListPreProvisionedItems",void 0),x([E()],ot.prototype,"canProvisionDirectPurchase",void 0),x([E()],ot.prototype,"canSearchPublic",void 0),x([E()],ot.prototype,"canShareBingPublic",void 0),x([E()],ot.prototype,"canSharePublic",void 0),x([E()],ot.prototype,"canSignInArcGIS",void 0),x([E()],ot.prototype,"canSignInIDP",void 0),x([E()],ot.prototype,"colorSetsGroupQuery",void 0),x([E()],ot.prototype,"commentsEnabled",void 0),x([E({type:Date})],ot.prototype,"created",void 0),x([E()],ot.prototype,"credential",void 0),x([E()],ot.prototype,"culture",void 0),x([E()],ot.prototype,"currentVersion",void 0),x([E()],ot.prototype,"customBaseUrl",void 0),x([E()],ot.prototype,"default3DBasemapQuery",void 0),x([E()],ot.prototype,"defaultBasemap",void 0),x([cr("defaultBasemap")],ot.prototype,"readDefaultBasemap",null),x([E()],ot.prototype,"defaultDevBasemap",void 0),x([cr("defaultDevBasemap")],ot.prototype,"readDefaultDevBasemap",null),x([E({type:Vn})],ot.prototype,"defaultExtent",void 0),x([E()],ot.prototype,"defaultVectorBasemap",void 0),x([cr("defaultVectorBasemap")],ot.prototype,"readDefaultVectorBasemap",null),x([E()],ot.prototype,"description",void 0),x([E()],ot.prototype,"devBasemapGalleryGroupQuery",void 0),x([E()],ot.prototype,"eueiEnabled",void 0),x([E({readOnly:!0})],ot.prototype,"extraQuery",null),x([E()],ot.prototype,"featuredGroups",void 0),x([E()],ot.prototype,"featuredItemsGroupQuery",void 0),x([E()],ot.prototype,"galleryTemplatesGroupQuery",void 0),x([E()],ot.prototype,"layoutGroupQuery",void 0),x([E()],ot.prototype,"livingAtlasGroupQuery",void 0),x([E({readOnly:!0})],ot.prototype,"hasAPIKey",null),x([E()],ot.prototype,"hasCategorySchema",void 0),x([E()],ot.prototype,"hasClassificationSchema",void 0),x([E()],ot.prototype,"helpBase",void 0),x([E()],ot.prototype,"helperServices",void 0),x([E()],ot.prototype,"helpMap",void 0),x([E()],ot.prototype,"homePageFeaturedContent",void 0),x([E()],ot.prototype,"homePageFeaturedContentCount",void 0),x([E()],ot.prototype,"httpPort",void 0),x([E()],ot.prototype,"httpsPort",void 0),x([E()],ot.prototype,"id",void 0),x([E()],ot.prototype,"ipCntryCode",void 0),x([E({readOnly:!0})],ot.prototype,"isOrganization",null),x([E()],ot.prototype,"isPortal",void 0),x([E()],ot.prototype,"isReadOnly",void 0),x([E({readOnly:!0})],ot.prototype,"itemPageUrl",null),x([E()],ot.prototype,"layerTemplatesGroupQuery",void 0),x([E()],ot.prototype,"maxTokenExpirationMinutes",void 0),x([E({type:Date})],ot.prototype,"modified",void 0),x([E()],ot.prototype,"name",void 0),x([E()],ot.prototype,"portalHostname",void 0),x([E()],ot.prototype,"portalMode",void 0),x([E()],ot.prototype,"portalProperties",void 0),x([E()],ot.prototype,"region",void 0),x([E()],ot.prototype,"recycleBinEnabled",void 0),x([E({readOnly:!0})],ot.prototype,"restUrl",null),x([E()],ot.prototype,"rotatorPanels",void 0),x([E()],ot.prototype,"showHomePageDescription",void 0),x([E()],ot.prototype,"sourceJSON",void 0),x([E()],ot.prototype,"staticImagesUrl",void 0),x([E({json:{name:"2DStylesGroupQuery"}})],ot.prototype,"stylesGroupQuery2d",void 0),x([E({json:{name:"stylesGroupQuery"}})],ot.prototype,"stylesGroupQuery3d",void 0),x([E()],ot.prototype,"supportsHostedServices",void 0),x([E()],ot.prototype,"symbolSetsGroupQuery",void 0),x([E()],ot.prototype,"templatesGroupQuery",void 0),x([E()],ot.prototype,"thumbnail",void 0),x([E({readOnly:!0})],ot.prototype,"thumbnailUrl",null),x([E()],ot.prototype,"units",void 0),x([E()],ot.prototype,"url",void 0),x([E()],ot.prototype,"urlKey",void 0),x([cr("urlKey")],ot.prototype,"readUrlKey",null),x([E()],ot.prototype,"user",void 0),x([cr("user")],ot.prototype,"readUser",null),x([E()],ot.prototype,"use3dBasemaps",void 0),x([E()],ot.prototype,"useDefault3dBasemap",void 0),x([E()],ot.prototype,"useStandardizedQuery",void 0),x([E()],ot.prototype,"useVectorBasemaps",void 0),x([E()],ot.prototype,"vectorBasemapGalleryGroupQuery",void 0),ot=Kl=x([he("esri.portal.Portal")],ot);const dte=new FinalizationRegistry(t=>{t.remove()});function U9e(t){const e=Zr;return()=>{const n=t.deref();n&&e.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let kf=class extends Kt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:fte(e.path,e.portalItem)}:e}set path(e){e!=null&&kl(e)?kt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return fte(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",n){const r=this.cdnUrl;if(r==null)throw new Qe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:n?.cacheBust?Date.now():null},signal:n?.signal})}async update(e,n){const{addOrUpdateResources:r}=await ge(()=>import("./resourceUtils-BHBqvXpC.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:n?.compress,access:n?.access}],"update",n),this}hasPath(){return this.path!=null}};function fte(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&kl(t)&&(t=NB(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}x([E()],kf.prototype,"portalItem",void 0),x([E({type:String,value:null})],kf.prototype,"path",null),x([Ks("path")],kf.prototype,"_castPath",null),x([E({type:String,readOnly:!0})],kf.prototype,"url",null),x([E({type:String,readOnly:!0})],kf.prototype,"cdnUrl",null),x([E({type:String,readOnly:!0})],kf.prototype,"itemRelativeUrl",null),kf=x([he("esri.portal.PortalItemResource")],kf);let Hy=class extends Kt{constructor(e){super(e),this.created=null,this.rating=null}};x([E({type:Date})],Hy.prototype,"created",void 0),x([E()],Hy.prototype,"rating",void 0),Hy=x([he("esri.portal.PortalRating")],Hy);var cy;const B9e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),W9e=new Set(["KML","GeoJson","CSV"]);let bn=cy=class extends g0(LC){static from(t){return XL(cy,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let n=t;return t==="Feature Service"||t==="Feature Collection"?n=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?n=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?n="Scene Layer":t==="Video Service"?n="Video Layer":t==="Scene Package"?n="Scene Layer Package":t==="Stream Service"?n="Feature Layer":t==="Geoprocessing Service"?n=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?n="GeoEnrichment Service":t==="Geocoding Service"?n="Locator":t==="Microsoft Powerpoint"?n="Microsoft PowerPoint":t==="GeoJson"?n="GeoJSON":t==="Globe Service"?n="Globe Layer":t==="Vector Tile Service"?n="Tile Layer":t==="netCDF"?n="NetCDF":t==="Map Service"?n=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?n=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?n="Big Data File Share":t==="Compact Tile Package"?n="Tile Package (tpkx)":t==="Raster function template"?n="Raster Function Template":t==="OGCFeatureServer"?n="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?n="Instant App":t==="Insights Page"?n="Insights Report":t==="Excalibur Imagery Project"?n="Excalibur Project":t==="3DTiles Service"?n="3D tiles layer":t==="3DTiles Package"&&(n="3D tiles package"),n}readExtent(t){return t&&t.length?new Vn(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),u=e.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":u?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),h=e.includes("Relational"),i=c||h?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):i=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?i="maps":t==="web scene"?i=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?i="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?i="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?i="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?i="datafiles":t==="360 vr experience"?i="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?i="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?i="addindesktop":t==="pdf"?i="pdf":t==="microsoft word"?i="word":t==="microsoft excel"?i="excel":t==="microsoft powerpoint"?i="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?i="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?i="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?i="layersgray":t==="analysis model"?i="analysismodel":t==="scene package"?i="scenepackage":t==="3dtiles package"?i="3dtileslayerpackage":t==="3dtiles service"?i="3dtileslayer":t==="mobile scene package"?i="mobilescenepackage":t==="tile package"||t==="compact tile package"?i="tilepackage":t==="task file"?i="taskfile":t==="report template"?i="report-template":t==="statistical data collection"?i="statisticaldatacollection":t==="insights workbook"?i="workbook":t==="insights model"?i="insightsmodel":t==="insights page"?i="insightspage":t==="insights theme"?i="insightstheme":t==="hub initiative"?i="hubinitiative":t==="hub page"?i="hubpage":t==="hub site application"?i="hubsite":t==="hub event"?i="hubevent":t==="hub project"?i="hubproject":t==="relational database connection"?i="relationaldatabaseconnection":t==="big data file share"?i="datastorecollection":t==="image collection"?i="imagecollection":t==="desktop style"?i="desktopstyle":t==="style"?i=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?i="dashboard":t==="raster function template"?i="rasterprocessingtemplate":t==="vector tile package"?i="vectortilepackage":t==="ortho mapping project"?i="orthomappingproject":t==="ortho mapping template"?i="orthomappingtemplate":t==="solution"?i="solutions":t==="geopackage"?i="geopackage":t==="deep learning package"?i="deeplearningpackage":t==="real time analytic"?i="realtimeanalytics":t==="reality mapping project"?i="realitymappingproject":t==="big data analytic"?i="bigdataanalytics":t==="feed"?i="feed":t==="excalibur imagery project"?i="excaliburimageryproject":t==="notebook"?i="notebook":t==="storymap"?i="storymap":t==="survey123 add in"?i="survey123addin":t==="mission"?i="mission":t==="mission report"?i="missionreport":t==="mission template"?i="missiontemplate":t==="quickcapture project"?i="quickcaptureproject":t==="pro report"?i="proreport":t==="pro report template"?i="proreporttemplate":t==="urban model"?i="urbanmodel":t==="urban project"?i="urbanproject":t==="web experience"?i="experiencebuilder":t==="web experience template"?i="webexperiencetemplate":t==="experience builder widget"?i="experiencebuilderwidget":t==="experience builder widget package"?i="experiencebuilderwidgetpackage":t==="workflow"?i="workflow":t==="kernel gateway connection"?i="kernelgatewayconnection":t==="insights script"?i="insightsscript":t==="hub initiative template"?i="hubinitiativetemplate":t==="storymap theme"?i="storymaptheme":t==="knowledge graph"?i="knowledgegraph":t==="knowledge graph layer"?i="knowledgegraphlayer":t==="knowledge studio project"?i="knowledgestudio":t==="native application"?i="nativeapp":t==="native application installer"?i="nativeappinstaller":t==="web link chart"?i="linkchart":t==="knowledge graph web investigation"?i="investigation":t==="ogcfeatureserver"?i="features":t==="pro presentation"?i="propresentation":t==="pro project"?i="proproject":t==="insights workbook package"?i="insightsworkbookpackage":t==="apache parquet"?i="apacheparquet":t==="notebook code snippet library"?i="notebookcodesnippets":t==="suitability model"?i="suitabilitymodel":t==="esri classifier definition"?i="classifierdefinition":t==="esri classification schema"?i="classificationschema":t==="insights data engineering workbook"?i="dataengineeringworkbook":t==="insights data engineering model"?i="dataengineeringmodel":t==="deep learning studio project"?i="deeplearningproject":t==="discussion"?i="discussion":t==="allsource project"?i="allsourceproject":t==="api key"?i="apikey":t==="data pipeline"?i="datapipelines":t==="group layer"?(f=e.includes("Map"),i=f?"layergroup2d":"layergroup"):i=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",i?qi(n+i+r+".png"):null}get isLayer(){return this.type!=null&&B9e.has(this.type)}get itemCdnUrl(){return $B(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=ot.getDefault()),n=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},n=t instanceof Hy?t.rating:t;return n==null||isNaN(n)||typeof t!="number"||(e.query.rating=n),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Hy({rating:n,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:et(this.applicationProxies),avgRating:this.avgRating,categories:et(this.categories),classification:et(this.classification),created:et(this.created),culture:this.culture,description:this.description,extent:et(this.extent),groupCategories:et(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:et(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:et(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:et(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:et(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new cy({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const n=t[e];n&&(t[e]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Hy(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},cy)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?n.query.text=e:typeof e=="object"&&(n.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Qe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Qe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:n}=this;await e.signIn();const{copyResources:r,folder:i,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:l}=await e.request(`${n}/copy`,a);return new cy({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,n=t.filename,r={method:"post"};if(typeof e=="string")_v(e)?r.query={data:e}:r.query={url:iu(e)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",e,n):i.append("file",e),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Qe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:n}=await ge(()=>import("./resourceUtils-BHBqvXpC.js"),[]);return n(this,t,e)}async addResource(t,e,n){const{addOrUpdateResources:r}=await ge(()=>import("./resourceUtils-BHBqvXpC.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:n?.compress,access:n?.access}],"add",n),t}async removeResource(t,e){const{removeResource:n}=await ge(()=>import("./resourceUtils-BHBqvXpC.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Qe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await ge(()=>import("./resourceUtils-BHBqvXpC.js"),[]);return e(this,t)}resourceFromPath(t){return new kf({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:et(this.categories),classification:et(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:et(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:et(this.typeKeywords),url:this.url};return W6e(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new cy({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};x([E({type:["private","shared","org","public"]})],bn.prototype,"access",void 0),x([E()],bn.prototype,"accessInformation",void 0),x([E({type:String})],bn.prototype,"apiKey",void 0),x([E({json:{read:{source:"appProxies"}}})],bn.prototype,"applicationProxies",void 0),x([E()],bn.prototype,"avgRating",void 0),x([E()],bn.prototype,"categories",void 0),x([E()],bn.prototype,"classification",void 0),x([E({type:Date})],bn.prototype,"created",void 0),x([E()],bn.prototype,"culture",void 0),x([E()],bn.prototype,"description",void 0),x([E({readOnly:!0})],bn.prototype,"displayName",null),x([E({type:Vn})],bn.prototype,"extent",void 0),x([cr("extent")],bn.prototype,"readExtent",null),x([E()],bn.prototype,"groupCategories",void 0),x([E({readOnly:!0})],bn.prototype,"iconUrl",null),x([E()],bn.prototype,"id",void 0),x([E({readOnly:!0})],bn.prototype,"isLayer",null),x([E({type:Boolean,readOnly:!0})],bn.prototype,"isOrgItem",void 0),x([E()],bn.prototype,"itemControl",void 0),x([E({readOnly:!0})],bn.prototype,"itemPageUrl",null),x([E({readOnly:!0})],bn.prototype,"itemUrl",null),x([E()],bn.prototype,"licenseInfo",void 0),x([E({type:Date})],bn.prototype,"modified",void 0),x([E()],bn.prototype,"name",void 0),x([E()],bn.prototype,"numComments",void 0),x([E()],bn.prototype,"numRatings",void 0),x([E()],bn.prototype,"numViews",void 0),x([E()],bn.prototype,"owner",void 0),x([E()],bn.prototype,"ownerFolder",void 0),x([E({type:ot})],bn.prototype,"portal",void 0),x([E()],bn.prototype,"screenshots",void 0),x([E()],bn.prototype,"size",void 0),x([E()],bn.prototype,"snippet",void 0),x([E()],bn.prototype,"sourceJSON",void 0),x([E({type:String})],bn.prototype,"sourceUrl",void 0),x([E({type:String})],bn.prototype,"spatialReference",void 0),x([E()],bn.prototype,"tags",void 0),x([E()],bn.prototype,"thumbnail",void 0),x([E({readOnly:!0})],bn.prototype,"thumbnailUrl",null),x([E()],bn.prototype,"title",void 0),x([E()],bn.prototype,"type",void 0),x([E()],bn.prototype,"typeKeywords",void 0),x([E({type:String,json:{read(t,e){if(W9e.has(e.type)){const n=this.portal?.restUrl;t||=n&&this.id?`${n}/content/items/${this.id}/data`:null}return t}}})],bn.prototype,"url",void 0),x([E({readOnly:!0})],bn.prototype,"userItemUrl",null),bn=cy=x([he("esri.portal.PortalItem")],bn);const Jme=Object.freeze(Object.defineProperty({__proto__:null,get default(){return bn}},Symbol.toStringTag,{value:"Module"})),Qme={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function H9e(t){return t in Qme}function pte(t){if(H9e(t)){const e=Qme[t];return e===!0?t:e}return null}const TS=[],dw=new Map;function mte(t){for(const e of dw.keys())nge(t.pattern,e)&&dw.delete(e)}function q9e(t){return TS.includes(t)||(mte(t),TS.unshift(t)),Zn(()=>{const e=TS.indexOf(t);e>-1&&(TS.splice(e,1),mte(t))})}async function ege(t){const e=fu();dw.has(t)||dw.set(t,K9e(t,e));const n=dw.get(t);return n&&await Y9e.add(n),n}function tge(t){const e=hW(t);return e?pte(t)??pte(e):null}async function K9e(t,e){const n=[];for(const r of TS)if(nge(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(i){n.push(i)}throw n.length?new Qe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:n}):new Qe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function nge(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}dW(()=>{dw.clear()});const Y9e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=Ec())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function X9e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,n=await ege("esri/t9n/basemaps");return n[t]||n[e]}const G9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return qi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return qi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return qi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return qi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return qi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return qi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Ud="system",fW="unknown",sA="UTC",Z9e=Intl.DateTimeFormat().resolvedOptions().timeZone,gte=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class bv extends Error{}class J9e extends bv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Q9e extends bv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class e7e extends bv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Nx extends bv{}class rge extends bv{constructor(e){super(`Invalid unit ${e}`)}}class sa extends bv{}class bm extends bv{constructor(){super("Zone is an abstract class")}}const Rt="numeric",bh="short",vc="long",yN={year:Rt,month:Rt,day:Rt},ige={year:Rt,month:bh,day:Rt},t7e={year:Rt,month:bh,day:Rt,weekday:bh},sge={year:Rt,month:vc,day:Rt},oge={year:Rt,month:vc,day:Rt,weekday:vc},age={hour:Rt,minute:Rt},lge={hour:Rt,minute:Rt,second:Rt},cge={hour:Rt,minute:Rt,second:Rt,timeZoneName:bh},uge={hour:Rt,minute:Rt,second:Rt,timeZoneName:vc},hge={hour:Rt,minute:Rt,hourCycle:"h23"},dge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23"},fge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:bh},pge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:vc},mge={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt},gge={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt,second:Rt},yge={year:Rt,month:bh,day:Rt,hour:Rt,minute:Rt},vge={year:Rt,month:bh,day:Rt,hour:Rt,minute:Rt,second:Rt},n7e={year:Rt,month:bh,day:Rt,weekday:bh,hour:Rt,minute:Rt},_ge={year:Rt,month:vc,day:Rt,hour:Rt,minute:Rt,timeZoneName:bh},xge={year:Rt,month:vc,day:Rt,hour:Rt,minute:Rt,second:Rt,timeZoneName:bh},wge={year:Rt,month:vc,day:Rt,weekday:vc,hour:Rt,minute:Rt,timeZoneName:vc},bge={year:Rt,month:vc,day:Rt,weekday:vc,hour:Rt,minute:Rt,second:Rt,timeZoneName:vc};class DC{get type(){throw new bm}get name(){throw new bm}get ianaName(){return this.name}get isUniversal(){throw new bm}offsetName(e,n){throw new bm}formatOffset(e,n){throw new bm}offset(e){throw new bm}equals(e){throw new bm}get isValid(){throw new bm}}let eF=null;class sO extends DC{static get instance(){return eF===null&&(eF=new sO),eF}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Nge(e,n,r)}formatOffset(e,n){return PT(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const U9=new Map;function r7e(t){let e=U9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),U9.set(t,e)),e}const i7e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function s7e(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function o7e(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=i7e[s];s==="era"?r[a]=o:Cn(a)||(r[a]=parseInt(o,10))}return r}const tF=new Map;class Eh extends DC{static create(e){let n=tF.get(e);return n===void 0&&tF.set(e,n=new Eh(e)),n}static resetCache(){tF.clear(),U9.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Eh.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Nge(e,n,r,this.name)}formatOffset(e,n){return PT(this.offset(e),n)}offset(e){if(!this.valid)return NaN;const n=new Date(e);if(isNaN(n))return NaN;const r=r7e(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?o7e(r,n):s7e(r,n);a==="BC"&&(i=-Math.abs(i)+1);const f=aO({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let g=+n;const y=g%1e3;return g-=y>=0?y:1e3+y,(f-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let yte={};function a7e(t,e={}){const n=JSON.stringify([t,e]);let r=yte[n];return r||(r=new Intl.ListFormat(t,e),yte[n]=r),r}const B9=new Map;function W9(t,e={}){const n=JSON.stringify([t,e]);let r=B9.get(n);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),B9.set(n,r)),r}const H9=new Map;function l7e(t,e={}){const n=JSON.stringify([t,e]);let r=H9.get(n);return r===void 0&&(r=new Intl.NumberFormat(t,e),H9.set(n,r)),r}const q9=new Map;function c7e(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=q9.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),q9.set(i,s)),s}let kS=null;function u7e(){return kS||(kS=new Intl.DateTimeFormat().resolvedOptions().locale,kS)}const K9=new Map;function Ege(t){let e=K9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),K9.set(t,e)),e}const Y9=new Map;function h7e(t){let e=Y9.get(t);if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in e||(e={...Sge,...e}),Y9.set(t,e)}return e}function d7e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=W9(t).resolvedOptions(),i=t}catch{const l=t.substring(0,n);r=W9(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function f7e(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function p7e(t){const e=[];for(let n=1;n<=12;n++){const r=pn.utc(2009,n,1);e.push(t(r))}return e}function m7e(t){const e=[];for(let n=1;n<=7;n++){const r=pn.utc(2016,11,13+n);e.push(t(r))}return e}function ZP(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function g7e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Ege(t.locale).numberingSystem==="latn"}class y7e{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=l7e(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):vW(e,3);return ks(n,this.padTo)}}}class v7e{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Eh.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=W9(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class _7e{constructor(e,n,r){this.opts={style:"long",...r},!n&&Rge()&&(this.rtf=c7e(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):z7e(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const Sge={firstDay:1,minimalDays:4,weekend:[6,7]};class Dr{static fromOpts(e){return Dr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Xi.defaultLocale,a=o||(s?"en-US":u7e()),l=n||Xi.defaultNumberingSystem,c=r||Xi.defaultOutputCalendar,u=Z9(i)||Xi.defaultWeekSettings;return new Dr(a,l,c,u,o)}static resetCache(){kS=null,B9.clear(),H9.clear(),q9.clear(),K9.clear(),Y9.clear()}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Dr.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,l]=d7e(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=f7e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=g7e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Dr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Z9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return ZP(this,e,Dge,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");n&=!r;const i=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=p7e(o)}return this.monthsCache[s][e]})}weekdays(e,n=!1){return ZP(this,e,$ge,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=m7e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return ZP(this,void 0,()=>Vge,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[pn.utc(2016,11,13,9),pn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ZP(this,e,zge,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[pn.utc(-40,1,1),pn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new y7e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new v7e(e,this.intl,n)}relFormatter(e={}){return new _7e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return a7e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Ege(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Mge()?h7e(this.locale):Sge}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let nF=null;class pa extends DC{static get utcInstance(){return nF===null&&(nF=new pa(0)),nF}static instance(e){return e===0?pa.utcInstance:new pa(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new pa(lO(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${PT(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${PT(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return PT(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class x7e extends DC{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function tg(t,e){if(Cn(t)||t===null)return e;if(t instanceof DC)return t;if(k7e(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?sO.instance:n==="utc"||n==="gmt"?pa.utcInstance:pa.parseSpecifier(n)||Eh.create(t)}else return Mg(t)?pa.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new x7e(t)}const pW={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},vte={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},w7e=pW.hanidec.replace(/[\[|\]]/g,"").split("");function b7e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(pW.hanidec)!==-1)e+=w7e.indexOf(t[n]);else for(const i in vte){const[s,o]=vte[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const X9=new Map;function E7e(){X9.clear()}function Du({numberingSystem:t},e=""){const n=t||"latn";let r=X9.get(n);r===void 0&&(r=new Map,X9.set(n,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${pW[n]}${e}`),r.set(e,i)),i}let _te=()=>Date.now(),xte="system",wte=null,bte=null,Ete=null,Ste=60,Tte,kte=null,Xi=class{static get now(){return _te}static set now(e){_te=e}static set defaultZone(e){xte=e}static get defaultZone(){return tg(xte,sO.instance)}static get defaultLocale(){return wte}static set defaultLocale(e){wte=e}static get defaultNumberingSystem(){return bte}static set defaultNumberingSystem(e){bte=e}static get defaultOutputCalendar(){return Ete}static set defaultOutputCalendar(e){Ete=e}static get defaultWeekSettings(){return kte}static set defaultWeekSettings(e){kte=Z9(e)}static get twoDigitCutoffYear(){return Ste}static set twoDigitCutoffYear(e){Ste=e%100}static get throwOnInvalid(){return Tte}static set throwOnInvalid(e){Tte=e}static resetCaches(){Dr.resetCache(),Eh.resetCache(),pn.resetCache(),E7e()}};class hh{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Tge=[0,31,59,90,120,151,181,212,243,273,304,334],kge=[0,31,60,91,121,152,182,213,244,274,305,335];function lu(t,e){return new hh("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function mW(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function Age(t,e,n){return n+(jC(t)?kge:Tge)[e-1]}function Cge(t,e){const n=jC(t)?kge:Tge,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function gW(t,e){return(t-e+7)%7+1}function vN(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=Age(r,i,s),a=gW(mW(r,i,s),n);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=oA(c,e,n)):l>oA(r,e,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...cO(t)}}function Ate(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=gW(mW(r,1,e),n),a=fw(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=fw(c)):l>a?(c=r+1,l-=fw(r)):c=r;const{month:u,day:h}=Cge(c,l);return{year:c,month:u,day:h,...cO(t)}}function rF(t){const{year:e,month:n,day:r}=t,i=Age(e,n,r);return{year:e,ordinal:i,...cO(t)}}function Cte(t){const{year:e,ordinal:n}=t,{month:r,day:i}=Cge(e,n);return{year:e,month:r,day:i,...cO(t)}}function Ite(t,e){if(!Cn(t.localWeekday)||!Cn(t.localWeekNumber)||!Cn(t.localWeekYear)){if(!Cn(t.weekday)||!Cn(t.weekNumber)||!Cn(t.weekYear))throw new Nx("Cannot mix locale-based week fields with ISO-based week fields");return Cn(t.localWeekday)||(t.weekday=t.localWeekday),Cn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Cn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function S7e(t,e=4,n=1){const r=oO(t.weekYear),i=cu(t.weekNumber,1,oA(t.weekYear,e,n)),s=cu(t.weekday,1,7);return r?i?s?!1:lu("weekday",t.weekday):lu("week",t.weekNumber):lu("weekYear",t.weekYear)}function T7e(t){const e=oO(t.year),n=cu(t.ordinal,1,fw(t.year));return e?n?!1:lu("ordinal",t.ordinal):lu("year",t.year)}function Ige(t){const e=oO(t.year),n=cu(t.month,1,12),r=cu(t.day,1,_N(t.year,t.month));return e?n?r?!1:lu("day",t.day):lu("month",t.month):lu("year",t.year)}function Pge(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=cu(e,0,23)||e===24&&n===0&&r===0&&i===0,o=cu(n,0,59),a=cu(r,0,59),l=cu(i,0,999);return s?o?a?l?!1:lu("millisecond",i):lu("second",r):lu("minute",n):lu("hour",e)}function Cn(t){return typeof t>"u"}function Mg(t){return typeof t=="number"}function oO(t){return typeof t=="number"&&t%1===0}function k7e(t){return typeof t=="string"}function A7e(t){return Object.prototype.toString.call(t)==="[object Date]"}function Rge(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Mge(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function C7e(t){return Array.isArray(t)?t:[t]}function Pte(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function I7e(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function j2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Z9(t){if(t==null)return null;if(typeof t!="object")throw new sa("Week settings must be an object");if(!cu(t.firstDay,1,7)||!cu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!cu(e,1,7)))throw new sa("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function cu(t,e,n){return oO(t)&&t>=e&&t<=n}function P7e(t,e){return t-e*Math.floor(t/e)}function ks(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Wm(t){if(!(Cn(t)||t===null||t===""))return parseInt(t,10)}function H0(t){if(!(Cn(t)||t===null||t===""))return parseFloat(t)}function yW(t){if(!(Cn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function vW(t,e,n="round"){const r=10**e;switch(n){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function jC(t){return t%4===0&&(t%100!==0||t%400===0)}function fw(t){return jC(t)?366:365}function _N(t,e){const n=P7e(e-1,12)+1,r=t+(e-n)/12;return n===2?jC(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function aO(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Rte(t,e,n){return-gW(mW(t,1,e),n)+e-1}function oA(t,e=4,n=1){const r=Rte(t,e,n),i=Rte(t+1,e,n);return(fw(t)-r+i)/7}function J9(t){return t>99?t:t>Xi.twoDigitCutoffYear?1900+t:2e3+t}function Nge(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function lO(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Lge(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new sa(`Invalid unit value ${t}`);return e}function xN(t,e){const n={};for(const r in t)if(j2(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=Lge(i)}return n}function PT(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${ks(n,2)}:${ks(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${ks(n,2)}${ks(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function cO(t){return I7e(t,["hour","minute","second","millisecond"])}const R7e=["January","February","March","April","May","June","July","August","September","October","November","December"],Oge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],M7e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Dge(t){switch(t){case"narrow":return[...M7e];case"short":return[...Oge];case"long":return[...R7e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const jge=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Fge=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],N7e=["M","T","W","T","F","S","S"];function $ge(t){switch(t){case"narrow":return[...N7e];case"short":return[...Fge];case"long":return[...jge];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Vge=["AM","PM"],L7e=["Before Christ","Anno Domini"],O7e=["BC","AD"],D7e=["B","A"];function zge(t){switch(t){case"narrow":return[...D7e];case"short":return[...O7e];case"long":return[...L7e];default:return null}}function j7e(t){return Vge[t.hour<12?0:1]}function F7e(t,e){return $ge(e)[t.weekday-1]}function $7e(t,e){return Dge(e)[t.month-1]}function V7e(t,e){return zge(e)[t.year<0?0:1]}function z7e(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[t],u=r?l?c[1]:c[2]||c[1]:l?i[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Mte(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const G7e={D:yN,DD:ige,DDD:sge,DDDD:oge,t:age,tt:lge,ttt:cge,tttt:uge,T:hge,TT:dge,TTT:fge,TTTT:pge,f:mge,ff:yge,fff:_ge,ffff:wge,F:gge,FF:vge,FFF:xge,FFFF:bge};class da{static create(e,n={}){return new da(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||i)&&s.push({literal:i||/^\s+$/.test(r),val:r===""?"'":r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return G7e[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0,r=void 0){if(this.opts.forceSimple)return ks(e,n);const i={...this.opts};return n>0&&(i.padTo=n),r&&(i.signDisplay=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,y)=>this.loc.extract(e,g,y),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?j7e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,y)=>r?$7e(e,g):s(y?{month:g}:{month:g,day:"numeric"},"month"),c=(g,y)=>r?F7e(e,g):s(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),u=g=>{const y=da.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(e,y):g},h=g=>r?V7e(e,g):s({era:g},"era"),f=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(g)}};return Mte(da.parseFormat(n),f)}formatDurationFromString(e,n){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(u,h)=>f=>{const g=i(f);if(g){const y=h.isNegativeDuration&&g!==h.largestUnit?r:1;let _;return this.opts.signMode==="negativeLargestOnly"&&g!==h.largestUnit?_="never":this.opts.signMode==="all"?_="always":_="auto",this.num(u.get(g)*y,f.length,_)}else return f},o=da.parseFormat(n),a=o.reduce((u,{literal:h,val:f})=>h?u:u.concat(f),[]),l=e.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Mte(o,s(l,c))}}const Gge=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Cb(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Ib(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,l]=s(e,i);return[{...n,...o},a||r,l]},[{},null,1]).slice(0,2)}function Pb(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function Uge(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Wm(e[n+i]);return[r,null,n+i]}}const Bge=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,U7e=`(?:${Bge.source}?(?:\\[(${Gge.source})\\])?)?`,_W=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Wge=RegExp(`${_W.source}${U7e}`),xW=RegExp(`(?:[Tt]${Wge.source})?`),B7e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,W7e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,H7e=/(\d{4})-?(\d{3})/,q7e=Uge("weekYear","weekNumber","weekDay"),K7e=Uge("year","ordinal"),Y7e=/(\d{4})-(\d\d)-(\d\d)/,Hge=RegExp(`${_W.source} ?(?:${Bge.source}|(${Gge.source}))?`),X7e=RegExp(`(?: ${Hge.source})?`);function pw(t,e,n){const r=t[e];return Cn(r)?n:Wm(r)}function Z7e(t,e){return[{year:pw(t,e),month:pw(t,e+1,1),day:pw(t,e+2,1)},null,e+3]}function Rb(t,e){return[{hours:pw(t,e,0),minutes:pw(t,e+1,0),seconds:pw(t,e+2,0),milliseconds:yW(t[e+3])},null,e+4]}function FC(t,e){const n=!t[e]&&!t[e+1],r=lO(t[e+1],t[e+2]),i=n?null:pa.instance(r);return[{},i,e+3]}function $C(t,e){const n=t[e]?Eh.create(t[e]):null;return[{},n,e+1]}const J7e=RegExp(`^T?${_W.source}$`),Q7e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function eVe(t){const[e,n,r,i,s,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",f=(g,y=!1)=>g!==void 0&&(y||g&&u)?-g:g;return[{years:f(H0(n)),months:f(H0(r)),weeks:f(H0(i)),days:f(H0(s)),hours:f(H0(o)),minutes:f(H0(a)),seconds:f(H0(l),l==="-0"),milliseconds:f(yW(c),h)}]}const tVe={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wW(t,e,n,r,i,s,o){const a={year:e.length===2?J9(Wm(e)):Wm(e),month:Oge.indexOf(n)+1,day:Wm(r),hour:Wm(i),minute:Wm(s)};return o&&(a.second=Wm(o)),t&&(a.weekday=t.length>3?jge.indexOf(t)+1:Fge.indexOf(t)+1),a}const nVe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function rVe(t){const[,e,n,r,i,s,o,a,l,c,u,h]=t,f=wW(e,i,r,n,s,o,a);let g;return l?g=tVe[l]:c?g=0:g=lO(u,h),[f,new pa(g)]}function iVe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const sVe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,oVe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,aVe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Nte(t){const[,e,n,r,i,s,o,a]=t;return[wW(e,i,r,n,s,o,a),pa.utcInstance]}function lVe(t){const[,e,n,r,i,s,o,a]=t;return[wW(e,a,n,r,i,s,o),pa.utcInstance]}const cVe=Cb(B7e,xW),uVe=Cb(W7e,xW),hVe=Cb(H7e,xW),dVe=Cb(Wge),qge=Ib(Z7e,Rb,FC,$C),fVe=Ib(q7e,Rb,FC,$C),pVe=Ib(K7e,Rb,FC,$C),mVe=Ib(Rb,FC,$C);function gVe(t){return Pb(t,[cVe,qge],[uVe,fVe],[hVe,pVe],[dVe,mVe])}function yVe(t){return Pb(iVe(t),[nVe,rVe])}function vVe(t){return Pb(t,[sVe,Nte],[oVe,Nte],[aVe,lVe])}function _Ve(t){return Pb(t,[Q7e,eVe])}const xVe=Ib(Rb);function wVe(t){return Pb(t,[J7e,xVe])}const bVe=Cb(Y7e,X7e),EVe=Cb(Hge),SVe=Ib(Rb,FC,$C);function TVe(t){return Pb(t,[bVe,qge],[EVe,SVe])}const Lte="Invalid Duration",Kge={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},kVe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Kge},$c=146097/400,C_=146097/4800,AVe={years:{quarters:4,months:12,weeks:$c/7,days:$c,hours:$c*24,minutes:$c*24*60,seconds:$c*24*60*60,milliseconds:$c*24*60*60*1e3},quarters:{months:3,weeks:$c/28,days:$c/4,hours:$c*24/4,minutes:$c*24*60/4,seconds:$c*24*60*60/4,milliseconds:$c*24*60*60*1e3/4},months:{weeks:C_/7,days:C_,hours:C_*24,minutes:C_*24*60,seconds:C_*24*60*60,milliseconds:C_*24*60*60*1e3},...Kge},qy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],CVe=qy.slice(0).reverse();function yf(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new mr(r)}function Yge(t,e){let n=e.milliseconds??0;for(const r of CVe.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function Ote(t,e){const n=Yge(t,e)<0?-1:1;qy.reduceRight((r,i)=>{if(Cn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),qy.reduce((r,i)=>{if(Cn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function Dte(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class mr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?AVe:kVe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Dr.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return mr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new sa(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new mr({values:xN(e,mr.normalizeUnit),loc:Dr.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Mg(e))return mr.fromMillis(e);if(mr.isDuration(e))return e;if(typeof e=="object")return mr.fromObject(e);throw new sa(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=_Ve(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=wVe(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new sa("need to specify a reason the Duration is invalid");const r=e instanceof hh?e:new hh(e,n);if(Xi.throwOnInvalid)throw new e7e(r);return new mr({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new rge(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?da.create(this.loc,r).formatDurationFromString(this,e):Lte}toHuman(e={}){if(!this.isValid)return Lte;const n=e.showZeros!==!1,r=qy.map(i=>{const s=this.values[i];return Cn(s)||s===0&&!n?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=vW(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},pn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Yge(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e),r={};for(const i of qy)(j2(n.values,i)||j2(this.values,i))&&(r[i]=n.get(i)+this.get(i));return yf(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=Lge(e(this.values[r],r));return yf(this,{values:n},!0)}get(e){return this[mr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...xN(e,mr.normalizeUnit)};return yf(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return yf(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Ote(this.matrix,e),yf(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Dte(this.normalize().shiftToAll().toObject());return yf(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>mr.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of qy)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;Mg(i[o])&&(a+=i[o]);const l=Math.trunc(a);n[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Mg(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Ote(this.matrix,n),yf(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return yf(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Dte(this.values);return yf(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of qy)if(!n(this.values[r],e.values[r]))return!1;return!0}}const I_="Invalid Interval";function IVe(t,e){return!t||!t.isValid?Ki.invalid("missing or invalid start"):!e||!e.isValid?Ki.invalid("missing or invalid end"):e<t?Ki.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ki{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new sa("need to specify a reason the Interval is invalid");const r=e instanceof hh?e:new hh(e,n);if(Xi.throwOnInvalid)throw new Q9e(r);return new Ki({invalid:r})}static fromDateTimes(e,n){const r=BE(e),i=BE(n),s=IVe(r,i);return s??new Ki({start:r,end:i})}static after(e,n){const r=mr.fromDurationLike(n),i=BE(e);return Ki.fromDateTimes(i,i.plus(r))}static before(e,n){const r=mr.fromDurationLike(n),i=BE(e);return Ki.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=pn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,l;try{a=pn.fromISO(i,n),l=a.isValid}catch{l=!1}if(o&&l)return Ki.fromDateTimes(s,a);if(o){const c=mr.fromISO(i,n);if(c.isValid)return Ki.after(s,c)}else if(l){const c=mr.fromISO(r,n);if(c.isValid)return Ki.before(a,c)}}return Ki.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Ki.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(BE).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(Ki.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=mr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(Ki.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Ki.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Ki.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push(Ki.fromDateTimes(n,l.time)),n=null);return Ki.merge(i)}difference(...e){return Ki.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:I_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=yN,n={}){return this.isValid?da.create(this.s.loc.clone(n),e).formatInterval(this):I_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:I_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:I_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:I_}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:I_}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):mr.invalid(this.invalidReason)}mapEndpoints(e){return Ki.fromDateTimes(e(this.s),e(this.e))}}let JP=class{static hasDST(e=Xi.defaultZone){const n=pn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Eh.isValidZone(e)}static normalizeZone(e){return tg(e,Xi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dr.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Dr.create(n,null,"gregory").eras(e)}static features(){return{relative:Rge(),localeWeek:Mge()}}};function jte(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(mr.fromMillis(r).as("days"))}function PVe(t,e,n){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=jte(l,c);return(u-u%7)/7}],["days",jte]],i={},s=t;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,i[l]=c(t,e),a=s.plus(i),a>e?(i[l]--,t=s.plus(i),t>e&&(a=t,i[l]--,t=s.plus(i))):t=a);return[t,i,a,o]}function RVe(t,e,n,r){let[i,s,o,a]=PVe(t,e,n);const l=e-i,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=mr.fromObject(s,r);return c.length>0?mr.fromMillis(l,r).shiftTo(...c).plus(u):u}const MVe="missing Intl.DateTimeFormat.formatToParts support";function Tr(t,e=n=>n){return{regex:t,deser:([n])=>e(b7e(n))}}const NVe="",Xge=`[ ${NVe}]`,Zge=new RegExp(Xge,"g");function LVe(t){return t.replace(/\./g,"\\.?").replace(Zge,Xge)}function Fte(t){return t.replace(/\./g,"").replace(Zge," ").toLowerCase()}function ju(t,e){return t===null?null:{regex:RegExp(t.map(LVe).join("|")),deser:([n])=>t.findIndex(r=>Fte(n)===Fte(r))+e}}function $te(t,e){return{regex:t,deser:([,n,r])=>lO(n,r),groups:e}}function QP(t){return{regex:t,deser:([e])=>e}}function OVe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function DVe(t,e){const n=Du(e),r=Du(e,"{2}"),i=Du(e,"{3}"),s=Du(e,"{4}"),o=Du(e,"{6}"),a=Du(e,"{1,2}"),l=Du(e,"{1,3}"),c=Du(e,"{1,6}"),u=Du(e,"{1,9}"),h=Du(e,"{2,4}"),f=Du(e,"{4,6}"),g=b=>({regex:RegExp(OVe(b.val)),deser:([T])=>T,literal:!0}),_=(b=>{if(t.literal)return g(b);switch(b.val){case"G":return ju(e.eras("short"),0);case"GG":return ju(e.eras("long"),0);case"y":return Tr(c);case"yy":return Tr(h,J9);case"yyyy":return Tr(s);case"yyyyy":return Tr(f);case"yyyyyy":return Tr(o);case"M":return Tr(a);case"MM":return Tr(r);case"MMM":return ju(e.months("short",!0),1);case"MMMM":return ju(e.months("long",!0),1);case"L":return Tr(a);case"LL":return Tr(r);case"LLL":return ju(e.months("short",!1),1);case"LLLL":return ju(e.months("long",!1),1);case"d":return Tr(a);case"dd":return Tr(r);case"o":return Tr(l);case"ooo":return Tr(i);case"HH":return Tr(r);case"H":return Tr(a);case"hh":return Tr(r);case"h":return Tr(a);case"mm":return Tr(r);case"m":return Tr(a);case"q":return Tr(a);case"qq":return Tr(r);case"s":return Tr(a);case"ss":return Tr(r);case"S":return Tr(l);case"SSS":return Tr(i);case"u":return QP(u);case"uu":return QP(a);case"uuu":return Tr(n);case"a":return ju(e.meridiems(),0);case"kkkk":return Tr(s);case"kk":return Tr(h,J9);case"W":return Tr(a);case"WW":return Tr(r);case"E":case"c":return Tr(n);case"EEE":return ju(e.weekdays("short",!1),1);case"EEEE":return ju(e.weekdays("long",!1),1);case"ccc":return ju(e.weekdays("short",!0),1);case"cccc":return ju(e.weekdays("long",!0),1);case"Z":case"ZZ":return $te(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return $te(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return QP(/[a-z_+-/]{1,256}?/i);case" ":return QP(/[^\S\n\r]/);default:return g(b)}})(t)||{invalidReason:MVe};return _.token=t,_}const jVe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function FVe(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=jVe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function $Ve(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function VVe(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(j2(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function zVe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return Cn(t.z)||(n=Eh.create(t.z)),Cn(t.Z)||(n||(n=new pa(t.Z)),r=t.Z),Cn(t.q)||(t.M=(t.q-1)*3+1),Cn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Cn(t.u)||(t.S=yW(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let iF=null;function GVe(){return iF||(iF=pn.fromMillis(1555555555555)),iF}function UVe(t,e){if(t.literal)return t;const n=da.macroTokenToFormatOpts(t.val),r=t0e(n,e);return r==null||r.includes(void 0)?t:r}function Jge(t,e){return Array.prototype.concat(...t.map(n=>UVe(n,e)))}class Qge{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=Jge(da.parseFormat(n),e),this.units=this.tokens.map(r=>DVe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=$Ve(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=VVe(e,this.regex,this.handlers),[i,s,o]=r?zVe(r):[null,null,void 0];if(j2(r,"a")&&j2(r,"H"))throw new Nx("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function e0e(t,e,n){return new Qge(t,n).explainFromTokens(e)}function BVe(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=e0e(t,e,n);return[r,i,s,o]}function t0e(t,e){if(!t)return null;const r=da.create(e,t).dtFormatter(GVe()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>FVe(o,t,s))}const sF="Invalid DateTime",Vte=864e13;function AS(t){return new hh("unsupported zone",`the zone "${t.name}" is not supported`)}function oF(t){return t.weekData===null&&(t.weekData=vN(t.c)),t.weekData}function aF(t){return t.localWeekData===null&&(t.localWeekData=vN(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function q0(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new pn({...n,...e,old:n})}function n0e(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function eR(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function zM(t,e,n){return n0e(aO(t),e,n)}function zte(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,_N(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=mr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=aO(s);let[l,c]=n0e(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function P_(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=pn.fromObject(t,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return pn.invalid(new hh("unparsable",`the input "${i}" can't be parsed as ${r}`))}function tR(t,e,n=!0){return t.isValid?da.create(Dr.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function lF(t,e,n){const r=t.c.year>9999||t.c.year<0;let i="";if(r&&t.c.year>=0&&(i+="+"),i+=ks(t.c.year,r?6:4),n==="year")return i;if(e){if(i+="-",i+=ks(t.c.month),n==="month")return i;i+="-"}else if(i+=ks(t.c.month),n==="month")return i;return i+=ks(t.c.day),i}function Gte(t,e,n,r,i,s,o){let a=!n||t.c.millisecond!==0||t.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=ks(t.c.hour),o==="hour")break;if(e){if(l+=":",l+=ks(t.c.minute),o==="minute")break;a&&(l+=":",l+=ks(t.c.second))}else{if(l+=ks(t.c.minute),o==="minute")break;a&&(l+=ks(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(l+=".",l+=ks(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=ks(Math.trunc(-t.o/60)),l+=":",l+=ks(Math.trunc(-t.o%60))):(l+="+",l+=ks(Math.trunc(t.o/60)),l+=":",l+=ks(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const r0e={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},WVe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},HVe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},GM=["year","month","day","hour","minute","second","millisecond"],qVe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],KVe=["year","ordinal","hour","minute","second","millisecond"];function UM(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new rge(t);return e}function Ute(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return UM(t)}}function YVe(t){if(CS===void 0&&(CS=Xi.now()),t.type!=="iana")return t.offset(CS);const e=t.name;let n=Q9.get(e);return n===void 0&&(n=t.offset(CS),Q9.set(e,n)),n}function Bte(t,e){const n=tg(e.zone,Xi.defaultZone);if(!n.isValid)return pn.invalid(AS(n));const r=Dr.fromObject(e);let i,s;if(Cn(t.year))i=Xi.now();else{for(const l of GM)Cn(t[l])&&(t[l]=r0e[l]);const o=Ige(t)||Pge(t);if(o)return pn.invalid(o);const a=YVe(n);[i,s]=zM(t,a,n)}return new pn({ts:i,zone:n,loc:r,o:s})}function Wte(t,e,n){const r=Cn(n.round)?!0:n.round,i=Cn(n.rounding)?"trunc":n.rounding,s=(a,l)=>(a=vW(a,r||n.calendary?0:2,n.calendary?"round":i),e.loc.clone(n).relFormatter(n).format(a,l)),o=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(o(n.unit),n.unit);for(const a of n.units){const l=o(a);if(Math.abs(l)>=1)return s(l,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function Hte(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let CS;const Q9=new Map;class pn{constructor(e){const n=e.zone||Xi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new hh("invalid input"):null)||(n.isValid?null:AS(n));this.ts=Cn(e.ts)?Xi.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=Mg(e.o)&&!e.old?e.o:n.offset(this.ts);i=eR(this.ts,a),r=Number.isNaN(i.year)?new hh("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Dr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new pn({})}static local(){const[e,n]=Hte(arguments),[r,i,s,o,a,l,c]=n;return Bte({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=Hte(arguments),[r,i,s,o,a,l,c]=n;return e.zone=pa.utcInstance,Bte({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const r=A7e(e)?e.valueOf():NaN;if(Number.isNaN(r))return pn.invalid("invalid input");const i=tg(n.zone,Xi.defaultZone);return i.isValid?new pn({ts:r,zone:i,loc:Dr.fromObject(n)}):pn.invalid(AS(i))}static fromMillis(e,n={}){if(Mg(e))return e<-Vte||e>Vte?pn.invalid("Timestamp out of range"):new pn({ts:e,zone:tg(n.zone,Xi.defaultZone),loc:Dr.fromObject(n)});throw new sa(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Mg(e))return new pn({ts:e*1e3,zone:tg(n.zone,Xi.defaultZone),loc:Dr.fromObject(n)});throw new sa("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=tg(n.zone,Xi.defaultZone);if(!r.isValid)return pn.invalid(AS(r));const i=Dr.fromObject(n),s=xN(e,Ute),{minDaysInFirstWeek:o,startOfWeek:a}=Ite(s,i),l=Xi.now(),c=Cn(n.specificOffset)?r.offset(l):n.specificOffset,u=!Cn(s.ordinal),h=!Cn(s.year),f=!Cn(s.month)||!Cn(s.day),g=h||f,y=s.weekYear||s.weekNumber;if((g||u)&&y)throw new Nx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new Nx("Can't mix ordinal dates with month/day");const _=y||s.weekday&&!g;let b,T,A=eR(l,c);_?(b=qVe,T=WVe,A=vN(A,o,a)):u?(b=KVe,T=HVe,A=rF(A)):(b=GM,T=r0e);let C=!1;for(const O of b){const F=s[O];Cn(F)?C?s[O]=T[O]:s[O]=A[O]:C=!0}const I=_?S7e(s,o,a):u?T7e(s):Ige(s),R=I||Pge(s);if(R)return pn.invalid(R);const V=_?Ate(s,o,a):u?Cte(s):s,[P,N]=zM(V,c,r),L=new pn({ts:P,zone:r,o:N,loc:i});return s.weekday&&g&&e.weekday!==L.weekday?pn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${L.toISO()}`):L.isValid?L:pn.invalid(L.invalid)}static fromISO(e,n={}){const[r,i]=gVe(e);return P_(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=yVe(e);return P_(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=vVe(e);return P_(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(Cn(e)||Cn(n))throw new sa("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=BVe(o,e,n);return u?pn.invalid(u):P_(a,l,r,`format ${n}`,e,c)}static fromString(e,n,r={}){return pn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=TVe(e);return P_(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new sa("need to specify a reason the DateTime is invalid");const r=e instanceof hh?e:new hh(e,n);if(Xi.throwOnInvalid)throw new J9e(r);return new pn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=t0e(e,Dr.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return Jge(da.parseFormat(e),Dr.fromObject(n)).map(i=>i.val).join("")}static resetCache(){CS=void 0,Q9.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?oF(this).weekYear:NaN}get weekNumber(){return this.isValid?oF(this).weekNumber:NaN}get weekday(){return this.isValid?oF(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?aF(this).weekday:NaN}get localWeekNumber(){return this.isValid?aF(this).weekNumber:NaN}get localWeekYear(){return this.isValid?aF(this).weekYear:NaN}get ordinal(){return this.isValid?rF(this.c).ordinal:NaN}get monthShort(){return this.isValid?JP.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?JP.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?JP.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?JP.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=aO(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const l=r-o*n,c=r-a*n,u=eR(l,o),h=eR(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[q0(this,{ts:l}),q0(this,{ts:c})]:[this]}get isInLeapYear(){return jC(this.year)}get daysInMonth(){return _N(this.year,this.month)}get daysInYear(){return this.isValid?fw(this.year):NaN}get weeksInWeekYear(){return this.isValid?oA(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?oA(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=da.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(pa.instance(e),n)}toLocal(){return this.setZone(Xi.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=tg(e,Xi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=zM(o,s,e)}return q0(this,{ts:i,zone:e})}else return pn.invalid(AS(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return q0(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=xN(e,Ute),{minDaysInFirstWeek:r,startOfWeek:i}=Ite(n,this.loc),s=!Cn(n.weekYear)||!Cn(n.weekNumber)||!Cn(n.weekday),o=!Cn(n.ordinal),a=!Cn(n.year),l=!Cn(n.month)||!Cn(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new Nx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Nx("Can't mix ordinal dates with month/day");let h;s?h=Ate({...vN(this.c,r,i),...n},r,i):Cn(n.ordinal)?(h={...this.toObject(),...n},Cn(n.day)&&(h.day=Math.min(_N(h.year,h.month),h.day))):h=Cte({...rF(this.c),...n});const[f,g]=zM(h,this.o,this.zone);return q0(this,{ts:f,o:g})}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return q0(this,zte(this,n))}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e).negate();return q0(this,zte(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=mr.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?da.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):sF}toLocaleString(e=yN,n={}){return this.isValid?da.create(this.loc.clone(n),e).formatDateTime(this):sF}toLocaleParts(e={}){return this.isValid?da.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=UM(o);const a=e==="extended";let l=lF(this,a,o);return GM.indexOf(o)>=3&&(l+="T"),l+=Gte(this,a,n,r,i,s,o),l}toISODate({format:e="extended",precision:n="day"}={}){return this.isValid?lF(this,e==="extended",UM(n)):null}toISOWeekDate(){return tR(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=UM(a),(i&&GM.indexOf(a)>=3?"T":"")+Gte(this,o==="extended",n,e,r,s,a)):null}toRFC2822(){return tR(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return tR(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?lF(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),tR(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():sF}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return mr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=C7e(n).map(mr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=RVe(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(pn.now(),e,n)}until(e){return this.isValid?Ki.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||pn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Wte(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Wte(e.base||pn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(pn.isDateTime))throw new sa("min requires all arguments be DateTimes");return Pte(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(pn.isDateTime))throw new sa("max requires all arguments be DateTimes");return Pte(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return e0e(o,e,n)}static fromStringExplain(e,n,r={}){return pn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Dr.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new Qge(s,e)}static fromFormatParser(e,n,r={}){if(Cn(e)||Cn(n))throw new sa("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new sa(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=n.explainFromTokens(e);return u?pn.invalid(u):P_(a,l,r,`format ${n.format}`,e,c)}static get DATE_SHORT(){return yN}static get DATE_MED(){return ige}static get DATE_MED_WITH_WEEKDAY(){return t7e}static get DATE_FULL(){return sge}static get DATE_HUGE(){return oge}static get TIME_SIMPLE(){return age}static get TIME_WITH_SECONDS(){return lge}static get TIME_WITH_SHORT_OFFSET(){return cge}static get TIME_WITH_LONG_OFFSET(){return uge}static get TIME_24_SIMPLE(){return hge}static get TIME_24_WITH_SECONDS(){return dge}static get TIME_24_WITH_SHORT_OFFSET(){return fge}static get TIME_24_WITH_LONG_OFFSET(){return pge}static get DATETIME_SHORT(){return mge}static get DATETIME_SHORT_WITH_SECONDS(){return gge}static get DATETIME_MED(){return yge}static get DATETIME_MED_WITH_SECONDS(){return vge}static get DATETIME_MED_WITH_WEEKDAY(){return n7e}static get DATETIME_FULL(){return _ge}static get DATETIME_FULL_WITH_SECONDS(){return xge}static get DATETIME_HUGE(){return wge}static get DATETIME_HUGE_WITH_SECONDS(){return bge}}function BE(t){if(pn.isDateTime(t))return t;if(t&&t.valueOf&&Mg(t.valueOf()))return pn.fromJSDate(t);if(t&&typeof t=="object")return pn.fromObject(t);throw new sa(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const XVe="shortOffset";function ZVe(t){return"timeZoneIANA"in t}function JVe(t){return t.startsWith("UTC")}function IPt(t,e=!1){return{json:{read:{source:t,reader:(n,r)=>r[t]?QVe(r[t]):null},write:!!e&&{allowNull:!0,writer(n,r){r[t]=n?eze(n):null}}}}}function QVe(t,e=Ud){return t?ZVe(t)?t.timeZoneIANA:tze(t,e):e}function eze(t){return{timeZoneIANA:t}}function tze(t,e=Ud){if(!t||!gte.has(t.timeZone))return e;const n=gte.get(t.timeZone);return JVe(t.timeZone)||t.respectsDaylightSaving?n:nze(n)}function nze(t){const e=pn.local().setZone(t),n=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${pa.instance(-n).formatOffset(0,"narrow")}`}function PPt(t,e,n,r,i){if(e&&i==="date")return{timeZone:sA,timeZoneName:void 0};const s=r.hour,o=n===fW;return{timeZone:o?i==="timestamp-offset"?void 0:t??sA:n,timeZoneName:o&&s?XVe:void 0}}function rze(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Ud||t===fW||e.has(t.toLowerCase())||n.has(t.toLowerCase())}const ize={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},sze={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},i0e={timeZone:sA},Kh={year:"numeric",month:"numeric",day:"numeric"},WE={year:"numeric",month:"long",day:"numeric"},HE={year:"numeric",month:"short",day:"numeric"},qE={year:"numeric",month:"long",weekday:"long",day:"numeric"},Hm={hour:"numeric",minute:"numeric"},uy={...Hm,second:"numeric"},s0e={hourCycle:"h23"},KE={...Hm,...s0e},YE={...uy,...s0e},o0e={"short-date":Kh,"short-date-short-time":{...Kh,...Hm},"short-date-short-time-24":{...Kh,...KE},"short-date-long-time":{...Kh,...uy},"short-date-long-time-24":{...Kh,...YE},"short-date-le":Kh,"short-date-le-short-time":{...Kh,...Hm},"short-date-le-short-time-24":{...Kh,...KE},"short-date-le-long-time":{...Kh,...uy},"short-date-le-long-time-24":{...Kh,...YE},"long-month-day-year":WE,"long-month-day-year-short-time":{...WE,...Hm},"long-month-day-year-short-time-24":{...WE,...KE},"long-month-day-year-long-time":{...WE,...uy},"long-month-day-year-long-time-24":{...WE,...YE},"day-short-month-year":HE,"day-short-month-year-short-time":{...HE,...Hm},"day-short-month-year-short-time-24":{...HE,...KE},"day-short-month-year-long-time":{...HE,...uy},"day-short-month-year-long-time-24":{...HE,...YE},"long-date":qE,"long-date-short-time":{...qE,...Hm},"long-date-short-time-24":{...qE,...KE},"long-date-long-time":{...qE,...uy},"long-date-long-time-24":{...qE,...YE},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Hm,"long-time":uy},oze=Dl()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),a0e={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},aze=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),lze=aze.find(({type:t})=>t==="month")?.value.toLowerCase();function l0e(){const t=hW();return(t&&a0e[t])??Yme()}lze!=="mart"&&(a0e.bs="sr-Latn-CS");let e7=new WeakMap;const uO=o0e["short-date-short-time"];function cze(t){let e=e7.get(t);if(!e){const n=l0e(),r=EW(t.timeZone??Ud),i={...t,timeZone:r};e=new Intl.DateTimeFormat(n,i),e7.set(t,e)}return e}function RPt(t){return o0e[t]}function MPt(t){const{dateStyle:e,timeStyle:n,hour12:r,year:i,month:s}=t,o={};return e?o.dateStyle=e:i&&(o.year=i,o.month=s||void 0),n&&!o.year&&(o.timeStyle=n,o.hour12=r==="auto"?void 0:r==="always"),o}function bW(t,e=uO){return cze(e).format(t)}function NPt(t,e=uO){return bW(new Date(t),{...e,...i0e,...sze})}function LPt(t,e=uO){return bW(new Date(`1970-01-01T${t}Z`),{...e,...i0e,...ize})}function OPt(t,e=uO){if(e.timeZone)return bW(new Date(t),e);const n=pn.fromISO(t,{setZone:!0}),r=n.offset===0?sA:e.timeZone,i={...e,timeZone:r};return n.toLocaleString(i,{locale:l0e()})}function EW(t){switch(t){case Ud:return Z9e;case fW:return sA;default:return t}}dW(()=>{e7=new WeakMap});const uze={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let BM=new WeakMap,c0e={};function t7(t){const e=t||c0e;if(!BM.has(e)){const n=hW(),r=n&&uze[n]||Yme();BM.set(e,new Intl.NumberFormat(r,t))}return BM.get(e)}function DPt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function jPt(t){const{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r==="auto"?"auto":r==="always"}}function FPt(t,e){return Object.is(t,-0)&&(t=0),t7(e).format(t)}function $Pt(t,e=fu()){if(!t)return null;let n=qte.get(e);if(!n){const r=t7().formatToParts(12345.6),i=[...t7({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(i.map((h,f)=>[h,f])),o=new RegExp(`[${r.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${i.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,u=/[-\u2212\u2013\u2014\u2015]/g;n=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,g=>String(s.get(g))).replaceAll(c,"").replaceAll(u,"-"))==="")return null;const f=Number(h);return isNaN(f)?null:f},qte.set(e,n)}return n(t)}dW(()=>{BM=new WeakMap,c0e={}});const qte=new Map;async function hze(t,e,n,r){const i=e.exec(n);if(!i)throw new Qe("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${e}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=tge(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await Kte(t(c))}catch(h){if(c===l)throw new Qe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:h});try{u=await Kte(t(l))}catch(f){throw new Qe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return u}async function Kte(t){if(Yte.fetchBundleAsset!=null)return Yte.fetchBundleAsset(t);const e=await rs(t,{responseType:"text"});return JSON.parse(e.data)}let dze=class{constructor({base:e="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,n){return hze(this.getAssetUrl,this.matcher,e,n)}};function fze(t){return new dze(t)}const Yte={};q9e(fze({pattern:"esri/",location:qi}));let Af=class extends Kt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let n=e==="local"||e==="global"?e:tge(e??fu())??"global";return n=n==="no"?"nb":n,n}};x([E()],Af.prototype,"apiKey",void 0),x([E()],Af.prototype,"id",void 0),x([E()],Af.prototype,"language",void 0),x([E()],Af.prototype,"places",void 0),x([E()],Af.prototype,"serviceUrl",void 0),x([E()],Af.prototype,"worldview",void 0),Af=x([he("esri.support.BasemapStyle")],Af);const pze=Af,u0e=Symbol("BasemapInstance");function GPt(t){return t!=null&&typeof t=="object"&&u0e in t}function mn(t,e,n={}){return SW(t,e,n,h0e)}function Sc(t,e,n={}){return SW(t,e,n,d0e)}function SW(t,e,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(ii(i),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(i=_$e(t,s,n.sync,n.equals),n.initial){const o=t();s(o,o)}return i}function J1(t,e,n,r={}){let i=null,s=null,o=null;function a(){i&&s&&(s.remove(),r.onListenerRemove?.(i),i=null,s=null)}function l(u){r.once&&r.once&&ii(o),n(u)}const c=mn(t,(u,h)=>{a(),WL(u)&&(i=u,s=wb(u,e,l),r.onListenerAdd?.(u))},{sync:r.sync,initial:!0});return o=Zn(()=>{c.remove(),a()}),o}function TW(t,e){return mze(t,d0e,e)}function mze(t,e,n){if(va(n))return Promise.reject(Pr());const r=t();if(e?.(r))return Promise.resolve(r);let i=null;function s(){i=ii(i)}return new Promise((o,a)=>{i=xv([vu(n,()=>{s(),a(Pr())}),SW(t,l=>{s(),o(l)},{sync:!1,once:!0},e??h0e)])})}function h0e(t){return!0}function d0e(t){return!!t}function UPt(t,e,n={}){let r=!1;const i=mn(t,(s,o)=>{r||e(s,o)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}const Qg={sync:!0},xa={initial:!0},oa={sync:!0,initial:!0};let f0e=0;const kW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+f0e++})}};return n=x([he("esri.core.Identifiable")],n),n},AW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:f0e++})}};return n=x([he("esri.core.Identifiable.NumericIdentifiable")],n),n};kW(class{});async function gze(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:n}=await ge(async()=>{const{fromItem:r}=await import("./portalLayers-BpoWL6Jy.js");return{fromItem:r}},__vite__mapDeps([37,38,39,40,41,35]));try{return await n(e)}catch(r){const i=e?.portalItem,s=i?.id||"unset",o=i?.portal?.url||nr.portalUrl;throw kt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}const Xte={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function cF(t,e,n,r=Ud){const i=new Eh(EW(r)),s=pn.fromJSDate(t,{zone:i}),o=n==="decades"||n==="centuries"?"year":p0e(n);return n==="decades"&&(e*=10),n==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function BPt(t,e,n="milliseconds"){const r=t.getTime(),i=yze(e,n,"milliseconds");return new Date(r+i)}function Zte(t,e,n=Ud){const r=new Eh(EW(n)),i=pn.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=p0e(e);return i.startOf(s).toJSDate()}function yze(t,e,n){return t===0?0:t*Xte[e]/Xte[n]}function WPt(t,e){return t&&e?t.intersection(e):t||e}function p0e(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var zc,jw;let Ma=(jw=class extends qt{static get allTime(){return Jte}static get empty(){return vze}static fromArray(e){return new zc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,n){return n.end!=null?new Date(n.end):null}writeEnd(e,n){n.end=e?.getTime()??null}get isAllTime(){return this.equals(zc.allTime)}get isEmpty(){return this.equals(zc.empty)}readStart(e,n){return n.start!=null?new Date(n.start):null}writeStart(e,n){n.start=e?.getTime()??null}clone(){return new zc({end:this.end,start:this.start})}equals(e){if(!e)return!1;const n=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return n===i&&r===s}expandTo(e,n=Ud){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=Zte(r,e,n));let i=this.end;if(i){const s=Zte(i,e,n);i=i.getTime()===s.getTime()?s:cF(s,1,e,n)}return new zc({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return zc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const n=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,a;return i>=n&&i<=r?o=i:n>=i&&n<=s&&(o=n),r>=i&&r<=s?a=r:s>=n&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?zc.empty:new zc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,n,r=Ud){if(this.isEmpty||this.isAllTime)return this.clone();const i=new zc,{start:s,end:o}=this;return s!=null&&(i.start=cF(s,e,n,r)),o!=null&&(i.end=cF(o,e,n,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Jte.clone();const n=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new zc({start:n,end:r})}},zc=jw,jw);x([E({type:Date,json:{write:{allowNull:!0}}})],Ma.prototype,"end",void 0),x([cr("end")],Ma.prototype,"readEnd",null),x([er("end")],Ma.prototype,"writeEnd",null),x([E({readOnly:!0,json:{read:!1}})],Ma.prototype,"isAllTime",null),x([E({readOnly:!0,json:{read:!1}})],Ma.prototype,"isEmpty",null),x([E({type:Date,json:{write:{allowNull:!0}}})],Ma.prototype,"start",void 0),x([cr("start")],Ma.prototype,"readStart",null),x([er("start")],Ma.prototype,"writeStart",null),Ma=zc=x([he("esri.time.TimeExtent")],Ma);const Jte=new Ma,vze=new Ma({start:void 0,end:void 0});let _ze=0,wi=class extends JL(kW(LC)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Vn(-180,-90,180,90,Wt.WGS84),this.id=Date.now().toString(16)+"-layer-"+_ze++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Wt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const n=typeof e=="string"?{url:e}:e;return(await ge(async()=>{const{fromUrl:r}=await import("./arcgisLayers-hGaMZZPY.js");return{fromUrl:r}},__vite__mapDeps([42,38,39,41]))).fromUrl(n)}static fromPortalItem(e){return gze(e)}initialize(){this.when().catch(e=>{Sa(e)||kt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Ha(this.url)}createLayerView(e,n){return Promise.reject(new Qe("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await rs(e,{query:{f:"json"},responseType:"json"})).data;throw new Qe("layer:no-attribution-data","Layer does not have attribution data")}};x([E({type:String})],wi.prototype,"attributionDataUrl",void 0),x([E({readOnly:!0})],wi.prototype,"effectiveVisible",null),x([E({type:Vn})],wi.prototype,"fullExtent",void 0),x([E({readOnly:!0})],wi.prototype,"hasAttributionData",null),x([E({type:String,clonable:!1})],wi.prototype,"id",void 0),x([E({type:Boolean,nonNullable:!0})],wi.prototype,"legendEnabled",void 0),x([E({type:["show","hide","hide-children"]})],wi.prototype,"listMode",void 0),x([E({type:Number,range:{min:0,max:1},nonNullable:!0})],wi.prototype,"opacity",void 0),x([E({clonable:!1})],wi.prototype,"parent",void 0),x([E({readOnly:!0})],wi.prototype,"parsedUrl",null),x([E({type:Boolean,readOnly:!0})],wi.prototype,"persistenceEnabled",void 0),x([E({type:Boolean})],wi.prototype,"popupEnabled",void 0),x([E({type:Boolean})],wi.prototype,"attributionVisible",void 0),x([E({type:Wt})],wi.prototype,"spatialReference",void 0),x([E({type:String})],wi.prototype,"title",void 0),x([E({readOnly:!0,json:{read:!1}})],wi.prototype,"type",void 0),x([E()],wi.prototype,"url",void 0),x([E({type:Ma})],wi.prototype,"visibilityTimeExtent",void 0),x([E({type:Boolean,nonNullable:!0})],wi.prototype,"visible",void 0),wi=x([he("esri.layers.Layer")],wi);const nR=new WeakMap;function m0e(t){return!t.destroyed&&(nR.has(t)||t.addHandles([mn(()=>{const{parent:e}=t;return!!(e&&e instanceof wi)&&(e.type==="catalog-dynamic-group"||m0e(e))},e=>nR.set(t,e),oa),Zn(()=>nR.delete(t))]),nR.get(t))}function xze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function qPt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function wze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function bze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function KPt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Qte(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function nx(t){return t?.type==="subtype-sublayer"}const YPt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function XPt(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function ZPt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function hO(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function JPt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function Eze(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function QPt(t){return xze(t)&&Eze(t)}async function eRt(t,e){const n=Zr?.findServerInfo(t);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await rs(i,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function Sze(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Tze(t){return Sze(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function kze(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Aze(t){return!!kze(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Cze(t,e){return null}function tRt(t){return null}function Ize(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function nRt(t,e){!e||!Ize(t)||Cze(t.url)}const Pze=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Rze=new Set(["integrated-mesh-3dtiles"]),g0e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Mze=new Set([...g0e,"link-chart"]);function Nze(t){switch(t.layerContainerType){case"basemap-base-layers":return Pze;case"basemap-ground-layers":return Rze;case"operational-layers":return t.origin==="link-chart"?Mze:g0e;default:return null}}function Lze(t,e){if(e.restrictedWebMapWriting){const n=Nze(e);return n==null||n.has(t.type)&&!hO(t)}return!0}function Oze(t,e){if(e)if(hO(t)){const n=GL("featureCollection.layers",e),r=n?.[0]?.layerDefinition;r&&ene(t,r)}else t.type!=="group"&&ene(t,e)}function ene(t,e){"maxScale"in t&&(e.maxScale=pN(t.maxScale)??void 0),"minScale"in t&&(e.minScale=pN(t.minScale)??void 0)}function Dze(t,e){if(Oze(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=pN(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(hO(t)){const n=e.featureCollection;n&&(n.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function uF(t,e,n){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return n?.messages&&n.messages.push(new Qe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(hO(t)&&!t.isTable)e=t.resourceInfo;else if(Lze(t,n)){const r={};return t.write(r,n)?r:null}return e!=null&&Dze(t,e=et(e)),e}var tne,rx,x1;let tl=(x1=class extends g0(LC){constructor(e){super(e),this[tne]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+rx.idCounter++,this.baseLayers=new Lt,this.referenceLayers=new Lt,this.groundLayers=new Lt;const n=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||kt.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this},i=a=>{const l=a.item;return l.parent===this?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},s=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>n(a.item)),this.baseLayers.on("after-remove",a=>s(a.item)),this.referenceLayers.on("after-add",a=>n(a.item)),this.referenceLayers.on("after-remove",a=>s(a.item)),this.groundLayers.on("before-add",i),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{kt.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroyed||i.destroy();const n=this.groundLayers.toArray();for(const i of n)i.destroyed||i.destroy();const r=this.referenceLayers.toArray();for(const i of r)i.destroyed||i.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Di(this.portalItem)}removeChildLayer(e){for(const n of[this.baseLayers,this.referenceLayers,this.groundLayers])n.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Cd(e,this._get("baseLayers")))}_writeBaseLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=uF(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),this.referenceLayers.forEach(s=>{const o=uF(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),i.push(o))})),n.baseMapLayers=i}set groundLayers(e){this._set("groundLayers",Cd(e,this._get("groundLayers")))}_writeGroundLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=uF(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),i.length>0&&(n.groundLayers=i))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Cd(e,this._get("referenceLayers")))}writeTitle(e,n){n.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return wme(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(n=>kT(n)?n.clone():n),groundLayers:this.groundLayers.map(n=>kT(n)?n.clone():n),referenceLayers:this.referenceLayers.map(n=>kT(n)?n.clone():n)};return this.loaded&&(e.loadStatus="loaded"),new rx({resourceInfo:this.resourceInfo}).set(e)}read(e,n){this.resourceInfo||this._set("resourceInfo",{data:e,context:n}),super.read(e,n)}write(e,n){return e=e||{},n?.origin||(n={origin:"web-map",...n}),super.write(e,n),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=et(r);return i.url&&Vd(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&Vd(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:n,portalItem:r,style:i}=this;gi(e);const s=[];if(n){const o=n.context?n.context.url:null;if(s.push(this._loadLayersFromJSON(n.data,o,e)),n.data.id&&!n.data.title){const a=n.data.id;s.push(X9e(a).then(l=>{l&&this.read({title:l},n.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,n,r){const i=this.resourceInfo?.context,s=this.portalItem?.portal||i?.portal||null,o=Fze[i?.origin||""]??"web-map",{populateOperationalLayers:a}=await ge(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-CWB8HTNG.js");return{populateOperationalLayers:c}},__vite__mapDeps([43,40,39,38,41,37,35,44])),l=[];if(gi(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},u=g=>o==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,h=a(this.baseLayers,e.baseMapLayers.filter(g=>!u(g)),c);l.push(h);const f=a(this.referenceLayers,e.baseMapLayers.filter(u),c);l.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},u=a(this.groundLayers,e.groundLayers,c);l.push(u)}await Promise.allSettled(l)}async _loadFromItem(e,n){const r=await e.load(n),i=await r.fetchData("json",n),s=Ha(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:jze[e.type||""]??"web-map",portal:e.portal||ot.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ot.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,n)}async _loadFromStylesService(e,n){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??nr.apiKeys.basemapStyles,[a,l]=await Promise.all([(await rs(i,{query:{token:o},signal:n?.signal})).data,(await rs(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:n?.signal})).data]);this.thumbnailUrl??=a.thumbnailUrl;const c=Ha(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,n),o)for(const u of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=o)}static fromId(e){const n=G9[e];return n?n.itemId?new rx({portalItem:{id:n.itemId,portal:{url:"https://www.arcgis.com"}}}):rx.fromJSON(n,n.is3d?{origin:"web-scene",portal:new ot({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},tne=u0e,rx=x1,x1.idCounter=0,x1);x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,n,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Lt}},writer(t,e,n,r){this._writeBaseLayers(t,e,r)}}}}}})],tl.prototype,"baseLayers",null),x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,n,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:Lt}},writer(t,e,n,r){this._writeGroundLayers(t,e,r)}}}}}})],tl.prototype,"groundLayers",null),x([E({type:String,json:{origins:{"web-scene":{write:!0}}}})],tl.prototype,"id",void 0),x([E({type:bn})],tl.prototype,"portalItem",void 0),x([E()],tl.prototype,"referenceLayers",null),x([E({readOnly:!0})],tl.prototype,"resourceInfo",void 0),x([E({type:Wt})],tl.prototype,"spatialReference",void 0),x([E({type:pze})],tl.prototype,"style",void 0),x([E()],tl.prototype,"thumbnailUrl",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],tl.prototype,"title",void 0),x([er("title")],tl.prototype,"writeTitle",null),tl=rx=x([he("esri.Basemap")],tl);const jze={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Fze={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},RT=tl,$ze=Object.freeze(Object.defineProperty({__proto__:null,default:RT},Symbol.toStringTag,{value:"Module"})),wN={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Vze(t){return!!wN[t]||!!wN[t.toLowerCase()]}function y0e(t){return wN[t]??wN[t.toLowerCase()]}function rRt(t){return[...y0e(t)]}function hF(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function zze(t,e,n,r=1){const i=(t%360+360)%360/360,s=n<=.5?n*(e+1):n+e-n*e,o=2*n-s;return[Math.round(255*hF(o,s,i+1/3)),Math.round(255*hF(o,s,i)),Math.round(255*hF(o,s,i-1/3)),r]}function iRt(t){const e=t.length>5,n=e?8:4,r=(1<<n)-1,i=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=n,a[3]=i*l/255),l=o&r,o>>=n,a[2]=i*l,l=o&r,o>>=n,a[1]=i*l,l=o&r,o>>=n,a[0]=i*l,a}function v0e(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),i=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,n+16*n,r+16*r,(i+16*i)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function _0e(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const n=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){if(n[0].endsWith("%")){const i=n.map(s=>2.56*parseFloat(s));return n.length===4&&(i[3]=parseFloat(n[3])),nne(i)}return nne(n.map(i=>parseFloat(i)))}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return zze(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3]??"1"))}return null}function nne(t){return t[0]=mw(t[0]),t[1]=mw(t[1]),t[2]=mw(t[2]),t[3]=t.length===4?w0e(t[3]):1,t}function x0e(t){let e=Vze(t)?y0e(t):null;return e??=_0e(t),e??=v0e(t),e}function sRt(t){const e=x0e(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function w0e(t){return b0e(t,0,1)}function mw(t){return Math.round(b0e(t,0,255))}function b0e(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t}const E0e=2.2,Gze=1/E0e;function oRt(t){return t**E0e}function aRt(t){return t**Gze}const rne=new Float32Array(1);function lRt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function _u(t,e,n){return Math.min(Math.max(t,e),n)}function cRt(t){return!(t&t-1)}function uRt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function IS(t,e,n){return t+(e-t)*n}function hRt(t,e,n,r,i){return IS(r,i,(t-e)/(n-e))}function VC(t){return t*Math.PI/180}function S0e(t){return 180*t/Math.PI}function dRt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function fRt(t){return Math.acos(_u(t,-1,1))}function Uze(t){return Math.asin(_u(t,-1,1))}function Ng(t,e,n=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=n}function pRt(t,e,n=1e-6){return!Ng(t,e,n)&&t>e}function mRt(t,e,n=1e-6){return!Ng(t,e,n)&&t<e}function gRt(t,e,n=1e-6){return Ng(t,e,n)||t>e}const bN=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function n7(t){return bN.setFloat64(0,t),bN.getBigInt64(0)}function Bze(t){return bN.setBigInt64(0,t),bN.getFloat64(0)}const WM=1000000n,Wze=T0e(1);function T0e(t){const e=n7(t=Math.abs(t)),n=Bze(e<=WM?WM:e-WM);return Math.abs(t-n)}function yRt(t,e,n=Wze){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(n!=null&&T0e(Math.min(Math.abs(t),Math.abs(e)))<n)return Math.abs(t-e)<=n;const r=n7(t),i=n7(e);return r<0!=i<0?!1:!((r<i?i-r:r-i)>WM)}function k0e(t,e,n=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),i=Math.abs(t),s=Math.abs(e);if(t===0||e===0||i<1e-12&&s<1e-12){if(r>.01*n)return!1}else if(r/(i+s)>n)return!1;return!0}function vRt(t){return A0e(Math.max(-ine,Math.min(t,ine)))}function A0e(t){return rne[0]=t,rne[0]}function _Rt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Ng(e,1)&&Ng(n,1)&&Ng(r,1))}function xRt(t,e){return(t%e+e)%e}const ine=A0e(34028234663852886e22);function wRt(t,e,n){if(n===void 0||+n==0)return Math[t](e);if(e=+e,n=+n,isNaN(e)||typeof n!="number"||n%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function rR(t){return _u(qB(t),0,255)}function iR(t,e){const n=t.toString(16).padStart(2,"0");return e?n.slice(0,1):n}let Jn=class Gc{static blendColors(e,n,r,i=new Gc){return i.r=Math.round(e.r+(n.r-e.r)*r),i.g=Math.round(e.g+(n.g-e.g)*r),i.b=Math.round(e.b+(n.b-e.b)*r),i.a=e.a+(n.a-e.a)*r,i._sanitize()}static fromRgb(e,n){const r=_0e(e);return r?Gc.fromArray(r,n):null}static fromHex(e,n=new Gc){const r=v0e(e);return r?Gc.fromArray(r,n):null}static fromArray(e,n=new Gc){return n._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(e,n){const r=x0e(e);return r?Gc.fromArray(r,n):null}static fromJSON(e){return e!=null?new Gc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,n){return e==null?null:(n??=[0,0,0,0],n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.a!=null?e.a:1,n)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Gc.fromString(e,this):Array.isArray(e)?Gc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Gc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const n=e?.capitalize??!1,r=e?.digits??6,i=r===3||r===4,s=r===4||r===8,o=`#${iR(this.r,i)}${iR(this.g,i)}${iR(this.b,i)}${s?iR(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(e=!1){const n=this.r+", "+this.g+", "+this.b;return e?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const n=rR(this.r),r=rR(this.g),i=rR(this.b);return e===0||this.a!==1?[n,r,i,rR(255*this.a)]:[n,r,i]}clone(){return new Gc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=mw(this.r),this.g=mw(this.g),this.b=mw(this.b),this.a=w0e(this.a),this}_set(e,n,r,i){this.r=e,this.g=n,this.b=r,this.a=i}};Jn.prototype.declaredClass="esri.Color";let nh=class extends Lt{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(l$e(()=>this._refresh(),Qg))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let n=0;for(const r of e)r!=null&&(n=this._processCollection(n,r));this.splice(n)}_createNewInstance(e){return new Lt(e)}_processCollection(e,n){if(!n)return e;const r=this.itemFilterFunction??(i=>!!i);for(const i of n)if(i){if(r(i)){const s=this.indexOf(i,e);s>=0?s!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};x([E()],nh.prototype,"getCollections",void 0),x([E()],nh.prototype,"getChildrenFunction",void 0),x([E()],nh.prototype,"itemFilterFunction",void 0),nh=x([he("esri.core.CollectionFlattener")],nh);function yn(t,e={}){const n=t instanceof Xs?t:new Xs(t,e),{alwaysWriteDefaults:r,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return E({type:s?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!l&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var r7;let HM=r7=class extends qt{constructor(t){super(t),this.type="none"}clone(){return new r7({type:this.type})}};x([yn({none:"none",stayAbove:"stay-above"}),E({json:{write:{isRequired:!0}}})],HM.prototype,"type",void 0),HM=r7=x([he("esri.ground.NavigationConstraint")],HM);const C0e=Symbol("GroundInstance");function ERt(t){return t!=null&&typeof t=="object"&&C0e in t}function I0e(t){const e=qB(100*(1-t));return Math.max(0,Math.min(e,100))}function P0e(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var sne,i7,sle;let Uc=i7=(sle=class extends g0(LC){constructor(t){super(t),this[sne]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Lt;const e=r=>{const{parent:i}=r;i&&i!==this&&"remove"in i&&i.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&kt.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>n(r.item))]),this.allLayers=new nh({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{Sa(t)||kt.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Di(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Cd(t,this._get("layers")))}writeLayers(t,e,n,r){const i=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};D6e(s)().write(o,r)&&i.push(o)}else r?.messages&&r.messages.push(new Qe("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=i}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return wme(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:n}=await ge(()=>import("./ElevationQuery-XOnWf19x.js"),__vite__mapDeps([45,46]));return gi(e),n(this.layers.filter(one).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:n}=await ge(()=>import("./ElevationQuery-XOnWf19x.js"),__vite__mapDeps([45,46]));return gi(e),n(this.layers.filter(one).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:et(this.surfaceColor),navigationConstraint:et(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new i7({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,n){const r=e?.origin||"web-scene",i=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=await ge(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-CWB8HTNG.js");return{populateOperationalLayers:l}},__vite__mapDeps([43,40,39,38,41,37,35,44]));gi(n);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},sne=C0e,sle);function one(t){return t&&"createElevationSampler"in t}x([E()],Uc.prototype,"parent",void 0),x([E()],Uc.prototype,"integratedMeshGround",null),x([E({json:{read:!1,write:{isRequired:!0}}})],Uc.prototype,"layers",null),x([E()],Uc.prototype,"allLayers",void 0),x([er("layers")],Uc.prototype,"writeLayers",null),x([E({readOnly:!0})],Uc.prototype,"resourceInfo",void 0),x([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:jr,read:{reader:P0e,source:"transparency"},write:{writer:(t,e)=>{e.transparency=I0e(t)},target:"transparency"}}})],Uc.prototype,"opacity",void 0),x([E({type:Jn,json:{type:[jr],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Uc.prototype,"surfaceColor",void 0),x([E({type:HM,json:{write:!0}})],Uc.prototype,"navigationConstraint",void 0),Uc=i7=x([he("esri.Ground")],Uc);const EN=Uc,Hze=Symbol("ClonableMixin"),_o=t=>{var i;var e;const n=t;let r=(i=class extends n{constructor(){super(...arguments),this[e]=!0}clone(s){const o=Kg(this);ppe(o,"unable to clone instance of non-accessor class");const a=o.metadata,l=o.store,c={},u=new Map;for(const f in a){const g=a[f],y=l?.originOf(f),_=g.clonable;if(g.readOnly||_===!1||y!==7&&y!==0&&y!==5&&y!==4)continue;const b=this[f];let T=null;if(typeof _=="function")T=_(b,s);else if(_==="reference")T=b;else if(T=u9(b,s),b!=null&&T==null)continue;y===0?u.set(f,T):c[f]=T}const h=new(Object.getPrototypeOf(this)).constructor(c);if(u.size){const f=Kg(h)?.store;if(f)for(const[g,y]of u)f.set(g,y,0)}return h}},e=Hze,i);return r=x([he("esri.core.Clonable")],r),r},CW=_o(Kt),qze="randomUUID"in crypto;function zC(){if(qze)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=n=>t[n].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function SRt(){return`{${zC().toUpperCase()}}`}function TRt(){return`{${zC()}}`}function kRt(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const R_={Base64:0,Hex:1,String:2,Raw:3},gw=8,R0e=(1<<gw)-1;function dg(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Kze(t){const e=[];for(let n=0,r=t.length*gw;n<r;n+=gw)e[n>>5]|=(t.charCodeAt(n/gw)&R0e)<<n%32;return e}function Yze(t){const e=[];for(let n=0,r=32*t.length;n<r;n+=gw)e.push(String.fromCharCode(t[n>>5]>>>n%32&R0e));return e.join("")}function Xze(t){const e="0123456789abcdef",n=[];for(let r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}function Zze(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let i=0,s=4*t.length;i<s;i+=3){const o=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*t.length?r.push("="):r.push(n.charAt(o>>6*(3-a)&63))}return r.join("")}function Jze(t,e){return t<<e|t>>>32-e}function dO(t,e,n,r,i,s){return dg(Jze(dg(dg(e,t),dg(r,s)),i),n)}function qo(t,e,n,r,i,s,o){return dO(e&n|~e&r,t,e,i,s,o)}function Ko(t,e,n,r,i,s,o){return dO(e&r|n&~r,t,e,i,s,o)}function Yo(t,e,n,r,i,s,o){return dO(e^n^r,t,e,i,s,o)}function Xo(t,e,n,r,i,s,o){return dO(n^(e|~r),t,e,i,s,o)}function Qze(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=n,l=r,c=i,u=s;n=qo(n,r,i,s,t[o],7,-680876936),s=qo(s,n,r,i,t[o+1],12,-389564586),i=qo(i,s,n,r,t[o+2],17,606105819),r=qo(r,i,s,n,t[o+3],22,-1044525330),n=qo(n,r,i,s,t[o+4],7,-176418897),s=qo(s,n,r,i,t[o+5],12,1200080426),i=qo(i,s,n,r,t[o+6],17,-1473231341),r=qo(r,i,s,n,t[o+7],22,-45705983),n=qo(n,r,i,s,t[o+8],7,1770035416),s=qo(s,n,r,i,t[o+9],12,-1958414417),i=qo(i,s,n,r,t[o+10],17,-42063),r=qo(r,i,s,n,t[o+11],22,-1990404162),n=qo(n,r,i,s,t[o+12],7,1804603682),s=qo(s,n,r,i,t[o+13],12,-40341101),i=qo(i,s,n,r,t[o+14],17,-1502002290),r=qo(r,i,s,n,t[o+15],22,1236535329),n=Ko(n,r,i,s,t[o+1],5,-165796510),s=Ko(s,n,r,i,t[o+6],9,-1069501632),i=Ko(i,s,n,r,t[o+11],14,643717713),r=Ko(r,i,s,n,t[o],20,-373897302),n=Ko(n,r,i,s,t[o+5],5,-701558691),s=Ko(s,n,r,i,t[o+10],9,38016083),i=Ko(i,s,n,r,t[o+15],14,-660478335),r=Ko(r,i,s,n,t[o+4],20,-405537848),n=Ko(n,r,i,s,t[o+9],5,568446438),s=Ko(s,n,r,i,t[o+14],9,-1019803690),i=Ko(i,s,n,r,t[o+3],14,-187363961),r=Ko(r,i,s,n,t[o+8],20,1163531501),n=Ko(n,r,i,s,t[o+13],5,-1444681467),s=Ko(s,n,r,i,t[o+2],9,-51403784),i=Ko(i,s,n,r,t[o+7],14,1735328473),r=Ko(r,i,s,n,t[o+12],20,-1926607734),n=Yo(n,r,i,s,t[o+5],4,-378558),s=Yo(s,n,r,i,t[o+8],11,-2022574463),i=Yo(i,s,n,r,t[o+11],16,1839030562),r=Yo(r,i,s,n,t[o+14],23,-35309556),n=Yo(n,r,i,s,t[o+1],4,-1530992060),s=Yo(s,n,r,i,t[o+4],11,1272893353),i=Yo(i,s,n,r,t[o+7],16,-155497632),r=Yo(r,i,s,n,t[o+10],23,-1094730640),n=Yo(n,r,i,s,t[o+13],4,681279174),s=Yo(s,n,r,i,t[o],11,-358537222),i=Yo(i,s,n,r,t[o+3],16,-722521979),r=Yo(r,i,s,n,t[o+6],23,76029189),n=Yo(n,r,i,s,t[o+9],4,-640364487),s=Yo(s,n,r,i,t[o+12],11,-421815835),i=Yo(i,s,n,r,t[o+15],16,530742520),r=Yo(r,i,s,n,t[o+2],23,-995338651),n=Xo(n,r,i,s,t[o],6,-198630844),s=Xo(s,n,r,i,t[o+7],10,1126891415),i=Xo(i,s,n,r,t[o+14],15,-1416354905),r=Xo(r,i,s,n,t[o+5],21,-57434055),n=Xo(n,r,i,s,t[o+12],6,1700485571),s=Xo(s,n,r,i,t[o+3],10,-1894986606),i=Xo(i,s,n,r,t[o+10],15,-1051523),r=Xo(r,i,s,n,t[o+1],21,-2054922799),n=Xo(n,r,i,s,t[o+8],6,1873313359),s=Xo(s,n,r,i,t[o+15],10,-30611744),i=Xo(i,s,n,r,t[o+6],15,-1560198380),r=Xo(r,i,s,n,t[o+13],21,1309151649),n=Xo(n,r,i,s,t[o+4],6,-145523070),s=Xo(s,n,r,i,t[o+11],10,-1120210379),i=Xo(i,s,n,r,t[o+2],15,718787259),r=Xo(r,i,s,n,t[o+9],21,-343485551),n=dg(n,a),r=dg(r,l),i=dg(i,c),s=dg(s,u)}return[n,r,i,s]}function eGe(t,e=R_.Hex){const n=e||R_.Base64,r=Qze(Kze(t),t.length*gw);switch(n){case R_.Raw:return r;case R_.Hex:return Xze(r);case R_.String:return Yze(r);case R_.Base64:return Zze(r)}}function tGe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function s7(t){return IW[nGe(t)]||iGe}function nGe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:rGe(t.url)}function rGe(t){const e=ape(t);return o7[e]||M0e}const IW={},M0e="text/plain",iGe=IW[M0e],o7={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in o7)IW[o7[t]]=t;function sGe(t){const e=t?.origins??[void 0];return(n,r)=>{const i=oGe(t,n,r);for(const s of e){const o=YB(n,s,r);for(const a in i)o[a]=i[a]}}}function oGe(t,e,n){if(t?.type==="resource")return aGe(t,e,n);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:i}=Bje;return{read:r,write:i}}}}function aGe(t,e,n){const r=RC(e,n);return{type:String,read:(i,s,o)=>{const a=HL(i,s,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(i,s,o,a){if(!a?.resources)return typeof i=="string"?void(s[o]=P2(i,a)):void(s[o]=i.write({},a));const l=uGe(i),c=P2(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),u=r.type!==String&&(!tGe(this)||a?.origin&&this.originIdOf(n)>UB(a.origin)),h={object:this,propertyName:n,value:i,targetUrl:c,dest:s,targetPropertyName:o,context:a,params:t};a?.portalItem&&c&&!kl(c)?u&&t?.contentAddressed?a7(h):u?lGe(h):cGe(h):a?.portalItem&&(c==null||ype(c)!=null||kC(c)||u)?a7(h):s[o]=c}}}}function a7(t){const{targetUrl:e,params:n,value:r,context:i,dest:s,targetPropertyName:o}=t;if(!i.portalItem)return;const a=vpe(e),l=L0e(r,e,i);if(n?.contentAddressed&&l.type!=="json")return void i.messages?.push(new Qe("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=n?.contentAddressed&&l.type==="json"?eGe(l.jsonString):a?.filename??zC(),u=TC(n?.prefix??a?.prefix,c),h=`${u}.${s7(l)}`;if(n?.contentAddressed&&i.resources&&l.type==="json"){const y=i.resources.toKeep.find(({resource:_})=>_.path===h)??i.resources.toAdd.find(({resource:_})=>_.path===h);if(y)return void(s[o]=y.resource.itemRelativeUrl)}const f=i.portalItem.resourceFromPath(h);kC(e)&&i.resources&&i.resources.pendingOperations.push(yje(e).then(y=>{f.path=`${u}.${s7({type:"blob",blob:y})}`,s[o]=f.itemRelativeUrl}).catch(()=>{}));const g=n?.compress??!1;i.resources&&N0e({...t,resource:f,content:l,compress:g,updates:i.resources.toAdd}),s[o]=f.itemRelativeUrl}function lGe(t){const{context:e,targetUrl:n,params:r,value:i,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(n),l=L0e(i,n,e),c=s7(l),u=ape(a.path),h=r?.compress??!1;c===u?(e.resources&&N0e({...t,resource:a,content:l,compress:h,updates:e.resources.toUpdate}),s[o]=n):a7(t)}function cGe({context:t,targetUrl:e,dest:n,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),n[r]=e)}function N0e({object:t,propertyName:e,updates:n,resource:r,content:i,compress:s}){const o=a=>{hGe(t,e,a)};n.push({resource:r,content:i,compress:s,finish:o})}function L0e(t,e,n){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(n))}}function uGe(t){return t==null?null:typeof t=="string"?t:t.url}function hGe(t,e,n){typeof t[e]=="string"?t[e]=n.url:t[e].url=n.url}let qM=class extends _o(qt){constructor(e){super(e),this.color=null}};x([E({type:Jn,json:{type:[jr],write:!0}})],qM.prototype,"color",void 0),qM=x([he("esri.effects.FocusAreaOutline")],qM);const dGe=qM;function CRt(t){const e=[];for(t.reset();t.nextPath();){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);e.push(n)}return t.reset(),e}function fGe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function IRt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,n=t.hasM;if(t.type==="point")return n&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:n?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let i=!1,s=!1;return r.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function fO(t,e){const n=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function O0e(t,e,n){const r=t[0]+n*(e[0]-t[0]),i=t[1]+n*(e[1]-t[1]);return t.length>2&&e.length>2?[r,i,t[2]+n*(e[2]-t[2])]:[r,i]}function pGe(t,e,n,r){return mGe(t,e,n[r],n[r+1])}function mGe(t,e,n,r){const[i,s]=e,[o,a]=n,[l,c]=r,u=l-o,h=c-a,f=u*u+h*h,g=(i-o)*u+(s-a)*h,y=Math.min(1,Math.max(0,g/f));return t[0]=o+u*y,t[1]=a+h*y,t}function PRt(t,e,n,r,i,s){let o=n,a=r,l=i-o,c=s-a;if(l!==0||c!==0){const u=((t-o)*l+(e-a)*c)/(l*l+c*c);u>1?(o=i,a=s):u>0&&(o+=l*u,a+=c*u)}return l=t-o,c=e-a,l*l+c*c}function D0e(t,e){return O0e(t,e,.5)}function RRt(t){const e=t.length;let n=0;for(let r=0;r<e-1;++r)n+=fO(t[r],t[r+1]);return n}function MRt(t,e){if(e<=0)return t[0];const n=t.length;let r=0;for(let i=0;i<n-1;++i){const s=fO(t[i],t[i+1]);if(e-r<s){const o=(e-r)/s;return O0e(t[i],t[i+1],o)}r+=s}return t[n-1]}function j0e(t,e=0,n=1){let r=0;const i=t.length;let s=t[0];for(let o=1;o<i;o++){const a=t[o];r+=(a[e]-s[e])*(a[n]+s[n]),s=a}if(F0e(t)){const o=t[0];r+=(o[e]-s[e])*(o[n]+s[n])}return r>=0}function F0e(t){const e=t.length;return e>0&&!$L(t[0],t[e-1])}function NRt(t){"rings"in t&&(gGe(t),yGe(t))}function gGe(t){if("rings"in t)for(const e of t.rings)F0e(e)&&e.push(e[0].slice())}function yGe(t){if(!("rings"in t)||t.rings.length===0||j0e(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function LRt(t){return t.type!=="polygon"&&t.type!=="polyline"||vGe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function vGe(t,e){const n=Ua(e);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of t){let a=1/0,l=-1/0;for(const u of o){const h=_Ge(u[0],r,i);a=Math.min(a,h),l=Math.max(l,h),u[0]=h}const c=l-a;s-c<c&&o.forEach(u=>{u[0]<0&&(u[0]+=s)})}}function _Ge(t,e,n){const r=n-e;return t<e?n-(e-t)%r:t>n?e+(t-e)%r:t}function ORt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[n,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function DRt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function xGe(t){return bGe(t.rings,t.hasZ??!1)}function wGe(t){const e=xGe(t);if(!e)return null;const{hasZ:n,spatialReference:r}=t,[i,s,o]=e;return isNaN(i)||isNaN(s)||n&&isNaN(o)?null:{x:i,y:s,z:n?o:void 0,spatialReference:r}}function bGe(t,e){if(!t?.length)return null;const n=[],r=[],i=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=$0e(t[s],e,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],e&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||e&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=t[0]&&t[0].length?EGe(t[0],e):null;if(!s)return null;n[0]=s[0],n[1]=s[1],e&&s.length>2&&(n[2]=s[2])}return n}function $0e(t,e,n){let r=0,i=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const g=t[f],y=t[(f+1)%t.length],[_,b,T]=g,A=_-l,C=b-c,[I,R,V]=y,P=I-l,N=R-c,L=A*N-P*C;if(o+=L,r+=(A+P)*L,i+=(C+N)*L,e&&g.length>2&&y.length>2){const O=T-u,F=V-u,G=A*F-P*O;s+=(O+F)*G,a+=G}_<n[0]&&(n[0]=_),_>n[1]&&(n[1]=_),b<n[2]&&(n[2]=b),b>n[3]&&(n[3]=b),e&&(T<n[4]&&(n[4]=T),T>n[5]&&(n[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,i/(6*o)+c,o];return e&&(n[4]===n[5]||a===0?(h[3]=(n[4]+n[5])/2,h[4]=0):(h[3]=s/(6*a)+u,h[4]=a)),h}function jRt(t,e){let n=0,r=0,i=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[u,h]=l,f=u-s,g=h-o,[y,_]=c,b=y-s,T=_-o,A=f*T-b*g;i+=A,n+=(f+b)*A,r+=(g+T)*A,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function EGe(t,e){const n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const u=t[l],h=t[l+1];if(u&&h){n[0]=u[0],n[1]=u[1],r[0]=h[0],r[1]=h[1],e&&u.length>2&&h.length>2&&(n[2]=u[2],r[2]=h[2]);const f=fO(n,r);if(f){i+=f;const g=D0e(u,h);s+=f*g[0],o+=f*g[1],e&&g.length>2&&(a+=f*g[2])}}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.length?t[0]:null}function SGe(t){const{hasZ:e,totalSize:n}=t;if(n===0)return null;const r=[],i=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=$0e(fGe(t),t.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?TGe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function TGe(t){const{hasZ:e}=t,n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,u=t.z;for(;t.nextPoint();){const h=t.x,f=t.y,g=t.z;n[0]=l,n[1]=c,r[0]=h,r[1]=f,e&&(n[2]=u,r[2]=g);const y=fO(n,r);if(y){i+=y;const _=D0e(n,r);s+=y*_[0],o+=y*_[1],e&&_.length>2&&(a+=y*_[2])}l=h,c=f,u=g}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const kGe=1e-6;function FRt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<kGe){const i=SGe(t);return i?[i[0],i[1]]:null}const n=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)CGe(n,r,t);return n[0]*=1/e,n[1]*=1/e,n[0]+=r[0],n[1]+=r[1],n}const AGe=1/3;function CGe(t,e,n){if(!t||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,l=0,c=0;for(;n.nextPoint();)l=n.x-r,c=n.y-i,s=.5*AGe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const u=n.getCurrentRingArea(),h=[r,i];return h[0]-=e[0],h[1]-=e[1],h[0]*=u,h[1]*=u,t[0]+=h[0],t[1]+=h[1],t}function El(t=LGe){return[t[0],t[1],t[2],t[3]]}function V0e(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function IGe(t,e,n,r,i=El()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function $Rt(t,e=El()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function PGe(t,e,n=new Vn){return n.xmin=t[0],n.ymin=t[1],n.xmax=t[2],n.ymax=t[3],n.spatialReference=e,n}function su(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function RGe(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function MGe(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function VRt(t,e,n){if(e!=null)if("length"in e)c7(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}else V0e(n,t)}function zRt(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];i=Math.min(i,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function GRt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function PW(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function RW(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function URt(t){return PW(t)*RW(t)}function BRt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function WRt(t){const e=PW(t),n=RW(t);return Math.sqrt(e*e+n*n)}function HRt(t,e){return!!t&&l7(t,e.x,e.y)}function l7(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function qRt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function KRt(t,e,n){return Math.max(e[0],t[0])-n<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-n<=Math.min(e[3],t[3])}function NGe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function YRt(t,e,n,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function XRt(t){return t?V0e(t,ane):El(ane)}function c7(t){return t!=null&&t.length===4}function ZRt(t,e){return c7(t)&&c7(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const ane=[1/0,1/0,-1/0,-1/0],LGe=[0,0,0,0];let MW=1e-6;function Al(){return MW}function OGe(t){MW=t}const NW=Math.random,DGe=Math.PI/180,jGe=180/Math.PI;function LW(t){return t*DGe}function FGe(t){return t*jGe}function $Ge(t,e){return Math.abs(t-e)<=MW*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:NW,equals:$Ge,getEpsilon:Al,setEpsilon:OGe,toDegree:FGe,toRadian:LW},Symbol.toStringTag,{value:"Module"}));function yw(t,e){return t[0]=e[0],t[1]=e[1],t}function co(t,e,n){return t[0]=e,t[1]=n,t}function z0e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function aA(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function G0e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function U0e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function VGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function zGe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function GGe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function UGe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function BGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function GC(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function WGe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function pO(t,e){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function lA(t,e){const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function SN(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function B0e(t){const e=t[0],n=t[1];return e*e+n*n}function W0e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function HGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function u7(t,e){const n=e[0],r=e[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function H0e(t,e){return t[0]*e[0]+t[1]*e[1]}function q0e(t,e,n){const r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function qGe(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function KGe(t,e=1){const n=2*NW()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function YGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function dd(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function KM(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function XGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function ZGe(t,e,n,r){const i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}function JGe(t,e){const n=t[0],r=t[1],i=e[0],s=e[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(n*i+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function QGe(t){return"vec2("+t[0]+", "+t[1]+")"}function eUe(t,e){return t[0]===e[0]&&t[1]===e[1]}function tUe(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=Al();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function nUe(t,e,n,r,i){let s=e[0]-n[0],o=e[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const rUe=SN,OW=aA,iUe=G0e,sUe=U0e,oUe=pO,aUe=lA,lUe=B0e;Object.freeze(Object.defineProperty({__proto__:null,add:z0e,angle:JGe,ceil:VGe,copy:yw,cross:q0e,dist:oUe,distance:pO,div:sUe,divide:U0e,dot:H0e,equals:tUe,exactEquals:eUe,floor:zGe,inverse:HGe,len:rUe,length:SN,lerp:qGe,max:UGe,min:GGe,mul:iUe,multiply:G0e,negate:W0e,normalize:u7,projectAndScale:nUe,random:KGe,rotate:ZGe,round:BGe,scale:GC,scaleAndAdd:WGe,set:co,sqrDist:aUe,sqrLen:lUe,squaredDistance:lA,squaredLength:B0e,str:QGe,sub:OW,subtract:aA,transformMat2:YGe,transformMat2d:dd,transformMat3:KM,transformMat4:XGe},Symbol.toStringTag,{value:"Module"}));function Kf(t,e,n,r){return t[0]=e[0]*(1-r)+n[0]*r,t[1]=e[1]*(1-r)+n[1]*r,t}function Va(t,e){return lA(t,e)}function JRt(t,e,n){const r=Va(e,n);if(r===0)return Va(e,t);const i=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]);return i*i/r}function cUe(t,e,n,r,i){const[s,o]=e,[a,l]=n,[c,u]=r,[h,f]=i,g=(s-a)*(u-f)-(o-l)*(c-h);if(g===0)return null;const y=(s*l-o*a)*(c-h)-(s-a)*(c*f-u*h),_=(s*l-o*a)*(u-f)-(o-l)*(c*f-u*h);return t[0]=y/g,t[1]=_/g,t}const dh=2*Math.PI;function d1(t,e){const n=Math.atan2(t,e);return n<0?n+dh:n}function K0e(t){return Math.abs(t)%dh}function lne(t){const e=K0e(t);return e<Math.PI?e:dh-e}function mO(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function Y0e(t,e,n,r){if(Ng(K0e(t-e),0))return n?[t,t]:[t,r?t-dh:t+dh];const[i,s]=r?[t-dh,t]:[t,t+dh];return[t,UC({min:i,max:s},e)]}function UC({min:t,max:e},n){let r;return r=e-n,r>=dh?(r-=r%dh,n+r):(r=n-t,r>=dh?(r-=r%dh,n-r):n)}function uUe(t,e){const n=UC(t,e);return n>t.min&&n<t.max?n:lne(n-t.min)<lne(n-t.max)?t.min:t.max}function X0e(t,e,n,r=10){return e.map(i=>{let s=i;for(let o=0;o<r;o++){const[a,l,c,u,h,f]=n(s),g=t[0]-a,y=t[1]-l,_=-c,b=-u;s+=-(2*g*_+2*y*b)/(2*_*_+2*g*-h+2*b*b+2*y*-f||1e-6)}return s})}const hUe=[0,0];function Z0e(t){const e=1-t,n=e*e,r=t*t;return[n*e,3*t*n,3*r*e,r*t]}function h7(t,e,n,r,i){const[s,o,a,l]=Z0e(i);return[t[0]*s+e[0]*o+n[0]*a+r[0]*l,t[1]*s+e[1]*o+n[1]*a+r[1]*l]}function cne(t,e,n,r,i){const[s,o,a,l]=Z0e(i);return t*s+e*o+n*a+r*l}function QRt(t,e,n){const r=t,[i,s,o]=e.b;return h7(r,s,o,i,n)}function dUe(t,e,n){const r=t,[i,s,o]=e.b,a=Kf([0,0],r,s,n),l=Kf(hUe,s,o,n),c=Kf([0,0],o,i,n),u=Kf([0,0],a,l,n),h=Kf([0,0],l,c,n);return[{b:[Kf([],u,h,n),a,u]},{b:[[...i],h,c]}]}function eMt(t,e,n){const r=t,[i,s,o]=e.b,a=X0e(n,[.1,.5,.9],h=>{const f=1-h,[g,y]=h7(r,s,o,i,h);return[g,y,3*f*f*(s[0]-r[0])+6*f*h*(o[0]-s[0])+3*h*h*(i[0]-o[0]),3*f*f*(s[1]-r[1])+6*f*h*(o[1]-s[1])+3*h*h*(i[1]-o[1]),6*f*(o[0]-2*s[0]+r[0])+6*h*(i[0]-2*o[0]+s[0]),6*f*(o[1]-2*s[1]+r[1])+6*h*(i[1]-2*o[1]+s[1])]}).map(h=>Math.min(1,Math.max(0,h)));a.push(0,1);let l=1/0;const c=a.map(h=>{const f=h7(r,s,o,i,h),[g,y]=f,_=n[0]-g,b=n[1]-y,T=Math.sqrt(_*_+b*b);return l=Math.min(T,l),{t:h,curvePoint:f,distance:T}}),u=[];for(const h of c){const{t:f,distance:g}=h;k0e(g,l)&&!u.some(({t:y})=>Ng(y,f))&&u.push(h)}return u}function fUe(t,e,n){const r=e,[i,s,o]=n.b;if(su(t,r),su(t,i),l7(t,s[0],s[1])&&l7(t,o[0],o[1]))return t;for(const a of une(r[0],s[0],o[0],i[0]))a>0&&a<1&&RGe(t,cne(r[0],s[0],o[0],i[0],a));for(const a of une(r[1],s[1],o[1],i[1]))a>0&&a<1&&MGe(t,cne(r[1],s[1],o[1],i[1],a));return t}function une(t,e,n,r){const i=3*(3*(e-n)-t+r),s=6*(t-2*e+n),o=3*(e-t);if(i===0)return s!==0?[-o/s]:[];const a=Math.sqrt(s*s-4*i*o);return[(-s+a)/(2*i),(-s-a)/(2*i)]}function tMt(t,e,n){let i=0,s=[e];for(let o=0;o<16;o++){let a=t;const l=[];for(const u of s)l.push(...dUe(a,u,.5)),a=u.b[0];s=l,a=t,i=0;let c=0;for(const u of s){const[h,f,g]=u.b,y=Math.sqrt(Va(a,h));i+=(y+(Math.sqrt(Va(a,f))+Math.sqrt(Va(f,g))+Math.sqrt(Va(g,h))))/2,c+=y,a=h}if(i-c<n)return i}return i}function pUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n,[c,u]=[s-r,o-i];let h=c*(a-r)+u*(l-i);h/=c**2+u**2,h=_u(h,0,1);const f=Kf([0,0],t,e,h);return{t:h,curvePoint:f,distance:Math.sqrt(Va(f,n))}}let J0e=class{constructor(e,n,r,i,s,o){this.cx=e,this.cy=n,this.radius=r,this.thetaStart=i,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:n,radius:r,thetaStart:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}get endPoint(){const{cx:e,cy:n,radius:r,thetaEnd:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}};function TN(t,e){const{cx:n,cy:r,radius:i}=t;return[n+i*Math.cos(e),r+i*Math.sin(e)]}function YM(t,e){if(t.isInvalid)return Kf([0,0],t.startPoint,t.endPoint,e);const{thetaStart:n,thetaEnd:r}=t;return TN(t,n*(1-e)+r*e)}function rMt(t,e){if(t.isInvalid)return pUe(t.startPoint,t.endPoint,e);const{cx:n,cy:r,thetaStart:i,thetaEnd:s}=t,[o,a]=e,l=uUe(mO(i,s),Math.atan2(a-r,o-n)),c=TN(t,l);return{t:(l-i)/(s-i),curvePoint:c,distance:Math.sqrt(Va(e,c))}}function hne(t,e){if(e.isInvalid)return su(t,e.startPoint),su(t,e.endPoint),t;const{cx:n,cy:r,radius:i,thetaStart:s,thetaEnd:o}=e;su(t,TN(e,s)),su(t,TN(e,o));const a=mO(s,o),l=Math.PI/2;let c=0;for(const u of[[n+i,r],[n,r+i],[n-i,r],[n,r-i]])c=UC(a,c),c>a.min&&c<a.max&&su(t,u),c+=l;return t}function iMt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:n,thetaEnd:r}=t;return e*Math.abs(r-n)}function mUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function vw(t,e,n,r,i,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Q0e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function eye(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function tye(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l;let y=n*h+r*f+i*g;return y?(y=1/y,t[0]=h*y,t[1]=(-u*r+i*c)*y,t[2]=(a*r-i*o)*y,t[3]=f*y,t[4]=(u*n-i*l)*y,t[5]=(-a*n+i*s)*y,t[6]=g*y,t[7]=(-c*n+r*l)*y,t[8]=(o*n-r*s)*y,t):null}function yUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=i*c-r*u,t[2]=r*a-i*o,t[3]=a*l-s*u,t[4]=n*u-i*l,t[5]=i*s-n*a,t[6]=s*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*s,t}function XM(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function cA(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1],y=n[2],_=n[3],b=n[4],T=n[5],A=n[6],C=n[7],I=n[8];return t[0]=f*r+g*o+y*c,t[1]=f*i+g*a+y*u,t[2]=f*s+g*l+y*h,t[3]=_*r+b*o+T*c,t[4]=_*i+b*a+T*u,t[5]=_*s+b*l+T*h,t[6]=A*r+C*o+I*c,t[7]=A*i+C*a+I*u,t[8]=A*s+C*l+I*h,t}function d7(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+g*o+c,t[7]=f*i+g*a+u,t[8]=f*s+g*l+h,t}function nye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);return t[0]=g*r+f*o,t[1]=g*i+f*a,t[2]=g*s+f*l,t[3]=g*o-f*r,t[4]=g*a-f*i,t[5]=g*l-f*s,t[6]=c,t[7]=u,t[8]=h,t}function vUe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function _Ue(t,e,n){const r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t}function xUe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function wUe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bUe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function EUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function SUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[3]=u-T,t[6]=f+b,t[1]=u+T,t[4]=1-c-y,t[7]=g-_,t[2]=f-b,t[5]=g+_,t[8]=1-c-h,t}function TUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,y=n*h+r*f+i*g;if(!y)return null;const _=1/y;return t[0]=h*_,t[1]=(-u*r+i*c)*_,t[2]=(a*r-i*o)*_,t[3]=f*_,t[4]=(u*n-i*l)*_,t[5]=(-a*n+i*s)*_,t[6]=g*_,t[7]=(-c*n+r*l)*_,t[8]=(o*n-r*s)*_,t}function kUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,C=n*l-i*o,I=n*c-s*o,R=r*l-i*a,V=r*c-s*a,P=i*c-s*l,N=u*_-h*y,L=u*b-f*y,O=u*T-g*y,F=h*b-f*_,G=h*T-g*_,U=f*T-g*b;let ue=A*U-C*G+I*F+R*O-V*L+P*N;return ue?(ue=1/ue,t[0]=(a*U-l*G+c*F)*ue,t[1]=(l*O-o*U-c*L)*ue,t[2]=(o*G-a*O+c*N)*ue,t[3]=(i*G-r*U-s*F)*ue,t[4]=(n*U-i*O+s*L)*ue,t[5]=(r*O-n*G-s*N)*ue,t[6]=(_*P-b*V+T*R)*ue,t[7]=(b*I-y*P-T*C)*ue,t[8]=(y*V-_*I+T*A)*ue,t):null}function AUe(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function CUe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function IUe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function PUe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function rye(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function RUe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function MUe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function NUe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function LUe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],C=e[8],I=Al();return Math.abs(n-h)<=I*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=I*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-g)<=I*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-y)<=I*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(o-_)<=I*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-b)<=I*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-T)<=I*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-A)<=I*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-C)<=I*Math.max(1,Math.abs(u),Math.abs(C))}function OUe(t){const e=Al(),n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}const DUe=cA,jUe=rye;Object.freeze(Object.defineProperty({__proto__:null,add:PUe,adjoint:yUe,copy:gUe,determinant:XM,equals:LUe,exactEquals:NUe,frob:IUe,fromMat2d:EUe,fromMat4:mUe,fromQuat:SUe,fromRotation:wUe,fromScaling:bUe,fromTranslation:xUe,identity:Q0e,invert:tye,isOrthoNormal:OUe,mul:DUe,multiply:cA,multiplyScalar:RUe,multiplyScalarAndAdd:MUe,normalFromMat4:kUe,normalFromMat4Legacy:TUe,projection:AUe,rotate:nye,scale:vUe,scaleByVec2:_Ue,set:vw,str:CUe,sub:jUe,subtract:rye,translate:d7,transpose:eye},Symbol.toStringTag,{value:"Module"}));function Ev(){return[1,0,0,0,1,0,0,0,1]}function FUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function $Ue(t,e,n,r,i,s,o,a,l){return[t,e,n,r,i,s,o,a,l]}const VUe=Ev();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:VUe,clone:FUe,create:Ev,fromValues:$Ue},Symbol.toStringTag,{value:"Module"}));const M_=Ev();function zUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n;vw(M_,r,s,a,i,o,l,1,1,1);const c=XM(M_),u=4*c/(Va(t,e)+Va(e,n)+Va(n,t));if(!isFinite(u)||Math.abs(u)<1e-8)return null;const h=r**2+i**2,f=s**2+o**2,g=a**2+l**2;vw(M_,h,f,g,i,o,l,1,1,1);const y=XM(M_);return vw(M_,h,f,g,r,s,a,1,1,1),[y/c*.5,XM(M_)/c*-.5]}function iye(t,e){const[n,r]=e.c,i=zUe(t,r,n),s=i==null,o=i??Kf([],t,n,.5),[a,l]=t,[c,u]=r,[h,f]=n,[g,y]=o,_=a-g,b=l-y,T=Math.sqrt(_*_+b*b),A=d1(l-y,a-g),C=d1(u-y,c-g);let I=d1(f-y,h-g);return(C-A)*(I-C)<0&&(I+=2*Math.sign(A-I)*Math.PI),new J0e(g,y,T,A,I,s)}function sMt(t,e,n){const r=YM(t,n/2),i=YM(t,n),s=YM(t,(n+1)/2);return[{c:[i,r]},{c:[[...e.c[0]],s]}]}function oMt(t,e){const[n]=e.c,{cx:r,cy:i,thetaStart:s,thetaEnd:o,radius:a,isInvalid:l}=iye(t,e);return{a:[n,[r,i],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,l?s:0,a,l?0:1]}}function aMt(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function lMt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function DW(t){return"b"in t}function jW(t){return"c"in t}function gO(t){return Array.isArray(t)}function cMt(t){return"a"in t}function sye(t){return"a"in t&&t.a.length===4}function GUe(t){return"a"in t&&t.a.length===7}function dF(t){return gO(t)?t:DW(t)?t.b[0]:jW(t)?t.c[0]:t.a[0]}function UUe(t){if(DW(t)){const[e,n,r]=t.b;return{b:[[...e],[...n],[...r]]}}if(jW(t)){const[e,n]=t.c;return{c:[[...e],[...n]]}}if(gO(t))return[...t];if(sye(t)){const[e,n,r,i]=t.a;return{a:[[...e],[...n],r,i]}}if(GUe(t)){const[e,n,r,i,s,o,a]=t.a;return{a:[[...e],[...n],r,i,s,o,a]}}return t}function BUe(t,e){const[n,r,i,s]=e.a,[o,a]=t,[l,c]=n,[u,h]=r,f=o-u,g=a-h,y=Math.sqrt(f*f+g*g),_=l-u,b=c-h,T=Math.sqrt(_*_+b*b),A=y===0||T===0||!k0e(y,T),C=y,[I,R]=Y0e(d1(a-h,o-u),Math.atan2(c-h,l-u),i,s);return new J0e(u,h,C,I,R,A)}function uMt(t,e,n){const{cx:r,cy:i,thetaStart:s,thetaEnd:o}=t,[a,l,c,u]=e.a,h=s*(1-n)+o*n;return[{a:[YM(t,n),[r,i],Math.abs(h-s)<Math.PI?1:0,u]},{a:[[...a],[r,i],Math.abs(o-h)<Math.PI?1:0,u]}]}let WUe=class{constructor(e,n,r,i,s,o,a,l,c){this.cx=e,this.cy=n,this.a=r,this.b=i,this.cosR=s,this.sinR=o,this.u1=a,this.u2=l,this.isInvalid=c}};function FW(t,e){const[n,r,i,s,o,a,l]=e.a,[c,u]=t,[h,f]=n,[g,y]=r,_=a*l,b=Math.cos(o),T=Math.sin(o),[A,C]=Y0e(d1(1/_*(u-y)*b-1/_*(c-g)*T,1/a*(u-y)*T+1/a*(c-g)*b),Math.atan2(1/_*(f-y)*b-1/_*(h-g)*T,1/a*(f-y)*T+1/a*(h-g)*b),i,s);return new WUe(g,y,a,_,b,T,A,C,a===0||_===0)}function uA(t,e){const{a:n,b:r,cosR:i,sinR:s,cx:o,cy:a}=t,l=Math.cos(e),c=Math.sin(e);return[n*l*i-r*c*s+o,n*l*s+r*c*i+a]}function ix(t,e){const{u1:n,u2:r}=t;return uA(t,n*(1-e)+r*e)}function dMt(t,e,n){if(n<0||n>1)return[];if(n===0||n===1)return[UUe(e)];const[r,[i,s],o,a,l,c,u]=e.a,{u1:h,u2:f}=t,g=h*(1-n)+f*n;return[{a:[[...ix(t,n)],[i,s],Math.abs(g-h)<Math.PI?1:0,a,l,c,u]},{a:[[...r],[i,s],Math.abs(f-g)<Math.PI?1:0,a,l,c,u]}]}function fMt(t,e){const{a:n,b:r,cosR:i,sinR:s,u1:o,u2:a}=t,l=Math.PI/6,c=X0e(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],_=>{const b=Math.cos(_),T=Math.sin(_),[A,C]=uA(t,_);return[A,C,-n*i*T-r*s*b,-n*s*T+r*i*b,-n*i*b+r*s*T,-n*s*b-r*i*T]}),u=mO(o,a),h=new Set(c.map(_=>UC(u,_)).filter(_=>_>u.min&&_<u.max));h.add(o),h.add(a);let f,g,y=1/0;for(const _ of h){const b=uA(t,_),[T,A]=b,C=e[0]-T,I=e[1]-A,R=C*C+I*I;R<y&&(f=(_-o)/(a-o),g=b,y=R)}return{t:f,curvePoint:g,distance:Math.sqrt(y)}}function HUe(t,e,n){const r=FW(e,n),{a:i,b:s,u1:o,u2:a,cosR:l,sinR:c,isInvalid:u}=r,h=n.a[0];if(su(t,e),su(t,h),u)return t;const f=Math.atan2(-s*c,i*l),g=f+Math.PI,y=Math.atan2(s*l,i*c),_=y+Math.PI,b=mO(o,a);for(const T of[f,g,y,_].map(A=>UC(b,A)))T>b.min&&T<b.max&&su(t,uA(r,T));return t}function pMt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=FW(t,e),{u1:h,u2:f,isInvalid:g}=u,y=f-h;if(g)return Math.sqrt(Va(t,r));const _=14,b=[0,0];let T=0,A=[ix(u,0),ix(u,.25),ix(u,.5),ix(u,.75),ix(u,1)];for(let C=0;C<_;C++){const I=A.length-1,R=y/(2*I),V=[];for(let N=0;N<I;N++)V.push(A[N]),V.push(uA(u,h+(2*N+1)*R));V.push(A[A.length-1]),A=V,T=0;let P=0;for(let N=1;N<A.length;N++){const L=A[N-1],O=A[N];if(T+=Math.sqrt(Va(L,O)),N>1){const F=A[N-2],G=cUe(b,F,L,i,O);P+=G?Math.sqrt(Va(L,G)):Math.abs(O[0]-L[0])+Math.abs(O[1]-L[1])}else P+=T}if(P-T<n)return T}return T}const dne=Ev(),sR=Ev(),fne=Ev(),Em=Ev();function mMt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=FW(t,e),{cosR:h,sinR:f,a:g,b:y,cx:_,cy:b}=u,T=KM([0,0],r,n),A=KM([0,0],i,n),C=n[0]*n[4]<0?1-o:o;{const I=g*g*f*f+y*y*h*h,R=2*(y*y-g*g)*f*h,V=g*g*h*h+y*y*f*f,P=-2*I*_-R*b,N=-R*_-2*V*b;vw(dne,I,R/2,P/2,R/2,V,N/2,P/2,N/2,I*_*_+R*_*b+V*b*b-g*g*y*y)}if(tye(sR,n),sR==null){const I=KM([0,0],t,n);return{a:[T,A,s,o,d1(T[1],T[0]),Math.sqrt(Va(T,I))/2,0]}}eye(fne,sR),cA(Em,cA(Em,fne,dne),sR);{const I=Em[0],R=2*Em[1],V=Em[4],P=2*Em[2],N=2*Em[5],L=R*R-4*I*V,O=2*(I*N*N+V*P*P-R*P*N+L*Em[8]),F=Math.sqrt((I-V)**2+R*R),G=-Math.sqrt(O*(I+V+F))/L,U=-Math.sqrt(O*(I+V-F))/L;return{a:[T,A,s,C,.5*d1(-R,V-I),G,U/G]}}}function qUe(t,e,n){if(gO(n))return su(t,e),su(t,n),t;if(DW(n))return fUe(t,e,n);if(jW(n)){const r=iye(e,n);return hne(t,r)}if(sye(n)){const r=BUe(e,n);return hne(t,r)}return HUe(t,e,n)}function oye(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function aye(t){return t.points!==void 0}function lye(t){return t.x!==void 0&&t.y!==void 0}function cye(t){return t.paths!==void 0}function uye(t){return t.rings!==void 0}function hye(t){function e(n,r){return n==null?r:r==null?n:t(n,r)}return e}const fg=hye(Math.min),pg=hye(Math.max);function gMt(t,e){return cye(e)?F2(t,e.curvePaths??e.paths,!1,!1)??t:uye(e)?F2(t,e.curveRings??e.rings,!1,!1)??t:aye(e)?$W(t,e.points,!1,!1,!1,!1):oye(e)?dye(t,e):(lye(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function yMt(t){let e,n,r,i;for(t.reset(),e=r=1/0,n=i=-1/0;t.nextPath();){const s=KUe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return El([e,r,n,i])}function KUe(t){let e,n,r,i;for(e=r=1/0,n=i=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),n=Math.max(t.x,n),i=Math.max(t.y,i);return El([e,r,n,i])}function vMt(t,e){return cye(e)?F2(t,e.curvePaths??e.paths,!0,!1)??t:uye(e)?F2(t,e.curveRings??e.rings,!0,!1)??t:aye(e)?$W(t,e.points,!0,!1,!0,!1):oye(e)?dye(t,e,!0,!1,!0,!1):(lye(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function F2(t,e,n,r){const i=n?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,u]=dF(e[0][0]),h=c,f=u;for(let g=0;g<e.length;g++){const y=e[g];for(let _=0;_<y.length;_++){const b=dF(y[_]),[T,A]=b;if(c=fg(c,T),u=fg(u,A),h=pg(h,T),f=pg(f,A),n&&b.length>2){const V=b[2];s=fg(s,V),o=pg(o,V)}if(r&&b.length>i){const V=b[i];a=fg(s,V),l=pg(o,V)}const C=y[_];if(gO(C)||_<1)continue;const I=dF(y[_-1]),R=IGe(c,u,h,f);[c,u,h,f]=qUe(R,I,C)}}return n?r?(t[0]=c,t[1]=u,t[2]=s,t[3]=a,t[4]=h,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=u,t[2]=s,t[3]=h,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=u,t[2]=a,t[3]=h,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=u,t[2]=h,t[3]=f,t.length=4,t)}function dye(t,e,n,r,i,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let u=e.zmin,h=e.zmax,f=e.mmin,g=e.mmax;return i?(u=u||0,h=h||0,s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=a,t[5]=c,t[6]=h,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=u,t[3]=a,t[4]=c,t[5]=h,t)):s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function $W(t,e,n,r,i,s){const o=n?3:2,a=r&&s,l=n&&i;if(!e.length||!e[0].length)return null;let c,u,h,f,[g,y]=e[0],[_,b]=e[0];for(let T=0;T<e.length;T++){const A=e[T],[C,I]=A;if(g=fg(g,C),y=fg(y,I),_=pg(_,C),b=pg(b,I),l&&A.length>2){const R=A[2];c=fg(c,R),u=pg(u,R)}if(a&&A.length>o){const R=A[o];h=fg(c,R),f=pg(u,R)}}return i?(c=c||0,u=u||0,s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=c,t[3]=h,t[4]=_,t[5]=b,t[6]=u,t[7]=f,t):(t[0]=g,t[1]=y,t[2]=c,t[3]=_,t[4]=b,t[5]=u,t)):s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=h,t[3]=_,t[4]=b,t[5]=f,t):(t[0]=g,t[1]=y,t[2]=_,t[3]=b,t)}function YUe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function XUe(t){return t.points!==void 0}function ZUe(t){return t.x!==void 0&&t.y!==void 0}function JUe(t){return t.paths!==void 0}function QUe(t){return t.rings!==void 0}const VW=[];function fye(t,e,n,r){return{xmin:t,ymin:e,xmax:n,ymax:r}}function pye(t,e,n,r,i,s){return{xmin:t,ymin:e,zmin:n,xmax:r,ymax:i,zmax:s}}function mye(t,e,n,r,i,s){return{xmin:t,ymin:e,mmin:n,xmax:r,ymax:i,mmax:s}}function gye(t,e,n,r,i,s,o,a){return{xmin:t,ymin:e,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function zW(t,e=!1,n=!1){return e?n?gye(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):pye(t[0],t[1],t[2],t[3],t[4],t[5]):n?mye(t[0],t[1],t[2],t[3],t[4],t[5]):fye(t[0],t[1],t[2],t[3])}function _Mt(t){return t?YUe(t)?t:ZUe(t)?eBe(t):QUe(t)?vye(t):JUe(t)?_ye(t):XUe(t)?yye(t):null:null}function yye(t){const{hasZ:e,hasM:n,points:r}=t,i=$W(VW,r,e??!1,n??!1,e??!1,n??!1);return i?zW(i,e,n):null}function eBe(t){const{x:e,y:n,z:r,m:i}=t,s=i!=null;return r!=null?s?gye(e,n,r,i,e,n,r,i):pye(e,n,r,e,n,r):s?mye(e,n,i,e,n,i):fye(e,n,e,n)}function vye(t){const{hasZ:e,hasM:n,rings:r,curveRings:i}=t,s=F2(VW,i??r,e??!1,n??!1);return s?zW(s,e,n):null}function _ye(t){const{hasZ:e,hasM:n,paths:r,curvePaths:i}=t,s=F2(VW,i??r,e??!1,n??!1);return s?zW(s,e,n):null}function $2(t,e,n=!1){let{hasM:r,hasZ:i}=t;Array.isArray(e)?e.length!==4||r||i?e.length===3&&n&&!r?(i=!0,r=!1):e.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!i||e.hasZ)),t.hasZ=i,t.hasM=r}var ZM;function pne(t){return!Array.isArray(t[0])}function tBe(t){return typeof t[0]?.[0]=="number"}function nBe(t){if(!t)return;let{rings:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],tBe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,rings:e,spatialReference:i}}let bi=ZM=class extends Us{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:n}=t;let r=!1,i=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new ZM(s)}constructor(t){super(nBe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){w9(kt.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=wGe(this);return t?Qt.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=et(t)}get extent(){const t=vye(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}get isSelfIntersecting(){return w9(kt.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),D9e(this.rings)}writeRings(t,e){e.rings=et(this.rings)}addRing(t){if(!t)return;const e=this.rings,n=e.length;if(pne(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new ZM;return t.spatialReference=this.spatialReference,t.rings=et(this.rings),t.curveRings=et(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;if(e!=null!=(n!=null)||e!=null&&n!=null&&!e.equals(n)||this.rings.length!==t.rings.length)return!1;const r=([i,s,o,a],[l,c,u,h])=>i===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=t.rings[i];if(!$L(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=rO(t,this.spatialReference);return cW(this,e??t)}isClockwise(t){const e=pne(t)?t.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):t;return j0e(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.rings[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Qt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Qt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Qt(n[0],n[1],n[2],n[3],this.spatialReference):new Qt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t].splice(e,0,n),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Qt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Qt(i,n));return this.notifyChange("rings"),r}setPoint(t,e,n){return this._validateInputs(t,e)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t][e]=n,this.notifyChange("rings"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],bi.prototype,"cache",null),x([E({readOnly:!0})],bi.prototype,"centroid",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],bi.prototype,"curveRings",void 0),x([er("curveRings")],bi.prototype,"writeCurveRings",null),x([E({readOnly:!0})],bi.prototype,"extent",null),x([E({readOnly:!0})],bi.prototype,"isSelfIntersecting",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],bi.prototype,"rings",void 0),x([er("rings")],bi.prototype,"writeRings",null),bi=ZM=x([he("esri.geometry.Polygon")],bi),bi.prototype.toJSON.isDefaultToJSON=!0;function y0(){return[0,0,0]}function rBe(t){return[t[0],t[1],t[2]]}function Mb(t,e,n){return[t,e,n]}function iBe(t,e,n){return[t,e,n]}function sBe(t,e=y0()){const n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function xye(){return y0()}function wye(){return Mb(1,1,1)}function bye(){return Mb(1,0,0)}function Eye(){return Mb(0,1,0)}function Sye(){return Mb(0,0,1)}const oBe=xye(),aBe=wye(),lBe=bye(),cBe=Eye(),uBe=Sye();Object.freeze(Object.defineProperty({__proto__:null,ONES:aBe,UNIT_X:lBe,UNIT_Y:cBe,UNIT_Z:uBe,ZEROS:oBe,clone:rBe,create:y0,freeze:iBe,fromArray:sBe,fromValues:Mb,ones:wye,unitX:bye,unitY:Eye,unitZ:Sye,zeros:xye},Symbol.toStringTag,{value:"Module"}));var f7;function hBe(t){if(!t)return;let{points:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,points:e,spatialReference:i}}let Qu=f7=class extends Us{constructor(t){super(hBe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=yye(this);return t?new Vn({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=et(this.points)}clone(){const{points:t,spatialReference:e,hasM:n,hasZ:r}=this;return new f7({points:et(t),spatialReference:e.clone(),hasM:n,hasZ:r})}addPoint(t){return $2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],n={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=e[2],r=3),this.hasM&&(n.m=e[r]),new Qt(n)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Qt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?($2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};x([E({readOnly:!0})],Qu.prototype,"cache",null),x([E({readOnly:!0})],Qu.prototype,"extent",null),x([E({type:[[Number]],json:{write:{isRequired:!0}}})],Qu.prototype,"points",void 0),x([er("points")],Qu.prototype,"writePoints",null),Qu=f7=x([he("esri.geometry.Multipoint")],Qu),Qu.prototype.toJSON.isDefaultToJSON=!0;var p7;function dBe(t){return!Array.isArray(t[0])}function fBe(t){return typeof t[0]?.[0]=="number"}function pBe(t){if(!t)return;let{paths:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],fBe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,paths:e,spatialReference:i}}let As=p7=class extends Us{constructor(t){super(pBe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=et(t)}get extent(){const t=_ye(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}writePaths(t,e){e.paths=et(this.paths)}addPath(t){if(!t)return;const e=this.paths,n=e.length;if(dBe(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new p7;return t.spatialReference=this.spatialReference,t.paths=et(this.paths),t.curvePaths=et(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Qt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Qt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Qt(n[0],n[1],n[2],n[3],this.spatialReference):new Qt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t].splice(e,0,n),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Qt(i,n));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Qt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(t,e,n){return this._validateInputs(t,e)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t][e]=n,this.notifyChange("paths"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],As.prototype,"cache",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],As.prototype,"curvePaths",void 0),x([er("curvePaths")],As.prototype,"writeCurvePaths",null),x([E({readOnly:!0})],As.prototype,"extent",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],As.prototype,"paths",void 0),x([er("paths")],As.prototype,"writePaths",null),As=p7=x([he("esri.geometry.Polyline")],As),As.prototype.toJSON.isDefaultToJSON=!0;var m7;let sx=m7=class extends Kt{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new m7({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};x([E()],sx.prototype,"isInverse",void 0),x([E()],sx.prototype,"wkt",void 0),x([E()],sx.prototype,"wkid",void 0),sx=m7=x([he("esri.geometry.operators.support.GeographicTransformationStep")],sx);var g7;let MT=g7=class extends Kt{constructor(t){super(t),this.steps=[]}getInverse(){const t=new g7;for(let e=this.steps.length-1;e>=0;e--){const n=this.steps[e];t.steps.push(n.getInverse())}return t}};x([E({type:[sx],nonNullable:!0})],MT.prototype,"steps",void 0),MT=g7=x([he("esri.geometry.operators.support.GeographicTransformation")],MT);const xMt=Math.PI/180,wMt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Sm=ss.radius,Fu=ss.eccentricitySquared,mBe={a1:Sm*Fu,a2:Sm*Fu*Sm*Fu,a3:Sm*Fu*Fu/2,a4:Sm*Fu*Sm*Fu*2.5,a5:Sm*Fu+Sm*Fu*Fu/2,a6:1-Fu},bMt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ss.radius,f:ss.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Xg.radius,f:Xg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Id.radius,f:Id.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Id.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},gBe={2:{5:fi,7:null,9:null,10:fi,1:LT,6:null,8:null,0:null,3:_w,11:xw,2:fi,4:Ew},5:{5:fi,7:null,9:null,10:fi,1:LT,6:null,8:null,0:null,3:_w,11:xw,2:fi,4:Ew},7:{5:null,7:fi,9:null,10:fi,1:null,6:yne,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:fi,10:fi,1:null,6:null,8:gne,0:null,3:null,11:null,2:null,4:null},3:{5:NT,7:null,9:null,10:NT,1:vBe,6:null,8:null,0:null,3:fi,11:wBe,2:NT,4:_Be},4:{5:Sw,7:null,9:null,10:Sw,1:PBe,6:null,8:null,0:null,3:RBe,11:bBe,2:Sw,4:fi},1:{5:bw,7:null,9:null,10:bw,1:fi,6:null,8:null,0:null,3:ABe,11:EBe,2:bw,4:CBe},6:{5:null,7:_ne,9:null,10:_ne,1:null,6:fi,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:vne,10:vne,1:null,6:null,8:fi,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:fi,3:null,11:null,2:null,4:null},10:{5:fi,7:fi,9:fi,10:fi,1:LT,6:yne,8:gne,0:null,3:_w,11:xw,2:fi,4:Ew},11:{5:ww,7:null,9:null,10:ww,1:SBe,6:null,8:null,0:null,3:TBe,11:fi,2:ww,4:kBe}};function Tye(t,e){return yBe(t,e)?.projector}function yBe(t,e){if(t==null||e==null)return null;if(vf.source.spatialReference===t&&vf.dest.spatialReference===e)return vf;const n=mne(t,vf.source),r=mne(e,vf.dest);return n===0&&r===0?yo(t,e)?vf.projector=fi:vf.projector=null:vf.projector=gBe[n][r],vf}function mne(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Jd(t,1)),mN(t)?e.spatialReferenceId=1:q1(t)?e.spatialReferenceId=2:Gd(t)?e.spatialReferenceId=3:G8e(t)?e.spatialReferenceId=11:t.wkt===H8e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===oW.wkt?e.spatialReferenceId=6:t.wkt===aW.wkt?e.spatialReferenceId=8:Mme(t)?e.spatialReferenceId=7:Nme(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function fi(t,e,n,r){t!==n&&(n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e])}function NT(t,e,n,r){n[r]=z2*(t[e]/f1),n[r+1]=z2*(kye-2*Math.atan(Math.exp(-t[e+1]/f1))),n[r+2]=t[e+2]}function vBe(t,e,n,r){const i=t[e]/f1,s=kye-2*Math.atan(Math.exp(-t[e+1]/f1)),o=f1+t[e+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o}function _Be(t,e,n,r){NT(t,e,n,r),Ew(n,r,n,r)}function xBe(t,e,n,r,i){const s=.4999999*Math.PI,o=_u(V2*t[e+1],-s,s),a=Math.sin(o);n[r++]=V2*t[e]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=t[e+2]}function _w(t,e,n,r){xBe(t,e,n,r,ss)}function xw(t,e,n,r){n[r]=t[e]*xne,n[r+1]=t[e+1]*xne,n[r+2]=t[e+2]}function ww(t,e,n,r){n[r]=t[e]*wne,n[r+1]=t[e+1]*wne,n[r+2]=t[e+2]}function wBe(t,e,n,r){NT(t,e,n,r),xw(n,r,n,r)}function bBe(t,e,n,r){Sw(t,e,n,r),xw(n,r,n,r)}function EBe(t,e,n,r){bw(t,e,n,r),xw(n,r,n,r)}function SBe(t,e,n,r){ww(t,e,n,r),LT(n,r,n,r)}function TBe(t,e,n,r){ww(t,e,n,r),_w(n,r,n,r)}function kBe(t,e,n,r){ww(t,e,n,r),Ew(n,r,n,r)}function GW(t,e,n,r,i){const s=i+t[e+2],o=V2*t[e+1],a=V2*t[e],l=Math.cos(o)*s;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(o)*s}function gne(t,e,n,r){GW(t,e,n,r,Xg.radius)}function yne(t,e,n,r){GW(t,e,n,r,Id.radius)}function LT(t,e,n,r){GW(t,e,n,r,ss.radius)}function UW(t,e,n,r,i){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=Uze(a/(l===0?1:l)),u=Math.atan2(o,s);n[r++]=z2*u,n[r++]=z2*c,n[r]=l-i}function vne(t,e,n,r){UW(t,e,n,r,Xg.radius)}function _ne(t,e,n,r){UW(t,e,n,r,Id.radius)}function bw(t,e,n,r){UW(t,e,n,r,ss.radius)}function ABe(t,e,n,r){bw(t,e,n,r),_w(n,r,n,r)}function CBe(t,e,n,r){bw(t,e,n,r),Ew(n,r,n,r)}function IBe(t,e,n,r,i){const s=V2*t[e],o=V2*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(u+a)*c*Math.cos(s),n[r++]=(u+a)*c*Math.sin(s),n[r++]=(u*(1-i.eccentricitySquared)+a)*l}function Ew(t,e,n,r){IBe(t,e,n,r,ss)}function Sw(t,e,n,r){const i=mBe,s=t[e],o=t[e+1],a=t[e+2];let l,c,u,h,f,g,y,_,b,T,A,C,I,R,V,P,N,L,O,F,G;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),F=Math.atan2(o,s),g=a*a/h,y=c/h,R=i.a2/f,V=i.a3-i.a4/f,y>.3?(_=l/f*(1+y*(i.a1+R+g*V)/f),O=Math.asin(_),T=_*_,b=Math.sqrt(1-T)):(b=u/f*(1-g*(i.a5-R-y*V)/f),O=Math.acos(b),T=1-b*b,_=Math.sqrt(T)),A=1-ss.eccentricitySquared*T,C=ss.radius/Math.sqrt(A),I=i.a6*C,R=u-C*b,V=l-I*_,N=b*R+_*V,P=b*V-_*R,L=P/(I/A+N),O+=L,G=N+P*L/2,a<0&&(O=-O),n[r++]=z2*F,n[r++]=z2*O,n[r]=G}function PBe(t,e,n,r){Sw(t,e,n,r),LT(n,r,n,r)}function RBe(t,e,n,r){Sw(t,e,n,r),_w(n,r,n,r)}const vf={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:fi},V2=VC(1),z2=S0e(1),kye=.5*Math.PI,f1=ss.radius,xne=f1*Math.PI/180,wne=180/(f1*Math.PI);function BC(t,e,n,r,i,s,o=Math.floor(t.length/3)){const a=Tye(e,i);if(a==null)return!1;if(a===fi){if(t===r&&n===s)return!0;const c=n+3*o;for(let u=n,h=s;u<c;u++,h++)r[h]=t[u];return!0}const l=n+3*o;for(let c=n,u=s;c<l;c+=3,u+=3)a(t,c,r,u);return!0}const EMt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:BC},Symbol.toStringTag,{value:"Module"}));function bne(t,e,n,r,i,s){return oR[0]=t,oR[1]=e,oR[2]=n,BC(oR,r,0,i,s,0)}const oR=y0();function MBe(t,e,n){if(e==null||n==null||n.vcsWkid||yo(e,n)||Jg(e)||Jg(n))return null;const r=ite(e)/ite(n);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return i=>NBe(i,r);case"polyline":case"esriGeometryPolyline":return i=>OBe(i,r);case"polygon":case"esriGeometryPolygon":return i=>LBe(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>DBe(i,r);case"extent":case"esriGeometryEnvelope":return i=>jBe(i,r);default:return null}}function NBe(t,e){t?.z!=null&&(t.z*=e)}function LBe(t,e){if(t)for(const n of t.rings)for(const r of n)r.length>2&&(r[2]*=e)}function OBe(t,e){if(t)for(const n of t.paths)for(const r of n)r.length>2&&(r[2]*=e)}function DBe(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}function jBe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let OT=null,hA=null,dA=null,G2=null,y7={};const BW=new NC;function Op(){return!!(hA?.isLoaded()&&dA?.isLoaded()&&G2?.isLoaded())}function Aye(){return!!Op()||(on(BW),e0(),!1)}function Cye(t,e){return!t||!e||Sh(t,e)||Aye()}function FBe(t,e){return!Sh(t,e)&&!Op()}async function e0(t){OT==null&&(OT=Promise.all([ge(()=>import("./projectOperator-KhnimkpV.js"),__vite__mapDeps([47,48,49])).then(e=>(hA=e,hA.load())),ge(()=>import("./projectOperator-ChMYCACc.js"),__vite__mapDeps([50,48,49])).then(e=>(dA=e,dA.load())),ge(()=>import("./geographicTransformationUtils-Bw_YWYpl.js"),[]).then(e=>(G2=e,G2.load()))])),await OT,gi(t),BW.notify()}function Sv(t,e,n){return Array.isArray(t)?t.length===0?[]:(x9e(t),v7(t,t[0].spatialReference,e,n)):(O2(t),v7([t],t.spatialReference,e,n)[0])}function v7(t,e,n,r){if(e==null||n==null)return t;if(Sh(e,n,r))return t.map(i=>JM(i,e,n));if(r?.geographicTransformation==null&&mN(e))return t.map(i=>JM(i,e,Wt.WGS84)).map(i=>fA(i,n));if(r?.geographicTransformation==null&&mN(n))return t.map(i=>fA(i,Wt.WGS84)).map(i=>JM(i,Wt.WGS84,n));if(!Op())throw new Pye;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:G2.getTransformation(e,n,r.areaOfInterestExtent)||new MT};else if(!r?.areaOfInterestExtent){const i=$Be(e,n);let s=y7[i];s||(s=G2.getTransformation(e,n)||new MT,y7[i]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Us?hA.executeMany(t,n,r):dA.executeMany(t,n,r)}function $Be(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function VBe(t,e){const n=Iye([t],e);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function Iye(t,e){if(!Op()){for(const n of t)if(n!=null&&!yo(n.spatialReference,e)&&fc(n.spatialReference)&&fc(e)&&!Sh(n.spatialReference,e))return on(BW),{pending:e0(),geometries:null}}return{pending:null,geometries:t.map(n=>n==null?null:yo(n.spatialReference,e)?n:fc(n.spatialReference)&&fc(e)?fA(n,e):null)}}let Pye=class extends Qe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function zBe(){OT=null,hA=null,dA=null,G2=null,y7={}}const GBe={get loadPromise(){return OT}};function fA(t,e){try{const n=Sv(t,e);if(n==null)return null;"xmin"in t&&"xmin"in n&&(n.zmin=t.zmin,n.zmax=t.zmax);const r=MBe(n.type,t.spatialReference,e);return r?.(n),n}catch(n){if(!(n instanceof Pye))throw n;return null}}async function Rye(t,e,n){const r=t.spatialReference;return r!=null&&e!=null&&await Mye(r,e,null,n),fA(t,e)}function Sh(t,e,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!yo(t,e)||fc(t)&&fc(e)&&!!Tye(t,e))}function UBe(t,e){if(yo(t,e))return!0;if(!fc(t)||!fc(e))return!1;const n=q1(t)||Gd(t)||nte(t),r=q1(e)||Gd(e)||nte(e);return n&&r}async function Mye(t,e,n,r){if(Op())return _ee(r);if(Array.isArray(t)){for(const{source:i,dest:s,options:o}of t)if(i&&s&&!Sh(i,s,o))return e0(r)}else if(t&&e&&!Sh(t,e,n))return e0(r);return _ee(r)}function JM(t,e,n){return t?"x"in t?Nye(t,e,new Qt,n,0):"xmin"in t?Fye(t,e,new Vn,n,0):"rings"in t?jye(t,e,new bi,n,0):"paths"in t?Oye(t,e,new As,n,0):"points"in t?Lye(t,e,new Qu,n,0):null:null}function BBe(t,e,n=e.spatialReference,r=0){return n!=null&&t.spatialReference!=null&&Nye(t,t.spatialReference,e,n,r)!=null}function Nye(t,e,n,r,i){aa[0]=t.x,aa[1]=t.y;const s=t.z;return aa[2]=s!==void 0?s:i,BC(aa,e,0,aa,r,0)?(n.x=aa[0],n.y=aa[1],n.spatialReference=r,s!==void 0||Jg(r)?(n.z=aa[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),t.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=t.m,n.hasM=!0),n):null}function WBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Lye(t,t.spatialReference,e,n,r)!=null}function Lye(t,e,n,r,i){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,u=[];for(const f of s)u.push(f[0],f[1],o?f[2]:i);if(!BC(u,e,0,u,r,0,c))return null;const h=o||Jg(r);for(let f=0;f<c;++f){const g=3*f,y=u[g],_=u[g+1];h&&a?l.push([y,_,u[g+2],s[f][3]]):h?l.push([y,_,u[g+2]]):a?l.push([y,_,s[f][2]]):l.push([y,_])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function HBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Oye(t,t.spatialReference,e,n,r)!=null}function Oye(t,e,n,r,i){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!$ye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||Jg(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function Dye(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&jye(t,t.spatialReference,e,n,r)!=null}function jye(t,e,n,r,i){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!$ye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||Jg(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function qBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Fye(t,t.spatialReference,e,n,r)!=null}function Fye(t,e,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=t,h=c?t.zmin:i;if(!bne(s,o,h,e,aa,r))return null;const f=c||Jg(r);n.xmin=aa[0],n.ymin=aa[1],f&&(n.zmin=aa[2]);const g=c?t.zmax:i;return bne(a,l,g,e,aa,r)?(n.xmax=aa[0],n.ymax=aa[1],f&&(n.zmax=aa[2]),u&&(n.mmin=t.mmin,n.mmax=t.mmax),n.spatialReference=r,n):null}function $ye(t,e,n,r,i,s,o=0){const a=new Array;for(const u of t)for(const h of u)a.push(h[0],h[1],e?h[2]:o);if(!BC(a,r,0,a,s,0))return!1;let l=0;i.length=0;const c=e||Jg(s);for(const u of t){const h=new Array;for(const f of u)c&&n?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):n?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}const aa=y0(),TMt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Sh,initializeProjection:Mye,isEqualBaseGCS:UBe,isLoaded:Op,isLoadedOrLoad:Aye,isLoadedOrLoadFor:Cye,load:e0,project:Sv,projectExtent:qBe,projectMany:v7,projectMultipoint:WBe,projectOrLoad:VBe,projectOrLoadMany:Iye,projectPoint:BBe,projectPolygon:Dye,projectPolyline:HBe,projectWithZConversion:Rye,projectWithoutEngine:JM,requiresLoad:FBe,test:GBe,tryProjectWithZConversion:fA,unload:zBe},Symbol.toStringTag,{value:"Module"}));var QM;let _7=QM=class extends g0(Lt.ofType(bi)){constructor(t){super(t)}clone(){return new QM(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(n=>{if(!e.equals(n.spatialReference)){if(!Sh(n.spatialReference,e))return t?.messages?.push(new zd("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const i=new bi;Dye(n,i,e),n=i}const r=n.toJSON(t);return delete r.spatialReference,r}).filter(n=>n!=null):this.toArray().map(n=>n.toJSON(t))}static fromJSON(t,e){const n=new QM;return t.forEach(r=>n.add(bi.fromJSON(r,e))),n}};_7=QM=x([he("esri.layers.support.PolygonCollection")],_7);const DT=_7;let Cf=class extends g0(CW){constructor(e){super(e),this.id=`focusarea-${zC()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new DT}readGeometries(e,n,r){Array.isArray(e)?this.geometries=DT.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(bb(e,r),r))}async _loadGeometries(e,n){const r=await rs(e,{responseType:"json"});this.geometries=DT.fromJSON(r.data,n)}};x([E({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),E()],Cf.prototype,"id",void 0),x([E({type:String,json:{write:!0}})],Cf.prototype,"title",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Cf.prototype,"enabled",void 0),x([E({type:dGe,json:{write:!0}})],Cf.prototype,"outline",void 0),x([E({type:DT,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new DT(t.items.map(e=>e.clone()))}),sGe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Cf.prototype,"geometries",void 0),x([cr(["web-scene","portal-item","service"],"geometries")],Cf.prototype,"readGeometries",null),Cf=x([he("esri.effects.FocusArea")],Cf);const KBe=Cf;let PS=class extends g0(CW){constructor(e){super(e),this.areas=new Lt,this.style="bright"}};x([E({type:Lt.ofType(KBe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Lt(t.items.map(e=>e.clone()))})],PS.prototype,"areas",void 0),x([E({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],PS.prototype,"style",void 0),PS=x([he("esri.effects.FocusAreas")],PS);const Vye=PS;function YBe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function XBe(t){return!(!YBe(t)||!Tze(t)?.operations?.supportsEditing||"editingEnabled"in t&&!Aze(t)||m0e(t))}const ZBe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,JBe="screenUtils.toPt: input not recognized!",zye=96;function CMt(t){return t?t/72*zye:0}function Q1(t){return t?72*t/zye:0}function Ti(t){if(typeof t=="string"){const e=t.match(ZBe);if(e){const n=Number(e[1]),r=e[3]&&e[3].toLowerCase(),i=t.startsWith("-"),s=r==="px"?Q1(n):n;return i?-s:s}return console.warn(JBe),null}return t}function qs(t=0,e=0){return{x:t,y:e}}function IMt(t){return t?qs(t.x,t.y):null}function PMt(t=0,e=0){return[t,e]}function RMt(t=0,e=0,n=0){return[t,e,n]}function MMt(t){return t}function NMt(t){return t}function LMt(t){return t}function OMt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function Gye(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function QBe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function eWe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=u,b[11]=h,b[12]=f,b[13]=g,b[14]=y,b[15]=_,b}const tWe=Gye();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:tWe,clone:QBe,create:Gye,fromValues:eWe},Symbol.toStringTag,{value:"Module"}));function Uye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function nWe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=f,t[12]=g,t[13]=y,t[14]=_,t[15]=b,t}function yO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rWe(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function iWe(t,e){return Bye(t,e)||yO(t),t}function Bye(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,C=n*l-i*o,I=n*c-s*o,R=r*l-i*a,V=r*c-s*a,P=i*c-s*l,N=u*_-h*y,L=u*b-f*y,O=u*T-g*y,F=h*b-f*_,G=h*T-g*_,U=f*T-g*b;let ue=A*U-C*G+I*F+R*O-V*L+P*N;return ue?(ue=1/ue,t[0]=(a*U-l*G+c*F)*ue,t[1]=(i*G-r*U-s*F)*ue,t[2]=(_*P-b*V+T*R)*ue,t[3]=(f*V-h*P-g*R)*ue,t[4]=(l*O-o*U-c*L)*ue,t[5]=(n*U-i*O+s*L)*ue,t[6]=(b*I-y*P-T*C)*ue,t[7]=(u*P-f*I+g*C)*ue,t[8]=(o*G-a*O+c*N)*ue,t[9]=(r*O-n*G-s*N)*ue,t[10]=(y*V-_*I+T*A)*ue,t[11]=(h*I-u*V-g*A)*ue,t[12]=(a*L-o*F-l*N)*ue,t[13]=(n*F-r*L+i*N)*ue,t[14]=(_*C-y*R-b*A)*ue,t[15]=(u*R-h*C+f*A)*ue,t):null}function sWe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15];return t[0]=a*(f*T-g*b)-h*(l*T-c*b)+_*(l*g-c*f),t[1]=-(r*(f*T-g*b)-h*(i*T-s*b)+_*(i*g-s*f)),t[2]=r*(l*T-c*b)-a*(i*T-s*b)+_*(i*c-s*l),t[3]=-(r*(l*g-c*f)-a*(i*g-s*f)+h*(i*c-s*l)),t[4]=-(o*(f*T-g*b)-u*(l*T-c*b)+y*(l*g-c*f)),t[5]=n*(f*T-g*b)-u*(i*T-s*b)+y*(i*g-s*f),t[6]=-(n*(l*T-c*b)-o*(i*T-s*b)+y*(i*c-s*l)),t[7]=n*(l*g-c*f)-o*(i*g-s*f)+u*(i*c-s*l),t[8]=o*(h*T-g*_)-u*(a*T-c*_)+y*(a*g-c*h),t[9]=-(n*(h*T-g*_)-u*(r*T-s*_)+y*(r*g-s*h)),t[10]=n*(a*T-c*_)-o*(r*T-s*_)+y*(r*c-s*a),t[11]=-(n*(a*g-c*h)-o*(r*g-s*h)+u*(r*c-s*a)),t[12]=-(o*(h*b-f*_)-u*(a*b-l*_)+y*(a*f-l*h)),t[13]=n*(h*b-f*_)-u*(r*b-i*_)+y*(r*f-i*h),t[14]=-(n*(a*b-l*_)-o*(r*b-i*_)+y*(r*l-i*a)),t[15]=n*(a*f-l*h)-o*(r*f-i*h)+u*(r*l-i*a),t}function oWe(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],y=t[13],_=t[14],b=t[15];return(e*o-n*s)*(h*b-f*_)-(e*a-r*s)*(u*b-f*y)+(e*l-i*s)*(u*_-h*y)+(n*a-r*o)*(c*b-f*g)-(n*l-i*o)*(c*_-h*g)+(r*l-i*a)*(c*y-u*g)}function Wye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],y=e[11],_=e[12],b=e[13],T=e[14],A=e[15];let C=n[0],I=n[1],R=n[2],V=n[3];return t[0]=C*r+I*a+R*h+V*_,t[1]=C*i+I*l+R*f+V*b,t[2]=C*s+I*c+R*g+V*T,t[3]=C*o+I*u+R*y+V*A,C=n[4],I=n[5],R=n[6],V=n[7],t[4]=C*r+I*a+R*h+V*_,t[5]=C*i+I*l+R*f+V*b,t[6]=C*s+I*c+R*g+V*T,t[7]=C*o+I*u+R*y+V*A,C=n[8],I=n[9],R=n[10],V=n[11],t[8]=C*r+I*a+R*h+V*_,t[9]=C*i+I*l+R*f+V*b,t[10]=C*s+I*c+R*g+V*T,t[11]=C*o+I*u+R*y+V*A,C=n[12],I=n[13],R=n[14],V=n[15],t[12]=C*r+I*a+R*h+V*_,t[13]=C*i+I*l+R*f+V*b,t[14]=C*s+I*c+R*g+V*T,t[15]=C*o+I*u+R*y+V*A,t}function aWe(t,e,n){const r=n[0],i=n[1],s=n[2];if(e===t)t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],y=e[8],_=e[9],b=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=y,t[9]=_,t[10]=b,t[11]=T,t[12]=o*r+u*i+y*s+e[12],t[13]=a*r+h*i+_*s+e[13],t[14]=l*r+f*i+b*s+e[14],t[15]=c*r+g*i+T*s+e[15]}return t}function lWe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function cWe(t,e,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=Al())return void Uye(t,e);a=1/a,i*=a,s*=a,o*=a;const l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],C=e[8],I=e[9],R=e[10],V=e[11],P=i*i*u+c,N=s*i*u+o*l,L=o*i*u-s*l,O=i*s*u-o*l,F=s*s*u+c,G=o*s*u+i*l,U=i*o*u+s*l,ue=s*o*u-i*l,be=o*o*u+c;t[0]=h*P+_*N+C*L,t[1]=f*P+b*N+I*L,t[2]=g*P+T*N+R*L,t[3]=y*P+A*N+V*L,t[4]=h*O+_*F+C*G,t[5]=f*O+b*F+I*G,t[6]=g*O+T*F+R*G,t[7]=y*O+A*F+V*G,t[8]=h*U+_*ue+C*be,t[9]=f*U+b*ue+I*be,t[10]=g*U+T*ue+R*be,t[11]=y*U+A*ue+V*be,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function uWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function hWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function dWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function fWe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pWe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mWe(t,e,n){if(e===0)return yO(t);let r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s);if(o<=Al())return null;o=1/o,r*=o,i*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=i*r*c+s*a,t[2]=s*r*c-i*a,t[3]=0,t[4]=r*i*c-s*a,t[5]=i*i*c+l,t[6]=s*i*c+r*a,t[7]=0,t[8]=r*s*c+i*a,t[9]=i*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,l=i+i,c=s+s,u=r*a,h=r*l,f=r*c,g=i*l,y=i*c,_=s*c,b=o*a,T=o*l,A=o*c;return t[0]=1-(g+_),t[1]=h+A,t[2]=f-T,t[3]=0,t[4]=h-A,t[5]=1-(u+_),t[6]=y+b,t[7]=0,t[8]=f+T,t[9]=y-b,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function _We(t,e){const n=xWe,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+u*r+l*s-c*i)/h,n[1]=2*(l*o+u*i+c*r-a*s)/h,n[2]=2*(c*o+u*s+a*i-l*r)/h):(n[0]=2*(a*o+u*r+l*s-c*i),n[1]=2*(l*o+u*i+c*r-a*s),n[2]=2*(c*o+u*s+a*i-l*r)),Hye(t,e,n),t}const xWe=y0();function wWe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function bWe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function EWe(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function SWe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],l=i+i,c=s+s,u=o+o,h=i*l,f=i*c,g=i*u,y=s*c,_=s*u,b=o*u,T=a*l,A=a*c,C=a*u,I=r[0],R=r[1],V=r[2];return t[0]=(1-(y+b))*I,t[1]=(f+C)*I,t[2]=(g-A)*I,t[3]=0,t[4]=(f-C)*R,t[5]=(1-(h+b))*R,t[6]=(_+T)*R,t[7]=0,t[8]=(g+A)*V,t[9]=(_-T)*V,t[10]=(1-(h+y))*V,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function TWe(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,f=s*c,g=s*u,y=s*h,_=o*u,b=o*h,T=a*h,A=l*c,C=l*u,I=l*h,R=r[0],V=r[1],P=r[2],N=i[0],L=i[1],O=i[2],F=(1-(_+T))*R,G=(g+I)*R,U=(y-C)*R,ue=(g-I)*V,be=(1-(f+T))*V,ze=(b+A)*V,Ce=(y+C)*P,de=(b-A)*P,Le=(1-(f+_))*P;return t[0]=F,t[1]=G,t[2]=U,t[3]=0,t[4]=ue,t[5]=be,t[6]=ze,t[7]=0,t[8]=Ce,t[9]=de,t[10]=Le,t[11]=0,t[12]=n[0]+N-(F*N+ue*L+Ce*O),t[13]=n[1]+L-(G*N+be*L+de*O),t[14]=n[2]+O-(U*N+ze*L+Le*O),t[15]=1,t}function kWe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[1]=u+T,t[2]=f-b,t[3]=0,t[4]=u-T,t[5]=1-c-y,t[6]=g+_,t[7]=0,t[8]=f+b,t[9]=g-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function AWe(t,e,n,r,i,s,o){const a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function CWe(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function IWe(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function PWe(t,e,n,r,i,s,o){const a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}function RWe(t,e,n,r){const i=e[0],s=e[1],o=e[2];let a=i-n[0],l=s-n[1],c=o-n[2];const u=Al();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void yO(t);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],g=r[1],y=r[2];let _=g*c-y*l,b=y*a-f*c,T=f*l-g*a;h=Math.sqrt(_*_+b*b+T*T),h?(h=1/h,_*=h,b*=h,T*=h):(_=0,b=0,T=0);let A=l*T-c*b,C=c*_-a*T,I=a*b-l*_;h=Math.sqrt(A*A+C*C+I*I),h?(h=1/h,A*=h,C*=h,I*=h):(A=0,C=0,I=0),t[0]=_,t[1]=A,t[2]=a,t[3]=0,t[4]=b,t[5]=C,t[6]=l,t[7]=0,t[8]=T,t[9]=I,t[10]=c,t[11]=0,t[12]=-(_*i+b*s+T*o),t[13]=-(A*i+C*s+I*o),t[14]=-(a*i+l*s+c*o),t[15]=1}function MWe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let u=i-n[0],h=s-n[1],f=o-n[2],g=u*u+h*h+f*f;g>0&&(g=1/Math.sqrt(g),u*=g,h*=g,f*=g);let y=l*f-c*h,_=c*u-a*f,b=a*h-l*u;return g=y*y+_*_+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,_*=g,b*=g),t[0]=y,t[1]=_,t[2]=b,t[3]=0,t[4]=h*b-f*_,t[5]=f*y-u*b,t[6]=u*_-h*y,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function NWe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function LWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function OWe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function qye(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function DWe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function jWe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function FWe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function $We(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],g=t[11],y=t[12],_=t[13],b=t[14],T=t[15],A=e[0],C=e[1],I=e[2],R=e[3],V=e[4],P=e[5],N=e[6],L=e[7],O=e[8],F=e[9],G=e[10],U=e[11],ue=e[12],be=e[13],ze=e[14],Ce=e[15],de=Al();return Math.abs(n-A)<=de*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-C)<=de*Math.max(1,Math.abs(r),Math.abs(C))&&Math.abs(i-I)<=de*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(s-R)<=de*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(o-V)<=de*Math.max(1,Math.abs(o),Math.abs(V))&&Math.abs(a-P)<=de*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(l-N)<=de*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-L)<=de*Math.max(1,Math.abs(c),Math.abs(L))&&Math.abs(u-O)<=de*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-F)<=de*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(f-G)<=de*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-U)<=de*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(y-ue)<=de*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(_-be)<=de*Math.max(1,Math.abs(_),Math.abs(be))&&Math.abs(b-ze)<=de*Math.max(1,Math.abs(b),Math.abs(ze))&&Math.abs(T-Ce)<=de*Math.max(1,Math.abs(T),Math.abs(Ce))}function VWe(t){const e=Al(),n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}function zWe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const GWe=Wye,UWe=qye;Object.freeze(Object.defineProperty({__proto__:null,add:OWe,adjoint:sWe,copy:Uye,determinant:oWe,equals:$We,exactEquals:FWe,frob:LWe,fromQuat:kWe,fromQuat2:_We,fromRotation:mWe,fromRotationTranslation:Hye,fromRotationTranslationScale:SWe,fromRotationTranslationScaleOrigin:TWe,fromScaling:pWe,fromTranslation:fWe,fromXRotation:gWe,fromYRotation:yWe,fromZRotation:vWe,frustum:AWe,getRotation:EWe,getScale:bWe,getTranslation:wWe,hasIdentityRotation:zWe,identity:yO,invert:Bye,invertOrIdentity:iWe,isOrthoNormal:VWe,lookAt:RWe,mul:GWe,multiply:Wye,multiplyScalar:DWe,multiplyScalarAndAdd:jWe,ortho:PWe,perspective:CWe,perspectiveFromFieldOfView:IWe,rotate:cWe,rotateX:uWe,rotateY:hWe,rotateZ:dWe,scale:lWe,set:nWe,str:NWe,sub:UWe,subtract:qye,targetTo:MWe,translate:aWe,transpose:rWe},Symbol.toStringTag,{value:"Module"}));const fF=()=>kt.getLogger("esri.support.basemapUtils");function BWe(){return{}}function WWe(t){for(const e in t){const n=t[e];n&&!n.destroyed&&n.destroy(),delete t[e]}}function HWe(t,e){let n;if(typeof t=="string"){const r=t in G9,i=!r&&t.includes("/");if(!r&&!i){if(y9())fF().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(G9).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");fF().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(n=e[t]),n||(n=r?RT.fromId(t):new RT({style:{id:t}}),e&&(e[t]=n))}else n=qa(RT,t);return n?.destroyed&&(fF().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function qWe(t){return new nh({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const n=[];return"tables"in e&&n.push(e.tables),"layers"in e&&n.push(e.layers),n},itemFilterFunction:e=>{const n=e.parent;return!!n&&"tables"in n&&n.tables.includes(e)}})}function aR(t){for(const e of t.values())e?.destroy();t.clear()}const Ene={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function KWe(t){let e=null;if(typeof t=="string")if(t in Ene){const n=Ene[t];e=new EN({resourceInfo:{data:{layers:[n]}}})}else kt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=qa(EN,t);return e}function x7(t,e,n){let r,i;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),r?.[e]===n)return r;if(r?.type==="group"&&(i=x7(r.layers,e,n),i))return i}}const YWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.layers=new Lt;const i=a=>{a.parent&&a.removeFromParent()},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||kt.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void kt.getLogger(this).error("#add()","Cannot add layer to itself.");i(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",Cd(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof wi){const o=r;o.parent===this?this.reorder(o,i):s.add(o,i)}else _a(r)?r.then(o=>{this.destroyed||this.add(o,i)}):kt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let o=s.getNextIndex(i);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return x7(this.layers,"id",r)}findLayerByUid(r){return x7(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return x([E()],n.prototype,"layers",null),n=x([he("esri.support.LayersMixin")],n),n},XWe=new Set(["feature","subtype-group"]);function w7(t,e,n){if(t)for(let r=0,i=t.length;r<i;r++){const s=t.at(r);if(s[e]===n)return s;if(s?.type==="group"){const o=w7(s.tables,e,n);if(o)return o}}}const ZWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.tables=new Lt,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,XWe.has(s.type)||kt.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",Cd(r,this._get("tables")))}findTableById(r){return w7(this.tables,"id",r)}findTableByUid(r){return w7(this.tables,"uid",r)}};return x([E()],n.prototype,"tables",null),n=x([he("esri.support.TablesMixin")],n),n};let Bc=class extends ZWe(YWe(MC)){constructor(e){super(e),this.allLayers=new nh({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:n=>"layers"in n?n.layers:null}),this.focusAreas=new Vye,this.allTables=qWe(this),this.basemap=null,this.editableLayers=new nh({getCollections:()=>[this.allLayers],itemFilterFunction:XBe}),this.ground=new EN,this._basemapCache=BWe(),this.addHandles(Sc(()=>this.ground,(n,r)=>{r?.parent===this&&(r.parent=null),n.parent=this},{sync:!0}))}destroy(){WWe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Di(this.basemap),Di(this.ground),this._set("ground",null)}castBasemap(e){return HWe(e,this._basemapCache)}castGround(e){return KWe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(n=>n.id===e)}findTableById(e){return this.allTables.find(n=>n.id===e)}};x([E({readOnly:!0,dependsOn:[]})],Bc.prototype,"allLayers",void 0),x([E({type:Vye,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Bc.prototype,"focusAreas",void 0),x([E({readOnly:!0})],Bc.prototype,"allTables",void 0),x([E({type:RT,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Bc.prototype,"basemap",void 0),x([Ks("basemap")],Bc.prototype,"castBasemap",null),x([E({readOnly:!0})],Bc.prototype,"editableLayers",void 0),x([E({type:EN,nonNullable:!0})],Bc.prototype,"ground",void 0),x([Ks("ground")],Bc.prototype,"castGround",null),x([E()],Bc.prototype,"undoRedo",void 0),Bc=x([he("esri.Map")],Bc);const Kye=Bc;let hy=class extends CW{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hy.prototype,"row",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hy.prototype,"column",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hy.prototype,"rows",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],hy.prototype,"columns",void 0),hy=x([he("esri.CameraLayout")],hy);const Yye=hy;let vO=class{constructor(e,n){this.min=e,this.max=n,this.range=n-e}normalize(e,n=0,r=!1){return Sne(this.range,this.min,this.max,e,n,r)}clamp(e,n=0){return _u(e-n,this.min,this.max)+n}monotonic(e,n,r){return e<n?n:n+b7(this.range,e-n,r)}minimalMonotonic(e,n,r){return Sne(this.range,e,e+this.range,n,r)}center(e,n,r){return n=this.monotonic(e,n,r),this.normalize((e+n)/2,r)}diff(e,n,r){return this.monotonic(e,n,r)-e}shortestSignedDiff(e,n){e=this.normalize(e);const r=(n=this.normalize(n))-e,i=n<e?this.minimalMonotonic(e,n)-e:n-this.minimalMonotonic(n,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,n,r){return n=this.minimalMonotonic(e,n),(r=this.minimalMonotonic(e,r))>e&&r<n}};function Sne(t,e,n,r,i=0,s=!1){return(r-=i)<e?r+=b7(t,e-r):r>n&&(r-=b7(t,r-n)),s&&r===n&&(r=e),r+i}function b7(t,e,n=0){return Math.ceil((e-n)/t)*t+n}const $Mt=new vO(0,2*Math.PI),VMt=new vO(-Math.PI,Math.PI),JWe=new vO(0,360);let Jh=class extends _o(qt){constructor(...e){super(...e),this.position=new Qt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new Yye}normalizeCtorArgs(e,n,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return n!=null&&(s.heading=n),r!=null&&(s.tilt=r),i!=null&&(s.fov=i),s}return e}writePosition(e,n,r,i){const s=e.clone();s.x=ac(e.x||0),s.y=ac(e.y||0),s.z=e.hasZ?ac(e.z||0):e.z,n[r]=s.write({},i)}readPosition(e,n){const r=new Qt;return r.read(e,n),r.x=ac(r.x||0),r.y=ac(r.y||0),r.z=r.hasZ?ac(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};x([E({type:Qt,json:{write:{isRequired:!0}}})],Jh.prototype,"position",void 0),x([er("position")],Jh.prototype,"writePosition",null),x([cr("position")],Jh.prototype,"readPosition",null),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ks(t=>JWe.normalize(ac(t)))],Jh.prototype,"heading",void 0),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ks(t=>_u(ac(t),-180,180))],Jh.prototype,"tilt",void 0),x([E({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ks(t=>_u(ac(t,55),1,170))],Jh.prototype,"fov",void 0),x([E({type:Yye,nonNullable:!0,json:{read:!1,write:!1}})],Jh.prototype,"layout",void 0),Jh=x([he("esri.Camera")],Jh);const QWe=Jh;function Xye(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Zye(t){return t.points!==void 0}function Jye(t){return t.x!==void 0&&t.y!==void 0}function Qye(t){return t.paths!==void 0||t.curvePaths!==void 0}function WW(t){return t.rings!==void 0||t.curveRings!==void 0}function U2(t){return t==null?null:t instanceof Us?t:Jye(t)?Qt.fromJSON(t):Qye(t)?As.fromJSON(t):WW(t)?bi.fromJSON(t):Zye(t)?Qu.fromJSON(t):Xye(t)?Vn.fromJSON(t):null}function HW(t){return t?Jye(t)?"esriGeometryPoint":Qye(t)?"esriGeometryPolyline":WW(t)?"esriGeometryPolygon":Xye(t)?"esriGeometryEnvelope":Zye(t)?"esriGeometryMultipoint":null:null}const eHe={esriGeometryPoint:Qt,esriGeometryPolyline:As,esriGeometryPolygon:bi,esriGeometryEnvelope:Vn,esriGeometryMultipoint:Qu,esriGeometryMultiPatch:bi};function tHe(t){return t&&eHe[t]||null}const nHe=Dl()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),GMt=Dl()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),qW={base:Us,key:"type",typeMap:{extent:Vn,multipoint:Qu,point:Qt,polyline:As,polygon:bi}};function UMt(t){return t.type==="point"}function BMt(t){return t.type==="multipoint"}function WMt(t){return t.type==="polygon"}function HMt(t){return t.type==="polyline"}var E7;let Rm=E7=class extends qt{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new E7({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pF}}}}})],Rm.prototype,"rotation",void 0),x([Ks("rotation")],Rm.prototype,"castRotation",null),x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:pF}}}}})],Rm.prototype,"scale",void 0),x([E({types:qW,json:{read:U2,write:!0,origins:{"web-scene":{read:U2,write:{overridePolicy:pF}}}}})],Rm.prototype,"targetGeometry",void 0),x([E({type:QWe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Rm.prototype,"camera",void 0),Rm=E7=x([he("esri.Viewpoint")],Rm);const pu=Rm;function pF(){return{enabled:!this.camera}}let pA=class{constructor(e=n=>n.values().next().value){this._peeker=e,this._observable=new NC,this._items=new Set}get length(){return on(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return on(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const n=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){on(this._observable),yield*this._items}};const e1e=new FinalizationRegistry(t=>{t.close()});function rHe(t,e){e1e.register(t,e,e)}function iHe(t){e1e.unregister(t)}function t1e(t,e){return new Proxy({},{get:(n,r,i)=>(...s)=>{let o,a;const l=s[s.length-1];return sHe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function sHe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const oHe={statsWorker:()=>ge(()=>import("./statsWorker-CfJ9rl-Y.js"),__vite__mapDeps([51,52,53,54,55,56,57,58,59])),geometryEngineWorker:()=>ge(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([60,61,62,63])),arcadeGeometryOperatorsWorker:()=>ge(()=>import("./operatorsWorker-ChC9AZMB.js"),[]),CSVSourceWorker:()=>ge(()=>import("./CSVSourceWorker-EKRLgug9.js"),__vite__mapDeps([64,65,66,28,67,68,69,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,86,87,88,89])),EdgeProcessingWorker:()=>ge(()=>import("./EdgeProcessingWorker-BrddNVow.js"),__vite__mapDeps([90,91,92,93,55,56,94,95,96,97,98,99,100])),ElevationSamplerWorker:()=>ge(()=>import("./ElevationSamplerWorker-K1nl4wxR.js"),__vite__mapDeps([101,71,102,103,104,105,106,107,108,93,55,56,109])),FeatureServiceSnappingSourceWorker:()=>ge(()=>import("./FeatureServiceSnappingSourceWorker-BvOjkLMb.js"),__vite__mapDeps([110,67,68,66,28,69,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,32,33,111,112,113,114,115])),GaussianSplatSortWorker:()=>ge(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>ge(()=>import("./GeoJSONSourceWorker-BFQlrKdf.js"),__vite__mapDeps([116,68,66,28,69,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,117,65,88,89,118])),LercWorker:()=>ge(()=>import("./LercWorker-CXUO9hms.js"),[]),MemorySourceWorker:()=>ge(()=>import("./MemorySourceWorker-Cw2jaEF7.js"),__vite__mapDeps([119,68,66,28,69,120,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,88,89,118,65])),PBFDecoderWorker:()=>ge(()=>import("./PBFDecoderWorker-BqDtQmDr.js"),__vite__mapDeps([121,122,28,68,66,69,112,113])),FeaturePipelineWorker:()=>ge(()=>import("./FeaturePipelineWorker-BRf9KWen.js"),__vite__mapDeps([123,124,125,126,127,95,128,129,78,79,80,85,130,66,28,68,69,131,53,132,133,134,135,73,72,136,137,138,139,140,141,142,143,144,89,145,146,147,148,74,75,76,26,27,77,81,52,54,55,56,57,58,59,82,83,84,149,150,151,152,49,153,154,155,156,157,117,65,88,118,114,112,113,115,158,159])),PointCloudWorker:()=>ge(()=>import("./PointCloudWorker-CTLgCmrq.js"),__vite__mapDeps([160,161,162,55,163,164,165,166,167,168,56,104,105,169,170])),RasterWorker:()=>ge(()=>import("./RasterWorker-Czs2iGl5.js"),__vite__mapDeps([171,172,173,63,174,175,55,56,176,177,178,179,180,181])),SceneLayerSnappingSourceWorker:()=>ge(()=>import("./SceneLayerSnappingSourceWorker-DTs6wTmz.js"),__vite__mapDeps([182,183,184,56,170,162,185,186,55,169,93,97,98,99,92,94,95,96,100])),SceneLayerWorker:()=>ge(()=>import("./SceneLayerWorker-CRGmHckS.js"),__vite__mapDeps([187,102,108,188,106])),WFSSourceWorker:()=>ge(()=>import("./WFSSourceWorker-DKx-ey2s.js"),__vite__mapDeps([189,68,66,28,69,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,117,65,118,190,191])),WorkerTileHandler:()=>ge(()=>import("./WorkerTileHandler-CqyjPdPl.js"),__vite__mapDeps([192,142,193,143,194,113,28,146,195,196,96,95,175,55,56,197,141])),Lyr3DWorker:()=>ge(()=>import("./Lyr3DWorker-BIrpP80c.js"),[]),Feature3DPipelineWorker:()=>ge(()=>import("./Feature3DPipelineWorker-DTO6C0uV.js"),__vite__mapDeps([198,75,68,66,28,69,76,26,27,77,78,79,80,72,73,81,53,52,54,55,56,57,58,59,82,83,84,85,199,200,201,202,179,166,203,33,204,205,144,89,165,137,129,133,134,206,207,124,208,209,107,102,188,106,210,163,211,99,93,212,184,170,162,183,213,214,186,169,168,161,104,105,96,95,92,94,215,216,217,218,219,220,221,222,223,224,71,114,112,113,115,225])),TextureCompressionWorker:()=>ge(()=>import("./TextureCompressionWorker-XKxfyMf8.js"),[]),FlowWorker:()=>ge(()=>import("./FlowWorker-DuI1Vt2k.js"),__vite__mapDeps([226,181])),ParquetSourceWorker:()=>ge(()=>import("./ParquetSourceWorker-BvFeqe2T.js"),__vite__mapDeps([227,148,75,68,66,28,69,76,26,27,77,78,79,80,72,73,81,53,52,54,55,56,57,58,59,82,83,84,85,88,89,228,87,151,130,131,150,149])),PanoramicMeshWorker:()=>ge(()=>import("./PanoramicMeshWorker-Blgv-ryR.js"),__vite__mapDeps([229,172]))},n1e="worker:port-closed",fp={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let aHe=0;function r1e(){return aHe++}function lHe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function kN(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function i1e(t,e,n,r){if(e.type===fp.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==fp.INVOKE&&e.type!==fp.RESPONSE)return void t.postMessage(e);let i;lHe(n)?(i=Tne(n.transferList),e.data=n.result):(i=Tne(r),e.data=n),i?t.postMessage(e,i):t.postMessage(e)}function mA(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Tne(t){if(!t?.length)return null;if(_e("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(n=>!cHe(n));return e.length?e:null}function cHe(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function KMt(t){try{return await t}catch(e){const n=e?.name===n1e;if(!(Sa(e)||n))throw e;return}}const{CLOSE:lR,ABORT:S7,INVOKE:kne,RESPONSE:XE,OPEN_PORT:Ane,ON:Cne}=fp,uHe=2;let hHe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===S7?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var tu;let B2=(tu=class{static connect(e,n){const r=new MessageChannel;let i;i=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new tu(r.port1,{channel:r,client:i,schedule:n});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),tu.clients.set(s,i),r.port2}static loadWorker(e){const n=oHe[e];return n?n():Promise.resolve(null)}constructor(e,n,r,i){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new hHe(s=>this._onInvokeMessage(s)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:lR}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new Qe(n1e,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:n}));const o=r1e();return new Promise((a,l)=>{if(va(i))return this._processWork(),void l(Pr());const c=vu(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),ii(h.abortHandle),this._post({type:S7,jobId:o}),l(Pr()))}),u={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,u),this._post({type:kne,jobId:o,methodName:e,abortable:i!=null},n,s)})}createInvokeProxy(e){return t1e(this,e)}on(e,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:Cne,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),Zn(()=>{r.port1.postMessage({type:lR}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Ane,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=uHe)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=e;this.apply(n,r,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{ii(e.abortHandle),e.reject(Pr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,n){const r=mA(e);if(r)switch(r.type){case XE:this._onResponseMessage(r);break;case kne:n?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case S7:this._onAbortMessage(r);break;case lR:this._onCloseMessage();break;case Ane:this._onOpenPortMessage(r);break;case Cne:this._onOnMessage(r)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&tu.clients.get(this)===e&&e.destroy(),tu.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[n];try{if(!u&&n&&n.includes(".")){const h=n.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],u=c[h[f+1]]}if(typeof u!="function")throw new TypeError(`${n} is not a function`);i.push({client:this,signal:o?o.signal:null}),l=u.apply(c,i)}catch(h){return void this._post({type:XE,jobId:r,error:kN(h)})}_a(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:XE,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),Sa(h)||this._post({type:XE,jobId:r,error:kN(h||{message:`Error encountered at method ${n}`})}))})):this._post({type:XE,jobId:r},l)}_onOpenPortMessage(e){new tu(e.port,{client:this._client})}_onOnMessage(e){const{port:n}=e,r=this._client.on(e.eventType,s=>{n.postMessage(s)}),i=wb(e.port,"message",s=>{mA(s)?.type===lR&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),ii(o.abortHandle),r?o.reject(Qe.fromJSON(JSON.parse(r))):o.resolve(i)}_post(e,n,r){return i1e(this._port,e,n,r)}},tu.kernelInfo={buildDate:cpe,fullVersion:DB,revision:upe},tu.clients=new Map,tu),dHe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new pA,this._ongoingLowPriorityJobsQueue=new pA}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,n){return new Promise((r,i)=>{let s=!0;const o=a=>{gi(n.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];_a(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new B2(c,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new B2(l,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a?.invoke(e,n,r))}return i}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Pr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Pr(`Worker closing, aborting job calling '${e.methodName}'`));for(const n of this._clientPromises)n.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,iHe(this)}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=Ec();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:n,invokeOptions:r,resolver:i});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a?.jobAdded())}return i.promise}createInvokeProxy(e){return t1e(this,e)}on(e,n){return Promise.all(this._clientPromises).then(()=>xv(this._clients.map(r=>r.on(e,n))))}openPorts(){return new Promise(e=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r===0&&e(n)})})}get test(){}};const fHe={async request(t,e){const n=t.options,r=n.responseType;n.signal=e?.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&h9(t.url)?.after?r:"array-buffer";const i=await rs(t.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Ine={};function pHe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...Ine.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ine.baseUrl),e}let mHe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>e[n](...r)})}},e3=class{constructor(){this._dispatcher=new mHe,this._workerPostMessage({type:fp.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){iN(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,n,r){this._dispatcher.addEventListener(e,n,r)}removeEventListener(e,n,r){this._dispatcher.removeEventListener(e,n,r)}_workerPostMessage(e){iN(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const n=mA(e);if(n&&n.type===fp.OPEN){const{modulePath:r,jobId:i}=n;let s=await B2.loadWorker(r);s||(s=await import(r));const o=B2.connect(s);this._workerPostMessage({type:fp.OPENED,jobId:i,data:o})}}};const T7=()=>kt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:gHe}=fp,yHe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let cR,uR;const Pne="Failed to create Worker. Fallback to execute module in main thread";async function vHe(){if(!_e("esri-workers"))return Rne(new e3);if(!cR&&!uR)try{const e=yHe.split("{CONFIGURATION}").join(_He());cR=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){uR=e||{}}let t;if(cR)try{t=new Worker(cR,{name:"esri-worker-"+xHe++})}catch{T7().warn(Pne,uR),t=new e3}else T7().warn(Pne,uR),t=new e3;return Rne(t)}async function Rne(t){return new Promise(e=>{function n(i){const s=mA(i);s&&s.type===gHe&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(i){i.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),T7().warn("Failed to create Worker. Fallback to execute module in main thread",i),(t=new e3).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})}function _He(){let t;if(nr.default!=null){const i={...nr};delete i.default,t=JSON.parse(JSON.stringify(i))}else t=JSON.parse(JSON.stringify(nr));t.assetsPath=iu(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?iu(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=fu(),t.has={"esri-csp-restrictions":_e("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":_e("esri-2d-update-debug"),"esri-2d-log-updating":_e("esri-2d-log-updating"),"featurelayer-pbf":_e("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":_e("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":_e("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":_e("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":_e("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":_e("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":_e("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":_e("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":_e("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":_e("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":_e("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":_e("parquetlayer-full-query-feature-count"),"esri-atomics":_e("esri-atomics"),"esri-shared-array-buffer":_e("esri-shared-array-buffer"),"esri-tiles-debug":_e("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":_e("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":_e("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=iu(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=iu(t.workers.workerPath):t.workers.workerPath=iu(qi("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=nr.workers.loaderConfig,n=pHe({baseUrl:e?.baseUrl,locale:fu(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:n,kernelInfo:{buildDate:cpe,fullVersion:DB,revision:upe}})}let xHe=0;const{ABORT:Mne,INVOKE:wHe,OPEN:bHe,OPENED:EHe,RESPONSE:ZE}=fp;let SHe=class s1e{static async create(e){const n=await vHe();return new s1e(n,e)}constructor(e,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=n,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),kt.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,n={}){const{signal:r}=n,i=r1e();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:jB(r,()=>{this._outJobs.delete(i),this._post({type:Mne,jobId:i})})};this._outJobs.set(i,a),this._post({type:bHe,jobId:i,modulePath:e})})}_onMessage(e){const n=mA(e);if(n)switch(n.type){case EHe:this._onOpenedMessage(n);break;case ZE:this._onResponseMessage(n);break;case Mne:this._onAbortMessage(n);break;case wHe:this._onInvokeMessage(n)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=fHe[n];let c;try{if(typeof l!="function")throw new TypeError(`${n} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(u){return void this._post({type:ZE,jobId:r,error:kN(u)})}_a(c)?(a.set(r,{controller:o,promise:c}),c.then(u=>{a.has(r)&&(a.delete(r),this._post({type:ZE,jobId:r},u))},u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+n}),Sa(u)||this._post({type:ZE,jobId:r,error:kN(u||{message:`Error encountered at method ${n}`})}))})):this._post({type:ZE,jobId:r},c)}_onOpenedMessage(e){const{jobId:n,data:r}=e,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),ii(i.abortHandle),i.resolve(r))}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),ii(s.abortHandle),r?s.reject(Qe.fromJSON(JSON.parse(r))):s.resolve(i))}_post(e,n,r){return i1e(this.worker,e,n,r)}};const Nne=_e("host-browser")?Math.min(navigator.hardwareConcurrency-1,_e("workers-pool-size")??8):0;let Ky=_e("esri-mobile")?Math.min(Nne,3):Nne;Ky||(Ky=_e("safari")&&_e("mac")?7:2);let Lne=0;const t3=[];function THe(){o1e()}async function hR(t,e){const n=new dHe,{registryTarget:r,...i}=e;return await n.open(t,i),r&&rHe(r,n),n}async function QMt(t,e={}){if(typeof t!="string")throw new Qe("workers:undefined-module","modulePath is missing");let n=e.strategy||"distributed";if(_e("host-webworker")&&!_e("esri-workers")&&(n="local"),n==="local"){let r=await B2.loadWorker(t);r||(r=await import(t)),gi(e.signal);const i=e.client||r;return hR([B2.connect(r,e.schedule)],{...e,client:i})}if(await o1e(),gi(e.signal),n==="dedicated"){const r=Lne++%Ky;return hR([await t3[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Ky);if(r<Ky){const i=new Array(r);for(let s=0;s<r;++s){const o=Lne++%Ky;i[s]=t3[o].open(t,e)}return hR(i,e)}}return hR(t3.map(r=>r.open(t,e)),e)}let dR=null;async function o1e(){if(dR)return dR;new AbortController;const t=[];for(let e=0;e<Ky;e++){const n=SHe.create(e).then(r=>(t3[e]=r,r));t.push(n)}return dR=Promise.all(t),dR}let jT=class extends Lt{constructor(e){super(e),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Lt.ofType(this.itemType.Type))(e):new Lt(e)}};function k7(t,e){return{type:t,cast:mme,set(n){const r=Cd(n,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}x([E()],jT.prototype,"owner",null),jT=x([he("esri.core.support.OwningCollection")],jT);var A7,Fw;let Mo=(Fw=class extends qt{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new A7({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},A7=Fw,Fw);x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Mo.prototype,"cols",void 0),x([E({type:jr,json:{write:!0}})],Mo.prototype,"level",void 0),x([E({type:String,json:{write:!0}})],Mo.prototype,"levelValue",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Mo.prototype,"origin",void 0),x([E({type:Number,json:{write:!0}})],Mo.prototype,"resolution",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Mo.prototype,"rows",void 0),x([E({type:Number,json:{write:!0}})],Mo.prototype,"scale",void 0),Mo=A7=x([he("esri.layers.support.LOD")],Mo);let kHe=class a1e{constructor(e,n,r,i=El()){this._level=e,this._row=n,this._col=r,this.extent=i}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new a1e(e.level,e.row,e.col,e.extent)}};var ox;const One=new Xs({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var $w;let Aa=($w=class extends qt{static create(e={}){const{resolutionFactor:n=1,scales:r,size:i=256,spatialReference:s=Wt.WebMercator,numLODs:o=24}=e;if(!fc(s)){const f=[];if(r)for(let g=0;g<r.length;g++){const y=r[g];f.push(new Mo({level:g,scale:y,resolution:y}))}else{let g=5e-4;for(let y=o-1;y>=0;y--)f.unshift(new Mo({level:y,scale:g,resolution:g})),g*=2}return new ox({dpi:96,lods:f,origin:new Qt(0,0,s),size:[i,i],spatialReference:s})}const a=Ua(s),l=e.origin?new Qt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Qt(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,u=1/(Jd(s)*39.37*c),h=[];if(r)for(let f=0;f<r.length;f++){const g=r[f],y=g*u;h.push(new Mo({level:f,scale:g,resolution:y}))}else{let f=Ab(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const g=Math.ceil(o/n);h.push(new Mo({level:0,scale:f,resolution:f*u}));for(let y=1;y<g;y++){const _=f/2**n,b=_*u;h.push(new Mo({level:y,scale:_,resolution:b})),f=_}}return new ox({dpi:c,lods:h,origin:l,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:n}=this;if(e&&n){const r=Ua(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-n.x)<=r.dx}return!1}readOrigin(e,n){return Qt.fromJSON({spatialReference:n.spatialReference,...e})}set lods(e){let n=0,r=0;const i=[],s=this._levelToLOD={};e&&(n=-1/0,r=1/0,e.forEach(o=>{i.push(o.scale),n=o.scale>n?o.scale:n,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,n){return[n.cols,n.rows]}writeSize(e,n){n.cols=e[0],n.rows=e[1]}zoomToScale(e){const n=this.scales;if(e<=0)return n[0];if(e>=n.length-1)return n[n.length-1];const r=Math.floor(e),i=r+1;return n[r]/(n[r]/n[i])**(e-r)}scaleToZoom(e){const n=this.scales,r=n.length-1;let i=0;for(;i<r;i++){const s=n[i],o=n[i+1];if(s<=e)return i;if(o===e)return i+1;if(s>e&&o<e)return i+Math.log(s/e)/Math.log(s/o)}return i}tileAt(e,n,r,i){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof n=="number")o=n,a=r;else if(yo(n.spatialReference,this.spatialReference))o=n.x,a=n.y,i=r;else{const u=rO(n,this.spatialReference);if(u==null)return null;o=u.x,a=u.y,i=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return i??=new kHe(0,0,0),i.level=e,i.row=Math.floor((this.origin.y-a)/c+.001),i.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,n=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&n===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,o=r.resolution*this.size[1]/2**i;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const n=this._upsampleLevels[e.level];return!(!n||n.parentLevel===-1)&&(e.level=n.parentLevel,e.row=Math.floor(e.row/n.factor+.001),e.col=Math.floor(e.col/n.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,n){const r=this.lodAt(n.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],o=i*this.size[1];return e[0]=this.origin.x+n.col*s,e[1]=this.origin.y-(n.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return ox.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const n=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&n===0)return this;const r=[],i=this.lods.length-n;for(let s=0;s<i;s++){const o=s+n,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Mo({level:s,scale:a,resolution:l}))}return new ox({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let n=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:n?n.level:-1,factor:n?n.resolution/i.resolution:0},n=i}}},ox=$w,$w);x([E({type:Number,json:{write:!0}})],Aa.prototype,"compressionQuality",void 0),x([E({type:Number,json:{write:!0}})],Aa.prototype,"dpi",void 0),x([E({type:String,json:{read:One.read,write:One.write,origins:{"web-scene":{read:!1,write:!1}}}})],Aa.prototype,"format",void 0),x([E({readOnly:!0})],Aa.prototype,"isWrappable",null),x([E({type:Qt,json:{write:!0}})],Aa.prototype,"origin",void 0),x([cr("origin")],Aa.prototype,"readOrigin",null),x([E({type:[Mo],value:null,json:{write:!0}})],Aa.prototype,"lods",null),x([E({readOnly:!0})],Aa.prototype,"scales",void 0),x([E({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Aa.prototype,"size",void 0),x([cr("size",["rows","cols"])],Aa.prototype,"readSize",null),x([er("size",{cols:{type:jr},rows:{type:jr}})],Aa.prototype,"writeSize",null),x([E({type:Wt,json:{write:!0}})],Aa.prototype,"spatialReference",void 0),Aa=ox=x([he("esri.layers.support.TileInfo")],Aa);let W2=class extends jT{constructor(e){super(e),this.addHandles(this.on("before-add",n=>{n.item!=null&&n.item.parent===this.owner&&(kt.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};W2=x([he("esri.support.AnalysesCollection")],W2);const n3={widthBreakpoint:{getValue(t){const e=t.viewSize[0],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,n=e[0],r=e[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},mF={xsmall:544,small:768,medium:992,large:1200};function AHe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function gF(t,e){return e?n3[t].valueToClassName[e].split(" "):[]}const CHe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=mF}initialize(){this.addHandles(mn(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),xa))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!AHe(r)){const i=JSON.stringify(mF,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=mF}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Da.acquire(),i=Da.acquire();let s,o=!1;for(s in n3){const a=this[s],l=n3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[s]=l,gF(s,a).forEach(c=>i.push(c)),gF(s,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,i),Da.release(r),Da.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in n3)gF(i,this[i]).forEach(s=>r.classList.remove(s))}};return x([E()],n.prototype,"breakpoints",null),x([E()],n.prototype,"orientation",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),x([E()],n.prototype,"heightBreakpoint",void 0),n=x([he("esri.views.BreakpointsOwner")],n),n};function KW(t){return typeof t=="string"?document.getElementById(t):t??null}function Dne(t,e){for(;;){const n=t.firstChild;if(!n)break;e.appendChild(n)}}let p1=class extends Kt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,n,r={}){return this._installWatch(e,n,r,mn)}addWhen(e,n,r={}){return this._installWatch(e,n,r,Sc)}addOnCollectionChange(e,n,{initial:r=!1,final:i=!1}={}){const s=++this._handleId;return this.addHandles([J1(e,"after-changes",this._createSyncUpdatingCallback(),Qg),J1(e,"change",n,{onListenerAdd:r?o=>n({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>n({added:[],removed:o.toArray()}):void 0})],s),Zn(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const n=++this._handleId;this.addHandles(Zn(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(fR)||this._set("updating",!1))}),n),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(n);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,n,r={},i){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=i(e,n,r);return this.addHandles(o,s),Zn(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,n){const r=this._createSyncUpdatingCallback(),i=mn(e,r,{sync:!0,equals:()=>!1});return this.addHandles(i,n),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(fR),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(kb(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(fR))}),fR)}}};x([E({readOnly:!0})],p1.prototype,"updating",void 0),p1=x([he("esri.core.support.UpdatingHandles")],p1);const fR=-42;var AN=function(){return AN=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},AN.apply(this,arguments)},C7={exports:{}},Gi={},I7={exports:{}},Tv={};function l1e(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function IHe(t,e,n){}function PHe(t,e,n){}var RHe=/javascript\s*\:/img;function MHe(t,e){return RHe.test(e)?"":e}Tv.whiteList=l1e();Tv.getDefaultWhiteList=l1e;Tv.onAttr=IHe;Tv.onIgnoreAttr=PHe;Tv.safeAttrValue=MHe;var NHe={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},JE=NHe;function LHe(t,e){t=JE.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,s=0,o="";function a(){if(!r){var u=JE.trim(t.slice(i,s)),h=u.indexOf(":");if(h!==-1){var f=JE.trim(u.slice(0,h)),g=JE.trim(u.slice(h+1));if(f){var y=e(i,o.length,f,g,u);y&&(o+=y+"; ")}}}i=s+1}for(;s<n;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,i=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return JE.trim(o)}var OHe=LHe,pR=Tv,DHe=OHe;function jne(t){return t==null}function jHe(t){var e={};for(var n in t)e[n]=t[n];return e}function c1e(t){t=jHe(t||{}),t.whiteList=t.whiteList||pR.whiteList,t.onAttr=t.onAttr||pR.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||pR.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||pR.safeAttrValue,this.options=t}c1e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,s=n.onIgnoreAttr,o=n.safeAttrValue,a=DHe(t,function(l,c,u,h,f){var g=r[u],y=!1;if(g===!0?y=g:typeof g=="function"?y=g(h):g instanceof RegExp&&(y=g.test(h)),y!==!0&&(y=!1),h=o(u,h),!!h){var _={position:c,sourcePosition:l,source:f,isWhite:y};if(y){var b=i(u,h,_);return jne(b)?u+":"+h:b}else{var b=s(u,h,_);if(!jne(b))return b}}});return a};var FHe=c1e;(function(t,e){var n=Tv,r=FHe;function i(o,a){var l=new r(a);return l.process(o)}e=t.exports=i,e.FilterCSS=r;for(var s in n)e[s]=n[s]})(I7,I7.exports);var YW=I7.exports,XW={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},$He=YW.FilterCSS,VHe=YW.getDefaultWhiteList,CN=XW;function u1e(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var h1e=new $He;function zHe(t,e,n){}function GHe(t,e,n){}function UHe(t,e,n){}function BHe(t,e,n){}function d1e(t){return t.replace(HHe,"&lt;").replace(qHe,"&gt;")}function WHe(t,e,n,r){if(n=v1e(n),e==="href"||e==="src"){if(n=CN.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(mR.lastIndex=0,mR.test(n))return""}else if(e==="style"){if(Fne.lastIndex=0,Fne.test(n)||($ne.lastIndex=0,$ne.test(n)&&(mR.lastIndex=0,mR.test(n))))return"";r!==!1&&(r=r||h1e,n=r.process(n))}return n=_1e(n),n}var HHe=/</g,qHe=/>/g,KHe=/"/g,YHe=/&quot;/g,XHe=/&#([a-zA-Z0-9]*);?/gim,ZHe=/&colon;?/gim,JHe=/&newline;?/gim,mR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Fne=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,$ne=/u\s*r\s*l\s*\(.*/gi;function f1e(t){return t.replace(KHe,"&quot;")}function p1e(t){return t.replace(YHe,'"')}function m1e(t){return t.replace(XHe,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function g1e(t){return t.replace(ZHe,":").replace(JHe," ")}function y1e(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return CN.trim(e)}function v1e(t){return t=p1e(t),t=m1e(t),t=g1e(t),t=y1e(t),t}function _1e(t){return t=f1e(t),t=d1e(t),t}function QHe(){return""}function eqe(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(o){return n?!0:CN.indexOf(t,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([s!==!1?s:l.position,u]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return CN.forEach(i,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function tqe(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function nqe(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Gi.whiteList=u1e();Gi.getDefaultWhiteList=u1e;Gi.onTag=zHe;Gi.onIgnoreTag=GHe;Gi.onTagAttr=UHe;Gi.onIgnoreTagAttr=BHe;Gi.safeAttrValue=WHe;Gi.escapeHtml=d1e;Gi.escapeQuote=f1e;Gi.unescapeQuote=p1e;Gi.escapeHtmlEntities=m1e;Gi.escapeDangerHtml5Entities=g1e;Gi.clearNonPrintableCharacter=y1e;Gi.friendlyAttrValue=v1e;Gi.escapeAttrValue=_1e;Gi.onIgnoreTagStripAll=QHe;Gi.StripTagBody=eqe;Gi.stripCommentTag=tqe;Gi.stripBlankChar=nqe;Gi.cssFilter=h1e;Gi.getDefaultCSSWhiteList=VHe;var _O={},qm=XW;function rqe(t){var e=qm.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=qm.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function iqe(t){return t.slice(0,2)==="</"}function sqe(t,e,n){var r="",i=0,s=!1,o=!1,a=0,l=t.length,c="",u="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){r+=n(t.slice(i,a)),s=a,i=a;continue}if(h===">"){r+=n(t.slice(i,s)),u=t.slice(s,a+1),c=rqe(u),r+=e(s,r.length,c,u,iqe(u)),i=a+1,s=!1;continue}if(h==='"'||h==="'")for(var f=1,g=t.charAt(a-f);g.trim()===""||g==="=";){if(g==="="){o=h;continue e}g=t.charAt(a-++f)}}else if(h===o){o=!1;continue}}return i<t.length&&(r+=n(t.substr(i))),r}var oqe=/[^a-zA-Z0-9\\_:.-]/gim;function aqe(t,e){var n=0,r=0,i=[],s=!1,o=t.length;function a(f,g){if(f=qm.trim(f),f=f.replace(oqe,"").toLowerCase(),!(f.length<1)){var y=e(f,g||"");y&&i.push(y)}}for(var l=0;l<o;l++){var c=t.charAt(l),u,h;if(s===!1&&c==="="){s=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:cqe(t,l+1);continue}if(s!==!1&&l===r){if(h=t.indexOf(c,l+1),h===-1)break;u=qm.trim(t.slice(r+1,h)),a(s,u),s=!1,l=h,n=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(h=lqe(t,l),h===-1){u=qm.trim(t.slice(n,l)),a(u),s=!1,n=l+1;continue}else{l=h-1;continue}else if(h=uqe(t,l-1),h===-1){u=qm.trim(t.slice(n,l)),u=Vne(u),a(s,u),s=!1,n=l+1;continue}else continue}return n<t.length&&(s===!1?a(t.slice(n)):a(s,Vne(qm.trim(t.slice(n))))),qm.trim(i.join(" "))}function lqe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function cqe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function uqe(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function hqe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Vne(t){return hqe(t)?t.substr(1,t.length-2):t}_O.parseTag=sqe;_O.parseAttr=aqe;var dqe=YW.FilterCSS,Zu=Gi,x1e=_O,fqe=x1e.parseTag,pqe=x1e.parseAttr,r3=XW;function gR(t){return t==null}function mqe(t){var e=r3.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=r3.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=r3.trim(t.slice(0,-1))),{html:t,closing:n}}function gqe(t){var e={};for(var n in t)e[n]=t[n];return e}function yqe(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function w1e(t){t=gqe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Zu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=yqe(t.whiteList||t.allowList):t.whiteList=Zu.whiteList,t.onTag=t.onTag||Zu.onTag,t.onTagAttr=t.onTagAttr||Zu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Zu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Zu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Zu.safeAttrValue,t.escapeHtml=t.escapeHtml||Zu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new dqe(t.css))}w1e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,o=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=e.cssFilter;n.stripBlankChar&&(t=Zu.stripBlankChar(t)),n.allowCommentTag||(t=Zu.stripCommentTag(t));var h=!1;n.stripIgnoreTagBody&&(h=Zu.StripTagBody(n.stripIgnoreTagBody,s),s=h.onIgnoreTag);var f=fqe(t,function(g,y,_,b,T){var A={sourcePosition:g,position:y,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,_)},C=i(_,b,A);if(!gR(C))return C;if(A.isWhite){if(A.isClosing)return"</"+_+">";var I=mqe(b),R=r[_],V=pqe(I.html,function(P,N){var L=r3.indexOf(R,P)!==-1,O=o(_,P,N,L);return gR(O)?L?(N=l(_,P,N,u),N?P+'="'+N+'"':P):(O=a(_,P,N,L),gR(O)?void 0:O):O});return b="<"+_,V&&(b+=" "+V),I.closing&&(b+=" /"),b+=">",b}else return C=s(_,b,A),gR(C)?c(b):C},c);return h&&(f=h.remove(f)),f};var vqe=w1e;(function(t,e){var n=Gi,r=_O,i=vqe;function s(a,l){var c=new i(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=i,(function(){for(var a in n)e[a]=n[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(C7,C7.exports);var N_=C7.exports,_qe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},b1e=(function(){function t(e,n){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=AN(AN({},N_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):N_.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;e&&!n?i=e:e&&n?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=e[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new N_.FilterXSS(i)}return t.prototype.sanitize=function(e,n){switch(n===void 0&&(n={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,n);default:return n.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,n){var r=(n??{}).isProtocolRequired,i=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?N_.escapeAttrValue(e):!s&&!i?N_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,n,r,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,n,r,i):N_.safeAttrValue(e,n,r,i)},t.prototype.validate=function(e,n){n===void 0&&(n={});var r=this.sanitize(e,n);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var n=this;return String(e).replace(/[&<>"'\/]/g,function(r){return n._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var n=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,i){return n.test(r)?r:"&#x".concat(Number(e.charCodeAt(i)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var n={};return e.forEach(function(r){Object.keys(r).forEach(function(i){Array.isArray(r[i])&&Array.isArray(n[i])?n[i]=n[i].concat(r[i]):n[i]=r[i]})}),n},t.prototype._iterateOverObject=function(e,n){var r=this;n===void 0&&(n={});try{var i=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,n);return c.isValid?a.concat([l]):(i=!0,a.concat([c.sanitized]))},[]);else if(_qe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],u=r.validate(c,n);return u.isValid?a[l]=c:(i=!0,a[l]=u.sanitized),a},{})}else return n.allowUndefined&&typeof e>"u"?void 0:null;return i?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const xqe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],wqe=xqe.reduce((t,e)=>(t[e]=[],t),{}),bqe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],E1e=new b1e({whiteList:wqe,onTagAttr:(t,e,n)=>{const r=`${e}="${n}"`;if(bqe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),r3t=new b1e({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),S1e="http://www.w3.org/",xO=`${S1e}2000/svg`,T1e=`${S1e}1999/xlink`;let zne=[],ZW=(t,e)=>{let n={};return Object.keys(t).forEach(r=>{n[r]=t[r]}),e&&Object.keys(e).forEach(r=>{n[r]=e[r]}),n},JW=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),k1e=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},Eqe=(t,e,n)=>{if(e.vnodeSelector!==""){for(let r=n;r<t.length;r++)if(JW(t[r],e))return r}return-1},yF=(t,e,n,r)=>{let i=t[e];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(JW(a,i))throw new Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Sqe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},P7=[],R7=!1,A1e=t=>{(t.children||[]).forEach(A1e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Gne=()=>{R7=!1,P7.forEach(A1e),P7.length=0},Une=t=>{P7.push(t),R7||(R7=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Gne,{timeout:16}):setTimeout(Gne,16))},Bne=t=>{let e=t.domNode;if(t.properties){let n=t.properties.exitAnimation;if(n)return e.style.pointerEvents="none",void n(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Une(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),Une(t))},Tqe=(t,e,n)=>{if(!e)return;let r=n.eventHandlerInterceptor,i=Object.keys(e),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")N7(t,l,!0);else if(a==="classes"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h],g=l[f];g&&(k1e(g),n.styleApplyer(t,f,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let u=l;l=function(h){u.apply(this,[h]),h.target["oninput-value"]=h.target.value}})()),t[a]=l):n.namespace===xO?a==="href"?t.setAttributeNS(T1e,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=E1e.sanitize(l):M7(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function M7(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let IN,kqe=(t,e,n)=>{if(e)for(let r of e)FT(r,t,void 0,n)},C1e=(t,e,n)=>{kqe(t,e.children,n),e.text&&(t.textContent=e.text),Tqe(t,e.properties,n),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,n,e.vnodeSelector,e.properties,e.children])},FT=(t,e,n,r)=>{let i,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")i=t.domNode=a.createTextNode(t.text),n!==void 0?e.insertBefore(i,n):e.appendChild(i);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let u=o.charAt(s-1),h=o.slice(s,l);u==="."?i.classList.add(h):u==="#"?i.id=h:(h==="svg"&&(r=ZW(r,{namespace:xO})),r.namespace!==void 0?i=t.domNode=a.createElementNS(r.namespace,h):(i=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&i.setAttribute("type",t.properties.type)),n!==void 0?e.insertBefore(i,n):i.parentNode!==e&&e.appendChild(i)),s=l+1}}C1e(i,t,r)}},N7=(t,e,n)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,n)})},Aqe=(t,e,n,r)=>{if(!n)return;let i=!1,s=Object.keys(n),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=n[l],u=e[l];if(l==="class")u!==c&&(N7(t,u,!1),N7(t,c,!0));else if(l==="classes"){let h=t.classList,f=Object.keys(c),g=f.length;for(let y=0;y<g;y++){let _=f[y],b=!!c[_];b!==!!u[_]&&(i=!0,b?h.add(_):h.remove(_))}}else if(l==="styles"){let h=Object.keys(c),f=h.length;for(let g=0;g<f;g++){let y=h[g],_=c[y];_!==u[y]&&(i=!0,_?(k1e(_),r.styleApplyer(t,y,_)):r.styleApplyer(t,y,""))}}else if(c||typeof u!="string"||(c=""),l!=="value"||M7(t)){if(c!==u){let h=typeof c;h==="function"&&r.eventHandlerInterceptor||(r.namespace===xO?l==="href"?t.setAttributeNS(T1e,l,c):t.setAttribute(l,c):h==="string"?l==="innerHTML"?t[l]=E1e.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):M7(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),i=!0)}}else{let h=t[l];h!==c&&(t["oninput-value"]?h===t["oninput-value"]:c!==u)&&(t[l]=c,t["oninput-value"]=void 0),c!==u&&(i=!0)}}return i},Cqe=(t,e,n,r,i)=>{if(n===r)return!1;r=r||zne;let s,o=(n=n||zne).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let h=l<o?n[l]:void 0,f=r[c];if(h!==void 0&&JW(h,f))u=IN(h,f,i)||u,l++;else{let g=Eqe(n,f,l+1);if(g>=0){for(s=l;s<g;s++)Bne(n[s]),yF(n,s,t,"removed");u=IN(n[g],f,i)||u,l=g+1}else FT(f,e,l<o?n[l].domNode:void 0,i),Sqe(f),yF(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)Bne(n[s]),yF(n,s,t,"removed");return u};IN=(t,e,n)=>{let r=t.domNode,i=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,i=!0,i}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(n=ZW(n,{namespace:xO})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=Cqe(e,r,t.children,e.children,n)||s,s=Aqe(r,t.properties,e.properties,n)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,n,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),i};let yR=(t,e)=>({getLastRender:()=>t,update:n=>{if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=n,IN(r,n,e)},domNode:t.domNode});const Iqe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.charAt(0)==="-"?t.style.setProperty(e,n):t.style[e]=n}};let RS=t=>ZW(Iqe,t),mg={append:(t,e,n)=>(n=RS(n),FT(e,t,void 0,n),yR(e,n)),insertBefore:(t,e,n)=>(n=RS(n),FT(e,t.parentNode,t,n),yR(e,n)),merge:(t,e,n)=>(n=RS(n),e.domNode=t,C1e(t,e,n),yR(e,n)),replace:(t,e,n)=>(n=RS(n),FT(e,t.parentNode,t,n),t.parentNode.removeChild(t),yR(e,n))},I1e,Pqe=(t,e)=>{let n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n};I1e=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Rqe=(t,e)=>{let n=t;return e.forEach(r=>{n=n&&n.children?I1e(n.children,i=>i.domNode===r):void 0}),n},Mqe=(t,e,n)=>{let r=function(i){n("domEvent",i);let s=e(),o=Pqe(i.currentTarget,s.domNode);o.reverse();let a,l=Rqe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(i,s,o,a)=>r},Wne=t=>{let e,n,r=RS(t),i=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(h,f,g)=>{let y,_=()=>y;r.eventHandlerInterceptor=Mqe(e,_,i),y=h(f,g(),r),a.push(y),l.push(g)},u=()=>{if(n=void 0,s){s=!1,i("renderStart",void 0);for(let h=0;h<a.length;h++){let f=l[h]();i("rendered",void 0),a[h].update(f),i("patched",void 0)}i("renderDone",void 0),s=!0}};return e={renderNow:u,scheduleRender:()=>{n||o||(n=requestAnimationFrame(u))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(h,f)=>{c(mg.append,h,f)},insertBefore:(h,f)=>{c(mg.insertBefore,h,f)},merge:(h,f)=>{c(mg.merge,h,f)},replace:(h,f)=>{c(mg.replace,h,f)},detach:h=>{for(let f=0;f<l.length;f++)if(l[f]===h)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},Mm=class extends Kt{constructor(){super(...arguments),this.items=new Lt,this._watchUpdatingTracking=new p1,this._callbacks=new Map,this._projector=Wne(),this._hiddenProjector=Wne()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const r of n.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of n.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const n=this._hiddenSurface,r=this._hiddenProjector;let i;const s=()=>(i=e.render(),i);r.append(n,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i?.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);n.firstChild;)n.removeChild(n.firstChild);return o}overlaps(e,n){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(n);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,n){const r=!!n?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(i.save(),s.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};x([E({readOnly:!0})],Mm.prototype,"surface",void 0),x([E({readOnly:!0})],Mm.prototype,"items",void 0),x([E({readOnly:!0})],Mm.prototype,"needsRender",null),x([E({readOnly:!0})],Mm.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],Mm.prototype,"updating",null),Mm=x([he("esri.views.overlay.ViewOverlay")],Mm);const Hne=Mm,vF=[0,0];function Nqe(t){const e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return vF[0]=n.left+(e?.pageXOffset??0),vF[1]=n.top+(e?.pageYOffset??0),vF}function qne(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function Lqe(t){const e=document.createElement("div");return t.appendChild(e),e}const L_=16,QE=750,Oqe=512,Dqe=2,jqe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._freqInfo={freq:L_,time:QE},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([mn(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),mn(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())}),mn(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([mn(()=>this.ui,(i,s)=>this._handleUIChange(i,s),xa),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=KW(r);if(s||typeof r!="string"||kt.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(qne(this.root),this._set("root",null)),this.userContent&&(Dne(this.userContent,i),qne(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",Dne(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new Hne;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(mn(()=>c.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=N2({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ii(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&i?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,s){const o=this.position;return r-=o?o[0]:0,i-=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const o=this.position;return r+=o?o[0]:0,i+=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_updateAria(){const{surface:r,aria:i}=this;r&&(r.ariaLabelledByElements=i?.labelledByElements??null,r.ariaDescribedByElements=i?.describedByElements??null,r.ariaLabel=i?.label??null,r.ariaDescription=i?.description??null)}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(mn(()=>this.root,s=>{r.container=s?Lqe(s):null},xa),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=L_,r.time=QE;const i=N2({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=L_,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const u=this._position();c.freq=u||l?L_:Math.min(QE,c.freq*Dqe),!l&&c.freq>=Oqe&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=L_,r.time=QE,i.resume()});this.container!=null&&s.observe(this.container);const o=Zn(()=>s.disconnect());this.addHandles([wb(window,"resize",()=>{r.freq=L_,r.time=QE,i.resume()}),o,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return i===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&Nqe(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return x([E()],n.prototype,"aria",void 0),x([E()],n.prototype,"container",null),x([E({readOnly:!0})],n.prototype,"focused",null),x([E({readOnly:!0})],n.prototype,"height",void 0),x([E()],n.prototype,"messagesCommon",void 0),x([E({type:Hne})],n.prototype,"overlay",void 0),x([E({readOnly:!0})],n.prototype,"position",void 0),x([E({readOnly:!0})],n.prototype,"resizing",void 0),x([E({readOnly:!0})],n.prototype,"root",void 0),x([E({value:null,readOnly:!0})],n.prototype,"size",null),x([E({readOnly:!0})],n.prototype,"surface",void 0),x([E({readOnly:!0})],n.prototype,"suspended",void 0),x([E({nonNullable:!0})],n.prototype,"ui",null),x([E({readOnly:!0})],n.prototype,"userContent",void 0),x([E({readOnly:!0})],n.prototype,"width",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),n=x([he("esri.views.DOMContainer")],n),n},vR="popup",Kne="manual";function Pd(t){return t!=null&&"open"in t&&"declaredClass"in t}function Ap(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function Fqe(t,e,n){const[r,i,s]=e;if(n){const[o,a,l]=n;o&&Pd(a)&&(a.view=null,o.remove(a,vR),a!==i&&i&&a.destroy()),o&&l&&Ap(l)&&(l.view=null,o.remove(l,vR),l!==s&&s&&l.remove())}r&&Pd(i)&&(i.view=t,r.add(i,{key:vR,position:Kne,internal:!0})),r&&s&&Ap(s)&&(s.view=t,r.add(s,{key:vR,position:Kne,internal:!0}))}async function $qe(t,e){const{popup:n,popupElement:r}=t;Pd(n)?await _R(n,null,e):r&&Ap(r)?await _R(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:i,popupElement:s}=t;Pd(i)&&!t.destroyed&&t.ready&&t.popupEnabled?await _R(i,null,e):s&&Ap(s)&&await _R(null,s,e)})}function Vqe(t,e){const{popup:n,popupElement:r}=t;if(Pd(n))return n.open(e);r&&Ap(r)&&r.open(e)}function zqe(t,e){Pd(t)&&t.close(),e&&Ap(e)&&(e.visible=!1)}async function _R(t,e,n){if(Pd(t)){const r=await t.viewModel.handleViewClick(n);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&Ap(e)){const r=await e.handleViewClick(n);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const P1e=_e("mac")?"Meta":"Control",Gqe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Uqe=t=>Gqe.has(t);let Bqe=class{constructor(e,n=[]){this.eventType=e,this.keyModifiers=n}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=e.modifiers;for(const r of this.keyModifiers)if(!n.has(r))return!1;return!0}},Js=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const n=this._incoming[e];for(const r of n)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(n=>this._handleEvent(n)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,n,r){let i;typeof n=="function"?(r=n,i=[]):i=n||[];const s=typeof e=="string"?new Bqe(e,i):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const h=this._incoming[u.match.eventType];if(h){const f=h.indexOf(u);h.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new Wqe(s,r,{onPause:a,onRemove:a,onResume:u=>{const h=this._incoming[u.match.eventType];h&&!h.includes(u)&&(h.push(u),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const n=new Hqe(e,{onEmit:(r,i,s,o)=>{this._manager?.emit(r.eventType,i,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const n=this._incoming[e.type];if(n){for(const r of n)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},Wqe=class{constructor(e,n,r){this.match=e,this._callback=n,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Hqe=class{constructor(e,n){this.eventType=e,this._removed=!1,this._handler=n}emit(e,n,r){this._removed||this._handler.onEmit(this,e,n,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},qqe=class extends Js{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",n=>this._update(n.data))}_update(e){const n=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:i,native:{pointerId:s}}=e;n===this._value&&this._x===r&&this._y===i&&this._id===s||(this._value=n,this._x=r,this._y=i,this._id=s,this._onChange(s,n,r,i))}},Kqe=class{constructor(e,n){this._observable=new NC,this._value=e,this._equalityFunction=n}get value(){return on(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function H2(t,e=Ufe){return new Kqe(t,e)}let Yqe=class extends Js{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=H2(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Xqe=class{constructor(e,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const r in e){const i=e[r],s=new zpe(i,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=f$e(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const n=this._properties[e];for(const r of n.acquired)Fee(r)||n.pool.release(r);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(e){const n=this._owner._get(e),r=this._properties[e];let i=r.pool.acquire();for(r.acquired.push(i);i===n;)i=r.pool.acquire(),r.acquired.push(i);return Jpe(),i}_release(){for(const e in this._properties){const n=this._properties[e];let r=0;for(const i of n.acquired)Fee(i)?n.acquired[r++]=i:n.pool.release(i);n.acquired.length=r}}},Zqe=class{constructor(){this.id=0,this.type="mouse",this.location=qs()}},Wu=class extends Kt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=P1e,this._propertiesPool=new Xqe({latestPointerInfo:()=>new Zqe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const n of e)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,n,r=pp.INTERNAL){if(this._nameToGroup[e]||n.length===0)return;const i={name:e,handlers:n.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,h,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(i,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const n=this._nameToGroup[e];n?(n.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):kt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,n=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)Uqe(a)||n.add(a)}i.active=s}this._sourceEvents=e,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,n,r,i){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==n||s.location.x!==r||s.location.y!==i){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=n,o.location.x=r,o.location.y=i,this._latestPointerInfo=o}}_onEventReceived(e,n){if(e==="pointer-capture-lost"){const s=n;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,n);const r=this._testTimestamp??n.native?.timestamp,i=n.native?.cancelable;this._emitInputEventFromSource(e,n,r,i)}_updateKeyModifiers(e,n){if(!n)return;let r=!1;const i=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=n.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=n.native;s("Alt",!!o?.altKey),s("Control",!!o?.ctrlKey),s("Ctrl",!!o?.ctrlKey),s("Shift",!!o?.shiftKey),s("Meta",!!o?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new qqe((e,n,r,i)=>this._setLatestPointer(e,n,r,i)),this._multiTouchHandler=new Yqe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],pp.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,pp.INTERNAL)}_setPointerCapture(e,n,r,i){const s=e.name+"-"+n.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,n,r,i){this._emitInputEvent(0,e,n,r,i)}_emitInputEvent(e,n,r,i,s,o){const a=i??this._currentPropagation?.timestamp??performance.now(),l=s??!1,c={event:new Jqe(n,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new pA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:r}=e.events.pop(),i=n.data?.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&e.currentHandler.eventCallback?.(n),n.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const n=new pA;n.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)n.push(r.events.pop());r.events=n,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,n){if(e.handler.hasSideEffects!==n.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==n.groupPriority)return e.groupPriority>n.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of n.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const s=r.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(e){const n=[];for(const r of e){let i=0;for(;i<n.length&&this._compareHandlerPriority(r,n[i])>=0;)i++;n.splice(i,0,r)}return n}get test(){}};x([E({readOnly:!0})],Wu.prototype,"hasPendingInputs",null),x([E({constructOnly:!0})],Wu.prototype,"eventSource",void 0),x([E({constructOnly:!0})],Wu.prototype,"recognizers",void 0),x([E()],Wu.prototype,"multiTouchActive",null),x([E()],Wu.prototype,"_latestPointerInfo",void 0),x([E()],Wu.prototype,"latestPointerInfo",null),x([E()],Wu.prototype,"_paused",void 0),x([E({readOnly:!0})],Wu.prototype,"updating",null),Wu=x([he("esri.views.input.InputManager")],Wu);let Jqe=class{constructor(e,n,r,i,s){this.type=e,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const n=(r,i)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw r;return r};return(typeof e=="function"?e():e).then(r=>n(r,!1),r=>n(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const pp={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Qqe=t=>{const e=t;let n=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([mn(()=>[this.ui,this.popup,this.popupElement],([r,i,s],o)=>{const[a,l,c]=o??[];Fqe(this,[r,i,s],[a,l,c])},oa),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&$qe(this,r)},pp.WIDGET)]),TW(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>ge(()=>import("./Popup-V3SrBaeO.js").then(r=>r.P),__vite__mapDeps([230,231,20,232,233,234,235,206,202,179,166,203,33,204,205,144,89,207,124,165,208,84,132,236,57,237,238,133,134,26,27,200,201,137,85,80,129,78,79,54,55,56,239,114,112,113,28,66,69,115,240,241,242,243,244,22,31,245,246,247,248,29,249,250,251,252,253,254,156,255,256,257,258,259,30,32,260,261,262,263,264,35,265,266,199,267,268,34,269,270,271,272,273,274,275,276,277,278,44,279,136,280,281,282,283])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Pd(this.popup))return this.popup.open(r);if(this.popupElement&&Ap(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void kt.getLogger(this).error(new Qe("view:null-popup","Popup is null and can't be opened"));Vqe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),zqe(this.popup,this.popupElement)}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Pd(this.popup))return this._popupSetupTask=QL(async r=>{if(!this.popupEnabled||!Ap(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),gi(r),customElements.get("arcgis-popup")||kt.getLogger(this).error(new Qe("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:i}=await ge(()=>import("./Popup-V3SrBaeO.js").then(o=>o.P),__vite__mapDeps([230,231,20,232,233,234,235,206,202,179,166,203,33,204,205,144,89,207,124,165,208,84,132,236,57,237,238,133,134,26,27,200,201,137,85,80,129,78,79,54,55,56,239,114,112,113,28,66,69,115,240,241,242,243,244,22,31,245,246,247,248,29,249,250,251,252,253,254,156,255,256,257,258,259,30,32,260,261,262,263,264,35,265,266,199,267,268,34,269,270,271,272,273,274,275,276,277,278,44,279,136,280,281,282,283]));if(gi(r),!this.popup||Pd(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:o,close:a,...l}=s;this.popup=new i({...l})}else this.popup=new i(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const o=[],a=[];let l=!1;const c=zje(s,_e("popup-view-fetch-timeout")??tKe),u=g=>{const y=new eKe(g);return a.push(y),o.push(y.promise),y},h=g=>{const y=a.at(-1);return y&&y.layerView===g&&!l?y:u(g)};for(const g of i)"graphic"in g?(h(g.layerView).graphics.push(g.graphic),l=!1):(o.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,c)),l=!0);a.forEach(g=>g.resolve(c));const f=Vje(o).then(g=>g.filter(y=>!!y).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:o}=await this.popupHitTest(r);gi(i);const a=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return x([E()],n.prototype,"popup",void 0),x([E()],n.prototype,"popupElement",void 0),x([E()],n.prototype,"popupEnabled",void 0),n=x([he("esri.views.PopupView")],n),n};let eKe=class{constructor(e){this.layerView=e,this._resolver=Ec(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let s;return n.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?i.resolve(o):i.reject(s)}),i.promise}};const tKe=5e3;var MS;const PN=Dl()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),R1e=PN.jsonValues.slice();c9(R1e,"orthometric");const $T=Dl()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let al=MS=class extends qt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,n){return PN.write(t,e,n)}readHeightModel(t,e,n){return PN.read(t)||(n?.messages&&n.messages.push(nKe(t,{context:n})),null)}readHeightUnit(t,e,n){return $T.read(t)||(n?.messages&&n.messages.push(Yne(t,{context:n})),null)}readHeightUnitService(t,e,n){return lW(t)||$T.read(t)||(n?.messages&&n.messages.push(Yne(t,{context:n})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new MS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const n=$me(e);return new MS({heightModel:t.heightModel,heightUnit:n??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new MS;return e.read(t,{origin:"web-scene"}),e}};function Yne(t,e){return new zd("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function nKe(t,e){return new zd("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}x([E({type:PN.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:R1e,default:"ellipsoidal",write:{isRequired:!0}}}}})],al.prototype,"heightModel",void 0),x([er("web-scene","heightModel")],al.prototype,"writeHeightModel",null),x([cr(["web-scene","service"],"heightModel")],al.prototype,"readHeightModel",null),x([E({type:$T.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$T.jsonValues,write:{writer:$T.write,isRequired:!0}}}}})],al.prototype,"heightUnit",void 0),x([cr("web-scene","heightUnit")],al.prototype,"readHeightUnit",null),x([cr("service","heightUnit")],al.prototype,"readHeightUnitService",null),x([E({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],al.prototype,"vertCRS",void 0),x([cr("service","vertCRS",["vertCRS","ellipsoid","geoid"])],al.prototype,"readVertCRS",null),al=MS=x([he("esri.geometry.HeightModelInfo")],al);let _F;async function rKe(){return _F==null&&(_F=ge(()=>import("./WhereClauseCache-tZv3tUJ_.js"),__vite__mapDeps([76,26,27,77,78,79,80])).then(t=>new t.WhereClauseCache(500,500))),_F}async function iKe(t,e){const n=await rKe(),r=n.get(t,e);if(r==null)throw n.getError(t,e);return r}function y3t(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function v3t(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function _3t(t,e){return e.length===0?null:`${t} IN (${sKe(e)})`}function sKe(t){return t.map(e=>typeof e=="string"?oKe(e):e).join(",")}function oKe(t){return`'${t.replaceAll("'","''")}'`}function x3t(t){return typeof t=="number"}function w3t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function b3t(t){return typeof t=="boolean"}function WC(t){return typeof t=="string"||t instanceof String}function aKe(t){return t==null||WC(t)}function E3t(t){return Array.isArray(t)}function S3t(t){return t?.declaredClass==="esri.Graphic"}function T3t(t){return t instanceof Date}const lKe="HH:mm",cKe="HH:mm:ss",uKe="HH:mm:ss.SSS",hKe=[uKe,cKe,lKe,"TT"],dKe="yyyy-MM-dd";function Xne(t){if(!t||!WC(t))return null;const e=pn.fromFormat(t,dKe);return e.isValid?e:null}function Zne(t){return t&&WC(t)?Fje(hKe,e=>{const n=pn.fromFormat(t,e);return n.isValid?n:null})??null:null}function Jne(t){if(!t||!WC(t))return null;const e=pn.fromISO(t);return e.isValid?e:null}const M1e=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function fKe(t){return t!=null&&M1e.has(t.type)}function N1e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function L1e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function O1e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const pKe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);WB(M1e,pKe);function k3t(t,e){const n=t?.domain;if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=fKe(t);return N1e(t)||O1e(t)||L1e(t)?{...mKe(t,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function mKe(t,e,n){return N1e(t)?{min:Xne(n)?.toMillis(),max:Xne(e)?.toMillis(),rawMin:n,rawMax:e}:O1e(t)?{min:Zne(n)?.toMillis(),max:Zne(e)?.toMillis(),rawMin:n,rawMax:e}:L1e(t)?{min:Jne(n)?.toMillis(),max:Jne(e)?.toMillis(),rawMin:n,rawMax:e}:{max:null,min:null}}function gKe(t){if(!t)return;const e=t.match(yKe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const yKe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function A3t(t){return t.match(vKe)?.[1]?.replaceAll("\\'","'")??null}const vKe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let xF;function _Ke(){return xF||(xF=(async()=>{const[t,e,n]=await Promise.all([ge(()=>import("./arcadeUtils-CgF2_gaK.js"),__vite__mapDeps([284,285,286,79,287,78,80,288,241,86,289,68,66,28,69,85,290,291,77,136,292,242,243,293])),ge(()=>import("./batchExec-CX6Q5ux-.js"),__vite__mapDeps([294,148])),ge(()=>import("./aiServices-DX296DEP.js").then(r=>r.a),__vite__mapDeps([290,80,287,78,79,288,241,86,291,286]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:n,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),xF}const xKe=/^([0-9_])/,wKe=/[^a-z0-9_\u0080-\uffff]+/gi;function C3t(t){return t==null?null:t.trim().replaceAll(wKe,"_").replace(xKe,"F$1")||null}const bKe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],EKe=["field","normalizationField"];function I3t(t,e){if(t!=null&&e!=null){for(const n of Array.isArray(t)?t:[t])if(Qne(bKe,n,e),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)Qne(EKe,r,e)}}function Qne(t,e,n){if(t)for(const r of t){const i=GL(r,e),s=i&&typeof i!="function"&&n.get(i);s&&vb(r,s.name,e)}}function P3t(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=n?.name??null,t.endField=r?.name??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=n?.name??null,t.endTimeField=r?.name??null}}const wF=new Set;function QW(t,e){return t&&e?(wF.clear(),gA(wF,t,e),Array.from(wF).sort()):[]}function gA(t,e,n){if(n)if(e?.fields?.length)if(n.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of n)yA(t,e,r);else{if(n.includes("*"))return t.clear(),void t.add("*");for(const r of n)r!=null&&t.add(r)}}function yA(t,e,n){if(typeof n=="string")if(e){const r=e.get(n);r&&t.add(r.name)}else t.add(n)}function R3t(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(n=>n.name):e}function M3t(t,e,n=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=QW(t,e);return r.length/t.fields.length>=n?["*"]:r}async function ev(t,e,n,r){if(!r)return;const i=gKe(r);if(i)yA(t,e,i);else{const{arcadeUtils:s}=await _Ke(),o=s.extractFieldNames(r,n?.partitions??e?.fields?.map(a=>a.name));for(const a of o)yA(t,n?.index??e,a)}}async function eH(t,e,n){if(n&&n!=="1=1"){const r=await iKe(n,e);if(!r.isStandardized)throw new Qe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});gA(t,e,r.fieldNames)}}function N3t({displayField:t,fields:e}){return t||(e?.length?SKe(e):null)}function SKe(t){return bF(t,"name-or-title")||bF(t,"unique-identifier")||bF(t,"type-or-category")||TKe(t)}function TKe(t){for(const e of t){if(!e?.name)continue;const n=e.name.toLowerCase();if(n.includes("name")||n.includes("title"))return e.name}return null}function bF(t,e){for(const n of t)if(n?.valueType&&n.valueType===e)return n.name;return null}async function L3t(t,e){if(!e)return;const n=e.elevationInfo?.featureExpressionInfo;return n?n.collectRequiredFields(t,e.fieldsIndex):void 0}function kKe(t,e,n){n.onStatisticExpression?ev(t,e,null,n.onStatisticExpression.expression):t.add(n.onStatisticField)}async function O3t(t,e,n){if(!e||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(D1e(t,e,i)),n.fields&&r.push(...n.fields.map(async s=>kKe(t,e.fieldsIndex,s))),await Promise.all(r)}async function D3t(t,e){const{fieldsIndex:n,trackInfo:r}=e;if(!e||!r||!n)return;const i=[r.latestObservations.renderer?.collectRequiredFields(t,n),r.previousObservations.renderer?.collectRequiredFields(t,n),r.trackLines.renderer?.collectRequiredFields(t,n)];r.popupTemplate&&i.push(D1e(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const o of s)i.push($1e(t,n,o));await Promise.all(i)}async function D1e(t,e,n){const r=[];n?.expressionInfos&&r.push(...n.expressionInfos.map(s=>ev(t,e.fieldsIndex,null,s.expression)));const i=n?.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(ev(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function j3t(t,e,n){e&&(e.timeInfo&&n?.timeExtent&&gA(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&gA(t,e.fieldsIndex,[e.floorInfo.floorField]),n?.where!=null&&await eH(t,e.fieldsIndex,n.where))}async function F3t(t,e,n){e&&n&&await Promise.all(n.map(r=>AKe(t,e,r)))}async function AKe(t,e,n){e&&n&&(n.valueExpression?await ev(t,e.fieldsIndex,null,n.valueExpression):n.field&&yA(t,e.fieldsIndex,n.field))}function $3t(t){return t?QW(t.fieldsIndex,j1e(t)):[]}function CKe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?QW(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function V3t(t,e,n){if(!e||!n)return;const r=e.fieldsIndex;await Promise.all(n.filters.map(i=>eH(t,r,i.where)))}const IKe=new Set(["oid","global-id","guid"]),PKe=new Set(["oid","global-id"]),RKe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function MKe(t){const e=new Set;F1e(t).forEach(r=>e.add(r)),CKe(t).forEach(r=>e.add(r.toLowerCase()));const n=t&&"infoFor3D"in t?t.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function j1e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=e;return[n,r,i,s].filter(Boolean)}function F1e(t){return j1e(t).map(e=>e.toLowerCase())}function z3t(t,e){return t.editable&&!IKe.has(t.type)&&!F1e(e).includes(t.name?.toLowerCase()??"")}function G3t(t,e){const n=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&n===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&n===e.globalIdField.toLowerCase()||MKe(e).includes(n)||PKe.has(t.type)||RKe.some(r=>r.test(n)))}async function U3t(t,e){const{labelingInfo:n,fieldsIndex:r}=e;n?.length&&await Promise.all(n.map(i=>$1e(t,r,i)))}async function $1e(t,e,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await ev(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{yA(t,e,o.slice(1,-1))})}await eH(t,e,i)}function B3t(t){const e=t.defaultValue;return e!==void 0&&z1e(t,e)?e:t.nullable?null:void 0}function W3t(t){const e=typeof t=="string"?{type:t}:t;return GKe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function V1e(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function NKe(t){return t===null||V1e(t)}function LKe(t){return t===null||Number.isInteger(t)}function OKe(){return!0}function z1e(t,e){let n;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=t.nullable?LKe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=t.nullable?NKe:V1e;break;case"string":case"esriFieldTypeString":n=t.nullable?aKe:WC;break;default:n=OKe}return arguments.length===1?n:n(e)}const DKe=["integer","small-integer","big-integer","long"],jKe=["single","double"],FKe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],$Ke=["esriFieldTypeSingle","esriFieldTypeDouble"],G1e=new Set([...DKe,...FKe]),VKe=new Set([...jKe,...$Ke]),zKe=WB(G1e,VKe);function H3t(t){return t!=null&&G1e.has(t.type)}function U1e(t){return t!=null&&zKe.has(t.type)}function GKe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function UKe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function BKe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function WKe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function HKe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function q3t(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function K3t(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function Y3t(t,e){return qKe(t,e)===null}function X3t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function qKe(t,e){return t==null||t.nullable&&e===null?null:z1e(t,e)?U1e(t)&&!KKe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function KKe(t,e){const n=typeof t=="string"?B1e(t):t;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(e)&&e>=r&&e<=i:e>=r&&e<=i}function B1e(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return YKe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return XKe;case"esriFieldTypeBigInteger":case"big-integer":return ZKe;case"esriFieldTypeSingle":case"single":return JKe;case"esriFieldTypeDouble":case"double":return QKe}}const YKe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},XKe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},ZKe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},xR=(2-2**-23)*2**127,JKe={min:-xR,max:xR,isInteger:!1,rawMin:-xR,rawMax:xR},QKe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Z3t(t,e,n){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${n} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${n} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${n} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:i}=B1e(e.type);return`Value ${n} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${i}`}}}function J3t(t,e){return!eYe(t,e,null)}function eYe(t,e,n){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)&&(i=!0,n==null))break;return i}function Q3t(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function tYe(t){const e=t?.match(/{[^}]+}/g);return e?e.map(n=>n.slice(1,-1).split(":")[0].trim()):[]}let i3=class extends qt{constructor(e){super(e),this.type=null}};x([E({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],i3.prototype,"type",void 0),i3=x([he("esri.popup.content.Content")],i3);const Dp=i3,wR=new Xs({asc:"ascending",desc:"descending"});let NS=class extends _o(qt){constructor(e){super(e),this.field=null,this.order="ascending"}};x([E({type:String,json:{write:!0}})],NS.prototype,"field",void 0),x([E({type:wR.apiValues,json:{type:wR.jsonValues,read:wR.read,write:wR.write}})],NS.prototype,"order",void 0),NS=x([he("esri.popup.support.AttachmentsOrderByInfo")],NS);const nYe=NS;let Qh=class extends _o(Dp){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};x([E({type:[String],json:{write:!0}})],Qh.prototype,"attachmentKeywords",void 0),x([E({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],Qh.prototype,"attachmentTypes",void 0),x([E({type:String,json:{write:!0}})],Qh.prototype,"description",void 0),x([E({type:["auto","preview","list"],json:{write:!0}})],Qh.prototype,"displayType",void 0),x([E({type:[nYe],json:{write:!0}})],Qh.prototype,"orderByFields",void 0),x([E({type:String,json:{write:!0}})],Qh.prototype,"title",void 0),x([E({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qh.prototype,"type",void 0),Qh=x([he("esri.popup.content.AttachmentsContent")],Qh);const vA=Qh;var L7;let dy=L7=class extends Dp{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new L7({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?et(this.outFields):null})}};x([E()],dy.prototype,"creator",void 0),x([E()],dy.prototype,"destroyer",void 0),x([E()],dy.prototype,"outFields",void 0),x([E({type:["custom"],readOnly:!0})],dy.prototype,"type",void 0),dy=L7=x([he("esri.popup.content.CustomContent")],dy);const rYe=dy;var O7;let ax=O7=class extends qt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new O7({title:this.title,expression:this.expression})}};x([E({type:String,json:{write:!0}})],ax.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],ax.prototype,"expression",void 0),x([E({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ax.prototype,"returnType",void 0),ax=O7=x([he("esri.popup.ElementExpressionInfo")],ax);const iYe=ax;var D7;let LS=D7=class extends Dp{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new D7({expressionInfo:this.expressionInfo?.clone()})}};x([E({type:iYe,json:{write:!0}})],LS.prototype,"expressionInfo",void 0),x([E({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],LS.prototype,"type",void 0),LS=D7=x([he("esri.popup.content.ExpressionContent")],LS);const wO=LS;let s3=class extends _o(qt){constructor(e){super(e),this.type=null}};x([E({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],s3.prototype,"type",void 0),s3=x([he("esri.layers.support.FieldFormat")],s3);const tH=s3,W1e="auto";let If=class extends tH{constructor(e){super(e),this.dateStyle=null,this.hour12=W1e,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};x([E({type:["full","long","medium","short"],json:{write:!0}})],If.prototype,"dateStyle",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:W1e,write:!0}})],If.prototype,"hour12",void 0),x([E({type:["long","short"],json:{write:!0}})],If.prototype,"month",void 0),x([E({type:["full","long","medium","short"],json:{write:!0}})],If.prototype,"timeStyle",void 0),x([E({type:["date-time"]})],If.prototype,"type",void 0),x([E({type:["numeric"],json:{write:!0}})],If.prototype,"year",void 0),If=x([he("esri.layers.support.DateTimeFieldFormat")],If);const m1=If,ere={min:0,max:20},H1e=2,q1e=0,K1e="decimal",Y1e="auto";let Nm=class extends tH{constructor(e){super(e),this.maximumFractionDigits=H1e,this.minimumFractionDigits=q1e,this.style=K1e,this.type="number",this.useGrouping=Y1e}};x([E({type:jr,nonNullable:!0,range:ere,json:{default:H1e,write:!0}})],Nm.prototype,"maximumFractionDigits",void 0),x([E({type:jr,nonNullable:!0,range:ere,json:{default:q1e,write:!0}})],Nm.prototype,"minimumFractionDigits",void 0),x([E({type:["decimal"],nonNullable:!0,json:{default:K1e,write:!0}})],Nm.prototype,"style",void 0),x([E({type:["number"]})],Nm.prototype,"type",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:Y1e,write:!0}})],Nm.prototype,"useGrouping",void 0),Nm=x([he("esri.layers.support.NumberFieldFormat")],Nm);const RN=Nm;let lx=class extends _o(qt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};x([yn(oze)],lx.prototype,"dateFormat",void 0),x([E({type:Boolean,json:{write:!0}})],lx.prototype,"digitSeparator",void 0),x([E({type:jr,json:{write:!0}})],lx.prototype,"places",void 0),lx=x([he("esri.popup.support.FieldInfoFormat")],lx);const Nb=lx,sYe={base:tH,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":m1,number:RN}};function a4t(t,e){const{format:n}=t;return e&&bO(e)?n?X1e(n,e):o3(e,{hour12:"always",useGrouping:"always"}):null}function X1e(t,e){const{dateFormat:n}=t;if(!e)return n?nre(t):tre(t);if(!bO(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Z1e(t);case"single":case"double":return tre(t);case"date":case"timestamp-offset":return n?nre(t):o3(e,r);case"date-only":return n?oYe(t):o3(e);case"time-only":return n?aYe(t):o3(e,r)}}function bO(t){return U1e(t)||UKe(t)||BKe(t)||HKe(t)||WKe(t)}function Z1e(t){return new RN({useGrouping:t.digitSeparator?"always":"never"})}function tre(t){const e=Z1e(t),{places:n}=t;return e.minimumFractionDigits=n??0,e.maximumFractionDigits=n??2,e}function nre(t){return new m1({dateStyle:J1e(t),year:nve(t),month:eve(t),timeStyle:tve(t),hour12:Q1e(t)})}function oYe(t){return new m1({dateStyle:J1e(t),year:nve(t),month:eve(t)})}function aYe(t){return new m1({timeStyle:tve(t),hour12:Q1e(t)})}function J1e(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Q1e(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function eve(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function tve(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function nve(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function lYe(t,e){const n=t.type==="number",r=t.type==="date-time";if(!e)return n?rre(t):r?ire(t):null;if(bO(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return n?rve(t):null;case"single":case"double":return n?rre(t):null;case"date":case"timestamp-offset":return r?ire(t):null;case"date-only":return r?cYe(t):null;case"time-only":return r?uYe(t):null}}function rve(t){return new Nb({digitSeparator:t.useGrouping!=="never"})}function rre(t){const e=rve(t);return e.places=t.maximumFractionDigits,e}function ire(t){let e;const n=ive(t),r=sve(t),i=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=ove(t);return n&&r&&i?e=`${n}-${r}-${i}`:n&&r?e=`${n}-${r}`:n?e=n:s&&o?e=`${o}-${s}`:s&&(e=s),e?new Nb({dateFormat:e}):null}function cYe(t){let e;const n=ive(t),r=t.year==="numeric"?"year":null,i=ove(t);return n?e=n:r&&i?e=`${i}-${r}`:r&&(e=r),e?new Nb({dateFormat:e}):null}function uYe(t){let e;const n=sve(t),r=t.hour12==="never"?"24":null;return n&&r?e=`short-date-${n}-${r}`:n&&(e=`short-date-${n}`),e?new Nb({dateFormat:e}):null}function ive(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function sve(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function ove(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function o3(t,e){if(!bO(t))return;const n=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new RN({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:n});case"single":case"double":return new RN({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:n});case"date":case"timestamp-offset":return new m1({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new m1({dateStyle:"short"});case"time-only":return new m1({timeStyle:"short",hour12:r})}}let Yl=class extends _o(qt){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?lYe(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?X1e(e):null)}readFormat(e,n){if(!n.fieldFormat)return e?Nb.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};x([E({value:null,clonable:!1,types:sYe,json:{write:{overridePolicy(t,e,n){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!n?.writeFieldFormat}}}}})],Yl.prototype,"fieldFormat",null),x([E({type:String,json:{write:!0}})],Yl.prototype,"fieldName",void 0),x([E({value:null,clonable:!1,type:Nb,json:{write:!0}})],Yl.prototype,"format",null),x([cr("format")],Yl.prototype,"readFormat",null),x([E({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Yl.prototype,"isEditable",void 0),x([E({type:String,json:{write:!0}})],Yl.prototype,"label",void 0),x([E({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Yl.prototype,"statisticType",void 0),x([yn(new Xs({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Yl.prototype,"stringFieldOption",void 0),x([E({type:String,json:{write:!0}})],Yl.prototype,"tooltip",void 0),x([E({type:Boolean,json:{write:!0}})],Yl.prototype,"visible",void 0),Yl=x([he("esri.popup.FieldInfo")],Yl);const ave=Yl;var j7;let Lm=j7=class extends Dp{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new j7(et({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};x([E({type:Object,json:{write:!0}})],Lm.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Lm.prototype,"description",void 0),x([E({type:[ave],json:{write:!0}})],Lm.prototype,"fieldInfos",void 0),x([E({type:String,json:{write:!0}})],Lm.prototype,"title",void 0),x([E({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Lm.prototype,"type",void 0),Lm=j7=x([he("esri.popup.content.FieldsContent")],Lm);const _A=Lm;let fy=class extends qt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};x([E({type:String,json:{write:!0}})],fy.prototype,"altText",void 0),x([E({type:String,json:{write:!0}})],fy.prototype,"caption",void 0),x([E({type:String,json:{write:!0}})],fy.prototype,"title",void 0),x([E({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],fy.prototype,"type",void 0),fy=x([he("esri.popup.content.mixins.MediaInfo")],fy);const nH=fy;var F7;let py=F7=class extends Kt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new F7({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};x([E()],py.prototype,"color",void 0),x([E()],py.prototype,"fieldName",void 0),x([E()],py.prototype,"tooltip",void 0),x([E()],py.prototype,"value",void 0),py=F7=x([he("esri.popup.content.support.ChartMediaInfoValueSeries")],py);const hYe=py;var $7;let Om=$7=class extends qt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new $7({colors:et(this.colors),fields:et(this.fields),normalizeField:this.normalizeField,series:et(this.series),tooltipField:this.tooltipField})}};x([E({type:[Jn],json:{type:[[jr]],write:!0}})],Om.prototype,"colors",void 0),x([E({type:[String],json:{write:{isRequired:!0}}})],Om.prototype,"fields",void 0),x([E({type:String,json:{write:!0}})],Om.prototype,"normalizeField",void 0),x([E({type:[hYe],json:{read:!1}})],Om.prototype,"series",void 0),x([E({type:String,json:{write:!0}})],Om.prototype,"tooltipField",void 0),Om=$7=x([he("esri.popup.content.support.ChartMediaInfoValue")],Om);const dYe=Om;let OS=class extends nH{constructor(e){super(e),this.type=null,this.value=void 0}};x([E({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],OS.prototype,"type",void 0),x([E({type:dYe,json:{write:{isRequired:!0}}})],OS.prototype,"value",void 0),OS=x([he("esri.popup.content.mixins.ChartMediaInfo")],OS);const EO=OS,SO=Dl()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var V7;let a3=V7=class extends EO{constructor(t){super(t),this.type="bar-chart"}clone(){return new V7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:SO.write,isRequired:!0}}})],a3.prototype,"type",void 0),a3=V7=x([he("esri.popup.content.BarChartMediaInfo")],a3);const lve=a3;var z7;let l3=z7=class extends EO{constructor(t){super(t),this.type="column-chart"}clone(){return new z7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:SO.write,isRequired:!0}}})],l3.prototype,"type",void 0),l3=z7=x([he("esri.popup.content.ColumnChartMediaInfo")],l3);const cve=l3;var G7;let DS=G7=class extends qt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new G7({linkURL:this.linkURL,sourceURL:this.sourceURL})}};x([E({type:String,json:{write:!0}})],DS.prototype,"linkURL",void 0),x([E({type:String,json:{write:{isRequired:!0}}})],DS.prototype,"sourceURL",void 0),DS=G7=x([he("esri.popup.content.support.ImageMediaInfoValue")],DS);const fYe=DS;var U7;let cx=U7=class extends nH{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new U7({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};x([E({type:Number,json:{write:!0}})],cx.prototype,"refreshInterval",void 0),x([E({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],cx.prototype,"type",void 0),x([E({type:fYe,json:{write:{isRequired:!0}}})],cx.prototype,"value",void 0),cx=U7=x([he("esri.popup.content.ImageMediaInfo")],cx);const uve=cx;var B7;let c3=B7=class extends EO{constructor(t){super(t),this.type="line-chart"}clone(){return new B7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:SO.write,isRequired:!0}}})],c3.prototype,"type",void 0),c3=B7=x([he("esri.popup.content.LineChartMediaInfo")],c3);const hve=c3;var W7;let u3=W7=class extends EO{constructor(t){super(t),this.type="pie-chart"}clone(){return new W7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:SO.write,isRequired:!0}}})],u3.prototype,"type",void 0),u3=W7=x([he("esri.popup.content.PieChartMediaInfo")],u3);const dve=u3,H7={base:nH,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":lve,"column-chart":cve,"line-chart":hve,"pie-chart":dve,image:uve}};var q7;let Hu=q7=class extends Dp{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?uve.fromJSON(e):e.type==="barchart"?lve.fromJSON(e):e.type==="columnchart"?cve.fromJSON(e):e.type==="linechart"?hve.fromJSON(e):e.type==="piechart"?dve.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(n=>n.toJSON())}clone(){return new q7(et({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};x([E()],Hu.prototype,"activeMediaInfoIndex",void 0),x([E({type:Object,json:{write:!0}})],Hu.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Hu.prototype,"description",void 0),x([E({types:[H7]})],Hu.prototype,"mediaInfos",void 0),x([cr("mediaInfos")],Hu.prototype,"readMediaInfos",null),x([er("mediaInfos")],Hu.prototype,"writeMediaInfos",null),x([E({type:String,json:{write:!0}})],Hu.prototype,"title",void 0),x([E({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Hu.prototype,"type",void 0),Hu=q7=x([he("esri.popup.content.MediaContent")],Hu);const xA=Hu;var K7;let jS=K7=class extends qt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new K7({field:this.field,order:this.order})}};x([E({type:String,json:{write:!0}})],jS.prototype,"field",void 0),x([E({type:["asc","desc"],json:{write:!0}})],jS.prototype,"order",void 0),jS=K7=x([he("esri.popup.support.RelatedRecordsInfoFieldOrder")],jS);const fve=jS;let ed=class extends _o(Dp){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};x([E({type:String,json:{write:!0}})],ed.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],ed.prototype,"displayCount",void 0),x([E({type:["list"],json:{write:{isRequired:!0}}})],ed.prototype,"displayType",void 0),x([E({type:[fve],json:{write:!0}})],ed.prototype,"orderByFields",void 0),x([E({type:Number,json:{type:jr,write:{isRequired:!0}}})],ed.prototype,"relationshipId",void 0),x([E({type:String,json:{write:!0}})],ed.prototype,"title",void 0),x([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ed.prototype,"type",void 0),ed=x([he("esri.popup.content.RelationshipContent")],ed);const wA=ed;var Y7;let FS=Y7=class extends Dp{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new Y7({text:this.text})}};x([E({type:String,json:{write:!0}})],FS.prototype,"text",void 0),x([E({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],FS.prototype,"type",void 0),FS=Y7=x([he("esri.popup.content.TextContent")],FS);const bA=FS;let Pf=class extends _o(qt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};x([E({type:String,json:{write:!0}})],Pf.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],Pf.prototype,"description",void 0),x([E({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Pf.prototype,"type",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Pf.prototype,"associatedNetworkSourceId",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Pf.prototype,"associatedAssetGroup",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Pf.prototype,"associatedAssetType",void 0),Pf=x([he("esri.popup.support.UtilityNetworkAssociationType")],Pf);const pYe=Pf;let Dm=class extends _o(Dp){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};x([E({type:String,json:{write:!0}})],Dm.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Dm.prototype,"displayCount",void 0),x([E({type:String,json:{write:!0}})],Dm.prototype,"title",void 0),x([E({type:[pYe],json:{write:!0}})],Dm.prototype,"associationTypes",void 0),x([yn({utilityNetworkAssociations:"utility-network-associations"})],Dm.prototype,"type",void 0),Dm=x([he("esri.popup.content.UtilityNetworkAssociationsContent")],Dm);const rH=Dm,mYe={base:null,key:"type",typeMap:{attachment:vA,media:xA,text:bA,expression:wO,field:_A,relationship:wA,utilityNetworkAssociations:rH}},gYe={base:null,key:"type",typeMap:{attachment:vA,media:xA,text:bA,expression:wO,field:_A,relationship:wA}};var X7;let my=X7=class extends qt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new X7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};x([E({type:String,json:{write:!0}})],my.prototype,"name",void 0),x([E({type:String,json:{write:!0}})],my.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],my.prototype,"expression",void 0),x([E({type:["string","number"],json:{write:!0}})],my.prototype,"returnType",void 0),my=X7=x([he("esri.popup.ExpressionInfo")],my);const yYe=my;var Z7;let $S=Z7=class extends qt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Z7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};x([E({type:Boolean,json:{write:!0}})],$S.prototype,"returnTopmostRaster",void 0),x([E({type:Boolean,json:{write:!0}})],$S.prototype,"showNoDataRecords",void 0),$S=Z7=x([he("esri.popup.LayerOptions")],$S);const vYe=$S;var J7;let VS=J7=class extends qt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new J7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?et(this.orderByFields):null})}};x([E({type:Boolean,json:{write:!0}})],VS.prototype,"showRelatedRecords",void 0),x([E({type:[fve],json:{write:!0}})],VS.prototype,"orderByFields",void 0),VS=J7=x([he("esri.popup.RelatedRecordsInfo")],VS);const sre=VS;var Q7;let Wc=Q7=class extends kW(Kt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Q7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};x([E()],Wc.prototype,"active",void 0),x([E()],Wc.prototype,"className",void 0),x([E()],Wc.prototype,"disabled",void 0),x([E()],Wc.prototype,"icon",void 0),x([E()],Wc.prototype,"id",void 0),x([E()],Wc.prototype,"indicator",void 0),x([E()],Wc.prototype,"title",void 0),x([E()],Wc.prototype,"type",void 0),x([E()],Wc.prototype,"visible",void 0),Wc=Q7=x([he("esri.support.actions.ActionBase")],Wc);const iH=Wc;var eV;let h3=eV=class extends iH{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new eV({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};x([E()],h3.prototype,"image",void 0),h3=eV=x([he("esri.support.actions.ActionButton")],h3);const _Ye=h3;var tV;let zS=tV=class extends iH{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new tV({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};x([E()],zS.prototype,"image",void 0),x([E()],zS.prototype,"value",void 0),zS=tV=x([he("esri.support.actions.ActionToggle")],zS);const xYe=zS,eS="relationships/",ore="expression/",wYe=Lt.ofType({key:"type",defaultKeyValue:"button",base:iH,typeMap:{button:_Ye,toggle:xYe}}),bYe={base:Dp,key:"type",typeMap:{media:xA,custom:rYe,text:bA,attachments:vA,fields:_A,expression:wO,relationship:wA,utilityNetworkAssociations:rH}},pve=new Set(["attachments","fields","media","text","expression","relationship"]),EYe=new Set([...pve,"utility-network-associations"]);let bs=class extends _o(qt){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(n=>Yg(bYe,n)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||_a(e)?e:(kt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeWebSceneContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeWebMapContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeFieldInfos(e,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:a,...l}=i||{};if(e){const c=o?o.filter(h=>h.type==="fields"):[],u=c.length&&c.every(h=>h.fieldInfos?.length);n.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(l);return u&&(f.visible=!1),f})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,n,l)}writeLayerOptions(e,n,r,i){n[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,n){n.title=e||""}async collectRequiredFields(e,n,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,n,r,[...i,...this._getContentExpressionInfos(this.content,i)]),gA(e,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,n){const r=new Set;return await this.collectRequiredFields(r,e,n),[...r].sort()}_writePopupTemplateContent(e,n,r){typeof e!="string"?Array.isArray(e)&&(n.popupElements=e.filter(i=>r?.origin==="web-scene"?pve.has(i.type):EYe.has(i.type)).map(i=>i?.toJSON(r)),n.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(n):i.type==="media"?this._writeMediaContent(i,n):i.type==="text"?this._writeTextContent(i,n):i.type==="relationship"&&this._writeRelationshipContent(i,n)})):n.description=e}_writeFieldsContent(e,n,r){const i=e.fieldInfos;if(!Array.isArray(i)||!i.length)return;const s=n.fieldInfos;if(Array.isArray(s))for(const o of i){const a=s.find(l=>l.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());a?a.visible=!0:s.push(o.toJSON(r))}else n.fieldInfos=i.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,n){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],i=[...n.relatedRecordsInfo?.orderByFields||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...i?.length&&{orderByFields:i}}}_writeTextContent(e,n){!n.description&&e.text&&(n.description=e.text)}_writeMediaContent(e,n){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=et(e.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(e,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),xA.fromJSON(s)):s.type==="text"?(s.text||!e||i.description||(s.text=e,i.description=!0),bA.fromJSON(s)):s.type==="attachments"?vA.fromJSON(s):s.type==="fields"?_A.fromJSON(s):s.type==="expression"?wO.fromJSON(s):s.type==="relationship"?wA.fromJSON(s):s.type==="utilityNetworkAssociations"?rH.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:n,order:r}=e;if(!n?.startsWith(eS))return null;const i=n.replace(eS,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return!Number.isNaN(s)&&o?wA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,n){const{order:r,field:i}=e;return{field:`${eS}${n}/${i}`,order:r}}_readPopupInfo({description:e,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];e?s.push(new bA({text:e})):s.push(new _A),Array.isArray(n)&&n.length&&s.push(xA.fromJSON({mediaInfos:n})),r&&s.push(vA.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&a?.length&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const n=e?.type;if(n==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(n==="custom")return e.outFields||[];if(n==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(n==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(e.text):n==="relationship"||n==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:n,title:r,value:i}=e,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,n){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,n,r,i){i&&await Promise.all(i.map(s=>ev(e,n,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:n,visible:r})=>!(r!==void 0&&!r||!n||n.startsWith(eS)||n.startsWith(ore))).map(n=>n.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:n,title:r,type:i}=e,s=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return tYe(e).filter(n=>!(n.startsWith(eS)||n.startsWith(ore)))}};x([E({type:wYe})],bs.prototype,"actions",void 0),x([E()],bs.prototype,"content",void 0),x([Ks("content")],bs.prototype,"castContent",null),x([cr("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],bs.prototype,"readContent",null),x([er("web-scene","content",{popupElements:{type:Lt.ofType(gYe)},showAttachments:{type:Boolean},mediaInfos:{type:Lt.ofType(H7)},description:{type:String},relatedRecordsInfo:{type:sre}})],bs.prototype,"writeWebSceneContent",null),x([er("content",{popupElements:{type:Lt.ofType(mYe)},showAttachments:{type:Boolean},mediaInfos:{type:Lt.ofType(H7)},description:{type:String},relatedRecordsInfo:{type:sre}})],bs.prototype,"writeWebMapContent",null),x([E({type:[yYe],json:{write:!0}})],bs.prototype,"expressionInfos",void 0),x([E({type:[ave]})],bs.prototype,"fieldInfos",void 0),x([er("fieldInfos")],bs.prototype,"writeFieldInfos",null),x([E({type:vYe})],bs.prototype,"layerOptions",void 0),x([er("layerOptions")],bs.prototype,"writeLayerOptions",null),x([E({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bs.prototype,"lastEditInfoEnabled",void 0),x([E()],bs.prototype,"outFields",void 0),x([E()],bs.prototype,"overwriteActions",void 0),x([E()],bs.prototype,"returnGeometry",void 0),x([E({json:{type:String}})],bs.prototype,"title",void 0),x([er("title")],bs.prototype,"writeTitle",null),bs=x([he("esri.PopupTemplate")],bs);const SYe=bs,mve=Symbol("idFieldsProviderSymbol");function TYe(t){return!!t&&mve in t}function are(t){return TYe(t)?t[mve]:void 0}const gve=Symbol("popupProvider");function m4t(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function kYe(t){return!!t&&gve in t}function AYe(t){return kYe(t)?t[gve]:null}function g4t(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const n=[];for(const r of e.fieldNames)n.push(t.attributes[r]??null);return JSON.stringify(n)}}}function lre(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const n=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(n)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const cre=new Xs({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let CYe=0,ms=class extends qt{constructor(e){super(e),this.id="sym"+CYe++,this.type=null,this.color=new Jn([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};x([E({type:cre.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:cre.write,isRequired:!0}}})],ms.prototype,"type",void 0),x([E({type:Jn,json:{write:{allowNull:!0}}})],ms.prototype,"color",void 0),x([cr("color")],ms.prototype,"readColor",null),ms=x([he("esri.symbols.Symbol")],ms);var nV;let pl=nV=class extends ms{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(i=>{const s=i.valueExpressionInfo;return s?ev(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new nV({data:et(this.data)})}hash(){return qfe(JSON.stringify(this.data)).toString()}};x([E({json:{write:!1}})],pl.prototype,"color",void 0),x([E({json:{write:!0}})],pl.prototype,"data",void 0),x([cr("data",["symbol"])],pl.prototype,"readData",null),x([er("data",{})],pl.prototype,"writeData",null),x([yn({CIMSymbolReference:"cim"},{readOnly:!0})],pl.prototype,"type",void 0),pl=nV=x([he("esri.symbols.CIMSymbol")],pl);let ja=class extends qt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,n,r){e||(n[r]=e)}};x([E({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],ja.prototype,"enabled",void 0),x([er("enabled")],ja.prototype,"writeEnabled",null),x([E({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],ja.prototype,"type",void 0),ja=x([he("esri.symbols.Symbol3DLayer")],ja);function IYe(t,e){const n=e.transparency!=null?P0e(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Jn([r[0]||0,r[1]||0,r[2]||0,n]):null}function PYe(t,e){e.color=t.toJSON().slice(0,3);const n=I0e(t.a);n!==0&&(e.transparency=n)}function v0(t){return{type:Jn,nonNullable:t?.nonNullable,json:{type:[jr],default:null,read:{source:["color","transparency"],reader:IYe},write:{target:{color:{type:[jr],isRequired:t?.colorRequiredOnWrite},transparency:{type:jr}},writer:PYe}}}}const Bd={type:Number,cast:Ti,json:{write:!0}};function _4t(t){return t==="emissive"?0:1}let gy=class extends qt{constructor(e){super(e),this.color=new Jn([0,0,0,1]),this.extensionLength=0,this.size=Q1(1)}clone(){}cloneProperties(){return{color:et(this.color),size:this.size,extensionLength:this.extensionLength}}};x([E({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],gy.prototype,"type",void 0),x([E(v0({colorRequiredOnWrite:!0}))],gy.prototype,"color",void 0),x([E({...Bd,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],gy.prototype,"extensionLength",void 0),x([E(Bd)],gy.prototype,"size",void 0),gy=x([he("esri.symbols.edges.Edges3D")],gy);const sH=gy;var rV;let d3=rV=class extends sH{constructor(t){super(t),this.type="sketch"}clone(){return new rV(this.cloneProperties())}};x([yn({sketch:"sketch"},{readOnly:!0})],d3.prototype,"type",void 0),d3=rV=x([he("esri.symbols.edges.SketchEdges3D")],d3);const RYe=d3;var iV;let f3=iV=class extends sH{constructor(t){super(t),this.type="solid"}clone(){return new iV(this.cloneProperties())}};x([yn({solid:"solid"},{readOnly:!0})],f3.prototype,"type",void 0),f3=iV=x([he("esri.symbols.edges.SolidEdges3D")],f3);const MYe=f3,yve={types:{key:"type",base:sH,typeMap:{solid:MYe,sketch:RYe}},json:{write:!0}};var sV;let Lx=sV=class extends qt{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new sV(t)}};x([E({json:{write:!1}})],Lx.prototype,"strength",void 0),x([E({json:{write:!1}})],Lx.prototype,"source",void 0),Lx=sV=x([he("esri.symbols.support.Symbol3DEmissive")],Lx);var oV;let pc=oV=class extends qt{constructor(t){super(t),this.color=null,this.emissive=new Lx({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new oV(t)}};x([E(v0())],pc.prototype,"color",void 0),x([E({type:Lx,json:{write:!1}})],pc.prototype,"emissive",void 0),pc=oV=x([he("esri.symbols.support.Symbol3DMaterial")],pc);var aV,Vw;let Vf=(Vw=class extends ja{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new aV({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},aV=Vw,Vw);x([yn({Extrude:"extrude"},{readOnly:!0})],Vf.prototype,"type",void 0),x([E({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Vf.prototype,"size",void 0),x([E({type:pc,json:{write:!0}})],Vf.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vf.prototype,"castShadows",void 0),x([E(yve)],Vf.prototype,"edges",void 0),Vf=aV=x([he("esri.symbols.ExtrudeSymbol3DLayer")],Vf);let VT=class extends qt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],VT.prototype,"type",void 0),VT=x([he("esri.symbols.patterns.LinePattern3D")],VT);const NYe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var lV;const LYe=Dl()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Yy=lV=class extends VT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new lV(t)}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Yy.prototype,"type",void 0),x([yn(LYe),E({type:NYe,json:{write:{isRequired:!0}}})],Yy.prototype,"style",void 0),Yy=lV=x([he("esri.symbols.patterns.LineStylePattern3D")],Yy);let zT=class extends qt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],zT.prototype,"type",void 0),zT=x([he("esri.symbols.patterns.Pattern3D")],zT);const OYe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var cV;let Ox=cV=class extends zT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new cV({style:this.style})}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Ox.prototype,"type",void 0),x([E({type:OYe,json:{read:!0,write:{isRequired:!0}}})],Ox.prototype,"style",void 0),Ox=cV=x([he("esri.symbols.patterns.StylePattern3D")],Ox);const DYe={types:{key:"type",base:zT,typeMap:{style:Ox}},json:{write:!0}},vve={types:{key:"type",base:VT,typeMap:{style:Yy}},json:{write:!0}},GT=new Jn("white"),jYe=new Jn([255,255,255,0]);function FYe(t){return t.r===0&&t.g===0&&t.b===0}var uV;let UT=uV=class extends pc{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new uV(t)}};x([yn({multiply:"multiply",replace:"replace",tint:"tint"})],UT.prototype,"colorMixMode",void 0),UT=uV=x([he("esri.symbols.support.Symbol3DFillMaterial")],UT);function oH(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function $Ye(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function VYe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){return[t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_]}const zYe=oH();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:zYe,clone:$Ye,create:oH,fromValues:VYe},Symbol.toStringTag,{value:"Module"}));function GYe(t){return t<=$fe?new Array(t).fill(0):new Float64Array(t)}function E4t(t){return(B6e(t)?t.byteLength/8:t.length)<=$fe?Array.from(t):new Float64Array(t)}function S4t(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}function T4t(t){return[...t]}function k4t(t){const e=oH();for(let n=0;n<16;++n)e[n]=t[n];return e}function HC(t=HYe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function aH(t,e,n,r,i,s,o=HC()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function A4t(t,e=HC()){return UYe(t,0,t.length/3,e)}function UYe(t,e,n,r=HC()){return _ve(r,hV),BYe(r,t,e,n),r}function C4t(t,e=GYe(24)){const[n,r,i,s,o,a]=t;return e[0]=n,e[1]=r,e[2]=i,e[3]=n,e[4]=r,e[5]=a,e[6]=n,e[7]=o,e[8]=i,e[9]=n,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=i,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=i,e[21]=s,e[22]=o,e[23]=a,e}function I4t(t,e){const n=isFinite(t[2])||isFinite(t[5]);return new Vn(n?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function P4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function R4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function M4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function BYe(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<r;u++)i=Math.min(i,e[n+3*u]),s=Math.min(s,e[n+3*u+1]),o=Math.min(o,e[n+3*u+2]),a=Math.max(a,e[n+3*u]),l=Math.max(l,e[n+3*u+1]),c=Math.max(c,e[n+3*u+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function N4t(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(n)for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function L4t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function qC(t){return t[0]>=t[3]?0:t[3]-t[0]}function KC(t){return t[1]>=t[4]?0:t[4]-t[1]}function YC(t){return t[2]>=t[5]?0:t[5]-t[2]}function O4t(t){const e=qC(t),n=YC(t),r=KC(t);return Math.sqrt(e*e+n*n+r*r)}function D4t(t,e=[0,0,0]){return e[0]=t[0]+qC(t)/2,e[1]=t[1]+KC(t)/2,e[2]=t[2]+YC(t)/2,e}function j4t(t,e=[0,0,0]){return e[0]=qC(t),e[1]=KC(t),e[2]=YC(t),e}function F4t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function WYe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function $4t(t,e){return e==null||WYe(t,e)}function V4t(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function z4t(t,e,n=t){const r=t[0]+qC(t)/2,i=t[1]+KC(t)/2,s=t[2]+YC(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function G4t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function U4t(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function B4t(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function _ve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function W4t(t){return t?_ve(t,hV):HC(hV)}function H4t(t,e=El()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function q4t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function K4t(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=i,t[5]=Number.POSITIVE_INFINITY,t}function ure(t){return t.length===6}function Y4t(t){return qC(t)===0&&KC(t)===0&&YC(t)===0}function X4t(t,e,n){if(t==null||e==null)return t===e;if(!ure(t)||!ure(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const hV=[1/0,1/0,1/0,-1/0,-1/0,-1/0],HYe=[0,0,0,0,0,0];HC();function Z4t(t,{isPrimitive:e,width:n,depth:r,height:i}){const s=e?10:1;if(n==null&&i==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=Mb(n,r,i);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const qYe=aH(-.5,-.5,-.5,.5,.5,.5),KYe=aH(-.5,-.5,0,.5,.5,1),YYe=aH(-.5,-.5,0,.5,.5,.5);function J4t(t){switch(t){case"sphere":case"cube":case"diamond":return qYe;case"cylinder":case"cone":case"inverted-cone":return KYe;case"tetrahedron":return YYe;default:return}}const lH=["butt","square","round"],XYe=[...lH,"none"],xve=["miter","bevel","round"];var dV;let yy=dV=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Q1(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new dV(t)}};x([E(v0({colorRequiredOnWrite:!0}))],yy.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],yy.prototype,"size",void 0),x([E(vve)],yy.prototype,"pattern",void 0),x([E({type:lH,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],yy.prototype,"patternCap",void 0),yy=dV=x([he("esri.symbols.support.Symbol3DOutline")],yy);var p3,zw;let tc=(zw=class extends ja{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new p3(e)}static fromSimpleFillSymbol(e){const n=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Yy({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??GT).clone(),pattern:n};return n&&e.outline?.cap&&(r.patternCap=e.outline.cap),new p3({material:new UT({color:(e.color??jYe).clone()}),pattern:e.style&&e.style!=="solid"?new Ox({style:e.style}):null,outline:r})}},p3=zw,zw);x([yn({Fill:"fill"},{readOnly:!0})],tc.prototype,"type",void 0),x([E({type:UT,json:{write:!0}})],tc.prototype,"material",void 0),x([E(DYe)],tc.prototype,"pattern",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],tc.prototype,"castShadows",void 0),x([E({type:yy,json:{write:!0}})],tc.prototype,"outline",void 0),x([E(yve)],tc.prototype,"edges",void 0),tc=p3=x([he("esri.symbols.FillSymbol3DLayer")],tc);var fV;const ZYe=Dl()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let vy=fV=class extends qt{constructor(t){super(t)}readHref(t,e,n){return t?bb(t,n):e.dataURI}writeHref(t,e,n,r){t&&(_v(t)?e.dataURI=t:(e.href=P2(t,r),kl(e.href)&&(e.href=Rg(e.href))))}clone(){return new fV({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};x([E({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],vy.prototype,"href",void 0),x([cr("href")],vy.prototype,"readHref",null),x([er("href",{href:{type:String},dataURI:{type:String}})],vy.prototype,"writeHref",null),x([yn(ZYe)],vy.prototype,"primitive",void 0),vy=fV=x([he("esri.symbols.support.IconSymbol3DLayerResource")],vy);const Q4t="circle";let m3=class extends _o(qt){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};x([E({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],m3.prototype,"mode",void 0),m3=x([he("esri.symbols.support.OccludedVisibility")],m3);const wve=m3;var pV;let Dx=pV=class extends Kt{constructor(t){super(t),this.x=0,this.y=0}clone(){return new pV({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};x([E({type:Number})],Dx.prototype,"x",void 0),x([E({type:Number})],Dx.prototype,"y",void 0),Dx=pV=x([he("esri.symbols.support.Symbol3DAnchorPosition2D")],Dx);var mV;let GS=mV=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Q1(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new mV(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};x([E(v0({colorRequiredOnWrite:!0}))],GS.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],GS.prototype,"size",void 0),GS=mV=x([he("esri.symbols.support.Symbol3DIconOutline")],GS);var ux,Gw;let oo=(Gw=class extends ja{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new ux({anchor:this.anchor,anchorPosition:et(this.anchorPosition),enabled:this.enabled,material:et(this.material),outline:et(this.outline),resource:et(this.resource),angle:this.angle,size:this.size,occludedVisibility:et(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const n=e.color||GT,r=hre(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||GT).clone()}:null;return new ux({size:e.size,angle:e.angle,resource:{primitive:QYe(()=>kt.getLogger(this.prototype),e.style)},material:{color:n},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const n=!e.color||FYe(e.color)?GT:e.color,r=hre(e);return new ux({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:n.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ux({resource:{href:ipe({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},ux=Gw,Gw);function hre(t){const e="width"in t?t.width:t.size,n="height"in t?t.height:t.size,r=dre(t.xoffset),i=dre(t.yoffset);return(r||i)&&e&&n?{x:-r/e,y:i/n}:null}function dre(t){return isFinite(t)?t:0}x([E({type:pc,json:{write:!0}})],oo.prototype,"material",void 0),x([E({type:vy,json:{write:!0}})],oo.prototype,"resource",void 0),x([yn({Icon:"icon"},{readOnly:!0})],oo.prototype,"type",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],oo.prototype,"size",void 0),x([yn({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],oo.prototype,"anchor",void 0),x([E({type:Dx,json:{type:[Number],read:{reader:t=>new Dx({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],oo.prototype,"anchorPosition",void 0),x([E({type:GS,json:{write:!0}})],oo.prototype,"outline",void 0),x([E({type:Number,json:{write:!0,default:0}})],oo.prototype,"angle",void 0),x([E({type:wve})],oo.prototype,"occludedVisibility",void 0),oo=ux=x([he("esri.symbols.IconSymbol3DLayer")],oo);const JYe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function QYe(t,e){return JYe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const eXe=["begin","end","begin-end"],bve=["arrow","circle","square","diamond","cross","x"];let Yf=class extends _o(qt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Yf.prototype,"type",void 0),x([E({type:eXe,json:{default:"begin-end",write:!0}})],Yf.prototype,"placement",void 0),x([E({type:bve,json:{default:"arrow",write:!0}})],Yf.prototype,"style",void 0),x([E({type:Jn,json:{type:[jr],default:null,write:!0}})],Yf.prototype,"color",void 0),Yf=x([he("esri.symbols.LineStyleMarker3D")],Yf);var g3,Uw;let ul=(Uw=class extends ja{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Q1(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new g3(e)}static fromSimpleLineSymbol(e){const n={enabled:!0,size:e.width??Q1(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Yy({style:e.style}):null,material:new pc({color:(e.color||GT).clone()}),marker:e.marker?new Yf({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new g3(n)}},g3=Uw,Uw);x([E({type:pc,json:{write:!0}})],ul.prototype,"material",void 0),x([yn({Line:"line"},{readOnly:!0})],ul.prototype,"type",void 0),x([E({type:xve,json:{write:!0,default:"miter"}})],ul.prototype,"join",void 0),x([E({type:lH,json:{write:!0,default:"butt"}})],ul.prototype,"cap",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],ul.prototype,"size",void 0),x([E(vve)],ul.prototype,"pattern",void 0),x([E({types:{key:"type",base:Yf,typeMap:{style:Yf}},json:{write:!0}})],ul.prototype,"marker",void 0),ul=g3=x([he("esri.symbols.LineSymbol3DLayer")],ul);var gV;const tXe=Dl()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let US=gV=class extends qt{clone(){return new gV({href:this.href,primitive:this.primitive})}};x([E({type:String,json:{read:HL,write:R2}})],US.prototype,"href",void 0),x([yn(tXe)],US.prototype,"primitive",void 0),US=gV=x([he("esri.symbols.support.ObjectSymbol3DLayerResource")],US);const nNt="sphere";var yV;let Oy=yV=class extends Kt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new yV({x:this.x,y:this.y,z:this.z})}};x([E({type:Number})],Oy.prototype,"x",void 0),x([E({type:Number})],Oy.prototype,"y",void 0),x([E({type:Number})],Oy.prototype,"z",void 0),Oy=yV=x([he("esri.symbols.support.Symbol3DAnchorPosition3D")],Oy);var vV,Bw;let io=(Bw=class extends ja{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new vV({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},vV=Bw,Bw);x([E({type:pc,json:{write:!0}})],io.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],io.prototype,"castShadows",void 0),x([E({type:US,json:{write:!0}})],io.prototype,"resource",void 0),x([yn({Object:"object"},{readOnly:!0})],io.prototype,"type",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"width",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"height",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"depth",void 0),x([yn({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],io.prototype,"anchor",void 0),x([E({type:Oy,json:{type:[Number],read:{reader:t=>new Oy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],io.prototype,"anchorPosition",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"heading",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"tilt",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"roll",void 0),x([E({readOnly:!0})],io.prototype,"isPrimitive",null),io=vV=x([he("esri.symbols.ObjectSymbol3DLayer")],io);var _V,Ww;let Co=(Ww=class extends ja{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,n){return e??(n.height==null&&n.size!=null?n.size:void 0)}readHeight(e,n){return e??(n.width==null&&n.size!=null?n.size:void 0)}clone(){return new _V({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},_V=Ww,Ww);x([E({type:pc,json:{write:!0}})],Co.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Co.prototype,"castShadows",void 0),x([yn({Path:"path"},{readOnly:!0})],Co.prototype,"type",void 0),x([E({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],Co.prototype,"profile",void 0),x([E({type:xve,nonNullable:!0,json:{write:!0,default:"miter"}})],Co.prototype,"join",void 0),x([E({type:XYe,nonNullable:!0,json:{write:!0,default:"butt"}})],Co.prototype,"cap",void 0),x([E({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Co.prototype,"width",void 0),x([cr("width",["width","size","height"])],Co.prototype,"readWidth",null),x([E({type:Number,json:{write:!0}})],Co.prototype,"height",void 0),x([cr("height",["height","size","width"])],Co.prototype,"readHeight",null),x([E({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],Co.prototype,"anchor",void 0),x([E({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],Co.prototype,"profileRotation",void 0),Co=_V=x([he("esri.symbols.PathSymbol3DLayer")],Co);const nXe=["none","underline","line-through"],rXe=["normal","italic","oblique"],iXe=["normal","lighter","bold","bolder"],Eve={type:Number,cast:t=>{const e=ac(t);return e===0?1:_u(e,.1,4)},nonNullable:!0},sXe=["left","right","center"],oXe=["baseline","top","middle","bottom"],Sve={type:sXe,nonNullable:!0},Tve={type:oXe,nonNullable:!0},rNt=8;var xV;let Zc=xV=class extends qt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ti(t)}clone(){return new xV({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};x([E({type:nXe,json:{default:"none",write:!0}})],Zc.prototype,"decoration",void 0),x([E({type:String,json:{write:!0}})],Zc.prototype,"family",void 0),x([E({type:Number,json:{write:{overridePolicy:(t,e,n)=>({enabled:!n||!n.textSymbol3D})}}})],Zc.prototype,"size",void 0),x([Ks("size")],Zc.prototype,"castSize",null),x([E({type:rXe,json:{default:"normal",write:!0}})],Zc.prototype,"style",void 0),x([E({type:iXe,json:{default:"normal",write:!0}})],Zc.prototype,"weight",void 0),Zc=xV=x([he("esri.symbols.Font")],Zc);var wV;let jx=wV=class extends qt{constructor(){super(...arguments),this.color=new Jn([0,0,0,1]),this.size=0}clone(){const t={color:et(this.color),size:this.size};return new wV(t)}};x([E(v0())],jx.prototype,"color",void 0),x([E(Bd)],jx.prototype,"size",void 0),jx=wV=x([he("esri.symbols.support.Symbol3DHalo")],jx);let BT=class extends _o(qt){constructor(e){super(e),this.color=null}};x([E(v0())],BT.prototype,"color",void 0),BT=x([he("esri.symbols.support.Symbol3DTextBackground")],BT);var y3,Hw;let Ts=(Hw=class extends ja{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,n,r,i){const s={...i,textSymbol3D:!0};n.font=e.write({},s),delete n.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new y3({enabled:this.enabled,font:et(this.font),halo:et(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:et(this.background),occludedVisibility:et(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new y3({font:e.font!=null?e.font.clone():new Zc,halo:aXe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new pc({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new BT({color:e.backgroundColor.clone()}):null})}},y3=Hw,Hw);function aXe(t,e){return t&&e!=null&&e>0?new jx({color:et(t),size:e}):null}x([E({type:Zc,json:{write:!0}})],Ts.prototype,"font",null),x([er("font")],Ts.prototype,"writeFont",null),x([E({type:jx,json:{write:!0}})],Ts.prototype,"halo",void 0),x([E({...Sve,json:{default:"center",write:!0}})],Ts.prototype,"horizontalAlignment",void 0),x([E({...Eve,json:{default:1,write:!0}})],Ts.prototype,"lineHeight",void 0),x([E({type:pc,json:{write:!0}})],Ts.prototype,"material",void 0),x([E({type:BT,json:{write:!0}})],Ts.prototype,"background",void 0),x([E(Bd)],Ts.prototype,"size",null),x([E({type:String,json:{write:!0}})],Ts.prototype,"text",void 0),x([yn({Text:"text"},{readOnly:!0})],Ts.prototype,"type",void 0),x([E({...Tve,json:{default:"baseline",write:!0}})],Ts.prototype,"verticalAlignment",void 0),x([E({type:wve})],Ts.prototype,"occludedVisibility",void 0),Ts=y3=x([he("esri.symbols.TextSymbol3DLayer")],Ts);var bV,qw;let zf=(qw=class extends ja{constructor(e){super(e),this.color=EV.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new bV({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},bV=qw,qw);x([E({type:Jn,nonNullable:!0,json:{type:[jr],write:(t,e,n)=>e[n]=t.toArray(1),default:()=>EV.clone(),defaultEquals:t=>t.toCss(!0)===EV.toCss(!0)}})],zf.prototype,"color",void 0),x([yn({Water:"water"},{readOnly:!0})],zf.prototype,"type",void 0),x([E({type:["small","medium","large"],json:{write:!0,default:"medium"}})],zf.prototype,"waterbodySize",void 0),x([E({type:Number,json:{write:!0,default:null}})],zf.prototype,"waveDirection",void 0),x([E({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],zf.prototype,"waveStrength",void 0),zf=bV=x([he("esri.symbols.WaterSymbol3DLayer")],zf);const EV=new Jn([0,119,190]);var SV;let Xf=SV=class extends Kt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new SV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};x([E({type:String})],Xf.prototype,"name",void 0),x([E({type:String})],Xf.prototype,"styleUrl",void 0),x([E({type:String})],Xf.prototype,"styleName",void 0),x([E({type:ot})],Xf.prototype,"portal",void 0),Xf=SV=x([he("esri.symbols.support.StyleOrigin")],Xf);var TV;let WT=TV=class extends Kt{constructor(){super(...arguments),this.url=""}clone(){return new TV({url:this.url})}};x([E({type:String})],WT.prototype,"url",void 0),WT=TV=x([he("esri.symbols.support.Thumbnail")],WT);const kve={icon:oo,object:io,line:ul,path:Co,fill:tc,extrude:Vf,text:Ts,water:zf},lXe=Lt.ofType({base:ja,key:"type",typeMap:kve,errorContext:"symbol-layer"});let hl=class extends ms{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=n?.type,i=r||Lt;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&kt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Cd(e,this._get("symbolLayers"))}readStyleOrigin(e,n,r){if(e.styleUrl&&e.name){const i=bb(e.styleUrl,r);return new Xf({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new Xf({portal:r?.portal||ot.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new zd("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,n,r,i){if(e.styleUrl&&e.name){let s=P2(e.styleUrl,i);kl(s)&&(s=Rg(s)),n.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&i?.portal&&!fje(e.portal.restUrl,i.portal.restUrl)?i?.messages&&i.messages.push(new zd("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof ja||e&&kve[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};x([E({json:{read:!1,write:!1}})],hl.prototype,"color",null),x([E({type:lXe,nonNullable:!0,json:{write:!0}}),Ks(mme)],hl.prototype,"symbolLayers",null),x([E({type:Xf})],hl.prototype,"styleOrigin",void 0),x([cr("styleOrigin")],hl.prototype,"readStyleOrigin",null),x([er("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],hl.prototype,"writeStyleOrigin",null),x([E({type:WT,json:{read:!1}})],hl.prototype,"thumbnail",void 0),x([E({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],hl.prototype,"type",void 0),hl=x([he("esri.symbols.Symbol3D")],hl);let Fx=class extends qt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};x([E({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Fx.prototype,"type",void 0),x([E({readOnly:!0})],Fx.prototype,"visible",void 0),Fx=x([he("esri.symbols.callouts.Callout3D")],Fx);var kV;let v3=kV=class extends qt{constructor(t){super(t),this.color=new Jn("white")}clone(){return new kV({color:et(this.color)})}};x([E(v0({colorRequiredOnWrite:!0}))],v3.prototype,"color",void 0),v3=kV=x([he("esri.symbols.callouts.LineCallout3DBorder")],v3);const cXe=v3;var AV;let Gf=AV=class extends Fx{constructor(t){super(t),this.type="line",this.color=new Jn([0,0,0,1]),this.size=Q1(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new AV({color:et(this.color),size:this.size,border:et(this.border)})}};x([yn({line:"line"})],Gf.prototype,"type",void 0),x([E(v0({colorRequiredOnWrite:!0}))],Gf.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],Gf.prototype,"size",void 0),x([E({type:cXe,json:{write:!0}})],Gf.prototype,"border",void 0),x([E({readOnly:!0})],Gf.prototype,"visible",null),Gf=AV=x([he("esri.symbols.callouts.LineCallout3D")],Gf);function cH(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Ave(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!cH(t)}function aNt(t){return t.type==="point-3d"||t.type==="label-3d"}function lNt(t){return t.horizontalAlignment==="center"}const Cve={types:{key:"type",base:Fx,typeMap:{line:Gf}},json:{write:!0}};var CV;let ng=CV=class extends qt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new CV({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};x([E({...Bd,json:{write:{isRequired:!0}}})],ng.prototype,"screenLength",void 0),x([E({type:Number,nonNullable:!0,json:{write:!0,default:0}})],ng.prototype,"minWorldLength",void 0),x([E({type:Number,json:{write:!0}})],ng.prototype,"maxWorldLength",void 0),ng=CV=x([he("esri.symbols.support.Symbol3DVerticalOffset")],ng);var _3;const Ive=Lt.ofType({base:null,key:"type",typeMap:{text:Ts}});let cd=_3=class extends hl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Ive,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Ave(this)}hasVisibleVerticalOffset(){return cH(this)}clone(){return new _3({styleOrigin:et(this.styleOrigin),symbolLayers:et(this.symbolLayers),thumbnail:et(this.thumbnail),callout:et(this.callout),verticalOffset:et(this.verticalOffset)})}static fromTextSymbol(t){return new _3({symbolLayers:new Lt([Ts.fromTextSymbol(t)])})}};x([E({type:ng,json:{write:!0}})],cd.prototype,"verticalOffset",void 0),x([E(Cve)],cd.prototype,"callout",void 0),x([E({json:{read:!1,write:!1}})],cd.prototype,"styleOrigin",void 0),x([E({type:Ive})],cd.prototype,"symbolLayers",void 0),x([yn({LabelSymbol3D:"label-3d"},{readOnly:!0})],cd.prototype,"type",void 0),cd=_3=x([he("esri.symbols.LabelSymbol3D")],cd);var x3;const Pve=Lt.ofType({base:null,key:"type",typeMap:{line:ul,path:Co}}),uXe=Lt.ofType({base:null,key:"type",typeMap:{line:ul,path:Co}});let gg=x3=class extends hl{constructor(t){super(t),this.symbolLayers=new Pve,this.type="line-3d"}clone(){return new x3({styleOrigin:et(this.styleOrigin),symbolLayers:et(this.symbolLayers),thumbnail:et(this.thumbnail)})}static fromSimpleLineSymbol(t){return new x3({symbolLayers:new Lt([ul.fromSimpleLineSymbol(t)])})}};x([E({type:Pve,json:{type:uXe}})],gg.prototype,"symbolLayers",void 0),x([yn({LineSymbol3D:"line-3d"},{readOnly:!0})],gg.prototype,"type",void 0),gg=x3=x([he("esri.symbols.LineSymbol3D")],gg);var w3;const Rve=Lt.ofType({base:null,key:"type",typeMap:{fill:tc}});let Xy=w3=class extends hl{constructor(t){super(t),this.symbolLayers=new Rve,this.type="mesh-3d"}clone(){return new w3({styleOrigin:et(this.styleOrigin),symbolLayers:et(this.symbolLayers),thumbnail:et(this.thumbnail)})}static fromSimpleFillSymbol(t){return new w3({symbolLayers:new Lt([tc.fromSimpleFillSymbol(t)])})}};x([E({type:Rve})],Xy.prototype,"symbolLayers",void 0),x([yn({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Xy.prototype,"type",void 0),Xy=w3=x([he("esri.symbols.MeshSymbol3D")],Xy);let BS=class extends ms{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};x([yn({esriSLS:"simple-line"},{readOnly:!0})],BS.prototype,"type",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],BS.prototype,"width",void 0),BS=x([he("esri.symbols.LineSymbol")],BS);var IV;let td=IV=class extends qt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,n,r){e[n]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,n,r){r?.origin==="web-map"||(e[n]=t)}clone(){return new IV({color:et(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};x([E({type:["begin","end","begin-end"],json:{write:!0}})],td.prototype,"placement",void 0),x([yn({"line-marker":"line-marker"},{readOnly:!0}),E({json:{origins:{"web-map":{write:!1}}}})],td.prototype,"type",void 0),x([E({type:bve})],td.prototype,"style",void 0),x([er("style")],td.prototype,"writeStyle",null),x([E({type:Jn,value:null,json:{write:{allowNull:!0}}})],td.prototype,"color",null),x([cr("color")],td.prototype,"readColor",null),x([er("color")],td.prototype,"writeColor",null),td=IV=x([he("esri.symbols.LineSymbolMarker")],td);const hXe=td;var PV;const EF=new Xs({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Na=PV=class extends BS{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,n,r,i,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),n!=null&&(o.width=Ti(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=Ti(s)),o}clone(){return new PV({color:et(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};x([yn({esriSLS:"simple-line"},{readOnly:!0})],Na.prototype,"type",void 0),x([E({type:EF.apiValues,json:{read:EF.read,write:EF.write}})],Na.prototype,"style",void 0),x([E({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Na.prototype,"cap",void 0),x([E({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Na.prototype,"join",void 0),x([E({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":hXe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Na.prototype,"marker",void 0),x([E({type:Number,json:{read:!1,write:!1}})],Na.prototype,"miterLimit",void 0),Na=PV=x([he("esri.symbols.SimpleLineSymbol")],Na);let $x=class extends ms{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Na}},json:{default:null,write:!0}})],$x.prototype,"outline",void 0),x([E({type:["simple-fill","picture-fill"],readOnly:!0})],$x.prototype,"type",void 0),$x=x([he("esri.symbols.FillSymbol")],$x);function dXe(t,e,n){return e.imageData?ipe({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Mve(e.url,n)}function Mve(t,e){if(!kl(t)){const n=pXe(e);if(n)return TC(n,"images",t)}return bb(t,e)}function fXe(t,e,n,r){if(_v(t)){const i=I2(t);if(!i)return;e.contentType=i.mediaType,e.imageData=i.data,n&&n.imageData===e.imageData&&n.url&&R2(n.url,e,"url",r)}else R2(t,e,"url",r)}const Nve={json:{read:{source:["imageData","url"],reader:dXe},write:{writer(t,e,n,r){fXe(t,e,this.source,r)}}}},Lve={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,n){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=Mve(e.url,n)),r}}}};function pXe(t){if(!t)return null;const{origin:e,layer:n}=t;if(e!=="service"&&e!=="portal-item")return null;const r=n?.type;return r==="feature"||r==="stream"?n.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var RV;let sl=RV=class extends $x{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e&&(i.outline=e),n!=null&&(i.width=Ti(n)),r!=null&&(i.height=Ti(r)),i}clone(){const t=new RV({color:et(this.color),height:this.height,outline:et(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",et(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};x([yn({esriPFS:"picture-fill"},{readOnly:!0})],sl.prototype,"type",void 0),x([E(Nve)],sl.prototype,"url",void 0),x([E({type:Number,json:{write:!0}})],sl.prototype,"xscale",void 0),x([E({type:Number,json:{write:!0}})],sl.prototype,"yscale",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"width",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"height",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"yoffset",void 0),x([E(Lve)],sl.prototype,"source",void 0),sl=RV=x([he("esri.symbols.PictureFillSymbol")],sl);let Uf=class extends ms{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Uf.prototype,"angle",void 0),x([E({type:["simple-marker","picture-marker"],readOnly:!0})],Uf.prototype,"type",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Uf.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Uf.prototype,"yoffset",void 0),x([E({cast:t=>t==="auto"?t:ac(Ti(t)),json:{write:!0}})],Uf.prototype,"size",void 0),Uf=x([he("esri.symbols.MarkerSymbol")],Uf);var MV;let ll=MV=class extends Uf{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ti(e)),n!=null&&(r.height=Ti(n)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new MV({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",et(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};x([E({json:{write:!1}})],ll.prototype,"color",void 0),x([yn({esriPMS:"picture-marker"},{readOnly:!0})],ll.prototype,"type",void 0),x([E(Nve)],ll.prototype,"url",void 0),x([E(Lve)],ll.prototype,"source",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],ll.prototype,"height",void 0),x([cr("height",["height","size"])],ll.prototype,"readHeight",null),x([E({type:Number,cast:Ti,json:{write:!0}})],ll.prototype,"width",void 0),x([E({json:{write:!1}})],ll.prototype,"size",void 0),ll=MV=x([he("esri.symbols.PictureMarkerSymbol")],ll);var _y;const Ove=Lt.ofType({base:null,key:"type",typeMap:{icon:oo,object:io,text:Ts}});let fd=_y=class extends hl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Ove,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Ave(this)}hasVisibleVerticalOffset(){return cH(this)}clone(){return new _y({verticalOffset:et(this.verticalOffset),callout:et(this.callout),styleOrigin:et(this.styleOrigin),symbolLayers:et(this.symbolLayers),thumbnail:et(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new _y({symbolLayers:new Lt([oo.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new _y({symbolLayers:new Lt([oo.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const n=t.data.symbol;return new _y(n?.callout?{symbolLayers:new Lt([oo.fromCIMSymbol(t)]),callout:new Gf({size:.5,color:new Jn([0,0,0])}),verticalOffset:new ng({screenLength:40})}:{symbolLayers:new Lt([oo.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new _y({symbolLayers:new Lt([Ts.fromTextSymbol(t)])})}};x([E({type:ng,json:{write:!0}})],fd.prototype,"verticalOffset",void 0),x([E(Cve)],fd.prototype,"callout",void 0),x([E({type:Ove,json:{origins:{"web-scene":{write:!0}}}})],fd.prototype,"symbolLayers",void 0),x([yn({PointSymbol3D:"point-3d"},{readOnly:!0})],fd.prototype,"type",void 0),fd=_y=x([he("esri.symbols.PointSymbol3D")],fd);var WS;const Dve=Lt.ofType({base:null,key:"type",typeMap:{extrude:Vf,fill:tc,icon:oo,line:ul,object:io,text:Ts,water:zf}});let yg=WS=class extends hl{constructor(t){super(t),this.symbolLayers=new Dve,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&qg(kt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&qg(kt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(J1(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Qg))}clone(){return new WS({styleOrigin:et(this.styleOrigin),symbolLayers:et(this.symbolLayers),thumbnail:et(this.thumbnail)})}static fromJSON(t){const e=new WS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new WS({symbolLayers:new Lt([tc.fromSimpleFillSymbol(t)])})}};x([E({type:Dve,json:{write:!0}})],yg.prototype,"symbolLayers",void 0),x([yn({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],yg.prototype,"type",void 0),yg=WS=x([he("esri.symbols.PolygonSymbol3D")],yg);var NV;const SF=new Xs({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Zf=NV=class extends $x{constructor(...t){super(...t),this.color=new Jn([0,0,0,.25]),this.outline=new Na,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),n&&(r.color=n),r}clone(){return new NV({color:et(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};x([E()],Zf.prototype,"color",void 0),x([E()],Zf.prototype,"outline",void 0),x([yn({esriSFS:"simple-fill"},{readOnly:!0})],Zf.prototype,"type",void 0),x([E({type:SF.apiValues,json:{read:SF.read,write:SF.write}})],Zf.prototype,"style",void 0),Zf=NV=x([he("esri.symbols.SimpleFillSymbol")],Zf);var LV;const TF=new Xs({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ql=LV=class extends Uf{constructor(...t){super(...t),this.color=new Jn([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Na}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e!=null&&(i.size=Ti(e)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new LV({angle:this.angle,color:et(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};x([E()],Ql.prototype,"color",void 0),x([er("color")],Ql.prototype,"writeColor",null),x([yn({esriSMS:"simple-marker"},{readOnly:!0})],Ql.prototype,"type",void 0),x([E()],Ql.prototype,"size",void 0),x([E({type:TF.apiValues,json:{read:TF.read,write:TF.write}})],Ql.prototype,"style",void 0),x([E({type:String,json:{write:!0}})],Ql.prototype,"path",null),x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Na}},json:{default:null,write:!0}})],Ql.prototype,"outline",void 0),Ql=LV=x([he("esri.symbols.SimpleMarkerSymbol")],Ql);var OV;let Yr=OV=class extends ms{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Zc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),n&&(r.color=n),r}writeLineWidth(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}castLineWidth(t){return Ti(t)}writeLineHeight(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}clone(){return new OV({angle:this.angle,backgroundColor:et(this.backgroundColor),borderLineColor:et(this.borderLineColor),borderLineSize:this.borderLineSize,color:et(this.color),font:this.font&&this.font.clone(),haloColor:et(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};x([E({type:Jn,json:{write:!0}})],Yr.prototype,"backgroundColor",void 0),x([E({type:Jn,json:{write:!0}})],Yr.prototype,"borderLineColor",void 0),x([E({type:Number,json:{write:!0},cast:Ti})],Yr.prototype,"borderLineSize",void 0),x([E({type:Zc,json:{write:!0}})],Yr.prototype,"font",void 0),x([E({...Sve,json:{write:!0}})],Yr.prototype,"horizontalAlignment",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"kerning",void 0),x([E({type:Jn,json:{write:!0}})],Yr.prototype,"haloColor",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"haloSize",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rightToLeft",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rotated",void 0),x([E({type:String,json:{write:!0}})],Yr.prototype,"text",void 0),x([yn({esriTS:"text"},{readOnly:!0})],Yr.prototype,"type",void 0),x([E({...Tve,json:{write:!0}})],Yr.prototype,"verticalAlignment",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"yoffset",void 0),x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Yr.prototype,"angle",void 0),x([E({type:Number,json:{write:!0}})],Yr.prototype,"width",void 0),x([E({type:Number})],Yr.prototype,"lineWidth",void 0),x([er("lineWidth")],Yr.prototype,"writeLineWidth",null),x([Ks("lineWidth")],Yr.prototype,"castLineWidth",null),x([E(Eve)],Yr.prototype,"lineHeight",void 0),x([er("lineHeight")],Yr.prototype,"writeLineHeight",null),Yr=OV=x([he("esri.symbols.TextSymbol")],Yr);var DV;let cl=DV=class extends ms{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:ot.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new DV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Ipe(kt.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new Qe("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,n=e?this._fetchCacheKey:null;if(e!=null){const o=n&&e.get(n);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await ge(()=>import("./webStyleSymbolUtils-C7mngta-.js"),__vite__mapDeps([295,296,204,205,144,89,208]));gi(t);const i=r(this,{portal:this.portal},t);i.catch(o=>{kt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await i;return e?.set(n,s.clone()),s}};x([E({json:{write:!1}})],cl.prototype,"color",void 0),x([E({type:String,json:{write:!0}})],cl.prototype,"styleName",void 0),x([E({type:ot,json:{write:!1}})],cl.prototype,"portal",void 0),x([E({type:String,json:{read:HL,write:R2}})],cl.prototype,"styleUrl",void 0),x([E({type:WT,json:{read:!1}})],cl.prototype,"thumbnail",void 0),x([E({type:String,json:{write:!0}})],cl.prototype,"name",void 0),x([yn({styleSymbolReference:"web-style"},{readOnly:!0})],cl.prototype,"type",void 0),x([E()],cl.prototype,"_fetchCacheKey",null),cl=DV=x([he("esri.symbols.WebStyleSymbol")],cl);function dNt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function fNt(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const uH={base:ms,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"picture-marker":ll,"simple-line":Na,"simple-marker":Ql,text:Yr,"label-3d":cd,"line-3d":gg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":yg,"web-style":cl,cim:pl},errorContext:"symbol"},pNt={base:ms,key:"type",typeMap:{"picture-marker":ll,"simple-marker":Ql,"point-3d":fd,cim:pl},errorContext:"symbol"},mNt={base:ms,key:"type",typeMap:{"simple-line":Na,"line-3d":gg,cim:pl},errorContext:"symbol"},gNt={base:ms,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"polygon-3d":yg,cim:pl},errorContext:"symbol"},yNt={base:ms,key:"type",typeMap:{"picture-marker":ll,"simple-marker":Ql,text:Yr,"web-style":cl,cim:pl},errorContext:"symbol"},vNt=ZB({types:uH}),_Nt={base:ms,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"picture-marker":ll,"simple-line":Na,"simple-marker":Ql,text:Yr,"line-3d":gg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":yg,"web-style":cl,cim:pl},errorContext:"symbol"},xNt={base:ms,key:"type",typeMap:{text:Yr,"label-3d":cd},errorContext:"symbol"},wNt={base:ms,key:"type",typeMap:{"line-3d":gg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":yg,"web-style":cl,cim:pl},errorContext:"symbol"},bNt={base:ms,key:"type",typeMap:{"label-3d":cd},errorContext:"symbol"},ENt=Yg(uH);var jV;function mXe(t){if(!t)return null;const e={};for(const n in t){const r=U2(t[n]);r&&(e[n]=r)}return Object.keys(e).length!==0?e:null}function gXe(t){if(t==null)return null;const e={};for(const n in t){const r=t[n];r&&(e[n]=r.toJSON())}return Object.keys(e).length!==0?e:null}var Kw;let ta=(Kw=class extends _o(qt){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:NM(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&xFe(kt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const n=this._get("aggregateGeometries");JSON.stringify(n)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const n=this._get("attributes");n!==e&&(this._set("attributes",e),this._notifyLayer("attributes",n,e))}set geometry(e){const n=this._get("geometry");n!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",n,e))}set popupTemplate(e){const n=this._get("popupTemplate");n!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",n,e))}set symbol(e){const n=this._get("symbol");n!==e&&(this._set("symbol",e),this._notifyLayer("symbol",n,e))}get version(){return this._version}set visible(e){const n=this._get("visible");n!==e&&(this._set("visible",e),this._notifyLayer("visible",n,e))}cloneShallow(){return new jV({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const n=AYe(this.origin);if(n)return n.popupTemplate??(e?n.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i&&typeof i=="object"){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,n){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=n,this._notifyLayer("attributes",r,n,e)}else this.attributes={[e]:n}}getObjectId(){const e=are(this.origin);if(e)return lre(this,e);const n=this.sourceLayer??this.layer;return n?lre(this,n):null}getGlobalId(){const e=are(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const n=this.sourceLayer??this.layer;return n&&"globalIdField"in n&&n.globalIdField?this.getAttribute(n.globalIdField):null}toJSON(){return{aggregateGeometries:gXe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:q4(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:n}=this;if(n?.type==="mesh"){const r={origin:n.origin,transform:n.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,n,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:n,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Sc(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:n})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===n||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=n,this.notifyMeshTransformChanged())}),Sc(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,n)=>e===n,sync:!0})])}},jV=Kw,Kw);x([E({value:null,json:{read:mXe}})],ta.prototype,"aggregateGeometries",null),x([E({value:null})],ta.prototype,"attributes",null),x([E({value:null,types:qW,json:{read:U2}})],ta.prototype,"geometry",null),x([E({type:Boolean})],ta.prototype,"isAggregate",void 0),x([E({clonable:!1})],ta.prototype,"layer",void 0),x([E({clonable:"reference"})],ta.prototype,"origin",void 0),x([E({type:SYe,value:null})],ta.prototype,"popupTemplate",null),x([E({clonable:"reference"})],ta.prototype,"sourceLayer",void 0),x([E({value:null,types:uH})],ta.prototype,"symbol",null),x([E({clonable:!1,json:{read:!1,write:!1}})],ta.prototype,"_version",void 0),x([E({type:Boolean,value:!0})],ta.prototype,"visible",null),ta=jV=x([he("esri.Graphic")],ta);let HT=class extends jT{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};x([fme({Type:ta,ensureType:qa(ta)})],HT.prototype,"itemType",void 0),HT=x([he("esri.support.GraphicsCollection")],HT);let Rf=class extends Kt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Lt,this.groundLayerViews=new Lt,this.referenceLayerViews=new Lt,this._loadingHandle=mn(()=>this.view?.map?.basemap,n=>{n&&n.load().catch(()=>{})},xa)}destroy(){this._set("view",null),this._loadingHandle=ii(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.groundLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};x([E({constructOnly:!0})],Rf.prototype,"view",void 0),x([E({readOnly:!0})],Rf.prototype,"baseLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"groundLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"referenceLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"suspended",null),x([E({type:Boolean,readOnly:!0})],Rf.prototype,"updating",null),Rf=x([he("esri.views.BasemapView")],Rf);const yXe=Rf;let Xl=class extends Kt{constructor(e){super(e),this.factor=1.5,this.offset=qs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};x([E({type:Number})],Xl.prototype,"factor",void 0),x([E({nonNullable:!0})],Xl.prototype,"offset",void 0),x([E()],Xl.prototype,"position",void 0),x([E({type:Number,range:{min:0}})],Xl.prototype,"size",void 0),x([E()],Xl.prototype,"maskUrl",void 0),x([E()],Xl.prototype,"maskEnabled",void 0),x([E()],Xl.prototype,"overlayUrl",void 0),x([E()],Xl.prototype,"overlayEnabled",void 0),x([E({readOnly:!0})],Xl.prototype,"version",null),x([E({type:Boolean})],Xl.prototype,"visible",void 0),Xl=x([he("esri.views.Magnifier")],Xl);const jve=Xl;let Tw=class{constructor(e){this._observable=new NC,this._map=new Map(e)}get size(){return on(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const n=this._map.delete(e);return n&&this._observable.notify(),n}entries(){return on(this._observable),this._map.entries()}forEach(e,n){on(this._observable),this._map.forEach((r,i)=>e.call(n,r,i,this),n)}get(e){return on(this._observable),this._map.get(e)}has(e){return on(this._observable),this._map.has(e)}keys(){return on(this._observable),this._map.keys()}set(e,n){return this._map.set(e,n),this._observable.notify(),this}values(){return on(this._observable),this._map.values()}[Symbol.iterator](){return on(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var FV;let HS=FV=class extends qt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new FV({name:this.name,code:this.code})}};x([E({type:String,json:{write:{isRequired:!0}}})],HS.prototype,"name",void 0),x([E({type:[String,Number],json:{write:{isRequired:!0}}})],HS.prototype,"code",void 0),HS=FV=x([he("esri.layers.support.CodedValue")],HS);const vXe=new Xs({inherited:"inherited",codedValue:"coded-value",range:"range"});let vg=class extends qt{constructor(e){super(e),this.name=null,this.type=null}};x([E({type:String,json:{write:!0}})],vg.prototype,"name",void 0),x([yn(vXe),E({json:{write:{isRequired:!0}}})],vg.prototype,"type",void 0),vg=x([he("esri.layers.support.Domain")],vg);var $V,Yw;let Vx=(Yw=class extends vg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let n=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(n=i.name),!!n))}return n}clone(){return new $V({codedValues:et(this.codedValues),name:this.name})}},$V=Yw,Yw);x([E({type:[HS],json:{write:{isRequired:!0}}})],Vx.prototype,"codedValues",void 0),x([yn({codedValue:"coded-value"})],Vx.prototype,"type",void 0),Vx=$V=x([he("esri.layers.support.CodedValueDomain")],Vx);var VV,Xw;let qT=(Xw=class extends vg{constructor(e){super(e),this.type="inherited"}clone(){return new VV}},VV=Xw,Xw);x([yn({inherited:"inherited"})],qT.prototype,"type",void 0),qT=VV=x([he("esri.layers.support.InheritedDomain")],qT);var zV,Zw;let Dy=(Zw=class extends vg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new zV({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},zV=Zw,Zw);x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,n){e[n]=[this.minValue||0,t]},isRequired:!0}}})],Dy.prototype,"maxValue",void 0),x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,n){e[n]=[t,this.maxValue||0]},isRequired:!0}}})],Dy.prototype,"minValue",void 0),x([yn({range:"range"})],Dy.prototype,"type",void 0),Dy=zV=x([he("esri.layers.support.RangeDomain")],Dy);const _Xe={key:"type",base:vg,typeMap:{range:Dy,"coded-value":Vx,inherited:qT}};function xXe(t){if(!t?.type)return null;switch(t.type){case"range":return Dy.fromJSON(t);case"codedValue":return Vx.fromJSON(t);case"inherited":return qT.fromJSON(t)}return null}const wXe=new Xs({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var GV;const bXe=new Xs({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Jw;let Zo=(Jw=class extends qt{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?.value??null}readValueType(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?bXe.fromJSON(r.fieldValueType):null}clone(){return new GV({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},GV=Jw,Jw);x([E({type:String,json:{write:!0}})],Zo.prototype,"alias",void 0),x([E({type:[String,Number],json:{write:{allowNull:!0}}})],Zo.prototype,"defaultValue",void 0),x([E()],Zo.prototype,"description",void 0),x([cr("description")],Zo.prototype,"readDescription",null),x([E({types:_Xe,json:{read:{reader:xXe},write:!0}})],Zo.prototype,"domain",void 0),x([E({type:Boolean,json:{write:!0}})],Zo.prototype,"editable",void 0),x([E({type:jr,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Zo.prototype,"length",void 0),x([E({type:String,json:{write:!0}})],Zo.prototype,"name",void 0),x([E({type:Boolean,json:{write:!0}})],Zo.prototype,"nullable",void 0),x([yn(wXe)],Zo.prototype,"type",void 0),x([E()],Zo.prototype,"valueType",void 0),x([cr("valueType",["description"])],Zo.prototype,"readValueType",null),x([E({type:Boolean,json:{read:!1}})],Zo.prototype,"visible",void 0),Zo=GV=x([he("esri.layers.support.Field")],Zo);var UV;let hx=UV=class extends qt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new UV({mapLayerId:t,gdbVersion:e})}};x([yn({mapLayer:"map-layer"}),E({json:{write:{isRequired:!0}}})],hx.prototype,"type",void 0),x([E({type:jr,json:{write:{isRequired:!0}}})],hx.prototype,"mapLayerId",void 0),x([E({type:String,json:{write:!0}})],hx.prototype,"gdbVersion",void 0),hx=UV=x([he("esri.layers.support.source.MapLayerSource")],hx);var BV;let Mf=BV=class extends qt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:n,spatialReference:r,geometryType:i}=this,s={workspaceId:t,query:e,oidFields:n,spatialReference:r?.clone()??void 0,geometryType:i};return new BV(s)}};x([yn({queryTable:"query-table"}),E({json:{write:{isRequired:!0}}})],Mf.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"query",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"oidFields",void 0),x([E({type:Wt,json:{write:!0}})],Mf.prototype,"spatialReference",void 0),x([yn(nHe)],Mf.prototype,"geometryType",void 0),Mf=BV=x([he("esri.layers.support.source.QueryTableDataSource")],Mf);var WV;let dx=WV=class extends qt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new WV({workspaceId:t,dataSourceName:e})}};x([yn({raster:"raster"}),E({json:{write:{isRequired:!0}}})],dx.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],dx.prototype,"dataSourceName",void 0),x([E({type:String,json:{write:!0}})],dx.prototype,"workspaceId",void 0),dx=WV=x([he("esri.layers.support.source.RasterDataSource")],dx);var HV;let xy=HV=class extends qt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:n}=this;return new HV({workspaceId:t,gdbVersion:e,dataSourceName:n})}};x([yn({table:"table"}),E({json:{write:{isRequired:!0}}})],xy.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"gdbVersion",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"dataSourceName",void 0),xy=HV=x([he("esri.layers.support.source.TableDataSource")],xy);var qV,KV;const EXe=Dl()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Zl=qV=class extends qt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,n){return fre()(t,e,n)}castLeftTableSource(t){return Yg(YV(),t)}readRightTableSource(t,e,n){return fre()(t,e,n)}castRightTableSource(t){return Yg(YV(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:n,rightTableSource:r,joinType:i}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:n?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:i};return new qV(s)}};x([yn({joinTable:"join-table"}),E({json:{write:{isRequired:!0}}})],Zl.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],Zl.prototype,"leftTableKey",void 0),x([E({type:String,json:{write:!0}})],Zl.prototype,"rightTableKey",void 0),x([E({json:{write:!0}})],Zl.prototype,"leftTableSource",void 0),x([cr("leftTableSource")],Zl.prototype,"readLeftTableSource",null),x([Ks("leftTableSource")],Zl.prototype,"castLeftTableSource",null),x([E({json:{write:!0}})],Zl.prototype,"rightTableSource",void 0),x([cr("rightTableSource")],Zl.prototype,"readRightTableSource",null),x([Ks("rightTableSource")],Zl.prototype,"castRightTableSource",null),x([yn(EXe)],Zl.prototype,"joinType",void 0),Zl=qV=x([he("esri.layers.support.source.JoinTableDataSource")],Zl);let kF=null;function fre(){return kF||(kF=ZB({types:YV()})),kF}let AF=null;function YV(){return AF||(AF={key:"type",base:null,typeMap:{"data-layer":Bf,"map-layer":hx}}),AF}const SXe={key:"type",base:null,typeMap:{"join-table":Zl,"query-table":Mf,raster:dx,table:xy}};var Qw;let Bf=(Qw=class extends qt{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:n}=this;return new KV({fields:e,dataSource:n})}},KV=Qw,Qw);x([yn({dataLayer:"data-layer"}),E({json:{write:{isRequired:!0}}})],Bf.prototype,"type",void 0),x([E({type:[Zo],json:{write:!0}})],Bf.prototype,"fields",void 0),x([E({types:SXe,json:{write:!0}})],Bf.prototype,"dataSource",void 0),Bf=KV=x([he("esri.layers.support.source.DataLayerSource")],Bf),Bf.from=qa(Bf);let wy=class extends _o(qt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};x([E({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],wy.prototype,"onFields",void 0),x([E({type:String,json:{write:!0}})],wy.prototype,"operator",void 0),x([E({type:String,json:{write:!0}})],wy.prototype,"searchTerm",void 0),x([E({type:String,json:{write:!0}})],wy.prototype,"searchType",void 0),wy=x([he("esri.rest.support.FullTextSearch")],wy);const TXe=wy;var XV;const pre=new Xs({upperLeft:"upper-left",lowerLeft:"lower-left"});let Km=XV=class extends qt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new XV(et({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};x([E({type:Vn,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Km.prototype,"extent",void 0),x([E({type:["view","edit"],json:{write:!0}})],Km.prototype,"mode",void 0),x([E({type:String,json:{read:pre.read,write:pre.write}})],Km.prototype,"originPosition",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Km.prototype,"tolerance",void 0),Km=XV=x([he("esri.rest.support.QuantizationParameters")],Km);const kXe=t=>{const e=t;let n=class extends e{};return n=x([he("esri.rest.support.QueryMixin")],n),n},AXe=new Xs({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var ZV;const mre=new Xs({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let qu=ZV=class extends qt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=et(t))}clone(){return new ZV({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:et(this.statisticParameters)})}};x([E({type:Number,json:{write:!0}})],qu.prototype,"maxPointCount",void 0),x([E({type:Number,json:{write:!0}})],qu.prototype,"maxRecordCount",void 0),x([E({type:Number,json:{write:!0}})],qu.prototype,"maxVertexCount",void 0),x([E({type:String,json:{write:!0}})],qu.prototype,"onStatisticField",void 0),x([E({type:String,json:{write:!0}})],qu.prototype,"outStatisticFieldName",void 0),x([E({type:String,json:{read:{source:"statisticType",reader:mre.read},write:{target:"statisticType",writer:mre.write}}})],qu.prototype,"statisticType",void 0),x([E({type:Object})],qu.prototype,"statisticParameters",void 0),x([er("statisticParameters")],qu.prototype,"writeStatisticParameters",null),qu=ZV=x([he("esri.rest.support.StatisticDefinition")],qu);var b3;const CXe=new Xs({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var w1;let sn=(w1=class extends kXe(qt){static from(e){return XL(b3,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,n){n.historicMoment=e&&e.getTime()}writeParameterValues(e,n){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[i]=s.getTime():r[i]=s}n.parameterValues=r}}writeStart(e,n){n.resultOffset=this.start,n.resultRecordCount=this.num||10,n.where="1=1"}writeWhere(e,n){n.where=e||"1=1"}clone(){return new b3(et({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},b3=w1,w1.MAX_MAX_RECORD_COUNT_FACTOR=5,w1);x([E({json:{write:!0}})],sn.prototype,"aggregateIds",void 0),x([E({type:Boolean,json:{write:!0}})],sn.prototype,"cacheHint",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"compactGeometryEnabled",void 0),x([E({json:{write:!0}})],sn.prototype,"datumTransformation",void 0),x([Ks("datumTransformation")],sn.prototype,"castDatumTransformation",null),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"defaultSpatialReferenceEnabled",void 0),x([E({type:Number,json:{write:!0}})],sn.prototype,"distance",void 0),x([E({type:Bf,json:{write:!0}})],sn.prototype,"dynamicDataSource",void 0),x([E({type:String,json:{write:!0}})],sn.prototype,"formatOf3DObjects",void 0),x([E({type:[TXe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],sn.prototype,"fullText",void 0),x([E({type:String,json:{write:!0}})],sn.prototype,"gdbVersion",void 0),x([E({types:qW,json:{read:U2,write:!0}})],sn.prototype,"geometry",void 0),x([E({type:Number,json:{write:!0}})],sn.prototype,"geometryPrecision",void 0),x([E({type:[String],json:{write:!0}})],sn.prototype,"groupByFieldsForStatistics",void 0),x([E({type:String,json:{write:!0}})],sn.prototype,"having",void 0),x([E({type:Date})],sn.prototype,"historicMoment",void 0),x([er("historicMoment")],sn.prototype,"writeHistoricMoment",null),x([E({type:Number,json:{write:!0}})],sn.prototype,"maxAllowableOffset",void 0),x([E({type:Number,cast:t=>t<1?1:t>sn.MAX_MAX_RECORD_COUNT_FACTOR?sn.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],sn.prototype,"maxRecordCountFactor",void 0),x([E({type:["xyFootprint"],json:{write:!0}})],sn.prototype,"multipatchOption",void 0),x([E({type:Number,json:{read:{source:"resultRecordCount"}}})],sn.prototype,"num",void 0),x([E({json:{write:!0}})],sn.prototype,"objectIds",void 0),x([E({type:[String],json:{write:!0}})],sn.prototype,"orderByFields",void 0),x([E({type:[String],json:{write:!0}})],sn.prototype,"outFields",void 0),x([E({type:Wt,json:{name:"outSR",write:!0}})],sn.prototype,"outSpatialReference",void 0),x([E({type:[qu],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],sn.prototype,"outStatistics",void 0),x([E({json:{write:!0}})],sn.prototype,"parameterValues",void 0),x([er("parameterValues")],sn.prototype,"writeParameterValues",null),x([E({type:Qt,json:{write:!0}})],sn.prototype,"pixelSize",void 0),x([E({type:Km,json:{write:!0}})],sn.prototype,"quantizationParameters",void 0),x([E({type:[Object],json:{write:!0}})],sn.prototype,"rangeValues",void 0),x([E({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],sn.prototype,"relationParameter",void 0),x([E({type:String,json:{write:!0}})],sn.prototype,"resultType",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"returnCentroid",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"returnDistinctValues",void 0),x([E({type:Boolean,json:{default:!0,write:!0}})],sn.prototype,"returnExceededLimitFeatures",void 0),x([E({type:Boolean,json:{write:!0}})],sn.prototype,"returnGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"returnQueryGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"returnM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],sn.prototype,"returnZ",void 0),x([E({type:Boolean,json:{write:!0}})],sn.prototype,"returnTrueCurves",void 0),x([E({type:Wt,json:{write:!0}})],sn.prototype,"sourceSpatialReference",void 0),x([yn(AXe,{ignoreUnknown:!1,name:"spatialRel"})],sn.prototype,"spatialRelationship",void 0),x([E({type:Number,json:{read:{source:"resultOffset"}}})],sn.prototype,"start",void 0),x([er("start"),er("num")],sn.prototype,"writeStart",null),x([E({type:String,json:{write:!0}})],sn.prototype,"sqlFormat",void 0),x([E({type:String,json:{write:!0}})],sn.prototype,"text",void 0),x([E({type:Ma,json:{write:!0}})],sn.prototype,"timeExtent",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],sn.prototype,"timeReferenceUnknownClient",void 0),x([yn(CXe,{ignoreUnknown:!1}),E({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],sn.prototype,"units",void 0),x([E({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],sn.prototype,"where",void 0),x([er("where")],sn.prototype,"writeWhere",null),sn=b3=x([he("esri.rest.support.Query")],sn);function Tm(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Hc=class extends MC{constructor(e){super(e),this._selectionMap=new Tw,this._sources=new Lt,this._trashCan=[],this._layerEditHandles=new Lt,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([mn(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),mn(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},xa),J1(()=>this.sources,"change",e=>{const n=this._selectionMap,r=[];for(const i of e.removed){const s=n.get(i);s&&(n.delete(i),s.highlightHandle?.remove(),r.push({layer:i,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ii)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[n,r]=e;return{layer:n,selection:[...r.selection]}})}get count(){let e=0;for(const n of this._selectionMap.values())e+=n.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Cd(e,this._sources)}syncSources(){const e=new Set,n=this.view?.map;if(!n)return;const r=i=>{bze(i)?(i.layers?.forEach(r),i.tables?.forEach(r)):wze(i)?(i.sublayers?.forEach(r),i.subtables?.forEach(r)):Qte(i)?i.sublayers?.forEach(r):Tm(i)&&e.add(i)};n.allLayers.forEach(r),n.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,n={},r="layerView"){const{view:i,selections:s}=this;if(!i&&r==="layerView")return kt.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?s.filter(a=>e.includes(a.layer)):s).map(async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const u=nx(l)?l.parent:l;if(u!=null){if(i&&r==="layerView"&&!gre(u)&&yre(u)){const h=await i.whenLayerView(u).catch(()=>null);if(h)return vre(h,c,n)}return vre(u,c,n)}}).filter(C2);return(await Promise.all(o)).filter(C2)}updateSelection(e){const n=new Map;for(const[s,o]of this._selectionMap)n.set(s,[...o.selection]);let r=!1;const i=e.current.concat(e.added);for(const s of i){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Tm(o)||nx(o))&&a!==null){const l=AC(n,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Tm(o)||nx(o))&&a!==null){const l=n.get(o),c=l?.indexOf(a);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of n){const u=s.get(l);u!==void 0&&o.push(u),s.set(l,{selection:c}),a.push({layer:l,selection:c,...lee(u!==void 0?u.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,n){this._setSelection(e,n)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,n){const r=this._selectionMap.get(e),i=r!==void 0?[...r.selection]:[];for(const s of n)i.includes(s)||i.push(s);this._setSelection(e,i)}removeFromSelection(e,n){const r=this._selectionMap.get(e);if(!r)return;const i=[];for(const s of r.selection)n.includes(s)||i.push(s);this._setSelection(e,i)}toggleInSelection(e,n){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,n);const i=new Set(r.selection),s=new Set(n),o=i$e(i,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const n=[];for(const[r,i]of this._selectionMap.entries())n.push({layer:r,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(n)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:n,_selectionMap:r,showHighlight:i}=this,s=this._vizTaskId;for(const o of e){const a=r.get(o),l=nx(o)?o.parent:o;if(l!=null&&yre(l)){if(gre(l))continue;n.whenLayerView(l).then(c=>{a?.highlightHandle?.remove(),a!=null&&i&&s===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=c.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(ii);const e=new Set(this.sources.map(n=>nx(n)?n.parent:n));for(const n of e)Tm(n)&&"on"in n&&n.on&&this._layerEditHandles.push(n.on("edits",r=>this._onLayerEdit(r,n)))}_onLayerEdit(e,n){if(Qte(n))this._onParentLayerEdit(e,n);else if(e.deletedFeatures.length&&this._selectionMap.has(n)){const r=[];e.deletedFeatures.forEach(({error:i,objectId:s})=>{s!=null&&i==null&&r.push(s)}),this.removeFromSelection(n,r)}}_onParentLayerEdit(e,n){const{deletedFeatures:r,edits:i,updatedFeatures:s}=e;if(i?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[n.objectIdField];if(a==null||s.find(u=>u.objectId===a)?.error)return;const l=n.findSublayerForFeature(o);if(!Tm(l))return;const c=n.sublayers.find(u=>!(!Tm(u)||!this.getSelection(u)?.includes(a)));Tm(c)&&c!==l&&(this.removeFromSelection(c,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),n.sublayers.forEach(a=>{Tm(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,n){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!PXe(r,{selection:n})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...n]});const i={layer:e,selection:[...n],...lee(r!==void 0?r.selection:[],n)};this._onSelectionChange([i])}}};x([E()],Hc.prototype,"_selectionMap",void 0),x([E()],Hc.prototype,"_sources",void 0),x([E({readOnly:!0,nonNullable:!0})],Hc.prototype,"selections",null),x([E({readOnly:!0,nonNullable:!0})],Hc.prototype,"count",null),x([E()],Hc.prototype,"view",void 0),x([E({readOnly:!0,nonNullable:!0})],Hc.prototype,"hasSelection",null),x([E()],Hc.prototype,"showHighlight",void 0),x([E()],Hc.prototype,"sources",null),x([E()],Hc.prototype,"highlightName",void 0),Hc=x([he("esri.views.SelectionManager")],Hc);const gre=t=>nx(t)?t.parent?.isTable===!0:t.isTable,IXe=t=>t.layer!==void 0,yre=t=>t?.when!==void 0,PXe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const n=[...t.selection],r=[...e.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},vre=async(t,e,n={})=>{let r;if(IXe(t)){const i=t;r=i===void 0?null:await i.queryFeatures(new sn({...n,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const i=t;r=i===void 0?null:await i.queryFeatures(new sn({...n,objectIds:e})).then(s=>({data:s,layer:i}))}return r},RXe=Hc;let qS=class extends _o(Kt){constructor(e){super(e),this.accentColor=new Jn([255,127,0]),this.textColor=new Jn([255,255,255])}};x([E({type:Jn,nonNullable:!0})],qS.prototype,"accentColor",void 0),x([E({type:Jn,nonNullable:!0})],qS.prototype,"textColor",void 0),qS=x([he("esri.views.Theme")],qS);const JV=qS,Fve=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],$ve={};function Vve(t){return!!$ve[t]}function MXe(t){for(const e of t)if(!Vve(e))return!1;return!0}Fve.forEach(t=>{$ve[t]=!0});let zve=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,r,i){const s=Array.isArray(e)?e:e.split(",");if(!MXe(s))return s.some(Vve)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof r=="function"?o=r:i=r,i=i??pp.DEFAULT;const l=this._createUniqueGroupName(),c=new NXe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:i});for(const u of s){const h=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],i),Zn(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of n){const i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},NXe=class extends Js{constructor(e,n,r,i){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of n)switch(s){case"click":this.registerIncoming("click",r,o=>i(DXe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>i(jXe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>i(FXe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>i($Xe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>i(VXe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>i(zXe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>i(GXe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>i(tS(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>i(tS(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>i(tS(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>i(UXe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>i(BXe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>i(tS(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>i(tS(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{i(WXe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{i(LXe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{i(OXe(o))})}}_wrapDrag(e){const n=e.data,{x:r,y:i}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const l=n.pointer.native,c=n.buttons,{cancelable:u,timestamp:h}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:i,origin:f,pointerType:o,button:a,buttons:c,radius:n.radius,angle:S0e(n.angle),native:l,timestamp:h,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}};function LXe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function OXe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function DXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,screenPoint:qs(s,o),mapPoint:XC(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function jXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,mapPoint:XC(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function FXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:XC(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function $Xe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:XC(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function VXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:XC(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function XC(t,e,n){return t.toMap(qs(e,n),{exclude:[]})}function zXe(t){const{key:e,repeat:n,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-down",key:e,repeat:n,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function GXe(t){const{key:e,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:"key-up",key:e,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function tS(t,e){const{x:n,y:r,button:i,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:u,timestamp:h}=t;return{type:e,x:n,y:r,pointerId:l,pointerType:c,button:i,buttons:s,native:o,timestamp:h,eventId:a,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function UXe(t){const{x:e,y:n,buttons:r,native:i,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:h,timestamp:f}=t;return{type:"pointer-drag",x:e,y:n,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:u,native:i,timestamp:f,eventId:s,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function BXe(t){const{cancelable:e,data:n,timestamp:r}=t,{x:i,y:s,deltaY:o,native:a}=n;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function WXe(t){const{action:e,state:n,device:r}=t.data,{cancelable:i,timestamp:s}=t,{buttons:o,axes:a}=n;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const HXe="z",qXe="r",Gve={cancel:"Escape",complete:"Enter"},LNt={...Gve,redo:qXe,undo:HXe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},ONt={toggle:"Control"},DNt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},jNt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:P1e,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let FNt=class{constructor(){this._bindings=new Map}add(e,n){return this.addToggle(e,r=>{r.type==="key-down"&&n(r)})}addToggle(e,n){const r=KXe.fromDefinition(e,n),i=AC(this._bindings,r.key,()=>[]);return i.push(r),Zn(()=>Lfe(i,r))}register(e,n=pp.WIDGET){return xv([e.on("key-down",r=>this.dispatch(e.inputManager,r),n),e.on("key-up",r=>this.dispatch(e.inputManager,r),n)])}dispatch(e,n){const r=n.key,i=this._bindings.get(r);if(i)for(const s of i)s.process(e,n)}},KXe=class QV{constructor(e,n,r,i,s){this.key=e,this.modifiers=n,this.repeats=r,this.continuePropagation=i,this.callback=s}process(e,n){if(!(n.key!==this.key||"repeat"in n&&n.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||n.stopPropagation(),this.callback(n)}}static fromDefinition(e,n){if(typeof e=="string")return new QV(e,[],!1,!1,n);const{key:r,modifier:i,repeats:s,continuePropagation:o}=e;return new QV(r,i?Array.isArray(i)?i:[i]:[],!!s,!!o,n)}};function YXe(t){return[t.on("before-add",e=>{const n=e.item;if(n==null||t.includes(n))return kt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{const n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function ez(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function XXe(t){return t.type==="key-down"&&t.key===Gve.cancel}function nd(t){return qs(t.x,t.y)}function Uve(t,e){const n=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return n?qs(e.clientX-n.left,e.clientY-n.top):qs(0,0)}function Bve(t,e){return e instanceof Event?Uve(t,e):nd(e)}function Wve(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let E3=class extends Kt{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new Tw,this._grabbedManipulators=new Tw,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,n){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":_re(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!xre(e))break;const i=nd(e),s=O_(i,e.pointerType,n.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:i,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!xre(e))break;const i=this._grabbedManipulators.get(e.pointerId),s=i?.manipulator,o=i?.tool;if(s==null||o==null)break;const a=nd(e);a.x=_u(a.x,0,n.view.width),a.y=_u(a.y,0,n.view.height);const l=i.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}r();break}case"immediate-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools);if(!ZXe(e)){for(const c of n.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,u=!0)}),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),CF(o,r);break}case"click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),CF(o,r);break}case"immediate-double-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&CF(o,r);break}}this._onFocusChange(n.tools)}_releaseManipulatorBeforeDragging(e,n,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:nd(n)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,n){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:nd(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>n.add(i)),this._hoveredManipulators.forEach(({tool:i})=>r.add(i));for(const i of e){i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);const s=this._grabbedManipulators.values(),o=wFe(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:n,setActiveTool:r},i=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},u)=>{o(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(qs(n.x,n.y),r,n.pointerType,e)})}handleHoverEvent(e,n){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!_re(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(nd(e),e.pointerId,e.pointerType,n))}_updateHoveredStateForPointerAtScreenPosition(e,n,r,i){let s=O_(e,r,i);const o=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:n},r)=>{e===r&&(this._hoveredManipulators.delete(e),n.hovering=!1)})}_cursorFromMap(e,n){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return n}};function O_(t,e,n){for(const r of n){if(r.manipulators==null||!ez(r))continue;const i=r.manipulators.intersect(t,e);if(i!=null)return{tool:r,manipulator:i}}return null}function _re(t){return t==="mouse"}function xre(t){return t.pointerType!=="mouse"||t.button===0}function ZXe(t){return!!t.native.shiftKey}function CF(t,e){t?.consumesClicks&&e()}x([E()],E3.prototype,"cursor",null),E3=x([he("esri.views.interactive.ToolViewManagerManipulatorState")],E3);const wre="attached",IF="tools",JXe=1e3;let rd=class extends Kt{constructor(e){super(e),this._updatingHandles=new p1,this._clock=xb,this._manipulatorState=new E3,this.tools=new Lt,this._interacting=!1,this._interactingTimeout=JXe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(Fve,e=>{this._handleInputEvent(e)},pp.TOOL),...YXe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void kt.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const n=this.activeTool;this._set("activeTool",e),n?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const i=ez(r);this.activeTool!=null&&i||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!i)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const n of this.tools)if(n.visible&&n.cursor!=null)return n.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ii(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([mn(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(n=>n.onElevationChange(e)))],wre):this.addHandles(mn(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(wre),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const n of this.tools)n.manipulators&&n.manipulators.forEach(({manipulator:r})=>e(r,n))}_handleInputEvent(e){let n=!1;const r={...e,stopPropagation:()=>{n=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const i of this.tools)!n&&i.visible&&i.handleInputEvent(r);!n&&XXe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),n||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(IF);for(const e of this.tools){if(e instanceof Kt){const n=mn(()=>[e.cursor,e.visible,e.editable],()=>{ez(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(n,IF)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],IF)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(n=>(e==null||n!==e)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}get test(){}};x([E({constructOnly:!0,nonNullable:!0})],rd.prototype,"view",void 0),x([E({value:null})],rd.prototype,"activeTool",null),x([E({readOnly:!0,type:Lt})],rd.prototype,"tools",void 0),x([E()],rd.prototype,"cursor",null),x([E({readOnly:!0})],rd.prototype,"updating",null),x([E()],rd.prototype,"_interacting",void 0),x([E({readOnly:!0})],rd.prototype,"interacting",null),rd=x([he("esri.views.ToolViewManager")],rd);const QXe=new Jn("cyan"),eZe=1,tZe=.25,nZe=new Jn("black"),rZe=.4,iZe=.2,GNt=.25,Hve="default",sZe="temporary",oZe=new Jn("yellow");var tz;let Jl=tz=class extends Kt{constructor(t){super(t),this.name=Hve,this.color=QXe.clone(),this.haloColor=null,this.haloOpacity=eZe,this.fillOpacity=tZe,this.shadowColor=nZe.clone(),this.shadowOpacity=rZe,this.shadowDifference=iZe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new tz({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};x([E({type:String,constructOnly:!0,nonNullable:!0})],Jl.prototype,"name",void 0),x([E({type:Jn,nonNullable:!0})],Jl.prototype,"color",void 0),x([E({type:Jn})],Jl.prototype,"haloColor",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloOpacity",void 0),x([E({nonNullable:!0})],Jl.prototype,"fillOpacity",void 0),x([E({type:Jn,nonNullable:!0})],Jl.prototype,"shadowColor",void 0),x([E({nonNullable:!0})],Jl.prototype,"shadowOpacity",void 0),x([E({nonNullable:!0})],Jl.prototype,"shadowDifference",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloWidth",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloBlur",void 0),Jl=tz=x([he("esri.views.support.HighlightOptions")],Jl);const Lg=Jl;function aZe(){return new(Lt.ofType(Lg))([new Lg({name:Hve}),new Lg({name:sZe,color:oZe})])}let fx=class extends Kt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":lZe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return cZe[this.deviceType]}};x([E({nonNullable:!0,readOnly:!0})],fx.prototype,"nativeIndex",void 0),x([E({type:String,readOnly:!0})],fx.prototype,"deviceType",null),x([E({type:Number,readOnly:!0})],fx.prototype,"axisThreshold",null),fx=x([he("esri.views.input.gamepad.GamepadInputDevice")],fx);const hH=fx,lZe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),cZe={standard:.15,spacemouse:.025,unknown:0};let KS=class extends Kt{constructor(e){super(e),this.devices=new Lt,this.enabledFocusMode="document"}};x([E({type:Lt.ofType(hH),readOnly:!0})],KS.prototype,"devices",void 0),x([E({type:["document","view","none"]})],KS.prototype,"enabledFocusMode",void 0),KS=x([he("esri.views.input.gamepad.GamepadSettings")],KS);const uZe=KS;let S3=class extends Kt{constructor(){super(...arguments),this.gamepad=new uZe}};x([E({readOnly:!0})],S3.prototype,"gamepad",void 0),S3=x([he("esri.views.input.Input")],S3);const hZe=S3,PF=()=>E({type:["pan","rotate","zoom","none"],nonNullable:!0});let by=class extends Kt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};x([PF()],by.prototype,"dragPrimary",void 0),x([PF()],by.prototype,"dragSecondary",void 0),x([PF()],by.prototype,"dragTertiary",void 0),x([E({type:["zoom","none"],nonNullable:!0})],by.prototype,"mouseWheel",void 0),by=x([he("esri.views.navigation.NavigationActionMap")],by);const dH=by;let jm=class extends Kt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};x([E({type:Boolean,nonNullable:!0})],jm.prototype,"enabled",void 0),x([E({type:hH})],jm.prototype,"device",void 0),x([E({type:["pan","zoom"],nonNullable:!0})],jm.prototype,"mode",void 0),x([E({type:["forward-down","forward-up"],nonNullable:!0})],jm.prototype,"tiltDirection",void 0),x([E({type:Number,nonNullable:!0})],jm.prototype,"velocityFactor",void 0),jm=x([he("esri.views.navigation.gamepad.GamepadSettings")],jm);const qve=jm;let Fm=class extends Kt{constructor(e){super(e),this.actionMap=new dH,this.browserTouchPanEnabled=!0,this.gamepad=new qve,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){w9(kt.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};x([E({type:dH,nonNullable:!0})],Fm.prototype,"actionMap",void 0),x([E({type:Boolean})],Fm.prototype,"browserTouchPanEnabled",void 0),x([E({type:qve,nonNullable:!0})],Fm.prototype,"gamepad",void 0),x([E({type:Boolean})],Fm.prototype,"momentumEnabled",void 0),x([E({type:Boolean})],Fm.prototype,"mouseWheelZoomEnabled",null),Fm=x([he("esri.views.navigation.Navigation")],Fm);const TO=Fm;function YNt(t,e,n){const r=Kve(t),i=e,s=dZe(r,i,n);if(r){const o=al.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!n&&o!==r.heightUnit){const a=new Qe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Qe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!fZe(t)||s===4)return new Qe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=r?.heightUnit||"unknown",a=i?.heightUnit||"unknown",l=new Qe("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new Qe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 2:{const o=r?.heightModel||"unknown",a=i?.heightModel||"unknown",l=new Qe("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new Qe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 3:{const o=r?.vertCRS||"unknown",a=i?.vertCRS||"unknown",l=new Qe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new Qe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}}return null}function dZe(t,e,n){if(!bre(t)||!bre(e))return 4;if(t==null||e==null)return 0;if(!n&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function bre(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function fZe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Zve(t)}function Kve(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?IC(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&Yve(t)&&t.heightModelInfo?t.heightModelInfo:Zve(t)?al.deriveUnitFromSR(mZe,t.spatialReference):null}function Yve(t){return"heightModelInfo"in t}function Xve(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Zve(t){return Xve(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Jve(t)}function pZe(t){return t.layers!=null||Jve(t)||Xve(t)||Yve(t)}function Jve(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const mZe=new al({heightModel:"gravity-related-height"});let nz,RF=null;async function gZe(t){RF||(RF=ge(()=>import("./geometryServiceUtils-CSW5y3O7.js"),__vite__mapDeps([297,298])).then(e=>nz=e)),await RF,gi(t)}async function Qve(t,e,n,r){if(!t)return null;const i=t.spatialReference;return Op()||Sh(i,e)?Sv(t,e):nz?nz.projectGeometry(t,e,n,r):(await Promise.race([gZe(r),e0(r)]),Qve(t,e,n,r))}async function XNt(t,e){try{return t?.spatialReference?await Rye(t,e):null}catch{return null}}let Kr=class extends Kt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=B1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),n=[];return this.priorityCollection!=null&&n.push(this.priorityCollection),n.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),n}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const i=this._getSupportedSpatialReferences(r);if(i.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,i);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const n=this._pickSpatialReferenceCandidate(e);return{spatialReference:n?.spatialReference??null,viewingMode:n?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),n=this.spatialReference;if(!n)return{updating:this._spatialReferenceTask.updating};let r;const i=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(n))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const n=this._collectLayers(this.mapCollections,r=>{const i=Kve(r);return!!i&&(e={heightModelInfo:i,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>pZe(r));return{...e,updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],n=this._collectLayers(this.mapCollections,r=>{const i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:i[0],o=i.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of i)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:n}}get _extentTask(){const{candidates:e,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=B1(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:QL(async s=>{try{const o=await Qve(r.extent,i,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(va(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,n){if(e==null)return n;const r=new Array;for(const i of e)for(const s of n){if(!i.spatialReference.equals(s.spatialReference))continue;const o=vZe(i.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:i.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const n=this.defaultSpatialReference;return e==null||e.length<1?n?{spatialReference:n,viewingMode:null}:null:(n!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(n))&&(e=e.filter(({spatialReference:r})=>r.equals(n))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(n.length===0)return[];const r=[];for(const i of n){const s=this.getSpatialReferenceSupport(i,e);if(s!=null){const o=s.constraints??[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const n=this.spatialReference;return e.find(({extent:r})=>n.equals(r.spatialReference))||e[0]}_collectLayers(e,n,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const i=new yZe(r,n);for(const s of e)if(this._collectCollection(s,i),i.done||i.preloading===this.sourcePreloadCount)break;return i.updating}_collectCollection(e,n){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&n.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":if(n.updating||(n.done=n.pushLayer(r)),n.done||n.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},n)}if(n.done||n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(n=>{Sa(n)}),"loading"):e.loadStatus:"loaded"}};x([E()],Kr.prototype,"required",void 0),x([E({constructOnly:!0})],Kr.prototype,"map",void 0),x([E({constructOnly:!0})],Kr.prototype,"getSpatialReferenceSupport",void 0),x([E()],Kr.prototype,"defaultSpatialReference",void 0),x([E()],Kr.prototype,"userSpatialReference",void 0),x([E()],Kr.prototype,"sourcePreloadCount",void 0),x([E()],Kr.prototype,"priorityCollection",void 0),x([E()],Kr.prototype,"requiresExtentInSpatialReference",void 0),x([E()],Kr.prototype,"suspended",void 0),x([E({readOnly:!0})],Kr.prototype,"ready",null),x([E({readOnly:!0})],Kr.prototype,"heightModelInfoReady",null),x([E({readOnly:!0})],Kr.prototype,"spatialReference",null),x([E({readOnly:!0})],Kr.prototype,"extent",null),x([E({readOnly:!0})],Kr.prototype,"heightModelInfo",null),x([E({readOnly:!0})],Kr.prototype,"vcsWkid",null),x([E({readOnly:!0})],Kr.prototype,"latestVcsWkid",null),x([E({readOnly:!0})],Kr.prototype,"viewingMode",null),x([E({readOnly:!0})],Kr.prototype,"tileInfo",null),x([E({readOnly:!0})],Kr.prototype,"mapCollections",null),x([E({readOnly:!0})],Kr.prototype,"_spatialReferenceTask",null),x([E({readOnly:!0})],Kr.prototype,"_tileInfoTask",null),x([E({readOnly:!0})],Kr.prototype,"_heightModelInfoTask",null),x([E({readOnly:!0})],Kr.prototype,"_extentCandidatesTask",null),x([E()],Kr.prototype,"_extentTask",null),x([E()],Kr.prototype,"_projectExtentTask",void 0),Kr=x([he("esri.views.support.DefaultsFromMap")],Kr);let yZe=class{constructor(e,n){this.layerFilter=e,this.pushLayer=n,this.preloading=-1,this.updating=!1,this.done=!1}};function vZe(t,e){return t!=null?e!=null?t===e&&t:t:e}function _Ze(t){return"tryRecycleWith"in t}let xZe=class{constructor(e,n,r){this.layer=e,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=Ec(),this.promise=this._deferred.promise,vu(this._controller.signal,()=>{this._recycleController?.abort();const i=new Qe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(i)})}tryRecycle(e){if(!this.done||!this.layerView||!_Ze(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const n=this.layer.type,r=this._recycleController.signal;for(let i=0;i<e.length;i++){const s=e[i];if(s.type!==n)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(i,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(gi(r),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:n,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:n},layer:r}=this;this._map=e.map;try{let i,s;if(await r.load({signal:n}),r.prefetchResources&&await r.prefetchResources({signal:n}),wZe(r))i=await r.createLayerView(e,{signal:n});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Qe("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);gi(n),i="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{s=ii(s),i.destroyed||i.destroy(),this.done=!0};s=vu(n,o),gi(n);try{await i.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new Qe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=i,r.emit("layerview-create",{view:e,layerView:i}),e.emit("layerview-create",{layer:r,layerView:i}),this.done=!0,this._deferred?.resolve(i)}catch(i){r.emit("layerview-create-error",{view:e,error:i}),e.emit("layerview-create-error",{layer:r,error:i}),this.done=!0,this._deferred?.reject(new Qe("layerview:create-error","layerview creation failed",{layer:r,error:i}))}}};function wZe(t){return t.createLayerView!==wi.prototype.createLayerView}function bZe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let nl=class extends Kt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new p1,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const n=this.view.map?.allLayers;if(n)for(const r of n)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Ec(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(kb(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:n}=this.view;if(!n)return void this.clear();if(this._map!==n&&(this.clear(),this._map=n),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],s=this.view.ready,o=u=>{if(u!=null){for(const h of u)if(h){if(this.layerViewFilter?.(h)===!1)continue;r.add(h);const f=this._layerLayerViewInfoMap.get(h);f&&s?f.start():f||this._recyclingInfoMap.has(h)||i.push(h),"layers"in h&&h.layers&&o(h.layers)}}};for(const u of this._rootCollectionNames)o(wd(this,u));const a=new Array,l=u=>{const h=u.tryRecycle(i);h?(this._recyclingInfoMap.set(u.layer,u),this.notifyChange("updating"),h.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule(),this.notifyChange("updating")}).catch(f=>{Sa(f)||(this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(u)};for(const u of this._layerLayerViewInfoMap.values())r.has(u.layer)||(this._layerLayerViewInfoMap.delete(u.layer),l(u));for(const u of this._recyclingInfoMap.values())r.has(u.layer)||(this._recyclingInfoMap.delete(u.layer),l(u));for(const u of i)this._createLayerView(u);this._refreshCollections(),a.forEach(u=>u.destroy());const c=[n?.ground?.layers,n?.basemap?.baseLayers,n?.basemap?.groundLayers,n?.basemap?.referenceLayers,n?.layers].filter(u=>!!u);r.forEach(u=>"layers"in u&&c.push(u.layers)),this.addHandles(c.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([J1(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),mn(()=>{const e=this.view,n=e?.map;return[n?.basemap,n?.ground,n?.layers,e?.ready]},()=>this._reschedule(),oa)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),aR(this._recyclingInfoMap),aR(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Pr()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Rje(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),aR(this._layerLayerViewInfoMap),aR(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const n=this._layerLayerViewInfoMap.get(e)?.promise;if(!n){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new Qe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return n}isCreatingLayerViewsForLayer(e,n){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const i=r.layerView;return!(!i||!n||i.parent===n)||!!(r.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,i))}_refreshCollections(){for(const[e,n]of this._layersToLayerViews)this._populateLayerViewsOwners(wd(this,e),wd(this,n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())wd(this,e)?.removeAll()}_populateLayerViewsOwners(e,n,r){if(!e||!n)return void n?.removeAll();let i=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o?.layerView)continue;const{layerView:a}=o;a.layer=s,a.parent=r,n.at(i)!==a&&n.splice(i,0,a),"layers"in s&&bZe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++i}i<n.length&&n.splice(i)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const n=new xZe(e,this.view,this.layerViewImporter);n.promise?.then(()=>this._refreshCollections(),r=>{r&&(Sa(r)||r.name==="cancelled:layerview-create")||kt.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};x([E()],nl.prototype,"_workPromise",void 0),x([E({readOnly:!0})],nl.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],nl.prototype,"_layersToLayerViews",void 0),x([E({constructOnly:!0})],nl.prototype,"layerviewMapping",void 0),x([E({readOnly:!0})],nl.prototype,"_rootCollectionNames",null),x([E({constructOnly:!0})],nl.prototype,"layerViewFilter",void 0),x([E()],nl.prototype,"layerViewImporter",void 0),x([E()],nl.prototype,"supportsGround",void 0),x([E({readOnly:!0})],nl.prototype,"updating",null),x([E({readOnly:!0})],nl.prototype,"updatingRemaining",null),x([E({constructOnly:!0})],nl.prototype,"view",void 0),nl=x([he("esri.views.support.LayerViewManager")],nl);const EZe=nl;let px=class extends Kt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};x([E()],px.prototype,"featureTitleFields",void 0),x([E()],px.prototype,"utilityNetworkFields",void 0),x([E()],px.prototype,"globalIdField",void 0),px=x([he("esri.views.support.RequiredFieldsOptions")],px);const SZe=px;var mx,$g;let Ot=($g=class extends JL(eW){constructor(e){super(e),this._userSpatialReference=null,this.handles=new Sb,this.updatingHandles=new p1,this.allLayerViews=new nh({getCollections:()=>this.layerviewCollections,getChildrenFunction:kZe}),this.analyses=new W2,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new HT,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Lt,this.magnifier=new jve,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new Lt,this._highPriorityCursorHandles=new Lt,this.input=new hZe,this.navigation=new TO,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new zve(this),this.persistableViewModels=new Lt,this.requiredFieldsOptions=new SZe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(mn(()=>this.preconditionsReady,n=>{const r=this.ready;if(n?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,mx.views.add(this)):(this._lockedSpatialReference=null,mx.views.remove(this)),this.notifyChange("spatialReference"),!n&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(n&&!r){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new Qe("view:startup-error","View._startup failed",i)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Qg))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,TW(()=>this.ready)))),this.basemapView=new yXe({view:this}),this.layerViewManager=new EZe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new rd({view:this}),this.selectionManager=new RXe({view:this}),this.addHandles([Sc(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{kt.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),mn(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},oa),mn(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Qg),mn(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},oa)])}get _layerToLayerviewMapping(){return mx._layerToLayerview}destroy(){this.destroyed||(mx.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Di(this.graphics),this.analyses=Di(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Di(this.analysisViewManager),this.toolViewManager=Di(this.toolViewManager),this.layerViewManager=Di(this.layerViewManager),this.selectionManager=Di(this.selectionManager),this.basemapView=Di(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Di(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return kt.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Kr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,n)=>this.getSpatialReferenceSupport(e,n),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??aZe()}set highlights(e){this._set("highlights",Cd(e,this._get("highlights"),Lt.ofType(Lg)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||N9(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(kt.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),N9(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&n&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=QL(i=>gpe(_e("view-readyState-waiting-delay"),null,i)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=B1(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const n=!yo(e,this._get("spatialReference"));this._set("_userSpatialReference",e),n&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Ud}set timeZone(e){this._userTimeZone=e,rze(e)||kt.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,n="low"){const r=n==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,i={cursor:e},s=Zn(()=>r.remove(i));return r.add(i),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new JV}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new Qe("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,n){return this.isResolved()&&!this.ready&&kt.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,n)}forceReadyCycle(){this.ready&&(Sc(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,n){return super.on(e,n)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const n=document.createElement("div");n.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const i=document.createElement("div");i.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",i.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",n.appendChild(r),n.appendChild(i),n.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(n),e}}},mx=$g,$g._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],$g.views=new Lt,$g);x([E()],Ot.prototype,"_userSpatialReference",void 0),x([E()],Ot.prototype,"activeTool",null),x([E({readOnly:!0})],Ot.prototype,"allLayerViews",void 0),x([E({readOnly:!0})],Ot.prototype,"layerviewCollections",null),x([E(k7(W2,"analyses"))],Ot.prototype,"analyses",void 0),x([E()],Ot.prototype,"animation",null),x([E()],Ot.prototype,"basemapView",void 0),x([E()],Ot.prototype,"center",null),x([E()],Ot.prototype,"defaultsFromMapSettings",null),x([E()],Ot.prototype,"defaultsFromMap",null),x([E()],Ot.prototype,"dependencies",void 0),x([E()],Ot.prototype,"displayFilterEnabled",void 0),x([E({type:Vn})],Ot.prototype,"extent",null),x([E()],Ot.prototype,"fatalError",void 0),x([E(k7(HT,"graphics"))],Ot.prototype,"graphics",void 0),x([E({readOnly:!0,type:al})],Ot.prototype,"heightModelInfo",null),x([E({type:Lt.ofType(Lg)})],Ot.prototype,"highlights",null),x([E({readOnly:!0})],Ot.prototype,"interacting",null),x([E({constructOnly:!0})],Ot.prototype,"layerViewFilter",void 0),x([E({readOnly:!0})],Ot.prototype,"navigating",null),x([E({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Ot.prototype,"preconditionsReady",null),x([E({readOnly:!0})],Ot.prototype,"typeSpecificPreconditionsReady",void 0),x([E({type:Lt,readOnly:!0})],Ot.prototype,"layerViews",void 0),x([E()],Ot.prototype,"resolution",null),x([E({type:jve})],Ot.prototype,"magnifier",void 0),x([E({value:null,type:Kye})],Ot.prototype,"map",null),x([E()],Ot.prototype,"padding",void 0),x([E({readOnly:!0})],Ot.prototype,"ready",void 0),x([E()],Ot.prototype,"_readyStateWaitingTask",void 0),x([E({readOnly:!0})],Ot.prototype,"readyState",null),x([E({type:Wt})],Ot.prototype,"spatialReference",null),x([E()],Ot.prototype,"stationary",null),x([E({type:Ma})],Ot.prototype,"timeExtent",null),x([E({type:String,nonNullable:!0})],Ot.prototype,"timeZone",null),x([E()],Ot.prototype,"tools",null),x([E()],Ot.prototype,"toolViewManager",void 0),x([E({readOnly:!0})],Ot.prototype,"type",void 0),x([E({type:Number})],Ot.prototype,"scale",void 0),x([E({readOnly:!0})],Ot.prototype,"updating",void 0),x([E({readOnly:!0})],Ot.prototype,"initialExtentRequired",void 0),x([E({readOnly:!0})],Ot.prototype,"initialExtent",null),x([E()],Ot.prototype,"cursor",null),x([E({readOnly:!0})],Ot.prototype,"input",void 0),x([E({type:TO,nonNullable:!0})],Ot.prototype,"navigation",void 0),x([E()],Ot.prototype,"layerViewManager",void 0),x([E()],Ot.prototype,"analysisViewManager",void 0),x([E()],Ot.prototype,"selectionManager",void 0),x([E()],Ot.prototype,"width",void 0),x([E()],Ot.prototype,"height",void 0),x([E({readOnly:!0})],Ot.prototype,"resizing",void 0),x([E({value:null,readOnly:!0})],Ot.prototype,"size",null),x([E({readOnly:!0})],Ot.prototype,"suspended",void 0),x([E({readOnly:!0})],Ot.prototype,"viewEvents",void 0),x([E({readOnly:!0})],Ot.prototype,"persistableViewModels",void 0),x([E()],Ot.prototype,"_isValid",void 0),x([E()],Ot.prototype,"_readyCycleForced",void 0),x([E()],Ot.prototype,"_lockedSpatialReference",void 0),x([E()],Ot.prototype,"_userTimeZone",void 0),x([E()],Ot.prototype,"_lockedTimeZone",void 0),x([E()],Ot.prototype,"_userTimeExtent",void 0),x([E()],Ot.prototype,"_lockedTimeExtent",void 0),x([E({type:JV})],Ot.prototype,"theme",void 0),x([E({readOnly:!0,type:JV})],Ot.prototype,"effectiveTheme",null),Ot=mx=x([he("esri.views.View")],Ot);const MF=globalThis.$arcgis;MF&&!MF.views&&Object.defineProperty(MF,"views",{configurable:!1,enumerable:!0,writable:!1,value:Ot.views});const TZe=Ot;function kZe(t){return t.layerViews}function zi(){return[0,0]}function AZe(t){return[t[0],t[1]]}function ZC(t,e){return[t,e]}function CZe(t,e){return[t,e]}function IZe(t,e=zi()){const n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function e_e(){return zi()}function t_e(){return ZC(1,1)}function n_e(){return ZC(1,0)}function r_e(){return ZC(0,1)}const PZe=e_e(),RZe=t_e(),MZe=n_e(),NZe=r_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:RZe,UNIT_X:MZe,UNIT_Y:NZe,ZEROS:PZe,clone:AZe,create:zi,freeze:CZe,fromArray:IZe,fromValues:ZC,ones:t_e,unitX:n_e,unitY:r_e,zeros:e_e},Symbol.toStringTag,{value:"Module"}));function LZe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function i_e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function OZe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function fH(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5];let l=n*s-r*i;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*o)*l,t[5]=(r*o-n*a)*l,t):null}function DZe(t){return t[0]*t[3]-t[1]*t[2]}function s_e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],g=n[4],y=n[5];return t[0]=r*c+s*u,t[1]=i*c+o*u,t[2]=r*h+s*f,t[3]=i*h+o*f,t[4]=r*g+s*y+a,t[5]=i*g+o*y+l,t}function JC(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*c,t[1]=i*u+o*c,t[2]=r*-c+s*u,t[3]=i*-c+o*u,t[4]=a,t[5]=l,t}function kO(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function q2(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=i*c+o*u+l,t}function o_e(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function a_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function pH(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function jZe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function FZe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function $Ze(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function l_e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function VZe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function zZe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function GZe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function UZe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5],y=Al();return Math.abs(n-l)<=y*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=y*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=y*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=y*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-f)<=y*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-g)<=y*Math.max(1,Math.abs(a),Math.abs(g))}const BZe=s_e,WZe=l_e;Object.freeze(Object.defineProperty({__proto__:null,add:$Ze,copy:LZe,determinant:DZe,equals:UZe,exactEquals:GZe,frob:FZe,fromRotation:o_e,fromScaling:a_e,fromTranslation:pH,identity:i_e,invert:fH,mul:BZe,multiply:s_e,multiplyScalar:VZe,multiplyScalarAndAdd:zZe,rotate:JC,scale:kO,set:OZe,str:jZe,sub:WZe,subtract:l_e,translate:q2},Symbol.toStringTag,{value:"Module"}));function Rd(){return[1,0,0,1,0,0]}function HZe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function qZe(t,e,n,r,i,s){return[t,e,n,r,i,s]}const KZe=Rd();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:KZe,clone:HZe,create:Rd,fromValues:qZe},Symbol.toStringTag,{value:"Module"}));const bR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new As({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Wt.WebMercator}),minus180Line:new As({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Wt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new As({paths:[[[180,-180],[180,180]]],spatialReference:Wt.WGS84}),minus180Line:new As({paths:[[[-180,-180],[-180,180]]],spatialReference:Wt.WGS84})}};function Zy(t,e){return Math.ceil((t-e)/(2*e))}function c_e(t,e){const n=KT(t);for(const r of n)for(const i of r)i[0]+=e;return t}function KT(t){return WW(t)?t.rings:t.paths}function n5t(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function YZe(t){return typeof t=="string"?Ha(t):et(t)}function XZe(t,e,n){const r={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[i]=s.map(o=>XZe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n?.[i]);r[i]=e?o:JSON.stringify(o)}else r[i]=e?s:JSON.stringify(s);else r[i]=s}return r}function ZZe(t,e){return t?e&&zB(t)?e:VB(t)??Zr?.findCredential(t)?.token:null}async function r5t(t,e,n){const r=ZZe(t,e);return r||(!Zr&&nr.request.useIdentity&&await ge(()=>import("./IdentityManager-DiKupks4.js"),__vite__mapDeps([19,20])),(await Zr.getCredential(t,n))?.token)}async function JZe(t,e,n,r){const i=YZe(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:Rme(s),target:JSON.stringify({geometryType:HW(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await rs(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(u=>{const h=U2(u);return h.spatialReference=s,h})}}function QZe(t){return{geometryType:HW(t[0]),geometries:t.map(e=>e.toJSON())}}function eJe(t,e,n){const r=tHe(e);return t.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}async function tJe(t,e,n){const r=typeof t=="string"?Ha(t):t,i=e[0].spatialReference,s=HW(e[0]),o={...n,query:{...r.query,f:"json",sr:Rme(i),geometries:JSON.stringify(QZe(e))}},{data:a}=await rs(r.path+"/simplify",o);return eJe(a.geometries,s,i)}const u_e=()=>kt.getLogger("esri.geometry.support.normalizeUtils");function nJe(t){return t.type==="polygon"}function rJe(t){return t[0].type==="polygon"}function iJe(t){return t[0].type==="polyline"}function Ere(t){const e=[];let n=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&e.push([(n+r)/2,0])}return e}function sJe(t,e){if(!(t instanceof As||t instanceof bi)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw u_e().error(i),new Qe("internal:geometry",i)}const n=KT(t),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],u=i[o+1][1],h=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),f=(u-l)/h,g=(c-a)/h,y=h/e;if(y>1){for(let A=1;A<=y-1;A++){const C=A*e,I=g*C+a,R=f*C+l;s.push([I,R])}const _=(h+Math.floor(y-1)*e)/2,b=g*_+a,T=f*_+l;s.push([b,T])}s.push([c,u])}}return nJe(t)?new bi({rings:r,spatialReference:t.spatialReference}):new As({paths:r,spatialReference:t.spatialReference})}function Sre(t,e,n){if(e){const r=sJe(t,1e6);t=SS(r,!0)}return n&&(t=c_e(t,n)),t}function Tre(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const i=Zy(r,e);t[0]=r+i*(-2*e)}else if(r<n){const i=Zy(r,n);t[0]=r+i*(-2*n)}}else{const r=t.x;if(r>e){const i=Zy(r,e);t=t.clone().offset(i*(-2*e),0)}else if(r<n){const i=Zy(r,n);t=t.clone().offset(i*(-2*n),0)}}return t}function oJe(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=KT(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let u=0;for(let f=0;f<l.length;f++){const g=l[f][0];u=g>u?g:u}u=Number(u.toFixed(9));const h=-360*Zy(u,180);for(let f=0;f<l.length;f++){const g=s.getPoint(a,f);s.setPoint(a,f,g.clone().offset(h,0))}return!0}})}if(i===n){if(rJe(t))for(const a of KT(s))t[i]=t[i].addRing(a);else if(iJe(t))for(const a of KT(s))t[i]=t[i].addPath(a)}else n=i,t[i]=s}return t}async function aJe(t,e,n){if(!Array.isArray(t))return aJe([t],e);e&&typeof e!="string"&&u_e().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??nr.geometryServiceUrl;let i,s,o,a,l,c,u,h,f=0;const g=[],y=[];for(const I of t)if(I!=null)if(i||(i=I.spatialReference,s=Ua(i),o=i.isWebMercator,c=o?102100:4326,a=bR[c].maxX,l=bR[c].minX,u=bR[c].plus180Line,h=bR[c].minus180Line),s)if(I.type==="mesh")y.push(I);else if(I.type==="point")y.push(Tre(I.clone(),a,l));else if(I.type==="multipoint"){const R=I.clone();R.points=R.points.map(V=>Tre(V,a,l)),y.push(R)}else if(I.type==="extent"){const R=I.clone()._normalize(!1,!1,s);y.push(R.rings?new bi(R):R)}else if(I.extent){const R=I.extent,V=Zy(R.xmin,l)*(2*a);let P=V===0?I.clone():c_e(I.clone(),V);R.offset(V,0);let{xmin:N,xmax:L}=R;N=Number(N.toFixed(9)),L=Number(L.toFixed(9)),R.intersects(u)&&L!==a?(f=L>f?L:f,P=Sre(P,o),g.push(P),y.push("cut")):R.intersects(h)&&N!==l?(f=L*(2*a)>f?L*(2*a):f,P=Sre(P,o,360),g.push(P),y.push("cut")):y.push(P)}else y.push(I.clone());else y.push(I);else y.push(I);let _=Zy(f,a),b=-90;const T=_,A=new As;for(;_>0;){const I=360*_-180;A.addPath([[I,b],[I,-1*b]]),b*=-1,_--}if(g.length>0&&T>0){const I=oJe(g,await JZe(r,g,A,n)),R=[],V=[];for(let L=0;L<y.length;L++){const O=y[L];if(O!=="cut")V.push(O);else{const F=I.shift(),G=t[L];G!=null&&G.type==="polygon"&&G.rings&&G.rings.length>1&&F.rings.length>=G.rings.length?(R.push(F),V.push("simplify")):V.push(o?h1(F):F)}}if(!R.length)return V;const P=await tJe(r,R,n),N=[];for(let L=0;L<V.length;L++){const O=V[L];O!=="simplify"?N.push(O):N.push(o?h1(P.shift()):P.shift())}return N}const C=[];for(let I=0;I<y.length;I++){const R=y[I];if(R!=="cut")C.push(R);else{const V=g.shift();C.push(o===!0?h1(V):V)}}return C}function lJe(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&Ua(t.spatialReference);if(!n)return e;const[r,i]=n.valid,s=2*i,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=i||o>s||l<r||c>i)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=Ere(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=Ere(t.paths);break;case"multipoint":a=t.points}const u=e.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=i,c=Math.max(f,c)):(f-=i,l=Math.min(f,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=i,u.xmax-=i,u):e}function mH(t,e,n){const r=Ua(n);if(r==null)return t;const[i,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<i&&(a=-Math.ceil(Math.abs(e-i)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<i&&(l=-Math.ceil(Math.abs(t-i)/o));let c=t+(a-l)*o;const u=c-e;return u>s?c-=o:u<i&&(c+=o),c}function i5t(t,e){return gH(e)?.normalize(t)??t}function gH(t){const e=Ua(t);if(e==null)return null;const[n,r]=e.valid;return new vO(n,r)}const s5t=gH(Wt.WGS84);gH(Wt.WebMercator);const h_e=96,d_e=39.37,cJe=180/Math.PI;function f_e(t){return t.wkid?t:t.spatialReference||Wt.WGS84}function yH(t,e){return e.type?co(t,e.x,e.y):yw(t,e)}function p_e(t){return Jd(t)}function AO(t,e,n=0){let r=t.width,i=t.height;if(n!==0){const a=VC(n),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,i=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,i/o)*yJe(t.spatialReference)}async function YS(t,e,n,r){let i,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Lt.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(u=>"attributes"in u),l=t.some(u=>!u.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const u=new Map;for(const y of t){const _=y.layer,b=u.get(_)||[],T=y.attributes[_.objectIdField];T!=null&&b.push(T),u.set(_,b)}const h=[];u.forEach((y,_)=>{const b=e.allLayerViews?.find(T=>T.layer.id===_.id);if(b&&"queryFeatures"in b){const T=_.createQuery();T.objectIds=y,T.returnGeometry=!0,h.push(b.queryFeatures(T))}});const f=await Promise.all(h),g=[];for(const y of f)if(y&&y.features&&y.features.length)for(const _ of y.features)_.geometry!=null&&g.push(_.geometry);c=g}for(const u of c)r=await YS(u,e,n,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")i=new Qt(t);else if(t instanceof Us)i=t;else if("geometry"in t){if(t.geometry)i=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0,i=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new Vn({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=lJe(i);break;default:s=i.extent}if(!s)return null;Op()||Sh(s.spatialReference,n)||await e0();const o=Sv(s,n);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=mH(a.x,r.center.x,n),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function uJe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,n=0;for(const r of t){const i=r.layer;i?.minScale&&i.maxScale&&(e=i.minScale<e?i.minScale:e,n=i.maxScale>n?i.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function kre(t,e){const n=f_e(t);return yo(n,e)||n.imageCoordinateSystem||e.imageCoordinateSystem?t:Sv(t,e)}async function hJe(t,e){if(!t||!e)return new pu({targetGeometry:new Qt,scale:0,rotation:0});let n=e.spatialReference;const{constraints:r,padding:i,viewpoint:s,size:o}=e,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;t instanceof pu?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof Vn?c=t:t instanceof Us?c=await YS(t,e,n):t&&(c=await YS(t.center,e,n)||await YS(t.target,e,n)||await YS(t,e,n)),!c&&s?.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),n||(n=f_e(e.spatialReference||e.extent||c)),Op()||yo(c.spatialReference,n)||Sh(c.spatialReference,n)||await e0();const u=kre(c,n),h="center"in u?u.center:u;e.pickClosestTarget!==!1&&h.type==="point"&&s.targetGeometry?.type==="point"&&(h.x=mH(h.x,s.targetGeometry.x,h.spatialReference));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:s&&(f=s.rotation);let g=0;g=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:AO(kre(c.extent,n),a,f);const y=uJe(t.target??t);y&&(y.min&&y.min<g?g=y.min:y.max&&y.max>g&&(g=y.max));let _=new pu({targetGeometry:h,scale:g,rotation:f});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function ma(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function dJe(t,e,n){return n?co(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):GC(t,e,.5)}const fJe=(function(){const t=zi();return function(e,n,r){const i=n.targetGeometry;yH(t,i);const s=.5*Lb(n);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=i.spatialReference,e}})();function pJe(t,e,n,r,i){return rz(t,e,n.center),t.scale=AO(n,r),i?.constraints?.constrain(t),t}function mJe(t,e,n,r){return xH(t,e,n,r),fH(t,t)}const m_e=(function(){const t=zi();return function(e,n,r){return OW(e,vJe(e,n),dJe(t,n,r))}})(),gJe=(function(){const t=Rd(),e=zi();return function(n,r,i,s){const o=Lb(r),a=vH(r);return co(e,o,o),a_e(t,e),JC(t,t,a),q2(t,t,m_e(e,i,s)),q2(t,t,[0,s.top-s.bottom]),co(n,t[4],t[5])}})();function Lb(t){return t.scale*g_e(t.targetGeometry?.spatialReference)}function g_e(t){return fc(t)?1/(p_e(t)*d_e*h_e):1}function vH(t){return LW(t.rotation)||0}function yJe(t){return fc(t)?p_e(t)*d_e*h_e:1}function vJe(t,e){return GC(t,e,.5)}const _H=(function(){const t=zi(),e=zi(),n=zi();return function(r,i,s,o,a,l){return W0e(t,i),GC(e,s,.5*l),co(n,1/o*l,-1/o*l),pH(r,e),a&&JC(r,r,a),kO(r,r,n),q2(r,r,t),r}})(),xH=(function(){const t=zi();return function(e,n,r,i){const s=Lb(n),o=vH(n);return yH(t,n.targetGeometry),_H(e,t,r,s,o,i)}})(),_Je=(function(){const t=zi();return function(e,n,r,i){const s=Lb(n);return yH(t,n.targetGeometry),_H(e,t,r,s,0,i)}})();function y_e(t){const e=Ua(t);return e?e.valid[1]-e.valid[0]:0}function xJe(t,e){return Math.round(y_e(t)/e)}const wJe=(function(){const t=zi(),e=zi(),n=[0,0,0];return function(r,i,s){aA(t,r,i),u7(t,t),aA(e,r,s),u7(e,e),q0e(n,t,e);let o=Math.acos(H0e(t,e)/(SN(t)*SN(e)))*cJe;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),bJe=(function(){const t=zi();return function(e,n,r,i){const s=e.targetGeometry;return ma(e,n),gJe(t,n,r,i),s.x+=t[0],s.y+=t[1],e}})(),rz=function(t,e,n){ma(t,e);const r=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t},EJe=(function(){const t=zi();return function(e,n,r,i,s){s||(s="center"),OW(t,r,i),GC(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":co(t,0,0);break;case"left":co(t,-o,0);break;case"top":co(t,0,a);break;case"right":co(t,o,0);break;case"bottom":co(t,0,-a);break;case"top-left":co(t,-o,a);break;case"bottom-left":co(t,-o,-a);break;case"top-right":co(t,o,a);break;case"bottom-right":co(t,o,-a)}return CO(e,n,t),e}})();function o5t(t,e,n){return ma(t,e),t.rotation+=n,t}function SJe(t,e,n){return ma(t,e),t.rotation=n,t}const TJe=(function(){const t=zi();return function(e,n,r,i,s){return ma(e,n),isNaN(r)||r===0||(__e(t,i,n,s),e.scale=n.scale*r,x_e(t,t,e,s),CO(e,e,co(t,t[0]-i[0],i[1]-t[1]))),e}})();function Are(t,e,n){return ma(t,e),t.scale=n,t}const v_e=(function(){const t=zi();return function(e,n,r,i,s,o){return ma(e,n),isNaN(r)||r===0||(__e(t,s,n,o),e.scale=n.scale*r,e.rotation+=i,x_e(t,t,e,o),CO(e,e,co(t,t[0]-s[0],s[1]-t[1]))),e}})(),a5t=(function(){const t=zi(),e=zi();return function(n,r,i,s,o,a,l){return m_e(e,a,l),z0e(t,o,e),s?v_e(n,r,i,s,t,a):TJe(n,r,i,t,a)}})(),__e=(function(){const t=Rd();return function(e,n,r,i){return dd(e,n,mJe(t,r,i,1))}})(),x_e=(function(){const t=Rd();return function(e,n,r,i){return dd(e,n,xH(t,r,i,1))}})(),CO=(function(){const t=zi(),e=Rd();return function(n,r,i){ma(n,r);const s=Lb(r),o=n.targetGeometry;return o_e(e,vH(r)),kO(e,e,ZC(s,s)),dd(t,i,e),o.x+=t[0],o.y+=t[1],n}})();function w_e(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function kJe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function AJe(t,e,n,r,i,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function b_e(t,e,n,r){const i=e[r],s=e[r+1];t[r]=n[0]*i+n[2]*s+n[4],t[r+1]=n[1]*i+n[3]*s+n[5]}function CJe(t,e,n,r=0,i=0,s=2){const o=i||e.length/s;for(let a=r;a<o;a++)b_e(t,e,n,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:kJe,create:w_e,fromValues:AJe,transform:b_e,transformMany:CJe},Symbol.toStringTag,{value:"Module"}));function T3(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function IJe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function PJe(t,e,n,r,i,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:IJe,create:T3,fromValues:PJe},Symbol.toStringTag,{value:"Module"}));function E_e(){return new Float32Array(2)}function RJe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function K2(t,e){const n=new Float32Array(2);return n[0]=t,n[1]=e,n}function S_e(){return E_e()}function T_e(){return K2(1,1)}function k_e(){return K2(1,0)}function A_e(){return K2(0,1)}const MJe=S_e(),NJe=T_e(),LJe=k_e(),OJe=A_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:NJe,UNIT_X:LJe,UNIT_Y:OJe,ZEROS:MJe,clone:RJe,create:E_e,fromValues:K2,ones:T_e,unitX:k_e,unitY:A_e,zeros:S_e},Symbol.toStringTag,{value:"Module"}));function DJe(t){return t instanceof Float32Array&&t.length>=2}function jJe(t){return Array.isArray(t)&&t.length>=2}function NF(t){return DJe(t)||jJe(t)}var iz;const _f=[0,0];let Nf=iz=class extends qt{constructor(t){super(t),this._viewpoint2D={center:zi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Vn,this.id=0,this.inverseTransform=Rd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Rd(),this.transformNoRotation=Rd(),this.displayMat3=T3(),this.displayViewMat3=T3(),this.viewMat3=T3(),this.viewMat2d=w_e(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=ma(n,t.viewpoint),this._set("size",yw(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new iz({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return NF(e)?dd(t,e,this.inverseTransform):(_f[0]=e,_f[1]=n,dd(t,_f,this.inverseTransform))}toScreen(t,e,n){return NF(e)?dd(t,e,this.transform):(_f[0]=e,_f[1]=n,dd(t,_f,this.transform))}toScreenNoRotation(t,e,n){return NF(e)?dd(t,e,this.transformNoRotation):(_f[0]=e,_f[1]=n,dd(t,_f,this.transformNoRotation))}wrapMapCoordinate(t,e){yw(t,e);const[n]=e,[r]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const l=y_e(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(n<o||n>a)&&(t[0]=mH(n,r,s)),t}getScreenTransform(t,e){const{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return _H(t,n,i,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new pu({targetGeometry:new Qt(t[0],t[1],e),scale:n,rotation:r});if(this._set("viewpoint",o),!s||!e||!n)return;this.resolution=Lb(o),this.rotation=r,this.scale=n,this.spatialReference=e,yw(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;vw(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Q0e(this.viewMat3),u=K2(s[0]/2,s[1]/2),h=K2(-s[0]/2,-s[1]/2),f=LW(r);d7(c,c,u),nye(c,c,f),d7(c,c,h),cA(this.displayViewMat3,this.displayMat3,c);const g=pH(this.viewMat2d,u);return JC(g,g,f),q2(g,g,h),fJe(this.extent,o,s),xH(this.transform,o,s,i),fH(this.inverseTransform,this.transform),_Je(this.transformNoRotation,o,s,i),this.worldScreenWidth=xJe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};x([E({readOnly:!0})],Nf.prototype,"id",void 0),x([E({value:1,json:{write:!0}})],Nf.prototype,"pixelRatio",null),x([E({json:{write:!0}})],Nf.prototype,"size",null),x([E()],Nf.prototype,"spatialReference",void 0),x([E({type:pu,json:{write:!0}})],Nf.prototype,"viewpoint",null),x([E({readOnly:!0})],Nf.prototype,"visibleArea",null),Nf=iz=x([he("esri.views.2d.ViewState")],Nf);const Cre=Nf;var sz,oz;let Jf=sz=class extends Kt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new sz({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};x([E()],Jf.prototype,"left",void 0),x([E()],Jf.prototype,"top",void 0),x([E()],Jf.prototype,"right",void 0),x([E()],Jf.prototype,"bottom",void 0),Jf=sz=x([he("esri.views.2d.PaddedViewState.Padding")],Jf);let gx=oz=class extends Cre{constructor(...t){super(...t),this.paddedViewState=new Cre,this._updateContent=(()=>{const e=zi();return()=>{const n=this._get("size"),r=this._get("padding");if(!n||!r)return;const i=this.paddedViewState;co(e,r.left+r.right,r.top+r.bottom),aA(e,n,e),yw(i.size,e);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(mn(()=>[this.size,this.padding],()=>this._updateContent(),Qg)),this.padding=new Jf,this.size=[0,0]}set padding(t){this._set("padding",t||new Jf)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const n=this._get("padding");n&&(e=bJe(t.clone(),t,this._get("size"),n));const{targetGeometry:r,rotation:i,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=i,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new oz({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};x([E()],gx.prototype,"paddedViewState",void 0),x([E({type:Jf})],gx.prototype,"padding",null),x([E()],gx.prototype,"viewpoint",null),gx=oz=x([he("esri.views.2d.PaddedViewState")],gx);const wH=gx;let XS=class extends Kt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};x([E()],XS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),x([E()],XS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),XS=x([he("esri.views.support.debugFlags")],XS);const FJe=new XS,C_e=Symbol("Yield");let $Je=class{constructor(){this._tasks=new Array,this._numPendingTasks=H2(0),this._readyToRun=H2(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return C_e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,n,r){return this._addTask((i,s)=>new Pre(i,s,e,n,r),Array.prototype.push)}unshift(e,n,r){return this._addTask((i,s)=>new Pre(i,s,e,n,r),Array.prototype.unshift)}pushGenerator(e,n,r){return this._addTask((i,s)=>new VJe(i,s,e,n,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const n=this._tasks.shift();this._updateReadyToRun();try{if(va(n.signal))this._cancelTask(n,Pr());else switch(n.type){case 0:this._processSimple(n,e);break;case 1:this._processGenerator(n,e);break;case 2:this._processIterator(n,e);break;default:}}catch(r){n.reject(r)}return!0}cancelAll(){const e=Pr();for(const n of this._tasks)this._cancelTask(n,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,n){if(e.abortCallback){const r=e.abortCallback(n);e.type===2&&e.iterator.return&&Ire(e.iterator.return()),_a(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&Ire(e.iterator.throw(n)),e.reject(n)}_onIteratorResult(e,n){n.done?e.resolve(n.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,n){const r=e.callback(n);_a(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,n){const r=e.generatorFunction(n),i=new zJe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(i,n)}_processIterator(e,n){const r=e.iterator.next(n);_a(r)?r.then(i=>this._onIteratorResult(e,i),e.reject):this._onIteratorResult(e,r)}_addTask(e,n){return new Promise((r,i)=>{const s=e(r,i);n.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function Ire(t){_a(t)?t.then(LF,LF):LF(t)}function LF(t){Sa(t)||t instanceof Error||t instanceof Qe||t!=null&&typeof t=="object"&&"done"in t&&t.done||kt.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let bH=class{constructor(e,n,r=void 0,i=void 0){this.resolve=e,this.reject=n,this.signal=r,this.abortCallback=i}},Pre=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.callback=r,this.type=0}},VJe=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.generatorFunction=r,this.type=1}},zJe=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.iterator=r,this.type=2}};function GJe(){return new qJe}const On={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Xc=0,Rre=new Map([[On.RESOURCE_CONTROLLER_IMMEDIATE,Xc],[On.RESOURCE_CONTROLLER,4],[On.SLIDE,Xc],[On.STREAM_DATA_LOADER,Xc],[On.ELEVATION_QUERY,Xc],[On.TERRAIN_SURFACE,1],[On.SURFACE_GEOMETRY_UPDATES,1],[On.LOD_RENDERER,2],[On.GRAPHICS_CORE,2],[On.I3S_CONTROLLER,2],[On.POINT_CLOUD_LAYER,2],[On.FEATURE_TILE_FETCHER,2],[On.STREAM_CONTROLLER,2],[On.CLOUDS_GENERATOR,2],[On.OVERLAY,4],[On.OVERLAY_RENDERER,4],[On.STAGE,4],[On.GRAPHICS_DECONFLICTOR,4],[On.FILTER_VISIBILITY,4],[On.SCALE_VISIBILITY,4],[On.FRUSTUM_VISIBILITY,4],[On.POINT_OF_INTEREST_FREQUENT,6],[On.POINT_OF_INTEREST_INFREQUENT,30],[On.LABELER,8],[On.FEATURE_QUERY_ENGINE,8],[On.FEATURE_TILE_TREE,16],[On.FEATURE_TILE_TREE_ACTIVE,Xc],[On.ELEVATION_ALIGNMENT,12],[On.ELEVATION_ALIGNMENT_SCENE,14],[On.TEXT_TEXTURE_ATLAS,12],[On.TEXTURE_UNLOAD,12],[On.LINE_OF_SIGHT_TOOL,16],[On.LINE_OF_SIGHT_TOOL_INTERACTIVE,Xc],[On.SNAPPING,Xc],[On.SHADOW_ACCUMULATOR,30],[On.FLOW_GENERATOR,12],[On.MAPVIEW_FETCH_QUEUE,Xc],[On.MAPVIEW_LAYERVIEW_UPDATE,2],[On.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Xc]]);function Mre(t){return Rre.has(t)?Rre.get(t):typeof t=="number"?t:1}const UJe=6.5,Nre=1,BJe=30,WJe=1e3/30,HJe=100,Lre=.9;let qJe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=H2(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new CT("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new I_e,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=mn(()=>FJe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,xa);for(const e of Object.keys(On))this.performanceInfo.tasks.set(On[e],new CT(String(On[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,ii(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,n){const r=new KJe(this,e,n);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new CT(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const n=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-n),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let n=UJe,r=e.frameDuration,i=Nre;switch(this.state){case 2:n=0,r=Math.max(HJe,e.frameDuration),i=BJe;break;case 1:r=Math.max(WJe,e.frameDuration)}return r=r-e.elapsedFrameTime-n,this.state!==2&&r<Nre&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,i),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){c9(this._tasks,e),c9(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(n=>{n.name===e&&n.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let n="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?n="r":n!=="r"&&(n="w"))}),n}_getRuntime(e){let n=0;return this._tasks.forEach(r=>{r.name===e&&(n+=r.runtime)}),n}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let n="";return e.forEach((r,i)=>{n+=r>1?` ${r}x ${i}`:` ${i}`}),n}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((n,r)=>r.needsUpdate?++n:n,0);this._load=this._load*Lre+e*(1-Lre)}_schedule(){for(G6e(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Xc&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,n=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==Xc&&r.blockFrame!==this._frameNumber&&(e=!0,n=Math.max(n,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===C_e&&(n.blockFrame=this._frameNumber)}catch(i){kt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,i),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-e;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(On))this._frameTaskTimes.set(On[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((n,r)=>this.performanceInfo.tasks.get(r).push(n)),this.performanceInfo.total.push(e)}get test(){return this._test}},KJe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,n,r){this._scheduler=e,this.name=n,this.blockFrame=0,this.runtime=0,this._queue=new $Je,this._handles=new Sb,this._basePriority=Mre(n),this.schedulePriority=this._basePriority,this._task=H2(r??this._queue),this._handles.add(Sc(()=>this.task.readyToRun,i=>e.taskRunningChanged(i)))}remove(){this.processQueue(YT),this._scheduler.removeTask(this),this.schedule=OF.schedule,this.reschedule=OF.reschedule,this.scheduleGenerator=OF.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const n=Mre(e);this._basePriority!==Xc&&this.schedulePriority===0||(this.schedulePriority=n),this._basePriority=n}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,n,r){return this._queue.push(e,n,r)}reschedule(e,n,r){return this._queue.unshift(e,n,r)}scheduleGenerator(e,n,r){return this._queue.pushGenerator(e,n,r)}processQueue(e){return this._queue.runTask(e)}},I_e=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const YT=new I_e;YT.enabled=!1;let YJe=class{remove(){}processQueue(){}schedule(e,n,r){try{if(va(n)){const i=Pr();return r?Promise.resolve(r(i)):Promise.reject(i)}return m9(e(YT))}catch(i){return Promise.reject(i)}}reschedule(e,n,r){return this.schedule(e,n,r)}async scheduleGenerator(e,n,r){if(va(n)){const s=Pr();if(r)return r(s);throw s}const i=e(YT);for(;;){const s=i.next(YT),o=_a(s)?await s:s;if(va(n)){const a=Pr();if(r){const c=r(a),u=i.return(null);return _a(u)&&await X4(u),c}const l=i.throw(a);throw _a(l)&&await X4(l),a}if(o.done)return o.value}}};const OF=new YJe;let XJe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=GJe(),this._schedulerHandle=Sc(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||_a(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=n=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(n)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new wH,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=mn(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=N2(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const n=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function ZJe(t,e){const{spatialReference:n}=e,r=[e.x,e.y];let i,s,o,a;const l=[0,0],c=JJe(t);for(let f=0;f<c.length;f++){const g=c[f];for(let y=0;y<g.length-1;y++){pGe(l,r,g,y);const _=pO(r,l);(i==null||_<i)&&(i=_,s=[...l],o=f,a=y)}}if(i==null||!s||o==null||a==null)throw new Qe("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,h]=s;return{coordinate:new Qt({x:u,y:h,spatialReference:n}),distance:i}}function JJe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var az;let jy=az=class extends AW(Kt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Sv(this.geometry,this.spatialReference)}catch(t){return kt.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?OC(this.normalizedGeometry,n):cW(this.normalizedGeometry,n))return t;const{coordinate:r}=ZJe(this.normalizedGeometry,n);return r&&(t.targetGeometry=r),t}clone(){return new az({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};x([E({constructOnly:!0})],jy.prototype,"geometry",void 0),x([E({readOnly:!0})],jy.prototype,"normalizedGeometry",null),x([E({constructOnly:!0})],jy.prototype,"spatialReference",void 0),jy=az=x([he("esri.views.2d.constraints.GeometryConstraint")],jy);var lz;let ZS=lz=class extends AW(Kt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new lz({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};x([E()],ZS.prototype,"enabled",void 0),x([E()],ZS.prototype,"rotationEnabled",void 0),ZS=lz=x([he("esri.views.2d.constraints.RotationConstraint")],ZS);const P_e=ZS;var cz;let rl=cz=class extends AW(Kt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:r,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!e?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);e=e.map(u=>u.clone()),e.sort((u,h)=>h.scale-u.scale),e.forEach((u,h)=>u.level=h);for(const u of e)!l&&n>0&&n>=u.scale&&(o=u.level,l=!0),!c&&r>0&&r>=u.scale&&(a=t?t.level:-1,c=!0),t=u;i===-1&&(i=n===0?0:o),s===-1&&(s=r===0?e.length-1:a),i=Math.max(i,0),i=Math.min(i,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),i>s&&([i,s]=[s,i]),n=e[i].scale,r=e[s].scale,e.splice(0,i),e.splice(s-i+1),e.forEach((u,h)=>{this._lodByScale[u.scale]=u,this._scales[h]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const n=this.effectiveMinScale,r=this.effectiveMaxScale,i=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=n!==0&&t.scale>n;if(o||a){const l=a?n:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);i.x=s.x+(i.x-s.x)*c,i.y=s.y+(i.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const n=Math.floor(t),r=Math.ceil(t);return e[n]+(t-n)*(e[r]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let n,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let i=0;i<e.length-1;i++){if(n=e[i],r=e[i+1],r===t)return i+this.effectiveMinZoom+1;if(n>t&&r<t)return i+this.effectiveMinZoom+1-(t-r)/(n-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new cz({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};x([E({readOnly:!0})],rl.prototype,"effectiveLODs",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMinZoom",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMaxZoom",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMinScale",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMaxScale",void 0),x([E()],rl.prototype,"lods",void 0),x([E()],rl.prototype,"minZoom",void 0),x([E()],rl.prototype,"maxZoom",void 0),x([E()],rl.prototype,"minScale",void 0),x([E()],rl.prototype,"maxScale",void 0),x([E()],rl.prototype,"snapToZoom",void 0),rl=cz=x([he("esri.views.2d.constraints.ZoomConstraint")],rl);const R_e=rl,QJe={base:null,key:"type",typeMap:{extent:Vn,polygon:bi}};let Wi=class extends Kt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Lt}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new jy({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new P_e({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),n=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===n&&e.minZoom===r&&e.maxZoom===i&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new R_e({lods:n,minZoom:r,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const n=this.effectiveMaxScale;return n===0||e>=n}canZoomOutTo(e){const n=this.effectiveMinScale;return n===0||e<=n}constrain(e,n){return this._zoom.constrain(e,n),this._rotation.constrain(e,n),this._geometry.constrain(e,n),this.customConstraints.forEach(r=>r.constrain(e,n)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(n=>n.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};x([E({readOnly:!0})],Wi.prototype,"effectiveLODs",null),x([E({readOnly:!0})],Wi.prototype,"effectiveMinScale",null),x([E({readOnly:!0})],Wi.prototype,"effectiveMaxScale",null),x([E({readOnly:!0})],Wi.prototype,"effectiveMinZoom",null),x([E({readOnly:!0})],Wi.prototype,"effectiveMaxZoom",null),x([E({types:QJe,value:null})],Wi.prototype,"geometry",null),x([E({type:[Mo]})],Wi.prototype,"lods",void 0),x([E()],Wi.prototype,"minScale",void 0),x([E()],Wi.prototype,"maxScale",void 0),x([E()],Wi.prototype,"minZoom",void 0),x([E()],Wi.prototype,"maxZoom",void 0),x([E()],Wi.prototype,"rotationEnabled",void 0),x([E()],Wi.prototype,"snapToZoom",void 0),x([E({type:Lt})],Wi.prototype,"customConstraints",void 0),x([E()],Wi.prototype,"view",void 0),x([E({readOnly:!0})],Wi.prototype,"version",null),x([E({type:jy,readOnly:!0})],Wi.prototype,"_geometry",null),x([E({type:P_e})],Wi.prototype,"_rotation",null),x([E({readOnly:!0,type:R_e})],Wi.prototype,"_zoom",null),Wi=x([he("esri.views.2d.MapViewConstraints")],Wi);const Ore=Wi;let Jo=class extends Kt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([mn(()=>this.constraints?.version,n=>{this.constraints&&n&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Qg)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:n}=this.state.paddedViewState;return this.state.commitProperty("id"),new Qt({x:e[0],y:e[1],spatialReference:n})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Qe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;rz(r,r,n),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void kt.getLogger(this).error(new Qe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Qe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;pJe(r,r,n,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const n=this.viewpoint;SJe(n,n,e),this.viewpoint=n}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const n=this.viewpoint;Are(n,n,e),this.viewpoint=n}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let n,r;try{n=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new Qe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new Qe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new Qe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void kt.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const i=new pu({targetGeometry:new Qt,scale:0,rotation:0});ma(i,n),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const n=this.constraints?.zoomToScale(e)??0;if(!n)return void this._set("zoom",-1);const r=this.viewpoint;Are(r,r,n),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:n,constraints:r}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let h,f,g;const y=l?.rotation,_=l?.targetGeometry;_?.type==="extent"?h=_:_?.type==="point"&&(f=_,g=l?.scale);const b=s??h;return{center:i??f??b?.center,rotation:a??y,scale:(o??u??g??(b&&AO(b,[e[0]-n.left-n.right,e[1]-n.top-n.bottom])))||void 0}}startup(e,n,r,i){const s=e.targetGeometry;try{this._project(e,r)}catch(o){kt.getLogger(this).warn(new zd("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=i||new Qt({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new wH({padding:this.padding,size:n,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,n],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,o=new Qt({x:e,y:n,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const n=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=n.scale;else{const l=n.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=l}const r=n.clone(),[i,s]=n.center;let o=null;try{o=this._project(new Qt({x:i,y:s,spatialReference:n.spatialReference}),e)}catch(l){bme()||kt.getLogger(this).warn(new zd("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new Qt({x:0,y:0,spatialReference:e}));const a=rz(new pu({targetGeometry:new Qt,scale:0,rotation:0}),n.viewpoint,o);r.viewpoint=a;try{const c=[n.size[0]/2,n.size[1]/2],u=[c[0]+20,c[1]],h=n.toMap([0,0],u),{x:f,y:g}=this._project(new Qt({x:h[0],y:h[1],spatialReference:n.spatialReference}),e);h[0]=f,h[1]=g,r.toScreen(h,h);const y=wJe(c,h,u),_=Math.hypot(h[0]-c[0],h[1]-c[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new Qt({x:0,y:0,spatialReference:e})):(a.scale*=_,a.scale>_e("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,n){if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,n],EJe(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;const n=[0,0],[r,i]=this.state.toMap(n,[e.x,e.y]),s=this.state.spatialReference;return new Qt({x:r,y:i,spatialReference:s})}toScreen(e,n){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),i=[r.x,r.y];return n?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),qs(i[0],i[1])}_project(e,n){const r=e?.targetGeometry||e;if(!n)return e;if(!r)return null;if(n.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||yo(n,r.spatialReference))return e;const i=Sv(r,n);if(!i)throw new Qe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:n});return eQe(e)?(e.targetGeometry=i,e):i}};function eQe(t){return t?.declaredClass==="esri.Viewpoint"}x([E({type:Qt})],Jo.prototype,"center",null),x([E()],Jo.prototype,"constraints",void 0),x([E({type:Vn})],Jo.prototype,"extent",null),x([E({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Jo.prototype,"padding",null),x([E()],Jo.prototype,"ready",void 0),x([E()],Jo.prototype,"resizeAlign",void 0),x([E({readOnly:!0})],Jo.prototype,"resolution",null),x([E({type:Number})],Jo.prototype,"rotation",null),x([E({type:Number})],Jo.prototype,"scale",null),x([E({readOnly:!0})],Jo.prototype,"state",void 0),x([E({type:pu})],Jo.prototype,"viewpoint",null),x([E({readOnly:!0})],Jo.prototype,"visibleArea",null),x([E()],Jo.prototype,"zoom",null),Jo=x([he("esri.views.2d.ViewStateManager")],Jo);const Dre=160;let JS=class extends Kt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Dre&&this.clear()},Dre))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};x([E()],JS.prototype,"_timer",void 0),x([E()],JS.prototype,"stationary",null),JS=x([he("esri.views.2d.support.StationaryManager")],JS);const tQe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Jo({constraints:new Ore({view:this})}),this.stationaryManager=new JS,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new XJe(this),this.viewEvents=new zve(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([mn(()=>this.viewpoint,()=>this.stationaryManager.flip(),Qg)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return x([E({readOnly:!0})],n.prototype,"animationManager",void 0),x([E({readOnly:!0})],n.prototype,"fullOpacity",void 0),x([E()],n.prototype,"stateManager",void 0),x([E()],n.prototype,"constraintsInfo",null),x([E()],n.prototype,"extent",null),x([E({readOnly:!0})],n.prototype,"state",null),x([E({readOnly:!0})],n.prototype,"mapViewNavigation",void 0),x([E()],n.prototype,"renderingOptions",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animation",null),x([E({type:Ore})],n.prototype,"constraints",null),x([E()],n.prototype,"padding",null),x([E()],n.prototype,"resizeAlign",null),x([E()],n.prototype,"rotation",null),x([E({readOnly:!0})],n.prototype,"viewEvents",void 0),x([E({type:pu})],n.prototype,"viewpoint",null),n=x([he("esri.views.Viewport2DBaseMixin")],n),n},nQe=()=>nr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var e2;let yx=(e2=class extends eW{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Ec(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new Qe("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,n){n||(n=_a(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",n)}},e2.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},e2);x([E({readOnly:!0})],yx.prototype,"done",null),x([E({readOnly:!0,type:String})],yx.prototype,"state",void 0),x([E()],yx.prototype,"target",void 0),yx=x([he("esri.views.ViewAnimation")],yx);const uz=yx;let k3=class extends Kt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,n){if(!e)return void kt.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new uz;this.view.animation=r,await TW(()=>this.view.ready,n);const i={...n,animate:n?.animate??(!nQe()&&this.view.animationsEnabled),animationMode:n?.animationMode??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h}=this.view,f=hJe(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h,pickClosestTarget:n?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},i.animate?this._gotoAnimated(f,i):this._gotoImmediate(f,i)}_gotoImmediate(e,n){const r=this._gotoTask,i=this.view.animation,s=e.then(o=>{if(gi(n),r!==this._gotoTask)throw new Qe("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=o,i.finish()});return this._cancellableGoTo(r,i,s,n)}_gotoAnimated(e,n){const r=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();const s=e.then(o=>{if(gi(n),r!==this._gotoTask)throw new Qe("view:goto-interrupted","Goto was interrupted");return i.update(o),this.view.animationManager.animate(i,this.view.viewpoint,n),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,s,n)}_cancellableGoTo(e,n,r,i){const s=()=>e===this._gotoTask;return $je(r,i).finally(()=>{s()&&(n.done||n.stop())})}};x([E({constructOnly:!0})],k3.prototype,"view",void 0),k3=x([he("esri.views.2d.GoToManager")],k3);function M_e(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function N_e(t,e){return e.some(n=>M_e(t,n))}function jre(t,{dragPrimary:e,dragSecondary:n,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:n},{key:"tertiary",value:r}].filter(i=>i.value===t).map(i=>i.key)}let Fre=class extends Js{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(e,n){M_e(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},rQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(e){const{data:n}=e,{pointerType:r}=n;if(r!==this.pointerType)return;e.stopPropagation();const{action:i,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const h=l.snapScale(this._currentScale),f=(s.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},IO=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const n=e.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},iQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.pointerActions=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new IO({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&N_e(r.data,this.pointerActions)})}_handleDrag(e){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},sQe=class extends Js{constructor(e,n,r){super(!0),this._view=e,this.pointerActions=n;const i=this._view.mapViewNavigation;this._dragEventSeparator=new IO({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&N_e(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function L_e(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function oQe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function aQe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function lQe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function O_e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function D_e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function j_e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function cQe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function uQe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function hQe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function dQe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function fQe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function pQe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function mQe(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t}function gQe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function F_e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function yQe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function $_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function V_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function z_e(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function vQe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function _Qe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function hz(t,e){const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function G_e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xQe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function wQe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=i*l-s*a,u=s*o-r*l,h=r*a-i*o,f=Math.sqrt(c*c+u*u+h*h);return t[0]=c/f,t[1]=u/f,t[2]=h/f,t}function bQe(t,e,n,r){const i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function EQe(t,e,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+r[0]*c+i[0]*u,t[1]=e[1]*a+n[1]*l+r[1]*c+i[1]*u,t[2]=e[2]*a+n[2]*l+r[2]*c+i[2]*u,t}function SQe(t,e,n,r,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return t[0]=e[0]*c+n[0]*u+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*u+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*u+r[2]*h+i[2]*f,t}function TQe(t,e=1){const n=NW,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=i*e,t}function kQe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12],t[1]=n[1]*r+n[5]*i+n[9]*s+n[13],t[2]=n[2]*r+n[6]*i+n[10]*s+n[14],t}function AQe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function CQe(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,y=s*u-r*f,_=r*h-i*u,b=2*o;return t[0]=a+u*b+2*g,t[1]=l+h*b+2*y,t[2]=c+f*b+2*_,t}function IQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function PQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function RQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function MQe(t,e){hz($re,t),hz(Vre,e);const n=G_e($re,Vre);return n>1?0:n<-1?Math.PI:Math.acos(n)}const $re=y0(),Vre=y0();function NQe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function LQe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function OQe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Al();return Math.abs(n-s)<=l*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function DQe(t,e,n){const r=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const jQe=O_e,FQe=D_e,$Qe=j_e,VQe=$_e,zQe=V_e,GQe=L_e,UQe=z_e;Object.freeze(Object.defineProperty({__proto__:null,abs:hQe,add:lQe,angle:MQe,bezier:SQe,ceil:cQe,clamp:mQe,copy:oQe,cross:xQe,crossAndNormalize:wQe,direction:DQe,dist:VQe,distance:$_e,div:$Qe,divide:j_e,dot:G_e,equals:OQe,exactEquals:LQe,floor:uQe,hermite:EQe,inverse:_Qe,len:GQe,length:L_e,lerp:bQe,max:pQe,min:fQe,mul:FQe,multiply:D_e,negate:vQe,normalize:hz,random:TQe,rotateX:IQe,rotateY:PQe,rotateZ:RQe,round:gQe,scale:F_e,scaleAndAdd:yQe,set:aQe,sign:dQe,sqrDist:zQe,sqrLen:UQe,squaredDistance:V_e,squaredLength:z_e,str:NQe,sub:jQe,subtract:O_e,transformMat3:AQe,transformMat4:kQe,transformQuat:CQe},Symbol.toStringTag,{value:"Module"}));function $u(t){let e=t*t;return t<0&&(e*=-1),e}function BQe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function WQe(t,e,n){const r=n,i=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=$u(i.axes[0]),r.translation[1]=$u(i.axes[1]),r.translation[2]=$u(i.buttons[7])-$u(i.buttons[6]),r.heading=$u(i.axes[2]),r.tilt=$u(i.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*$u(i.axes[0]),r.translation[1]=1.2*$u(i.axes[1]),r.translation[2]=2*-$u(i.axes[2]),r.heading=1.2*$u(i.axes[5]),r.tilt=1.2*$u(i.axes[3])),r.tilt*=o,F_e(r.translation,r.translation,a),r}function HQe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let qQe=class extends Js{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Sb,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([mn(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=N2({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},xa)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,BQe(this._transformation)):(this._currentDevice=e.data.device,WQe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const n=this._transformation;if(HQe(n))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=YQe*i*e;CO(r,r,[n.translation[0]*s,-n.translation[1]*s]);const o=1+n.translation[2]*XQe*e,a=this._view.constraints.rotationEnabled?-n.heading*KQe*e:0,l=this._view.size,c=[l[0]/2,l[1]];v_e(r,r,o,a,c,l);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const KQe=.06,YQe=.7,XQe=6e-4;function U_e(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Zn(()=>document.removeEventListener("visibilitychange",e))}let ZQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const s=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;i.stopPropagation(),i.preventDefault();const o=i.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=U_e(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const n=this._currentDirection!=null;if(e!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},JQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(n),this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=U_e(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,n){for(const r of e)this._keyToDirection.set(r,n)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection.get(e.data.key);if(this._pressed=i!=null,this._pressed){if(e.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},QQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=0),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(i){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const eet=.6;let tet=class extends Js{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:r,y:i,deltaY:s}=e.data,o=1/eet**(1/60*s),a=n.zoom(o,[r,i]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()})}},net=class extends Js{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new IO({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function zre(t){const e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value||1:0),axes:e.axes.map(n=>set(n,t.axisThreshold))}:{buttons:[],axes:[]}}function ret(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function iet(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function set(t,e){const n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}let oet=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,zre(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(Gre(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const n=new hH(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=N2({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;Gre(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=zre(s),l=r||iet(a);o&&(o.timestamp===i.timestamp||!o.active&&l||ret(o.state,a))||this._emitGamepadEvent(i,a,!l)})}_emitGamepadEvent(e,n,r){const i=this._latestUpdate[e.index],s=i&&i.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:o})}};function aet(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Gre(t){for(const e of navigator.getGamepads())aet(e)&&t(e)}const Ure=_e("edge"),cet=_e("chrome"),uet=_e("ff"),het=_e("safari"),Bre="esri-view-surface",D_={touchNone:`${Bre}--touch-none`,touchPan:`${Bre}--touch-pan`};var b1;let det=(b1=class{constructor(e,n){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new oet(e,n),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Di(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const n in this._active)if(!e||!e.has(n)){const r=this._active[n];this._element.removeEventListener(DF[n],r),delete this._active[n]}e&&e.forEach(n=>{if(!this._active[n]&&DF[n]){const r=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(DF[n],r),this._active[n]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,n){n?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?D_.touchNone:D_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?D_.touchPan:D_.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(D_.touchNone),this._element.classList.remove(D_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,n){const r=Uve(this._element,e);return b1.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(e,n){const{key:r}=n;r&&e==="key-up"&&this._keyDownState.delete(r);const i={native:n,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(i.key),this._callback(e,i)}_handlePointer(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&_e("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,n){let r=this._getDeltaFromTrackpadOrMouseWheel(n);switch(n.deltaMode){case 0:Ure&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Ure?r*=.7:cet||het?r*=.6:uet&&(r*=1.375);const i=100,s=Math.abs(r);s>i&&(r=r/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(e,n)}_handleDefault(e,n){const r={native:n};n.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},b1.test={disableSubpixelCoordinates:!1},b1);const DF={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let fet=class extends Js{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const B_e=()=>({maximumClickDelay:300}),pet=(t={})=>({...B_e(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),EH=(t={})=>({...B_e(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function MN(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function met(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function get(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:qs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[C,I]=t,[R,V]=[I.x-C.x,I.y-C.y];return e.radius=Math.sqrt(R*R+V*V)/2,e.center.x=(C.x+I.x)/2,e.center.y=(C.y+I.y)/2,e}let n=0,r=0;for(let C=0;C<t.length;C++)n+=t[C].x,r+=t[C].y;n/=t.length,r/=t.length;const i=t.map(C=>C.x-n),s=t.map(C=>C.y-r);let o=0,a=0,l=0,c=0,u=0,h=0,f=0;for(let C=0;C<i.length;C++){const I=i[C],R=s[C],V=I*I,P=R*R;o+=V,a+=P,l+=I*R,c+=V*I,u+=P*R,h+=I*P,f+=R*V}const g=.5*(c+h),y=.5*(u+f),_=o*a-l*l,b=(g*a-y*l)/_,T=(o*y-l*g)/_,A=qs(b+n,T+r);return{radius:Math.sqrt(b*b+T*T+(o+a)/t.length),center:A}}function g1(t){const{native:e}=t,{pointerId:n,button:r,pointerType:i}=e;return i==="mouse"?`${n}:${r}`:`${i}`}let yet=class extends Js{constructor(e={},n=xb){super(!1),this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=qs(0,0),this._pointerState=new Map,this._parameters=EH(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new IO({start:(r,i)=>this._dragStart(r,i),update:(r,i)=>this._dragUpdate(i),end:(r,i)=>this._dragEnd(i)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=ii(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const n=this._pointerState.get(e);n&&(n.doubleTapTimeout=ii(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=n,{center:s}=r;this._dragStartCenter=s;const o=jF("begin",qs(0,0),r);this._doubleTapDrag.emit(o,void 0,i),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=jF("update",qs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=jF("end",qs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:n}=e,r=g1(n),i=this._pointerState.get(r),{pointerType:s}=n.native;if(i){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),MN(i.event.data,n)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:n}=e,{pointerType:r}=n.native,i=g1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function jF(t,e,n){const{button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}=n;return{action:t,delta:e,button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}}let vet=class extends Js{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,r,i){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:_et(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const n=e.native.pointerId,r=ER(this._activePointerMap).angle,i={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);const s=A3(i,W_e(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const n=e.native.pointerId,r=this._activePointerMap.get(n);r?r.event=e:this._addPointer(e)}_removePointer(e){const n=ER(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){const n=ER(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=A3(r,n)-e,r.lastAngle=A3(r,n)-e})}_emitEvent(e,n,r){const i=ER(this._activePointerMap);this._drag.emit(this._createPayload(e,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const n=e.data,r=n.currentEvent,i=e.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function W_e(t){const e=[];return t.forEach(n=>{e.push(qs(n.event.x,n.event.y))}),get(e)}function ER(t){const e=W_e(t);let n=0;return t.forEach(r=>{let i=A3(r,e),s=i-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=r.lastAngle+s,r.lastAngle=i;const o=i-r.initialAngle;n+=o}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function _et(t){const e=new Map;return t.forEach((n,r)=>e.set(r,n.event)),e}function A3(t,e){const n=t.event,r=n.x-e.center.x,i=n.y-e.center.y;return Math.atan2(i,r)}let xet=class extends Js{constructor(e={},n=xb){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=EH(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=g1(n);if(!this._pointerState.has(r)){const i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(e){const n=e.data,r=g1(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){const s=i.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),MN(s,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(n))):MN(i,e.data)>o?this._removeState(n):this._startImmediateDoubleClick(e,i)}}_startImmediateDoubleClick(e,n){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const n=g1(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},wet=class extends Js{constructor(e={},n=xb){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=pet(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=ii(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=n.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(SR("update",i,n),void 0,i.modifiers):met(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),i.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const n=e.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(SR("start",i,n)):this._pointerDrag.emit(SR("start",i,i.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(SR("end",s,n==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function SR(t,e,n){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:n}}let bet=class extends Js{constructor(e={},n=xb){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=EH(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=ii(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,n){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=ii(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const n=e.data,{pointerType:r}=n.native,i=Eet(n);if(!this._pointerState.has(i))return void this._startClick(e);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;MN(o,n)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(e)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const n=g1(e.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:n}=e,{native:{pointerType:r}}=n,i=g1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s);this._pointerState.set(i,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function Eet(t){const{pointerId:e,pointerType:n,button:r}=t.native;return n==="mouse"?`${e}:${r}`:`${n}`}const TR={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Wre=Symbol("handles");let vx=class extends Kt{initialize(){const e=()=>this.view?.ready;this.addHandles([Sc(()=>!e(),()=>this._disconnect()),Sc(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Wre),this._inputManager=Di(this._inputManager)}_connect(){const e=this.view.surface,n=new det(e,this.view.input),r=[new xet,new wet,new bet,new vet(this.view.navigation),new yet],i=new Wu({eventSource:n,recognizers:r}),s=new iQe(this.view,["primary"]),o=new sQe(this.view,["secondary"]);i.installHandlers("prevent-context-menu",[new fet],pp.INTERNAL),i.installHandlers("navigation",[new net(this.view),new qQe(this.view),new tet(this.view),new Fre(this.view),new Fre(this.view,[TR.counter]),s,new ZQe(this.view,TR.pan),new QQe(this.view,TR.zoom),new JQe(this.view,TR.rotate),o,new rQe(this.view,"touch")],pp.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,this.addHandles([mn(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},xa),mn(()=>{const{actionMap:a}=this.view.navigation;return{panActions:jre("pan",a),rotateActions:jre("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},oa)],Wre)}get test(){}};x([E()],vx.prototype,"view",void 0),x([E()],vx.prototype,"latestPointerInfo",null),x([E()],vx.prototype,"multiTouchActive",null),vx=x([he("esri.views.2d.input.MapViewInputManager")],vx);const Tet=vx,ket=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToManager=new k3({view:this}),this.animationsEnabled=!0,this.inputManager=new Tet({view:this}),this.addHandles([this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,s,o){return this.viewEvents.on(r,i,s,o)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=Wve(r)?Bve(this,r):r;return this.stateManager.toMap(i)}};return x([E()],n.prototype,"goToManager",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animationsEnabled",void 0),x([E({readOnly:!0})],n.prototype,"inputManager",void 0),n=x([he("esri.views.Viewport2DMixin")],n),n};let Hre=class{constructor(e){this._view=e,this.viewpoint=new pu({targetGeometry:new Qt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,n]=this._view.size;return Math.sqrt(e*e+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return g_e(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,n){n.pan=Ume(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,n.rotate=VC(r),n.sourceZoom=this.scale,n.targetZoom=e.scale}interpolate(e,n,r){const{pan:i,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=IS(e.center.x,n.center.x,i),l.y=IS(e.center.y,n.center.y,i),this.viewpoint.scale=IS(e.scale,n.scale+a,o);let c=e.rotation;const u=n.rotation;Math.abs(u-c)>=180&&(c+=360*(c<u?1:-1)),this.viewpoint.rotation=IS(c,u,s)}copyFrom(e){ma(this.viewpoint,e.viewpoint),this._view=e.view}};function nS(t,e,n,r){const i=3*t,s=3*(n-t)-i,o=1-i-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function u(y){return((o*y+s)*y+i)*y}function h(y){return((c*y+l)*y+a)*y}function f(y){return(3*o*y+2*s)*y+i}function g(y,_){let b,T,A,C,I,R;for(A=y,R=0;R<8;R++){if(C=u(A)-y,Math.abs(C)<_)return A;if(I=f(A),Math.abs(I)<1e-6)break;A-=C/I}if(b=0,T=1,A=y,A<b)return b;if(A>T)return T;for(;b<T;){if(C=u(A),Math.abs(C-y)<_)return A;y>C?b=A:T=A,A=.5*(T-b)+b}return A}return function(y,_=1e-6){return h(g(y,_))}}const Jc={};Jc.ease=nS(.25,.1,.25,1),Jc.linear=nS(0,0,1,1),Jc.easeIn=Jc["ease-in"]=nS(.42,0,1,1),Jc.easeOut=Jc["ease-out"]=nS(0,0,.58,1),Jc.easeInOut=Jc["ease-in-out"]=nS(.42,0,.58,1);const Aet=t=>t,EA=t=>t*t,NN=t=>1-EA(1-t),qre=t=>t<.5?EA(2*t)/2:(NN(2*(t-.5))+1)/2,LN=t=>t*t*t,dz=t=>1-LN(1-t),Kre=t=>t<.5?LN(2*t)/2:(dz(2*(t-.5))+1)/2,ON=t=>t*t*t*t,fz=t=>1-ON(1-t),Yre=t=>t<.5?ON(2*t)/2:(fz(2*(t-.5))+1)/2,DN=t=>t*t*t*t*t,pz=t=>1-DN(1-t),Xre=t=>t<.5?DN(2*t)/2:(pz(2*(t-.5))+1)/2,jN=t=>1-Math.cos(t*Math.PI/2),mz=t=>1-jN(1-t),Zre=t=>t<.5?jN(2*t)/2:(mz(2*(t-.5))+1)/2,FN=t=>2**(10*(t-1)),$N=t=>1-FN(1-t),Jre=t=>t<.5?FN(2*t)/2:($N(2*(t-.5))+1)/2,VN=t=>-(Math.sqrt(1-t*t)-1),gz=t=>1-VN(1-t),Qre=t=>t<.5?VN(2*t)/2:(gz(2*(t-.5))+1)/2;function xu(t){const e=2*(t-Math.sqrt((t-1)*t)),n=e/2/t;return r=>r<n?t*r*r:e*r-e+1}function wu(t,e){return(n,r)=>n<e?e*t(n/e,r):1-t((1-n)/(1-e),r)*(1-e)}const eie=wu(xu(1),1),tie=wu(xu(1),0),zN=wu(xu(1),.5),nie=wu(xu(2),1),rie=wu(xu(2),0),iie=wu(xu(2),.5),sie=wu(xu(3),1),oie=wu(xu(3),0),aie=wu(xu(3),.5),lie=wu(xu(4),1),cie=wu(xu(4),0),uie=wu(xu(4),.5),hie={linear:Aet,"in-quad":EA,"out-quad":NN,"in-out-quad":qre,"in-coast-quad":eie,"out-coast-quad":tie,"in-out-coast-quad":zN,"in-cubic":LN,"out-cubic":dz,"in-out-cubic":Kre,"in-coast-cubic":nie,"out-coast-cubic":rie,"in-out-coast-cubic":iie,"in-quart":ON,"out-quart":fz,"in-out-quart":Yre,"in-coast-quart":sie,"out-coast-quart":oie,"in-out-coast-quart":aie,"in-quint":DN,"out-quint":pz,"in-out-quint":Xre,"in-coast-quint":lie,"out-coast-quint":cie,"in-out-coast-quint":uie,"in-sine":jN,"out-sine":mz,"in-out-sine":Zre,"in-expo":FN,"out-expo":$N,"in-out-expo":Jre,"in-circ":VN,"out-circ":gz,"in-out-circ":Qre,"quad-in":EA,"quad-out":NN,"quad-in-out":qre,"quad-in-coast":eie,"quad-out-coast":tie,"quad-in-out-coast":zN,"cubic-in":LN,"cubic-out":dz,"cubic-in-out":Kre,"cubic-in-coast":nie,"cubic-out-coast":rie,"cubic-in-out-coast":iie,"quart-in":ON,"quart-out":fz,"quart-in-out":Yre,"quart-in-coast":sie,"quart-out-coast":oie,"quart-in-out-coast":aie,"quint-in":DN,"quint-out":pz,"quint-in-out":Xre,"quint-in-coast":lie,"quint-out-coast":cie,"quint-in-out-coast":uie,"sine-in":jN,"sine-out":mz,"sine-in-out":Zre,"expo-in":FN,"expo-out":$N,"expo-in-out":Jre,"circ-in":VN,"circ-out":gz,"circ-in-out":Qre,ease:t=>Jc.ease(t),"ease-in":t=>Jc.easeIn(t),"ease-out":t=>Jc.easeOut(t),"ease-in-out":t=>Jc.easeInOut(t)};let Cet=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const GN={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},H_e={maxDuration:4e3};let Iet=class q_e{constructor(e){this._createCamera=e,this.compared=new Cet,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:GN.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new q_e(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,n,r){this.source!==e&&this.source.copyFrom(e),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??GN.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const n=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Al()}get hasFov(){return Math.abs(this.compared.fov)>Al()}get hasRotate(){return this.compared.rotate>Al()}},Pet=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Ret=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,n)=>e+n.time,0)}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,i=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,n),s.hasPan&&!isNaN(n.pan)&&isFinite(s.compared.pan)?n.pan=(r+c.compared.pan*n.pan)/s.compared.pan:n.pan=1,s.hasRotate&&!isNaN(n.rotate)&&isFinite(s.compared.rotate)?n.rotate=(i+c.compared.rotate*n.rotate)/s.compared.rotate:n.rotate=1,o&&!isNaN(n.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:u,targetZoom:h}=c.compared,f=n.zoom*(h-u)+u,g=this.segments[0].definition.compared.sourceZoom,y=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(h-g)>Math.abs(u-g)?h:u;n.zoomOffset=_-y,n.zoom=(f-g)/(_-g)}else n.zoom=1;return n}e-=l.time,r+=c.compared.pan,i+=c.compared.rotate}}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r)}},FF=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,n=e.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:s}=this.definition;let o=0,a=0;r&&(i&&(o=(n/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&i&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&i){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(i&&s){const c=this._panPixelsAtSource/this._rotatePixels,u=1+c;this._panPixelFlow=c/u*l,this._rotatePixelFlow=1/u*l}else i?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Met:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=e*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-e-n)/(r-n)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:n,segmentEnd:r}=this.definition;return n+e*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*e*this._time)-1))/(n*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),n.zoom=this._interpolateComponentsZoom(e),n.pan=this._interpolateComponentsPan(e),n.rotate=this._interpolateComponentsRotate(e),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(e)}};const Met=VC(45);function Net(t,e,n){const r=e-t.compared.sourceZoom,i=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(n.ascensionFactor*Math.LN2*t.compared.pan+i)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*i)}function Let(t,e,n){const r=1/e,i=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*i*s*o*l+t.halfWindowSize*i*s*o*c/(a*a)}function Oet(t,e,n){const r=e-t.compared.sourceZoom,i=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Det(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function jet(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function Fet(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function $et(t,e,n){return-t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function Vet(t,e,n){return t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function zet(t,e,n){return-2*t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function Get(t,e,n){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function Uet(t,e,n){const r=Math.log(e/t.compared.targetZoom),i=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*i*s*a+t.halfWindowSize*r*i*s*l/(o*o)+t.halfWindowSize*i*s*a*l/e}function Bet(t,e,n){const r=e-t.compared.targetZoom,i=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+n.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Wet(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function Het(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function qet(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Ket(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const n=Math.LN2*t.compared.pan,r=e,i=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*i);return t.compared.sourceZoom<=t.compared.targetZoom?s*(n-i):s*(n+i)}function Yet(t,e){let n=Xet(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},i=r.ascensionFactor===0,s=r.descensionFactor===0,o=i?Det:Net,a=i?jet:Let,l=i?Fet:Oet,c=s?Wet:Get,u=s?Het:Uet,h=s?qet:Bet,f=R=>o(t,R,r)+$et(t,R,r)+c(t,R,r),g=R=>a(t,R,r)+Vet(t,R,r)+u(t,R,r),y=R=>l(t,R,r)+zet(t,R,r)+h(t,R,r);let _=f(n);const b=Ket(t);let T;const A=e.maximumIterations||20,C=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<A;T++){const R=e.desiredSlope??1e-6;let V=g(n);Math.abs(V)>R&&(V+=R);const P=V/y(n);if(isNaN(P)||n>=C&&P<0){if(!isFinite(C))return null;n=C,_=f(n);break}if(n-=P,n<=t.compared.sourceZoom||n<=t.compared.targetZoom)return null;const N=f(n);if(Math.abs(N-_)/_<=.005)break;_=N}return isNaN(_)||_>b*(1-.3)||n<=t.compared.sourceZoom||n<=t.compared.targetZoom?null:n}function Xet(t,e){const n=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<n?e.maximumDistance!=null?n+(e.maximumDistance-n)/2:1.5*n:e.maximumDistance?Math.min(e.maximumDistance,r):r}let Zet=class extends Ret{constructor(e,n){super(),this._preallocSegments=[new FF,new FF,new FF],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,n)}update(e,n){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=n?.apex?Yet(e,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r),e===this._ascensionSegment?r.zoom=NN(r.zoom):e===this._descensionSegment&&(r.zoom=EA(r.zoom))}_updateWithApex(e,n){const[r,i,s]=this._preallocSegments,o=n?.ascensionFactor??.5,a=Math.min(1-o,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=e,i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*l,i.definition.compared.rotate=this.definition.compared.rotate*l,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+l,i.update(),this.segments.push(i)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const Jet=new Pet;let Qet=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=zN,this.definition=new Iet(e),this.path=new Zet}update(e,n,r){this.definition.update(e,n,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(BFe(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?zN:$N)}cameraAt(e,n){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,Jet);n.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const n=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-n)/(r-n)}_applyTimeSettings(e,n){const r=n.speedFactor!=null?n.speedFactor:1,i=n.minDuration??GN.minDuration/r,s=n.maxDuration??GN.maxDuration/r;return e=n.duration!=null?n.duration:Math.min(Math.max(e/r,i),s)}};const ett=2e3,ttt=64;let ntt=class{constructor(e){this._view=e,this._animation=new Qet(()=>new Hre(this._view)),this._current=new Hre(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,n,r={}){ma(this._current.viewpoint,e),ma(this._source.viewpoint,e),ma(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(e,n){this._animation.cameraAt(n,this._current),ma(e,this._current.viewpoint)}},_x=class extends Kt{constructor(e){super(e),this._animation=null,this._destinationViewState=new wH,this.updateFunction=null,this.easing=hie.ease,this.viewpoint=new pu({targetGeometry:new Qt,scale:0,rotation:0}),this._updateTask=N2({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new ntt(e.view)}destroy(){this._updateTask=ii(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,n,r){this.stop();const i=this.viewpoint;ma(i,n);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(n.scale,s.scale)*ttt,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??H_e.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?hie[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,rtt(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,n){this.stop(),this.updateFunction=n,this.viewpoint=e;const r=new uz({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const n=this.animation;if(n&&n.state!==uz.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,i=this._transition.duration,s=i>0?r/i:1,o=s>=1;this._transition.applyRatio(this.viewpoint,s),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function rtt(t,e,n,r){if(e?.duration!=null)return!0;const{time:i,isLinear:s}=t,o=e?.speedFactor||1;if(i>(e?.maxDuration??H_e.maxDuration/o))return!1;if(s){const l=zi(),c=qs(...r.toScreen(l,...n.center)),u=qs(...n.toScreen(l,...r.center)),h=u!=null&&u.x>-1*n.size[0]&&u.x<(1.5+.5)*n.size[0]&&u.y>-1*n.size[1]&&u.y<(1.5+.5)*n.size[1],f=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(i>ett/o&&!h&&!f)return!1}return!0}x([E()],_x.prototype,"easing",void 0),x([E()],_x.prototype,"view",void 0),x([E()],_x.prototype,"viewpoint",void 0),_x=x([he("esri.views.2d.AnimationManager")],_x);const itt=_x;function ai(){return Promise.all([ge(()=>import("./webglDeps-DTwTUbOo.js"),__vite__mapDeps([299,224,300,301,302,28,96])),ge(()=>import("./mapViewDeps-DMls4Tvk.js"),__vite__mapDeps([303,175,55,56,140,141,131,66,28,142,133,134,139,143,127,144,89,304,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,309,145,146,310,85,80,129,78,79,311,53,299,312,158,313,314,193,315,213,214,316,113,125,130,132,124,73,72,317,147,318,138,47,48,49,319,149,154,122,320,321,322,323,220,254,324,325]))])}const rS=()=>ai().then(()=>ge(()=>import("./TileLayerView2D-DqKfQzcp.js"),__vite__mapDeps([326,139,134,140,141,131,66,28,142,133,143,127,144,89,310,175,55,56,85,80,129,78,79,311,53,308,251,307,126,95,301,302,96,223,224,163,194,197,68,69,312,305,300,215,306,135,158,313,314,193,113,304,128,33,136,148,145,146,213,214,319,125,130,132,124,73,72,149,154,122,327,328,329,323,330,283,331,321,322,332,333,334,254,335,336,337,338,339]))),K0=()=>ai().then(()=>ge(()=>import("./FeatureLayerView2D-CCxJGulA.js").then(t=>t.F),__vite__mapDeps([340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),die={"base-dynamic":()=>ai().then(()=>ge(()=>import("./BaseDynamicLayerView2D-CNDDHbNH.js"),__vite__mapDeps([345,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,347,332,333]))),"base-tile":rS,"bing-maps":rS,catalog:()=>ai().then(()=>ge(()=>import("./CatalogLayerView2D-Cjaoeo24.js"),__vite__mapDeps([348,330,308,251,283,332]))),"catalog-dynamic-group":()=>ai().then(()=>ge(()=>import("./CatalogDynamicGroupLayerView2D-DMI7Qs3G.js"),__vite__mapDeps([349,330,308,251,283,332]))),"catalog-footprint":()=>ai().then(()=>ge(()=>import("./CatalogFootprintLayerView2D-D0VKZS19.js"),__vite__mapDeps([350,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),csv:K0,"geo-rss":()=>ai().then(()=>ge(()=>import("./GeoRSSLayerView2D-CWMWQ1gb.js"),__vite__mapDeps([351,246,206,202,179,166,203,33,204,205,144,89,199,200,201,165,26,27,137,85,80,129,78,79,133,134,54,55,56,207,124,208,240,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,139,143,305,215,306,135,136,148,319,310,175,311,53,125,130,132,73,72,149,154,122,332]))),feature:K0,geojson:K0,parquet:K0,graphics:()=>ai().then(()=>ge(()=>import("./GraphicsLayerView2D-ByAjSKme.js"),__vite__mapDeps([352,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),group:()=>ai().then(()=>ge(()=>import("./GroupLayerView2D-B1TqYl58.js"),__vite__mapDeps([353,330,308,251,283,332]))),imagery:()=>ai().then(()=>ge(()=>import("./ImageryLayerView2D-CvjGIaux.js"),__vite__mapDeps([354,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,319,85,80,140,141,131,142,133,134,139,143,144,89,310,175,55,56,129,78,79,311,53,125,128,130,132,124,135,73,72,304,305,300,215,306,33,136,148,149,154,122,331,321,322,323,346,328,329,347,178,293,341,338,332,333,339]))),"imagery-tile":()=>ai().then(()=>ge(()=>import("./ImageryTileLayerView2D-BZox68Zr.js"),__vite__mapDeps([356,357,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,177,358,323,305,300,215,318,306,135,329,359,178,339,293,341,338,332,333]))),kml:()=>ai().then(()=>ge(()=>import("./KMLLayerView2D-C7E32OeG.js"),__vite__mapDeps([360,361,199,200,201,202,179,166,203,33,204,205,144,89,165,26,27,137,85,80,129,78,79,133,134,54,55,56,206,207,124,208,240,328,308,251,305,224,300,301,215,329,346,307,126,127,95,302,28,96,223,163,194,197,68,66,69,330,283,320,321,322,128,323,304,140,141,131,142,139,143,306,135,136,148,319,310,175,311,53,125,130,132,73,72,149,154,122,332,47,48,49,178,315,299,213,214,313,358]))),"knowledge-graph":()=>ai().then(()=>ge(()=>import("./KnowledgeGraphLayerView2D-Bm9gmu5A.js"),__vite__mapDeps([362,330,308,251,283,332]))),"link-chart":()=>ai().then(()=>ge(()=>import("./KnowledgeGraphLayerView2D-Bm9gmu5A.js"),__vite__mapDeps([362,330,308,251,283,332]))),"knowledge-graph-sublayer":K0,"map-image":()=>ai().then(()=>ge(()=>import("./MapImageLayerView2D-CygA5YbJ.js"),__vite__mapDeps([363,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,319,85,80,140,141,131,142,133,134,139,143,144,89,310,175,55,56,129,78,79,311,53,125,128,130,132,124,135,73,72,304,306,33,136,148,149,154,122,331,321,322,323,347,332,364,254,335,337,341,333,334,336,338,339]))),"map-notes":()=>ai().then(()=>ge(()=>import("./MapNotesLayerView2D-B0IZQQXz.js"),__vite__mapDeps([365,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),media:()=>ai().then(()=>ge(()=>import("./MediaLayerView2D-SWtPYO-N.js"),__vite__mapDeps([366,367,154,206,202,179,166,203,33,204,205,144,89,139,134,140,141,131,66,28,142,133,143,127,310,175,55,56,85,80,129,78,79,311,53,308,251,307,126,95,301,302,96,223,224,163,194,197,68,69,312,305,300,215,306,135,158,313,314,193,113,304,128,136,148,145,146,213,214,319,125,130,132,124,73,72,149,122,317,147,368,318,330,283,332]))),"ogc-feature":()=>ai().then(()=>ge(()=>import("./OGCFeatureLayerView2D-ZO_hJlcc.js"),__vite__mapDeps([369,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),"open-street-map":rS,"oriented-imagery":K0,route:()=>ai().then(()=>ge(()=>import("./RouteLayerView2D-DqWXM911.js"),__vite__mapDeps([370,371,372,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),stream:()=>ai().then(()=>ge(()=>import("./StreamLayerView2D-eYf4DQwP.js"),__vite__mapDeps([373,240,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),"subtype-group":()=>ai().then(()=>ge(()=>import("./SubtypeGroupLayerView2D-D374UxK3.js"),__vite__mapDeps([374,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),tile:rS,"vector-tile":()=>ai().then(()=>ge(()=>import("./VectorTileLayerView2D-DQRIwlgJ.js"),__vite__mapDeps([375,124,143,113,28,139,134,26,27,193,314,194,142,224,302,96,223,307,126,127,95,301,163,308,251,197,68,66,69,323,71,246,195,196,175,55,56,330,283,332,333]))),video:()=>ai().then(()=>ge(()=>import("./VideoLayerView2D-CqOyN4sJ.js"),__vite__mapDeps([376,377,249,31,250,251,270,32,33,378,238,133,134,237,26,27,368,163,307,126,127,95,301,302,28,96,223,224,308,194,197,68,66,69,304,140,141,131,142,139,143,144,89,305,300,215,128,306,135,136,148,318,379,330,283,320,321,322,323,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332]))),wcs:()=>ai().then(()=>ge(()=>import("./ImageryTileLayerView2D-BZox68Zr.js"),__vite__mapDeps([356,357,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,177,358,323,305,300,215,318,306,135,329,359,178,339,293,341,338,332,333]))),"web-tile":rS,wfs:K0,wms:()=>ai().then(()=>ge(()=>import("./WMSLayerView2D-B_8JiDFV.js"),__vite__mapDeps([380,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,347,332,333,381,341]))),wmts:()=>ai().then(()=>ge(()=>import("./WMTSLayerView2D-S-8XBWgK.js"),__vite__mapDeps([382,327,328,308,251,305,224,300,301,215,329,307,126,127,95,302,28,96,223,163,194,197,68,66,69,323,330,283,332,333]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function stt(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Qe(`${n}:view-not-supported`,`${e} is not supported in 2D`)}const fie={hasLayerViewModule:t=>die[t.type]!=null,importLayerView:t=>{const e=die[t.type];if(e==null)throw stt(t);return e(t)}};var nc;let Ob=(nc=class{static getId(e,n,r,i){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${n}/${r}/${i}`}constructor(e,n,r,i){this.set(e,n,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,n=4095&this.col,r=63&this.level;return(3&this.world)<<30|n<<22|e<<8|r}acquire(e,n,r,i){this.set(e,n,r,i)}contains(e){const n=e.level-this.level;return n>=0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}containsChild(e){const n=e.level-this.level;return n>0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new nc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,n,r,i){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+n,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new nc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,n,r){const i=this.clone();return i.col+=e,i.row+=n,r.normalizeKey(i),i}getChildKeys(){const e=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new nc(e,n,r,i),new nc(e,n,r+1,i),new nc(e,n+1,r,i),new nc(e,n+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},nc.pool=new Eb(()=>new nc(""),null,null,25,50),nc);function j_(t,e){return[t,e]}function Y0(t,e,n){return t[0]=e,t[1]=n,t}function ott(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}const Vu=new Ob("0/0/0/0");let att=class K_e{static create(e,n,r=null){const i=Ua(e.spatialReference),s=n.origin||j_(e.origin.x,e.origin.y),o=j_(e.size[0]*n.resolution,e.size[1]*n.resolution),a=j_(-1/0,-1/0),l=j_(1/0,1/0),c=j_(1/0,1/0);r!=null&&(Y0(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),Y0(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),Y0(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:u,rows:h}=n;let f,g,y,_;return!r&&u&&h&&(Y0(a,u[0],h[0]),Y0(l,u[1],h[1]),Y0(c,u[1]-u[0]+1,h[1]-h[0]+1)),e.isWrappable?(f=j_(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/e.size[0]),c[1]),g=!0,y=i.origin,_=i.valid):(f=c,g=!1),new K_e(n.level,n.resolution,n.scale,s,a,l,c,o,f,g,y,_)}constructor(e,n,r,i,s,o,a,l,c,u,h,f){this.level=e,this.resolution=n,this.scale=r,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=u,this._spatialReferenceOrigin=h,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const n=this.worldSize[0];return e<0?n-1-Math.abs((e+1)%n):e%n}normalizeKey(e){if(!this.wrap)return;const n=this.worldSize[0],r=e.col;r<0?(e.col=r+n,e.world-=1):r>=n&&(e.col=r-n,e.world+=1)}denormalizeCol(e,n){return this.wrap?this.worldSize[0]*n+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const n=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&r&&i?n===r[0]?i[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?i[1]:n:n}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,n,r=!1){Vu.set(n);const i=r?Vu.col:this.denormalizeCol(Vu.col,Vu.world),s=Vu.row;return ott(e,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),e}getTileCoords(e,n,r=!1){Vu.set(n);const i=r?Vu.col:this.denormalizeCol(Vu.col,Vu.world);return Array.isArray(e)?Y0(e,this.getXForColumn(i),this.getYForRow(Vu.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(Vu.row)),e}};var E1;let SH=(E1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:n,colFrom:r,colTo:i}of this.spans)for(let s=r;s<=i;s++){const o=e.getWorldForColumn(s);yield new Ob(e.level,n,e.normalizeCol(s),o)}}forEach(e,n){const{spans:r,lodInfo:i}=this,{level:s}=i;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(n,s,o,i.normalizeCol(c),i.getWorldForColumn(c))}},E1.pool=new Eb(()=>new E1),E1),$F=class{constructor(e,n,r){this.row=e,this.colFrom=n,this.colTo=r}};const di=new Ob("0/0/0/0");let ltt=class Y_e{static create(e,n){e[1]>n[1]&&([e,n]=[n,e]);const[r,i]=e,[s,o]=n,a=s-r,l=o-i,c=l!==0?a/l:0,u=(Math.ceil(i)-i)*c,h=(Math.floor(i)-i)*c;return new Y_e(r,Math.floor(i),Math.ceil(o),c,a<0?u:h,a<0?h:u,a<0?s:r,a<0?r:s)}constructor(e,n,r,i,s,o,a,l){this.x=e,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Hl=[[0,0],[0,0],[0,0],[0,0]],ctt=1e-6;let utt=class{constructor(e,n=null,r=e.lods[0].level,i=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>att.create(e,a,n));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,n,r=!1){di.set(n);const i=this._infoByLevel[di.level];return i?i.getTileBounds(e,di,r):e}getTileCoords(e,n,r=!1){di.set(n);const i=this._infoByLevel[di.level];return i?i.getTileCoords(e,di,r):e}getTileCoverage(e,n=192,r=!0,i="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=SH.pool.acquire(s),a=this._wrap;let l,c,u,h=1/0,f=-1/0;const g=o.spans;Hl[0][0]=Hl[0][1]=Hl[1][1]=Hl[3][0]=-n,Hl[1][0]=Hl[2][0]=e.size[0]+n,Hl[2][1]=Hl[3][1]=e.size[1]+n;for(const T of Hl)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const y=[];let _=3;for(let T=0;T<4;T++){if(Hl[T][1]===Hl[_][1]){_=T;continue}const A=ltt.create(Hl[T],Hl[_]);h=Math.min(A.ymin,h),f=Math.max(A.ymax,f),y[A.ymin]===void 0&&(y[A.ymin]=[]),y[A.ymin].push(A),_=T}if(h==null||f==null||f-h>100)return null;let b=[];for(l=h;l<f;){y[l]!=null&&(b=b.concat(y[l])),c=1/0,u=-1/0;for(let T=b.length-1;T>=0;T--){const A=b[T];c=Math.min(c,A.getLeftCol()),u=Math.max(u,A.getRightCol())}if(c=Math.floor(c),u=Math.floor(u),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(u/s.worldSize[0]);for(let A=Math.floor(c/s.worldSize[0]);A<=T;A++)g.push(new $F(l,Math.max(s.getFirstColumnForWorld(A),c),Math.min(s.getLastColumnForWorld(A),u)))}else g.push(new $F(l,c,u));else c>s.last[0]||u<s.first[0]||(c=Math.max(c,s.first[0]),u=Math.min(u,s.last[0]),g.push(new $F(l,c,u)));l+=1;for(let T=b.length-1;T>=0;T--){const A=b[T];A.ymax>=l?A.incrRow():b.splice(T,1)}}return o}getTileParentId(e){di.set(e);const n=this._infoByLevel[di.level],r=this._lodInfos.indexOf(n)-1;return r<0?null:(this._getTileIdAtLOD(di,this._lodInfos[r],di),di.id)}getTileResolution(e){const n=this._infoByLevel[typeof e=="object"?e.level:e];return n?n.resolution:-1}getTileScale(e){const n=this._infoByLevel[e.level];return n?n.scale:-1}intersects(e,n){di.set(n);const r=this._infoByLevel[di.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(di,i,di);const o=i.denormalizeCol(di.col,di.world);for(const a of e.spans)if(a.row===di.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((_,b)=>(_[0]=Math.min(_[0],b.row),_[1]=Math.max(_[1],b.row),_[2]=Math.min(_[2],b.colFrom),_[3]=Math.max(_[3],b.colTo),_),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(di.col,di.world),h=i.getColumnForX(r.getXForColumn(u)),f=i.getRowForY(r.getYForRow(di.row)),g=i.getColumnForX(r.getXForColumn(u+1))-1,y=i.getRowForY(r.getYForRow(di.row+1))-1;return!(h>c||g<l||f>a||y<o)}const s=i.denormalizeCol(di.col,di.world);return e.spans.some(o=>o.row===di.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,n,r){if(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],this._wrap){const i=Ua(this.tileInfo.spatialReference),s=-r*(i.valid[1]-i.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>n[0])return this._infoByScale[n[0]];for(let r=1;r<n.length-1;r++)if(e>n[r]+ctt)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]}getClosestInfoForScale(e){const n=this.scales;return this._infoByScale[e]||(e=n.reduce((r,i)=>Math.abs(i-e)<Math.abs(r-e)?i:r,n[0])),this._infoByScale[e]}scaleToLevel(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=n.length-1;r>=0;r--)if(e<n[r])return r===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[r]].level+(n[r]-e)/(n[r]-n[r+1]);return this._infoByScale[n[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,n,r){const i=this._infoByLevel[r.level];return e.set(r),n.resolution<i.resolution?null:(n.resolution===i.resolution||(e.level=n.level,e.col=Math.floor(r.col*i.resolution/n.resolution+.01),e.row=Math.floor(r.row*i.resolution/n.resolution+.01)),e)}},htt=class{constructor(e,n){this.item=e,this.controller=n,this.promise=null}},dtt=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Tw,this._controllers=new Tw,this._processingItems=new Tw,this._pausedSignal=H2(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new pA(e.peeker),this.process=e.process;const n=e.scheduler;e.priority&&n&&(this._task=n.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=ii(this._schedule),this._task=ii(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const n=this._controllers.get(e);n&&n.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(n=>e.push(n)),this._controllers.clear(),e.forEach(n=>n.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((n,r)=>e(r))}get(e){const n=this._deferreds.get(e);return n?n.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,n){const r=this.get(e);if(r)return r;const i=new AbortController;let s=null;n&&(s=vu(n,()=>i.abort()));const o=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),a(),c.reject(Pr())},a=()=>{l.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=jB(i.signal,o),c=Ec();return this._deferreds.set(e,c),this._controllers.set(e,i),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Pr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const n of e)this._queue.push(n.item),n.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=kb(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(n))}_processError(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(n))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let n;const r=new AbortController,i=new htt(e,r);this._processingItems.set(e,i);try{n=this.process(e,r.signal)}catch(s){this._processError(i,s)}_a(n)?(i.promise=n,n.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,n)}get test(){}};const pie=[0,0];let Lf=class extends Kt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:n,scheduler:r,priority:i}=this;this._queue=new dtt({concurrency:e,scheduler:r,priority:i,process:(s,o)=>{const a=this._keyToItem.get(s);return n(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Di(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const n=typeof e=="string"?e:e.id;this._queue.abort(n)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const n=e.key.id;if(this._queue.has(n))return this._queue.get(n);const r=this._queue.push(n),i=this.tileInfoView.getTileScale(e.key),s=AC(this._tilesByScale,i,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(i),this._keyToItem.delete(n)};return s.add(e.key),this._keyToItem.set(n,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const n=new Set;for(const o of e)n.add(this._keyToItem.get(o).key);const r=this.state.scale;let i,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(qpe(a,l=>n.has(l))){const l=Math.abs(o-r);l<s&&(i=a,s=l)}return this._getClosestTileKey(i,e).id}_getClosestTileKey(e,n){const r=this.tileInfoView,i=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(n.has(a.id)){r.getTileCoords(pie,a);const l=pO(pie,i);l<o&&(o=l,s=a)}return s}};x([E({constructOnly:!0})],Lf.prototype,"concurrency",void 0),x([E({constructOnly:!0})],Lf.prototype,"priority",void 0),x([E({constructOnly:!0})],Lf.prototype,"process",void 0),x([E({constructOnly:!0})],Lf.prototype,"scheduler",void 0),x([E()],Lf.prototype,"state",void 0),x([E({constructOnly:!0})],Lf.prototype,"tileInfoView",void 0),Lf=x([he("esri.views.2d.tiling.TileQueue")],Lf);const nLt=Lf;let ftt=class{constructor(e,n,r){this.maxSize=e,this._tileInfoView=n,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const n=this._tilePerId.get(e);if(!n)return;const r=n.key.level,i=this._tileKeysPerLevel[r];mie(this._tilePerId,e);for(let s=0;s<i.length;s++)if(i[s].id===e){i.splice(s,1);break}return n.visible=!0,n}add(e){e.visible=!1;const n=e.key,r=n.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const i=n.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(n)}prune(e,n,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==e&&(i=this._pruneAroundCenterTile(i,n,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,n,r,e))}_pruneAroundCenterTile(e,n,r,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],u=[0,0],h=[0,0];for(s.sort((f,g)=>(u[0]=a.x+l*(f.col+.5),u[1]=a.y-c*(f.row+.5),h[0]=a.x+l*(g.col+.5),h[1]=a.y-c*(g.row+.5),lA(u,n)-lA(h,n)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const n=this._tilePerId.get(e);this._removedFunc&&n&&this._removedFunc(n),mie(this._tilePerId,e)}};function mie(t,e){t.delete(e)}const X0=new Ob(0,0,0,0),xf=new Map,iS=[],VF=[];let iLt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new ftt(e.cacheSize,this.tileInfoView,n=>{this.releaseTile(n)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:n,tileIndex:r}=this,{scale:i,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&i>this._previousScale;if(this._previousScale=i,!n&&(i>a||i<l))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:f}=u,{level:g}=f;this.tiles.length=0,r.forEach(T=>T.visible=!0);let y=0,_=0;if(h.length>0)for(const{row:T,colFrom:A,colTo:C}of h)for(let I=A;I<=C;I++){y++;const R=X0.set(g,T,f.normalizeCol(I),f.getWorldForColumn(I)).id;let V=r.get(R);if(V)V.isReady?(xf.set(R,V),_++):c||this._addParentTile(R,xf);else{if(this._tileCache?.has(R)){if(V=this._tileCache.pop(R),this.tileIndex.set(R,V),V.isReady){xf.set(R,V),_++;continue}}else V=this.acquireTile(X0),this.tileIndex.set(R,V);c||this._addParentTile(R,xf)}}const b=_===y;for(const[T,A]of r){if(xf.has(T))continue;X0.set(T);const C=this.tileInfoView.intersects(u,X0),I=this.cachePolicy==="purge"?X0.level!==g:X0.level>g;!C||!c&&b?!I&&C||iS.push(A):A.isReady?I&&this.cachePolicy==="purge"&&this._hasReadyAncestor(X0,g)?iS.push(A):VF.push(A):I&&iS.push(A)}for(const T of VF)T.isReady&&xf.set(T.key.id,T);for(const T of iS)this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(T.key.id);for(const T of xf.values())this.tiles.push(T);for(const T of r.values())xf.has(T.key.id)||(T.visible=!1);this._tileCache?.prune(g,s,o),SH.pool.release(u),VF.length=0,iS.length=0,xf.clear()}clear(){const{tileIndex:e}=this;for(const n of e.values())this.releaseTile(n);e.clear()}refresh(e){for(const n of this.tileIndex.values())e(n);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,n){let r=e,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i?.isReady){n.has(i.key.id)||n.set(i.key.id,i);break}}else if(this._tileCache?.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i?.isReady)){n.has(i.key.id)||n.set(i.key.id,i);break}}_hasReadyAncestor(e,n){const r=El();this.tileInfoView.getTileBounds(r,e,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=n&&i.key.level<e.level){const s=El();if(this.tileInfoView.getTileBounds(s,i.key,!0),NGe(s,r))return!0}return!1}};const ptt={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>ge(()=>import("./ElevationProfileAnalysisView2D-B7mb7nCz.js"),__vite__mapDeps([383,175,55,56,231,377,249,31,250,251,270,32,33,384,325,385,386,387,388,389,390,49,391,392,393,394,395,161,162,26,27,396,397,398,46,399,400,188,106,169,170,184,233,104,401,153,197,212,183])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function mtt(t){const e=ptt[t.type];if(!e)throw new Qe("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let gtt=class{constructor(e,n={}){this.events=new e8e,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):n.canvas!=null&&(this._canvas=n.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let i=this._canvas.getContext("webgl2",r);i||(i=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=i,this._handles=xv([wb(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,n){if(this._hasMajorPerformanceCaveat||_e("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=_e("esri-performance-mode-frames-between-render")&&(n(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,i,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${i}, ${s}, ${o}, ${a}, ${l})`}}else n()}resize(e){const n=this._canvas,r=n.style,{state:{size:i},pixelRatio:s}=e,o=i[0],a=i[1],l=Math.round(o*s),c=Math.round(a*s);n.width===l&&n.height===c||(n.width=l,n.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,n){const[r,i]=e.center,[s,o]=n.center,[a,l]=e.toScreen([0,0],s,o),[c,u]=e.toScreen([0,0],r,i),h=c-a,f=u-l,g=e.scale/n.scale,y=n.rotation-e.rotation,_=Rd();return i_e(_),kO(_,_,[g,g]),JC(_,_,VC(y)),q2(_,_,[h,f]),_}};function ytt(t,e,n,r,i){X_e(t,e,n||0,r||t.length-1,i||vtt)}function X_e(t,e,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);X_e(t,e,Math.max(n,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),i)}var u=t[e],h=n,f=r;for(sS(t,n,e),i(t[r],u)>0&&sS(t,n,r);h<f;){for(sS(t,h,f),h++,f--;i(t[h],u)<0;)h++;for(;i(t[f],u)>0;)f--}i(t[n],u)===0?sS(t,n,f):sS(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function sS(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function vtt(t,e){return t<e?-1:t>e?1:0}function UN(t,e){if(!(this instanceof UN))return new UN(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function _tt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function F_(t,e){QS(t,0,t.children.length,e,t)}function QS(t,e,n,r,i){i||(i=xx(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=e;o<n;o++)s=t.children[o],eT(i,t.leaf?r(s):s);return i}function eT(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function gie(t,e){return t.minX-e.minX}function yie(t,e){return t.minY-e.minY}function zF(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function kR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function xtt(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function wtt(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function GF(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function AR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function xx(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vie(t,e,n,r,i){for(var s,o=[e,n];o.length;)(n=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,ytt(t,s,e,n,i),o.push(e,s,s,n))}UN.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!AR(t,e))return n;for(var i,s,o,a,l=[];e;){for(i=0,s=e.children.length;i<s;i++)o=e.children[i],AR(t,a=e.leaf?r(o):o)&&(e.leaf?n.push(o):GF(t,a)?this._all(o,n):l.push(o));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!AR(t,e))return!1;for(var r,i,s,o,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(s=e.children[r],AR(t,o=e.leaf?n(s):s)){if(e.leaf||GF(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=xx([]),this},remove:function(t,e){if(t==null)return this;for(var n,r,i,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=c.pop(),s=!0),o.leaf&&(i=_tt(t,o.children,e))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!GF(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:gie,compareMinY:yie,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,s=n-e+1,o=this._maxEntries;if(s<=o)return F_(i=xx(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(i=xx([])).leaf=!1,i.height=r;var a,l,c,u,h=Math.ceil(s/o),f=h*Math.ceil(Math.sqrt(o));for(vie(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(vie(t,a,c=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=c;l+=h)u=Math.min(l+h-1,c),i.children.push(this._build(t,l,u,r-1));return F_(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,s,o,a,l,c,u,h;r.push(e),!e.leaf&&r.length-1!==n;){for(u=h=1/0,i=0,s=e.children.length;i<s;i++)l=zF(o=e.children[i]),(c=xtt(t,o)-l)<h?(h=c,u=l<u?l:u,a=o):c===h&&l<u&&(u=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),s=[],o=this._chooseSubtree(i,this.data,e,s);for(o.children.push(t),eT(o,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),o=xx(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,F_(n,this.toBBox),F_(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,e){this.data=xx([t,e]),this.data.height=t.height+1,this.data.leaf=!1,F_(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,s,o,a,l,c,u;for(l=c=1/0,r=e;r<=n-e;r++)o=wtt(i=QS(t,0,r,this.toBBox),s=QS(t,r,n,this.toBBox)),a=zF(i)+zF(s),o<l?(l=o,u=r,c=a<c?a:c):o===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:gie,i=t.leaf?this.compareMinY:yie;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,s,o=this.toBBox,a=QS(t,0,e,o),l=QS(t,n-e,n,o),c=kR(a)+kR(l);for(i=e;i<n-e;i++)s=t.children[i],eT(a,t.leaf?o(s):s),c+=kR(a);for(i=n-e-1;i>=e;i--)s=t.children[i],eT(l,t.leaf?o(s):s),c+=kR(l);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)eT(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)t[n].children.length===0?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():F_(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function btt(t,{timeZone:e,timeExtent:n}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:n?.start,currentEnd:n?.end}}}}let _ie=class Z_e{constructor(e,n){this.key=new Ob(0,0,0,0),this.bounds=El(),this.objectIds=new Set,this.key.set(n);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return PGe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return btt(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),n=Da.acquire();for(let r=0;r<e.length;r++)n[r]=new Z_e(this.tileInfoView,e[r]);return n}getQuantizationParameters(){return Km.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Z0={added:[],removed:[]},UF=new Set,Ett=new Ob(0,0,0,0);function Stt(t,e){const n=Ua(e);if(!n)return null;const[r,i]=n.valid;return t[2]>i?[El([t[0],t[1],i,t[3]]),El([r,t[1],r+t[2]-i,t[3]])]:t[0]<r?[El([r,t[1],t[2],t[3]]),El([i-(r-t[0]),t[1],i,t[3]])]:null}let Ttt=class extends dme{constructor(e){super(),this._tiles=new Map,this._index=UN(9,_e("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||PW(e)===0||RW(e)===0)return[];const n=Stt(e,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const n={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const i=new _ie(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(const r of e.removed)if(this.has(r)){const i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(e){const n=this.tileScheme.getTileCoverage(e,0);if(!n)return;const{spans:r,lodInfo:i}=n,{level:s}=i;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const u=Ett.set(s,o,i.normalizeCol(c),i.getWorldForColumn(c)).id;if(UF.add(u),!this.has(u)){const h=new _ie(this.tileScheme,u);this._tiles.set(u,h),this._index.insert(h),this.tiles.push(h),Z0.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];UF.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Z0.removed.push(a))}(Z0.added.length||Z0.removed.length)&&this.emit("update",Z0),SH.pool.release(n),UF.clear(),Z0.added.length=0,Z0.removed.length=0}};const lLt=1e-30,xie=512,CR=16777216,cLt=8,uLt=29,hLt=24,dLt=4,fLt=0,pLt=0,mLt=0,gLt=1,yLt=2,vLt=3,_Lt=4,xLt=5,wLt=6,bLt=12,ELt=13,SLt=5,ktt=6,TLt=5,kLt=6,J_e=6,Att=1<<J_e,ALt=Att<<1,CLt=1.05,ILt=3,PLt=1,RLt=3,MLt=3,NLt=5,LLt=6,OLt=1.15,Ctt=4,DLt=128,Itt=256,jLt=Itt-2*Ctt,FLt=2,$Lt=128,VLt=1,zLt=10,GLt=1024,ULt=128,BLt=4,WLt=1,HLt=1<<20,qLt=.75,KLt=10,YLt=.75,XLt=256,ZLt=32,JLt=512,QLt=0,eOt=1,Ptt=1,tOt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],nOt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],oS=256,Rtt=()=>kt.getLogger("esri.views.webgl.checkWebGLError");function Q_e(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const exe=!!_e("enable-feature:webgl-debug");function txe(){return exe}function rOt(){return exe}function J0(t,e=txe()){if(e){const n=Q_e(t);if(n){const r=new Error().stack;Rtt().error(new Qe("webgl-error","WebGL error occurred",{message:n,stack:r}))}}}const iOt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Q0={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Bt={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},Mtt=Object.values(Bt),BN={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},XT={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},yz={FLOAT:Q0.FLOAT,UNSIGNED_BYTE:Q0.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:Q0.BYTE,UNSIGNED_SHORT:Q0.UNSIGNED_SHORT,SHORT:Q0.SHORT,UNSIGNED_INT:Q0.UNSIGNED_INT,INT:Q0.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},sOt=33984,wie={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},oOt=1029,aOt=0,lOt=36064,cOt=36065,uOt=36066,hOt=36067,dOt=33306,fOt=36096,pOt=36128,Qo={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function mOt(t,e,n,r=0){const i=t.gl;t.bindBuffer(n);for(const s of n.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const a=r*s.stride;if(s.count<=4)i.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+a),i.enableVertexAttribArray(o),s.divisor>0&&i.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)i.vertexAttribPointer(o+l,3,s.type,s.normalized,s.stride,s.offset+12*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)i.vertexAttribPointer(o+l,4,s.type,s.normalized,s.stride,s.offset+16*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(txe()){const l=Q_e(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${a}:`,l,s)}}}function gOt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function Ntt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Bt.R8:case Bt.R8I:case Bt.R8UI:case Bt.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Bt.RGBA4:case Bt.R16F:case Bt.R16I:case Bt.R16UI:case Bt.RG8:case Bt.RG8I:case Bt.RG8UI:case Bt.RG8_SNORM:case Bt.RGB565:case Bt.RGB5_A1:case XT.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Bt.RGB8:case Bt.RGB8I:case Bt.RGB8UI:case Bt.RGB8_SNORM:case Bt.SRGB8:case XT.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Bt.RGBA8:case Bt.R32F:case Bt.R11F_G11F_B10F:case Bt.RG16F:case Bt.R32I:case Bt.R32UI:case Bt.RG16I:case Bt.RG16UI:case Bt.RGBA8I:case Bt.RGBA8UI:case Bt.RGBA8_SNORM:case Bt.SRGB8_ALPHA8:case Bt.RGB9_E5:case Bt.RGB10_A2UI:case Bt.RGB10_A2:case XT.DEPTH_COMPONENT32F:case BN.DEPTH24_STENCIL8:return 4;case BN.DEPTH32F_STENCIL8:return 5;case Bt.RGB16F:case Bt.RGB16I:case Bt.RGB16UI:return 6;case Bt.RG32F:case Bt.RG32I:case Bt.RG32UI:case Bt.RGBA16F:case Bt.RGBA16I:case Bt.RGBA16UI:return 8;case Bt.RGB32F:case Bt.RGB32I:case Bt.RGB32UI:return 12;case Bt.RGBA32F:case Bt.RGBA32I:case Bt.RGBA32UI:return 16;case Qo.COMPRESSED_RGB_S3TC_DXT1_EXT:case Qo.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Qo.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Qo.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Qo.COMPRESSED_R11_EAC:case Qo.COMPRESSED_SIGNED_R11_EAC:case Qo.COMPRESSED_RGB8_ETC2:case Qo.COMPRESSED_SRGB8_ETC2:case Qo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Qo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Qo.COMPRESSED_RG11_EAC:case Qo.COMPRESSED_SIGNED_RG11_EAC:case Qo.COMPRESSED_RGBA8_ETC2_EAC:case Qo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let nxe=class{constructor(e=0,n=e){this.width=e,this.height=n,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=yz.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function Ltt(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:Ntt(t.internalFormat))*(t.target===34067?6:1))}const aS=()=>kt.getLogger("esri/views/webgl/textureUtils");function lS(t){const{width:e,height:n,depth:r}=t;(e!=null&&e<0||n!=null&&n<0||r!=null&&r<0)&&aS().error("Negative dimension parameters are not allowed!");const{internalFormat:i}=t;if(i&&(rxe(i)||ixe(i))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&aS().error("Depth textures cannot have mipmaps"),s?a!==9729&&a!==9728&&aS().error("Depth textures cannot sample mipmaps"):(a!==9728&&aS().error("Depth textures without filtering must use NEAREST filtering"),o&&aS().error("Depth textures without filtering cannot use compare function"))}}function Ott(t){return Mtt.includes(t)}function rxe(t){return UL(XT,t)}function ixe(t){return UL(BN,t)}function Dtt(t){return t!=null&&UL(Qo,t)}function wx(t){return t!=null&&"type"in t&&t.type==="compressed"}function jtt(t){return t!=null&&"byteLength"in t}function bie(t){return t!=null&&!wx(t)&&!jtt(t)}function $_(t){return t===32879||t===35866}function Eie(t,e,n,r=1){let i=Math.max(e,n);return t===32879&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function IR(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case yz.FLOAT:switch(t.pixelFormat){case 6408:return Bt.RGBA32F;case 6407:return Bt.RGB32F;default:throw new Qe("texture:unknown-format","Unable to derive format")}case yz.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Bt.RGBA8;case 6407:return Bt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?BN.DEPTH24_STENCIL8:e===6402?XT.DEPTH_COMPONENT24:e,t.internalFormat}function Ftt(t){let e="width"in t?t.width:t.codedWidth,n="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,n=t.videoHeight),{width:e,height:n,depth:1}}let $tt=class sxe extends nxe{constructor(e,n){switch(super(),this.context=e,Object.assign(this,n),this.internalFormat){case Bt.R16F:case Bt.R32F:case Bt.R8_SNORM:case Bt.R8:this.pixelFormat=6403;break;case Bt.R8I:case Bt.R8UI:case Bt.R16I:case Bt.R16UI:case Bt.R32I:case Bt.R32UI:this.pixelFormat=36244}}static validate(e,n){return new sxe(e,n)}};const Vtt=!!_e("esri-tests-disable-gpu-memory-measurements"),wf=()=>kt.getLogger("esri/views/webgl/Texture");var Ss;let ztt=(Ss=class{constructor(e,n=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=n;else{const i=$tt.validate(e,n);if(!i)throw new Qe("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=i}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Vtt?0:Ltt(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(wie.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,n){const r=this._descriptor;if(r.width!==e||r.height!==n){if(this._wasImmutablyAllocated)throw new Qe("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=n,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!wx(e)&&this._descriptor.internalFormat&&UL(Qo,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!wx(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,n,r,i,s,o,a=0){o||wf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||wf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=IR(l);const{context:c,pixelFormat:u,dataType:h,target:f,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new Qe("texture:uninitialized","Cannot update immutable texture before allocation!");const y=c.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>l.width||r+s>l.height)&&wf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;a&&(i&&s||wf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),bie(o)?_.texSubImage2D(f,e,n,r,i,s,u,h,o):wx(o)?_.compressedTexSubImage2D(f,e,n,r,i,s,l.internalFormat,o.levels[e]):_.texSubImage2D(f,e,n,r,i,s,u,h,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(y,Ss.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,n,r,i,s,o,a,l){l||wf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||wf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=IR(c);const{context:u,pixelFormat:h,dataType:f,isImmutable:g,target:y}=c;if(g&&!this._wasImmutablyAllocated)throw new Qe("texture:uninitialized","Cannot update immutable texture before allocation!");$_(y)||wf().warn("Attempting to set 3D texture data on a non-3D texture");const _=u.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+s>c.width||r+o>c.height||i+a>c.depth)&&wf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=u;if(wx(l))l=l.levels[e],b.compressedTexSubImage3D(y,e,n,r,i,s,o,a,c.internalFormat,l);else{const T=l;b.texSubImage3D(y,e,n,r,i,s,o,a,h,f,T)}u.bindTexture(_,Ss.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Qe("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,lS(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const n=this._descriptor.context.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(n,Ss.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new Qe("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,lS(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,lS(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),lS(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=B1(this._compressionAbortController)}_setData(e,n){const r=this._descriptor,i=r.context?.gl;if(!i)return;J0(i),this.hasWebGLTextureObject||(this._glName=i.createTexture(),r.context.instanceCounter.increment(wie.Texture,this)),lS(r);const s=r.context.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),J0(i);const o=n??r.target,a=$_(o);if(bie(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:c,depth:u}=r;if(l==null||c==null)throw new Qe("texture:missing-size","Width and height must be specified!");if(a&&u==null)throw new Qe("texture:missing-depth","Depth must be specified!");if(r.internalFormat=IR(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,c,u),wx(e)){if(!Dtt(r.internalFormat))throw new Qe("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,c,u,e),J0(i),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),J0(i),r.context.bindTexture(s,Ss.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let n=34069;n<=34074;n++)this._setData(e,n)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:n,flipped:r,preMultiplyAlpha:i}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,n),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_setDataFromTexImageSource(e,n){const{gl:r}=this._descriptor.context,i=this._descriptor;i.internalFormat=IR(i);const s=$_(n),{width:o,height:a,depth:l}=Ftt(e);i.width&&i.height,i.width||(i.width=o),i.height||(i.height=a),s&&i.depth,s&&(i.depth=l),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,i.internalFormat,i.hasMipmap,o,a,l),this._texImage(n,0,i.internalFormat,o,a,l,e),J0(r),i.hasMipmap&&(this.generateMipmap(),J0(r))}_setDataFromCompressedSource(e,n,r){const i=this._descriptor,{width:s,height:o,depth:a}=i,l=e.levels,c=Eie(r,s,o,a),u=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(i.target,33085,u),this._forEachMipmapLevel((h,f,g,y)=>{const _=l[Math.min(h,l.length-1)];this._compressedTexImage(r,h,n,f,g,y,_)},u)}_texStorage(e,n,r,i,s,o){const{gl:a}=this._descriptor.context;if(!Ott(n)&&!rxe(n)&&!ixe(n))throw new Qe("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Eie(e,i,s,o):1;if($_(e)){if(o==null)throw new Qe("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,n,i,s,o)}else a.texStorage2D(e,l,n,i,s);this._wasImmutablyAllocated=!0}_texImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=$_(e),{isImmutable:u,pixelFormat:h,dataType:f}=this._descriptor;if(u){if(a!=null){const g=a;if(c){if(o==null)throw new Qe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,n,0,0,0,i,s,o,h,f,g)}else l.texSubImage2D(e,n,0,0,i,s,h,f,g)}}else{const g=a;if(c){if(o==null)throw new Qe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,n,r,i,s,o,0,h,f,g)}else l.texImage2D(e,n,r,i,s,0,h,f,g)}}_compressedTexImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=$_(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new Qe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,n,0,0,0,i,s,o,r,a)}else l.compressedTexSubImage2D(e,n,0,0,i,s,r,a)}else if(c){if(o==null)throw new Qe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,n,r,i,s,o,0,a)}else l.compressedTexImage2D(e,n,r,i,s,0,a)}async _compressOnWorker(e){const{width:n,height:r,context:i,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:h}=i.capabilities;if(!Ss.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!u&&!h)return;this.abortCompression();const f=new AbortController;let g;this._compressionAbortController=f,l?.increment();try{e instanceof Uint8Array?g=e.buffer:(g=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),gi(f));const y={data:g,width:n,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!u,hasS3TC:!!h},_=await Ss.compressionWorkerHandle.invoke(y,f.signal,"low");if(gi(f),_.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=_.internalFormat,this._setData(_.compressedTexture),c?.(b-this.usedMemory)}}catch(y){Sa(y)||wf().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),g instanceof ImageBitmap&&g.close()}}_forEachMipmapLevel(e,n=1/0){let{width:r,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===32879;if(r==null||i==null||l&&s==null)throw new Qe("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,i,s),o&&(r!==1||i!==1||l&&s!==1)&&!(c>=n);++c)r=Math.max(1,r>>1),i=Math.max(1,i>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,n=e.context?.gl;let r=e.samplingMode,i=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(i=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(i=9728)),n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,r),n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,i)}_applyWrapMode(){const e=this._descriptor,n=e.context?.gl;typeof e.wrapMode=="number"?(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode)):(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode.s),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,n=e.context?.gl,r=e.compareEnabled?n.COMPARE_REF_TO_TEXTURE:n.NONE;n.texParameteri(e.target,n.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&n.texParameteri(e.target,n.TEXTURE_COMPARE_FUNC,n.GREATER),J0(n)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,n=e.context.capabilities.textureFilterAnisotropic;n&&e.context.gl.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Ss.TEXTURE_UNIT_FOR_UPDATES=0,Ss.compressionWorkerHandle=null,Ss);const BF=()=>kt.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Gtt(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Utt=[0,0,0,0];let oxe=class{constructor(){this.type="single",this._highlightOptions=new Lg,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*oS),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,n){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,ktt),n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<J_e)-1,activeGradient:this}]}_updateGradientTexture(e){const n=Btt(this._highlightOptions);if(n===this._optionsShadeTexKey)return;this._optionsShadeTexKey=n,Gtt(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,i=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Ptt,c=Math.abs(i)>l?Math.round(10*(Math.abs(i)-l))/10:0,u=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let h;c&&!u?BF().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&u?BF().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&u&&BF().error("The highlight is "+Math.max(c,u)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function g(_,b,T){f[0]=(1-T)*_[0]+T*b[0],f[1]=(1-T)*_[1]+T*b[1],f[2]=(1-T)*_[2]+T*b[2],f[3]=(1-T)*_[3]+T*b[3]}const{_texelData:y}=this;for(let _=0;_<oS;++_)h=i+_/(oS-1)*(a-i),h<i?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):h<s?g(Utt,r.outlineColor,(h-i)/(s-i)):h<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:h<a?g(r.outlineColor,r.fillColor,(h-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,y[4*_]=255*f[0],y[4*_+1]=255*f[1],y[4*_+2]=255*f[2],y[4*_+3]=255*f[3];if(this._minMaxDistance[0]=i,this._minMaxDistance[1]=a,!this._shadeTex){const _=new nxe(oS,1);_.wrapMode=33071,this._shadeTex=new ztt(e,_)}this._shadeTex.updateData(0,0,0,oS,1,this._texelData)}};function Btt(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Wtt=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let n=0;n<e.length;n++)this.gradients[n]||(this.gradients[n]=new oxe),this.gradients[n].setHighlightOptions(e[n]);for(let n=e.length+1;n<this.gradients.length;n++)this.gradients[n].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const n=[];for(let r=0;r<this.gradients.length;r++){const i=this.gradients[r];n.push({activeReasons:e,activeGradient:i}),e<<=1}return n}};const axe={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Htt={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},qtt={...axe,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Ktt({pixelRatio:t,state:e,displayLevel:n,requiredLevel:r},i){const s=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:e.scale,currentZoom:n,metersPerSRUnit:Jd(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function lxe(t){return t.passOptions?.type==="highlight"}function cxe(t){return t.passOptions?.type==="hittest"}function Ytt(t){if(!cxe(t))return null;const{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=t.passOptions;return{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function Xtt(t){if(!lxe(t))return null;const{activeReasons:e,highlightAll:n}=t.passOptions;return{activeReasons:e,highlightAll:n?1:0}}function xOt(t,e,n){const r={};for(const i in n)typeof n[i]!="function"?r[i]=n[i]:r[i]=n[i](t,e);return r}function wOt(t,e){const{attributeView:n,context:r}=t;return{storage:n.getUniforms(r),view:Ktt(t,e),hittestRequest:Ytt(t),highlight:Xtt(t)}}function bOt(t){return{inside:t.selection===2,outside:t.selection===3}}function Ztt(t){return cxe(t)?Htt:lxe(t)&&t.passOptions.stepType==="clear"?qtt:axe}function EOt(t){const{row:e,col:n}=t.key,r=n*xie,i=e*xie;return{tileOffsetFromLocalOrigin:[r%CR,i%CR],maxIntsToLocalOrigin:[Math.floor(r/CR),Math.floor(i/CR)]}}const Jtt=new Xs({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function SOt(t){return Jtt.toJSON(t)}function TOt(t){const{bandCount:e,attributeTable:n,colormap:r,pixelType:i}=t.raster.rasterInfo;return e===1&&(n!=null||r!=null||i==="u8"||i==="s8")}function Qtt(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Wtt:new oxe),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function kOt(t,e,n,r){const{painter:i,highlightGradient:s}=t,{highlight:o}=i.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const u={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(u),n(u),c<l.length-1){let f=0;for(let g=c+1;g<l.length;g++)f|=l[g].activeReasons;n({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};i.setPipelineState(Ztt(t)),i.updatePipelineState(t.context),o.draw(h),o.unbind()}t.passOptions=a}const PR=t=>parseFloat(t)/100;function ent(t,e,n){const r=typeof t.left=="string"?PR(t.left)*e:t.left,i=typeof t.right=="string"?PR(t.right)*e:t.right,s=typeof t.top=="string"?PR(t.top)*n:t.top,o=typeof t.bottom=="string"?PR(t.bottom)*n:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-i,r),ymin:a,ymax:Math.max(n-o,s)}}function uxe(t,e,n,r){switch(e.type){case"rect":{const{width:i,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=ent(e,i,s),{x:u,y:h}=n;return u>o&&u<a&&h>l&&h<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||uW(e.path,[n.x,n.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?cW(e.geometry,r):OC(e.geometry,r))}}function tnt(t){if(!t.highlights)return null;const e=t.highlights.findIndex(n=>n.name==="default");return e===-1?null:t.highlights.items[e]}function nnt(t,e){if(!t.highlights){if(!e)return;t.highlights=new Lt([new Lg])}const n=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[n].assignFrom(e):(t.highlights.removeAt(n),t.highlights.length===0&&(t.highlights=null))}async function rnt(t,e,n){const r=Wve(e)?Bve(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,l=null;n?.include?Tie(n.include,Sie(t,f=>{i.add(f),WF(f,g=>s.add(g))},(f,g)=>{s.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>o=!0)):(o=!0,i=new Set(t.allLayerViews),i.forEach(f=>{WF(f,g=>s.add(g))})),n?.exclude&&Tie(n.exclude,Sie(t,f=>{i.delete(f),WF(f,g=>s.delete(g))},f=>s.delete(f),f=>{l||(l=new Set),l.add(f)}));const c=t.toMap(r),u=t.allLayerViews.filter(f=>!f.suspended&&i.has(f)&&f.clips.every(g=>uxe(t,g,r,c))).reverse();let h=[...o?t.graphicsView.hitTest(c).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:c})):[],...await Promise.all(u.map(f=>f.hitTest(c,r)).toArray())].filter(C2).flat().filter(C2);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||s.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(vz(f.graphic)))),l&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(vz(f.graphic)))),{screenPoint:r,results:h}}function Sie(t,e,n,r,i,s){return o=>{if(o instanceof ta){if(o.layer===t)s?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&i?.(a)}r(vz(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&n(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function Tie(t,e){if(t)if(eN(t))for(const n of t)if(eN(n))for(const r of n)e(r);else e(n);else e(t)}function vz(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function WF(t,e){const n=t.layer;n?.type==="subtype-group"&&n.sublayers.forEach(r=>{e(r)})}let cS=null,WN=!0;function int(t,e,n){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(WN)try{return new ImageData(t,e)}catch{WN=!1}return hxe(t,e,n)}function AOt(t,e,n,r){if(!e||!n)throw new Error("Cannot construct image data without dimensions");if(WN)try{return new ImageData(t,e,n)}catch{WN=!1}const i=hxe(e,n,r);return i.data.set(t,0),i}function snt(){return cS||(cS=document.createElement("canvas"),cS.width=1,cS.height=1),cS}function hxe(t,e,n){return n||(n=snt()),n.getContext("2d").createImageData(t,e)}async function ont(t,e){const n=window.URL.createObjectURL(t);try{const{data:r}=await rs(n,{...e,responseType:"image"});return r}catch(r){throw Sa(r)?r:new Qe("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function COt(t,e){const{arrayBuffer:n,mediaType:r}=await ant(t,e),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await ge(()=>import("./gif-8UnKRIb0.js"),[]);if(s(n))return o(n,e)}if(i){const{isAnimatedPNG:s,parseApng:o}=await ge(()=>import("./apng-CAQRQuzM.js"),__vite__mapDeps([402,63]));if(s(n))return o(n,e)}return ont(new Blob([n],{type:r}),e)}async function ant(t,e){const n=I2(t);if(n?.isBase64)return{arrayBuffer:Jfe(n.data),mediaType:n.mediaType};const r=await rs(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function dxe(t,e,n){const{ctx:r,canvas:i}=pxe(t,n),s=r.getImageData(0,0,t.width,t.height),o=gxe(i,e);return mxe(i),{dataUrl:o,data:s}}function fxe(t,e){const{ctx:n,canvas:r}=pxe(t,e),i=n.getImageData(0,0,t.width,t.height);return mxe(r),i}function pxe(t,e){const n=lnt();e.premultipliedAlpha&&dnt(t),n.width=t.width,n.height=t.height;const r=n.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&hnt(r),{ctx:r,canvas:n}}function mxe(t){t.width=0,t.height=0}function lnt(){return HF==null&&(HF=document.createElement("canvas")),HF}let HF=null;function gxe(t,e){const n=fnt[e.format],r=e.quality/100;return t.toDataURL(n,r)}function yxe(t,e){const n=unt(t),r=mnt[n];return{format:n,quality:_u(e??r,0,100)}}function vxe(t,e){return e/Math.max(t[0],t[1])}function cnt(t,e,n,r=0,i=0,s=t.width-r,o=t.height-i,a=!1){const{data:l}=t,{width:c,height:u,data:h}=e,f=s/c,g=o/u,y=Math.ceil(f/2),_=Math.ceil(g/2),b=t.width;for(let T=0;T<u;T++)for(let A=0;A<c;A++){const C=4*(A+(a?u-T-1:T)*c);let I=0,R=0,V=0,P=0,N=0,L=0;const O=(T+.5)*g;for(let F=Math.floor(T*g);F<(T+1)*g;F++){const G=Math.abs(O-(F+.5))/_,U=(A+.5)*f,ue=G*G;for(let be=Math.floor(A*f);be<(A+1)*f;be++){const ze=Math.abs(U-(be+.5))/y,Ce=Math.sqrt(ue+ze*ze);if(Ce>=1)continue;let de=2*Ce*Ce*Ce-3*Ce*Ce+1;const Le=4*(r+be+(i+F)*b);L+=de*l[Le+3],R+=de,!n&&l[Le+3]<255&&(de=de*l[Le+3]/255),V+=de*l[Le],P+=de*l[Le+1],N+=de*l[Le+2],I+=de}}h[C]=V/I,h[C+1]=P/I,h[C+2]=N/I,h[C+3]=L/R}return e}function unt(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return pnt}}function hnt(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function dnt(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==255&&i>0){const s=255/i;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const fnt={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},kie=98,pnt="png",mnt={png:100,jpg:kie,jpeg:kie},IOt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:int,encode:dxe,encodeData:fxe,getFormatAndQuality:yxe,getMaximumResolutionScale:vxe,resampleHermite:cnt,toDataUrl:gxe},Symbol.toStringTag,{value:"Module"})),_xe={flipY:!0,premultipliedAlpha:!0};async function gnt(t,e){const n=await xxe(t,e),{format:r,quality:i}=yxe(e?.format,e?.quality);return dxe(n,{format:r,quality:i},_xe)}async function ynt(t,e){const n=await xxe(t,e);return fxe(n,_xe)}function xxe(t,e){const n=xnt(e||{},_nt(t.stage,t.size),t.size,t.padding),r=vnt(e,t.allLayerViews);return t.stage.takeScreenshot(n,r,t.backgroundColor,e?.rotation)}function vnt(t={},e){if(!t.layers)return;const n=[];return t.layers.forEach(r=>{const i=e.find(s=>s.layer.id===r.id);i?.container&&n.push(i.container)}),n}function _nt(t,e){return Math.min(4,vxe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function xnt(t,e,n,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;t.width!=null&&t.height!=null?i=[t.width,t.height]:t.width==null&&t.height!=null?i=[t.height,t.height]:t.width!=null&&t.height==null?i=[t.width,t.width]:t.width==null&&t.height==null&&(i=null);const s=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(i){const u=s/o,h=i[0]/i[1];if(h>u){const f=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-f)/2),width:c.width,height:Math.round(f)}}else{const f=c.height*h;c={x:Math.round(c.x+(c.width-f)/2),y:c.y,width:Math.round(f),height:c.height}}}else i=[c.width,c.height];return i[0]>c.width?(a=Math.min(i[0]/c.width,e),l=i[0]/c.width/a):(a=1,l=i[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const wnt=t=>t.includes("Brush");let wxe=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),wnt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const Aie=Symbol("analyses-owner-handles");let $m=class extends Kt{constructor(e){super(e),this._allAnalysisViews=new Lt,this._creatingViewCount=0,this._attachedToViewResolver=Cie(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(n,r)=>this.view.emit(n,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Pr("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Pr()),this._attachedToViewResolver=Cie()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const n=this._items.get(e);if(n==null||n.state.list===1)throw new Qe("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return n.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),Aie)}_disconnectOwners(){this.removeHandles(Aie),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const i of e)this._addAnalysis(i);const n=e.on("after-add",i=>this._addAnalysis(i.item)),r=e.on("after-remove",i=>this._removeAnalysis(i.item));return Zn(()=>{n.remove(),r.remove();for(const i of e)this._removeAnalysis(i)})}_addAnalysis(e){const n=this._items.get(e);if(n==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=QL(i=>this._createAnalysisViewPromise(r,i).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else n.state.list=0}_removeAnalysis(e){const n=this._items.get(e);n!=null?(n.state.list=1,this._scheduleUpdate()):kt.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=kb(()=>this._update()))}_update(){this._scheduledUpdateHandle=ii(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:n,view:r}=e;switch(this._items.delete(n),e.state.view){case 0:e.createAnalysisViewTask=B1(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Di(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:n,analysisView:r}))}})}async _createAnalysisViewPromise(e,n){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new Qe("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(va(n))throw this._creatingViewCount-=1,Pr("AnalysisView creation aborted");const i=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;vu(n,()=>{s&&this._destroyAnalysisView(r,i)});try{await i.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,i),o}if(va(n))throw Pr();return s=!1,e.view=i,e.state.view=1,this._allAnalysisViews.add(i),this._creatingViewCount-=1,i}_destroyAnalysisView(e,n){n.destroyed||(this._creatingViewCount-=1,n.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:n}))}};x([E()],$m.prototype,"updating",null),x([E({constructOnly:!0})],$m.prototype,"importAnalysisViewModule",void 0),x([E({constructOnly:!0})],$m.prototype,"view",void 0),x([E()],$m.prototype,"_allAnalysisViews",void 0),x([E()],$m.prototype,"_creatingViewCount",void 0),$m=x([he("esri.views.support.AnalysisViewManager")],$m);const bnt=$m;function Cie(){const t=Ec();return t.promise.catch(()=>{}),t}let Ent=class{constructor(e){this.getUnmaskedRenderer=e}};function Snt(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new Ent(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Iie;function Tnt(){return Iie??=Cnt(),Iie}let knt=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Ant(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let n=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=e.getContext("webgl2"),n!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=Snt(n)?.getUnmaskedRenderer()??"unknown")),n==null)return n;t.available=!0,t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),n}function Cnt(){const t=new knt,e=Ant(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Int(t){const e=Tnt();return e.available?t==="3d"&&e.majorPerformanceCaveat?new Qe("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new Qe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Qe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Qe("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Pnt(t){return t&&"nodeType"in t}function Rnt(t){return t&&typeof t.render=="function"}const Pie={component:"esri-component"};let Ey=class extends Kt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const n=this._get("node");e!==n&&(e&&e.classList.add(Pie.component),n&&n.classList.remove(Pie.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||Pnt(e)?(this._set("widget",null),KW(e)):(Rnt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};x([E()],Ey.prototype,"id",null),x([E()],Ey.prototype,"node",null),x([Ks("node")],Ey.prototype,"castNode",null),x([E({readOnly:!0})],Ey.prototype,"widget",void 0),Ey=x([he("esri.views.ui.Component")],Ey);const C3=Ey,Mnt=(t,e)=>{let n=t;for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n.parentNode instanceof ShadowRoot?n=n.parentNode.host:n=n.parentNode}return!1},OOt=(t,e,n)=>{const r=Nnt(e).subscribe;return r(i=>{i.some(o=>Mnt(t,o.target))&&n()})},qF={},Nnt=t=>{const e=t.join(","),n=qF[e];if(n!==void 0)return n;const r=new Set,i=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&i.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(i.disconnect(),qF[e]=void 0)})};return qF[e]=s,s},bxe=(t,e)=>{let n=t;for(;n;){const r=n.closest?.(e);if(r)return r;const i=n.getRootNode?.();if(i===globalThis.document)return;n=i.host}};function Lnt(t){const e=bxe(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const DOt=(t,e,n)=>bxe(t,`[${e}]`)?.getAttribute(e)??n,Ont="--esri-calcite-mode-name";function Dnt(){const t=getComputedStyle(document.body).getPropertyValue(Ont).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const Exe="calcite-mode-";function Sxe(t){return Dnt()??Lnt(t??document.body)}function jOt(t){return Sxe(t)==="dark"}function jnt(t){return`${Exe}${Sxe(t)}`}function Fnt(t){const e=jnt(t);$nt(t),t.classList.add(e)}function $nt(t){Array.from(t.classList).forEach(e=>{e.startsWith(Exe)&&t.classList.remove(e)})}const PO=new Map;function Txe(){PO.clear()}function Vnt(t){return PO.get(t)}function znt(t,e){PO.set(t,e)}function KF(t){PO.delete(t)}function Gnt(...t){const e=Da.acquire();for(let r=0;r<t.length;r++){const i=t[r],s=typeof i;if(s==="string")e.push(i);else if(Array.isArray(i))e.push.apply(e,i);else if(s==="object")for(const o in i)i[o]&&e.push(o)}const n=e.join(" ");return Da.release(e),n}(()=>{const t=new Map,e=new ResizeObserver(r=>{Txe();for(const i of r)t.get(i.target)?.(i)}),n=(r,i,s)=>(t.set(r,i),e.observe(r,s),Zn(()=>{e.unobserve(r),t.delete(r)}));return(r,i,s)=>{let o=null;return xv([mn(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=n(a,i,s))},oa),Zn(()=>o?.remove())])}})();function Unt(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function FOt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function $Ot(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Bnt(t){return t==="Enter"||t===" "}async function Wnt(t,e){await QFe(CC(e));const n=typeof t=="function"?t():t;n&&("setFocus"in n&&typeof n.setFocus=="function"?await n.setFocus():n instanceof HTMLElement&&n.focus())}const Hnt={left:0,top:0,bottom:0,right:0},kxe={bottom:30,top:15,right:15,left:15},bf="esri-ui",el={ui:bf,corner:`${bf}-corner`,innerContainer:`${bf}-inner-container`,manualContainer:`${bf}-manual-container`,cornerContainer:`${bf}-corner-container`,topLeft:`${bf}-top-left`,topRight:`${bf}-top-right`,bottomLeft:`${bf}-bottom-left`,bottomRight:`${bf}-bottom-right`};function qnt(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function RR(t){return t===0?"0":`${t}px`}function YF(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function XF(t,{top:e,bottom:n,left:r,right:i}){t.style.top=e,t.style.bottom=n,t.style.left=r,t.style.right=i}let id=class extends MC{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=fu(),this.view=null,this._applyViewPadding=()=>{const n=this.container;n&&XF(n,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const n=this._innerContainer;n&&XF(n,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([mn(()=>[this.view?.padding,this.container],this._applyViewPadding,xa),mn(()=>this.padding,this._applyUIPadding,xa),mn(()=>[this.container,this._locale],([e,n])=>{e&&e.setAttribute("lang",n)},xa),Zme(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const n=this._get("container");e!==n&&(e&&(e.classList.add(el.ui),Fnt(e),this._attachContainers(e)),n&&(n.classList.remove(el.ui),XF(n,{top:"",bottom:"",left:"",right:""}),n.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const n=this._getViewPadding(),{top:r,bottom:i}=n;return Math.max(e-r-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...kxe,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const n=this._getViewPadding(),{left:r,right:i}=n;return Math.max(e-r-i,0)}add(e,n){let r,i,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,n));const o=YF(e);o&&({index:r,position:n,component:e,key:i}=o),n&&typeof n=="object"&&({index:r,key:i,position:n,internal:s}=n),!e||n&&!this._isValidPosition(n)||this._add(e,n,r??this._getNumComponentsAtPosition(n),i,s)}remove(e,n){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,n));const r=this._find(e);if(r){const i=this._componentMap.get(r);if(!i||i.key!==n)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i.position&&l.index>i.index&&l.index--}),this._components.splice(s,1)[0]}}empty(e,n={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,n);return}const r=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||n.removeInternal);for(const s of i)this.remove(s)}move(e,n){if(Array.isArray(e)&&e.forEach(o=>this.move(o,n)),!e)return;let r;const i=YF(e)||YF(n);if(i&&(r=i.index,n=i.position,e=i.component||e),n&&!this._isValidPosition(n))return;const s=this.remove(e);s&&this.add(s,{position:n,index:r})}find(e){if(!e)return null;const n=this._findById(e);return n&&(n.widget||n.node)}getComponents(e,n={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,n)):this._getComponentsAtPosition(e,n):this._components.filter(r=>n.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}getPosition(e){for(const n in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[n].contains(e))return n;return null}_add(e,n,r,i,s){e instanceof C3||(e=new C3({node:e}));const{widget:o}=e;o!=null&&o instanceof Kt&&o.addHandles(Zn(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[n];this._components.some(l=>{const c=this._componentMap.get(l)?.position,u=c?this._positionNameToContainerLookup[c]:null;return a===u&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),u=c?.position,h=u?this._positionNameToContainerLookup[u]:null;c&&h===a&&c.index>=r&&c.index++}),this._place({component:e,position:n,index:r}),this._components.push(e),this._componentMap.set(e,{key:i,position:n,internal:s,index:r})}_find(e){return e?e instanceof C3?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??Hnt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(el.innerContainer,el.cornerContainer);const n=document.createElement("div");n.classList.add(el.innerContainer,el.manualContainer);const r=document.createElement("div");r.classList.add(el.topLeft,el.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(el.topRight,el.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(el.bottomLeft,el.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(el.bottomRight,el.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=n;const a=Unt();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":s,"bottom-right":o,"top-leading":a?i:r,"top-trailing":a?r:i,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:n,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const n=e.position??"manual",{component:r,index:i}=e,s=this._positionNameToContainerLookup[n],o=i!=null&&i>-1;if(qnt(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const l of a){const c=this._findByNode(l);if(c&&i<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:RR(e.top),left:RR(e.left),right:RR(e.right),bottom:RR(e.bottom)}}_findByComponent(e){return this._components.find(n=>n===e)??null}_findById(e){return this._components.find(({id:n})=>n===e)??null}_findByNode(e){return e?this._components.find(({node:n})=>n===e):null}_getComponentsAtPosition(e,n){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(C2).filter(i=>n.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};x([E()],id.prototype,"_locale",void 0),x([E()],id.prototype,"container",null),x([E()],id.prototype,"height",null),x([E({value:kxe})],id.prototype,"padding",null),x([Ks("padding")],id.prototype,"castPadding",null),x([E()],id.prototype,"view",void 0),x([E()],id.prototype,"width",null),id=x([he("esri.views.ui.UI")],id);const Knt=id,Ynt={handleInterceptedEvent:(t,e,n,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||n,[r]))},Xnt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.startsWith("-")?t.style.setProperty(e,n):t.style[e]=n}},Znt=t=>({...Xnt,...t}),Jnt=(t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n},Qnt=(t,e)=>t.find(e),Rie=(t,e,n=!1)=>{let r=t;return e.forEach((i,s)=>{const o=r?.children?Qnt(r.children,a=>a.domNode===i):void 0;n&&!o&&s!==e.length-1||(r=o)}),r},ert=t=>{let e;const n={...Ynt,...t},r=Znt(n),i=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],u=(f,g,y)=>{let _;r.eventHandlerInterceptor=(T,A,C,I)=>function(R){let V;i("domEvent",R);const P=Jnt(R.currentTarget,_.domNode),N=P.some(O=>customElements.get(O?.tagName?.toLowerCase()));if(R.eventPhase===Event.CAPTURING_PHASE||!N)P.reverse(),V=Rie(_.getLastRender(),P);else{const O=R.composedPath(),F=O.slice(O.indexOf(R.currentTarget),O.indexOf(_.domNode)).reverse();V=Rie(_.getLastRender(),F,!0)}let L;return V&&(L=n.handleInterceptedEvent(e,V,this,R)),i("domEventProcessed",R),L},n.postProcessProjectionOptions?.(r);const b=y();_=f(g,b,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(y),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(_,b)};let h=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let f=0;f<l.length;f++){const g=c[f]();i("rendered",void 0);try{l[f].update(g)}catch(y){console.error(y)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,l,c)),e={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,g)=>{u(mg.append,f,g)},insertBefore:(f,g)=>{u(mg.insertBefore,f,g)},merge:(f,g)=>{u(mg.merge,f,g)},replace:(f,g)=>{u(mg.replace,f,g)},detach:f=>{for(let g=0;g<c.length;g++)if(c[g]===f)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},Mi=(t,e,...n)=>{try{return t?.call(e,...n)}catch(r){console.error(r,t)}},_z=async(t,e,...n)=>{try{return await t?.call(e,...n)}catch(r){console.error(r,t)}},TH=Symbol.for("controller"),trt=t=>typeof t=="object"&&t!==null&&(TH in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),zOt=t=>typeof t?.then=="function";let tT;const nT=t=>{tT!==t&&(tT=t,queueMicrotask(()=>tT===t?tT=void 0:0))},RO=t=>tT;let Sy=[];const nrt=t=>{if(t===void 0){Sy=[];return}const e=Sy.indexOf(t);Sy=e===-1?[...Sy,t]:Sy.slice(0,e+1),queueMicrotask(()=>Sy=[])},rrt=()=>Sy;let zx;const GOt=t=>{zx!==t&&(zx=t,queueMicrotask(()=>zx===t?zx=void 0:0))},irt=()=>{const t=zx;return zx=void 0,t},srt=async(t,e)=>{const n=kH(t);if(n===void 0)return t;if(await n.ready,typeof e=="function"){const r=n.watchExports(i=>e(i,r))}return n.exports},ort=async t=>{const e=kH(t);return await e.ready,e},kH=t=>{const n=RO().manager.X(t);if(n!==void 0)return n;if(trt(t))return t;const r=irt();if(r!==void 0)return r};let xz=!1;const UOt=t=>{xz=!0;try{return t()}finally{xz=!1}};const I3=globalThis,AH=I3.ShadowRoot&&(I3.ShadyCSS===void 0||I3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,CH=Symbol(),Mie=new WeakMap;let Axe=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==CH)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(AH&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Mie.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Mie.set(n,e))}return e}toString(){return this.cssText}};const art=t=>new Axe(typeof t=="string"?t:t+"",void 0,CH),WOt=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Axe(n,t,CH)},lrt=(t,e)=>{if(AH)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=I3.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},Nie=AH?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return art(n)})(t):t;const{is:crt,defineProperty:urt,getOwnPropertyDescriptor:hrt,getOwnPropertyNames:drt,getOwnPropertySymbols:frt,getPrototypeOf:prt}=Object,MO=globalThis,Lie=MO.trustedTypes,mrt=Lie?Lie.emptyScript:"",grt=MO.reactiveElementPolyfillSupport,ZT=(t,e)=>t,wz={toAttribute(t,e){switch(e){case Boolean:t=t?mrt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},IH=(t,e)=>!crt(t,e),Oie={attribute:!0,type:String,converter:wz,reflect:!1,useDefault:!1,hasChanged:IH};Symbol.metadata??=Symbol("metadata"),MO.litPropertyMetadata??=new WeakMap;let bx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Oie){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&urt(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=hrt(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Oie}static _$Ei(){if(this.hasOwnProperty(ZT("elementProperties")))return;const e=prt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ZT("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(ZT("properties"))){const n=this.properties,r=[...drt(n),...frt(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Nie(i))}else e!==void 0&&n.push(Nie(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return lrt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:wz).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:wz;this._$Em=i;const a=o.fromAttribute(n,s.type);this[i]=a??this._$Ej?.get(i)??a,this._$Em=null}}requestUpdate(e,n,r,i=!1,s){if(e!==void 0){const o=this.constructor;if(i===!1&&(s=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??IH)(s,n)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};bx.elementStyles=[],bx.shadowRootOptions={mode:"open"},bx[ZT("elementProperties")]=new Map,bx[ZT("finalized")]=new Map,grt?.({ReactiveElement:bx}),(MO.reactiveElementVersions??=[]).push("2.1.2");const PH=globalThis,Die=t=>t,HN=PH.trustedTypes,jie=HN?HN.createPolicy("lit-html",{createHTML:t=>t}):void 0,Cxe="$lit$",rg=`lit$${Math.random().toFixed(9).slice(2)}$`,Ixe="?"+rg,yrt=`<${Ixe}>`,tv=document,SA=()=>tv.createComment(""),TA=t=>t===null||typeof t!="object"&&typeof t!="function",RH=Array.isArray,vrt=t=>RH(t)||typeof t?.[Symbol.iterator]=="function",ZF=`[ 	
\f\r]`,uS=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Fie=/-->/g,$ie=/>/g,ey=RegExp(`>|${ZF}(?:([^\\s"'>=/]+)(${ZF}*=${ZF}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Vie=/'/g,zie=/"/g,Pxe=/^(?:script|style|textarea|title)$/i,Rxe=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),qOt=Rxe(1),KOt=Rxe(2),t0=Symbol.for("lit-noChange"),ts=Symbol.for("lit-nothing"),Gie=new WeakMap,Jy=tv.createTreeWalker(tv,129);function Mxe(t,e){if(!RH(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return jie!==void 0?jie.createHTML(e):e}const _rt=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=uS;for(let a=0;a<n;a++){const l=t[a];let c,u,h=-1,f=0;for(;f<l.length&&(o.lastIndex=f,u=o.exec(l),u!==null);)f=o.lastIndex,o===uS?u[1]==="!--"?o=Fie:u[1]!==void 0?o=$ie:u[2]!==void 0?(Pxe.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=ey):u[3]!==void 0&&(o=ey):o===ey?u[0]===">"?(o=i??uS,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?ey:u[3]==='"'?zie:Vie):o===zie||o===Vie?o=ey:o===Fie||o===$ie?o=uS:(o=ey,i=void 0);const g=o===ey&&t[a+1].startsWith("/>")?" ":"";s+=o===uS?l+yrt:h>=0?(r.push(c),l.slice(0,h)+Cxe+l.slice(h)+rg+g):l+rg+(h===-2?a:g)}return[Mxe(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class kA{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=_rt(e,n);if(this.el=kA.createElement(c,r),Jy.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=Jy.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(Cxe)){const f=u[o++],g=i.getAttribute(h).split(rg),y=/([.?@])?(.*)/.exec(f);l.push({type:1,index:s,name:y[2],strings:g,ctor:y[1]==="."?wrt:y[1]==="?"?brt:y[1]==="@"?Ert:NO}),i.removeAttribute(h)}else h.startsWith(rg)&&(l.push({type:6,index:s}),i.removeAttribute(h));if(Pxe.test(i.tagName)){const h=i.textContent.split(rg),f=h.length-1;if(f>0){i.textContent=HN?HN.emptyScript:"";for(let g=0;g<f;g++)i.append(h[g],SA()),Jy.nextNode(),l.push({type:2,index:++s});i.append(h[f],SA())}}}else if(i.nodeType===8)if(i.data===Ixe)l.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(rg,h+1))!==-1;)l.push({type:7,index:s}),h+=rg.length-1}s++}}static createElement(e,n){const r=tv.createElement("template");return r.innerHTML=e,r}}function Y2(t,e,n=t,r){if(e===t0)return e;let i=r!==void 0?n._$Co?.[r]:n._$Cl;const s=TA(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=i:n._$Cl=i),i!==void 0&&(e=Y2(t,i._$AS(t,e.values),i,r)),e}class xrt{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=(e?.creationScope??tv).importNode(n,!0);Jy.currentNode=i;let s=Jy.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new QC(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new Srt(s,this,e)),this._$AV.push(c),l=r[++a]}o!==l?.index&&(s=Jy.nextNode(),o++)}return Jy.currentNode=tv,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class QC{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=ts,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Y2(this,e,n),TA(e)?e===ts||e==null||e===""?(this._$AH!==ts&&this._$AR(),this._$AH=ts):e!==this._$AH&&e!==t0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):vrt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ts&&TA(this._$AH)?this._$AA.nextSibling.data=e:this.T(tv.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=kA.createElement(Mxe(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(n);else{const s=new xrt(i,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=Gie.get(e.strings);return n===void 0&&Gie.set(e.strings,n=new kA(e)),n}k(e){RH(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new QC(this.O(SA()),this.O(SA()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=Die(e).nextSibling;Die(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class NO{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=ts,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ts}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=Y2(this,e,n,0),o=!TA(e)||e!==this._$AH&&e!==t0,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=Y2(this,a[r+l],n,l),c===t0&&(c=this._$AH[l]),o||=!TA(c)||c!==this._$AH[l],c===ts?e=ts:e!==ts&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!i&&this.j(e)}j(e){e===ts?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let wrt=class extends NO{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ts?void 0:e}};class brt extends NO{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ts)}}let Ert=class extends NO{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=Y2(this,e,n,0)??ts)===t0)return;const r=this._$AH,i=e===ts&&r!==ts||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==ts&&(r===ts||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Srt=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Y2(this,e)}};const Trt=PH.litHtmlPolyfillSupport;Trt?.(kA,QC),(PH.litHtmlVersions??=[]).push("3.3.2");const krt=(t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=n?.renderBefore??null;r._$litPart$=i=new QC(e.insertBefore(SA(),s),s,void 0,n??{})}return i._$AI(t),i};const MH=globalThis;let kw=class extends bx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=krt(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return t0}};kw._$litElement$=!0,kw.finalized=!0,MH.litElementHydrateSupport?.({LitElement:kw});const Art=MH.litElementPolyfillSupport;Art?.({LitElement:kw});(MH.litElementVersions??=[]).push("4.2.2");class AA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const Crt=(t,e)=>{const n=e/Irt;let r=0;const i=setInterval(()=>{r+=n,r>=e&&(clearInterval(i),t())},n);return i},Irt=4,Prt=(t,e,n)=>{const r=Object.keys(t),i=r.length;Gx===void 0&&queueMicrotask(LO),Gx??=new Map;let s=Gx.get(t);return s===void 0&&(s={callbacks:[],keyCount:i},Gx.set(t,s)),s.keyCount!==i&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=i),s.callbacks.push(o=>{const a=c=>Mi(e,null,c),l=o[i];l===void 0?a(void 0):t[l]===n?a(l):a(void 0)}),n};let Gx;const LO=()=>{Gx?.forEach(({callbacks:t},e)=>{const n=Object.keys(e);t.forEach(r=>r(n))}),Gx=void 0},Rrt=(t,e,n)=>{const r=t.manager;return r.V!==ts&&r.V!==n&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=n,r.T.push((i,s)=>Mi(e,void 0,n===s?i:void 0)),n},Mrt=(t=[RO(),...rrt()],e,n)=>{const r=Array.isArray(t)?t:[t];let i=r.length+1;const s=o=>{i-=1,o!==void 0&&(i=Math.min(i,0)),i===0&&e(o)};r.forEach(o=>Prt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),n));for(const o of r)if("manager"in o&&o.manager.component===o){Rrt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),n);break}return n},Nrt=(t="",e={},n=RO())=>{const r={emit:i=>{t===""&&LO();const s=new CustomEvent(t,{detail:i,cancelable:!0,bubbles:!0,composed:!0,...e});return n.el.dispatchEvent(s),s}};return t===""&&Mrt(void 0,i=>t=i.key,r),r},QOt=Nrt.bind(null,"");var Nxe;Nxe=TH;class Lrt{constructor(e){this.#n=[],this.#e=[],this.#r=[],this.#l=[],this.#c=[],this.#u=[],this.#h=[],this.#d=[],this.#o=[],this.#a=!1,this.P=new AA,this.connectedCalled=!1,this.loadedCalled=!1,this[Nxe]=!0,this.#s=[];const n=this,r=e??RO();n.#t=r,n.ready=n.P.promise,n.#i=Bie(n),n.component=r,n.#t.addController(n),n.#t.manager===void 0||(nrt(n),queueMicrotask(()=>n.catchUpLifecycle()))}#n;#e;#r;#l;#c;#u;#h;#d;#o;#a;#t;catchUpLifecycle(){const{manager:e}=this.#t;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#a&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#i;get exports(){return this.#i}set exports(e){const n=this.#i;n!==e&&(this.#i=e,this.#s.forEach(Mi),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,n)),this.P.resolve(e)}setProvisionalExports(e,n=!0){this.#i=n?Bie(e):e,this.#s.forEach(Mi)}#s;watchExports(e){const n=()=>e(this.#i);return this.#s.push(n),()=>{this.#s.splice(this.#s.indexOf(n),1)}}get use(){return nT(this.#t),srt}get useRef(){return nT(this.#t),ort}get useRefSync(){return nT(this.#t),kH}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#n.push(e)}onDisconnected(e){this.#e.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#c.push(e)}onUpdated(e){this.#u.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#t.el.isConnected&&this.#f(e)}triggerConnected(){const e=this;e.hostConnected&&Mi(e.hostConnected,e),e.#n.forEach(Mi),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Mi(e.hostDisconnected,e),e.#e.forEach(Mi),e.#o.forEach(Mi),e.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const e=this;e.hostLoad&&await _z(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(_z)),this.P.resolve(this.#i)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Mi(this.hostLoaded,this),this.#l.forEach(Mi),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Mi(this.hostUpdate,this,e),this.#c.forEach(Uie,e)}triggerUpdated(e){this.hostUpdated&&Mi(this.hostUpdated,this,e),this.#u.forEach(Uie,e)}triggerDestroy(){this.hostDestroy&&Mi(this.hostDestroy,this),this.#h.forEach(Mi)}triggerLifecycle(){this.hostLifecycle&&this.#f(()=>this.hostLifecycle()),this.#d.forEach(this.#f,this)}#f(e){nT(this.#t);const n=Mi(e);(Array.isArray(n)?n:[n]).forEach(i=>{typeof i=="function"?this.#o.push(i):typeof i=="object"&&typeof i.remove=="function"&&this.#o.push(i.remove)})}}function Uie(t){Mi(t,void 0,this)}const Ort=Lrt,Bie=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,i,s){if(!((i==="exports"||i==="_exports")&&i in r&&r[i]===n)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)}},n=new Proxy(t,e);return n},Drt=t=>t.replace(jrt,(e,n)=>`${n===0?"":"-"}${e.toLowerCase()}`),jrt=/[A-Z]+(?![a-z])|[A-Z]/gu,Frt=1,$rt=2,Vrt=4,zrt=8,Grt=16,Urt=32,Brt=64,Lxe=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const n=e;return n.manager?.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Wie={};function Oxe(){}const P3=Object.defineProperty,Wrt=globalThis.HTMLElement??Oxe;var ol,Qf,t2,KA,bz;const gK=class gK extends Wrt{constructor(){var i;super();Ru(this,KA);Ru(this,ol);Ru(this,Qf);Ru(this,t2);Mu(this,Qf,{}),Mu(this,t2,[]),this.I=new AA,this.H=new AA,this.J=[];const n=this,r=n.constructor;n._offspring=n.J,n._postLoad=n.I,r.C?.forEach(s=>{Object.hasOwn(n,s)&&(Nr(n,Qf)[s]=n[s],delete n[s])}),r.A?AE(i=n,KA,bz).call(i,{a:r.A}):r.B.then(async s=>{var o;await r.K.p,AE(o=n,KA,bz).call(o,await(s.default?.then(a=>typeof a=="function"?{a}:a)??s))}).catch(s=>{n.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const n of this.C??[])P3(this.prototype,n,{configurable:!0,enumerable:!0,get(){return Nr(this,Qf)[n]},set(r){Nr(this,Qf)[n]=r}});for(const n of this.E??[])P3(this.prototype,n,{async value(...r){return Nr(this,ol)||await this.H.promise,await Nr(this,ol)[n](...r)},configurable:!0});for(const n of this.D??[])P3(this.prototype,n,{value(...r){return Nr(this,ol)[n](...r)},configurable:!0})}get manager(){return Nr(this,ol)?.manager}attributeChangedCallback(n,r,i){Nr(this,ol)?.attributeChangedCallback(n,r,i),Nr(this,ol)||Nr(this,t2).push(n)}connectedCallback(){Nr(this,ol)?Nr(this,ol).connectedCallback?.():queueMicrotask(()=>this.G=Lxe(this))}disconnectedCallback(){Nr(this,ol)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Nr(this,ol)?.requestUpdate()}};ol=new WeakMap,Qf=new WeakMap,t2=new WeakMap,KA=new WeakSet,bz=function(n){const r=this.constructor,i=r.L,s=Nr(this,Qf),o=Object.values(n).find(f=>f.L===i),a=`${i}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);qrt(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,Mu(this,ol,u),Mu(this,Qf,u),Nr(this,t2).forEach(f=>u.attributeChangedCallback(f,null,this.getAttribute(f))),Object.entries(s).forEach(Hrt,u);const h=this.isConnected;(h||this.G)&&(u.connectedCallback?.(),h||u.disconnectedCallback())},gK.lumina=!0;let Hie=gK;function Hrt([t,e]){this[t]=e}const qrt=t=>{const e=t.prototype,n=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(i,s){n.setAttribute.call(this.el,i,s)},e.removeAttribute=function(i){n.removeAttribute.call(this.el,i)},P3(e,"isConnected",{get(){return Reflect.get(n,"isConnected",this.el)}}))};const Dxe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},jxe=t=>(...e)=>({_$litDirective$:t,values:e});let Fxe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};const Krt=jxe(class extends Fxe{constructor(t){if(super(t),t.type!==Dxe.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return t0}});const $xe="important",Yrt=" !"+$xe,Xrt=jxe(class extends Fxe{constructor(t){if(super(t),t.type!==Dxe.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in e){const i=e[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith(Yrt);r.includes("-")||s?n.setProperty(r,s?i.slice(0,-11):i,s?$xe:""):n[r]=i}}return t0}});class Zrt extends Ort{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=ts,this.T=[],this.#r=new WeakMap,this.#e=e,this.exports=void 0,this.hasDestroy=Ez in e&&typeof e.destroy=="function",kw.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const n=e.el.localName;throw e.el.remove(),new Error(`The ${n} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Ez} prop.`)}this.#n!==void 0&&clearTimeout(this.#n),LO();for(const n of e.M)"triggerConnected"in n?n.triggerConnected():Mi(n.hostConnected,n)},hostDisconnected:()=>{for(const n of e.M)"triggerDisconnected"in n?n.triggerDisconnected():Mi(n.hostDisconnected,n);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const n of e.M)"triggerUpdate"in n?n.triggerUpdate(this.Q):Mi(n.hostUpdate,n,this.Q)},hostUpdated:()=>{for(const n of e.M)"triggerUpdated"in n?n.triggerUpdated(this.Q):Mi(n.hostUpdated,n,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),nT(e)}#n;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#n=void 0,this.destroyed=!0;for(const e of this.#e.M)"triggerDestroy"in e?e.triggerDestroy():Mi(e.hostDestroy,e);this.#e.M.splice(0)}}U(){if(this.#n!==void 0&&clearTimeout(this.#n),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const e=()=>{this.#e.destroy()};this.#n=Crt(e,Jrt)}}S(e,n){const r=this.T;this.V=ts,this.T=[],r.forEach(i=>i(e,n))}#r;W(e,n){(typeof n=="object"&&n!==null||typeof n=="function")&&this.#r.set(n,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let Jrt=1e3;const Ez="autoDestroyDisabled";var n1,YA,XA,r1,ud,rb,Vxe,zxe;const wk=class wk extends kw{constructor(){super();Ru(this,rb);Ru(this,n1);Ru(this,YA);Ru(this,XA);Ru(this,r1);Ru(this,ud);this.M=[],this.manager=new Zrt(this);const n=this,r=n.constructor,i=r.N,s=r.K.o,o=wk.prototype.shouldUpdate;Mu(n,r1,i?.H??new AA),n.I=i?.I??new AA,n.J=i?.J??[],n._offspring=n.J,n._postLoad=n.I,n.el=i??n,Mu(n,XA,n.enableUpdating),n.enableUpdating=Oxe,n.shouldUpdate!==o&&(Mu(n,YA,n.shouldUpdate),n.shouldUpdate=o),s&&(Mu(n,n1,new Map),r.elementProperties.forEach((a,l)=>Nr(n,n1).set(l,s())))}static finalizeStyles(n){const r=super.finalizeStyles(n),i=this.shadowRootOptions===Wie;return this.K?.commonStyles===void 0||i?r:[this.K.commonStyles,...r]}static createProperty(n,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=s?.hasChanged??IH,a={attribute:i&Frt&&typeof n=="string"?Drt(n):!1,reflect:!!(i&$rt),type:i&Vrt?Boolean:i&zrt?Number:void 0,state:!!(i&Grt),readOnly:!!(i&Urt),noAccessor:!!(i&Brt),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(n,a)}static getPropertyDescriptor(n,r,i){const s=this.K,o=super.getPropertyDescriptor(n,r,i);return i.d=o,{...o,get(){return s.t?.(Nr(this,n1).get(n)),o.get?.call(this)},set(a){const l=this.manager;if(i.readOnly&&!xz&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${n}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),i.c&&Nr(this,n1)?.get(n)?.notify(),l.T.length>0&&(LO(),l?.S(n,a))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const n=this.constructor.K.c?.(()=>this.requestUpdate());Mu(this,ud,n);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>AE(this,rb,zxe).call(this).catch(i=>{Nr(this,r1).reject(i),setTimeout(()=>{throw i})})):n&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Nr(this,ud)?.destroy(),Mu(this,ud,void 0)}createRenderRoot(){const n=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,o=n??(i===Wie?this.el:this.el.attachShadow(i));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(n){var r;return this.manager.Q=n,((r=Nr(this,YA))==null?void 0:r.call(this,n))??!0}update(n){Nr(this,ud)?AE(this,rb,Vxe).call(this,n):super.update(n)}listen(n,r,i){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(n,s,i),()=>this.el.removeEventListener(n,s,i)))}listenOn(n,r,i,s){const o=i?.bind(this)??i;this.manager.onLifecycle(()=>(n.addEventListener(r,o,s),()=>n.removeEventListener(r,o,s)))}async componentOnReady(){return await Nr(this,r1).promise,this}addController(n){this.M.push(n),!(TH in n)&&this.renderRoot&&this.el.isConnected&&n.hostConnected?.()}removeController(n){this.M.splice(this.M.indexOf(n),1),n.controllerRemoved?.()}};n1=new WeakMap,YA=new WeakMap,XA=new WeakMap,r1=new WeakMap,ud=new WeakMap,rb=new WeakSet,Vxe=function(n){try{Nr(this,ud).clear(),this.constructor.K.r(Nr(this,ud),()=>kX(wk.prototype,this,"update").call(this,n))}catch(r){throw Nr(this,ud).clear(),r}},zxe=async function(){const n=this.el.G??Lxe(this.el);n&&await n;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(_z(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(Ez)&&this.manager.U()),Nr(this,XA).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const i=this.J.filter(s=>!s.manager?.loadedCalled);i.length&&await Promise.allSettled(i.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():Mi(s.hostLoaded,s);this.loaded?.(),Nr(this,r1).resolve()},wk.lumina=!0;let qie=wk;const Qrt=t=>{let e;const n=i=>{e=new URL(i,globalThis.location?.href||void 0).href},r={...t,getAssetPath(i){const s=new URL(i,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:n,customElement(i,s){s.K=r,s.L=i,customElements.get(i)||customElements.define(i,s)}};return n(t.defaultAssetPath),r},tDt=t=>typeof t=="object"&&t!=null?Krt(t):t,nDt=t=>typeof t=="object"&&t!=null?Xrt(t):t,rDt=ts;function iDt(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}const sDt={toAttribute:t=>t===!0?"":t===!1?null:t},eit="calcite-mode-auto",tit="calcite-mode-dark",oDt={rtl:"calcite--rtl"},aDt={filter:250,nextTick:0,resize:150,reposition:100},lDt=25;function Kie(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>t.contains(tit)||t.contains(eit)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&r(o),s=o};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const JT=globalThis.calciteConfig,cDt=JT?.focusTrapStack||[],uDt=JT?.logLevel||"info",Yie="3.3.3",nit="2025-10-08",rit="7391af08e";function iit(){if(JT&&JT.version)return;console.info(`Using Calcite Components ${Yie} [Date: ${nit}, Revision: ${rit}]`);const t=JT||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:Yie,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?Kie():document.addEventListener("DOMContentLoaded",Kie,{once:!0});queueMicrotask(iit);const sit=Qrt({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:hDt,getAssetPath:dDt,setAssetPath:oit}=sit;let Gxe=!1;const ait=t=>{Gxe=!0,oit(t)};let Uxe;function lit(){Gxe||ait(iu(qi(Uxe)))}function NH(t){const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push(t[n]?.());return e.length>0?Promise.all(e):null}Uxe="components/assets";const Bxe=Symbol("widget"),Wxe=Symbol("widget-test-data"),cit=[],uit={},qN=new WeakMap;function Hxe(t,e){let n=e.children;if(n?.length)for(let i=0;i<n.length;++i)n[i]=Hxe(t,n[i]);else n=cit;const r=e.vnodeSelector;if(KN(r)){const i=e.properties||uit,s=i.key||r,o={key:s,afterCreate:hit,afterUpdate:dit,afterRemoved:qxe,parentWidget:t,widgetConstructor:r,widgetProperties:{...i,key:s,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function hit(t,e,n,{parentWidget:r,widgetConstructor:i,widgetProperties:s}){const o=new i(s);o.container=t,qN.set(t,o),o.afterCreate?.(o,t),r.addHandles(Zn(()=>qxe(t))),queueMicrotask(()=>{o[Wxe].projector?.renderNow()})}function dit(t,e,n,{widgetProperties:r}){const i=qN.get(t);i&&(i.set(r),i.afterUpdate?.(i,t))}function qxe(t){const e=qN.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),qN.delete(t))}function KN(t){return typeof t=="function"&&t[Bxe]}const Xie=new Set;function fit(t){Xie.add(t),t.finally(()=>Xie.delete(t))}function pit(t){return Zn()}var Zie;let mit=0;function Kxe(t,e){const n=Object.prototype.hasOwnProperty;for(const r in e)n.call(e,r)&&n.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?Kxe(t[r],e[r]):t[r]=e[r]);return t}const git=ert({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,n=/capture$/i;t.eventHandlerInterceptor=(r,i,s,o)=>{const a=e?.(r,i,s,o),l=n.test(r);if(!((r=r.replace(n,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),u=g=>a?.call(s,g);s.addEventListener(c,u,l);const h=()=>s.removeEventListener(c,u,l),f=o.afterRemoved;o.afterRemoved=g=>{f?.(g),h()}}return a}},handleInterceptedEvent(t,e,n,r){const{eventPhase:i,type:s}=r,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Txe(),t.scheduleRender(),l[a].call(l.bind||n,r))}});let JF=!1;var S1;let ro=(S1=class extends _me(MC){constructor(e,n){super(e,n),this._attached=!1,this._projector=git,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Gje(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:u})=>{if(this.destroyed)return;let h=await ege(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(h=Kxe(et(h),this.uiStrings)),this[u]=h)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&kt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(pit()),lit();const r="esri-widget-uid-"+zC(),i=this.render.bind(this);this._trackingTarget=new YL(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=i()??s(),c=l.properties??={};if(c.key??=r,KN(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),c.styles.display??="";let u=0;return l.children?.forEach(h=>{KN(h.vnodeSelector)||(h.properties??={},h.properties.key??=`${this.id}--${u++}`)}),Hxe(this,l)};this.render=()=>{if(JF)return o();let l=Vnt(this)??null;if(l)return l;this._trackingTarget.clear(),JF=!0;try{l=kp(this._trackingTarget,o)}catch(c){throw kt.getLogger(this).error(c),c}finally{JF=!1}return l&&znt(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),fit(this._resourcesFetch)}normalizeCtorArgs(e,n){const r={...e};return n&&(r.container=n),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(vee):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Di(this._trackingTarget),Di(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,KF(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return KW(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+mit++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Zie=Bxe,Wxe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(KF(this),this._projector.scheduleRender())}classes(...e){return Gnt.apply(this,e)}renderNow(){KF(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(mn(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&WL(n)&&this.addHandles(this._delegatedEventNames.map(i=>wb(n,i,s=>{this.emit(i,s)})),"delegated-events")},oa)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(vee),this.scheduleRender()};this.addHandles([Zme(e),mn(()=>this.uiStrings,e)]),this.addHandles(Sc(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},S1[Zie]=!0,S1.vnodeSelector="div",S1);x([E()],ro.prototype,"_readyForTrueRender",void 0),x([E({value:null})],ro.prototype,"container",null),x([Ks("container")],ro.prototype,"castContainer",null),x([E()],ro.prototype,"icon",null),x([E()],ro.prototype,"id",null),x([E()],ro.prototype,"label",null),x([E()],ro.prototype,"renderable",null),x([E()],ro.prototype,"uiStrings",void 0),x([E()],ro.prototype,"viewModel",void 0),x([E({value:!0})],ro.prototype,"visible",null),x([E()],ro.prototype,"key",void 0),x([E()],ro.prototype,"children",void 0),x([E()],ro.prototype,"afterCreate",void 0),x([E()],ro.prototype,"afterUpdate",void 0),x([E()],ro.prototype,"afterRemoved",void 0),ro=x([he("esri.widgets.Widget")],ro);const OO=ro,yit=new Map;function vit(t){return yit.get(t)}function Jie(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function _it(t,e){return t.length!==e.length||t.some((n,r)=>n.text!==e[r].text)}function MR(t,e,n){!n||!e||t.find(r=>r.layerView===e&&r.text===n)||t.push({text:n,layerView:e})}function xit(t){return t.type==="bing-maps"}const Yh=[];let Ex=class extends Kt{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Lt,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=this.view?.allLayerViews;n&&(this.addHandles(n.map(r=>mn(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(r=>{r.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e?.removed&&e.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([J1(()=>this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Sc(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;Yh.length=0;let n=!1,r=null;if(!t||!e)return void this._clear();e.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const o=s.layer;if(Jie(o,"user"))return void MR(Yh,s,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(n=!0,r=s),o.hasAttributionData){if(this._fetchedAttributionData.has(s)){const l=this._fetchedAttributionData.get(s);return void(l?MR(Yh,s,this._getDynamicAttribution(l,t,o)):Jie(o)&&MR(Yh,s,o.copyright))}return void this._fetchAttributionData(s)}const a="portalItem"in o?o.portalItem?.accessInformation:void 0;MR(Yh,s,a||o.copyright)});const i=e.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const s=vit(this.view);if(s){const o=s.getAttributionText();for(let a=o.length-1;a>-1;--a)Yh.unshift({text:o[a],layerView:i})}}n&&r&&Yh.unshift({text:"Google Maps",layerView:r}),_it(this.items,Yh)&&(this.items.removeAll(),this.items.addMany(Yh)),Yh.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await xme(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const n=e.ok?this._createContributionIndex(e.value,xit(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()}_createContributionIndex(t,e){const n=t.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(e&&a.zoomMin?1:0),u=a.zoomMax-(e&&a.zoomMax?1:0),h=new Vn({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Wt.WGS84}),f={extent:h1(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=c;g<=u;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,n){const{extent:r,scale:i}=e;let s=n.tileInfo?.scaleToZoom(i)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!r||s==null||s<=-1)return"";const o=t[s],a=rO(r.center.clone().normalize(),Wt.WebMercator),l=new Set;return o?o.filter(c=>{const u=c.id,h=!l.has(u)&&a&&c.extent&&OC(c.extent,a);return h&&l.add(u),h}).sort((c,u)=>u.score-c.score||c.objectId-u.objectId).map(c=>c.attribution).join(", "):""}};x([E({readOnly:!0,type:Lt})],Ex.prototype,"items",void 0),x([E({readOnly:!0})],Ex.prototype,"state",null),x([E()],Ex.prototype,"view",void 0),Ex=x([he("esri.widgets.Attribution.AttributionViewModel")],Ex);const Yxe=Ex,Md={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function wit(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Eit(t[e])}}}function bit(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Eit(t){return function(e,...n){bit(e)?Bnt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...n)}}function DO(t){return(e,n)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:n})}}var Sit=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Xxe=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?Xxe(i,e):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=Sit(i)),e.push(i))}},Tit=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(n.length===1&&typeof n[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:n[0],domNode:null};var i=[];return Xxe(n,i),{vnodeSelector:t,properties:e||void 0,children:i,text:void 0,domNode:null}};function Sl(t,e,...n){return typeof t!="function"||KN(t)?Tit(t,e??null,...n):t(e,...n)}function fDt(...t){return t}const V_="esri-attribution",z_={base:V_,poweredBy:`${V_}__powered-by`,sources:`${V_}__sources`,open:`${V_}--open`,sourcesOpen:`${V_}__sources--open`,link:`${V_}__link`};let Ca=class extends OO{constructor(e,n){super(e,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:i})=>{this._scheduleOverflowCheck(i)})}),this._mutationObserver=new MutationObserver(r=>{let i=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){i=!0;break}i&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Yxe}initialize(){this.addHandles(J1(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,n)=>(e.includes(n.text)||e.push(n.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[z_.open]:this._isOpen};return Sl("div",{bind:this,class:this.classes(z_.base,Md.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Sl("div",{class:z_.poweredBy},"Powered by"," ",Sl("a",{class:z_.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,n=this._isInteractive,r=n?0:void 0,{attributionText:i}=this,s={[z_.sourcesOpen]:e,[Md.interactive]:n};return Sl("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(z_.sources,s),innerHTML:i,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let n=!1;const{clientHeight:r,clientWidth:i,scrollWidth:s}=e,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(n=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};x([E()],Ca.prototype,"_isOpen",void 0),x([E()],Ca.prototype,"_isInteractive",null),x([E()],Ca.prototype,"_attributionTextOverflowed",void 0),x([E()],Ca.prototype,"_prevSourceNodeHeight",void 0),x([E({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ca.prototype,"attributionText",null),x([E()],Ca.prototype,"icon",null),x([E()],Ca.prototype,"itemDelimiter",void 0),x([E()],Ca.prototype,"label",null),x([E(),DO("esri/widgets/Attribution/t9n/Attribution")],Ca.prototype,"messages",void 0),x([E()],Ca.prototype,"view",null),x([E({type:Yxe})],Ca.prototype,"viewModel",void 0),x([wit()],Ca.prototype,"_toggleState",null),Ca=x([he("esri.widgets.Attribution")],Ca);const kit=Ca;function Ait(){const t=_e("mapview-essential-goto-duration");return t==null?t:t}function Cit(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function Iit(t,e,n){return t.goTo(e,n)}const Pit=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return ppe(i),this.goToOverride?this.goToOverride(i,r):Iit(i,r.target,r.options)}};return x([E()],n.prototype,"goToOverride",void 0),x([E()],n.prototype,"view",void 0),n=x([he("esri.widgets.support.GoTo")],n),n};let Ty=class extends Pit(Kt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(xa)}destroy(){this.view=null}get canShowNorth(){return Cit(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Ait()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const n=-e.heading;this._set("orientation",{x:0,y:0,z:n})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?mn(()=>e?.rotation,this._updateForRotation,xa):mn(()=>e?.camera,this._updateForCamera,xa))}_watchForView(e){this.addHandles(mn(()=>this.view,this._updateRotationWatcher,e))}};x([E({readOnly:!0})],Ty.prototype,"canShowNorth",null),x([E({readOnly:!0})],Ty.prototype,"orientation",void 0),x([E({readOnly:!0})],Ty.prototype,"state",null),x([E()],Ty.prototype,"view",void 0),Ty=x([he("esri.widgets.Compass.CompassViewModel")],Ty);const Zxe=Ty,Qie="esri-compass",ese={base:Qie,iconContainer:`${Qie}__icon-container`};let Of=class extends OO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Zxe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return NH({button:()=>ge(()=>import("./index-DRubCFvG.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416])),icon:()=>ge(()=>import("./index-BewkzBMB.js").then(e=>e.i),__vite__mapDeps([408,409,410]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:n}=this.viewModel,{messages:r}=this;return Sl("div",{class:this.classes(ese.base,Md.widget)},Sl("calcite-button",{class:Md.widgetButton,disabled:n==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Sl("div",{"aria-hidden":"true",class:ese.iconContainer,title:r.reset},Sl("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};x([E()],Of.prototype,"goToOverride",null),x([E()],Of.prototype,"icon",null),x([E()],Of.prototype,"label",null),x([E(),DO("esri/widgets/Compass/t9n/Compass")],Of.prototype,"messages",void 0),x([E()],Of.prototype,"view",null),x([E({type:Zxe})],Of.prototype,"viewModel",void 0),Of=x([he("esri.widgets.Compass")],Of);const Rit=Of,tse="esri-navigation-toggle",nse={base:tse,isLayoutHorizontal:`${tse}--horizontal`};let Sx=class extends Kt{constructor(t){super(t),this._navigationMode="pan",this.view=null,t?.isDefaultViewModel||_Fe(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:e,...n}=t;return n}initialize(){this.addHandles(Sc(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const e=this._navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}};x([E({readOnly:!0})],Sx.prototype,"state",null),x([E()],Sx.prototype,"_navigationMode",void 0),x([E()],Sx.prototype,"view",void 0),Sx=x([he("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Sx);const Jxe=Sx;let Df=class extends OO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Jxe({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;Wnt(r),this.toggle()},e?.isDefaultUI||vFe(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:n,...r}=e;return r}loadDependencies(){return NH({button:()=>ge(()=>import("./index-DRubCFvG.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",n=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Sl("div",{class:this.classes(nse.base,Md.widget,{[nse.isLayoutHorizontal]:this.layout==="horizontal"})},Sl("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:n?"outline-fill":"solid",class:Md.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?void 0:-1,title:r}),Sl("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:n?"solid":"outline-fill",class:Md.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?-1:void 0,title:r}))}};x([E()],Df.prototype,"icon",null),x([E()],Df.prototype,"label",null),x([E({value:"vertical"})],Df.prototype,"layout",null),x([E(),DO("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Df.prototype,"messages",void 0),x([E()],Df.prototype,"view",null),x([E({type:Jxe})],Df.prototype,"viewModel",void 0),Df=x([he("esri.widgets.NavigationToggle")],Df);const Mit=Df;let ky=class extends Kt{get canZoomIn(){if(!this.view?.ready)return!1;const n=this.view?.constraints?.effectiveMaxScale;return n===0||this._scale>n}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};x([E({readOnly:!0})],ky.prototype,"canZoomIn",null),x([E({readOnly:!0})],ky.prototype,"canZoomOut",null),x([E()],ky.prototype,"view",void 0),x([E()],ky.prototype,"_scale",null),ky=x([he("esri.widgets.Zoom.ZoomConditions2D")],ky);const Nit=ky;let Tx=class extends Kt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};x([E({readOnly:!0})],Tx.prototype,"canZoomIn",null),x([E({readOnly:!0})],Tx.prototype,"canZoomOut",null),x([E()],Tx.prototype,"view",void 0),Tx=x([he("esri.widgets.Zoom.ZoomConditions3D")],Tx);const Lit=Tx;let Vm=class extends Kt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Nit({view:e}):e.type==="3d"&&(this._zoomConditions=new Lit({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():X4(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():X4(e.goTo({zoomFactor:.5})))}};x([E()],Vm.prototype,"_zoomConditions",void 0),x([E()],Vm.prototype,"canZoomIn",null),x([E()],Vm.prototype,"canZoomOut",null),x([E({readOnly:!0})],Vm.prototype,"state",null),x([E()],Vm.prototype,"view",null),Vm=x([he("esri.widgets.Zoom.ZoomViewModel")],Vm);const Qxe=Vm,rse={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let jf=class extends OO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Qxe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return NH({button:()=>ge(()=>import("./index-DRubCFvG.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[rse.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=this.viewModel,{zoomIn:i,zoomOut:s}=this.messages;return Sl("div",{class:this.classes(rse.base,Md.widget,e)},Sl("calcite-button",{class:Md.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),Sl("calcite-button",{class:Md.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};x([E()],jf.prototype,"icon",null),x([E()],jf.prototype,"label",null),x([E({value:"vertical"})],jf.prototype,"layout",null),x([E(),DO("esri/widgets/Zoom/t9n/Zoom")],jf.prototype,"messages",void 0),x([E()],jf.prototype,"view",null),x([E({type:Qxe})],jf.prototype,"viewModel",void 0),jf=x([he("esri.widgets.Zoom")],jf);const Oit=jf;function Dit(t){return t?.view!==void 0}let R3=class extends Knt{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(n=>{const r=this._find(n),i=r?.widget;Dit(i)&&(i.view=e)})},this._componentsWatcher=(e,n)=>{this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([mn(()=>this.components,this._componentsWatcher,xa),mn(()=>this.view,this._updateViewAwareWidgets,xa)])}_add(t,e,n,r,i){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,n,r,i)}_removeComponents(t){t.forEach(e=>{const n=this._find(e);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){const e=this._createWidget(t);return new C3({id:t,node:e})}_createWidget(t){const e=this.view;switch(t){case"attribution":return new kit({view:e});case"compass":return new Rit({view:e});case"navigation-toggle":return new Mit({view:e,isDefaultUI:!0});case"zoom":return new Oit({view:e})}}};x([E()],R3.prototype,"components",void 0),R3=x([he("esri.views.ui.DefaultUI")],R3);const ewe=R3;let M3=class extends ewe{constructor(e){super(e),this.components=["attribution","zoom"]}};x([E()],M3.prototype,"components",void 0),M3=x([he("esri.views.ui.2d.DefaultUI2D")],M3);const twe=M3;let jit=class{constructor(t={},e={},n=8,r=1/0){this.disabledExtensions=t,this.debugWebGLExtensions=e,this.maxAnisotropy=n,this.maxPreferredTexturePixels=r}},Fit=class Sz{constructor(e,n,r=""){this.major=e,this.minor=n,this._context=r}lessThan(e,n){return this.major<e||e===this.major&&this.minor<n}greaterEqual(e,n){return!this.lessThan(e,n)}validate(e){if(this.major!==e.major){const n=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Qe(n+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new Sz(this.major,this.minor,this._context)}static parse(e,n=""){const[r,i]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new Qe((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!i?.match||!s.test(i))throw new Qe((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(i,10);return new Sz(o,a,n)}};class $it extends Fit{constructor(e,n){super(e,n,"webmap")}}function QF(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new $it(2,35);var Tz;let N3=Tz=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1])}clone(){return new Tz(et({color:this.color}))}};x([E({type:Jn,json:{write:!0}})],N3.prototype,"color",void 0),N3=Tz=x([he("esri.webmap.background.ColorBackground")],N3);const Vit=N3;let nwe,rwe,iwe,swe,owe,awe,lwe;async function zit(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([ge(()=>import("./webglDeps-DTwTUbOo.js"),__vite__mapDeps([299,224,300,301,302,28,96])),ge(()=>import("./mapViewDeps-DMls4Tvk.js"),__vite__mapDeps([303,175,55,56,140,141,131,66,28,142,133,134,139,143,127,144,89,304,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,309,145,146,310,85,80,129,78,79,311,53,299,312,158,313,314,193,315,213,214,316,113,125,130,132,124,73,72,317,147,318,138,47,48,49,319,149,154,122,320,321,322,323,220,254,324,325]))]);rwe=t,iwe=e,swe=n,owe=r,awe=i,lwe=s,nwe=o}var n2;let Gn=(n2=class extends ket(tQe(CHe(Qqe(jqe(TZe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new nh({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new TO({actionMap:new dH({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new W2,this.analysisViewManager=new bnt({importAnalysisViewModule:n=>mtt(n),view:this}),this.floors=new Lt,this.grid=null,this.map=null,this.timeline=new wxe,this.type="2d",this.view2dType=null,this.ui=new twe,this.animationsEnabled=!0,this.test={takeScreenshot:async n=>ynt(this._getScreenshotView(n),n)},this.padding={top:0,right:0,bottom:0,left:0},THe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Di(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Ttt(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,n=this.spatialReference;return{lods:e?.spatialReference?.equals(n)?e.lods:null,spatialReference:n}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:n,center:r,viewpoint:i,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(n?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const n=e.targetGeometry,r=this.spatialReference;return Cye(n.spatialReference,r)}get background(){return QF(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return tnt(this)}set highlightOptions(e){nnt(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&kt.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),n=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(_e("esri-2d-log-updating")){const r=this.allLayerViews.reduce((i,s)=>({...i,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${n}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return n}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new bi({rings:[e.map(n=>[n[0],n[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,n){return rnt(this,e,n)}async takeScreenshot(e){return gnt(this._getScreenshotView(e),e)}toScreen(e,n){return this.stateManager.toScreen(e,n)}async whenAnalysisView(e){if(e.parent==null)throw new Qe("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return QF(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return QF(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return fie.hasLayerViewModule(e)}importLayerView(e){return fie.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(kt.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const n=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(c=>c.clips.every(u=>uxe(this,u,e,n))).reverse(),s=new globalThis.Map(i.map(c=>[c.layer.uid,c])),o=[];let a=0,l=0;for(;a<r.results.length||l<i.length;){const c=r.results.at(a);if(c&&c.type!=="graphic"){++a;continue}const u=s.get((c?.layer??c?.graphic.layer)?.uid);if((!c||u)&&l<i.length&&i.at(l)!==u){const h=i.at(l);"fetchPopupFeaturesAtLocation"in h&&o.push({mapPoint:n,layerView:h}),++l}else c&&(o.push({graphic:c.graphic,layerView:u}),++a)}return{hits:o,location:n}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Int(this.type);if(_e("safari")&&_e("safari")<9&&(e=new Qe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:_e("safari")})),e!=null)throw kt.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return zit()}_getDefaultViewpoint(){const{constraints:e,initialExtent:n,map:r,padding:i,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,c=l?.targetGeometry?.extent??n,u=c?.center,h=l?.rotation??0,f=l?.scale||c&&AO(c,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),g=a.center??u,y=a.rotation??h,_=a.scale??f;return g&&_?new pu({targetGeometry:g,scale:_,rotation:y}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const n=new gtt(this.surface),r=new nwe(this.surface,{canvas:this.renderCanvas,contextOptions:new jit(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},n);this.stage=r,this._magnifierView=new awe,this._magnifierView.magnifier=this.magnifier,this._gridView=new lwe;const i=new swe({view:this});this._set("labelManager",i);const s=new itt({view:this});this._set("animationManager",s);const o=new owe({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),mn(()=>this.stationary,l=>r.stationary=l,oa),mn(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},oa),mn(()=>this.magnifier,l=>this._magnifierView.magnifier=l,oa),mn(()=>this.grid,l=>this._gridView.grid=l,oa),mn(()=>this.renderingOptions,l=>r.renderingOptions=l,oa),mn(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=Qtt(r.highlightGradient,this.highlights.items)},oa),mn(()=>this.state.id,()=>r.state=this.state,oa),mn(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},oa)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(n=>{this.stage.addChild(n.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new utt(Aa.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const n=new rwe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new iwe(e)});this._set("graphicsView",n)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:n,padding:r,size:i,stage:s}=this;return{allLayerViews:n,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const n of this.allLayerViews)n.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const n of this.allLayerViews)n.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},n2.type="2d",n2);x([E({constructOnly:!0})],Gn.prototype,"deactivatedWebGLExtensions",void 0),x([E({constructOnly:!0})],Gn.prototype,"debugWebGLExtensions",void 0),x([E({readOnly:!0})],Gn.prototype,"featuresTilingScheme",void 0),x([E({readOnly:!0})],Gn.prototype,"graphicsTileStore",null),x([E()],Gn.prototype,"graphicsView",void 0),x([E()],Gn.prototype,"constraintsInfo",null),x([E()],Gn.prototype,"initialExtentRequired",null),x([E()],Gn.prototype,"labelManager",void 0),x([E({type:TO,nonNullable:!0})],Gn.prototype,"navigation",void 0),x([E({constructOnly:!0})],Gn.prototype,"renderCanvas",void 0),x([E()],Gn.prototype,"renderingOptions",void 0),x([E({constructOnly:!0})],Gn.prototype,"supersampleScreenshotsEnabled",void 0),x([E()],Gn.prototype,"defaultsFromMapSettings",null),x([E({readOnly:!0})],Gn.prototype,"typeSpecificPreconditionsReady",null),x([E(k7(W2,"analyses"))],Gn.prototype,"analyses",void 0),x([E()],Gn.prototype,"analysisViewManager",void 0),x([E({type:Vit})],Gn.prototype,"background",null),x([E()],Gn.prototype,"center",null),x([E({type:Lt})],Gn.prototype,"floors",void 0),x([E()],Gn.prototype,"grid",void 0),x([E({type:Lg})],Gn.prototype,"highlightOptions",null),x([E()],Gn.prototype,"map",void 0),x([E()],Gn.prototype,"padding",null),x([E({readOnly:!0})],Gn.prototype,"rendering",null),x([E({readOnly:!0})],Gn.prototype,"resolution",null),x([E()],Gn.prototype,"scale",null),x([E({type:Boolean,value:!1})],Gn.prototype,"spatialReferenceLocked",null),x([E({readOnly:!0})],Gn.prototype,"tileInfo",null),x([E({type:wxe,readOnly:!0})],Gn.prototype,"timeline",void 0),x([E({readOnly:!0})],Gn.prototype,"type",void 0),x([E({readOnly:!0})],Gn.prototype,"updating",null),x([E({readOnly:!0})],Gn.prototype,"view2dType",void 0),x([E({readOnly:!0})],Gn.prototype,"visibleArea",null),x([E()],Gn.prototype,"zoom",null),x([E({readOnly:!0})],Gn.prototype,"navigating",null),x([E(),Ks(t=>t instanceof ewe?t:XL(twe,t))],Gn.prototype,"ui",void 0),x([E()],Gn.prototype,"animationsEnabled",void 0),Gn=x([he("esri.views.View2D")],Gn);const Git=Gn;let L3=class extends Git{constructor(t){super(t),this.view2dType="map"}};x([E({readOnly:!0})],L3.prototype,"view2dType",void 0),L3=x([he("esri.views.MapView")],L3);const Uit=L3,ise=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Satelliet (wereld)","TMK 1850","Bonnebladen 1900"];function Bit(){const t=Y.useRef(null),e=Y.useRef(null),n=Y.useRef(!1),r=Y.useRef(!1),[i,s]=Y.useState(!1);L6e({target:"map"});const o=li(T=>T.map),a=li(T=>T.setArcGISMap),l=Ws(T=>T.registerLayer),c=Ws(T=>T.setLayerVisibility),u=an(T=>T.defaultBackground);Y.useEffect(()=>{if(!o){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const T=new Ff({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new bRe}),A=new Ff({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new Um({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),C=new Ff({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new Um({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),I=new Ff({properties:{title:"Satelliet (wereld)",type:"base"},visible:!1,source:new Um({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:" Esri, Maxar, Earthstar Geographics",maxZoom:19,crossOrigin:"anonymous"})}),R=new Ff({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new Um({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),V=new Ff({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new Um({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),P=new Ff({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new Um({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});o.addLayer(T),o.addLayer(A),o.addLayer(C),o.addLayer(I),o.addLayer(R),o.addLayer(V),o.addLayer(P),console.log(" Base layers added:",{osm:T.getVisible(),cartodb:A.getVisible(),satellite:C.getVisible(),worldSatellite:I.getVisible()}),l("OpenStreetMap",T),l("CartoDB (licht)",A),l("Luchtfoto",C),l("Satelliet (wereld)",I),l("Labels Overlay",R),l("TMK 1850",V),l("Bonnebladen 1900",P),o.updateSize(),console.log(" Map size:",o.getSize()),console.log(" Map center:",o.getView().getCenter()),console.log(" Map zoom:",o.getView().getZoom()),h()},[o,l]);async function h(){if(!o){console.error(" Cannot load layers: map is null");return}const T=PMe();console.log(` Loading ${T.length} immediate-load layers (WMS/Tile)...`);const A=await Promise.allSettled(T.map(async I=>{try{const R=await I.factory();return R?{name:I.name,layer:R}:null}catch(R){return console.warn(` Failed to create ${I.name}:`,R),null}}));let C=0;A.forEach(I=>{if(I.status==="fulfilled"&&I.value){const{name:R,layer:V}=I.value;o.addLayer(V),l(R,V),C++,console.log(`   ${R}`)}}),console.log(` Immediate layers loaded: ${C}/${T.length}`),console.log(` Total layers on map: ${o.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}Y.useEffect(()=>{if(!o||!e.current||r.current)return;console.log(" Initializing ArcGIS MapView for AHN layers...");const T=o.getView(),A=T.getCenter(),C=T.getZoom()||8,I=A?$n(A):[5.5,52],R=new Kye({}),V=new Uit({container:e.current,map:R,center:I,zoom:C,constraints:{rotationEnabled:!1},ui:{components:[]},background:{color:[0,0,0,0]}});return V.when(()=>{console.log(" ArcGIS MapView ready"),console.log(" ArcGIS center:",V.center?.longitude,V.center?.latitude),console.log(" ArcGIS zoom:",V.zoom),a(R,V),s(!0),r.current=!0,T.on("change:center",()=>{const P=T.getCenter();if(P){const N=$n(P);V.goTo({center:N},{animate:!1})}}),T.on("change:resolution",()=>{const P=T.getZoom();P!==void 0&&V.goTo({zoom:P},{animate:!1})})}).catch(P=>{console.error(" ArcGIS MapView initialization failed:",P),console.error("Error details:",P.message)}),()=>{V&&V.destroy()}},[o,a]),Y.useEffect(()=>{if(!o||n.current)return;const T=setTimeout(()=>{const A=u||"CartoDB (licht)";ise.forEach(C=>{c(C,!1)}),ise.includes(A)?c(A,!0):c("CartoDB (licht)",!0),n.current=!0,console.log(` Default background: ${A}`)},100);return()=>clearTimeout(T)},[o,u,c]);const f=an(T=>T.gpsAutoStart),g=Is(T=>T.startTracking),y=Y.useRef(!1);Y.useEffect(()=>{if(!(!o||y.current)&&f){const T=setTimeout(()=>{g(),y.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(T)}},[o,f,g]);const _={width:"100%",height:"100vh"},b={opacity:i?1:0,transition:"opacity 0.3s ease"};return p.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[p.jsx("div",{id:"map",ref:t,style:_}),p.jsx("div",{id:"arcgis-map",ref:e,style:b})]})}const LH=Y.createContext({});function OH(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const jO=Y.createContext(null),DH=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Wit extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Hit({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Y.useContext(DH);return Y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(Wit,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const qit=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=OH(Kit),l=Y.useId(),c=Y.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=Y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return Y.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),Y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(Hit,{isPresent:n,children:t})),p.jsx(jO.Provider,{value:u,children:t})};function Kit(){return new Map}function cwe(t=!0){const e=Y.useContext(jO);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Y.useId();Y.useEffect(()=>{t&&i(s)},[t]);const o=Y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const NR=t=>t.key||"";function sse(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const jH=typeof window<"u",uwe=jH?Y.useLayoutEffect:Y.useEffect,Wn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=cwe(o),c=Y.useMemo(()=>sse(t),[t]),u=o&&!a?[]:c.map(NR),h=Y.useRef(!0),f=Y.useRef(c),g=OH(()=>new Map),[y,_]=Y.useState(c),[b,T]=Y.useState(c);uwe(()=>{h.current=!1,f.current=c;for(let I=0;I<b.length;I++){const R=NR(b[I]);u.includes(R)?g.delete(R):g.get(R)!==!0&&g.set(R,!1)}},[b,u.length,u.join("-")]);const A=[];if(c!==y){let I=[...c];for(let R=0;R<b.length;R++){const V=b[R],P=NR(V);u.includes(P)||(I.splice(R,0,V),A.push(V))}s==="wait"&&A.length&&(I=A),T(sse(I)),_(c);return}const{forceRender:C}=Y.useContext(LH);return p.jsx(p.Fragment,{children:b.map(I=>{const R=NR(I),V=o&&!a?!1:c===b||u.includes(R),P=()=>{if(g.has(R))g.set(R,!0);else return;let N=!0;g.forEach(L=>{L||(N=!1)}),N&&(C?.(),T(f.current),o&&l?.(),r&&r())};return p.jsx(qit,{isPresent:V,initial:!h.current||n?void 0:!1,custom:V?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:V?void 0:P,children:I},R)})})},_c=t=>t;let hwe=_c;function FH(t){let e;return()=>(e===void 0&&(e=t()),e)}const X2=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},mp=t=>t*1e3,gp=t=>t/1e3,Yit={useManualTiming:!1};function Xit(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const g=h&&r?e:n;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const LR=["read","resolveKeyframes","update","preRender","render","postRender"],Zit=40;function dwe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=LR.reduce((T,A)=>(T[A]=Xit(s),T),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,g=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Zit),1),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:LR.reduce((T,A)=>{const C=o[A];return T[A]=(I,R=!1,V=!1)=>(n||y(),C.schedule(I,R,V)),T},{}),cancel:T=>{for(let A=0;A<LR.length;A++)o[LR[A]].cancel(T)},state:i,steps:o}}const{schedule:yi,cancel:n0,state:Ro,steps:e$}=dwe(typeof requestAnimationFrame<"u"?requestAnimationFrame:_c,!0),fwe=Y.createContext({strict:!1}),ose={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Z2={};for(const t in ose)Z2[t]={isEnabled:e=>ose[t].some(n=>!!e[n])};function Jit(t){for(const e in t)Z2[e]={...Z2[e],...t[e]}}const Qit=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function YN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Qit.has(t)}let pwe=t=>!YN(t);function est(t){t&&(pwe=e=>e.startsWith("on")?!YN(e):t(e))}try{est(require("@emotion/is-prop-valid").default)}catch{}function tst(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(pwe(i)||n===!0&&YN(i)||!e&&!YN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function nst(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const FO=Y.createContext({});function CA(t){return typeof t=="string"||Array.isArray(t)}function $O(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const $H=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VH=["initial",...$H];function VO(t){return $O(t.animate)||VH.some(e=>CA(t[e]))}function mwe(t){return!!(VO(t)||t.variants)}function rst(t,e){if(VO(t)){const{initial:n,animate:r}=t;return{initial:n===!1||CA(n)?n:void 0,animate:CA(r)?r:void 0}}return t.inherit!==!1?e:{}}function ist(t){const{initial:e,animate:n}=rst(t,Y.useContext(FO));return Y.useMemo(()=>({initial:e,animate:n}),[ase(e),ase(n)])}function ase(t){return Array.isArray(t)?t.join(" "):t}const sst=Symbol.for("motionComponentSymbol");function Ux(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ost(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ux(n)&&(n.current=r))},[e])}const zH=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ast="framerAppearId",gwe="data-"+zH(ast),{schedule:GH}=dwe(queueMicrotask,!1),ywe=Y.createContext({});function lst(t,e,n,r,i){var s,o;const{visualElement:a}=Y.useContext(FO),l=Y.useContext(fwe),c=Y.useContext(jO),u=Y.useContext(DH).reducedMotion,h=Y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,g=Y.useContext(ywe);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&cst(h.current,n,i,g);const y=Y.useRef(!1);Y.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const _=n[gwe],b=Y.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return uwe(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),GH.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),Y.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,_)}),b.current=!1))}),f}function cst(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:vwe(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ux(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function vwe(t){if(t)return t.options.allowProjection!==!1?t.projection:vwe(t.parent)}function ust({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Jit(t);function a(c,u){let h;const f={...Y.useContext(DH),...c,layoutId:hst(c)},{isStatic:g}=f,y=ist(c),_=r(c,g);if(!g&&jH){dst();const b=fst(f);h=b.MeasureLayout,y.visualElement=lst(i,_,f,e,b.ProjectionNode)}return p.jsxs(FO.Provider,{value:y,children:[h&&y.visualElement?p.jsx(h,{visualElement:y.visualElement,...f}):null,n(i,c,ost(_,y.visualElement,u),_,g,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=Y.forwardRef(a);return l[sst]=i,l}function hst({layoutId:t}){const e=Y.useContext(LH).id;return e&&t!==void 0?e+"-"+t:t}function dst(t,e){Y.useContext(fwe).strict}function fst(t){const{drag:e,layout:n}=Z2;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const pst=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UH(t){return typeof t!="string"||t.includes("-")?!1:!!(pst.indexOf(t)>-1||/[A-Z]/u.test(t))}function lse(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function BH(t,e,n,r){if(typeof e=="function"){const[i,s]=lse(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=lse(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const kz=t=>Array.isArray(t),mst=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),gst=t=>kz(t)?t[t.length-1]||0:t,ga=t=>!!(t&&t.getVelocity);function O3(t){const e=ga(t)?t.get():t;return mst(e)?e.toValue():e}function yst({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:vst(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const _we=t=>(e,n)=>{const r=Y.useContext(FO),i=Y.useContext(jO),s=()=>yst(t,e,r,i);return n?s():OH(s)};function vst(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=O3(s[f]);let{initial:o,animate:a}=t;const l=VO(t),c=mwe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!$O(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const y=BH(t,f[g]);if(y){const{transitionEnd:_,transition:b,...T}=y;for(const A in T){let C=T[A];if(Array.isArray(C)){const I=u?C.length-1:0;C=C[I]}C!==null&&(i[A]=C)}for(const A in _)i[A]=_[A]}}}return i}const Db=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kv=new Set(Db),xwe=t=>e=>typeof e=="string"&&e.startsWith(t),wwe=xwe("--"),_st=xwe("var(--"),WH=t=>_st(t)?xst.test(t.split("/*")[0].trim()):!1,xst=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bwe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Cp=(t,e,n)=>n>e?e:n<t?t:n,jb={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},IA={...jb,transform:t=>Cp(0,1,t)},OR={...jb,default:1},eI=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zm=eI("deg"),Nd=eI("%"),vn=eI("px"),wst=eI("vh"),bst=eI("vw"),cse={...Nd,parse:t=>Nd.parse(t)/100,transform:t=>Nd.transform(t*100)},Est={borderWidth:vn,borderTopWidth:vn,borderRightWidth:vn,borderBottomWidth:vn,borderLeftWidth:vn,borderRadius:vn,radius:vn,borderTopLeftRadius:vn,borderTopRightRadius:vn,borderBottomRightRadius:vn,borderBottomLeftRadius:vn,width:vn,maxWidth:vn,height:vn,maxHeight:vn,top:vn,right:vn,bottom:vn,left:vn,padding:vn,paddingTop:vn,paddingRight:vn,paddingBottom:vn,paddingLeft:vn,margin:vn,marginTop:vn,marginRight:vn,marginBottom:vn,marginLeft:vn,backgroundPositionX:vn,backgroundPositionY:vn},Sst={rotate:zm,rotateX:zm,rotateY:zm,rotateZ:zm,scale:OR,scaleX:OR,scaleY:OR,scaleZ:OR,skew:zm,skewX:zm,skewY:zm,distance:vn,translateX:vn,translateY:vn,translateZ:vn,x:vn,y:vn,z:vn,perspective:vn,transformPerspective:vn,opacity:IA,originX:cse,originY:cse,originZ:vn},use={...jb,transform:Math.round},HH={...Est,...Sst,zIndex:use,size:vn,fillOpacity:IA,strokeOpacity:IA,numOctaves:use},Tst={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kst=Db.length;function Ast(t,e,n){let r="",i=!0;for(let s=0;s<kst;s++){const o=Db[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=bwe(a,HH[o]);if(!l){i=!1;const u=Tst[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function qH(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(kv.has(l)){o=!0;continue}else if(wwe(l)){i[l]=c;continue}else{const u=bwe(c,HH[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Ast(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Cst={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ist={offset:"strokeDashoffset",array:"strokeDasharray"};function Pst(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Cst:Ist;t[s.offset]=vn.transform(-r);const o=vn.transform(e),a=vn.transform(n);t[s.array]=`${o} ${a}`}function hse(t,e,n){return typeof t=="string"?t:vn.transform(e+n*t)}function Rst(t,e,n){const r=hse(e,t.x,t.width),i=hse(n,t.y,t.height);return`${r} ${i}`}function KH(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(qH(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:y}=t;f.transform&&(y&&(g.transform=f.transform),delete f.transform),y&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Rst(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&Pst(f,o,a,l,!1)}const YH=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ewe=()=>({...YH(),attrs:{}}),XH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Swe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Twe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kwe(t,e,n,r){Swe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Twe.has(i)?i:zH(i),e.attrs[i])}const XN={};function Mst(t){Object.assign(XN,t)}function Awe(t,{layout:e,layoutId:n}){return kv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!XN[t]||t==="opacity")}function ZH(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ga(i[o])||e.style&&ga(e.style[o])||Awe(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Cwe(t,e,n){const r=ZH(t,e,n);for(const i in t)if(ga(t[i])||ga(e[i])){const s=Db.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Nst(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const dse=["x","y","width","height","cx","cy","r"],Lst={useVisualState:_we({scrapeMotionValuesFromProps:Cwe,createRenderState:Ewe,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(kv.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<dse.length;a++){const l=dse[a];t[l]!==e[l]&&(o=!0)}o&&yi.read(()=>{Nst(n,r),yi.render(()=>{KH(r,i,XH(n.tagName),t.transformTemplate),kwe(n,r)})})}})},Ost={useVisualState:_we({scrapeMotionValuesFromProps:ZH,createRenderState:YH})};function Iwe(t,e,n){for(const r in e)!ga(e[r])&&!Awe(r,n)&&(t[r]=e[r])}function Dst({transformTemplate:t},e){return Y.useMemo(()=>{const n=YH();return qH(n,e,t),Object.assign({},n.vars,n.style)},[e])}function jst(t,e){const n=t.style||{},r={};return Iwe(r,n,t),Object.assign(r,Dst(t,e)),r}function Fst(t,e){const n={},r=jst(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function $st(t,e,n,r){const i=Y.useMemo(()=>{const s=Ewe();return KH(s,e,XH(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Iwe(s,t.style,t),i.style={...s,...i.style}}return i}function Vst(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(UH(n)?$st:Fst)(r,s,o,n),c=tst(r,typeof n=="string",t),u=n!==Y.Fragment?{...c,...l,ref:i}:{},{children:h}=r,f=Y.useMemo(()=>ga(h)?h.get():h,[h]);return Y.createElement(n,{...u,children:f})}}function zst(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...UH(r)?Lst:Ost,preloadedFeatures:t,useRender:Vst(i),createVisualElement:e,Component:r};return ust(o)}}function Pwe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function zO(t,e,n){const r=t.getProps();return BH(r,e,n!==void 0?n:r.custom,t)}const Gst=FH(()=>window.ScrollTimeline!==void 0);class Ust{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Gst()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Bst extends Ust{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function JH(t,e){return t?t[e]||t.default||t:void 0}const Az=2e4;function Rwe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Az;)e+=n,r=t.next(e);return e>=Az?1/0:e}function QH(t){return typeof t=="function"}function fse(t,e){t.timeline=e,t.onfinish=null}const eq=t=>Array.isArray(t)&&typeof t[0]=="number",Wst={linearEasing:void 0};function Hst(t,e){const n=FH(t);return()=>{var r;return(r=Wst[e])!==null&&r!==void 0?r:n()}}const ZN=Hst(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Mwe=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(X2(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Nwe(t){return!!(typeof t=="function"&&ZN()||!t||typeof t=="string"&&(t in Cz||ZN())||eq(t)||Array.isArray(t)&&t.every(Nwe))}const rT=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Cz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rT([0,.65,.55,1]),circOut:rT([.55,0,1,.45]),backIn:rT([.31,.01,.66,-.59]),backOut:rT([.33,1.53,.69,.99])};function Lwe(t,e){if(t)return typeof t=="function"&&ZN()?Mwe(t,e):eq(t)?rT(t):Array.isArray(t)?t.map(n=>Lwe(n,e)||Cz.easeOut):Cz[t]}const Yu={x:!1,y:!1};function Owe(){return Yu.x||Yu.y}function qst(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function Dwe(t,e){const n=qst(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pse(t){return e=>{e.pointerType==="touch"||Owe()||t(e)}}function Kst(t,e,n={}){const[r,i,s]=Dwe(t,n),o=pse(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=pse(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const jwe=(t,e)=>e?t===e?!0:jwe(t,e.parentElement):!1,tq=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Yst=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Xst(t){return Yst.has(t.tagName)||t.tabIndex!==-1}const iT=new WeakSet;function mse(t){return e=>{e.key==="Enter"&&t(e)}}function t$(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Zst=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mse(()=>{if(iT.has(n))return;t$(n,"down");const i=mse(()=>{t$(n,"up")}),s=()=>t$(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gse(t){return tq(t)&&!Owe()}function Jst(t,e,n={}){const[r,i,s]=Dwe(t,n),o=a=>{const l=a.currentTarget;if(!gse(a)||iT.has(l))return;iT.add(l);const c=e(a),u=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!gse(g)||!iT.has(l))&&(iT.delete(l),typeof c=="function"&&c(g,{success:y}))},h=g=>{u(g,n.useGlobalTarget||jwe(l,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!Xst(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>Zst(c,i),i)}),s}function Qst(t){return t==="x"||t==="y"?Yu[t]?null:(Yu[t]=!0,()=>{Yu[t]=!1}):Yu.x||Yu.y?null:(Yu.x=Yu.y=!0,()=>{Yu.x=Yu.y=!1})}const Fwe=new Set(["width","height","top","left","right","bottom",...Db]);let D3;function eot(){D3=void 0}const Ld={now:()=>(D3===void 0&&Ld.set(Ro.isProcessing||Yit.useManualTiming?Ro.timestamp:performance.now()),D3),set:t=>{D3=t,queueMicrotask(eot)}};function nq(t,e){t.indexOf(e)===-1&&t.push(e)}function rq(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class iq{constructor(){this.subscriptions=[]}add(e){return nq(this.subscriptions,e),()=>rq(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function $we(t,e){return e?t*(1e3/e):0}const yse=30,tot=t=>!isNaN(parseFloat(t));class not{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Ld.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ld.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tot(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iq);const r=this.events[e].add(n);return e==="change"?()=>{r(),yi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ld.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yse)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,yse);return $we(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function PA(t,e){return new not(t,e)}function rot(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,PA(n))}function iot(t,e){const n=zO(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=gst(s[o]);rot(t,o,a)}}function sot(t){return!!(ga(t)&&t.add)}function Iz(t,e){const n=t.getValue("willChange");if(sot(n))return n.add(e)}function Vwe(t){return t.props[gwe]}const zwe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,oot=1e-7,aot=12;function lot(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=zwe(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>oot&&++a<aot);return o}function tI(t,e,n,r){if(t===e&&n===r)return _c;const i=s=>lot(s,0,1,t,n);return s=>s===0||s===1?s:zwe(i(s),e,r)}const Gwe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Uwe=t=>e=>1-t(1-e),Bwe=tI(.33,1.53,.69,.99),sq=Uwe(Bwe),Wwe=Gwe(sq),Hwe=t=>(t*=2)<1?.5*sq(t):.5*(2-Math.pow(2,-10*(t-1))),oq=t=>1-Math.sin(Math.acos(t)),qwe=Uwe(oq),Kwe=Gwe(oq),Ywe=t=>/^0[^.\s]+$/u.test(t);function cot(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Ywe(t):!0}const QT=t=>Math.round(t*1e5)/1e5,aq=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uot(t){return t==null}const hot=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lq=(t,e)=>n=>!!(typeof n=="string"&&hot.test(n)&&n.startsWith(t)||e&&!uot(n)&&Object.prototype.hasOwnProperty.call(n,e)),Xwe=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(aq);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dot=t=>Cp(0,255,t),n$={...jb,transform:t=>Math.round(dot(t))},Qy={test:lq("rgb","red"),parse:Xwe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+n$.transform(t)+", "+n$.transform(e)+", "+n$.transform(n)+", "+QT(IA.transform(r))+")"};function fot(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Pz={test:lq("#"),parse:fot,transform:Qy.transform},Bx={test:lq("hsl","hue"),parse:Xwe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Nd.transform(QT(e))+", "+Nd.transform(QT(n))+", "+QT(IA.transform(r))+")"},na={test:t=>Qy.test(t)||Pz.test(t)||Bx.test(t),parse:t=>Qy.test(t)?Qy.parse(t):Bx.test(t)?Bx.parse(t):Pz.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qy.transform(t):Bx.transform(t)},pot=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mot(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(aq))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(pot))===null||n===void 0?void 0:n.length)||0)>0}const Zwe="number",Jwe="color",got="var",yot="var(",vse="${}",vot=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function RA(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(vot,l=>(na.test(l)?(r.color.push(s),i.push(Jwe),n.push(na.parse(l))):l.startsWith(yot)?(r.var.push(s),i.push(got),n.push(l)):(r.number.push(s),i.push(Zwe),n.push(parseFloat(l))),++s,vse)).split(vse);return{values:n,split:a,indexes:r,types:i}}function Qwe(t){return RA(t).values}function e2e(t){const{split:e,types:n}=RA(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Zwe?s+=QT(i[o]):a===Jwe?s+=na.transform(i[o]):s+=i[o]}return s}}const _ot=t=>typeof t=="number"?0:t;function xot(t){const e=Qwe(t);return e2e(t)(e.map(_ot))}const r0={test:mot,parse:Qwe,createTransformer:e2e,getAnimatableNone:xot},wot=new Set(["brightness","contrast","saturate","opacity"]);function bot(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(aq)||[];if(!r)return t;const i=n.replace(r,"");let s=wot.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Eot=/\b([a-z-]*)\(.*?\)/gu,Rz={...r0,getAnimatableNone:t=>{const e=t.match(Eot);return e?e.map(bot).join(" "):t}},Sot={...HH,color:na,backgroundColor:na,outlineColor:na,fill:na,stroke:na,borderColor:na,borderTopColor:na,borderRightColor:na,borderBottomColor:na,borderLeftColor:na,filter:Rz,WebkitFilter:Rz},cq=t=>Sot[t];function t2e(t,e){let n=cq(t);return n!==Rz&&(n=r0),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Tot=new Set(["auto","none","0"]);function kot(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Tot.has(s)&&RA(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=t2e(n,i)}const _se=t=>t===jb||t===vn,xse=(t,e)=>parseFloat(t.split(", ")[e]),wse=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return xse(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?xse(s[1],t):0}},Aot=new Set(["x","y","z"]),Cot=Db.filter(t=>!Aot.has(t));function Iot(t){const e=[];return Cot.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const J2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wse(4,13),y:wse(5,14)};J2.translateX=J2.x;J2.translateY=J2.y;const y1=new Set;let Mz=!1,Nz=!1;function n2e(){if(Nz){const t=Array.from(y1).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Iot(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Nz=!1,Mz=!1,y1.forEach(t=>t.complete()),y1.clear()}function r2e(){y1.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Nz=!0)})}function Pot(){r2e(),n2e()}class uq{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(y1.add(this),Mz||(Mz=!0,yi.read(r2e),yi.resolveKeyframes(n2e))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),y1.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,y1.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const i2e=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Rot=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mot(t){const e=Rot.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function s2e(t,e,n=1){const[r,i]=Mot(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return i2e(o)?parseFloat(o):o}return WH(i)?s2e(i,e,n+1):i}const o2e=t=>e=>e.test(t),Not={test:t=>t==="auto",parse:t=>t},a2e=[jb,vn,Nd,zm,bst,wst,Not],bse=t=>a2e.find(o2e(t));class l2e extends uq{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),WH(c))){const u=s2e(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Fwe.has(r)||e.length!==2)return;const[i,s]=e,o=bse(i),a=bse(s);if(o!==a)if(_se(o)&&_se(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)cot(e[i])&&r.push(i);r.length&&kot(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=J2[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=J2[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Ese=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(r0.test(t)||t==="0")&&!t.startsWith("url("));function Lot(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Oot(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Ese(i,e),a=Ese(s,e);return!o||!a?!1:Lot(t)||(n==="spring"||QH(n))&&r}const Dot=t=>t!==null;function GO(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Dot),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const jot=40;class c2e{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ld.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>jot?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Pot(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ld.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Oot(e,r,i,s))if(o)this.options.duration=0;else{l&&l(GO(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const $i=(t,e,n)=>t+(e-t)*n;function r$(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Fot({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=r$(l,a,t+1/3),s=r$(l,a,t),o=r$(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function JN(t,e){return n=>n>0?e:t}const i$=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$ot=[Pz,Qy,Bx],Vot=t=>$ot.find(e=>e.test(t));function Sse(t){const e=Vot(t);if(!e)return!1;let n=e.parse(t);return e===Bx&&(n=Fot(n)),n}const Tse=(t,e)=>{const n=Sse(t),r=Sse(e);if(!n||!r)return JN(t,e);const i={...n};return s=>(i.red=i$(n.red,r.red,s),i.green=i$(n.green,r.green,s),i.blue=i$(n.blue,r.blue,s),i.alpha=$i(n.alpha,r.alpha,s),Qy.transform(i))},zot=(t,e)=>n=>e(t(n)),nI=(...t)=>t.reduce(zot),Lz=new Set(["none","hidden"]);function Got(t,e){return Lz.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Uot(t,e){return n=>$i(t,e,n)}function hq(t){return typeof t=="number"?Uot:typeof t=="string"?WH(t)?JN:na.test(t)?Tse:Hot:Array.isArray(t)?u2e:typeof t=="object"?na.test(t)?Tse:Bot:JN}function u2e(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>hq(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Bot(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hq(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Wot(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const Hot=(t,e)=>{const n=r0.createTransformer(e),r=RA(t),i=RA(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Lz.has(t)&&!i.values.length||Lz.has(e)&&!r.values.length?Got(t,e):nI(u2e(Wot(r,i),i.values),n):JN(t,e)};function h2e(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?$i(t,e,n):hq(t)(t,e)}const qot=5;function d2e(t,e,n){const r=Math.max(e-qot,0);return $we(n-t(r),e-r)}const Zi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},s$=.001;function Kot({duration:t=Zi.duration,bounce:e=Zi.bounce,velocity:n=Zi.velocity,mass:r=Zi.mass}){let i,s,o=1-e;o=Cp(Zi.minDamping,Zi.maxDamping,o),t=Cp(Zi.minDuration,Zi.maxDuration,gp(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,g=Oz(c,o),y=Math.exp(-h);return s$-f/g*y},s=c=>{const h=c*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-h),_=Oz(Math.pow(c,2),o);return(-i(c)+s$>0?-1:1)*((f-g)*y)/_}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-s$+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=Xot(i,s,a);if(t=mp(t),isNaN(l))return{stiffness:Zi.stiffness,damping:Zi.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Yot=12;function Xot(t,e,n){let r=n;for(let i=1;i<Yot;i++)r=r-t(r)/e(r);return r}function Oz(t,e){return t*Math.sqrt(1-e*e)}const Zot=["duration","bounce"],Jot=["stiffness","damping","mass"];function kse(t,e){return e.some(n=>t[n]!==void 0)}function Qot(t){let e={velocity:Zi.velocity,stiffness:Zi.stiffness,damping:Zi.damping,mass:Zi.mass,isResolvedFromDuration:!1,...t};if(!kse(t,Jot)&&kse(t,Zot))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Cp(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Zi.mass,stiffness:i,damping:s}}else{const n=Kot(t);e={...e,...n,mass:Zi.mass},e.isResolvedFromDuration=!0}return e}function f2e(t=Zi.visualDuration,e=Zi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:g}=Qot({...n,velocity:-gp(n.velocity||0)}),y=f||0,_=c/(2*Math.sqrt(l*u)),b=o-s,T=gp(Math.sqrt(l/u)),A=Math.abs(b)<5;r||(r=A?Zi.restSpeed.granular:Zi.restSpeed.default),i||(i=A?Zi.restDelta.granular:Zi.restDelta.default);let C;if(_<1){const R=Oz(T,_);C=V=>{const P=Math.exp(-_*T*V);return o-P*((y+_*T*b)/R*Math.sin(R*V)+b*Math.cos(R*V))}}else if(_===1)C=R=>o-Math.exp(-T*R)*(b+(y+T*b)*R);else{const R=T*Math.sqrt(_*_-1);C=V=>{const P=Math.exp(-_*T*V),N=Math.min(R*V,300);return o-P*((y+_*T*b)*Math.sinh(N)+R*b*Math.cosh(N))/R}}const I={calculatedDuration:g&&h||null,next:R=>{const V=C(R);if(g)a.done=R>=h;else{let P=0;_<1&&(P=R===0?mp(y):d2e(C,R,V));const N=Math.abs(P)<=r,L=Math.abs(o-V)<=i;a.done=N&&L}return a.value=a.done?o:V,a},toString:()=>{const R=Math.min(Rwe(I),Az),V=Mwe(P=>I.next(R*P).value,R,30);return R+"ms "+V}};return I}function Ase({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},g=N=>a!==void 0&&N<a||l!==void 0&&N>l,y=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let _=n*e;const b=h+_,T=o===void 0?b:o(b);T!==b&&(_=T-h);const A=N=>-_*Math.exp(-N/r),C=N=>T+A(N),I=N=>{const L=A(N),O=C(N);f.done=Math.abs(L)<=c,f.value=f.done?T:O};let R,V;const P=N=>{g(f.value)&&(R=N,V=f2e({keyframes:[f.value,y(f.value)],velocity:d2e(C,N,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:N=>{let L=!1;return!V&&R===void 0&&(L=!0,I(N),P(N)),R!==void 0&&N>=R?V.next(N-R):(!L&&I(N),f)}}}const eat=tI(.42,0,1,1),tat=tI(0,0,.58,1),p2e=tI(.42,0,.58,1),nat=t=>Array.isArray(t)&&typeof t[0]!="number",rat={linear:_c,easeIn:eat,easeInOut:p2e,easeOut:tat,circIn:oq,circInOut:Kwe,circOut:qwe,backIn:sq,backInOut:Wwe,backOut:Bwe,anticipate:Hwe},Cse=t=>{if(eq(t)){hwe(t.length===4);const[e,n,r,i]=t;return tI(e,n,r,i)}else if(typeof t=="string")return rat[t];return t};function iat(t,e,n){const r=[],i=n||h2e,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||_c:e;a=nI(l,a)}r.push(a)}return r}function sat(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(hwe(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=iat(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=X2(t[h],t[h+1],u);return a[h](f)};return n?u=>c(Cp(t[0],t[s-1],u)):c}function oat(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=X2(0,e,r);t.push($i(n,1,i))}}function aat(t){const e=[0];return oat(e,t.length-1),e}function lat(t,e){return t.map(n=>n*e)}function cat(t,e){return t.map(()=>e||p2e).splice(0,t.length-1)}function QN({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=nat(r)?r.map(Cse):Cse(r),s={done:!1,value:e[0]},o=lat(n&&n.length===e.length?n:aat(e),t),a=sat(o,e,{ease:Array.isArray(i)?i:cat(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const uat=t=>{const e=({timestamp:n})=>t(n);return{start:()=>yi.update(e,!0),stop:()=>n0(e),now:()=>Ro.isProcessing?Ro.timestamp:Ld.now()}},hat={decay:Ase,inertia:Ase,tween:QN,keyframes:QN,spring:f2e},dat=t=>t/100;class dq extends c2e{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||uq,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=QH(n)?n:hat[n]||QN;let l,c;a!==QN&&typeof e[0]!="number"&&(l=nI(dat,h2e(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Rwe(u));const{calculatedDuration:h}=u,f=h+i,g=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:y,repeatDelay:_,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-f*(this.speed>=0?1:-1),A=this.speed>=0?T<0:T>u;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let C=this.currentTime,I=s;if(g){const N=Math.min(this.currentTime,u)/h;let L=Math.floor(N),O=N%1;!O&&N>=1&&(O=1),O===1&&L--,L=Math.min(L,g+1),L%2&&(y==="reverse"?(O=1-O,_&&(O-=_/h)):y==="mirror"&&(I=o)),C=Cp(0,1,O)*h}const R=A?{done:!1,value:l[0]}:I.next(C);a&&(R.value=a(R.value));let{done:V}=R;!A&&c!==null&&(V=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return P&&i!==void 0&&(R.value=GO(l,this.options,i)),b&&b(R.value),P&&this.finish(),R}get duration(){const{resolved:e}=this;return e?gp(e.calculatedDuration):0}get time(){return gp(this.currentTime)}set time(e){e=mp(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gp(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=uat,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const fat=new Set(["opacity","clipPath","filter","transform"]);function pat(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Lwe(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const mat=FH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),e5=10,gat=2e4;function yat(t){return QH(t.type)||t.type==="spring"||!Nwe(t.ease)}function vat(t,e){const n=new dq({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<gat;)r=n.sample(s),i.push(r.value),s+=e5;return{times:void 0,keyframes:i,duration:s-e5,ease:"linear"}}const m2e={anticipate:Hwe,backInOut:Wwe,circInOut:Kwe};function _at(t){return t in m2e}class Ise extends c2e{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new l2e(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&ZN()&&_at(s)&&(s=m2e[s]),yat(this.options)){const{onComplete:h,onUpdate:f,motionValue:g,element:y,..._}=this.options,b=vat(e,_);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=pat(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(fse(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(GO(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return gp(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return gp(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=mp(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return _c;const{animation:r}=n;fse(r,e)}return _c}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...g}=this.options,y=new dq({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=mp(this.time);c.setWithVelocity(y.sample(_-e5).value,y.sample(_).value,e5)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return mat()&&r&&fat.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const xat={type:"spring",stiffness:500,damping:25,restSpeed:10},wat=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bat={type:"keyframes",duration:.8},Eat={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Sat=(t,{keyframes:e})=>e.length>2?bat:kv.has(t)?t.startsWith("scale")?wat(e[1]):xat:Eat;function Tat({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const fq=(t,e,n,r={},i,s)=>o=>{const a=JH(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-mp(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Tat(a)||(u={...u,...Sat(t,u)}),u.duration&&(u.duration=mp(u.duration)),u.repeatDelay&&(u.repeatDelay=mp(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=GO(u.keyframes,a);if(f!==void 0)return yi.update(()=>{u.onUpdate(f),u.onComplete()}),new Bst([])}return!s&&Ise.supports(u)?new Ise(u):new dq(u)};function kat({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function g2e(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),g=l[h];if(g===void 0||u&&kat(u,h))continue;const y={delay:n,...JH(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const T=Vwe(t);if(T){const A=window.MotionHandoffAnimation(T,h,yi);A!==null&&(y.startTime=A,_=!0)}}Iz(t,h),f.start(fq(h,f,g,t.shouldReduceMotion&&Fwe.has(h)?{type:!1}:y,t,_));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{yi.update(()=>{a&&iot(t,a)})}),c}function Dz(t,e,n={}){var r;const i=zO(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(g2e(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return Aat(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function Aat(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Cat).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Dz(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Cat(t,e){return t.sortNodePosition(e)}function Iat(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Dz(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Dz(t,e,n);else{const i=typeof e=="function"?zO(t,e,n.custom):e;r=Promise.all(g2e(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Pat=VH.length;function y2e(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?y2e(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Pat;n++){const r=VH[n],i=t.props[r];(CA(i)||i===!1)&&(e[r]=i)}return e}const Rat=[...$H].reverse(),Mat=$H.length;function Nat(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Iat(t,n,r)))}function Lat(t){let e=Nat(t),n=Pse(),r=!0;const i=l=>(c,u)=>{var h;const f=zO(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:g,transitionEnd:y,..._}=f;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=y2e(t.parent)||{},h=[],f=new Set;let g={},y=1/0;for(let b=0;b<Mat;b++){const T=Rat[b],A=n[T],C=c[T]!==void 0?c[T]:u[T],I=CA(C),R=T===l?A.isActive:null;R===!1&&(y=b);let V=C===u[T]&&C!==c[T]&&I;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),A.protectedKeys={...g},!A.isActive&&R===null||!C&&!A.prevProp||$O(C)||typeof C=="boolean")continue;const P=Oat(A.prevProp,C);let N=P||T===l&&A.isActive&&!V&&I||b>y&&I,L=!1;const O=Array.isArray(C)?C:[C];let F=O.reduce(i(T),{});R===!1&&(F={});const{prevResolvedValues:G={}}=A,U={...G,...F},ue=Ce=>{N=!0,f.has(Ce)&&(L=!0,f.delete(Ce)),A.needsAnimating[Ce]=!0;const de=t.getValue(Ce);de&&(de.liveStyle=!1)};for(const Ce in U){const de=F[Ce],Le=G[Ce];if(g.hasOwnProperty(Ce))continue;let xe=!1;kz(de)&&kz(Le)?xe=!Pwe(de,Le):xe=de!==Le,xe?de!=null?ue(Ce):f.add(Ce):de!==void 0&&f.has(Ce)?ue(Ce):A.protectedKeys[Ce]=!0}A.prevProp=C,A.prevResolvedValues=F,A.isActive&&(g={...g,...F}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(V&&P)||L)&&h.push(...O.map(Ce=>({animation:Ce,options:{type:T}})))}if(f.size){const b={};f.forEach(T=>{const A=t.getBaseTarget(T),C=t.getValue(T);C&&(C.liveStyle=!0),b[T]=A??null}),h.push({animation:b})}let _=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Pse(),r=!0}}}function Oat(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Pwe(e,t):!1}function ty(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pse(){return{animate:ty(!0),whileInView:ty(),whileHover:ty(),whileTap:ty(),whileDrag:ty(),whileFocus:ty(),exit:ty()}}class _0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Dat extends _0{constructor(e){super(e),e.animationState||(e.animationState=Lat(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$O(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let jat=0;class Fat extends _0{constructor(){super(...arguments),this.id=jat++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $at={animation:{Feature:Dat},exit:{Feature:Fat}};function MA(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function rI(t){return{point:{x:t.pageX,y:t.pageY}}}const Vat=t=>e=>tq(e)&&t(e,rI(e));function ek(t,e,n,r){return MA(t,e,Vat(n),r)}const Rse=(t,e)=>Math.abs(t-e);function zat(t,e){const n=Rse(t.x,e.x),r=Rse(t.y,e.y);return Math.sqrt(n**2+r**2)}class v2e{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=a$(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=zat(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:y}=h,{timestamp:_}=Ro;this.history.push({...y,timestamp:_});const{onStart:b,onMove:T}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=o$(f,this.transformPagePoint),yi.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=a$(h.type==="pointercancel"?this.lastMoveEventInfo:o$(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,b),y&&y(h,b)},!tq(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=rI(e),a=o$(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Ro;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,a$(a,this.history)),this.removeListeners=nI(ek(this.contextWindow,"pointermove",this.handlePointerMove),ek(this.contextWindow,"pointerup",this.handlePointerUp),ek(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),n0(this.updatePoint)}}function o$(t,e){return e?{point:e(t.point)}:t}function Mse(t,e){return{x:t.x-e.x,y:t.y-e.y}}function a$({point:t},e){return{point:t,delta:Mse(t,_2e(e)),offset:Mse(t,Gat(e)),velocity:Uat(e,.1)}}function Gat(t){return t[0]}function _2e(t){return t[t.length-1]}function Uat(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=_2e(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>mp(e)));)n--;if(!r)return{x:0,y:0};const s=gp(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const x2e=1e-4,Bat=1-x2e,Wat=1+x2e,w2e=.01,Hat=0-w2e,qat=0+w2e;function Tc(t){return t.max-t.min}function Kat(t,e,n){return Math.abs(t-e)<=n}function Nse(t,e,n,r=.5){t.origin=r,t.originPoint=$i(e.min,e.max,t.origin),t.scale=Tc(n)/Tc(e),t.translate=$i(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Bat&&t.scale<=Wat||isNaN(t.scale))&&(t.scale=1),(t.translate>=Hat&&t.translate<=qat||isNaN(t.translate))&&(t.translate=0)}function tk(t,e,n,r){Nse(t.x,e.x,n.x,r?r.originX:void 0),Nse(t.y,e.y,n.y,r?r.originY:void 0)}function Lse(t,e,n){t.min=n.min+e.min,t.max=t.min+Tc(e)}function Yat(t,e,n){Lse(t.x,e.x,n.x),Lse(t.y,e.y,n.y)}function Ose(t,e,n){t.min=e.min-n.min,t.max=t.min+Tc(e)}function nk(t,e,n){Ose(t.x,e.x,n.x),Ose(t.y,e.y,n.y)}function Xat(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?$i(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?$i(n,t,r.max):Math.min(t,n)),t}function Dse(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Zat(t,{top:e,left:n,bottom:r,right:i}){return{x:Dse(t.x,n,i),y:Dse(t.y,e,r)}}function jse(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Jat(t,e){return{x:jse(t.x,e.x),y:jse(t.y,e.y)}}function Qat(t,e){let n=.5;const r=Tc(t),i=Tc(e);return i>r?n=X2(e.min,e.max-r,t.min):r>i&&(n=X2(t.min,t.max-i,e.min)),Cp(0,1,n)}function elt(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jz=.35;function tlt(t=jz){return t===!1?t=0:t===!0&&(t=jz),{x:Fse(t,"left","right"),y:Fse(t,"top","bottom")}}function Fse(t,e,n){return{min:$se(t,e),max:$se(t,n)}}function $se(t,e){return typeof t=="number"?t:t[e]||0}const Vse=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wx=()=>({x:Vse(),y:Vse()}),zse=()=>({min:0,max:0}),us=()=>({x:zse(),y:zse()});function Kc(t){return[t("x"),t("y")]}function b2e({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function nlt({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function rlt(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function l$(t){return t===void 0||t===1}function Fz({scale:t,scaleX:e,scaleY:n}){return!l$(t)||!l$(e)||!l$(n)}function Ay(t){return Fz(t)||E2e(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function E2e(t){return Gse(t.x)||Gse(t.y)}function Gse(t){return t&&t!=="0%"}function t5(t,e,n){const r=t-n,i=e*r;return n+i}function Use(t,e,n,r,i){return i!==void 0&&(t=t5(t,i,r)),t5(t,n,r)+e}function $z(t,e=0,n=1,r,i){t.min=Use(t.min,e,n,r,i),t.max=Use(t.max,e,n,r,i)}function S2e(t,{x:e,y:n}){$z(t.x,e.translate,e.scale,e.originPoint),$z(t.y,n.translate,n.scale,n.originPoint)}const Bse=.999999999999,Wse=1.0000000000001;function ilt(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qx(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,S2e(t,o)),r&&Ay(s.latestValues)&&qx(t,s.latestValues))}e.x<Wse&&e.x>Bse&&(e.x=1),e.y<Wse&&e.y>Bse&&(e.y=1)}function Hx(t,e){t.min=t.min+e,t.max=t.max+e}function Hse(t,e,n,r,i=.5){const s=$i(t.min,t.max,i);$z(t,e,n,s,r)}function qx(t,e){Hse(t.x,e.x,e.scaleX,e.scale,e.originX),Hse(t.y,e.y,e.scaleY,e.scale,e.originY)}function T2e(t,e){return b2e(rlt(t.getBoundingClientRect(),e))}function slt(t,e,n){const r=T2e(t,n),{scroll:i}=e;return i&&(Hx(r.x,i.offset.x),Hx(r.y,i.offset.y)),r}const k2e=({current:t})=>t?t.ownerDocument.defaultView:null,olt=new WeakMap;class alt{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=us(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rI(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:g,onDragStart:y}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Qst(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kc(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Nd.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const C=A.layout.layoutBox[b];C&&(T=Tc(C)*(parseFloat(T)/100))}}this.originPoint[b]=T}),y&&yi.postRender(()=>y(u,h)),Iz(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:y,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(g&&this.currentDirection===null){this.currentDirection=llt(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),_&&_(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Kc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new v2e(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:k2e(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&yi.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!DR(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Xat(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ux(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Zat(i.layoutBox,n):this.constraints=!1,this.elastic=tlt(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Kc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=elt(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ux(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=slt(r,i.root,this.visualElement.getTransformPagePoint());let o=Jat(i.layout.layoutBox,s);if(n){const a=n(nlt(o));this.hasMutatedConstraints=!!a,a&&(o=b2e(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Kc(u=>{if(!DR(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Iz(this.visualElement,e),r.start(fq(e,r,0,n,this.visualElement,!1))}stopAnimation(){Kc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kc(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Kc(n=>{const{drag:r}=this.getProps();if(!DR(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-$i(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ux(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Kc(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Qat({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kc(o=>{if(!DR(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set($i(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;olt.set(this.visualElement,this);const e=this.visualElement.current,n=ek(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ux(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yi.read(r);const o=MA(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Kc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=jz,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function DR(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function llt(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class clt extends _0{constructor(e){super(e),this.removeGroupControls=_c,this.removeListeners=_c,this.controls=new alt(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_c}unmount(){this.removeGroupControls(),this.removeListeners()}}const qse=t=>(e,n)=>{t&&yi.postRender(()=>t(e,n))};class ult extends _0{constructor(){super(...arguments),this.removePointerDownListener=_c}onPointerDown(e){this.session=new v2e(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k2e(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:qse(e),onStart:qse(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&yi.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=ek(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const j3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kse(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const hS={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(vn.test(t))t=parseFloat(t);else return t;const n=Kse(t,e.target.x),r=Kse(t,e.target.y);return`${n}% ${r}%`}},hlt={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=r0.parse(t);if(i.length>5)return r;const s=r0.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=$i(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class dlt extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Mst(flt),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),j3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||yi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),GH.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function A2e(t){const[e,n]=cwe(),r=Y.useContext(LH);return p.jsx(dlt,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(ywe),isPresent:e,safeToRemove:n})}const flt={borderRadius:{...hS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:hS,borderTopRightRadius:hS,borderBottomLeftRadius:hS,borderBottomRightRadius:hS,boxShadow:hlt};function plt(t,e,n){const r=ga(t)?t:PA(t);return r.start(fq("",r,e,n)),r.animation}function mlt(t){return t instanceof SVGElement&&t.tagName!=="svg"}const glt=(t,e)=>t.depth-e.depth;class ylt{constructor(){this.children=[],this.isDirty=!1}add(e){nq(this.children,e),this.isDirty=!0}remove(e){rq(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(glt),this.isDirty=!1,this.children.forEach(e)}}function vlt(t,e){const n=Ld.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(n0(r),t(s-e))};return yi.read(r,!0),()=>n0(r)}const C2e=["TopLeft","TopRight","BottomLeft","BottomRight"],_lt=C2e.length,Yse=t=>typeof t=="string"?parseFloat(t):t,Xse=t=>typeof t=="number"||vn.test(t);function xlt(t,e,n,r,i,s){i?(t.opacity=$i(0,n.opacity!==void 0?n.opacity:1,wlt(r)),t.opacityExit=$i(e.opacity!==void 0?e.opacity:1,0,blt(r))):s&&(t.opacity=$i(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<_lt;o++){const a=`border${C2e[o]}Radius`;let l=Zse(e,a),c=Zse(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Xse(l)===Xse(c)?(t[a]=Math.max($i(Yse(l),Yse(c),r),0),(Nd.test(c)||Nd.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=$i(e.rotate||0,n.rotate||0,r))}function Zse(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const wlt=I2e(0,.5,qwe),blt=I2e(.5,.95,_c);function I2e(t,e,n){return r=>r<t?0:r>e?1:n(X2(t,e,r))}function Jse(t,e){t.min=e.min,t.max=e.max}function Vc(t,e){Jse(t.x,e.x),Jse(t.y,e.y)}function Qse(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function eoe(t,e,n,r,i){return t-=e,t=t5(t,1/n,r),i!==void 0&&(t=t5(t,1/i,r)),t}function Elt(t,e=0,n=1,r=.5,i,s=t,o=t){if(Nd.test(e)&&(e=parseFloat(e),e=$i(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=$i(s.min,s.max,r);t===s&&(a-=e),t.min=eoe(t.min,e,n,a,i),t.max=eoe(t.max,e,n,a,i)}function toe(t,e,[n,r,i],s,o){Elt(t,e[n],e[r],e[i],e.scale,s,o)}const Slt=["x","scaleX","originX"],Tlt=["y","scaleY","originY"];function noe(t,e,n,r){toe(t.x,e,Slt,n?n.x:void 0,r?r.x:void 0),toe(t.y,e,Tlt,n?n.y:void 0,r?r.y:void 0)}function roe(t){return t.translate===0&&t.scale===1}function P2e(t){return roe(t.x)&&roe(t.y)}function ioe(t,e){return t.min===e.min&&t.max===e.max}function klt(t,e){return ioe(t.x,e.x)&&ioe(t.y,e.y)}function soe(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function R2e(t,e){return soe(t.x,e.x)&&soe(t.y,e.y)}function ooe(t){return Tc(t.x)/Tc(t.y)}function aoe(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Alt{constructor(){this.members=[]}add(e){nq(this.members,e),e.scheduleRender()}remove(e){if(rq(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Clt(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Cy={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sT=typeof window<"u"&&window.MotionDebug!==void 0,c$=["","X","Y","Z"],Ilt={visibility:"hidden"},loe=1e3;let Plt=0;function u$(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function M2e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Vwe(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yi,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&M2e(r)}function N2e({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Plt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sT&&(Cy.totalNodes=Cy.resolvedTargetDeltas=Cy.recalculatedProjection=0),this.nodes.forEach(Nlt),this.nodes.forEach(Flt),this.nodes.forEach($lt),this.nodes.forEach(Llt),sT&&window.MotionDebug.record(Cy)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ylt)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iq),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mlt(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=vlt(f,250),j3.hasAnimatedSinceResize&&(j3.hasAnimatedSinceResize=!1,this.nodes.forEach(uoe))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||Blt,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=u.getProps(),A=!this.targetLayout||!R2e(this.targetLayout,y)||g,C=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,C);const I={...JH(_,"layout"),onPlay:b,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else f||uoe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,n0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vlt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M2e(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(coe);return}this.isUpdating||this.nodes.forEach(Dlt),this.isUpdating=!1,this.nodes.forEach(jlt),this.nodes.forEach(Rlt),this.nodes.forEach(Mlt),this.clearAllSnapshots();const a=Ld.now();Ro.delta=Cp(0,1e3/60,a-Ro.timestamp),Ro.timestamp=a,Ro.isProcessing=!0,e$.update.process(Ro),e$.preRender.process(Ro),e$.render.process(Ro),Ro.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,GH.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Olt),this.sharedNodes.forEach(zlt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=us(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!P2e(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Ay(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Wlt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return us();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Hlt))){const{scroll:u}=this.root;u&&(Hx(l.x,u.offset.x),Hx(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=us();if(Vc(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Vc(l,o),Hx(l.x,h.offset.x),Hx(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=us();Vc(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&qx(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ay(u.latestValues)&&qx(l,u.latestValues)}return Ay(this.latestValues)&&qx(l,this.latestValues),l}removeTransform(o){const a=us();Vc(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ay(c.latestValues))continue;Fz(c.latestValues)&&c.updateSnapshot();const u=us(),h=c.measurePageBox();Vc(u,h),noe(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ay(this.latestValues)&&noe(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ro.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ro.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),nk(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Vc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=us(),this.targetWithTransforms=us()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Yat(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vc(this.target,this.layout.layoutBox),S2e(this.target,this.targetDelta)):Vc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=us(),this.relativeTargetOrigin=us(),nk(this.relativeTargetOrigin,this.target,g.target),Vc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sT&&Cy.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Fz(this.parent.latestValues)||E2e(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ro.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Vc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;ilt(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=us());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qse(this.prevProjectionDelta.x,this.projectionDelta.x),Qse(this.prevProjectionDelta.y,this.projectionDelta.y)),tk(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!aoe(this.projectionDelta.x,this.prevProjectionDelta.x)||!aoe(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),sT&&Cy.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wx(),this.projectionDelta=Wx(),this.projectionDeltaWithTransform=Wx()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Wx();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=us(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=g!==y,b=this.getStack(),T=!b||b.members.length<=1,A=!!(_&&!T&&this.options.crossfade===!0&&!this.path.some(Ult));this.animationProgress=0;let C;this.mixTargetDelta=I=>{const R=I/1e3;hoe(h.x,o.x,R),hoe(h.y,o.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nk(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Glt(this.relativeTarget,this.relativeTargetOrigin,f,R),C&&klt(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=us()),Vc(C,this.relativeTarget)),_&&(this.animationValues=u,xlt(u,c,this.latestValues,R,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(n0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yi.update(()=>{j3.hasAnimatedSinceResize=!0,this.currentAnimation=plt(0,loe,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(loe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&L2e(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||us();const h=Tc(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Tc(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Vc(a,l),qx(a,u),tk(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Alt),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&u$("z",o,c,this.animationValues);for(let u=0;u<c$.length;u++)u$(`rotate${c$[u]}`,o,c,this.animationValues),u$(`skew${c$[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ilt;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=O3(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=O3(o?.pointerEvents)||""),this.hasProjected&&!Ay(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Clt(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in XN){if(f[_]===void 0)continue;const{correct:b,applyTo:T}=XN[_],A=c.transform==="none"?f[_]:b(f[_],h);if(T){const C=T.length;for(let I=0;I<C;I++)c[T[I]]=A}else c[_]=A}return this.options.layoutId&&(c.pointerEvents=h===this?O3(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(coe),this.root.sharedNodes.clear()}}}function Rlt(t){t.updateLayout()}function Mlt(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Kc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=Tc(f);f.min=r[h].min,f.max=f.min+g}):L2e(s,n.layoutBox,r)&&Kc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=Tc(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Wx();tk(a,r,n.layoutBox);const l=Wx();o?tk(l,t.applyTransform(i,!0),n.measuredBox):tk(l,r,n.layoutBox);const c=!P2e(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const y=us();nk(y,n.layoutBox,f.layoutBox);const _=us();nk(_,r,g.layoutBox),R2e(y,_)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Nlt(t){sT&&Cy.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Llt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Olt(t){t.clearSnapshot()}function coe(t){t.clearMeasurements()}function Dlt(t){t.isLayoutDirty=!1}function jlt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uoe(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Flt(t){t.resolveTargetDelta()}function $lt(t){t.calcProjection()}function Vlt(t){t.resetSkewAndRotation()}function zlt(t){t.removeLeadSnapshot()}function hoe(t,e,n){t.translate=$i(e.translate,0,n),t.scale=$i(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function doe(t,e,n,r){t.min=$i(e.min,n.min,r),t.max=$i(e.max,n.max,r)}function Glt(t,e,n,r){doe(t.x,e.x,n.x,r),doe(t.y,e.y,n.y,r)}function Ult(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Blt={duration:.45,ease:[.4,0,.1,1]},foe=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),poe=foe("applewebkit/")&&!foe("chrome/")?Math.round:_c;function moe(t){t.min=poe(t.min),t.max=poe(t.max)}function Wlt(t){moe(t.x),moe(t.y)}function L2e(t,e,n){return t==="position"||t==="preserve-aspect"&&!Kat(ooe(e),ooe(n),.2)}function Hlt(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const qlt=N2e({attachResizeListener:(t,e)=>MA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h$={current:void 0},O2e=N2e({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!h$.current){const t=new qlt({});t.mount(window),t.setOptions({layoutScroll:!0}),h$.current=t}return h$.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Klt={pan:{Feature:ult},drag:{Feature:clt,ProjectionNode:O2e,MeasureLayout:A2e}};function goe(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&yi.postRender(()=>s(e,rI(e)))}class Ylt extends _0{mount(){const{current:e}=this.node;e&&(this.unmount=Kst(e,n=>(goe(this.node,n,"Start"),r=>goe(this.node,r,"End"))))}unmount(){}}class Xlt extends _0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nI(MA(this.node.current,"focus",()=>this.onFocus()),MA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yoe(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&yi.postRender(()=>s(e,rI(e)))}class Zlt extends _0{mount(){const{current:e}=this.node;e&&(this.unmount=Jst(e,n=>(yoe(this.node,n,"Start"),(r,{success:i})=>yoe(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vz=new WeakMap,d$=new WeakMap,Jlt=t=>{const e=Vz.get(t.target);e&&e(t)},Qlt=t=>{t.forEach(Jlt)};function ect({root:t,...e}){const n=t||document;d$.has(n)||d$.set(n,{});const r=d$.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Qlt,{root:t,...e})),r[i]}function tct(t,e,n){const r=ect(e);return Vz.set(t,n),r.observe(t),()=>{Vz.delete(t),r.unobserve(t)}}const nct={some:0,all:1};class rct extends _0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:nct[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return tct(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ict(e,n))&&this.startObserver()}unmount(){}}function ict({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const sct={inView:{Feature:rct},tap:{Feature:Zlt},focus:{Feature:Xlt},hover:{Feature:Ylt}},oct={layout:{ProjectionNode:O2e,MeasureLayout:A2e}},zz={current:null},D2e={current:!1};function act(){if(D2e.current=!0,!!jH)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zz.current=t.matches;t.addListener(e),e()}else zz.current=!1}const lct=[...a2e,na,r0],cct=t=>lct.find(o2e(t)),voe=new WeakMap;function uct(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ga(i))t.addValue(r,i);else if(ga(s))t.addValue(r,PA(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,PA(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const _oe=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class hct{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uq,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Ld.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,yi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=VO(n),this.isVariantNode=mwe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const y=f[g];l[g]!==void 0&&ga(y)&&y.set(l[g],!1)}}mount(e){this.current=e,voe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),D2e.current||act(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zz.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){voe.delete(this.current),this.projection&&this.projection.unmount(),n0(this.notifyUpdate),n0(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kv.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&yi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Z2){const n=Z2[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):us()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<_oe.length;r++){const i=_oe[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=uct(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=PA(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(i2e(i)||Ywe(i))?i=parseFloat(i):!cct(i)&&r0.test(n)&&(i=t2e(e,n)),this.setBaseTarget(e,ga(i)?i.get():i)),ga(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=BH(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ga(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iq),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class j2e extends hct{constructor(){super(...arguments),this.KeyframeResolver=l2e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ga(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function dct(t){return window.getComputedStyle(t)}class fct extends j2e{constructor(){super(...arguments),this.type="html",this.renderInstance=Swe}readValueFromInstance(e,n){if(kv.has(n)){const r=cq(n);return r&&r.default||0}else{const r=dct(e),i=(wwe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return T2e(e,n)}build(e,n,r){qH(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ZH(e,n,r)}}class pct extends j2e{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=us}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kv.has(n)){const r=cq(n);return r&&r.default||0}return n=Twe.has(n)?n:zH(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Cwe(e,n,r)}build(e,n,r){KH(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){kwe(e,n,r,i)}mount(e){this.isSVGTag=XH(e.tagName),super.mount(e)}}const mct=(t,e)=>UH(t)?new pct(e):new fct(e,{allowProjection:t!==Y.Fragment}),gct=zst({...$at,...sct,...Klt,...oct},mct),yt=nst(gct);const yct=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vct=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),xoe=t=>{const e=vct(t);return e.charAt(0).toUpperCase()+e.slice(1)},F2e=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),_ct=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var xct={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wct=Y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>Y.createElement("svg",{ref:l,...xct,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:F2e("lucide",i),...!s&&!_ct(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>Y.createElement(c,u)),...Array.isArray(s)?s:[s]]));const it=(t,e)=>{const n=Y.forwardRef(({className:r,...i},s)=>Y.createElement(wct,{ref:s,iconNode:e,className:F2e(`lucide-${yct(xoe(t))}`,`lucide-${t}`,r),...i}));return n.displayName=xoe(t),n};const bct=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],Ect=it("archive-restore",bct);const Sct=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],$2e=it("archive",Sct);const Tct=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kct=it("ban",Tct);const Act=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],V2e=it("book-open",Act);const Cct=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],Ict=it("bookmark",Cct);const Pct=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],z2e=it("bug",Pct);const Rct=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pq=it("calendar",Rct);const Mct=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],UO=it("camera",Mct);const Nct=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],G2e=it("chart-column",Nct);const Lct=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ip=it("check",Lct);const Oct=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fb=it("chevron-down",Oct);const Dct=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],U2e=it("chevron-left",Dct);const jct=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rh=it("chevron-right",jct);const Fct=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],BO=it("chevron-up",Fct);const $ct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],B2e=it("circle-alert",$ct);const Vct=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],zct=it("circle-check-big",Vct);const Gct=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],n5=it("clock",Gct);const Uct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]],Bct=it("cloud-fog",Uct);const Wct=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Hct=it("cloud-lightning",Wct);const qct=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Kct=it("cloud-off",qct);const Yct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],mq=it("cloud-rain",Yct);const Xct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Zct=it("cloud-snow",Xct);const Jct=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Th=it("cloud",Jct);const Qct=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],eut=it("code",Qct);const tut=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gq=it("compass",tut);const nut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],r5=it("crosshair",nut);const rut=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],NA=it("download",rut);const iut=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],sut=it("droplets",iut);const out=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Og=it("external-link",out);const aut=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],i5=it("eye-off",aut);const lut=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LA=it("eye",lut);const cut=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],woe=it("file-image",cut);const uut=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yq=it("file-text",uut);const hut=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],dut=it("flame",hut);const fut=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],boe=it("flower-2",fut);const put=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],mut=it("folder-open",put);const gut=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],yut=it("folder-plus",gut);const vut=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],_ut=it("folder",vut);const xut=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vq=it("funnel",xut);const wut=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],but=it("gauge",wut);const Eut=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Sut=it("gem",Eut);const Tut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],kut=it("globe",Tut);const Aut=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],W2e=it("grid-3x3",Aut);const Cut=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],H2e=it("grip-horizontal",Cut);const Iut=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Put=it("image-plus",Iut);const Rut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_q=it("info",Rut);const Mut=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],q2e=it("landmark",Mut);const Nut=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],xc=it("layers",Nut);const Lut=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],K2e=it("list",Lut);const Out=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],iI=it("loader-circle",Out);const Dut=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jut=it("locate-fixed",Dut);const Fut=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Gz=it("lock",Fut);const $ut=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xq=it("log-out",$ut);const Vut=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],$o=it("map-pin",Vut);const zut=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Aw=it("map",zut);const Gut=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],s5=it("menu",Gut);const Uut=[["path",{d:"M5 12h14",key:"1ays0h"}]],Y2e=it("minus",Uut);const But=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],Q2=it("mountain",But);const Wut=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Hut=it("mouse-pointer",Wut);const qut=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Kut=it("move",qut);const Yut=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ih=it("navigation",Yut);const Xut=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],X2e=it("pause",Xut);const Zut=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Eoe=it("pen-line",Zut);const Jut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qut=it("pen",Jut);const eht=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wd=it("pencil",eht);const tht=[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]],nht=it("pentagon",tht);const rht=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],Z2e=it("person-standing",rht);const iht=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],J2e=it("play",iht);const sht=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kc=it("plus",sht);const oht=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],OA=it("printer",oht);const aht=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Q2e=it("refresh-cw",aht);const lht=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ebe=it("rotate-ccw",lht);const cht=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],uht=it("rotate-cw",cht);const hht=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],o5=it("route",hht);const dht=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Od=it("ruler",dht);const fht=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wq=it("save",fht);const pht=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],mht=it("scale",pht);const ght=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nv=it("search",ght);const yht=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],a5=it("settings",yht);const vht=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],_ht=it("settings-2",vht);const xht=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],wht=it("share-2",xht);const bht=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Eht=it("shield",bht);const Sht=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],tbe=it("sliders-horizontal",Sht);const Tht=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],kht=it("sliders-vertical",Tht);const Aht=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Cht=it("smartphone",Aht);const Iht=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],Pht=it("spline",Iht);const Rht=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Mht=it("square",Rht);const Nht=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Soe=it("star",Nht);const Lht=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Oht=it("sun",Lht);const Dht=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],jht=it("tag",Dht);const Fht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],$ht=it("target",Fht);const Vht=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],zht=it("timer",Vht);const Ght=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ah=it("trash-2",Ght);const Uht=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Bht=it("tree-palm",Uht);const Wht=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Hht=it("trending-down",Wht);const qht=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Kht=it("trending-up",qht);const Yht=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],bq=it("type",Yht);const Xht=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sI=it("upload",Xht);const Zht=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Eq=it("user",Zht);const Jht=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Qht=it("volume-2",Jht);const edt=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],tdt=it("waves",edt);const ndt=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],rdt=it("wifi-off",ndt);const idt=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Toe=it("wind",idt);const sdt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qr=it("x",sdt);const odt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],adt=it("zoom-in",odt);function ldt(){const{tracking:t,startTracking:e,stopTracking:n,updatePosition:r,setWatchId:i}=Is(),s=Y.useCallback(a=>{r(a)},[r]),o=Y.useCallback(a=>{console.error("GPS error:",a),alert(`GPS fout: ${a.message}`),n()},[n]);return Y.useEffect(()=>{if(!t)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),n();return}const a=navigator.geolocation.watchPosition(s,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(a),()=>{navigator.geolocation.clearWatch(a)}},[t,s,o,i,n]),{tracking:t,start:e,stop:n,toggle:()=>t?n():e()}}async function cdt(){const t=DeviceOrientationEvent;if(typeof t.requestPermission=="function")try{return await t.requestPermission()==="granted"}catch{return!1}return!0}function udt(){const{tracking:t,start:e,stop:n}=ldt(),r=Is(a=>a.navigationMode),i=Is(a=>a.setNavigationMode),s=t&&r==="headingUp",o=async()=>{t?r==="free"?i("headingUp"):n():(await cdt(),e(),i("free"))};return p.jsx(yt.button,{className:`
        fixed bottom-2 right-[104px] z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${s?"bg-gradient-to-br from-green-400 to-green-600 text-white shadow-lg shadow-green-500/30":t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{scale:[1,1.02,1]}:{},transition:t?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":s?"Rijmodus actief (kaart draait mee)":t?"GPS actief - klik voor rijmodus":"GPS starten",title:s?"Rijmodus actief - klik om GPS te stoppen":t?"GPS actief - klik voor rijmodus":"GPS starten",children:s?p.jsx(ih,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}):p.jsx(jut,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})}const hdt="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`),koe=new xn({image:new ys({radius:7,fill:new jn({color:"#4285F4"}),stroke:new Mn({color:"white",width:2.5})})});function ddt(){const t=li(y=>y.map),e=Is(y=>y.position),n=Is(y=>y.accuracy),r=Is(y=>y.tracking),i=Is(y=>y.smoothHeading),s=Is(y=>y.navigationMode),o=an(y=>y.showAccuracyCircle),a=Is(y=>y.firstFix),l=Is(y=>y.resetFirstFix),c=Is(y=>y.config.centerOnUser),u=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null),g=Y.useMemo(()=>y=>new xn({image:new oC({src:hdt,scale:.9,rotation:y,rotateWithView:!0,anchor:[.5,.5]})}),[]);return Y.useEffect(()=>{if(!t||!e)return;const y=Ni([e.lng,e.lat]);return u.current=new yr({geometry:new ki(y)}),u.current.setStyle(r?g(0):koe),h.current=new yr({geometry:new ki(y)}),f.current=new Ol({source:new Ll({features:[h.current,u.current]}),zIndex:1e3}),t.addLayer(f.current),()=>{f.current&&t&&t.removeLayer(f.current)}},[t,!!e,g]),Y.useEffect(()=>{if(u.current)if(r){const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))}else u.current.setStyle(koe)},[r,g,i]),Y.useEffect(()=>{if(!t||!e||!u.current||!h.current)return;const y=Ni([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(y),h.current.getGeometry()?.setCoordinates(y),r&&o&&n){const _=t.getView().getResolution()||1,b=Math.min(n/_,80);h.current.setStyle(new xn({image:new ys({radius:b,fill:new jn({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new xn({}));if(a&&r){t.getView().setCenter(y),t.getView().setZoom(17),l();return}r&&c&&!a&&t.getView().animate({center:y,duration:150})},[t,r,e,n,a,l,c,o]),Y.useEffect(()=>{if(!u.current||!r)return;const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))},[i,g,r]),Y.useEffect(()=>{if(!(!t||!r)&&s==="headingUp"&&i!==null){const y=-(i*Math.PI)/180,_=t.getView(),b=_.getRotation();let T=y-b;for(;T>Math.PI;)T-=2*Math.PI;for(;T<-Math.PI;)T+=2*Math.PI;Math.abs(T)>.01&&_.animate({rotation:b+T,duration:200})}},[t,r,s,i]),Y.useEffect(()=>{if(t&&s==="free"){const y=t.getView(),_=y.getRotation();Math.abs(_)>.01&&y.animate({rotation:0,duration:300})}},[t,s]),null}function fdt(){const t=gr(o=>o.themesPanelOpen),e=gr(o=>o.toggleThemesPanel),n=li(o=>o.map),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!n)return;const o=n.getView(),a=()=>{const l=o.getRotation();i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[n]);const s=r?"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 112px)":"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)";return p.jsx(yt.button,{className:`
        fixed right-2 z-[800]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,style:{top:s},animate:{top:s},transition:{duration:.2},onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":t?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:p.jsx(xc,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})}function pdt(){return p.jsx(fdt,{})}const jR=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Ym=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],nu="default-vondsten",Uz={id:nu,name:"Mijn vondsten",color:"#f97316",categories:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()},mdt=t=>t.some(n=>n.id===nu)?t:[{...Uz,createdAt:new Date().toISOString()},...t],Vi=vo()(kh((t,e)=>({layers:[{...Uz}],colorIndex:0,addLayer:(n,r=Ym)=>{const i=crypto.randomUUID(),s=jR[e().colorIndex%jR.length];return t(o=>({layers:[...o.layers,{id:i,name:n,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:o.colorIndex+1})),i},removeLayer:n=>{t(r=>({layers:r.layers.filter(i=>i.id!==n)}))},updateLayer:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)}))},toggleVisibility:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)}))},toggleArchived:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(n,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:[...o.points,i]}:o)}))},removePoint:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,points:s.points.filter(o=>o.id!==r)}:s)}))},updatePoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,...i}:a)}:o)}))},setPointStatus:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,status:i}:a)}:o)}))},addCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,categories:s.categories.filter(o=>o!==r)}:s)}))},addPhotoToPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:[...a.photos||[],i]}:a)}:o)}))},removePhotoFromPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:(a.photos||[]).filter(l=>l.id!==i)}:a)}:o)}))},updatePhotoInPoint:(n,r,i,s)=>{t(o=>({layers:o.layers.map(a=>a.id===n?{...a,points:a.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(c=>c.id===i?{...c,...s}:c)}:l)}:a)}))},exportLayerAsGeoJSON:n=>{const r=e().layers.find(l=>l.id===n);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},importLayerFromGeoJSON:n=>{try{const r=JSON.parse(n);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,o=i.categories||Ym,a=i.color||jR[e().colorIndex%jR.length],l=(r.features||[]).filter(u=>u.geometry?.type==="Point").map(u=>({id:u.properties?.id||crypto.randomUUID(),name:u.properties?.name||"Naamloos",category:u.properties?.category||"Overig",notes:u.properties?.notes||"",url:u.properties?.url,status:u.properties?.status||"todo",sourceLayer:u.properties?.sourceLayer,sourceId:u.properties?.sourceId,photos:u.properties?.photos,coordinates:u.geometry.coordinates,createdAt:u.properties?.createdAt||new Date().toISOString()})),c=crypto.randomUUID();return t(u=>({layers:[...u.layers,{id:c,name:s,color:a,categories:o,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:u.colorIndex+1})),{success:!0,layerId:c}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:n=>e().layers.find(r=>r.id===n),getActiveLayerCount:()=>e().layers.filter(n=>!n.archived).length,getArchivedLayerCount:()=>e().layers.filter(n=>n.archived).length,clearAll:()=>{t(n=>({layers:n.layers.map(r=>r.id===nu?{...r,points:[]}:r).filter(r=>r.id===nu),colorIndex:0}))}}),{name:"detectorapp-custom-point-layers",version:3,onRehydrateStorage:()=>t=>{t&&(t.layers.some(n=>n.id===nu)||(t.layers=[{...Uz,createdAt:new Date().toISOString()},...t.layers]))},migrate:(t,e)=>{const n=t;return e<2?{...n,layers:mdt(n.layers||[])}:e<3?{...n,layers:(n.layers||[]).map(r=>r.id===nu?{...r,name:"Mijn vondsten"}:r)}:n}}));function cs({title:t,children:e,defaultExpanded:n=!0,layerNames:r}){const[i,s]=Y.useState(n),o=Ws(b=>b.visible),a=Ws(b=>b.setLayerVisibility),l=EB(b=>b.isLayerUnlocked),c=b=>{const T=Uy[b],A=T?.tier??"free",C=T?.regions??["nl"];return l(b,A,C)},u=r?.filter(b=>c(b))||[],h=u.filter(b=>o[b]).length,f=u.length,g=f>0&&h===f,y=h>0&&h<f,_=b=>{if(b.stopPropagation(),!r||u.length===0)return;const T=!g;u.forEach(A=>{a(A,T)})};return p.jsxs("div",{className:"mb-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[p.jsxs("button",{onClick:b=>{b.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[p.jsx(yt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:p.jsx(rh,{size:14})}),i?p.jsx(mut,{size:16,className:"text-blue-500"}):p.jsx(_ut,{size:16,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:t}),h>0&&p.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:h})]}),r&&r.length>0&&p.jsx("button",{onClick:_,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:g?"#3b82f6":y?"#93c5fd":"white",border:g?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(g||y)&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),p.jsx(Wn,{initial:!1,children:i&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function Je({name:t,type:e,hasOverlay:n,displayName:r}){const i=Ws(I=>I.visible[t]),s=Ws(I=>I.visible["Labels Overlay"]),o=Ws(I=>I.loadingState[t]),a=Ws(I=>I.toggleLayer),l=Ws(I=>I.setLayerVisibility),c=EB(I=>I.isLayerUnlocked),u=o==="loading",h=o==="error",f=Uy[t],g=f?.tier??"free",y=f?.regions??["nl"],b=!c(t,g,y),T=I=>{I.stopPropagation(),!(u||b)&&(e==="overlay"?a(t):["CartoDB (licht)","OpenStreetMap","Luchtfoto","Satelliet (wereld)","TMK 1850","Bonnebladen 1900"].forEach(V=>{l(V,V===t)}))},A=I=>{I.stopPropagation(),l("Labels Overlay",!s)},C=i??!1;return p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("button",{onClick:T,disabled:u||b,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${b?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":C?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:b?"Premium laag - upgrade om te ontgrendelen":void 0,children:[p.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":b?"text-gray-400":"text-gray-600"}`,children:[r||t,h&&p.jsx(B2e,{size:12,className:"text-red-500"}),b&&p.jsx(Gz,{size:12,className:"text-amber-500"})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:b?"#e5e7eb":u?"#93c5fd":C?"#3b82f6":"white",border:b?"2px solid #d1d5db":u?"2px solid #93c5fd":C?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:b?p.jsx(Gz,{size:10,strokeWidth:3,className:"text-gray-400"}):u?p.jsx(iI,{size:10,strokeWidth:3,className:"animate-spin"}):C?p.jsx(Ip,{size:12,strokeWidth:3}):null})]}),n&&C&&p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${s?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:s?"Labels verbergen":"Labels tonen",children:p.jsx(jht,{size:12})})]})}const gdt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#6b7280"];function nbe({layer:t,compact:e=!1}){const{toggleVisibility:n,removeLayer:r,updateLayer:i,setColor:s}=SC(),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(t.name),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null),b=t.features.features.length,T=[...new Set(t.features.features.map(P=>P.geometry?.type).filter(Boolean))];Y.useEffect(()=>{l&&y.current&&(y.current.focus(),y.current.select())},[l]),Y.useEffect(()=>{const P=N=>{_.current&&!_.current.contains(N.target)&&g(!1)};if(f)return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[f]);const A=()=>{o?r(t.id):(a(!0),setTimeout(()=>a(!1),3e3))},C=()=>{const P=u.trim();P&&P!==t.name&&i(t.id,{name:P}),c(!1)},I=()=>{h(t.name),c(!1)},R=P=>{P.key==="Enter"?C():P.key==="Escape"&&I()},V=P=>{s(t.id,P),g(!1)};return e?p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 hover:bg-blue-50 transition-colors rounded",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.color}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("span",{className:"text-gray-700 truncate flex-1 cursor-pointer",style:{fontSize:"0.9em"},onClick:()=>n(t.id),children:t.name}),p.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0",children:b})]}):p.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsxs("div",{className:"relative",ref:_,children:[p.jsx("button",{onClick:()=>g(!f),className:"w-5 h-5 rounded border-2 border-white shadow-sm flex-shrink-0 hover:scale-110 transition-transform",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),f&&p.jsx("div",{className:"absolute top-6 left-0 z-50 bg-white rounded-lg shadow-lg border p-2 grid grid-cols-3 gap-1",children:gdt.map(P=>p.jsx("button",{onClick:()=>V(P),className:`w-6 h-6 rounded border-2 transition-transform hover:scale-110 ${P===t.color?"border-gray-800 scale-110":"border-white"}`,style:{backgroundColor:P},title:P},P))})]}),p.jsx("div",{className:"flex-1 min-w-0",children:l?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("input",{ref:y,type:"text",value:u,onChange:P=>h(P.target.value),onKeyDown:R,className:"flex-1 text-sm px-1 py-0.5 border rounded min-w-0"}),p.jsx("button",{onClick:C,className:"p-0.5 text-green-600 hover:bg-green-50 rounded",title:"Opslaan",children:p.jsx(Ip,{size:14})}),p.jsx("button",{onClick:I,className:"p-0.5 text-gray-400 hover:bg-gray-100 rounded",title:"Annuleren",children:p.jsx(Qr,{size:14})})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.name}),p.jsx("button",{onClick:()=>c(!0),className:"p-0.5 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Naam wijzigen",children:p.jsx(Wd,{size:12})})]}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[p.jsxs("span",{children:[b," ",b===1?"feature":"features"]}),T.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"mx-0.5",children:""}),p.jsx("span",{children:T.join(", ")})]})]})]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.visible?t.color:"#9ca3af"}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${o?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:o?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})}const rk="commercial",ydt={commercial:["Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Recreatie"],personal:["Steentijd & Prehistorie","Paleokaarten","Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Provinciale Thema's","Fossielen, Mineralen & Goud","Recreatie"]},vdt={commercial:["Specials (3D)"],personal:["Specials (3D)"]};function ql(t){return ydt[rk].includes(t)}function _dt(t){return vdt[rk].includes(t)}const xdt=[{name:"Rapa Nui - Moai Productie",url:"https://arcg.is/qu59O1",desc:"Paaseiland steengroeve in 3D"},{name:"Digital Giza - Piramides",url:"http://giza.fas.harvard.edu/giza3d/",desc:"Harvard 3D reconstructie"},{name:"Stonehenge 360",url:"https://www.english-heritage.org.uk/visit/places/stonehenge/history-and-stories/stonehenge360/",desc:"English Heritage virtuele tour"},{name:"Pompeii 3D Explorer",url:"https://www.cyark.org/projects/pompeii/3D-Explorer",desc:"CyArk LiDAR scans"},{name:"Virtual Angkor Wat",url:"https://www.virtualangkor.com/",desc:"3D reconstructie 1300 n.Chr."},{name:"Petra Virtuele Tour",url:"https://www.zamaniproject.org/site-jordan-petra.html",desc:"Zamani Project 3D"}],wdt=[{name:"CyArk (200+ sites)",url:"https://www.cyark.org/projects/",desc:"Wereldwijd erfgoed archief"},{name:"Google Open Heritage",url:"https://artsandculture.google.com/project/openheritage",desc:"26+ UNESCO sites in 3D"}];function bdt(){const{themesPanelOpen:t,toggleThemesPanel:e,toggleSettingsPanel:n}=gr(),{layers:r,toggleVisibility:i}=Vi(),s=SC(y=>y.layers),o=Y.useRef(null),a=an(y=>y.layerPanelFontScale),l=an(y=>y.setLayerPanelFontScale),c=an(y=>y.showFontSliders),u=an(y=>y.showCustomPointLayers),h=13*a/100,[f,g]=Y.useState(!1);return Y.useEffect(()=>{if(!t)return;const y=b=>{o.current&&!o.current.contains(b.target)&&e()},_=setTimeout(()=>{document.addEventListener("click",y)},100);return()=>{clearTimeout(_),document.removeEventListener("click",y)}},[t,e]),p.jsx(Wn,{children:t&&p.jsxs(yt.div,{ref:o,className:"fixed right-[56px] z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-100px)] flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)"},initial:{opacity:0,x:50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-blue-500",style:{fontSize:`${h}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"}),c&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:a,onInput:y=>{l(parseInt(y.target.value))},onChange:y=>l(parseInt(y.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]})]}),p.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${h}px`},children:[u&&r.filter(y=>!y.archived).length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:p.jsx("span",{className:"text-orange-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn lagen"})}),r.filter(y=>!y.archived).map(y=>p.jsxs("button",{onClick:_=>{_.stopPropagation(),i(y.id)},className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${y.visible?"bg-orange-50 hover:bg-orange-100":"bg-transparent hover:bg-orange-50"}`,style:{fontSize:"inherit"},children:[p.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[y.name,p.jsxs("span",{className:"text-xs text-gray-400",children:["(",y.points.length,")"]})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:y.visible?"#f97316":"white",border:y.visible?"2px solid #f97316":"2px solid #fb923c",color:"white"},children:y.visible&&p.jsx(Ip,{size:12,strokeWidth:3})})]},y.id))]}),s.length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:[p.jsx(sI,{size:12,className:"text-cyan-600"}),p.jsx("span",{className:"text-cyan-600 font-medium",style:{fontSize:"0.9em"},children:"Gemporteerde lagen"})]}),s.map(y=>p.jsx(nbe,{layer:y,compact:!0},y.id)),p.jsx("button",{onClick:()=>{e(),n()},className:"w-full text-left py-1 pl-3 text-xs text-cyan-500 hover:text-cyan-700 hover:bg-cyan-50 transition-colors",children:"+ Laag importeren..."})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),p.jsxs("div",{className:"space-y-0",children:[p.jsx(Je,{name:"CartoDB (licht)",type:"base"}),p.jsx(Je,{name:"OpenStreetMap",type:"base"}),p.jsx(Je,{name:"Luchtfoto",type:"base",hasOverlay:!0,displayName:"Luchtfoto (NL)"}),p.jsx(Je,{name:"Satelliet (wereld)",type:"base",hasOverlay:!0}),p.jsx(Je,{name:"TMK 1850",type:"base",hasOverlay:!0}),p.jsx(Je,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),ql("Steentijd & Prehistorie")&&p.jsxs(cs,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","FAMKE IJzertijd"],children:[p.jsx(Je,{name:"Hunebedden",type:"overlay"}),p.jsx(Je,{name:"Grafheuvels",type:"overlay"}),p.jsx(Je,{name:"Terpen",type:"overlay"}),p.jsx(Je,{name:"FAMKE Steentijd",type:"overlay"}),p.jsx(Je,{name:"FAMKE IJzertijd",type:"overlay"})]}),ql("Paleokaarten")&&p.jsxs(cs,{title:"Paleokaarten",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[p.jsx(Je,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),p.jsx(Je,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]}),ql("Archeologische lagen")&&p.jsxs(cs,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Archeo Onderzoeken","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten"],children:[p.jsx(Je,{name:"AMK Monumenten",type:"overlay"}),p.jsxs(cs,{title:"Per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[p.jsx(Je,{name:"AMK Romeins",type:"overlay"}),p.jsx(Je,{name:"AMK Steentijd",type:"overlay"}),p.jsx(Je,{name:"AMK Vroege ME",type:"overlay"}),p.jsx(Je,{name:"AMK Late ME",type:"overlay"}),p.jsx(Je,{name:"AMK Overig",type:"overlay"})]}),p.jsx(Je,{name:"Archeo Onderzoeken",type:"overlay"}),p.jsxs(cs,{title:"Romeinse tijd",defaultExpanded:!1,layerNames:["Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten"],children:[p.jsx(Je,{name:"Romeinse wegen (regio)",type:"overlay"}),p.jsx(Je,{name:"Romeinse wegen (Wereld)",type:"overlay"}),p.jsx(Je,{name:"Romeinse Forten",type:"overlay"})]})]}),ql("Archeologische verwachtingen")&&p.jsxs(cs,{title:"Archeologische verwachtingen",defaultExpanded:!1,layerNames:["Kansenkaart","IKAW","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[p.jsx(Je,{name:"Kansenkaart",type:"overlay"}),p.jsx(Je,{name:"IKAW",type:"overlay"}),p.jsx(Je,{name:"UIKAV Punten",type:"overlay"}),p.jsx(Je,{name:"UIKAV Vlakken",type:"overlay"}),p.jsx(Je,{name:"UIKAV Expert",type:"overlay"}),p.jsx(Je,{name:"UIKAV Buffer",type:"overlay"}),p.jsx(Je,{name:"UIKAV Indeling",type:"overlay"})]}),ql("Erfgoed & Monumenten")&&p.jsxs(cs,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[p.jsx(Je,{name:"Rijksmonumenten",type:"overlay"}),p.jsx(Je,{name:"Werelderfgoed",type:"overlay"}),p.jsx(Je,{name:"Religieus Erfgoed",type:"overlay"}),p.jsx(Je,{name:"Kastelen",type:"overlay"}),p.jsx(Je,{name:"Runes",type:"overlay"})]}),ql("WOII & Militair")&&p.jsxs(cs,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[p.jsx(Je,{name:"WWII Bunkers",type:"overlay"}),p.jsx(Je,{name:"Slagvelden",type:"overlay"}),p.jsx(Je,{name:"Militaire Vliegvelden",type:"overlay"}),p.jsx(Je,{name:"Verdedigingslinies",type:"overlay"}),p.jsx(Je,{name:"Militaire Objecten",type:"overlay"}),p.jsx(Je,{name:"Inundatiegebieden",type:"overlay"})]}),ql("Hillshade & LiDAR")&&p.jsxs(cs,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN4 Hillshade Kleur","AHN 0.5m"],children:[p.jsx(Je,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),p.jsx(Je,{name:"AHN4 Hillshade NL",type:"overlay"}),p.jsx(Je,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),p.jsx(Je,{name:"AHN4 Hillshade Kleur",type:"overlay"}),p.jsx(Je,{name:"AHN 0.5m",type:"overlay"})]}),ql("Terrein & Bodem")&&p.jsxs(cs,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Geomorfologie","Bodemkaart","Essen"],children:[rk==="personal",p.jsx(Je,{name:"Geomorfologie",type:"overlay"}),p.jsx(Je,{name:"Bodemkaart",type:"overlay"}),p.jsx(Je,{name:"Essen",type:"overlay"})]}),ql("Percelen")&&p.jsxs(cs,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[p.jsx(Je,{name:"Gewaspercelen",type:"overlay"}),p.jsx(Je,{name:"Kadastrale Grenzen",type:"overlay"})]}),ql("Provinciale Thema's")&&p.jsxs(cs,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[p.jsxs(cs,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[p.jsx(Je,{name:"Scheepswrakken",type:"overlay"}),p.jsx(Je,{name:"Woonheuvels ZH",type:"overlay"}),p.jsx(Je,{name:"Windmolens",type:"overlay"}),p.jsx(Je,{name:"Erfgoedlijnen",type:"overlay"}),p.jsx(Je,{name:"Oude Kernen",type:"overlay"})]}),p.jsxs(cs,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[p.jsx(Je,{name:"Relictenkaart Punten",type:"overlay"}),p.jsx(Je,{name:"Relictenkaart Lijnen",type:"overlay"}),p.jsx(Je,{name:"Relictenkaart Vlakken",type:"overlay"})]}),p.jsx(cs,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:p.jsx(Je,{name:"Verdronken Dorpen",type:"overlay"})})]}),ql("Fossielen, Mineralen & Goud")&&p.jsxs(cs,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[p.jsx(Je,{name:"Fossiel Hotspots",type:"overlay"}),p.jsx(Je,{name:"Mineralen Hotspots",type:"overlay"}),p.jsx(Je,{name:"Goudrivieren",type:"overlay"}),p.jsx(Je,{name:"Fossielen Nederland",type:"overlay"}),p.jsx(Je,{name:"Fossielen Belgi",type:"overlay"}),p.jsx(Je,{name:"Fossielen Duitsland",type:"overlay"}),p.jsx(Je,{name:"Fossielen Frankrijk",type:"overlay"})]}),p.jsxs(cs,{title:"Belgi",defaultExpanded:!1,layerNames:["Monumenten BE","Archeo Zones BE","Arch Sites BE","Erfgoed Landschap BE","CAI Elementen"],children:[p.jsx(Je,{name:"Monumenten BE",type:"overlay"}),p.jsx(Je,{name:"Archeo Zones BE",type:"overlay"}),p.jsx(Je,{name:"Arch Sites BE",type:"overlay"}),p.jsx(Je,{name:"Erfgoed Landschap BE",type:"overlay"}),p.jsx(Je,{name:"CAI Elementen",type:"overlay"})]}),p.jsxs(cs,{title:"Frankrijk",defaultExpanded:!1,layerNames:["Sites Classs Bretagne","Sites Classs Normandie","Sites Classs Hauts-de-France","Sites Classs Grand Est","Sites Classs le-de-France","Sites Classs Centre-Val de Loire","Sites Classs Bourgogne-FC","Sites Classs Pays de la Loire","Sites Classs Nouvelle-Aquitaine","Sites Classs Auvergne-RA","Sites Classs Occitanie","Sites Classs PACA","Sites Classs Corse","Monumenten IDF","Hist. Gebouwen FR","INRAP Sites FR","Archeo Sites Bretagne","Operaties Bretagne","Archeo Parijs","Sites Patrimoine Occitanie","Sites Patrimoine PACA","Sites Patrimoine Normandie","Maginotlinie"],children:[p.jsxs(cs,{title:"Sites Classs (13 regio's)",defaultExpanded:!1,layerNames:["Sites Classs Bretagne","Sites Classs Normandie","Sites Classs Hauts-de-France","Sites Classs Grand Est","Sites Classs le-de-France","Sites Classs Centre-Val de Loire","Sites Classs Bourgogne-FC","Sites Classs Pays de la Loire","Sites Classs Nouvelle-Aquitaine","Sites Classs Auvergne-RA","Sites Classs Occitanie","Sites Classs PACA","Sites Classs Corse"],children:[p.jsx(Je,{name:"Sites Classs Bretagne",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Normandie",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Pays de la Loire",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Centre-Val de Loire",type:"overlay"}),p.jsx(Je,{name:"Sites Classs le-de-France",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Hauts-de-France",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Grand Est",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Bourgogne-FC",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Nouvelle-Aquitaine",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Auvergne-RA",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Occitanie",type:"overlay"}),p.jsx(Je,{name:"Sites Classs PACA",type:"overlay"}),p.jsx(Je,{name:"Sites Classs Corse",type:"overlay"})]}),p.jsx(Je,{name:"Monumenten IDF",type:"overlay"}),p.jsx(Je,{name:"Hist. Gebouwen FR",type:"overlay"}),p.jsx(Je,{name:"INRAP Sites FR",type:"overlay"}),p.jsx(Je,{name:"Archeo Sites Bretagne",type:"overlay"}),p.jsx(Je,{name:"Operaties Bretagne",type:"overlay"}),p.jsx(Je,{name:"Archeo Parijs",type:"overlay"}),p.jsx(Je,{name:"Sites Patrimoine Occitanie",type:"overlay"}),p.jsx(Je,{name:"Sites Patrimoine PACA",type:"overlay"}),p.jsx(Je,{name:"Sites Patrimoine Normandie",type:"overlay"}),p.jsx(Je,{name:"Maginotlinie",type:"overlay"})]}),ql("Recreatie")&&rk==="commercial"&&p.jsxs(cs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Strandjes"],children:[p.jsx(Je,{name:"Parken",type:"overlay"}),p.jsx(Je,{name:"Speeltuinen",type:"overlay"}),p.jsx(Je,{name:"Strandjes",type:"overlay",displayName:"Recreatie (strand)"})]}),ql("Recreatie")&&rk==="personal"&&p.jsxs(cs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Ruiterpaden","Laarzenpaden","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[p.jsx(Je,{name:"Ruiterpaden",type:"overlay"}),p.jsx(Je,{name:"Laarzenpaden",type:"overlay"}),p.jsx(Je,{name:"Parken",type:"overlay"}),p.jsx(Je,{name:"Speeltuinen",type:"overlay"}),p.jsx(Je,{name:"Musea",type:"overlay"}),p.jsx(Je,{name:"Strandjes",type:"overlay"}),p.jsx(Je,{name:"Kringloopwinkels",type:"overlay"})]}),_dt("Specials (3D)")&&p.jsxs("div",{className:"mb-2",children:[p.jsxs("button",{onClick:y=>{y.stopPropagation(),g(!f)},className:"w-full flex items-center gap-1 py-1 px-1 hover:bg-purple-50 rounded transition-colors border-0 outline-none bg-transparent",children:[f?p.jsx(Fb,{size:14,className:"text-purple-500"}):p.jsx(rh,{size:14,className:"text-purple-500"}),p.jsx(kut,{size:12,className:"text-purple-500"}),p.jsx("span",{className:"text-purple-600 font-medium",style:{fontSize:"0.95em"},children:"Specials (3D)"}),p.jsx(Og,{size:10,className:"text-purple-400 ml-auto"})]}),f&&p.jsxs("div",{className:"mt-1",onClick:y=>y.stopPropagation(),children:[xdt.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Og,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name)),p.jsx("div",{className:"border-t border-gray-200 my-1.5 mx-2"}),wdt.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700 font-medium",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Og,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name))]})]})]})]})]})})}function Edt(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var rv=1,iv=2,Cw=3,Sdt=4,Bz=5,Aoe=6378137,Tdt=6356752314e-3,Coe=.0066943799901413165,ik=484813681109536e-20,at=Math.PI/2,kdt=.16666666666666666,Adt=.04722222222222222,Cdt=.022156084656084655,St=1e-10,Yi=.017453292519943295,Tl=57.29577951308232,Lr=Math.PI/4,DA=Math.PI*2,fs=3.14159265359,jl={};jl.greenwich=0;jl.lisbon=-9.131906111111;jl.paris=2.337229166667;jl.bogota=-74.080916666667;jl.madrid=-3.687938888889;jl.rome=12.452333333333;jl.bern=7.439583333333;jl.jakarta=106.807719444444;jl.ferro=-17.666666666667;jl.brussels=4.367975;jl.stockholm=18.058277777778;jl.athens=23.7163375;jl.oslo=10.722916666667;const Idt={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Ioe=/[\s_\-\/\(\)]/g;function i0(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(Ioe,""),i=-1,s,o;++i<n.length;)if(s=n[i],o=s.toLowerCase().replace(Ioe,""),o===r)return t[s]}function Wz(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Yi},lat_1:function(a){e.lat1=a*Yi},lat_2:function(a){e.lat2=a*Yi},lat_ts:function(a){e.lat_ts=a*Yi},lon_0:function(a){e.long0=a*Yi},lon_1:function(a){e.long1=a*Yi},lon_2:function(a){e.long2=a*Yi},alpha:function(a){e.alpha=parseFloat(a)*Yi},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*Yi},lonc:function(a){e.longc=a*Yi},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=i0(Idt,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Yi},pm:function(a){var l=i0(jl,a);e.from_greenwich=(l||parseFloat(a))*Yi},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in o?(s=o[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class rbe{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(a=>Array.isArray(a)&&a[0]==="ID"),o=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:o}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),o=s?parseInt(s[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:n,direction:r,unit:l,order:o}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,n.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const r=e.find(f=>Array.isArray(f)&&f[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);n.coordinate_system.unit=f}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const s=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(s){const f=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=f:n.datum=f;const g=e.find(y=>Array.isArray(y)&&y[0]==="PRIMEM");g&&g[1]!=="Greenwich"&&(f.prime_meridian={name:g[1],longitude:parseFloat(g[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const o=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");o&&(n.accuracy=parseFloat(o[1]));const a=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");a&&(n.ellipsoid=this.convert(a)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const l=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(l){const f=l.find(g=>Array.isArray(g));n.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(g=>Array.isArray(g));n.target_crs=f?this.convert(f):null}const u=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");u?n.transformation=this.convert(u):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const f=n.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:h});break;default:n.keyword=e[0];break}return n}}class Pdt extends rbe{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class Rdt extends rbe{static convert(e,n={}){super.convert(e,n);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),o=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),o&&(n.usage.area=o[1]),a&&(n.usage.bbox=a.slice(1))}return n}}function Mdt(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Ndt(t){return(Mdt(t)==="2019"?Rdt:Pdt).convert(t)}function Ldt(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var jA=1,ibe=2,sbe=3,l5=4,obe=5,Sq=-1,Odt=/\s/,Ddt=/[A-Za-z]/,jdt=/[A-Za-z84_]/,WO=/[,\]]/,abe=/[\d\.E\-\+]/;function jp(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=jA}jp.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==l5)for(;Odt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case jA:return this.neutral(t);case ibe:return this.keyword(t);case l5:return this.quoted(t);case obe:return this.afterquote(t);case sbe:return this.number(t);case Sq:return}};jp.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=l5;return}if(WO.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};jp.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=jA;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=jA,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Sq);return}};jp.prototype.number=function(t){if(abe.test(t)){this.word+=t;return}if(WO.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};jp.prototype.quoted=function(t){if(t==='"'){this.state=obe;return}this.word+=t};jp.prototype.keyword=function(t){if(jdt.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=jA;return}if(WO.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};jp.prototype.neutral=function(t){if(Ddt.test(t)){this.word=t,this.state=ibe;return}if(t==='"'){this.word="",this.state=l5;return}if(abe.test(t)){this.word=t,this.state=sbe;return}if(WO.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};jp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Sq)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Fdt(t){var e=new jp(t);return e.output()}function f$(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,o){return Kx(o,s),s},r);e&&(t[e]=i)}function Kx(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Kx(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Kx(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Kx(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],f$(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],f$(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Kx(t,e[n]);return f$(e,n,t)}}var $dt=.017453292519943295;function Xu(t){return t*$dt}function lbe(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Xu(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Xu(t.lat0>0?90:-90),delete t.lat1)}function Poe(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Roe(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Moe(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Roe(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Roe(t.ellipsoid.semi_minor_axis))))}function c5(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(c5(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Moe(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Moe(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=Poe(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=Poe(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[s]=o*i.unit.conversion_factor:i.unit==="degree"?e[s]=o*Math.PI/180:e[s]=o});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":c5(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),lbe(e),e)}var Vdt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function zdt(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function cbe(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];Vdt.indexOf(i)!==-1&&Gdt(t[i]),typeof t[i]=="object"&&cbe(t[i])}}function Gdt(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Xu(t.rectified_grid_angle));function a(u){var h=t.to_meter||1;return u*h}var l=function(u){return zdt(t,u)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Xu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Xu],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Xu],["lat0","latitude_of_origin",Xu],["lat0","standard_parallel_1",Xu],["lat1","standard_parallel_1",Xu],["lat2","standard_parallel_2",Xu],["azimuth","Azimuth"],["alpha","azimuth",Xu],["srsCode","name"]];c.forEach(l),lbe(t)}function u5(t){if(typeof t=="object")return c5(t);const e=Ldt(t);var n=Fdt(t);if(e==="WKT2"){const s=Ndt(n);return c5(s)}var r=n[0],i={};return Kx(n,i),cbe(i),i[r]}function Po(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Po[t]=Wz(arguments[1]):Po[t]=u5(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?Po[t]=u5(arguments[1]):(Po[t]=n,n||delete Po[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?Po.apply(e,r):Po(r)});if(typeof t=="string"){if(t in Po)return Po[t]}else"EPSG"in t?Po["EPSG:"+t.EPSG]=t:"ESRI"in t?Po["ESRI:"+t.ESRI]=t:"IAU2000"in t?Po["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Edt(Po);function Udt(t){return typeof t=="string"}function Bdt(t){return t in Po}function Wdt(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var Hdt=["3857","900913","3785","102113"];function qdt(t){var e=i0(t,"authority");if(e){var n=i0(e,"epsg");return n&&Hdt.indexOf(n)>-1}}function Kdt(t){var e=i0(t,"extension");if(e)return i0(e,"proj4")}function Ydt(t){return t[0]==="+"}function Xdt(t){if(Udt(t)){if(Bdt(t))return Po[t];if(Wdt(t)){var e=u5(t);if(qdt(e))return Po["EPSG:3857"];var n=Kdt(e);return n?Wz(n):e}if(Ydt(t))return Wz(t)}else return"projName"in t?t:u5(t)}function Noe(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function Hd(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function oI(t){return t<0?-1:1}function It(t,e){return e||Math.abs(t)<=fs?t:t-oI(t)*DA}function gh(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(at-e))/r}function FA(t,e){for(var n=.5*t,r,i,s=at-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(s),i=at-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Zdt(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Jdt(t){var e=t.x,n=t.y;if(n*Tl>90&&n*Tl<-90&&e*Tl>180&&e*Tl<-180)return null;var r,i;if(Math.abs(Math.abs(n)-at)<=St)return null;if(this.sphere)r=this.x0+this.a*this.k0*It(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Lr+.5*n));else{var s=Math.sin(n),o=gh(this.e,n,s);r=this.x0+this.a*this.k0*It(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=i,t}function Qdt(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=at-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=FA(this.e,s),i===-9999)return null}return r=It(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var eft=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const tft={init:Zdt,forward:Jdt,inverse:Qdt,names:eft};function nft(){}function Loe(t){return t}var ube=["longlat","identity"];const rft={init:nft,forward:Loe,inverse:Loe,names:ube};var ift=[tft,rft],Iy={},Yx=[];function hbe(t,e){var n=Yx.length;return t.names?(Yx[n]=t,t.names.forEach(function(r){Iy[r.toLowerCase()]=n}),this):(console.log(e),!0)}function dbe(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function sft(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Iy[e]<"u"&&Yx[Iy[e]]||(e=dbe(e),e in Iy&&Yx[Iy[e]]))return Yx[Iy[e]]}function oft(){ift.forEach(hbe)}const aft={start:oft,add:hbe,get:sft};var fbe={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const lft=fbe.WGS84;function cft(t,e,n,r){var i=t*t,s=e*e,o=(i-s)/i,a=0;r?(t*=1-o*(kdt+o*(Adt+o*Cdt)),i=t*t,o=0):a=Math.sqrt(o);var l=(i-s)/s;return{es:o,e:a,ep2:l}}function uft(t,e,n,r,i){if(!t){var s=i0(fbe,r);s||(s=lft),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<St)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var F3={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var hft in F3){var p$=F3[hft];p$.datumName&&(F3[p$.datumName]=p$)}function dft(t,e,n,r,i,s,o){var a={};return t===void 0||t==="none"?a.datum_type=Bz:a.datum_type=Sdt,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=rv),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=iv,a.datum_params[3]*=ik,a.datum_params[4]*=ik,a.datum_params[5]*=ik,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Cw,a.grids=o),a.a=n,a.b=r,a.es=i,a.ep2=s,a}var Tq={};function fft(t,e,n){return e instanceof ArrayBuffer?pft(t,e,n):{ready:mft(t,e)}}function pft(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=vft(i),o=_ft(i,s),a=xft(i,o,s,r),l={header:o,subgrids:a};return Tq[t]=l,l}async function mft(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),o=await s.readRasters(),a=o,l=[s.getWidth(),s.getHeight()],c=s.getBoundingBox().map(Ooe),u=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Ooe),h=c[0]+(l[0]-1)*u[0],f=c[3]-(l[1]-1)*u[1],g=a[0],y=a[1],_=[];for(let A=l[1]-1;A>=0;A--)for(let C=l[0]-1;C>=0;C--){var b=A*l[0]+C;_.push([-_g(y[b]),_g(g[b])])}n.push({del:u,lim:l,ll:[-h,f],cvs:_})}var T={header:{nSubgrids:r},subgrids:n};return Tq[t]=T,T}function gft(t){if(t===void 0)return null;var e=t.split(",");return e.map(yft)}function yft(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Tq[t]||null,isNull:!1}}function Ooe(t){return t*Math.PI/180}function _g(t){return t/3600*Math.PI/180}function vft(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function _ft(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Hz(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Hz(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function xft(t,e,n,r){for(var i=176,s=[],o=0;o<e.nSubgrids;o++){var a=bft(t,i,n),l=Eft(t,i,a,n,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[_g(a.lowerLongitude),_g(a.lowerLatitude)],del:[_g(a.longitudeInterval),_g(a.latitudeInterval)],lim:[c,u],count:a.gridNodeCount,cvs:wft(l)});var h=16;r===!1&&(h=8),i+=176+a.gridNodeCount*h}return s}function wft(t){return t.map(function(e){return[_g(e.longitudeShift),_g(e.latitudeShift)]})}function bft(t,e,n){return{name:Hz(t,e+8,e+16).trim(),parent:Hz(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Eft(t,e,n,r,i){var s=e+176,o=16;i===!1&&(o=8);for(var a=[],l=0;l<n.gridNodeCount;l++){var c={latitudeShift:t.getFloat32(s+l*o,r),longitudeShift:t.getFloat32(s+l*o+4,r)};i!==!1&&(c.latitudeAccuracy=t.getFloat32(s+l*o+8,r),c.longitudeAccuracy=t.getFloat32(s+l*o+12,r)),a.push(c)}return a}function mu(t,e){if(!(this instanceof mu))return new mu(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var n=Xdt(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=mu.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=i0(F3,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=uft(n.a,n.b,n.rf,n.ellps,n.sphere),o=cft(s.a,s.b,s.rf,n.R_A),a=gft(n.nadgrids),l=n.datum||dft(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Noe(this,n),Noe(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}mu.projections=aft;mu.projections.start();function Sft(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===rv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===iv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function pbe(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,o,a,l,c;if(i<-at&&i>-1.001*at)i=-at;else if(i>at&&i<1.001*at)i=at;else{if(i<-at)return{x:-1/0,y:-1/0,z:t.z};if(i>at)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,o=n/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-e)+s)*a}}function mbe(t,e,n,r){var i=1e-12,s=i*i,o=30,a,l,c,u,h,f,g,y,_,b,T,A,C,I=t.x,R=t.y,V=t.z?t.z:0,P,N,L;if(a=Math.sqrt(I*I+R*R),l=Math.sqrt(I*I+R*R+V*V),a/n<i){if(P=0,l/n<i)return N=at,L=-r,{x:t.x,y:t.y,z:t.z}}else P=Math.atan2(R,I);c=V/l,u=a/l,h=1/Math.sqrt(1-e*(2-e)*u*u),y=u*(1-e)*h,_=c*h,C=0;do C++,g=n/Math.sqrt(1-e*_*_),L=a*y+V*_-g*(1-e*_*_),f=e*g/(g+L),h=1/Math.sqrt(1-f*(2-f)*u*u),b=u*(1-f)*h,T=c*h,A=T*y-b*_,y=b,_=T;while(A*A>s&&C<o);return N=Math.atan(T/Math.abs(b)),{x:P,y:N,z:L}}function Tft(t,e,n){if(e===rv)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===iv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-a*t.x+o*t.y+t.z)+s}}}function kft(t,e,n){if(e===rv)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===iv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-s)/c;return{x:u+l*h-a*f,y:-l*u+h+o*f,z:a*u-o*h+f}}}function FR(t){return t===rv||t===iv}function Aft(t,e,n){if(Sft(t,e)||t.datum_type===Bz||e.datum_type===Bz)return n;var r=t.a,i=t.es;if(t.datum_type===Cw){var s=Doe(t,!1,n);if(s!==0)return;r=Aoe,i=Coe}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Cw&&(o=Aoe,a=Tdt,l=Coe),i===l&&r===o&&!FR(t.datum_type)&&!FR(e.datum_type))return n;if(n=pbe(n,i,r),FR(t.datum_type)&&(n=Tft(n,t.datum_type,t.datum_params)),FR(e.datum_type)&&(n=kft(n,e.datum_type,e.datum_params)),n=mbe(n,l,o,a),e.datum_type===Cw){var c=Doe(e,!0,n);if(c!==0)return}return n}function Doe(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,g=h.ll[0]-f,y=h.ll[1]-f,_=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,b=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(y>r.y||g>r.x||b<r.y||_<r.x)&&(i=Cft(r,e,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Tl+" "+r.y*Tl+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function Cft(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=It(i.x-Math.PI)+Math.PI;var s=joe(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var o=9,a=1e-12,l,c;do{if(c=joe(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=It(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function joe(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},h=i.x*i.y,f=i.x*(1-i.y),g=(1-i.x)*(1-i.y),y=(1-i.x)*i.y;return s.x=g*a.x+f*l.x+y*u.x+h*c.x,s.y=g*a.y+f*l.y+y*u.y+h*c.y,s}function Foe(t,e,n){var r=n.x,i=n.y,s=n.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(o=r,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=i,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),t.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":n[a]!==void 0&&(c.z=o);break;case"d":n[a]!==void 0&&(c.z=-o);break;default:return null}return c}function gbe(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Ift(t){$oe(t.x),$oe(t.y)}function $oe(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Pft(t,e){return(t.datum.datum_type===rv||t.datum.datum_type===iv||t.datum.datum_type===Cw)&&e.datumCode!=="WGS84"||(e.datum.datum_type===rv||e.datum.datum_type===iv||e.datum.datum_type===Cw)&&t.datumCode!=="WGS84"}function h5(t,e,n,r){var i;Array.isArray(n)?n=gbe(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(Ift(n),t.datum&&e.datum&&Pft(t,e)&&(i=new mu("WGS84"),n=h5(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=Foe(t,!1,n)),t.projName==="longlat")n={x:n.x*Yi,y:n.y*Yi,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Aft(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Tl,y:n.y*Tl,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?Foe(e,!0,n):(n&&!s&&delete n.z,n)}var Voe=mu("WGS84");function m$(t,e,n,r){var i,s,o;return Array.isArray(n)?(i=h5(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=h5(t,e,n,r),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=n[a]}),s)}function $R(t){return t instanceof mu?t:typeof t=="object"&&"oProj"in t?t.oProj:mu(t)}function Rft(t,e,n){var r,i,s=!1,o;return typeof e>"u"?(i=$R(t),r=Voe,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=$R(t),r=Voe,s=!0),r||(r=$R(t)),i||(i=$R(e)),n?m$(r,i,n):(o={forward:function(a,l){return m$(r,i,a,l)},inverse:function(a,l){return m$(i,r,a,l)}},s&&(o.oProj=i),o)}var zoe=6,ybe="AJSAJS",vbe="AFAFAF",Xx=65,il=73,Yc=79,oT=86,aT=90;const Mft={forward:_be,inverse:Nft,toPoint:xbe};function _be(t,e){return e=e||5,Dft(Lft({lat:t[1],lon:t[0]}),e)}function Nft(t){var e=kq(bbe(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function xbe(t){var e=kq(bbe(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function g$(t){return t*(Math.PI/180)}function Goe(t){return 180*(t/Math.PI)}function Lft(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,o,a,l,c,u,h,f,g=g$(e),y=g$(n),_,b;b=Math.floor((n+180)/6)+1,n===180&&(b=60),e>=56&&e<64&&n>=3&&n<12&&(b=32),e>=72&&e<84&&(n>=0&&n<9?b=31:n>=9&&n<21?b=33:n>=21&&n<33?b=35:n>=33&&n<42&&(b=37)),o=(b-1)*6-180+3,_=g$(o),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(g)*Math.sin(g)),c=Math.tan(g)*Math.tan(g),u=a*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(y-_),f=r*((1-i/4-3*i*i/64-5*i*i*i/256)*g-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*g)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*g)-35*i*i*i/3072*Math.sin(6*g));var T=s*l*(h+(1-c+u)*h*h*h/6+(5-18*c+c*c+72*u-58*a)*h*h*h*h*h/120)+5e5,A=s*(f+l*Math.tan(g)*(h*h/2+(5-c+9*u+4*u*u)*h*h*h*h/24+(61-58*c+c*c+600*u-330*a)*h*h*h*h*h*h/720));return e<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(T),zoneNumber:b,zoneLetter:Oft(e)}}function kq(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,h,f,g,y,_,b,T,A,C=n-5e5,I=e;r<"N"&&(I-=1e7),b=(i-1)*6-180+3,l=a/(1-a),_=I/s,T=_/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),A=T+(3*c/2-27*c*c*c/32)*Math.sin(2*T)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*T)+151*c*c*c/96*Math.sin(6*T),u=o/Math.sqrt(1-a*Math.sin(A)*Math.sin(A)),h=Math.tan(A)*Math.tan(A),f=l*Math.cos(A)*Math.cos(A),g=o*(1-a)/Math.pow(1-a*Math.sin(A)*Math.sin(A),1.5),y=C/(u*s);var R=A-u*Math.tan(A)/g*(y*y/2-(5+3*h+10*f-4*f*f-9*l)*y*y*y*y/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*y*y*y*y*y*y/720);R=Goe(R);var V=(y-(1+2*h+f)*y*y*y/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*y*y*y*y*y/120)/Math.cos(A);V=b+Goe(V);var P;if(t.accuracy){var N=kq({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});P={top:N.lat,right:N.lon,bottom:R,left:V}}else P={lat:R,lon:V};return P}function Oft(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Dft(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+jft(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function jft(t,e,n){var r=wbe(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return Fft(i,s,r)}function wbe(t){var e=t%zoe;return e===0&&(e=zoe),e}function Fft(t,e,n){var r=n-1,i=ybe.charCodeAt(r),s=vbe.charCodeAt(r),o=i+t-1,a=s+e,l=!1;o>aT&&(o=o-aT+Xx-1,l=!0),(o===il||i<il&&o>il||(o>il||i<il)&&l)&&o++,(o===Yc||i<Yc&&o>Yc||(o>Yc||i<Yc)&&l)&&(o++,o===il&&o++),o>aT&&(o=o-aT+Xx-1),a>oT?(a=a-oT+Xx-1,l=!0):l=!1,(a===il||s<il&&a>il||(a>il||s<il)&&l)&&a++,(a===Yc||s<Yc&&a>Yc||(a>Yc||s<Yc)&&l)&&(a++,a===il&&a++),a>oT&&(a=a-oT+Xx-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function bbe(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=wbe(o),c=$ft(n.charAt(0),l),u=Vft(n.charAt(1),l);u<zft(a);)u+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,g=0,y=0,_,b,T,A,C;return f>0&&(_=1e5/Math.pow(10,f),b=t.substring(s,s+f),g=parseFloat(b)*_,T=t.substring(s+f),y=parseFloat(T)*_),A=g+c,C=y+u,{easting:A,northing:C,zoneLetter:a,zoneNumber:o,accuracy:_}}function $ft(t,e){for(var n=ybe.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===il&&n++,n===Yc&&n++,n>aT){if(i)throw"Bad character: "+t;n=Xx,i=!0}r+=1e5}return r}function Vft(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=vbe.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===il&&n++,n===Yc&&n++,n>oT){if(i)throw"Bad character: "+t;n=Xx,i=!0}r+=1e5}return r}function zft(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function eb(t,e,n){if(!(this instanceof eb))return new eb(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}eb.fromMGRS=function(t){return new eb(xbe(t))};eb.prototype.toMGRS=function(t){return _be([this.x,this.y],t)};var Gft=1,Uft=.25,Uoe=.046875,Boe=.01953125,Woe=.01068115234375,Bft=.75,Wft=.46875,Hft=.013020833333333334,qft=.007120768229166667,Kft=.3645833333333333,Yft=.005696614583333333,Xft=.3076171875;function Aq(t){var e=[];e[0]=Gft-t*(Uft+t*(Uoe+t*(Boe+t*Woe))),e[1]=t*(Bft-t*(Uoe+t*(Boe+t*Woe)));var n=t*t;return e[2]=n*(Wft-t*(Hft+t*qft)),n*=t,e[3]=n*(Kft-t*Yft),e[4]=n*t*Xft,e}function $b(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var Zft=20;function Cq(t,e,n){for(var r=1/(1-e),i=t,s=Zft;s;--s){var o=Math.sin(i),a=1-e*o*o;if(a=($b(i,o,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<St)return i}return i}function Jft(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Aq(this.es),this.ml0=$b(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Qft(t){var e=t.x,n=t.y,r=It(e-this.long0,this.over),i,s,o,a=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*r,h=Math.pow(u,2),f=this.ep2*Math.pow(l,2),g=Math.pow(f,2),y=Math.abs(l)>St?Math.tan(n):0,_=Math.pow(y,2),b=Math.pow(_,2);i=1-this.es*Math.pow(a,2),u=u/Math.sqrt(i);var T=$b(n,a,l,this.en);s=this.a*(this.k0*u*(1+h/6*(1-_+f+h/20*(5-18*_+b+14*f-58*_*f+h/42*(61+179*b-b*_-479*_)))))+this.x0,o=this.a*(this.k0*(T-this.ml0+a*r*u/2*(1+h/12*(5-_+9*f+4*g+h/30*(61+b-58*_+270*f-330*_*f+h/56*(1385+543*b-b*_-3111*_))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<St)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>St)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=s,t.y=o,t}function ept(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=Cq(e,this.es,this.en),Math.abs(n)<at){var h=Math.sin(n),f=Math.cos(n),g=Math.abs(f)>St?Math.tan(n):0,y=this.ep2*Math.pow(f,2),_=Math.pow(y,2),b=Math.pow(g,2),T=Math.pow(b,2);e=1-this.es*Math.pow(h,2);var A=s*Math.sqrt(e)/this.k0,C=Math.pow(A,2);e=e*g,r=n-e*C/(1-this.es)*.5*(1-C/12*(5+3*b-9*y*b+y-4*_-C/30*(61+90*b-252*y*b+45*T+46*y-C/56*(1385+3633*b+4095*T+1574*T*b)))),i=It(this.long0+A*(1-C/6*(1+2*b+y-C/20*(5+28*b+24*T+8*y*b+6*y-C/42*(61+662*b+1320*T+720*T*b))))/f,this.over)}else r=at*oI(o),i=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,u=Math.cos(c);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&u===0?i=0:i=It(Math.atan2(l,u)+this.long0,this.over)}return t.x=i,t.y=r,t}var tpt=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const $3={init:Jft,forward:Qft,inverse:ept,names:tpt};function Ebe(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function xl(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function npt(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function rpt(t){var e=Math.abs(t);return e=npt(e*(1+e/(xl(1,e)+1))),t<0?-e:e}function Iq(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return e+o*Math.sin(2*e)}function ipt(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return Math.sin(e)*o}function spt(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Sbe(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=Ebe(n),o=spt(n),a=2*i*o,l=-2*r*s,c=t.length-1,u=t[c],h=0,f=0,g=0,y,_;--c>=0;)y=f,_=h,f=u,h=g,u=-y+a*f-l*h+t[c],g=-_+l*f+a*h;return a=r*o,l=i*s,[a*u-l*g,a*g+l*u]}function opt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&($3.init.apply(this),this.forward=$3.forward,this.inverse=$3.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=Iq(this.cbg,this.lat0);this.Zb=-this.Qn*(r+ipt(this.gtu,2*r))}function apt(t){var e=It(t.x-this.long0,this.over),n=t.y;n=Iq(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(s*i,xl(r,i*o)),e=rpt(Math.tan(e));var a=Sbe(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function lpt(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=Sbe(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(Ebe(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),c=Math.cos(e);n=Math.atan2(o*c,xl(l,c*a)),e=Math.atan2(l,c*a),r=It(e+this.long0,this.over),i=Iq(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var cpt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const V3={init:opt,forward:apt,inverse:lpt,names:cpt};function upt(t,e){if(t===void 0){if(t=Math.floor((It(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var hpt="etmerc";function dpt(){var t=upt(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Yi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,V3.init.apply(this),this.forward=V3.forward,this.inverse=V3.inverse}var fpt=["Universal Transverse Mercator System","utm"];const ppt={init:dpt,names:fpt,dependsOn:hpt};function Pq(t,e){return Math.pow((1-t)/(1+t),e)}var mpt=20;function gpt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Lr)/(Math.pow(Math.tan(.5*this.lat0+Lr),this.C)*Pq(this.e*t,this.ratexp))}function ypt(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Lr),this.C)*Pq(this.e*Math.sin(n),this.ratexp))-at,t.x=this.C*e,t}function vpt(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+Lr)/this.K,1/this.C),s=mpt;s>0&&(r=2*Math.atan(i*Pq(this.e*Math.sin(t.y),-.5*this.e))-at,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}const Rq={init:gpt,forward:ypt,inverse:vpt};function _pt(){Rq.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function xpt(t){var e,n,r,i;return t.x=It(t.x-this.long0,this.over),Rq.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function wpt(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=xl(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Rq.inverse.apply(this,[t]),t.x=It(t.x+this.long0,this.over),t}var bpt=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Ept={init:_pt,forward:xpt,inverse:wpt,names:bpt};function Mq(t,e,n){return e*=n,Math.tan(.5*(at+t))*Math.pow((1-e)/(1+e),.5*n)}function Spt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=St&&(this.k0=.5*(1+oI(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=St&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=St&&Math.abs(Math.cos(this.lat_ts))>St&&(this.k0=.5*this.cons*Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/gh(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Hd(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Mq(this.lat0,this.sinlat0,this.e))-at,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Tpt(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,o,a,l,c,u,h=It(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=St&&Math.abs(n+this.lat0)<=St?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(h)),t.x=this.a*s*i*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(h))+this.y0,t):(o=2*Math.atan(Mq(n,r,this.e))-at,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=St?(c=gh(this.e,n*this.con,this.con*r),u=2*this.a*this.k0*c/this.cons,t.x=this.x0+u*Math.sin(e-this.long0),t.y=this.y0-this.con*u*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<St?(s=2*this.a*this.k0/(1+l*Math.cos(h)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),t.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),t.x=s*l*Math.sin(h)+this.x0,t))}function kpt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=St?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<St?this.lat0>0?e=It(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=It(this.long0+Math.atan2(t.x,t.y),this.over):e=It(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=St){if(o<=St)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*FA(this.e,r),e=this.con*It(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=St?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=It(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*FA(this.e,Math.tan(.5*(at+s)));return t.x=e,t.y=n,t}var Apt=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Cpt={init:Spt,forward:Tpt,inverse:kpt,names:Apt,ssfn_:Mq};function Ipt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function Ppt(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function Rpt(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t}var Mpt=["somerc"];const Npt={init:Ipt,forward:Ppt,inverse:Rpt,names:Mpt};var kx=1e-7;function Lpt(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(dbe(n))!==-1}function Opt(){var t,e,n,r,i,s,o,a,l,c,u=0,h,f=0,g=0,y=0,_=0,b=0,T=0;this.no_off=Lpt(this),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var C=!1;if("rectified_grid_angle"in this&&(C=!0),A&&(T=this.alpha),C&&(u=this.rectified_grid_angle),A||C)f=this.longc;else if(g=this.long1,_=this.lat1,y=this.long2,b=this.lat2,Math.abs(_-b)<=kx||(t=Math.abs(_))<=kx||Math.abs(t-at)<=kx||Math.abs(Math.abs(this.lat0)-at)<=kx||Math.abs(Math.abs(b)-at)<=kx)throw new Error;var I=1-this.es;e=Math.sqrt(I),Math.abs(this.lat0)>St?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/I),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(gh(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),A||C?(A?(h=Math.asin(Math.sin(T)/r),C||(u=T)):(h=u,T=Math.asin(r*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(gh(this.e,_,Math.sin(_)),this.B),o=Math.pow(gh(this.e,b,Math.sin(b)),this.B),i=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),t=g-y,t<-Math.PI?y-=DA:t>Math.PI&&(y+=DA),this.lam0=It(.5*(g+y)-Math.atan(c*Math.tan(.5*this.B*(g-y))/l)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*It(g-this.lam0,this.over))/(i-1/i)),u=T=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Lr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Lr+i))}function Dpt(t){var e={},n,r,i,s,o,a,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-at)>St){if(o=this.E/Math.pow(gh(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<St)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*t.x),Math.abs(a)<kx?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,a)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function jpt(t){var e,n,r,i,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<St)l.x=0,l.y=a<0?-at:at;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=FA(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Fpt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const $pt={init:Opt,forward:Dpt,inverse:jpt,names:Fpt};function Vpt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<St)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Hd(this.e,e,n),i=gh(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Hd(this.e,s,o),l=gh(this.e,this.lat2,s),c=Math.abs(Math.abs(this.lat0)-at)<St?0:gh(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>St?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function zpt(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=St&&(n=oI(n)*(at-2*St));var r=Math.abs(Math.abs(n)-at),i,s;if(r>St)i=gh(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var o=this.ns*It(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t}function Gpt(t){var e,n,r,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=FA(this.e,r),i===-9999)return null}else i=-at;return s=It(l/this.ns+this.long0,this.over),t.x=s,t.y=i,t}var Upt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Bpt={init:Vpt,forward:zpt,inverse:Gpt,names:Upt};function Wpt(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Hpt(t){var e,n,r,i,s,o,a,l=t.x,c=t.y,u=It(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function qpt(t){var e,n,r,i,s,o,a,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1;while(l===0&&u<15);return u>=15?null:t}var Kpt=["Krovak","krovak"];const Ypt={init:Wpt,forward:Hpt,inverse:qpt,names:Kpt};function za(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function aI(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function lI(t){return .375*t*(1+.25*t*(1+.46875*t))}function cI(t){return .05859375*t*t*(1+.75*t)}function uI(t){return t*t*t*(35/3072)}function Nq(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function x0(t){return Math.abs(t)<at?t:t-oI(t)*Math.PI}function d5(t,e,n,r,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function Xpt(){this.sphere||(this.e0=aI(this.es),this.e1=lI(this.es),this.e2=cI(this.es),this.e3=uI(this.es),this.ml0=this.a*za(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Zpt(t){var e,n,r=t.x,i=t.y;if(r=It(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=Nq(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es),f=this.a*za(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=f-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Jpt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+n,a=d5(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-at)<=St)return t.x=this.long0,t.y=at,n<0&&(t.y*=-1),t;var l=Nq(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=e*this.a/l,f=h*h;r=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),i=h*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(a)}return t.x=It(i+this.long0,this.over),t.y=x0(r),t}var Qpt=["Cassini","Cassini_Soldner","cass"];const emt={init:Xpt,forward:Zpt,inverse:Jpt,names:Qpt};function Dg(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var qz=1,Kz=2,Yz=3,z3=4;function tmt(){var t=Math.abs(this.lat0);if(Math.abs(t-at)<St?this.mode=this.lat0<0?qz:Kz:Math.abs(t)<St?this.mode=Yz:this.mode=z3,this.es>0){var e;switch(this.qp=Dg(this.e,1),this.mmf=.5/(1-this.es),this.apa=umt(this.es),this.mode){case Kz:this.dd=1;break;case qz:this.dd=1;break;case Yz:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case z3:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Dg(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===z3&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function nmt(t){var e,n,r,i,s,o,a,l,c,u,h=t.x,f=t.y;if(h=It(h-this.long0,this.over),this.sphere){if(s=Math.sin(f),u=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*s+this.cosph0*u*r,n<=St)return null;n=Math.sqrt(2/n),e=n*u*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<St)return null;n=Lr-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(f),o=Dg(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=at+f,o=this.qp-o;break;case this.S_POLE:c=f-at,o=this.qp+o;break}if(Math.abs(c)<St)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):n=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function rmt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,o,a,l,c;if(this.sphere){var u=0,h,f=0;if(h=Math.sqrt(e*e+n*n),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=St?0:Math.asin(n*f/h),e*=f,n=u*h;break;case this.OBLIQ:i=Math.abs(h)<=St?this.lat0:Math.asin(u*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(u-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:n=-n,i=at-i;break;case this.S_POLE:i-=at;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<St)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+n*o*this.cosb1/l,a=this.qp*c,n=l*this.cosb1*s-n*this.sinb1*o):(c=n*o/l,a=this.qp*c,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=hmt(Math.asin(c),this.apa)}return t.x=It(this.long0+r,this.over),t.y=i,t}var imt=.3333333333333333,smt=.17222222222222222,omt=.10257936507936508,amt=.06388888888888888,lmt=.0664021164021164,cmt=.016415012942191543;function umt(t){var e,n=[];return n[0]=t*imt,e=t*t,n[0]+=e*smt,n[1]=e*amt,e*=t,n[0]+=e*omt,n[1]+=e*lmt,n[2]=e*cmt,n}function hmt(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var dmt=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const fmt={init:tmt,forward:nmt,inverse:rmt,names:dmt,S_POLE:qz,N_POLE:Kz,EQUIT:Yz,OBLIQ:z3};function s0(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function pmt(){Math.abs(this.lat1+this.lat2)<St||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Hd(this.e3,this.sin_po,this.cos_po),this.qs1=Dg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Hd(this.e3,this.sin_po,this.cos_po),this.qs2=Dg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Dg(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>St?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function mmt(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Dg(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*It(e-this.long0,this.over),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function gmt(t){var e,n,r,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),s=It(i/this.ns0+this.long0,this.over),t.x=s,t.y=o,t}function ymt(t,e){var n,r,i,s,o,a=s0(.5*e);if(t<St)return a;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(a),r=Math.cos(a),i=t*n,s=1-i*i,o=.5*s*s/r*(e/(1-l)-n/s+.5/t*Math.log((1-i)/(1+i))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var vmt=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const _mt={init:pmt,forward:mmt,inverse:gmt,names:vmt,phi1z:ymt};function xmt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function wmt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=It(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,o>0||Math.abs(o)<=St?(a=this.x0+this.a*s*n*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function bmt(t){var e,n,r,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),o=s0(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=It(this.long0+s,this.over)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var Emt=["gnom"];const Smt={init:xmt,forward:wmt,inverse:bmt,names:Emt};function Tmt(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*at:at;for(var r=Math.asin(.5*e),i,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=t*s,i=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function kmt(){this.sphere||(this.k0=Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Amt(t){var e=t.x,n=t.y,r,i,s=It(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Dg(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=i,t}function Cmt(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=It(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Tmt(this.e,2*t.y*this.k0/this.a),e=It(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var Imt=["cea"];const Pmt={init:kmt,forward:Amt,inverse:Cmt,names:Imt};function Rmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Mmt(t){var e=t.x,n=t.y,r=It(e-this.long0,this.over),i=x0(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function Nmt(t){var e=t.x,n=t.y;return t.x=It(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=x0(this.lat0+(n-this.y0)/this.a),t}var Lmt=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Omt={init:Rmt,forward:Mmt,inverse:Nmt,names:Lmt};var Hoe=20;function Dmt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=aI(this.es),this.e1=lI(this.es),this.e2=cI(this.es),this.e3=uI(this.es),this.ml0=this.a*za(this.e0,this.e1,this.e2,this.e3,this.lat0)}function jmt(t){var e=t.x,n=t.y,r,i,s,o=It(e-this.long0,this.over);if(s=o*Math.sin(n),this.sphere)Math.abs(n)<=St?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(x0(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=St)r=this.a*o,i=-1*this.ml0;else{var a=Nq(this.a,this.e,Math.sin(n))/Math.tan(n);r=a*Math.sin(s),i=this.a*za(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function Fmt(t){var e,n,r,i,s,o,a,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=St)e=It(r/this.a+this.long0,this.over),n=0;else{o=this.lat0+i/this.a,a=r*r/this.a/this.a+o*o,l=o;var u;for(s=Hoe;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=St){n=l;break}e=It(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=St)n=0,e=It(this.long0+r/this.a,this.over);else{o=(this.ml0+i)/this.a,a=r*r/this.a/this.a+o*o,l=o;var h,f,g,y,_;for(s=Hoe;s;--s)if(_=this.e*Math.sin(l),h=Math.sqrt(1-_*_)*Math.tan(l),f=this.a*za(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),y=f/this.a,c=(o*(h*y+1)-y-.5*h*(y*y+a))/(this.es*Math.sin(2*l)*(y*y+a-2*o*y)/(4*h)+(o-y)*(h*g-2/Math.sin(2*l))-g),l-=c,Math.abs(c)<=St){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=It(this.long0+Math.asin(r*h/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var $mt=["Polyconic","American_Polyconic","poly"];const Vmt={init:Dmt,forward:jmt,inverse:Fmt,names:$mt};function zmt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Gmt(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,o=i/ik*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var u=c,h=a,f=1,g=0,y,_,b=0,T=0;for(e=1;e<=6;e++)y=f*u-g*h,_=g*u+f*h,f=y,g=_,b=b+this.B_re[e]*f-this.B_im[e]*g,T=T+this.B_im[e]*f+this.B_re[e]*g;return t.x=T*this.a+this.x0,t.y=b*this.a+this.y0,t}function Umt(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,o=s/this.a,a=i/this.a,l=1,c=0,u,h,f=0,g=0;for(e=1;e<=6;e++)u=l*o-c*a,h=c*o+l*a,l=u,c=h,f=f+this.C_re[e]*l-this.C_im[e]*c,g=g+this.C_im[e]*l+this.C_re[e]*c;for(var y=0;y<this.iterations;y++){var _=f,b=g,T,A,C=o,I=a;for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,C=C+(e-1)*(this.B_re[e]*_-this.B_im[e]*b),I=I+(e-1)*(this.B_im[e]*_+this.B_re[e]*b);_=1,b=0;var R=this.B_re[1],V=this.B_im[1];for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,R=R+e*(this.B_re[e]*_-this.B_im[e]*b),V=V+e*(this.B_im[e]*_+this.B_re[e]*b);var P=R*R+V*V;f=(C*R+I*V)/P,g=(I*R-C*V)/P}var N=f,L=g,O=1,F=0;for(e=1;e<=9;e++)O=O*N,F=F+this.D[e]*O;var G=this.lat0+F*ik*1e5,U=this.long0+L;return t.x=U,t.y=G,t}var Bmt=["New_Zealand_Map_Grid","nzmg"];const Wmt={init:zmt,forward:Gmt,inverse:Umt,names:Bmt};function Hmt(){}function qmt(t){var e=t.x,n=t.y,r=It(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function Kmt(t){t.x-=this.x0,t.y-=this.y0;var e=It(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var Ymt=["Miller_Cylindrical","mill"];const Xmt={init:Hmt,forward:qmt,inverse:Kmt,names:Ymt};var Zmt=20;function Jmt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Aq(this.es)}function Qmt(t){var e,n,r=t.x,i=t.y;if(r=It(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),o=Zmt;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<St)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*$b(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function egt(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=s0((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=s0(Math.sin(e)/this.n)),r=It(r+this.long0,this.over),e=x0(e)):(e=Cq(t.y/this.a,this.es,this.en),i=Math.abs(e),i<at?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=It(n,this.over)):i-St<at&&(r=this.long0)),t.x=r,t.y=e,t}var tgt=["Sinusoidal","sinu"];const ngt={init:Jmt,forward:Qmt,inverse:egt,names:tgt};function rgt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function igt(t){for(var e=t.x,n=t.y,r=It(e-this.long0,this.over),i=n,s=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<St)break}i/=2,Math.PI/2-Math.abs(n)<St&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t}function sgt(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=It(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var ogt=["Mollweide","moll"];const agt={init:rgt,forward:igt,inverse:sgt,names:ogt};function lgt(){Math.abs(this.lat1+this.lat2)<St||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=aI(this.es),this.e1=lI(this.es),this.e2=cI(this.es),this.e3=uI(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Hd(this.e,this.sin_phi,this.cos_phi),this.ml1=za(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<St?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Hd(this.e,this.sin_phi,this.cos_phi),this.ml2=za(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=za(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function cgt(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=za(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*It(e-this.long0,this.over),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return t.x=o,t.y=a,t}function ugt(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=It(this.long0+s/this.ns,this.over),r=x0(this.g-n/this.a),t.x=i,t.y=r,t;var o=this.g-n/this.a;return r=d5(o,this.e0,this.e1,this.e2,this.e3),i=It(this.long0+s/this.ns,this.over),t.x=i,t.y=r,t}var hgt=["Equidistant_Conic","eqdc"];const dgt={init:lgt,forward:cgt,inverse:ugt,names:hgt};function fgt(){this.R=this.a}function pgt(t){var e=t.x,n=t.y,r=It(e-this.long0,this.over),i,s;Math.abs(n)<=St&&(i=this.x0+this.R*r,s=this.y0);var o=s0(2*Math.abs(n/Math.PI));(Math.abs(r)<=St||Math.abs(Math.abs(n)-at)<=St)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),f=h*h,g=h*(2/c-1),y=g*g,_=Math.PI*this.R*(a*(h-y)+Math.sqrt(l*(h-y)*(h-y)-(y+l)*(f-y)))/(y+l);r<0&&(_=-_),i=this.x0+_;var b=l+h;return _=Math.PI*this.R*(g*b-a*Math.sqrt((y+l)*(l+1)-b*b))/(y+l),n>=0?s=this.y0+_:s=this.y0-_,t.x=i,t.y=s,t}function mgt(t){var e,n,r,i,s,o,a,l,c,u,h,f,g;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,s=r*r+i*i,o=-Math.abs(i)*(1+s),a=o-2*i*i+r*r,l=-2*o+1+2*i*i+s*s,g=i*i/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*g/c/u,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:n=-(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<St?e=this.long0:e=It(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),t.x=e,t.y=n,t}var ggt=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const ygt={init:fgt,forward:pgt,inverse:mgt,names:ggt};function vgt(t,e,n,r,i,s){const o=r-e,a=Math.atan((1-s)*Math.tan(t)),l=Math.atan((1-s)*Math.tan(n)),c=Math.sin(a),u=Math.cos(a),h=Math.sin(l),f=Math.cos(l);let g=o,y,_=100,b,T,A,C,I,R,V,P,N,L,O,F,G,U;do{if(b=Math.sin(g),T=Math.cos(g),A=Math.sqrt(f*b*(f*b)+(u*h-c*f*T)*(u*h-c*f*T)),A===0)return{azi1:0,s12:0};C=c*h+u*f*T,I=Math.atan2(A,C),R=u*f*b/A,V=1-R*R,P=V!==0?C-2*c*h/V:0,N=s/16*V*(4+s*(4-3*V)),y=g,g=o+(1-N)*s*R*(I+N*A*(P+N*C*(-1+2*P*P)))}while(Math.abs(g-y)>1e-12&&--_>0);return _===0?{azi1:NaN,s12:NaN}:(L=V*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),O=1+L/16384*(4096+L*(-768+L*(320-175*L))),F=L/1024*(256+L*(-128+L*(74-47*L))),G=F*A*(P+F/4*(C*(-1+2*P*P)-F/6*P*(-3+4*A*A)*(-3+4*P*P))),U=i*(1-s)*O*(I-G),{azi1:Math.atan2(f*b,u*h-c*f*T),s12:U})}function _gt(t,e,n,r,i,s){const o=Math.atan((1-s)*Math.tan(t)),a=Math.sin(o),l=Math.cos(o),c=Math.sin(n),u=Math.cos(n),h=Math.atan2(a,l*u),f=l*c,g=1-f*f,y=g*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),_=1+y/16384*(4096+y*(-768+y*(320-175*y))),b=y/1024*(256+y*(-128+y*(74-47*y)));let T=r/(i*(1-s)*_),A,C=100,I,R,V,P;do I=Math.cos(2*h+T),R=Math.sin(T),V=Math.cos(T),P=b*R*(I+b/4*(V*(-1+2*I*I)-b/6*I*(-3+4*R*R)*(-3+4*I*I))),A=T,T=r/(i*(1-s)*_)+P;while(Math.abs(T-A)>1e-12&&--C>0);if(C===0)return{lat2:NaN,lon2:NaN};const N=a*R-l*V*u,L=Math.atan2(a*V+l*R*u,(1-s)*Math.sqrt(f*f+N*N)),O=Math.atan2(R*c,l*V-a*R*u),F=s/16*g*(4+s*(4-3*g)),G=O-(1-F)*s*f*(T+F*R*(I+F*V*(-1+2*I*I))),U=e+G;return{lat2:L,lon2:U}}function xgt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function wgt(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=It(e-this.long0,this.over),o,a,l,c,u,h,f,g,y,_,b;return this.sphere?Math.abs(this.sin_p12-1)<=St?(t.x=this.x0+this.a*(at-n)*Math.sin(s),t.y=this.y0-this.a*(at-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=St?(t.x=this.x0+this.a*(at+n)*Math.sin(s),t.y=this.y0+this.a*(at+n)*Math.cos(s),t):(y=this.sin_p12*r+this.cos_p12*i*Math.cos(s),f=Math.acos(y),g=f?f/Math.sin(f):1,t.x=this.x0+this.a*g*i*Math.sin(s),t.y=this.y0+this.a*g*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(o=aI(this.es),a=lI(this.es),l=cI(this.es),c=uI(this.es),Math.abs(this.sin_p12-1)<=St?(u=this.a*za(o,a,l,c,at),h=this.a*za(o,a,l,c,n),t.x=this.x0+(u-h)*Math.sin(s),t.y=this.y0-(u-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=St?(u=this.a*za(o,a,l,c,at),h=this.a*za(o,a,l,c,n),t.x=this.x0+(u+h)*Math.sin(s),t.y=this.y0+(u+h)*Math.cos(s),t):Math.abs(e)<St&&Math.abs(n-this.lat0)<St?(t.x=t.y=0,t):(_=vgt(this.lat0,this.long0,n,e,this.a,this.f),b=_.azi1,t.x=_.s12*Math.sin(b),t.y=_.s12*Math.cos(b),t))}function bgt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*at*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=St?o=this.lat0:(o=s0(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-at,Math.abs(a)<=St?this.lat0>=0?s=It(this.long0+Math.atan2(t.x,-t.y),this.over):s=It(this.long0-Math.atan2(-t.x,t.y),this.over):s=It(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=s,t.y=o,t)):(l=aI(this.es),c=lI(this.es),u=cI(this.es),h=uI(this.es),Math.abs(this.sin_p12-1)<=St?(f=this.a*za(l,c,u,h,at),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f-e,o=d5(g/this.a,l,c,u,h),s=It(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=St?(f=this.a*za(l,c,u,h,at),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-f,o=d5(g/this.a,l,c,u,h),s=It(this.long0+Math.atan2(t.x,t.y),this.over),t.x=s,t.y=o,t):(y=Math.atan2(t.x,t.y),_=Math.sqrt(t.x*t.x+t.y*t.y),b=_gt(this.lat0,this.long0,y,_,this.a,this.f),t.x=b.lon2,t.y=b.lat2,t))}var Egt=["Azimuthal_Equidistant","aeqd"];const Sgt={init:xgt,forward:wgt,inverse:bgt,names:Egt};function Tgt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function kgt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=It(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,(o>0||Math.abs(o)<=St)&&(a=this.a*s*n*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function Agt(t){var e,n,r,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=s0(e/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=St?(a=this.lat0,t.x=o,t.y=a,t):(a=s0(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-at,Math.abs(s)<=St?(this.lat0>=0?o=It(this.long0+Math.atan2(t.x,-t.y),this.over):o=It(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=a,t):(o=It(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=o,t.y=a,t))}var Cgt=["ortho"];const Igt={init:Tgt,forward:kgt,inverse:Agt,names:Cgt};var Li={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Or={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Pgt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=at-Lr/2?this.face=Li.TOP:this.lat0<=-(at-Lr/2)?this.face=Li.BOTTOM:Math.abs(this.long0)<=Lr?this.face=Li.FRONT:Math.abs(this.long0)<=at+Lr?this.face=this.long0>0?Li.RIGHT:Li.LEFT:this.face=Li.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Rgt(t){var e={x:0,y:0},n,r,i,s,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===Li.TOP)s=at-n,r>=Lr&&r<=at+Lr?(l.value=Or.AREA_0,i=r-at):r>at+Lr||r<=-(at+Lr)?(l.value=Or.AREA_1,i=r>0?r-fs:r+fs):r>-(at+Lr)&&r<=-Lr?(l.value=Or.AREA_2,i=r+at):(l.value=Or.AREA_3,i=r);else if(this.face===Li.BOTTOM)s=at+n,r>=Lr&&r<=at+Lr?(l.value=Or.AREA_0,i=-r+at):r<Lr&&r>=-Lr?(l.value=Or.AREA_1,i=-r):r<-Lr&&r>=-(at+Lr)?(l.value=Or.AREA_2,i=-r-at):(l.value=Or.AREA_3,i=r>0?-r+fs:-r-fs);else{var c,u,h,f,g,y,_;this.face===Li.RIGHT?r=Iw(r,+at):this.face===Li.BACK?r=Iw(r,+fs):this.face===Li.LEFT&&(r=Iw(r,-at)),f=Math.sin(n),g=Math.cos(n),y=Math.sin(r),_=Math.cos(r),c=g*_,u=g*y,h=f,this.face===Li.FRONT?(s=Math.acos(c),i=VR(s,h,u,l)):this.face===Li.RIGHT?(s=Math.acos(u),i=VR(s,h,-c,l)):this.face===Li.BACK?(s=Math.acos(-c),i=VR(s,h,-u,l)):this.face===Li.LEFT?(s=Math.acos(-u),i=VR(s,h,c,l)):(s=i=0,l.value=Or.AREA_0)}return a=Math.atan(12/fs*(i+Math.acos(Math.sin(i)*Math.cos(Lr))-at)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Or.AREA_1?a+=at:l.value===Or.AREA_2?a+=fs:l.value===Or.AREA_3&&(a+=1.5*fs),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function Mgt(t){var e={lam:0,phi:0},n,r,i,s,o,a,l,c,u,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=Or.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=Or.AREA_1,n-=at):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=Or.AREA_2,n=n<0?n+fs:n-fs):(h.value=Or.AREA_3,n+=at),u=fs/12*Math.tan(n),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),i=Math.cos(n),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Li.TOP)c=Math.acos(l),e.phi=at-c,h.value===Or.AREA_0?e.lam=a+at:h.value===Or.AREA_1?e.lam=a<0?a+fs:a-fs:h.value===Or.AREA_2?e.lam=a-at:e.lam=a;else if(this.face===Li.BOTTOM)c=Math.acos(l),e.phi=c-at,h.value===Or.AREA_0?e.lam=-a+at:h.value===Or.AREA_1?e.lam=-a:h.value===Or.AREA_2?e.lam=-a-at:e.lam=a<0?-a-fs:-a+fs;else{var f,g,y;f=l,u=f*f,u>=1?y=0:y=Math.sqrt(1-u)*Math.sin(a),u+=y*y,u>=1?g=0:g=Math.sqrt(1-u),h.value===Or.AREA_1?(u=g,g=-y,y=u):h.value===Or.AREA_2?(g=-g,y=-y):h.value===Or.AREA_3&&(u=g,g=y,y=-u),this.face===Li.RIGHT?(u=f,f=-g,g=u):this.face===Li.BACK?(f=-f,g=-g):this.face===Li.LEFT&&(u=f,f=g,g=-u),e.phi=Math.acos(-y)-at,e.lam=Math.atan2(g,f),this.face===Li.RIGHT?e.lam=Iw(e.lam,-at):this.face===Li.BACK?e.lam=Iw(e.lam,-fs):this.face===Li.LEFT&&(e.lam=Iw(e.lam,+at))}if(this.es!==0){var _,b,T;_=e.phi<0?1:0,b=Math.tan(e.phi),T=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),_&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function VR(t,e,n,r){var i;return t<St?(r.value=Or.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Lr?r.value=Or.AREA_0:i>Lr&&i<=at+Lr?(r.value=Or.AREA_1,i-=at):i>at+Lr||i<=-(at+Lr)?(r.value=Or.AREA_2,i=i>=0?i-fs:i+fs):(r.value=Or.AREA_3,i+=at)),i}function Iw(t,e){var n=t+e;return n<-fs?n+=DA:n>+fs&&(n-=DA),n}var Ngt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Lgt={init:Pgt,forward:Rgt,inverse:Mgt,names:Ngt};var Xz=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],lT=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Tbe=.8487,kbe=1.3523,Abe=Tl/5,Ogt=1/Abe,Zx=18,f5=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Dgt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function jgt(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function Fgt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function $gt(t){var e=It(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*Abe);r<0?r=0:r>=Zx&&(r=Zx-1),n=Tl*(n-Ogt*r);var i={x:f5(Xz[r],n)*e,y:f5(lT[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Tbe+this.x0,i.y=i.y*this.a*kbe+this.y0,i}function Vgt(t){var e={x:(t.x-this.x0)/(this.a*Tbe),y:Math.abs(t.y-this.y0)/(this.a*kbe)};if(e.y>=1)e.x/=Xz[Zx][0],e.y=t.y<0?-at:at;else{var n=Math.floor(e.y*Zx);for(n<0?n=0:n>=Zx&&(n=Zx-1);;)if(lT[n][0]>e.y)--n;else if(lT[n+1][0]<=e.y)++n;else break;var r=lT[n],i=5*(e.y-r[0])/(lT[n+1][0]-r[0]);i=jgt(function(s){return(f5(r,s)-e.y)/Dgt(r,s)},i,St,100),e.x/=f5(Xz[n],i),e.y=(5*n+i)*Yi,t.y<0&&(e.y=-e.y)}return e.x=It(e.x+this.long0,this.over),e}var zgt=["Robinson","robin"];const Ggt={init:Fgt,forward:$gt,inverse:Vgt,names:zgt};function Ugt(){this.name="geocent"}function Bgt(t){var e=pbe(t,this.es,this.a);return e}function Wgt(t){var e=mbe(t,this.es,this.a,this.b);return e}var Hgt=["Geocentric","geocentric","geocent","Geocent"];const qgt={init:Ugt,forward:Bgt,inverse:Wgt,names:Hgt};var la={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},dS={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Kgt(){if(Object.keys(dS).forEach((function(n){if(typeof this[n]>"u")this[n]=dS[n].def;else{if(dS[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);dS[n].num&&(this[n]=parseFloat(this[n]))}dS[n].degrees&&(this[n]=this[n]*Yi)}).bind(this)),Math.abs(Math.abs(this.lat0)-at)<St?this.mode=this.lat0<0?la.S_POLE:la.N_POLE:Math.abs(this.lat0)<St?this.mode=la.EQUIT:(this.mode=la.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Ygt(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case la.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case la.EQUIT:s=n*r;break;case la.S_POLE:s=-e;break;case la.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case la.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case la.EQUIT:s*=e;break;case la.N_POLE:s*=-(n*r);break;case la.S_POLE:s*=n*r;break}var o,a;return o=s*this.cg+i*this.sg,a=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*a,s=o*a,t.x=i*this.a,t.y=s*this.a,t}function Xgt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=xl(t.x,t.y);if(Math.abs(s)<St)e.x=0,e.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case la.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case la.EQUIT:e.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case la.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case la.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Zgt=["Tilted_Perspective","tpers"];const Jgt={init:Kgt,forward:Ygt,inverse:Xgt,names:Zgt};function Qgt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function e0t(t){var e=t.x,n=t.y,r,i,s,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/xl(this.radius_p*Math.cos(n),Math.sin(n));if(i=a*Math.cos(e)*Math.cos(n),s=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-i)*i-s*s-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function t0t(t){var e=-1,n=0,r=0,i,s,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*xl(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*xl(1,n));var l=r/this.radius_p;if(i=n*n+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var n0t=["Geostationary Satellite View","Geostationary_Satellite","geos"];const r0t={init:Qgt,forward:e0t,inverse:t0t,names:n0t};var sk=1.340264,ok=-.081106,ak=893e-6,lk=.003796,p5=Math.sqrt(3)/2;function i0t(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function s0t(t){var e=It(t.x-this.long0,this.over),n=t.y,r=Math.asin(p5*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(p5*(sk+3*ok*i+s*(7*ak+9*lk*i))),t.y=r*(sk+ok*i+s*(ak+lk*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function o0t(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,o,a,l,c;for(c=0;c<n&&(i=r*r,s=i*i*i,o=r*(sk+ok*i+s*(ak+lk*i))-t.y,a=sk+3*ok*i+s*(7*ak+9*lk*i),r-=l=o/a,!(Math.abs(l)<e));++c);return i=r*r,s=i*i*i,t.x=p5*t.x*(sk+3*ok*i+s*(7*ak+9*lk*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/p5),t.x=It(t.x+this.long0,this.over),t}var a0t=["eqearth","Equal Earth","Equal_Earth"];const l0t={init:i0t,forward:s0t,inverse:o0t,names:a0t};var $A=1e-10;function c0t(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<$A)throw new Error;this.es?(this.en=Aq(this.es),this.m1=$b(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=h0t,this.forward=u0t):(Math.abs(this.phi1)+$A>=at?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=f0t,this.forward=d0t)}function u0t(t){var e=It(t.x-(this.long0||0),this.over),n=t.y,r,i,s;return r=this.am1+this.m1-$b(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function h0t(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=xl(t.x,t.y=this.am1-t.y),i=Cq(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<at)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-at)<=$A)r=0;else throw new Error;return t.x=It(r+(this.long0||0),this.over),t.y=x0(i),t}function d0t(t){var e=It(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>$A?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function f0t(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=xl(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>at)throw new Error;return Math.abs(Math.abs(n)-at)<=$A?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=It(e+(this.long0||0),this.over),t.y=x0(n),t}var p0t=["bonne","Bonne (Werner lat_1=90)"];const m0t={init:c0t,names:p0t},qoe={OBLIQUE:{forward:x0t,inverse:b0t},TRANSVERSE:{forward:w0t,inverse:E0t}},m5={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function g0t(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=ube.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=mu(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(m5),i=a=>{if(typeof this[a]>"u")return;const l=parseFloat(this[a])*Yi;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){const l=r[a],c=m5[l],u=Object.entries(c);if(u.some(([f])=>typeof this[f]<"u")){n=c;for(let f=0;f<u.length;f++){const[g,y]=u[f],_=i(g);if(typeof _>"u")throw new Error("Missing parameter: "+g+".");this[y]=_}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:o}=_0t(this,n);this.lamp=s,Math.abs(o)>St?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=qoe.OBLIQUE):this.projectionType=qoe.TRANSVERSE}function y0t(t){return this.projectionType.forward(this,t)}function v0t(t){return this.projectionType.inverse(this,t)}function _0t(t,e){let n,r;if(e===m5.ROTATE){let i=t.oLongC,s=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(s)-at)<=St)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(o))}else if(e===m5.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,s=t.oLat1,o=t.oLong2,a=t.oLat2,l=Math.abs(s);if(Math.abs(s)>at-St)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(a)>at-St)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(s-a)<St)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<St)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(a)*Math.cos(i)-Math.sin(s)*Math.cos(a)*Math.cos(o),Math.sin(s)*Math.cos(a)*Math.sin(o)-Math.cos(s)*Math.sin(a)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:n}}function x0t(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),s=Math.sin(r),o=Math.cos(r);e.x=It(Math.atan2(o*Math.sin(n),t.sphip*o*i+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*o*i);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=Tl,a.y*=Tl),a}function w0t(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),s=Math.cos(n);e.x=It(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*s);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Tl,o.y*=Tl),o}function b0t(t,e){t.isIdentity&&(e.x*=Yi,e.y*=Yi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const s=Math.cos(r),o=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),t.sphip*a*s-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*a*s)}return e.x=It(e.x+t.long0),e}function E0t(t,e){t.isIdentity&&(e.x*=Yi,e.y*=Yi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=t.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=It(e.x+t.long0),e}var S0t=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const T0t={init:g0t,forward:y0t,inverse:v0t,names:S0t};function k0t(t){t.Proj.projections.add($3),t.Proj.projections.add(V3),t.Proj.projections.add(ppt),t.Proj.projections.add(Ept),t.Proj.projections.add(Cpt),t.Proj.projections.add(Npt),t.Proj.projections.add($pt),t.Proj.projections.add(Bpt),t.Proj.projections.add(Ypt),t.Proj.projections.add(emt),t.Proj.projections.add(fmt),t.Proj.projections.add(_mt),t.Proj.projections.add(Smt),t.Proj.projections.add(Pmt),t.Proj.projections.add(Omt),t.Proj.projections.add(Vmt),t.Proj.projections.add(Wmt),t.Proj.projections.add(Xmt),t.Proj.projections.add(ngt),t.Proj.projections.add(agt),t.Proj.projections.add(dgt),t.Proj.projections.add(ygt),t.Proj.projections.add(Sgt),t.Proj.projections.add(Igt),t.Proj.projections.add(Lgt),t.Proj.projections.add(Ggt),t.Proj.projections.add(qgt),t.Proj.projections.add(Jgt),t.Proj.projections.add(r0t),t.Proj.projections.add(l0t),t.Proj.projections.add(m0t),t.Proj.projections.add(T0t)}const lr=Object.assign(Rft,{defaultDatum:"WGS84",Proj:mu,WGS84:new mu("WGS84"),Point:eb,toPoint:gbe,defs:Po,nadgrid:fft,transform:h5,mgrs:Mft,version:"__VERSION__"});k0t(lr);class Cbe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=yr,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Jr(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Jr(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Sn()}readFeature(e,n){return Sn()}readFeatures(e,n){return Sn()}readGeometry(e,n){return Sn()}readProjection(e){return Sn()}writeFeature(e,n){return Sn()}writeFeatures(e,n){return Sn()}writeGeometry(e,n){return Sn()}}function Ch(t,e,n){const r=n?Jr(n.featureProjection):null,i=n?Jr(n.dataProjection):null;let s=t;if(r&&i&&!i1(r,i)){e&&(s=t.clone());const o=e?r:i,a=e?i:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Sk(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const A0t={Point:ki,LineString:ns,Polygon:Il,MultiPoint:h0,MultiLineString:_h,MultiPolygon:wp};function C0t(t,e,n){return Array.isArray(e[0])?(Jle(t,0,e,n)||(t=t.slice(),a8(t,0,e,n)),t):(FG(t,0,e,n)||(t=t.slice(),n4(t,0,e,n)),t)}function Ibe(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(s=>Ibe({...t,geometry:s})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=n.layout.length;return Ch(new yl(r,r==="Polygon"?C0t(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function Lq(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(i=>Lq(i,e));return new du(r)}const n=A0t[t.type];return Ch(new n(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class I0t extends Cbe{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(zR(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(zR(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return Sn()}readFeaturesFromObject(e,n){return Sn()}readGeometry(e,n){return this.readGeometryFromObject(zR(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return Sn()}readProjection(e){return this.readProjectionFromObject(zR(e))}readProjectionFromObject(e){return Sn()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return Sn()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return Sn()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return Sn()}}function zR(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class HO extends I0t{constructor(e){e=e||{},super(),this.dataProjection=Jr(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Jr(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=Oq(r.geometry);if(this.featureClass===yl)return Ibe({geometry:i,id:r.id,properties:r.properties},n);const s=new yr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(Lq(i,n)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,n){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,n)];return i.flat()}readGeometryFromObject(e,n){return P0t(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=Jr(n.properties.name);else if(n.type==="EPSG")r=Jr("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=Zz(o,n),delete s[e.getGeometryName()]),T1(s)||(r.properties=s),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return Zz(e,this.adaptOptions(n))}}function Oq(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=M0t(t);break}case"LineString":{n=N0t(t);break}case"Polygon":{n=j0t(t);break}case"MultiPoint":{n=O0t(t);break}case"MultiLineString":{n=L0t(t);break}case"MultiPolygon":{n=D0t(t);break}case"GeometryCollection":{n=R0t(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function P0t(t,e){const n=Oq(t);return Lq(n,e)}function R0t(t,e){return t.geometries.map(function(r){return Oq(r)})}function M0t(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:hv(e.length)}}function N0t(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:hv(e[0]?.length||2)}}function L0t(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,r=[],i=rC(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:hv(n)}}function O0t(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:hv(e[0]?.length||2)}}function D0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.[0].length||2,i=Cle(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:i,layout:hv(r)}}function j0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.length,i=rC(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:i,layout:hv(r)}}function Zz(t,e){t=Ch(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=U0t(t);break}case"LineString":{r=$0t(t);break}case"Polygon":{r=B0t(t,e);break}case"MultiPoint":{r=z0t(t);break}case"MultiLineString":{r=V0t(t);break}case"MultiPolygon":{r=G0t(t,e);break}case"GeometryCollection":{r=F0t(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function F0t(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return Zz(r,e)})}}function $0t(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function V0t(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function z0t(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function G0t(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function U0t(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function B0t(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const g5="http://www.w3.org/2001/XMLSchema-instance";function Av(t,e){return Vb().createElementNS(t,e)}function Ih(t,e){return Pbe(t,e,[]).join("")}function Pbe(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)Pbe(r,e,n)}return n}function ip(t){return"documentElement"in t}function sp(t){return new DOMParser().parseFromString(t,"application/xml")}function Koe(t,e){return(function(n,r){const i=t.call(e??this,n,r);if(i!==void 0){const s=r[r.length-1];xr(s,i)}})}function sh(t,e){return(function(n,r){const i=t.call(e??this,n,r);i!==void 0&&r[r.length-1].push(i)})}function Dq(t,e){return(function(n,r){const i=t.call(this,n,r);i!==void 0&&(r[r.length-1]=i)})}function tt(t,e,n){return(function(r,i){const s=t.call(this,r,i);if(s!==void 0){const o=i[i.length-1],a=e!==void 0?e:r.localName;o[a]=s}})}function mt(t,e){return(function(n,r,i){t.call(this,n,r,i),i[i.length-1].node.appendChild(n)})}function Rbe(t,e){let n,r;return function(i,s,o){if(n===void 0){n={};const a={};a[i.localName]=t,n[i.namespaceURI]=a,r=Ph(i.localName)}Mbe(n,r,s,o)}}function Ph(t,e){return(function(n,r,i){const o=r[r.length-1].node;let a=t;a===void 0&&(a=i);const l=o.namespaceURI;return Av(l,a)})}const wa=Ph();function Rl(t,e){const n=e.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=t[e[i]];return r}function Ct(t,e,n){n=n!==void 0?n:{};let r,i;for(r=0,i=t.length;r<i;++r)n[t[r]]=e;return n}function w0(t,e,n,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=t[i.namespaceURI];if(s!==void 0){const o=s[i.localName];o!==void 0&&o.call(r,i,n)}}}function ir(t,e,n,r,i){return r.push(t),w0(e,n,r,i),r.pop()}function Mbe(t,e,n,r,i,s){const o=(i!==void 0?i:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],a!==void 0&&(l=e.call(s,a,r,i!==void 0?i[c]:void 0),l!==void 0&&t[l.namespaceURI][l.localName].call(s,l,a,r))}function si(t,e,n,r,i,s,o){return i.push(t),Mbe(e,n,r,i,s,o),i.pop()}let y$;function W0t(){return y$===void 0&&typeof XMLSerializer<"u"&&(y$=new XMLSerializer),y$}let v$;function Vb(){return v$===void 0&&typeof document<"u"&&(v$=document.implementation.createDocument("","",null)),v$}class Nbe extends Cbe{constructor(){super(),this.xmlSerializer_=W0t()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if(typeof e=="string"){const r=sp(e);return this.readFeatureFromDocument(r,n)}return ip(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if(typeof e=="string"){const r=sp(e);return this.readFeaturesFromDocument(r,n)}return ip(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&xr(r,this.readFeaturesFromNode(i,n));return r}readFeaturesFromNode(e,n){return Sn()}readGeometry(e,n){if(!e)return null;if(typeof e=="string"){const r=sp(e);return this.readGeometryFromDocument(r,n)}return ip(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const n=sp(e);return this.readProjectionFromDocument(n)}return ip(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}}function o0(t){const e=Ih(t,!1);return H0t(e)}function H0t(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function qO(t){const e=Ih(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function br(t){const e=Ih(t,!1);return q0t(e)}function q0t(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function VA(t){const e=Ih(t,!1);return K0t(e)}function K0t(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Bn(t){return Ih(t,!1).trim()}function tb(t,e){Cr(t,e?"1":"0")}function Y0t(t,e){t.appendChild(Vb().createCDATASection(e))}function X0t(t,e){const n=new Date(e*1e3),r=n.getUTCFullYear()+"-"+IE(n.getUTCMonth()+1,2)+"-"+IE(n.getUTCDate(),2)+"T"+IE(n.getUTCHours(),2)+":"+IE(n.getUTCMinutes(),2)+":"+IE(n.getUTCSeconds(),2)+"Z";t.appendChild(Vb().createTextNode(r))}function ml(t,e){const n=e.toPrecision();t.appendChild(Vb().createTextNode(n))}function y5(t,e){const n=e.toString();t.appendChild(Vb().createTextNode(n))}const Z0t=/^\s/,J0t=/\s$/,Q0t=/(\n|\t|\r|<|&| {2})/;function Cr(t,e){typeof e=="string"&&(Z0t.test(e)||J0t.test(e)||Q0t.test(e))?e.split("]]>").forEach((n,r,i)=>{r<i.length-1&&(n+="]]"),r>0&&(n=">"+n),Y0t(t,n)}):t.appendChild(Vb().createTextNode(e))}const mi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],eyt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",tyt={rte:Lbe,trk:Obe,wpt:Dbe},nyt=Ct(mi,{rte:sh(Lbe),trk:sh(Obe),wpt:sh(Dbe)}),ryt=Ct(mi,{text:tt(Bn,"linkText"),type:tt(Bn,"linkType")}),iyt=Ct(mi,{name:tt(Bn),email:Ryt,link:hI}),syt=Ct(mi,{name:tt(Bn),desc:tt(Bn),author:tt(Cyt),copyright:tt(Iyt),link:hI,time:tt(qO),keywords:tt(Bn),bounds:Pyt,extensions:KO}),oyt=Ct(mi,{year:tt(VA),license:tt(Bn)}),ayt=Ct(mi,{rte:mt(Oyt),trk:mt(Dyt),wpt:mt(Fyt)});class lyt extends Nbe{constructor(e){super(),e=e||{},this.dataProjection=Jr("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(sp(e)):ip(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!mi.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(mi.includes(n.namespaceURI)&&n.localName==="metadata")return ir({},syt,n,[]);return null}readFeatureFromNode(e,n){if(!mi.includes(e.namespaceURI))return null;const r=tyt[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!mi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=ir([],nyt,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Av("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",g5),r.setAttributeNS(g5,"xsi:schemaLocation",eyt),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),si({node:r},ayt,Ayt,e,[n]),r}}const cyt=Ct(mi,{name:tt(Bn),cmt:tt(Bn),desc:tt(Bn),src:tt(Bn),link:hI,number:tt(VA),extensions:KO,type:tt(Bn),rtept:Myt}),uyt=Ct(mi,{ele:tt(br),time:tt(qO)}),hyt=Ct(mi,{name:tt(Bn),cmt:tt(Bn),desc:tt(Bn),src:tt(Bn),link:hI,number:tt(VA),type:tt(Bn),extensions:KO,trkseg:Lyt}),dyt=Ct(mi,{trkpt:Nyt}),fyt=Ct(mi,{ele:tt(br),time:tt(qO)}),pyt=Ct(mi,{ele:tt(br),time:tt(qO),magvar:tt(br),geoidheight:tt(br),name:tt(Bn),cmt:tt(Bn),desc:tt(Bn),src:tt(Bn),link:hI,sym:tt(Bn),type:tt(Bn),fix:tt(Bn),sat:tt(VA),hdop:tt(br),vdop:tt(br),pdop:tt(br),ageofdgpsdata:tt(br),dgpsid:tt(VA),extensions:KO}),myt=["text","type"],gyt=Ct(mi,{text:mt(Cr),type:mt(Cr)}),yyt=Ct(mi,["name","cmt","desc","src","link","number","type","rtept"]),vyt=Ct(mi,{name:mt(Cr),cmt:mt(Cr),desc:mt(Cr),src:mt(Cr),link:mt($q),number:mt(y5),type:mt(Cr),rtept:Rbe(mt(Vq))}),_yt=Ct(mi,["ele","time"]),xyt=Ct(mi,["name","cmt","desc","src","link","number","type","trkseg"]),wyt=Ct(mi,{name:mt(Cr),cmt:mt(Cr),desc:mt(Cr),src:mt(Cr),link:mt($q),number:mt(y5),type:mt(Cr),trkseg:Rbe(mt(jyt))}),byt=Ph("trkpt"),Eyt=Ct(mi,{trkpt:mt(Vq)}),Syt=Ct(mi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Tyt=Ct(mi,{ele:mt(ml),time:mt(X0t),magvar:mt(ml),geoidheight:mt(ml),name:mt(Cr),cmt:mt(Cr),desc:mt(Cr),src:mt(Cr),link:mt($q),sym:mt(Cr),type:mt(Cr),fix:mt(Cr),sat:mt(y5),hdop:mt(ml),vdop:mt(ml),pdop:mt(ml),ageofdgpsdata:mt(ml),dgpsid:mt(y5)}),kyt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Ayt(t,e,n){const r=t.getGeometry();if(r){const i=kyt[r.getType()];if(i){const s=e[e.length-1].node;return Av(s.namespaceURI,i)}}}function jq(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function Fq(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function Cyt(t,e){const n=ir({},iyt,t,e);if(n)return n}function Iyt(t,e){const n=ir({},oyt,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function Pyt(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function Ryt(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function hI(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),w0(ryt,t,e)}function KO(t,e){const n=e[e.length-1];n.extensionsNode_=t}function Myt(t,e){const n=ir({},uyt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;jq(i,s,t,n)}}function Nyt(t,e){const n=ir({},fyt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;jq(i,s,t,n)}}function Lyt(t,e){const n=e[e.length-1];w0(dyt,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function Lbe(t,e){const n=e[0],r=ir({flatCoordinates:[],layoutOptions:{}},cyt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=Fq(s,i),a=new ns(i,o);Ch(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function Obe(t,e){const n=e[0],r=ir({flatCoordinates:[],ends:[],layoutOptions:{}},hyt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=Fq(o,i,s),l=new _h(i,a,s);Ch(l,!1,n);const c=new yr(l);return c.setProperties(r,!0),c}function Dbe(t,e){const n=e[0],r=ir({},pyt,t,e);if(!r)return;const i={},s=jq([],i,t,r),o=Fq(i,s),a=new ki(s,o);Ch(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function $q(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];si({node:t},gyt,wa,s,n,myt)}function Vq(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=t.nodeName=="rtept"?_yt[s]:Syt[s],c=Rl(o,l);si({node:t,properties:o},Tyt,wa,c,n,l)}function Oyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="LineString"){const u=Ch(o,!0,r);s.geometryLayout=u.getLayout(),i.rtept=u.getCoordinates()}const a=n[n.length-1].node,l=yyt[a.namespaceURI],c=Rl(i,l);si(s,vyt,wa,c,n,l)}function Dyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=Ch(o,!0,r);i.trkseg=u.getLineStrings()}const a=n[n.length-1].node,l=xyt[a.namespaceURI],c=Rl(i,l);si(s,wyt,wa,c,n,l)}function jyt(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},si(r,Eyt,byt,e.getCoordinates(),n)}function Fyt(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Ch(s,!0,r);i.geometryLayout=o.getLayout(),Vq(t,o.getCoordinates(),n)}}const Fp=["http://www.google.com/kml/ext/2.2"],Zt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],$yt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Yoe={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Vyt=Ct(Zt,{ExtendedData:Zbe,Region:Jbe,MultiGeometry:tt(Kbe,"geometry"),LineString:tt(Hbe,"geometry"),LinearRing:tt(qbe,"geometry"),Point:tt(Ybe,"geometry"),Polygon:tt(Xbe,"geometry"),Style:tt(Uq),StyleMap:E1t,address:tt(Bn),description:tt(Bn),name:tt(Bn),open:tt(o0),phoneNumber:tt(Bn),styleUrl:tt(zbe),visibility:tt(o0)},Ct(Fp,{MultiTrack:tt(u1t,"geometry"),Track:tt(Wbe,"geometry")})),zyt=Ct(Zt,{ExtendedData:Zbe,Region:Jbe,Link:O1t,address:tt(Bn),description:tt(Bn),name:tt(Bn),open:tt(o0),phoneNumber:tt(Bn),visibility:tt(o0)}),Gyt=Ct(Zt,{href:tt(Vbe)}),Uyt=Ct(Zt,{Altitude:tt(br),Longitude:tt(br),Latitude:tt(br),Tilt:tt(br),AltitudeMode:tt(Bn),Heading:tt(br),Roll:tt(br)}),jbe=Ct(Zt,{LatLonAltBox:C1t,Lod:P1t}),Byt=Ct(Zt,["Document","Placemark"]),Wyt=Ct(Zt,{Document:mt(U1t),Placemark:mt(tEe)});let Pw,G3=null,Jz,ck,uk,hk,v5,Qz=null,zq,eG=null,tG,e1=null,Xoe=null,nG=null;function _5(t){return 32/Math.min(t[0],t[1])}function Hyt(){Pw=[255,255,255,1],G3=new jn({color:Pw}),Jz=[20,2],ck="pixels",uk="pixels",hk=[64,64],v5="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Qz=new oC({anchor:Jz,anchorOrigin:"bottom-left",anchorXUnits:ck,anchorYUnits:uk,crossOrigin:"anonymous",rotation:0,scale:_5(hk),size:hk,src:v5}),zq="NO_IMAGE",eG=new Mn({color:Pw,width:1}),tG=new Mn({color:[51,51,51,1],width:2}),e1=new mc({font:"bold 16px Helvetica",fill:G3,stroke:tG,scale:.8}),Xoe=new xn({fill:G3,image:Qz,text:e1,stroke:eG,zIndex:0}),nG=[Xoe]}let GR;function qyt(t){return t}class Kyt extends Nbe{constructor(e){super(),e=e||{},nG||Hyt(),this.dataProjection=Jr("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:nG,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:qyt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,n){const r=Ct(Zt,{Document:Koe(this.readDocumentOrFolder_,this),Folder:Koe(this.readDocumentOrFolder_,this),Placemark:sh(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=ir([],r,e,n,this);if(i)return i}readPlacemark_(e,n){const r=ir({geometry:null},Vyt,e,n,this);if(!r)return;const i=new yr,s=e.getAttribute("id");s!==null&&i.setId(s);const o=n[0],a=r.geometry;if(a&&Ch(a,!1,o),i.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,u=Xyt(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,n){const r=e.getAttribute("id");if(r!==null){const i=Uq.call(this,e,n);if(i){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,n){const r=e.getAttribute("id");if(r===null)return;const i=Ube.call(this,e,n);if(!i)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,n){if(!Zt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null}readFeaturesFromNode(e,n){if(!Zt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,n);o&&xr(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const n=sp(e);return this.readNameFromDocument(n)}return ip(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(n);if(r)return r}}readNameFromNode(e){for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Zt.includes(n.namespaceURI)&&n.localName=="name")return Bn(n);for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;if(Zt.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(n);if(i)return i}}}readNetworkLinks(e){const n=[];if(typeof e=="string"){const r=sp(e);xr(n,this.readNetworkLinksFromDocument(r))}else ip(e)?xr(n,this.readNetworkLinksFromDocument(e)):xr(n,this.readNetworkLinksFromNode(e));return n}readNetworkLinksFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readNetworkLinksFromNode(r));return n}readNetworkLinksFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=ir({},zyt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readNetworkLinksFromNode(r))}return n}readRegion(e){const n=[];if(typeof e=="string"){const r=sp(e);xr(n,this.readRegionFromDocument(r))}else ip(e)?xr(n,this.readRegionFromDocument(e)):xr(n,this.readRegionFromNode(e));return n}readRegionFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readRegionFromNode(r));return n}readRegionFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName=="Region"){const i=ir({},jbe,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readRegionFromNode(r))}return n}readCamera(e){const n=[];if(typeof e=="string"){const r=sp(e);xr(n,this.readCameraFromDocument(r))}else ip(e)?xr(n,this.readCameraFromDocument(e)):xr(n,this.readCameraFromNode(e));return n}readCameraFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&xr(n,this.readCameraFromNode(r));return n}readCameraFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=ir({},Uyt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&xr(n,this.readCameraFromNode(r))}return n}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Av(Zt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",Fp[0]),r.setAttributeNS(i,"xmlns:xsi",g5),r.setAttributeNS(g5,"xsi:schemaLocation",$yt);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=Byt[r.namespaceURI],l=Rl(o,a);return si(s,Wyt,wa,l,[n],a,this),r}}function Yyt(t,e){const n=[0,0];let r="start";const i=t.getImage();if(i){const a=i.getSize();if(a&&a.length==2){const l=i.getScaleArray(),c=i.getAnchor();n[0]=l[0]*(a[0]-c[0]),n[1]=l[1]*(a[1]/2-c[1]),r="left"}}let s=t.getText();return s?(s=s.clone(),s.setFont(s.getFont()||e1.getFont()),s.setScale(s.getScale()||e1.getScale()),s.setFill(s.getFill()||e1.getFill()),s.setStroke(s.getStroke()||tG)):s=e1.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(r),new xn({image:i,text:s})}function Xyt(t,e,n,r,i){return(function(s,o){let a=i,l="",c=[];if(a){const h=s.getGeometry();if(h)if(h instanceof du)c=h.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Point"||g==="MultiPoint"}),a=c.length>0;else{const f=h.getType();a=f==="Point"||f==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(GR||(GR=document.createElement("textarea")),GR.innerHTML=l,l=GR.value));let u=n;if(t?u=t:e&&(u=Fbe(e,n,r)),a){const h=Yyt(u[0],l);if(c.length>0){h.setGeometry(new du(c));const f=new xn({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[h,f].concat(u.slice(1))}return h}return u})}function Fbe(t,e,n){return Array.isArray(t)?t:typeof t=="string"?Fbe(n[t],e,n):e}function YO(t){const e=Ih(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function $be(t){let e=Ih(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),o=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;n.push(s,o,a),e=e.substr(i[0].length)}if(e==="")return n}function Vbe(t){const e=Ih(t,!1).trim();let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function zbe(t){const e=Ih(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function Zyt(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let r;return e!=="insetPixels"?n!=="insetPixels"?r="bottom-left":r="top-left":n!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(t.getAttribute("x")),xunits:Yoe[e],y:parseFloat(t.getAttribute("y")),yunits:Yoe[n],origin:r}}function Gbe(t){return br(t)}const Jyt=Ct(Zt,{Pair:b1t});function Ube(t,e){return ir(void 0,Jyt,t,e,this)}const Qyt=Ct(Zt,{Icon:tt(f1t),color:tt(YO),heading:tt(br),hotSpot:tt(Zyt),scale:tt(Gbe)});function e1t(t,e){const n=ir({},Qyt,t,e);if(!n)return;const r=e[e.length-1],i="Icon"in n?n.Icon:{},s=!("Icon"in n)||Object.keys(i).length>0;let o;const a=i.href;a?o=a:s&&(o=v5);let l,c,u,h="bottom-left";const f=n.hotSpot;f?(l=[f.x,f.y],c=f.xunits,u=f.yunits,h=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=Jz,c=ck,u=uk):o.includes("arrow-reverse")?(l=[54,42],c=ck,u=uk):o.includes("paddle")&&(l=[32,1],c=ck,u=uk));let g;const y=i.x,_=i.y;y!==void 0&&_!==void 0&&(g=[y,_]);let b;const T=i.w,A=i.h;T!==void 0&&A!==void 0&&(b=[T,A]);let C;const I=n.heading;I!==void 0&&(C=uu(I));const R=n.scale,V=n.color;if(s){o==v5&&(b=hk);const P=new oC({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:g,offsetOrigin:"bottom-left",rotation:C,scale:R,size:b,src:this.iconUrlFunction_(o),color:V}),N=P.getScaleArray()[0],L=P.getSize();if(L===null){const O=P.getImageState();if(O===zt.IDLE||O===zt.LOADING){const F=function(){const G=P.getImageState();if(!(G===zt.IDLE||G===zt.LOADING)){const U=P.getSize();if(U&&U.length==2){const ue=_5(U);P.setScale(N*ue)}P.unlistenImageChange(F)}};P.listenImageChange(F),O===zt.IDLE&&P.load()}}else if(L.length==2){const O=_5(L);P.setScale(N*O)}r.imageStyle=P}else r.imageStyle=zq}const t1t=Ct(Zt,{color:tt(YO),scale:tt(Gbe)});function n1t(t,e){const n=ir({},t1t,t,e);if(!n)return;const r=e[e.length-1],i=new mc({fill:new jn({color:"color"in n?n.color:Pw}),scale:n.scale});r.textStyle=i}const r1t=Ct(Zt,{color:tt(YO),width:tt(br)});function i1t(t,e){const n=ir({},r1t,t,e);if(!n)return;const r=e[e.length-1],i=new Mn({color:"color"in n?n.color:Pw,width:"width"in n?n.width:1});r.strokeStyle=i}const s1t=Ct(Zt,{color:tt(YO),fill:tt(o0),outline:tt(o0)});function o1t(t,e){const n=ir({},s1t,t,e);if(!n)return;const r=e[e.length-1],i=new jn({color:"color"in n?n.color:Pw});r.fillStyle=i;const s=n.fill;s!==void 0&&(r.fill=s);const o=n.outline;o!==void 0&&(r.outline=o)}const a1t=Ct(Zt,{coordinates:Dq($be)});function Bbe(t,e){return ir(null,a1t,t,e)}function l1t(t,e){const r=e[e.length-1].coordinates,i=Ih(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);r.push([a,l,c])}else r.push([])}const c1t=Ct(Fp,{Track:sh(Wbe)});function u1t(t,e){const n=ir([],c1t,t,e);if(n)return new _h(n)}const h1t=Ct(Zt,{when:D1t},Ct(Fp,{coord:l1t}));function Wbe(t,e){const n=ir({coordinates:[],whens:[]},h1t,t,e);if(!n)return;const r=[],i=n.coordinates,s=n.whens;for(let o=0,a=Math.min(i.length,s.length);o<a;++o)i[o].length==3&&r.push(i[o][0],i[o][1],i[o][2],s[o]);return new ns(r,"XYZM")}const d1t=Ct(Zt,{href:tt(Vbe)},Ct(Fp,{x:tt(br),y:tt(br),w:tt(br),h:tt(br)}));function f1t(t,e){const n=ir({},d1t,t,e);return n||null}const p1t=Ct(Zt,{coordinates:Dq($be)});function Gq(t,e){return ir(null,p1t,t,e)}const XO=Ct(Zt,{extrude:tt(o0),tessellate:tt(o0),altitudeMode:tt(Bn)});function Hbe(t,e){const n=ir({},XO,t,e),r=Gq(t,e);if(r){const i=new ns(r,"XYZ");return i.setProperties(n,!0),i}}function qbe(t,e){const n=ir({},XO,t,e),r=Gq(t,e);if(r){const i=new Il(r,"XYZ",[r.length]);return i.setProperties(n,!0),i}}const m1t=Ct(Zt,{LineString:sh(Hbe),LinearRing:sh(qbe),MultiGeometry:sh(Kbe),Point:sh(Ybe),Polygon:sh(Xbe)});function Kbe(t,e){const n=ir([],m1t,t,e);if(!n)return null;if(n.length===0)return new du(n);let r,i=!0;const s=n[0].getType();let o;for(let a=1,l=n.length;a<l;++a)if(o=n[a],o.getType()!=s){i=!1;break}if(i){let a,l;if(s=="Point"){const c=n[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let u=1,h=n.length;u<h;++u)o=n[u],xr(l,o.getFlatCoordinates());r=new h0(l,a),_$(r,n)}else if(s=="LineString")r=new _h(n),_$(r,n);else if(s=="Polygon")r=new wp(n),_$(r,n);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new du(n);else throw new Error("Unknown geometry type found")}else r=new du(n);return r}function Ybe(t,e){const n=ir({},XO,t,e),r=Gq(t,e);if(r){const i=new ki(r,"XYZ");return i.setProperties(n,!0),i}}const g1t=Ct(Zt,{innerBoundaryIs:M1t,outerBoundaryIs:L1t});function Xbe(t,e){const n=ir({},XO,t,e),r=ir([null],g1t,t,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let a=1,l=r.length;a<l;++a)xr(i,r[a]),s.push(i.length);const o=new Il(i,"XYZ",s);return o.setProperties(n,!0),o}}const y1t=Ct(Zt,{IconStyle:e1t,LabelStyle:n1t,LineStyle:i1t,PolyStyle:o1t});function Uq(t,e){const n=ir({},y1t,t,e,this);if(!n)return null;let r="fillStyle"in n?n.fillStyle:G3;const i=n.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in n?n.imageStyle!=zq&&(s=n.imageStyle):s=Qz;const o="textStyle"in n?n.textStyle:e1,a="strokeStyle"in n?n.strokeStyle:eG,l=n.outline;return l!==void 0&&!l?[new xn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new du(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y!=="Polygon"&&y!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return u},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new xn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new du(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y==="Polygon"||y==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return u},fill:r,stroke:null,zIndex:void 0})]:[new xn({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function _$(t,e){const n=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<n;++c){const u=e[c];r[c]=u.get("extrude"),i[c]=u.get("tessellate"),s[c]=u.get("altitudeMode"),o=o||r[c]!==void 0,a=a||i[c]!==void 0,l=l||s[c]}o&&t.set("extrude",r),a&&t.set("tessellate",i),l&&t.set("altitudeMode",s)}const v1t=Ct(Zt,{displayName:tt(Bn),value:tt(Bn)});function _1t(t,e){const n=t.getAttribute("name");w0(v1t,t,e);const r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:n!==null?r[n]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const x1t=Ct(Zt,{Data:_1t,SchemaData:T1t});function Zbe(t,e){w0(x1t,t,e)}function Jbe(t,e){w0(jbe,t,e)}const w1t=Ct(Zt,{Style:tt(Uq),key:tt(Bn),styleUrl:tt(zbe)});function b1t(t,e){const n=ir({},w1t,t,e,this);if(!n)return;const r=n.key;if(r&&r=="normal"){const i=n.styleUrl;i&&(e[e.length-1]=i);const s=n.Style;s&&(e[e.length-1]=s)}}function E1t(t,e){const n=Ube.call(this,t,e);if(!n)return;const r=e[e.length-1];if(Array.isArray(n))r.Style=n;else if(typeof n=="string")r.styleUrl=n;else throw new Error("`styleMapValue` has an unknown type")}const S1t=Ct(Zt,{SimpleData:k1t});function T1t(t,e){w0(S1t,t,e)}function k1t(t,e){const n=t.getAttribute("name");if(n!==null){const r=Bn(t),i=e[e.length-1];i[n]=r}}const A1t=Ct(Zt,{altitudeMode:tt(Bn),minAltitude:tt(br),maxAltitude:tt(br),north:tt(br),south:tt(br),east:tt(br),west:tt(br)});function C1t(t,e){const n=ir({},A1t,t,e);if(!n)return;const r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}const I1t=Ct(Zt,{minLodPixels:tt(br),maxLodPixels:tt(br),minFadeExtent:tt(br),maxFadeExtent:tt(br)});function P1t(t,e){const n=ir({},I1t,t,e);if(!n)return;const r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}const R1t=Ct(Zt,{LinearRing:sh(Bbe)});function M1t(t,e){const n=ir([],R1t,t,e);n.length>0&&e[e.length-1].push(...n)}const N1t=Ct(Zt,{LinearRing:Dq(Bbe)});function L1t(t,e){const n=ir(void 0,N1t,t,e);if(n){const r=e[e.length-1];r[0]=n}}function O1t(t,e){w0(Gyt,t,e)}function D1t(t,e){const r=e[e.length-1].whens,i=Ih(t,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function ZO(t,e){const n=yu(e),i=[(n.length==4?n[3]:1)*255,n[2],n[1],n[0]];for(let s=0;s<4;++s){const o=Math.floor(i[s]).toString(16);i[s]=o.length==1?"0"+o:o}Cr(t,i.join(""))}function j1t(t,e,n){const r=n[n.length-1],i=r.layout,s=r.stride;let o;if(i=="XY"||i=="XYM")o=2;else if(i=="XYZ"||i=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let u=1;u<o;++u)l+=","+e[c+u]}}Cr(t,l)}const U3=Ct(Zt,{Data:mt(F1t),value:mt(V1t),displayName:mt($1t)});function F1t(t,e,n){t.setAttribute("name",e.name);const r={node:t},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&si(r,U3,wa,[i.displayName],n,["displayName"]),i!==null&&i.value&&si(r,U3,wa,[i.value],n,["value"])):si(r,U3,wa,[i],n,["value"])}function $1t(t,e){Cr(t,e)}function V1t(t,e){Cr(t,e)}const z1t=Ct(Zt,{Placemark:mt(tEe)}),G1t=function(t,e,n){const r=e[e.length-1].node;return Av(r.namespaceURI,"Placemark")};function U1t(t,e,n){si({node:t},z1t,G1t,e,n,void 0,this)}const B1t=Ph("Data");function W1t(t,e,n){const r={node:t},i=e.names,s=e.values,o=i.length;for(let a=0;a<o;a++)si(r,U3,B1t,[{name:i[a],value:s[a]}],n)}const Zoe=Ct(Zt,["href"],Ct(Fp,["x","y","w","h"])),Joe=Ct(Zt,{href:mt(Cr)},Ct(Fp,{x:mt(ml),y:mt(ml),w:mt(ml),h:mt(ml)})),H1t=function(t,e,n){return Av(Fp[0],"gx:"+n)};function q1t(t,e,n){const r={node:t},i=n[n.length-1].node;let s=Zoe[i.namespaceURI],o=Rl(e,s);si(r,Joe,wa,o,n,s),s=Zoe[Fp[0]],o=Rl(e,s),si(r,Joe,H1t,o,n,s)}const K1t=Ct(Zt,["scale","heading","Icon","color","hotSpot"]),Y1t=Ct(Zt,{Icon:mt(q1t),color:mt(ZO),heading:mt(ml),hotSpot:mt(bvt),scale:mt(rEe)});function X1t(t,e,n){const r={node:t},i={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const b=e.getAnchor(),T=e.getOrigin();if(T&&a&&T[0]!==0&&T[1]!==o[1]&&(l.x=T[0],l.y=a[1]-(T[1]+o[1])),b&&(b[0]!==o[0]/2||b[1]!==o[1]/2)){const A={x:b[0],xunits:"pixels",y:o[1]-b[1],yunits:"pixels"};i.hotSpot=A}}i.Icon=l;let c=e.getScaleArray()[0],u=o;if(u===null&&(u=hk),u.length==2){const b=_5(u);c=c/b}c!==1&&(i.scale=c);const h=e.getRotation();h!==0&&(i.heading=h);const f=e.getColor();f&&(i.color=f);const g=n[n.length-1].node,y=K1t[g.namespaceURI],_=Rl(i,y);si(r,Y1t,wa,_,n,y)}const Z1t=Ct(Zt,["color","scale"]),J1t=Ct(Zt,{color:mt(ZO),scale:mt(rEe)});function Q1t(t,e,n){const r={node:t},i={},s=e.getFill();s&&(i.color=s.getColor());const o=e.getScale();o&&o!==1&&(i.scale=o);const a=n[n.length-1].node,l=Z1t[a.namespaceURI],c=Rl(i,l);si(r,J1t,wa,c,n,l)}const evt=Ct(Zt,["color","width"]),tvt=Ct(Zt,{color:mt(ZO),width:mt(ml)});function nvt(t,e,n){const r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=evt[s.namespaceURI],a=Rl(i,o);si(r,tvt,wa,a,n,o)}const rvt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Qbe=function(t,e,n){if(t){const r=e[e.length-1].node;return Av(r.namespaceURI,rvt[t.getType()])}},ivt=Ph("Point"),svt=Ph("LineString"),ovt=Ph("LinearRing"),avt=Ph("Polygon"),lvt=Ct(Zt,{LineString:mt(Rw),Point:mt(Rw),Polygon:mt(nEe),GeometryCollection:mt(eEe)});function eEe(t,e,n){const r={node:t},i=e.getType();let s=[],o;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=Qbe;else if(i==="MultiPoint")s=e.getPoints(),o=ivt;else if(i==="MultiLineString")s=e.getLineStrings(),o=svt;else if(i==="MultiPolygon")s=e.getPolygons(),o=avt;else throw new Error("Unknown geometry type");si(r,lvt,o,s,n)}const cvt=Ct(Zt,{LinearRing:mt(Rw)});function Qoe(t,e,n){si({node:t},cvt,ovt,[e],n)}const x$=Ct(Zt,{ExtendedData:mt(W1t),MultiGeometry:mt(eEe),LineString:mt(Rw),LinearRing:mt(Rw),Point:mt(Rw),Polygon:mt(nEe),Style:mt(wvt),address:mt(Cr),description:mt(Cr),name:mt(Cr),open:mt(tb),phoneNumber:mt(Cr),styleUrl:mt(Cr),visibility:mt(tb)}),uvt=Ct(Zt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),hvt=Ph("ExtendedData");function tEe(t,e,n){const r={node:t};e.getId()&&t.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(i||{}).sort().filter(function(g){return!s[g]}),a=e.getStyleFunction();if(a){const g=a(e,0);if(g){const y=Array.isArray(g)?g:[g];let _=y;if(e.getGeometry()&&(_=y.filter(function(b){const T=b.getGeometryFunction()(e);if(T){const A=T.getType();return A==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(C){const I=C.getType();return I==="Point"||I==="MultiPoint"}).length:A==="Point"||A==="MultiPoint"}})),this.writeStyles_){let b=y,T=y;e.getGeometry()&&(b=y.filter(function(A){const C=A.getGeometryFunction()(e);if(C){const I=C.getType();return I==="GeometryCollection"?C.getGeometriesArrayRecursive().filter(function(R){const V=R.getType();return V==="LineString"||V==="MultiLineString"}).length:I==="LineString"||I==="MultiLineString"}}),T=y.filter(function(A){const C=A.getGeometryFunction()(e);if(C){const I=C.getType();return I==="GeometryCollection"?C.getGeometriesArrayRecursive().filter(function(R){const V=R.getType();return V==="Polygon"||V==="MultiPolygon"}).length:I==="Polygon"||I==="MultiPolygon"}})),i.Style={pointStyles:_,lineStyles:b,polyStyles:T}}if(_.length&&i.name===void 0){const b=_[0].getText();b&&(i.name=b.getText())}}}const l=n[n.length-1].node,c=uvt[l.namespaceURI],u=Rl(i,c);if(si(r,x$,wa,u,n,c),o.length>0){const g=Rl(i,o);si(r,x$,hvt,[{names:o,values:g}],n)}const h=n[0];let f=e.getGeometry();f&&(f=Ch(f,!0,h)),si(r,x$,Qbe,[f],n)}const dvt=Ct(Zt,["extrude","tessellate","altitudeMode","coordinates"]),fvt=Ct(Zt,{extrude:mt(tb),tessellate:mt(tb),altitudeMode:mt(Cr),coordinates:mt(j1t)});function Rw(t,e,n){const r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=n[n.length-1].node,a=dvt[o.namespaceURI],l=Rl(s,a);si(i,fvt,wa,l,n,a)}const pvt=Ct(Zt,["color","fill","outline"]),eae=Ct(Zt,{outerBoundaryIs:mt(Qoe),innerBoundaryIs:mt(Qoe)}),mvt=Ph("innerBoundaryIs"),gvt=Ph("outerBoundaryIs");function nEe(t,e,n){const r=e.getLinearRings(),i=r.shift(),s={node:t};si(s,eae,mvt,r,n),si(s,eae,gvt,[i],n)}const yvt=Ct(Zt,{color:mt(ZO),fill:mt(tb),outline:mt(tb)});function vvt(t,e,n){const r={node:t},i=e.getFill(),s=e.getStroke(),o={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},a=n[n.length-1].node,l=pvt[a.namespaceURI],c=Rl(o,l);si(r,yvt,wa,c,n,l)}function rEe(t,e){ml(t,Math.round(e*1e6)/1e6)}const _vt=Ct(Zt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),xvt=Ct(Zt,{IconStyle:mt(X1t),LabelStyle:mt(Q1t),LineStyle:mt(nvt),PolyStyle:mt(vvt)});function wvt(t,e,n){const r={node:t},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,o=_vt[s.namespaceURI],a=Rl(i,o);si(r,xvt,wa,a,n,o)}function bvt(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}function iEe(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const s=e[r];if(!uM(s)){const o=t.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),Y3(new z5({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<n;++r){const s=e[r],o=uM(s);for(i=0;i<n;++i){const a=e[i],l=uM(a);if(!hM(s,a))if(t.defs[s]===t.defs[a])Q$([o,l]);else{const c=t(s,a);sAe(o,l,HX(o,l,c.forward),HX(l,o,c.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");iEe(lr);let t1=null,dk=null,Ax=null;function rG(t){t1&&(t.removeLayer(t1),t1=null),dk&&(t.removeLayer(dk),dk=null),Ax=null}async function Evt(t,e){try{const n=$n(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${n[0].toFixed(5)}, ${n[1].toFixed(5)}`);const r=lr("EPSG:4326","EPSG:28992",n);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;rG(t);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,o=Date.now(),a=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${o}`;console.log(" WFS URL:",a);const l=new AbortController,c=setTimeout(()=>l.abort(),1e4),u=await fetch(a,{signal:l.signal});if(clearTimeout(c),!u.ok)return console.error("WFS request failed:",u.status),!1;const h=await u.json();if(console.log(" WFS RESPONSE:",JSON.stringify(h).substring(0,500)),!h.features||h.features.length===0)return console.log("No parcel found at location"),!1;const f=h.features[0];console.log(" PARCEL ID:",f.id||f.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(f.bbox||"geen bbox"));const y=new HO().readFeature(f,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),_=y.getGeometry();if(!_)return console.log("No geometry in parcel feature"),!1;const b=f.properties||{};console.log(` Parcel: ${b.category||"unknown"} - ${b.gewasnaam||b.gewas||"geen gewas"}`),console.log(` Geometry type: ${_.getType()}, extent: ${_.getExtent().map(L=>L.toFixed(0)).join(", ")}`);const T=_.getExtent(),A=T[2]-T[0],C=T[3]-T[1],I=Math.max(A,C)*.05,R=[T[0]-I,T[1]-I,T[2]+I,T[3]+I],V=Math.max(A,C)*.3,P=[T[0]-V,T[1]-V,T[2]+V,T[3]+V];Ax=_,t1=new WPe({source:new vRe({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:R,zIndex:998}),t1.on("prerender",L=>{if(!Ax)return;const O=L.context;if(!O)return;const F=L.frameState;if(!F)return;O.save(),O.beginPath(),(Ax.getType()==="Polygon"?Ax.getCoordinates()[0]:Ax.getCoordinates()[0][0]).forEach((U,ue)=>{const be=t.getPixelFromCoordinate(U);if(!be)return;const ze=F.pixelRatio,Ce=be[0]*ze,de=be[1]*ze;ue===0?O.moveTo(Ce,de):O.lineTo(Ce,de)}),O.closePath(),O.clip()}),t1.on("postrender",L=>{const O=L.context;O&&O.restore()}),t.addLayer(t1);const N=new Ll({features:[y]});return dk=new Ol({source:N,style:new xn({fill:new jn({color:"rgba(0, 0, 0, 0)"}),stroke:new Mn({color:"#dc2626",width:3})}),zIndex:999}),t.addLayer(dk),console.log(" Parcel height map displayed"),!0}catch(n){return console.error("Failed to show parcel height map:",n),!1}}var x5={};x5.version="0.18.5";var sEe=1252,Svt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],oEe=function(t){Svt.indexOf(t)!=-1&&(sEe=t)};function Tvt(){oEe(1252)}var zA=function(t){oEe(t)};function kvt(){zA(1200),Tvt()}var UR=function(e){return String.fromCharCode(e)},tae=function(e){return String.fromCharCode(e)},w5,xg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function GA(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=xg.charAt(s)+xg.charAt(o)+xg.charAt(a)+xg.charAt(l);return e}function Pp(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=xg.indexOf(t.charAt(c++)),o=xg.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=xg.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=xg.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Ar=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),$p=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function sv(t){return Ar?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function nae(t){return Ar?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var oh=function(e){return Ar?$p(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function JO(t){if(typeof ArrayBuffer>"u")return oh(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function dI(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Avt(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Oo=Ar?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:$p(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Cvt(t){for(var e=[],n=0,r=t.length+250,i=sv(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=sv(65535),r=65530)}return e.push(i.slice(0,n)),Oo(e)}var fk=/\u0000/g,BR=/[\u0001-\u0006]/g;function Mw(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function fh(t,e){var n=""+t;return n.length>=e?n:Qi("0",e-n.length)+n}function Bq(t,e){var n=""+t;return n.length>=e?n:Qi(" ",e-n.length)+n}function b5(t,e){var n=""+t;return n.length>=e?n:n+Qi(" ",e-n.length)}function Ivt(t,e){var n=""+Math.round(t);return n.length>=e?n:Qi("0",e-n.length)+n}function Pvt(t,e){var n=""+t;return n.length>=e?n:Qi("0",e-n.length)+n}var rae=Math.pow(2,32);function G_(t,e){if(t>rae||t<-rae)return Ivt(t,e);var n=Math.round(t);return Pvt(n,e)}function E5(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var iae=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],w$=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Rvt(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var is={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},sae={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Mvt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function S5(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,h=Math.floor(i);c<e&&(h=Math.floor(i),a=h*o+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var f=Math.floor(r*a/u);return[f,r*a-f*u,u]}function WR(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=$vt(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var aEe=new Date(1899,11,31,0,0,0),Nvt=aEe.getTime(),Lvt=new Date(1900,2,1,0,0,0);function lEe(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Lvt&&(n+=1440*60*1e3),(n-(Nvt+(t.getTimezoneOffset()-aEe.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Wq(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ovt(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Dvt(t){var e=t<0?12:11,n=Wq(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function jvt(t){var e=Wq(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Fvt(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Dvt(t):e===10?n=t.toFixed(10).substr(0,12):n=jvt(t),Wq(Ovt(n.toUpperCase()))}function iG(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Fvt(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return a0(14,lEe(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function $vt(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function Vvt(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return w$[n.m-1][1];case 5:return w$[n.m-1][0];default:return w$[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return iae[n.q][0];default:return iae[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?fh(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=fh(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?fh(l,c):"";return u}function wg(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var cEe=/%/g;function zvt(t,e,n){var r=e.replace(cEe,""),i=e.length-r.length;return yp(t,r,n*Math.pow(10,2*i))+Qi("%",i)}function Gvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return yp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function uEe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+uEe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var hEe=/# (\?+)( ?)\/( ?)(\d+)/;function Uvt(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Qi(" ",t[1].length+1+t[4].length):Bq(o,t[1].length)+t[2]+"/"+t[3]+fh(a,t[4].length))}function Bvt(t,e,n){return n+(e===0?"":""+e)+Qi(" ",t[1].length+2+t[4].length)}var dEe=/^#*0*\.([0#]+)/,fEe=/\).*[0#]/,pEe=/\(###\) ###\\?-####/;function La(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function oae(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function aae(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Wvt(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Hvt(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function qc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(fEe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?qc("n",r,n):"("+qc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Gvt(t,e,n);if(e.indexOf("%")!==-1)return zvt(t,e,n);if(e.indexOf("E")!==-1)return uEe(e,n);if(e.charCodeAt(0)===36)return"$"+qc(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+G_(l,e.length);if(e.match(/^[#?]+$/))return i=G_(n,0),i==="0"&&(i=""),i.length>e.length?i:La(e.substr(0,e.length-i.length))+i;if(s=e.match(hEe))return Uvt(s,l,c);if(e.match(/^#+0+$/))return c+G_(l,e.length-e.indexOf("0"));if(s=e.match(dEe))return i=oae(n,s[1].length).replace(/^([^\.]+)$/,"$1."+La(s[1])).replace(/\.$/,"."+La(s[1])).replace(/\.(\d*)$/,function(y,_){return"."+_+Qi("0",La(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+oae(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+wg(G_(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+qc(t,e,-n):wg(""+(Math.floor(n)+Wvt(n,s[1].length)))+"."+fh(aae(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return qc(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Mw(qc(t,e.replace(/[\\-]/g,""),n)),o=0,Mw(Mw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(pEe))return i=qc(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=S5(l,Math.pow(10,o)-1,!1),i=""+c,u=yp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=b5(a[2],o),u.length<s[4].length&&(u=La(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=S5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Bq(a[1],o)+s[2]+"/"+s[3]+b5(a[2],o):Qi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=G_(n,0),e.length<=i.length?i:La(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return La(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=aae(n,s[1].length),n<0?"-"+qc(t,e,-n):wg(Hvt(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?fh(0,3-y.length):"")+y})+"."+fh(o,s[1].length);switch(e){case"###,##0.00":return qc(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=wg(G_(l,0));return g!=="0"?c+g:"";case"###,###.00":return qc(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return qc(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function qvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return yp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Kvt(t,e,n){var r=e.replace(cEe,""),i=e.length-r.length;return yp(t,r,n*Math.pow(10,2*i))+Qi("%",i)}function mEe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+mEe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function sd(t,e,n){if(t.charCodeAt(0)===40&&!e.match(fEe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?sd("n",r,n):"("+sd("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return qvt(t,e,n);if(e.indexOf("%")!==-1)return Kvt(t,e,n);if(e.indexOf("E")!==-1)return mEe(e,n);if(e.charCodeAt(0)===36)return"$"+sd(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+fh(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:La(e.substr(0,e.length-i.length))+i;if(s=e.match(hEe))return Bvt(s,l,c);if(e.match(/^#+0+$/))return c+fh(l,e.length-e.indexOf("0"));if(s=e.match(dEe))return i=(""+n).replace(/^([^\.]+)$/,"$1."+La(s[1])).replace(/\.$/,"."+La(s[1])),i=i.replace(/\.(\d*)$/,function(y,_){return"."+_+Qi("0",La(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+wg(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+sd(t,e,-n):wg(""+n)+"."+Qi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return sd(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Mw(sd(t,e.replace(/[\\-]/g,""),n)),o=0,Mw(Mw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(pEe))return i=sd(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=S5(l,Math.pow(10,o)-1,!1),i=""+c,u=yp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=b5(a[2],o),u.length<s[4].length&&(u=La(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=S5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Bq(a[1],o)+s[2]+"/"+s[3]+b5(a[2],o):Qi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:La(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return La(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+sd(t,e,-n):wg(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?fh(0,3-y.length):"")+y})+"."+fh(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=wg(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return sd(t,e.slice(0,e.lastIndexOf(".")),n)+La(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function yp(t,e,n){return(n|0)===n?sd(t,e,n):qc(t,e,n)}function Yvt(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var gEe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function yEe(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":E5(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(gEe))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Xvt(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,h,f="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!E5(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),y=g==="("||g===")"?g:"t";i[i.length]={t:y,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=WR(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=WR(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=f),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var _={t:a,v:a};if(c==null&&(c=WR(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(_.v=c.H>=12?"P":"A"),_.t="T",f="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(_.v=c.H>=12?"PM":"AM"),_.t="T",o+=5,f="h"):t.substr(o,5).toUpperCase()==="/"?(c!=null&&(_.v=c.H>=12?"":""),_.t="T",o+=5,f="h"):(_.t="t",++o),c==null&&_.t==="T")return"";i[i.length]=_,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(gEe)){if(c==null&&(c=WR(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",yEe(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var b=0,T=0,A;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=f,l="h",b<1&&(b=1);break;case"s":(A=i[o].v.match(/\.0+$/))&&(T=Math.max(T,A[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[o].v.match(/[Hh]/)&&(b=1),b<2&&i[o].v.match(/[Mm]/)&&(b=2),b<3&&i[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var C="",I;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=Vvt(i[o].t.charCodeAt(0),i[o].v,c,T),i[o].t="t";break;case"n":case"?":for(I=o+1;i[I]!=null&&((a=i[I].t)==="?"||a==="D"||(a===" "||a==="t")&&i[I+1]!=null&&(i[I+1].t==="?"||i[I+1].t==="t"&&i[I+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[I].v==="/"||i[I].v===" "&&i[I+1]!=null&&i[I+1].t=="?"));)i[o].v+=i[I].v,i[I]={v:"",t:";"},++I;C+=i[o].v,o=I-1;break;case"G":i[o].t="t",i[o].v=iG(e,n);break}var R="",V,P;if(C.length>0){C.charCodeAt(0)==40?(V=e<0&&C.charCodeAt(0)===45?-e:e,P=yp("n",C,V)):(V=e<0&&r>1?-e:e,P=yp("n",C,V),V<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),I=P.length-1;var N=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){N=o;break}var L=i.length;if(N===i.length&&P.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(I>=i[o].v.length-1?(I-=i[o].v.length,i[o].v=P.substr(I+1,i[o].v.length)):I<0?i[o].v="":(i[o].v=P.substr(0,I+1),I=-1),i[o].t="t",L=o);I>=0&&L<i.length&&(i[L].v=P.substr(0,I+1)+i[L].v)}else if(N!==i.length&&P.indexOf("E")===-1){for(I=P.indexOf(".")-1,o=N;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")-1:i[o].v.length-1,R=i[o].v.substr(u+1);u>=0;--u)I>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(R=P.charAt(I--)+R);i[o].v=R,i[o].t="t",L=o}for(I>=0&&L<i.length&&(i[L].v=P.substr(0,I+1)+i[L].v),I=P.indexOf(".")+1,o=N;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==N)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")+1:0,R=i[o].v.substr(0,u);u<i[o].v.length;++u)I<P.length&&(R+=P.charAt(I++));i[o].v=R,i[o].t="t",L=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(V=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=yp(i[o].t,i[o].v,V),i[o].t="t");var O="";for(o=0;o!==i.length;++o)i[o]!=null&&(O+=i[o].v);return O}var lae=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function cae(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Zvt(t,e){var n=Yvt(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(lae),a=n[1].match(lae);return cae(e,o)?[r,n[0]]:cae(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function a0(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:is)[t],r==null&&(r=n.table&&n.table[sae[t]]||is[sae[t]]),r==null&&(r=Mvt[t]||"General");break}if(E5(r,0))return iG(e,n);e instanceof Date&&(e=lEe(e,n.date1904));var i=Zvt(r,e);if(E5(i[1]))return iG(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Xvt(i[1],e,n,i[0])}function vEe(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(is[n]==null){e<0&&(e=n);continue}if(is[n]==t){e=n;break}}e<0&&(e=391)}return is[e]=t,e}function QO(t){for(var e=0;e!=392;++e)t[e]!==void 0&&vEe(t[e],e)}function eD(){is=Rvt()}var _Ee=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Jvt(t){var e=typeof t=="number"?is[t]:t;return e=e.replace(_Ee,"(\\d+)"),new RegExp("^"+e+"$")}function Qvt(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(_Ee)||[]).forEach(function(h,f){var g=parseInt(n[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":l=g;break;case"m":o>=0?a=g:i=g;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var e_t=(function(){var t={};t.version="1.2.0";function e(){for(var P=0,N=new Array(256),L=0;L!=256;++L)P=L,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,N[L]=P;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(P){var N=0,L=0,O=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)F[O]=P[O];for(O=0;O!=256;++O)for(L=P[O],N=256+O;N<4096;N+=256)L=F[N]=L>>>8^P[L&255];var G=[];for(O=1;O!=16;++O)G[O-1]=typeof Int32Array<"u"?F.subarray(O*256,O*256+256):F.slice(O*256,O*256+256);return G}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],f=i[7],g=i[8],y=i[9],_=i[10],b=i[11],T=i[12],A=i[13],C=i[14];function I(P,N){for(var L=N^-1,O=0,F=P.length;O<F;)L=L>>>8^n[(L^P.charCodeAt(O++))&255];return~L}function R(P,N){for(var L=N^-1,O=P.length-15,F=0;F<O;)L=C[P[F++]^L&255]^A[P[F++]^L>>8&255]^T[P[F++]^L>>16&255]^b[P[F++]^L>>>24]^_[P[F++]]^y[P[F++]]^g[P[F++]]^f[P[F++]]^h[P[F++]]^u[P[F++]]^c[P[F++]]^l[P[F++]]^a[P[F++]]^o[P[F++]]^s[P[F++]]^n[P[F++]];for(O+=15;F<O;)L=L>>>8^n[(L^P[F++])&255];return~L}function V(P,N){for(var L=N^-1,O=0,F=P.length,G=0,U=0;O<F;)G=P.charCodeAt(O++),G<128?L=L>>>8^n[(L^G)&255]:G<2048?(L=L>>>8^n[(L^(192|G>>6&31))&255],L=L>>>8^n[(L^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,U=P.charCodeAt(O++)&1023,L=L>>>8^n[(L^(240|G>>8&7))&255],L=L>>>8^n[(L^(128|G>>2&63))&255],L=L>>>8^n[(L^(128|U>>6&15|(G&3)<<4))&255],L=L>>>8^n[(L^(128|U&63))&255]):(L=L>>>8^n[(L^(224|G>>12&15))&255],L=L>>>8^n[(L^(128|G>>6&63))&255],L=L>>>8^n[(L^(128|G&63))&255]);return~L}return t.table=n,t.bstr=I,t.buf=R,t.str=V,t})(),Xr=(function(){var e={};e.version="1.2.1";function n(q,ie){for(var ee=q.split("/"),re=ie.split("/"),oe=0,ae=0,Me=Math.min(ee.length,re.length);oe<Me;++oe){if(ae=ee[oe].length-re[oe].length)return ae;if(ee[oe]!=re[oe])return ee[oe]<re[oe]?-1:1}return ee.length-re.length}function r(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:r(q.slice(0,-1));var ie=q.lastIndexOf("/");return ie===-1?q:q.slice(0,ie+1)}function i(q){if(q.charAt(q.length-1)=="/")return i(q.slice(0,-1));var ie=q.lastIndexOf("/");return ie===-1?q:q.slice(ie+1)}function s(q,ie){typeof ie=="string"&&(ie=new Date(ie));var ee=ie.getHours();ee=ee<<6|ie.getMinutes(),ee=ee<<5|ie.getSeconds()>>>1,q.write_shift(2,ee);var re=ie.getFullYear()-1980;re=re<<4|ie.getMonth()+1,re=re<<5|ie.getDate(),q.write_shift(2,re)}function o(q){var ie=q.read_shift(2)&65535,ee=q.read_shift(2)&65535,re=new Date,oe=ee&31;ee>>>=5;var ae=ee&15;ee>>>=4,re.setMilliseconds(0),re.setFullYear(ee+1980),re.setMonth(ae-1),re.setDate(oe);var Me=ie&31;ie>>>=5;var Be=ie&63;return ie>>>=6,re.setHours(ie),re.setMinutes(Be),re.setSeconds(Me<<1),re}function a(q){ic(q,0);for(var ie={},ee=0;q.l<=q.length-4;){var re=q.read_shift(2),oe=q.read_shift(2),ae=q.l+oe,Me={};switch(re){case 21589:ee=q.read_shift(1),ee&1&&(Me.mtime=q.read_shift(4)),oe>5&&(ee&2&&(Me.atime=q.read_shift(4)),ee&4&&(Me.ctime=q.read_shift(4))),Me.mtime&&(Me.mt=new Date(Me.mtime*1e3));break}q.l=ae,ie[re]=Me}return ie}var l;function c(){return l||(l={})}function u(q,ie){if(q[0]==80&&q[1]==75)return rn(q,ie);if((q[0]|32)==109&&(q[1]|32)==105)return He(q,ie);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var ee=3,re=512,oe=0,ae=0,Me=0,Be=0,Re=0,Oe=[],je=q.slice(0,512);ic(je,0);var ut=h(je);switch(ee=ut[0],ee){case 3:re=512;break;case 4:re=4096;break;case 0:if(ut[1]==0)return rn(q,ie);default:throw new Error("Major Version: Expected 3 or 4 saw "+ee)}re!==512&&(je=q.slice(0,re),ic(je,28));var vt=q.slice(0,re);f(je,ee);var Pt=je.read_shift(4,"i");if(ee===3&&Pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Pt);je.l+=4,Me=je.read_shift(4,"i"),je.l+=4,je.chk("00100000","Mini Stream Cutoff Size: "),Be=je.read_shift(4,"i"),oe=je.read_shift(4,"i"),Re=je.read_shift(4,"i"),ae=je.read_shift(4,"i");for(var ht=-1,dt=0;dt<109&&(ht=je.read_shift(4,"i"),!(ht<0));++dt)Oe[dt]=ht;var Tn=g(q,re);b(Re,ae,Tn,re,Oe);var Mr=A(Tn,Me,Oe,re);Mr[Me].name="!Directory",oe>0&&Be!==U&&(Mr[Be].name="!MiniFAT"),Mr[Oe[0]].name="!FAT",Mr.fat_addrs=Oe,Mr.ssz=re;var Fr={},_i=[],Eu=[],Ic=[];C(Me,Mr,Tn,_i,oe,Fr,Eu,Be),y(Eu,Ic,_i),_i.shift();var Fl={FileIndex:Eu,FullPaths:Ic};return ie&&ie.raw&&(Fl.raw={header:vt,sectors:Tn}),Fl}function h(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(ue,"Header Signature: "),q.l+=16;var ie=q.read_shift(2,"u");return[q.read_shift(2,"u"),ie]}function f(q,ie){var ee=9;switch(q.l+=2,ee=q.read_shift(2)){case 9:if(ie!=3)throw new Error("Sector Shift: Expected 9 saw "+ee);break;case 12:if(ie!=4)throw new Error("Sector Shift: Expected 12 saw "+ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ee)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,ie){for(var ee=Math.ceil(q.length/ie)-1,re=[],oe=1;oe<ee;++oe)re[oe-1]=q.slice(oe*ie,(oe+1)*ie);return re[ee-1]=q.slice(ee*ie),re}function y(q,ie,ee){for(var re=0,oe=0,ae=0,Me=0,Be=0,Re=ee.length,Oe=[],je=[];re<Re;++re)Oe[re]=je[re]=re,ie[re]=ee[re];for(;Be<je.length;++Be)re=je[Be],oe=q[re].L,ae=q[re].R,Me=q[re].C,Oe[re]===re&&(oe!==-1&&Oe[oe]!==oe&&(Oe[re]=Oe[oe]),ae!==-1&&Oe[ae]!==ae&&(Oe[re]=Oe[ae])),Me!==-1&&(Oe[Me]=re),oe!==-1&&re!=Oe[re]&&(Oe[oe]=Oe[re],je.lastIndexOf(oe)<Be&&je.push(oe)),ae!==-1&&re!=Oe[re]&&(Oe[ae]=Oe[re],je.lastIndexOf(ae)<Be&&je.push(ae));for(re=1;re<Re;++re)Oe[re]===re&&(ae!==-1&&Oe[ae]!==ae?Oe[re]=Oe[ae]:oe!==-1&&Oe[oe]!==oe&&(Oe[re]=Oe[oe]));for(re=1;re<Re;++re)if(q[re].type!==0){if(Be=re,Be!=Oe[Be])do Be=Oe[Be],ie[re]=ie[Be]+"/"+ie[re];while(Be!==0&&Oe[Be]!==-1&&Be!=Oe[Be]);Oe[re]=-1}for(ie[0]+="/",re=1;re<Re;++re)q[re].type!==2&&(ie[re]+="/")}function _(q,ie,ee){for(var re=q.start,oe=q.size,ae=[],Me=re;ee&&oe>0&&Me>=0;)ae.push(ie.slice(Me*G,Me*G+G)),oe-=G,Me=Fy(ee,Me*4);return ae.length===0?Ue(0):Oo(ae).slice(0,q.size)}function b(q,ie,ee,re,oe){var ae=U;if(q===U){if(ie!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var Me=ee[q],Be=(re>>>2)-1;if(!Me)return;for(var Re=0;Re<Be&&(ae=Fy(Me,Re*4))!==U;++Re)oe.push(ae);b(Fy(Me,re-4),ie-1,ee,re,oe)}}function T(q,ie,ee,re,oe){var ae=[],Me=[];oe||(oe=[]);var Be=re-1,Re=0,Oe=0;for(Re=ie;Re>=0;){oe[Re]=!0,ae[ae.length]=Re,Me.push(q[Re]);var je=ee[Math.floor(Re*4/re)];if(Oe=Re*4&Be,re<4+Oe)throw new Error("FAT boundary crossed: "+Re+" 4 "+re);if(!q[je])break;Re=Fy(q[je],Oe)}return{nodes:ae,data:yae([Me])}}function A(q,ie,ee,re){var oe=q.length,ae=[],Me=[],Be=[],Re=[],Oe=re-1,je=0,ut=0,vt=0,Pt=0;for(je=0;je<oe;++je)if(Be=[],vt=je+ie,vt>=oe&&(vt-=oe),!Me[vt]){Re=[];var ht=[];for(ut=vt;ut>=0;){ht[ut]=!0,Me[ut]=!0,Be[Be.length]=ut,Re.push(q[ut]);var dt=ee[Math.floor(ut*4/re)];if(Pt=ut*4&Oe,re<4+Pt)throw new Error("FAT boundary crossed: "+ut+" 4 "+re);if(!q[dt]||(ut=Fy(q[dt],Pt),ht[ut]))break}ae[vt]={nodes:Be,data:yae([Re])}}return ae}function C(q,ie,ee,re,oe,ae,Me,Be){for(var Re=0,Oe=re.length?2:0,je=ie[q].data,ut=0,vt=0,Pt;ut<je.length;ut+=128){var ht=je.slice(ut,ut+128);ic(ht,64),vt=ht.read_shift(2),Pt=Xq(ht,0,vt-Oe),re.push(Pt);var dt={name:Pt,type:ht.read_shift(1),color:ht.read_shift(1),L:ht.read_shift(4,"i"),R:ht.read_shift(4,"i"),C:ht.read_shift(4,"i"),clsid:ht.read_shift(16),state:ht.read_shift(4,"i"),start:0,size:0},Tn=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Tn!==0&&(dt.ct=I(ht,ht.l-8));var Mr=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Mr!==0&&(dt.mt=I(ht,ht.l-8)),dt.start=ht.read_shift(4,"i"),dt.size=ht.read_shift(4,"i"),dt.size<0&&dt.start<0&&(dt.size=dt.type=0,dt.start=U,dt.name=""),dt.type===5?(Re=dt.start,oe>0&&Re!==U&&(ie[Re].name="!StreamData")):dt.size>=4096?(dt.storage="fat",ie[dt.start]===void 0&&(ie[dt.start]=T(ee,dt.start,ie.fat_addrs,ie.ssz)),ie[dt.start].name=dt.name,dt.content=ie[dt.start].data.slice(0,dt.size)):(dt.storage="minifat",dt.size<0?dt.size=0:Re!==U&&dt.start!==U&&ie[Re]&&(dt.content=_(dt,ie[Re].data,(ie[Be]||{}).data))),dt.content&&ic(dt.content,0),ae[Pt]=dt,Me.push(dt)}}function I(q,ie){return new Date((cc(q,ie+4)/1e7*Math.pow(2,32)+cc(q,ie)/1e7-11644473600)*1e3)}function R(q,ie){return c(),u(l.readFileSync(q),ie)}function V(q,ie){var ee=ie&&ie.type;switch(ee||Ar&&Buffer.isBuffer(q)&&(ee="buffer"),ee||"base64"){case"file":return R(q,ie);case"base64":return u(oh(Pp(q)),ie);case"binary":return u(oh(q),ie)}return u(q,ie)}function P(q,ie){var ee=ie||{},re=ee.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=re+"/",q.FileIndex[0]={name:re,type:5}),ee.CLSID&&(q.FileIndex[0].clsid=ee.CLSID),N(q)}function N(q){var ie="Sh33tJ5";if(!Xr.find(q,"/"+ie)){var ee=Ue(4);ee[0]=55,ee[1]=ee[3]=50,ee[2]=54,q.FileIndex.push({name:ie,type:2,content:ee,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+ie),L(q)}}function L(q,ie){P(q);for(var ee=!1,re=!1,oe=q.FullPaths.length-1;oe>=0;--oe){var ae=q.FileIndex[oe];switch(ae.type){case 0:re?ee=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:re=!0,isNaN(ae.R*ae.L*ae.C)&&(ee=!0),ae.R>-1&&ae.L>-1&&ae.R==ae.L&&(ee=!0);break;default:ee=!0;break}}if(!(!ee&&!ie)){var Me=new Date(1987,1,19),Be=0,Re=Object.create?Object.create(null):{},Oe=[];for(oe=0;oe<q.FullPaths.length;++oe)Re[q.FullPaths[oe]]=!0,q.FileIndex[oe].type!==0&&Oe.push([q.FullPaths[oe],q.FileIndex[oe]]);for(oe=0;oe<Oe.length;++oe){var je=r(Oe[oe][0]);re=Re[je],re||(Oe.push([je,{name:i(je).replace("/",""),type:1,clsid:ze,ct:Me,mt:Me,content:null}]),Re[je]=!0)}for(Oe.sort(function(Pt,ht){return n(Pt[0],ht[0])}),q.FullPaths=[],q.FileIndex=[],oe=0;oe<Oe.length;++oe)q.FullPaths[oe]=Oe[oe][0],q.FileIndex[oe]=Oe[oe][1];for(oe=0;oe<Oe.length;++oe){var ut=q.FileIndex[oe],vt=q.FullPaths[oe];if(ut.name=i(vt).replace("/",""),ut.L=ut.R=ut.C=-(ut.color=1),ut.size=ut.content?ut.content.length:0,ut.start=0,ut.clsid=ut.clsid||ze,oe===0)ut.C=Oe.length>1?1:-1,ut.size=0,ut.type=5;else if(vt.slice(-1)=="/"){for(Be=oe+1;Be<Oe.length&&r(q.FullPaths[Be])!=vt;++Be);for(ut.C=Be>=Oe.length?-1:Be,Be=oe+1;Be<Oe.length&&r(q.FullPaths[Be])!=r(vt);++Be);ut.R=Be>=Oe.length?-1:Be,ut.type=1}else r(q.FullPaths[oe+1]||"")==r(vt)&&(ut.R=oe+1),ut.type=2}}}function O(q,ie){var ee=ie||{};if(ee.fileType=="mad")return Ge(q,ee);switch(L(q),ee.fileType){case"zip":return Tt(q,ee)}var re=(function(Pt){for(var ht=0,dt=0,Tn=0;Tn<Pt.FileIndex.length;++Tn){var Mr=Pt.FileIndex[Tn];if(Mr.content){var Fr=Mr.content.length;Fr>0&&(Fr<4096?ht+=Fr+63>>6:dt+=Fr+511>>9)}}for(var _i=Pt.FullPaths.length+3>>2,Eu=ht+7>>3,Ic=ht+127>>7,Fl=Eu+dt+_i+Ic,os=Fl+127>>7,Vp=os<=109?0:Math.ceil((os-109)/127);Fl+os+Vp+127>>7>os;)Vp=++os<=109?0:Math.ceil((os-109)/127);var Ii=[1,Vp,os,Ic,_i,dt,ht,0];return Pt.FileIndex[0].size=ht<<6,Ii[7]=(Pt.FileIndex[0].start=Ii[0]+Ii[1]+Ii[2]+Ii[3]+Ii[4]+Ii[5])+(Ii[6]+7>>3),Ii})(q),oe=Ue(re[7]<<9),ae=0,Me=0;{for(ae=0;ae<8;++ae)oe.write_shift(1,be[ae]);for(ae=0;ae<8;++ae)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),ae=0;ae<3;++ae)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,re[2]),oe.write_shift(4,re[0]+re[1]+re[2]+re[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,re[3]?re[0]+re[1]+re[2]-1:U),oe.write_shift(4,re[3]),oe.write_shift(-4,re[1]?re[0]-1:U),oe.write_shift(4,re[1]),ae=0;ae<109;++ae)oe.write_shift(-4,ae<re[2]?re[1]+ae:-1)}if(re[1])for(Me=0;Me<re[1];++Me){for(;ae<236+Me*127;++ae)oe.write_shift(-4,ae<re[2]?re[1]+ae:-1);oe.write_shift(-4,Me===re[1]-1?U:Me+1)}var Be=function(Pt){for(Me+=Pt;ae<Me-1;++ae)oe.write_shift(-4,ae+1);Pt&&(++ae,oe.write_shift(-4,U))};for(Me=ae=0,Me+=re[1];ae<Me;++ae)oe.write_shift(-4,Ce.DIFSECT);for(Me+=re[2];ae<Me;++ae)oe.write_shift(-4,Ce.FATSECT);Be(re[3]),Be(re[4]);for(var Re=0,Oe=0,je=q.FileIndex[0];Re<q.FileIndex.length;++Re)je=q.FileIndex[Re],je.content&&(Oe=je.content.length,!(Oe<4096)&&(je.start=Me,Be(Oe+511>>9)));for(Be(re[6]+7>>3);oe.l&511;)oe.write_shift(-4,Ce.ENDOFCHAIN);for(Me=ae=0,Re=0;Re<q.FileIndex.length;++Re)je=q.FileIndex[Re],je.content&&(Oe=je.content.length,!(!Oe||Oe>=4096)&&(je.start=Me,Be(Oe+63>>6)));for(;oe.l&511;)oe.write_shift(-4,Ce.ENDOFCHAIN);for(ae=0;ae<re[4]<<2;++ae){var ut=q.FullPaths[ae];if(!ut||ut.length===0){for(Re=0;Re<17;++Re)oe.write_shift(4,0);for(Re=0;Re<3;++Re)oe.write_shift(4,-1);for(Re=0;Re<12;++Re)oe.write_shift(4,0);continue}je=q.FileIndex[ae],ae===0&&(je.start=je.size?je.start-1:U);var vt=ae===0&&ee.root||je.name;if(Oe=2*(vt.length+1),oe.write_shift(64,vt,"utf16le"),oe.write_shift(2,Oe),oe.write_shift(1,je.type),oe.write_shift(1,je.color),oe.write_shift(-4,je.L),oe.write_shift(-4,je.R),oe.write_shift(-4,je.C),je.clsid)oe.write_shift(16,je.clsid,"hex");else for(Re=0;Re<4;++Re)oe.write_shift(4,0);oe.write_shift(4,je.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,je.start),oe.write_shift(4,je.size),oe.write_shift(4,0)}for(ae=1;ae<q.FileIndex.length;++ae)if(je=q.FileIndex[ae],je.size>=4096)if(oe.l=je.start+1<<9,Ar&&Buffer.isBuffer(je.content))je.content.copy(oe,oe.l,0,je.size),oe.l+=je.size+511&-512;else{for(Re=0;Re<je.size;++Re)oe.write_shift(1,je.content[Re]);for(;Re&511;++Re)oe.write_shift(1,0)}for(ae=1;ae<q.FileIndex.length;++ae)if(je=q.FileIndex[ae],je.size>0&&je.size<4096)if(Ar&&Buffer.isBuffer(je.content))je.content.copy(oe,oe.l,0,je.size),oe.l+=je.size+63&-64;else{for(Re=0;Re<je.size;++Re)oe.write_shift(1,je.content[Re]);for(;Re&63;++Re)oe.write_shift(1,0)}if(Ar)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function F(q,ie){var ee=q.FullPaths.map(function(Re){return Re.toUpperCase()}),re=ee.map(function(Re){var Oe=Re.split("/");return Oe[Oe.length-(Re.slice(-1)=="/"?2:1)]}),oe=!1;ie.charCodeAt(0)===47?(oe=!0,ie=ee[0].slice(0,-1)+ie):oe=ie.indexOf("/")!==-1;var ae=ie.toUpperCase(),Me=oe===!0?ee.indexOf(ae):re.indexOf(ae);if(Me!==-1)return q.FileIndex[Me];var Be=!ae.match(BR);for(ae=ae.replace(fk,""),Be&&(ae=ae.replace(BR,"!")),Me=0;Me<ee.length;++Me)if((Be?ee[Me].replace(BR,"!"):ee[Me]).replace(fk,"")==ae||(Be?re[Me].replace(BR,"!"):re[Me]).replace(fk,"")==ae)return q.FileIndex[Me];return null}var G=64,U=-2,ue="d0cf11e0a1b11ae1",be=[208,207,17,224,161,177,26,225],ze="00000000000000000000000000000000",Ce={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:ue,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ze,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function de(q,ie,ee){c();var re=O(q,ee);l.writeFileSync(ie,re)}function Le(q){for(var ie=new Array(q.length),ee=0;ee<q.length;++ee)ie[ee]=String.fromCharCode(q[ee]);return ie.join("")}function xe(q,ie){var ee=O(q,ie);switch(ie&&ie.type||"buffer"){case"file":return c(),l.writeFileSync(ie.filename,ee),ee;case"binary":return typeof ee=="string"?ee:Le(ee);case"base64":return GA(typeof ee=="string"?ee:Le(ee));case"buffer":if(Ar)return Buffer.isBuffer(ee)?ee:$p(ee);case"array":return typeof ee=="string"?oh(ee):ee}return ee}var Z;function W(q){try{var ie=q.InflateRaw,ee=new ie;if(ee._processChunk(new Uint8Array([3,0]),ee._finishFlushFlag),ee.bytesRead)Z=q;else throw new Error("zlib does not expose bytesRead")}catch(re){console.error("cannot use native zlib: "+(re.message||re))}}function ne(q,ie){if(!Z)return Ie(q,ie);var ee=Z.InflateRaw,re=new ee,oe=re._processChunk(q.slice(q.l),re._finishFlushFlag);return q.l+=re.bytesRead,oe}function se(q){return Z?Z.deflateRawSync(q):Dn(q)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],me=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ke=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ye(q){var ie=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(ie>>16|ie>>8|ie)&255}for(var ke=typeof Uint8Array<"u",Ee=ke?new Uint8Array(256):[],Dt=0;Dt<256;++Dt)Ee[Dt]=Ye(Dt);function Xe(q,ie){var ee=Ee[q&255];return ie<=8?ee>>>8-ie:(ee=ee<<8|Ee[q>>8&255],ie<=16?ee>>>16-ie:(ee=ee<<8|Ee[q>>16&255],ee>>>24-ie))}function cn(q,ie){var ee=ie&7,re=ie>>>3;return(q[re]|(ee<=6?0:q[re+1]<<8))>>>ee&3}function jt(q,ie){var ee=ie&7,re=ie>>>3;return(q[re]|(ee<=5?0:q[re+1]<<8))>>>ee&7}function gn(q,ie){var ee=ie&7,re=ie>>>3;return(q[re]|(ee<=4?0:q[re+1]<<8))>>>ee&15}function wn(q,ie){var ee=ie&7,re=ie>>>3;return(q[re]|(ee<=3?0:q[re+1]<<8))>>>ee&31}function pt(q,ie){var ee=ie&7,re=ie>>>3;return(q[re]|(ee<=1?0:q[re+1]<<8))>>>ee&127}function hr(q,ie,ee){var re=ie&7,oe=ie>>>3,ae=(1<<ee)-1,Me=q[oe]>>>re;return ee<8-re||(Me|=q[oe+1]<<8-re,ee<16-re)||(Me|=q[oe+2]<<16-re,ee<24-re)||(Me|=q[oe+3]<<24-re),Me&ae}function zn(q,ie,ee){var re=ie&7,oe=ie>>>3;return re<=5?q[oe]|=(ee&7)<<re:(q[oe]|=ee<<re&255,q[oe+1]=(ee&7)>>8-re),ie+3}function Hn(q,ie,ee){var re=ie&7,oe=ie>>>3;return ee=(ee&1)<<re,q[oe]|=ee,ie+1}function ei(q,ie,ee){var re=ie&7,oe=ie>>>3;return ee<<=re,q[oe]|=ee&255,ee>>>=8,q[oe+1]=ee,ie+8}function xo(q,ie,ee){var re=ie&7,oe=ie>>>3;return ee<<=re,q[oe]|=ee&255,ee>>>=8,q[oe+1]=ee&255,q[oe+2]=ee>>>8,ie+16}function Rr(q,ie){var ee=q.length,re=2*ee>ie?2*ee:ie+5,oe=0;if(ee>=ie)return q;if(Ar){var ae=nae(re);if(q.copy)q.copy(ae);else for(;oe<q.length;++oe)ae[oe]=q[oe];return ae}else if(ke){var Me=new Uint8Array(re);if(Me.set)Me.set(q);else for(;oe<ee;++oe)Me[oe]=q[oe];return Me}return q.length=re,q}function Ai(q){for(var ie=new Array(q),ee=0;ee<q;++ee)ie[ee]=0;return ie}function js(q,ie,ee){var re=1,oe=0,ae=0,Me=0,Be=0,Re=q.length,Oe=ke?new Uint16Array(32):Ai(32);for(ae=0;ae<32;++ae)Oe[ae]=0;for(ae=Re;ae<ee;++ae)q[ae]=0;Re=q.length;var je=ke?new Uint16Array(Re):Ai(Re);for(ae=0;ae<Re;++ae)Oe[oe=q[ae]]++,re<oe&&(re=oe),je[ae]=0;for(Oe[0]=0,ae=1;ae<=re;++ae)Oe[ae+16]=Be=Be+Oe[ae-1]<<1;for(ae=0;ae<Re;++ae)Be=q[ae],Be!=0&&(je[ae]=Oe[Be+16]++);var ut=0;for(ae=0;ae<Re;++ae)if(ut=q[ae],ut!=0)for(Be=Xe(je[ae],re)>>re-ut,Me=(1<<re+4-ut)-1;Me>=0;--Me)ie[Be|Me<<ut]=ut&15|ae<<4;return re}var wt=ke?new Uint16Array(512):Ai(512),Qn=ke?new Uint16Array(32):Ai(32);if(!ke){for(var dr=0;dr<512;++dr)wt[dr]=0;for(dr=0;dr<32;++dr)Qn[dr]=0}(function(){for(var q=[],ie=0;ie<32;ie++)q.push(5);js(q,Qn,32);var ee=[];for(ie=0;ie<=143;ie++)ee.push(8);for(;ie<=255;ie++)ee.push(9);for(;ie<=279;ie++)ee.push(7);for(;ie<=287;ie++)ee.push(8);js(ee,wt,288)})();var Vt=(function(){for(var ie=ke?new Uint8Array(32768):[],ee=0,re=0;ee<Ke.length-1;++ee)for(;re<Ke[ee+1];++re)ie[re]=ee;for(;re<32768;++re)ie[re]=29;var oe=ke?new Uint8Array(259):[];for(ee=0,re=0;ee<me.length-1;++ee)for(;re<me[ee+1];++re)oe[re]=ee;function ae(Be,Re){for(var Oe=0;Oe<Be.length;){var je=Math.min(65535,Be.length-Oe),ut=Oe+je==Be.length;for(Re.write_shift(1,+ut),Re.write_shift(2,je),Re.write_shift(2,~je&65535);je-- >0;)Re[Re.l++]=Be[Oe++]}return Re.l}function Me(Be,Re){for(var Oe=0,je=0,ut=ke?new Uint16Array(32768):[];je<Be.length;){var vt=Math.min(65535,Be.length-je);if(vt<10){for(Oe=zn(Re,Oe,+(je+vt==Be.length)),Oe&7&&(Oe+=8-(Oe&7)),Re.l=Oe/8|0,Re.write_shift(2,vt),Re.write_shift(2,~vt&65535);vt-- >0;)Re[Re.l++]=Be[je++];Oe=Re.l*8;continue}Oe=zn(Re,Oe,+(je+vt==Be.length)+2);for(var Pt=0;vt-- >0;){var ht=Be[je];Pt=(Pt<<5^ht)&32767;var dt=-1,Tn=0;if((dt=ut[Pt])&&(dt|=je&-32768,dt>je&&(dt-=32768),dt<je))for(;Be[dt+Tn]==Be[je+Tn]&&Tn<250;)++Tn;if(Tn>2){ht=oe[Tn],ht<=22?Oe=ei(Re,Oe,Ee[ht+1]>>1)-1:(ei(Re,Oe,3),Oe+=5,ei(Re,Oe,Ee[ht-23]>>5),Oe+=3);var Mr=ht<8?0:ht-4>>2;Mr>0&&(xo(Re,Oe,Tn-me[ht]),Oe+=Mr),ht=ie[je-dt],Oe=ei(Re,Oe,Ee[ht]>>3),Oe-=3;var Fr=ht<4?0:ht-2>>1;Fr>0&&(xo(Re,Oe,je-dt-Ke[ht]),Oe+=Fr);for(var _i=0;_i<Tn;++_i)ut[Pt]=je&32767,Pt=(Pt<<5^Be[je])&32767,++je;vt-=Tn-1}else ht<=143?ht=ht+48:Oe=Hn(Re,Oe,1),Oe=ei(Re,Oe,Ee[ht]),ut[Pt]=je&32767,++je}Oe=ei(Re,Oe,0)-1}return Re.l=(Oe+7)/8|0,Re.l}return function(Re,Oe){return Re.length<8?ae(Re,Oe):Me(Re,Oe)}})();function Dn(q){var ie=Ue(50+Math.floor(q.length*1.1)),ee=Vt(q,ie);return ie.slice(0,ee)}var tn=ke?new Uint16Array(32768):Ai(32768),wo=ke?new Uint16Array(32768):Ai(32768),Ui=ke?new Uint16Array(128):Ai(128),Fs=1,Nn=1;function Ci(q,ie){var ee=wn(q,ie)+257;ie+=5;var re=wn(q,ie)+1;ie+=5;var oe=gn(q,ie)+4;ie+=4;for(var ae=0,Me=ke?new Uint8Array(19):Ai(19),Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Oe=ke?new Uint8Array(8):Ai(8),je=ke?new Uint8Array(8):Ai(8),ut=Me.length,vt=0;vt<oe;++vt)Me[Q[vt]]=ae=jt(q,ie),Re<ae&&(Re=ae),Oe[ae]++,ie+=3;var Pt=0;for(Oe[0]=0,vt=1;vt<=Re;++vt)je[vt]=Pt=Pt+Oe[vt-1]<<1;for(vt=0;vt<ut;++vt)(Pt=Me[vt])!=0&&(Be[vt]=je[Pt]++);var ht=0;for(vt=0;vt<ut;++vt)if(ht=Me[vt],ht!=0){Pt=Ee[Be[vt]]>>8-ht;for(var dt=(1<<7-ht)-1;dt>=0;--dt)Ui[Pt|dt<<ht]=ht&7|vt<<3}var Tn=[];for(Re=1;Tn.length<ee+re;)switch(Pt=Ui[pt(q,ie)],ie+=Pt&7,Pt>>>=3){case 16:for(ae=3+cn(q,ie),ie+=2,Pt=Tn[Tn.length-1];ae-- >0;)Tn.push(Pt);break;case 17:for(ae=3+jt(q,ie),ie+=3;ae-- >0;)Tn.push(0);break;case 18:for(ae=11+pt(q,ie),ie+=7;ae-- >0;)Tn.push(0);break;default:Tn.push(Pt),Re<Pt&&(Re=Pt);break}var Mr=Tn.slice(0,ee),Fr=Tn.slice(ee);for(vt=ee;vt<286;++vt)Mr[vt]=0;for(vt=re;vt<30;++vt)Fr[vt]=0;return Fs=js(Mr,tn,286),Nn=js(Fr,wo,30),ie}function qe(q,ie){if(q[0]==3&&!(q[1]&3))return[sv(ie),2];for(var ee=0,re=0,oe=nae(ie||1<<18),ae=0,Me=oe.length>>>0,Be=0,Re=0;(re&1)==0;){if(re=jt(q,ee),ee+=3,re>>>1)re>>1==1?(Be=9,Re=5):(ee=Ci(q,ee),Be=Fs,Re=Nn);else{ee&7&&(ee+=8-(ee&7));var Oe=q[ee>>>3]|q[(ee>>>3)+1]<<8;if(ee+=32,Oe>0)for(!ie&&Me<ae+Oe&&(oe=Rr(oe,ae+Oe),Me=oe.length);Oe-- >0;)oe[ae++]=q[ee>>>3],ee+=8;continue}for(;;){!ie&&Me<ae+32767&&(oe=Rr(oe,ae+32767),Me=oe.length);var je=hr(q,ee,Be),ut=re>>>1==1?wt[je]:tn[je];if(ee+=ut&15,ut>>>=4,(ut>>>8&255)===0)oe[ae++]=ut;else{if(ut==256)break;ut-=257;var vt=ut<8?0:ut-4>>2;vt>5&&(vt=0);var Pt=ae+me[ut];vt>0&&(Pt+=hr(q,ee,vt),ee+=vt),je=hr(q,ee,Re),ut=re>>>1==1?Qn[je]:wo[je],ee+=ut&15,ut>>>=4;var ht=ut<4?0:ut-2>>1,dt=Ke[ut];for(ht>0&&(dt+=hr(q,ee,ht),ee+=ht),!ie&&Me<Pt&&(oe=Rr(oe,Pt+100),Me=oe.length);ae<Pt;)oe[ae]=oe[ae-dt],++ae}}}return ie?[oe,ee+7>>>3]:[oe.slice(0,ae),ee+7>>>3]}function Ie(q,ie){var ee=q.slice(q.l||0),re=qe(ee,ie);return q.l+=re[1],re[0]}function Pe(q,ie){if(q)typeof console<"u"&&console.error(ie);else throw new Error(ie)}function rn(q,ie){var ee=q;ic(ee,0);var re=[],oe=[],ae={FileIndex:re,FullPaths:oe};P(ae,{root:ie.root});for(var Me=ee.length-4;(ee[Me]!=80||ee[Me+1]!=75||ee[Me+2]!=5||ee[Me+3]!=6)&&Me>=0;)--Me;ee.l=Me+4,ee.l+=4;var Be=ee.read_shift(2);ee.l+=6;var Re=ee.read_shift(4);for(ee.l=Re,Me=0;Me<Be;++Me){ee.l+=20;var Oe=ee.read_shift(4),je=ee.read_shift(4),ut=ee.read_shift(2),vt=ee.read_shift(2),Pt=ee.read_shift(2);ee.l+=8;var ht=ee.read_shift(4),dt=a(ee.slice(ee.l+ut,ee.l+ut+vt));ee.l+=ut+vt+Pt;var Tn=ee.l;ee.l=ht+4,z(ee,Oe,je,ae,dt),ee.l=Tn}return ae}function z(q,ie,ee,re,oe){q.l+=2;var ae=q.read_shift(2),Me=q.read_shift(2),Be=o(q);if(ae&8257)throw new Error("Unsupported ZIP encryption");for(var Re=q.read_shift(4),Oe=q.read_shift(4),je=q.read_shift(4),ut=q.read_shift(2),vt=q.read_shift(2),Pt="",ht=0;ht<ut;++ht)Pt+=String.fromCharCode(q[q.l++]);if(vt){var dt=a(q.slice(q.l,q.l+vt));(dt[21589]||{}).mt&&(Be=dt[21589].mt),((oe||{})[21589]||{}).mt&&(Be=oe[21589].mt)}q.l+=vt;var Tn=q.slice(q.l,q.l+Oe);switch(Me){case 8:Tn=ne(q,je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Me)}var Mr=!1;ae&8&&(Re=q.read_shift(4),Re==134695760&&(Re=q.read_shift(4),Mr=!0),Oe=q.read_shift(4),je=q.read_shift(4)),Oe!=ie&&Pe(Mr,"Bad compressed size: "+ie+" != "+Oe),je!=ee&&Pe(Mr,"Bad uncompressed size: "+ee+" != "+je),nt(re,Pt,Tn,{unsafe:!0,mt:Be})}function Tt(q,ie){var ee=ie||{},re=[],oe=[],ae=Ue(1),Me=ee.compression?8:0,Be=0,Re=0,Oe=0,je=0,ut=0,vt=q.FullPaths[0],Pt=vt,ht=q.FileIndex[0],dt=[],Tn=0;for(Re=1;Re<q.FullPaths.length;++Re)if(Pt=q.FullPaths[Re].slice(vt.length),ht=q.FileIndex[Re],!(!ht.size||!ht.content||Pt=="Sh33tJ5")){var Mr=je,Fr=Ue(Pt.length);for(Oe=0;Oe<Pt.length;++Oe)Fr.write_shift(1,Pt.charCodeAt(Oe)&127);Fr=Fr.slice(0,Fr.l),dt[ut]=e_t.buf(ht.content,0);var _i=ht.content;Me==8&&(_i=se(_i)),ae=Ue(30),ae.write_shift(4,67324752),ae.write_shift(2,20),ae.write_shift(2,Be),ae.write_shift(2,Me),ht.mt?s(ae,ht.mt):ae.write_shift(4,0),ae.write_shift(-4,dt[ut]),ae.write_shift(4,_i.length),ae.write_shift(4,ht.content.length),ae.write_shift(2,Fr.length),ae.write_shift(2,0),je+=ae.length,re.push(ae),je+=Fr.length,re.push(Fr),je+=_i.length,re.push(_i),ae=Ue(46),ae.write_shift(4,33639248),ae.write_shift(2,0),ae.write_shift(2,20),ae.write_shift(2,Be),ae.write_shift(2,Me),ae.write_shift(4,0),ae.write_shift(-4,dt[ut]),ae.write_shift(4,_i.length),ae.write_shift(4,ht.content.length),ae.write_shift(2,Fr.length),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(4,0),ae.write_shift(4,Mr),Tn+=ae.l,oe.push(ae),Tn+=Fr.length,oe.push(Fr),++ut}return ae=Ue(22),ae.write_shift(4,101010256),ae.write_shift(2,0),ae.write_shift(2,0),ae.write_shift(2,ut),ae.write_shift(2,ut),ae.write_shift(4,Tn),ae.write_shift(4,je),ae.write_shift(2,0),Oo([Oo(re),Oo(oe),ae])}var X={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function le(q,ie){if(q.ctype)return q.ctype;var ee=q.name||"",re=ee.match(/\.([^\.]+)$/);return re&&X[re[1]]||ie&&(re=(ee=ie).match(/[\.\\]([^\.\\])+$/),re&&X[re[1]])?X[re[1]]:"application/octet-stream"}function Ve(q){for(var ie=GA(q),ee=[],re=0;re<ie.length;re+=76)ee.push(ie.slice(re,re+76));return ee.join(`\r
`)+`\r
`}function te(q){var ie=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Oe){var je=Oe.charCodeAt(0).toString(16).toUpperCase();return"="+(je.length==1?"0"+je:je)});ie=ie.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ie.charAt(0)==`
`&&(ie="=0D"+ie.slice(1)),ie=ie.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ee=[],re=ie.split(`\r
`),oe=0;oe<re.length;++oe){var ae=re[oe];if(ae.length==0){ee.push("");continue}for(var Me=0;Me<ae.length;){var Be=76,Re=ae.slice(Me,Me+Be);Re.charAt(Be-1)=="="?Be--:Re.charAt(Be-2)=="="?Be-=2:Re.charAt(Be-3)=="="&&(Be-=3),Re=ae.slice(Me,Me+Be),Me+=Be,Me<ae.length&&(Re+="="),ee.push(Re)}}return ee.join(`\r
`)}function ve(q){for(var ie=[],ee=0;ee<q.length;++ee){for(var re=q[ee];ee<=q.length&&re.charAt(re.length-1)=="=";)re=re.slice(0,re.length-1)+q[++ee];ie.push(re)}for(var oe=0;oe<ie.length;++oe)ie[oe]=ie[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(ae){return String.fromCharCode(parseInt(ae.slice(1),16))});return oh(ie.join(`\r
`))}function De(q,ie,ee){for(var re="",oe="",ae="",Me,Be=0;Be<10;++Be){var Re=ie[Be];if(!Re||Re.match(/^\s*$/))break;var Oe=Re.match(/^(.*?):\s*([^\s].*)$/);if(Oe)switch(Oe[1].toLowerCase()){case"content-location":re=Oe[2].trim();break;case"content-type":ae=Oe[2].trim();break;case"content-transfer-encoding":oe=Oe[2].trim();break}}switch(++Be,oe.toLowerCase()){case"base64":Me=oh(Pp(ie.slice(Be).join("")));break;case"quoted-printable":Me=ve(ie.slice(Be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var je=nt(q,re.slice(ee.length),Me,{unsafe:!0});ae&&(je.ctype=ae)}function He(q,ie){if(Le(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ee=ie&&ie.root||"",re=(Ar&&Buffer.isBuffer(q)?q.toString("binary"):Le(q)).split(`\r
`),oe=0,ae="";for(oe=0;oe<re.length;++oe)if(ae=re[oe],!!/^Content-Location:/i.test(ae)&&(ae=ae.slice(ae.indexOf("file")),ee||(ee=ae.slice(0,ae.lastIndexOf("/")+1)),ae.slice(0,ee.length)!=ee))for(;ee.length>0&&(ee=ee.slice(0,ee.length-1),ee=ee.slice(0,ee.lastIndexOf("/")+1),ae.slice(0,ee.length)!=ee););var Me=(re[1]||"").match(/boundary="(.*?)"/);if(!Me)throw new Error("MAD cannot find boundary");var Be="--"+(Me[1]||""),Re=[],Oe=[],je={FileIndex:Re,FullPaths:Oe};P(je);var ut,vt=0;for(oe=0;oe<re.length;++oe){var Pt=re[oe];Pt!==Be&&Pt!==Be+"--"||(vt++&&De(je,re.slice(ut,oe),ee),ut=oe)}return je}function Ge(q,ie){var ee=ie||{},re=ee.boundary||"SheetJS";re="------="+re;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+re.slice(2)+'"',"","",""],ae=q.FullPaths[0],Me=ae,Be=q.FileIndex[0],Re=1;Re<q.FullPaths.length;++Re)if(Me=q.FullPaths[Re].slice(ae.length),Be=q.FileIndex[Re],!(!Be.size||!Be.content||Me=="Sh33tJ5")){Me=Me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tn){return"_x"+Tn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tn){return"_u"+Tn.charCodeAt(0).toString(16)+"_"});for(var Oe=Be.content,je=Ar&&Buffer.isBuffer(Oe)?Oe.toString("binary"):Le(Oe),ut=0,vt=Math.min(1024,je.length),Pt=0,ht=0;ht<=vt;++ht)(Pt=je.charCodeAt(ht))>=32&&Pt<128&&++ut;var dt=ut>=vt*4/5;oe.push(re),oe.push("Content-Location: "+(ee.root||"file:///C:/SheetJS/")+Me),oe.push("Content-Transfer-Encoding: "+(dt?"quoted-printable":"base64")),oe.push("Content-Type: "+le(Be,Me)),oe.push(""),oe.push(dt?te(je):Ve(je))}return oe.push(re+`--\r
`),oe.join(`\r
`)}function Ze(q){var ie={};return P(ie,q),ie}function nt(q,ie,ee,re){var oe=re&&re.unsafe;oe||P(q);var ae=!oe&&Xr.find(q,ie);if(!ae){var Me=q.FullPaths[0];ie.slice(0,Me.length)==Me?Me=ie:(Me.slice(-1)!="/"&&(Me+="/"),Me=(Me+ie).replace("//","/")),ae={name:i(ie),type:2},q.FileIndex.push(ae),q.FullPaths.push(Me),oe||Xr.utils.cfb_gc(q)}return ae.content=ee,ae.size=ee?ee.length:0,re&&(re.CLSID&&(ae.clsid=re.CLSID),re.mt&&(ae.mt=re.mt),re.ct&&(ae.ct=re.ct)),ae}function Mt(q,ie){P(q);var ee=Xr.find(q,ie);if(ee){for(var re=0;re<q.FileIndex.length;++re)if(q.FileIndex[re]==ee)return q.FileIndex.splice(re,1),q.FullPaths.splice(re,1),!0}return!1}function Gt(q,ie,ee){P(q);var re=Xr.find(q,ie);if(re){for(var oe=0;oe<q.FileIndex.length;++oe)if(q.FileIndex[oe]==re)return q.FileIndex[oe].name=i(ee),q.FullPaths[oe]=ee,!0}return!1}function _n(q){L(q,!0)}return e.find=F,e.read=V,e.parse=u,e.write=xe,e.writeFile=de,e.utils={cfb_new:Ze,cfb_add:nt,cfb_del:Mt,cfb_mov:Gt,cfb_gc:_n,ReadShift:mk,CheckField:jEe,prep_blob:ic,bconcat:Oo,use_zlib:W,_deflateRaw:Dn,_inflateRaw:Ie,consts:Ce},e})();function t_t(t){return typeof t=="string"?JO(t):Array.isArray(t)?Avt(t):t}function fI(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=JO(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?BA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([t_t(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=dI(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Vo(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function uae(t,e){for(var n=[],r=Vo(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function Hq(t){for(var e=[],n=Vo(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function tD(t){for(var e=[],n=Vo(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function n_t(t){for(var e=[],n=Vo(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var T5=new Date(1899,11,30,0,0,0);function Ml(t,e){var n=t.getTime(),r=T5.getTime()+(t.getTimezoneOffset()-T5.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var xEe=new Date,r_t=T5.getTime()+(xEe.getTimezoneOffset()-T5.getTimezoneOffset())*6e4,hae=xEe.getTimezoneOffset();function wEe(t){var e=new Date;return e.setTime(t*24*60*60*1e3+r_t),e.getTimezoneOffset()!==hae&&e.setTime(e.getTime()+(e.getTimezoneOffset()-hae)*6e4),e}var dae=new Date("2017-02-19T19:06:09.000Z"),bEe=isNaN(dae.getFullYear())?new Date("2/19/17"):dae,i_t=bEe.getFullYear()==2017;function Ba(t,e){var n=new Date(t);if(i_t)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(bEe.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function nD(t,e){if(Ar&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Nl(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Nl(t[n]));return e}function Qi(t,e){for(var n="";n.length<e;)n+=t;return n}function vp(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var s_t=["january","february","march","april","may","june","july","august","september","october","november","december"];function UA(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&s_t.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function Un(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Ar?r=$p(n):r=Cvt(n),Xr.utils.cfb_add(t,e,r)}Xr.utils.cfb_add(t,e,n)}else t.file(e,n)}function qq(){return Xr.utils.cfb_new()}var Ds=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,o_t={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Kq=Hq(o_t),Yq=/[&<>'"]/g,a_t=/[\u0000-\u0008\u000b-\u001f]/g;function Wr(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(a_t,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function fae(t){return Wr(t).replace(/ /g,"_x0020_")}var EEe=/[\u0000-\u001f]/g;function l_t(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(/\n/g,"<br/>").replace(EEe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function c_t(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(EEe,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function u_t(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function h_t(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function b$(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function pae(t){var e=sv(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function mae(t){return $p(t,"binary").toString("utf8")}var HR="foo bar baz",pk=Ar&&(mae(HR)==b$(HR)&&mae||pae(HR)==b$(HR)&&pae)||b$,BA=Ar?function(t){return $p(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},d_t=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),SEe=/(^\s|\s$|\n)/;function Do(t,e){return"<"+t+(e.match(SEe)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function WA(t){return Vo(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function _t(t,e,n){return"<"+t+(n!=null?WA(n):"")+(e!=null?(e.match(SEe)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function sG(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function f_t(t,e){switch(typeof t){case"string":var n=_t("vt:lpwstr",Wr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return _t((t|0)==t?"vt:i4":"vt:r8",Wr(String(t)));case"boolean":return _t("vt:bool",t?"true":"false")}if(t instanceof Date)return _t("vt:filetime",sG(t));throw new Error("Unable to serialize "+t)}var ho={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},zb=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],lc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function p_t(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function m_t(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var gae=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},yae=Ar?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:$p(e)})):gae(t)}:gae,vae=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(cT(t,i)));return r.join("").replace(fk,"")},Xq=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(fk,""):vae(t,e,n)}:vae,_ae=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},TEe=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):_ae(t,e,n)}:_ae,xae=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Cx(t,i)));return r.join("")},pI=Ar?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):xae(e,n,r)}:xae,kEe=function(t,e){var n=cc(t,e);return n>0?pI(t,e+4,e+4+n-1):""},AEe=kEe,CEe=function(t,e){var n=cc(t,e);return n>0?pI(t,e+4,e+4+n-1):""},IEe=CEe,PEe=function(t,e){var n=2*cc(t,e);return n>0?pI(t,e+4,e+4+n-1):""},REe=PEe,MEe=function(e,n){var r=cc(e,n);return r>0?Xq(e,n+4,n+4+r):""},NEe=MEe,LEe=function(t,e){var n=cc(t,e);return n>0?pI(t,e+4,e+4+n):""},OEe=LEe,DEe=function(t,e){return p_t(t,e)},k5=DEe,Zq=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ar&&(AEe=function(e,n){if(!Buffer.isBuffer(e))return kEe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},IEe=function(e,n){if(!Buffer.isBuffer(e))return CEe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},REe=function(e,n){if(!Buffer.isBuffer(e))return PEe(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},NEe=function(e,n){if(!Buffer.isBuffer(e))return MEe(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},OEe=function(e,n){if(!Buffer.isBuffer(e))return LEe(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},k5=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):DEe(e,n)},Zq=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Cx=function(t,e){return t[e]},cT=function(t,e){return t[e+1]*256+t[e]},g_t=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},cc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Fy=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},y_t=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function mk(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,Ar&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(cT(this,c)),c+=2;t*=2;break;case"utf8":n=pI(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Xq(this,this.l,this.l+t);break;case"wstr":return mk.call(this,t,"dbcs");case"lpstr-ansi":n=AEe(this,this.l),t=4+cc(this,this.l);break;case"lpstr-cp":n=IEe(this,this.l),t=4+cc(this,this.l);break;case"lpwstr":n=REe(this,this.l),t=4+2*cc(this,this.l);break;case"lpp4":t=4+cc(this,this.l),n=NEe(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+cc(this,this.l),n=OEe(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Cx(this,this.l+t++))!==0;)s.push(UR(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=cT(this,this.l+t))!==0;)s.push(UR(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Cx(this,c),this.l=c+1,a=mk.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(UR(cT(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Cx(this,c),this.l=c+1,a=mk.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(UR(Cx(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=Cx(this,this.l),this.l++,r;case 2:return r=(e==="i"?g_t:cT)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Fy:y_t)(this,this.l),this.l+=4,r):(i=cc(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=k5(this,this.l):i=k5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=TEe(this,this.l,t);break}}return this.l+=t,n}var v_t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},__t=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},x_t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function w_t(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)x_t(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,v_t(this,e,this.l);break;case 8:if(r=8,n==="f"){m_t(this,e,this.l);break}case 16:break;case-4:r=4,__t(this,e,this.l);break}return this.l+=r,this}function jEe(t,e){var n=TEe(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function ic(t,e){t.l=e,t.read_shift=mk,t.chk=jEe,t.write_shift=w_t}function qd(t,e){t.l+=e}function Ue(t){var e=sv(t);return ic(e,0),e}function Cl(){var t=[],e=Ar?256:2048,n=function(c){var u=Ue(c);return ic(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),Oo(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function rt(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=pSt[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&Zq(n)&&t.push(n)}}function gk(t,e,n){var r=Nl(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function wae(t,e,n){var r=Nl(t);return r.s=gk(r.s,e.s,n),r.e=gk(r.e,e.s,n),r}function yk(t,e){if(t.cRel&&t.c<0)for(t=Nl(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Nl(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=qr(t);return!t.cRel&&t.cRel!=null&&(n=S_t(n)),!t.rRel&&t.rRel!=null&&(n=b_t(n)),n}function E$(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ba(t.s.c)+":"+(t.e.cRel?"":"$")+ba(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Fo(t.s.r)+":"+(t.e.rRel?"":"$")+Fo(t.e.r):yk(t.s,e.biff)+":"+yk(t.e,e.biff)}function Jq(t){return parseInt(E_t(t),10)-1}function Fo(t){return""+(t+1)}function b_t(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function E_t(t){return t.replace(/\$(\d+)$/,"$1")}function Qq(t){for(var e=T_t(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ba(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function S_t(t){return t.replace(/^([A-Z])/,"$$$1")}function T_t(t){return t.replace(/^\$([A-Z])/,"$1")}function k_t(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function po(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function qr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Ac(t){var e=t.indexOf(":");return e==-1?{s:po(t),e:po(t)}:{s:po(t.slice(0,e)),e:po(t.slice(e+1))}}function Os(t,e){return typeof e>"u"||typeof e=="number"?Os(t.s,t.e):(typeof t!="string"&&(t=qr(t)),typeof e!="string"&&(e=qr(e)),t==e?t:t+":"+e)}function vi(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function bae(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=a0(t.z,n?Ml(e):e)}catch{}try{return t.w=a0((t.XF||{}).numFmtId||(n?14:0),n?Ml(e):e)}catch{return""+e}}function Rp(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?mI[t.v]||t.v:e==null?bae(t,t.v):bae(t,e))}function Cv(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function FEe(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?po(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=vi(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var g={v:e[h][f]},y=o+h,_=a+f;if(c.s.r>y&&(c.s.r=y),c.s.c>_&&(c.s.c=_),c.e.r<y&&(c.e.r=y),c.e.c<_&&(c.e.c=_),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))g=e[h][f];else if(Array.isArray(g.v)&&(g.f=e[h][f][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||is[14],r.cellDates?(g.t="d",g.w=a0(g.z,Ml(g.v))):(g.t="n",g.v=Ml(g.v),g.w=a0(g.z,g.v))):g.t="s";if(i)s[y]||(s[y]=[]),s[y][_]&&s[y][_].z&&(g.z=s[y][_].z),s[y][_]=g;else{var b=qr({c:_,r:y});s[b]&&s[b].z&&(g.z=s[b].z),s[b]=g}}}return c.s.c<1e7&&(s["!ref"]=Os(c)),s}function Gb(t,e){return FEe(null,t,e)}function A_t(t){return t.read_shift(4,"i")}function yh(t,e){return e||(e=Ue(4)),e.write_shift(4,t),e}function Ea(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function mo(t,e){var n=!1;return e==null&&(n=!0,e=Ue(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function C_t(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function I_t(t,e){return e||(e=Ue(4)),e.write_shift(2,0),e.write_shift(2,0),e}function eK(t,e){var n=t.l,r=t.read_shift(1),i=Ea(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(C_t(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function P_t(t,e){var n=!1;return e==null&&(n=!0,e=Ue(15+4*t.t.length)),e.write_shift(1,0),mo(t.t,e),n?e.slice(0,e.l):e}var R_t=eK;function M_t(t,e){var n=!1;return e==null&&(n=!0,e=Ue(23+4*t.t.length)),e.write_shift(1,1),mo(t.t,e),e.write_shift(4,1),I_t({},e),n?e.slice(0,e.l):e}function bu(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Iv(t,e){return e==null&&(e=Ue(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Pv(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Rv(t,e){return e==null&&(e=Ue(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var N_t=Ea,$Ee=mo;function tK(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function A5(t,e){var n=!1;return e==null&&(n=!0,e=Ue(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var L_t=Ea,oG=tK,nK=A5;function VEe(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?k5([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Fy(e,0)>>2;return n?i/100:i}function zEe(t,e){e==null&&(e=Ue(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function GEe(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function O_t(t,e){return e||(e=Ue(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Mv=GEe,Ub=O_t;function Bb(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function ov(t,e){return(e||Ue(8)).write_shift(8,t,"f")}function D_t(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=W_t[i];c&&(e.rgb=Nae(c));break;case 2:e.rgb=Nae([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function C5(t,e){if(e||(e=Ue(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function j_t(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function F_t(t,e){e||(e=Ue(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var UEe=2,ec=3,qR=11,I5=19,KR=64,$_t=65,V_t=71,z_t=4108,G_t=4126,No=80,Eae={1:{n:"CodePage",t:UEe},2:{n:"Category",t:No},3:{n:"PresentationFormat",t:No},4:{n:"ByteCount",t:ec},5:{n:"LineCount",t:ec},6:{n:"ParagraphCount",t:ec},7:{n:"SlideCount",t:ec},8:{n:"NoteCount",t:ec},9:{n:"HiddenCount",t:ec},10:{n:"MultimediaClipCount",t:ec},11:{n:"ScaleCrop",t:qR},12:{n:"HeadingPairs",t:z_t},13:{n:"TitlesOfParts",t:G_t},14:{n:"Manager",t:No},15:{n:"Company",t:No},16:{n:"LinksUpToDate",t:qR},17:{n:"CharacterCount",t:ec},19:{n:"SharedDoc",t:qR},22:{n:"HyperlinksChanged",t:qR},23:{n:"AppVersion",t:ec,p:"version"},24:{n:"DigSig",t:$_t},26:{n:"ContentType",t:No},27:{n:"ContentStatus",t:No},28:{n:"Language",t:No},29:{n:"Version",t:No},255:{},2147483648:{n:"Locale",t:I5},2147483651:{n:"Behavior",t:I5},1919054434:{}},Sae={1:{n:"CodePage",t:UEe},2:{n:"Title",t:No},3:{n:"Subject",t:No},4:{n:"Author",t:No},5:{n:"Keywords",t:No},6:{n:"Comments",t:No},7:{n:"Template",t:No},8:{n:"LastAuthor",t:No},9:{n:"RevNumber",t:No},10:{n:"EditTime",t:KR},11:{n:"LastPrinted",t:KR},12:{n:"CreatedDate",t:KR},13:{n:"ModifiedDate",t:KR},14:{n:"PageCount",t:ec},15:{n:"WordCount",t:ec},16:{n:"CharCount",t:ec},17:{n:"Thumbnail",t:V_t},18:{n:"Application",t:No},19:{n:"DocSecurity",t:ec},255:{},2147483648:{n:"Locale",t:I5},2147483651:{n:"Behavior",t:I5},1919054434:{}};function U_t(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var B_t=U_t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),W_t=Nl(B_t),mI={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},H_t={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},YR={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function BEe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function WEe(t,e){var n=n_t(H_t),r=[],i;r[r.length]=Ds,r[r.length]=_t("Types",null,{xmlns:ho.CT,"xmlns:xsd":ho.xsd,"xmlns:xsi":ho.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return _t("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=_t("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:YR[l][e.bookType]||YR[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=_t("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:YR[l][e.bookType]||YR[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=_t("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var wr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function HEe(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Nw(t){var e=[Ds,_t("Relationships",null,{xmlns:ho.RELS})];return Vo(t["!id"]).forEach(function(n){e[e.length]=_t("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Gr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[wr.HLINK,wr.XPATH,wr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function q_t(t){var e=[Ds];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Tae(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function K_t(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Y_t(t){var e=[Ds];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(Tae(t[n][0],t[n][1])),e.push(K_t("",t[n][0]));return e.push(Tae("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function qEe(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+x5.version+"</meta:generator></office:meta></office:document-meta>"}var v1=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function S$(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Wr(e),r[r.length]=n?_t(t,e,n):Do(t,e))}function KEe(t,e){var n=e||{},r=[Ds,_t("cp:coreProperties",null,{"xmlns:cp":ho.CORE_PROPS,"xmlns:dc":ho.dc,"xmlns:dcterms":ho.dcterms,"xmlns:dcmitype":ho.dcmitype,"xmlns:xsi":ho.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&S$("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:sG(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&S$("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:sG(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=v1.length;++s){var o=v1[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&S$(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Lw=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],YEe=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function XEe(t){var e=[],n=_t;return t||(t={}),t.Application="SheetJS",e[e.length]=Ds,e[e.length]=_t("Properties",null,{xmlns:ho.EXT_PROPS,"xmlns:vt":ho.vt}),Lw.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Wr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Wr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function ZEe(t){var e=[Ds,_t("Properties",null,{xmlns:ho.CUST_PROPS,"xmlns:vt":ho.vt})];if(!t)return e.join("");var n=1;return Vo(t).forEach(function(i){++n,e[e.length]=_t("property",f_t(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Wr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var kae={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function X_t(t,e){var n=[];return Vo(kae).map(function(r){for(var i=0;i<v1.length;++i)if(v1[i][1]==r)return v1[i];for(i=0;i<Lw.length;++i)if(Lw[i][1]==r)return Lw[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Do(kae[r[1]]||r[1],i))}}),_t("DocumentProperties",n.join(""),{xmlns:lc.o})}function Z_t(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&Vo(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<v1.length;++o)if(s==v1[o][1])return;for(o=0;o<Lw.length;++o)if(s==Lw[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(_t(fae(s),a,{"dt:dt":l}))}}),e&&Vo(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(_t(fae(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+lc.o+'">'+i.join("")+"</"+r+">"}function J_t(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=Ue(8);return o.write_shift(4,r),o.write_shift(4,i),o}function Aae(t,e){var n=Ue(4),r=Ue(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=Ue(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=J_t(e);break;case 31:case 80:for(r=Ue(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Oo([n,r])}var JEe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Q_t(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Cae(t,e,n){var r=Ue(8),i=[],s=[],o=8,a=0,l=Ue(8),c=Ue(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=Ue(8),c.write_shift(4,0),i.unshift(c);var u=[Ue(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var h=t[a][0];for(l=Ue(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Oo(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(JEe.indexOf(t[a][0])>-1||YEe.indexOf(t[a][0])>-1)&&t[a][1]!=null){var f=t[a][1],g=0;if(e){g=+e[t[a][0]];var y=n[g];if(y.p=="version"&&typeof f=="string"){var _=f.split(".");f=(+_[0]<<16)+(+_[1]||0)}l=Aae(y.t,f)}else{var b=Q_t(f);b==-1&&(b=31,f=String(f)),l=Aae(b,f)}s.push(l),c=Ue(8),c.write_shift(4,e?g:2+a),i.push(c),o+=8+l.length}var T=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,T),T+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),Oo([r].concat(i).concat(s))}function Iae(t,e,n,r,i,s){var o=Ue(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Xr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=Cae(t,n,r);if(a.push(l),i){var c=Cae(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return Oo(a)}function ext(t,e){e||(e=Ue(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function txt(t,e){return t.read_shift(e)===1}function Oa(t,e){return e||(e=Ue(2)),e.write_shift(2,+!!t),e}function QEe(t){return t.read_shift(2,"u")}function Qc(t,e){return e||(e=Ue(2)),e.write_shift(2,t),e}function eSe(t,e,n){return n||(n=Ue(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function tSe(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function nxt(t){var e=t.t||"",n=Ue(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=Ue(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Oo(i)}function rxt(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function ixt(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):rxt(t,r,n)}function sxt(t,e,n){if(n.biff>5)return ixt(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function nSe(t,e,n){return n||(n=Ue(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Pae(t,e){e||(e=Ue(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function oxt(t){var e=Ue(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),Pae(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&Pae(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function av(t,e,n,r){return r||(r=Ue(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function axt(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function lxt(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function rSe(t,e){return e||(e=Ue(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function rK(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ue(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function cxt(t,e){var n=!e||e.biff==8,r=Ue(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function uxt(t,e){var n=!e||e.biff>=8?2:1,r=Ue(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function hxt(t,e){var n=Ue(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=nxt(t[i]);var s=Oo([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function dxt(){var t=Ue(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function fxt(t){var e=Ue(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function pxt(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=Ue(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function mxt(t,e,n,r){var i=Ue(10);return av(t,e,r,i),i.write_shift(4,n),i}function gxt(t,e,n,r,i){var s=!i||i.biff==8,o=Ue(8+ +s+(1+s)*n.length);return av(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function yxt(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function vxt(t,e){var n=e.biff==8||!e.biff?4:2,r=Ue(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Rae(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function _xt(t){var e=Ue(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function xxt(t,e,n,r,i,s){var o=Ue(8);return av(t,e,r,o),eSe(n,s,o),o}function wxt(t,e,n,r){var i=Ue(14);return av(t,e,r,i),ov(n,i),i}function bxt(t,e,n){if(n.biff<8)return Ext(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(axt(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function Ext(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=tSe(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function Sxt(t){var e=Ue(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)rSe(t[n],e);return e}function Txt(t){var e=Ue(24),n=po(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Oo([e,oxt(t[1])])}function kxt(t){var e=t[1].Tooltip,n=Ue(10+2*(e.length+1));n.write_shift(2,2048);var r=po(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function Axt(t){return t||(t=Ue(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Cxt(t,e,n){if(!n.cellStyles)return qd(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Ixt(t,e){var n=Ue(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Pxt(t){for(var e=Ue(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Rxt(t,e,n){var r=Ue(15);return yI(r,t,e),r.write_shift(8,n,"f"),r}function Mxt(t,e,n){var r=Ue(9);return yI(r,t,e),r.write_shift(2,n),r}var Nxt=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Hq({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=sv(1);switch(l.type){case"base64":u=oh(Pp(a));break;case"binary":u=oh(a);break;case"buffer":case"array":u=a;break}ic(u,0);var h=u.read_shift(1),f=!!(h&136),g=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,f=!0;break;case 49:g=!0,f=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var _=0,b=521;h==2&&(_=u.read_shift(2)),u.l+=3,h!=2&&(_=u.read_shift(4)),_>1048576&&(_=1e6),h!=2&&(b=u.read_shift(2));var T=u.read_shift(2),A=l.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(A=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var C=[],I={},R=Math.min(u.length,h==2?521:b-10-(g?264:0)),V=y?32:11;u.l<R&&u[u.l]!=13;)switch(I={},I.name=w5.utils.decode(A,u.slice(u.l,u.l+V)).replace(/[\u0000\r\n].*$/g,""),u.l+=V,I.type=String.fromCharCode(u.read_shift(1)),h!=2&&!y&&(I.offset=u.read_shift(4)),I.len=u.read_shift(1),h==2&&(I.offset=u.read_shift(2)),I.dec=u.read_shift(1),I.name.length&&C.push(I),h!=2&&(u.l+=y?13:14),I.type){case"B":(!g||I.len!=8)&&l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+I.name+":"+I.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+I.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var P=0,N=0;for(c[0]=[],N=0;N!=C.length;++N)c[0][N]=C[N].name;for(;_-- >0;){if(u[u.l]===42){u.l+=T;continue}for(++u.l,c[++P]=[],N=0,N=0;N!=C.length;++N){var L=u.slice(u.l,u.l+C[N].len);u.l+=C[N].len,ic(L,0);var O=w5.utils.decode(A,L);switch(C[N].type){case"C":O.trim().length&&(c[P][N]=O.replace(/\s+$/,""));break;case"D":O.length===8?c[P][N]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):c[P][N]=O;break;case"F":c[P][N]=parseFloat(O.trim());break;case"+":case"I":c[P][N]=y?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":c[P][N]=!0;break;case"N":case"F":c[P][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[P][N]="##MEMO##"+(y?parseInt(O.trim(),10):L.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(c[P][N]=+O||0);break;case"@":c[P][N]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":c[P][N]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":c[P][N]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[P][N]=-L.read_shift(-8,"f");break;case"B":if(g&&C[N].len==8){c[P][N]=L.read_shift(8,"f");break}case"G":case"P":L.l+=C[N].len;break;case"0":if(C[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[N].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=C,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Gb(n(a,c),c);return u["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,u}function i(a,l){try{return Cv(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&zA(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Cl(),h=L5(a,{header:1,raw:!0,cellDates:!0}),f=h[0],g=h.slice(1),y=a["!cols"]||[],_=0,b=0,T=0,A=1;for(_=0;_<f.length;++_){if(((y[_]||{}).DBF||{}).name){f[_]=y[_].DBF.name,++T;continue}if(f[_]!=null){if(++T,typeof f[_]=="number"&&(f[_]=f[_].toString(10)),typeof f[_]!="string")throw new Error("DBF Invalid column name "+f[_]+" |"+typeof f[_]+"|");if(f.indexOf(f[_])!==_){for(b=0;b<1024;++b)if(f.indexOf(f[_]+"_"+b)==-1){f[_]+="_"+b;break}}}}var C=vi(a["!ref"]),I=[],R=[],V=[];for(_=0;_<=C.e.c-C.s.c;++_){var P="",N="",L=0,O=[];for(b=0;b<g.length;++b)g[b][_]!=null&&O.push(g[b][_]);if(O.length==0||f[_]==null){I[_]="?";continue}for(b=0;b<O.length;++b){switch(typeof O[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=O[b]instanceof Date?"D":"C";break;default:N="C"}L=Math.max(L,String(O[b]).length),P=P&&P!=N?"C":N}L>250&&(L=250),N=((y[_]||{}).DBF||{}).type,N=="C"&&y[_].DBF.len>L&&(L=y[_].DBF.len),P=="B"&&N=="N"&&(P="N",V[_]=y[_].DBF.dec,L=y[_].DBF.len),R[_]=P=="C"||N=="N"?L:s[P]||0,A+=R[_],I[_]=P}var F=u.next(32);for(F.write_shift(4,318902576),F.write_shift(4,g.length),F.write_shift(2,296+32*T),F.write_shift(2,A),_=0;_<4;++_)F.write_shift(4,0);for(F.write_shift(4,0|(+e[sEe]||3)<<8),_=0,b=0;_<f.length;++_)if(f[_]!=null){var G=u.next(32),U=(f[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,U,"sbcs"),G.write_shift(1,I[_]=="?"?"C":I[_],"sbcs"),G.write_shift(4,b),G.write_shift(1,R[_]||s[I[_]]||0),G.write_shift(1,V[_]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),b+=R[_]||s[I[_]]||0}var ue=u.next(264);for(ue.write_shift(4,13),_=0;_<65;++_)ue.write_shift(4,0);for(_=0;_<g.length;++_){var be=u.next(A);for(be.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(I[b]){case"L":be.write_shift(1,g[_][b]==null?63:g[_][b]?84:70);break;case"B":be.write_shift(8,g[_][b]||0,"f");break;case"N":var ze="0";for(typeof g[_][b]=="number"&&(ze=g[_][b].toFixed(V[b]||0)),T=0;T<R[b]-ze.length;++T)be.write_shift(1,32);be.write_shift(1,ze,"sbcs");break;case"D":g[_][b]?(be.write_shift(4,("0000"+g[_][b].getFullYear()).slice(-4),"sbcs"),be.write_shift(2,("00"+(g[_][b].getMonth()+1)).slice(-2),"sbcs"),be.write_shift(2,("00"+g[_][b].getDate()).slice(-2),"sbcs")):be.write_shift(8,"00000000","sbcs");break;case"C":var Ce=String(g[_][b]!=null?g[_][b]:"").slice(0,R[b]);for(be.write_shift(1,Ce,"sbcs"),T=0;T<R[b]-Ce.length;++T)be.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}})(),Lxt=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Vo(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(f,g){var y=t[g];return typeof y=="number"?tae(y):y},r=function(f,g,y){var _=g.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return _==59?f:tae(_)};t["|"]=254;function i(f,g){switch(g.type){case"base64":return s(Pp(f),g);case"binary":return s(f,g);case"buffer":return s(Ar&&Buffer.isBuffer(f)?f.toString("binary"):dI(f),g);case"array":return s(nD(f),g)}throw new Error("Unrecognized type "+g.type)}function s(f,g){var y=f.split(/[\n\r]+/),_=-1,b=-1,T=0,A=0,C=[],I=[],R=null,V={},P=[],N=[],L=[],O=0,F;for(+g.codepage>=0&&zA(+g.codepage);T!==y.length;++T){O=0;var G=y[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),U=G.replace(/;;/g,"\0").split(";").map(function(Q){return Q.replace(/\u0000/g,";")}),ue=U[0],be;if(G.length>0)switch(ue){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&I.push(G.slice(3).replace(/;;/g,";"));break;case"C":var ze=!1,Ce=!1,de=!1,Le=!1,xe=-1,Z=-1;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"A":break;case"X":b=parseInt(U[A].slice(1))-1,Ce=!0;break;case"Y":for(_=parseInt(U[A].slice(1))-1,Ce||(b=0),F=C.length;F<=_;++F)C[F]=[];break;case"K":be=U[A].slice(1),be.charAt(0)==='"'?be=be.slice(1,be.length-1):be==="TRUE"?be=!0:be==="FALSE"?be=!1:isNaN(vp(be))?isNaN(UA(be).getDate())||(be=Ba(be)):(be=vp(be),R!==null&&yEe(R)&&(be=wEe(be))),ze=!0;break;case"E":Le=!0;var W=Mwt(U[A].slice(1),{r:_,c:b});C[_][b]=[C[_][b],W];break;case"S":de=!0,C[_][b]=[C[_][b],"S5S"];break;case"G":break;case"R":xe=parseInt(U[A].slice(1))-1;break;case"C":Z=parseInt(U[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}if(ze&&(C[_][b]&&C[_][b].length==2?C[_][b][0]=be:C[_][b]=be,R=null),de){if(Le)throw new Error("SYLK shared formula cannot have own formula");var ne=xe>-1&&C[xe][Z];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");C[_][b][1]=Nwt(ne[1],{r:_-xe,c:b-Z})}break;case"F":var se=0;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"X":b=parseInt(U[A].slice(1))-1,++se;break;case"Y":for(_=parseInt(U[A].slice(1))-1,F=C.length;F<=_;++F)C[F]=[];break;case"M":O=parseInt(U[A].slice(1))/20;break;case"F":break;case"G":break;case"P":R=I[parseInt(U[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=U[A].slice(1).split(" "),F=parseInt(L[0],10);F<=parseInt(L[1],10);++F)O=parseInt(L[2],10),N[F-1]=O===0?{hidden:!0}:{wch:O},iK(N[F-1]);break;case"C":b=parseInt(U[A].slice(1))-1,N[b]||(N[b]={});break;case"R":_=parseInt(U[A].slice(1))-1,P[_]||(P[_]={}),O>0?(P[_].hpt=O,P[_].hpx=lSe(O)):O===0&&(P[_].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}se<1&&(R=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}}return P.length>0&&(V["!rows"]=P),N.length>0&&(V["!cols"]=N),g&&g.sheetRows&&(C=C.slice(0,g.sheetRows)),[C,V]}function o(f,g){var y=i(f,g),_=y[0],b=y[1],T=Gb(_,g);return Vo(b).forEach(function(A){T[A]=b[A]}),T}function a(f,g){return Cv(o(f,g),g)}function l(f,g,y,_){var b="C;Y"+(y+1)+";X"+(_+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+oK(f.f,{r:y,c:_}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(f,g){g.forEach(function(y,_){var b="F;W"+(_+1)+" "+(_+1)+" ";y.hidden?b+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=P5(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=R5(y.wpx)),typeof y.wch=="number"&&(b+=Math.round(y.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,g){g.forEach(function(y,_){var b="F;";y.hidden?b+="M0;":y.hpt?b+="M"+20*y.hpt+";":y.hpx&&(b+="M"+20*M5(y.hpx)+";"),b.length>2&&f.push(b+"R"+(_+1))})}function h(f,g){var y=["ID;PWXL;N;E"],_=[],b=vi(f["!ref"]),T,A=Array.isArray(f),C=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),f["!cols"]&&c(y,f["!cols"]),f["!rows"]&&u(y,f["!rows"]),y.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var I=b.s.r;I<=b.e.r;++I)for(var R=b.s.c;R<=b.e.c;++R){var V=qr({r:I,c:R});T=A?(f[I]||[])[R]:f[V],!(!T||T.v==null&&(!T.f||T.F))&&_.push(l(T,f,I,R))}return y.join(C)+C+_.join(C)+C+"E"+C}return{to_workbook:a,to_sheet:o,from_sheet:h}})(),Oxt=(function(){function t(s,o){switch(o.type){case"base64":return e(Pp(s),o);case"binary":return e(s,o);case"buffer":return e(Ar&&Buffer.isBuffer(s)?s.toString("binary"):dI(s),o);case"array":return e(nD(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,h=[];u!==a.length;++u){if(a[u].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var f=a[u].trim().split(","),g=f[0],y=f[1];++u;for(var _=a[u]||"";(_.match(/["]/g)||[]).length&1&&u<a.length-1;)_+=`
`+a[++u];switch(_=_.trim(),+g){case-1:if(_==="BOT"){h[++l]=[],c=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?h[l][c]=!0:_==="FALSE"?h[l][c]=!1:isNaN(vp(y))?isNaN(UA(y).getDate())?h[l][c]=y:h[l][c]=Ba(y):h[l][c]=vp(y),++c;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),h[l][c++]=_!==""?_:null;break}if(_==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function n(s,o){return Gb(t(s,o),o)}function r(s,o){return Cv(n(s,o),o)}var i=(function(){var s=function(l,c,u,h,f){l.push(c),l.push(u+","+h),l.push('"'+f.replace(/"/g,'""')+'"')},o=function(l,c,u,h){l.push(c+","+u),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],u=vi(l["!ref"]),h,f=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(c,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var _=qr({r:g,c:y});if(h=f?(l[g]||[])[y]:l[_],!h){o(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(c,1,0,"="+h.f):o(c,1,0,""):o(c,0,b,"V");break;case"b":o(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=a0(h.z||is[14],Ml(Ba(h.v)))),o(c,0,h.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var T=`\r
`,A=c.join(T);return A}})();return{to_workbook:r,to_sheet:n,from_sheet:i}})(),iSe=(function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,f){for(var g=h.split(`
`),y=-1,_=-1,b=0,T=[];b!==g.length;++b){var A=g[b].trim().split(":");if(A[0]==="cell"){var C=po(A[1]);if(T.length<=C.r)for(y=T.length;y<=C.r;++y)T[y]||(T[y]=[]);switch(y=C.r,_=C.c,A[2]){case"t":T[y][_]=t(A[3]);break;case"v":T[y][_]=+A[3];break;case"vtf":var I=A[A.length-1];case"vtc":switch(A[3]){case"nl":T[y][_]=!!+A[4];break;default:T[y][_]=+A[4];break}A[2]=="vtf"&&(T[y][_]=[T[y][_],I])}}}return f&&f.sheetRows&&(T=T.slice(0,f.sheetRows)),T}function r(h,f){return Gb(n(h,f),f)}function i(h,f){return Cv(r(h,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var f=[],g=[],y,_="",b=Ac(h["!ref"]),T=Array.isArray(h),A=b.s.r;A<=b.e.r;++A)for(var C=b.s.c;C<=b.e.c;++C)if(_=qr({r:A,c:C}),y=T?(h[A]||[])[C]:h[_],!(!y||y.v==null||y.t==="z")){switch(g=["cell",_,"t"],y.t){case"s":case"str":g.push(e(y.v));break;case"n":y.f?(g[2]="vtf",g[3]="n",g[4]=y.v,g[5]=e(y.f)):(g[2]="v",g[3]=y.v);break;case"b":g[2]="vt"+(y.f?"f":"c"),g[3]="nl",g[4]=y.v?"1":"0",g[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var I=Ml(Ba(y.v));g[2]="vtc",g[3]="nd",g[4]=""+I,g[5]=y.w||a0(y.z||is[14],I);break;case"e":continue}f.push(g.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[s,o,a,o,c(h),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}})(),Dxt=(function(){function t(u,h,f,g,y){y.raw?h[f][g]=u:u===""||(u==="TRUE"?h[f][g]=!0:u==="FALSE"?h[f][g]=!1:isNaN(vp(u))?isNaN(UA(u).getDate())?h[f][g]=u:h[f][g]=Ba(u):h[f][g]=vp(u))}function e(u,h){var f=h||{},g=[];if(!u||u.length===0)return g;for(var y=u.split(/[\r\n]/),_=y.length-1;_>=0&&y[_].length===0;)--_;for(var b=10,T=0,A=0;A<=_;++A)T=y[A].indexOf(" "),T==-1?T=y[A].length:T++,b=Math.max(b,T);for(A=0;A<=_;++A){g[A]=[];var C=0;for(t(y[A].slice(0,b).trim(),g,A,C,f),C=1;C<=(y[A].length-b)/10+1;++C)t(y[A].slice(b+(C-1)*10,b+C*10).trim(),g,A,C,f)}return f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var h={},f=!1,g=0,y=0;g<u.length;++g)(y=u.charCodeAt(g))==34?f=!f:!f&&y in n&&(h[y]=(h[y]||0)+1);y=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g]);if(!y.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g])}return y.sort(function(_,b){return _[0]-b[0]||r[_[1]]-r[b[1]]}),n[y.pop()[1]]||44}function s(u,h){var f=h||{},g="",y=f.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):f&&f.FS?g=f.FS:g=i(u.slice(0,1024));var b=0,T=0,A=0,C=0,I=0,R=g.charCodeAt(0),V=!1,P=0,N=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var L=f.dateNF!=null?Jvt(f.dateNF):null;function O(){var F=u.slice(C,I),G={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)G.t="z";else if(f.raw)G.t="s",G.v=F;else if(F.trim().length===0)G.t="s",G.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(G.t="s",G.v=F.slice(2,-1).replace(/""/g,'"')):Lwt(F)?(G.t="n",G.f=F.slice(1)):(G.t="s",G.v=F);else if(F=="TRUE")G.t="b",G.v=!0;else if(F=="FALSE")G.t="b",G.v=!1;else if(!isNaN(A=vp(F)))G.t="n",f.cellText!==!1&&(G.w=F),G.v=A;else if(!isNaN(UA(F).getDate())||L&&F.match(L)){G.z=f.dateNF||is[14];var U=0;L&&F.match(L)&&(F=Qvt(F,f.dateNF,F.match(L)||[]),U=1),f.cellDates?(G.t="d",G.v=Ba(F,U)):(G.t="n",G.v=Ml(Ba(F,U))),f.cellText!==!1&&(G.w=a0(G.z,G.v instanceof Date?Ml(G.v):G.v)),f.cellNF||delete G.z}else G.t="s",G.v=F;if(G.t=="z"||(f.dense?(y[b]||(y[b]=[]),y[b][T]=G):y[qr({c:T,r:b})]=G),C=I+1,N=u.charCodeAt(C),_.e.c<T&&(_.e.c=T),_.e.r<b&&(_.e.r=b),P==R)++T;else if(T=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;I<u.length;++I)switch(P=u.charCodeAt(I)){case 34:N===34&&(V=!V);break;case R:case 10:case 13:if(!V&&O())break e;break}return I-C>0&&O(),y["!ref"]=Os(_),y}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,h):Gb(e(u,h),h)}function a(u,h){var f="",g=h.type=="string"?[0,0,0,0]:KSt(u,h);switch(h.type){case"base64":f=Pp(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof w5<"u"||(f=Ar&&Buffer.isBuffer(u)?u.toString("binary"):dI(u));break;case"array":f=nD(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?f=pk(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=pk(f):h.type=="binary"&&typeof w5<"u",f.slice(0,19)=="socialcalc:version:"?iSe.to_sheet(h.type=="string"?f:pk(f),h):o(f,h)}function l(u,h){return Cv(a(u,h),h)}function c(u){for(var h=[],f=vi(u["!ref"]),g,y=Array.isArray(u),_=f.s.r;_<=f.e.r;++_){for(var b=[],T=f.s.c;T<=f.e.c;++T){var A=qr({r:_,c:T});if(g=y?(u[_]||[])[T]:u[A],!g||g.v==null){b.push("          ");continue}for(var C=(g.w||(Rp(g),g.w)||"").slice(0,10);C.length<10;)C+=" ";b.push(C+(T===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}})(),Mae=(function(){function t(W,ne,se){if(W){ic(W,W.l||0);for(var Q=se.Enum||xe;W.l<W.length;){var me=W.read_shift(2),Ke=Q[me]||Q[65535],Ye=W.read_shift(2),ke=W.l+Ye,Ee=Ke.f&&Ke.f(W,Ye,se);if(W.l=ke,ne(Ee,Ke,me))return}}}function e(W,ne){switch(ne.type){case"base64":return n(oh(Pp(W)),ne);case"binary":return n(oh(W),ne);case"buffer":case"array":return n(W,ne)}throw"Unsupported type "+ne.type}function n(W,ne){if(!W)return W;var se=ne||{},Q=se.dense?[]:{},me="Sheet1",Ke="",Ye=0,ke={},Ee=[],Dt=[],Xe={s:{r:0,c:0},e:{r:0,c:0}},cn=se.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)se.Enum=xe,t(W,function(pt,hr,zn){switch(zn){case 0:se.vers=pt,pt>=4096&&(se.qpro=!0);break;case 6:Xe=pt;break;case 204:pt&&(Ke=pt);break;case 222:Ke=pt;break;case 15:case 51:se.qpro||(pt[1].v=pt[1].v.slice(1));case 13:case 14:case 16:zn==14&&(pt[2]&112)==112&&(pt[2]&15)>1&&(pt[2]&15)<15&&(pt[1].z=se.dateNF||is[14],se.cellDates&&(pt[1].t="d",pt[1].v=wEe(pt[1].v))),se.qpro&&pt[3]>Ye&&(Q["!ref"]=Os(Xe),ke[me]=Q,Ee.push(me),Q=se.dense?[]:{},Xe={s:{r:0,c:0},e:{r:0,c:0}},Ye=pt[3],me=Ke||"Sheet"+(Ye+1),Ke="");var Hn=se.dense?(Q[pt[0].r]||[])[pt[0].c]:Q[qr(pt[0])];if(Hn){Hn.t=pt[1].t,Hn.v=pt[1].v,pt[1].z!=null&&(Hn.z=pt[1].z),pt[1].f!=null&&(Hn.f=pt[1].f);break}se.dense?(Q[pt[0].r]||(Q[pt[0].r]=[]),Q[pt[0].r][pt[0].c]=pt[1]):Q[qr(pt[0])]=pt[1];break}},se);else if(W[2]==26||W[2]==14)se.Enum=Z,W[2]==14&&(se.qpro=!0,W.l=0),t(W,function(pt,hr,zn){switch(zn){case 204:me=pt;break;case 22:pt[1].v=pt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(pt[3]>Ye&&(Q["!ref"]=Os(Xe),ke[me]=Q,Ee.push(me),Q=se.dense?[]:{},Xe={s:{r:0,c:0},e:{r:0,c:0}},Ye=pt[3],me="Sheet"+(Ye+1)),cn>0&&pt[0].r>=cn)break;se.dense?(Q[pt[0].r]||(Q[pt[0].r]=[]),Q[pt[0].r][pt[0].c]=pt[1]):Q[qr(pt[0])]=pt[1],Xe.e.c<pt[0].c&&(Xe.e.c=pt[0].c),Xe.e.r<pt[0].r&&(Xe.e.r=pt[0].r);break;case 27:pt[14e3]&&(Dt[pt[14e3][0]]=pt[14e3][1]);break;case 1537:Dt[pt[0]]=pt[1],pt[0]==Ye&&(me=pt[1]);break}},se);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(Q["!ref"]=Os(Xe),ke[Ke||me]=Q,Ee.push(Ke||me),!Dt.length)return{SheetNames:Ee,Sheets:ke};for(var jt={},gn=[],wn=0;wn<Dt.length;++wn)ke[Ee[wn]]?(gn.push(Dt[wn]||Ee[wn]),jt[Dt[wn]]=ke[Dt[wn]]||ke[Ee[wn]]):(gn.push(Dt[wn]),jt[Dt[wn]]={"!ref":"A1"});return{SheetNames:gn,Sheets:jt}}function r(W,ne){var se=ne||{};if(+se.codepage>=0&&zA(+se.codepage),se.type=="string")throw new Error("Cannot write WK1 to JS string");var Q=Cl(),me=vi(W["!ref"]),Ke=Array.isArray(W),Ye=[];bt(Q,0,s(1030)),bt(Q,6,l(me));for(var ke=Math.min(me.e.r,8191),Ee=me.s.r;Ee<=ke;++Ee)for(var Dt=Fo(Ee),Xe=me.s.c;Xe<=me.e.c;++Xe){Ee===me.s.r&&(Ye[Xe]=ba(Xe));var cn=Ye[Xe]+Dt,jt=Ke?(W[Ee]||[])[Xe]:W[cn];if(!(!jt||jt.t=="z"))if(jt.t=="n")(jt.v|0)==jt.v&&jt.v>=-32768&&jt.v<=32767?bt(Q,13,g(Ee,Xe,jt.v)):bt(Q,14,_(Ee,Xe,jt.v));else{var gn=Rp(jt);bt(Q,15,h(Ee,Xe,gn.slice(0,239)))}}return bt(Q,1),Q.end()}function i(W,ne){var se=ne||{};if(+se.codepage>=0&&zA(+se.codepage),se.type=="string")throw new Error("Cannot write WK3 to JS string");var Q=Cl();bt(Q,0,o(W));for(var me=0,Ke=0;me<W.SheetNames.length;++me)(W.Sheets[W.SheetNames[me]]||{})["!ref"]&&bt(Q,27,Le(W.SheetNames[me],Ke++));var Ye=0;for(me=0;me<W.SheetNames.length;++me){var ke=W.Sheets[W.SheetNames[me]];if(!(!ke||!ke["!ref"])){for(var Ee=vi(ke["!ref"]),Dt=Array.isArray(ke),Xe=[],cn=Math.min(Ee.e.r,8191),jt=Ee.s.r;jt<=cn;++jt)for(var gn=Fo(jt),wn=Ee.s.c;wn<=Ee.e.c;++wn){jt===Ee.s.r&&(Xe[wn]=ba(wn));var pt=Xe[wn]+gn,hr=Dt?(ke[jt]||[])[wn]:ke[pt];if(!(!hr||hr.t=="z"))if(hr.t=="n")bt(Q,23,O(jt,wn,Ye,hr.v));else{var zn=Rp(hr);bt(Q,22,P(jt,wn,Ye,zn.slice(0,239)))}}++Ye}}return bt(Q,1),Q.end()}function s(W){var ne=Ue(2);return ne.write_shift(2,W),ne}function o(W){var ne=Ue(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var se=0,Q=0,me=0,Ke=0;Ke<W.SheetNames.length;++Ke){var Ye=W.SheetNames[Ke],ke=W.Sheets[Ye];if(!(!ke||!ke["!ref"])){++me;var Ee=Ac(ke["!ref"]);se<Ee.e.r&&(se=Ee.e.r),Q<Ee.e.c&&(Q=Ee.e.c)}}return se>8191&&(se=8191),ne.write_shift(2,se),ne.write_shift(1,me),ne.write_shift(1,Q),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function a(W,ne,se){var Q={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&se.qpro?(Q.s.c=W.read_shift(1),W.l++,Q.s.r=W.read_shift(2),Q.e.c=W.read_shift(1),W.l++,Q.e.r=W.read_shift(2),Q):(Q.s.c=W.read_shift(2),Q.s.r=W.read_shift(2),ne==12&&se.qpro&&(W.l+=2),Q.e.c=W.read_shift(2),Q.e.r=W.read_shift(2),ne==12&&se.qpro&&(W.l+=2),Q.s.c==65535&&(Q.s.c=Q.e.c=Q.s.r=Q.e.r=0),Q)}function l(W){var ne=Ue(8);return ne.write_shift(2,W.s.c),ne.write_shift(2,W.s.r),ne.write_shift(2,W.e.c),ne.write_shift(2,W.e.r),ne}function c(W,ne,se){var Q=[{c:0,r:0},{t:"n",v:0},0,0];return se.qpro&&se.vers!=20768?(Q[0].c=W.read_shift(1),Q[3]=W.read_shift(1),Q[0].r=W.read_shift(2),W.l+=2):(Q[2]=W.read_shift(1),Q[0].c=W.read_shift(2),Q[0].r=W.read_shift(2)),Q}function u(W,ne,se){var Q=W.l+ne,me=c(W,ne,se);if(me[1].t="s",se.vers==20768){W.l++;var Ke=W.read_shift(1);return me[1].v=W.read_shift(Ke,"utf8"),me}return se.qpro&&W.l++,me[1].v=W.read_shift(Q-W.l,"cstr"),me}function h(W,ne,se){var Q=Ue(7+se.length);Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,W),Q.write_shift(1,39);for(var me=0;me<Q.length;++me){var Ke=se.charCodeAt(me);Q.write_shift(1,Ke>=128?95:Ke)}return Q.write_shift(1,0),Q}function f(W,ne,se){var Q=c(W,ne,se);return Q[1].v=W.read_shift(2,"i"),Q}function g(W,ne,se){var Q=Ue(7);return Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,W),Q.write_shift(2,se,"i"),Q}function y(W,ne,se){var Q=c(W,ne,se);return Q[1].v=W.read_shift(8,"f"),Q}function _(W,ne,se){var Q=Ue(13);return Q.write_shift(1,255),Q.write_shift(2,ne),Q.write_shift(2,W),Q.write_shift(8,se,"f"),Q}function b(W,ne,se){var Q=W.l+ne,me=c(W,ne,se);if(me[1].v=W.read_shift(8,"f"),se.qpro)W.l=Q;else{var Ke=W.read_shift(2);I(W.slice(W.l,W.l+Ke),me),W.l+=Ke}return me}function T(W,ne,se){var Q=ne&32768;return ne&=-32769,ne=(Q?W:0)+(ne>=8192?ne-16384:ne),(Q?"":"$")+(se?ba(ne):Fo(ne))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function I(W,ne){ic(W,0);for(var se=[],Q=0,me="",Ke="",Ye="",ke="";W.l<W.length;){var Ee=W[W.l++];switch(Ee){case 0:se.push(W.read_shift(8,"f"));break;case 1:Ke=T(ne[0].c,W.read_shift(2),!0),me=T(ne[0].r,W.read_shift(2),!1),se.push(Ke+me);break;case 2:{var Dt=T(ne[0].c,W.read_shift(2),!0),Xe=T(ne[0].r,W.read_shift(2),!1);Ke=T(ne[0].c,W.read_shift(2),!0),me=T(ne[0].r,W.read_shift(2),!1),se.push(Dt+Xe+":"+Ke+me)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:se.push("("+se.pop()+")");break;case 5:se.push(W.read_shift(2));break;case 6:{for(var cn="";Ee=W[W.l++];)cn+=String.fromCharCode(Ee);se.push('"'+cn.replace(/"/g,'""')+'"')}break;case 8:se.push("-"+se.pop());break;case 23:se.push("+"+se.pop());break;case 22:se.push("NOT("+se.pop()+")");break;case 20:case 21:ke=se.pop(),Ye=se.pop(),se.push(["AND","OR"][Ee-20]+"("+Ye+","+ke+")");break;default:if(Ee<32&&C[Ee])ke=se.pop(),Ye=se.pop(),se.push(Ye+C[Ee]+ke);else if(A[Ee]){if(Q=A[Ee][1],Q==69&&(Q=W[W.l++]),Q>se.length){console.error("WK1 bad formula parse 0x"+Ee.toString(16)+":|"+se.join("|")+"|");return}var jt=se.slice(-Q);se.length-=Q,se.push(A[Ee][0]+"("+jt.join(",")+")")}else return Ee<=7?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=24?console.error("WK1 unsupported op "+Ee.toString(16)):Ee<=30?console.error("WK1 invalid opcode "+Ee.toString(16)):Ee<=115?console.error("WK1 unsupported function opcode "+Ee.toString(16)):console.error("WK1 unrecognized opcode "+Ee.toString(16))}}se.length==1?ne[1].f=""+se[0]:console.error("WK1 bad formula parse |"+se.join("|")+"|")}function R(W){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=W.read_shift(2),ne[3]=W[W.l++],ne[0].c=W[W.l++],ne}function V(W,ne){var se=R(W);return se[1].t="s",se[1].v=W.read_shift(ne-4,"cstr"),se}function P(W,ne,se,Q){var me=Ue(6+Q.length);me.write_shift(2,W),me.write_shift(1,se),me.write_shift(1,ne),me.write_shift(1,39);for(var Ke=0;Ke<Q.length;++Ke){var Ye=Q.charCodeAt(Ke);me.write_shift(1,Ye>=128?95:Ye)}return me.write_shift(1,0),me}function N(W,ne){var se=R(W);se[1].v=W.read_shift(2);var Q=se[1].v>>1;if(se[1].v&1)switch(Q&7){case 0:Q=(Q>>3)*5e3;break;case 1:Q=(Q>>3)*500;break;case 2:Q=(Q>>3)/20;break;case 3:Q=(Q>>3)/200;break;case 4:Q=(Q>>3)/2e3;break;case 5:Q=(Q>>3)/2e4;break;case 6:Q=(Q>>3)/16;break;case 7:Q=(Q>>3)/64;break}return se[1].v=Q,se}function L(W,ne){var se=R(W),Q=W.read_shift(4),me=W.read_shift(4),Ke=W.read_shift(2);if(Ke==65535)return Q===0&&me===3221225472?(se[1].t="e",se[1].v=15):Q===0&&me===3489660928?(se[1].t="e",se[1].v=42):se[1].v=0,se;var Ye=Ke&32768;return Ke=(Ke&32767)-16446,se[1].v=(1-Ye*2)*(me*Math.pow(2,Ke+32)+Q*Math.pow(2,Ke)),se}function O(W,ne,se,Q){var me=Ue(14);if(me.write_shift(2,W),me.write_shift(1,se),me.write_shift(1,ne),Q==0)return me.write_shift(4,0),me.write_shift(4,0),me.write_shift(2,65535),me;var Ke=0,Ye=0,ke=0,Ee=0;return Q<0&&(Ke=1,Q=-Q),Ye=Math.log2(Q)|0,Q/=Math.pow(2,Ye-31),Ee=Q>>>0,(Ee&2147483648)==0&&(Q/=2,++Ye,Ee=Q>>>0),Q-=Ee,Ee|=2147483648,Ee>>>=0,Q*=Math.pow(2,32),ke=Q>>>0,me.write_shift(4,ke),me.write_shift(4,Ee),Ye+=16383+(Ke?32768:0),me.write_shift(2,Ye),me}function F(W,ne){var se=L(W);return W.l+=ne-14,se}function G(W,ne){var se=R(W),Q=W.read_shift(4);return se[1].v=Q>>6,se}function U(W,ne){var se=R(W),Q=W.read_shift(8,"f");return se[1].v=Q,se}function ue(W,ne){var se=U(W);return W.l+=ne-10,se}function be(W,ne){return W[W.l+ne-1]==0?W.read_shift(ne,"cstr"):""}function ze(W,ne){var se=W[W.l++];se>ne-1&&(se=ne-1);for(var Q="";Q.length<se;)Q+=String.fromCharCode(W[W.l++]);return Q}function Ce(W,ne,se){if(!(!se.qpro||ne<21)){var Q=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var me=W.read_shift(ne-21,"cstr");return[Q,me]}}function de(W,ne){for(var se={},Q=W.l+ne;W.l<Q;){var me=W.read_shift(2);if(me==14e3){for(se[me]=[0,""],se[me][0]=W.read_shift(2);W[W.l];)se[me][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return se}function Le(W,ne){var se=Ue(5+W.length);se.write_shift(2,14e3),se.write_shift(2,ne);for(var Q=0;Q<W.length;++Q){var me=W.charCodeAt(Q);se[se.l++]=me>127?95:me}return se[se.l++]=0,se}var xe={0:{n:"BOF",f:QEe},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:be},222:{n:"SHEETNAMELP",f:ze},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:V},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:de},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:ue},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:be},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),jxt=/^\s|\s$|[\t\n\r]/;function sSe(t,e){if(!e.bookSST)return"";var n=[Ds];n[n.length]=_t("sst",null,{xmlns:zb[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(jxt)&&(s+=' xml:space="preserve"'),s+=">"+Wr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Fxt(t){return[t.read_shift(4),t.read_shift(4)]}function $xt(t,e){return e||(e=Ue(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var Vxt=P_t;function zxt(t){var e=Cl();rt(e,159,$xt(t));for(var n=0;n<t.length;++n)rt(e,19,Vxt(t[n]));return rt(e,160),e.end()}function Gxt(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function oSe(t){var e=0,n,r=Gxt(t),i=r.length+1,s,o,a,l,c;for(n=sv(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var Uxt=(function(){function t(i,s){switch(s.type){case"base64":return e(Pp(i),s);case"binary":return e(i,s);case"buffer":return e(Ar&&Buffer.isBuffer(i)?i.toString("binary"):dI(i),s);case"array":return e(nD(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,h){Array.isArray(a)&&(a[h]=[]);for(var f=/\\\w+\b/g,g=0,y,_=-1;y=f.exec(u);){switch(y[0]){case"\\cell":var b=u.slice(g,f.lastIndex-y[0].length);if(b[0]==" "&&(b=b.slice(1)),++_,b.length){var T={v:b,t:"s"};Array.isArray(a)?a[h][_]=T:a[qr({r:h,c:_})]=T}break}g=f.lastIndex}_>c.e.c&&(c.e.c=_)}),a["!ref"]=Os(c),a}function n(i,s){return Cv(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=vi(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=qr({r:c,c:u});a=l?(i[c]||[])[u]:i[h],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(Rp(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}})();function Nae(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var Bxt=6,_p=Bxt;function P5(t){return Math.floor((t+Math.round(128/_p)/256)*_p)}function R5(t){return Math.floor((t-5)/_p*100+.5)/100}function aG(t){return Math.round((t*_p+5)/_p*256)/256}function iK(t){t.width?(t.wpx=P5(t.width),t.wch=R5(t.wpx),t.MDW=_p):t.wpx?(t.wch=R5(t.wpx),t.width=aG(t.wch),t.MDW=_p):typeof t.wch=="number"&&(t.width=aG(t.wch),t.wpx=P5(t.width),t.MDW=_p),t.customWidth&&delete t.customWidth}var Wxt=96,aSe=Wxt;function M5(t){return t*96/aSe}function lSe(t){return t*aSe/96}function Hxt(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=_t("numFmt",null,{numFmtId:r,formatCode:Wr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=_t("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function qxt(t){var e=[];return e[e.length]=_t("cellXfs",null),t.forEach(function(n){e[e.length]=_t("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=_t("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function cSe(t,e){var n=[Ds,_t("styleSheet",null,{xmlns:zb[0],"xmlns:vt":ho.vt})],r;return t.SSF&&(r=Hxt(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=qxt(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function Kxt(t,e){var n=t.read_shift(2),r=Ea(t);return[n,r]}function Yxt(t,e,n){n||(n=Ue(6+4*e.length)),n.write_shift(2,t),mo(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function Xxt(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=j_t(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=D_t(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ea(t),r}function Zxt(t,e){e||(e=Ue(153)),e.write_shift(2,t.sz*20),F_t(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),C5(t.color,e);var r=0;return r=2,e.write_shift(1,r),mo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Jxt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],T$,Qxt=qd;function Lae(t,e){e||(e=Ue(84)),T$||(T$=Hq(Jxt));var n=T$[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(C5({auto:1},e),C5({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function ewt(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function uSe(t,e,n){n||(n=Ue(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function fS(t,e){return e||(e=Ue(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var twt=qd;function nwt(t,e){return e||(e=Ue(51)),e.write_shift(1,0),fS(null,e),fS(null,e),fS(null,e),fS(null,e),fS(null,e),e.length>e.l?e.slice(0,e.l):e}function rwt(t,e){return e||(e=Ue(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),A5(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function iwt(t,e,n){var r=Ue(2052);return r.write_shift(4,t),A5(e,r),A5(n,r),r.length>r.l?r.slice(0,r.l):r}function swt(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(rt(t,615,yh(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&rt(t,44,Yxt(i,e[i]))}),rt(t,616))}}function owt(t){var e=1;rt(t,611,yh(e)),rt(t,43,Zxt({sz:12,color:{theme:1},name:"Calibri",family:2})),rt(t,612)}function awt(t){var e=2;rt(t,603,yh(e)),rt(t,45,Lae({patternType:"none"})),rt(t,45,Lae({patternType:"gray125"})),rt(t,604)}function lwt(t){var e=1;rt(t,613,yh(e)),rt(t,46,nwt()),rt(t,614)}function cwt(t){var e=1;rt(t,626,yh(e)),rt(t,47,uSe({numFmtId:0},65535)),rt(t,627)}function uwt(t,e){rt(t,617,yh(e.length)),e.forEach(function(n){rt(t,47,uSe(n,0))}),rt(t,618)}function hwt(t){var e=1;rt(t,619,yh(e)),rt(t,48,rwt({xfId:0,name:"Normal"})),rt(t,620)}function dwt(t){var e=0;rt(t,505,yh(e)),rt(t,506)}function fwt(t){var e=0;rt(t,508,iwt(e,"TableStyleMedium9","PivotStyleMedium4")),rt(t,509)}function pwt(t,e){var n=Cl();return rt(n,278),swt(n,t.SSF),owt(n),awt(n),lwt(n),cwt(n),uwt(n,e.cellXfs),hwt(n),dwt(n),fwt(n),rt(n,279),n.end()}function hSe(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Ds];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function mwt(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Ea(t)}}function gwt(t){var e=Ue(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),mo(t.name,e),e.slice(0,e.l)}function ywt(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function vwt(t){var e=Ue(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function _wt(t,e){var n=Ue(8+2*e.length);return n.write_shift(4,t),mo(e,n),n.slice(0,n.l)}function xwt(t){return t.l+=4,t.read_shift(4)!=0}function wwt(t,e){var n=Ue(8);return n.write_shift(4,t),n.write_shift(4,1),n}function bwt(){var t=Cl();return rt(t,332),rt(t,334,yh(1)),rt(t,335,gwt({name:"XLDAPR",version:12e4,flags:3496657072})),rt(t,336),rt(t,339,_wt(1,"XLDAPR")),rt(t,52),rt(t,35,yh(514)),rt(t,4096,yh(0)),rt(t,4097,Qc(1)),rt(t,36),rt(t,53),rt(t,340),rt(t,337,wwt(1)),rt(t,51,vwt([[1,0]])),rt(t,338),rt(t,333),t.end()}function dSe(){var t=[Ds];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Ewt(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=qr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Jx=1024;function fSe(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[_t("xml",null,{"xmlns:v":lc.v,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:mv":lc.mv}).replace(/\/>/,">"),_t("o:shapelayout",_t("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),_t("v:shapetype",[_t("v:stroke",null,{joinstyle:"miter"}),_t("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Jx<t*1e3;)Jx+=1e3;return e.forEach(function(s){var o=po(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?_t("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=_t("v:fill",l,a),u={on:"t",obscured:"t"};++Jx,i=i.concat(["<v:shape"+WA({id:"_x0000_s"+Jx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,_t("v:shadow",null,u),_t("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Do("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Do("x:AutoFill","False"),Do("x:Row",String(o.r)),Do("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function pSe(t){var e=[Ds,_t("comments",null,{xmlns:zb[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=Wr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(Wr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Do("t",Wr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(Do("t",Wr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Swt(t,e,n){var r=[Ds,_t("ThreadedComments",null,{xmlns:ho.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(_t("threadedComment",Do("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Twt(t){var e=[Ds,_t("personList",null,{xmlns:ho.TCMNT,"xmlns:x":zb[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(_t("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function kwt(t){var e={};e.iauthor=t.read_shift(4);var n=Mv(t);return e.rfx=n.s,e.ref=qr(n.s),t.l+=16,e}function Awt(t,e){return e==null&&(e=Ue(36)),e.write_shift(4,t[1].iauthor),Ub(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Cwt=Ea;function Iwt(t){return mo(t.slice(0,54))}function Pwt(t){var e=Cl(),n=[];return rt(e,628),rt(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),rt(e,632,Iwt(i.a)))})}),rt(e,631),rt(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:po(r[0]),e:po(r[0])};rt(e,635,Awt([s,i])),i.t&&i.t.length>0&&rt(e,637,M_t(i)),rt(e,636),delete i.iauthor})}),rt(e,634),rt(e,629),e.end()}function Rwt(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Xr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var mSe=["xlsb","xlsm","xlam","biff8","xla"],Mwt=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+ba(u)+(l?"":"$")+Fo(c)}return function(i,s){return e=s,i.replace(t,n)}})(),sK=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oK=(function(){return function(e,n){return e.replace(sK,function(r,i,s,o,a,l){var c=Qq(o)-(s?0:n.c),u=Jq(l)-(a?0:n.r),h=u==0?"":a?u+1:"["+u+"]",f=c==0?"":s?c+1:"["+c+"]";return i+"R"+h+"C"+f})}})();function Nwt(t,e){return t.replace(sK,function(n,r,i,s,o,a){return r+(i=="$"?i+s:ba(Qq(s)+e.c))+(o=="$"?o+a:Fo(Jq(a)+e.r))})}function Lwt(t){return t.length!=1}function ws(t){t.l+=1}function l0(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function gSe(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return ySe(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=l0(t),a=l0(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function ySe(t){var e=l0(t),n=l0(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Owt(t,e,n){if(n.biff<8)return ySe(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=l0(t),o=l0(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function vSe(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return Dwt(t);var r=t.read_shift(n&&n.biff==12?4:2),i=l0(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Dwt(t){var e=l0(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function jwt(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Fwt(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return $wt(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function $wt(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function Vwt(t,e,n){var r=(t[t.l++]&96)>>5,i=gSe(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function zwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=gSe(t,s,n);return[r,i,o]}function Gwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function Uwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function Bwt(t,e,n){var r=(t[t.l++]&96)>>5,i=Owt(t,e-1,n);return[r,i]}function Wwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function Oae(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Hwt(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function qwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Kwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Ywt(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Xwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function _Se(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function Zwt(t){return t.read_shift(2),_Se(t)}function Jwt(t){return t.read_shift(2),_Se(t)}function Qwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=vSe(t,0,n);return[r,i]}function e2t(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=Fwt(t,0,n);return[r,i]}function t2t(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=vSe(t,0,n);return[r,i,s]}function n2t(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[nbt[i],bSe[i],r]}function r2t(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:i2t(t);return[i,(s[0]===0?bSe:tbt)[s[1]]]}function i2t(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function s2t(t,e,n){t.l+=n&&n.biff==2?3:4}function o2t(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function a2t(t){return t.l++,mI[t.read_shift(1)]}function l2t(t){return t.l++,t.read_shift(2)}function c2t(t){return t.l++,t.read_shift(1)!==0}function u2t(t){return t.l++,Bb(t)}function h2t(t,e,n){return t.l++,tSe(t,e-1,n)}function d2t(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=txt(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=mI[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Bb(t);break;case 2:n[1]=sxt(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function f2t(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?Mv:lxt)(t));return i}function p2t(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=d2t(t,n.biff);return o}function m2t(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function g2t(t,e,n){if(n.biff==5)return y2t(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function y2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function v2t(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function _2t(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function x2t(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function w2t(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var b2t=qd,E2t=qd,S2t=qd;function gI(t,e,n){return t.l+=2,[jwt(t)]}function aK(t){return t.l+=6,[]}var T2t=gI,k2t=aK,A2t=aK,C2t=gI;function xSe(t){return t.l+=2,[QEe(t),t.read_shift(2)&1]}var I2t=gI,P2t=xSe,R2t=aK,M2t=gI,N2t=gI,L2t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function O2t(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=L2t[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function D2t(t){return t.l+=2,[t.read_shift(4)]}function j2t(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function F2t(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function $2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function V2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function z2t(t){return t.l+=4,[0,0]}var Dae={1:{n:"PtgExp",f:o2t},2:{n:"PtgTbl",f:S2t},3:{n:"PtgAdd",f:ws},4:{n:"PtgSub",f:ws},5:{n:"PtgMul",f:ws},6:{n:"PtgDiv",f:ws},7:{n:"PtgPower",f:ws},8:{n:"PtgConcat",f:ws},9:{n:"PtgLt",f:ws},10:{n:"PtgLe",f:ws},11:{n:"PtgEq",f:ws},12:{n:"PtgGe",f:ws},13:{n:"PtgGt",f:ws},14:{n:"PtgNe",f:ws},15:{n:"PtgIsect",f:ws},16:{n:"PtgUnion",f:ws},17:{n:"PtgRange",f:ws},18:{n:"PtgUplus",f:ws},19:{n:"PtgUminus",f:ws},20:{n:"PtgPercent",f:ws},21:{n:"PtgParen",f:ws},22:{n:"PtgMissArg",f:ws},23:{n:"PtgStr",f:h2t},26:{n:"PtgSheet",f:j2t},27:{n:"PtgEndSheet",f:F2t},28:{n:"PtgErr",f:a2t},29:{n:"PtgBool",f:c2t},30:{n:"PtgInt",f:l2t},31:{n:"PtgNum",f:u2t},32:{n:"PtgArray",f:Wwt},33:{n:"PtgFunc",f:n2t},34:{n:"PtgFuncVar",f:r2t},35:{n:"PtgName",f:m2t},36:{n:"PtgRef",f:Qwt},37:{n:"PtgArea",f:Vwt},38:{n:"PtgMemArea",f:v2t},39:{n:"PtgMemErr",f:b2t},40:{n:"PtgMemNoMem",f:E2t},41:{n:"PtgMemFunc",f:_2t},42:{n:"PtgRefErr",f:x2t},43:{n:"PtgAreaErr",f:Gwt},44:{n:"PtgRefN",f:e2t},45:{n:"PtgAreaN",f:Bwt},46:{n:"PtgMemAreaN",f:$2t},47:{n:"PtgMemNoMemN",f:V2t},57:{n:"PtgNameX",f:g2t},58:{n:"PtgRef3d",f:t2t},59:{n:"PtgArea3d",f:zwt},60:{n:"PtgRefErr3d",f:w2t},61:{n:"PtgAreaErr3d",f:Uwt},255:{}},G2t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},U2t={1:{n:"PtgElfLel",f:xSe},2:{n:"PtgElfRw",f:M2t},3:{n:"PtgElfCol",f:T2t},6:{n:"PtgElfRwV",f:N2t},7:{n:"PtgElfColV",f:C2t},10:{n:"PtgElfRadical",f:I2t},11:{n:"PtgElfRadicalS",f:R2t},13:{n:"PtgElfColS",f:k2t},15:{n:"PtgElfColSV",f:A2t},16:{n:"PtgElfRadicalLel",f:P2t},25:{n:"PtgList",f:O2t},29:{n:"PtgSxName",f:D2t},255:{}},B2t={0:{n:"PtgAttrNoop",f:z2t},1:{n:"PtgAttrSemi",f:Xwt},2:{n:"PtgAttrIf",f:Kwt},4:{n:"PtgAttrChoose",f:Hwt},8:{n:"PtgAttrGoto",f:qwt},16:{n:"PtgAttrSum",f:s2t},32:{n:"PtgAttrBaxcel",f:Oae},33:{n:"PtgAttrBaxcel",f:Oae},64:{n:"PtgAttrSpace",f:Zwt},65:{n:"PtgAttrSpaceSemi",f:Jwt},128:{n:"PtgAttrIfError",f:Ywt},255:{}};function W2t(t,e,n,r){if(r.biff<8)return qd(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=p2t(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=f2t(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(qd(t,e)),s}function H2t(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=Dae[s]||Dae[G2t[s]],(s===24||s===25)&&(i=(s===24?U2t:B2t)[t[t.l+1]]),!i||!i.f?qd(t,e):o.push([i.n,i.f(t,e,n)]);return o}function q2t(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var K2t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Y2t(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function wSe(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function jae(t,e,n){var r=wSe(t,e,n);return r=="#REF"?r:Y2t(r,n)}function nb(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,h=0,f=0,g,y="";if(!t[0]||!t[0][0])return"";for(var _=-1,b="",T=0,A=t[0].length;T<A;++T){var C=t[0][T];switch(C[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),_>=0){switch(t[0][_][1][0]){case 0:b=Qi(" ",t[0][_][1][1]);break;case 1:b=Qi("\r",t[0][_][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}c=c+b,_=-1}a.push(c+K2t[C[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=gk(C[1][1],o,i),a.push(yk(u,s));break;case"PtgRefN":u=n?gk(C[1][1],n,i):C[1][1],a.push(yk(u,s));break;case"PtgRef3d":h=C[1][1],u=gk(C[1][2],o,i),y=jae(r,h,i),a.push(y+"!"+yk(u,s));break;case"PtgFunc":case"PtgFuncVar":var I=C[1][0],R=C[1][1];I||(I=0),I&=127;var V=I==0?[]:a.slice(-I);a.length-=I,R==="User"&&(R=V.shift()),a.push(R+"("+V.join(",")+")");break;case"PtgBool":a.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(C[1]);break;case"PtgNum":a.push(String(C[1]));break;case"PtgStr":a.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(C[1]);break;case"PtgAreaN":g=wae(C[1][1],n?{s:n}:o,i),a.push(E$(g,i));break;case"PtgArea":g=wae(C[1][1],o,i),a.push(E$(g,i));break;case"PtgArea3d":h=C[1][1],g=C[1][2],y=jae(r,h,i),a.push(y+"!"+E$(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=C[1][2];var P=(r.names||[])[f-1]||(r[0]||[])[f],N=P?P.Name:"SH33TJSNAME"+String(f);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),a.push(N);break;case"PtgNameX":var L=C[1][1];f=C[1][2];var O;if(i.biff<=5)L<0&&(L=-L),r[L]&&(O=r[L][f]);else{var F="";if(((r[L]||[])[0]||[])[0]==14849||(((r[L]||[])[0]||[])[0]==1025?r[L][f]&&r[L][f].itab>0&&(F=r.SheetNames[r[L][f].itab-1]+"!"):F=r.SheetNames[f-1]+"!"),r[L]&&r[L][f])F+=r[L][f].Name;else if(r[0]&&r[0][f])F+=r[0][f].Name;else{var G=(wSe(r,L,i)||"").split(";;");G[f-1]?F=G[f-1]:F+="SH33TJSERRX"}a.push(F);break}O||(O={Name:"SH33TJSERRY"}),a.push(O.Name);break;case"PtgParen":var U="(",ue=")";if(_>=0){switch(b="",t[0][_][1][0]){case 2:U=Qi(" ",t[0][_][1][1])+U;break;case 3:U=Qi("\r",t[0][_][1][1])+U;break;case 4:ue=Qi(" ",t[0][_][1][1])+ue;break;case 5:ue=Qi("\r",t[0][_][1][1])+ue;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}_=-1}a.push(U+a.pop()+ue);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:C[1][1],r:C[1][0]};var be={c:n.c,r:n.r};if(r.sharedf[qr(u)]){var ze=r.sharedf[qr(u)];a.push(nb(ze,o,be,r,i))}else{var Ce=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(nb(c[1],o,be,r,i)),Ce=!0;break}Ce||a.push(C[1])}break;case"PtgArray":a.push("{"+q2t(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var de=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&de.indexOf(t[0][T][0])==-1){C=t[0][_];var Le=!0;switch(C[1][0]){case 4:Le=!1;case 0:b=Qi(" ",C[1][1]);break;case 5:Le=!1;case 1:b=Qi("\r",C[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}a.push((Le?b:"")+a.pop()+(Le?"":b)),_=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function X2t(t){if(t==null){var e=Ue(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return ov(t);return ov(0)}function Z2t(t,e,n,r,i){var s=av(e,n,i),o=X2t(t.v),a=Ue(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=Ue(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var h=Oo([s,o,a,c]);return h}function rD(t,e,n){var r=t.read_shift(4),i=H2t(t,r,n),s=t.read_shift(4),o=s>0?W2t(t,s,i,n):null;return[i,o]}var J2t=rD,iD=rD,Q2t=rD,ebt=rD,tbt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},bSe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},nbt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function rbt(t){var e="of:="+t.replace(sK,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function ibt(t){return t.replace(/\./,"!")}var vk=typeof Map<"u";function lK(t,e,n){var r=0,i=t.length;if(n){if(vk?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=vk?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(vk?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function sD(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(_p=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=R5(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=aG(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function ESe(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function b0(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){vEe(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function sbt(t,e,n){if(t&&t["!ref"]){var r=vi(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function obt(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Os(t[n])+'"/>';return e+"</mergeCells>"}function abt(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=BA(Wr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+_t("outlinePr",null,c)}!s&&!a||(i[i.length]=_t("sheetPr",a,o))}var lbt=["objects","scenarios","selectLockedCells","selectUnlockedCells"],cbt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function ubt(t){var e={sheet:1};return lbt.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),cbt.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=oSe(t.password).toString(16).toUpperCase()),_t("sheetProtection",null,e)}function hbt(t){return ESe(t),_t("pageMargins",null,t)}function dbt(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=_t("col",null,sD(i,r)));return n[n.length]="</cols>",n.join("")}function fbt(t,e,n,r){var i=typeof t.ref=="string"?t.ref:Os(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=Ac(i);o.s.r==o.e.r&&(o.e.r=Ac(e["!ref"]).e.r,i=Os(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),_t("autoFilter",null,{ref:i})}function pbt(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),_t("sheetViews",_t("sheetView",null,i),{})}function mbt(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=mI[t.v];break;case"d":r&&r.cellDates?i=Ba(t.v,-1).toISOString():(t=Nl(t),t.t="n",i=""+(t.v=Ml(Ba(t.v)))),typeof t.z>"u"&&(t.z=is[14]);break;default:i=t.v;break}var a=Do("v",Wr(i)),l={r:e},c=b0(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=Do("v",""+lK(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=_t("f",Wr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),_t("c",a,l)}function gbt(t,e,n,r){var i=[],s=[],o=vi(t["!ref"]),a="",l,c="",u=[],h=0,f=0,g=t["!rows"],y=Array.isArray(t),_={r:c},b,T=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=ba(f);for(h=o.s.r;h<=o.e.r;++h){for(s=[],c=Fo(h),f=o.s.c;f<=o.e.c;++f){l=u[f]+c;var A=y?(t[h]||[])[f]:t[l];A!==void 0&&(a=mbt(A,l,t,e))!=null&&s.push(a)}(s.length>0||g&&g[h])&&(_={r:c},g&&g[h]&&(b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=M5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level)),i[i.length]=_t("row",s.join(""),_))}if(g)for(;h<g.length;++h)g&&g[h]&&(_={r:h+1},b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=M5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level),i[i.length]=_t("row","",_));return i.join("")}function SSe(t,e,n,r){var i=[Ds,_t("worksheet",null,{xmlns:zb[0],"xmlns:r":ho.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=vi(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Os(u)}r||(r={}),l["!comments"]=[];var h=[];abt(l,n,t,e,i),i[i.length]=_t("dimension",null,{ref:c}),i[i.length]=pbt(l,e,t,n),e.sheetFormat&&(i[i.length]=_t("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=dbt(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=gbt(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=ubt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=fbt(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=obt(l["!merges"]));var f=-1,g,y=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(_){_[1].Target&&(g={ref:_[0]},_[1].Target.charAt(0)!="#"&&(y=Gr(r,-1,Wr(_[1].Target).replace(/#.*$/,""),wr.HLINK),g["r:id"]="rId"+y),(f=_[1].Target.indexOf("#"))>-1&&(g.location=Wr(_[1].Target.slice(f+1))),_[1].Tooltip&&(g.tooltip=Wr(_[1].Tooltip)),i[i.length]=_t("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=hbt(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Do("ignoredErrors",_t("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(y=Gr(r,-1,"../drawings/drawing"+(t+1)+".xml",wr.DRAW),i[i.length]=_t("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=h),l["!comments"].length>0&&(y=Gr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",wr.VML),i[i.length]=_t("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function ybt(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function vbt(t,e,n){var r=Ue(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=M5(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var h=-1,f=-1,g=u<<10;g<u+1<<10;++g){c.c=g;var y=Array.isArray(n)?(n[c.r]||[])[c.c]:n[qr(c)];y&&(h<0&&(h=g),f=g)}h<0||(++a,r.write_shift(4,h),r.write_shift(4,f))}var _=r.l;return r.l=l,r.write_shift(4,a),r.l=_,r.length>r.l?r.slice(0,r.l):r}function _bt(t,e,n,r){var i=vbt(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&rt(t,0,i)}var xbt=Mv,wbt=Ub;function bbt(){}function Ebt(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=N_t(t),n}function Sbt(t,e,n){n==null&&(n=Ue(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return C5({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),$Ee(t,n),n.slice(0,n.l)}function Tbt(t){var e=bu(t);return[e]}function kbt(t,e,n){return n==null&&(n=Ue(8)),Iv(e,n)}function Abt(t){var e=Pv(t);return[e]}function Cbt(t,e,n){return n==null&&(n=Ue(4)),Rv(e,n)}function Ibt(t){var e=bu(t),n=t.read_shift(1);return[e,n,"b"]}function Pbt(t,e,n){return n==null&&(n=Ue(9)),Iv(e,n),n.write_shift(1,t.v?1:0),n}function Rbt(t){var e=Pv(t),n=t.read_shift(1);return[e,n,"b"]}function Mbt(t,e,n){return n==null&&(n=Ue(5)),Rv(e,n),n.write_shift(1,t.v?1:0),n}function Nbt(t){var e=bu(t),n=t.read_shift(1);return[e,n,"e"]}function Lbt(t,e,n){return n==null&&(n=Ue(9)),Iv(e,n),n.write_shift(1,t.v),n}function Obt(t){var e=Pv(t),n=t.read_shift(1);return[e,n,"e"]}function Dbt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function jbt(t){var e=bu(t),n=t.read_shift(4);return[e,n,"s"]}function Fbt(t,e,n){return n==null&&(n=Ue(12)),Iv(e,n),n.write_shift(4,e.v),n}function $bt(t){var e=Pv(t),n=t.read_shift(4);return[e,n,"s"]}function Vbt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),n.write_shift(4,e.v),n}function zbt(t){var e=bu(t),n=Bb(t);return[e,n,"n"]}function Gbt(t,e,n){return n==null&&(n=Ue(16)),Iv(e,n),ov(t.v,n),n}function Ubt(t){var e=Pv(t),n=Bb(t);return[e,n,"n"]}function Bbt(t,e,n){return n==null&&(n=Ue(12)),Rv(e,n),ov(t.v,n),n}function Wbt(t){var e=bu(t),n=VEe(t);return[e,n,"n"]}function Hbt(t,e,n){return n==null&&(n=Ue(12)),Iv(e,n),zEe(t.v,n),n}function qbt(t){var e=Pv(t),n=VEe(t);return[e,n,"n"]}function Kbt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),zEe(t.v,n),n}function Ybt(t){var e=bu(t),n=eK(t);return[e,n,"is"]}function Xbt(t){var e=bu(t),n=Ea(t);return[e,n,"str"]}function Zbt(t,e,n){return n==null&&(n=Ue(12+4*t.v.length)),Iv(e,n),mo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Jbt(t){var e=Pv(t),n=Ea(t);return[e,n,"str"]}function Qbt(t,e,n){return n==null&&(n=Ue(8+4*t.v.length)),Rv(e,n),mo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function eEt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=iD(t,r-t.l,n);o[3]=nb(a,null,i,n.supbooks,n)}else t.l=r;return o}function tEt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=iD(t,r-t.l,n);o[3]=nb(a,null,i,n.supbooks,n)}else t.l=r;return o}function nEt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=Bb(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=iD(t,r-t.l,n);o[3]=nb(a,null,i,n.supbooks,n)}else t.l=r;return o}function rEt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=Ea(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=iD(t,r-t.l,n);o[3]=nb(a,null,i,n.supbooks,n)}else t.l=r;return o}var iEt=Mv,sEt=Ub;function oEt(t,e){return e==null&&(e=Ue(4)),e.write_shift(4,t),e}function aEt(t,e){var n=t.l+e,r=Mv(t),i=tK(t),s=Ea(t),o=Ea(t),a=Ea(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function lEt(t,e){var n=Ue(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Ub({s:po(t[0]),e:po(t[0])},n),nK("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return mo(i||"",n),mo(t[1].Tooltip||"",n),mo("",n),n.slice(0,n.l)}function cEt(){}function uEt(t,e,n){var r=t.l+e,i=GEe(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=J2t(t,r-t.l,n);o[1]=a}else t.l=r;return o}function hEt(t,e,n){var r=t.l+e,i=Mv(t),s=[i];if(n.cellFormula){var o=ebt(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function dEt(t,e,n){n==null&&(n=Ue(18));var r=sD(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var TSe=["left","right","top","bottom","header","footer"];function fEt(t){var e={};return TSe.forEach(function(n){e[n]=Bb(t)}),e}function pEt(t,e){return e==null&&(e=Ue(48)),ESe(t),TSe.forEach(function(n){ov(t[n],e)}),e}function mEt(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function gEt(t,e,n){n==null&&(n=Ue(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function yEt(t){var e=Ue(24);return e.write_shift(4,4),e.write_shift(4,1),Ub(t,e),e}function vEt(t,e){return e==null&&(e=Ue(66)),e.write_shift(2,t.password?oSe(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function _Et(){}function xEt(){}function wEt(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Nl(e),e.z=e.z||is[14],e.v=Ml(Ba(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=b0(i.cellXfs,e,i),e.l&&s["!links"].push([qr(l),e.l]),e.c&&s["!comments"].push([qr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=lK(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?rt(t,18,Vbt(e,l)):rt(t,7,Fbt(e,l))):(l.t="str",o?rt(t,17,Qbt(e,l)):rt(t,6,Zbt(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?rt(t,13,Kbt(e,l)):rt(t,2,Hbt(e,l)):o?rt(t,16,Bbt(e,l)):rt(t,5,Gbt(e,l)),!0;case"b":return l.t="b",o?rt(t,15,Mbt(e,l)):rt(t,4,Pbt(e,l)),!0;case"e":return l.t="e",o?rt(t,14,Dbt(e,l)):rt(t,3,Lbt(e,l)),!0}return o?rt(t,12,Cbt(e,l)):rt(t,1,kbt(e,l)),!0}function bEt(t,e,n,r){var i=vi(e["!ref"]||"A1"),s,o="",a=[];rt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=Fo(u),_bt(t,e,i,u);var h=!1;if(u<=i.e.r)for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(a[f]=ba(f)),s=a[f]+o;var g=l?(e[u]||[])[f]:e[s];if(!g){h=!1;continue}h=wEt(t,g,u,f,r,e,h)}}rt(t,146)}function EEt(t,e){!e||!e["!merges"]||(rt(t,177,oEt(e["!merges"].length)),e["!merges"].forEach(function(n){rt(t,176,sEt(n))}),rt(t,178))}function SEt(t,e){!e||!e["!cols"]||(rt(t,390),e["!cols"].forEach(function(n,r){n&&rt(t,60,dEt(r,n))}),rt(t,391))}function TEt(t,e){!e||!e["!ref"]||(rt(t,648),rt(t,649,yEt(vi(e["!ref"]))),rt(t,650))}function kEt(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=Gr(n,-1,r[1].Target.replace(/#.*$/,""),wr.HLINK);rt(t,494,lEt(r,i))}}),delete e["!links"]}function AEt(t,e,n,r){if(e["!comments"].length>0){var i=Gr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",wr.VML);rt(t,551,nK("rId"+i)),e["!legacy"]=i}}function CEt(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Os(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=Ac(s);a.s.r==a.e.r&&(a.e.r=Ac(e["!ref"]).e.r,s=Os(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),rt(t,161,Ub(vi(s))),rt(t,162)}}function IEt(t,e,n){rt(t,133),rt(t,137,gEt(e,n)),rt(t,138),rt(t,134)}function PEt(t,e){e["!protect"]&&rt(t,535,vEt(e["!protect"]))}function REt(t,e,n,r){var i=Cl(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=vi(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],rt(i,129),(n.vbaraw||o["!outline"])&&rt(i,147,Sbt(a,o["!outline"])),rt(i,148,wbt(l)),IEt(i,o,n.Workbook),SEt(i,o),bEt(i,o,t,e),PEt(i,o),CEt(i,o,n,t),EEt(i,o),kEt(i,o,r),o["!margins"]&&rt(i,476,pEt(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&TEt(i,o),AEt(i,o,t,r),rt(i,130),i.end()}function MEt(t,e){t.l+=10;var n=Ea(t);return{name:n}}var NEt=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function LEt(t){return!t.Workbook||!t.Workbook.WBProps?"false":h_t(t.Workbook.WBProps.date1904)?"true":"false"}var OEt="][*?/\\".split("");function kSe(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return OEt.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function DEt(t,e,n){t.forEach(function(r,i){kSe(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function jEt(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];DEt(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)sbt(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function ASe(t){var e=[Ds];e[e.length]=_t("workbook",null,{xmlns:zb[0],"xmlns:r":ho.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(NEt.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=_t("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Wr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=_t("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=_t("definedName",Wr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function FEt(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=oG(t),n.name=Ea(t),n}function $Et(t,e){return e||(e=Ue(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),nK(t.strRelID,e),mo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function VEt(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?Ea(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function zEt(t,e){e||(e=Ue(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),$Ee(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function GEt(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=L_t(t),o=Q2t(t,0,n),a=tK(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function UEt(t,e){rt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};rt(t,156,$Et(i))}rt(t,144)}function BEt(t,e){e||(e=Ue(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return mo("SheetJS",e),mo(x5.version,e),mo(x5.version,e),mo("7262",e),e.length>e.l?e.slice(0,e.l):e}function WEt(t,e){e||(e=Ue(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function HEt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(rt(t,135),rt(t,158,WEt(i)),rt(t,136))}}function qEt(t,e){var n=Cl();return rt(n,131),rt(n,128,BEt()),rt(n,153,zEt(t.Workbook&&t.Workbook.WBProps||null)),HEt(n,t),UEt(n,t),rt(n,132),n.end()}function KEt(t,e,n){return(e.slice(-4)===".bin"?qEt:ASe)(t)}function YEt(t,e,n,r,i){return(e.slice(-4)===".bin"?REt:SSe)(t,n,r,i)}function XEt(t,e,n){return(e.slice(-4)===".bin"?pwt:cSe)(t,n)}function ZEt(t,e,n){return(e.slice(-4)===".bin"?zxt:sSe)(t,n)}function JEt(t,e,n){return(e.slice(-4)===".bin"?Pwt:pSe)(t)}function QEt(t){return(t.slice(-4)===".bin"?bwt:dSe)()}function eSt(t,e){var n=[];return t.Props&&n.push(X_t(t.Props,e)),t.Custprops&&n.push(Z_t(t.Props,t.Custprops)),n.join("")}function tSt(){return""}function nSt(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(_t("NumberFormat",null,{"ss:Format":Wr(is[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(_t("Style",s.join(""),o))}),_t("Styles",n.join(""))}function CSe(t){return _t("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+oK(t.Ref,{r:0,c:0})})}function rSt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(CSe(i)))}return _t("Names",n.join(""))}function iSt(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(CSe(a)))}return s.join("")}function sSt(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(_t("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(_t("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(_t("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(_t("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Do("ProtectContents","True")),t["!protect"].objects&&i.push(Do("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Do("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Do("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Do("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":_t("WorksheetOptions",i.join(""),{xmlns:lc.x})}function oSt(t){return t.map(function(e){var n=u_t(e.t||""),r=_t("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return _t("Comment",r,{"ss:Author":e.a})}).join("")}function aSt(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+Wr(oK(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=po(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=Wr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=Wr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",f="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=mI[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||is[14]);break;case"s":h="String",f=c_t(t.v||"");break}var g=b0(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var y=t.v!=null?f:"",_=t.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(t.c||[]).length>0&&(_+=oSt(t.c)),_t("Cell",_,a)}function lSt(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=lSe(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function cSt(t,e,n,r){if(!t["!ref"])return"";var i=vi(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(b,T){iK(b);var A=!!b.width,C=sD(T,b),I={"ss:Index":T+1};A&&(I["ss:Width"]=P5(C.width)),b.hidden&&(I["ss:Hidden"]="1"),a.push(_t("Column",null,I))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[lSt(c,(t["!rows"]||[])[c])],h=i.s.c;h<=i.e.c;++h){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(f=!0);break}if(!f){var g={r:c,c:h},y=qr(g),_=l?(t[c]||[])[h]:t[y];u.push(aSt(_,y,t,e,n,r,g))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function uSt(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?iSt(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?cSt(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(sSt(s,e,t,n)),r.join("")}function hSt(t,e){e||(e={}),t.SSF||(t.SSF=Nl(is)),t.SSF&&(eD(),QO(t.SSF),e.revssf=tD(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],b0(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(eSt(t,e)),n.push(tSt()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(_t("Worksheet",uSt(r,e,t),{"ss:Name":Wr(t.SheetNames[r])}));return n[2]=nSt(t,e),n[3]=rSt(t),Ds+_t("Workbook",n.join(""),{xmlns:lc.ss,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:ss":lc.ss,"xmlns:dt":lc.dt,"xmlns:html":lc.html})}var k$={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function dSt(t,e){var n=[],r=[],i=[],s=0,o,a=uae(Eae,"n"),l=uae(Sae,"n");if(t.Props)for(o=Vo(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=Vo(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)JEe.indexOf(i[s][0])>-1||YEe.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&Xr.utils.cfb_add(e,"/SummaryInformation",Iae(r,k$.SI,l,Sae)),(n.length||c.length)&&Xr.utils.cfb_add(e,"/DocumentSummaryInformation",Iae(n,k$.DSI,a,Eae,c.length?c:null,k$.UDI))}function fSt(t,e){var n=e||{},r=Xr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Xr.utils.cfb_add(r,i,ISe(t,n)),n.biff==8&&(t.Props||t.Custprops)&&dSt(t,r),n.biff==8&&t.vbaraw&&Rwt(r,Xr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var pSt={0:{f:ybt},1:{f:Tbt},2:{f:Wbt},3:{f:Nbt},4:{f:Ibt},5:{f:zbt},6:{f:Xbt},7:{f:jbt},8:{f:rEt},9:{f:nEt},10:{f:eEt},11:{f:tEt},12:{f:Abt},13:{f:qbt},14:{f:Obt},15:{f:Rbt},16:{f:Ubt},17:{f:Jbt},18:{f:$bt},19:{f:eK},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:GEt},40:{},42:{},43:{f:Xxt},44:{f:Kxt},45:{f:Qxt},46:{f:twt},47:{f:ewt},48:{},49:{f:A_t},50:{},51:{f:ywt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Cxt},62:{f:Ybt},63:{f:Ewt},64:{f:_Et},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:qd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:mEt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Ebt},148:{f:xbt,p:16},151:{f:cEt},152:{},153:{f:VEt},154:{},155:{},156:{f:FEt},157:{},158:{},159:{T:1,f:Fxt},160:{T:-1},161:{T:1,f:Mv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:iEt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:mwt},336:{T:-1},337:{f:xwt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:oG},357:{},358:{},359:{},360:{T:1},361:{},362:{f:bxt},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:uEt},427:{f:hEt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:fEt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:bbt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:aEt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:oG},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Cwt},633:{T:1},634:{T:-1},635:{T:1,f:kwt},636:{T:-1},637:{f:R_t},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:MEt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:xEt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function bt(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&Zq(n)&&t.push(n)}}function mSt(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return bt(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function yI(t,e,n){return t||(t=Ue(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function gSt(t,e,n,r){var i=Ue(9);return yI(i,t,e),eSe(n,r||"b",i),i}function ySt(t,e,n){var r=Ue(8+2*n.length);return yI(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function vSt(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ml(Ba(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?bt(t,2,Mxt(n,r,i)):bt(t,3,Rxt(n,r,i));return;case"b":case"e":bt(t,5,gSt(n,r,e.v,e.t));return;case"s":case"str":bt(t,4,ySt(n,r,(e.v||"").slice(0,255)));return}bt(t,1,yI(null,n,r))}function _St(t,e,n,r){var i=Array.isArray(e),s=vi(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Os(s)}for(var c=s.s.r;c<=s.e.r;++c){a=Fo(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=ba(u)),o=l[u]+a;var h=i?(e[c]||[])[u]:e[o];h&&vSt(t,h,c,u)}}}function xSt(t,e){for(var n=e||{},r=Cl(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return bt(r,n.biff==4?1033:n.biff==3?521:9,rK(t,16,n)),_St(r,t.Sheets[t.SheetNames[i]],i,n),bt(r,10),r.end()}function wSt(t,e,n){bt(t,49,pxt({sz:12,name:"Arial"},n))}function bSt(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&bt(t,1054,yxt(i,e[i],n))})}function ESt(t,e){var n=Ue(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),bt(t,2151,n),n=Ue(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),rSe(vi(e["!ref"]||"A1"),n),n.write_shift(4,4),bt(t,2152,n)}function SSt(t,e){for(var n=0;n<16;++n)bt(t,224,Rae({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){bt(t,224,Rae(r,0,e))})}function TSt(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];bt(t,440,Txt(r)),r[1].Tooltip&&bt(t,2048,kxt(r))}delete e["!links"]}function kSt(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&bt(t,125,Ixt(sD(i,r),i))})}}function ASt(t,e,n,r,i){var s=16+b0(i.cellXfs,e,i);if(e.v==null&&!e.bf){bt(t,513,av(n,r,s));return}if(e.bf)bt(t,6,Z2t(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Ml(Ba(e.v)):e.v;bt(t,515,wxt(n,r,o,s));break;case"b":case"e":bt(t,517,xxt(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=lK(i.Strings,e.v,i.revStrings);bt(t,253,mxt(n,r,a,s))}else bt(t,516,gxt(n,r,(e.v||"").slice(0,255),s,i));break;default:bt(t,513,av(n,r,s))}}function CSt(t,e,n){var r=Cl(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,h="",f=[],g=vi(s["!ref"]||"A1"),y=c?65536:16384;if(g.e.c>255||g.e.r>=y){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,y-1)}bt(r,2057,rK(n,16,e)),bt(r,13,Qc(1)),bt(r,12,Qc(100)),bt(r,15,Oa(!0)),bt(r,17,Oa(!1)),bt(r,16,ov(.001)),bt(r,95,Oa(!0)),bt(r,42,Oa(!1)),bt(r,43,Oa(!1)),bt(r,130,Qc(1)),bt(r,128,_xt()),bt(r,131,Oa(!1)),bt(r,132,Oa(!1)),c&&kSt(r,s["!cols"]),bt(r,512,vxt(g,e)),c&&(s["!links"]=[]);for(var _=g.s.r;_<=g.e.r;++_){h=Fo(_);for(var b=g.s.c;b<=g.e.c;++b){_===g.s.r&&(f[b]=ba(b)),u=f[b]+h;var T=l?(s[_]||[])[b]:s[u];T&&(ASt(r,T,_,b,e),c&&T.l&&s["!links"].push([u,T.l]))}}var A=a.CodeName||a.name||i;return c&&bt(r,574,fxt((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&bt(r,229,Sxt(s["!merges"])),c&&TSt(r,s),bt(r,442,nSe(A)),c&&ESt(r,s),bt(r,10),r.end()}function ISt(t,e,n){var r=Cl(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(bt(r,2057,rK(t,5,n)),n.bookType=="xla"&&bt(r,135),bt(r,225,a?Qc(1200):null),bt(r,193,ext(2)),l&&bt(r,191),l&&bt(r,192),bt(r,226),bt(r,92,cxt("SheetJS",n)),bt(r,66,Qc(a?1200:1252)),a&&bt(r,353,Qc(0)),a&&bt(r,448),bt(r,317,Pxt(t.SheetNames.length)),a&&t.vbaraw&&bt(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";bt(r,442,nSe(c))}bt(r,156,Qc(17)),bt(r,25,Oa(!1)),bt(r,18,Oa(!1)),bt(r,19,Qc(0)),a&&bt(r,431,Oa(!1)),a&&bt(r,444,Qc(0)),bt(r,61,dxt()),bt(r,64,Oa(!1)),bt(r,141,Qc(0)),bt(r,34,Oa(LEt(t)=="true")),bt(r,14,Oa(!0)),a&&bt(r,439,Oa(!1)),bt(r,218,Qc(0)),wSt(r,t,n),bSt(r,t.SSF,n),SSt(r,n),a&&bt(r,352,Oa(!1));var u=r.end(),h=Cl();a&&bt(h,140,Axt()),a&&n.Strings&&mSt(h,252,hxt(n.Strings)),bt(h,10);var f=h.end(),g=Cl(),y=0,_=0;for(_=0;_<t.SheetNames.length;++_)y+=(a?12:11)+(a?2:1)*t.SheetNames[_].length;var b=u.length+y+f.length;for(_=0;_<t.SheetNames.length;++_){var T=s[_]||{};bt(g,133,uxt({pos:b,hs:T.Hidden||0,dt:0,name:t.SheetNames[_]},n)),b+=e[_].length}var A=g.end();if(y!=A.length)throw new Error("BS8 "+y+" != "+A.length);var C=[];return u.length&&C.push(u),A.length&&C.push(A),f.length&&C.push(f),Oo(C)}function PSt(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Nl(is)),t&&t.SSF&&(eD(),QO(t.SSF),n.revssf=tD(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,cK(n),n.cellXfs=[],b0(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=CSt(i,n,t);return r.unshift(ISt(t,r,n)),Oo(r)}function ISe(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=Ac(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return PSt(t,e);case 4:case 3:case 2:return xSt(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function RSt(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=qr({r:n,c:o}),h=r.dense?(t[n]||[])[o]:t[u],f=h&&h.v!=null&&(h.h||l_t(h.w||(Rp(h),h.w)||""))||"",g={};a>1&&(g.rowspan=a),l>1&&(g.colspan=l),r.editable?f='<span contenteditable="true">'+f+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(_t("td",f,g))}}var y="<tr>";return y+s.join("")+"</tr>"}var MSt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',NSt="</body></html>";function LSt(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function PSe(t,e){var n=e||{},r=n.header!=null?n.header:MSt,i=n.footer!=null?n.footer:NSt,s=[r],o=Ac(t["!ref"]);n.dense=Array.isArray(t),s.push(LSt(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(RSt(t,o,a,n));return s.push("</table>"+i),s.join("")}function RSe(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?po(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=Ac(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var h=[],f=0,g=t["!rows"]||(t["!rows"]=[]),y=0,_=0,b=0,T=0,A=0,C=0;for(t["!cols"]||(t["!cols"]=[]);y<a.length&&_<l;++y){var I=a[y];if(Fae(I)){if(r.display)continue;g[_]={hidden:!0}}var R=I.children;for(b=T=0;b<R.length;++b){var V=R[b];if(!(r.display&&Fae(V))){var P=V.hasAttribute("data-v")?V.getAttribute("data-v"):V.hasAttribute("v")?V.getAttribute("v"):d_t(V.innerHTML),N=V.getAttribute("data-z")||V.getAttribute("z");for(f=0;f<h.length;++f){var L=h[f];L.s.c==T+s&&L.s.r<_+i&&_+i<=L.e.r&&(T=L.e.c+1-s,f=-1)}C=+V.getAttribute("colspan")||1,((A=+V.getAttribute("rowspan")||1)>1||C>1)&&h.push({s:{r:_+i,c:T+s},e:{r:_+i+(A||1)-1,c:T+s+(C||1)-1}});var O={t:"s",v:P},F=V.getAttribute("data-t")||V.getAttribute("t")||"";P!=null&&(P.length==0?O.t=F||"z":r.raw||P.trim().length==0||F=="s"||(P==="TRUE"?O={t:"b",v:!0}:P==="FALSE"?O={t:"b",v:!1}:isNaN(vp(P))?isNaN(UA(P).getDate())||(O={t:"d",v:Ba(P)},r.cellDates||(O={t:"n",v:Ml(O.v)}),O.z=r.dateNF||is[14]):O={t:"n",v:vp(P)})),O.z===void 0&&N!=null&&(O.z=N);var G="",U=V.getElementsByTagName("A");if(U&&U.length)for(var ue=0;ue<U.length&&!(U[ue].hasAttribute("href")&&(G=U[ue].getAttribute("href"),G.charAt(0)!="#"));++ue);G&&G.charAt(0)!="#"&&(O.l={Target:G}),r.dense?(t[_+i]||(t[_+i]=[]),t[_+i][T+s]=O):t[qr({c:T+s,r:_+i})]=O,c.e.c<T+s&&(c.e.c=T+s),T+=C}}++_}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,_-1+i),t["!ref"]=Os(c),_>=l&&(t["!fullref"]=Os((c.e.r=a.length-y+_-1+i,c))),t}function MSe(t,e){var n=e||{},r=n.dense?[]:{};return RSe(r,t,e)}function OSt(t,e){return Cv(MSe(t,e),e)}function Fae(t){var e="",n=DSt(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function DSt(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var jSt=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+WA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ds+e}})(),$ae=(function(){var t=function(s){return Wr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+Wr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,h=Ac(s["!ref"]||"A1"),f=s["!merges"]||[],g=0,y=Array.isArray(s);if(s["!cols"])for(u=0;u<=h.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var _="",b=s["!rows"]||[];for(c=0;c<h.s.r;++c)_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`></table:table-row>
`);for(;c<=h.e.r;++c){for(_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`>
`),u=0;u<h.s.c;++u)l.push(e);for(;u<=h.e.c;++u){var T=!1,A={},C="";for(g=0;g!=f.length;++g)if(!(f[g].s.c>u)&&!(f[g].s.r>c)&&!(f[g].e.c<u)&&!(f[g].e.r<c)){(f[g].s.c!=u||f[g].s.r!=c)&&(T=!0),A["table:number-columns-spanned"]=f[g].e.c-f[g].s.c+1,A["table:number-rows-spanned"]=f[g].e.r-f[g].s.r+1;break}if(T){l.push(n);continue}var I=qr({r:c,c:u}),R=y?(s[c]||[])[u]:s[I];if(R&&R.f&&(A["table:formula"]=Wr(rbt(R.f)),R.F&&R.F.slice(0,I.length)==I)){var V=Ac(R.F);A["table:number-matrix-columns-spanned"]=V.e.c-V.s.c+1,A["table:number-matrix-rows-spanned"]=V.e.r-V.s.r+1}if(!R){l.push(e);continue}switch(R.t){case"b":C=R.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=R.v?"true":"false";break;case"n":C=R.w||String(R.v||0),A["office:value-type"]="float",A["office:value"]=R.v||0;break;case"s":case"str":C=R.v==null?"":R.v,A["office:value-type"]="string";break;case"d":C=R.w||Ba(R.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=Ba(R.v).toISOString(),A["table:style-name"]="ce1";break;default:l.push(e);continue}var P=t(C);if(R.l&&R.l.Target){var N=R.l.Target;N=N.charAt(0)=="#"?"#"+ibt(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),P=_t("text:a",P,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+_t("table:table-cell",_t("text:p",P,{}),A)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var h=c["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;iK(h),h.ods=a;var f=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var h=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[Ds],c=WA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=WA({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(qEe().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)l.push(r(o.Sheets[o.SheetNames[h]],o,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function NSe(t,e){if(e.bookType=="fods")return $ae(t,e);var n=qq(),r="",i=[],s=[];return r="mimetype",Un(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Un(n,r,$ae(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Un(n,r,jSt(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Un(n,r,Ds+qEe()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Un(n,r,Y_t(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Un(n,r,q_t(i)),n}function N5(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function FSt(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):oh(BA(t))}function $St(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function c0(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function VSt(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function HA(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function zr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Ow(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function zs(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=HA(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=HA(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function Ao(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(zr(r*8+i.type)),i.type==2&&e.push(zr(i.data.length)),e.push(i.data))})}),c0(e)}function zu(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=HA(t,r),s=zs(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Ow(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=zs(a.data),c=Ow(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=Ow(s[3][0].data)>>>0>0),n.push(o)}return n}function U_(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:zr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:zr(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:zr(o.data.length)}],r[2].push({data:Ao(o.meta),type:2})});var s=Ao(r);e.push(zr(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),c0(e)}function zSt(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=HA(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[c0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=c0(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Gu(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(zSt(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return c0(e)}function B_(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=zr(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return c0(e)}function A$(t,e){var n=new Uint8Array(32),r=N5(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,VSt(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function C$(t,e){var n=new Uint8Array(32),r=N5(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function km(t){var e=zs(t);return HA(e[1][0].data)}function GSt(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Ow(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=N5(t[7][0].data),u=0,h=[],f=N5(t[4][0].data),g=0,y=[],_=0;_<e.length;++_){if(e[_]==null){c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535);continue}c.setUint16(_*2,u,!0),f.setUint16(_*2,g,!0);var b,T;switch(typeof e[_]){case"string":b=A$({t:"s",v:e[_]},n),T=C$({t:"s",v:e[_]},n);break;case"number":b=A$({t:"n",v:e[_]},n),T=C$({t:"n",v:e[_]},n);break;case"boolean":b=A$({t:"b",v:e[_]},n),T=C$({t:"b",v:e[_]},n);break;default:throw new Error("Unsupported value "+e[_])}h.push(b),u+=b.length,y.push(T),g+=T.length,++l}for(t[2][0].data=zr(l);_<t[7][0].data.length/2;++_)c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535,!0);return t[6][0].data=c0(h),t[3][0].data=c0(y),l}function USt(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ac(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Os(r)));var s=L5(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(ne){return ne.forEach(function(se){typeof se=="string"&&o.push(se)})});var a={},l=[],c=Xr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(ne,se){return[ne,c.FullPaths[se]]}).forEach(function(ne){var se=ne[0],Q=ne[1];if(se.type==2&&se.name.match(/\.iwa/)){var me=se.content,Ke=Gu(me),Ye=zu(Ke);Ye.forEach(function(ke){l.push(ke.id),a[ke.id]={deps:[],location:Q,type:Ow(ke.messages[0].meta[1][0].data)}})}}),l.sort(function(ne,se){return ne-se});var u=l.filter(function(ne){return ne>1}).map(function(ne){return[ne,zr(ne)]});c.FileIndex.map(function(ne,se){return[ne,c.FullPaths[se]]}).forEach(function(ne){var se=ne[0];if(ne[1],!!se.name.match(/\.iwa/)){var Q=zu(Gu(se.content));Q.forEach(function(me){me.messages.forEach(function(Ke){u.forEach(function(Ye){me.messages.some(function(ke){return Ow(ke.meta[1][0].data)!=11006&&$St(ke.data,Ye[1])})&&a[Ye[0]].deps.push(me.id)})})})}});for(var h=Xr.find(c,a[1].location),f=zu(Gu(h.content)),g,y=0;y<f.length;++y){var _=f[y];_.id==1&&(g=_)}var b=km(zs(g.messages[0].data)[1][0].data);for(h=Xr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=km(zs(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=km(zs(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);var T=zs(g.messages[0].data);{T[6][0].data=zr(r.e.r+1),T[7][0].data=zr(r.e.c+1);var A=km(T[46][0].data),C=Xr.find(c,a[A].location),I=zu(Gu(C.content));{for(var R=0;R<I.length&&I[R].id!=A;++R);if(I[R].id!=A)throw"Bad ColumnRowUIDMapArchive";var V=zs(I[R].messages[0].data);V[1]=[],V[2]=[],V[3]=[];for(var P=0;P<=r.e.c;++P){var N=[];N[1]=N[2]=[{type:0,data:zr(P+420690)}],V[1].push({type:2,data:Ao(N)}),V[2].push({type:0,data:zr(P)}),V[3].push({type:0,data:zr(P)})}V[4]=[],V[5]=[],V[6]=[];for(var L=0;L<=r.e.r;++L)N=[],N[1]=N[2]=[{type:0,data:zr(L+726270)}],V[4].push({type:2,data:Ao(N)}),V[5].push({type:0,data:zr(L)}),V[6].push({type:0,data:zr(L)});I[R].messages[0].data=Ao(V)}C.content=B_(U_(I)),C.size=C.content.length,delete T[46];var O=zs(T[4][0].data);{O[7][0].data=zr(r.e.r+1);var F=zs(O[1][0].data),G=km(F[2][0].data);C=Xr.find(c,a[G].location),I=zu(Gu(C.content));{if(I[0].id!=G)throw"Bad HeaderStorageBucket";var U=zs(I[0].messages[0].data);for(L=0;L<s.length;++L){var ue=zs(U[2][0].data);ue[1][0].data=zr(L),ue[4][0].data=zr(s[L].length),U[2][L]={type:U[2][0].type,data:Ao(ue)}}I[0].messages[0].data=Ao(U)}C.content=B_(U_(I)),C.size=C.content.length;var be=km(O[2][0].data);C=Xr.find(c,a[be].location),I=zu(Gu(C.content));{if(I[0].id!=be)throw"Bad HeaderStorageBucket";for(U=zs(I[0].messages[0].data),P=0;P<=r.e.c;++P)ue=zs(U[2][0].data),ue[1][0].data=zr(P),ue[4][0].data=zr(r.e.r+1),U[2][P]={type:U[2][0].type,data:Ao(ue)};I[0].messages[0].data=Ao(U)}C.content=B_(U_(I)),C.size=C.content.length;var ze=km(O[4][0].data);(function(){for(var ne=Xr.find(c,a[ze].location),se=zu(Gu(ne.content)),Q,me=0;me<se.length;++me){var Ke=se[me];Ke.id==ze&&(Q=Ke)}var Ye=zs(Q.messages[0].data);{Ye[3]=[];var ke=[];o.forEach(function(Xe,cn){ke[1]=[{type:0,data:zr(cn)}],ke[2]=[{type:0,data:zr(1)}],ke[3]=[{type:2,data:FSt(Xe)}],Ye[3].push({type:2,data:Ao(ke)})})}Q.messages[0].data=Ao(Ye);var Ee=U_(se),Dt=B_(Ee);ne.content=Dt,ne.size=ne.content.length})();var Ce=zs(O[3][0].data);{var de=Ce[1][0];delete Ce[2];var Le=zs(de.data);{var xe=km(Le[2][0].data);(function(){for(var ne=Xr.find(c,a[xe].location),se=zu(Gu(ne.content)),Q,me=0;me<se.length;++me){var Ke=se[me];Ke.id==xe&&(Q=Ke)}var Ye=zs(Q.messages[0].data);{delete Ye[6],delete Ce[7];var ke=new Uint8Array(Ye[5][0].data);Ye[5]=[];for(var Ee=0,Dt=0;Dt<=r.e.r;++Dt){var Xe=zs(ke);Ee+=GSt(Xe,s[Dt],o),Xe[1][0].data=zr(Dt),Ye[5].push({data:Ao(Xe),type:2})}Ye[1]=[{type:0,data:zr(r.e.c+1)}],Ye[2]=[{type:0,data:zr(r.e.r+1)}],Ye[3]=[{type:0,data:zr(Ee)}],Ye[4]=[{type:0,data:zr(r.e.r+1)}]}Q.messages[0].data=Ao(Ye);var cn=U_(se),jt=B_(cn);ne.content=jt,ne.size=ne.content.length})()}de.data=Ao(Le)}O[3][0].data=Ao(Ce)}T[4][0].data=Ao(O)}g.messages[0].data=Ao(T);var Z=U_(f),W=B_(Z);return h.content=W,h.size=h.content.length,c}function BSt(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function cK(t){BSt([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function WSt(t,e){return e.bookType=="ods"?NSe(t,e):e.bookType=="numbers"?USt(t,e):e.bookType=="xlsb"?HSt(t,e):qSt(t,e)}function HSt(t,e){Jx=1024,t&&!t.SSF&&(t.SSF=Nl(is)),t&&t.SSF&&(eD(),QO(t.SSF),e.revssf=tD(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,vk?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=mSe.indexOf(e.bookType)>-1,i=BEe();cK(e=e||{});var s=qq(),o="",a=0;if(e.cellXfs=[],b0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,KEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,XEe(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&Vo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,ZEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,YEt(a-1,o,e,t,u)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(h){var g=h["!comments"],y=!1,_="";g&&g.length>0&&(_="xl/comments"+a+"."+n,Un(s,_,JEt(g,_)),i.comments.push(_),Gr(u,-1,"../comments"+a+"."+n,wr.CMNT),y=!0),h["!legacy"]&&y&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",fSe(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Un(s,HEe(o),Nw(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,ZEt(e.Strings,o,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,KEt(t,o)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,hSe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,XEt(t,o,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,QEt(o)),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),Un(s,"[Content_Types].xml",WEe(i,e)),Un(s,"_rels/.rels",Nw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Nw(e.wbrels)),delete e.revssf,delete e.ssf,s}function qSt(t,e){Jx=1024,t&&!t.SSF&&(t.SSF=Nl(is)),t&&t.SSF&&(eD(),QO(t.SSF),e.revssf=tD(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,vk?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=mSe.indexOf(e.bookType)>-1,i=BEe();cK(e=e||{});var s=qq(),o="",a=0;if(e.cellXfs=[],b0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,KEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,XEe(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&Vo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,ZEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var h={"!id":{}},f=t.Sheets[t.SheetNames[a-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,SSe(a-1,e,t,h)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(f){var y=f["!comments"],_=!1,b="";if(y&&y.length>0){var T=!1;y.forEach(function(A){A[1].forEach(function(C){C.T==!0&&(T=!0)})}),T&&(b="xl/threadedComments/threadedComment"+a+"."+n,Un(s,b,Swt(y,u,e)),i.threadedcomments.push(b),Gr(h,-1,"../threadedComments/threadedComment"+a+"."+n,wr.TCMNT)),b="xl/comments"+a+"."+n,Un(s,b,pSe(y)),i.comments.push(b),Gr(h,-1,"../comments"+a+"."+n,wr.CMNT),_=!0}f["!legacy"]&&_&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",fSe(a,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Un(s,HEe(o),Nw(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,sSe(e.Strings,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,ASe(t)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,hSe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,cSe(t,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,dSe()),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),u.length>1&&(o="xl/persons/person.xml",Un(s,o,Twt(u)),i.people.push(o),Gr(e.wbrels,-1,"persons/person.xml",wr.PEOPLE)),Un(s,"[Content_Types].xml",WEe(i,e)),Un(s,"_rels/.rels",Nw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Nw(e.wbrels)),delete e.revssf,delete e.ssf,s}function KSt(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Pp(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function LSe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return fI(e.file,Xr.write(t,{type:Ar?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xr.write(t,e)}function YSt(t,e){var n=Nl(e||{}),r=WSt(t,n);return XSt(r,n)}function XSt(t,e){var n={},r=Ar?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Xr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(JO(i))}return e.password&&typeof encrypt_agile<"u"?LSe(encrypt_agile(i,e.password),e):e.type==="file"?fI(e.file,i):e.type=="string"?pk(i):i}function ZSt(t,e){var n=e||{},r=fSt(t,n);return LSe(r,n)}function od(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return GA(BA(r));case"binary":return BA(r);case"string":return t;case"file":return fI(e.file,r,"utf8");case"buffer":return Ar?$p(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):od(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function JSt(t,e){switch(e.type){case"base64":return GA(t);case"binary":return t;case"string":return t;case"file":return fI(e.file,t,"binary");case"buffer":return Ar?$p(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function XR(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?GA(n):e.type=="string"?pk(n):n;case"file":return fI(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function OSe(t,e){kvt(),jEt(t);var n=Nl(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=OSe(t,n);return n.type="array",JO(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return od(hSt(t,n),n);case"slk":case"sylk":return od(Lxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return od(PSe(t.Sheets[t.SheetNames[i]],n),n);case"txt":return JSt(DSe(t.Sheets[t.SheetNames[i]],n),n);case"csv":return od(uK(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return od(Oxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return XR(Nxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return od(Dxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return od(Uxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return od(iSe.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return od(NSe(t,n),n);case"wk1":return XR(Mae.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return XR(Mae.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),XR(ISe(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),ZSt(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return YSt(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function QSt(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function eTt(t,e,n){var r={};return r.type="file",r.file=e,QSt(r),OSe(t,r)}function tTt(t,e,n,r,i,s,o,a){var l=Fo(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:n,enumerable:!1})}catch{f.__rowNum__=n}else f.__rowNum__=n;if(!o||t[n])for(var g=e.s.c;g<=e.e.c;++g){var y=o?t[n][g]:t[r[g]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;s[g]!=null&&(f[s[g]]=c);continue}var _=y.v;switch(y.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(s[g]!=null){if(_==null)if(y.t=="e"&&_===null)f[s[g]]=null;else if(c!==void 0)f[s[g]]=c;else if(u&&_===null)f[s[g]]=null;else continue;else f[s[g]]=u&&(y.t!=="n"||y.t==="n"&&a.rawNumbers!==!1)?_:Rp(y,_,a);_!=null&&(h=!1)}}return{row:f,isempty:h}}function L5(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=vi(u);break;case"number":l=vi(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var h=Fo(l.s.r),f=[],g=[],y=0,_=0,b=Array.isArray(t),T=l.s.r,A=0,C={};b&&!t[T]&&(t[T]=[]);var I=c.skipHidden&&t["!cols"]||[],R=c.skipHidden&&t["!rows"]||[];for(A=l.s.c;A<=l.e.c;++A)if(!(I[A]||{}).hidden)switch(f[A]=ba(A),n=b?t[T][A]:t[f[A]+h],r){case 1:s[A]=A-l.s.c;break;case 2:s[A]=f[A];break;case 3:s[A]=c.header[A-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=Rp(n,null,c),_=C[o]||0,!_)C[o]=1;else{do a=o+"_"+_++;while(C[a]);C[o]=_,C[a]=1}s[A]=a}for(T=l.s.r+i;T<=l.e.r;++T)if(!(R[T]||{}).hidden){var V=tTt(t,l,T,f,r,s,b,c);(V.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[y++]=V.row)}return g.length=y,g}var Vae=/"/g;function nTt(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",h=Fo(n),f=e.s.c;f<=e.e.c;++f)if(r[f]){var g=a.dense?(t[n]||[])[f]:t[r[f]+h];if(g==null)u="";else if(g.v!=null){l=!1,u=""+(a.rawNumbers&&g.t=="n"?g.v:Rp(g,null,a));for(var y=0,_=0;y!==u.length;++y)if((_=u.charCodeAt(y))===i||_===s||_===34||a.forceQuotes){u='"'+u.replace(Vae,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(l=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(Vae,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function uK(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=vi(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(t);for(var f=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],y=i.s.c;y<=i.e.c;++y)(f[y]||{}).hidden||(h[y]=ba(y));for(var _=0,b=i.s.r;b<=i.e.r;++b)(g[b]||{}).hidden||(u=nTt(t,i,b,h,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((_++?a:"")+u)));return delete r.dense,n.join("")}function DSe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=uK(t,e);return n}function rTt(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=vi(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=ba(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=Fo(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function jSe(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?po(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var h=vi(s["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var f=r.header||[],g=0;e.forEach(function(_,b){Vo(_).forEach(function(T){(g=f.indexOf(T))==-1&&(f[g=f.length]=T);var A=_[T],C="z",I="",R=qr({c:a+g,r:o+b+i});c=qA(s,R),A&&typeof A=="object"&&!(A instanceof Date)?s[R]=A:(typeof A=="number"?C="n":typeof A=="boolean"?C="b":typeof A=="string"?C="s":A instanceof Date?(C="d",r.cellDates||(C="n",A=Ml(A)),I=r.dateNF||is[14]):A===null&&r.nullError&&(C="e",A=0),c?(c.t=C,c.v=A,delete c.w,delete c.R,I&&(c.z=I)):s[R]=c={t:C,v:A},I&&(c.z=I))})}),u.e.c=Math.max(u.e.c,a+f.length-1);var y=Fo(o);if(i)for(g=0;g<f.length;++g)s[ba(g+a)+y]={t:"s",v:f[g]};return s["!ref"]=Os(u),s}function iTt(t,e){return jSe(null,t,e)}function qA(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=po(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?qA(t,qr(e)):qA(t,qr({r:e,c:n||0}))}function sTt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function oTt(){return{SheetNames:[],Sheets:{}}}function aTt(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(kSe(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function lTt(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=sTt(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function cTt(t,e){return t.z=e,t}function FSe(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function uTt(t,e,n){return FSe(t,"#"+e,n)}function hTt(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function dTt(t,e,n,r){for(var i=typeof e!="string"?e:vi(e),s=typeof e=="string"?e:Os(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=qA(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var I$={encode_col:ba,encode_row:Fo,encode_cell:qr,encode_range:Os,decode_col:Qq,decode_row:Jq,split_cell:k_t,decode_cell:po,decode_range:Ac,format_cell:Rp,sheet_add_aoa:FEe,sheet_add_json:jSe,sheet_add_dom:RSe,aoa_to_sheet:Gb,json_to_sheet:iTt,table_to_sheet:MSe,table_to_book:OSt,sheet_to_csv:uK,sheet_to_txt:DSe,sheet_to_json:L5,sheet_to_html:PSe,sheet_to_formulae:rTt,sheet_to_row_object_array:L5,sheet_get_cell:qA,book_new:oTt,book_append_sheet:aTt,book_set_sheet_visibility:lTt,cell_set_number_format:cTt,cell_set_hyperlink:FSe,cell_set_internal_link:uTt,cell_add_comment:hTt,sheet_set_array_formula:dTt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const uc=vo()(kh((t,e)=>({vondsten:[],addVondst:n=>t(r=>({vondsten:[...r.vondsten,{...n,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:n=>t(r=>({vondsten:r.vondsten.filter(i=>i.id!==n)})),updateVondst:(n,r)=>t(i=>({vondsten:i.vondsten.map(s=>s.id===n?{...s,...r}:s)})),clearAll:()=>t({vondsten:[]}),exportAsGeoJSON:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:n.map(a=>({type:"Feature",geometry:{type:"Point",coordinates:[a.location.lng,a.location.lat]},properties:{id:a.id,objectType:a.objectType,material:a.material,period:a.period,depth:a.depth,notes:a.notes,timestamp:a.timestamp,photoUrl:a.photoUrl,condition:a.condition,weight:a.weight,length:a.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},exportAsCSV:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=n.map(c=>{const u=new Date(c.timestamp).toLocaleDateString("nl-NL"),h=c.notes?`"${c.notes.replace(/"/g,'""')}"`:"";return`${c.id},${c.location.lat},${c.location.lng},${u},${c.objectType},${c.material},${c.period},${c.depth||""},${c.condition||""},${c.weight||""},${c.length||""},${h},${c.photoUrl||""}`}).join(`
`),s=r+i,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},exportAsExcel:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(a=>({ID:a.id,Latitude:a.location.lat,Longitude:a.location.lng,Datum:new Date(a.timestamp).toLocaleDateString("nl-NL"),Type:a.objectType,Materiaal:a.material,Periode:a.period,"Diepte (cm)":a.depth||"",Conditie:a.condition||"","Gewicht (g)":a.weight||"","Lengte (mm)":a.length||"",Notities:a.notes||"","Foto URL":a.photoUrl||""})),i=I$.json_to_sheet(r),s=I$.book_new();I$.book_append_sheet(s,i,"Vondsten");const o=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=o,eTt(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(l=>{const c=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${c}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},exportAsKML:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${n.map(l=>{const c=new Date(l.timestamp).toLocaleDateString("nl-NL"),u=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${c}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${u}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}}),{name:"detectorapp-local-vondsten"})),fTt={Fectio:{naam:"Fectio",latinNaam:"Fectio",type:"castellum",periode:"ca. 4 - 270 n.Chr.",beschrijving:"Groot Romeins castellum bij Bunnik/Vechten, aan de splitsing van Rijn en Vecht. Een van de belangrijkste legerbases in Nederland met ruimte voor 500 soldaten. Het fort had barakken, badhuis, hospitaal en pakhuizen. Buiten de muren woonden handelaren en soldatenfamilies in een vicus. Hier is een compleet Romeins schip gevonden (De Meern 1). Strategisch gelegen voor transport over de rivieren. Veel vondsten door natte bodem: leer, hout, textiel naast munten en militaria. Te bezoeken: Archeologisch Park Castellum Hoge Woerd met reconstructie en museum.",watWasHier:"Groot castellum met ruimte voor 500 soldaten, barakken, badhuis, hospitaal en pakhuizen. Buiten het fort een burgerdorp.",watTeZien:"Archeologisch Park Castellum Hoge Woerd toont de contouren. Museum met veel vondsten waaronder een Romeins schip.",verwachteVondsten:"Munten, fibulae, aardewerk, wapens, paardentuig, militaire uitrusting. Door natte bodem ook leer, hout en textiel.",betekenis:"Een van de belangrijkste forten aan de Limes. Knooppunt voor troepen- en goederentransport.",bronnen:["https://www.hogewoerd.nl","https://www.livius.org/articles/place/fectio-vechten/"]},Traiectum:{naam:"Traiectum",latinNaam:"Traiectum",type:"castellum",periode:"ca. 42 - 275 n.Chr.",beschrijving:'Romeins castellum onder het huidige Domplein in Utrecht. De naam betekent "doorwaadbare plaats" - hier splitsten Rijn en Vecht. Het fort (124x152m in laatste fase) bood plaats aan ca. 500 soldaten. Vijf bouwfases: eerst hout, na 200 n.Chr. steen met tufsteen uit de Eifel. Cohors II Hispanorum peditata (Spaanse infanterie) was hier uniek gelegerd 88-275 n.Chr. - hun dakpanstempels zijn nergens anders aan de Limes gevonden! Het fort werd verwoest tijdens de Bataafse Opstand (69 n.Chr.). DOMunder onder het Domplein toont de opgegraven resten. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Castellum (500 soldaten) bij riviersplitsing. Cohors II Hispanorum gelegerd.",watTeZien:"DOMunder onder het Domplein: opgravingen te bezoeken. Principia en poorten blootgelegd.",verwachteVondsten:"Dakpannen met stempels, munten, aardewerk, tufsteen bouwmateriaal, militaria.",betekenis:"UNESCO Werelderfgoed. Oorsprong van de stad Utrecht.",bronnen:["https://www.livius.org/articles/place/traiectum-utrecht/","https://www.utrechtaltijd.nl/verhalen/castellum-traiectum-een-romeinse-legerbasis-in-het-hart-van-de-domstad/","https://www.romeinen.nl/locatie-overzicht/3447271878/domunder-castellum-traiectum"]},Laurum:{naam:"Laurum",latinNaam:"Laurum",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in het huidige Woerden aan de Oude Rijn. Garnizoen van ca. 500 soldaten in houten barakken. Bijzonder vanwege de natte veenbodem: organisch materiaal bleef bewaard zoals houten schrijfplankjes met Latijnse teksten, leren schoenen en een Romeinse boot. Het fort werd meerdere keren herbouwd na overstromingen. De contouren zijn in het stratenpatroon herkenbaar. Buiten de muren lag een vicus (burgerdorp). Vondsten in Stadsmuseum Woerden, waaronder unieke houten voorwerpen die elders zijn vergaan.",watWasHier:"Castellum voor 500 soldaten met houten barakken, badhuis en pakhuizen. Vicus buiten de muren.",watTeZien:"Stadsmuseum Woerden met bijzondere vondsten. Fort-contouren in stratenpatroon herkenbaar.",verwachteVondsten:"Militaria, aardewerk, munten, schrijfplankjes. Door natte veengrond ook hout, leer en schoenen.",betekenis:"Toont Romeins bouwen in moeilijk veengebied. Unieke organische vondsten.",bronnen:["https://www.castellumwoerden.nl"]},"Castellum Praetorium Agrippinae":{naam:"Praetorium Agrippinae",latinNaam:"Praetorium Agrippinae",type:"castellum",periode:"ca. 40 - 275 n.Chr.",beschrijving:"Een van de best opgegraven Romeinse locaties van Nederland. Het castellum werd gesticht in de winter van 39/40 n.Chr. door keizer Caligula, vernoemd naar zijn moeder Vipsania Agrippina. Een opgegraven wijnvat bevatte wijn van de persoonlijke wijngaarden van de keizer! Er zijn 7 bouwfasen gevonden, 6 van hout en de laatste van steen - uniek compleet inzicht in Romeinse bouwtechnieken. Cohors III Gallorum equitata was hier gelegerd. Bij opgravingen (1941-1953) zijn door het grondwater veel organische vondsten bewaard: voedselresten, leer, touw. De vicus buiten het fort strekte zich 1 km uit met 700+ graven. Op het Castellumplein zijn de contouren in brons gemarkeerd.",watWasHier:"Castellum met 7 bouwfasen. Vicus (1 km) met 700+ graven. Detachement Cohors III Gallorum.",watTeZien:"Castellumplein met bronzen markeringen. Torenmuseum Valkenburg. Gereconstrueerde poort.",verwachteVondsten:"Militaria, organisch materiaal (voedsel, leer, touw), aardewerk, munten, inscripties.",betekenis:"Best gedocumenteerde Romeinse fort van Nederland. UNESCO Werelderfgoed.",bronnen:["https://www.livius.org/articles/place/praetorium-agrippinae-valkenburg-zh/","https://www.geschiedenisvanzuidholland.nl/zien-en-doen/locaties/praetorium-agrippinae-in-valkenburg/","https://oudvalkenburgzh.nl/torenmuseum-5/"]},"Castra Hunnerberg":{naam:"Castra Hunnerberg",latinNaam:"Castra",type:"legerkamp",periode:"ca. 16 v.Chr. - 104 n.Chr.",beschrijving:'Enorm Romeins legerkamp op de Hunnerberg bij Nijmegen - 42 hectare (80 voetbalvelden), ruimte voor 12.000 man. De enige plek in Nederland waar echte legioenen (geen hulptroepen) verbleven! Na de Bataafse Opstand (69 n.Chr.) vestigde Legio X Gemina Pia Fidelis zich hier - opgericht door Julius Caesar en het bekendste legioen van Nederland. De afkorting LXG is talloze keren gevonden op dakpannen en tegels. Bij opgravingen zijn ruim 1000 fragmenten militaire uitrusting en paardentuig gevonden. In 104 n.Chr. vertrok het legioen naar de Balkan - een ramp voor de economie. UNESCO Werelderfgoed sinds 2021, omschreven als "bakermat van de Nederduitse Limes".',watWasHier:"Legerkamp voor 12.000 man. Legio X Gemina (71-104 n.Chr.), opgericht door Julius Caesar.",watTeZien:"Museum Het Valkhof. Museum Kam in de Hunnerberg. Grafvelden in Nijmegen-Oost.",verwachteVondsten:"Legioenstempels LXG, militaria, paardentuig, dakpannen, munten, grafstenen.",betekenis:"UNESCO Werelderfgoed. Bakermat van de Limes. Enige legioenskamp in Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-hunnerberg/","https://www.welkominnijmegen.nl/pages/geschiedenis/de-romeinen-in-nijmegen/de-legerkampen.php","https://mijngelderland.nl/inhoud/specials/archeokroniek/romeinse-militaire-uitrusting-en-paardentuig-van-de-hunerberg-te-nijmegen"]},"Castellum Kops Plateau":{naam:"Kops Plateau",latinNaam:"Oppidum Batavorum",type:"castellum",periode:"ca. 10 v.Chr. - 70 n.Chr.",beschrijving:"Vroege Romeinse basis op het Kops Plateau in Nijmegen, later de civiele hoofdstad van de Bataven: Oppidum Batavorum. Hier woonden Romeinen en Bataven samen - het eerste contactpunt tussen beide culturen. Verwoest tijdens de Bataafse Opstand van 69-70 n.Chr. onder leiding van Julius Civilis. Gemengde vondsten: Romeinse militaria n Keltisch-Bataafse voorwerpen. Vroege importaardewerk en munten van Augustus. Nu natuurgebied. Museum Het Valkhof toont de unieke vondsten van deze ontmoeting van culturen.",watWasHier:"Eerst Romeins kamp, later Bataafse hoofdstad. Romeinen en Bataven woonden samen.",watTeZien:"Kops Plateau is natuurgebied. Museum Het Valkhof toont de vondsten.",verwachteVondsten:"Vroege militaria, Keltisch-Bataafse voorwerpen, importaardewerk, munten van Augustus.",betekenis:"Eerste contactpunt Romeinen-Bataven. Begin van romanisering Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-kops-plateau/"]},"Nijmegen, Valkhof":{naam:"Valkhof Nijmegen",latinNaam:"Valkhof",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:"Laat-Romeinse versterking op het Valkhof in Nijmegen, aan de Waaloever. Gebouwd toen het Rijk onder druk stond van Germaanse invallen. Strategische positie boven de rivier. Continuteit: Karel de Grote bouwde hier later zijn palts (koninklijke residentie). De Sint-Nicolaaskapel bevat mogelijk Karolingische elementen op Romeinse fundamenten. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Museum Het Valkhof toont de overgang van Romeinse tijd naar vroege middeleeuwen.",watWasHier:"Laat-Romeinse versterking boven de Waal. Later Karolingische palts.",watTeZien:"Valkhofpark met Sint-Nicolaaskapel. Museum Het Valkhof.",verwachteVondsten:"Laat-Romeinse munten, gordels, riemtongen, militaire gespen, 3e-4e eeuws aardewerk.",betekenis:"Toont overgang Romeinse tijd naar middeleeuwen. Nijmegen bleef machtscentrum.",bronnen:["https://www.museumhetvalkhof.nl"]},"Castellum Op de Hoge Woerd":{naam:"Hoge Woerd",latinNaam:"Castellum",type:"castellum",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeins castellum in Leidsche Rijn (Utrecht), nu een voorbeeldig archeologisch park. Middelgroot fort met houten gebouwen en een burgerdorp (vicus) buiten de muren. Hier is een compleet Romeins schip gevonden: De Meern 1, een 25 meter lange vrachtboot. Door de natte kleigrond bleef veel organisch materiaal bewaard. Het park toont de reconstructie van het fort - je kunt over de originele fundamenten lopen. Modern museum met interactieve presentatie. Ideale plek om te zien hoe een Romeins fort eruitzag.",watWasHier:"Middelgroot castellum met houten gebouwen. Vicus buiten de muren. Compleet schip gevonden.",watTeZien:"Archeologisch Park Hoge Woerd: reconstructie fort, museum, originele fundamenten.",verwachteVondsten:"Militaria, scheepsonderdelen, aardewerk, munten. Door natte grond ook organisch materiaal.",betekenis:"Best gepresenteerde Romeinse fort in Nederland. Ideaal om fort-layout te begrijpen.",bronnen:["https://www.hogewoerd.nl"]},Lugdunum:{naam:"Lugdunum",latinNaam:"Lugdunum",type:"vlootbasis",periode:"ca. 40 - 270 n.Chr.",beschrijving:`Romeinse vlootbasis en versterkte graanopslagplaats bij de monding van de Rijn, het westelijkste punt van de gehele Limes. Hier stond mogelijk een enorme vuurtoren (ca. 60m hoog) naar model van de Pharos van Ostia - vissers noemden deze "Kalla's toren" (Caligula). Door de vele dakpannen van de Romeinse vloot wordt aangenomen dat dit een vlootbasis was. Het fort is door kustafslag in zee verdwenen. Bij stormen in 1520, 1552 en 1562 waren de runes van de "Brittenburg" zichtbaar op het strand; de laatst gedateerde vondst was 270 n.Chr. Het Rijksmuseum van Oudheden in Leiden toont vondsten. De beroemde kaart van Ortelius toont hoe het eruit zag.`,watWasHier:"Vlootbasis met vuurtoren bij Rijnmonding. Graanopslag voor Britannia.",watTeZien:"Fort verdwenen in zee. RMO Leiden toont vondsten en kaart van Ortelius.",verwachteVondsten:"Na stormen: munten, aardewerk, militaria. Fort zelf onbereikbaar in Noordzee.",betekenis:"Westelijk eindpunt van de Limes. Verbinding met Britannia.",bronnen:["https://www.livius.org/articles/place/lugdunum-katwijk/","https://nl.wikipedia.org/wiki/Lugdunum_(Katwijk)"]},"Vlootbasis Naaldwijk":{naam:"Vlootbasis Naaldwijk",type:"vlootbasis",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Vermoedelijke basis van de Classis Germanica (Germaanse vloot) bij Naaldwijk in het Westland. De Romeinse vloot patrouilleerde langs de Noordzeekust en vervoerde troepen en goederen naar Britannia. Haven met dokken voor oorlogsschepen en transportboten. Mariniers (classiarii) waren hier gestationeerd. Het gebied is nu landbouwgrond, maar bij opgravingen zijn haven-structuren en scheepsgerelateerde vondsten gedaan. Ankers, scheepsonderdelen en specifieke mariniers-uitrusting. Toont het belang van zeemacht voor de Romeinse grensverdediging.",watWasHier:"Haven voor oorlogsschepen. Mariniers gestationeerd. Patrouilles langs Noordzeekust.",watTeZien:"Gebied is landbouwgrond. Vondsten in lokale musea.",verwachteVondsten:"Scheepsonderdelen, ankers, mariniers-uitrusting, importaardewerk.",betekenis:"Toont belang Romeinse vloot voor kustverdediging.",bronnen:[]},"Minifort Ockenburg":{naam:"Minifort Ockenburg",type:"minifort",periode:"ca. 150 - 180 n.Chr.",beschrijving:"Klein Romeins kustfort bij Ockenburg in Den Haag, op een oude strandwal. Bewaakte de kust tegen piraten en Germaanse invallen over zee. Ruimte voor slechts 20-30 soldaten - een wachtpost eerder dan een echt fort. Korte gebruiksperiode van ca. 30 jaar. Toont dat de Romeinen niet alleen de rivieren maar ook de Noordzeekust verdedigden. Het terrein is beschermd rijksmonument maar niet publiek toegankelijk. Vondsten in het Haags Historisch Museum: militaria, aardewerk en munten uit de 2e eeuw.",watWasHier:"Kleine kustwachtpost voor 20-30 soldaten op strandwal.",watTeZien:"Terrein beschermd maar niet toegankelijk. Haags Historisch Museum.",verwachteVondsten:"Kleine hoeveelheden militaria, aardewerk, munten 2e eeuw.",betekenis:"Toont Romeinse kustverdediging naast rivierforten.",bronnen:[]},"Castellum Ceuclum":{naam:"Ceuclum",latinNaam:"Ceuclum",type:"castellum",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Romeins castellum bij Cuijk aan de Maas, waar de belangrijke weg naar het noorden de rivier kruiste. Het fort bewaakte een brug of veerpont. Garnizoen van hulptroepen. De naam Cuijk is afgeleid van Ceuclum. Bij de brug werden ritueel munten geofferd. Het fort lag op een strategisch punt waar de Maasroute de landweg kruiste. Vondsten wijzen op handel en militaire activiteit. Het Maasmuseum in Cuijk toont lokale Romeinse vondsten. Onder het centrum zijn bij bouwwerkzaamheden regelmatig resten gevonden.",watWasHier:"Castellum bij Maasbrug. Belangrijke rivierovergang en kruispunt.",watTeZien:"Maasmuseum Cuijk. Resten gevonden onder centrum.",verwachteVondsten:"Munten (geofferd bij brug), fibulae, aardewerk, bruggerelateerde vondsten.",betekenis:"Belangrijke schakel in wegennet langs de Maas.",bronnen:["https://www.livius.org/articles/place/ceuclum-cuijk/"]},"Castellum Meinerswijk":{naam:"Meinerswijk",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in de uiterwaarden bij Arnhem-Meinerswijk aan de Rijn. Het fort bewaakt een strategisch punt waar de rivier goed te overzien was. Meerdere bouwfasen door overstromingen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan: militaria, aardewerk, munten en scheepsresten. Het gebied is nu natuurgebied Meinerswijk met wisselende waterstanden. Na hoog water kunnen vondsten aan de oppervlakte komen. Museum Arnhem toont Romeinse vondsten uit de regio.",watWasHier:"Castellum in uiterwaarden. Meerdere bouwfasen door overstromingen.",watTeZien:"Natuurgebied Meinerswijk. Museum Arnhem.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},Levefanum:{naam:"Levefanum",latinNaam:"Levefanum",type:"versterking",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeinse versterking bij Wijk bij Duurstede, waar de Rijn splitste in de Lek en Kromme Rijn. Strategisch cruciaal punt voor controle over het scheepvaartverkeer. Waarschijnlijk ook een haven voor overslag van goederen. Op dezelfde plek ontstond later de Karolingische handelsstad Dorestad, een van de belangrijkste havens van vroegmiddeleeuws Europa. De continuteit toont het blijvende belang van deze locatie. Dorestad Museum vertelt het verhaal van Romeinse tijd tot Vikingaanvallen. Vondsten: munten, handelsaardewerk, militaria.",watWasHier:"Versterking bij riviersplitsing. Haven en overslagpunt. Later Dorestad.",watTeZien:"Dorestad Museum. Terrein bebouwd.",verwachteVondsten:"Munten, handelsaardewerk, militaria, scheepsgerelateerde vondsten.",betekenis:"Strategisch controlepunt waterwegen. Later belangrijke handelsstad Dorestad.",bronnen:[]},"Nigrum Pullum":{naam:"Nigrum Pullum",latinNaam:"Nigrum Pullum (Zwarte Poel)",type:"minifort",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Zwammerdam aan de Oude Rijn. Garnizoen van 100-150 soldaten met pakhuizen en haven voor riviertransport. Wereldberoemd door de vondst van 6 Romeinse schepen (1971-1974) in perfecte staat - bewaard door de natte veengrond. De Zwammerdamschepen zijn de best bewaarde Romeinse rivierschepen ter wereld en tonen uniek inzicht in Romeins transport en scheepsbouw. Vondsten: schepen, leren schoeisel, houten voorwerpen, aardewerk, munten, militaria. Te zien in Rijksmuseum van Oudheden, Leiden.",watWasHier:"Klein fort met pakhuizen en haven. Bij opgravingen werden 6 Romeinse schepen gevonden.",watTeZien:"De schepen zijn in het Rijksmuseum van Oudheden in Leiden. Het terrein zelf is niet te bezoeken.",verwachteVondsten:"Scheepsonderdelen, leren schoeisel, houten voorwerpen, aardewerk, munten, en door de natte veengrond organisch materiaal.",betekenis:"Wereldberoemd om de goed bewaarde Romeinse schepen. Toont transport over de Rijn.",bronnen:["https://www.rmo.nl/collectie/themas/zwammerdam"]},"Stenen wachttoren Vleuterweide":{naam:"Wachttoren Vleuterweide",type:"wachttoren",periode:"ca. 150 - 250 n.Chr.",beschrijving:"Bijzondere stenen wachttoren in Vleuterweide bij Utrecht - de meeste Romeinse wachttorens waren van hout. De stenen constructie wijst op permanentie en belang. Onderdeel van het signaleringssysteem langs de Limes: bij gevaar werden vuren aangestoken om forten te waarschuwen. De toren bood uitzicht over de omgeving en de rivier. Mogelijk woonden hier ook families van de soldaten. De fundamenten zijn gemarkeerd in de moderne woonwijk. Vondsten: bouwmateriaal (dakpannen, stenen), aardewerk, persoonlijke bezittingen. Centraal Museum Utrecht.",watWasHier:"Stenen wachttoren (ongebruikelijk). Signaalpost voor waarschuwingssysteem.",watTeZien:"Fundamenten gemarkeerd in wijk. Centraal Museum Utrecht.",verwachteVondsten:"Dakpannen met legioenstempels, aardewerk, persoonlijke bezittingen.",betekenis:"Een van weinige bekende stenen wachttorens. Toont variatie in bouwwijzen.",bronnen:[]},"Wachttoren Bunnik":{naam:"Wachttoren Bunnik",type:"wachttoren",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Houten wachttoren bij Bunnik aan de Rijn, onderdeel van het signaleringssysteem langs de Limes. Elke paar kilometer stond een toren met uitzicht over de rivier. Bij nadering van vijanden werden vuren of rooksignalen gegeven, zodat binnen minuten alle forten gewaarschuwd waren. De torens waren meestal van hout op een aarden verhoging. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend doordat het gebied nu bebouwd is. Vondsten zijn schaars: wat aardewerk en militaria.",watWasHier:"Houten uitkijktoren voor signalering. Kleine bezetting van 4-8 soldaten.",watTeZien:"Exacte locatie onbekend. Gebied bebouwd.",verwachteVondsten:"Kleine hoeveelheden militaria en aardewerk.",betekenis:"Onderdeel signaleringssysteem langs Limes.",bronnen:[]},"Castellum Maastricht":{naam:"Castellum Maastricht",latinNaam:"Mosae Trajectum",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:'Laat-Romeinse versterking in het centrum van Maastricht bij de brug over de Maas. Mosae Trajectum betekent "Maasoversteek". Gebouwd in een periode dat het Rijk onder druk stond van Germaanse invallen. Het fort bewaakte de strategische rivierovergang. Continuteit van bewoning: Maastricht bleef bewoond tot op heden. Onder het Vrijthof en omgeving zijn Romeinse resten gevonden. Typische laat-Romeinse vondsten: gordels, riembeslag, munten 3e-4e eeuw, zwaar versterkte muren. Centre Ceramique vertelt de geschiedenis.',watWasHier:"Laat-Romeinse versterking bij Maasbrug. Verdediging tegen Germaanse invallen.",watTeZien:"Onder Vrijthof zijn resten. Centre Ceramique.",verwachteVondsten:"Laat-Romeinse munten, militaire gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont continuteit - Maastricht ononderbroken bewoond sinds Romeinse tijd.",bronnen:["https://www.centreceramique.nl"]},Roompot:{naam:"Roompot Fort",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de Roompot in Zeeland dat de toegang tot de Oosterschelde bewaakte. Het fort beschermde schepen tegen piraterij en controleerde de vaarroute. Door zeespiegelstijging en kustafslag is het fort in de golven verdwenen. De exacte locatie ligt nu onder water. Soms spoelen na stormen vondsten aan op de stranden van Noord-Beveland en Walcheren: munten, aardewerk, metalen voorwerpen. Toont dat de Romeinen de gehele Zeeuwse delta controleerden, niet alleen de grote rivieren.",watWasHier:"Kustfort dat zeeroute bewaakte. Bescherming tegen piraterij.",watTeZien:"Fort verdwenen in zee. Soms vondsten op strand na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen voorwerpen op Zeeuwse stranden.",betekenis:"Toont Romeinse controle over Zeeuwse wateren.",bronnen:[]},"Castellum Carvium":{naam:"Carvium",latinNaam:"Carvium",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Herwen-Aerdt (bij Lobith) waar Rijn en Waal samenkwamen - een strategisch knooppunt van eerste orde. Het fort controleerde het rivierverkeer op beide grote stromen. Garnizoen van hulptroepen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan. Het gebied is nu natuurgebied de Gelderse Poort met dynamische rivierlandschap. Na hoog water kunnen vondsten aan oppervlakte komen. Museum Het Valkhof in Nijmegen toont vondsten uit de regio. Scheepsresten gevonden.",watWasHier:"Fort bij samenvloeiing Rijn en Waal. Controleerde twee grote rivieren.",watTeZien:"Natuurgebied Gelderse Poort. Museum Het Valkhof Nijmegen.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Controleerde strategisch knooppunt waterwegen.",bronnen:[]},Matilo:{naam:"Matilo",latinNaam:"Matilo",type:"castellum",periode:"ca. 70 - 260 n.Chr.",beschrijving:'Romeins castellum bij Leiden-Roomburg, gebouwd na de Bataafse Opstand (69-70 n.Chr.) op een strategische plek aan de monding van het Kanaal van Corbulo. Het gigantische fort (80x120m) bood plaats aan ca. 500 soldaten en is een van de best bewaarde castella in Nederland. De archeologische resten liggen grotendeels intact onder Archeologisch Park Matilo. In het park staan 6 replica-wachttorens en een aarden wal die de omtrek van het fort visualiseert. Het fort werd tussen 240-260 n.Chr. opgeheven. De locatie Roomburg ("Romeinse burcht") verwijst naar de oorsprong. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Groot castellum (500 soldaten) bij monding Kanaal van Corbulo. Vicus buiten de muren.",watTeZien:"Archeologisch Park Matilo met 6 wachttoren-replica's en aarden wal. Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, grafgiften, crematie-urnen, aardewerk, munten, fibulae.",betekenis:"UNESCO Werelderfgoed. Een van de best bewaarde castella van Nederland.",bronnen:["https://parkmatilo.nl/het-verhaal-van-matilo/","https://www.limeswerelderfgoed.nl/locaties/2016475046/archeologisch-park-matilo","https://www.romeinen.nl/locatie-overzicht/2016475046/archeologisch-park-matilo"]},Corbulo:{naam:"Forum Hadriani",latinNaam:"Forum Hadriani (Municipium Aelium Cananefatium)",type:"versterking",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Forum Hadriani bij Voorburg was de noordelijkste Romeinse stad van het Europese continent en de enige stad met stadsrechten in Nederland. Gesticht rond 70 n.Chr. aan het Kanaal van Corbulo (34 km, verbinding Rijn-Maas). Keizer Hadrianus verleende in 121 n.Chr. marktrechten en gaf de stad zijn naam. Rond 150 n.Chr. kreeg het stadsrechten (Municipium). De stad had ca. 1000 inwoners, een stadsmuur met dubbele gracht, stenen gebouwen en tempels. Park Arentsburgh markeert de locatie. UNESCO Werelderfgoed sinds 2021. De eerste wetenschappelijke opgravingen (1827-1833) waren door Caspar Reuvens, de eerste hoogleraar archeologie ter wereld.",watWasHier:"Enige Romeinse stad met stadsrechten in Nederland. Ca. 1000 inwoners.",watTeZien:"Park Arentsburgh in Voorburg. Kanaal traceerbaar als de Vliet.",verwachteVondsten:"Stedelijke vondsten: bouwmateriaal, aardewerk, munten, inscripties, religieuze voorwerpen.",betekenis:"UNESCO Werelderfgoed. Noordelijkste Romeinse stad van Europa.",bronnen:["https://www.awlv.nl/forum-hadriani/de-stad-forum-hadriani/","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/regio-voorburg","https://kennis.cultureelerfgoed.nl/index.php/Monumenten/508083"]},"Berg - Tomveld":{naam:"Berg-Tomveld",type:"villa",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse villa bij Berg in Zuid-Limburg, mogelijk tijdelijk militair gebruikt. Dit type gebouwen diende als landbouwbedrijf met luxe woondeel voor de eigenaar. De regio Zuid-Limburg was dicht bebouwd met villa's die graan en vee leverden aan het Romeinse leger. Vondsten wijzen op welvaart: mozaekvloeren, beschilderd pleisterwerk, hypocaustum (vloerverwarming). De locatie Tomveld verwijst mogelijk naar Romeinse grafheuvels (tumuli) in de buurt. Thermenmuseum Heerlen toont de villa-cultuur.",watWasHier:"Villa rustica met mogelijk militair gebruik. Landbouw voor legervoorraden.",watTeZien:"Locatie in agrarisch gebied. Thermenmuseum Heerlen.",verwachteVondsten:"Bouwmateriaal, dakpannen, aardewerk, munten, sieraden.",betekenis:"Toont Romeinse landbouweconomie in Zuid-Limburg.",bronnen:[]},"Berg - Trappenberg":{naam:"Berg-Trappenberg",type:"legerkamp",periode:"1e eeuw v.Chr. - 1e eeuw n.Chr.",beschrijving:"Vroeg-Romeins legerkamp bij Berg in Zuid-Limburg dat later werd omgebouwd tot villa of boerderij. Toont de transitie van militaire bezetting naar civiele bewoning. Het kamp dateert uit de veroveringsperiode toen Rome dit gebied inlijfde. Na pacificatie was een fort niet meer nodig en werd het terrein civiel benut. Vondsten: vroege Romeinse militaria naast later agrarisch materiaal. Zuid-Limburg was een grenszone voordat de Limes naar de Rijn verplaatste.",watWasHier:"Eerst legerkamp, later villa/boerderij. Overgang militair naar civiel.",watTeZien:"Locatie in landbouwgebied.",verwachteVondsten:"Vroege militaria, later agrarisch aardewerk, bouwmateriaal.",betekenis:"Toont Romeinse verovering en pacificatie van Zuid-Limburg.",bronnen:[]},"Castellum Blariacum":{naam:"Blariacum",latinNaam:"Blariacum",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van het Romeinse castellum Blariacum bij Blerick (nu deel van Venlo). De naam leeft voort in de plaatsnaam. Het fort zou de Maasovergang hebben bewaakt op de route tussen Xanten en Maastricht. De exacte locatie is nooit definitief vastgesteld ondanks vele opgravingspogingen. Vondsten in de omgeving wijzen wel op Romeinse militaire aanwezigheid: militaria, munten, aardewerk. Het Limburgs Museum in Venlo toont de Romeinse geschiedenis van de regio.",watWasHier:"Vermoedelijk castellum bij Maasovergang. Exacte locatie onzeker.",watTeZien:"Locatie niet vastgesteld. Limburgs Museum Venlo.",verwachteVondsten:"Militaria, munten, aardewerk als aanwijzingen voor fortlocatie.",betekenis:"Plaatsnaam Blerick afgeleid van Blariacum. Schakel in Maasroute.",bronnen:[]},"Fortificatie Bodegraven":{naam:"Wachtpost Bodegraven",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Waarschijnlijke Romeinse wachtpost bij Bodegraven aan de Oude Rijn. Onderdeel van het signaleringssysteem tussen de grotere forten zoals Nigrum Pullum en Laurum. De wachttorens stonden om de paar kilometer en konden met vuur- of rooksignalen waarschuwingen doorgeven. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend. Bij graafwerkzaamheden in Bodegraven zijn wel Romeinse scherven gevonden die op aanwezigheid wijzen.",watWasHier:"Kleine wachtpost voor signalering. 4-8 soldaten.",watTeZien:"Exacte locatie onbekend.",verwachteVondsten:"Aardewerk, kleine hoeveelheden militaria.",betekenis:"Onderdeel communicatiesysteem langs de Limes.",bronnen:[]},Caestert:{naam:"Caestert",type:"versterking",periode:"1e eeuw v.Chr.",beschrijving:"Mogelijk de locatie waar de Eburonen onder leiding van Ambiorix in 54 v.Chr. een Romeins legioen vernietigden - de zwaarste Romeinse nederlaag in de Lage Landen. Het plateau van Caestert bij Kanne (Belgisch Limburg) had een oppidum (versterkte nederzetting). Julius Caesar beschrijft de slag in zijn Gallische Oorlogen. De locatie is omstreden, maar Caestert is een sterke kandidaat. Symbolisch belangrijke plek voor de Belgische geschiedenis. De site is nu natuurgebied met grotten.",watWasHier:"Mogelijk slagveld Ambiorix-opstand 54 v.Chr. Oppidum (versterking).",watTeZien:"Plateau Caestert, natuurgebied met grotten.",verwachteVondsten:"Keltische en vroeg-Romeinse voorwerpen, mogelijk slagveldvondsten.",betekenis:"Mogelijke locatie grootste Romeinse nederlaag in de regio.",bronnen:[]},"Castellum Driel?":{naam:"Castellum Driel",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:'Mogelijke locatie van een Romeins castellum bij Driel in de Betuwe. Het bestaan en de exacte locatie zijn onzeker, vandaar het vraagteken. De Betuwe (Insula Batavorum - "Eiland der Bataven") was kerngebied van de Bataven, bondgenoten van Rome. Zij leverden beroemde hulptroepen aan het Romeinse leger. Een fort hier zou logisch zijn om het gebied te controleren. Vondsten in de omgeving wijzen op Romeinse aanwezigheid. Museum Het Valkhof Nijmegen toont de Bataafse cultuur.',watWasHier:"Mogelijk castellum in Bataafs kerngebied. Bestaan onzeker.",watTeZien:"Geen zichtbare resten. Museum Het Valkhof.",verwachteVondsten:"Romeinse en Bataafse voorwerpen indien locatie juist.",betekenis:"Zou Romeinse controle over Bataafs gebied tonen.",bronnen:[]},"Castellum Duiven - Loowaard":{naam:"Duiven-Loowaard",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Duiven/Loowaard aan de Rijn, in de uiterwaarden tussen Arnhem en Zevenaar. Het fort bewaakte de rivierroute en de overgang naar het Bataafse gebied. De dynamische rivier heeft veel resten weggespoeld of diep begraven. Bij lage waterstanden en na erosie komen soms vondsten aan oppervlakte: munten, militaria, aardewerk. Het gebied is nu natuurgebied met grazende grote grazers. Museum Arnhem en Het Valkhof Nijmegen tonen vondsten uit de regio.",watWasHier:"Castellum aan de Rijn in uiterwaarden. Bewaakte rivierovergang.",watTeZien:"Natuurgebied. Na erosie mogelijk vondsten aan oppervlakte.",verwachteVondsten:"Militaria, munten, aardewerk na erosie of bij laag water.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},"Castellum Grinnes":{naam:"Grinnes",latinNaam:"Grinnes",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Rossum in de gemeente Maasdriel - waarschijnlijk het antieke Grinnes vermeld op de Peutingerkaart. Het fort lag aan de Waal en controleerde de rivierroute. Bij opgravingen zijn resten van het fort gevonden. De omgeving is rijk aan Romeinse vondsten: militaria, munten, aardewerk, bouwmateriaal. Het Museum voor de Bommelerwaard in Ammerzoden toont lokale vondsten. De naam Grinnes leeft niet voort in moderne plaatsnamen.",watWasHier:"Castellum aan de Waal. Vermeld op Peutingerkaart.",watTeZien:"Locatie opgegraven. Museum Bommelerwaard.",verwachteVondsten:"Militaria, munten, aardewerk, bouwmateriaal.",betekenis:"Verbinding antieke bronnen met archeologische locatie.",bronnen:[]},"Wachttoren Heumen":{naam:"Wachttoren Heumen",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren bij Heumen ten zuiden van Nijmegen. Onderdeel van het signaleringssysteem langs de Maas en verbindingswegen. De torens stonden op strategische punten met goed uitzicht. Bij nadering van vijanden werden signalen gegeven naar de grotere forten. Kleine bezetting van 4-8 soldaten die in de toren woonden. De exacte locatie is archeologisch vastgesteld. Vondsten: militaria, aardewerk, persoonlijke bezittingen.",watWasHier:"Signaleertoren met klein garnizoen. Uitzichtpunt.",watTeZien:"Locatie bekend maar geen zichtbare resten.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Onderdeel communicatienetwerk Romeins leger.",bronnen:[]},"Castellum Huissen?":{naam:"Castellum Huissen",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Huissen aan de Rijn. Het bestaan is niet zeker vastgesteld, vandaar het vraagteken. Huissen ligt op een logische plek tussen de bekende forten bij Arnhem en Zevenaar. Vondsten in de omgeving wijzen op Romeinse activiteit. De moderne bebouwing maakt onderzoek lastig. Als er een fort was, bewaakte het de rivierroute en mogelijk een oversteekplaats.",watWasHier:"Mogelijk castellum aan de Rijn. Bestaan onzeker.",watTeZien:"Geen resten zichtbaar. Gebied bebouwd.",verwachteVondsten:"Romeinse vondsten die fortaanwezigheid zouden bevestigen.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Castellum Kessel-Lith":{naam:"Kessel-Lith",type:"castellum",periode:"3e - 4e eeuw n.Chr.",beschrijving:"Laat-Romeins castellum uit de 3e-4e eeuw bij Kessel-Lith aan de Maas. Gebouwd in een periode van Germaanse invallen toen de oude Limes niet meer te handhaven was. Dit type forten was compacter en zwaarder versterkt dan de vroege castella. De locatie bij een rivierovergang bleef strategisch. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Het fort toont de veranderde militaire strategie van het late Romeinse Rijk.",watWasHier:"Laat-Romeins fort, compacter en zwaarder versterkt.",watTeZien:"Locatie bekend, weinig zichtbaar.",verwachteVondsten:"Laat-Romeinse munten, gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont Romeinse aanpassing aan nieuwe dreigingen.",bronnen:[]},Carvo:{naam:"Carvo",latinNaam:"Carvo",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke Romeinse versterking nabij Kesteren in de Betuwe. De naam komt voor op de Peutingerkaart. Kesteren lag in het hart van het Bataafse stamgebied. De Bataven waren belangrijke bondgenoten van Rome en leverden beroemde cavalerie-eenheden. Een versterking hier zou zowel bescherming als controle bieden. De exacte locatie is niet vastgesteld. Vondsten in de regio tonen intensief Romeins-Bataafs contact: import-aardewerk, wapens, paardentuig.",watWasHier:"Vermoedelijke versterking in Bataafs kerngebied.",watTeZien:"Locatie onbekend.",verwachteVondsten:"Gemengd Romeins-Bataafse voorwerpen, paardentuig.",betekenis:"Zou Romeinse aanwezigheid in Bataafs gebied tonen.",bronnen:[]},Mannaricium:{naam:"Mannaricium",latinNaam:"Mannaricium",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Vermoedelijke locatie van het Romeinse castellum Mannaricium bij Maurik aan de Rijn. De naam komt voor op de Peutingerkaart. Het fort zou de rivierroute hebben bewaakt tussen Levefanum (Wijk bij Duurstede) en forten stroomopwaarts. De moderne plaats Maurik zou afgeleid kunnen zijn van Mannaricium. Bij bouwwerkzaamheden zijn Romeinse vondsten gedaan die op een fort wijzen. De exacte contouren zijn niet bekend.",watWasHier:"Vermoedelijk castellum aan de Rijn. Vermeld op Peutingerkaart.",watTeZien:"Geen zichtbare resten. Gebied bebouwd.",verwachteVondsten:"Militaria, aardewerk, munten bij bouwwerkzaamheden.",betekenis:"Mogelijke herkomst plaatsnaam Maurik.",bronnen:[]},Oostvoorne:{naam:"Castellum Oostvoorne",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de monding van de Waal en Maas, nu verdwenen in zee door kustafslag. Het fort bewaakte de zeeroute en beschermde tegen piraterij. De kust lag in de Romeinse tijd kilometers verder westwaarts. Door zeespiegelstijging en erosie is het fort in de golven verdwenen. Na stormen spoelen soms vondsten aan op de stranden van Voorne-Putten: munten, aardewerk, metalen voorwerpen. De Brittenburg bij Katwijk was een soortgelijk lot beschoren.",watWasHier:"Kustfort bij riviermonding. Bewaking zeeroute.",watTeZien:"Fort verdwenen in zee. Soms strandvondsten na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen op strand.",betekenis:"Toont voormalige kustlijn en Romeinse kustverdediging.",bronnen:[]},"Castellum Randwijk":{naam:"Castellum Randwijk",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Randwijk aan de Rijn in de Betuwe. Het bestaan en de exacte locatie zijn onzeker. De rivier heeft veel oude resten weggespoeld. Randwijk ligt tussen bekende fortlocaties wat een fort hier logisch zou maken. In de uiterwaarden zijn bij erosie Romeinse vondsten gedaan. Het dynamische rivierlandschap maakt onderzoek lastig maar kan ook vondsten blootleggen na hoog water.",watWasHier:"Mogelijk castellum. Bestaan en locatie onzeker.",watTeZien:"Geen zichtbare resten. Uiterwaarden.",verwachteVondsten:"Mogelijk vondsten na erosie of hoog water.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Versterking Scheveningseweg":{naam:"Minifort Scheveningseweg",type:"minifort",periode:"2e eeuw n.Chr.",beschrijving:"Vermoede locatie van een klein Romeins kustfort bij de Scheveningseweg in Den Haag, vergelijkbaar met het nabije Minifort Ockenburg. Dit type miniforten bewaakte de kust tegen piraten en Germaanse raids over zee. Ruimte voor 20-30 soldaten. De exacte locatie is niet vastgesteld maar vondsten in de omgeving suggereren Romeinse militaire aanwezigheid. Het zou aantonen dat de gehele Noordzeekust werd bewaakt, niet alleen de riviermonding.",watWasHier:"Vermoedelijk klein kustfort zoals Ockenburg. 20-30 soldaten.",watTeZien:"Locatie niet vastgesteld.",verwachteVondsten:"Militaria, aardewerk 2e eeuw indien locatie gevonden.",betekenis:"Zou Romeinse kustverdediging Den Haag bevestigen.",bronnen:[]},"Tongeren - Sacramentstraat":{naam:"Atuatuca Tungrorum",latinNaam:"Atuatuca Tungrorum / Municipium Tungrorum",type:"legerkamp",periode:"ca. 10 v.Chr. - 400 n.Chr.",beschrijving:"Oudste stad van Belgi, gesticht ca. 10 v.Chr. Hoofdstad van de Civitas Tungrorum - met 150 hectare de grootste civitas van Noordwest-Europa! Strategisch gelegen op de weg Boulogne-Bavay-Keulen. Onder keizer Trajanus (2e eeuw) ommuurd met meer dan 4,5 km muren en tot 3 grachten - waarvan nog 1,5 km staat! Een 1e-eeuwse buste van Julius Caesar is een topstuk. Het Gallo-Romeins Museum (Europees Museum van het Jaar 2011) toont een schat aan vondsten: beelden, steles, sieraden, architectuurelementen. Ook de Romeinse muren, het tempelcomplex, het aquaduct van Beukenberg en tumuli zijn te bezoeken.",watWasHier:"Civitas-hoofdstad Tungri (150 ha). 4,5 km stadsmuur. Politiek en religieus centrum.",watTeZien:"Gallo-Romeins Museum. Romeinse muren (1,5 km). Tempelcomplex. Aquaduct Beukenberg. Tumuli.",verwachteVondsten:"Stadsaardewerk, bouwmateriaal, munten, inscripties, religieuze objecten.",betekenis:"Oudste stad van Belgi. Grootste civitas van Noordwest-Europa.",bronnen:["https://www.galloromeinsmuseum.be","https://www.canonvanvlaanderen.be/en/events/tongeren-a-roman-town/"]},"Valkenburg-Marktveld, mini-castellum":{naam:"Marktveld Valkenburg",type:"minifort",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Klein Romeins castellum met wachttoren bij het Marktveld in Valkenburg (Zuid-Holland), nabij het grotere Praetorium Agrippinae. Dit type miniforten vulde de ruimtes tussen de grote castella op. Wachttoren voor signalering en kleine bezetting voor patrouilles. De combinatie van toren en klein fort was effectief voor grensbewaking. Bij opgravingen zijn de contouren vastgesteld. Vondsten in Archeologisch Steunpunt Valkenburg.",watWasHier:"Klein fort met wachttoren. Aanvulling op Praetorium Agrippinae.",watTeZien:"Archeologisch Steunpunt Valkenburg.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Toont gelaagdheid Romeinse grensverdediging.",bronnen:[]},"Wachttoren a":{naam:"Wachttoren Utrecht-West",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Een van meerdere Romeinse wachttorens in de omgeving van Utrecht, onderdeel van het signaleringssysteem langs de Limes. De torens stonden om de 1-2 kilometer met zicht op elkaar. Bij nadering van vijanden werden vuur- of rooksignalen gegeven. Binnen minuten kon de hele grens gewaarschuwd zijn. Kleine houten constructie op aarden verhoging met bezetting van 4-8 soldaten. Vondsten zijn schaars door de kleine schaal.",watWasHier:"Houten signaleertoren. 4-8 soldaten.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Kleine hoeveelheden aardewerk en militaria.",betekenis:"Onderdeel vroegwaarschuwingssysteem.",bronnen:[]},"Wachttoren b":{naam:"Wachttoren Utrecht-Oost",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren ten oosten van Utrecht, onderdeel van de keten signaleertorens langs de Rijn. Elke toren had zichtlijn naar de volgende. Dit systeem maakte snelle communicatie mogelijk in een tijd zonder telegraaf of telefoon. De soldaten woonden in of bij de toren en hielden permanent wacht. Bij gevaar werden brandende fakkels of rookpotten gebruikt. De locatie is archeologisch vastgesteld maar niet zichtbaar.",watWasHier:"Signaleertoren in torenketen. Permanente wacht.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, militaria, persoonlijke bezittingen.",betekenis:"Onderdeel communicatienetwerk Limes.",bronnen:[]},"Wachttoren c":{naam:"Wachttoren Hoge Woerd",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren nabij Castellum Op de Hoge Woerd, onderdeel van het signaleringssysteem. Torens bij forten dienden als vooruitgeschoven posten en waarschuwingsplaatsen. De combinatie van fort met omringende torens was de standaard Romeinse grensverdediging. Het Archeologisch Park Hoge Woerd geeft een goed beeld van hoe dit systeem functioneerde. De toren zelf is niet gereconstrueerd maar de context is te begrijpen.",watWasHier:"Signaleertoren bij castellum. Vooruitgeschoven post.",watTeZien:"Archeologisch Park Hoge Woerd toont context.",verwachteVondsten:"Aardewerk, militaria.",betekenis:"Toont samenhang fort en torens.",bronnen:[]},"Zwammerdam-Rijksstraatweg":{naam:"Zwammerdam-Rijksstraatweg",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke militaire nederzetting aan de Rijksstraatweg in Zwammerdam, naast het bekende Nigrum Pullum fort. Mogelijk een vicus (burgerdorp) of aparte militaire faciliteit. Bij Zwammerdam werden de beroemde Romeinse schepen gevonden. De hele zone langs de Oude Rijn was dicht bezet met militaire en civiele structuren. Vondsten wijzen op intensieve Romeinse activiteit: aardewerk, munten, militaria en door de natte veenbodem ook organisch materiaal.",watWasHier:"Mogelijk vicus of militaire faciliteit nabij Nigrum Pullum.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, munten, militaria, organisch materiaal.",betekenis:"Toont dichtheid Romeinse bewoning langs Oude Rijn.",bronnen:[]},"Kastell Aachen":{naam:"Aquae Granni",latinNaam:"Aquae Granni",type:"versterking",periode:"1e - 4e eeuw n.Chr.",beschrijving:'Romeinse kuuroord bij de hete bronnen (tot 75C!) gewijd aan Apollo en de Keltische geneesheer Grannos - "aan de wateren van Grannos". In de 1e eeuw uitgebouwd tot kurort voor de legioenen van Neder-Germani. Onder keizer Trajanus bouwden legioenen uit Xanten een aquaduct en thermen onder de huidige Dom. De Mnsterthermen hadden de indeling van een valetudinarium (Romeins hospitaal). Karel de Grote bouwde hier zijn Pfalz (793-813) en maakte Aken tot keizerlijke residentie - bewust als "vernieuwer van het Romeinse Rijk". De Dom (UNESCO 1978, eerste in Duitsland!) staat op Romeinse fundamenten. Karel stierf hier in 814.',watWasHier:"Kurort voor legioenen. Thermen. Later keizerlijke Pfalz van Karel de Grote.",watTeZien:"Dom (UNESCO). Centre Charlemagne. Thermen onder de stad.",verwachteVondsten:"Badhuisresten, inscripties, munten, Romeins en Karolingisch bouwmateriaal.",betekenis:"Ononderbroken bewoning van Romeinse tijd tot Karel de Grote. Eerste UNESCO-site Duitsland.",bronnen:["https://centre-charlemagne.eu/zeitreise/?lang=en","http://www.aquaegranni.de/","https://de.wikipedia.org/wiki/Aquae_Granni"]},Hazerswoude:{naam:"Hazerswoude-Rijndijk",type:"wachttoren",periode:"2e - 3e eeuw n.Chr.",beschrijving:"Bevestigde Romeinse wachtpost langs de Limesweg bij Hazerswoude-Rijndijk. Bij opgravingen in 2021-2023 door Vestigia BV en het Rijksmuseum van Oudheden zijn spectaculaire vondsten gedaan: resten van de houten Limesweg (eiken palen uit 124-125 n.Chr.), een Romeinse dam, en aanwijzingen voor een kleine wachtpost. Bijzondere vondsten: de eerste Romeinse mijlpaal in Nederland (2023), een muntschat met 22 zilveren munten (na 166 n.Chr.), aardewerk, mantelspelden, leren schoenzolen en ca. 40.000-50.000 objecten. De locatie ligt precies tussen Albaniana (Alphen) en Matilo (Leiden).",watWasHier:"Wachtpost langs de Limesweg. Houten wegdek uit 124-125 n.Chr.",watTeZien:"Opgravingen afgerond. Vondsten naar Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, munten, aardewerk. Gebied grotendeels onderzocht.",betekenis:"Eerste Romeinse mijlpaal in Nederland. Bevestigt trac Limesweg.",bronnen:["https://www.rmo.nl/onderzoek/opgravingsprojecten/hazerswoude/","https://www.vestigia.nl/opgraving-hazerswoude-in-samenwerking-met-het-rijksmuseum-van-oudheden-en-de-gemeente-alphen-aan-den-rijn/","https://romeinsalphen.nl/themas/romeinse-weg-hazerswoude-rijndijk"]},Albaniana:{naam:"Albaniana",latinNaam:"Albaniana",type:"castellum",periode:"41 - 275 n.Chr.",beschrijving:"Groot Romeins castellum bij Alphen aan den Rijn, een van de belangrijkste forten aan de Nederlandse Limes. Het fort werd gesticht in 41-42 n.Chr., kort na de dood van keizer Caligula. De locatie is nauwkeurig bekend: bij het Rijnplein en Theater Castellum aan de Castellumstraat. Het fort (80x120m) was beschermd door een omgrachte aarden wal. Bij opgravingen tussen 1950 en 2002 zijn uitgebreide resten gevonden. Door de natte bodem zijn veel houten structuren bewaard gebleven. Een bronzen maquette van het castellum staat op het Rijnplein.",watWasHier:"Castellum met vicus. Locatie bekend: Rijnplein/Castellumstraat.",watTeZien:"Bronzen maquette Rijnplein. Theater Castellum op fortlocatie. Archeon.",verwachteVondsten:"Munten, militaria, aardewerk, dakpannen, fibulae. Veel bij bouwwerkzaamheden.",betekenis:"Een van de hoofdforten aan de Limes. UNESCO Werelderfgoed.",bronnen:["https://www.hierisalphen.nl/home/ontdekken/romeinse-limes","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/alphen-aan-den-rijn","https://archeologiehuiszuidholland.nl/zien-en-doen/het-archeologiehuis/fort-aan-de-rijn"]}},pTt={naam:"Romeins fort",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse militaire versterking langs de Limes, de noordgrens van het Romeinse Rijk. Forten lagen om de 10-15 km langs de Rijn. Garnizoen van hulptroepen (auxilia) die de grens bewaakten tegen Germaanse invallen. Standaard rechthoekige plattegrond met houten of stenen muur, gracht, poorten en binnengebouwen (barakken, commandopost, graanopslagplaats, werkplaatsen). Buiten de muren vaak een vicus (burgerdorp) met handelaren en soldatenfamilies. Vondsten: munten, fibulae (mantelspelden), aardewerk, wapens, gereedschap. Onderdeel van UNESCO Werelderfgoed sinds 2021."},mTt={castellum:"Castellum (legerplaats)",wachttoren:"Wachttoren (signaalpost)",vlootbasis:"Vlootbasis (haven)",legerkamp:"Legerkamp (castra)",minifort:"Minifort (wachtpost)",versterking:"Versterking",villa:"Villa (militair gebruikt)"};lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function zae(t){if(!t)return t;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let n=t;return Object.entries(e).forEach(([r,i])=>{n=n.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),n=n.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),n}async function gTt(t){try{const e=$n(t),n=lr("EPSG:4326","EPSG:28992",e);if(n[0]<7e3||n[0]>3e5||n[1]<289e3||n[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${n[0]-r},${n[1]-r},${n[0]+r},${n[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,a=await(await fetch(s)).json();if(a.features&&a.features.length>0){const l=a.features[0].properties,c=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(c!=null){const u=typeof c=="number"?c:parseFloat(c);if(!isNaN(u))return u}}}catch(e){console.warn("AHN height query failed:",e)}return null}const yTt={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},vTt={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function Gae(t,e){const n=[],r=t.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?n.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&n.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?n.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?n.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?n.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&n.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?n.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?n.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&n.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?n.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&n.push("Zeekleiafzetting"),n}function _Tt(){const t=li(wt=>wt.map);gr(wt=>wt.isDrawingMode);const e=uc(wt=>wt.removeVondst),n=uc(wt=>wt.updateVondst),r=uc(wt=>wt.vondsten),{layers:i,addPoint:s,addLayer:o}=Vi(),[a,l]=Y.useState([]),[c,u]=Y.useState(0),[h,f]=Y.useState(!1),[g,y]=Y.useState(null),[_,b]=Y.useState(!1),[T,A]=Y.useState(!1),[C,I]=Y.useState(null),[R,V]=Y.useState(null),[P,N]=Y.useState(null),[L,O]=Y.useState(null),[F,G]=Y.useState(!1),[U,ue]=Y.useState(null),[be,ze]=Y.useState(null),[Ce,de]=Y.useState(null),[Le,xe]=Y.useState(!1),[Z,W]=Y.useState(""),[ne,se]=Y.useState([]),Q=ne[c]||null,[me,Ke]=Y.useState(()=>{const wt=localStorage.getItem("popupTextScale");return wt?parseInt(wt):100}),[Ye,ke]=Y.useState("half"),Ee=wt=>{Ke(wt),localStorage.setItem("popupTextScale",wt.toString())},Dt=a[c]||"",Xe=a.length>1,cn=wt=>{const Qn=wt.match(/<strong[^>]*>(.*?)<\/strong>/);if(Qn){const dr=Qn[1].replace(/<[^>]+>/g,""),Vt=wt.replace(Qn[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:dr,contentWithoutTitle:Vt}}return{title:"",contentWithoutTitle:wt}},jt=wt=>wt.replace(/class="([^"]*)"/g,(dr,Vt)=>{if(Vt.includes("text-xs")){const Dn=Vt.replace(/\btext-xs\b/g,"").trim();return Dn?`style="font-size:0.857em" class="${Dn}"`:'style="font-size:0.857em"'}if(Vt.includes("text-sm")){const Dn=Vt.replace(/\btext-sm\b/g,"").trim();return Dn?`class="${Dn}"`:""}return dr}).replace(/class=""/g,""),{title:gn,contentWithoutTitle:wn}=cn(Dt),pt=jt(wn),hr=Dt.includes("Landbouwperceel"),zn=Dt.includes("data-vondst-id="),Hn=()=>{u(wt=>(wt-1+a.length)%a.length)},ei=()=>{u(wt=>(wt+1)%a.length)},xo=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",g),!t||!g||T){console.log(" STOP - map:",!!t,"coord:",g,"loading:",T);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${g[0]}, ${g[1]}]`),A(!0);try{await Evt(t,g)&&b(!0)}catch(wt){console.error("Failed to load height map:",wt)}finally{A(!1)}},Rr=()=>{t&&(rG(t),b(!1))};Y.useEffect(()=>{if(!t)return;const wt=Vt=>{let Dn='<strong class="text-purple-800">AMK Monument</strong>';if(Vt.toponiem&&(Dn+=`<br/><span class="text-sm font-semibold">${Vt.toponiem}</span>`),Vt.kwaliteitswaarde&&(Dn+=`<br/><span class="text-sm text-purple-700">${Vt.kwaliteitswaarde}</span>`),Vt.omschrijving&&(Dn+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Vt.omschrijving}</span>`),Vt.txt_label){const tn=Vt.txt_label.split(", ").slice(0,3).join(", ");Dn+=`<br/><span class="text-xs text-gray-500 italic">${tn}${Vt.txt_label.split(", ").length>3?"...":""}</span>`}return Dn},Qn=async(Vt,Dn)=>{const tn=[],wo=t.getLayers().getArray().filter(Ui=>Ui instanceof Ff&&Ui.getVisible()?Ui.getSource()instanceof kRe:!1);for(const Ui of wo){const Fs=Ui.getSource();if(!Fs)continue;const Nn=Ui.get("title")||"";if(Nn.startsWith("Paleokaart"))continue;if(Nn==="Archeo Landschappen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve=le.landschapsnaam||le.naam||"Archeologisch Landschap",te=le.omschrijving||"";let ve=`<strong class="text-green-800">${Ve}</strong>`;te&&(ve+=`<br/><span class="text-sm text-gray-600">${te}</span>`),ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ve+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ve+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://www.cultureelerfgoed.nl/onderwerpen/bronnen-en-kaarten/overzicht/landschappenkaart" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Landschappenkaart</a></div>',ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Landschapstypen_van_Nederland" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Landschapstypen</a></div>',tn.push(ve)}}catch(qe){console.warn("Archeo Landschappen WMS query failed:",qe)}continue}if(Nn==="Essen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let Ve='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(le.naam||le.Naam||le.NAME)&&(Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${le.naam||le.Naam||le.NAME}</span>`),(le.type||le.Type||le.TYPE)&&(Ve+=`<br/><span class="text-xs text-gray-600">${le.type||le.Type||le.TYPE}</span>`),(le.omschrijving||le.Omschrijving)&&(Ve+=`<br/><span class="text-xs text-gray-500">${le.omschrijving||le.Omschrijving}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is een es?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Een es is een oud akkercomplex op hogere zandgronden. Eeuwenlang werden hier gewassen verbouwd. De bodem werd bemest met plaggen en mest, waardoor de grond donker en vruchtbaar werd.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Munten, gespen, knopen, aardewerk en soms bijzondere voorwerpen die door bemesting op het land terechtkwamen. Essen behoren tot de beste vindplaatsen voor metaaldetectie.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Conservering</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1 italic">De zure zandgrond tast metaal aan. IJzer en koper zijn vaak slecht bewaard. Zilver en brons houden zich beter.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Es_(geografie)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Es (geografie)</a></div>',tn.push(Ve)}}catch(qe){console.warn("Essen WMS query failed:",qe)}continue}if(Nn==="FAMKE Steentijd"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/2/query?geometry=${Ie[0]},${Ie[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Pe)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes;let X='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const le=Tt.BESCHR||"";le&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-amber-700 mt-1 font-medium">${le}</div>`);const Ve=Tt.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const te=Tt.BESCHRLINK||"";te&&(X+=`<div class="mt-3"><a href="${te}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>',tn.push(X)}}catch(qe){console.warn("FAMKE Steentijd query failed:",qe)}continue}if(Nn==="FAMKE IJzertijd"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/1/query?geometry=${Ie[0]},${Ie[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Pe)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes;let X='<strong class="text-orange-800">FAMKE IJzertijd-Middeleeuwen</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const le=Tt.BESCHR||"";le&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-orange-700 mt-1 font-medium">${le}</div>`);const Ve=Tt.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const te=Tt.BESCHRLINK||"";te&&(X+=`<div class="mt-3"><a href="${te}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de ijzertijd tot en met de middeleeuwen te verwachten zijn.</div>',tn.push(X)}}catch(qe){console.warn("FAMKE IJzertijd query failed:",qe)}continue}if(Nn==="Archeo Onderzoeken"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}&FEATURE_COUNT=20`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0)for(const le of X.features){const Ve=le.properties,te=Ve.type_onderzoek||"",ve=Ve.projectnaam||Ve.project_naam||Ve.naam||"",De=ve&&ve!=="-"&&ve.trim()!==""&&!/^\d+$/.test(ve.trim())?ve:"",He=Ve.gemeente||"",Ge=Ve.uitvoerder||"",Ze=Ve.onderzoeksmeldingnummer||"",nt=Ve.adres||Ve.straat||"";let Mt="Archeologisch Onderzoek";De?Mt=De:He&&nt?Mt=`${He} - ${nt}`:He&&(Mt=`Onderzoek ${He}`);let Gt=`<strong class="text-blue-800">${Mt}</strong>`;if(te&&(Gt+=`<br/><span class="text-sm font-semibold text-blue-700">${te}</span>`),He&&!Mt.includes(He)&&(Gt+=`<br/><span class="text-sm text-gray-700">${He}</span>`),nt&&!Mt.includes(nt)&&(Gt+=`<br/><span class="text-sm text-gray-600">${nt}</span>`),Ze&&(Gt+=`<br/><span class="text-xs text-gray-500 font-mono">OM: ${Ze}</span>`),Ge&&(Gt+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${Ge}</span>`),Ve.startdatum||Ve.einddatum){const ie=[Ve.startdatum,Ve.einddatum].filter(Boolean).join(" - ");Gt+=`<br/><span class="text-xs text-gray-600">Periode: ${ie}</span>`}const _n=[];Ve.periode_paleolithicum&&_n.push("Paleolithicum"),Ve.periode_mesolithicum&&_n.push("Mesolithicum"),Ve.periode_neolithicum&&_n.push("Neolithicum"),Ve.periode_bronstijd&&_n.push("Bronstijd"),Ve.periode_ijzertijd&&_n.push("IJzertijd"),Ve.periode_romeins&&_n.push("Romeins"),Ve.periode_middeleeuwen&&_n.push("Middeleeuwen"),Ve.periode_nieuwe_tijd&&_n.push("Nieuwe tijd"),_n.length>0&&(Gt+=`<br/><span class="text-sm text-purple-700">Datering: ${_n.join(", ")}</span>`),Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',te.toLowerCase().includes("opgraving")?Gt+='<div class="text-sm text-gray-700 mt-1">Hier is een archeologische opgraving gedaan. Professionele archeologen hebben vondsten en sporen gedocumenteerd en geborgen.</div>':te.toLowerCase().includes("bureauonderzoek")?Gt+='<div class="text-sm text-gray-700 mt-1">Een bureauonderzoek naar de archeologische verwachting op basis van historische bronnen en kaarten.</div>':te.toLowerCase().includes("booronderzoek")?Gt+='<div class="text-sm text-gray-700 mt-1">Met boringen is onderzocht wat er in de grond zit. Vaak de eerste stap om te bepalen of er verder onderzoek nodig is.</div>':te.toLowerCase().includes("proefsleuven")?Gt+='<div class="text-sm text-gray-700 mt-1">Proefsleuven zijn gegraven om te kijken of er archeologische sporen in de grond zitten.</div>':te.toLowerCase().includes("begeleiding")?Gt+='<div class="text-sm text-gray-700 mt-1">Archeologische begeleiding bij graafwerk. Een archeoloog was aanwezig om te controleren of er vondsten naar boven kwamen.</div>':te.toLowerCase().includes("inventariserend")||te.toLowerCase().includes("karterend")?Gt+='<div class="text-sm text-gray-700 mt-1">Verkennend onderzoek om te bepalen of er archeologische resten in de grond kunnen zitten.</div>':Gt+='<div class="text-sm text-gray-700 mt-1">Op deze locatie is archeologisch onderzoek uitgevoerd. De resultaten zijn opgeslagen in het landelijke archief.</div>',Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Interessant voor detectie?</span></div>',Gt+='<div class="text-sm text-gray-700 mt-1 italic">Onderzoekslocaties kunnen interessant zijn: archeologen vinden vaak niet alles. Maar check altijd eerst of je daar mag zoeken.</div>',Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Rapport opzoeken</span></div>';let q="";if(De?q=De:Ge&&He?q=`${Ge} ${He}`:He&&(q=He),q){const ie=q.length>35?q.substring(0,35)+"...":q;Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archaeology.datastations.nl/dataverse/root?q=${encodeURIComponent(q)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek "${ie}" in DANS</a></div>`,Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://scholar.google.nl/scholar?q=${encodeURIComponent(q+" archeologisch rapport")}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek in Google Scholar</a></div>`}Ze&&(Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archis.cultureelerfgoed.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek OM ${Ze} in ARCHIS</a> <span class="text-xs text-gray-400">(account nodig)</span></div>`),tn.push(Gt)}}catch(qe){console.warn("Archeo Onderzoeken WMS query failed:",qe)}continue}if(Nn==="IKAW"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=500,z=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve=Math.round(le.PALETTE_INDEX||le.palette_index||0),te=vTt[Ve]||`Trefkans onbekend (${Ve})`;let ve='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';ve+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ve+=`<div class="text-sm text-orange-700 mt-1">${te}</div>`;const He={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[Ve];He&&(ve+=`<div class="text-sm ${He.kleur} mt-1">${He.tekst}</div>`,ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ve+=`<div class="text-sm text-gray-700 mt-1">${He.vondsten}</div>`),ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',ve+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',tn.push(ve)}}catch(qe){console.warn("IKAW WMS query failed:",qe)}continue}if(Nn==="Inundatiegebieden"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let Ve='<strong class="text-blue-800">Inundatiegebied</strong>';(le["linie-naam"]||le.linie_naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-blue-700">${le["linie-naam"]||le.linie_naam}</span>`),le.naam&&(Ve+=`<br/><span class="text-sm text-gray-700">${le.naam}</span>`),le.periode&&(Ve+=`<br/><span class="text-xs text-gray-500">${le.periode}</span>`),le.lin_period&&(Ve+=`<br/><span class="text-xs text-gray-400">${le.lin_period}</span>`),tn.push(Ve)}}catch(qe){console.warn("Inundatiegebieden WMS query failed:",qe)}continue}if(Nn==="Militaire Objecten"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve=le.obj_soort||"",te=le.obj_naam||"",ve=le.lin_period||"",De=le["linie-naam"]||le.linie_naam||"";let He=Ve||"Militair Object",Ge="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",Ze="";const nt=Ve.toLowerCase();nt.includes("fort")?(Ge="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",Ze="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):nt.includes("schans")?(Ge="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",Ze="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):nt.includes("batterij")||nt.includes("battery")?(Ge="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",Ze="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):nt.includes("bunker")||nt.includes("kazemat")?(Ge="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",Ze="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):nt.includes("sluis")||nt.includes("inlaatwerk")?(Ge="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",Ze="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):nt.includes("toren")||nt.includes("wachttoren")?(Ge="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",Ze="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):nt.includes("kazerne")&&(Ge="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",Ze="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let Mt=`<strong class="text-stone-800">${He}</strong>`;te&&(Mt+=`<br/><span class="text-sm font-semibold text-stone-700">${te}</span>`),De&&(Mt+=`<br/><span class="text-sm text-blue-600">${De}</span>`),ve&&(Mt+=`<br/><span class="text-xs text-gray-500">${ve}</span>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,Ze&&(Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${Ze}</div>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Mt+='<div class="text-sm text-gray-700 mt-1">',Mt+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',Mt+="</div>",tn.push(Mt)}}catch(qe){console.warn("Militaire Objecten WMS query failed:",qe)}continue}if(Nn==="Verdedigingslinies"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let Ve='<strong class="text-amber-800">Verdedigingslinie</strong>';const te={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},ve=le.naam||le.lin_naam||"";if(ve){Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ve}</span>`;const De=Object.entries(te).find(([He])=>ve.toLowerCase().includes(He.toLowerCase())||He.toLowerCase().includes(ve.toLowerCase()));De&&(Ve+=`<br/><span class="text-sm text-gray-700">${De[1]}</span>`)}le.lin_period&&(Ve+=`<br/><span class="text-xs text-purple-600">${le.lin_period}</span>`),le.status&&(Ve+=`<br/><span class="text-xs text-gray-400">${le.status}</span>`),tn.push(Ve)}}catch(qe){console.warn("Verdedigingslinies WMS query failed:",qe)}continue}if(Nn==="Rijksmonumenten"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let Ve='<strong class="text-red-800">Rijksmonument</strong>';(le.cbsNaam||le.cbs_naam)&&(Ve+=`<br/><span class="text-sm font-semibold">${le.cbsNaam||le.cbs_naam}</span>`),le.hoofdcategorie&&(Ve+=`<br/><span class="text-sm text-red-700">${le.hoofdcategorie}</span>`),le.subcategorie&&(Ve+=`<br/><span class="text-xs text-gray-600">${le.subcategorie}</span>`),le.rijksmonumentnummer&&(Ve+=`<br/><span class="text-xs text-gray-500">Nr: ${le.rijksmonumentnummer}</span>`),(le.bouwjaar||le.oorspronkelijkebouwjaar)&&(Ve+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${le.bouwjaar||le.oorspronkelijkebouwjaar}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',le.rijksmonumentnummer&&(Ve+=`<div class="text-sm text-gray-700 mt-1"><a href="https://monumentenregister.cultureelerfgoed.nl/monumenten/${le.rijksmonumentnummer}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk in Monumentenregister</a></div>`),Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Rijksmonument" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Rijksmonument</a></div>',tn.push(Ve)}}catch(qe){console.warn("Rijksmonumenten WMS query failed:",qe)}continue}if(Nn==="Werelderfgoed"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=500,z=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let Ve='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(le.siteName||le.naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-cyan-700">${le.siteName||le.naam}</span>`),le.siteDesignation&&(Ve+=`<br/><span class="text-xs text-gray-600">${le.siteDesignation}</span>`),tn.push(Ve)}}catch(qe){console.warn("Werelderfgoed WMS query failed:",qe)}continue}if(Nn==="Terpen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=`https://geoportaal.fryslan.nl/arcgis/rest/services/ProvinciaalGeoRegister/PGR2/MapServer/66/query?geometry=${Ie[0]},${Ie[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=SOORT,SHAPE_Area&returnGeometry=false&f=json`,z=await(await fetch(Pe)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes,X=Tt.SOORT||"Terp",le=Tt.SHAPE_Area?Math.round(Tt.SHAPE_Area):null;let Ve="",te="",ve=!1;try{const Mt=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-100},${Ie[1]-100},${Ie[0]+100},${Ie[1]+100}`}`,_n=await(await fetch(Mt)).json();if(_n.features&&_n.features.length>0){const q=_n.features[0].properties;Ve=q.siteName||q.naam||"",te=q.inspireId||q.monumentnummer||"",ve=!0}}catch{}let De="";Ve?(De=`<strong class="text-orange-800">${Ve}</strong>`,De+=`<br/><span class="text-sm text-orange-600 font-medium">${X}</span>`):De=`<strong class="text-orange-800">${X}</strong>`,De+='<br/><span class="text-sm text-gray-600">Friese terp (woonheuvel)</span>';const Ge={terp:{uitleg:"Een kunstmatige woonheuvel waar mensen woonden om droge voeten te houden.",periode:"IJzertijd tot Middeleeuwen"},"afgegraven terp":{uitleg:"Deze terp is deels of geheel afgegraven voor de vruchtbare grond (terpaarde).",periode:"Oorspronkelijk IJzertijd-Middeleeuwen"},terprestant:{uitleg:"Hier lag ooit een terp, waarvan nu alleen nog resten over zijn.",periode:"IJzertijd tot Middeleeuwen"},"deels afgegraven terp":{uitleg:"Een deel van deze terp is afgegraven, een deel is nog intact.",periode:"IJzertijd tot Middeleeuwen"},"verhoogd kerkhof":{uitleg:"Een verhoogd kerkhof, vaak op een oude terplocatie gebouwd.",periode:"Middeleeuwen"},kerkterp:{uitleg:"Een terp met daarop een kerk, vaak het centrum van een terpdorp.",periode:"IJzertijd tot heden"}}[X.toLowerCase()]||{uitleg:"Een kunstmatige woonheuvel uit de tijd dat dit gebied vaak overstroomde.",periode:"IJzertijd tot Middeleeuwen"};if(De+=`<div class="mt-2 text-sm text-gray-700">${Ge.uitleg}</div>`,De+=`<br/><span class="text-sm text-gray-600">Periode: ${Ge.periode}</span>`,le&&le>100){const Ze=(le/1e4).toFixed(1);De+=`<br/><span class="text-sm text-gray-500">Oppervlak: ${Ze} hectare</span>`}if(ve&&(De+='<div class="mt-2 p-2 bg-orange-100 rounded text-xs text-orange-800">',De+="<strong> Rijksmonument</strong> - Deze terp is wettelijk beschermd. Detecteren is niet toegestaan zonder vergunning.",te&&(De+=`<br/>Monumentnummer: ${te}`),De+="</div>"),De+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',De+="<strong>Detectietip:</strong> ",X.toLowerCase().includes("afgegraven")?De+="Afgegraven terpen zijn interessant! Bij het afgraven kwam materiaal aan de oppervlakte. Zoek op akkers rond de oude terplocatie.":De+="Terpen zijn rijk aan vondsten: aardewerk, munten, fibulae, botten, gereedschap. De grond is vaak donker en vruchtbaar door eeuwenlange bewoning.",De+="</div>",De+='<div class="mt-3 space-y-1">',De+='<a href="https://www.terpenonderzoek.nl/" target="_blank" class="block text-blue-600 hover:underline text-sm">Terpenonderzoek.nl - Wetenschappelijk onderzoek</a>',De+='<a href="https://www.friesmuseum.nl/collectie/archeologie/" target="_blank" class="block text-blue-600 hover:underline text-sm">Fries Museum - Terpvondsten</a>',De+='<a href="https://nl.wikipedia.org/wiki/Terp" target="_blank" class="block text-blue-600 hover:underline text-sm">Wikipedia - Terpen</a>',Ve){const Ze=encodeURIComponent(Ve+" terp friesland");De+=`<a href="https://www.google.com/search?q=${Ze}" target="_blank" class="block text-blue-600 hover:underline text-sm">Zoek meer over ${Ve}</a>`}De+="</div>",tn.push(De)}}catch(qe){console.warn("Terpen query failed:",qe)}continue}if(Nn==="Religieus Erfgoed"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve=le.naam||le.NAAM||le.name||le.NAME||"Onbekend",te=le.denominatie||le.DENOMINATIE||le.religie||"",ve=le.type||le.TYPE||le.functie||"",De=le.bouwjaar||le.BOUWJAAR||le.jaar||"",He=le.gemeente||le.GEMEENTE||le.plaats||"";let Ge=`<strong class="text-purple-800">${Ve}</strong>`;const Ze=ve.toLowerCase();let nt="Een religieus gebouw of heilige plek.",Mt="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";Ze.includes("kerk")||Ze.includes("church")?(nt="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",Mt="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):Ze.includes("kapel")||Ze.includes("chapel")?(nt="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",Mt="Devotionalia, munten, kruisjes, rozenkransen"):Ze.includes("synagoge")?(nt="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",Mt="Munten, knopen, kleine religieuze voorwerpen"):Ze.includes("klooster")||Ze.includes("monastery")?(nt="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",Mt="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):Ze.includes("toren")||Ze.includes("tower")?(nt="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",Mt="Munten, knopen, bouwmateriaal"):(Ze.includes("begraafplaats")||Ze.includes("cemetery"))&&(nt="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",Mt="Detecteren hier niet toegestaan"),te&&(Ge+=`<br/><span class="text-sm text-purple-600">${te}</span>`),ve&&(Ge+=`<br/><span class="text-sm text-gray-600">${ve}</span>`),De&&(Ge+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${De}</span>`),He&&(Ge+=`<br/><span class="text-xs text-gray-400">${He}</span>`),Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Ge+=`<div class="text-sm text-gray-700 mt-1">${nt}</div>`,Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ge+=`<div class="text-sm text-gray-700 mt-1">${Mt}</div>`,Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',Ze.includes("begraafplaats")?Ge+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':Ge+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',tn.push(Ge)}}catch(qe){console.warn("Religieus Erfgoed WMS query failed:",qe)}continue}if(Nn==="Gewaspercelen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,rn=`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`,z=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${rn}`,Tt=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${rn}`,[X,le]=await Promise.all([fetch(z),fetch(Tt).catch(()=>null)]),Ve=await X.json();if(Ve.features&&Ve.features.length>0){const te=Ve.features[0].properties;let ve='<strong class="text-green-800">Landbouwperceel</strong>';if((te.gewas||te.gewasnaam)&&(ve+=`<br/><span class="text-sm font-semibold text-green-700">${te.gewas||te.gewasnaam}</span>`),(te.categorie||te.category)&&(ve+=`<br/><span class="text-xs text-gray-600">${te.categorie||te.category}</span>`),te.oppervlakte&&(ve+=`<br/><span class="text-xs text-gray-500">${te.oppervlakte} ha</span>`),le)try{const De=await le.json();if(De.features&&De.features.length>0){const He=De.features[0].properties,Ge=He.first_soilname||He.soilname||He.bodemtype,Ze=He.first_soilcode||He.soilcode||He.maparea_soilcode;if(Ge){ve+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${Ge}</span>`;const nt=Gae(Ge,Ze);nt.length>0&&(ve+=`<br/><span class="text-xs text-gray-500 italic">${nt.join("  ")}</span>`)}}}catch{}tn.push(ve)}}catch(qe){console.warn("BRP Gewaspercelen WMS query failed:",qe)}continue}if(Nn==="Kadastrale Grenzen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=20,z=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve=le.kadastraleGemeenteWaarde||le.kadastrale_gemeente_waarde||le.kadastraleGemeente||yTt[String(le.kadastraleGemeenteCode)]||le.kadastraleGemeenteCode,te=le.sectie||le.Sectie||"",ve=le.perceelnummer||le.perceelNummer||le.Perceelnummer||"",De=le.kadastraleGrootteWaarde||le.kadastrale_grootte_waarde||le.kadastraleGrootte||le.oppervlakte,He=le.AKRKadastraleGemeenteCodeWaarde||le.akrKadastraleGemeenteCodeWaarde||"",Ge=[Ve,te,ve].filter(Boolean).join(" "),Ze=He&&te&&ve?`${He}-${te}-${ve}`:"";let nt='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(Ge&&(nt+=`<br/><span class="text-sm text-indigo-700">${Ge}</span>`),Ze&&(nt+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${Ze}</span>`),De){const Mt=typeof De=="number"?De:parseFloat(De);isNaN(Mt)||(nt+=`<br/><span class="text-xs text-gray-600">${Mt.toLocaleString("nl-NL")} m</span>`)}nt+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',tn.push(nt)}}catch(qe){console.warn("Kadastrale Grenzen WMS query failed:",qe)}continue}if(Nn==="Scheepswrakken"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-cyan-800">${le.naam||le.NAAM||"Scheepswrak"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Historisch scheepswrak in Zuid-Holland</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Op deze plek ligt een oud scheepswrak. Dit is een schip dat lang geleden is gezonken. ",te+="In de bodem kunnen nog resten van het schip en de lading liggen.",te+="</div>",(le.type||le.TYPE)&&(te+=`<br/><span class="text-sm text-cyan-700">Type: ${le.type||le.TYPE}</span>`),(le.datering||le.DATERING)&&(te+=`<br/><span class="text-sm text-gray-600">Periode: ${le.datering||le.DATERING}</span>`),(le.bron||le.BRON)&&(te+=`<br/><span class="text-xs text-gray-500">Bron: ${le.bron||le.BRON}</span>`),te+='<div class="mt-2 p-2 bg-cyan-50 rounded text-xs text-cyan-800">',te+="<strong>Detectietip:</strong> Bij scheepswrakken kun je bijzondere vondsten doen zoals scheepsonderdelen, munten, gereedschap en lading. Let op: vaak is een vergunning nodig.",te+="</div>",te+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',tn.push(te)}}catch(qe){console.warn("Scheepswrakken WMS query failed:",qe)}continue}if(Nn==="Woonheuvels ZH"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-orange-800">${le.naam||le.NAAM||"Woonheuvel"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Historische woonheuvel (terp)</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Een woonheuvel is een door mensen opgeworpen heuvel. Mensen woonden hierop om droge voeten te houden bij hoog water. ",te+="Deze heuvels werden steeds hoger gemaakt. Je vindt ze vooral in laaggelegen gebieden.",te+="</div>",(le.type||le.TYPE)&&(te+=`<br/><span class="text-sm text-orange-700">Type: ${le.type||le.TYPE}</span>`),te+='<div class="mt-2 p-2 bg-orange-50 rounded text-xs text-orange-800">',te+="<strong>Detectietip:</strong> Woonheuvels zijn rijk aan vondsten! Denk aan aardewerk, munten, sieraden en huisraad uit de middeleeuwen. De grond bevat vaak veel materiaal.",te+="</div>",te+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',tn.push(te)}}catch(qe){console.warn("Woonheuvels WMS query failed:",qe)}continue}if(Nn==="Romeinse Forten"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-red-800">${le.naam||le.NAAM||"Romeins Fort"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Romeins militair fort (castellum)</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Dit was een Romeins legerfort. De Romeinen bouwden deze forten langs de Rijn, de grens van hun rijk. ",te+="Soldaten woonden hier en bewaakten de grens. Deze forten zijn ongeveer 2000 jaar oud.",te+="</div>",(le.type||le.TYPE)&&(te+=`<br/><span class="text-sm text-red-700">Type: ${le.type||le.TYPE}</span>`),(le.periode||le.PERIODE)&&(te+=`<br/><span class="text-sm text-gray-600">Periode: ${le.periode||le.PERIODE}</span>`),te+='<div class="mt-2 p-2 bg-red-50 rounded text-xs text-red-800">',te+="<strong>Detectietip:</strong> Romeinse forten zijn toplocaties! Je kunt hier Romeinse munten, fibulae (mantelspelden), militaire uitrusting en aardewerk vinden. Vaak beschermd, check de regels!",te+="</div>",te+='<div class="mt-2"><a href="https://www.limesworld.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over de Romeinse Limes</a></div>',tn.push(te)}}catch(qe){console.warn("Romeinse Forten WMS query failed:",qe)}continue}if(Nn==="Windmolens"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-amber-800">${le.naam||le.NAAM||"Windmolen"}</strong>`;if(te+='<br/><span class="text-sm text-gray-800">Historische windmolen</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Windmolens gebruikten de kracht van de wind. Ze maalden graan tot meel of pompten water weg uit polders. ",te+="Nederland heeft veel molens omdat we laaggelegen land droog moesten houden.",te+="</div>",le.type||le.TYPE||le.functie||le.FUNCTIE){const ve=le.functie||le.FUNCTIE||le.type||le.TYPE;te+=`<br/><span class="text-sm text-amber-700">Functie: ${ve}</span>`}(le.bouwjaar||le.BOUWJAAR)&&(te+=`<br/><span class="text-sm text-gray-600">Bouwjaar: ${le.bouwjaar||le.BOUWJAAR}</span>`),te+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',te+="<strong>Detectietip:</strong> Bij molens vind je vaak voorwerpen van de molenaar en bezoekers: munten, knopen, gereedschap. Ook de grond rond verdwenen molens kan interessant zijn.",te+="</div>",te+='<div class="mt-2"><a href="https://www.molendatabase.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Nederlandse molens</a></div>',tn.push(te)}}catch(qe){console.warn("Windmolens WMS query failed:",qe)}continue}if(Nn==="Erfgoedlijnen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-purple-800">${le.naam||le.NAAM||le.erfgoedlijn||"Erfgoedlijn"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Historische lijn in het landschap</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Een erfgoedlijn is een route of lijn met veel geschiedenis. Dit kunnen oude dijken, wegen, kanalen of verdedigingslinies zijn. ",te+="Langs deze lijnen vind je vaak bijzondere plekken.",te+="</div>",(le.type||le.TYPE)&&(te+=`<br/><span class="text-sm text-purple-700">Type: ${le.type||le.TYPE}</span>`),(le.omschrijving||le.OMSCHRIJVING)&&(te+=`<br/><span class="text-sm text-gray-600">${le.omschrijving||le.OMSCHRIJVING}</span>`),te+='<div class="mt-2 p-2 bg-purple-50 rounded text-xs text-purple-800">',te+="<strong>Detectietip:</strong> Erfgoedlijnen volgen oude routes waar mensen langskwamen. Denk aan munten, knopen, gespen en andere verloren voorwerpen. Dijken en wegen zijn vaak interessant.",te+="</div>",te+='<div class="mt-2"><a href="https://www.erfgoedlijnen.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Erfgoedlijnen</a></div>',tn.push(te)}}catch(qe){console.warn("Erfgoedlijnen WMS query failed:",qe)}continue}if(Nn==="Oude Kernen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-stone-800">${le.naam||le.NAAM||"Historische Kern"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Oude dorps- of stadskern</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Dit is het oude centrum van een dorp of stad. Hier woonden en werkten mensen al honderden jaren geleden. ",te+="De grond bevat vaak veel sporen van het verleden.",te+="</div>",(le.type||le.TYPE)&&(te+=`<br/><span class="text-sm text-stone-700">Type: ${le.type||le.TYPE}</span>`),(le.periode||le.PERIODE)&&(te+=`<br/><span class="text-sm text-gray-600">Periode: ${le.periode||le.PERIODE}</span>`),te+='<div class="mt-2 p-2 bg-stone-100 rounded text-xs text-stone-800">',te+="<strong>Detectietip:</strong> Oude kernen zijn rijk aan vondsten! Munten, knopen, sieraden, gereedschap en huisraad. Let op: detecteren is vaak niet toegestaan in beschermde kernen.",te+="</div>",te+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',tn.push(te)}}catch(qe){console.warn("Oude Kernen WMS query failed:",qe)}continue}if(Nn==="Relictenkaart Punten"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,Ve={KV:{naam:"Kasteel of Vesting",uitleg:"Een versterkt gebouw uit de middeleeuwen. Vaak zijn er nog resten in de grond."},K:{naam:"Kapel",uitleg:"Een klein kerkgebouw. Rond kapellen worden vaak religieuze voorwerpen gevonden."},KE:{naam:"Kerkhof",uitleg:"Historische begraafplaats. Respecteer deze plek en vraag altijd toestemming."},B:{naam:"Buitenhuis",uitleg:"Een landhuis van welgestelde families. Vaak met tuinen en bijgebouwen."},OB:{naam:"Oud Bebouwingsrelict",uitleg:"Resten van oude bebouwing. Hier stonden ooit huizen of boerderijen."},OV:{naam:"Oude Verkaveling",uitleg:"Historisch patroon van akkers en weilanden uit vroeger tijden."},NR:{naam:"Nijverheidsrelict",uitleg:"Plek waar vroeger ambacht of industrie was, zoals smederijen of molens."},GH:{naam:"Grafheuvel",uitleg:"Prehistorische begraafplaats. Beschermd monument - niet detecteren!"},BP:{naam:"Begraafplaats",uitleg:"Historische begraafplaats. Respecteer deze plek."},HH:{naam:"Havezate",uitleg:"Adellijk huis met landerijen. Interessant voor middeleeuwse vondsten."},RM:{naam:"Rosmolen",uitleg:"Molen aangedreven door paarden. Zeldzaam cultuurhistorisch object."},WM:{naam:"Windmolen",uitleg:"Historische windmolen. Vaak zijn funderingen nog zichtbaar."},PM:{naam:"Poldermolen",uitleg:"Molen voor waterbeheer. Belangrijk voor de waterhuishouding."},EK:{naam:"Eendenkooi",uitleg:"Plek om wilde eenden te vangen. Bijzonder cultuurlandschap."},SH:{naam:"Scholtenhoeve",uitleg:"Boerderij van een welgestelde boer. Vaak eeuwenoud."},SL:{naam:"Slot",uitleg:"Versterkt kasteel of adellijke woning."},MO:{naam:"Motte",uitleg:"Vroegmiddeleeuwse kasteelberg. Zeer interessant voor detectie."},BR:{naam:"Borg",uitleg:"Versterkte adellijke woning, typisch voor het noorden."}},te=le.type?.replace(/[0-9]/g,"")||"",ve=Ve[te]||{naam:le.type||"Cultuurhistorisch object",uitleg:"Een historisch relict in het Gelderse landschap."};let De=`<strong class="text-emerald-800">${ve.naam}</strong>`;De+='<br/><span class="text-sm text-gray-800">Gelders cultuurhistorisch relict</span>',le.streek&&(De+=`<br/><span class="text-sm text-gray-600">Streek: ${le.streek}</span>`),De+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',De+=`<div class="text-sm text-gray-700 mt-1">${ve.uitleg}</div>`,De+='<div class="mt-3"><a href="https://www.gelderland.nl/erfgoed" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Meer over Gelders erfgoed</a></div>',tn.push(De)}}catch(qe){console.warn("Relictenkaart Punten WMS query failed:",qe)}continue}if(Nn==="Relictenkaart Lijnen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,te={1:{naam:"Sprengenbeek",uitleg:"Kunstmatig aangelegde beek voor waterkracht. Vaak bij papiermolens."},2:{naam:"Oude waterloop",uitleg:"Historische beek of rivier. Langs waterlopen vind je vaak oude bewoningssporen."},3:{naam:"Doorgaande weg",uitleg:"Eeuwenoude handelsroute. Langs deze wegen gingen reizigers en handelaren."},4:{naam:"Hessenweg",uitleg:"Historische handelsweg naar Duitsland. Gebruikt door marskramers en kooplieden."},5:{naam:"Oude weg",uitleg:"Historische route door het landschap. Vaak al eeuwen in gebruik."},6:{naam:"Historische grens",uitleg:"Oude eigendoms- of gebiedsgrens. Soms gemarkeerd met grenspalen."},7:{naam:"Trekpad",uitleg:"Pad langs een kanaal waar paarden schepen trokken."},8:{naam:"Jaagpad",uitleg:"Pad langs water voor scheepvaart met paardentractie."}}[le.klasse]||{naam:"Historisch lijnrelict",uitleg:"Een lijnvormig historisch element in het landschap."};let ve=`<strong class="text-teal-800">${te.naam}</strong>`;ve+='<br/><span class="text-sm text-gray-800">Gelders lijnrelict</span>',ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ve+=`<div class="text-sm text-gray-700 mt-1">${te.uitleg}</div>`,ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip</span></div>',ve+='<div class="text-sm text-gray-700 mt-1">Langs oude wegen en waterlopen worden vaak vondsten gedaan. Mensen verloren er munten en voorwerpen.</div>',tn.push(ve)}}catch(qe){console.warn("Relictenkaart Lijnen WMS query failed:",qe)}continue}if(Nn==="Relictenkaart Vlakken"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=100,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties,te={1:{naam:"Oud agrarisch land",uitleg:"Gebied dat al voor 1850 als landbouwgrond werd gebruikt. Rijk aan geschiedenis."},2:{naam:"Jonge heideontginning",uitleg:"Heide die tussen 1850 en 1950 is ontgonnen voor landbouw."},3:{naam:"Open essencomplex",uitleg:"Historische akkers op hoge grond. Vaak eeuwenoud en rijk aan vondsten."},4:{naam:"Kampenlandschap",uitleg:"Landschap met kleine akkers omringd door houtwallen. Typisch voor Oost-Nederland."},5:{naam:"Heiderelict",uitleg:"Restant van het vroegere uitgestrekte heidelandschap. Vaak prehistorische vondsten."},6:{naam:"Oud bosrelict",uitleg:"Bos dat al in 1850 bestond. Oude bossen bevatten vaak cultuurhistorische resten."},7:{naam:"Stuifzandrelict",uitleg:"Overblijfsel van actief stuifzand. Vaak bij grafheuvels en prehistorische sites."},8:{naam:"Oud bouwland",uitleg:"Historische akkergrond. Boeren hebben hier eeuwenlang gewerkt."},9:{naam:"Historisch grasland",uitleg:"Oud weiland of hooiland. Vaak bij boerderijen en dorpen."},10:{naam:"Beekdal",uitleg:"Laagte langs een beek. Mensen woonden graag bij water."}}[le.klasse]||{naam:"Historisch landschap",uitleg:"Een waardevol cultuurlandschap in Gelderland."};let ve=`<strong class="text-lime-800">${te.naam}</strong>`;if(ve+='<br/><span class="text-sm text-gray-800">Gelders landschapsrelict</span>',le.st_area_shape_){const De=(le.st_area_shape_/1e4).toFixed(1);ve+=`<br/><span class="text-sm text-gray-600">${De} hectare</span>`}ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ve+=`<div class="text-sm text-gray-700 mt-1">${te.uitleg}</div>`,tn.push(ve)}}catch(qe){console.warn("Relictenkaart Vlakken WMS query failed:",qe)}continue}if(Nn==="Verdronken Dorpen"){try{const qe=$n(Vt),Ie=lr("EPSG:4326","EPSG:28992",qe),Pe=200,z=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ie[0]-Pe},${Ie[1]-Pe},${Ie[0]+Pe},${Ie[1]+Pe}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const le=X.features[0].properties;let te=`<strong class="text-blue-800">${le.naam||le.NAAM||"Verdronken dorp"}</strong>`;te+='<br/><span class="text-sm text-gray-800">Verdronken dorp in Zeeland</span>',te+='<div class="mt-2 text-sm text-gray-700">',te+="Dit dorp is lang geleden door de zee verzwolgen. Bij stormvloeden brak de zeedijk door en liep het land onder water. ",te+="De mensen vluchtten, maar hun huizen en bezittingen bleven achter. In de bodem liggen nog resten van dit dorp.",te+="</div>",(le.verdronken||le.VERDRONKEN||le.jaar||le.JAAR)&&(te+=`<br/><span class="text-sm text-blue-700">Verdronken in: ${le.verdronken||le.VERDRONKEN||le.jaar||le.JAAR}</span>`),(le.gemeente||le.GEMEENTE)&&(te+=`<br/><span class="text-sm text-gray-600">Gemeente: ${le.gemeente||le.GEMEENTE}</span>`),(le.bron||le.BRON)&&(te+=`<br/><span class="text-xs text-gray-500">Bron: ${le.bron||le.BRON}</span>`),te+='<div class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-800">',te+="<strong>Detectietip:</strong> Verdronken dorpen bevatten veel vondsten! Aardewerk, munten, sieraden, gereedschap en huisraad. Bij laag water komen soms stukken vrij. Let op getijden en veiligheid!",te+="</div>",te+='<div class="mt-2"><a href="https://www.verdronkengeschiedenis.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over verdronken dorpen</a></div>',tn.push(te)}}catch(qe){console.warn("Verdronken Dorpen WMS query failed:",qe)}continue}const Ci=Fs.getFeatureInfoUrl(Vt,Dn,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Ci)try{const Ie=await(await fetch(Ci)).json();if(Ie.features&&Ie.features.length>0){const Pe=Ie.features[0].properties;if(Nn==="AHN 0.5m"){let X='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const le=Pe.value_list??Pe.GRAY_INDEX??Pe.value??Pe.gray_index??Pe.dtm_05m??Pe.DTM_05M??Pe.hoogte??Pe.HOOGTE??Pe.elevation??Pe.ELEVATION;if(le!=null&&!isNaN(Number(le))){const Ve=typeof le=="number"?le.toFixed(2):Number(le).toFixed(2);X+=`<br/><span class="text-sm text-blue-700">Hoogte: ${Ve} m NAP</span>`,tn.push(X)}else{let Ve=!1;const te=["geometry","id","fid","gml_id","bbox"];for(const[ve,De]of Object.entries(Pe))!te.includes(ve.toLowerCase())&&De!==null&&De!==""&&(X+=`<br/><span class="text-xs text-gray-600">${ve}: ${De}</span>`,Ve=!0);Ve&&tn.push(X)}continue}if(Nn==="Geomorfologie"){let X='<strong class="text-green-800">Geomorfologie</strong>',le=!1;const Ve=Pe.landform_subgroup_description,te=Pe.relief_klasse,ve=Pe.relief_subklasse,De=Pe.genese_description,He=Pe.active_process;if(Ve&&(X+=`<br/><span class="text-sm text-green-700">${Ve}</span>`,le=!0),te){const Ge=ve&&ve!==te?`${te} (${ve})`:te;X+=`<br/><span class="text-xs text-gray-600">Relief: ${Ge}</span>`,le=!0}if(De&&(X+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${De}</span>`,le=!0),He&&He!=="onbekend"&&(X+=`<br/><span class="text-xs text-gray-500">Actief proces: ${He}</span>`,le=!0),!le){const Ge=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[Ze,nt]of Object.entries(Pe))!Ge.includes(Ze.toLowerCase())&&nt!==null&&nt!==""&&!Ze.includes("validfrom")&&!Ze.includes("validto")&&(X+=`<br/><span class="text-xs text-gray-600">${Ze}: ${nt}</span>`)}X+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',tn.push(X);continue}let rn=`<strong>${Nn}</strong>`;const z=Pe.first_soilname||Pe.soilname,Tt=Pe.soilcode||Pe.first_soilcode;if(z&&(rn+=`<br/><span class="text-sm text-amber-700">${z}</span>`,Nn==="Bodemkaart")){const X=Gae(z,Tt);X.length>0&&(rn+=`<br/><span class="text-xs text-gray-500 italic">${X.join("  ")}</span>`)}if(Pe.soilslope&&Pe.soilslope!=="Niet opgenomen"&&(rn+=`<br/><span class="text-xs text-gray-500">Helling: ${Pe.soilslope}</span>`),!z){const X=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[le,Ve]of Object.entries(Pe))!X.includes(le)&&Ve&&Ve!=="Niet opgenomen"&&(rn+=`<br/><span class="text-xs text-gray-600">${le}: ${Ve}</span>`)}tn.push(rn)}}catch(qe){console.warn("WMS GetFeatureInfo failed:",qe)}}return tn},dr=async Vt=>{if(gr.getState().isDrawingMode)return;const Dn=[],tn=[],wo=Ie=>{if(!Ie)return;const Pe=Ie.getType(),z=Ie.clone().transform("EPSG:3857","EPSG:4326").getCoordinates();return{type:Pe,coordinates:z}},Ui=gTt(Vt.coordinate),Fs=[];t.forEachFeatureAtPixel(Vt.pixel,Ie=>{Fs.push(Ie)});for(const Ie of Fs){const Pe=Ie.getProperties(),{geometry:rn,...z}=Pe;if(z.vondst){const te=z.vondst,ve=`<strong>${te.objectType}</strong>
            <div data-vondst-id="${te.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${te.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${te.period}</span>
            ${te.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${te.depth} cm</span>`:""}
            ${te.condition&&te.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${te.condition}</span>`:""}
            ${te.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${te.weight} gram</span>`:""}
            ${te.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${te.notes}</span>`:""}
            ${te.photoUrl?`<br/><a href="${te.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(te.timestamp).toLocaleDateString("nl-NL")}</span>`;Dn.push(ve),tn.push(null),I(te.id);continue}if(z.layerType==="customPoint"&&z.customPoint){const te=z.customPoint,ve=z.customLayerName||"Mijn Laag",De=z.customLayerColor||"#f97316";let He="";if(te.popupContent?(He=`<div class="flex items-center gap-2 mb-2 pb-2 border-b border-gray-100">
              <span class="w-3 h-3 rounded-full flex-shrink-0" style="background-color: ${De}"></span>
              <span class="text-xs font-medium" style="color: ${De}">${ve}</span>
            </div>`,He+=te.popupContent):(He=`<strong>${te.name}</strong>`,He+=`<br/><span class="text-xs text-gray-500">${ve}</span>`,te.category&&te.category!=="Overig"&&(He+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${te.category}</span>`)),te.photos&&te.photos.length>0){He+='<div class="flex flex-wrap gap-1 my-2">';for(const Ge of te.photos.slice(0,3)){const Ze=Ge.thumbnailUrl||Ge.thumbnailBase64;Ze&&(He+=`<img src="${Ze}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}te.photos.length>3&&(He+=`<span class="text-xs text-gray-400 self-end">+${te.photos.length-3} meer</span>`),He+="</div>"}te.notes&&!te.popupContent&&(He+=`<br/><span class="text-sm text-gray-600 mt-1">${te.notes}</span>`),te.url&&(He+=`<br/><a href="${te.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),He+=`<br/><span class="text-xs text-gray-400">${new Date(te.createdAt).toLocaleDateString("nl-NL")}</span>`,Dn.push(He),tn.push(null);continue}if(z.layerType==="importedLayer"){const te=z.layerName||"Gemporteerde laag",ve=z.layerColor||"#8b5cf6",De=["layerType","layerId","layerName","layerColor","featureIndex","geometry"],He=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.description||"Feature";let Ge=`<strong style="color: ${ve}">${He}</strong>`;Ge+=`<br/><span class="text-xs text-gray-500">${te}</span>`;const Ze=Object.entries(z).filter(([nt])=>!De.includes(nt)&&nt!=="name"&&nt!=="Name");if(Ze.length>0){Ge+='<div class="mt-2 space-y-1">';for(const[nt,Mt]of Ze)if(Mt!=null&&Mt!==""){const Gt=nt.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,q=>q.toUpperCase());let _n=String(Mt);_n.length>200&&(_n=_n.substring(0,200)+"..."),_n.startsWith("http://")||_n.startsWith("https://")?Ge+=`<div class="text-sm"><span class="text-gray-500">${Gt}:</span> <a href="${_n}" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Link</a></div>`:Ge+=`<div class="text-sm"><span class="text-gray-500">${Gt}:</span> <span class="text-gray-700">${_n}</span></div>`}Ge+="</div>"}Dn.push(Ge),tn.push({geometry:wo(rn),properties:z,popupHtml:Ge});continue}if(z.kwaliteitswaarde&&z.kwaliteitswaarde.includes("archeologische waarde")){const te=wt(z);Dn.push(te),tn.push({geometry:wo(rn),properties:z,popupHtml:te});continue}if(z.nomgen&&z.typesite){const te=z.nomgen||"Beschermd gebied",De=(z.typesite||"").toLowerCase().includes("class");let He=`<strong class="text-green-800">${te}</strong>`;if(He+=`<br/><span class="text-sm text-green-700">${De?"Site class (strikt beschermd)":"Site inscrit (beschermd)"}</span>`,z.datecrea&&(He+=`<br/><span class="text-xs text-gray-500">Beschermd sinds: ${z.datecrea}</span>`),z.surfdclha){const Ze=(z.surfdclha/1e4).toFixed(1);He+=`<br/><span class="text-xs text-gray-500">Oppervlakte: ${Ze} ha</span>`}if(z.gestnom){const Ze=z.gestnom.replace("DREAL ","").split(" -")[0];He+=`<br/><span class="text-xs text-gray-500">Regio: ${Ze}</span>`}He+='<div class="mt-2 pt-2 border-t border-gray-200">',He+='<span class="text-xs text-gray-600">',De?He+="<strong>Site class</strong>: Hoogste beschermingsniveau in Frankrijk. Geen wijzigingen toegestaan zonder speciale vergunning. Vergelijkbaar met Nederlands Rijksmonument.":He+="<strong>Site inscrit</strong>: Beschermd gebied waar wijzigingen moeten worden gemeld. Minder streng dan Site class.",He+="</span></div>",He+='<div class="mt-2"><a href="https://fr.wikipedia.org/wiki/Site_class%C3%A9_ou_inscrit_(France)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-xs">Meer over Sites Classs</a></div>',Dn.push(He),tn.push({geometry:wo(rn),properties:z,popupHtml:He});continue}if(z.layerType==="romeinsFort"||z.layerType==="romeinsFortLijn"){const te=z.Name||z.name||"";z.description;const ve=fTt[te]||null,De=ve||pTt;let He=`<strong class="text-red-800">${ve?De.naam:te||"Romeins Fort"}</strong>`;if(He+=`<br/><span class="text-sm text-red-700">${mTt[De.type]||De.type}</span>`,He+=`<br/><span class="text-sm text-gray-500">${De.periode}</span>`,z.layerType==="romeinsFortLijn"&&(He+='<br/><span class="text-sm text-red-600"> Gereconstrueerde fortomtrek</span>'),He+=`<br/><span class="text-xs text-gray-600 mt-1 block">${De.beschrijving}</span>`,ve?.bronnen&&ve.bronnen.length>0){const Ge=ve.bronnen[0].replace(/^https?:\/\//,"").split("/")[0];He+=`<br/><a href="${ve.bronnen[0]}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-xs">${Ge}</a>`}Dn.push(He),tn.push({geometry:wo(rn),properties:z,popupHtml:He});continue}let Tt=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.route_name||z.road_name;Tt||(z.leisure==="playground"?Tt="Speeltuin":z.leisure==="park"?Tt="Park":z.leisure==="swimming_area"||z.sport==="swimming"?Tt="Zwemplek":z.tourism==="museum"?Tt="Museum":z.amenity==="cafe"||z.amenity==="restaurant"?Tt=z.amenity==="cafe"?"Caf":"Restaurant":z.historic==="castle"?Tt="Kasteel":Tt="Info"),(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats")))&&(Tt="Bunker"),z.historic==="battlefield"&&(Tt="Historisch slagveld");let X=`<strong>${Tt}</strong>`,le=!1;if(z.category&&(X+=`<br/><span class="text-sm text-gray-600">Categorie: ${z.category}</span>`),z.from_to&&z.from_to!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${z.from_to}</span>`),z.route&&z.route!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${z.route}</span>`),z.TOPONIEM&&(X+=`<br/><span class="text-sm font-semibold text-gray-800">${z.TOPONIEM}</span>`,z.PLAATS&&(X+=`<br/><span class="text-xs text-gray-500">${z.PLAATS}</span>`)),(z.AARD_VINDP||z.Aard_vindp)&&(X+=`<br/><span class="text-sm text-gray-700">Aard: ${z.AARD_VINDP||z.Aard_vindp}</span>`),z.BEGIN_PER&&z.EIND_PER&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.BEGIN_PER} - ${z.EIND_PER}</span>`),(z.AARD_OPM||z.Aard_opmer)&&(X+=`<br/><span class="text-xs text-gray-600 italic">${z.AARD_OPM||z.Aard_opmer}</span>`),z.Gemeente&&(X+=`<br/><span class="text-sm text-gray-600">Gemeente: ${z.Gemeente}</span>`),z.Bron&&(X+=`<br/><span class="text-xs text-gray-500">Bron: ${z.Bron}</span>`),z.Bron_besch&&(X+=`<br/><span class="text-xs text-gray-500">${z.Bron_besch}</span>`),z.Dat_st_z&&z.Dat_ei_z&&(X+=`<br/><span class="text-sm text-purple-700">Datering: ${z.Dat_st_z} - ${z.Dat_ei_z}</span>`),z.Begin&&z.Einde&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.Begin} - ${z.Einde}</span>`),z.Uiterwaard&&(X+=`<br/><span class="text-sm font-semibold">${z.Uiterwaard}</span>`),z.rivier&&(X+=`<br/><span class="text-sm text-blue-600">Rivier: ${z.rivier}</span>`),z.Beschrijvi&&(X+=`<br/><span class="text-sm text-gray-700">${z.Beschrijvi}</span>`),z.leisure==="park"){le=!0,X=`<strong class="text-green-800">${z.name||"Park"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Park</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.area&&(X+=`<br/><span class="text-sm text-gray-600">Oppervlakte: ${z.area}</span>`);const ve=[];if(z.dog==="yes"&&ve.push("Honden toegestaan"),z.lit==="yes"&&ve.push("Verlicht"),z.bench==="yes"&&ve.push("Bankjes"),ve.length>0&&(X+=`<br/><span class="text-sm text-gray-600">${ve.join("  ")}</span>`),z.operator&&(X+=`<br/><span class="text-xs text-gray-500">Beheer: ${z.operator}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Parken zijn populair bij detectoristen. Mensen verliezen hier munten en sieraden. Vraag eerst toestemming aan de gemeente of beheerder.</div>',z.website){const De=z.website.replace(/^https?:\/\//,"").split("/")[0];X+=`<div class="mt-2"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">${De}</a></div>`}}else z.leisure==="playground"&&(le=!0,X=`<strong class="text-orange-800">${z.name||"Speeltuin"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Speeltuin</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`));if(z.tourism==="museum"||z.museum){le=!0;const te=z.name||"Museum",ve=z.museum||z["museum:type"]||"",He=ve&&ve!=="yes"?{art:"Kunstmuseum",history:"Geschiedenismuseum",archaeology:"Archeologisch museum",science:"Wetenschapsmuseum",technology:"Techniekmuseum",nature:"Natuurmuseum",open_air:"Openluchtmuseum",local:"Streekmuseum",military:"Militair museum",railway:"Spoorwegmuseum",maritime:"Maritiem museum",children:"Kindermuseum"}[ve.toLowerCase()]||ve:"Museum";if(X=`<strong class="text-purple-800">${te}</strong>`,X+=`<br/><span class="text-sm text-purple-600">${He}</span>`,z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.fee){const Ge=z.fee==="yes"?"Toegangsprijs":z.fee==="no"?"Gratis toegang":z.fee;X+=`<div class="mt-2"><span class="text-sm text-gray-600">${Ge}</span></div>`}if(z.opening_hours){const Ge=zae(String(z.opening_hours));X+=`<div class="mt-2"><span class="text-xs text-green-600">Open: ${Ge}</span></div>`}if(z.website||z.url){const Ge=z.website||z.url;X+=`<div class="mt-1"><a href="${Ge}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Bezoek ${te}</a></div>`}if(z.wikipedia){const Ge=z.wikipedia.split(":")[0]||"nl",Ze=z.wikipedia.split(":")[1]||z.wikipedia;X+=`<div class="text-sm"><a href="https://${Ge}.wikipedia.org/wiki/${encodeURIComponent(Ze)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Meer info op Wikipedia</a></div>`}if(z["addr:street"]||z["addr:housenumber"]||z["addr:city"]){if(X+='<div class="mt-2 text-xs text-gray-400">',z["addr:street"]||z["addr:housenumber"]){const Ge=[z["addr:street"],z["addr:housenumber"]].filter(Boolean).join(" ");Ge&&(X+=`${Ge}<br/>`)}z["addr:city"]&&(X+=`${z["addr:postcode"]||""} ${z["addr:city"]}`),X+="</div>"}}if(z.leisure==="swimming_area"||z.sport==="swimming"||z.natural==="beach"){le=!0,X=`<strong class="text-cyan-800">${z.name||"Zwemplek"}</strong>`;const ve=z.natural==="beach"?"Strand":z.leisure==="swimming_area"?"Zwemplek":"Zwemwater";X+=`<br/><span class="text-sm text-gray-800">${ve}</span>`,z.water&&(X+=`<br/><span class="text-sm text-gray-700">${{lake:"Meer",river:"Rivier",pond:"Vijver",reservoir:"Reservoir",canal:"Kanaal"}[z.water]||z.water}</span>`),z.supervised==="yes"&&(X+='<br/><span class="text-sm text-green-700">Met toezicht</span>'),z.changing_rooms==="yes"&&(X+='<br/><span class="text-sm text-gray-600">Kleedruimte aanwezig</span>'),z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Zwemplekken kunnen interessant zijn voor detectie. Mensen verliezen hier sieraden en munten. Let op: niet overal is detecteren toegestaan.</div>'}if(z.osm_id&&z.address!==void 0&&(X+='<br/><span class="text-sm text-lime-700">Kringloopwinkel</span>',z.address&&(X+=`<br/><span class="text-xs text-gray-500">${z.address}</span>`),z.phone&&(X+=`<br/><span class="text-xs text-gray-600">${z.phone}</span>`)),z.site_type==="tumulus"){le=!0;const te=Ie.getGeometry()?.getCoordinates();let ve="",De="";if(te){const He=$n(te),Ge=He[0],Ze=He[1];Ge>5.5&&Ge<6.3&&Ze>52&&Ze<52.5?(ve="Veluwe",De="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):Ge>6.2&&Ge<7.1&&Ze>52.6&&Ze<53.3?(ve="Drenthe",De="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):Ge>4.5&&Ge<6&&Ze>51.3&&Ze<51.9?(ve="Noord-Brabant",De="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):Ge>5.5&&Ge<6.3&&Ze>50.7&&Ze<51.6?(ve="Limburg",De="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):Ge>5&&Ge<5.6&&Ze>52&&Ze<52.4&&(ve="Utrechtse Heuvelrug",De="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}X+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',ve&&(X+=`<br/><span class="text-sm text-gray-500">${ve}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',De&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${De}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',z.wikidata?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${z.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(z.historic==="castle"||z.castle_type){le=!0;const te={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},ve=z.castle_type?te[z.castle_type]:null,De=ve?.label||"Kasteel";if(X+=`<br/><span class="text-sm text-purple-700">${De}</span>`,z.start_date&&(X+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.start_date}</span>`),z.heritage&&(X+='<br/><span class="text-sm text-amber-700">Rijksmonument</span>'),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ve?X+=`<div class="text-sm text-gray-700 mt-1">${ve.uitleg}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ve?X+=`<div class="text-sm text-gray-700 mt-1">${ve.vondsten}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',z.wikipedia||z.website){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.wikipedia){const He=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace(/^nl:/,"")}`;X+=`<div class="text-sm text-gray-700 mt-1"><a href="${He}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}z.website&&(X+=`<div class="text-sm text-gray-700 mt-1"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(z.historic==="ruins"){const te=z.ruins_type||"";let ve="Rune",De="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",He="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(te.toLowerCase().includes("church")||te.toLowerCase().includes("kerk")?(ve="Kerkrune",De="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",He="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):te.toLowerCase().includes("castle")||te.toLowerCase().includes("kasteel")?(ve="Kasteelrune",De="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",He="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):te.toLowerCase().includes("mill")||te.toLowerCase().includes("molen")?(ve="Molenrune",De="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",He="Gereedschap, munten, huishoudelijke voorwerpen"):te.toLowerCase().includes("fort")&&(ve="Fortrune",De="De overblijfselen van een militair fort of verdedigingswerk.",He="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),X+=`<br/><span class="text-sm text-amber-700">${ve}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${De}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${He}</div>`,z.description&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.wikipedia){const Ge=z.wikipedia.startsWith("http")?z.wikipedia:`https://${z.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${z.wikipedia.replace(/^[a-z]{2}:/,"")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${Ge}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats"))){le=!0;const te={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},ve=z.name||"",De=z.bunker_type?te[z.bunker_type]||z.bunker_type:"";ve&&ve!=="Bunker"&&(X+=`<br/><span class="text-sm font-semibold text-gray-700">${ve}</span>`),De&&De!==ve&&(X+=`<br/><span class="text-xs text-gray-500">${De}</span>`);const He=Ie.getGeometry()?.getCoordinates();let Ge="",Ze="",nt="";if(He){const Mt=$n(He),Gt=Mt[0],_n=Mt[1],q=Gt<4.8||Gt<5.2&&_n>51.8&&_n<53.5,ie=Gt>4.2&&Gt<4.4&&_n>52&&_n<52.15,ee=Gt>4.5&&Gt<4.7&&_n>52.4&&_n<52.5,re=Gt>4&&Gt<4.2&&_n>51.95&&_n<52.05,oe=Gt<4.2&&_n<51.6,ae=Gt>5.2&&Gt<5.8&&_n>51.9&&_n<52.3;ie?(Ge="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",nt="Atlantikwall Museum Scheveningen"):ee?(Ge="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",Ze="https://www.bunkermuseum.nl/",nt="Bunkermuseum IJmuiden"):re?(Ge="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",Ze="https://www.atlantikwallhoekvanholland.nl/",nt="Atlantikwall Hoek van Holland"):oe?(Ge="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",Ze="https://www.bunkermuseumzoutelande.nl/",nt="Bunkermuseum Zoutelande"):q?(Ge="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",nt="Atlantikwall (Wikipedia)"):ae?(Ge="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",Ze="https://nl.wikipedia.org/wiki/Grebbelinie",nt="Grebbelinie (Wikipedia)"):(Ge="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",nt="WOII bunkers (Wikipedia)")}else Ge="Een bunker uit de Tweede Wereldoorlog.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",nt="WOII bunkers (Wikipedia)";X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',X+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${Ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${nt}</a>`,z.website?X+=`<br/><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:X+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',X+="</div>"}if(z.historic==="battlefield"){le=!0;const te=z.name||"Onbekend slagveld",De={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[te];if(te!=="Onbekend slagveld"&&te!=="Historisch slagveld"&&(X+=`<br/><span class="text-sm font-semibold text-red-700">${te}</span>`),De)X+=`<br/><span class="text-xs text-gray-500">${De.periode}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${De.samenvatting}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${De.uitkomst}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${De.watZieJe}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${De.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,te.includes("Arnhem")&&(X+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),te.includes("Overloon")&&(X+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),X+="</div>";else if(z.date&&(X+=`<br/><span class="text-xs text-gray-500">${z.date}</span>`),z.description?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),z.wikipedia){const He=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace("nl:","")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="${He}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bron==="Paleobiology Database"){const te=Ge=>{const Ze={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[nt,Mt]of Object.entries(Ze))if(Ge.toLowerCase().includes(nt.toLowerCase()))return Mt;return""},ve=Ge=>{const Ze={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[nt,Mt]of Object.entries(Ze))if(Ge.toLowerCase().includes(nt.toLowerCase()))return Mt;return""},De=Ge=>{const Ze={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let nt=Ge;for(const[Mt,Gt]of Object.entries(Ze))nt=nt.replace(new RegExp(Mt,"gi"),Gt);return nt},He=Ge=>{const Ze={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let nt=Ge;for(const[Mt,Gt]of Object.entries(Ze))nt=nt.replace(new RegExp(Mt,"gi"),Gt);return nt};if(z.vindplaats&&(X+=`<br/><span class="text-xs text-gray-600">${z.vindplaats}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',z.taxonomie&&z.taxonomie!=="Onbekend"){const Ge=te(z.taxonomie);Ge?(X+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,X+=`<div class="text-xs text-gray-500 italic">(${z.taxonomie})</div>`):X+=`<div class="text-sm text-gray-700 mt-1">${z.taxonomie}</div>`}if(z.aantal_fossielen){const Ge=parseInt(z.aantal_fossielen),Ze=Ge>100?"Veel fossielen gevonden op deze locatie.":Ge>10?"Meerdere fossielen gevonden op deze locatie.":`${z.aantal_fossielen} fossiel${Ge>1?"en":""} gevonden op deze locatie.`;X+=`<div class="text-sm text-gray-600 mt-1">${Ze}</div>`}if(z.periode&&z.periode!=="Onbekend"){X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const Ge=ve(z.periode);X+=`<div class="text-sm text-gray-700 mt-1">${z.periode}</div>`,Ge&&(X+=`<div class="text-sm text-gray-600">${Ge}</div>`),z.ouderdom&&z.ouderdom!=="Onbekend"&&(X+=`<div class="text-sm text-gray-600">Ouderdom: ${z.ouderdom}</div>`)}(z.gesteente||z.formatie||z.milieu)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',z.gesteente&&(X+=`<div class="text-sm text-gray-700 mt-1">${De(z.gesteente)}</div>`),z.formatie&&(X+=`<div class="text-sm text-gray-600">Formatie: ${z.formatie}</div>`,z.lid&&(X+=`<div class="text-sm text-gray-600 ml-3">Lid: ${z.lid}</div>`)),z.milieu&&(X+=`<div class="text-sm text-gray-600">Leefomgeving: ${He(z.milieu)}</div>`))}if(z.layerType==="fossielHotspot"){const te=[];if(z.type&&te.push(z.type),z.region&&te.push(z.region),z.country){const ve={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};te.push(ve[z.country]||z.country)}if(te.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${te.join("  ")}</span>`),(z.finds||z.period)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.finds&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.period&&(X+=`<div class="text-sm text-gray-600 mt-1">Periode: ${z.period}</div>`),z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const De=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${De} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="mineralenHotspot"){const te=[];if(z.region&&te.push(z.region),z.country){const ve={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};te.push(ve[z.country]||z.country)}if(te.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${te.join("  ")}</span>`),z.minerals&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.minerals}</div>`,z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const De=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")||z.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${De} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="goudrivier"){const te=[];if(z.river&&te.push(z.river),z.region&&te.push(z.region),z.country){const ve={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};te.push(ve[z.country]||z.country)}if(te.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${te.join("  ")}</span>`),(z.goldType||z.origin)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.goldType&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.goldType}</div>`),z.origin&&(X+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${z.origin}</div>`)),z.legal||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',z.legal){const De=z.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";X+=`<div class="text-sm ${De} mt-1">${z.legal}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="wandelroute"){const te=[];if(z.region&&te.push(z.region),z.country){const ve={NL:"Nederland",BE:"Belgi"};te.push(ve[z.country]||z.country)}if(te.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${te.join("  ")}</span>`),z.distance||z.duration){const ve=z.distance?`${z.distance} km`:"",De=z.duration?`${z.duration}`:"",He=[ve,De].filter(Boolean).join("  ");He&&(X+=`<br/><span class="text-sm text-green-700 font-medium">${He}</span>`)}(z.description||z.highlights)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.highlights&&(X+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${z.highlights}</div>`)),z.startAddress&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.startAddress}</div>`),z.url&&(X+=`<div class="mt-3"><a href="${z.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(z.layerType==="hunebed"){z.period&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.period}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`);const te=[];if(z.stones){const ve=z.stones.toLowerCase(),De=ve.match(/(\d+)\s*dekst[^\s,]*/i),He=ve.match(/(\d+)\s*draagst[^\s,]*/i),Ge=ve.match(/(\d+)\s*sluitst[^\s,]*/i),Ze=ve.match(/(\d+)\s*poortst[^\s,]*/i),nt=ve.match(/(\d+)\s*gangdekst[^\s,]*/i),Mt=ve.match(/(\d+)\s*gangzijst[^\s,]*/i);De&&te.push(`${De[1]} deksteen${parseInt(De[1])>1?"en":""} (de grote steen${parseInt(De[1])>1?"en":""} bovenop)`),He&&te.push(`${He[1]} draagstenen (de stenen die de dekstenen dragen)`),Ge&&te.push(`${Ge[1]} sluitsteen${parseInt(Ge[1])>1?"en":""} (afsluiting aan de korte zijden)`),Ze&&te.push(`${Ze[1]} poortsteen${parseInt(Ze[1])>1?"en":""} (bij de ingang)`),nt&&te.push(`${nt[1]} gangdeksteen${parseInt(nt[1])>1?"en":""} (boven de toegangsgang)`),Mt&&te.push(`${Mt[1]} gangzijstenen (langs de toegangsgang)`)}if(z.length&&te.push(`Een grafkamer van ${z.length} lang`),z.width&&te.push(`${z.width}`),te.length>0&&(X+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',X+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',te.forEach(ve=>{X+=`<li>${ve}</li>`}),X+="</ul>"),z.notable){const ve=z.notable.toLowerCase();let De="Wat is hier bijzonder?";ve.includes("grootste")?De="Waarom is dit het grootste hunebed?":ve.includes("klein")||ve.includes("kindhunebed")?De="Waarom is dit hunebed zo klein?":ve.includes("cluster")||ve.includes("naast elkaar")?De="Waarom liggen hier meerdere hunebedden?":(ve.includes("enige")||ve.includes("westelijk")||ve.includes("noordelijk"))&&(De="Wat maakt deze locatie bijzonder?"),X+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${De}</span></div>`,X+=`<div class="text-sm text-gray-700 mt-1">${z.notable}</div>`}X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',z.finds&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.museum&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.museum}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',z.access?X+=`<div class="text-sm text-gray-700 mt-1">${z.access}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',z.wikipedia&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${z.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((z.inventarisnummer||z.locatie_naam)&&(z.locatie_naam&&(X+=`<br/><span class="text-sm font-semibold">${z.locatie_naam}</span>`),z.inventarisnummer&&(X+=`<br/><span class="text-xs text-gray-500">CAI: ${z.inventarisnummer}</span>`),z.datering_tekst&&(X+=`<br/><span class="text-sm text-purple-700">${z.datering_tekst}</span>`)),(z.veensoort||z.dikte)&&(z.veensoort&&(X+=`<br/><span class="text-sm text-amber-700">${z.veensoort}</span>`),z.dikte&&(X+=`<br/><span class="text-xs text-gray-600">Dikte: ${z.dikte}</span>`)),z.nature&&z.debut){X+=`<br/><span class="text-sm text-purple-700">${z.nature}</span>`;const te=z.debut===z.fin?z.debut:`${z.debut} - ${z.fin}`;te&&(X+=`<br/><span class="text-sm text-gray-700">Periode: ${te}</span>`),z.structure&&(X+=`<br/><span class="text-xs text-gray-600">${z.structure}</span>`),z.commune&&(X+=`<br/><span class="text-xs text-gray-500">${z.commune}</span>`),z.decouvert&&(X+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${z.decouvert}</span>`),z.numero&&(X+=`<br/><span class="text-xs text-gray-400">${z.numero}</span>`)}if((z.NATURE_OPE||z.CODE_OPERA)&&(z.TITRE&&(X+=`<br/><span class="text-sm font-semibold">${z.TITRE}</span>`),z.NATURE_OPE&&(X+=`<br/><span class="text-sm text-amber-700">${z.NATURE_OPE}</span>`),z.AUTEUR&&(X+=`<br/><span class="text-xs text-gray-600">Auteur: ${z.AUTEUR}</span>`),z.DATE&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.DATE}</span>`),z.COMMUNE&&(X+=`<br/><span class="text-xs text-gray-500">${z.COMMUNE}</span>`)),z.type_protection&&(z.n_site||z.t_site)){const te=z.type_protection==="Classe"?"text-red-700":"text-amber-700";X+=`<br/><span class="text-sm ${te}">${z.type_protection}</span>`,z.n_site&&(X+=`<br/><span class="text-sm font-semibold">${z.n_site}</span>`),z.t_site&&(X+=`<br/><span class="text-xs text-gray-600">${z.t_site}</span>`),z.c_site&&(X+=`<br/><span class="text-xs text-gray-500">Code: ${z.c_site}</span>`),z.d_creation&&(X+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${z.d_creation}</span>`)}if(z.type_protection&&z.cod_diren){const te=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${te}">${z.type_protection}</span>`,z.proced&&(X+=`<br/><span class="text-xs text-gray-600">${z.proced}</span>`),z.d_proced&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.d_proced}</span>`),z.comment){const ve=String(z.comment).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ve}${String(z.comment).length>150?"...":""}</span>`}}if(z.type_protection&&z.nomsite){const te=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${te}">${z.type_protection}</span>`,z.caractere&&(X+=`<br/><span class="text-xs text-gray-600">${z.caractere}</span>`),z.datedecis&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.datedecis}</span>`),z.descriptio){const ve=String(z.descriptio).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ve}${String(z.descriptio).length>150?"...":""}</span>`}}if(z.secteur&&z.style){if(X+=`<br/><span class="text-sm text-gray-700">${z.secteur}</span>`,z["sous-secteur"]&&(X+=`<br/><span class="text-xs text-gray-600">${z["sous-secteur"]}</span>`),z.description){const te=String(z.description).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${te}${String(z.description).length>150?"...":""}</span>`}z.url&&(X+=`<br/><a href="${z.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(z.nature_operation||z.synthese){z.nature_operation&&(X+=`<br/><span class="text-sm text-red-700">${z.nature_operation}</span>`),z.responsable_operation&&(X+=`<br/><span class="text-xs text-gray-600">Responsable: ${z.responsable_operation}</span>`),z.date_operation&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.date_operation}</span>`);const te=[];if(z.prehistoire==="Oui"&&te.push("Prehistorie"),z.protohistoire==="Oui"&&te.push("Protohistorie"),z.antiquite==="Oui"&&te.push("Romeins"),z.moyen_age==="Oui"&&te.push("Middeleeuwen"),z.temps_modernes==="Oui"&&te.push("Moderne tijd"),te.length>0&&(X+=`<br/><span class="text-sm text-purple-700">${te.join(", ")}</span>`),z.adresse&&(X+=`<br/><span class="text-xs text-gray-500">${z.adresse}</span>`),z.synthese){const ve=String(z.synthese).slice(0,200);X+=`<br/><span class="text-xs text-gray-600 italic">${ve}${String(z.synthese).length>200?"...":""}</span>`}}if(z.operator&&(X+=`<br/><span class="text-sm text-gray-600">${z.operator}</span>`),!le){if(z.opening_hours){const te=zae(String(z.opening_hours));X+=`<br/><span class="text-xs text-green-600">Open: ${te}</span>`}z.website&&(X+=`<br/><a href="${z.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`)}if(z.addr_street){const te=[z.addr_street,z.addr_housenumber,z.addr_postcode].filter(Boolean).join(" ");X+=`<br/><span class="text-xs text-gray-500">${te}</span>`}const Ve=z.description||z.omschrijving||z.descr||z.info;Ve&&Ve!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${Ve}</span>`),Dn.push(X),tn.push({geometry:wo(rn),properties:z,popupHtml:X})}const Nn=t.getView().getResolution()||1,Ci=await Qn(Vt.coordinate,Nn);Dn.push(...Ci);for(const Ie of Ci)tn.push(null);const qe=await Ui;if(Dn.length===0&&qe!==null){const Ie=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${qe.toFixed(2)} m NAP</span>
          </div>`;Dn.push(Ie),tn.push(null)}if(Dn.length>0&&qe!==null&&(Dn[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${qe.toFixed(2)} m NAP</span>
        </div>`),Dn.length>0){l(Dn),se(tn),u(0),console.log(` KLIK OPGESLAGEN: [${Vt.coordinate[0].toFixed(0)}, ${Vt.coordinate[1].toFixed(0)}]`),y(Vt.coordinate),b(!1),G(!1),xe(!1),W(""),ue(null);const Ie=$n(Vt.coordinate);ze(Ie),N(`https://www.google.com/maps/dir/?api=1&destination=${Ie[1]},${Ie[0]}`),O(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${Ie[1]},${Ie[0]}`),f(!0)}};return t.on("click",dr),()=>{t.un("click",dr)}},[t]);const Ai=()=>{f(!1),ke("half"),t&&_&&(rG(t),b(!1))},js=(wt,Qn)=>{const dr=Qn.velocity.y,Vt=Qn.offset.y;Ye==="half"?Vt<-50||dr<-500?ke("full"):(Vt>100||dr>500)&&Ai():(Vt>50||dr>300)&&ke("half")};return p.jsx(Wn,{children:h&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ai}),p.jsxs(yt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{fontSize:`${14*me/100}px`,height:Ye==="full"?"90vh":"auto",maxHeight:Ye==="full"?"90vh":"35vh"},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.3,onDragEnd:js,children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white cursor-grab active:cursor-grabbing rounded-t-xl select-none",onClick:()=>ke(Ye==="half"?"full":"half"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Xe&&p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx("button",{onClick:wt=>{wt.stopPropagation(),Hn()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:p.jsx(U2e,{size:18})}),p.jsxs("span",{className:"text-white/80 font-medium min-w-[32px] text-center",style:{fontSize:"0.75em"},children:[c+1,"/",a.length]}),p.jsx("button",{onClick:wt=>{wt.stopPropagation(),ei()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:p.jsx(rh,{size:18})})]}),p.jsx("span",{className:"font-medium text-white truncate",style:{fontSize:"0.9em"},children:gn||"Info"})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[be&&p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:wt=>{wt.stopPropagation(),G(!F)},className:`p-1 transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20 ${U?"text-green-300":"text-white/80 hover:text-white"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:U?p.jsx(Ip,{size:16}):p.jsx(kc,{size:16})}),F&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px] max-w-[220px]",children:[p.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.filter(wt=>!wt.archived).map(wt=>p.jsxs("button",{onClick:()=>{const Qn=Q;s(wt.id,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[be[0],be[1]],sourceLayer:gn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),G(!1),ue(wt.name),setTimeout(()=>ue(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-blue-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:wt.color}}),p.jsx("span",{className:"truncate",children:wt.name})]},wt.id))}),p.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:Le?p.jsxs("div",{className:"px-2 py-1",children:[p.jsx("input",{type:"text",value:Z,onChange:wt=>W(wt.target.value),placeholder:"Naam nieuwe laag...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:border-orange-400",autoFocus:!0,onKeyDown:wt=>{if(wt.key==="Enter"&&Z.trim()){const Qn=o(Z.trim()),dr=Q;s(Qn,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[be[0],be[1]],sourceLayer:gn,geometry:dr?.geometry,sourceProperties:dr?.properties,popupContent:dr?.popupHtml}),G(!1),xe(!1),W(""),ue(Z.trim()),setTimeout(()=>ue(null),2e3)}else wt.key==="Escape"&&(xe(!1),W(""))}}),p.jsxs("div",{className:"flex gap-1 mt-1",children:[p.jsx("button",{onClick:()=>{if(Z.trim()){const wt=o(Z.trim()),Qn=Q;s(wt,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[be[0],be[1]],sourceLayer:gn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),G(!1),xe(!1),W(""),ue(Z.trim()),setTimeout(()=>ue(null),2e3)}},disabled:!Z.trim(),className:"flex-1 px-2 py-1 text-xs bg-orange-500 text-white rounded disabled:opacity-50",children:"Toevoegen"}),p.jsx("button",{onClick:()=>{xe(!1),W("")},className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700",children:"Annuleer"})]})]}):p.jsxs("button",{onClick:()=>xe(!0),className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx(kc,{size:14}),p.jsx("span",{children:"Nieuwe laag maken..."})]})})]})]}),L&&p.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-amber-500 hover:text-amber-600 transition-colors flex-shrink-0",title:"Open Street View","aria-label":"Open Street View",children:p.jsx(Z2e,{size:18})}),P&&p.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",onClick:wt=>wt.stopPropagation(),className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 rounded hover:bg-white/20",title:"Navigeer naar locatie","aria-label":"Open in Google Maps",children:p.jsx(Og,{size:16})}),p.jsx(H2e,{size:18,className:"text-white/60 mx-1"}),p.jsx("button",{onClick:wt=>{wt.stopPropagation(),Ai()},className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20","aria-label":"Sluiten",children:p.jsx(Qr,{size:16})})]})]}),p.jsx("div",{className:`px-4 py-3 overflow-y-auto select-text min-h-0 ${Ye==="full"?"flex-1":""}`,style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:pt}}),p.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2 flex-shrink-0",children:[p.jsx(bq,{size:14,className:"text-gray-400 flex-shrink-0"}),p.jsx("input",{type:"range",min:"80",max:"150",value:me,onChange:wt=>Ee(parseInt(wt.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[me,"%"]})]}),zn&&C&&!R&&p.jsxs("div",{className:"px-4 pb-4 flex gap-2 flex-shrink-0",children:[p.jsxs("button",{onClick:()=>{const wt=r.find(Qn=>Qn.id===C);wt&&V(wt)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Wd,{size:16}),p.jsx("span",{children:"Bewerken"})]}),p.jsxs("button",{onClick:()=>{e(C),f(!1),I(null)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Ah,{size:16}),p.jsx("span",{children:"Verwijderen"})]})]}),R&&p.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-100 pt-3 flex-shrink-0 overflow-y-auto max-h-[40vh]",children:[p.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Vondst bewerken"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Objecttype"}),p.jsx("input",{type:"text",value:R.objectType,onChange:wt=>V({...R,objectType:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Materiaal"}),p.jsx("input",{type:"text",value:R.material,onChange:wt=>V({...R,material:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Periode"}),p.jsx("input",{type:"text",value:R.period,onChange:wt=>V({...R,period:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Notities"}),p.jsx("textarea",{value:R.notes,onChange:wt=>V({...R,notes:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50 resize-none h-16"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>V(null),className:"flex-1 px-3 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none text-sm",children:"Annuleren"}),p.jsx("button",{onClick:()=>{n(R.id,{objectType:R.objectType,material:R.material,period:R.period,notes:R.notes}),V(null),f(!1)},className:"flex-1 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none text-sm",children:"Opslaan"})]})]}),hr&&g&&p.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:_?p.jsxs("button",{onClick:Rr,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Q2,{size:16}),p.jsx("span",{children:"Hoogtekaart verbergen"})]}):p.jsx("button",{onClick:xo,disabled:T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${T?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:T?p.jsxs(p.Fragment,{children:[p.jsx(iI,{size:16,className:"animate-spin"}),p.jsx("span",{children:"Laden..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(Q2,{size:16}),p.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const Uae=1e-4;function xTt(t,e){return t.points.some(n=>{const r=Math.abs(n.coordinates[0]-e[0]),i=Math.abs(n.coordinates[1]-e[1]);return r<Uae&&i<Uae})}function wTt(){const t=li(O=>O.map),e=gr(O=>O.openVondstForm),{openAddPointModal:n,openCreateLayerModal:r,openLayerManagerModal:i}=gr(),s=Vi(O=>O.layers),[o,a]=Y.useState(null),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null);Y.useEffect(()=>{if(!t){console.log(" LongPressMenu: map not ready");return}const O=t.getViewport();if(!O){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",O);const F=600,G=15,U=xe=>{if(console.log(" Touch start, touches:",xe.touches.length),xe.touches.length!==1)return;const Z=xe.touches[0];_.current={x:Z.clientX,y:Z.clientY},console.log(" Starting long press timer at:",_.current),y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",_.current),!_.current)return;const W=window.__olMap;if(!W){console.log(" Map not available (global)");return}const ne=O.getBoundingClientRect(),se=[_.current.x-ne.left,_.current.y-ne.top],Q=W.getCoordinateFromPixel(se);if(Q){const me=$n(Q);xe.preventDefault(),a({pixel:[_.current.x,_.current.y],coordinate:me}),c(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",me)}},F)},ue=xe=>{if(!y.current||!_.current)return;const Z=xe.touches[0],W=Z.clientX-_.current.x,ne=Z.clientY-_.current.y,se=Math.sqrt(W*W+ne*ne);se>G&&(console.log(" Touch moved too much, cancelling. Distance:",se),clearTimeout(y.current),y.current=null)},be=()=>{console.log(" Touch end, timer active:",!!y.current),y.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(y.current),y.current=null),_.current=null},ze=xe=>{l&&xe.preventDefault()},Ce=xe=>{xe.button===0&&(console.log(" Mouse down"),_.current={x:xe.clientX,y:xe.clientY},y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!_.current)return;const Z=window.__olMap;if(console.log(" __olMap:",Z),console.log(" __olMap constructor:",Z?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Z?.getCoordinateAtPixel),!Z){console.log(" Map not available (global)");return}const W=O.getBoundingClientRect(),ne=[_.current.x-W.left,_.current.y-W.top];console.log(" Pixel:",ne);const se=Z.getCoordinateFromPixel(ne);if(console.log(" Coordinate:",se),se){const Q=$n(se);a({pixel:[_.current.x,_.current.y],coordinate:Q}),c(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",Q)}},F))},de=xe=>{if(!y.current||!_.current)return;const Z=xe.clientX-_.current.x,W=xe.clientY-_.current.y;Math.sqrt(Z*Z+W*W)>G&&(console.log(" Mouse moved, cancelling"),clearTimeout(y.current),y.current=null)},Le=()=>{console.log(" Mouse up"),y.current&&(clearTimeout(y.current),y.current=null),_.current=null};return O.addEventListener("touchstart",U,{passive:!1}),O.addEventListener("touchmove",ue,{passive:!0}),O.addEventListener("touchend",be),O.addEventListener("touchcancel",be),O.addEventListener("contextmenu",ze),O.addEventListener("mousedown",Ce),O.addEventListener("mousemove",de),O.addEventListener("mouseup",Le),O.addEventListener("mouseleave",Le),()=>{O.removeEventListener("touchstart",U),O.removeEventListener("touchmove",ue),O.removeEventListener("touchend",be),O.removeEventListener("touchcancel",be),O.removeEventListener("contextmenu",ze),O.removeEventListener("mousedown",Ce),O.removeEventListener("mousemove",de),O.removeEventListener("mouseup",Le),O.removeEventListener("mouseleave",Le),y.current&&clearTimeout(y.current)}},[t,l]);const b=()=>{u&&(c(!1),a(null),h(!1),g(!1))},T=()=>{c(!1),a(null),h(!1),g(!1)},A=O=>{if(!o)return;const[F,G]=o.coordinate;n(O,{lat:G,lng:F}),T()},C=()=>{r(),T()},I=()=>{if(!o)return;const[O,F]=o.coordinate;e({lat:F,lng:O}),c(!1),a(null),h(!1)},R=()=>{if(!o)return;const[O,F]=o.coordinate,G=`https://www.google.com/maps?q=${F},${O}`;window.open(G,"_blank"),c(!1),a(null),h(!1)},V=()=>{if(!o)return;const[O,F]=o.coordinate,G=`https://www.google.com/maps?layer=c&cbll=${F},${O}`;window.open(G,"_blank"),T()},P=()=>{if(!o)return;const O=document.createElement("input");O.type="file",O.accept="image/*",O.capture="environment",O.onchange=async F=>{const G=F.target.files?.[0];if(!G)return;const[U,ue]=o.coordinate;e({lat:ue,lng:U},G)},O.click(),T()},N=()=>{i(),T()},L=O=>{const[F,G]=O;return`${G.toFixed(5)}N, ${F.toFixed(5)}E`};return p.jsx(Wn,{children:l&&o&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),p.jsxs(yt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(o.pixel[0],window.innerWidth-220),top:(()=>{const O=f?480:380;return window.innerHeight-o.pixel[1]<O&&o.pixel[1]>O?o.pixel[1]-O+40:Math.min(o.pixel[1],window.innerHeight-O)})()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[p.jsx($o,{size:16}),p.jsx("span",{className:"text-xs font-mono",children:L(o.coordinate)})]})}),p.jsxs("div",{className:"bg-white",children:[p.jsxs("button",{onClick:I,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(r5,{size:20,className:"text-orange-500"}),p.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),p.jsxs("button",{onClick:P,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-green-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(UO,{size:20,className:"text-green-500"}),p.jsx("span",{className:"font-medium",children:"Foto maken"})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(xc,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),p.jsx(rh,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),p.jsx(Wn,{children:f&&p.jsx(yt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.length===0?p.jsxs("button",{onClick:C,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[p.jsx(kc,{size:14}),p.jsx("span",{children:"Maak eerst een laag aan"})]}):p.jsxs(p.Fragment,{children:[s.map(O=>{const F=o?xTt(O,o.coordinate):!1;return p.jsxs("button",{onClick:()=>!F&&A(O.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${F?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:F?"Al toegevoegd aan deze laag":void 0,disabled:F,children:[F&&p.jsx(Ip,{size:14,className:"text-green-500 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:O.name}),p.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:F?"al toegevoegd":`(${O.points.length})`})]},O.id)}),p.jsxs("button",{onClick:C,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[p.jsx(kc,{size:14}),p.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),p.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-purple-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(_ht,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium",children:"Lagen beheren"})]}),p.jsxs("button",{onClick:R,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Og,{size:20,className:"text-blue-600"}),p.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]}),p.jsxs("button",{onClick:V,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-yellow-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Z2e,{size:20,className:"text-yellow-600"}),p.jsx("span",{className:"font-medium",children:"Street View"})]})]}),p.jsx("div",{className:"bg-white",children:p.jsxs("button",{onClick:T,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[p.jsx(Qr,{size:18}),p.jsx("span",{children:"Annuleren"})]})})]})]})})}function bTt(t){return t}function ETt(t){if(t==null)return bTt;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*r+s,h[1]=(n+=a[1])*i+o;c<u;)h[c]=a[c],++c;return h}}function STt(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function TTt(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Bae(t,n)})}:Bae(t,e)}function Bae(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=kTt(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function kTt(t,e){var n=ETt(t.transform),r=t.arcs;function i(u,h){h.length&&h.pop();for(var f=r[u<0?~u:u],g=0,y=f.length;g<y;++g)h.push(n(f[g],g));u<0&&STt(h,y)}function s(u){return n(u)}function o(u){for(var h=[],f=0,g=u.length;f<g;++f)i(u[f],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":f=s(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(s);break;case"LineString":f=o(u.arcs);break;case"MultiLineString":f=u.arcs.map(o);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(e)}async function SDt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json();return console.log(` Loaded GeoJSON from ${t}`),n}catch(e){throw console.error(`Error loading GeoJSON from ${t}:`,e),e}}async function ATt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json(),r=Object.keys(n.objects)[0],i=TTt(n,n.objects[r]);return console.log(` Loaded and converted TopoJSON from ${t}`),i}catch(e){throw console.error(`Error loading TopoJSON from ${t}:`,e),e}}function CTt(t){return new HO({featureProjection:"EPSG:3857"}).readFeatures(t)}const hK={all:{name:"Alle provincies",bounds:[3.37,50.75,7.21,53.47]},groningen:{name:"Groningen",bounds:[6.2,53.1,7.21,53.47]},friesland:{name:"Friesland",bounds:[5.05,52.85,6.25,53.45]},drenthe:{name:"Drenthe",bounds:[6.1,52.65,7.1,53.15]},overijssel:{name:"Overijssel",bounds:[5.85,52.15,6.9,52.7]},flevoland:{name:"Flevoland",bounds:[5.15,52.25,6,52.65]},gelderland:{name:"Gelderland",bounds:[5,51.75,6.4,52.45]},utrecht:{name:"Utrecht",bounds:[4.85,51.9,5.65,52.25]},"noord-holland":{name:"Noord-Holland",bounds:[4.5,52.2,5.25,52.95]},"zuid-holland":{name:"Zuid-Holland",bounds:[3.85,51.8,4.9,52.35]},zeeland:{name:"Zeeland",bounds:[3.37,51.2,4.3,51.75]},"noord-brabant":{name:"Noord-Brabant",bounds:[4.35,51.25,6,51.85]},limburg:{name:"Limburg",bounds:[5.55,50.75,6.25,51.8]}};function ITt(t,e,n){if(n==="all")return!0;const r=hK[n];if(!r)return!0;const[i,s,o,a]=r.bounds;return t>=i&&t<=o&&e>=s&&e<=a}let ZR=null;async function dK(){if(ZR)return ZR;const t=await ATt("/detect/data/amk_monumenten_full.topojson");return ZR=CTt(t),ZR}function PTt(t,e,n=50){const r=t.toLowerCase(),i=e.toLowerCase(),s=r.indexOf(i);if(s===-1)return t.substring(0,100)+"...";const o=Math.max(0,s-n),a=Math.min(t.length,s+e.length+n);let l="";return o>0&&(l+="..."),l+=t.substring(o,a),a<t.length&&(l+="..."),l}async function RTt(t,e=50,n="all"){if(!t||t.length<2)return[];const r=await dK(),i=[],o=t.toLowerCase().split(/\s+/).filter(a=>a.length>=2);for(const a of r){const l=(a.get("omschrijving")||"").toLowerCase(),c=(a.get("toponiem")||"").toLowerCase(),u=(a.get("txt_label")||"").toLowerCase();if(o.every(f=>l.includes(f)||c.includes(f)||u.includes(f))){const f=a.getGeometry();if(!f)continue;const g=f.getExtent(),y=vh(g),[_,b]=ab(y,"EPSG:3857","EPSG:4326");if(!ITt(_,b,n))continue;const T=a.get("omschrijving")||"";if(i.push({id:a.get("ID")||a.get("monumentnummer"),monumentnummer:a.get("monumentnummer"),toponiem:a.get("toponiem")||"Onbekend",kwaliteitswaarde:a.get("kwaliteitswaarde")||"",periode:a.get("txt_label")||"",omschrijving:T,matchedText:PTt(T,o[0]),coordinates:[_,b],extent:g}),i.length>=e)break}}return i.sort((a,l)=>{const c={"zeer hoge archeologische waarde":3,"hoge archeologische waarde":2,"archeologische waarde":1};return(c[l.kwaliteitswaarde]||0)-(c[a.kwaliteitswaarde]||0)}),i}async function MTt(t){return(await dK()).find(n=>n.get("monumentnummer")===t)||null}async function NTt(t){const e=await dK(),n=new Set(t);return e.filter(r=>n.has(r.get("monumentnummer")))}const $Se=vo((t,e)=>({keyword:"",province:"all",isActive:!1,totalCount:0,filteredCount:0,setKeyword:n=>t({keyword:n}),setProvince:n=>t({province:n}),setActive:n=>t({isActive:n}),toggleActive:()=>t(n=>({isActive:!n.isActive})),clearFilter:()=>t({keyword:"",province:"all",isActive:!1}),updateCounts:(n,r)=>t({totalCount:n,filteredCount:r})}));function TDt(t,e,n,r,i,s,o){if(s.length>=2){const l=s.toLowerCase().split(/\s+/).filter(g=>g.length>=2),c=t.toLowerCase(),u=e.toLowerCase(),h=n.toLowerCase();if(!l.every(g=>c.includes(g)||u.includes(g)||h.includes(g)))return!1}if(o!=="all"){const a=hK[o]?.bounds;if(a){const[l,c,u,h]=a;if(r<l||r>u||i<c||i>h)return!1}}return!0}const LTt={Compass:gq,TreePalm:Bht,Mountain:Q2,Waves:tdt,Search:nv,Target:$ht,Layers:xc,Grid:W2e},OTt={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},DTt={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},Wae=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","FAMKE IJzertijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Archeo Onderzoeken","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","Hoogtekaart (WebGL)","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Ruiterpaden","Laarzenpaden","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],jTt=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],FTt=[5.2913,52.1326],$Tt=8;function VTt(){const t=Ws(G=>G.setLayerVisibility),e=Is(G=>G.stopTracking),n=$Se(G=>G.clearFilter),r=li(G=>G.map),{presetsPanelOpen:i,togglePresetsPanel:s,closeAllPanels:o}=gr(),{presets:a,applyPreset:l,updatePreset:c,createPreset:u,resetToDefaults:h}=Ife(),f=Ws(G=>G.visible),g=an(G=>G.presetPanelFontScale),y=an(G=>G.setPresetPanelFontScale),_=an(G=>G.showFontSliders),b=12*g/100,[T,A]=Y.useState(null),[C,I]=Y.useState(!1),[R,V]=Y.useState(""),P=()=>{o(),Wae.forEach(G=>t(G,!1)),jTt.forEach(G=>{t(G,G==="CartoDB (licht)")}),e(),n(),r&&r.getView().animate({center:Ni(FTt),zoom:$Tt,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},N=G=>{l(G),o()},L=(G,U,ue)=>{if(G.stopPropagation(),!confirm(`Preset "${ue}" overschrijven met huidige lagen?`))return;const be=Object.entries(f).filter(([ze,Ce])=>Ce&&Wae.includes(ze)).map(([ze])=>ze);c(U,{layers:be}),A(U),setTimeout(()=>A(null),2e3),console.log(" Lagen opgeslagen naar preset")},O=()=>{R.trim()&&(u(R.trim(),"Layers"),V(""),I(!1))},F=()=>{confirm("Presets terugzetten naar standaard?")&&h()};return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:P,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:p.jsx(ebe,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(yt.button,{onClick:s,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:i?p.jsx(BO,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}):p.jsx(Ict,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[60px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[240px] backdrop-blur-sm z-[801]",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${b}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Presets"}),_&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:g,onInput:G=>{y(parseInt(G.target.value))},onChange:G=>y(parseInt(G.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${g}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),p.jsx("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:a.map(G=>{const U=LTt[G.icon]||xc,ue=OTt[G.icon]||"text-blue-600",be=DTt[G.icon]||"hover:bg-blue-50",ze=T===G.id;return p.jsxs("button",{onClick:()=>N(G.id),className:`w-full h-8 flex items-center gap-1.5 px-2 ${be} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden ${ze?"bg-green-50":""}`,style:{fontSize:`${b}px`},children:[p.jsx(U,{size:14,className:`${ue} flex-shrink-0`}),p.jsx("span",{className:"text-gray-700 truncate flex-1",children:G.name}),ze?p.jsx("span",{className:"p-1 flex-shrink-0",children:p.jsx(Ip,{size:14,className:"text-green-500"})}):p.jsx("span",{onClick:Ce=>L(Ce,G.id,G.name),className:"p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:p.jsx(wq,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},G.id)})}),p.jsx("div",{className:"border-t border-gray-200 px-2 py-1.5",children:C?p.jsxs("div",{className:"flex gap-1",children:[p.jsx("input",{type:"text",value:R,onChange:G=>V(G.target.value),onKeyDown:G=>{G.key==="Enter"&&O(),G.key==="Escape"&&I(!1)},placeholder:"Naam preset...",autoFocus:!0,className:"flex-1 px-2 py-1 text-sm rounded bg-gray-50 border-0 outline-none focus:ring-1 focus:ring-blue-400",style:{fontSize:`${b}px`}}),p.jsx("button",{onClick:O,disabled:!R.trim(),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm disabled:opacity-50 border-0 outline-none",children:p.jsx(Ip,{size:14})})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("button",{onClick:()=>I(!0),className:"h-8 flex items-center gap-1.5 px-2 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",style:{fontSize:`${b}px`},children:[p.jsx(kc,{size:14}),p.jsx("span",{className:"text-gray-600",children:"Voeg preset toe"})]}),p.jsx("button",{onClick:F,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors border-0 outline-none",title:"Herstel standaard",children:p.jsx(uht,{size:14})})]})})]})]})})]})}function zTt(){const t=li(o=>o.map),[e,n]=Y.useState(0),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!t)return;const o=t.getView(),a=()=>{const l=o.getRotation(),c=l*180/Math.PI;n(c),i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[t]);const s=()=>{t&&t.getView().animate({rotation:0,duration:300})};return p.jsx(Wn,{children:r&&p.jsx(yt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[p.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),p.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const GTt=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"AMK Monumenten",color:"purple",default:.45},{name:"AMK Romeins",color:"red",default:.6},{name:"AMK Steentijd",color:"amber",default:.6},{name:"AMK Vroege ME",color:"green",default:.6},{name:"AMK Late ME",color:"blue",default:.6},{name:"AMK Overig",color:"purple",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],UTt={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function BTt(){const[t,e]=Y.useState(!1),[n,r]=Y.useState(!1),i=Ws(u=>u.visible),s=Ws(u=>u.opacity),o=Ws(u=>u.setLayerOpacity),a=GTt.filter(u=>i[u.name]);if(a.length===0)return null;const l=n?a:a.slice(0,3),c=a.length>3;return p.jsxs("div",{className:"fixed bottom-[56px] right-2 z-[900]",children:[p.jsxs(yt.button,{onClick:()=>e(!t),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:t?"Sluit opacity sliders":"Open opacity sliders",children:[p.jsx(tbe,{size:22,strokeWidth:2,className:"text-gray-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}),a.length>0&&p.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:a.length})]}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),p.jsxs(yt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[220px] max-h-[60vh] flex flex-col",children:[p.jsx("div",{className:"px-3 py-1.5 bg-blue-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Transparantie"})}),p.jsxs("div",{className:"p-3 overflow-y-auto flex-1",children:[p.jsx("div",{className:"space-y-3",children:l.map(u=>{const h=s[u.name]??u.default;return p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:u.name,children:u.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"range",min:"0",max:"100",value:h*100,onChange:f=>o(u.name,parseInt(f.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${UTt[u.color]}`}),p.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(h*100),"%"]})]})]},u.name)})}),c&&p.jsx("button",{onClick:()=>r(!n),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:n?p.jsxs(p.Fragment,{children:[p.jsx(BO,{size:14}),"Minder tonen"]}):p.jsxs(p.Fragment,{children:[p.jsx(Fb,{size:14}),a.length-3," meer..."]})})]})]})]})})]})}function WTt(){const t=li(R=>R.map),e=an(R=>R.showWeatherButton),[n,r]=Y.useState(!1),[i,s]=Y.useState(""),[o,a]=Y.useState([]),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),f=Y.useRef(null),g=Y.useRef(null),y=Y.useRef();Y.useEffect(()=>{n&&f.current&&f.current.focus()},[n]),Y.useEffect(()=>{if(!n)return;const R=V=>{g.current&&!g.current.contains(V.target)&&_()};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[n]),Y.useEffect(()=>{if(!n)return;const R=V=>{V.key==="Escape"&&_()};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[n]),Y.useEffect(()=>{if(y.current&&clearTimeout(y.current),i.length<2){a([]);return}return y.current=window.setTimeout(async()=>{h(!0);try{const V=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();V.response?.docs&&a(V.response.docs)}catch(R){console.error("Search error:",R),a([])}finally{h(!1)}},300),()=>{y.current&&clearTimeout(y.current)}},[i]);const _=()=>{r(!1),s(""),a([]),c(!1)},b=async R=>{try{const P=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(R)}`)).json();if(P.response?.docs?.[0]?.centroide_ll){const L=P.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(L)return{lng:parseFloat(L[1]),lat:parseFloat(L[2])}}}catch(V){console.error("Lookup error:",V)}return null},T=async R=>{if(!t)return;const V=await b(R.id);V&&t.getView().animate({center:Ni([V.lng,V.lat]),zoom:16,duration:1e3}),_()},A=async(R,V)=>{V.stopPropagation();const P=await b(R.id);if(P){const N=`https://www.google.com/maps?q=${P.lat},${P.lng}`;window.open(N,"_blank")}_()},C={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};if(!n)return p.jsx(yt.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:C,onClick:()=>r(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:p.jsx(nv,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})});const I=e?"220px":"52px";return p.jsxs("div",{ref:g,className:"fixed right-14 z-[850]",style:{...C,left:I},children:[p.jsxs(yt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[p.jsx(nv,{size:18,className:"search-icon"}),p.jsx("input",{ref:f,type:"text",value:i,onChange:R=>{s(R.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),p.jsx("button",{onClick:_,className:"search-clear",title:"Sluiten",children:p.jsx(Qr,{size:18})})]}),p.jsx(Wn,{children:l&&o.length>0&&p.jsx(yt.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:o.map(R=>p.jsxs("li",{className:"search-result-item",children:[p.jsx("div",{className:"search-result-content",onClick:()=>T(R),children:p.jsx("span",{className:"search-result-text",children:R.weergavenaam})}),p.jsx("button",{className:"search-navigate-btn",onClick:V=>A(R,V),title:"Open in Google Maps",children:p.jsx(Og,{size:20})})]},R.id))})}),l&&u&&p.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function HTt(){const t=li(r=>r.map),e=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},n=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return p.jsxs(yt.div,{className:"fixed bottom-2 right-2 z-[800] flex flex-row-reverse gap-1",children:[p.jsx(yt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:p.jsx(Y2e,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(yt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:p.jsx(kc,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})]})}const qTt="detector2024",lG="detectorapp-auth";function KTt({children:t}){const[e,n]=Y.useState(!1),[r,i]=Y.useState(""),[s,o]=Y.useState(!1),[a,l]=Y.useState(""),[c,u]=Y.useState(!0);Y.useEffect(()=>{localStorage.getItem(lG)==="authenticated"&&n(!0),u(!1)},[]);const h=f=>{f.preventDefault(),l(""),r===qTt?(localStorage.setItem(lG,"authenticated"),n(!0)):(l("Onjuist wachtwoord"),i(""))};return c?p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:p.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?p.jsx(p.Fragment,{children:t}):p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:p.jsxs(yt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Gz,{size:32,className:"text-blue-600"})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:s?"text":"password",value:r,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),p.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?p.jsx(i5,{size:20}):p.jsx(LA,{size:20})})]})]}),a&&p.jsx(yt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:a}),p.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),p.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function YTt(){localStorage.removeItem(lG),window.location.reload()}function XTt({isOpen:t,onClose:e}){const n=uc(l=>l.vondsten),r={total:n.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:n.slice(-5).reverse()};let i=0,s=0;n.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const o=l=>Object.entries(l).sort((c,u)=>u[1]-c[1]),a=l=>Math.max(...Object.values(l),1);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(G2e,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:n.length===0?p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx($o,{size:48,className:"mx-auto mb-3 opacity-30"}),p.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),p.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(P$,{icon:p.jsx($o,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),p.jsx(P$,{icon:p.jsx(Od,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),p.jsx(P$,{icon:p.jsx(mht,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),p.jsx(JR,{title:"Per Type",data:o(r.byType),max:a(r.byType),color:"bg-orange-500"}),p.jsx(JR,{title:"Per Periode",data:o(r.byPeriod),max:a(r.byPeriod),color:"bg-amber-500"}),p.jsx(JR,{title:"Per Materiaal",data:o(r.byMaterial),max:a(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&p.jsx(JR,{title:"Per Conditie",data:o(r.byCondition),max:a(r.byCondition),color:"bg-green-500"}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[p.jsx(pq,{size:14}),"Recente Vondsten"]}),p.jsx("div",{className:"space-y-2",children:r.recent.map(l=>p.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),p.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),p.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),p.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function P$({icon:t,value:e,label:n,color:r}){return p.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[p.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:t}),p.jsx("div",{className:"text-xl font-bold",children:e}),p.jsx("div",{className:"text-xs opacity-70",children:n})]})}function JR({title:t,data:e,max:n,color:r}){return e.length===0?null:p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:t}),p.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),p.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:p.jsx(yt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/n*100}%`},transition:{duration:.5,ease:"easeOut"}})}),p.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function ZTt(t){const{type:e,coordinates:n}=t,r=a=>Ni(a),i=a=>a.map(r),s=a=>a.map(i),o=a=>a.map(s);switch(e){case"Point":return new ki(r(n));case"LineString":return new ns(i(n));case"Polygon":return new Il(s(n));case"MultiPoint":return new h0(i(n));case"MultiLineString":return new _h(s(n));case"MultiPolygon":return new wp(o(n));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function JTt(t,e,n){const r=t.color,i=10,s=5,o=14;let a=i;if(n>50?a=s:n>10?a=Math.max(s,i-(n-10)/10):n<2&&(a=o),e==="Point"||e==="MultiPoint")return new xn({image:new ys({radius:a,fill:new jn({color:r}),stroke:new Mn({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new xn({stroke:new Mn({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=QTt(r,.3);return new xn({fill:new jn({color:l}),stroke:new Mn({color:r,width:2})})}return new xn({image:new ys({radius:a,fill:new jn({color:r}),stroke:new Mn({color:"#ffffff",width:2})})})}function QTt(t,e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){const r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return t}function ekt(){const t=li(r=>r.map),e=SC(r=>r.layers),n=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Ll;i.features.features.forEach((a,l)=>{if(!a.geometry)return;const c=ZTt(a.geometry);if(!c)return;const u=new yr({geometry:c,...a.properties,layerType:"importedLayer",layerId:i.id,layerName:i.name,layerColor:i.color,featureIndex:l});u.setStyle((h,f)=>JTt(i,a.geometry.type,f)),s.addFeature(u)});const o=n.current.get(i.id);if(o)o.setSource(s),o.setVisible(i.visible),o.setOpacity(i.opacity);else{const a=new Ol({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});t.addLayer(a),n.current.set(i.id,a)}}),n.current.forEach((i,s)=>{r.has(s)||(t.removeLayer(i),n.current.delete(s))})},[t,e]),Y.useEffect(()=>()=>{t&&(n.current.forEach(r=>{t.removeLayer(r)}),n.current.clear())},[t]),null}lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");iEe(lr);function tkt(t){if(!t||t.length<2)return"unknown";const[e,n]=t;return e>=7e3&&e<=3e5&&n>=289e3&&n<=629e3?"RD":Math.abs(e)<=180&&Math.abs(n)<=90?"WGS84":"unknown"}function nkt(t){const[e,n]=t;return lr("EPSG:28992","EPSG:4326",[e,n])}function VSe(t,e){return typeof t[0]=="number"?e(t):t.map(n=>VSe(n,e))}function rkt(t){const e=t.coordinates;return!e||Array.isArray(e)&&e.length===0?null:t.type==="Point"?e:t.type==="LineString"||t.type==="MultiPoint"?e[0]:t.type==="Polygon"||t.type==="MultiLineString"?e[0]?.[0]:t.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function ikt(t){const e=[],n=[];try{const r=await t.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((c,u)=>({type:"Feature",geometry:c,properties:{id:u}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&n.push("Geen features gevonden in bestand");let o="unknown",a=!1;if(s.length>0&&s[0].geometry){const c=rkt(s[0].geometry);c&&(o=tkt(c))}o==="RD"&&(n.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),a=!0,s=s.map(c=>{if(!c.geometry)return c;const u=VSe(c.geometry.coordinates,nkt);return{...c,geometry:{...c.geometry,coordinates:u}}}),o="WGS84");const l=[...new Set(s.filter(c=>c.geometry).map(c=>c.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:n,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:o,transformed:a}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function skt(t){const e=[],n=[];try{const r=await t.text(),s=new Kyt({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in KML bestand");const l=new HO().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Feature ${h+1}`,y=f.description||f.Description||"";return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function okt(t){const e=[],n=[];try{const r=await t.text(),s=new lyt().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in GPX bestand");const l=new HO().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Waypoint ${h+1}`,y=f.desc||f.description||"",_=f.time||null,b=f.ele||null;return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y,time:_,elevation:b}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return c.includes("LineString")&&n.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function fK(t){switch(t.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function akt(){return".geojson,.json,.kml,.gpx"}function pK(){return"GeoJSON, KML (Google My Maps), GPX"}async function lkt(t){switch(fK(t.name)){case"geojson":return ikt(t);case"kml":return skt(t);case"gpx":return okt(t);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${t.name}. Ondersteunde formaten: ${pK()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function ckt(t){return t.size>10485760?{valid:!1,error:`Bestand te groot (${(t.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:fK(t.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${pK()}`}:t.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function ukt({isOpen:t,onClose:e}){const n=SC(N=>N.addLayer),r=Y.useRef(null),[i,s]=Y.useState("idle"),[o,a]=Y.useState(null),[l,c]=Y.useState(null),[u,h]=Y.useState(""),[f,g]=Y.useState(null),[y,_]=Y.useState(!1),b=Y.useCallback(()=>{s("idle"),a(null),c(null),h(""),g(null),r.current&&(r.current.value="")},[]),T=Y.useCallback(()=>{b(),e()},[b,e]),A=Y.useCallback(async N=>{const L=ckt(N);if(!L.valid){g(L.error||"Ongeldig bestand"),s("error");return}a(N),s("parsing"),g(null);const O=N.name.replace(/\.[^/.]+$/,"");h(O);try{const F=await lkt(N);if(!F.success){g(F.errors.join(`
`)),s("error");return}if(F.features.features.length===0){g("Geen features gevonden in het bestand"),s("error");return}c(F),s("preview")}catch(F){g(F instanceof Error?F.message:"Onbekende fout bij parsen"),s("error")}},[]),C=Y.useCallback(N=>{const L=N.target.files?.[0];L&&A(L)},[A]),I=Y.useCallback(N=>{N.preventDefault(),_(!0)},[]),R=Y.useCallback(N=>{N.preventDefault(),_(!1)},[]),V=Y.useCallback(N=>{N.preventDefault(),_(!1);const L=N.dataTransfer.files?.[0];L&&A(L)},[A]),P=Y.useCallback(()=>{if(!l||!u.trim())return;const N=o?fK(o.name):"geojson";n({name:u.trim(),type:N==="unsupported"?"geojson":N,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:o?.name||"unknown"}),T()},[l,u,o,n,T]);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(sI,{size:18}),p.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),p.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${y?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:I,onDragLeave:R,onDrop:V,children:[p.jsx(yq,{size:40,className:"mx-auto text-gray-400 mb-3"}),p.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),p.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),p.jsx("input",{ref:r,type:"file",accept:akt(),onChange:C,className:"hidden"})]}),p.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[p.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),p.jsx("p",{children:pK()})]})]}),i==="parsing"&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[p.jsx(iI,{size:40,className:"text-purple-500 animate-spin mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),p.jsx("p",{className:"text-gray-400 text-sm",children:o?.name})]}),i==="error"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[p.jsx(B2e,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),p.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:f})]})]}),p.jsx("button",{onClick:b,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[p.jsx(zct,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),p.jsx("p",{className:"text-sm text-green-600",children:o?.name})]})]}),l.warnings.length>0&&p.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[p.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),p.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((N,L)=>p.jsx("li",{children:N},L))})]}),p.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Features:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Types:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),p.jsx("input",{type:"text",value:u,onChange:N=>h(N.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[p.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),p.jsx("button",{onClick:P,disabled:!u.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function hkt(){const{user:t,loading:e,error:n,signInWithGoogle:r,logout:i,initAuth:s}=FL();return Y.useEffect(()=>{s()},[s]),e?p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[p.jsx(Th,{size:16,className:"animate-pulse"}),p.jsx("span",{className:"text-sm",children:"Laden..."})]}):t?p.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[t.photoURL?p.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:p.jsx(Eq,{size:16,className:"text-green-600"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:t.displayName||t.email}),p.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[p.jsx(Th,{size:12}),"Cloud sync actief"]})]}),p.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(xq,{size:16})})]}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[p.jsx(Kct,{size:16}),p.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),p.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),n&&p.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:n})]})}const dkt="https://forms.gle/R5LCk11Bzu5XrkBj8";function fkt(){const{settingsPanelOpen:t,toggleSettingsPanel:e,vondstDashboardOpen:n,toggleVondstDashboard:r,openLayerManagerModal:i}=gr(),s=an(),{presets:o,createPreset:a,deletePreset:l,updatePreset:c}=Ife(),u=uc(ne=>ne.vondsten),h=SC(ne=>ne.layers),{layers:f,updateLayer:g}=Vi(),{devMode:y,setDevMode:_,tier:b}=EB(),[T,A]=Y.useState(""),[C,I]=Y.useState(!1),[R,V]=Y.useState(!1),[P,N]=Y.useState(null),[L,O]=Y.useState(""),[F,G]=Y.useState(null),[U,ue]=Y.useState(""),[be,ze]=Y.useState("algemeen"),Ce=14*s.fontScale/100,de=()=>{T.trim()&&(a(T.trim(),"Layers"),A(""),I(!1))},Le=(ne,se)=>{N(ne),O(se)},xe=ne=>{L.trim()&&(c(ne,{name:L.trim()}),console.log(` Preset hernoemd naar "${L.trim()}"`)),N(null),O("")},Z=()=>{N(null),O("")},W=[{id:"algemeen",label:"Algemeen",icon:p.jsx(kht,{size:14})},{id:"lagen",label:"Lagen",icon:p.jsx(xc,{size:14})},{id:"vondsten",label:"Vondsten",icon:p.jsx($o,{size:14})}];return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${Ce}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(a5,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[s.showFontSliders&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:ne=>{s.setFontScale(parseInt(ne.target.value))},onChange:ne=>s.setFontScale(parseInt(ne.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:W.map(ne=>p.jsxs("button",{onClick:()=>ze(ne.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${be===ne.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[ne.icon,ne.label]},ne.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${Ce}px`},children:[be==="algemeen"&&p.jsxs(p.Fragment,{children:[p.jsx(Xh,{title:"Account",icon:p.jsx(Eq,{size:16}),children:p.jsx(hkt,{})}),p.jsxs(Xh,{title:"Kaart",icon:p.jsx(Aw,{size:16}),children:[p.jsx(pkt,{label:"Standaard achtergrond",children:p.jsxs("select",{value:s.defaultBackground,onChange:ne=>s.setDefaultBackground(ne.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),p.jsx("option",{value:"OpenStreetMap",children:"OSM"}),p.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),p.jsx(ny,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),p.jsxs(Xh,{title:"GPS",icon:p.jsx(ih,{size:16}),children:[p.jsx(ny,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),p.jsx(ny,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),p.jsxs(Xh,{title:"Feedback",icon:p.jsx(Cht,{size:16}),children:[p.jsx(ny,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback}),p.jsx(ny,{label:"Spraakfeedback vondsten",checked:s.voiceFeedbackEnabled,onChange:s.setVoiceFeedbackEnabled}),s.voiceFeedbackEnabled&&p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:[p.jsx(Qht,{size:12,className:"inline mr-1"}),"Spreekt vondst info uit bij toevoegen"]})]}),p.jsxs(Xh,{title:"Weer",icon:p.jsx(Th,{size:16}),children:[p.jsx(ny,{label:"Weerwidget tonen",checked:s.showWeatherButton,onChange:s.setShowWeatherButton}),p.jsx("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:"Actueel weer, voorspelling en buienradar"})]}),p.jsxs(Xh,{title:"Development",icon:p.jsx(eut,{size:16}),children:[p.jsx(ny,{label:"Dev Mode (alles ontgrendeld)",checked:y,onChange:_}),p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",p.jsx("span",{className:"font-medium text-blue-600",children:b}),y&&p.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),be==="lagen"&&p.jsxs(p.Fragment,{children:[p.jsx(Xh,{title:"Mijn lagen",icon:p.jsx(xc,{size:16}),isOwn:!0,children:p.jsxs("div",{className:"space-y-1",children:[f.filter(ne=>!ne.archived).length===0?p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):f.filter(ne=>!ne.archived).map(ne=>p.jsx("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:F===ne.id?p.jsx("input",{type:"text",value:U,onChange:se=>ue(se.target.value),onKeyDown:se=>{se.key==="Enter"?(U.trim()&&g(ne.id,{name:U.trim()}),G(null)):se.key==="Escape"&&G(null)},onBlur:()=>{U.trim()&&g(ne.id,{name:U.trim()}),G(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:ne.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:[ne.points.length," punten"]}),p.jsx("button",{onClick:()=>{G(ne.id),ue(ne.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:p.jsx(Wd,{size:12})})]})},ne.id)),p.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(a5,{size:14}),p.jsx("span",{children:"Lagen beheren"})]})]})}),p.jsx(Xh,{title:"Lagen importeren",icon:p.jsx(sI,{size:16}),children:p.jsxs("div",{className:"space-y-1",children:[h.length>0&&p.jsxs(p.Fragment,{children:[h.map(ne=>p.jsx(nbe,{layer:ne},ne.id)),p.jsx("div",{className:"border-t border-gray-100 my-2"})]}),p.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-2 px-2 py-1.5 text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(kc,{size:14}),p.jsx("span",{children:"Nieuwe laag importeren"})]}),p.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),p.jsx(Xh,{title:"Presets",icon:p.jsx(xc,{size:16}),children:p.jsxs("div",{className:"space-y-2",children:[o.map(ne=>p.jsx("div",{className:"flex items-center justify-between py-1",children:P===ne.id?p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("input",{type:"text",value:L,onChange:se=>O(se.target.value),onKeyDown:se=>{se.key==="Enter"&&xe(ne.id),se.key==="Escape"&&Z()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),p.jsx("button",{onClick:()=>xe(ne.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),p.jsx("button",{onClick:Z,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[ne.name,ne.isBuiltIn&&p.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),p.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",ne.layers.length," lagen)"]})]}),!ne.isBuiltIn&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>Le(ne.id,ne.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Wd,{size:14})}),p.jsx("button",{onClick:()=>l(ne.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})},ne.id)),C?p.jsxs("div",{className:"flex gap-2 mt-2",children:[p.jsx("input",{type:"text",value:T,onChange:ne=>A(ne.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:ne=>ne.key==="Enter"&&de(),autoFocus:!0}),p.jsx("button",{onClick:de,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),p.jsx("button",{onClick:()=>I(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):p.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(kc,{size:14}),p.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),be==="vondsten"&&p.jsx(p.Fragment,{children:p.jsxs(Xh,{title:"Vondsten",icon:p.jsx($o,{size:16}),isOwn:!0,children:[p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),p.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(G2e,{size:14}),p.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),p.jsx(mkt,{})]})})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${Ce}px`},children:[p.jsxs("a",{href:dkt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(z2e,{size:16}),p.jsx("span",{children:"Meld een bug"})]}),p.jsxs("button",{onClick:YTt,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(xq,{size:16}),p.jsx("span",{children:"Uitloggen"})]}),p.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),p.jsx(XTt,{isOpen:n,onClose:r}),p.jsx(ukt,{isOpen:R,onClose:()=>V(!1)})]})}function Xh({title:t,icon:e,children:n,isOwn:r}){return p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[p.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),p.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:t})]}),p.jsx("div",{className:"space-y-2",children:n})]})}function pkt({label:t,children:e}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),e]})}function ny({label:t,checked:e,onChange:n}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),p.jsx("button",{onClick:()=>n(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function mkt(){const[t,e]=Y.useState(!1),{vondsten:n,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:o,exportAsKML:a}=uc(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:o,desc:"GPS apparaten"},{label:"KML",action:a,desc:"Google Earth"}],c=u=>{u(),e(!1)};return n.length===0?p.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[p.jsx(NA,{size:14}),p.jsx("span",{children:"Geen vondsten om te exporteren"})]}):p.jsxs("div",{className:"relative mt-2",children:[p.jsxs("button",{onClick:()=>e(!t),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(NA,{size:14}),p.jsxs("span",{children:["Exporteer vondsten (",n.length,")"]})]}),p.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),t&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((u,h)=>p.jsxs("button",{onClick:()=>c(u.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[p.jsx("span",{className:"text-gray-700",children:u.label}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:u.desc})]},h))})]})}function zSe(t,e,n,r){const s=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function R$(t){let e=0;for(let n=1;n<t.length;n++)e+=zSe(t[n-1].coordinates[0],t[n-1].coordinates[1],t[n].coordinates[0],t[n].coordinates[1]);return e}const jo=vo()(kh((t,e)=>({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[],visibleRouteIds:new Set,heatmapEnabled:!1,gridEnabled:!1,gridCenter:null,gridSize:20,gridCount:10,gridColor:"rgba(139, 92, 246, 0.6)",autoPauseEnabled:!1,autoPauseSeconds:120,startRecording:()=>{t({state:"recording",currentPoints:[],startTime:Date.now(),pauseStartTime:null,totalPausedTime:0})},pauseRecording:()=>{const{state:n}=e();n==="recording"&&t({state:"paused",pauseStartTime:Date.now()})},resumeRecording:()=>{const{state:n,pauseStartTime:r,totalPausedTime:i}=e();if(n!=="paused"||!r)return;const s=Date.now()-r;t({state:"recording",pauseStartTime:null,totalPausedTime:i+s})},stopRecording:n=>{const{state:r,currentPoints:i,startTime:s,totalPausedTime:o,pauseStartTime:a}=e();if(r==="idle"||!s||i.length<2)return t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0}),null;const l=Date.now();let c=o;a&&(c+=l-a);const u=l-s-c,h=R$(i),f={id:crypto.randomUUID(),name:n||`Route ${new Date().toLocaleDateString("nl-NL")} ${new Date().toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,points:i,startTime:s,endTime:l,totalDistance:h,totalDuration:u,pausedDuration:c,createdAt:new Date().toISOString()};return t(g=>{const y=new Set(g.visibleRouteIds);return y.add(f.id),{state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[f,...g.savedRoutes],visibleRouteIds:y}}),f},cancelRecording:()=>{t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0})},addPoint:(n,r,i)=>{const{state:s,currentPoints:o}=e();if(s!=="recording")return;if(o.length>0){const l=o[o.length-1];if(zSe(l.coordinates[0],l.coordinates[1],n,r)<2)return}const a={coordinates:[n,r],timestamp:Date.now(),accuracy:i};t({currentPoints:[...o,a]})},deleteRoute:n=>{t(r=>({savedRoutes:r.savedRoutes.filter(i=>i.id!==n)}))},renameRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,name:r}:s)}))},clearAllRoutes:()=>{t({savedRoutes:[],visibleRouteIds:new Set})},toggleRouteVisibility:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.has(n)?i.delete(n):i.add(n),{visibleRouteIds:i}})},showRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.add(n),{visibleRouteIds:i}})},hideRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.delete(n),{visibleRouteIds:i}})},showAllRoutes:()=>{t(n=>({visibleRouteIds:new Set(n.savedRoutes.map(r=>r.id))}))},hideAllRoutes:()=>{t({visibleRouteIds:new Set})},toggleHeatmap:()=>{t(n=>({heatmapEnabled:!n.heatmapEnabled}))},setHeatmapEnabled:n=>{t({heatmapEnabled:n})},toggleGrid:()=>{t(n=>({gridEnabled:!n.gridEnabled}))},setGridEnabled:n=>{t({gridEnabled:n})},setGridCenter:n=>{t({gridCenter:n})},setGridSize:n=>{t({gridSize:n})},setGridCount:n=>{t({gridCount:n})},setGridColor:n=>{t({gridColor:n})},centerGridOnCurrentLocation:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(n=>{t({gridCenter:[n.coords.longitude,n.coords.latitude],gridEnabled:!0})},n=>{console.error("Could not get location:",n)})},setAutoPauseEnabled:n=>{t({autoPauseEnabled:n})},setAutoPauseSeconds:n=>{t({autoPauseSeconds:n})},importRouteFromGPX:(n,r)=>{try{const s=new DOMParser().parseFromString(n,"application/xml");if(s.querySelector("parsererror"))return{success:!1,error:"Ongeldig XML formaat"};const a=s.querySelectorAll("trkpt");if(a.length<2&&s.querySelectorAll("wpt").length<2)return{success:!1,error:"Geen route punten gevonden in GPX bestand"};const l=[];if((a.length>0?a:s.querySelectorAll("wpt")).forEach(b=>{const T=parseFloat(b.getAttribute("lat")||"0"),A=parseFloat(b.getAttribute("lon")||"0"),C=b.querySelector("time"),I=C?new Date(C.textContent||"").getTime():Date.now();!isNaN(T)&&!isNaN(A)&&l.push({coordinates:[A,T],timestamp:isNaN(I)?Date.now():I})}),l.length<2)return{success:!1,error:"Niet genoeg geldige punten in GPX bestand"};const u=s.querySelector("trk > name")?.textContent||s.querySelector("metadata > name")?.textContent||r||`Import ${new Date().toLocaleDateString("nl-NL")}`,h=R$(l),f=l[0].timestamp,g=l[l.length-1].timestamp,y=g-f,_={id:crypto.randomUUID(),name:u,points:l,startTime:f,endTime:g,totalDistance:h,totalDuration:y>0?y:0,pausedDuration:0,createdAt:new Date().toISOString()};return t(b=>{const T=new Set(b.visibleRouteIds);return T.add(_.id),{savedRoutes:[_,...b.savedRoutes],visibleRouteIds:T}}),{success:!0,routeId:_.id}}catch(i){return console.error("GPX import error:",i),{success:!1,error:"Fout bij importeren van GPX bestand"}}},updateRouteNotes:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,notes:r}:s)}))},addPhotoToRoute:(n,r)=>{const i={...r,id:crypto.randomUUID(),timestamp:new Date().toISOString()};t(s=>({savedRoutes:s.savedRoutes.map(o=>o.id===n?{...o,photos:[...o.photos||[],i]}:o)}))},removePhotoFromRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,photos:(s.photos||[]).filter(o=>o.id!==r)}:s)}))},getCurrentDistance:()=>{const{currentPoints:n}=e();return R$(n)},getCurrentDuration:()=>{const{state:n,startTime:r,totalPausedTime:i,pauseStartTime:s}=e();if(!r)return 0;const o=Date.now();let a=i;return n==="paused"&&s&&(a+=o-s),o-r-a},getAverageSpeed:()=>{const n=e().getCurrentDistance(),r=e().getCurrentDuration();return r===0?0:n/1e3/(r/36e5)}}),{name:"detectorapp-route-recording",version:2,partialize:t=>({savedRoutes:t.savedRoutes,visibleRouteIds:Array.from(t.visibleRouteIds),heatmapEnabled:t.heatmapEnabled,gridEnabled:t.gridEnabled,gridCenter:t.gridCenter,gridSize:t.gridSize,gridCount:t.gridCount,gridColor:t.gridColor,autoPauseEnabled:t.autoPauseEnabled,autoPauseSeconds:t.autoPauseSeconds}),merge:(t,e)=>({...e,...t,visibleRouteIds:new Set(t?.visibleRouteIds||[])})}));function GSe(t){const e=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t.name}</name>
    <time>${new Date(t.startTime).toISOString()}</time>
  </metadata>
  <trk>
    <name>${t.name}</name>
    <trkseg>
${t.points.map(s=>`      <trkpt lat="${s.coordinates[1]}" lon="${s.coordinates[0]}">
        <time>${new Date(s.timestamp).toISOString()}</time>
      </trkpt>`).join(`
`)}
    </trkseg>
  </trk>
</gpx>`,n=new Blob([e],{type:"application/gpx+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${t.name.replace(/[^a-zA-Z0-9]/g,"-")}.gpx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const M$=2e3;async function gkt(){const t=[Vi,uc,jo];await Promise.all(t.map(e=>e.persist.hasHydrated()?Promise.resolve():new Promise(n=>{const r=e.persist.onFinishHydration(()=>{r(),n()})})))}function USe(){const t=FL(A=>A.user),{layers:e,clearAll:n}=Vi(),{vondsten:r,clearAll:i}=uc(),{savedRoutes:s}=jo(),o=Y.useRef(null),a=Y.useRef(!0),l=Y.useRef(""),c=Y.useRef(""),u=Y.useRef(""),[h,f]=Y.useState(!1);Y.useEffect(()=>{gkt().then(()=>{f(!0),console.log(" Stores gehydrateerd uit localStorage")})},[]);const g=Y.useCallback(async A=>{if(t)try{const C=eg(ep,"users",t.uid);await UP(C,{layers:A,layersUpdatedAt:k_()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(C){console.error(" Fout bij synchroniseren lagen:",C)}},[t]),y=Y.useCallback(async A=>{if(t)try{const C=eg(ep,"users",t.uid);await UP(C,{vondsten:A,vondstenUpdatedAt:k_()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(C){console.error(" Fout bij synchroniseren vondsten:",C)}},[t]),_=Y.useCallback(async A=>{if(t)try{const C=eg(ep,"users",t.uid);await UP(C,{routes:A,routesUpdatedAt:k_()},{merge:!0}),console.log(" Routes gesynchroniseerd naar cloud")}catch(C){console.error(" Fout bij synchroniseren routes:",C)}},[t]),b=Y.useCallback(async()=>{if(t)try{const A=eg(ep,"users",t.uid),C=await ZQ(A);if(C.exists()){const I=C.data();if(I.layers&&Array.isArray(I.layers)){const R=I.layers,V=Vi.getState().layers,P=[...R],N=new Set(R.map(L=>L.id));V.forEach(L=>{N.has(L.id)||P.push(L)}),Vi.setState({layers:P}),l.current=JSON.stringify(P),console.log(` ${R.length} lagen geladen uit cloud`)}if(I.vondsten&&Array.isArray(I.vondsten)){const R=I.vondsten,V=uc.getState().vondsten,P=[...R],N=new Set(R.map(L=>L.id));V.forEach(L=>{N.has(L.id)||P.push(L)}),uc.setState({vondsten:P}),c.current=JSON.stringify(P),console.log(` ${R.length} vondsten geladen uit cloud`)}if(I.routes&&Array.isArray(I.routes)){const R=I.routes,V=jo.getState().savedRoutes,P=[...R],N=new Set(R.map(O=>O.id));V.forEach(O=>{N.has(O.id)||P.push(O)});const L=new Set(P.map(O=>O.id));jo.setState({savedRoutes:P,visibleRouteIds:L}),u.current=JSON.stringify(P),console.log(` ${R.length} routes geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await g(e),await y(r),await _(s);a.current=!1}catch(A){console.error(" Fout bij laden uit cloud:",A),a.current=!1}},[t,e,r,s,g,y,_]);Y.useEffect(()=>{h&&(t?(a.current=!0,b()):(a.current=!0,l.current="",c.current="",u.current=""))},[t?.uid,h]),Y.useEffect(()=>{if(!t||!h||a.current)return;const A=JSON.stringify(e);if(A!==l.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l.current=A,g(e)},M$),()=>{o.current&&clearTimeout(o.current)}},[t,e,g]),Y.useEffect(()=>{if(!t||!h||a.current)return;const A=JSON.stringify(r);if(A!==c.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{c.current=A,y(r)},M$),()=>{o.current&&clearTimeout(o.current)}},[t,r,y]),Y.useEffect(()=>{if(!t||!h||a.current)return;const A=JSON.stringify(s);if(A!==u.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{u.current=A,_(s)},M$),()=>{o.current&&clearTimeout(o.current)}},[t,s,_]);const T=Y.useCallback(async()=>{if(!t)return{success:!1,uploaded:{layers:0,vondsten:0,routes:0},downloaded:{layers:0,vondsten:0,routes:0},error:"Niet ingelogd"};try{const A=Vi.getState().layers,C=uc.getState().vondsten,I=jo.getState().savedRoutes,R=eg(ep,"users",t.uid),V=await ZQ(R),P=V.exists()?V.data():{},N=P.layers||[],L=P.vondsten||[],O=P.routes||[],F=new Set(N.map(me=>me.id)),G=new Set(A.map(me=>me.id)),U=A.filter(me=>!F.has(me.id)),ue=N.filter(me=>!G.has(me.id)),be=[...N,...U],ze=new Set(L.map(me=>me.id)),Ce=new Set(C.map(me=>me.id)),de=C.filter(me=>!ze.has(me.id)),Le=L.filter(me=>!Ce.has(me.id)),xe=[...L,...de],Z=new Set(O.map(me=>me.id)),W=new Set(I.map(me=>me.id)),ne=I.filter(me=>!Z.has(me.id)),se=O.filter(me=>!W.has(me.id)),Q=[...O,...ne];return Vi.setState({layers:be}),uc.setState({vondsten:xe}),jo.setState({savedRoutes:Q,visibleRouteIds:new Set(Q.map(me=>me.id))}),l.current=JSON.stringify(be),c.current=JSON.stringify(xe),u.current=JSON.stringify(Q),await UP(R,{layers:be,vondsten:xe,routes:Q,layersUpdatedAt:k_(),vondstenUpdatedAt:k_(),routesUpdatedAt:k_()},{merge:!0}),console.log(" Handmatige sync voltooid"),{success:!0,uploaded:{layers:U.length,vondsten:de.length,routes:ne.length},downloaded:{layers:ue.length,vondsten:Le.length,routes:se.length}}}catch(A){return console.error(" Sync fout:",A),{success:!1,uploaded:{layers:0,vondsten:0,routes:0},downloaded:{layers:0,vondsten:0,routes:0},error:A instanceof Error?A.message:"Sync mislukt"}}},[t]);return{isLoggedIn:!!t,syncLayersToCloud:g,syncVondstenToCloud:y,syncRoutesToCloud:_,syncNow:T}}const O5="2.32.61";function ykt({size:t=18}){return p.jsxs("svg",{viewBox:"0 0 24 24",width:t,height:t,children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function vkt(){const[t,e]=Y.useState(!1),[n,r]=Y.useState(!1),[i,s]=Y.useState(null),{user:o,loading:a,signInWithGoogle:l,logout:c}=FL(),{toggleInfoPanel:u,toggleSettingsPanel:h,toggleMonumentSearch:f}=gr(),{syncNow:g}=USe(),y=an(Q=>Q.menuFontScale),_=an(Q=>Q.setMenuFontScale),b=an(Q=>Q.showFontSliders),T=an(Q=>Q.setShowFontSliders),A=an(Q=>Q.showVondstButton),C=an(Q=>Q.setShowVondstButton),I=an(Q=>Q.showRouteRecordButton),R=an(Q=>Q.setShowRouteRecordButton),V=an(Q=>Q.showCustomPointLayers),P=an(Q=>Q.setShowCustomPointLayers),N=an(Q=>Q.showWeatherButton),L=an(Q=>Q.setShowWeatherButton),O=an(Q=>Q.showMeasureTool),F=an(Q=>Q.setShowMeasureTool),G=an(Q=>Q.showDrawTool),U=an(Q=>Q.setShowDrawTool),ue=an(Q=>Q.showPrintTool),be=an(Q=>Q.setShowPrintTool),ze={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},Ce=()=>e(!1),de=()=>{Ce(),u()},Le=()=>{Ce(),h()},xe=()=>{Ce(),f()},Z=()=>{Ce(),l()},W=()=>{Ce(),c()},ne=async()=>{if(!(!o||n)){r(!0),s(null);try{const Q=await g();s(Q),setTimeout(()=>s(null),5e3)}catch(Q){s({success:!1,uploaded:{layers:0,vondsten:0,routes:0},downloaded:{layers:0,vondsten:0,routes:0},error:Q instanceof Error?Q.message:"Sync mislukt"})}finally{r(!1)}}},se=13*y/100;return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${t?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:ze,onClick:()=>e(!t),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:t?p.jsx(Qr,{size:22,className:"text-white"}):p.jsx(s5,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ce}),p.jsxs(yt.div,{initial:{opacity:0,x:50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{duration:.15},className:"fixed right-[56px] z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col max-h-[80vh]",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)))",fontSize:`${se}px`},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white",style:{fontSize:`${se}px`},children:"Menu"}),b&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:y,onInput:Q=>_(parseInt(Q.target.value)),onChange:Q=>_(parseInt(Q.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${y}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),a?p.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:p.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):o?p.jsxs("div",{className:"px-3 py-3 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[o.photoURL?p.jsx("img",{src:o.photoURL,alt:o.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:p.jsx(Eq,{size:16,className:"text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:o.displayName||"Gebruiker"}),p.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),p.jsx("button",{onClick:W,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(xq,{size:16})})]}),p.jsxs("button",{onClick:ne,disabled:n,className:"mt-2 w-full px-3 py-2 flex items-center gap-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border-0 outline-none disabled:opacity-50",children:[p.jsx(Q2e,{size:16,className:`text-blue-500 ${n?"animate-spin":""}`}),p.jsx("span",{className:"text-blue-700",style:{fontSize:"0.85em"},children:n?"Synchroniseren...":"Synchroniseren"})]}),i&&p.jsx("div",{className:`mt-2 p-2 rounded-lg text-xs ${i.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:i.error?p.jsx("p",{children:i.error}):p.jsxs("p",{children:[i.uploaded.layers+i.uploaded.vondsten+i.uploaded.routes>0&&p.jsxs("span",{children:[i.uploaded.layers+i.uploaded.vondsten+i.uploaded.routes," geupload"]}),i.uploaded.layers+i.uploaded.vondsten+i.uploaded.routes>0&&i.downloaded.layers+i.downloaded.vondsten+i.downloaded.routes>0&&", ",i.downloaded.layers+i.downloaded.vondsten+i.downloaded.routes>0&&p.jsxs("span",{children:[i.downloaded.layers+i.downloaded.vondsten+i.downloaded.routes," gedownload"]}),i.uploaded.layers+i.uploaded.vondsten+i.uploaded.routes===0&&i.downloaded.layers+i.downloaded.vondsten+i.downloaded.routes===0&&p.jsx("span",{children:"Alles is gesynchroniseerd"})]})})]}):p.jsxs("button",{onClick:Z,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[p.jsx(ykt,{size:18}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),p.jsxs("div",{className:"py-1",children:[p.jsxs("button",{onClick:de,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[p.jsx(_q,{size:18,className:"text-blue-500"}),p.jsx("span",{children:"Info & handleiding"})]}),p.jsxs("button",{onClick:xe,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-purple-50",style:{fontSize:"0.95em"},children:[p.jsx(q2e,{size:18,className:"text-purple-500"}),p.jsx("span",{children:"Zoek in monumenten"})]})]}),p.jsxs("div",{className:"py-1 border-t border-gray-100",children:[p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx($o,{size:18,className:"text-orange-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Vondst knop"})]}),p.jsx("button",{onClick:()=>C(!A),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${A?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${A?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(o5,{size:18,className:"text-green-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Route knop"})]}),p.jsx("button",{onClick:()=>R(!I),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${I?"bg-gradient-to-r from-green-500 to-green-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${I?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Th,{size:18,className:"text-cyan-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Weerwidget"})]}),p.jsx("button",{onClick:()=>L(!N),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${N?"bg-gradient-to-r from-cyan-500 to-cyan-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${N?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(xc,{size:18,className:"text-amber-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Mijn lagen"})]}),p.jsx("button",{onClick:()=>P(!V),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${V?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${V?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Od,{size:18,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Meten"})]}),p.jsx("button",{onClick:()=>F(!O),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${O?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${O?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Wd,{size:18,className:"text-orange-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekenen"})]}),p.jsx("button",{onClick:()=>U(!G),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${G?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${G?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(OA,{size:18,className:"text-indigo-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Exporteren"})]}),p.jsx("button",{onClick:()=>be(!ue),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${ue?"bg-gradient-to-r from-indigo-500 to-indigo-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${ue?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(bq,{size:18,className:"text-purple-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekstgrootte"})]}),p.jsx("button",{onClick:()=>T(!b),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${b?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${b?"left-[22px]":"left-0.5"}`})})]})]}),p.jsx("div",{className:"mt-auto border-t border-gray-100",children:p.jsxs("button",{onClick:Le,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[p.jsx(a5,{size:18,className:"text-gray-500"}),p.jsx("span",{children:"Instellingen"})]})}),p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:["DetectorApp NL v",O5]})]})]})})]})}const _kt="https://forms.gle/R5LCk11Bzu5XrkBj8";function xkt(){const{infoPanelOpen:t,toggleInfoPanel:e}=gr(),[n,r]=Y.useState("info"),i=[{id:"info",label:"Info",icon:p.jsx(_q,{size:14})},{id:"functies",label:"Functies",icon:p.jsx(yq,{size:14})},{id:"handleiding",label:"Handleiding",icon:p.jsx(V2e,{size:14})}];return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[p.jsxs("span",{className:"font-medium text-white",children:["DetectorApp NL v",O5]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white",strokeWidth:2.5})})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>p.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${n===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[n==="info"&&p.jsx(wkt,{}),n==="functies"&&p.jsx(bkt,{}),n==="handleiding"&&p.jsx(Ekt,{}),p.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[p.jsxs("a",{href:_kt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[p.jsx(z2e,{size:14}),p.jsx("span",{className:"text-sm",children:"Meld een bug of geef feedback"})]}),p.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["DetectorApp NL v",O5," - Gratis en zonder tracking"]})]})]})]})]})})}function wkt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),p.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d gratis kaartapplicatie voor metaaldetectie, fossielen zoeken en archeologische verkenning in Nederland. Met 70+ kaartlagen, GPS tracking met richtingspijl, eigen lagen, cloud sync en uitgebreid vondstenbeheer."})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),p.jsxs("ul",{className:"space-y-2 text-gray-600",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"AMK Monumenten, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen, Archeo Onderzoeken"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN Hoogtekaarten, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen, Gewaspercelen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Terpen, Parken, Kringloopwinkels, Musea, Speeltuinen, Strandjes"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Itiner-E / Wetenschappelijk"})," (CC BY 4.0)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Mindat.org"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Mineralen hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Paleontica / Fossielen data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Fossiel hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Map5.nl / Kadaster"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciale data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data, Expert advies, Bufferlagen"})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy & Opslag"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Volledig anoniem mogelijk:"})," Je kunt deze app gebruiken zonder enige registratie of login. Al je data blijft dan 100% op je eigen apparaat."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Geen tracking:"})," Deze app verzamelt geen analytics, cookies, gebruiksstatistieken of persoonlijke gegevens. Er is geen server die je gedrag registreert."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Locatiegegevens:"})," Je GPS-positie wordt alleen gebruikt om je locatie op de kaart te tonen. Deze wordt niet opgeslagen of gedeeld met derden."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Google Login - Wat betekent het?"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-green-700",children:" Google login is volledig optioneel"}),p.jsx("p",{children:p.jsx("strong",{children:"Wat wordt gesynchroniseerd:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je eigen aangemaakte lagen (Mijn Lagen)"}),p.jsx("li",{children:"Je vondsten registraties"}),p.jsx("li",{children:"Je preset-instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Wat NIET wordt gedeeld:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je GPS-locatie wordt niet opgeslagen in de cloud"}),p.jsx("li",{children:"Je zoekgeschiedenis wordt niet bewaard"}),p.jsx("li",{children:"Welke kaartlagen je bekijkt wordt niet geregistreerd"}),p.jsx("li",{children:"Niemand anders kan je data zien - alleen jij"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Waarom inloggen?"})," Alleen voor synchronisatie tussen apparaten (telefoon/tablet/PC) en als backup voor je vondsten."]}),p.jsx("p",{className:"text-xs text-gray-500 italic",children:"Tip: Gebruik de app gerust zonder login als je privacy belangrijker vindt dan synchronisatie. Alle functies werken ook offline."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zonder login (anoniem)"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-blue-700",children:" 95% van de functies werkt zonder login"}),p.jsx("p",{children:p.jsx("strong",{children:"Beschikbaar zonder login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Alle 70+ kaartlagen bekijken"}),p.jsx("li",{children:"GPS tracking en navigatie"}),p.jsx("li",{children:"Vondsten registreren (lokaal opgeslagen)"}),p.jsx("li",{children:"Eigen lagen aanmaken (lokaal opgeslagen)"}),p.jsx("li",{children:"Export naar Excel/CSV/GeoJSON/GPX/KML"}),p.jsx("li",{children:"Lagen importeren"}),p.jsx("li",{children:"Alle presets en instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Alleen met login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Synchronisatie tussen apparaten"}),p.jsx("li",{children:"Cloud backup van je vondsten"})]})]})]})]})}function bkt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Aw,{size:16,className:"text-blue-600"}),"Kaartlagen (70+)"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Archeo Onderzoeken, IKAW, Essen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeins:"})," Romeinse wegen, Romeinse Forten met historische info, Limesweg"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Erfgoed:"})," Rijksmonumenten, Kastelen, Runes, Religieus Erfgoed"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Percelen:"})," Gewaspercelen (met bouwplantoelichting), Kadastrale Grenzen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes, Wandelroutes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV:"})," Uiterwaard data, Expert advies, Vlakken, Punten, Bufferlagen"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Sut,{size:16,className:"text-purple-600"}),"Mineralen & Fossielen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Mineralen hotspots:"})," Vindplaatsen uit Mindat.org met mineralenlijst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Goudrivieren:"})," Bekende locaties voor goud zoeken"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fossiel hotspots:"})," Vindplaatsen met fossieltypen en periodes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Premium lagen:"})," Gedetailleerde data (beschikbaar met account)"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(yut,{size:16,className:"text-orange-600"}),"Mijn Lagen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen:"})," Maak lagen voor vakantie, projecten, etc."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Toevoegen:"})," Tik op + in popup om monument/locatie aan laag toe te voegen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Polygonen:"})," Hele monumentgebieden worden opgeslagen, niet alleen een punt"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Originele info:"})," Popup content blijft behouden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Kleuren:"})," Elke laag krijgt eigen kleur (aanpasbaar)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Import:"})," Laad GeoJSON, KML of GPX bestanden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Export:"})," Exporteer lagen als GeoJSON"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Th,{size:16,className:"text-green-600"}),"Google Cloud Sync"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Inloggen:"})," Via hamburger menu rechtsboven"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Synchronisatie:"})," Lagen en vondsten automatisch naar cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Meerdere apparaten:"})," Altijd toegang tot je data"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Veilig:"})," Alleen jij hebt toegang tot je gegevens"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(ih,{size:16,className:"text-green-600"}),"GPS & Navigatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),p.jsx("li",{children:"Richtingspijl draait mee met je telefoon"}),p.jsx("li",{children:"Kaart handmatig draaien + kompasknop naar noorden"}),p.jsx("li",{children:"Schaalbalk onderaan (aan/uit in Instellingen)"}),p.jsx("li",{children:"Open locatie in Google Maps vanuit popup"}),p.jsx("li",{children:"Zoekbalk voor adressen en plaatsen"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx($o,{size:16,className:"text-orange-600"}),"Vondsten"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Toevoegen via GPS locatie, long-press of handmatig"}),p.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht"}),p.jsx("li",{children:"Foto's toevoegen (link of upload)"}),p.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),p.jsx("li",{children:"Dashboard met statistieken"}),p.jsx("li",{children:"Cloud sync met Google account"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(xc,{size:16,className:"text-purple-600"}),"Presets"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Standaard:"})," Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen, Mineralen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Aanpasbaar:"})," Overschrijf preset met huidige lagen (diskette-icoon)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen presets:"})," Maak nieuwe via Instellingen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Tekstgrootte:"})," Aanpasbaar per panel via slider"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Hut,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Kadastrale aanduiding (gemeente, sectie, nummer)"}),p.jsx("li",{children:"Oppervlakte in m en hectare"}),p.jsx("li",{children:"Gewas en bouwplan met uitleg"}),p.jsx("li",{children:"Bodemtype met beschrijving"}),p.jsx("li",{children:"AHN hoogte in meters NAP"}),p.jsx("li",{children:"Hoogtekaart per perceel (bergje-icoon)"}),p.jsx("li",{children:"Link naar eigenaar opzoeken (Kadaster)"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Eht,{size:16,className:"text-red-600"}),"Monumenten & Erfgoed"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"AMK:"})," Archeologische Monumenten per periode"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeinse Forten:"})," Uitgebreide historische info per fort"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Rijksmonumenten:"})," Met bescherming en historie"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Verdedigingswerken:"})," Linies, forten, schansen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Popup info:"})," Directe uitleg over archeologische waarde"]})]})]})]})}function Ekt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),p.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"GPS knop"})," (rechtsonder, oranje) om je locatie te zien"]}),p.jsxs("li",{children:["Kies een ",p.jsx("strong",{children:"preset"})," (linksonder, laagjes-icoon) voor een snelle start"]}),p.jsxs("li",{children:["Of open ",p.jsx("strong",{children:"Kaartlagen"})," om individuele lagen aan te zetten"]}),p.jsx("li",{children:"Tik op objecten op de kaart voor gedetailleerde informatie"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Hamburger Menu"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsx("p",{children:"Rechtsboven vind je het menu met:"}),p.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Google Login:"})," Synchroniseer je data naar de cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst toevoegen:"})," Registreer een nieuwe vondst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Info & Handleiding:"})," Dit scherm"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Instellingen:"})," Presets, export, weergave"]})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS & Navigatie"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"GPS knop (oranje):"})," Aan/uit toggle voor locatie tracking."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Richtingspijl:"})," Blauwe pijl toont de richting van je telefoon."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kaart draaien:"})," Met twee vingers of via kompas."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als kaart gedraaid is. Tik om naar noorden te draaien."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Google Maps:"})," Vanuit elke popup kun je direct navigeren."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Locaties opslaan in Mijn Lagen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Tik op een object op de kaart (monument, bunker, etc.)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"})," Tik op de ",p.jsx("strong",{children:"oranje +"})," knop in de popup header"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een bestaande laag of maak een nieuwe aan"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," De locatie inclusief vorm (polygoon) en info wordt opgeslagen!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Tip: Maak lagen voor vakantiebestemmingen, projecten of interessante locaties."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst registreren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Via GPS:"})," Open menu  Vondst toevoegen. Je locatie wordt automatisch ingevuld."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Via long-press:"}),' Houd je vinger op de kaart  kies "Vondst toevoegen".']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Handmatig:"}),' In het formulier  "Kies op kaart" voor exacte locatie.']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Foto's:"})," Voeg foto-links toe of upload direct."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Toepassen:"})," Linksonder  preset kiezen."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Aanpassen:"})," Zet gewenste lagen aan  tik diskette-icoon naast preset."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Nieuw maken:"}),' Instellingen  Presets  "Huidige lagen opslaan".']})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Cloud Sync instellen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Open hamburger menu rechtsboven"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Tik op "Inloggen met Google"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies je Google account"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Klaar!"})," Je lagen en vondsten worden automatisch gesynchroniseerd."]}),p.jsx("p",{className:"text-gray-500 italic",children:"Je data is veilig en alleen voor jou toegankelijk."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Lagen importeren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Ga naar Instellingen (hamburger menu)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Scroll naar "Lagen importeren"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een GeoJSON, KML of GPX bestand"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," Nieuwe laag met je geimporteerde data!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Handig voor routes, waypoints of eigen datasets."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor detectie"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),p.jsxs("li",{children:["Combineer ",p.jsx("strong",{children:"AMK"})," met ",p.jsx("strong",{children:"Gewaspercelen"})," voor slimme zoeklocaties"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"historische kaarten"})," (TMK 1850) om oude structuren te vinden"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Archeo Onderzoeken"})," voor eerdere vondsten in het gebied"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Bodemkaart"})," toont of grond geschikt is (popup legt uit)"]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor fossielen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Fossiel hotspots"})," aan voor bekende vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Paleokaarten"})," voor historische kustlijnen"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"Geomorfologie"})," voor oude zeebodems en rivieren"]}),p.jsx("li",{children:"Popup toont welke fossielen op elke locatie gevonden zijn"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor mineralen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Mineralen hotspots"})," aan voor vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Goudrivieren"})," voor goudzoekmogelijkheden"]}),p.jsx("li",{children:"Popup toont welke mineralen op elke locatie voorkomen"}),p.jsx("li",{children:"Links naar Mindat.org voor gedetailleerde info"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Og,{size:16,className:"text-blue-600"}),"Handige links"]}),p.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("li",{children:[p.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.mindat.org/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Mindat.org - Mineralen database"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Wereldwijde mineralen informatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.cultureelerfgoed.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Rijksdienst voor Cultureel Erfgoed"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Officile monumenten informatie"})]})]})]})]})}let bg=null,_k=null;function BSe(){if(typeof window>"u"||!("speechSynthesis"in window))return!1;bg=window.speechSynthesis;const t=()=>{const e=bg?.getVoices()||[];_k=e.find(n=>n.lang.startsWith("nl")||n.name.toLowerCase().includes("dutch")||n.name.toLowerCase().includes("nederland"))||null,!_k&&e.length>0&&(_k=e[0])};return t(),bg&&(bg.onvoiceschanged=t),!0}function Skt(t,e){if(!bg&&!BSe()||!bg)return;bg.cancel();const n=new SpeechSynthesisUtterance(t);_k&&(n.voice=_k),n.lang="nl-NL",n.rate=e?.rate,n.pitch=e?.pitch??1,n.volume=e?.volume??1,bg.speak(n)}function Tkt(t){const e=[];e.push(`${t.type} toegevoegd`),t.material&&t.material!=="Onbekend"&&e.push(`Materiaal: ${t.material}`),t.period&&t.period!=="Onbekend"&&e.push(`Periode: ${t.period}`),t.layerName&&t.layerName!=="Vondsten"&&e.push(`Opgeslagen in ${t.layerName}`);const n=e.join(". ");Skt(n,{rate:1.1})}BSe();const kkt="detectorapp-photos",Akt=1,D5="photos",Ckt=1024,Ikt=200,Pkt=.8,Rkt=.7;function Mkt(){return new Promise((t,e)=>{const n=indexedDB.open(kkt,Akt);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(D5)||i.createObjectStore(D5,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}})}async function Hae(t,e,n){return new Promise((r,i)=>{const s=new Image,o=URL.createObjectURL(t);s.onload=()=>{URL.revokeObjectURL(o);let{width:a,height:l}=s;(a>e||l>e)&&(a>l?(l=Math.round(l*e/a),a=e):(a=Math.round(a*e/l),l=e));const c=document.createElement("canvas");c.width=a,c.height=l;const u=c.getContext("2d");if(!u){i(new Error("Could not get canvas context"));return}u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(s,0,0,a,l),c.toBlob(h=>{h?r({blob:h,width:a,height:l}):i(new Error("Could not create blob"))},"image/jpeg",n)},s.onerror=()=>{URL.revokeObjectURL(o),i(new Error("Could not load image"))},s.src=o})}async function Nkt(t,e){const{blob:n,width:r,height:i}=await Hae(e,Ckt,Pkt),{blob:s}=await Hae(e,Ikt,Rkt),o={id:t,fullImage:n,thumbnail:s,originalName:e.name,mimeType:"image/jpeg",width:r,height:i,size:n.size,createdAt:new Date().toISOString()},a=await Mkt();return new Promise((l,c)=>{const u=a.transaction(D5,"readwrite"),f=u.objectStore(D5).put(o);f.onsuccess=()=>l(o),f.onerror=()=>c(f.error),u.oncomplete=()=>a.close()})}function N$({label:t,value:e,onChange:n,options:r,required:i=!1,placeholder:s="Typ hier..."}){const[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(""),f=e&&!r.includes(e),g=()=>{c(!0),h(f?e:""),a(!1)},y=()=>{u.trim()&&n(u.trim()),c(!1)};return l?p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:u,onChange:_=>h(_.target.value),onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),y()),_.key==="Escape"&&c(!1)},onBlur:y,placeholder:s,autoFocus:!0,className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}):p.jsxs("div",{className:"relative",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-left",style:{border:"none",outline:"none"},children:[p.jsxs("span",{className:e?"":"text-gray-400",children:[e||"Selecteer...",f&&p.jsx(Eoe,{size:12,className:"inline ml-1 text-orange-500"})]}),p.jsx(Fb,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&p.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[p.jsxs("button",{type:"button",onClick:g,className:"w-full px-3 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[p.jsx(Eoe,{size:12}),"Eigen invoer..."]}),p.jsx("div",{className:"border-t border-gray-100"}),r.map(_=>p.jsx("button",{type:"button",onClick:()=>{n(_),a(!1)},className:`w-full px-3 py-2 text-left text-sm transition-colors ${_===e?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,style:{border:"none",outline:"none"},children:_},_))]})]})}function WSe({onClose:t,initialLocation:e}){const n=Is(Xe=>Xe.position),r=li(Xe=>Xe.map),i=gr(Xe=>Xe.vondstFormPhoto),s=Vi(Xe=>Xe.layers),o=Vi(Xe=>Xe.addPoint);Vi(Xe=>Xe.addPhotoToPoint);const a=an(Xe=>Xe.voiceFeedbackEnabled),l=jo(Xe=>Xe.state),c=jo(Xe=>Xe.startTime);jo(Xe=>Xe.savedRoutes);const u=()=>l==="idle"||!c?null:`Route ${new Date(c).toLocaleDateString("nl-NL")} ${new Date(c).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,h=l==="recording"||l==="paused",f=u(),[g,y]=Y.useState(""),[_,b]=Y.useState(""),[T,A]=Y.useState(""),[C,I]=Y.useState(""),[R,V]=Y.useState(!1),[P,N]=Y.useState(void 0),[L,O]=Y.useState(void 0),[F,G]=Y.useState(nu),[U,ue]=Y.useState(i),[be,ze]=Y.useState(null);Y.useEffect(()=>{if(U){const Xe=URL.createObjectURL(U);return ze(Xe),()=>URL.revokeObjectURL(Xe)}else ze(null)},[U]);const[Ce,de]=Y.useState(e?"map-pick":n?"gps":"map-center"),[Le,xe]=Y.useState(e||null),[Z,W]=Y.useState(!1),ne=()=>{if(Ce==="gps"&&n)return{lat:n.lat,lng:n.lng};if(Ce==="map-pick"&&Le)return Le;if(r){const Xe=r.getView().getCenter();if(Xe){const[cn,jt]=$n(Xe);return{lat:jt,lng:cn}}}return null},se=ne();Y.useEffect(()=>{if(!Z||!r)return;const Xe=cn=>{const[jt,gn]=$n(cn.coordinate);xe({lat:gn,lng:jt}),de("map-pick"),W(!1)};return r.on("click",Xe),()=>r.un("click",Xe)},[Z,r]);const Q=()=>W(!0),me=()=>{n&&(de("gps"),xe(null))},Ke=()=>{const Xe=document.createElement("input");Xe.type="file",Xe.accept="image/*",Xe.capture="environment",Xe.onchange=cn=>{const jt=cn.target.files?.[0];jt&&ue(jt)},Xe.click()},Ye=()=>ue(null),ke=async Xe=>{Xe.preventDefault();const cn=ne();if(!cn){alert("Geen locatie beschikbaar");return}if(!_){alert("Vul een naam/type in");return}V(!0);try{let jt=g||"";if(F===nu){const pt=[];T&&pt.push(`Materiaal: ${T}`),C&&pt.push(`Periode: ${C}`),P&&pt.push(`Gewicht: ${P}g`),L&&pt.push(`Lengte: ${L}mm`),pt.length>0&&(jt=pt.join(" | ")+(g?` | ${g}`:""))}let gn;if(U){const pt=crypto.randomUUID();try{const hr=await Nkt(pt,U),zn=await Ee(hr.thumbnail);gn={id:pt,thumbnailBase64:zn,createdAt:hr.createdAt}}catch(hr){console.error("Failed to save photo:",hr)}}o(F,{coordinates:[cn.lng,cn.lat],name:_,category:F===nu?_:"Overig",notes:jt||"",...gn?{photos:[gn]}:{},...h&&c?{routeId:`recording-${c}`,routeName:f||void 0}:{}});const wn=s.find(pt=>pt.id===F)?.name||"Vondsten";a&&Tkt({type:_,material:T||void 0,period:C||void 0,layerName:wn}),alert(`Toegevoegd aan ${wn}! ${gn?" (met foto)":""}`),t()}catch(jt){alert("Fout bij opslaan: "+jt.message)}finally{V(!1)}},Ee=Xe=>new Promise((cn,jt)=>{const gn=new FileReader;gn.onloadend=()=>cn(gn.result),gn.onerror=jt,gn.readAsDataURL(Xe)}),Dt=Y.useMemo(()=>s.map(Xe=>({id:Xe.id,name:Xe.name,color:Xe.color})),[s]);return Z?p.jsx(yt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:p.jsxs("div",{className:"bg-orange-500 text-white rounded-xl shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(r5,{size:24,className:"animate-pulse"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),p.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),p.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"})]})}):p.jsx(yt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[p.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-4 flex justify-between items-center flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),p.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:20})})]}),p.jsxs("form",{onSubmit:ke,className:"flex-1 overflow-y-auto",children:[p.jsxs("div",{className:"p-5 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),be?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:be,alt:"Vondst",className:"w-full h-40 object-cover rounded-xl"}),p.jsx("button",{type:"button",onClick:Ye,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors border-0 outline-none shadow-lg",children:p.jsx(Ah,{size:16})})]}):p.jsxs("button",{type:"button",onClick:Ke,className:"w-full h-32 bg-gray-50 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-gray-100 transition-colors text-gray-500 border-2 border-dashed border-gray-200",style:{outline:"none"},children:[p.jsx(UO,{size:32}),p.jsx("span",{className:"text-sm",children:"Maak een foto"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),se&&p.jsxs("div",{className:"bg-orange-50 rounded-xl px-4 py-3 mb-2",children:[p.jsxs("div",{className:"text-sm text-orange-800 font-mono",children:[se.lat.toFixed(6),"N, ",se.lng.toFixed(6),"E"]}),p.jsx("div",{className:"text-xs text-orange-600 mt-1",children:Ce==="gps"?" GPS locatie":Ce==="map-pick"?" Gekozen op kaart":" Kaart midden"})]}),!se&&p.jsx("div",{className:"bg-red-50 rounded-xl px-4 py-3 mb-2",children:p.jsx("div",{className:"text-sm text-red-600",children:"Geen locatie beschikbaar"})}),p.jsxs("div",{className:"flex gap-2",children:[n&&Ce!=="gps"&&p.jsxs("button",{type:"button",onClick:me,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors border-0 outline-none",children:[p.jsx(ih,{size:16}),"GPS"]}),p.jsxs("button",{type:"button",onClick:Q,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border-0 outline-none",children:[p.jsx(r5,{size:16}),"Kies op kaart"]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opslaan naar"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Dt.map(Xe=>p.jsx("button",{type:"button",onClick:()=>G(Xe.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-0 outline-none ${F===Xe.id?"bg-gray-800 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Xe.name},Xe.id))})]}),F===nu&&p.jsx(N$,{label:"Type vondst",value:_,onChange:b,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ type vondst..."}),F!==nu&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Naam",p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:_,onChange:Xe=>b(Xe.target.value),placeholder:"Naam van het punt...",className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}),F===nu&&p.jsxs(p.Fragment,{children:[p.jsx(N$,{label:"Materiaal",value:T,onChange:A,options:["Brons","IJzer","Zilver","Goud","Koper","Lood","Tin","Keramiek","Steen","Glas","Bot","Hout","Leer","Onbekend"],placeholder:"Typ materiaal..."}),p.jsx(N$,{label:"Periode",value:C,onChange:I,options:["Steentijd","Bronstijd","IJzertijd","Romeins","Middeleeuws","Nieuwetijd","Modern","Onbekend"],placeholder:"Typ periode..."}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gewicht (g)"}),p.jsx("input",{type:"number",value:P??"",onChange:Xe=>N(Xe.target.value?parseFloat(Xe.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Lengte (mm)"}),p.jsx("input",{type:"number",value:L??"",onChange:Xe=>O(Xe.target.value?parseFloat(Xe.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notities"}),p.jsx("textarea",{value:g,onChange:Xe=>y(Xe.target.value),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all resize-none h-20",style:{border:"none",outline:"none"},placeholder:"Beschrijving, context, vindplaats details..."})]}),p.jsx("div",{className:"rounded-xl px-4 py-3 bg-orange-50",children:p.jsx("p",{className:"text-sm text-orange-700",children:' Opgeslagen in "Mijn Lagen" op dit apparaat'})})]}),p.jsxs("div",{className:"p-5 pt-0 flex gap-3",children:[p.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border-0 outline-none",children:"Annuleren"}),p.jsx("button",{type:"submit",disabled:R||!se||Z||!_,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border-0 outline-none",children:R?"Opslaan...":"Opslaan"})]})]})]})})}function Lkt(){const{user:t,setUser:e,setLoading:n}=FL();return Y.useEffect(()=>{const s=Vue(qf,o=>{e(o),n(!1)});return()=>s()},[e,n]),{user:t,loginAnonymous:async()=>{try{await W4e(qf)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await zue(qf)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!t}}function Okt(){const{isAuthenticated:t,loginAnonymous:e}=Lkt(),n=an(c=>c.vondstenLocalOnly),r=an(c=>c.showVondstButton),i=gr(c=>c.vondstFormOpen),s=gr(c=>c.vondstFormLocation),o=gr(c=>c.openVondstForm),a=gr(c=>c.closeVondstForm);if(!r)return null;const l=()=>{if(n){o();return}if(!t){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}o()};return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{className:"fixed bottom-2 right-[152px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:p.jsx($o,{size:22,strokeWidth:2})}),p.jsx(Wn,{children:i&&p.jsx(WSe,{onClose:a,initialLocation:s||void 0})})]})}function Dkt(){const t=an(Ee=>Ee.showRouteRecordButton),e=an(Ee=>Ee.showVondstButton),n=gr(Ee=>Ee.toggleRouteDashboard),{state:r,startRecording:i,pauseRecording:s,resumeRecording:o,stopRecording:a,cancelRecording:l,addPoint:c,getCurrentDistance:u,getCurrentDuration:h,getAverageSpeed:f,currentPoints:g,savedRoutes:y,autoPauseEnabled:_,autoPauseSeconds:b}=jo(),[T,A]=Y.useState(!1),[C,I]=Y.useState(""),[R,V]=Y.useState(!1),[P,N]=Y.useState(!1),L=Y.useRef(null),O=Y.useRef(null),F=Y.useRef(null),G=Ee=>{const Dt=Math.floor(Ee/1e3),Xe=Math.floor(Dt/3600),cn=Math.floor(Dt%3600/60),jt=Dt%60;return Xe>0?`${Xe}:${cn.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`:`${cn}:${jt.toString().padStart(2,"0")}`},U=Ee=>Ee<1e3?`${Math.round(Ee)} m`:`${(Ee/1e3).toFixed(2)} km`,ue=Ee=>`${Ee.toFixed(1)} km/h`,be=(Ee,Dt,Xe,cn)=>{const gn=(cn-Dt)*Math.PI/180,wn=(Xe-Ee)*Math.PI/180,pt=Math.sin(gn/2)*Math.sin(gn/2)+Math.cos(Dt*Math.PI/180)*Math.cos(cn*Math.PI/180)*Math.sin(wn/2)*Math.sin(wn/2);return 6371e3*(2*Math.atan2(Math.sqrt(pt),Math.sqrt(1-pt)))};if(Y.useEffect(()=>(r==="recording"?(N(!1),"geolocation"in navigator&&L.current===null&&(L.current=navigator.geolocation.watchPosition(Ee=>{const Dt=Ee.coords.longitude,Xe=Ee.coords.latitude,cn=Date.now();c(Dt,Xe,Ee.coords.accuracy),_&&O.current?be(O.current.lon,O.current.lat,Dt,Xe)>3?(O.current={lon:Dt,lat:Xe,time:cn},F.current&&(clearTimeout(F.current),F.current=null)):cn-O.current.time>=b*1e3&&(s(),N(!0),O.current=null):O.current={lon:Dt,lat:Xe,time:cn}},Ee=>{console.error("GPS error:",Ee)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3}))):(L.current!==null&&(navigator.geolocation.clearWatch(L.current),L.current=null),F.current&&(clearTimeout(F.current),F.current=null)),()=>{L.current!==null&&(navigator.geolocation.clearWatch(L.current),L.current=null),F.current&&(clearTimeout(F.current),F.current=null)}),[r,c,_,b,s]),!t)return null;const ze=e?"right-[200px]":"right-[152px]",Ce=e?"right-[248px]":"right-[200px]",de=()=>{i(),V(!0)},Le=()=>{s()},xe=()=>{o()},Z=()=>{I(`Route ${new Date().toLocaleDateString("nl-NL")}`),A(!0)},W=()=>{const Ee=a(C);A(!1),V(!1),I(""),Ee&&confirm(`Route "${Ee.name}" opgeslagen! (${U(Ee.totalDistance)})

Direct exporteren als GPX?`)&&GSe(Ee)},ne=()=>{g.length>2&&!confirm("Weet je zeker dat je de opname wilt annuleren? De route wordt niet opgeslagen.")||(l(),A(!1),V(!1))},se=u(),Q=h(),me=f(),Ke=Ee=>{switch(Ee){case"recording":return"bg-red-500 hover:bg-red-600";case"paused":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-green-500 hover:bg-green-600"}},Ye=Ee=>{switch(Ee){case"recording":return p.jsx(X2e,{size:22,strokeWidth:2});case"paused":return p.jsx(J2e,{size:22,strokeWidth:2});default:return p.jsx(o5,{size:22,strokeWidth:2})}},ke=()=>{switch(r){case"idle":de();break;case"recording":Le();break;case"paused":xe();break}};return p.jsxs(p.Fragment,{children:[p.jsxs(yt.button,{className:`fixed bottom-2 ${ze} z-[1000] w-11 h-11 ${Ke(r)} text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ke,title:r==="idle"?"Route opnemen":r==="recording"?"Pauzeren":"Hervatten",children:[Ye(r),r==="recording"&&p.jsx(yt.div,{className:"absolute inset-0 rounded-xl bg-red-400",animate:{opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0}})]}),p.jsx(Wn,{children:r==="idle"&&y.length>0&&p.jsxs(yt.button,{className:`fixed bottom-2 ${Ce} z-[1000] w-11 h-11 bg-green-400 hover:bg-green-500 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,title:`Mijn routes (${y.length})`,children:[p.jsx(K2e,{size:18,strokeWidth:2}),p.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-green-600 text-xs font-bold rounded-full flex items-center justify-center shadow-sm",children:y.length})]})}),p.jsx(Wn,{children:(r==="recording"||r==="paused")&&p.jsx(yt.button,{className:`fixed bottom-2 ${Ce} z-[1000] w-11 h-11 bg-gray-700 hover:bg-gray-800 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,title:"Stoppen en opslaan",children:p.jsx(Mht,{size:18,strokeWidth:2,fill:"currentColor"})})}),p.jsx(Wn,{children:R&&r!=="idle"&&p.jsxs(yt.div,{className:"fixed bottom-16 right-2 z-[999] bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 min-w-[180px]",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:r==="recording"?" Opname":P?" Auto-pauze":" Gepauzeerd"}),p.jsx("button",{onClick:()=>V(!1),className:"p-0.5 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Od,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:U(se)})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(n5,{size:16,className:"text-blue-500"}),p.jsx(jkt,{duration:Q,recordingState:r,formatTime:G})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(but,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-sm text-gray-600",children:ue(me)})]}),p.jsxs("div",{className:"text-xs text-gray-400 pt-1 border-t border-gray-100",children:[g.length," punten opgenomen"]})]})]})}),p.jsx(Wn,{children:T&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1500] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1)}),p.jsxs(yt.div,{className:"fixed left-4 right-4 top-1/2 z-[1501] bg-white rounded-xl shadow-2xl p-4 max-w-sm mx-auto",initial:{opacity:0,scale:.9,y:"-40%"},animate:{opacity:1,scale:1,y:"-50%"},exit:{opacity:0,scale:.9,y:"-40%"},children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Route opslaan"}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Afstand:"}),p.jsx("span",{className:"font-medium",children:U(se)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Duur:"}),p.jsx("span",{className:"font-medium",children:G(Q)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Gem. snelheid:"}),p.jsx("span",{className:"font-medium",children:ue(me)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Punten:"}),p.jsx("span",{className:"font-medium",children:g.length})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de route"}),p.jsx("input",{type:"text",value:C,onChange:Ee=>I(Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Route naam...",autoFocus:!0})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"}),p.jsxs("button",{onClick:W,disabled:g.length<2,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(wq,{size:16}),"Opslaan"]})]}),g.length<2&&p.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Minimaal 2 punten nodig om op te slaan"})]})]})})]})}function jkt({duration:t,recordingState:e,formatTime:n}){const[r,i]=Y.useState(t);return Y.useEffect(()=>{if(e!=="recording"){i(t);return}const s=setInterval(()=>{i(o=>o+1e3)},1e3);return()=>clearInterval(s)},[e,t]),Y.useEffect(()=>{i(t)},[t]),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:n(r)})}function Fkt(){const t=li(s=>s.map),{currentPoints:e,state:n}=jo(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Ll;i.current=s;const o=new Ol({source:s,zIndex:999,properties:{name:"route-recording-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current||(i.current.clear(),n==="idle"||e.length===0))return;const s=e.map(o=>Ni(o.coordinates));if(s.length>=2){const o=new yr({geometry:new ns(s)});o.setStyle(new xn({stroke:new Mn({color:n==="paused"?"rgba(234, 179, 8, 0.8)":"rgba(168, 85, 247, 0.8)",width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new ki(s[0])});o.setStyle(new xn({image:new ys({radius:8,fill:new jn({color:"rgba(34, 197, 94, 1)"}),stroke:new Mn({color:"white",width:2})})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new ki(s[s.length-1])});o.setStyle(new xn({image:new ys({radius:6,fill:new jn({color:n==="paused"?"rgba(234, 179, 8, 1)":"rgba(168, 85, 247, 1)"}),stroke:new Mn({color:"white",width:2})})})),i.current.addFeature(o)}},[e,n]),null}const qae=["#a855f7","#3b82f6","#22c55e","#f97316","#ec4899","#14b8a6","#eab308","#8b5cf6"];function $kt(){const t=li(s=>s.map),{savedRoutes:e,visibleRouteIds:n}=jo(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Ll;i.current=s;const o=new Ol({source:s,zIndex:998,properties:{name:"saved-routes-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current)return;i.current.clear(),e.filter(o=>n.has(o.id)).forEach((o,a)=>{const l=qae[a%qae.length],c=o.points.map(_=>Ni(_.coordinates));if(c.length<2)return;const u=new yr({geometry:new ns(c),routeId:o.id,routeName:o.name});u.setStyle(new xn({stroke:new Mn({color:l,width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(u);const h=new yr({geometry:new ki(c[0]),routeId:o.id,type:"start"});h.setStyle(new xn({image:new ys({radius:8,fill:new jn({color:"#22c55e"}),stroke:new Mn({color:"white",width:2})}),text:new mc({text:"S",font:"bold 10px sans-serif",fill:new jn({color:"white"}),offsetY:1})})),i.current.addFeature(h);const f=new yr({geometry:new ki(c[c.length-1]),routeId:o.id,type:"end"});f.setStyle(new xn({image:new ys({radius:8,fill:new jn({color:"#ef4444"}),stroke:new Mn({color:"white",width:2})}),text:new mc({text:"E",font:"bold 10px sans-serif",fill:new jn({color:"white"}),offsetY:1})})),i.current.addFeature(f);const g=Math.floor(c.length/2),y=new yr({geometry:new ki(c[g]),routeId:o.id,type:"label"});y.setStyle(new xn({text:new mc({text:o.name,font:"12px sans-serif",fill:new jn({color:"#1f2937"}),stroke:new Mn({color:"white",width:3}),offsetY:-15})})),i.current.addFeature(y)})},[e,n]),null}function Vkt(){const t=li(o=>o.map),{savedRoutes:e,visibleRouteIds:n,heatmapEnabled:r}=jo(),i=Y.useRef(null),s=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const o=new Ll;s.current=o;const a=new zPe({source:o,blur:15,radius:10,weight:()=>1,gradient:["#00f","#0ff","#0f0","#ff0","#f00"],opacity:.6,zIndex:90});return i.current=a,t.addLayer(a),()=>{t&&i.current&&t.removeLayer(i.current)}},[t]),Y.useEffect(()=>{if(!s.current||!i.current)return;if(s.current.clear(),!r){i.current.setVisible(!1);return}const o=e.filter(l=>n.has(l.id)),a=[];for(const l of o)for(const c of l.points){const u=new yr({geometry:new ki(Ni(c.coordinates))});a.push(u)}s.current.addFeatures(a),i.current.setVisible(a.length>0)},[e,n,r]),null}function zkt(t,e,n,r){const i=[],s=e/111e3,o=e/(111e3*Math.cos(t[1]*Math.PI/180)),a=Math.floor(n/2),l=t[0]-a*o,c=t[0]+a*o,u=t[1]-a*s,h=t[1]+a*s;for(let _=-a;_<=a;_++){const b=t[0]+_*o,T=[Ni([b,u]),Ni([b,h])],A=new yr({geometry:new ns(T),type:"grid-line"});A.setStyle(new xn({stroke:new Mn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}for(let _=-a;_<=a;_++){const b=t[1]+_*s,T=[Ni([l,b]),Ni([c,b])],A=new yr({geometry:new ns(T),type:"grid-line"});A.setStyle(new xn({stroke:new Mn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=-a;_<a;_++)for(let b=-a;b<a;b++){const T=t[0]+(b+.5)*o,A=t[1]+(_+.5)*s,C=_+a,I=b+a;if(C>=0&&C<f.length){const R=`${f[C]}${I+1}`,V=new yr({geometry:new ns([Ni([T,A]),Ni([T,A])]),type:"grid-label"});V.setStyle(new xn({text:new mc({text:R,font:"12px sans-serif",fill:new jn({color:r}),stroke:new Mn({color:"rgba(255,255,255,0.8)",width:3})})})),i.push(V)}}const g=new yr({geometry:new ns([Ni([t[0]-o*.2,t[1]]),Ni([t[0]+o*.2,t[1]])]),type:"grid-center"});g.setStyle(new xn({stroke:new Mn({color:"#ef4444",width:3})})),i.push(g);const y=new yr({geometry:new ns([Ni([t[0],t[1]-s*.2]),Ni([t[0],t[1]+s*.2])]),type:"grid-center"});return y.setStyle(new xn({stroke:new Mn({color:"#ef4444",width:3})})),i.push(y),i}function Gkt(){const t=li(l=>l.map),{gridEnabled:e,gridCenter:n,gridSize:r,gridCount:i,gridColor:s}=jo(),o=Y.useRef(null),a=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const l=new Ll;a.current=l;const c=new Ol({source:l,zIndex:85,properties:{name:"grid-overlay-layer"}});return o.current=c,t.addLayer(c),()=>{o.current&&t&&t.removeLayer(o.current)}},[t]),Y.useEffect(()=>{if(!a.current||!o.current)return;if(a.current.clear(),!e||!n){o.current.setVisible(!1);return}const l=zkt(n,r,i,s);a.current.addFeatures(l),o.current.setVisible(!0)},[e,n,r,i,s]),null}function Ukt(t){const e=[];let n=0;return t.points.forEach((r,i)=>{if(i>0){const a=t.points[i-1],l=6371e3,c=(r.coordinates[1]-a.coordinates[1])*Math.PI/180,u=(r.coordinates[0]-a.coordinates[0])*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.coordinates[1]*Math.PI/180)*Math.cos(r.coordinates[1]*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));n+=l*f}const s=5,o=Math.sin(n/50)*2+Math.sin(n/120)*1.5+Math.sin(n/30+r.coordinates[0]*1e3)*.5;e.push({distance:n,elevation:Math.max(0,s+o)})}),e}function Bkt({route:t,onClose:e}){const n=Y.useRef(null),[r,i]=Y.useState([]),[s,o]=Y.useState({min:0,max:0,gain:0,loss:0});Y.useEffect(()=>{const l=Ukt(t);if(i(l),l.length>0){const c=l.map(y=>y.elevation),u=Math.min(...c),h=Math.max(...c);let f=0,g=0;for(let y=1;y<l.length;y++){const _=l[y].elevation-l[y-1].elevation;_>0?f+=_:g+=Math.abs(_)}o({min:u,max:h,gain:f,loss:g})}},[t]),Y.useEffect(()=>{const l=n.current;if(!l||r.length<2)return;const c=l.getContext("2d");if(!c)return;const u=l.width,h=l.height,f={top:20,right:20,bottom:30,left:40};c.fillStyle="#f9fafb",c.fillRect(0,0,u,h);const g=Math.max(...r.map(R=>R.distance)),y=Math.min(...r.map(R=>R.elevation))-1,_=Math.max(...r.map(R=>R.elevation))+1,b=R=>f.left+R/g*(u-f.left-f.right),T=R=>h-f.bottom-(R-y)/(_-y)*(h-f.top-f.bottom);c.strokeStyle="#e5e7eb",c.lineWidth=1;const A=5;for(let R=0;R<=A;R++){const V=y+(_-y)*(R/A),P=T(V);c.beginPath(),c.moveTo(f.left,P),c.lineTo(u-f.right,P),c.stroke(),c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="right",c.fillText(`${V.toFixed(1)}m`,f.left-5,P+3)}const C=5;for(let R=0;R<=C;R++){const V=g/C*R,P=b(V);c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="center",c.fillText(V<1e3?`${Math.round(V)}m`:`${(V/1e3).toFixed(1)}km`,P,h-10)}c.beginPath(),c.moveTo(b(r[0].distance),h-f.bottom),r.forEach(R=>{c.lineTo(b(R.distance),T(R.elevation))}),c.lineTo(b(r[r.length-1].distance),h-f.bottom),c.closePath();const I=c.createLinearGradient(0,f.top,0,h-f.bottom);I.addColorStop(0,"rgba(139, 92, 246, 0.3)"),I.addColorStop(1,"rgba(139, 92, 246, 0.05)"),c.fillStyle=I,c.fill(),c.strokeStyle="#8b5cf6",c.lineWidth=2,c.lineJoin="round",c.lineCap="round",c.beginPath(),r.forEach((R,V)=>{const P=b(R.distance),N=T(R.elevation);V===0?c.moveTo(P,N):c.lineTo(P,N)}),c.stroke()},[r]);const a=l=>l<1e3?`${Math.round(l)} m`:`${(l/1e3).toFixed(2)} km`;return p.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-4 z-[1700] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[70vh]",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Q2,{size:20}),p.jsx("span",{className:"font-medium",children:"Hoogteprofiel"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100",children:[p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:t.name}),p.jsx("p",{className:"text-xs text-gray-500",children:a(t.totalDistance)})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 border-b border-gray-100",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-blue-500 mb-1",children:p.jsx(Y2e,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Min"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.min.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-purple-500 mb-1",children:p.jsx(Q2,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Max"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.max.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-green-500 mb-1",children:p.jsx(Kht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Stijging"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.gain.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-red-500 mb-1",children:p.jsx(Hht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Daling"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.loss.toFixed(1),"m"]})]})]}),p.jsx("div",{className:"flex-1 p-3",children:p.jsx("canvas",{ref:n,width:350,height:200,className:"w-full h-full"})}),p.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-t border-yellow-100",children:p.jsxs("p",{className:"text-xs text-yellow-700",children:[p.jsx("strong",{children:"Let op:"})," Dit zijn gesimuleerde hoogtewaarden. Koppeling met AHN-data komt binnenkort."]})})]})}const Wkt=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,Hkt=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Kae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});function qkt({route:t,onClose:e}){const{updateRouteNotes:n,addPhotoToRoute:r,removePhotoFromRoute:i}=jo(),[s,o]=Y.useState(t.notes||""),[a,l]=Y.useState("info"),c=Y.useRef(null),u=()=>{n(t.id,s)},h=async y=>{const _=y.target.files?.[0];if(!_)return;const b=URL.createObjectURL(_);r(t.id,{url:b,caption:_.name}),c.current&&(c.current.value="")},f=y=>{confirm("Foto verwijderen?")&&i(t.id,y)},g=jo(y=>y.savedRoutes.find(_=>_.id===t.id))||t;return p.jsxs(yt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[1700] flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),p.jsxs(yt.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"relative bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-md max-h-[85vh] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium truncate",children:g.name}),p.jsx("p",{className:"text-xs text-purple-200",children:Kae(g.createdAt)})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none ml-2",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"flex border-b border-gray-200",children:[p.jsxs("button",{onClick:()=>l("info"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="info"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx($o,{size:16,className:"inline mr-1"}),"Info"]}),p.jsxs("button",{onClick:()=>l("photos"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="photos"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(UO,{size:16,className:"inline mr-1"}),"Foto's (",g.photos?.length||0,")"]}),p.jsxs("button",{onClick:()=>l("notes"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="notes"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(yq,{size:16,className:"inline mr-1"}),"Notities"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="info"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[p.jsx(Od,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Afstand"})]}),p.jsx("p",{className:"text-lg font-semibold",children:Wkt(g.totalDistance)})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[p.jsx(n5,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Duur"})]}),p.jsx("p",{className:"text-lg font-semibold",children:Hkt(g.totalDuration)})]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[p.jsx($o,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Punten"})]}),p.jsxs("p",{className:"text-lg font-semibold",children:[g.points.length," GPS punten"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-1",children:[p.jsx(pq,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Aangemaakt"})]}),p.jsx("p",{className:"text-sm",children:Kae(g.createdAt)})]})]}),a==="photos"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:h,className:"hidden"}),p.jsxs("button",{onClick:()=>c.current?.click(),className:"w-full py-8 border-2 border-dashed border-purple-300 rounded-lg text-purple-500 hover:bg-purple-50 transition-colors flex flex-col items-center gap-2",children:[p.jsx(kc,{size:24}),p.jsx("span",{className:"text-sm",children:"Foto toevoegen"})]}),g.photos&&g.photos.length>0?p.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.photos.map(y=>p.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100",children:[p.jsx("img",{src:y.url,alt:y.caption||"Route foto",className:"w-full h-full object-cover"}),p.jsx("button",{onClick:()=>f(y.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors border-0 outline-none",children:p.jsx(Ah,{size:12})}),y.caption&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 py-1 bg-black/50 text-white text-xs truncate",children:y.caption})]},y.id))}):p.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"Nog geen foto's toegevoegd"})]}),a==="notes"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("textarea",{value:s,onChange:y=>o(y.target.value),placeholder:"Voeg notities toe over deze route...",className:"w-full h-48 p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"}),p.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none",children:"Notities opslaan"})]})]})]})]})}function Kkt({route:t,size:e=80}){const n=Y.useRef(null);return Y.useEffect(()=>{const r=n.current;if(!r||t.points.length<2)return;const i=r.getContext("2d");if(!i)return;i.fillStyle="#f3f4f6",i.fillRect(0,0,e,e);const s=t.points.map(I=>I.coordinates[0]),o=t.points.map(I=>I.coordinates[1]),a=Math.min(...s),l=Math.max(...s),c=Math.min(...o),u=Math.max(...o),h=8,f=e-h*2,g=e-h*2,y=I=>l===a?e/2:h+(I-a)/(l-a)*f,_=I=>u===c?e/2:h+g-(I-c)/(u-c)*g;i.strokeStyle="#a855f7",i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i.beginPath(),t.points.forEach((I,R)=>{const V=y(I.coordinates[0]),P=_(I.coordinates[1]);R===0?i.moveTo(V,P):i.lineTo(V,P)}),i.stroke();const b=y(t.points[0].coordinates[0]),T=_(t.points[0].coordinates[1]);i.fillStyle="#22c55e",i.beginPath(),i.arc(b,T,4,0,Math.PI*2),i.fill();const A=y(t.points[t.points.length-1].coordinates[0]),C=_(t.points[t.points.length-1].coordinates[1]);i.fillStyle="#ef4444",i.beginPath(),i.arc(A,C,4,0,Math.PI*2),i.fill()},[t,e]),t.points.length<2?p.jsx("div",{className:"bg-gray-100 rounded flex items-center justify-center text-gray-400",style:{width:e,height:e},children:p.jsx($o,{size:20})}):p.jsx("canvas",{ref:n,width:e,height:e,className:"rounded"})}const L$=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,O$=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Yae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"});function Ykt({isOpen:t,onClose:e,onViewRoute:n}){const{savedRoutes:r,deleteRoute:i,renameRoute:s,clearAllRoutes:o,visibleRouteIds:a,toggleRouteVisibility:l,showAllRoutes:c,hideAllRoutes:u,heatmapEnabled:h,toggleHeatmap:f,gridEnabled:g,toggleGrid:y,centerGridOnCurrentLocation:_,gridSize:b,setGridSize:T,autoPauseEnabled:A,setAutoPauseEnabled:C,autoPauseSeconds:I,setAutoPauseSeconds:R,importRouteFromGPX:V}=jo(),[P,N]=Y.useState(null),[L,O]=Y.useState(""),[F,G]=Y.useState(!1),[U,ue]=Y.useState(!1),[be,ze]=Y.useState(null),[Ce,de]=Y.useState(null),Le=Y.useRef(null),xe=async ke=>{const Ee=` ${ke.name}

 Afstand: ${L$(ke.totalDistance)}
 Duur: ${O$(ke.totalDuration)}
 ${ke.points.length} GPS punten
 ${Yae(ke.createdAt)}

Opgenomen met DetectorApp NL`;if(navigator.share)try{await navigator.share({title:ke.name,text:Ee});return}catch(Dt){Dt.name!=="AbortError"&&console.error("Share failed:",Dt)}try{await navigator.clipboard.writeText(Ee),alert("Route info gekopieerd naar klembord!")}catch{prompt("Kopieer de route info:",Ee)}},Z=async ke=>{const Ee=ke.target.files?.[0];if(Ee){try{const Dt=await Ee.text(),Xe=V(Dt,Ee.name.replace(".gpx",""));Xe.success?alert(`Route gemporteerd: ${Ee.name}`):alert(`Import mislukt: ${Xe.error}`)}catch{alert("Fout bij lezen van bestand")}Le.current&&(Le.current.value="")}},W=ke=>{N(ke.id),O(ke.name)},ne=ke=>{L.trim()&&s(ke,L.trim()),N(null),O("")},se=ke=>{confirm(`Weet je zeker dat je "${ke.name}" wilt verwijderen?`)&&i(ke.id)},Q=()=>{r.length!==0&&confirm(`Weet je zeker dat je alle ${r.length} routes wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`)&&o()},me=ke=>{l(ke);const Ee=r.find(Dt=>Dt.id===ke);Ee&&n&&n(Ee)},Ke=r.reduce((ke,Ee)=>ke+Ee.totalDistance,0),Ye=r.reduce((ke,Ee)=>ke+Ee.totalDuration,0);return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(o5,{size:20}),p.jsx("span",{className:"font-medium",children:"Mijn Routes"}),p.jsxs("span",{className:"text-purple-200 text-sm",children:["(",r.length,")"]})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),r.length>0&&p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100 flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(Od,{size:14}),p.jsxs("span",{children:["Totaal: ",L$(Ke)]})]}),p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(n5,{size:14}),p.jsx("span",{children:O$(Ye)})]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>ue(!U),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${A?"bg-green-100 text-green-600":"text-purple-600 hover:bg-purple-100"}`,title:A?"Auto-pauze uit":"Auto-pauze aan",children:p.jsx(zht,{size:14})}),p.jsx("button",{onClick:()=>G(!F),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${g?"bg-blue-100 text-blue-600":"text-purple-600 hover:bg-purple-100"}`,title:g?"Grid verbergen":"Grid tonen",children:p.jsx(W2e,{size:14})}),p.jsx("button",{onClick:f,className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${h?"bg-orange-100 text-orange-600":"text-purple-600 hover:bg-purple-100"}`,title:h?"Heatmap verbergen":"Heatmap tonen",children:p.jsx(dut,{size:14})}),p.jsx("button",{onClick:c,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle tonen",children:p.jsx(LA,{size:14})}),p.jsx("button",{onClick:u,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle verbergen",children:p.jsx(i5,{size:14})})]})]}),p.jsx(Wn,{children:F&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-blue-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Grid Assistent"}),p.jsx("button",{onClick:y,className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${g?"bg-blue-500 text-white":"bg-blue-200 text-blue-700"}`,children:g?"Aan":"Uit"})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{onClick:_,className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(r5,{size:14}),"Centreer op mijn locatie"]})}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-blue-700",children:["Celgrootte: ",b,"m"]}),p.jsx("input",{type:"range",min:"5",max:"50",step:"5",value:b,onChange:ke=>T(Number(ke.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-blue-600",children:[p.jsx("span",{children:"5m"}),p.jsx("span",{children:"50m"})]})]}),p.jsx("p",{className:"text-xs text-blue-600",children:"Gebruik het grid om systematisch een veld af te zoeken. Elk vak heeft een label (A1, B2, etc.) voor referentie."})]})})}),p.jsx(Wn,{children:U&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-green-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-green-800",children:"Auto-pauze"}),p.jsx("button",{onClick:()=>C(!A),className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${A?"bg-green-500 text-white":"bg-green-200 text-green-700"}`,children:A?"Aan":"Uit"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-green-700",children:["Pauze na: ",I<60?`${I}s`:`${Math.floor(I/60)}m ${I%60}s`]}),p.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:I,onChange:ke=>R(Number(ke.target.value)),className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[p.jsx("span",{children:"30s"}),p.jsx("span",{children:"5min"})]})]}),p.jsxs("p",{className:"text-xs text-green-600",children:["De opname pauzeert automatisch als je langer dan ",I<60?`${I} seconden`:`${Math.floor(I/60)} minuten`," stilstaat. Ideaal voor pauzes tijdens het detecteren."]})]})})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:r.length===0?p.jsxs("div",{className:"text-center py-12 text-gray-500",children:[p.jsx(o5,{size:48,className:"mx-auto mb-3 text-gray-300"}),p.jsx("p",{className:"font-medium",children:"Nog geen routes"}),p.jsx("p",{className:"text-sm mt-1",children:"Start een opname om je eerste route vast te leggen"})]}):r.map(ke=>p.jsxs(yt.div,{layout:!0,className:"bg-gray-50 rounded-lg p-3 flex gap-3",children:[p.jsx(Kkt,{route:ke,size:70}),p.jsxs("div",{className:"flex-1 min-w-0",children:[P===ke.id?p.jsx("input",{type:"text",value:L,onChange:Ee=>O(Ee.target.value),onKeyDown:Ee=>{Ee.key==="Enter"&&ne(ke.id),Ee.key==="Escape"&&N(null)},onBlur:()=>ne(ke.id),className:"w-full px-2 py-1 text-sm bg-white border border-purple-300 rounded outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0}):p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:ke.name}),p.jsx("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(pq,{size:12}),Yae(ke.createdAt)]})}),p.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-600",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Od,{size:12}),L$(ke.totalDistance)]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(n5,{size:12}),O$(ke.totalDuration)]}),p.jsxs("span",{children:[ke.points.length," punten"]})]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>me(ke.id),className:`p-1.5 rounded transition-colors border-0 outline-none ${a.has(ke.id)?"bg-purple-100 text-purple-600":"text-gray-400 hover:text-purple-600 hover:bg-purple-50"}`,title:a.has(ke.id)?"Verbergen op kaart":"Tonen op kaart",children:a.has(ke.id)?p.jsx(LA,{size:16}):p.jsx(i5,{size:16})}),p.jsx("button",{onClick:()=>W(ke),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Wd,{size:16})}),p.jsx("button",{onClick:()=>de(ke),className:"p-1.5 text-gray-400 hover:text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none",title:"Details & foto's",children:p.jsx(_q,{size:16})}),p.jsx("button",{onClick:()=>ze(ke),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Hoogteprofiel",children:p.jsx(Q2,{size:16})}),p.jsx("button",{onClick:()=>xe(ke),className:"p-1.5 text-gray-400 hover:text-pink-600 hover:bg-pink-50 rounded transition-colors border-0 outline-none",title:"Delen",children:p.jsx(wht,{size:16})}),p.jsx("button",{onClick:()=>GSe(ke),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteer als GPX",children:p.jsx(NA,{size:16})}),p.jsx("button",{onClick:()=>se(ke),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Ah,{size:16})})]})]},ke.id))}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",children:[p.jsx("input",{ref:Le,type:"file",accept:".gpx",onChange:Z,className:"hidden"}),p.jsxs("button",{onClick:()=>Le.current?.click(),className:"w-full px-3 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors border-0 outline-none text-sm flex items-center justify-center gap-2",children:[p.jsx(sI,{size:16}),"GPX bestand importeren"]}),r.length>0&&p.jsx("button",{onClick:Q,className:"w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none text-sm",children:"Alle routes verwijderen"})]})]})]})}),p.jsx(Wn,{children:be&&p.jsx(Bkt,{route:be,onClose:()=>ze(null)})}),p.jsx(Wn,{children:Ce&&p.jsx(qkt,{route:Ce,onClose:()=>de(null)})})]})}const D$={lat:52.1326,lon:5.2913};function HSe({code:t,size:e=18}){return t===0?p.jsx(Oht,{size:e,className:"text-yellow-500"}):t>=1&&t<=3?p.jsx(Th,{size:e,className:"text-gray-400"}):t===45||t===48?p.jsx(Bct,{size:e,className:"text-gray-400"}):t>=51&&t<=67||t>=80&&t<=82?p.jsx(mq,{size:e,className:"text-blue-500"}):t>=71&&t<=77||t>=85&&t<=86?p.jsx(Zct,{size:e,className:"text-cyan-500"}):t>=95?p.jsx(Hct,{size:e,className:"text-purple-500"}):p.jsx(Th,{size:e,className:"text-gray-400"})}function Xkt({degrees:t,size:e=14}){return p.jsx("div",{style:{transform:`rotate(${t+180}deg)`},className:"inline-flex",children:p.jsx(ih,{size:e,className:"text-blue-500"})})}function Zkt({data:t}){if(!t||t.length===0)return null;const e=Math.max(...t.map(r=>r.precipitation),.5),n=t.some(r=>r.precipitation>0);return p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{style:{fontSize:"0.83em"},className:"text-gray-500",children:"Neerslag 2 uur"}),!n&&p.jsx("span",{style:{fontSize:"0.83em"},className:"text-green-600 font-medium",children:"Droog"})]}),p.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 flex items-end px-0.5",children:t.map((r,i)=>{const s=r.precipitation/e*100,o=r.precipitation>2?"bg-blue-600":r.precipitation>.5?"bg-blue-500":r.precipitation>0?"bg-blue-400":"bg-transparent";return p.jsx("div",{className:"flex-1 mx-px",children:p.jsx("div",{className:`w-full rounded-t transition-all ${o}`,style:{height:`${Math.max(s,r.precipitation>0?8:0)}%`}})},i)})}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-gray-400",style:{fontSize:"0.67em"},children:[p.jsx("span",{children:"Nu"}),p.jsx("span",{children:"+1u"}),p.jsx("span",{children:"+2u"})]})]})]})}function Jkt({pollen:t}){const e=[{name:"Gras",value:t.grass},{name:"Berk",value:t.birch},{name:"Els",value:t.alder},{name:"Bijvoet",value:t.mugwort}].filter(i=>i.value>0).sort((i,s)=>s.value-i.value);if(e.length===0)return p.jsxs("div",{className:"flex items-center gap-1.5 text-green-600",style:{fontSize:"0.83em"},children:[p.jsx(boe,{size:12}),p.jsx("span",{children:"Lage pollenconcentratie"})]});const n=e[0],r=n.value>=4?"text-red-500":n.value>=3?"text-orange-500":n.value>=2?"text-amber-500":"text-green-600";return p.jsxs("div",{className:`flex items-center gap-1.5 ${r}`,style:{fontSize:"0.83em"},children:[p.jsx(boe,{size:12}),p.jsxs("span",{children:[n.name,": ",n.value>=4?"Zeer hoog":n.value>=3?"Hoog":n.value>=2?"Matig":"Laag"]})]})}function Qkt({hourly:t}){const e=t.slice(0,6);return e.length===0?null:p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-gray-500",style:{fontSize:"0.83em"},children:"Komende uren"}),p.jsx("div",{className:"flex gap-1",children:e.map((n,r)=>{const i=new Date(n.time),s=r===0;return p.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded-lg flex-1 ${s?"bg-blue-100":"bg-gray-50"}`,children:[p.jsx("span",{className:"text-gray-500",style:{fontSize:"0.75em"},children:s?"Nu":`${i.getHours()}u`}),p.jsx(HSe,{code:n.weatherCode,size:14}),p.jsxs("span",{className:"font-medium",style:{fontSize:"0.83em"},children:[Math.round(n.temperature),""]})]},n.time)})})]})}function eAt(){const t=an(_=>_.showWeatherButton),e=an(_=>_.showFontSliders),n=an(_=>_.weatherFontScale),r=an(_=>_.setWeatherFontScale),i=Is(),s=TT(),[o,a]=Y.useState(!1),l=12*n/100,c=TT(_=>_.showBuienradar),u=TT(_=>_.setShowBuienradar);if(Y.useEffect(()=>{c&&a(!1)},[c]),Y.useEffect(()=>{if(!t)return;const _=i.position||D$;(!s.weatherData||Date.now()-s.weatherData.lastUpdated>600*1e3)&&s.fetchWeather(_.lat,_.lon)},[t,i.position?.lat]),Y.useEffect(()=>{if(!t)return;const _=setInterval(()=>{const b=i.position||D$;s.fetchWeather(b.lat,b.lon)},600*1e3);return()=>clearInterval(_)},[t,i.position?.lat]),!t)return null;const h=s.weatherData?.current,f=s.weatherData?.hourly||[],g=s.weatherData?.precipitation15min||[],y=s.weatherData?.pollen;return p.jsxs(p.Fragment,{children:[o&&p.jsx("div",{className:"fixed inset-0 z-[1099]",onClick:()=>a(!1)}),p.jsx(yt.div,{className:"fixed left-2 z-[1100] bg-white shadow-lg border border-gray-200 select-none rounded-xl",style:{top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))",width:o?"200px":"auto",maxWidth:"200px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},layout:!0,children:s.isLoading&&!h?p.jsxs("div",{className:"p-3 flex items-center gap-2",style:{fontSize:`${l}px`},children:[p.jsx(Q2e,{size:16,className:"animate-spin text-blue-500"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Laden..."})]}):h?p.jsxs("div",{className:"p-2.5",style:{fontSize:`${l}px`},children:[p.jsxs("button",{onClick:()=>a(!o),className:"w-full border-0 outline-none bg-transparent p-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(HSe,{code:h.weatherCode,size:24}),p.jsx("div",{className:"flex flex-col leading-tight",children:p.jsxs("span",{className:"font-bold text-gray-800",style:{fontSize:"1.5em"},children:[Math.round(h.temperature),""]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Toe,{size:14,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-600",style:{fontSize:"1.17em"},children:Math.round(h.windSpeed)}),p.jsx(Xkt,{degrees:h.windDirection,size:12})]}),p.jsx("div",{className:"ml-auto",children:o?p.jsx(BO,{size:16,className:"text-gray-400"}):p.jsx(Fb,{size:16,className:"text-gray-400"})})]}),p.jsxs("div",{className:"text-gray-500 text-left mt-1",style:{fontSize:"0.92em"},children:[M6e[h.weatherCode]||"Onbekend",p.jsxs("span",{className:"text-gray-400 ml-1",children:[" ",Math.round(h.apparentTemperature),""]})]})]}),p.jsx(Wn,{children:o&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200/50 space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(sut,{size:12,className:"text-blue-500"}),p.jsx("span",{children:"Vocht"})]}),p.jsxs("div",{className:"font-bold text-blue-600",style:{fontSize:"1.17em"},children:[h.humidity,"%"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(Toe,{size:12,className:"text-gray-500"}),p.jsx("span",{children:"Windstoten"})]}),p.jsxs("div",{className:"font-bold text-gray-600",style:{fontSize:"1.17em"},children:[Math.round(h.windGusts)," km/u"]})]}),p.jsxs("div",{className:"bg-cyan-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(ih,{size:12,className:"text-cyan-500"}),p.jsx("span",{children:"Wind"})]}),p.jsx("div",{className:"font-bold text-cyan-600",style:{fontSize:"1.17em"},children:N6e(h.windDirection)})]}),p.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(Th,{size:12,className:"text-purple-500"}),p.jsx("span",{children:"Bewolking"})]}),p.jsxs("div",{className:"font-bold text-purple-600",style:{fontSize:"1.17em"},children:[h.cloudCover,"%"]})]})]}),p.jsxs("button",{onClick:()=>u(!c),className:`w-full flex items-center gap-2 p-2 rounded-lg transition-colors border-0 cursor-pointer ${c?"bg-blue-500 hover:bg-blue-600":"bg-blue-50 hover:bg-blue-100"}`,children:[p.jsx(mq,{size:16,className:c?"text-white":"text-blue-500"}),p.jsx("span",{className:`font-medium ${c?"text-white":"text-blue-700"}`,style:{fontSize:"1.17em"},children:"Buienradar"}),p.jsx("span",{className:`ml-auto ${c?"text-blue-100":"text-blue-500"}`,style:{fontSize:"1em"},children:c?"Aan":"Uit"})]}),g.length>0&&p.jsx(Zkt,{data:g}),f.length>0&&p.jsx(Qkt,{hourly:f}),y&&p.jsx(Jkt,{pollen:y}),p.jsxs("div",{className:"text-gray-400 text-center pt-1",style:{fontSize:"0.75em"},children:["Bijgewerkt: ",new Date(s.weatherData.lastUpdated).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})]}),e&&p.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200/50",children:[p.jsx(bq,{size:12,className:"text-gray-400"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:n,onChange:_=>r(parseInt(_.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("span",{className:"text-gray-400 w-8",style:{fontSize:"0.83em"},children:[n,"%"]})]})]})})})]}):p.jsxs("button",{onClick:()=>{const _=i.position||D$;s.fetchWeather(_.lat,_.lon)},className:"p-3 flex items-center gap-2 border-0 outline-none bg-transparent",style:{fontSize:`${l}px`},children:[p.jsx(Th,{size:18,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Weer laden"})]})})]})}function tAt({isVisible:t,onClose:e}){const n=li(R=>R.map),r=Y.useRef(null),i=Y.useRef(null),[s,o]=Y.useState([]),[a,l]=Y.useState(0),[c,u]=Y.useState(!0),[h,f]=Y.useState(!0),[g,y]=Y.useState("normal"),[_,b]=Y.useState(70),T=g==="slow"?800:g==="normal"?500:250,A=Y.useCallback(async()=>{f(!0);try{const V=await(await fetch("https://api.rainviewer.com/public/weather-maps.json")).json(),P=[];V.radar?.past&&V.radar.past.forEach(L=>{P.push({path:L.path,time:L.time*1e3})}),V.radar?.nowcast&&V.radar.nowcast.forEach(L=>{P.push({path:L.path,time:L.time*1e3})}),o(P);const N=V.radar?.past?.length?V.radar.past.length-1:0;l(N)}catch(R){console.error("Failed to fetch radar data:",R)}finally{f(!1)}},[]);Y.useEffect(()=>{if(t){A();const R=setInterval(A,300*1e3);return()=>clearInterval(R)}},[t,A]),Y.useEffect(()=>{if(!n||!t||s.length===0)return;const R=s[a];if(!R)return;const V=`https://tilecache.rainviewer.com${R.path}/256/{z}/{x}/{y}/2/1_1.png`;if(r.current){const P=r.current.getSource();P&&(P.setUrl(V),P.refresh())}else{const P=new Um({url:V,crossOrigin:"anonymous"}),N=new Ff({source:P,opacity:_/100,zIndex:1500,properties:{name:"rain-radar-layer",title:"Buienradar"}});r.current=N,n.addLayer(N)}return()=>{}},[n,t,s,a]),Y.useEffect(()=>{r.current&&r.current.setOpacity(_/100)},[_]),Y.useEffect(()=>{!t&&r.current&&n&&(n.removeLayer(r.current),r.current=null)},[t,n]),Y.useEffect(()=>()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null),i.current&&clearInterval(i.current)},[n]),Y.useEffect(()=>{if(!c||s.length===0||!t){i.current&&(clearInterval(i.current),i.current=null);return}return i.current=setInterval(()=>{l(R=>(R+1)%s.length)},T),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[c,s.length,T,t]);const C=Y.useCallback(()=>{if(s.length===0||!s[a])return"--:--";const R=s[a].time,V=Date.now(),P=Math.round((R-V)/6e4),L=new Date(R).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});return Math.abs(P)<3?`${L} (nu)`:P<0?`${L} (${P}m)`:`${L} (+${P}m)`},[s,a]),I=R=>{u(!1),l(V=>R==="prev"?V>0?V-1:s.length-1:(V+1)%s.length)};return t?p.jsx(Wn,{children:p.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-2 right-2 z-[1600] bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200",style:{maxWidth:"400px",margin:"0 auto"},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mq,{size:14,className:"text-blue-500"}),p.jsx("span",{className:"text-xs font-medium text-gray-700",children:h?"Laden...":C()})]}),p.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14,className:"text-gray-500"})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx("button",{onClick:()=>I("prev"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(U2e,{size:14,className:"text-gray-600"})}),p.jsx("button",{onClick:()=>u(!c),className:`p-1.5 rounded transition-colors border-0 outline-none ${c?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:c?p.jsx(X2e,{size:14}):p.jsx(J2e,{size:14})}),p.jsx("button",{onClick:()=>I("next"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(rh,{size:14,className:"text-gray-600"})})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-gray-400 w-6",children:"-2u"}),p.jsx("input",{type:"range",min:"0",max:Math.max(0,s.length-1),value:a,onChange:R=>{u(!1),l(parseInt(R.target.value))},className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsx("span",{className:"text-[9px] text-gray-400 w-8 text-right",children:"+30m"})]}),p.jsx("div",{className:"flex items-center gap-0.5 bg-gray-100 rounded p-0.5",children:["slow","normal","fast"].map(R=>p.jsxs("button",{onClick:()=>y(R),className:`px-1.5 py-0.5 text-[9px] rounded transition-colors border-0 outline-none ${g===R?"bg-white text-blue-600 shadow-sm":"text-gray-500 bg-transparent"}`,children:[R==="slow"?"":R==="normal"?"1":"2",""]},R))})]}),p.jsxs("div",{className:"px-3 py-1.5 flex items-center gap-2 border-t border-gray-100",children:[p.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:"Dekking"}),p.jsx("input",{type:"range",min:"10",max:"100",value:_,onChange:R=>b(parseInt(R.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-[10px] text-gray-500 w-8 text-right",children:[_,"%"]})]}),p.jsxs("div",{className:"px-3 pb-1.5 flex items-center justify-center gap-1.5",children:[p.jsx("span",{className:"text-[8px] text-gray-400",children:"Licht"}),p.jsxs("div",{className:"flex h-1.5 rounded overflow-hidden",children:[p.jsx("div",{className:"w-3",style:{backgroundColor:"#88D0F3"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#32B8A4"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F4E61F"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F09D1C"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#E12E18"}})]}),p.jsx("span",{className:"text-[8px] text-gray-400",children:"Zwaar"})]})]})}):null}const Xae={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},nAt={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function rAt(){const t=li(i=>i.map),e=uc(i=>i.vondsten),n=an(i=>i.showLocalVondsten),r=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const i=new Ll;return e.forEach(s=>{const o=new yr({geometry:new ki(Ni([s.location.lng,s.location.lat])),vondst:s}),a=Xae[s.objectType]||Xae.Anders,l=nAt[s.objectType]||"?";o.setStyle((c,u)=>{let y=12;u>50?y=6:u>10?y=Math.max(6,12-(u-10)/10):u<2&&(y=14);const _=Math.max(8,Math.min(12,y-2));return new xn({image:new ys({radius:y,fill:new jn({color:a}),stroke:new Mn({color:"#ffffff",width:y>8?2:1})}),text:y>=8?new mc({text:l,font:`bold ${_}px sans-serif`,fill:new jn({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(o)}),r.current?r.current.setSource(i):(r.current=new Ol({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(n),t.addLayer(r.current)),()=>{r.current&&t&&(t.removeLayer(r.current),r.current=null)}},[t,e]),Y.useEffect(()=>{r.current&&r.current.setVisible(n)},[n]),null}const iAt={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function sAt(t){const{type:e,coordinates:n}=t,r=s=>typeof s[0]=="number"?Ni(s):s.map(r),i=r(n);switch(e){case"Point":return new ki(i);case"LineString":return new ns(i);case"Polygon":return new Il(i);case"MultiPoint":return new h0(i);case"MultiLineString":return new _h(i);case"MultiPolygon":return new wp(i);default:return new ki(Ni(n))}}function oAt(){const t=li(i=>i.map),e=Vi(i=>i.layers),n=an(i=>i.showCustomPointLayers),r=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,o)=>{i.has(o)||(t.removeLayer(s),r.current.delete(o))}),e.forEach(s=>{const o=new Ll;s.points.forEach(l=>{let c;const u=l.geometry&&l.geometry.type!=="Point";l.geometry?c=sAt(l.geometry):c=new ki(Ni(l.coordinates));const h=new yr({geometry:c,layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),f=iAt[l.category]||l.category.charAt(0).toUpperCase();if(u){const g=l.geometry.type;h.setStyle(()=>g==="Polygon"||g==="MultiPolygon"?new xn({fill:new jn({color:s.color+"40"}),stroke:new Mn({color:s.color,width:2})}):g==="LineString"||g==="MultiLineString"?new xn({stroke:new Mn({color:s.color,width:3})}):new xn({image:new ys({radius:8,fill:new jn({color:s.color}),stroke:new Mn({color:"#ffffff",width:2})})}))}else h.setStyle((g,y)=>{let A=12;y>50?A=6:y>10?A=Math.max(6,12-(y-10)/10):y<2&&(A=14);const C=Math.max(8,Math.min(12,A-2));return new xn({image:new ys({radius:A,fill:new jn({color:s.color}),stroke:new Mn({color:"#ffffff",width:A>8?2:1})}),text:A>=8?new mc({text:f,font:`bold ${C}px sans-serif`,fill:new jn({color:"#ffffff"}),offsetY:1}):void 0})});o.addFeature(h)});const a=r.current.get(s.id);if(a)a.setSource(o),a.setVisible(n&&s.visible);else{const l=new Ol({source:o,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:n&&s.visible});t.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{t&&t.removeLayer(s)}),r.current.clear()}},[t,e,n]),null}function aAt(){const{createLayerModalOpen:t,closeCreateLayerModal:e}=gr(),{addLayer:n}=Vi(),r=an(),[i,s]=Y.useState(""),[o,a]=Y.useState([...Ym]),[l,c]=Y.useState(""),u=14*r.fontScale/100,h=()=>{const b=l.trim();b&&!o.includes(b)&&(a([...o,b]),c(""))},f=b=>{a(o.filter(T=>T!==b))},g=b=>{o.includes(b)?a(o.filter(T=>T!==b)):a([...o,b])},y=()=>{i.trim()&&(n(i.trim(),o),s(""),a([...Ym]),c(""),e())},_=()=>{s(""),a([...Ym]),c(""),e()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:_}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xc,{size:18}),p.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:b=>r.setFontScale(parseInt(b.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:_,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${u}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),p.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Ym.map(b=>p.jsx("button",{onClick:()=>g(b),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${o.includes(b)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:b},b))})]}),o.filter(b=>!Ym.includes(b)).length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:o.filter(b=>!Ym.includes(b)).map(b=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{onClick:()=>g(b),className:"px-3 py-1 rounded-l-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:b}),p.jsx("button",{onClick:()=>f(b),className:"px-2 py-1 rounded-r-full bg-orange-600 text-white hover:bg-orange-700 transition-colors border-0 outline-none",title:"Verwijder categorie",children:p.jsx(Ah,{size:12})})]},b))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:b=>b.key==="Enter"&&h()}),p.jsx("button",{onClick:h,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:p.jsx(kc,{size:20})})]})]})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${u}px`},children:[p.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:y,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const qSe=200,lAt=.7;async function cAt(t,e=qSe){return new Promise((n,r)=>{const i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");i.onload=()=>{let a=i.width,l=i.height;a>l?a>e&&(l=Math.round(l*e/a),a=e):l>e&&(a=Math.round(a*e/l),l=e),s.width=a,s.height=l,o?.drawImage(i,0,0,a,l),s.toBlob(c=>{c?n(c):r(new Error("Failed to create blob from canvas"))},"image/jpeg",lAt)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(t)})}function uAt(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert blob to base64"))},r.onerror=()=>n(new Error("Failed to read blob")),r.readAsDataURL(t)})}async function hAt(t){const e=await cAt(t,qSe),n=await uAt(e);return{thumbnailBlob:e,thumbnailBase64:n}}function dAt(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const j$=5;function fAt({photos:t,onAddPhoto:e,onRemovePhoto:n,disabled:r}){const i=Y.useRef(null),s=Y.useRef(null),o=async l=>{const c=l.target.files;if(!c||c.length===0)return;const u=j$-t.length,h=Array.from(c).slice(0,u);for(const f of h)try{const{thumbnailBase64:g}=await hAt(f),y={id:dAt(),thumbnailBase64:g,createdAt:new Date().toISOString(),pendingUpload:!0};e(y)}catch(g){console.error("Failed to process image:",g)}l.target.value=""},a=t.length<j$;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",t.length,"/",j$,")"]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(l=>p.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[p.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&p.jsx("button",{type:"button",onClick:()=>n(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:p.jsx(Qr,{size:12,className:"text-white"})}),l.pendingUpload&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),a&&!r&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[p.jsx(UO,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),p.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[p.jsx(Put,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),p.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:o,className:"hidden"}),p.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"})]})}function pAt(){const{addPointModalOpen:t,addPointModalLayerId:e,addPointModalLocation:n,closeAddPointModal:r}=gr(),{addPoint:i,getLayer:s}=Vi(),o=an(),[a,l]=Y.useState(""),[c,u]=Y.useState(""),[h,f]=Y.useState(""),[g,y]=Y.useState([]),_=e?s(e):null,b=14*o.fontScale/100,T=()=>{!a.trim()||!e||!n||(i(e,{name:a.trim(),category:"Overig",notes:c.trim(),url:h.trim()||void 0,coordinates:[n.lng,n.lat],photos:g.length>0?g:void 0}),l(""),u(""),f(""),y([]),r())},A=()=>{l(""),u(""),f(""),y([]),r()};return _?p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx($o,{size:18}),p.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:C=>o.setFontScale(parseInt(C.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:A,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsx("div",{className:"px-4 py-1.5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),p.jsx("span",{className:"text-sm text-gray-600",children:_.name})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${b}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),p.jsx("input",{type:"text",value:a,onChange:C=>l(C.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsx(fAt,{photos:g,onAddPhoto:C=>y([...g,C]),onRemovePhoto:C=>y(g.filter(I=>I.id!==C))}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),p.jsx("textarea",{value:c,onChange:C=>u(C.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),p.jsx("input",{type:"url",value:h,onChange:C=>f(C.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),p.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${b}px`},children:[p.jsx("button",{onClick:A,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:T,disabled:!a.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function mAt(){const{layerManagerModalOpen:t,closeLayerManagerModal:e,openCreateLayerModal:n,openLayerDashboard:r}=gr(),{layers:i,removeLayer:s,toggleVisibility:o,toggleArchived:a,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:c}=Vi(),u=an(),h=14*u.fontScale/100,[f,g]=Y.useState(null),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,C]=Y.useState(!1),I=i.filter(U=>!U.archived),R=i.filter(U=>U.archived),V=A?R:I,P=U=>{y===U?(s(U),_(null)):(_(U),setTimeout(()=>_(null),3e3))},N=U=>{l(U)},L=async U=>{const ue=U.target.files?.[0];if(ue){try{const be=await ue.text(),ze=c(be);ze.success||(T(ze.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}U.target.value=""}},O=()=>{g(null),_(null),T(null),C(!1),e()},F=U=>{r(U)},G=()=>{O(),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:O}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(xc,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:u.fontScale,onChange:U=>u.setFontScale(parseInt(U.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${u.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:O,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"flex border-b border-gray-100",children:[p.jsxs("button",{onClick:()=>C(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${A?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",I.length,")"]}),p.jsxs("button",{onClick:()=>C(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${A?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[p.jsx($2e,{size:14}),"Archief (",R.length,")"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${h}px`},children:[V.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:A?p.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),p.jsxs("button",{onClick:G,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[p.jsx(kc,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):p.jsx("div",{className:"divide-y divide-gray-100",children:V.map(U=>p.jsx(yAt,{layer:U,isExpanded:f===U.id,onToggleExpand:()=>g(f===U.id?null:U.id),onToggleVisibility:()=>o(U.id),onToggleArchived:()=>a(U.id),onOpenDashboard:()=>F(U.id),onExport:()=>N(U.id),onDelete:()=>P(U.id),confirmDelete:y===U.id,onRename:ue=>Vi.getState().updateLayer(U.id,{name:ue}),onChangeColor:ue=>Vi.getState().updateLayer(U.id,{color:ue})},U.id))}),b&&p.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:b})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[p.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[p.jsx(sI,{size:16}),p.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),p.jsx("input",{type:"file",accept:".geojson,.json",onChange:L,className:"hidden"})]}),p.jsxs("button",{onClick:G,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[p.jsx(kc,{size:16}),p.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}const gAt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];function yAt({layer:t,isExpanded:e,onToggleExpand:n,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:o,onDelete:a,confirmDelete:l,onRename:c,onChangeColor:u}){const[h,f]=Y.useState(!1),[g,y]=Y.useState(t.name),[_,b]=Y.useState(!1),T=Y.useRef(null);Y.useEffect(()=>{h&&T.current&&(T.current.focus(),T.current.select())},[h]);const A=()=>{y(t.name),f(!0)},C=()=>{const N=g.trim();N&&N!==t.name&&c(N),f(!1)},I=()=>{y(t.name),f(!1)},R=N=>{N.key==="Enter"?C():N.key==="Escape"&&I()},V=t.points.filter(N=>N.status==="completed").length,P=t.points.length;return p.jsxs("div",{className:"bg-white",children:[p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[p.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?p.jsx(Fb,{size:16}):p.jsx(rh,{size:16})}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>b(!_),className:"w-5 h-5 rounded-full flex-shrink-0 border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),_&&p.jsx("div",{className:"absolute top-7 left-0 z-50 bg-white rounded-lg shadow-lg p-2 flex flex-wrap gap-1 w-24",children:gAt.map(N=>p.jsx("button",{onClick:()=>{u(N),b(!1)},className:`w-5 h-5 rounded-full border-2 hover:scale-110 transition-transform ${N===t.color?"border-gray-800":"border-white"}`,style:{backgroundColor:N}},N))})]}),h?p.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[p.jsx("input",{ref:T,type:"text",value:g,onChange:N=>y(N.target.value),onKeyDown:R,onBlur:C,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),p.jsx("button",{onClick:C,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:p.jsx(Ip,{size:16})})]}):p.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:t.name}),p.jsx("div",{className:"text-xs text-gray-500",children:P>0?p.jsxs("span",{className:V===P?"text-green-600":"",children:[V,"/",P," voltooid"]}):"Geen punten"})]}),!h&&p.jsx("button",{onClick:A,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:p.jsx(Wd,{size:16})}),p.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:p.jsx(K2e,{size:18})}),!t.archived&&p.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${t.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:t.visible?"Verbergen":"Tonen",children:t.visible?p.jsx(LA,{size:18}):p.jsx(i5,{size:18})}),p.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${t.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:t.archived?"Herstellen":"Archiveren",children:t.archived?p.jsx(Ect,{size:18}):p.jsx($2e,{size:18})}),p.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:p.jsx(NA,{size:18})}),p.jsx("button",{onClick:a,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Ah,{size:18})})]}),p.jsx(Wn,{children:e&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[t.categories.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map(N=>p.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:N},N))}),t.points.length>0&&p.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[t.points.slice(0,5).map(N=>p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`font-medium ${N.status==="completed"?"text-green-600 line-through":N.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:N.name})},N.id)),t.points.length>5&&p.jsxs("div",{className:"text-gray-400",children:["...en ",t.points.length-5," meer"]})]}),p.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(t.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function vAt(){const{layerDashboardOpen:t,layerDashboardLayerId:e,closeLayerDashboard:n}=gr(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:o}=Vi(),a=an(),[l,c]=Y.useState("all"),[u,h]=Y.useState(null),[f,g]=Y.useState(""),[y,_]=Y.useState(null),b=e?r(e):null,T=14*a.fontScale/100;if(!b)return null;const A=b.points.filter(F=>l==="all"?!0:F.status===l),C=b.points.length,I=b.points.filter(F=>F.status==="completed").length,R=b.points.filter(F=>F.status==="todo").length,V=b.points.filter(F=>F.status==="skipped").length,P=(F,G)=>{i(b.id,F,G)},N=F=>{s(b.id,F,{notes:f}),h(null),g("")},L=F=>{y===F?(o(b.id,F),_(null)):(_(F),setTimeout(()=>_(null),3e3))},O=()=>{h(null),_(null),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:O}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:b.color}}),p.jsx("span",{className:"font-medium truncate",children:b.name})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:F=>a.setFontScale(parseInt(F.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:O,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[p.jsxs("span",{className:"text-orange-800 font-medium",children:[I,"/",C," voltooid"]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[p.jsxs("span",{className:"text-orange-600",children:[R," te doen"]}),V>0&&p.jsxs("span",{className:"text-gray-500",children:[V," overgeslagen"]})]})]}),p.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(F=>p.jsxs("button",{onClick:()=>c(F),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===F?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[F==="all"&&"Alles",F==="todo"&&"Te doen",F==="completed"&&"Voltooid",F==="skipped"&&"Overgeslagen"]},F))}),p.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:A.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:p.jsx("p",{children:"Geen punten gevonden"})}):p.jsx("div",{className:"divide-y divide-gray-100",children:A.map(F=>p.jsx("div",{className:"p-3",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[p.jsx("button",{onClick:()=>P(F.id,F.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${F.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:F.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:p.jsx(Ip,{size:14,className:F.status==="completed"?"text-green-600":"text-gray-400"})}),p.jsx("button",{onClick:()=>P(F.id,F.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${F.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:F.status==="skipped"?"Markeer als te doen":"Overslaan",children:p.jsx(kct,{size:14,className:F.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),F.photos&&F.photos.length>0&&p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("img",{src:F.photos[0].thumbnailUrl||F.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),F.photos.length>1&&p.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",F.photos.length-1]})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`font-medium truncate ${F.status==="completed"?"text-green-700 line-through":F.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:F.name}),F.sourceLayer&&p.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",F.sourceLayer]})]}),u===F.id?p.jsxs("div",{className:"mt-2",children:[p.jsx("textarea",{value:f,onChange:G=>g(G.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("button",{onClick:()=>N(F.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),p.jsx("button",{onClick:()=>{h(null),g("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):F.notes?p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.notes}):null,F.url&&p.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[p.jsx(Og,{size:12}),"Link"]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>{h(F.id),g(F.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:p.jsx(Qut,{size:14})}),p.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${F.coordinates[1]},${F.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:p.jsx($o,{size:14})}),p.jsx("button",{onClick:()=>L(F.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${y===F.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:y===F.id?"Klik nogmaals":"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})},F.id))})})]})]})})}function _At(){const[t,e]=Y.useState(navigator.onLine),[n,r]=Y.useState(!1);return Y.useEffect(()=>{const i=()=>{e(!0),r(!1)},s=()=>{e(!1),r(!1)};return window.addEventListener("online",i),window.addEventListener("offline",s),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),t||n?null:p.jsx(Wn,{children:p.jsx(yt.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"fixed top-0 left-0 right-0 z-[2000] bg-amber-500 text-white px-4 py-2 shadow-lg",children:p.jsxs("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(rdt,{size:18}),p.jsx("span",{className:"text-sm font-medium",children:"Offline modus - Kaart werkt met gecachede data"})]}),p.jsx("button",{onClick:()=>r(!0),className:"p-1 hover:bg-white/20 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:16})})]})})})}const xAt={"zeer hoge archeologische waarde":"bg-purple-600","hoge archeologische waarde":"bg-purple-500","archeologische waarde":"bg-purple-400"},wAt={"zeer hoge archeologische waarde":"Zeer hoog","hoge archeologische waarde":"Hoog","archeologische waarde":"Waarde"};let Qx=null;function KSe(t){return Qx||(Qx=new Ol({source:new Ll,style:new xn({fill:new jn({color:"rgba(147, 51, 234, 0.5)"}),stroke:new Mn({color:"#9333ea",width:3})}),zIndex:9999}),t.addLayer(Qx)),Qx}function bAt(){Qx&&Qx.getSource()?.clear()}async function EAt(t,e){const n=await MTt(e);if(!n)return;const i=KSe(t).getSource();i?.clear();const s=n.clone();i?.addFeature(s)}function SAt({isOpen:t,onClose:e}){const n=li(Z=>Z.map),r=an(),[i,s]=Y.useState(""),[o,a]=Y.useState("all"),[l,c]=Y.useState([]),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,C]=Y.useState(50),[I,R]=Y.useState(!1),[V,P]=Y.useState(!1),[N,L]=Y.useState(!1),O=Y.useRef(null),F=Y.useRef(),G=Y.useRef(null),U=13*r.fontScale/100;Y.useEffect(()=>{t&&O.current&&setTimeout(()=>O.current?.focus(),100)},[t]),Y.useEffect(()=>{if(!t)return;const Z=ne=>{G.current&&!G.current.contains(ne.target)&&e()},W=setTimeout(()=>{document.addEventListener("mousedown",Z)},100);return()=>{clearTimeout(W),document.removeEventListener("mousedown",Z)}},[t,e]),Y.useEffect(()=>{t||R(!1)},[t]),Y.useEffect(()=>{if(F.current&&clearTimeout(F.current),i.length<2){c([]),g(!1);return}return F.current=window.setTimeout(async()=>{h(!0),g(!0);try{const Z=await RTt(i,A,o);c(Z)}catch(Z){console.error("Monument search error:",Z),c([])}finally{h(!1)}},400),()=>{F.current&&clearTimeout(F.current)}},[i,o,A]);const ue=async Z=>{if(!n)return;const W=n.getView();if(y===Z.id){const ne=ah(Z.extent,50);W.fit(ne,{duration:500,maxZoom:18})}else{const ne=ah(Z.extent,200);W.fit(ne,{duration:500,maxZoom:16}),await EAt(n,Z.monumentnummer),_(Z.id),T(Z.id)}},be=(Z,W)=>{if(W.stopPropagation(),!n)return;const ne=n.getView(),se=ah(Z.extent,20);ne.fit(se,{duration:500,maxZoom:18})},ze=(Z,W)=>{W.stopPropagation(),T(b===Z?null:Z)},Ce=async()=>{if(!(!n||l.length===0)){L(!0);try{const Z=l.map(Ye=>Ye.monumentnummer),W=await NTt(Z);if(W.length===0)return;const se=KSe(n).getSource();se?.clear();let Q=Wa();W.forEach(Ye=>{const ke=Ye.clone();se?.addFeature(ke);const Ee=ke.getGeometry();Ee&&(Q=dG(Q,Ee.getExtent()))});const me=n.getView(),Ke=ah(Q,500);me.fit(Ke,{duration:500,maxZoom:14}),P(!0),_(null),console.log(` ${W.length} monumenten getoond op kaart`)}catch(Z){console.error("Error showing all monuments:",Z)}finally{L(!1)}}},de=()=>{e()},Le=()=>{bAt(),s(""),a("all"),c([]),g(!1),_(null),T(null),C(50),P(!1),e()},xe=Z=>{if(!i||i.length<2)return Z;const W=i.toLowerCase().split(/\s+/).filter(se=>se.length>=2);let ne=Z;return W.forEach(se=>{const Q=se.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),me=new RegExp(`(${Q})`,"gi");ne=ne.replace(me,'<mark class="bg-yellow-200 px-0.5">$1</mark>')}),ne};return t?p.jsx(Wn,{children:p.jsxs(yt.div,{ref:G,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-[1701] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{height:I?"85vh":"38vh"},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white cursor-pointer select-none",onClick:()=>R(!I),children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(q2e,{size:16}),p.jsx("span",{className:"font-medium text-sm",children:"Zoek monumenten"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(H2e,{size:20,className:"opacity-70"}),p.jsx("button",{onClick:Z=>{Z.stopPropagation(),de()},className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-2",children:p.jsx(Qr,{size:16})})]})]}),p.jsx("div",{className:"p-2 border-b border-gray-100 space-y-2",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(nv,{size:16,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),p.jsx("input",{ref:O,type:"text",value:i,onChange:Z=>{s(Z.target.value),_(null),T(null),P(!1)},placeholder:"bouwvoor, scherven...",className:"w-full pl-8 pr-8 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),i&&p.jsx("button",{onClick:()=>{s(""),_(null),T(null),P(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14})})]}),p.jsx("select",{value:o,onChange:Z=>{a(Z.target.value),_(null),T(null),P(!1)},className:"py-1.5 px-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-700 w-28",children:Object.entries(hK).map(([Z,{name:W}])=>p.jsx("option",{value:Z,children:W},Z))})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${U}px`},children:[u&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Zoeken..."}),!u&&f&&l.length===0&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Geen resultaten"}),!u&&l.length>0&&p.jsxs("div",{className:"divide-y divide-gray-100",children:[p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-xs text-gray-500 flex justify-between items-center gap-2",children:[p.jsxs("span",{children:[l.length,l.length>=A?"+":""," gevonden"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[l.length>=A&&p.jsx("button",{onClick:()=>C(A+50),className:"text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent",children:"Meer laden"}),p.jsxs("button",{onClick:Ce,disabled:N,className:`flex items-center gap-1 px-2 py-1 rounded text-white border-0 outline-none transition-colors ${V?"bg-green-500 hover:bg-green-600":"bg-purple-500 hover:bg-purple-600"} ${N?"opacity-50 cursor-wait":""}`,children:[N?p.jsx(iI,{size:12,className:"animate-spin"}):p.jsx(Aw,{size:12}),p.jsx("span",{children:V?"Getoond":"Toon alle"})]})]})]}),l.map(Z=>p.jsxs("div",{className:`transition-colors ${y===Z.id?"bg-purple-50":"bg-transparent"}`,children:[p.jsx("button",{onClick:()=>ue(Z),className:"w-full text-left px-3 py-2 hover:bg-purple-50 transition-colors border-0 outline-none bg-transparent",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Z.toponiem}),p.jsx("p",{className:"text-xs text-purple-600 mt-0.5",children:Z.periode})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx("span",{className:`px-1.5 py-0.5 rounded text-white text-[9px] ${xAt[Z.kwaliteitswaarde]||"bg-gray-500"}`,children:wAt[Z.kwaliteitswaarde]||"AMK"}),y===Z.id&&p.jsx("button",{onClick:W=>be(Z,W),className:"p-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors border-0 outline-none",title:"Zoom in",children:p.jsx(adt,{size:12})})]})]})}),y===Z.id&&p.jsxs("div",{className:"px-3 pb-2",children:[p.jsxs("button",{onClick:W=>ze(Z.id,W),className:"flex items-center gap-1 text-xs text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent mb-1",children:[b===Z.id?p.jsx(BO,{size:14}):p.jsx(Fb,{size:14}),b===Z.id?"Minder":"Omschrijving"]}),b===Z.id&&p.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 rounded p-2 max-h-32 overflow-y-auto whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:xe(Z.omschrijving)}})]})]},Z.id))]}),!u&&!f&&p.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Zoek op trefwoorden in 13.000+ AMK monumenten"})]}),(y||i)&&p.jsx("div",{className:"p-2 border-t border-gray-100",children:p.jsx("button",{onClick:Le,className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Wis zoekopdracht en highlight"})})]})}):null}const TAt=["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"];function kAt(){const t=Y.useRef(null),{keyword:e,isActive:n,totalCount:r,filteredCount:i,setKeyword:s,setActive:o,clearFilter:a}=$Se(),l=gr(_=>_.monumentFilterOpen),c=gr(_=>_.toggleMonumentFilter),u=gr(_=>_.closeMonumentFilter),h=Ws(_=>_.visible),f=TAt.some(_=>h[_]);Y.useEffect(()=>{l&&t.current&&setTimeout(()=>t.current?.focus(),100)},[l]);const g=()=>{e.length>=2&&o(!n)},y=e.length>=2;return f?p.jsxs("div",{children:[p.jsx(yt.button,{onClick:c,className:`fixed bottom-[116px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-purple-500 text-white":"bg-white/80 hover:bg-white/90 text-purple-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Monument filter",children:p.jsx(vq,{size:20})}),p.jsx(Wn,{children:l&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u}),p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[116px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden",children:[p.jsx("div",{className:"px-3 py-1.5 bg-purple-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Monument Filter"})}),p.jsxs("div",{className:"p-2 space-y-1.5",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:t,type:"text",value:e,onChange:_=>s(_.target.value),placeholder:"Filter...",className:"w-24 px-2 py-1.5 text-sm bg-gray-100 rounded border-0 outline-none focus:ring-2 focus:ring-purple-400"}),p.jsx("button",{onClick:g,disabled:!y,className:`relative w-10 h-5 rounded-full transition-colors border-0 outline-none ${n?"bg-purple-500":y?"bg-gray-300":"bg-gray-200 cursor-not-allowed"}`,title:n?"Filter uit":"Filter aan",children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${n?"translate-x-5":"translate-x-0.5"}`})})]}),r>0&&p.jsx("div",{className:"text-xs text-gray-500 text-center",children:n?p.jsxs("span",{className:"text-purple-600 font-medium",children:[i," van ",r]}):p.jsxs("span",{children:[r," monumenten"]})})]})]})]})})]}):null}function AAt({isOpen:t,onClose:e}){return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[2002]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsx(yt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2003] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-lg max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:n=>n.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Aw,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Handleiding"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[p.jsx("section",{children:p.jsxs("p",{className:"text-sm text-gray-600",children:["DetectorApp.nl is d gratis kaartapplicatie voor metaaldetectoristen, fossielen- en mineralenzoekers en amateur-archeologen. Met ",p.jsx("strong",{children:"70+ kaartlagen"}),", GPS tracking, cloud sync en uitgebreid vondstenbeheer."]})}),p.jsxs(Uu,{title:"Schermindeling",icon:p.jsx(Aw,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"De knoppen zijn verdeeld over het scherm voor optimaal gebruik:"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(QR,{title:"Linksboven",items:[{icon:p.jsx(Th,{size:14}),name:"Weerwidget",desc:"Actueel weer en buienradar"},{icon:p.jsx(Od,{size:14}),name:"Meten",desc:"Afstanden meten op de kaart"},{icon:p.jsx(Wd,{size:14}),name:"Tekenen",desc:"Punten, lijnen en vlakken tekenen"},{icon:p.jsx(OA,{size:14}),name:"Exporteren",desc:"Kaart opslaan als afbeelding"}]}),p.jsx(QR,{title:"Rechtsboven",items:[{icon:p.jsx(s5,{size:14}),name:"Menu",desc:"Instellingen en opties"},{icon:p.jsx(gq,{size:14}),name:"Kompas",desc:"Verschijnt bij gedraaide kaart"},{icon:p.jsx(Aw,{size:14}),name:"Kaartlagen",desc:"Lagen aan/uit zetten"}]}),p.jsx(QR,{title:"Rechtsonder",items:[{icon:p.jsx(ih,{size:14}),name:"GPS",desc:"Je locatie volgen"},{icon:p.jsx(kc,{size:14}),name:"Zoom",desc:"In- en uitzoomen"}]}),p.jsx(QR,{title:"Onderkant",items:[{icon:p.jsx(nv,{size:14}),name:"Zoekbalk",desc:"Zoek locaties en adressen"},{icon:p.jsx(xc,{size:14}),name:"Legenda",desc:"Actieve lagen bekijken"}]})]})]}),p.jsxs(Uu,{title:"Menu opties",icon:p.jsx(s5,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Het hamburger menu (rechtsboven) bevat belangrijke functies:"}),p.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[p.jsx(F$,{icon:p.jsx(a5,{size:14}),name:"Instellingen",desc:"App configuratie aanpassen"}),p.jsx(F$,{icon:p.jsx(nv,{size:14}),name:"Monument zoeken",desc:"Zoek specifieke monumenten"}),p.jsx(F$,{icon:p.jsx(Soe,{size:14}),name:"Info",desc:"Over de app"})]}),p.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[p.jsx(LA,{size:12}),"Knoppen aan/uit zetten"]}),p.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"In het menu kun je knoppen tonen of verbergen om je scherm overzichtelijk te houden:"}),p.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst registreren"})," - Knop voor vondsten vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Route opnemen"})," - Knop voor routes vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen"})," - Knop voor aangepaste puntenlagen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Weer"})," - Weerwidget linksboven"]})]})]})]}),p.jsxs(Uu,{title:"GPS Locatie",icon:p.jsx(ih,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De GPS-knop heeft drie standen (Google Maps stijl):"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm",children:p.jsx(ih,{size:16,className:"text-gray-400"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Uit"}),p.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"- GPS niet actief"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 rounded-lg shadow-sm",children:p.jsx(ih,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Volgen"}),p.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"- Kaart gecentreerd op je locatie"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-500 rounded-lg shadow-sm",children:p.jsx(ih,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-green-700",children:"Rijmodus"}),p.jsx("span",{className:"text-xs text-green-600 ml-1",children:"- Kaart draait met je mee"})]})]})]})]}),p.jsxs(Uu,{title:"Kaartlagen (70+)",children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De app bevat uitgebreide informatielagen:"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(Am,{name:"Archeologie",items:["AMK per periode","IKAW","Archeo Onderzoeken","Essen"]}),p.jsx(Am,{name:"Prehistorie",items:["Hunebedden","Grafheuvels","Terpen","Paleokaarten"]}),p.jsx(Am,{name:"Romeins",items:["Romeinse wegen","Forten","Limesweg"]}),p.jsx(Am,{name:"WOII & Militair",items:["Bunkers","Slagvelden","Vliegvelden","Linies"]}),p.jsx(Am,{name:"Hoogtekaarten",items:["AHN Hillshade","Multi-Hillshade","Hoogtekaart Kleur"]}),p.jsx(Am,{name:"Bodem & Terrein",items:["Bodemkaart","Geomorfologie","Veengebieden"]}),p.jsx(Am,{name:"Fossielen",items:["Fossiel hotspots","Mineralen","Goudrivieren"]}),p.jsx(Am,{name:"Erfgoed",items:["Rijksmonumenten","Kastelen","Runes","Kerken"]})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Tip: Klik op de kaart om popup-informatie te zien over lagen op die locatie."})]}),p.jsx(Uu,{title:"Meten en Tekenen",icon:p.jsx(Od,{size:16}),children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-1 flex items-center gap-1",children:[p.jsx(Od,{size:12}),"Meetgereedschap"]}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik om te meten, dubbelklik om te stoppen. De afstand wordt automatisch berekend in meters of kilometers."})]}),p.jsxs("div",{className:"p-3 bg-orange-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-orange-800 mb-1 flex items-center gap-1",children:[p.jsx(Wd,{size:12}),"Tekengereedschap"]}),p.jsx("p",{className:"text-xs text-orange-700 mb-2",children:"Teken punten, lijnen en vlakken op de kaart. Kies uit:"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Punt"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Lijn"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Vlak"})]}),p.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"Tekeningen kunnen opgeslagen worden naar je eigen lagen."})]})]})}),p.jsxs(Uu,{title:"Presets",icon:p.jsx(Soe,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Presets zijn vooraf ingestelde combinaties van kaartlagen. Ideaal om snel te wisselen tussen:"}),p.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Detectie"})," - AMK, IKAW, Archeo Onderzoeken, Gewaspercelen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Steentijd"})," - Hunebedden, Grafheuvels, Paleokaarten"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeins"})," - Romeinse wegen, Forten, AMK Romeins"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"WOII"})," - Bunkers, Slagvelden, Vliegvelden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fossielen"})," - Fossiel hotspots, PBDB data"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Mineralen"})," - Mineralen hotspots, Goudrivieren"]})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Tip: Overschrijf een preset met je eigen lagen via het diskette-icoon."})]}),p.jsxs(Uu,{title:"Mijn Lagen",icon:p.jsx($o,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Sla interessante locaties op in eigen lagen:"}),p.jsxs("ol",{className:"text-xs text-gray-600 space-y-1 ml-4 list-decimal",children:[p.jsx("li",{children:"Tik op een object op de kaart (monument, bunker, etc.)"}),p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"oranje +"})," knop in de popup"]}),p.jsx("li",{children:"Kies een bestaande laag of maak een nieuwe aan"})]}),p.jsx("div",{className:"mt-2 p-2 bg-orange-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-orange-700",children:[p.jsx("strong",{children:"Tip:"})," De volledige vorm (polygoon) en popup-info worden mee opgeslagen!"]})})]}),p.jsxs(Uu,{title:"Vondsten Registreren",icon:p.jsx($o,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Registreer je vondsten met locatie, foto's en details:"}),p.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Via GPS:"})," Menu  Vondst toevoegen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Long-press:"}),' Houd vinger op kaart  "Vondst toevoegen"']}),p.jsxs("li",{children:[p.jsx("strong",{children:"Velden:"})," Type, materiaal, periode, diepte, conditie, gewicht"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Export:"})," Excel, CSV, GeoJSON, GPX, KML"]})]})]}),p.jsxs(Uu,{title:"Cloud Sync",icon:p.jsx(Th,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Synchroniseer je data tussen apparaten met Google login:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-green-700",children:[p.jsx("strong",{children:"Wat wordt gesynchroniseerd:"}),p.jsx("br",{})," Mijn Lagen (eigen punten)",p.jsx("br",{})," Vondsten registraties",p.jsx("br",{})," Preset instellingen"]})}),p.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-blue-700",children:[p.jsx("strong",{children:"Privacy:"})," Je data is alleen voor jou toegankelijk. GPS wordt niet opgeslagen."]})})]})]}),p.jsx(Uu,{title:"Monument Filter",icon:p.jsx(vq,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Filter AMK monumenten op tijdsperiode. Handig om specifieke periodes te onderzoeken zoals de Romeinse tijd, Middeleeuwen of Bronstijd."})}),p.jsx(Uu,{title:"Kaart Exporteren",icon:p.jsx(OA,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Exporteer je huidige kaartweergave als afbeelding (PNG/JPEG) of print direct via PDF. Je kunt een titel toevoegen en de datum wordt automatisch toegevoegd."})}),p.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-xl",children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Tips voor gebruik"}),p.jsxs("ul",{className:"text-xs text-gray-700 space-y-2",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(rh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Detectie:"})," Combineer AMK + Gewaspercelen + IKAW voor kansrijke locaties"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(rh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Terrein:"})," AHN Hillshade toont grafheuvels, wallen en greppels"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(rh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Fossielen:"})," Check Fossiel Hotspots + Geomorfologie voor oude zeebodems"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(rh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850 toont verdwenen structuren en oude wegen"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(rh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Privacy:"})," Alle functies werken ook zonder login (lokale opslag)"]})]})]})]})]}),p.jsx("div",{className:"flex items-center justify-center px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:p.jsx("button",{onClick:e,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Sluiten"})})]})})]})})}function Uu({title:t,icon:e,children:n}){return p.jsxs("section",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e&&p.jsx("span",{className:"text-blue-500",children:e}),t]}),n]})}function QR({title:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1.5",children:t}),p.jsx("div",{className:"space-y-1",children:e.map((n,r)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-blue-500",children:n.icon}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:n.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n.desc]})]},r))})]})}function F$({icon:t,name:e,desc:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-500",children:t}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:e}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n]})]})}function Am({name:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1",children:t}),p.jsx("div",{className:"text-xs text-gray-500 space-y-0.5",children:e.map((n,r)=>p.jsx("div",{children:n},r))})]})}function CAt({isOpen:t,onClose:e}){const n=an(l=>l.setHideWelcomeModal),[r,i]=Y.useState(!1),s=()=>{e()},o=()=>{n(!0),e()},a=()=>{e(),i(!0)};return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[2000]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsx(yt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2001] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-md max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:l=>l.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Hoe werkt de app?"}),p.jsx("button",{onClick:s,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:20,className:"text-gray-500"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.jsxs("section",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Knoppen op de kaart"}),p.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Aan de linker- en rechterkant vind je tools:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Cm,{icon:p.jsx(xc,{size:16}),title:"Kaartlagen",description:"Selecteer welke lagen je wilt zien"}),p.jsx(Cm,{icon:p.jsx(nv,{size:16}),title:"Zoeken",description:"Zoek naar een adres of plaatsnaam"}),p.jsx(Cm,{icon:p.jsx($o,{size:16}),title:"GPS Locatie",description:"Volg je positie op de kaart"}),p.jsx(Cm,{icon:p.jsx(gq,{size:16}),title:"Presets",description:"Snel wisselen tussen kaartlagen"}),p.jsx(Cm,{icon:p.jsx(vq,{size:16}),title:"Monument Filter",description:"Filter monumenten op periode"}),p.jsx(Cm,{icon:p.jsx(tbe,{size:16}),title:"Transparantie",description:"Pas doorzichtigheid aan"}),p.jsx(Cm,{icon:p.jsx(s5,{size:16}),title:"Menu",description:"Instellingen en meer"}),p.jsx(Cm,{icon:p.jsx(ebe,{size:16}),title:"Reset",description:"Kaart naar beginstand"})]})]}),p.jsxs("section",{className:"bg-blue-50 rounded-xl p-3",children:[p.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Kaartlagen gebruiken"}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik op een locatie om informatie te zien over monumenten en archeologische gegevens."})]}),p.jsxs("button",{onClick:a,className:"w-full flex items-start gap-2 p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors border-0 outline-none text-left",children:[p.jsx(V2e,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-0.5",children:"Handleiding"}),p.jsx("span",{className:"text-xs text-blue-600",children:"Bekijk volledige handleiding "})]})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Toon niet meer"}),p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Begrepen"})]})]})})]})}),p.jsx(AAt,{isOpen:r,onClose:()=>i(!1)})]})}function Cm({icon:t,title:e,description:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-7 h-7 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg flex-shrink-0",children:t}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:e}),p.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["- ",n]})]})]})}function Eg(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function ew(t,e){const n=t.length;let r=Math.floor(e);const i=e-r;r>=n?r-=n:r<0&&(r+=n);let s=r+1;s>=n&&(s-=n);const o=t[r],a=o[0],l=o[1],c=t[s],u=c[0]-a,h=c[1]-l;return[a+u*i,l+h*i]}const eM={index:-1,endIndex:NaN,closestTargetDistance:1/0};function YSe(t,e,n,r){const i=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let y=1/0,_;for(let b=0;b<g.length-1;++b){const T=g[b],A=g[b+1],C=JSe(i,s,T,A);C.squaredDistance<y&&(y=C.squaredDistance,_=b+C.along)}y<o&&(o=y,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?_<f.startIndex&&(_+=g.length):f.endIndex<f.startIndex&&_>f.startIndex&&(_-=g.length)),l=_,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=ew(c.coordinates,l),f=n.getPixelFromCoordinate(h),g=n.getPixelFromCoordinate(e.startCoord);Ix(f,g)>r&&(u=!1)}if(u){const h=c.coordinates,f=h.length,g=c.startIndex,y=l;if(g<y){const _=rM(h,g,y);rM(h,g,y-f)<_&&(l-=f)}else{const _=rM(h,g,y);rM(h,g,y+f)<_&&(l+=f)}}return eM.index=a,eM.endIndex=l,eM.closestTargetDistance=o,eM}function XSe(t,e){const n=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();ZSe(t,s,n)}return n}function ZSe(t,e,n){if(e instanceof ns){tM(t,e.getCoordinates(),!1,n);return}if(e instanceof _h){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)tM(t,r[i],!1,n);return}if(e instanceof Il){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)tM(t,r[i],!0,n);return}if(e instanceof wp){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a)tM(t,o[a],!0,n)}return}if(e instanceof du){const r=e.getGeometries();for(let i=0;i<r.length;++i)ZSe(t,r[i],n);return}}function tM(t,e,n,r){const i=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=JSe(i,s,l,c);if(u.squaredDistance===0){const h=o+u.along;r.push({coordinates:e,ring:n,startIndex:h,endIndex:h});return}}}function nM(t,e){return lp(t[0],t[1],e[0],e[1])}function rM(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);const s=Math.ceil(r),o=Math.floor(i);if(s>o){const l=ew(t,r),c=ew(t,i);return nM(l,c)}let a=0;if(r<s){const l=ew(t,r),c=Eg(t,s);a+=nM(l,c)}if(o<i){const l=Eg(t,o),c=ew(t,i);a+=nM(l,c)}for(let l=s;l<o-1;++l){const c=Eg(t,l),u=Eg(t,l+1);a+=nM(c,u)}return a}const $$={along:0,squaredDistance:0};function JSe(t,e,n,r){const i=n[0],s=n[1],o=r[0],a=r[1],l=o-i,c=a-s;let u=0,h=i,f=s;return(l!==0||c!==0)&&(u=ri(((t-i)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,f+=c*u),$$.along=u,$$.squaredDistance=ob(lp(t,e,h,f),10),$$}const iM={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class sM extends Cc{constructor(e,n){super(e),this.feature=n}}class QSe extends fv{constructor(e){const n=e;n.stopDown||(n.stopDown=ib),super(n),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=PAt(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Vg,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=(s,o,a)=>{const l=o||new K5([NaN,NaN]),c=Oi(s[0]),u=i2(c,Oi(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_),l};else{let s;i==="Point"?s=ki:i==="LineString"?s=ns:i==="Polygon"&&(s=Il),r=(o,a,l)=>(a?i==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ol({source:new Ll({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:IAt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:fU,this.freehandCondition_,e.freehand?this.freehandCondition_=iw:this.freehandCondition_=e.freehandCondition?e.freehandCondition:p4,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(v8.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=iw:n=e:n=f4,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=iw:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:p4}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===En.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===or.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===or.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===or.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===or.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===or.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===or.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===or.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new $f(or.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Ia([r,i]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=XSe(e.coordinate,o);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(Eg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(Eg(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const a=e.map.getPixelFromCoordinate(n.startCoord);if(Ix(a,e.pixel)<this.snapTolerance_)return}const r=YSe(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=n.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex;const s=ew(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,i=n[0]-r[0],s=n[1]-r[1],o=i*i+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],n?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(i){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const u=s[l],h=a.getPixelFromCoordinate(u),f=e[0]-h[0],g=e[1]-h[1],y=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(f*f+g*g)<=y,r){this.finishCoordinate_=u;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new yr(new ki(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new yr);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new ns(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=Z3(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new yr(new ns(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new yr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new sM(iM.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),s=Z3(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,n,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new h0([n])):this.type_==="MultiLineString"?e.setGeometry(new _h([n])):this.type_==="MultiPolygon"&&e.setGeometry(new wp([n])),this.dispatchEvent(new sM(iM.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new sM(iM.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new yr(new ki(i)),this.updateSketchFeatures_(),this.dispatchEvent(new sM(iM.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function IAt(){const t=VG();return function(e,n){return t[e.getGeometry().getType()]}}function PAt(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const Zae=0,xk=1,Jae=[0,0,0,0],Dw=[],V$={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function z$(t,e,n){let r;switch(e){case"LineString":r=t;break;case"MultiLineString":case"Polygon":r=t[n[0]];break;case"MultiPolygon":r=t[n[1]][n[0]];break}return r}class G$ extends Cc{constructor(e,n,r){super(e),this.features=n,this.mapBrowserEvent=r}}class RAt extends fv{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Wce,this.defaultDeleteCondition_=function(r){return ORe(r)&&Uce(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:iw,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new l8,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ol({source:new Ll({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:NAt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new Fa(this.source_.getFeatures()),this.source_.addEventListener(so.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(so.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Ps.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Ps.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let n;e?e===!0?n=iw:n=e:n=f4,this.traceCondition_=n}addFeature_(e){const n=e.getGeometry();if(n){const i=this.SEGMENT_WRITERS_[n.getType()];i&&i(e,n)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(En.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Fa;const r=this.featuresBeingModified_.getArray();for(let i=0,s=n.length;i<s;++i){const o=n[i].feature;o&&!r.includes(o)&&this.featuresBeingModified_.push(o)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new G$(V$.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(En.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,r=[];n.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){const s=r[i];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);n.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const r=n.getCoordinates(),i={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),i)}writeMultiPointGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i],a={feature:e,geometry:n,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(n.getExtent(),a)}}writeLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const o=r.slice(i,i+2),a={feature:e,geometry:n,index:i,segment:o};this.rBush_.insert(Ia(o),a)}}writeMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(Ia(c),u)}}}writePolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(Ia(c),u)}}}writeMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u){const f=c.slice(u,u+2),g={feature:e,geometry:n,depth:[a,i],index:u,segment:f};this.rBush_.insert(Ia(f),g)}}}}writeCircleGeometry_(e,n){const r=n.getCenter(),i={feature:e,geometry:n,index:Zae,segment:[r,r]},s={feature:e,geometry:n,index:xk,segment:[r,r]},o=[i,s];i.featureSegments=o,s.featureSegments=o,this.rBush_.insert(uT(r),i);let a=n;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let i=0;i<r.length;++i){const s=r[i],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,n,r,i){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new yr(new ki(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",n),s.set("geometries",r),s.set("existing",i),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==or.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=or.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==or.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const r=[],i=this.vertexFeature_.getGeometry().getCoordinates(),s=Ia([i]),o=this.rBush_.getInExtent(s),a={};o.sort(MAt);for(let l=0,c=o.length;l<c;++l){const u=o[l],h=u.segment;let f=en(u.geometry);const g=u.depth;if(g&&(f+="-"+g.join("-")),a[f]||(a[f]=new Array(2)),u.geometry.getType()==="Circle"&&u.index===xk){const y=ele(e,u);Ra(y,i)&&!a[f][0]&&(this.dragSegments_.push([u,0]),a[f][0]=u);continue}if(Ra(h[0],i)&&!a[f][0]){this.dragSegments_.push([u,0]),a[f][0]=u;continue}if(Ra(h[1],i)&&!a[f][1]){if(a[f][0]&&a[f][0].index===0){let y=u.geometry.getCoordinates();switch(u.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[g[1]];case"Polygon":if(u.index!==y[g[0]].length-2)continue;break}}this.dragSegments_.push([u,1]),a[f][1]=u;continue}en(h)in this.vertexSegments_&&!a[f][0]&&!a[f][1]&&r.push(u)}return r}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const s=e.map.getPixelFromCoordinate(n.startCoord);if(Ix(s,e.pixel)<this.pixelTolerance_)return}const r=YSe(e.coordinate,n,e.map,this.pixelTolerance_);if(n.targetIndex===-1&&Math.sqrt(r.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const o=n.targets[n.targetIndex];this.removeTracedCoordinates_(o.startIndex,o.endIndex)}else for(const o of this.traceSegments_){const a=o[0],l=a.geometry,c=o[1],u=l.getCoordinates();z$(u,l.getType(),a.depth).splice(a.index+c,1),l.setCoordinates(u),c===0&&(a.index-=1)}const s=n.targets[r.index];this.addTracedCoordinates_(s,s.startIndex,r.endIndex)}else{const s=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(s,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex}getTraceCandidates_(e){const n=this.getMap(),r=this.pixelTolerance_,i=n.getCoordinateFromPixel([e.pixel[0]-r,e.pixel[1]+r]),s=n.getCoordinateFromPixel([e.pixel[0]+r,e.pixel[1]-r]),o=Ia([i,s]);return this.traceSource_.getFeaturesInExtent(o)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const n=this.getTraceCandidates_(e);if(n.length===0)return;const r=XSe(e.coordinate,n);r.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}if(r>0)for(const i of this.traceSegments_){const s=i[0],o=s.geometry,a=i[1];let l=i[0].index+1;a===1&&(l-=r);const c=o.getCoordinates();z$(c,o.getType(),s.depth).splice(l,r),o.setCoordinates(c),a===1&&(s.index-=r)}}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(Eg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(Eg(e.coordinates,a))}if(i.length)for(const s of this.traceSegments_){const o=s[0],a=o.geometry,l=s[1],c=o.index+1;l===0&&i.reverse();const u=a.getCoordinates();z$(u,a.getType(),o.depth).splice(c,0,...i),a.setCoordinates(u),l===1&&(o.index+=i.length)}}updateGeometry_(e,n){const r=n[0],i=r.depth;let s;const o=r.segment,a=r.geometry,l=n[1];for(;e.length<a.getStride();)e.push(o[l][e.length]);switch(a.getType()){case"Point":s=e,o[0]=e,o[1]=e;break;case"MultiPoint":s=a.getCoordinates(),s[r.index]=e,o[0]=e,o[1]=e;break;case"LineString":s=a.getCoordinates(),s[r.index+l]=e,o[l]=e;break;case"MultiLineString":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"Polygon":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"MultiPolygon":s=a.getCoordinates(),s[i[1]][i[0]][r.index+l]=e,o[l]=e;break;case"Circle":const c=a;if(o[0]=e,o[1]=e,r.index===Zae)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let u=Ix(Oi(c.getCenter()),Oi(e));c.setRadius(u),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(a,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([o])=>o));const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const o of this.dragSegments_){const a=o[0];Ix(pG(s,a.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(o)}}for(let o=0,a=this.dragSegments_.length;o<a;++o){const l=this.dragSegments_[o],c=l[0],u=c.feature;r.includes(u)||r.push(u);const h=c.geometry;i.includes(h)||i.push(h),this.updateGeometry_(n,l)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(n,r,i,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(n);if(r?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){const i=this.vertexFeature_.getGeometry().getCoordinates();for(let s=r.length-1;s>=0;--s)this.insertVertex_(r[s],i);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const r=this.dragSegments_[n][0],i=r.geometry;if(i.getType()==="Circle"){const s=i,o=s.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=o,a.segment[1]=o,l.segment[0]=o,l.segment[1]=o,this.rBush_.update(uT(o),a);let c=s;this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(Ia(r.segment),r)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new G$(V$.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const n=this.getMap(),r=n.getPixelFromCoordinate(e);n.getView().getProjection();const i=function(a,l){return Qae(e,a)-Qae(e,l)};let s,o;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?l=>l===this.hitDetection_:void 0;n.forEachFeatureAtPixel(r,(l,c,u)=>{u&&u.getType()==="Point"&&(u=new ki(I1(u.getCoordinates())));const h=u||l.getGeometry();if(h&&h.getType()==="Point"&&l instanceof yr&&this.features_.getArray().includes(l)){o=h;const f=l.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:l,geometry:o,segment:[f,f]}]}return!0},{layerFilter:a})}if(!s){const a=lh(uT(e,Jae)),l=n.getView().getResolution()*this.pixelTolerance_,c=bG(ah(a,l,Jae));s=this.rBush_.getInExtent(c)}if(s&&s.length>0){const a=s.sort(i)[0],l=a.segment;let c=ele(e,a);const u=n.getPixelFromCoordinate(c);let h=Ix(r,u);if(o||h<=this.pixelTolerance_){const f={};if(f[en(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-e[0],this.delta_[1]=c[1]-e[1]),a.geometry.getType()==="Circle"&&a.index===xk)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);else{const g=n.getPixelFromCoordinate(l[0]),y=n.getPixelFromCoordinate(l[1]),_=i2(u,g),b=i2(u,y);if(h=Math.sqrt(Math.min(_,b)),this.snappedToVertex_=h<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(c=_>b?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);const T={};T[en(a.geometry)]=!0;for(let A=1,C=s.length;A<C;++A){const I=s[A].segment;if(Ra(l[0],I[0])&&Ra(l[1],I[1])||Ra(l[0],I[1])&&Ra(l[1],I[0])){const R=en(s[A].geometry);R in T||(T[R]=!0,f[en(I)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const r=e.segment,i=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;n.length<s.getStride();)n.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,n);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,n);break;default:return!1}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[r[0],n],feature:i,geometry:s,depth:o,index:a};c.insert(Ia(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[n,r[1]],feature:i,geometry:s,depth:o,index:a+1};return c.insert(Ia(h.segment),h),this.dragSegments_.push([h,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?I1(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ia([e])).some(({segment:r})=>Ra(r[0],e)||Ra(r[1],e))}removePoint(e){if(e&&(e=Oi(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=or.POINTERDRAG){const n=this.lastPointerEvent_;this.willModifyFeatures_(n,this.dragSegments_.map(([i])=>i));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new G$(V$.MODIFYEND,this.featuresBeingModified_,n)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const e=this.dragSegments_,n={};let r=!1,i,s,o,a,l,c,u,h,f,g,y;for(l=e.length-1;l>=0;--l)o=e[l],g=o[0],y=en(g.feature),g.depth&&(y+="-"+g.depth.join("-")),y in n||(n[y]={}),o[1]===0?(n[y].right=g,n[y].index=g.index):o[1]==1&&(n[y].left=g,n[y].index=g.index+1);for(y in n){switch(f=n[y].right,u=n[y].left,c=n[y].index,h=c-1,u!==void 0?g=u:g=f,h<0&&(h=0),a=g.geometry,s=a.getCoordinates(),i=s,r=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(c,1),r=!0);break;case"LineString":s.length>2&&(s.splice(c,1),r=!0);break;case"MultiPolygon":i=i[g.depth[1]];case"Polygon":i=i[g.depth[0]],i.length>4&&(c==i.length-1&&(c=0),i.splice(c,1),r=!0,c===0&&(i.pop(),i.push(i[0]),h=i.length-1));break}if(r){this.setGeometryCoordinates_(a,s);const _=[];if(u!==void 0&&(this.rBush_.remove(u),_.push(u.segment[0])),f!==void 0&&(this.rBush_.remove(f),_.push(f.segment[1])),u!==void 0&&f!==void 0){const b={depth:g.depth,feature:g.feature,geometry:g.geometry,index:h,segment:_};this.rBush_.insert(Ia(b.segment),b)}this.updateSegmentIndices_(a,c,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ia([e])).some(({segment:r})=>!(Ra(r[0],e)||Ra(r[1],e)))}insertPoint(e){const n=e?Oi(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return n?this.findInsertVerticesAndUpdateDragSegments_(n).reduce((i,s)=>i||this.insertVertex_(s,n),!1):!1}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||Kd(s.depth,r))&&s.index>n&&(s.index+=i)})}}function MAt(t,e){return t.index-e.index}function Qae(t,e,n){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===xk){const o=i2(s.getCenter(),Oi(t)),a=Math.sqrt(o)-s.getRadius();return a*a}}const i=Oi(t);return Dw[0]=Oi(e.segment[0]),Dw[1]=Oi(e.segment[1]),Nke(i,Dw)}function ele(t,e,n){const r=e.geometry;if(r.getType()==="Circle"&&e.index===xk)return I1(r.getClosestPoint(Oi(t)));const i=Oi(t);return Dw[0]=Oi(e.segment[0]),Dw[1]=Oi(e.segment[1]),I1(pG(i,Dw))}function NAt(){const t=VG();return function(e,n){return t.Point}}const oM={SELECT:"select"};class aM extends Cc{constructor(e,n,r,i){super(e),this.selected=n,this.deselected=r,this.mapBrowserEvent=i}}const lM={};class mK extends cb{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Uce,this.addCondition_=e.addCondition?e.addCondition:f4,this.removeCondition_=e.removeCondition?e.removeCondition:f4,this.toggleCondition_=e.toggleCondition?e.toggleCondition:p4,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Vg,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:LAt(),this.features_=e.features||new Fa;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(i){return r.includes(i)}}else n=Vg;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[en(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[en(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Ps.ADD,this.boundAddFeature_),this.features_.addEventListener(Ps.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Ps.ADD,this.boundAddFeature_),this.features_.removeEventListener(Ps.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const r=this.findLayerOfFeature_(n);r&&this.addFeatureLayerAssociation_(n,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(r){if(r instanceof Ol&&r.getSource()&&r.getSource().hasFeature(e))return r})}getStyle(){return this.style_}applySelectedStyle_(e){const n=en(e);n in lM||(lM[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let i=n.length-1;i>=0;--i){const s=n[i];if(s!==this&&s instanceof mK&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=en(e);e.setStyle(lM[r]),delete lM[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[en(e)]}selectFeatureInternal_(e,n,r){if(!(e instanceof yr)||!this.filter_(e,n))return;const i=this.getFeatures();return i.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,n),i.push(e),r?.push(e)),e}selectFeature(e){const n=this.findLayerOfFeature_(e);if(!this.layerFilter_(n))return!1;const r=this.selectFeatureInternal_(e,n);return r&&this.dispatchEvent(new aM(oM.SELECT,[r],[],void 0)),!!r}removeFeatureInternal_(e,n){const r=this.getFeatures();if(!(!(e instanceof yr)||!r.getArray().includes(e)))return r.remove(e),this.removeFeatureLayerAssociation_(e),n?.push(e),e}deselectFeature(e){const n=this.removeFeatureInternal_(e);return n&&this.dispatchEvent(new aM(oM.SELECT,[],[n],void 0)),!!n}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){lv(this.featureLayerAssociation_);const e=this.getFeatures(),n=e.getArray().slice();e.clear(),n.length!==0&&this.dispatchEvent(new aM(oM.SELECT,[],n,void 0))}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!n&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){let u=!1;o.forEachFeatureAtPixel(e.pixel,(h,f)=>{if(u=!0,!!this.selectFeatureInternal_(h,f,c))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=a.getLength()-1;h>=0;--h){const f=a.item(h);(c.length>0&&!c.includes(f)||!u)&&this.removeFeatureInternal_(f,l)}}else o.forEachFeatureAtPixel(e.pixel,(u,h)=>{let f;if((r||i)&&(f=this.removeFeatureInternal_(u,l)),(n||i)&&!f&&(f=this.selectFeatureInternal_(u,h,c)),!!f)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(c.length>0||l.length>0)&&this.dispatchEvent(new aM(oM.SELECT,c,l,e)),!0}}function LAt(){const t=VG();return xr(t.Polygon,t.LineString),xr(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}function OAt(){const t=li(_=>_.map),e=gr(_=>_.setDrawingMode),n=an(_=>_.showMeasureTool),[r,i]=Y.useState(!1),[s,o]=Y.useState(null),[a,l]=Y.useState(0),c=Y.useRef(null),u=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const _=new Ll;u.current=_;const b=new Ol({source:_,style:DAt,zIndex:1e3,properties:{name:"measure-layer"}});return c.current=b,t.addLayer(b),()=>{c.current&&t.removeLayer(c.current)}},[t]),Y.useEffect(()=>(e(r),()=>{r&&e(!1)}),[r,e]),Y.useEffect(()=>{if(!(!t||!u.current)&&r){const _=new QSe({source:u.current,type:"LineString",style:jAt});h.current=_;let b=null;return _.on("drawstart",T=>{b=T.feature,o(null);const A=b.getGeometry();A&&(f.current=A.on("change",()=>{const I=Ek(A,{projection:"EPSG:3857"});o(tle(I))}))}),_.on("drawend",T=>{f.current&&(W$(f.current),f.current=null);const A=T.feature.getGeometry(),C=Ek(A,{projection:"EPSG:3857"}),I=tle(C);T.feature.set("distance",I),o(I),l(R=>R+1),b=null}),t.addInteraction(_),()=>{h.current&&(t.removeInteraction(h.current),h.current=null),f.current&&(W$(f.current),f.current=null)}}},[t,r]);const g=()=>{i(!r),r&&o(null)},y=()=>{u.current&&(u.current.clear(),l(0),o(null))};return n?p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:g,className:`fixed top-[90px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${r?"bg-blue-500":"bg-white/80 hover:bg-white/90"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Afstanden meten",children:p.jsx(Od,{size:20,className:r?"text-white":"text-blue-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:r&&p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed top-[90px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[180px]",children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Meten"}),p.jsx("button",{onClick:g,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-2",children:[p.jsx("p",{className:"text-xs text-gray-500",children:"Klik om te meten. Dubbelklik om te stoppen."}),s&&p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-blue-700",children:s})]}),a>0&&p.jsxs("button",{onClick:y,className:"w-full flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Ah,{size:12}),"Wis metingen (",a,")"]})]})]})})]}):null}function tle(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function DAt(t){const e=t.get("distance");return new xn({stroke:new Mn({color:"#3b82f6",width:3,lineDash:[10,10]}),image:new ys({radius:5,fill:new jn({color:"#3b82f6"}),stroke:new Mn({color:"#ffffff",width:2})}),text:e?new mc({text:e,font:"bold 12px sans-serif",fill:new jn({color:"#1e40af"}),stroke:new Mn({color:"#ffffff",width:3}),offsetY:-15,placement:"line",overflow:!0}):void 0})}function jAt(){return new xn({stroke:new Mn({color:"#ef4444",width:3,lineDash:[10,10]}),image:new ys({radius:5,fill:new jn({color:"#ef4444"}),stroke:new Mn({color:"#ffffff",width:2})})})}const U$="Mijn Tekeningen";function FAt(){const t=li(L=>L.map),e=gr(L=>L.setDrawingMode),n=an(L=>L.showDrawTool),r=an(L=>L.showMeasureTool),[i,s]=Y.useState(!1),[o,a]=Y.useState("select"),[l,c]=Y.useState(0),[u,h]=Y.useState(null),{layers:f,addLayer:g,addPoint:y,getLayer:_}=Vi(),b=Y.useRef(null),T=Y.useRef(null),A=Y.useRef(null),C=Y.useRef(null),I=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const L=new Ll;T.current=L;const O=new Ol({source:L,style:$At,zIndex:999,properties:{name:"draw-preview-layer"}});return b.current=O,t.addLayer(O),()=>{b.current&&t.removeLayer(b.current)}},[t]),Y.useEffect(()=>(e(i),()=>{i&&e(!1)}),[i,e]),Y.useEffect(()=>{if(!(!t||!T.current)&&(A.current&&(t.removeInteraction(A.current),A.current=null),C.current&&(t.removeInteraction(C.current),C.current=null),I.current&&(t.removeInteraction(I.current),I.current=null),!!i))if(o==="select"){const L=new mK({layers:[b.current],style:zAt});C.current=L;const O=new RAt({features:L.getFeatures()});I.current=O,t.addInteraction(L),t.addInteraction(O);const F=G=>{if(G.key==="Delete"||G.key==="Backspace"){const U=L.getFeatures();U.forEach(ue=>{T.current?.removeFeature(ue)}),U.clear(),c(T.current?.getFeatures().length||0)}};return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F),C.current&&t.removeInteraction(C.current),I.current&&t.removeInteraction(I.current)}}else{const L=o==="point"?"Point":o==="line"?"LineString":"Polygon",O=new QSe({source:T.current,type:L,style:VAt});return A.current=O,O.on("drawstart",F=>{h(null);const G=F.feature.getGeometry();G&&G.on("change",()=>{if(o==="line"){const U=Ek(G,{projection:"EPSG:3857"});h(nle(U))}else if(o==="polygon"){const U=Z$(G,{projection:"EPSG:3857"});h(rle(U))}})}),O.on("drawend",F=>{const G=F.feature.getGeometry();if(o==="line"&&G){const U=Ek(G,{projection:"EPSG:3857"});F.feature.set("measurement",nle(U))}else if(o==="polygon"&&G){const U=Z$(G,{projection:"EPSG:3857"});F.feature.set("measurement",rle(U))}F.feature.set("drawType",o),c(U=>U+1),h(null)}),t.addInteraction(O),()=>{A.current&&t.removeInteraction(A.current)}}},[t,i,o]);const R=()=>{if(i){if(l>0&&!confirm("Tekeningen verwijderen? Klik eerst op Opslaan om te bewaren."))return;V()}s(!i),a("select"),h(null)},V=()=>{T.current&&(T.current.clear(),c(0),h(null))},P=()=>{if(!T.current||l===0)return;let L=f.find(G=>G.name===U$);if(!L){const G=Vi.getState().addLayer(U$,["Punt","Lijn","Vlak"]);L=Vi.getState().getLayer(G)}if(!L){alert("Kon tekeningen laag niet aanmaken");return}const O=T.current.getFeatures();let F=0;O.forEach((G,U)=>{const ue=G.getGeometry();if(!ue)return;const be=G.get("drawType")||"point",ze=G.get("measurement");let Ce,de;if(ue.getType()==="Point"){const xe=ue.getCoordinates();Ce=$n(xe)}else if(ue.getType()==="LineString"){const xe=ue.getCoordinates(),Z=Math.floor(xe.length/2);Ce=$n(xe[Z]),de={type:"LineString",coordinates:xe.map(W=>$n(W))}}else if(ue.getType()==="Polygon"){const xe=ue.getCoordinates(),Z=ue.getExtent(),W=[(Z[0]+Z[2])/2,(Z[1]+Z[3])/2];Ce=$n(W),de={type:"Polygon",coordinates:xe.map(ne=>ne.map(se=>$n(se)))}}else return;const Le={point:"Punt",line:"Lijn",polygon:"Vlak",select:"Punt"};y(L.id,{name:`Tekening ${new Date().toLocaleDateString("nl-NL")} #${U+1}`,category:Le[be],notes:ze?`Afmeting: ${ze}`:"",coordinates:Ce,geometry:de}),F++}),alert(`${F} tekening(en) opgeslagen naar "${U$}"`),V(),s(!1)};if(!n)return null;const N=90+(r?48:0);return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:R,className:`fixed left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${i?"bg-orange-500":"bg-white/80 hover:bg-white/90"}`,style:{top:`${N}px`},whileHover:{scale:1.05},whileTap:{scale:.95},title:"Tekenen op de kaart",children:p.jsx(Wd,{size:20,className:i?"text-white":"text-orange-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[200px]",style:{top:`${N}px`},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-orange-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Tekenen"}),p.jsx("button",{onClick:R,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-3",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx(cM,{icon:p.jsx(Kut,{size:16}),active:o==="select",onClick:()=>a("select"),title:"Selecteren"}),p.jsx(cM,{icon:p.jsx($o,{size:16}),active:o==="point",onClick:()=>a("point"),title:"Punt"}),p.jsx(cM,{icon:p.jsx(Pht,{size:16}),active:o==="line",onClick:()=>a("line"),title:"Lijn"}),p.jsx(cM,{icon:p.jsx(nht,{size:16}),active:o==="polygon",onClick:()=>a("polygon"),title:"Vlak"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:o==="select"?"Klik om te selecteren, Delete om te verwijderen":o==="point"?"Klik om een punt te plaatsen":"Klik om te tekenen, dubbelklik om te voltooien"}),u&&p.jsxs("div",{className:"bg-orange-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-orange-600 font-medium",children:o==="polygon"?"Oppervlakte":"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-orange-700",children:u})]}),l>0&&p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:P,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(wq,{size:12}),"Opslaan (",l,")"]}),p.jsx("button",{onClick:()=>{confirm("Alle tekeningen verwijderen?")&&V()},className:"flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:p.jsx(Ah,{size:12})})]})]})]})})]})}function cM({icon:t,active:e,onClick:n,title:r}){return p.jsx("button",{onClick:n,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-colors border-0 outline-none ${e?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:r,children:t})}function nle(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function rle(t){return t>=1e4?`${(t/1e4).toFixed(2)} ha`:`${Math.round(t)} m`}function $At(t){const e=t.get("measurement"),n=t.get("drawType"),r={stroke:new Mn({color:"#f97316",width:3}),fill:new jn({color:"rgba(249, 115, 22, 0.2)"}),image:new ys({radius:6,fill:new jn({color:"#f97316"}),stroke:new Mn({color:"#ffffff",width:2})})};return new xn({...r,text:e?new mc({text:e,font:"bold 11px sans-serif",fill:new jn({color:"#c2410c"}),stroke:new Mn({color:"#ffffff",width:3}),offsetY:n==="polygon"?0:-15,placement:n==="line"?"line":"point",overflow:!0}):void 0})}function VAt(){return new xn({stroke:new Mn({color:"#ea580c",width:3,lineDash:[10,10]}),fill:new jn({color:"rgba(234, 88, 12, 0.1)"}),image:new ys({radius:5,fill:new jn({color:"#ea580c"}),stroke:new Mn({color:"#ffffff",width:2})})})}function zAt(){return new xn({stroke:new Mn({color:"#2563eb",width:4}),fill:new jn({color:"rgba(37, 99, 235, 0.2)"}),image:new ys({radius:8,fill:new jn({color:"#2563eb"}),stroke:new Mn({color:"#ffffff",width:2})})})}function GAt(){const t=li(b=>b.map),e=an(b=>b.showPrintTool),n=an(b=>b.showMeasureTool),r=an(b=>b.showDrawTool),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState("png"),[u,h]=Y.useState(!0),[f,g]=Y.useState("Kaart Export"),y=async()=>{if(t){a(!0);try{const b=t.getTargetElement();if(!b)throw new Error("Map target not found");const T=b.querySelector("canvas");if(!T)throw new Error("Canvas not found");const A=document.createElement("canvas"),C=A.getContext("2d");if(!C)throw new Error("Could not get canvas context");const I=u?50:0;A.width=T.width,A.height=T.height+I,C.fillStyle="#ffffff",C.fillRect(0,0,A.width,A.height),u&&(C.fillStyle="#1f2937",C.font="bold 24px system-ui, -apple-system, sans-serif",C.textAlign="center",C.fillText(f,A.width/2,35)),C.drawImage(T,0,I),C.fillStyle="#6b7280",C.font="12px system-ui, -apple-system, sans-serif",C.textAlign="right";const R=new Date().toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});C.fillText(R,A.width-10,A.height-10),C.textAlign="left",C.fillText("DetectorApp.nl",10,A.height-10);const V=`kaart-${new Date().toISOString().split("T")[0]}`;if(l==="pdf"){const P=window.open("","_blank");if(P){const N=A.toDataURL("image/png");P.document.write(`
            <!DOCTYPE html>
            <html>
              <head>
                <title>${f}</title>
                <style>
                  @media print {
                    body { margin: 0; padding: 0; }
                    img { max-width: 100%; height: auto; }
                  }
                  body {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    margin: 0;
                    background: white;
                  }
                  img { max-width: 100%; max-height: 100vh; }
                </style>
              </head>
              <body>
                <img src="${N}" />
                <script>
                  setTimeout(() => {
                    window.print();
                  }, 500);
                <\/script>
              </body>
            </html>
          `),P.document.close()}}else{const P=l==="jpeg"?"image/jpeg":"image/png",N=l==="jpeg"?.92:void 0;A.toBlob(L=>{if(L){const O=URL.createObjectURL(L),F=document.createElement("a");F.href=O,F.download=`${V}.${l}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(O)}},P,N)}s(!1)}catch(b){console.error("Export failed:",b),alert("Kon de kaart niet exporteren. Probeer het opnieuw.")}finally{a(!1)}}};if(!e)return null;let _=90;return n&&(_+=48),r&&(_+=48),p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:()=>s(!0),className:"fixed left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:{top:`${_}px`},whileHover:{scale:1.05},whileTap:{scale:.95},title:"Kaart printen/exporteren",children:p.jsx(OA,{size:20,className:"text-indigo-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[1700]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1)}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-green-500 to-green-600",children:[p.jsx("span",{className:"font-medium text-white",children:"Kaart Exporteren"}),p.jsx("button",{onClick:()=>s(!1),className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[p.jsx("input",{type:"checkbox",checked:u,onChange:b=>h(b.target.checked),className:"rounded border-gray-300"}),"Titel toevoegen"]}),u&&p.jsx("input",{type:"text",value:f,onChange:b=>g(b.target.value),className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-green-500 text-sm",placeholder:"Titel..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formaat"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx(B$,{format:"png",selected:l==="png",onClick:()=>c("png"),icon:p.jsx(woe,{size:16}),label:"PNG"}),p.jsx(B$,{format:"jpeg",selected:l==="jpeg",onClick:()=>c("jpeg"),icon:p.jsx(woe,{size:16}),label:"JPEG"}),p.jsx(B$,{format:"pdf",selected:l==="pdf",onClick:()=>c("pdf"),icon:p.jsx(OA,{size:16}),label:"Print"})]})]}),p.jsx("button",{onClick:y,disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors border-0 outline-none disabled:opacity-50",children:o?p.jsxs(p.Fragment,{children:[p.jsx(iI,{size:18,className:"animate-spin"}),p.jsx("span",{children:"Exporteren..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(NA,{size:18}),p.jsx("span",{children:l==="pdf"?"Printen":"Downloaden"})]})})]})]})]})})]})}function B$({format:t,selected:e,onClick:n,icon:r,label:i}){return p.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center gap-1 p-3 rounded-lg transition-colors border-0 outline-none ${e?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r,p.jsx("span",{className:"text-xs font-medium",children:i})]})}class ile{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const n=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/n)}add(e){if(this.buffer.length>0){const n=this.buffer[this.buffer.length-1];let r=e-n;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalize(this.buffer[0]);let e=0,n=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,n+=s}return this.normalize(e/n)}normalize(e){return(e%360+360)%360}clear(){this.buffer=[]}}function UAt(){const t=Is(c=>c.tracking),e=Is(c=>c.headingSource),n=Is(c=>c.rawGPSHeading),r=Is(c=>c.setSmoothedHeading),i=Y.useRef(new ile(6)),s=Y.useRef(new ile(10)),o=Y.useRef(0),a=Y.useRef(null),l=33;Y.useEffect(()=>{if(!t||e!=="gps"||n===null||n===a.current)return;a.current=n;const c=performance.now();if(c-o.current<l)return;i.current.add(n);const u=i.current.getSmoothed();u!==null&&(o.current=c,r(u))},[t,e,n,r]),Y.useEffect(()=>{if(!t||e!=="compass")return;let c=0;const u=80,h=f=>{const g=performance.now();if(g-c<u||g-o.current<l)return;c=g;let y=null;if(f.webkitCompassHeading!==void 0?y=f.webkitCompassHeading:f.alpha!==null&&(y=(360-f.alpha)%360),y!==null){s.current.add(y);const _=s.current.getSmoothed();_!==null&&(o.current=g,r(_))}};return window.addEventListener("deviceorientationabsolute",h),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientationabsolute",h),window.removeEventListener("deviceorientation",h)}},[t,e,r]),Y.useEffect(()=>{t||(i.current.clear(),s.current.clear(),a.current=null)},[t])}function BAt(){const t=li(i=>i.map),e=Ws(i=>i.setLayerOpacity),n=Ws(i=>i.visible),r=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const i=()=>{const s=t.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const o=n["AHN 0.5m"],a=n["AHN4 Multi-Hillshade NL"];!o&&!a||(o&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),a&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return t.on("moveend",i),i(),()=>{t.un("moveend",i)}},[t,n,e])}function WAt(){UAt(),BAt(),USe();const t=Is(_=>_.fetchPassivePosition);Y.useEffect(()=>{t()},[t]);const n=14*an(_=>_.fontScale)/100,r=gr(_=>_.vondstFormOpen),i=gr(_=>_.vondstFormLocation),s=gr(_=>_.closeVondstForm),o=gr(_=>_.routeDashboardOpen),a=gr(_=>_.toggleRouteDashboard),l=gr(_=>_.monumentSearchOpen),c=gr(_=>_.closeMonumentSearch),u=TT(_=>_.showBuienradar),h=TT(_=>_.setShowBuienradar),f=an(_=>_.hideWelcomeModal),[g,y]=Y.useState(!f);return p.jsx(KTt,{children:p.jsxs("div",{style:{fontSize:`${n}px`},children:[p.jsx(_At,{}),p.jsx(Bit,{}),p.jsx(ddt,{}),p.jsx(rAt,{}),p.jsx(ekt,{}),p.jsx(oAt,{}),p.jsx(Fkt,{}),p.jsx($kt,{}),p.jsx(Vkt,{}),p.jsx(Gkt,{}),p.jsx(_Tt,{}),p.jsx(wTt,{}),p.jsx(WTt,{}),p.jsx(udt,{}),p.jsx(Okt,{}),p.jsx(Dkt,{}),p.jsx(HTt,{}),p.jsx(pdt,{}),p.jsx(bdt,{}),p.jsx(BTt,{}),p.jsx(vkt,{}),p.jsx(VTt,{}),p.jsx(OAt,{}),p.jsx(FAt,{}),p.jsx(GAt,{}),p.jsx(xkt,{}),p.jsx(zTt,{}),p.jsx(eAt,{}),p.jsx(tAt,{isVisible:u,onClose:()=>h(!1)}),p.jsx(fkt,{}),p.jsx(aAt,{}),p.jsx(pAt,{}),p.jsx(mAt,{}),p.jsx(vAt,{}),p.jsx(Ykt,{isOpen:o,onClose:a}),p.jsx(Wn,{children:r&&p.jsx(WSe,{onClose:s,initialLocation:i||void 0})}),p.jsx(SAt,{isOpen:l,onClose:c}),p.jsx(kAt,{}),p.jsx(CAt,{isOpen:g,onClose:()=>y(!1)})]})})}const HAt="fef02a7628814a519d5f0eeb2d82656e";function qAt(){nr.apiKey=HAt}qAt();console.log(`%c DetectorApp v${O5}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");yke.createRoot(document.getElementById("root")).render(p.jsx(WAt,{}));export{Ofe as $,rs as A,Zr as B,ys as C,SS as D,Wt as E,yr as F,HO as G,zPe as H,WPe as I,Sv as J,Qu as K,eL as L,ot as M,Mye as N,As as O,ki as P,tRt as Q,Qt as R,xn as S,Ff as T,wie as U,Ll as V,nRt as W,J0 as X,Q0 as Y,kt as Z,ge as _,kRe as a,Ab as a$,jfe as a0,Ffe as a1,_e as a2,fCt as a3,aCt as a4,QCt as a5,mOt as a6,B6e as a7,kOt as a8,UKe as a9,Ctt as aA,DC as aB,_Ke as aC,U2 as aD,Ud as aE,Kg as aF,Lt as aG,Kt as aH,Jye as aI,WW as aJ,Qye as aK,Zye as aL,ure as aM,K4t as aN,IGe as aO,g4t as aP,ppe as aQ,Tw as aR,H2 as aS,pA as aT,ii as aU,vu as aV,jB as aW,Ec as aX,Pr as aY,kb as aZ,_a as a_,U1e as aa,q3t as ab,K3t as ac,B3t as ad,sA as ae,fW as af,pa as ag,AC as ah,Eh as ai,HKe as aj,q4 as ak,QVe as al,C3t as am,et as an,Jn as ao,Ql as ap,Na as aq,Zf as ar,Yr as as,Jd as at,nPt as au,Ng as av,yCt as aw,Nfe as ax,Xye as ay,DLt as az,vRe as b,fd as b$,wh as b0,bMt as b1,xMt as b2,wMt as b3,Gd as b4,XL as b5,bi as b6,Al as b7,NW as b8,COt as b9,he as bA,aIt as bB,er as bC,Di as bD,Sa as bE,nr as bF,eRt as bG,OCt as bH,fje as bI,Rg as bJ,Vr as bK,_ee as bL,QMt as bM,Zn as bN,Lfe as bO,TC as bP,ape as bQ,Cze as bR,qje as bS,Ha as bT,$Ct as bU,MT as bV,sx as bW,NC as bX,on as bY,yg as bZ,gg as b_,K2 as ba,E_e as bb,qfe as bc,P8e as bd,QIt as be,bme as bf,hPt as bg,ss as bh,Hfe as bi,Ua as bj,bR as bk,gMt as bl,c_e as bm,El as bn,Zy as bo,gGe as bp,Eb as bq,kIt as br,J_e as bs,GL as bt,FPt as bu,bW as bv,x as bw,E as bx,cr as by,Aa as bz,Ol as c,yn as c$,Xy as c0,tc as c1,Q1 as c2,ul as c3,MYe as c4,PPt as c5,RPt as c6,QPt as c7,Q3t as c8,jPt as c9,jr as cA,vb as cB,Ma as cC,P3t as cD,_o as cE,xXe as cF,QW as cG,QL as cH,r3t as cI,C2 as cJ,tYe as cK,xee as cL,ZB as cM,SYe as cN,ave as cO,G3t as cP,z3t as cQ,N3t as cR,_A as cS,vA as cT,Nb as cU,O9 as cV,ite as cW,yo as cX,MBe as cY,cIt as cZ,lIt as c_,DPt as ca,a4t as cb,Tze as cc,J3t as cd,Zo as ce,pn as cf,MPt as cg,OPt as ch,LPt as ci,NPt as cj,BKe as ck,WKe as cl,YZe as cm,sn as cn,qt as co,ta as cp,Xs as cq,qW as cr,JWe as cs,o9e as ct,l9e as cu,a9e as cv,c9e as cw,cPt as cx,uPt as cy,_u as cz,Mn as d,X4 as d$,Dl as d0,pRt as d1,mRt as d2,v3t as d3,gRt as d4,CMt as d5,Fit as d6,HT as d7,utt as d8,nLt as d9,M8e as dA,Bt as dB,nxe as dC,yz as dD,ztt as dE,jj as dF,HC as dG,hV as dH,vMt as dI,P4t as dJ,X4t as dK,Cd as dL,mme as dM,y3t as dN,mn as dO,xa as dP,nh as dQ,oa as dR,Upe as dS,l9 as dT,ytt as dU,Rfe as dV,wi as dW,k7 as dX,CW as dY,ZCt as dZ,va as d_,On as da,iLt as db,Ob as dc,kW as dd,_me as de,MC as df,p1 as dg,J1 as dh,Hve as di,$3t as dj,kXe as dk,rze as dl,qu as dm,AXe as dn,qa as dp,Sc as dq,j6e as dr,xRt as ds,Vn as dt,VC as du,ex as dv,Fi as dw,Ame as dx,JM as dy,OM as dz,lr as e,pIt as e$,XCt as e0,gPt as e1,O_e as e2,y0 as e3,L_e as e4,xQe as e5,rBe as e6,iCt as e7,sCt as e8,G_e as e9,U8e as eA,Xte as eB,e8e as eC,q4t as eD,XRt as eE,fu as eF,ACt as eG,lRt as eH,$fe as eI,LQe as eJ,E0e as eK,Lme as eL,wXe as eM,W3t as eN,HW as eO,q1 as eP,qKe as eQ,Z3t as eR,fc as eS,X3t as eT,GKe as eU,vRt as eV,iu as eW,rO as eX,bQe as eY,x3t as eZ,wFe as e_,Mb as ea,GQe as eb,hz as ec,Ev as ed,Sh as ee,BC as ef,fA as eg,oQe as eh,z_e as ei,lQe as ej,F_e as ek,V_e as el,H8e as em,oW as en,aW as eo,W8e as ep,tO as eq,nO as er,qie as es,sDt as et,tDt as eu,qOt as ev,ts as ew,WOt as ex,hDt as ey,dDt as ez,oC as f,QOt as f$,vje as f0,U1 as f1,OB as f2,sIt as f3,nHe as f4,Bye as f5,oH as f6,rWe as f7,kQe as f8,mWe as f9,MQe as fA,fQe as fB,pQe as fC,jQe as fD,al as fE,ms as fF,ll as fG,bb as fH,GPt as fI,Qg as fJ,sGe as fK,b9 as fL,UB as fM,P2 as fN,kl as fO,Gje as fP,Rme as fQ,wme as fR,IPt as fS,Mo as fT,eA as fU,Ks as fV,iPt as fW,rPt as fX,jxe as fY,Fxe as fZ,KOt as f_,aQe as fa,$_e as fb,DQe as fc,fRt as fd,VL as fe,zL as ff,fpe as fg,iIt as fh,tGe as fi,zC as fj,nIt as fk,FB as fl,$L as fm,sBe as fn,SWe as fo,FWe as fp,aJe as fq,Aze as fr,SRt as fs,I2 as ft,Y3t as fu,S0e as fv,EWe as fw,lBe as fx,cBe as fy,uBe as fz,vh as g,zRt as g$,Ize as g0,j4t as g1,J4t as g2,qg as g3,lee as g4,JPt as g5,n5t as g6,XZe as g7,pp as g8,Nje as g9,e0 as gA,T3t as gB,h1 as gC,LCt as gD,BCt as gE,iDt as gF,$je as gG,Vje as gH,c9 as gI,sJe as gJ,PRt as gK,CRt as gL,yMt as gM,KUe as gN,jRt as gO,mGe as gP,j9 as gQ,qi as gR,CLt as gS,jM as gT,v7 as gU,Mx as gV,iO as gW,_Mt as gX,wv as gY,W4t as gZ,N4t as g_,aA as ga,zi as gb,q0e as gc,pl as gd,IRt as ge,F2 as gf,BRt as gg,dF as gh,aMt as gi,gO as gj,DW as gk,jW as gl,oMt as gm,mMt as gn,vO as go,JGe as gp,NZe as gq,Cye as gr,mH as gs,RQe as gt,S3t as gu,b3t as gv,WC as gw,Us as gx,E3t as gy,Op as gz,TDt as h,oIt as h$,fNt as h0,dNt as h1,pc as h2,KIt as h3,aBe as h4,TRt as h5,l$e as h6,cd as h7,cl as h8,vNt as h9,Mme as hA,Nme as hB,yRt as hC,lWe as hD,Uye as hE,zYe as hF,vQe as hG,Wye as hH,dPt as hI,z8e as hJ,yBe as hK,fWe as hL,gBe as hM,yO as hN,NM as hO,_Ct as hP,CQe as hQ,yQe as hR,_ve as hS,R4t as hT,eH as hU,eJe as hV,WT as hW,Xf as hX,ac as hY,kHe as hZ,fIt as h_,XPt as ha,b$e as hb,ENt as hc,ev as hd,yA as he,oCt as hf,FCt as hg,ds as hh,cF as hi,PGe as hj,xv as hk,ine as hl,Sb as hm,wb as hn,qs as ho,uH as hp,pPt as hq,u9e as hr,Z8e as hs,Gme as ht,AQe as hu,wPt as hv,kUe as hw,_Rt as hx,mUe as hy,nte as hz,jn as i,co as i$,Spe as i0,UBe as i1,GCt as i2,LC as i3,gpe as i4,g0 as i5,ZWe as i6,YWe as i7,qWe as i8,uF as i9,iOt as iA,i5t as iB,Q0e as iC,cA as iD,d7 as iE,vUe as iF,nye as iG,uRt as iH,VLt as iI,eIt as iJ,xIt as iK,l8e as iL,f8e as iM,g8e as iN,wd as iO,ZFe as iP,tIt as iQ,Wne as iR,yze as iS,kC as iT,$It as iU,jit as iV,B1 as iW,PB as iX,Pje as iY,$Rt as iZ,VBe as i_,Dye as ia,wGe as ib,uw as ic,Eje as id,Vd as ie,aDt as ig,S4t as ih,E4t as ii,GYe as ij,j0e as ik,ZGe as il,Qte as im,xze as io,lA as ip,O2 as iq,Ntt as ir,lOt as is,txe as it,pOt as iu,BN as iv,dOt as iw,XT as ix,fOt as iy,T3 as iz,SDt as j,_Lt as j$,eye as j0,yUe as j1,vw as j2,nCt as j3,y_e as j4,LW as j5,H as j6,Y8e as j7,Rd as j8,HZe as j9,k4t as jA,T4t as jB,Qo as jC,RW as jD,l7 as jE,PW as jF,VRt as jG,ZRt as jH,ane as jI,Iye as jJ,uIt as jK,E1e as jL,HIt as jM,lDt as jN,Km as jO,DUe as jP,OMt as jQ,PMt as jR,nd as jS,wCt as jT,bCt as jU,xCt as jV,mje as jW,_v as jX,dme as jY,wLt as jZ,xLt as j_,fH as ja,vGe as jb,LRt as jc,iN as jd,Dxe as je,nrt as jf,rrt as jg,GOt as jh,Mrt as ji,UOt as jj,DOt as jk,OOt as jl,Lrt as jm,nT as jn,zOt as jo,$Ue as jp,oBe as jq,iBe as jr,hQe as js,zQe as jt,UQe as ju,SUe as jv,Tye as jw,G8e as jx,dQe as jy,D_e as jz,mc as k,n$e as k$,vLt as k0,ELt as k1,bLt as k2,yLt as k3,gLt as k4,nWe as k5,y0e as k6,Gye as k7,iRt as k8,Vze as k9,aH as kA,M4t as kB,I4t as kC,GMt as kD,BFe as kE,AIt as kF,MJe as kG,NJe as kH,j_e as kI,aRt as kJ,RZe as kK,rOt as kL,P9e as kM,j9e as kN,OC as kO,bPt as kP,yPt as kQ,vPt as kR,VCt as kS,Aje as kT,Y6e as kU,YIt as kV,WB as kW,LIt as kX,NIt as kY,kRt as kZ,r$e as k_,rRt as ka,zze as kb,gve as kc,_Ue as kd,vee as ke,mLt as kf,uW as kg,N9e as kh,Uze as ki,TB as kj,ECt as kk,kB as kl,SCt as km,ZC as kn,yw as ko,PZe as kp,Xje as kq,gOt as kr,mve as ks,R2 as kt,HL as ku,Bf as kv,I3t as kw,JL as kx,TW as ky,CCt as kz,ATt as l,w9 as l$,qRt as l0,URt as l1,Rje as l2,Zfe as l3,Ti as l4,tPt as l5,OO as l6,NH as l7,Sl as l8,DO as l9,d1 as lA,AOt as lB,hCt as lC,NGe as lD,xie as lE,bGe as lF,xGe as lG,UN as lH,V0e as lI,RLt as lJ,ILt as lK,PLt as lL,Att as lM,jnt as lN,Wnt as lO,W6e as lP,DCt as lQ,Xfe as lR,BL as lS,UCt as lT,gA as lU,QXe as lV,vye as lW,DRt as lX,OF as lY,CC as lZ,hIt as l_,fDt as la,Md as lb,MIt as lc,nx as ld,KPt as le,sye as lf,iye as lg,BUe as lh,YM as li,D0e as lj,QRt as lk,FW as ll,ix as lm,BMt as ln,WMt as lo,HMt as lp,dMt as lq,uMt as lr,sMt as ls,dUe as lt,cMt as lu,GUe as lv,UPt as lw,NRt as lx,UMt as ly,LNt as lz,Ni as m,jCt as m$,pO as m0,VMt as m1,$Mt as m2,H0e as m3,B0e as m4,WGe as m5,qGe as m6,HS as m7,Vx as m8,iKe as m9,Gf as mA,ng as mB,Ts as mC,cXe as mD,FJe as mE,kCt as mF,gWe as mG,$Ye as mH,aWe as mI,cWe as mJ,dLt as mK,DT as mL,R3t as mM,Rye as mN,P0e as mO,Dfe as mP,NCt as mQ,spe as mR,Ome as mS,mee as mT,_pe as mU,Tnt as mV,wRt as mW,tye as mX,hRt as mY,AW as mZ,ype as m_,H3t as ma,_Nt as mb,Sze as mc,bNt as md,xNt as me,Lg as mf,Qtt as mg,tnt as mh,nnt as mi,Ipe as mj,w3t as mk,qB as ml,hx as mm,IJe as mn,ALt as mo,b8e as mp,fme as mq,sYe as mr,bO as ms,o3 as mt,lYe as mu,I0e as mv,yNt as mw,eGe as mx,cDt as my,IS as mz,ns as n,ONt as n$,s7 as n0,yYe as n1,rCt as n2,P1e as n3,u7 as n4,FNt as n5,jNt as n6,MZe as n7,C4t as n8,A4t as n9,zLt as nA,A3t as nB,wNt as nC,k8e as nD,yve as nE,B2 as nF,pNt as nG,mNt as nH,gNt as nI,EW as nJ,rIt as nK,gCt as nL,g_e as nM,JLt as nN,ZLt as nO,uLt as nP,hLt as nQ,qCt as nR,o_e as nS,w_e as nT,q2 as nU,dd as nV,OW as nW,z0e as nX,GC as nY,i_e as nZ,JC as n_,NB as na,TWe as nb,bWe as nc,_Qe as nd,wWe as ne,HYe as nf,KB as ng,WIt as nh,hW as ni,ePt as nj,R_ as nk,V6e as nl,N9 as nm,oOt as nn,Snt as no,aOt as np,sOt as nq,Q_e as nr,SH as ns,Da as nt,xUe as nu,nS as nv,sRt as nw,btt as nx,k3t as ny,XLt as nz,bn as o,_Xe as o$,QF as o0,WPt as o1,SN as o2,OQe as o3,eUe as o4,mN as o5,fPt as o6,FGe as o7,BPt as o8,oo as o9,qPt as oA,mPt as oB,ZPt as oC,KCt as oD,dtt as oE,_Ge as oF,pCt as oG,uCt as oH,Ufe as oI,lPt as oJ,aPt as oK,ERt as oL,hpe as oM,XXe as oN,OZe as oO,s_e as oP,cxe as oQ,TCt as oR,HLt as oS,qLt as oT,KLt as oU,YLt as oV,NLt as oW,OLt as oX,LLt as oY,ent as oZ,Yg as o_,io as oa,Q4t as ob,nNt as oc,Z4t as od,JFe as oe,JCt as of,Bme as og,IZe as oh,tUe as oi,nUe as oj,KM as ok,ORt as ol,GGe as om,UGe as on,Ait as oo,pu as op,CO as oq,nQe as or,CIt as os,m_e as ot,v_e as ou,dJe as ov,o5t as ow,wJe as ox,a5t as oy,XBe as oz,CTt as p,YRt as p$,fve as p0,pYe as p1,Dee as p2,O8e as p3,$Pt as p4,DNt as p5,oPt as p6,sPt as p7,s9e as p8,Gnt as p9,Zc as pA,GLt as pB,_Pt as pC,S$e as pD,$Lt as pE,FLt as pF,$tt as pG,jLt as pH,fLt as pI,pLt as pJ,ULt as pK,BLt as pL,QLt as pM,eOt as pN,SLt as pO,tOt as pP,nOt as pQ,ktt as pR,Ptt as pS,wxe as pT,N2 as pU,WLt as pV,gtt as pW,zCt as pX,wUe as pY,xBe as pZ,oUe as p_,QFe as pa,Unt as pb,Fnt as pc,IMt as pd,cLt as pe,_3t as pf,AYe as pg,U3t as ph,L3t as pi,j3t as pj,O3t as pk,F3t as pl,D3t as pm,V3t as pn,SOt as po,hee as pp,M3t as pq,fGe as pr,RRt as ps,SGe as pt,FRt as pu,rNt as pv,CJe as pw,su as px,WRt as py,MLt as pz,xme as q,$We as q$,GNt as q0,RWe as q1,W0e as q2,wye as q3,qpe as q4,YT as q5,WCt as q6,PWe as q7,KMt as q8,KRt as q9,wOt as qA,xOt as qB,Ztt as qC,lxe as qD,kLt as qE,TLt as qF,Ktt as qG,lLt as qH,lMt as qI,Kf as qJ,h7 as qK,JRt as qL,Va as qM,U6e as qN,VQe as qO,dCt as qP,U4t as qQ,B4t as qR,TUe as qS,zWe as qT,VWe as qU,xye as qV,aKe as qW,dWe as qX,uWe as qY,hWe as qZ,AWe as q_,dHe as qa,_ie as qb,F6e as qc,cCt as qd,lCt as qe,VUe as qf,nYe as qg,FOt as qh,$Ot as qi,hYe as qj,jOt as qk,xA as ql,bA as qm,iYe as qn,ICt as qo,_Ye as qp,xYe as qq,iH as qr,Pit as qs,uOt as qt,hOt as qu,cRt as qv,cOt as qw,TOt as qx,bOt as qy,EOt as qz,iEe as r,pWe as r$,RMt as r0,AZe as r1,vWe as r2,s5t as r3,uDt as r4,r5t as r5,t0 as r6,nDt as r7,oDt as r8,rDt as r9,Xqe as rA,$Je as rB,C_e as rC,HCt as rD,bne as rE,m4t as rF,XNt as rG,$4t as rH,iWe as rI,Dx as rJ,BYe as rK,oRt as rL,_4t as rM,O4t as rN,dRt as rO,YGe as rP,UYe as rQ,Zme as rR,ege as rS,LMt as rT,z4t as rU,NMt as rV,MMt as rW,HRt as rX,UW as rY,YCt as rZ,G4t as r_,pUe as ra,eMt as rb,rMt as rc,fMt as rd,tMt as re,iMt as rf,pMt as rg,UUe as rh,BBe as ri,MRt as rj,qC as rk,KC as rl,YC as rm,pZe as rn,YNt as ro,Y4t as rp,D4t as rq,V4t as rr,F4t as rs,PCt as rt,lNt as ru,aNt as rv,vCt as rw,L4t as rx,GRt as ry,H4t as rz,Qe as s,VYe as s0,kWe as s1,EMt as s2,TMt as s3,IOt as s4,ab as t,$Se as u,gi as v,YPt as w,zd as x,IC as y,mpe as z};
//# sourceMappingURL=index-C3JOhYFY.js.map
