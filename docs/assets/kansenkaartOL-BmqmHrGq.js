import{V as _,H as P,l as b,p as F,G as K,F as v,P as G}from"./index-C-hI6Yk1.js";const s={amk_zeer_hoog:1,amk_hoog:.8,amk_basis:.6,grafheuvel:.8,hunebed:.8,steentijd:.6,uikav:.6,kasteel:.4,ruine:.4};let d=null,h=!1,f=null;async function c(e){try{const n=await fetch(e);if(!n.ok)return console.warn(`Kansenkaart: Could not load ${e}`),[];const a=await n.json();return new K().readFeatures(a,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}catch(n){return console.warn(`Kansenkaart: Error loading ${e}:`,n),[]}}function r(e){const n=e.getGeometry();if(!n)return null;if(n.getType()==="Point")return n.getCoordinates();const a=n.getExtent();return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function l(e,n){return new v({geometry:new G(e),weight:n})}async function $(){return d||(h&&f||(h=!0,f=(async()=>{const e=[];console.log("ðŸ—ºï¸ Kansenkaart: Loading archaeological data sources...");const[n,a,i,p,k,m,w,j]=await Promise.all([b("/detectorapp-nl/data/amk_monumenten_full.topojson").catch(()=>null),c("/detectorapp-nl/data/grafheuvels.geojson"),c("/detectorapp-nl/data/steentijd/hunebedden.geojson"),c("/detectorapp-nl/data/steentijd/euroevol_nl_be.geojson"),c("/detectorapp-nl/data/uikav/uikav_archeo_punten.geojson"),c("/detectorapp-nl/data/kastelen.geojson"),c("/detectorapp-nl/data/ruines_osm.geojson"),c("/detectorapp-nl/data/geomorfologie_hotspots.geojson")]);if(n){const t=F(n);for(const o of t){const u=r(o);if(!u)continue;const y=(o.get("kwaliteitswaarde")||"").toLowerCase();let g=s.amk_basis;y.includes("zeer hoge")?g=s.amk_zeer_hoog:y.includes("hoge")&&(g=s.amk_hoog),e.push(l(u,g))}console.log(`  âœ“ AMK: ${t.length} monumenten`)}for(const t of a){const o=r(t);o&&e.push(l(o,s.grafheuvel))}console.log(`  âœ“ Grafheuvels: ${a.length}`);for(const t of i){const o=r(t);o&&e.push(l(o,s.hunebed))}console.log(`  âœ“ Hunebedden: ${i.length}`);for(const t of p){const o=r(t);o&&e.push(l(o,s.steentijd))}console.log(`  âœ“ Steentijd sites: ${p.length}`);for(const t of k){const o=r(t);o&&e.push(l(o,s.uikav))}console.log(`  âœ“ UIKAV punten: ${k.length}`);for(const t of m){const o=r(t);o&&e.push(l(o,s.kasteel))}console.log(`  âœ“ Kastelen: ${m.length}`);for(const t of w){const o=r(t);o&&e.push(l(o,s.ruine))}console.log(`  âœ“ RuÃ¯nes: ${w.length}`);for(const t of j){const o=r(t);if(o){const u=t.get("weight")||.5;e.push(l(o,u))}}return console.log(`  âœ“ Geomorfologie hotspots: ${j.length}`),console.log(`ðŸ—ºï¸ Kansenkaart: ${e.length} total weighted points loaded`),d=e,h=!1,e})()),f)}async function L(){try{console.log("ðŸ—ºï¸ Kansenkaart: Starting layer creation...");const e=await $();console.log(`ðŸ—ºï¸ Kansenkaart: Got ${e.length} weighted points`);const n=new _({features:e}),a=new P({source:n,properties:{title:"Kansenkaart",type:"heatmap",queryable:!1},visible:!1,opacity:.6,zIndex:5,blur:15,radius:8,weight:i=>i.get("weight")||.5,gradient:["rgba(0,0,255,0)","rgba(0,0,255,0.5)","#00ffff","#00ff00","#ffff00","#ff8800","#ff0000"]});return console.log("âœ“ Kansenkaart heatmap layer created"),a}catch(e){return console.error("Failed to create Kansenkaart layer:",e),null}}export{L as createKansenkaartLayerOL};
//# sourceMappingURL=kansenkaartOL-BmqmHrGq.js.map
