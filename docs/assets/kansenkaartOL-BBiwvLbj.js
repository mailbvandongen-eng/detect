import{V as _,H as P,l as F,p as v,G as b,F as G,P as K}from"./index-DNzKC9lc.js";const s={amk_zeer_hoog:1,amk_hoog:.8,amk_basis:.6,grafheuvel:.8,hunebed:.8,steentijd:.6,uikav:.6,kasteel:.4,ruine:.4};let g=null,h=!1,f=null;async function c(e){try{const n=await fetch(e);if(!n.ok)return console.warn(`Kansenkaart: Could not load ${e}`),[];const a=await n.json();return new b().readFeatures(a,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}catch(n){return console.warn(`Kansenkaart: Error loading ${e}:`,n),[]}}function r(e){const n=e.getGeometry();if(!n)return null;if(n.getType()==="Point")return n.getCoordinates();const a=n.getExtent();return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function l(e,n){return new G({geometry:new K(e),weight:n})}async function $(){return g||(h&&f||(h=!0,f=(async()=>{const e=[];console.log("ðŸ—ºï¸ Kansenkaart: Loading archaeological data sources...");const[n,a,u,p,k,m,w,j]=await Promise.all([F("/detectorapp-nl/data/amk_monumenten_full.topojson").catch(()=>null),c("/detectorapp-nl/data/grafheuvels.geojson"),c("/detectorapp-nl/data/steentijd/hunebedden.geojson"),c("/detectorapp-nl/data/steentijd/euroevol_nl_be.geojson"),c("/detectorapp-nl/data/uikav/uikav_archeo_punten.geojson"),c("/detectorapp-nl/data/kastelen.geojson"),c("/detectorapp-nl/data/ruines_osm.geojson"),c("/detectorapp-nl/data/geomorfologie_hotspots.geojson")]);if(n){const t=v(n);for(const o of t){const i=r(o);if(!i)continue;const y=(o.get("kwaliteitswaarde")||"").toLowerCase();let d=s.amk_basis;y.includes("zeer hoge")?d=s.amk_zeer_hoog:y.includes("hoge")&&(d=s.amk_hoog),e.push(l(i,d))}console.log(`  âœ“ AMK: ${t.length} monumenten`)}for(const t of a){const o=r(t);o&&e.push(l(o,s.grafheuvel))}console.log(`  âœ“ Grafheuvels: ${a.length}`);for(const t of u){const o=r(t);o&&e.push(l(o,s.hunebed))}console.log(`  âœ“ Hunebedden: ${u.length}`);for(const t of p){const o=r(t);o&&e.push(l(o,s.steentijd))}console.log(`  âœ“ Steentijd sites: ${p.length}`);for(const t of k){const o=r(t);o&&e.push(l(o,s.uikav))}console.log(`  âœ“ UIKAV punten: ${k.length}`);for(const t of m){const o=r(t);o&&e.push(l(o,s.kasteel))}console.log(`  âœ“ Kastelen: ${m.length}`);for(const t of w){const o=r(t);o&&e.push(l(o,s.ruine))}console.log(`  âœ“ RuÃ¯nes: ${w.length}`);for(const t of j){const o=r(t);if(o){const i=t.get("weight")||.5;e.push(l(o,i))}}return console.log(`  âœ“ Geomorfologie hotspots: ${j.length}`),console.log(`ðŸ—ºï¸ Kansenkaart: ${e.length} total weighted points loaded`),g=e,h=!1,e})()),f)}async function L(){try{const e=await $(),n=new _({features:e}),a=new P({source:n,properties:{title:"Kansenkaart",type:"heatmap",queryable:!1},visible:!1,opacity:.7,zIndex:5,blur:25,radius:15,weight:u=>u.get("weight")||.5,gradient:["#0000ff","#00ffff","#00ff00","#ffff00","#ff8800","#ff0000"]});return console.log("âœ“ Kansenkaart heatmap layer created"),a}catch(e){return console.error("Failed to create Kansenkaart layer:",e),null}}export{L as createKansenkaartLayerOL};
//# sourceMappingURL=kansenkaartOL-BBiwvLbj.js.map
