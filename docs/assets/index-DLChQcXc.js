const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/romeinseFortenOL-CpqpZ30H.js","assets/iconStyles-QA9HKU-9.js","assets/kastelenOL-v7_AOFZ0.js","assets/ruinesOL-DpyPsP3c.js","assets/hunebeddenOL-Zh38Pk59.js","assets/uikavArcheoPuntenOL-CdpHp7wU.js","assets/speeltuinenOL-CThq25hq.js","assets/museaOL-Sl1YRNIL.js","assets/kringloopwinkelsOL-CG2WZL3D.js","assets/fossielenOL-DOxC-KDM.js","assets/fossielUtils-CXwKb5hW.js","assets/fossielenBelgieOL-BkKPy4dQ.js","assets/fossielenDuitslandOL-hOU5dnhP.js","assets/fossielenFrankrijkOL-wCS0r5o4.js","assets/bunkersOL-DY0kLeYX.js","assets/grafheuvelsOL-BxQ6Zn2s.js","assets/slagveldenOL-BnWMOB95.js","assets/IdentityManager-BHIa8mbd.js","assets/substitute-CfmJE0gx.js","assets/ElevationLayer-CjGN1cxj.js","assets/MultiOriginJSONSupport-jflRpqOv.js","assets/ArcGISCachedService-DlzNDN29.js","assets/TileInfoTilemapCache-BRNjE_TI.js","assets/TilemapCache-kGCWJ4mg.js","assets/LRUCache-CaY1pRSU.js","assets/MemCache-CnKhcY4q.js","assets/memoryEstimations-B-UOvRhj.js","assets/ArcGISService-CuKxXEQR.js","assets/OperationalLayer-CDpoZQqb.js","assets/layerContainerType-CSXZNpHb.js","assets/ElevationInfo-tXPN-74Y.js","assets/lengthUtils-3MNFJcv-.js","assets/PortalLayer-B0PylWtO.js","assets/portalItemUtils-DvUB7oZb.js","assets/WorkerHandle-C6wxotLE.js","assets/portalLayers-BpmKs1w1.js","assets/associatedFeatureServiceUtils-iHt_-XZz.js","assets/fetchService-j-IBe21J.js","assets/loadUtils-DtTweHgE.js","assets/lazyLayerLoader-D487fSyi.js","assets/arcgisLayers-B6kD4nv5.js","assets/layersCreator-Bi59phT6.js","assets/styleUtils-Ilz_Ib-c.js","assets/ElevationQuery-BVqBc8WX.js","assets/GeometryDescriptor-Dt5rqvSz.js","assets/projectOperator-Ct1JnSiM.js","assets/operatorProject-N-LBfmr5.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/projectOperator-DhKtC7Xk.js","assets/statsWorker-DC9vVxhL.js","assets/utils-CrTGEc43.js","assets/quantizationUtils-DkRh0gQQ.js","assets/heatmapUtils-CBVz7raY.js","assets/vec42-DeCpg4g7.js","assets/vec4f64-DPb6J-GU.js","assets/utils-DxC87Pna.js","assets/utils-DzgnSHpH.js","assets/ClassBreaksDefinition-DihywIqv.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-BOvVK642.js","assets/date-DCujAECq.js","assets/OptimizedFeature-CdukKbEI.js","assets/FeatureStore-CI31d9rP.js","assets/featureConversionUtils-B42GMepo.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-CGVkIG_I.js","assets/PooledRBush-D4EnKlEt.js","assets/timeSupport-C_fnENeO.js","assets/queryUtils-B5Ff5CLn.js","assets/optimizedFeatureQueryEngineAdapter-DU3ACvp4.js","assets/QueryEngine-COX2YlR3.js","assets/WhereClauseCache-zovzyWUC.js","assets/WhereClause-CSkniWz2.js","assets/TimeOnly-DRm1DSIC.js","assets/enum-BFANZfP1.js","assets/UnknownTimeZone-DtghSixG.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-CPTtEgHj.js","assets/NormalizationBinParametersMixin-CWtr4FZs.js","assets/FieldsIndex-9tJEdf4m.js","assets/number-kGgwT8nU.js","assets/locationUtils-Cv9YA_wL.js","assets/clientSideDefaults-DSUtcsHV.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-ZaGKTIEV.js","assets/workerHelper-Cb-IzNG2.js","assets/InterleavedLayout-C8KzaS_x.js","assets/BufferView-DUZZXo60.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-BL7Q8tOj.js","assets/deduplicate-D_Wrny6r.js","assets/Indices-BXEMk84X.js","assets/Normals-BOuXk3Zv.js","assets/ElevationSamplerWorker-CotXGo3g.js","assets/MeshLocalVertexSpace-D6Cv-HMJ.js","assets/vertexSpaceConversion-DyC3USMo.js","assets/spatialReferenceEllipsoidUtils-Het2RImW.js","assets/computeTranslationToOriginAndRotation-DI91rQnf.js","assets/projectPointToVector-WS0eUmSD.js","assets/meshVertexSpaceUtils-BiBLDshO.js","assets/vec3-CS9rt2cJ.js","assets/vec4-B1Ovh1HU.js","assets/FeatureServiceSnappingSourceWorker-Dnbe6sKV.js","assets/symbologySnappingCandidates-BsMJkP2b.js","assets/pbfQueryUtils-DEhwsSRP.js","assets/pbf-DXOwzdnO.js","assets/query-CA_t9Jv0.js","assets/queryZScale-aXvEguks.js","assets/GeoJSONSourceWorker-vvQL6fO8.js","assets/geojson-lDBnEYiz.js","assets/sourceUtils-DttwzKTi.js","assets/MemorySourceWorker-C53KSZ3h.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-H0CwoJTn.js","assets/dehydratedFeatures-DezZsLJL.js","assets/FeaturePipelineWorker-BG8LBNhE.js","assets/diffUtils-CufDCbv7.js","assets/AttributeStore-CSmHoIW3.js","assets/Utils-BagK9ysV.js","assets/BoundingBox-CVv3vV3R.js","assets/UpdateTracking2D-MaheMYSf.js","assets/ArcadeExpression-BuiZqBm3.js","assets/FeatureStoreQueryAdapter-BRdHtLDn.js","assets/labelPoint-BidBwWPL.js","assets/labelUtils-BEUosjke.js","assets/utils-DQaLv0i_.js","assets/defaultCIMValues-XI-Li77m.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/DictionaryScriptEvaluator-BRtSiRq9.js","assets/MeshWriterRegistry-RKNPaoEk.js","assets/rasterizingUtils-nnEu-J5o.js","assets/CIMSymbolHelper-DoquaK2y.js","assets/BidiEngine-BvER9tXK.js","assets/GeometryUtils-CB6_-4AU.js","assets/Rect-CUzevAry.js","assets/defaults-BM3Nk0U1.js","assets/TexturedLineMeshWriter-KP83xohP.js","assets/TurboLine-BpoCJMAH.js","assets/grouping-BPL3z1Z1.js","assets/QueueProcessor-Df6WsTz6.js","assets/FeatureMetadata-D0Qyu4UZ.js","assets/SourceChunkStore-D5hwzK8-.js","assets/parquet-BZZ5CD5A.js","assets/operatorGeodeticDensify-DiKB0BC9.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-CwrOIqBq.js","assets/FeatureIdInfo-6qdyzknb.js","assets/displayFilterUtils-TPydLGKX.js","assets/ogcFeatureUtils-BIZfGuuj.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-Bu_V9-4u.js","assets/PointCloudWorker-BmNjMk9Z.js","assets/quat-DVA2T9j0.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-ZQWthAe-.js","assets/RendererLegendOptions-6yz8VXt0.js","assets/ColorStop-CtVIPXSY.js","assets/I3SBinaryReader-CP1G_Kkr.js","assets/orientedBoundingBox-Cb26GMZN.js","assets/plane-BQFnfpKV.js","assets/vectorStacks-Dq9PdZgV.js","assets/RasterWorker-MeYvjh0A.js","assets/PixelBlock-BVI0AIz6.js","assets/RasterSymbolizer-BQAWGn9q.js","assets/vectorFieldUtils-CoubIRY5.js","assets/colorUtils-IWJeBnra.js","assets/rasterFunctionHelper-DH9CW1zE.js","assets/clipUtils-CJSvFktb.js","assets/rasterProjectionHelper-CCMCveHc.js","assets/colorRamps-DBtNCYpM.js","assets/PolynomialTransform-CbN3APEx.js","assets/dataUtils-BV9-WNn-.js","assets/SceneLayerSnappingSourceWorker-DQNtoVQs.js","assets/lineSegment-BxyQ9Awo.js","assets/sphere-DbGAV8Fy.js","assets/Octree-DnDC_H8t.js","assets/frustum-DxpkmhJP.js","assets/SceneLayerWorker-CwzkkKaa.js","assets/projectVectorToVector-KasJN4AD.js","assets/WFSSourceWorker-Dvj_posH.js","assets/wfsUtils-DDUpFzCv.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CMPPQylD.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-YhYs8hG5.js","assets/StyleRepository-CPwjHHBE.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-BrDDCU5E.js","assets/jsonUtils-OWG1nuIs.js","assets/typeUtils-CZoM-mfa.js","assets/ClassBreaksRenderer-B2GbOCQW.js","assets/commonProperties-BWbagTqm.js","assets/visualVariableUtils-DGZ3xjWX.js","assets/jsonUtils-4lGfdFl6.js","assets/defaults3D-BNvrNp26.js","assets/SimpleRenderer-Bs5cwp7m.js","assets/UniqueValueRenderer-DqK2pTZQ.js","assets/styleUtils-DnoqlG_x.js","assets/HUDMaterial.glsl-CWS77NXw.js","assets/hydratedFeatures-CFsB3-Yi.js","assets/OutputColorHighlightOID.glsl-CAb8Itc1.js","assets/triangle-3APGC6EY.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-q4K0Mmay.js","assets/placementUtils-CbGQVPh6.js","assets/sdfPrimitives-DEzlF-uW.js","assets/Texture-BbHwzBfj.js","assets/videoUtils-C8eIV5ft.js","assets/requestImageUtils-jaDG9ng4.js","assets/RealisticTree.glsl-DwCeVh4e.js","assets/DefaultMaterial-BEqPyudm.js","assets/VertexBuffer-D26ZVRJD.js","assets/BufferObject-09rDw56i.js","assets/boundedPlane-Cq7RYcDS.js","assets/FlowWorker-hk4waCjI.js","assets/ParquetSourceWorker-Dg1I9J1f.js","assets/parquetUtils-C8Js6ina.js","assets/PanoramicMeshWorker-B-PP6LbP.js","assets/Popup-C-oc366h.js","assets/throttle-COSPqdQw.js","assets/unitFormatUtils-CnJDHlHu.js","assets/quantityUtils-Cb3URzZD.js","assets/AttachmentInfo-BQjVMZp-.js","assets/labelingInfo-DRv_Hn-R.js","assets/featureUtils-CEWq57nF.js","assets/utils-DdRrKPjT.js","assets/cimSymbolUtils-nQz3UgzA.js","assets/executeQueryJSON-cDjI8GBA.js","assets/FeatureSet-E685RQju.js","assets/shared-DLOKLiNQ.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/FeatureLayer-DE8vBQ0a.js","assets/FormTemplate-CEo1ITwR.js","assets/GraphicOrigin-Bf82Medx.js","assets/editsZScale-CySHN_kO.js","assets/APIKeyMixin-D1vyFy5W.js","assets/BlendLayer-Dplca55P.js","assets/jsonUtils-Cg02VdTe.js","assets/parser-BrtUQI0I.js","assets/CustomParametersMixin-8lbFUrHF.js","assets/DisplayFilteredLayer-U2fobQ15.js","assets/scaleUtils-CDKi4t-N.js","assets/EditBusLayer-CAY3i7xG.js","assets/FeatureEffectLayer-DCTitFdA.js","assets/FeatureEffect-CZO3lmQY.js","assets/FeatureFilter-BLbkY-KF.js","assets/FeatureLayerBase-NED4_MkG.js","assets/LayerFloorInfo-DlvVRiQZ.js","assets/multiLayerServiceUtils-DRveSu6X.js","assets/Relationship-CQjDSRmt.js","assets/serviceCapabilitiesUtils-pFqW7qF-.js","assets/infoFor3D-DhzudQro.js","assets/FeatureReductionLayer-DuSSPw46.js","assets/FeatureReductionSelection-BqqdXFRX.js","assets/OrderedLayer-M3bM00Lr.js","assets/OrderByInfo-C5qdZW7t.js","assets/RefreshableLayer-BdCRu8bd.js","assets/ScaleRangeLayer-DK2wWTC1.js","assets/TemporalLayer-B-2EQ2IN.js","assets/TimeInfo-DrLjOVBA.js","assets/TrackableLayer-D3ZpzNZ3.js","assets/FeatureTemplate-BF07ge64.js","assets/FeatureType-DCgfFl77.js","assets/fieldProperties-D_g7X1xP.js","assets/TitleCreator-o-z8jdbm.js","assets/versionUtils-CVsRbw3A.js","assets/popupUtils-C2xCMrO9.js","assets/NetworkElement-k-oaWUTT.js","assets/ReactiveSet-CXbKLSIa.js","assets/symbolUtils-DNi09v0d.js","assets/layerViewUtils-CsMln4Pe.js","assets/arcadeUtils-BcENEI9M.js","assets/arcade-DWosBnhf.js","assets/arcadeEnvironment-DNbA0XVf.js","assets/Dictionary-BMC_SMoB.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-Cd_5cl31.js","assets/aiServices-BMGGcT-7.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-bhOxcTjk.js","assets/rasterFieldUtils-CzqsNDNx.js","assets/batchExec-mSKGv1vE.js","assets/webStyleSymbolUtils-DUXlbZg-.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/geometryServiceUtils-DfkuJihF.js","assets/project-DQklA5qE.js","assets/webglDeps-B6rDlXN-.js","assets/FramebufferObject-Bop-bUIR.js","assets/ProgramTemplate-BjtwZ5B4.js","assets/VertexArrayObject-Ci_GX5mM.js","assets/mapViewDeps-DW2jekiW.js","assets/FeatureCommandQueue-CGuy69al.js","assets/GraphShaderModule-DqFAriBN.js","assets/utils-D5YTjuH-.js","assets/WGLContainer-DH-7lnh9.js","assets/Container-CXQfkbON.js","assets/SDFHelper-lIFN0iSH.js","assets/OverrideHelper-BTMSYIWv.js","assets/callExpressionWithFeature-ChWcPWdG.js","assets/GridShader-BP-Bqpn9.js","assets/testSVGPremultipliedAlpha-BXXQxLz9.js","assets/SymbolFader-CZFP6Rce.js","assets/RenderingContext-B9g4EKi_.js","assets/CIMResourceManager-CyJ6VoO8.js","assets/utils-ckamaY-f.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-B8X7Cj9H.js","assets/GraphicContainer-CVqsMhDw.js","assets/AGraphicContainer-rW-RYR84.js","assets/TechniqueInstance-BkSvZVsv.js","assets/TileContainer-C_SQRbRC.js","assets/gridUtils-CnqfxcPr.js","assets/geodesicUtils-Cx2IH8yI.js","assets/TileLayerView2D-DmMAmXmr.js","assets/imageUtils-jTioAJ12.js","assets/BitmapTechnique-COtRPJnq.js","assets/bitmapUtils-DPPZWQcM.js","assets/LayerView2D-BxBoKCd-.js","assets/HighlightGraphicContainer-CDxE7lvQ.js","assets/LayerView-CoLULHlo.js","assets/RefreshableLayerView-BIMiQljj.js","assets/MapServiceLayerViewHelper-D851oCbI.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-d2Qa0q8h.js","assets/sublayerUtils-BEQnBRaB.js","assets/popupUtils--dwY_tMq.js","assets/highlightOptionsUtils-uXmr1qjr.js","assets/FeatureLayerView2D-B5Z1sB9E.js","assets/timeSupport-DuI44R76.js","assets/AttributeBinsFeatureSet-2X28py17.js","assets/AttributeBinsQuery-DGSGrrSa.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-Cg64U-so.js","assets/BitmapContainer-NBKm3r9C.js","assets/ExportStrategy-CkMu5UHS.js","assets/CatalogLayerView2D-CCosKLm1.js","assets/CatalogDynamicGroupLayerView2D-CtETOhwA.js","assets/CatalogFootprintLayerView2D-DaXB8CwA.js","assets/GeoRSSLayerView2D-Cv6y05vk.js","assets/GraphicsLayerView2D-DrbnSqv4.js","assets/GroupLayerView2D-BfDXc0xT.js","assets/ImageryLayerView2D-D87woBeH.js","assets/RasterVFDisplayObject-mBJX8fs6.js","assets/ImageryTileLayerView2D-Cc0KmYFt.js","assets/datasetUtils-BL9SKQz3.js","assets/rasterUtils-C0fEQHiN.js","assets/RawBlockCache-Chm4Sska.js","assets/KMLLayerView2D-CmNVdAeB.js","assets/kmlUtils-HwHPGX3p.js","assets/KnowledgeGraphLayerView2D-C1KIVdCb.js","assets/MapImageLayerView2D-DR8xAc4g.js","assets/ExportImageParameters-DrcfEA21.js","assets/MapNotesLayerView2D-CUxpNIVg.js","assets/MediaLayerView2D-CqWQvFlg.js","assets/mediaLayerUtils-g_Mvlx9N.js","assets/OverlayContainer-7c75q-uR.js","assets/OGCFeatureLayerView2D-Ds_TYGei.js","assets/RouteLayerView2D-B1fnqq2B.js","assets/Stop-Dcuv_oOa.js","assets/networkEnums-D0N13DrK.js","assets/StreamLayerView2D-DOQKMshH.js","assets/SubtypeGroupLayerView2D-CqxDYwI0.js","assets/VectorTileLayerView2D-KWstUCL6.js","assets/VideoLayerView2D-DiBaEgIH.js","assets/GraphicsLayer-DtwLVcKP.js","assets/videoUtils-BJYX3yDQ.js","assets/ControlPoint-Bt4g-Zwu.js","assets/WMSLayerView2D-pSa1dn9n.js","assets/ExportWMSImageParameters-BvskqkXR.js","assets/WMTSLayerView2D-DJjWdobB.js","assets/ElevationProfileAnalysisView2D-BI0U0EkC.js","assets/createUtils-Dgvyzz3O.js","assets/distanceOperator-DL7YPzZd.js","assets/Point2D-ByVU2sJE.js","assets/Distance2DCalculator-CXhBP-8I-D6auomlc.js","assets/ProjectionTransformation-DgV8ESkr.js","assets/Envelope2D-PYZ6irrd.js","assets/Transformation2D-HOoFpL6n.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-BSGQzAEV.js","assets/jsonConverter-DD414Hko.js","assets/simplifyOperator-jkfTcCTN.js","assets/operatorSimplify-DfQhG7Kl.js","assets/mapCollectionUtils-DdPMOIqF.js","assets/elevationInfoUtils-C7XtDPM4.js","assets/getDefaultUnitForView-BzjoFGgs.js","assets/SketchViewModel-ChATxEK6.js","assets/hitTestSelectUtils-BYa7TLoB.js","assets/geodeticLengthOperator-CzJ4abRy.js","assets/apng-B63tquyl.js","assets/index-B0iqDV3A.js","assets/index-Bi8qXpKr.js","assets/guid-LcV_DAvu.js","assets/useT9n-BmNka2g6.js","assets/index-DRn8TM6X.js","assets/index-no9_ZMbu.js","assets/dom-BPgoJKyK.js","assets/observers-BM6gMvVd.js","assets/ref-GbJct3pT.js","assets/static-BLNTGV0l.js","assets/form-Dfy7JQRQ.js","assets/interactive-5Ph_u5JP.js","assets/label-BFWMVke5.js","assets/useSetFocus-DkRrzjzO.js"])))=>i.map(i=>d[i]);
var qSe=Object.getPrototypeOf;var KSe=Reflect.get;var CY=t=>{throw TypeError(t)};var KD=(t,e,n)=>e.has(t)||CY("Cannot "+n);var Pr=(t,e,n)=>(KD(t,e,"read from private field"),n?n.call(t):e.get(t)),Tu=(t,e,n)=>e.has(t)?CY("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ku=(t,e,n,r)=>(KD(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),oE=(t,e,n)=>(KD(t,e,"access private method"),n);var MY=(t,e,n)=>KSe(qSe(t),n,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function kz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YD={exports:{}},aE={},XD={exports:{}},Wn={};var NY;function YSe(){if(NY)return Wn;NY=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(Q){return Q===null||typeof Q!="object"?null:(Q=h&&Q[h]||Q["@@iterator"],typeof Q=="function"?Q:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function b(Q,W,ne){this.props=Q,this.context=W,this.refs=x,this.updater=ne||g}b.prototype.isReactComponent={},b.prototype.setState=function(Q,W){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,W,"setState")},b.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function T(){}T.prototype=b.prototype;function A(Q,W,ne){this.props=Q,this.context=W,this.refs=x,this.updater=ne||g}var I=A.prototype=new T;I.constructor=A,v(I,b.prototype),I.isPureReactComponent=!0;var P=Array.isArray,M=Object.prototype.hasOwnProperty,F={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(Q,W,ne){var ie,le={},ve=null,qe=null;if(W!=null)for(ie in W.ref!==void 0&&(qe=W.ref),W.key!==void 0&&(ve=""+W.key),W)M.call(W,ie)&&!C.hasOwnProperty(ie)&&(le[ie]=W[ie]);var Ke=arguments.length-2;if(Ke===1)le.children=ne;else if(1<Ke){for(var Se=Array(Ke),we=0;we<Ke;we++)Se[we]=arguments[we+2];le.children=Se}if(Q&&Q.defaultProps)for(ie in Ke=Q.defaultProps,Ke)le[ie]===void 0&&(le[ie]=Ke[ie]);return{$$typeof:t,type:Q,key:ve,ref:qe,props:le,_owner:F.current}}function O(Q,W){return{$$typeof:t,type:Q.type,key:W,ref:Q.ref,props:Q.props,_owner:Q._owner}}function j(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function V(Q){var W={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ne){return W[ne]})}var G=/\/+/g;function U(Q,W){return typeof Q=="object"&&Q!==null&&Q.key!=null?V(""+Q.key):W.toString(36)}function fe(Q,W,ne,ie,le){var ve=typeof Q;(ve==="undefined"||ve==="boolean")&&(Q=null);var qe=!1;if(Q===null)qe=!0;else switch(ve){case"string":case"number":qe=!0;break;case"object":switch(Q.$$typeof){case t:case e:qe=!0}}if(qe)return qe=Q,le=le(qe),Q=ie===""?"."+U(qe,0):ie,P(le)?(ne="",Q!=null&&(ne=Q.replace(G,"$&/")+"/"),fe(le,W,ne,"",function(we){return we})):le!=null&&(j(le)&&(le=O(le,ne+(!le.key||qe&&qe.key===le.key?"":(""+le.key).replace(G,"$&/")+"/")+Q)),W.push(le)),1;if(qe=0,ie=ie===""?".":ie+":",P(Q))for(var Ke=0;Ke<Q.length;Ke++){ve=Q[Ke];var Se=ie+U(ve,Ke);qe+=fe(ve,W,ne,Se,le)}else if(Se=f(Q),typeof Se=="function")for(Q=Se.call(Q),Ke=0;!(ve=Q.next()).done;)ve=ve.value,Se=ie+U(ve,Ke++),qe+=fe(ve,W,ne,Se,le);else if(ve==="object")throw W=String(Q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return qe}function Re(Q,W,ne){if(Q==null)return Q;var ie=[],le=0;return fe(Q,ie,"","",function(ve){return W.call(ne,ve,le++)}),ie}function Be(Q){if(Q._status===-1){var W=Q._result;W=W(),W.then(function(ne){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ne)},function(ne){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ne)}),Q._status===-1&&(Q._status=0,Q._result=W)}if(Q._status===1)return Q._result.default;throw Q._result}var $e={current:null},pe={transition:null},De={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:pe,ReactCurrentOwner:F};function Me(){throw Error("act(...) is not supported in production builds of React.")}return Wn.Children={map:Re,forEach:function(Q,W,ne){Re(Q,function(){W.apply(this,arguments)},ne)},count:function(Q){var W=0;return Re(Q,function(){W++}),W},toArray:function(Q){return Re(Q,function(W){return W})||[]},only:function(Q){if(!j(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Wn.Component=b,Wn.Fragment=n,Wn.Profiler=i,Wn.PureComponent=A,Wn.StrictMode=r,Wn.Suspense=l,Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,Wn.act=Me,Wn.cloneElement=function(Q,W,ne){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var ie=v({},Q.props),le=Q.key,ve=Q.ref,qe=Q._owner;if(W!=null){if(W.ref!==void 0&&(ve=W.ref,qe=F.current),W.key!==void 0&&(le=""+W.key),Q.type&&Q.type.defaultProps)var Ke=Q.type.defaultProps;for(Se in W)M.call(W,Se)&&!C.hasOwnProperty(Se)&&(ie[Se]=W[Se]===void 0&&Ke!==void 0?Ke[Se]:W[Se])}var Se=arguments.length-2;if(Se===1)ie.children=ne;else if(1<Se){Ke=Array(Se);for(var we=0;we<Se;we++)Ke[we]=arguments[we+2];ie.children=Ke}return{$$typeof:t,type:Q.type,key:le,ref:ve,props:ie,_owner:qe}},Wn.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:s,_context:Q},Q.Consumer=Q},Wn.createElement=N,Wn.createFactory=function(Q){var W=N.bind(null,Q);return W.type=Q,W},Wn.createRef=function(){return{current:null}},Wn.forwardRef=function(Q){return{$$typeof:a,render:Q}},Wn.isValidElement=j,Wn.lazy=function(Q){return{$$typeof:u,_payload:{_status:-1,_result:Q},_init:Be}},Wn.memo=function(Q,W){return{$$typeof:c,type:Q,compare:W===void 0?null:W}},Wn.startTransition=function(Q){var W=pe.transition;pe.transition={};try{Q()}finally{pe.transition=W}},Wn.unstable_act=Me,Wn.useCallback=function(Q,W){return $e.current.useCallback(Q,W)},Wn.useContext=function(Q){return $e.current.useContext(Q)},Wn.useDebugValue=function(){},Wn.useDeferredValue=function(Q){return $e.current.useDeferredValue(Q)},Wn.useEffect=function(Q,W){return $e.current.useEffect(Q,W)},Wn.useId=function(){return $e.current.useId()},Wn.useImperativeHandle=function(Q,W,ne){return $e.current.useImperativeHandle(Q,W,ne)},Wn.useInsertionEffect=function(Q,W){return $e.current.useInsertionEffect(Q,W)},Wn.useLayoutEffect=function(Q,W){return $e.current.useLayoutEffect(Q,W)},Wn.useMemo=function(Q,W){return $e.current.useMemo(Q,W)},Wn.useReducer=function(Q,W,ne){return $e.current.useReducer(Q,W,ne)},Wn.useRef=function(Q){return $e.current.useRef(Q)},Wn.useState=function(Q){return $e.current.useState(Q)},Wn.useSyncExternalStore=function(Q,W,ne){return $e.current.useSyncExternalStore(Q,W,ne)},Wn.useTransition=function(){return $e.current.useTransition()},Wn.version="18.3.1",Wn}var OY;function EA(){return OY||(OY=1,XD.exports=YSe()),XD.exports}var LY;function XSe(){if(LY)return aE;LY=1;var t=EA(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,g=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:g,props:h,_owner:i.current}}return aE.Fragment=n,aE.jsx=o,aE.jsxs=o,aE}var DY;function ZSe(){return DY||(DY=1,YD.exports=XSe()),YD.exports}var m=ZSe(),qP={},ZD={exports:{}},qa={},JD={exports:{}},QD={};var $Y;function JSe(){return $Y||($Y=1,(function(t){function e(pe,De){var Me=pe.length;pe.push(De);e:for(;0<Me;){var Q=Me-1>>>1,W=pe[Q];if(0<i(W,De))pe[Q]=De,pe[Me]=W,Me=Q;else break e}}function n(pe){return pe.length===0?null:pe[0]}function r(pe){if(pe.length===0)return null;var De=pe[0],Me=pe.pop();if(Me!==De){pe[0]=Me;e:for(var Q=0,W=pe.length,ne=W>>>1;Q<ne;){var ie=2*(Q+1)-1,le=pe[ie],ve=ie+1,qe=pe[ve];if(0>i(le,Me))ve<W&&0>i(qe,le)?(pe[Q]=qe,pe[ve]=Me,Q=ve):(pe[Q]=le,pe[ie]=Me,Q=ie);else if(ve<W&&0>i(qe,Me))pe[Q]=qe,pe[ve]=Me,Q=ve;else break e}}return De}function i(pe,De){var Me=pe.sortIndex-De.sortIndex;return Me!==0?Me:pe.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(pe){for(var De=n(c);De!==null;){if(De.callback===null)r(c);else if(De.startTime<=pe)r(c),De.sortIndex=De.expirationTime,e(l,De);else break;De=n(c)}}function P(pe){if(x=!1,I(pe),!v)if(n(l)!==null)v=!0,Be(M);else{var De=n(c);De!==null&&$e(P,De.startTime-pe)}}function M(pe,De){v=!1,x&&(x=!1,T(N),N=-1),g=!0;var Me=f;try{for(I(De),h=n(l);h!==null&&(!(h.expirationTime>De)||pe&&!V());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var W=Q(h.expirationTime<=De);De=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),I(De)}else r(l);h=n(l)}if(h!==null)var ne=!0;else{var ie=n(c);ie!==null&&$e(P,ie.startTime-De),ne=!1}return ne}finally{h=null,f=Me,g=!1}}var F=!1,C=null,N=-1,O=5,j=-1;function V(){return!(t.unstable_now()-j<O)}function G(){if(C!==null){var pe=t.unstable_now();j=pe;var De=!0;try{De=C(!0,pe)}finally{De?U():(F=!1,C=null)}}else F=!1}var U;if(typeof A=="function")U=function(){A(G)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Re=fe.port2;fe.port1.onmessage=G,U=function(){Re.postMessage(null)}}else U=function(){b(G,0)};function Be(pe){C=pe,F||(F=!0,U())}function $e(pe,De){N=b(function(){pe(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Be(M))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(pe){switch(f){case 1:case 2:case 3:var De=3;break;default:De=f}var Me=f;f=De;try{return pe()}finally{f=Me}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,De){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Me=f;f=pe;try{return De()}finally{f=Me}},t.unstable_scheduleCallback=function(pe,De,Me){var Q=t.unstable_now();switch(typeof Me=="object"&&Me!==null?(Me=Me.delay,Me=typeof Me=="number"&&0<Me?Q+Me:Q):Me=Q,pe){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Me+W,pe={id:u++,callback:De,priorityLevel:pe,startTime:Me,expirationTime:W,sortIndex:-1},Me>Q?(pe.sortIndex=Me,e(c,pe),n(l)===null&&pe===n(c)&&(x?(T(N),N=-1):x=!0,$e(P,Me-Q))):(pe.sortIndex=W,e(l,pe),v||g||(v=!0,Be(M))),pe},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(pe){var De=f;return function(){var Me=f;f=De;try{return pe.apply(this,arguments)}finally{f=Me}}}})(QD)),QD}var jY;function QSe(){return jY||(jY=1,JD.exports=JSe()),JD.exports}var FY;function eTe(){if(FY)return qa;FY=1;var t=EA(),e=QSe();function n(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,p){o(d,p),o(d+"Capture",p)}function o(d,p){for(i[d]=p,d=0;d<p.length;d++)r.add(p[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function f(d){return l.call(h,d)?!0:l.call(u,d)?!1:c.test(d)?h[d]=!0:(u[d]=!0,!1)}function g(d,p,w,k){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function v(d,p,w,k){if(p===null||typeof p>"u"||g(d,p,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function x(d,p,w,k,R,L,K){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=k,this.attributeNamespace=R,this.mustUseProperty=w,this.propertyName=d,this.type=p,this.sanitizeURL=L,this.removeEmptyString=K}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new x(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var p=d[0];b[p]=new x(p,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new x(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new x(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new x(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new x(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new x(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new x(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new x(d,5,!1,d.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var p=d.replace(T,A);b[p]=new x(p,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var p=d.replace(T,A);b[p]=new x(p,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var p=d.replace(T,A);b[p]=new x(p,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new x(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new x(d,1,!1,d.toLowerCase(),null,!0,!0)});function I(d,p,w,k){var R=b.hasOwnProperty(p)?b[p]:null;(R!==null?R.type!==0:k||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(v(p,w,R,k)&&(w=null),k||R===null?f(p)&&(w===null?d.removeAttribute(p):d.setAttribute(p,""+w)):R.mustUseProperty?d[R.propertyName]=w===null?R.type===3?!1:"":w:(p=R.attributeName,k=R.attributeNamespace,w===null?d.removeAttribute(p):(R=R.type,w=R===3||R===4&&w===!0?"":""+w,k?d.setAttributeNS(k,p,w):d.setAttribute(p,w))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),F=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),V=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),Be=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),pe=Symbol.iterator;function De(d){return d===null||typeof d!="object"?null:(d=pe&&d[pe]||d["@@iterator"],typeof d=="function"?d:null)}var Me=Object.assign,Q;function W(d){if(Q===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);Q=p&&p[1]||""}return`
`+Q+d}var ne=!1;function ie(d,p){if(!d||ne)return"";ne=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(je){var k=je}Reflect.construct(d,[],p)}else{try{p.call()}catch(je){k=je}d.call(p.prototype)}else{try{throw Error()}catch(je){k=je}d()}}catch(je){if(je&&k&&typeof je.stack=="string"){for(var R=je.stack.split(`
`),L=k.stack.split(`
`),K=R.length-1,ce=L.length-1;1<=K&&0<=ce&&R[K]!==L[ce];)ce--;for(;1<=K&&0<=ce;K--,ce--)if(R[K]!==L[ce]){if(K!==1||ce!==1)do if(K--,ce--,0>ce||R[K]!==L[ce]){var he=`
`+R[K].replace(" at new "," at ");return d.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",d.displayName)),he}while(1<=K&&0<=ce);break}}}finally{ne=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?W(d):""}function le(d){switch(d.tag){case 5:return W(d.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return d=ie(d.type,!1),d;case 11:return d=ie(d.type.render,!1),d;case 1:return d=ie(d.type,!0),d;default:return""}}function ve(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case C:return"Fragment";case F:return"Portal";case O:return"Profiler";case N:return"StrictMode";case U:return"Suspense";case fe:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case V:return(d.displayName||"Context")+".Consumer";case j:return(d._context.displayName||"Context")+".Provider";case G:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Re:return p=d.displayName||null,p!==null?p:ve(d.type)||"Memo";case Be:p=d._payload,d=d._init;try{return ve(d(p))}catch{}}return null}function qe(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(p);case 8:return p===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Ke(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Se(d){var p=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function we(d){var p=Se(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,p),k=""+d[p];if(!d.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var R=w.get,L=w.set;return Object.defineProperty(d,p,{configurable:!0,get:function(){return R.call(this)},set:function(K){k=""+K,L.call(this,K)}}),Object.defineProperty(d,p,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(K){k=""+K},stopTracking:function(){d._valueTracker=null,delete d[p]}}}}function Dt(d){d._valueTracker||(d._valueTracker=we(d))}function Ye(d){if(!d)return!1;var p=d._valueTracker;if(!p)return!0;var w=p.getValue(),k="";return d&&(k=Se(d)?d.checked?"true":"false":d.value),d=k,d!==w?(p.setValue(d),!0):!1}function sn(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function $t(d,p){var w=p.checked;return Me({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function fn(d,p){var w=p.defaultValue==null?"":p.defaultValue,k=p.checked!=null?p.checked:p.defaultChecked;w=Ke(p.value!=null?p.value:w),d._wrapperState={initialChecked:k,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function yn(d,p){p=p.checked,p!=null&&I(d,"checked",p,!1)}function dt(d,p){yn(d,p);var w=Ke(p.value),k=p.type;if(w!=null)k==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(k==="submit"||k==="reset"){d.removeAttribute("value");return}p.hasOwnProperty("value")?jn(d,p.type,w):p.hasOwnProperty("defaultValue")&&jn(d,p.type,Ke(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(d.defaultChecked=!!p.defaultChecked)}function ur(d,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var k=p.type;if(!(k!=="submit"&&k!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+d._wrapperState.initialValue,w||p===d.value||(d.value=p),d.defaultValue=p}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function jn(d,p,w){(p!=="number"||sn(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var Un=Array.isArray;function Qr(d,p,w,k){if(d=d.options,p){p={};for(var R=0;R<w.length;R++)p["$"+w[R]]=!0;for(w=0;w<d.length;w++)R=p.hasOwnProperty("$"+d[w].value),d[w].selected!==R&&(d[w].selected=R),R&&k&&(d[w].defaultSelected=!0)}else{for(w=""+Ke(w),p=null,R=0;R<d.length;R++){if(d[R].value===w){d[R].selected=!0,k&&(d[R].defaultSelected=!0);return}p!==null||d[R].disabled||(p=d[R])}p!==null&&(p.selected=!0)}}function go(d,p){if(p.dangerouslySetInnerHTML!=null)throw Error(n(91));return Me({},p,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Ar(d,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(n(92));if(Un(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),w=p}d._wrapperState={initialValue:Ke(w)}}function Ti(d,p){var w=Ke(p.value),k=Ke(p.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),p.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),k!=null&&(d.defaultValue=""+k)}function Cs(d){var p=d.textContent;p===d._wrapperState.initialValue&&p!==""&&p!==null&&(d.value=p)}function wt(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xn(d,p){return d==null||d==="http://www.w3.org/1999/xhtml"?wt(p):d==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var hr,Ft=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,k,R){MSApp.execUnsafeLocalFunction(function(){return d(p,w,k,R)})}:d})(function(d,p){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=p;else{for(hr=hr||document.createElement("div"),hr.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=hr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;p.firstChild;)d.appendChild(p.firstChild)}});function Ln(d,p){if(p){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=p;return}}d.textContent=p}var Qt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lo=["Webkit","ms","Moz","O"];Object.keys(Qt).forEach(function(d){Lo.forEach(function(p){p=p+d.charAt(0).toUpperCase()+d.substring(1),Qt[p]=Qt[d]})});function Vi(d,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||Qt.hasOwnProperty(d)&&Qt[d]?(""+p).trim():p+"px"}function Ms(d,p){d=d.style;for(var w in p)if(p.hasOwnProperty(w)){var k=w.indexOf("--")===0,R=Vi(w,p[w],k);w==="float"&&(w="cssFloat"),k?d.setProperty(w,R):d[w]=R}}var Mn=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ki(d,p){if(p){if(Mn[d]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(n(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(n(61))}if(p.style!=null&&typeof p.style!="object")throw Error(n(62))}}function He(d,p){if(d.indexOf("-")===-1)return typeof p.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function Ae(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var rn=null,z=null,bt=null;function Y(d){if(d=Wb(d)){if(typeof rn!="function")throw Error(n(280));var p=d.stateNode;p&&(p=lP(p),rn(d.stateNode,d.type,p))}}function ae(d){z?bt?bt.push(d):bt=[d]:z=d}function Ve(){if(z){var d=z,p=bt;if(bt=z=null,Y(d),p)for(d=0;d<p.length;d++)Y(p[d])}}function ee(d,p){return d(p)}function ge(){}var Le=!1;function Je(d,p,w){if(Le)return d(p,w);Le=!0;try{return ee(d,p,w)}finally{Le=!1,(z!==null||bt!==null)&&(ge(),Ve())}}function ze(d,p){var w=d.stateNode;if(w===null)return null;var k=lP(w);if(k===null)return null;w=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,p,typeof w));return w}var nt=!1;if(a)try{var et={};Object.defineProperty(et,"passive",{get:function(){nt=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{nt=!1}function Mt(d,p,w,k,R,L,K,ce,he){var je=Array.prototype.slice.call(arguments,3);try{p.apply(w,je)}catch(ot){this.onError(ot)}}var zt=!1,gn=null,q=!1,re=null,J={onError:function(d){zt=!0,gn=d}};function te(d,p,w,k,R,L,K,ce,he){zt=!1,gn=null,Mt.apply(J,arguments)}function se(d,p,w,k,R,L,K,ce,he){if(te.apply(this,arguments),zt){if(zt){var je=gn;zt=!1,gn=null}else throw Error(n(198));q||(q=!0,re=je)}}function oe(d){var p=d,w=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,(p.flags&4098)!==0&&(w=p.return),d=p.return;while(d)}return p.tag===3?w:null}function Pe(d){if(d.tag===13){var p=d.memoizedState;if(p===null&&(d=d.alternate,d!==null&&(p=d.memoizedState)),p!==null)return p.dehydrated}return null}function Ge(d){if(oe(d)!==d)throw Error(n(188))}function Ie(d){var p=d.alternate;if(!p){if(p=oe(d),p===null)throw Error(n(188));return p!==d?null:d}for(var w=d,k=p;;){var R=w.return;if(R===null)break;var L=R.alternate;if(L===null){if(k=R.return,k!==null){w=k;continue}break}if(R.child===L.child){for(L=R.child;L;){if(L===w)return Ge(R),d;if(L===k)return Ge(R),p;L=L.sibling}throw Error(n(188))}if(w.return!==k.return)w=R,k=L;else{for(var K=!1,ce=R.child;ce;){if(ce===w){K=!0,w=R,k=L;break}if(ce===k){K=!0,k=R,w=L;break}ce=ce.sibling}if(!K){for(ce=L.child;ce;){if(ce===w){K=!0,w=L,k=R;break}if(ce===k){K=!0,k=L,w=R;break}ce=ce.sibling}if(!K)throw Error(n(189))}}if(w.alternate!==k)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:p}function Ne(d){return d=Ie(d),d!==null?Oe(d):null}function Oe(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=Oe(d);if(p!==null)return p;d=d.sibling}return null}var at=e.unstable_scheduleCallback,gt=e.unstable_cancelCallback,Rt=e.unstable_shouldYield,ct=e.unstable_requestPaint,ut=e.unstable_now,wn=e.unstable_getCurrentPriorityLevel,Ir=e.unstable_ImmediatePriority,Dr=e.unstable_UserBlockingPriority,yi=e.unstable_NormalPriority,yu=e.unstable_LowPriority,yc=e.unstable_IdlePriority,Rl=null,is=null;function Pp(d){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(Rl,d,void 0,(d.current.flags&128)===128)}catch{}}var Ai=Math.clz32?Math.clz32:l0,bh=Math.log,vc=Math.LN2;function l0(d){return d>>>=0,d===0?32:31-(bh(d)/vc|0)|0}var Eh=64,Rp=4194304;function _r(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Ud(d,p){var w=d.pendingLanes;if(w===0)return 0;var k=0,R=d.suspendedLanes,L=d.pingedLanes,K=w&268435455;if(K!==0){var ce=K&~R;ce!==0?k=_r(ce):(L&=K,L!==0&&(k=_r(L)))}else K=w&~R,K!==0?k=_r(K):L!==0&&(k=_r(L));if(k===0)return 0;if(p!==0&&p!==k&&(p&R)===0&&(R=k&-k,L=p&-p,R>=L||R===16&&(L&4194240)!==0))return p;if((k&4)!==0&&(k|=w&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=k;0<p;)w=31-Ai(p),R=1<<w,k|=d[w],p&=~R;return k}function c0(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u0(d,p){for(var w=d.suspendedLanes,k=d.pingedLanes,R=d.expirationTimes,L=d.pendingLanes;0<L;){var K=31-Ai(L),ce=1<<K,he=R[K];he===-1?((ce&w)===0||(ce&k)!==0)&&(R[K]=c0(ce,p)):he<=p&&(d.expiredLanes|=ce),L&=~ce}}function Sb(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Tb(){var d=Eh;return Eh<<=1,(Eh&4194240)===0&&(Eh=64),d}function kb(d){for(var p=[],w=0;31>w;w++)p.push(d);return p}function h0(d,p,w){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-Ai(p),d[p]=w}function kL(d,p){var w=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var k=d.eventTimes;for(d=d.expirationTimes;0<w;){var R=31-Ai(w),L=1<<R;p[R]=0,k[R]=-1,d[R]=-1,w&=~L}}function Ab(d,p){var w=d.entangledLanes|=p;for(d=d.entanglements;w;){var k=31-Ai(w),R=1<<k;R&p|d[k]&p&&(d[k]|=p),w&=~R}}var ir=0;function Sh(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Ib,vv,Pb,Rb,Cb,Th=!1,_v=[],kh=null,Ah=null,yo=null,d0=new Map,Gd=new Map,Cl=[],HI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cp(d,p){switch(d){case"focusin":case"focusout":kh=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":d0.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gd.delete(p.pointerId)}}function vu(d,p,w,k,R,L){return d===null||d.nativeEvent!==L?(d={blockedOn:p,domEventName:w,eventSystemFlags:k,nativeEvent:L,targetContainers:[R]},p!==null&&(p=Wb(p),p!==null&&vv(p)),d):(d.eventSystemFlags|=k,p=d.targetContainers,R!==null&&p.indexOf(R)===-1&&p.push(R),d)}function qI(d,p,w,k,R){switch(p){case"focusin":return kh=vu(kh,d,p,w,k,R),!0;case"dragenter":return Ah=vu(Ah,d,p,w,k,R),!0;case"mouseover":return yo=vu(yo,d,p,w,k,R),!0;case"pointerover":var L=R.pointerId;return d0.set(L,vu(d0.get(L)||null,d,p,w,k,R)),!0;case"gotpointercapture":return L=R.pointerId,Gd.set(L,vu(Gd.get(L)||null,d,p,w,k,R)),!0}return!1}function xv(d){var p=g0(d.target);if(p!==null){var w=oe(p);if(w!==null){if(p=w.tag,p===13){if(p=Pe(w),p!==null){d.blockedOn=p,Cb(d.priority,function(){Pb(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ei(d){if(d.blockedOn!==null)return!1;for(var p=d.targetContainers;0<p.length;){var w=wv(d.domEventName,d.eventSystemFlags,p[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var k=new w.constructor(w.type,w);ke=k,w.target.dispatchEvent(k),ke=null}else return p=Wb(w),p!==null&&vv(p),d.blockedOn=w,!1;p.shift()}return!0}function KI(d,p,w){ei(d)&&w.delete(p)}function AL(){Th=!1,kh!==null&&ei(kh)&&(kh=null),Ah!==null&&ei(Ah)&&(Ah=null),yo!==null&&ei(yo)&&(yo=null),d0.forEach(KI),Gd.forEach(KI)}function Mp(d,p){d.blockedOn===p&&(d.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,AL)))}function Np(d){function p(R){return Mp(R,d)}if(0<_v.length){Mp(_v[0],d);for(var w=1;w<_v.length;w++){var k=_v[w];k.blockedOn===d&&(k.blockedOn=null)}}for(kh!==null&&Mp(kh,d),Ah!==null&&Mp(Ah,d),yo!==null&&Mp(yo,d),d0.forEach(p),Gd.forEach(p),w=0;w<Cl.length;w++)k=Cl[w],k.blockedOn===d&&(k.blockedOn=null);for(;0<Cl.length&&(w=Cl[0],w.blockedOn===null);)xv(w),w.blockedOn===null&&Cl.shift()}var Bd=P.ReactCurrentBatchConfig,Wd=!0;function Ih(d,p,w,k){var R=ir,L=Bd.transition;Bd.transition=null;try{ir=1,Mb(d,p,w,k)}finally{ir=R,Bd.transition=L}}function YI(d,p,w,k){var R=ir,L=Bd.transition;Bd.transition=null;try{ir=4,Mb(d,p,w,k)}finally{ir=R,Bd.transition=L}}function Mb(d,p,w,k){if(Wd){var R=wv(d,p,w,k);if(R===null)jL(d,p,k,Ph,w),Cp(d,k);else if(qI(R,d,p,w,k))k.stopPropagation();else if(Cp(d,k),p&4&&-1<HI.indexOf(d)){for(;R!==null;){var L=Wb(R);if(L!==null&&Ib(L),L=wv(d,p,w,k),L===null&&jL(d,p,k,Ph,w),L===R)break;R=L}R!==null&&k.stopPropagation()}else jL(d,p,k,null,w)}}var Ph=null;function wv(d,p,w,k){if(Ph=null,d=Ae(k),d=g0(d),d!==null)if(p=oe(d),p===null)d=null;else if(w=p.tag,w===13){if(d=Pe(p),d!==null)return d;d=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;d=null}else p!==d&&(d=null);return Ph=d,null}function bv(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wn()){case Ir:return 1;case Dr:return 4;case yi:case yu:return 16;case yc:return 536870912;default:return 16}default:return 16}}var Ml=null,Ev=null,Hd=null;function XI(){if(Hd)return Hd;var d,p=Ev,w=p.length,k,R="value"in Ml?Ml.value:Ml.textContent,L=R.length;for(d=0;d<w&&p[d]===R[d];d++);var K=w-d;for(k=1;k<=K&&p[w-k]===R[L-k];k++);return Hd=R.slice(d,1<k?1-k:void 0)}function f0(d){var p=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&p===13&&(d=13)):d=p,d===10&&(d=13),32<=d||d===13?d:0}function Rh(){return!0}function Nb(){return!1}function Do(d){function p(w,k,R,L,K){this._reactName=w,this._targetInst=R,this.type=k,this.nativeEvent=L,this.target=K,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(w=d[ce],this[ce]=w?w(L):L[ce]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Rh:Nb,this.isPropagationStopped=Nb,this}return Me(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Rh)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Rh)},persist:function(){},isPersistent:Rh}),p}var Ch={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p0=Do(Ch),Op=Me({},Ch,{view:0,detail:0}),Sv=Do(Op),Tv,kv,Nl,m0=Me({},Op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Nl&&(Nl&&d.type==="mousemove"?(Tv=d.screenX-Nl.screenX,kv=d.screenY-Nl.screenY):kv=Tv=0,Nl=d),Tv)},movementY:function(d){return"movementY"in d?d.movementY:kv}}),Ob=Do(m0),ZI=Me({},m0,{dataTransfer:0}),JI=Do(ZI),Av=Me({},Op,{relatedTarget:0}),vo=Do(Av),QI=Me({},Ch,{animationName:0,elapsedTime:0,pseudoElement:0}),eP=Do(QI),Lp=Me({},Ch,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),S=Do(Lp),D=Me({},Ch,{data:0}),B=Do(D),Z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _t(d){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(d):(d=Fe[d])?!!p[d]:!1}function Nn(){return _t}var ss=Me({},Op,{key:function(d){if(d.key){var p=Z[d.key]||d.key;if(p!=="Unidentified")return p}return d.type==="keypress"?(d=f0(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ee[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(d){return d.type==="keypress"?f0(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?f0(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),$r=Do(ss),fs=Me({},m0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ol=Do(fs),qd=Me({},Op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn}),Mh=Do(qd),Nh=Me({},Ch,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iv=Do(Nh),Lb=Me({},m0,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),zEe=Do(Lb),UEe=[9,13,27,32],IL=a&&"CompositionEvent"in window,Db=null;a&&"documentMode"in document&&(Db=document.documentMode);var GEe=a&&"TextEvent"in window&&!Db,Eq=a&&(!IL||Db&&8<Db&&11>=Db),Sq=" ",Tq=!1;function kq(d,p){switch(d){case"keyup":return UEe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aq(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Pv=!1;function BEe(d,p){switch(d){case"compositionend":return Aq(p);case"keypress":return p.which!==32?null:(Tq=!0,Sq);case"textInput":return d=p.data,d===Sq&&Tq?null:d;default:return null}}function WEe(d,p){if(Pv)return d==="compositionend"||!IL&&kq(d,p)?(d=XI(),Hd=Ev=Ml=null,Pv=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Eq&&p.locale!=="ko"?null:p.data;default:return null}}var HEe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iq(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p==="input"?!!HEe[d.type]:p==="textarea"}function Pq(d,p,w,k){ae(k),p=sP(p,"onChange"),0<p.length&&(w=new p0("onChange","change",null,w,k),d.push({event:w,listeners:p}))}var $b=null,jb=null;function qEe(d){qq(d,0)}function tP(d){var p=Ov(d);if(Ye(p))return d}function KEe(d,p){if(d==="change")return p}var Rq=!1;if(a){var PL;if(a){var RL="oninput"in document;if(!RL){var Cq=document.createElement("div");Cq.setAttribute("oninput","return;"),RL=typeof Cq.oninput=="function"}PL=RL}else PL=!1;Rq=PL&&(!document.documentMode||9<document.documentMode)}function Mq(){$b&&($b.detachEvent("onpropertychange",Nq),jb=$b=null)}function Nq(d){if(d.propertyName==="value"&&tP(jb)){var p=[];Pq(p,jb,d,Ae(d)),Je(qEe,p)}}function YEe(d,p,w){d==="focusin"?(Mq(),$b=p,jb=w,$b.attachEvent("onpropertychange",Nq)):d==="focusout"&&Mq()}function XEe(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return tP(jb)}function ZEe(d,p){if(d==="click")return tP(p)}function JEe(d,p){if(d==="input"||d==="change")return tP(p)}function QEe(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var _u=typeof Object.is=="function"?Object.is:QEe;function Fb(d,p){if(_u(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var w=Object.keys(d),k=Object.keys(p);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var R=w[k];if(!l.call(p,R)||!_u(d[R],p[R]))return!1}return!0}function Oq(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Lq(d,p){var w=Oq(d);d=0;for(var k;w;){if(w.nodeType===3){if(k=d+w.textContent.length,d<=p&&k>=p)return{node:w,offset:p-d};d=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Oq(w)}}function Dq(d,p){return d&&p?d===p?!0:d&&d.nodeType===3?!1:p&&p.nodeType===3?Dq(d,p.parentNode):"contains"in d?d.contains(p):d.compareDocumentPosition?!!(d.compareDocumentPosition(p)&16):!1:!1}function $q(){for(var d=window,p=sn();p instanceof d.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)d=p.contentWindow;else break;p=sn(d.document)}return p}function CL(d){var p=d&&d.nodeName&&d.nodeName.toLowerCase();return p&&(p==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||p==="textarea"||d.contentEditable==="true")}function eSe(d){var p=$q(),w=d.focusedElem,k=d.selectionRange;if(p!==w&&w&&w.ownerDocument&&Dq(w.ownerDocument.documentElement,w)){if(k!==null&&CL(w)){if(p=k.start,d=k.end,d===void 0&&(d=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(d,w.value.length);else if(d=(p=w.ownerDocument||document)&&p.defaultView||window,d.getSelection){d=d.getSelection();var R=w.textContent.length,L=Math.min(k.start,R);k=k.end===void 0?L:Math.min(k.end,R),!d.extend&&L>k&&(R=k,k=L,L=R),R=Lq(w,L);var K=Lq(w,k);R&&K&&(d.rangeCount!==1||d.anchorNode!==R.node||d.anchorOffset!==R.offset||d.focusNode!==K.node||d.focusOffset!==K.offset)&&(p=p.createRange(),p.setStart(R.node,R.offset),d.removeAllRanges(),L>k?(d.addRange(p),d.extend(K.node,K.offset)):(p.setEnd(K.node,K.offset),d.addRange(p)))}}for(p=[],d=w;d=d.parentNode;)d.nodeType===1&&p.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)d=p[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var tSe=a&&"documentMode"in document&&11>=document.documentMode,Rv=null,ML=null,Vb=null,NL=!1;function jq(d,p,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;NL||Rv==null||Rv!==sn(k)||(k=Rv,"selectionStart"in k&&CL(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Vb&&Fb(Vb,k)||(Vb=k,k=sP(ML,"onSelect"),0<k.length&&(p=new p0("onSelect","select",null,p,w),d.push({event:p,listeners:k}),p.target=Rv)))}function nP(d,p){var w={};return w[d.toLowerCase()]=p.toLowerCase(),w["Webkit"+d]="webkit"+p,w["Moz"+d]="moz"+p,w}var Cv={animationend:nP("Animation","AnimationEnd"),animationiteration:nP("Animation","AnimationIteration"),animationstart:nP("Animation","AnimationStart"),transitionend:nP("Transition","TransitionEnd")},OL={},Fq={};a&&(Fq=document.createElement("div").style,"AnimationEvent"in window||(delete Cv.animationend.animation,delete Cv.animationiteration.animation,delete Cv.animationstart.animation),"TransitionEvent"in window||delete Cv.transitionend.transition);function rP(d){if(OL[d])return OL[d];if(!Cv[d])return d;var p=Cv[d],w;for(w in p)if(p.hasOwnProperty(w)&&w in Fq)return OL[d]=p[w];return d}var Vq=rP("animationend"),zq=rP("animationiteration"),Uq=rP("animationstart"),Gq=rP("transitionend"),Bq=new Map,Wq="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dp(d,p){Bq.set(d,p),s(p,[d])}for(var LL=0;LL<Wq.length;LL++){var DL=Wq[LL],nSe=DL.toLowerCase(),rSe=DL[0].toUpperCase()+DL.slice(1);Dp(nSe,"on"+rSe)}Dp(Vq,"onAnimationEnd"),Dp(zq,"onAnimationIteration"),Dp(Uq,"onAnimationStart"),Dp("dblclick","onDoubleClick"),Dp("focusin","onFocus"),Dp("focusout","onBlur"),Dp(Gq,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iSe=new Set("cancel close invalid load scroll toggle".split(" ").concat(zb));function Hq(d,p,w){var k=d.type||"unknown-event";d.currentTarget=w,se(k,p,void 0,d),d.currentTarget=null}function qq(d,p){p=(p&4)!==0;for(var w=0;w<d.length;w++){var k=d[w],R=k.event;k=k.listeners;e:{var L=void 0;if(p)for(var K=k.length-1;0<=K;K--){var ce=k[K],he=ce.instance,je=ce.currentTarget;if(ce=ce.listener,he!==L&&R.isPropagationStopped())break e;Hq(R,ce,je),L=he}else for(K=0;K<k.length;K++){if(ce=k[K],he=ce.instance,je=ce.currentTarget,ce=ce.listener,he!==L&&R.isPropagationStopped())break e;Hq(R,ce,je),L=he}}}if(q)throw d=re,q=!1,re=null,d}function li(d,p){var w=p[BL];w===void 0&&(w=p[BL]=new Set);var k=d+"__bubble";w.has(k)||(Kq(p,d,2,!1),w.add(k))}function $L(d,p,w){var k=0;p&&(k|=4),Kq(w,d,k,p)}var iP="_reactListening"+Math.random().toString(36).slice(2);function Ub(d){if(!d[iP]){d[iP]=!0,r.forEach(function(w){w!=="selectionchange"&&(iSe.has(w)||$L(w,!1,d),$L(w,!0,d))});var p=d.nodeType===9?d:d.ownerDocument;p===null||p[iP]||(p[iP]=!0,$L("selectionchange",!1,p))}}function Kq(d,p,w,k){switch(bv(p)){case 1:var R=Ih;break;case 4:R=YI;break;default:R=Mb}w=R.bind(null,p,w,d),R=void 0,!nt||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(R=!0),k?R!==void 0?d.addEventListener(p,w,{capture:!0,passive:R}):d.addEventListener(p,w,!0):R!==void 0?d.addEventListener(p,w,{passive:R}):d.addEventListener(p,w,!1)}function jL(d,p,w,k,R){var L=k;if((p&1)===0&&(p&2)===0&&k!==null)e:for(;;){if(k===null)return;var K=k.tag;if(K===3||K===4){var ce=k.stateNode.containerInfo;if(ce===R||ce.nodeType===8&&ce.parentNode===R)break;if(K===4)for(K=k.return;K!==null;){var he=K.tag;if((he===3||he===4)&&(he=K.stateNode.containerInfo,he===R||he.nodeType===8&&he.parentNode===R))return;K=K.return}for(;ce!==null;){if(K=g0(ce),K===null)return;if(he=K.tag,he===5||he===6){k=L=K;continue e}ce=ce.parentNode}}k=k.return}Je(function(){var je=L,ot=Ae(w),ht=[];e:{var rt=Bq.get(d);if(rt!==void 0){var Nt=p0,Ut=d;switch(d){case"keypress":if(f0(w)===0)break e;case"keydown":case"keyup":Nt=$r;break;case"focusin":Ut="focus",Nt=vo;break;case"focusout":Ut="blur",Nt=vo;break;case"beforeblur":case"afterblur":Nt=vo;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=JI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=Mh;break;case Vq:case zq:case Uq:Nt=eP;break;case Gq:Nt=Iv;break;case"scroll":Nt=Sv;break;case"wheel":Nt=zEe;break;case"copy":case"cut":case"paste":Nt=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Ol}var Yt=(p&4)!==0,os=!Yt&&d==="scroll",be=Yt?rt!==null?rt+"Capture":null:rt;Yt=[];for(var me=je,Ce;me!==null;){Ce=me;var mt=Ce.stateNode;if(Ce.tag===5&&mt!==null&&(Ce=mt,be!==null&&(mt=ze(me,be),mt!=null&&Yt.push(Gb(me,mt,Ce)))),os)break;me=me.return}0<Yt.length&&(rt=new Nt(rt,Ut,null,w,ot),ht.push({event:rt,listeners:Yt}))}}if((p&7)===0){e:{if(rt=d==="mouseover"||d==="pointerover",Nt=d==="mouseout"||d==="pointerout",rt&&w!==ke&&(Ut=w.relatedTarget||w.fromElement)&&(g0(Ut)||Ut[Kd]))break e;if((Nt||rt)&&(rt=ot.window===ot?ot:(rt=ot.ownerDocument)?rt.defaultView||rt.parentWindow:window,Nt?(Ut=w.relatedTarget||w.toElement,Nt=je,Ut=Ut?g0(Ut):null,Ut!==null&&(os=oe(Ut),Ut!==os||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Nt=null,Ut=je),Nt!==Ut)){if(Yt=Ob,mt="onMouseLeave",be="onMouseEnter",me="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=Ol,mt="onPointerLeave",be="onPointerEnter",me="pointer"),os=Nt==null?rt:Ov(Nt),Ce=Ut==null?rt:Ov(Ut),rt=new Yt(mt,me+"leave",Nt,w,ot),rt.target=os,rt.relatedTarget=Ce,mt=null,g0(ot)===je&&(Yt=new Yt(be,me+"enter",Ut,w,ot),Yt.target=Ce,Yt.relatedTarget=os,mt=Yt),os=mt,Nt&&Ut)t:{for(Yt=Nt,be=Ut,me=0,Ce=Yt;Ce;Ce=Mv(Ce))me++;for(Ce=0,mt=be;mt;mt=Mv(mt))Ce++;for(;0<me-Ce;)Yt=Mv(Yt),me--;for(;0<Ce-me;)be=Mv(be),Ce--;for(;me--;){if(Yt===be||be!==null&&Yt===be.alternate)break t;Yt=Mv(Yt),be=Mv(be)}Yt=null}else Yt=null;Nt!==null&&Yq(ht,rt,Nt,Yt,!1),Ut!==null&&os!==null&&Yq(ht,os,Ut,Yt,!0)}}e:{if(rt=je?Ov(je):window,Nt=rt.nodeName&&rt.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&rt.type==="file")var Zt=KEe;else if(Iq(rt))if(Rq)Zt=JEe;else{Zt=XEe;var cn=YEe}else(Nt=rt.nodeName)&&Nt.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Zt=ZEe);if(Zt&&(Zt=Zt(d,je))){Pq(ht,Zt,w,ot);break e}cn&&cn(d,rt,je),d==="focusout"&&(cn=rt._wrapperState)&&cn.controlled&&rt.type==="number"&&jn(rt,"number",rt.value)}switch(cn=je?Ov(je):window,d){case"focusin":(Iq(cn)||cn.contentEditable==="true")&&(Rv=cn,ML=je,Vb=null);break;case"focusout":Vb=ML=Rv=null;break;case"mousedown":NL=!0;break;case"contextmenu":case"mouseup":case"dragend":NL=!1,jq(ht,w,ot);break;case"selectionchange":if(tSe)break;case"keydown":case"keyup":jq(ht,w,ot)}var un;if(IL)e:{switch(d){case"compositionstart":var bn="onCompositionStart";break e;case"compositionend":bn="onCompositionEnd";break e;case"compositionupdate":bn="onCompositionUpdate";break e}bn=void 0}else Pv?kq(d,w)&&(bn="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(bn="onCompositionStart");bn&&(Eq&&w.locale!=="ko"&&(Pv||bn!=="onCompositionStart"?bn==="onCompositionEnd"&&Pv&&(un=XI()):(Ml=ot,Ev="value"in Ml?Ml.value:Ml.textContent,Pv=!0)),cn=sP(je,bn),0<cn.length&&(bn=new B(bn,d,null,w,ot),ht.push({event:bn,listeners:cn}),un?bn.data=un:(un=Aq(w),un!==null&&(bn.data=un)))),(un=GEe?BEe(d,w):WEe(d,w))&&(je=sP(je,"onBeforeInput"),0<je.length&&(ot=new B("onBeforeInput","beforeinput",null,w,ot),ht.push({event:ot,listeners:je}),ot.data=un))}qq(ht,p)})}function Gb(d,p,w){return{instance:d,listener:p,currentTarget:w}}function sP(d,p){for(var w=p+"Capture",k=[];d!==null;){var R=d,L=R.stateNode;R.tag===5&&L!==null&&(R=L,L=ze(d,w),L!=null&&k.unshift(Gb(d,L,R)),L=ze(d,p),L!=null&&k.push(Gb(d,L,R))),d=d.return}return k}function Mv(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function Yq(d,p,w,k,R){for(var L=p._reactName,K=[];w!==null&&w!==k;){var ce=w,he=ce.alternate,je=ce.stateNode;if(he!==null&&he===k)break;ce.tag===5&&je!==null&&(ce=je,R?(he=ze(w,L),he!=null&&K.unshift(Gb(w,he,ce))):R||(he=ze(w,L),he!=null&&K.push(Gb(w,he,ce)))),w=w.return}K.length!==0&&d.push({event:p,listeners:K})}var sSe=/\r\n?/g,oSe=/\u0000|\uFFFD/g;function Xq(d){return(typeof d=="string"?d:""+d).replace(sSe,`
`).replace(oSe,"")}function oP(d,p,w){if(p=Xq(p),Xq(d)!==p&&w)throw Error(n(425))}function aP(){}var FL=null,VL=null;function zL(d,p){return d==="textarea"||d==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var UL=typeof setTimeout=="function"?setTimeout:void 0,aSe=typeof clearTimeout=="function"?clearTimeout:void 0,Zq=typeof Promise=="function"?Promise:void 0,lSe=typeof queueMicrotask=="function"?queueMicrotask:typeof Zq<"u"?function(d){return Zq.resolve(null).then(d).catch(cSe)}:UL;function cSe(d){setTimeout(function(){throw d})}function GL(d,p){var w=p,k=0;do{var R=w.nextSibling;if(d.removeChild(w),R&&R.nodeType===8)if(w=R.data,w==="/$"){if(k===0){d.removeChild(R),Np(p);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=R}while(w);Np(p)}function $p(d){for(;d!=null;d=d.nextSibling){var p=d.nodeType;if(p===1||p===3)break;if(p===8){if(p=d.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return d}function Jq(d){d=d.previousSibling;for(var p=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return d;p--}else w==="/$"&&p++}d=d.previousSibling}return null}var Nv=Math.random().toString(36).slice(2),Oh="__reactFiber$"+Nv,Bb="__reactProps$"+Nv,Kd="__reactContainer$"+Nv,BL="__reactEvents$"+Nv,uSe="__reactListeners$"+Nv,hSe="__reactHandles$"+Nv;function g0(d){var p=d[Oh];if(p)return p;for(var w=d.parentNode;w;){if(p=w[Kd]||w[Oh]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(d=Jq(d);d!==null;){if(w=d[Oh])return w;d=Jq(d)}return p}d=w,w=d.parentNode}return null}function Wb(d){return d=d[Oh]||d[Kd],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Ov(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function lP(d){return d[Bb]||null}var WL=[],Lv=-1;function jp(d){return{current:d}}function ci(d){0>Lv||(d.current=WL[Lv],WL[Lv]=null,Lv--)}function si(d,p){Lv++,WL[Lv]=d.current,d.current=p}var Fp={},$o=jp(Fp),Ua=jp(!1),y0=Fp;function Dv(d,p){var w=d.type.contextTypes;if(!w)return Fp;var k=d.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===p)return k.__reactInternalMemoizedMaskedChildContext;var R={},L;for(L in w)R[L]=p[L];return k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=R),R}function Ga(d){return d=d.childContextTypes,d!=null}function cP(){ci(Ua),ci($o)}function Qq(d,p,w){if($o.current!==Fp)throw Error(n(168));si($o,p),si(Ua,w)}function eK(d,p,w){var k=d.stateNode;if(p=p.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var R in k)if(!(R in p))throw Error(n(108,qe(d)||"Unknown",R));return Me({},w,k)}function uP(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Fp,y0=$o.current,si($o,d),si(Ua,Ua.current),!0}function tK(d,p,w){var k=d.stateNode;if(!k)throw Error(n(169));w?(d=eK(d,p,y0),k.__reactInternalMemoizedMergedChildContext=d,ci(Ua),ci($o),si($o,d)):ci(Ua),si(Ua,w)}var Yd=null,hP=!1,HL=!1;function nK(d){Yd===null?Yd=[d]:Yd.push(d)}function dSe(d){hP=!0,nK(d)}function Vp(){if(!HL&&Yd!==null){HL=!0;var d=0,p=ir;try{var w=Yd;for(ir=1;d<w.length;d++){var k=w[d];do k=k(!0);while(k!==null)}Yd=null,hP=!1}catch(R){throw Yd!==null&&(Yd=Yd.slice(d+1)),at(Ir,Vp),R}finally{ir=p,HL=!1}}return null}var $v=[],jv=0,dP=null,fP=0,_c=[],xc=0,v0=null,Xd=1,Zd="";function _0(d,p){$v[jv++]=fP,$v[jv++]=dP,dP=d,fP=p}function rK(d,p,w){_c[xc++]=Xd,_c[xc++]=Zd,_c[xc++]=v0,v0=d;var k=Xd;d=Zd;var R=32-Ai(k)-1;k&=~(1<<R),w+=1;var L=32-Ai(p)+R;if(30<L){var K=R-R%5;L=(k&(1<<K)-1).toString(32),k>>=K,R-=K,Xd=1<<32-Ai(p)+R|w<<R|k,Zd=L+d}else Xd=1<<L|w<<R|k,Zd=d}function qL(d){d.return!==null&&(_0(d,1),rK(d,1,0))}function KL(d){for(;d===dP;)dP=$v[--jv],$v[jv]=null,fP=$v[--jv],$v[jv]=null;for(;d===v0;)v0=_c[--xc],_c[xc]=null,Zd=_c[--xc],_c[xc]=null,Xd=_c[--xc],_c[xc]=null}var Ll=null,Dl=null,vi=!1,xu=null;function iK(d,p){var w=Sc(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=d,p=d.deletions,p===null?(d.deletions=[w],d.flags|=16):p.push(w)}function sK(d,p){switch(d.tag){case 5:var w=d.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(d.stateNode=p,Ll=d,Dl=$p(p.firstChild),!0):!1;case 6:return p=d.pendingProps===""||p.nodeType!==3?null:p,p!==null?(d.stateNode=p,Ll=d,Dl=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=v0!==null?{id:Xd,overflow:Zd}:null,d.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=Sc(18,null,null,0),w.stateNode=p,w.return=d,d.child=w,Ll=d,Dl=null,!0):!1;default:return!1}}function YL(d){return(d.mode&1)!==0&&(d.flags&128)===0}function XL(d){if(vi){var p=Dl;if(p){var w=p;if(!sK(d,p)){if(YL(d))throw Error(n(418));p=$p(w.nextSibling);var k=Ll;p&&sK(d,p)?iK(k,w):(d.flags=d.flags&-4097|2,vi=!1,Ll=d)}}else{if(YL(d))throw Error(n(418));d.flags=d.flags&-4097|2,vi=!1,Ll=d}}}function oK(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ll=d}function pP(d){if(d!==Ll)return!1;if(!vi)return oK(d),vi=!0,!1;var p;if((p=d.tag!==3)&&!(p=d.tag!==5)&&(p=d.type,p=p!=="head"&&p!=="body"&&!zL(d.type,d.memoizedProps)),p&&(p=Dl)){if(YL(d))throw aK(),Error(n(418));for(;p;)iK(d,p),p=$p(p.nextSibling)}if(oK(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,p=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(p===0){Dl=$p(d.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}d=d.nextSibling}Dl=null}}else Dl=Ll?$p(d.stateNode.nextSibling):null;return!0}function aK(){for(var d=Dl;d;)d=$p(d.nextSibling)}function Fv(){Dl=Ll=null,vi=!1}function ZL(d){xu===null?xu=[d]:xu.push(d)}var fSe=P.ReactCurrentBatchConfig;function Hb(d,p,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var k=w.stateNode}if(!k)throw Error(n(147,d));var R=k,L=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===L?p.ref:(p=function(K){var ce=R.refs;K===null?delete ce[L]:ce[L]=K},p._stringRef=L,p)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function mP(d,p){throw d=Object.prototype.toString.call(p),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function lK(d){var p=d._init;return p(d._payload)}function cK(d){function p(be,me){if(d){var Ce=be.deletions;Ce===null?(be.deletions=[me],be.flags|=16):Ce.push(me)}}function w(be,me){if(!d)return null;for(;me!==null;)p(be,me),me=me.sibling;return null}function k(be,me){for(be=new Map;me!==null;)me.key!==null?be.set(me.key,me):be.set(me.index,me),me=me.sibling;return be}function R(be,me){return be=Kp(be,me),be.index=0,be.sibling=null,be}function L(be,me,Ce){return be.index=Ce,d?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<me?(be.flags|=2,me):Ce):(be.flags|=2,me)):(be.flags|=1048576,me)}function K(be){return d&&be.alternate===null&&(be.flags|=2),be}function ce(be,me,Ce,mt){return me===null||me.tag!==6?(me=UD(Ce,be.mode,mt),me.return=be,me):(me=R(me,Ce),me.return=be,me)}function he(be,me,Ce,mt){var Zt=Ce.type;return Zt===C?ot(be,me,Ce.props.children,mt,Ce.key):me!==null&&(me.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Be&&lK(Zt)===me.type)?(mt=R(me,Ce.props),mt.ref=Hb(be,me,Ce),mt.return=be,mt):(mt=FP(Ce.type,Ce.key,Ce.props,null,be.mode,mt),mt.ref=Hb(be,me,Ce),mt.return=be,mt)}function je(be,me,Ce,mt){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ce.containerInfo||me.stateNode.implementation!==Ce.implementation?(me=GD(Ce,be.mode,mt),me.return=be,me):(me=R(me,Ce.children||[]),me.return=be,me)}function ot(be,me,Ce,mt,Zt){return me===null||me.tag!==7?(me=A0(Ce,be.mode,mt,Zt),me.return=be,me):(me=R(me,Ce),me.return=be,me)}function ht(be,me,Ce){if(typeof me=="string"&&me!==""||typeof me=="number")return me=UD(""+me,be.mode,Ce),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case M:return Ce=FP(me.type,me.key,me.props,null,be.mode,Ce),Ce.ref=Hb(be,null,me),Ce.return=be,Ce;case F:return me=GD(me,be.mode,Ce),me.return=be,me;case Be:var mt=me._init;return ht(be,mt(me._payload),Ce)}if(Un(me)||De(me))return me=A0(me,be.mode,Ce,null),me.return=be,me;mP(be,me)}return null}function rt(be,me,Ce,mt){var Zt=me!==null?me.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return Zt!==null?null:ce(be,me,""+Ce,mt);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:return Ce.key===Zt?he(be,me,Ce,mt):null;case F:return Ce.key===Zt?je(be,me,Ce,mt):null;case Be:return Zt=Ce._init,rt(be,me,Zt(Ce._payload),mt)}if(Un(Ce)||De(Ce))return Zt!==null?null:ot(be,me,Ce,mt,null);mP(be,Ce)}return null}function Nt(be,me,Ce,mt,Zt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return be=be.get(Ce)||null,ce(me,be,""+mt,Zt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case M:return be=be.get(mt.key===null?Ce:mt.key)||null,he(me,be,mt,Zt);case F:return be=be.get(mt.key===null?Ce:mt.key)||null,je(me,be,mt,Zt);case Be:var cn=mt._init;return Nt(be,me,Ce,cn(mt._payload),Zt)}if(Un(mt)||De(mt))return be=be.get(Ce)||null,ot(me,be,mt,Zt,null);mP(me,mt)}return null}function Ut(be,me,Ce,mt){for(var Zt=null,cn=null,un=me,bn=me=0,Xs=null;un!==null&&bn<Ce.length;bn++){un.index>bn?(Xs=un,un=null):Xs=un.sibling;var mr=rt(be,un,Ce[bn],mt);if(mr===null){un===null&&(un=Xs);break}d&&un&&mr.alternate===null&&p(be,un),me=L(mr,me,bn),cn===null?Zt=mr:cn.sibling=mr,cn=mr,un=Xs}if(bn===Ce.length)return w(be,un),vi&&_0(be,bn),Zt;if(un===null){for(;bn<Ce.length;bn++)un=ht(be,Ce[bn],mt),un!==null&&(me=L(un,me,bn),cn===null?Zt=un:cn.sibling=un,cn=un);return vi&&_0(be,bn),Zt}for(un=k(be,un);bn<Ce.length;bn++)Xs=Nt(un,be,bn,Ce[bn],mt),Xs!==null&&(d&&Xs.alternate!==null&&un.delete(Xs.key===null?bn:Xs.key),me=L(Xs,me,bn),cn===null?Zt=Xs:cn.sibling=Xs,cn=Xs);return d&&un.forEach(function(Yp){return p(be,Yp)}),vi&&_0(be,bn),Zt}function Yt(be,me,Ce,mt){var Zt=De(Ce);if(typeof Zt!="function")throw Error(n(150));if(Ce=Zt.call(Ce),Ce==null)throw Error(n(151));for(var cn=Zt=null,un=me,bn=me=0,Xs=null,mr=Ce.next();un!==null&&!mr.done;bn++,mr=Ce.next()){un.index>bn?(Xs=un,un=null):Xs=un.sibling;var Yp=rt(be,un,mr.value,mt);if(Yp===null){un===null&&(un=Xs);break}d&&un&&Yp.alternate===null&&p(be,un),me=L(Yp,me,bn),cn===null?Zt=Yp:cn.sibling=Yp,cn=Yp,un=Xs}if(mr.done)return w(be,un),vi&&_0(be,bn),Zt;if(un===null){for(;!mr.done;bn++,mr=Ce.next())mr=ht(be,mr.value,mt),mr!==null&&(me=L(mr,me,bn),cn===null?Zt=mr:cn.sibling=mr,cn=mr);return vi&&_0(be,bn),Zt}for(un=k(be,un);!mr.done;bn++,mr=Ce.next())mr=Nt(un,be,bn,mr.value,mt),mr!==null&&(d&&mr.alternate!==null&&un.delete(mr.key===null?bn:mr.key),me=L(mr,me,bn),cn===null?Zt=mr:cn.sibling=mr,cn=mr);return d&&un.forEach(function(HSe){return p(be,HSe)}),vi&&_0(be,bn),Zt}function os(be,me,Ce,mt){if(typeof Ce=="object"&&Ce!==null&&Ce.type===C&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case M:e:{for(var Zt=Ce.key,cn=me;cn!==null;){if(cn.key===Zt){if(Zt=Ce.type,Zt===C){if(cn.tag===7){w(be,cn.sibling),me=R(cn,Ce.props.children),me.return=be,be=me;break e}}else if(cn.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Be&&lK(Zt)===cn.type){w(be,cn.sibling),me=R(cn,Ce.props),me.ref=Hb(be,cn,Ce),me.return=be,be=me;break e}w(be,cn);break}else p(be,cn);cn=cn.sibling}Ce.type===C?(me=A0(Ce.props.children,be.mode,mt,Ce.key),me.return=be,be=me):(mt=FP(Ce.type,Ce.key,Ce.props,null,be.mode,mt),mt.ref=Hb(be,me,Ce),mt.return=be,be=mt)}return K(be);case F:e:{for(cn=Ce.key;me!==null;){if(me.key===cn)if(me.tag===4&&me.stateNode.containerInfo===Ce.containerInfo&&me.stateNode.implementation===Ce.implementation){w(be,me.sibling),me=R(me,Ce.children||[]),me.return=be,be=me;break e}else{w(be,me);break}else p(be,me);me=me.sibling}me=GD(Ce,be.mode,mt),me.return=be,be=me}return K(be);case Be:return cn=Ce._init,os(be,me,cn(Ce._payload),mt)}if(Un(Ce))return Ut(be,me,Ce,mt);if(De(Ce))return Yt(be,me,Ce,mt);mP(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"?(Ce=""+Ce,me!==null&&me.tag===6?(w(be,me.sibling),me=R(me,Ce),me.return=be,be=me):(w(be,me),me=UD(Ce,be.mode,mt),me.return=be,be=me),K(be)):w(be,me)}return os}var Vv=cK(!0),uK=cK(!1),gP=jp(null),yP=null,zv=null,JL=null;function QL(){JL=zv=yP=null}function eD(d){var p=gP.current;ci(gP),d._currentValue=p}function tD(d,p,w){for(;d!==null;){var k=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),d===w)break;d=d.return}}function Uv(d,p){yP=d,JL=zv=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&p)!==0&&(Ba=!0),d.firstContext=null)}function wc(d){var p=d._currentValue;if(JL!==d)if(d={context:d,memoizedValue:p,next:null},zv===null){if(yP===null)throw Error(n(308));zv=d,yP.dependencies={lanes:0,firstContext:d}}else zv=zv.next=d;return p}var x0=null;function nD(d){x0===null?x0=[d]:x0.push(d)}function hK(d,p,w,k){var R=p.interleaved;return R===null?(w.next=w,nD(p)):(w.next=R.next,R.next=w),p.interleaved=w,Jd(d,k)}function Jd(d,p){d.lanes|=p;var w=d.alternate;for(w!==null&&(w.lanes|=p),w=d,d=d.return;d!==null;)d.childLanes|=p,w=d.alternate,w!==null&&(w.childLanes|=p),w=d,d=d.return;return w.tag===3?w.stateNode:null}var zp=!1;function rD(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dK(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Qd(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function Up(d,p,w){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(dr&2)!==0){var R=k.pending;return R===null?p.next=p:(p.next=R.next,R.next=p),k.pending=p,Jd(d,w)}return R=k.interleaved,R===null?(p.next=p,nD(k)):(p.next=R.next,R.next=p),k.interleaved=p,Jd(d,w)}function vP(d,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var k=p.lanes;k&=d.pendingLanes,w|=k,p.lanes=w,Ab(d,w)}}function fK(d,p){var w=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var R=null,L=null;if(w=w.firstBaseUpdate,w!==null){do{var K={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};L===null?R=L=K:L=L.next=K,w=w.next}while(w!==null);L===null?R=L=p:L=L.next=p}else R=L=p;w={baseState:k.baseState,firstBaseUpdate:R,lastBaseUpdate:L,shared:k.shared,effects:k.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=p:d.next=p,w.lastBaseUpdate=p}function _P(d,p,w,k){var R=d.updateQueue;zp=!1;var L=R.firstBaseUpdate,K=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var he=ce,je=he.next;he.next=null,K===null?L=je:K.next=je,K=he;var ot=d.alternate;ot!==null&&(ot=ot.updateQueue,ce=ot.lastBaseUpdate,ce!==K&&(ce===null?ot.firstBaseUpdate=je:ce.next=je,ot.lastBaseUpdate=he))}if(L!==null){var ht=R.baseState;K=0,ot=je=he=null,ce=L;do{var rt=ce.lane,Nt=ce.eventTime;if((k&rt)===rt){ot!==null&&(ot=ot.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Ut=d,Yt=ce;switch(rt=p,Nt=w,Yt.tag){case 1:if(Ut=Yt.payload,typeof Ut=="function"){ht=Ut.call(Nt,ht,rt);break e}ht=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Yt.payload,rt=typeof Ut=="function"?Ut.call(Nt,ht,rt):Ut,rt==null)break e;ht=Me({},ht,rt);break e;case 2:zp=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,rt=R.effects,rt===null?R.effects=[ce]:rt.push(ce))}else Nt={eventTime:Nt,lane:rt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ot===null?(je=ot=Nt,he=ht):ot=ot.next=Nt,K|=rt;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;rt=ce,ce=rt.next,rt.next=null,R.lastBaseUpdate=rt,R.shared.pending=null}}while(!0);if(ot===null&&(he=ht),R.baseState=he,R.firstBaseUpdate=je,R.lastBaseUpdate=ot,p=R.shared.interleaved,p!==null){R=p;do K|=R.lane,R=R.next;while(R!==p)}else L===null&&(R.shared.lanes=0);E0|=K,d.lanes=K,d.memoizedState=ht}}function pK(d,p,w){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var k=d[p],R=k.callback;if(R!==null){if(k.callback=null,k=w,typeof R!="function")throw Error(n(191,R));R.call(k)}}}var qb={},Lh=jp(qb),Kb=jp(qb),Yb=jp(qb);function w0(d){if(d===qb)throw Error(n(174));return d}function iD(d,p){switch(si(Yb,p),si(Kb,d),si(Lh,qb),d=p.nodeType,d){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Xn(null,"");break;default:d=d===8?p.parentNode:p,p=d.namespaceURI||null,d=d.tagName,p=Xn(p,d)}ci(Lh),si(Lh,p)}function Gv(){ci(Lh),ci(Kb),ci(Yb)}function mK(d){w0(Yb.current);var p=w0(Lh.current),w=Xn(p,d.type);p!==w&&(si(Kb,d),si(Lh,w))}function sD(d){Kb.current===d&&(ci(Lh),ci(Kb))}var Ii=jp(0);function xP(d){for(var p=d;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var oD=[];function aD(){for(var d=0;d<oD.length;d++)oD[d]._workInProgressVersionPrimary=null;oD.length=0}var wP=P.ReactCurrentDispatcher,lD=P.ReactCurrentBatchConfig,b0=0,Pi=null,Ns=null,Ks=null,bP=!1,Xb=!1,Zb=0,pSe=0;function jo(){throw Error(n(321))}function cD(d,p){if(p===null)return!1;for(var w=0;w<p.length&&w<d.length;w++)if(!_u(d[w],p[w]))return!1;return!0}function uD(d,p,w,k,R,L){if(b0=L,Pi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,wP.current=d===null||d.memoizedState===null?vSe:_Se,d=w(k,R),Xb){L=0;do{if(Xb=!1,Zb=0,25<=L)throw Error(n(301));L+=1,Ks=Ns=null,p.updateQueue=null,wP.current=xSe,d=w(k,R)}while(Xb)}if(wP.current=TP,p=Ns!==null&&Ns.next!==null,b0=0,Ks=Ns=Pi=null,bP=!1,p)throw Error(n(300));return d}function hD(){var d=Zb!==0;return Zb=0,d}function Dh(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ks===null?Pi.memoizedState=Ks=d:Ks=Ks.next=d,Ks}function bc(){if(Ns===null){var d=Pi.alternate;d=d!==null?d.memoizedState:null}else d=Ns.next;var p=Ks===null?Pi.memoizedState:Ks.next;if(p!==null)Ks=p,Ns=d;else{if(d===null)throw Error(n(310));Ns=d,d={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Ks===null?Pi.memoizedState=Ks=d:Ks=Ks.next=d}return Ks}function Jb(d,p){return typeof p=="function"?p(d):p}function dD(d){var p=bc(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=Ns,R=k.baseQueue,L=w.pending;if(L!==null){if(R!==null){var K=R.next;R.next=L.next,L.next=K}k.baseQueue=R=L,w.pending=null}if(R!==null){L=R.next,k=k.baseState;var ce=K=null,he=null,je=L;do{var ot=je.lane;if((b0&ot)===ot)he!==null&&(he=he.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),k=je.hasEagerState?je.eagerState:d(k,je.action);else{var ht={lane:ot,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};he===null?(ce=he=ht,K=k):he=he.next=ht,Pi.lanes|=ot,E0|=ot}je=je.next}while(je!==null&&je!==L);he===null?K=k:he.next=ce,_u(k,p.memoizedState)||(Ba=!0),p.memoizedState=k,p.baseState=K,p.baseQueue=he,w.lastRenderedState=k}if(d=w.interleaved,d!==null){R=d;do L=R.lane,Pi.lanes|=L,E0|=L,R=R.next;while(R!==d)}else R===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function fD(d){var p=bc(),w=p.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=w.dispatch,R=w.pending,L=p.memoizedState;if(R!==null){w.pending=null;var K=R=R.next;do L=d(L,K.action),K=K.next;while(K!==R);_u(L,p.memoizedState)||(Ba=!0),p.memoizedState=L,p.baseQueue===null&&(p.baseState=L),w.lastRenderedState=L}return[L,k]}function gK(){}function yK(d,p){var w=Pi,k=bc(),R=p(),L=!_u(k.memoizedState,R);if(L&&(k.memoizedState=R,Ba=!0),k=k.queue,pD(xK.bind(null,w,k,d),[d]),k.getSnapshot!==p||L||Ks!==null&&Ks.memoizedState.tag&1){if(w.flags|=2048,Qb(9,_K.bind(null,w,k,R,p),void 0,null),Ys===null)throw Error(n(349));(b0&30)!==0||vK(w,p,R)}return R}function vK(d,p,w){d.flags|=16384,d={getSnapshot:p,value:w},p=Pi.updateQueue,p===null?(p={lastEffect:null,stores:null},Pi.updateQueue=p,p.stores=[d]):(w=p.stores,w===null?p.stores=[d]:w.push(d))}function _K(d,p,w,k){p.value=w,p.getSnapshot=k,wK(p)&&bK(d)}function xK(d,p,w){return w(function(){wK(p)&&bK(d)})}function wK(d){var p=d.getSnapshot;d=d.value;try{var w=p();return!_u(d,w)}catch{return!0}}function bK(d){var p=Jd(d,1);p!==null&&Su(p,d,1,-1)}function EK(d){var p=Dh();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jb,lastRenderedState:d},p.queue=d,d=d.dispatch=ySe.bind(null,Pi,d),[p.memoizedState,d]}function Qb(d,p,w,k){return d={tag:d,create:p,destroy:w,deps:k,next:null},p=Pi.updateQueue,p===null?(p={lastEffect:null,stores:null},Pi.updateQueue=p,p.lastEffect=d.next=d):(w=p.lastEffect,w===null?p.lastEffect=d.next=d:(k=w.next,w.next=d,d.next=k,p.lastEffect=d)),d}function SK(){return bc().memoizedState}function EP(d,p,w,k){var R=Dh();Pi.flags|=d,R.memoizedState=Qb(1|p,w,void 0,k===void 0?null:k)}function SP(d,p,w,k){var R=bc();k=k===void 0?null:k;var L=void 0;if(Ns!==null){var K=Ns.memoizedState;if(L=K.destroy,k!==null&&cD(k,K.deps)){R.memoizedState=Qb(p,w,L,k);return}}Pi.flags|=d,R.memoizedState=Qb(1|p,w,L,k)}function TK(d,p){return EP(8390656,8,d,p)}function pD(d,p){return SP(2048,8,d,p)}function kK(d,p){return SP(4,2,d,p)}function AK(d,p){return SP(4,4,d,p)}function IK(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function PK(d,p,w){return w=w!=null?w.concat([d]):null,SP(4,4,IK.bind(null,p,d),w)}function mD(){}function RK(d,p){var w=bc();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&cD(p,k[1])?k[0]:(w.memoizedState=[d,p],d)}function CK(d,p){var w=bc();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&cD(p,k[1])?k[0]:(d=d(),w.memoizedState=[d,p],d)}function MK(d,p,w){return(b0&21)===0?(d.baseState&&(d.baseState=!1,Ba=!0),d.memoizedState=w):(_u(w,p)||(w=Tb(),Pi.lanes|=w,E0|=w,d.baseState=!0),p)}function mSe(d,p){var w=ir;ir=w!==0&&4>w?w:4,d(!0);var k=lD.transition;lD.transition={};try{d(!1),p()}finally{ir=w,lD.transition=k}}function NK(){return bc().memoizedState}function gSe(d,p,w){var k=Hp(d);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},OK(d))LK(p,w);else if(w=hK(d,p,w,k),w!==null){var R=wa();Su(w,d,k,R),DK(w,p,k)}}function ySe(d,p,w){var k=Hp(d),R={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(OK(d))LK(p,R);else{var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=p.lastRenderedReducer,L!==null))try{var K=p.lastRenderedState,ce=L(K,w);if(R.hasEagerState=!0,R.eagerState=ce,_u(ce,K)){var he=p.interleaved;he===null?(R.next=R,nD(p)):(R.next=he.next,he.next=R),p.interleaved=R;return}}catch{}w=hK(d,p,R,k),w!==null&&(R=wa(),Su(w,d,k,R),DK(w,p,k))}}function OK(d){var p=d.alternate;return d===Pi||p!==null&&p===Pi}function LK(d,p){Xb=bP=!0;var w=d.pending;w===null?p.next=p:(p.next=w.next,w.next=p),d.pending=p}function DK(d,p,w){if((w&4194240)!==0){var k=p.lanes;k&=d.pendingLanes,w|=k,p.lanes=w,Ab(d,w)}}var TP={readContext:wc,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useInsertionEffect:jo,useLayoutEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useMutableSource:jo,useSyncExternalStore:jo,useId:jo,unstable_isNewReconciler:!1},vSe={readContext:wc,useCallback:function(d,p){return Dh().memoizedState=[d,p===void 0?null:p],d},useContext:wc,useEffect:TK,useImperativeHandle:function(d,p,w){return w=w!=null?w.concat([d]):null,EP(4194308,4,IK.bind(null,p,d),w)},useLayoutEffect:function(d,p){return EP(4194308,4,d,p)},useInsertionEffect:function(d,p){return EP(4,2,d,p)},useMemo:function(d,p){var w=Dh();return p=p===void 0?null:p,d=d(),w.memoizedState=[d,p],d},useReducer:function(d,p,w){var k=Dh();return p=w!==void 0?w(p):p,k.memoizedState=k.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},k.queue=d,d=d.dispatch=gSe.bind(null,Pi,d),[k.memoizedState,d]},useRef:function(d){var p=Dh();return d={current:d},p.memoizedState=d},useState:EK,useDebugValue:mD,useDeferredValue:function(d){return Dh().memoizedState=d},useTransition:function(){var d=EK(!1),p=d[0];return d=mSe.bind(null,d[1]),Dh().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,w){var k=Pi,R=Dh();if(vi){if(w===void 0)throw Error(n(407));w=w()}else{if(w=p(),Ys===null)throw Error(n(349));(b0&30)!==0||vK(k,p,w)}R.memoizedState=w;var L={value:w,getSnapshot:p};return R.queue=L,TK(xK.bind(null,k,L,d),[d]),k.flags|=2048,Qb(9,_K.bind(null,k,L,w,p),void 0,null),w},useId:function(){var d=Dh(),p=Ys.identifierPrefix;if(vi){var w=Zd,k=Xd;w=(k&~(1<<32-Ai(k)-1)).toString(32)+w,p=":"+p+"R"+w,w=Zb++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=pSe++,p=":"+p+"r"+w.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},_Se={readContext:wc,useCallback:RK,useContext:wc,useEffect:pD,useImperativeHandle:PK,useInsertionEffect:kK,useLayoutEffect:AK,useMemo:CK,useReducer:dD,useRef:SK,useState:function(){return dD(Jb)},useDebugValue:mD,useDeferredValue:function(d){var p=bc();return MK(p,Ns.memoizedState,d)},useTransition:function(){var d=dD(Jb)[0],p=bc().memoizedState;return[d,p]},useMutableSource:gK,useSyncExternalStore:yK,useId:NK,unstable_isNewReconciler:!1},xSe={readContext:wc,useCallback:RK,useContext:wc,useEffect:pD,useImperativeHandle:PK,useInsertionEffect:kK,useLayoutEffect:AK,useMemo:CK,useReducer:fD,useRef:SK,useState:function(){return fD(Jb)},useDebugValue:mD,useDeferredValue:function(d){var p=bc();return Ns===null?p.memoizedState=d:MK(p,Ns.memoizedState,d)},useTransition:function(){var d=fD(Jb)[0],p=bc().memoizedState;return[d,p]},useMutableSource:gK,useSyncExternalStore:yK,useId:NK,unstable_isNewReconciler:!1};function wu(d,p){if(d&&d.defaultProps){p=Me({},p),d=d.defaultProps;for(var w in d)p[w]===void 0&&(p[w]=d[w]);return p}return p}function gD(d,p,w,k){p=d.memoizedState,w=w(k,p),w=w==null?p:Me({},p,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var kP={isMounted:function(d){return(d=d._reactInternals)?oe(d)===d:!1},enqueueSetState:function(d,p,w){d=d._reactInternals;var k=wa(),R=Hp(d),L=Qd(k,R);L.payload=p,w!=null&&(L.callback=w),p=Up(d,L,R),p!==null&&(Su(p,d,R,k),vP(p,d,R))},enqueueReplaceState:function(d,p,w){d=d._reactInternals;var k=wa(),R=Hp(d),L=Qd(k,R);L.tag=1,L.payload=p,w!=null&&(L.callback=w),p=Up(d,L,R),p!==null&&(Su(p,d,R,k),vP(p,d,R))},enqueueForceUpdate:function(d,p){d=d._reactInternals;var w=wa(),k=Hp(d),R=Qd(w,k);R.tag=2,p!=null&&(R.callback=p),p=Up(d,R,k),p!==null&&(Su(p,d,k,w),vP(p,d,k))}};function $K(d,p,w,k,R,L,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,L,K):p.prototype&&p.prototype.isPureReactComponent?!Fb(w,k)||!Fb(R,L):!0}function jK(d,p,w){var k=!1,R=Fp,L=p.contextType;return typeof L=="object"&&L!==null?L=wc(L):(R=Ga(p)?y0:$o.current,k=p.contextTypes,L=(k=k!=null)?Dv(d,R):Fp),p=new p(w,L),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=kP,d.stateNode=p,p._reactInternals=d,k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=R,d.__reactInternalMemoizedMaskedChildContext=L),p}function FK(d,p,w,k){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,k),p.state!==d&&kP.enqueueReplaceState(p,p.state,null)}function yD(d,p,w,k){var R=d.stateNode;R.props=w,R.state=d.memoizedState,R.refs={},rD(d);var L=p.contextType;typeof L=="object"&&L!==null?R.context=wc(L):(L=Ga(p)?y0:$o.current,R.context=Dv(d,L)),R.state=d.memoizedState,L=p.getDerivedStateFromProps,typeof L=="function"&&(gD(d,p,L,w),R.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(p=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),p!==R.state&&kP.enqueueReplaceState(R,R.state,null),_P(d,w,R,k),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308)}function Bv(d,p){try{var w="",k=p;do w+=le(k),k=k.return;while(k);var R=w}catch(L){R=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:p,stack:R,digest:null}}function vD(d,p,w){return{value:d,source:null,stack:w??null,digest:p??null}}function _D(d,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var wSe=typeof WeakMap=="function"?WeakMap:Map;function VK(d,p,w){w=Qd(-1,w),w.tag=3,w.payload={element:null};var k=p.value;return w.callback=function(){NP||(NP=!0,OD=k),_D(d,p)},w}function zK(d,p,w){w=Qd(-1,w),w.tag=3;var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var R=p.value;w.payload=function(){return k(R)},w.callback=function(){_D(d,p)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(w.callback=function(){_D(d,p),typeof k!="function"&&(Bp===null?Bp=new Set([this]):Bp.add(this));var K=p.stack;this.componentDidCatch(p.value,{componentStack:K!==null?K:""})}),w}function UK(d,p,w){var k=d.pingCache;if(k===null){k=d.pingCache=new wSe;var R=new Set;k.set(p,R)}else R=k.get(p),R===void 0&&(R=new Set,k.set(p,R));R.has(w)||(R.add(w),d=LSe.bind(null,d,p,w),p.then(d,d))}function GK(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function BK(d,p,w,k,R){return(d.mode&1)===0?(d===p?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Qd(-1,1),p.tag=2,Up(w,p,1))),w.lanes|=1),d):(d.flags|=65536,d.lanes=R,d)}var bSe=P.ReactCurrentOwner,Ba=!1;function xa(d,p,w,k){p.child=d===null?uK(p,null,w,k):Vv(p,d.child,w,k)}function WK(d,p,w,k,R){w=w.render;var L=p.ref;return Uv(p,R),k=uD(d,p,w,k,L,R),w=hD(),d!==null&&!Ba?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~R,ef(d,p,R)):(vi&&w&&qL(p),p.flags|=1,xa(d,p,k,R),p.child)}function HK(d,p,w,k,R){if(d===null){var L=w.type;return typeof L=="function"&&!zD(L)&&L.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=L,qK(d,p,L,k,R)):(d=FP(w.type,null,k,p,p.mode,R),d.ref=p.ref,d.return=p,p.child=d)}if(L=d.child,(d.lanes&R)===0){var K=L.memoizedProps;if(w=w.compare,w=w!==null?w:Fb,w(K,k)&&d.ref===p.ref)return ef(d,p,R)}return p.flags|=1,d=Kp(L,k),d.ref=p.ref,d.return=p,p.child=d}function qK(d,p,w,k,R){if(d!==null){var L=d.memoizedProps;if(Fb(L,k)&&d.ref===p.ref)if(Ba=!1,p.pendingProps=k=L,(d.lanes&R)!==0)(d.flags&131072)!==0&&(Ba=!0);else return p.lanes=d.lanes,ef(d,p,R)}return xD(d,p,w,k,R)}function KK(d,p,w){var k=p.pendingProps,R=k.children,L=d!==null?d.memoizedState:null;if(k.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},si(Hv,$l),$l|=w;else{if((w&1073741824)===0)return d=L!==null?L.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null,transitions:null},p.updateQueue=null,si(Hv,$l),$l|=d,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=L!==null?L.baseLanes:w,si(Hv,$l),$l|=k}else L!==null?(k=L.baseLanes|w,p.memoizedState=null):k=w,si(Hv,$l),$l|=k;return xa(d,p,R,w),p.child}function YK(d,p){var w=p.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function xD(d,p,w,k,R){var L=Ga(w)?y0:$o.current;return L=Dv(p,L),Uv(p,R),w=uD(d,p,w,k,L,R),k=hD(),d!==null&&!Ba?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~R,ef(d,p,R)):(vi&&k&&qL(p),p.flags|=1,xa(d,p,w,R),p.child)}function XK(d,p,w,k,R){if(Ga(w)){var L=!0;uP(p)}else L=!1;if(Uv(p,R),p.stateNode===null)IP(d,p),jK(p,w,k),yD(p,w,k,R),k=!0;else if(d===null){var K=p.stateNode,ce=p.memoizedProps;K.props=ce;var he=K.context,je=w.contextType;typeof je=="object"&&je!==null?je=wc(je):(je=Ga(w)?y0:$o.current,je=Dv(p,je));var ot=w.getDerivedStateFromProps,ht=typeof ot=="function"||typeof K.getSnapshotBeforeUpdate=="function";ht||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==k||he!==je)&&FK(p,K,k,je),zp=!1;var rt=p.memoizedState;K.state=rt,_P(p,k,K,R),he=p.memoizedState,ce!==k||rt!==he||Ua.current||zp?(typeof ot=="function"&&(gD(p,w,ot,k),he=p.memoizedState),(ce=zp||$K(p,w,ce,k,rt,he,je))?(ht||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(p.flags|=4194308)):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=he),K.props=k,K.state=he,K.context=je,k=ce):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{K=p.stateNode,dK(d,p),ce=p.memoizedProps,je=p.type===p.elementType?ce:wu(p.type,ce),K.props=je,ht=p.pendingProps,rt=K.context,he=w.contextType,typeof he=="object"&&he!==null?he=wc(he):(he=Ga(w)?y0:$o.current,he=Dv(p,he));var Nt=w.getDerivedStateFromProps;(ot=typeof Nt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==ht||rt!==he)&&FK(p,K,k,he),zp=!1,rt=p.memoizedState,K.state=rt,_P(p,k,K,R);var Ut=p.memoizedState;ce!==ht||rt!==Ut||Ua.current||zp?(typeof Nt=="function"&&(gD(p,w,Nt,k),Ut=p.memoizedState),(je=zp||$K(p,w,je,k,rt,Ut,he)||!1)?(ot||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(k,Ut,he),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(k,Ut,he)),typeof K.componentDidUpdate=="function"&&(p.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&rt===d.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&rt===d.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=Ut),K.props=k,K.state=Ut,K.context=he,k=je):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&rt===d.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&rt===d.memoizedState||(p.flags|=1024),k=!1)}return wD(d,p,w,k,L,R)}function wD(d,p,w,k,R,L){YK(d,p);var K=(p.flags&128)!==0;if(!k&&!K)return R&&tK(p,w,!1),ef(d,p,L);k=p.stateNode,bSe.current=p;var ce=K&&typeof w.getDerivedStateFromError!="function"?null:k.render();return p.flags|=1,d!==null&&K?(p.child=Vv(p,d.child,null,L),p.child=Vv(p,null,ce,L)):xa(d,p,ce,L),p.memoizedState=k.state,R&&tK(p,w,!0),p.child}function ZK(d){var p=d.stateNode;p.pendingContext?Qq(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Qq(d,p.context,!1),iD(d,p.containerInfo)}function JK(d,p,w,k,R){return Fv(),ZL(R),p.flags|=256,xa(d,p,w,k),p.child}var bD={dehydrated:null,treeContext:null,retryLane:0};function ED(d){return{baseLanes:d,cachePool:null,transitions:null}}function QK(d,p,w){var k=p.pendingProps,R=Ii.current,L=!1,K=(p.flags&128)!==0,ce;if((ce=K)||(ce=d!==null&&d.memoizedState===null?!1:(R&2)!==0),ce?(L=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(R|=1),si(Ii,R&1),d===null)return XL(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((p.mode&1)===0?p.lanes=1:d.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(K=k.children,d=k.fallback,L?(k=p.mode,L=p.child,K={mode:"hidden",children:K},(k&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=K):L=VP(K,k,0,null),d=A0(d,k,w,null),L.return=p,d.return=p,L.sibling=d,p.child=L,p.child.memoizedState=ED(w),p.memoizedState=bD,d):SD(p,K));if(R=d.memoizedState,R!==null&&(ce=R.dehydrated,ce!==null))return ESe(d,p,K,k,ce,R,w);if(L){L=k.fallback,K=p.mode,R=d.child,ce=R.sibling;var he={mode:"hidden",children:k.children};return(K&1)===0&&p.child!==R?(k=p.child,k.childLanes=0,k.pendingProps=he,p.deletions=null):(k=Kp(R,he),k.subtreeFlags=R.subtreeFlags&14680064),ce!==null?L=Kp(ce,L):(L=A0(L,K,w,null),L.flags|=2),L.return=p,k.return=p,k.sibling=L,p.child=k,k=L,L=p.child,K=d.child.memoizedState,K=K===null?ED(w):{baseLanes:K.baseLanes|w,cachePool:null,transitions:K.transitions},L.memoizedState=K,L.childLanes=d.childLanes&~w,p.memoizedState=bD,k}return L=d.child,d=L.sibling,k=Kp(L,{mode:"visible",children:k.children}),(p.mode&1)===0&&(k.lanes=w),k.return=p,k.sibling=null,d!==null&&(w=p.deletions,w===null?(p.deletions=[d],p.flags|=16):w.push(d)),p.child=k,p.memoizedState=null,k}function SD(d,p){return p=VP({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function AP(d,p,w,k){return k!==null&&ZL(k),Vv(p,d.child,null,w),d=SD(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function ESe(d,p,w,k,R,L,K){if(w)return p.flags&256?(p.flags&=-257,k=vD(Error(n(422))),AP(d,p,K,k)):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(L=k.fallback,R=p.mode,k=VP({mode:"visible",children:k.children},R,0,null),L=A0(L,R,K,null),L.flags|=2,k.return=p,L.return=p,k.sibling=L,p.child=k,(p.mode&1)!==0&&Vv(p,d.child,null,K),p.child.memoizedState=ED(K),p.memoizedState=bD,L);if((p.mode&1)===0)return AP(d,p,K,null);if(R.data==="$!"){if(k=R.nextSibling&&R.nextSibling.dataset,k)var ce=k.dgst;return k=ce,L=Error(n(419)),k=vD(L,k,void 0),AP(d,p,K,k)}if(ce=(K&d.childLanes)!==0,Ba||ce){if(k=Ys,k!==null){switch(K&-K){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(k.suspendedLanes|K))!==0?0:R,R!==0&&R!==L.retryLane&&(L.retryLane=R,Jd(d,R),Su(k,d,R,-1))}return VD(),k=vD(Error(n(421))),AP(d,p,K,k)}return R.data==="$?"?(p.flags|=128,p.child=d.child,p=DSe.bind(null,d),R._reactRetry=p,null):(d=L.treeContext,Dl=$p(R.nextSibling),Ll=p,vi=!0,xu=null,d!==null&&(_c[xc++]=Xd,_c[xc++]=Zd,_c[xc++]=v0,Xd=d.id,Zd=d.overflow,v0=p),p=SD(p,k.children),p.flags|=4096,p)}function eY(d,p,w){d.lanes|=p;var k=d.alternate;k!==null&&(k.lanes|=p),tD(d.return,p,w)}function TD(d,p,w,k,R){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:R}:(L.isBackwards=p,L.rendering=null,L.renderingStartTime=0,L.last=k,L.tail=w,L.tailMode=R)}function tY(d,p,w){var k=p.pendingProps,R=k.revealOrder,L=k.tail;if(xa(d,p,k.children,w),k=Ii.current,(k&2)!==0)k=k&1|2,p.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&eY(d,w,p);else if(d.tag===19)eY(d,w,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}if(si(Ii,k),(p.mode&1)===0)p.memoizedState=null;else switch(R){case"forwards":for(w=p.child,R=null;w!==null;)d=w.alternate,d!==null&&xP(d)===null&&(R=w),w=w.sibling;w=R,w===null?(R=p.child,p.child=null):(R=w.sibling,w.sibling=null),TD(p,!1,R,w,L);break;case"backwards":for(w=null,R=p.child,p.child=null;R!==null;){if(d=R.alternate,d!==null&&xP(d)===null){p.child=R;break}d=R.sibling,R.sibling=w,w=R,R=d}TD(p,!0,w,null,L);break;case"together":TD(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function IP(d,p){(p.mode&1)===0&&d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2)}function ef(d,p,w){if(d!==null&&(p.dependencies=d.dependencies),E0|=p.lanes,(w&p.childLanes)===0)return null;if(d!==null&&p.child!==d.child)throw Error(n(153));if(p.child!==null){for(d=p.child,w=Kp(d,d.pendingProps),p.child=w,w.return=p;d.sibling!==null;)d=d.sibling,w=w.sibling=Kp(d,d.pendingProps),w.return=p;w.sibling=null}return p.child}function SSe(d,p,w){switch(p.tag){case 3:ZK(p),Fv();break;case 5:mK(p);break;case 1:Ga(p.type)&&uP(p);break;case 4:iD(p,p.stateNode.containerInfo);break;case 10:var k=p.type._context,R=p.memoizedProps.value;si(gP,k._currentValue),k._currentValue=R;break;case 13:if(k=p.memoizedState,k!==null)return k.dehydrated!==null?(si(Ii,Ii.current&1),p.flags|=128,null):(w&p.child.childLanes)!==0?QK(d,p,w):(si(Ii,Ii.current&1),d=ef(d,p,w),d!==null?d.sibling:null);si(Ii,Ii.current&1);break;case 19:if(k=(w&p.childLanes)!==0,(d.flags&128)!==0){if(k)return tY(d,p,w);p.flags|=128}if(R=p.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),si(Ii,Ii.current),k)break;return null;case 22:case 23:return p.lanes=0,KK(d,p,w)}return ef(d,p,w)}var nY,kD,rY,iY;nY=function(d,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},kD=function(){},rY=function(d,p,w,k){var R=d.memoizedProps;if(R!==k){d=p.stateNode,w0(Lh.current);var L=null;switch(w){case"input":R=$t(d,R),k=$t(d,k),L=[];break;case"select":R=Me({},R,{value:void 0}),k=Me({},k,{value:void 0}),L=[];break;case"textarea":R=go(d,R),k=go(d,k),L=[];break;default:typeof R.onClick!="function"&&typeof k.onClick=="function"&&(d.onclick=aP)}ki(w,k);var K;w=null;for(je in R)if(!k.hasOwnProperty(je)&&R.hasOwnProperty(je)&&R[je]!=null)if(je==="style"){var ce=R[je];for(K in ce)ce.hasOwnProperty(K)&&(w||(w={}),w[K]="")}else je!=="dangerouslySetInnerHTML"&&je!=="children"&&je!=="suppressContentEditableWarning"&&je!=="suppressHydrationWarning"&&je!=="autoFocus"&&(i.hasOwnProperty(je)?L||(L=[]):(L=L||[]).push(je,null));for(je in k){var he=k[je];if(ce=R?.[je],k.hasOwnProperty(je)&&he!==ce&&(he!=null||ce!=null))if(je==="style")if(ce){for(K in ce)!ce.hasOwnProperty(K)||he&&he.hasOwnProperty(K)||(w||(w={}),w[K]="");for(K in he)he.hasOwnProperty(K)&&ce[K]!==he[K]&&(w||(w={}),w[K]=he[K])}else w||(L||(L=[]),L.push(je,w)),w=he;else je==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,ce=ce?ce.__html:void 0,he!=null&&ce!==he&&(L=L||[]).push(je,he)):je==="children"?typeof he!="string"&&typeof he!="number"||(L=L||[]).push(je,""+he):je!=="suppressContentEditableWarning"&&je!=="suppressHydrationWarning"&&(i.hasOwnProperty(je)?(he!=null&&je==="onScroll"&&li("scroll",d),L||ce===he||(L=[])):(L=L||[]).push(je,he))}w&&(L=L||[]).push("style",w);var je=L;(p.updateQueue=je)&&(p.flags|=4)}},iY=function(d,p,w,k){w!==k&&(p.flags|=4)};function eE(d,p){if(!vi)switch(d.tailMode){case"hidden":p=d.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Fo(d){var p=d.alternate!==null&&d.alternate.child===d.child,w=0,k=0;if(p)for(var R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags&14680064,k|=R.flags&14680064,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags,k|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=k,d.childLanes=w,p}function TSe(d,p,w){var k=p.pendingProps;switch(KL(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fo(p),null;case 1:return Ga(p.type)&&cP(),Fo(p),null;case 3:return k=p.stateNode,Gv(),ci(Ua),ci($o),aD(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(d===null||d.child===null)&&(pP(p)?p.flags|=4:d===null||d.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,xu!==null&&($D(xu),xu=null))),kD(d,p),Fo(p),null;case 5:sD(p);var R=w0(Yb.current);if(w=p.type,d!==null&&p.stateNode!=null)rY(d,p,w,k,R),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!k){if(p.stateNode===null)throw Error(n(166));return Fo(p),null}if(d=w0(Lh.current),pP(p)){k=p.stateNode,w=p.type;var L=p.memoizedProps;switch(k[Oh]=p,k[Bb]=L,d=(p.mode&1)!==0,w){case"dialog":li("cancel",k),li("close",k);break;case"iframe":case"object":case"embed":li("load",k);break;case"video":case"audio":for(R=0;R<zb.length;R++)li(zb[R],k);break;case"source":li("error",k);break;case"img":case"image":case"link":li("error",k),li("load",k);break;case"details":li("toggle",k);break;case"input":fn(k,L),li("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!L.multiple},li("invalid",k);break;case"textarea":Ar(k,L),li("invalid",k)}ki(w,L),R=null;for(var K in L)if(L.hasOwnProperty(K)){var ce=L[K];K==="children"?typeof ce=="string"?k.textContent!==ce&&(L.suppressHydrationWarning!==!0&&oP(k.textContent,ce,d),R=["children",ce]):typeof ce=="number"&&k.textContent!==""+ce&&(L.suppressHydrationWarning!==!0&&oP(k.textContent,ce,d),R=["children",""+ce]):i.hasOwnProperty(K)&&ce!=null&&K==="onScroll"&&li("scroll",k)}switch(w){case"input":Dt(k),ur(k,L,!0);break;case"textarea":Dt(k),Cs(k);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(k.onclick=aP)}k=R,p.updateQueue=k,k!==null&&(p.flags|=4)}else{K=R.nodeType===9?R:R.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=wt(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=K.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof k.is=="string"?d=K.createElement(w,{is:k.is}):(d=K.createElement(w),w==="select"&&(K=d,k.multiple?K.multiple=!0:k.size&&(K.size=k.size))):d=K.createElementNS(d,w),d[Oh]=p,d[Bb]=k,nY(d,p,!1,!1),p.stateNode=d;e:{switch(K=He(w,k),w){case"dialog":li("cancel",d),li("close",d),R=k;break;case"iframe":case"object":case"embed":li("load",d),R=k;break;case"video":case"audio":for(R=0;R<zb.length;R++)li(zb[R],d);R=k;break;case"source":li("error",d),R=k;break;case"img":case"image":case"link":li("error",d),li("load",d),R=k;break;case"details":li("toggle",d),R=k;break;case"input":fn(d,k),R=$t(d,k),li("invalid",d);break;case"option":R=k;break;case"select":d._wrapperState={wasMultiple:!!k.multiple},R=Me({},k,{value:void 0}),li("invalid",d);break;case"textarea":Ar(d,k),R=go(d,k),li("invalid",d);break;default:R=k}ki(w,R),ce=R;for(L in ce)if(ce.hasOwnProperty(L)){var he=ce[L];L==="style"?Ms(d,he):L==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&Ft(d,he)):L==="children"?typeof he=="string"?(w!=="textarea"||he!=="")&&Ln(d,he):typeof he=="number"&&Ln(d,""+he):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?he!=null&&L==="onScroll"&&li("scroll",d):he!=null&&I(d,L,he,K))}switch(w){case"input":Dt(d),ur(d,k,!1);break;case"textarea":Dt(d),Cs(d);break;case"option":k.value!=null&&d.setAttribute("value",""+Ke(k.value));break;case"select":d.multiple=!!k.multiple,L=k.value,L!=null?Qr(d,!!k.multiple,L,!1):k.defaultValue!=null&&Qr(d,!!k.multiple,k.defaultValue,!0);break;default:typeof R.onClick=="function"&&(d.onclick=aP)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Fo(p),null;case 6:if(d&&p.stateNode!=null)iY(d,p,d.memoizedProps,k);else{if(typeof k!="string"&&p.stateNode===null)throw Error(n(166));if(w=w0(Yb.current),w0(Lh.current),pP(p)){if(k=p.stateNode,w=p.memoizedProps,k[Oh]=p,(L=k.nodeValue!==w)&&(d=Ll,d!==null))switch(d.tag){case 3:oP(k.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&oP(k.nodeValue,w,(d.mode&1)!==0)}L&&(p.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[Oh]=p,p.stateNode=k}return Fo(p),null;case 13:if(ci(Ii),k=p.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(vi&&Dl!==null&&(p.mode&1)!==0&&(p.flags&128)===0)aK(),Fv(),p.flags|=98560,L=!1;else if(L=pP(p),k!==null&&k.dehydrated!==null){if(d===null){if(!L)throw Error(n(318));if(L=p.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[Oh]=p}else Fv(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Fo(p),L=!1}else xu!==null&&($D(xu),xu=null),L=!0;if(!L)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=w,p):(k=k!==null,k!==(d!==null&&d.memoizedState!==null)&&k&&(p.child.flags|=8192,(p.mode&1)!==0&&(d===null||(Ii.current&1)!==0?Os===0&&(Os=3):VD())),p.updateQueue!==null&&(p.flags|=4),Fo(p),null);case 4:return Gv(),kD(d,p),d===null&&Ub(p.stateNode.containerInfo),Fo(p),null;case 10:return eD(p.type._context),Fo(p),null;case 17:return Ga(p.type)&&cP(),Fo(p),null;case 19:if(ci(Ii),L=p.memoizedState,L===null)return Fo(p),null;if(k=(p.flags&128)!==0,K=L.rendering,K===null)if(k)eE(L,!1);else{if(Os!==0||d!==null&&(d.flags&128)!==0)for(d=p.child;d!==null;){if(K=xP(d),K!==null){for(p.flags|=128,eE(L,!1),k=K.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),p.subtreeFlags=0,k=w,w=p.child;w!==null;)L=w,d=k,L.flags&=14680066,K=L.alternate,K===null?(L.childLanes=0,L.lanes=d,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=K.childLanes,L.lanes=K.lanes,L.child=K.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=K.memoizedProps,L.memoizedState=K.memoizedState,L.updateQueue=K.updateQueue,L.type=K.type,d=K.dependencies,L.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return si(Ii,Ii.current&1|2),p.child}d=d.sibling}L.tail!==null&&ut()>qv&&(p.flags|=128,k=!0,eE(L,!1),p.lanes=4194304)}else{if(!k)if(d=xP(K),d!==null){if(p.flags|=128,k=!0,w=d.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),eE(L,!0),L.tail===null&&L.tailMode==="hidden"&&!K.alternate&&!vi)return Fo(p),null}else 2*ut()-L.renderingStartTime>qv&&w!==1073741824&&(p.flags|=128,k=!0,eE(L,!1),p.lanes=4194304);L.isBackwards?(K.sibling=p.child,p.child=K):(w=L.last,w!==null?w.sibling=K:p.child=K,L.last=K)}return L.tail!==null?(p=L.tail,L.rendering=p,L.tail=p.sibling,L.renderingStartTime=ut(),p.sibling=null,w=Ii.current,si(Ii,k?w&1|2:w&1),p):(Fo(p),null);case 22:case 23:return FD(),k=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==k&&(p.flags|=8192),k&&(p.mode&1)!==0?($l&1073741824)!==0&&(Fo(p),p.subtreeFlags&6&&(p.flags|=8192)):Fo(p),null;case 24:return null;case 25:return null}throw Error(n(156,p.tag))}function kSe(d,p){switch(KL(p),p.tag){case 1:return Ga(p.type)&&cP(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return Gv(),ci(Ua),ci($o),aD(),d=p.flags,(d&65536)!==0&&(d&128)===0?(p.flags=d&-65537|128,p):null;case 5:return sD(p),null;case 13:if(ci(Ii),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(n(340));Fv()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return ci(Ii),null;case 4:return Gv(),null;case 10:return eD(p.type._context),null;case 22:case 23:return FD(),null;case 24:return null;default:return null}}var PP=!1,Vo=!1,ASe=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Wv(d,p){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){zi(d,p,k)}else w.current=null}function AD(d,p,w){try{w()}catch(k){zi(d,p,k)}}var sY=!1;function ISe(d,p){if(FL=Wd,d=$q(),CL(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var R=k.anchorOffset,L=k.focusNode;k=k.focusOffset;try{w.nodeType,L.nodeType}catch{w=null;break e}var K=0,ce=-1,he=-1,je=0,ot=0,ht=d,rt=null;t:for(;;){for(var Nt;ht!==w||R!==0&&ht.nodeType!==3||(ce=K+R),ht!==L||k!==0&&ht.nodeType!==3||(he=K+k),ht.nodeType===3&&(K+=ht.nodeValue.length),(Nt=ht.firstChild)!==null;)rt=ht,ht=Nt;for(;;){if(ht===d)break t;if(rt===w&&++je===R&&(ce=K),rt===L&&++ot===k&&(he=K),(Nt=ht.nextSibling)!==null)break;ht=rt,rt=ht.parentNode}ht=Nt}w=ce===-1||he===-1?null:{start:ce,end:he}}else w=null}w=w||{start:0,end:0}}else w=null;for(VL={focusedElem:d,selectionRange:w},Wd=!1,jt=p;jt!==null;)if(p=jt,d=p.child,(p.subtreeFlags&1028)!==0&&d!==null)d.return=p,jt=d;else for(;jt!==null;){p=jt;try{var Ut=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var Yt=Ut.memoizedProps,os=Ut.memoizedState,be=p.stateNode,me=be.getSnapshotBeforeUpdate(p.elementType===p.type?Yt:wu(p.type,Yt),os);be.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Ce=p.stateNode.containerInfo;Ce.nodeType===1?Ce.textContent="":Ce.nodeType===9&&Ce.documentElement&&Ce.removeChild(Ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(mt){zi(p,p.return,mt)}if(d=p.sibling,d!==null){d.return=p.return,jt=d;break}jt=p.return}return Ut=sY,sY=!1,Ut}function tE(d,p,w){var k=p.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var R=k=k.next;do{if((R.tag&d)===d){var L=R.destroy;R.destroy=void 0,L!==void 0&&AD(p,w,L)}R=R.next}while(R!==k)}}function RP(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&d)===d){var k=w.create;w.destroy=k()}w=w.next}while(w!==p)}}function ID(d){var p=d.ref;if(p!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof p=="function"?p(d):p.current=d}}function oY(d){var p=d.alternate;p!==null&&(d.alternate=null,oY(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&(delete p[Oh],delete p[Bb],delete p[BL],delete p[uSe],delete p[hSe])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function aY(d){return d.tag===5||d.tag===3||d.tag===4}function lY(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||aY(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function PD(d,p,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(d,p):w.insertBefore(d,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(d,w)):(p=w,p.appendChild(d)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=aP));else if(k!==4&&(d=d.child,d!==null))for(PD(d,p,w),d=d.sibling;d!==null;)PD(d,p,w),d=d.sibling}function RD(d,p,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,p?w.insertBefore(d,p):w.appendChild(d);else if(k!==4&&(d=d.child,d!==null))for(RD(d,p,w),d=d.sibling;d!==null;)RD(d,p,w),d=d.sibling}var _o=null,bu=!1;function Gp(d,p,w){for(w=w.child;w!==null;)cY(d,p,w),w=w.sibling}function cY(d,p,w){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(Rl,w)}catch{}switch(w.tag){case 5:Vo||Wv(w,p);case 6:var k=_o,R=bu;_o=null,Gp(d,p,w),_o=k,bu=R,_o!==null&&(bu?(d=_o,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):_o.removeChild(w.stateNode));break;case 18:_o!==null&&(bu?(d=_o,w=w.stateNode,d.nodeType===8?GL(d.parentNode,w):d.nodeType===1&&GL(d,w),Np(d)):GL(_o,w.stateNode));break;case 4:k=_o,R=bu,_o=w.stateNode.containerInfo,bu=!0,Gp(d,p,w),_o=k,bu=R;break;case 0:case 11:case 14:case 15:if(!Vo&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){R=k=k.next;do{var L=R,K=L.destroy;L=L.tag,K!==void 0&&((L&2)!==0||(L&4)!==0)&&AD(w,p,K),R=R.next}while(R!==k)}Gp(d,p,w);break;case 1:if(!Vo&&(Wv(w,p),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ce){zi(w,p,ce)}Gp(d,p,w);break;case 21:Gp(d,p,w);break;case 22:w.mode&1?(Vo=(k=Vo)||w.memoizedState!==null,Gp(d,p,w),Vo=k):Gp(d,p,w);break;default:Gp(d,p,w)}}function uY(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new ASe),p.forEach(function(k){var R=$Se.bind(null,d,k);w.has(k)||(w.add(k),k.then(R,R))})}}function Eu(d,p){var w=p.deletions;if(w!==null)for(var k=0;k<w.length;k++){var R=w[k];try{var L=d,K=p,ce=K;e:for(;ce!==null;){switch(ce.tag){case 5:_o=ce.stateNode,bu=!1;break e;case 3:_o=ce.stateNode.containerInfo,bu=!0;break e;case 4:_o=ce.stateNode.containerInfo,bu=!0;break e}ce=ce.return}if(_o===null)throw Error(n(160));cY(L,K,R),_o=null,bu=!1;var he=R.alternate;he!==null&&(he.return=null),R.return=null}catch(je){zi(R,p,je)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)hY(p,d),p=p.sibling}function hY(d,p){var w=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Eu(p,d),$h(d),k&4){try{tE(3,d,d.return),RP(3,d)}catch(Yt){zi(d,d.return,Yt)}try{tE(5,d,d.return)}catch(Yt){zi(d,d.return,Yt)}}break;case 1:Eu(p,d),$h(d),k&512&&w!==null&&Wv(w,w.return);break;case 5:if(Eu(p,d),$h(d),k&512&&w!==null&&Wv(w,w.return),d.flags&32){var R=d.stateNode;try{Ln(R,"")}catch(Yt){zi(d,d.return,Yt)}}if(k&4&&(R=d.stateNode,R!=null)){var L=d.memoizedProps,K=w!==null?w.memoizedProps:L,ce=d.type,he=d.updateQueue;if(d.updateQueue=null,he!==null)try{ce==="input"&&L.type==="radio"&&L.name!=null&&yn(R,L),He(ce,K);var je=He(ce,L);for(K=0;K<he.length;K+=2){var ot=he[K],ht=he[K+1];ot==="style"?Ms(R,ht):ot==="dangerouslySetInnerHTML"?Ft(R,ht):ot==="children"?Ln(R,ht):I(R,ot,ht,je)}switch(ce){case"input":dt(R,L);break;case"textarea":Ti(R,L);break;case"select":var rt=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!L.multiple;var Nt=L.value;Nt!=null?Qr(R,!!L.multiple,Nt,!1):rt!==!!L.multiple&&(L.defaultValue!=null?Qr(R,!!L.multiple,L.defaultValue,!0):Qr(R,!!L.multiple,L.multiple?[]:"",!1))}R[Bb]=L}catch(Yt){zi(d,d.return,Yt)}}break;case 6:if(Eu(p,d),$h(d),k&4){if(d.stateNode===null)throw Error(n(162));R=d.stateNode,L=d.memoizedProps;try{R.nodeValue=L}catch(Yt){zi(d,d.return,Yt)}}break;case 3:if(Eu(p,d),$h(d),k&4&&w!==null&&w.memoizedState.isDehydrated)try{Np(p.containerInfo)}catch(Yt){zi(d,d.return,Yt)}break;case 4:Eu(p,d),$h(d);break;case 13:Eu(p,d),$h(d),R=d.child,R.flags&8192&&(L=R.memoizedState!==null,R.stateNode.isHidden=L,!L||R.alternate!==null&&R.alternate.memoizedState!==null||(ND=ut())),k&4&&uY(d);break;case 22:if(ot=w!==null&&w.memoizedState!==null,d.mode&1?(Vo=(je=Vo)||ot,Eu(p,d),Vo=je):Eu(p,d),$h(d),k&8192){if(je=d.memoizedState!==null,(d.stateNode.isHidden=je)&&!ot&&(d.mode&1)!==0)for(jt=d,ot=d.child;ot!==null;){for(ht=jt=ot;jt!==null;){switch(rt=jt,Nt=rt.child,rt.tag){case 0:case 11:case 14:case 15:tE(4,rt,rt.return);break;case 1:Wv(rt,rt.return);var Ut=rt.stateNode;if(typeof Ut.componentWillUnmount=="function"){k=rt,w=rt.return;try{p=k,Ut.props=p.memoizedProps,Ut.state=p.memoizedState,Ut.componentWillUnmount()}catch(Yt){zi(k,w,Yt)}}break;case 5:Wv(rt,rt.return);break;case 22:if(rt.memoizedState!==null){pY(ht);continue}}Nt!==null?(Nt.return=rt,jt=Nt):pY(ht)}ot=ot.sibling}e:for(ot=null,ht=d;;){if(ht.tag===5){if(ot===null){ot=ht;try{R=ht.stateNode,je?(L=R.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ce=ht.stateNode,he=ht.memoizedProps.style,K=he!=null&&he.hasOwnProperty("display")?he.display:null,ce.style.display=Vi("display",K))}catch(Yt){zi(d,d.return,Yt)}}}else if(ht.tag===6){if(ot===null)try{ht.stateNode.nodeValue=je?"":ht.memoizedProps}catch(Yt){zi(d,d.return,Yt)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===d)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===d)break e;for(;ht.sibling===null;){if(ht.return===null||ht.return===d)break e;ot===ht&&(ot=null),ht=ht.return}ot===ht&&(ot=null),ht.sibling.return=ht.return,ht=ht.sibling}}break;case 19:Eu(p,d),$h(d),k&4&&uY(d);break;case 21:break;default:Eu(p,d),$h(d)}}function $h(d){var p=d.flags;if(p&2){try{e:{for(var w=d.return;w!==null;){if(aY(w)){var k=w;break e}w=w.return}throw Error(n(160))}switch(k.tag){case 5:var R=k.stateNode;k.flags&32&&(Ln(R,""),k.flags&=-33);var L=lY(d);RD(d,L,R);break;case 3:case 4:var K=k.stateNode.containerInfo,ce=lY(d);PD(d,ce,K);break;default:throw Error(n(161))}}catch(he){zi(d,d.return,he)}d.flags&=-3}p&4096&&(d.flags&=-4097)}function PSe(d,p,w){jt=d,dY(d)}function dY(d,p,w){for(var k=(d.mode&1)!==0;jt!==null;){var R=jt,L=R.child;if(R.tag===22&&k){var K=R.memoizedState!==null||PP;if(!K){var ce=R.alternate,he=ce!==null&&ce.memoizedState!==null||Vo;ce=PP;var je=Vo;if(PP=K,(Vo=he)&&!je)for(jt=R;jt!==null;)K=jt,he=K.child,K.tag===22&&K.memoizedState!==null?mY(R):he!==null?(he.return=K,jt=he):mY(R);for(;L!==null;)jt=L,dY(L),L=L.sibling;jt=R,PP=ce,Vo=je}fY(d)}else(R.subtreeFlags&8772)!==0&&L!==null?(L.return=R,jt=L):fY(d)}}function fY(d){for(;jt!==null;){var p=jt;if((p.flags&8772)!==0){var w=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:Vo||RP(5,p);break;case 1:var k=p.stateNode;if(p.flags&4&&!Vo)if(w===null)k.componentDidMount();else{var R=p.elementType===p.type?w.memoizedProps:wu(p.type,w.memoizedProps);k.componentDidUpdate(R,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var L=p.updateQueue;L!==null&&pK(p,L,k);break;case 3:var K=p.updateQueue;if(K!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}pK(p,K,w)}break;case 5:var ce=p.stateNode;if(w===null&&p.flags&4){w=ce;var he=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&w.focus();break;case"img":he.src&&(w.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var je=p.alternate;if(je!==null){var ot=je.memoizedState;if(ot!==null){var ht=ot.dehydrated;ht!==null&&Np(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vo||p.flags&512&&ID(p)}catch(rt){zi(p,p.return,rt)}}if(p===d){jt=null;break}if(w=p.sibling,w!==null){w.return=p.return,jt=w;break}jt=p.return}}function pY(d){for(;jt!==null;){var p=jt;if(p===d){jt=null;break}var w=p.sibling;if(w!==null){w.return=p.return,jt=w;break}jt=p.return}}function mY(d){for(;jt!==null;){var p=jt;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{RP(4,p)}catch(he){zi(p,w,he)}break;case 1:var k=p.stateNode;if(typeof k.componentDidMount=="function"){var R=p.return;try{k.componentDidMount()}catch(he){zi(p,R,he)}}var L=p.return;try{ID(p)}catch(he){zi(p,L,he)}break;case 5:var K=p.return;try{ID(p)}catch(he){zi(p,K,he)}}}catch(he){zi(p,p.return,he)}if(p===d){jt=null;break}var ce=p.sibling;if(ce!==null){ce.return=p.return,jt=ce;break}jt=p.return}}var RSe=Math.ceil,CP=P.ReactCurrentDispatcher,CD=P.ReactCurrentOwner,Ec=P.ReactCurrentBatchConfig,dr=0,Ys=null,ps=null,xo=0,$l=0,Hv=jp(0),Os=0,nE=null,E0=0,MP=0,MD=0,rE=null,Wa=null,ND=0,qv=1/0,tf=null,NP=!1,OD=null,Bp=null,OP=!1,Wp=null,LP=0,iE=0,LD=null,DP=-1,$P=0;function wa(){return(dr&6)!==0?ut():DP!==-1?DP:DP=ut()}function Hp(d){return(d.mode&1)===0?1:(dr&2)!==0&&xo!==0?xo&-xo:fSe.transition!==null?($P===0&&($P=Tb()),$P):(d=ir,d!==0||(d=window.event,d=d===void 0?16:bv(d.type)),d)}function Su(d,p,w,k){if(50<iE)throw iE=0,LD=null,Error(n(185));h0(d,w,k),((dr&2)===0||d!==Ys)&&(d===Ys&&((dr&2)===0&&(MP|=w),Os===4&&qp(d,xo)),Ha(d,k),w===1&&dr===0&&(p.mode&1)===0&&(qv=ut()+500,hP&&Vp()))}function Ha(d,p){var w=d.callbackNode;u0(d,p);var k=Ud(d,d===Ys?xo:0);if(k===0)w!==null&&gt(w),d.callbackNode=null,d.callbackPriority=0;else if(p=k&-k,d.callbackPriority!==p){if(w!=null&&gt(w),p===1)d.tag===0?dSe(yY.bind(null,d)):nK(yY.bind(null,d)),lSe(function(){(dr&6)===0&&Vp()}),w=null;else{switch(Sh(k)){case 1:w=Ir;break;case 4:w=Dr;break;case 16:w=yi;break;case 536870912:w=yc;break;default:w=yi}w=TY(w,gY.bind(null,d))}d.callbackPriority=p,d.callbackNode=w}}function gY(d,p){if(DP=-1,$P=0,(dr&6)!==0)throw Error(n(327));var w=d.callbackNode;if(Kv()&&d.callbackNode!==w)return null;var k=Ud(d,d===Ys?xo:0);if(k===0)return null;if((k&30)!==0||(k&d.expiredLanes)!==0||p)p=jP(d,k);else{p=k;var R=dr;dr|=2;var L=_Y();(Ys!==d||xo!==p)&&(tf=null,qv=ut()+500,T0(d,p));do try{NSe();break}catch(ce){vY(d,ce)}while(!0);QL(),CP.current=L,dr=R,ps!==null?p=0:(Ys=null,xo=0,p=Os)}if(p!==0){if(p===2&&(R=Sb(d),R!==0&&(k=R,p=DD(d,R))),p===1)throw w=nE,T0(d,0),qp(d,k),Ha(d,ut()),w;if(p===6)qp(d,k);else{if(R=d.current.alternate,(k&30)===0&&!CSe(R)&&(p=jP(d,k),p===2&&(L=Sb(d),L!==0&&(k=L,p=DD(d,L))),p===1))throw w=nE,T0(d,0),qp(d,k),Ha(d,ut()),w;switch(d.finishedWork=R,d.finishedLanes=k,p){case 0:case 1:throw Error(n(345));case 2:k0(d,Wa,tf);break;case 3:if(qp(d,k),(k&130023424)===k&&(p=ND+500-ut(),10<p)){if(Ud(d,0)!==0)break;if(R=d.suspendedLanes,(R&k)!==k){wa(),d.pingedLanes|=d.suspendedLanes&R;break}d.timeoutHandle=UL(k0.bind(null,d,Wa,tf),p);break}k0(d,Wa,tf);break;case 4:if(qp(d,k),(k&4194240)===k)break;for(p=d.eventTimes,R=-1;0<k;){var K=31-Ai(k);L=1<<K,K=p[K],K>R&&(R=K),k&=~L}if(k=R,k=ut()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*RSe(k/1960))-k,10<k){d.timeoutHandle=UL(k0.bind(null,d,Wa,tf),k);break}k0(d,Wa,tf);break;case 5:k0(d,Wa,tf);break;default:throw Error(n(329))}}}return Ha(d,ut()),d.callbackNode===w?gY.bind(null,d):null}function DD(d,p){var w=rE;return d.current.memoizedState.isDehydrated&&(T0(d,p).flags|=256),d=jP(d,p),d!==2&&(p=Wa,Wa=w,p!==null&&$D(p)),d}function $D(d){Wa===null?Wa=d:Wa.push.apply(Wa,d)}function CSe(d){for(var p=d;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var R=w[k],L=R.getSnapshot;R=R.value;try{if(!_u(L(),R))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function qp(d,p){for(p&=~MD,p&=~MP,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var w=31-Ai(p),k=1<<w;d[w]=-1,p&=~k}}function yY(d){if((dr&6)!==0)throw Error(n(327));Kv();var p=Ud(d,0);if((p&1)===0)return Ha(d,ut()),null;var w=jP(d,p);if(d.tag!==0&&w===2){var k=Sb(d);k!==0&&(p=k,w=DD(d,k))}if(w===1)throw w=nE,T0(d,0),qp(d,p),Ha(d,ut()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,k0(d,Wa,tf),Ha(d,ut()),null}function jD(d,p){var w=dr;dr|=1;try{return d(p)}finally{dr=w,dr===0&&(qv=ut()+500,hP&&Vp())}}function S0(d){Wp!==null&&Wp.tag===0&&(dr&6)===0&&Kv();var p=dr;dr|=1;var w=Ec.transition,k=ir;try{if(Ec.transition=null,ir=1,d)return d()}finally{ir=k,Ec.transition=w,dr=p,(dr&6)===0&&Vp()}}function FD(){$l=Hv.current,ci(Hv)}function T0(d,p){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,aSe(w)),ps!==null)for(w=ps.return;w!==null;){var k=w;switch(KL(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&cP();break;case 3:Gv(),ci(Ua),ci($o),aD();break;case 5:sD(k);break;case 4:Gv();break;case 13:ci(Ii);break;case 19:ci(Ii);break;case 10:eD(k.type._context);break;case 22:case 23:FD()}w=w.return}if(Ys=d,ps=d=Kp(d.current,null),xo=$l=p,Os=0,nE=null,MD=MP=E0=0,Wa=rE=null,x0!==null){for(p=0;p<x0.length;p++)if(w=x0[p],k=w.interleaved,k!==null){w.interleaved=null;var R=k.next,L=w.pending;if(L!==null){var K=L.next;L.next=R,k.next=K}w.pending=k}x0=null}return d}function vY(d,p){do{var w=ps;try{if(QL(),wP.current=TP,bP){for(var k=Pi.memoizedState;k!==null;){var R=k.queue;R!==null&&(R.pending=null),k=k.next}bP=!1}if(b0=0,Ks=Ns=Pi=null,Xb=!1,Zb=0,CD.current=null,w===null||w.return===null){Os=1,nE=p,ps=null;break}e:{var L=d,K=w.return,ce=w,he=p;if(p=xo,ce.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var je=he,ot=ce,ht=ot.tag;if((ot.mode&1)===0&&(ht===0||ht===11||ht===15)){var rt=ot.alternate;rt?(ot.updateQueue=rt.updateQueue,ot.memoizedState=rt.memoizedState,ot.lanes=rt.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var Nt=GK(K);if(Nt!==null){Nt.flags&=-257,BK(Nt,K,ce,L,p),Nt.mode&1&&UK(L,je,p),p=Nt,he=je;var Ut=p.updateQueue;if(Ut===null){var Yt=new Set;Yt.add(he),p.updateQueue=Yt}else Ut.add(he);break e}else{if((p&1)===0){UK(L,je,p),VD();break e}he=Error(n(426))}}else if(vi&&ce.mode&1){var os=GK(K);if(os!==null){(os.flags&65536)===0&&(os.flags|=256),BK(os,K,ce,L,p),ZL(Bv(he,ce));break e}}L=he=Bv(he,ce),Os!==4&&(Os=2),rE===null?rE=[L]:rE.push(L),L=K;do{switch(L.tag){case 3:L.flags|=65536,p&=-p,L.lanes|=p;var be=VK(L,he,p);fK(L,be);break e;case 1:ce=he;var me=L.type,Ce=L.stateNode;if((L.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(Bp===null||!Bp.has(Ce)))){L.flags|=65536,p&=-p,L.lanes|=p;var mt=zK(L,ce,p);fK(L,mt);break e}}L=L.return}while(L!==null)}wY(w)}catch(Zt){p=Zt,ps===w&&w!==null&&(ps=w=w.return);continue}break}while(!0)}function _Y(){var d=CP.current;return CP.current=TP,d===null?TP:d}function VD(){(Os===0||Os===3||Os===2)&&(Os=4),Ys===null||(E0&268435455)===0&&(MP&268435455)===0||qp(Ys,xo)}function jP(d,p){var w=dr;dr|=2;var k=_Y();(Ys!==d||xo!==p)&&(tf=null,T0(d,p));do try{MSe();break}catch(R){vY(d,R)}while(!0);if(QL(),dr=w,CP.current=k,ps!==null)throw Error(n(261));return Ys=null,xo=0,Os}function MSe(){for(;ps!==null;)xY(ps)}function NSe(){for(;ps!==null&&!Rt();)xY(ps)}function xY(d){var p=SY(d.alternate,d,$l);d.memoizedProps=d.pendingProps,p===null?wY(d):ps=p,CD.current=null}function wY(d){var p=d;do{var w=p.alternate;if(d=p.return,(p.flags&32768)===0){if(w=TSe(w,p,$l),w!==null){ps=w;return}}else{if(w=kSe(w,p),w!==null){w.flags&=32767,ps=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Os=6,ps=null;return}}if(p=p.sibling,p!==null){ps=p;return}ps=p=d}while(p!==null);Os===0&&(Os=5)}function k0(d,p,w){var k=ir,R=Ec.transition;try{Ec.transition=null,ir=1,OSe(d,p,w,k)}finally{Ec.transition=R,ir=k}return null}function OSe(d,p,w,k){do Kv();while(Wp!==null);if((dr&6)!==0)throw Error(n(327));w=d.finishedWork;var R=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var L=w.lanes|w.childLanes;if(kL(d,L),d===Ys&&(ps=Ys=null,xo=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||OP||(OP=!0,TY(yi,function(){return Kv(),null})),L=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||L){L=Ec.transition,Ec.transition=null;var K=ir;ir=1;var ce=dr;dr|=4,CD.current=null,ISe(d,w),hY(w,d),eSe(VL),Wd=!!FL,VL=FL=null,d.current=w,PSe(w),ct(),dr=ce,ir=K,Ec.transition=L}else d.current=w;if(OP&&(OP=!1,Wp=d,LP=R),L=d.pendingLanes,L===0&&(Bp=null),Pp(w.stateNode),Ha(d,ut()),p!==null)for(k=d.onRecoverableError,w=0;w<p.length;w++)R=p[w],k(R.value,{componentStack:R.stack,digest:R.digest});if(NP)throw NP=!1,d=OD,OD=null,d;return(LP&1)!==0&&d.tag!==0&&Kv(),L=d.pendingLanes,(L&1)!==0?d===LD?iE++:(iE=0,LD=d):iE=0,Vp(),null}function Kv(){if(Wp!==null){var d=Sh(LP),p=Ec.transition,w=ir;try{if(Ec.transition=null,ir=16>d?16:d,Wp===null)var k=!1;else{if(d=Wp,Wp=null,LP=0,(dr&6)!==0)throw Error(n(331));var R=dr;for(dr|=4,jt=d.current;jt!==null;){var L=jt,K=L.child;if((jt.flags&16)!==0){var ce=L.deletions;if(ce!==null){for(var he=0;he<ce.length;he++){var je=ce[he];for(jt=je;jt!==null;){var ot=jt;switch(ot.tag){case 0:case 11:case 15:tE(8,ot,L)}var ht=ot.child;if(ht!==null)ht.return=ot,jt=ht;else for(;jt!==null;){ot=jt;var rt=ot.sibling,Nt=ot.return;if(oY(ot),ot===je){jt=null;break}if(rt!==null){rt.return=Nt,jt=rt;break}jt=Nt}}}var Ut=L.alternate;if(Ut!==null){var Yt=Ut.child;if(Yt!==null){Ut.child=null;do{var os=Yt.sibling;Yt.sibling=null,Yt=os}while(Yt!==null)}}jt=L}}if((L.subtreeFlags&2064)!==0&&K!==null)K.return=L,jt=K;else e:for(;jt!==null;){if(L=jt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:tE(9,L,L.return)}var be=L.sibling;if(be!==null){be.return=L.return,jt=be;break e}jt=L.return}}var me=d.current;for(jt=me;jt!==null;){K=jt;var Ce=K.child;if((K.subtreeFlags&2064)!==0&&Ce!==null)Ce.return=K,jt=Ce;else e:for(K=me;jt!==null;){if(ce=jt,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:RP(9,ce)}}catch(Zt){zi(ce,ce.return,Zt)}if(ce===K){jt=null;break e}var mt=ce.sibling;if(mt!==null){mt.return=ce.return,jt=mt;break e}jt=ce.return}}if(dr=R,Vp(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(Rl,d)}catch{}k=!0}return k}finally{ir=w,Ec.transition=p}}return!1}function bY(d,p,w){p=Bv(w,p),p=VK(d,p,1),d=Up(d,p,1),p=wa(),d!==null&&(h0(d,1,p),Ha(d,p))}function zi(d,p,w){if(d.tag===3)bY(d,d,w);else for(;p!==null;){if(p.tag===3){bY(p,d,w);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Bp===null||!Bp.has(k))){d=Bv(w,d),d=zK(p,d,1),p=Up(p,d,1),d=wa(),p!==null&&(h0(p,1,d),Ha(p,d));break}}p=p.return}}function LSe(d,p,w){var k=d.pingCache;k!==null&&k.delete(p),p=wa(),d.pingedLanes|=d.suspendedLanes&w,Ys===d&&(xo&w)===w&&(Os===4||Os===3&&(xo&130023424)===xo&&500>ut()-ND?T0(d,0):MD|=w),Ha(d,p)}function EY(d,p){p===0&&((d.mode&1)===0?p=1:(p=Rp,Rp<<=1,(Rp&130023424)===0&&(Rp=4194304)));var w=wa();d=Jd(d,p),d!==null&&(h0(d,p,w),Ha(d,w))}function DSe(d){var p=d.memoizedState,w=0;p!==null&&(w=p.retryLane),EY(d,w)}function $Se(d,p){var w=0;switch(d.tag){case 13:var k=d.stateNode,R=d.memoizedState;R!==null&&(w=R.retryLane);break;case 19:k=d.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(p),EY(d,w)}var SY;SY=function(d,p,w){if(d!==null)if(d.memoizedProps!==p.pendingProps||Ua.current)Ba=!0;else{if((d.lanes&w)===0&&(p.flags&128)===0)return Ba=!1,SSe(d,p,w);Ba=(d.flags&131072)!==0}else Ba=!1,vi&&(p.flags&1048576)!==0&&rK(p,fP,p.index);switch(p.lanes=0,p.tag){case 2:var k=p.type;IP(d,p),d=p.pendingProps;var R=Dv(p,$o.current);Uv(p,w),R=uD(null,p,k,d,R,w);var L=hD();return p.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ga(k)?(L=!0,uP(p)):L=!1,p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,rD(p),R.updater=kP,p.stateNode=R,R._reactInternals=p,yD(p,k,d,w),p=wD(null,p,k,!0,L,w)):(p.tag=0,vi&&L&&qL(p),xa(null,p,R,w),p=p.child),p;case 16:k=p.elementType;e:{switch(IP(d,p),d=p.pendingProps,R=k._init,k=R(k._payload),p.type=k,R=p.tag=FSe(k),d=wu(k,d),R){case 0:p=xD(null,p,k,d,w);break e;case 1:p=XK(null,p,k,d,w);break e;case 11:p=WK(null,p,k,d,w);break e;case 14:p=HK(null,p,k,wu(k.type,d),w);break e}throw Error(n(306,k,""))}return p;case 0:return k=p.type,R=p.pendingProps,R=p.elementType===k?R:wu(k,R),xD(d,p,k,R,w);case 1:return k=p.type,R=p.pendingProps,R=p.elementType===k?R:wu(k,R),XK(d,p,k,R,w);case 3:e:{if(ZK(p),d===null)throw Error(n(387));k=p.pendingProps,L=p.memoizedState,R=L.element,dK(d,p),_P(p,k,null,w);var K=p.memoizedState;if(k=K.element,L.isDehydrated)if(L={element:k,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){R=Bv(Error(n(423)),p),p=JK(d,p,k,w,R);break e}else if(k!==R){R=Bv(Error(n(424)),p),p=JK(d,p,k,w,R);break e}else for(Dl=$p(p.stateNode.containerInfo.firstChild),Ll=p,vi=!0,xu=null,w=uK(p,null,k,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Fv(),k===R){p=ef(d,p,w);break e}xa(d,p,k,w)}p=p.child}return p;case 5:return mK(p),d===null&&XL(p),k=p.type,R=p.pendingProps,L=d!==null?d.memoizedProps:null,K=R.children,zL(k,R)?K=null:L!==null&&zL(k,L)&&(p.flags|=32),YK(d,p),xa(d,p,K,w),p.child;case 6:return d===null&&XL(p),null;case 13:return QK(d,p,w);case 4:return iD(p,p.stateNode.containerInfo),k=p.pendingProps,d===null?p.child=Vv(p,null,k,w):xa(d,p,k,w),p.child;case 11:return k=p.type,R=p.pendingProps,R=p.elementType===k?R:wu(k,R),WK(d,p,k,R,w);case 7:return xa(d,p,p.pendingProps,w),p.child;case 8:return xa(d,p,p.pendingProps.children,w),p.child;case 12:return xa(d,p,p.pendingProps.children,w),p.child;case 10:e:{if(k=p.type._context,R=p.pendingProps,L=p.memoizedProps,K=R.value,si(gP,k._currentValue),k._currentValue=K,L!==null)if(_u(L.value,K)){if(L.children===R.children&&!Ua.current){p=ef(d,p,w);break e}}else for(L=p.child,L!==null&&(L.return=p);L!==null;){var ce=L.dependencies;if(ce!==null){K=L.child;for(var he=ce.firstContext;he!==null;){if(he.context===k){if(L.tag===1){he=Qd(-1,w&-w),he.tag=2;var je=L.updateQueue;if(je!==null){je=je.shared;var ot=je.pending;ot===null?he.next=he:(he.next=ot.next,ot.next=he),je.pending=he}}L.lanes|=w,he=L.alternate,he!==null&&(he.lanes|=w),tD(L.return,w,p),ce.lanes|=w;break}he=he.next}}else if(L.tag===10)K=L.type===p.type?null:L.child;else if(L.tag===18){if(K=L.return,K===null)throw Error(n(341));K.lanes|=w,ce=K.alternate,ce!==null&&(ce.lanes|=w),tD(K,w,p),K=L.sibling}else K=L.child;if(K!==null)K.return=L;else for(K=L;K!==null;){if(K===p){K=null;break}if(L=K.sibling,L!==null){L.return=K.return,K=L;break}K=K.return}L=K}xa(d,p,R.children,w),p=p.child}return p;case 9:return R=p.type,k=p.pendingProps.children,Uv(p,w),R=wc(R),k=k(R),p.flags|=1,xa(d,p,k,w),p.child;case 14:return k=p.type,R=wu(k,p.pendingProps),R=wu(k.type,R),HK(d,p,k,R,w);case 15:return qK(d,p,p.type,p.pendingProps,w);case 17:return k=p.type,R=p.pendingProps,R=p.elementType===k?R:wu(k,R),IP(d,p),p.tag=1,Ga(k)?(d=!0,uP(p)):d=!1,Uv(p,w),jK(p,k,R),yD(p,k,R,w),wD(null,p,k,!0,d,w);case 19:return tY(d,p,w);case 22:return KK(d,p,w)}throw Error(n(156,p.tag))};function TY(d,p){return at(d,p)}function jSe(d,p,w,k){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sc(d,p,w,k){return new jSe(d,p,w,k)}function zD(d){return d=d.prototype,!(!d||!d.isReactComponent)}function FSe(d){if(typeof d=="function")return zD(d)?1:0;if(d!=null){if(d=d.$$typeof,d===G)return 11;if(d===Re)return 14}return 2}function Kp(d,p){var w=d.alternate;return w===null?(w=Sc(d.tag,p,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=p,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,p=d.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function FP(d,p,w,k,R,L){var K=2;if(k=d,typeof d=="function")zD(d)&&(K=1);else if(typeof d=="string")K=5;else e:switch(d){case C:return A0(w.children,R,L,p);case N:K=8,R|=8;break;case O:return d=Sc(12,w,p,R|2),d.elementType=O,d.lanes=L,d;case U:return d=Sc(13,w,p,R),d.elementType=U,d.lanes=L,d;case fe:return d=Sc(19,w,p,R),d.elementType=fe,d.lanes=L,d;case $e:return VP(w,R,L,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case j:K=10;break e;case V:K=9;break e;case G:K=11;break e;case Re:K=14;break e;case Be:K=16,k=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return p=Sc(K,w,p,R),p.elementType=d,p.type=k,p.lanes=L,p}function A0(d,p,w,k){return d=Sc(7,d,k,p),d.lanes=w,d}function VP(d,p,w,k){return d=Sc(22,d,k,p),d.elementType=$e,d.lanes=w,d.stateNode={isHidden:!1},d}function UD(d,p,w){return d=Sc(6,d,null,p),d.lanes=w,d}function GD(d,p,w){return p=Sc(4,d.children!==null?d.children:[],d.key,p),p.lanes=w,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function VSe(d,p,w,k,R){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kb(0),this.expirationTimes=kb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kb(0),this.identifierPrefix=k,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function BD(d,p,w,k,R,L,K,ce,he){return d=new VSe(d,p,w,ce,he),p===1?(p=1,L===!0&&(p|=8)):p=0,L=Sc(3,null,null,p),d.current=L,L.stateNode=d,L.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},rD(L),d}function zSe(d,p,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:k==null?null:""+k,children:d,containerInfo:p,implementation:w}}function kY(d){if(!d)return Fp;d=d._reactInternals;e:{if(oe(d)!==d||d.tag!==1)throw Error(n(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ga(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(Ga(w))return eK(d,w,p)}return p}function AY(d,p,w,k,R,L,K,ce,he){return d=BD(w,k,!0,d,R,L,K,ce,he),d.context=kY(null),w=d.current,k=wa(),R=Hp(w),L=Qd(k,R),L.callback=p??null,Up(w,L,R),d.current.lanes=R,h0(d,R,k),Ha(d,k),d}function zP(d,p,w,k){var R=p.current,L=wa(),K=Hp(R);return w=kY(w),p.context===null?p.context=w:p.pendingContext=w,p=Qd(L,K),p.payload={element:d},k=k===void 0?null:k,k!==null&&(p.callback=k),d=Up(R,p,K),d!==null&&(Su(d,R,K,L),vP(d,R,K)),K}function UP(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function IY(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<p?w:p}}function WD(d,p){IY(d,p),(d=d.alternate)&&IY(d,p)}function USe(){return null}var PY=typeof reportError=="function"?reportError:function(d){console.error(d)};function HD(d){this._internalRoot=d}GP.prototype.render=HD.prototype.render=function(d){var p=this._internalRoot;if(p===null)throw Error(n(409));zP(d,p,null,null)},GP.prototype.unmount=HD.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var p=d.containerInfo;S0(function(){zP(null,d,null,null)}),p[Kd]=null}};function GP(d){this._internalRoot=d}GP.prototype.unstable_scheduleHydration=function(d){if(d){var p=Rb();d={blockedOn:null,target:d,priority:p};for(var w=0;w<Cl.length&&p!==0&&p<Cl[w].priority;w++);Cl.splice(w,0,d),w===0&&xv(d)}};function qD(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function BP(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function RY(){}function GSe(d,p,w,k,R){if(R){if(typeof k=="function"){var L=k;k=function(){var je=UP(K);L.call(je)}}var K=AY(p,k,d,0,null,!1,!1,"",RY);return d._reactRootContainer=K,d[Kd]=K.current,Ub(d.nodeType===8?d.parentNode:d),S0(),K}for(;R=d.lastChild;)d.removeChild(R);if(typeof k=="function"){var ce=k;k=function(){var je=UP(he);ce.call(je)}}var he=BD(d,0,!1,null,null,!1,!1,"",RY);return d._reactRootContainer=he,d[Kd]=he.current,Ub(d.nodeType===8?d.parentNode:d),S0(function(){zP(p,he,w,k)}),he}function WP(d,p,w,k,R){var L=w._reactRootContainer;if(L){var K=L;if(typeof R=="function"){var ce=R;R=function(){var he=UP(K);ce.call(he)}}zP(p,K,d,R)}else K=GSe(w,p,d,R,k);return UP(K)}Ib=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var w=_r(p.pendingLanes);w!==0&&(Ab(p,w|1),Ha(p,ut()),(dr&6)===0&&(qv=ut()+500,Vp()))}break;case 13:S0(function(){var k=Jd(d,1);if(k!==null){var R=wa();Su(k,d,1,R)}}),WD(d,1)}},vv=function(d){if(d.tag===13){var p=Jd(d,134217728);if(p!==null){var w=wa();Su(p,d,134217728,w)}WD(d,134217728)}},Pb=function(d){if(d.tag===13){var p=Hp(d),w=Jd(d,p);if(w!==null){var k=wa();Su(w,d,p,k)}WD(d,p)}},Rb=function(){return ir},Cb=function(d,p){var w=ir;try{return ir=d,p()}finally{ir=w}},rn=function(d,p,w){switch(p){case"input":if(dt(d,w),p=w.name,w.type==="radio"&&p!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var k=w[p];if(k!==d&&k.form===d.form){var R=lP(k);if(!R)throw Error(n(90));Ye(k),dt(k,R)}}}break;case"textarea":Ti(d,w);break;case"select":p=w.value,p!=null&&Qr(d,!!w.multiple,p,!1)}},ee=jD,ge=S0;var BSe={usingClientEntryPoint:!1,Events:[Wb,Ov,lP,ae,Ve,jD]},sE={findFiberByHostInstance:g0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WSe={bundleType:sE.bundleType,version:sE.version,rendererPackageName:sE.rendererPackageName,rendererConfig:sE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Ne(d),d===null?null:d.stateNode},findFiberByHostInstance:sE.findFiberByHostInstance||USe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HP.isDisabled&&HP.supportsFiber)try{Rl=HP.inject(WSe),is=HP}catch{}}return qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BSe,qa.createPortal=function(d,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qD(p))throw Error(n(200));return zSe(d,p,null,w)},qa.createRoot=function(d,p){if(!qD(d))throw Error(n(299));var w=!1,k="",R=PY;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(R=p.onRecoverableError)),p=BD(d,1,!1,null,null,w,!1,k,R),d[Kd]=p.current,Ub(d.nodeType===8?d.parentNode:d),new HD(p)},qa.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Ne(p),d=d===null?null:d.stateNode,d},qa.flushSync=function(d){return S0(d)},qa.hydrate=function(d,p,w){if(!BP(p))throw Error(n(200));return WP(null,d,p,!0,w)},qa.hydrateRoot=function(d,p,w){if(!qD(d))throw Error(n(405));var k=w!=null&&w.hydratedSources||null,R=!1,L="",K=PY;if(w!=null&&(w.unstable_strictMode===!0&&(R=!0),w.identifierPrefix!==void 0&&(L=w.identifierPrefix),w.onRecoverableError!==void 0&&(K=w.onRecoverableError)),p=AY(p,null,d,1,w??null,R,!1,L,K),d[Kd]=p.current,Ub(d),k)for(d=0;d<k.length;d++)w=k[d],R=w._getVersion,R=R(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,R]:p.mutableSourceEagerHydrationData.push(w,R);return new GP(p)},qa.render=function(d,p,w){if(!BP(p))throw Error(n(200));return WP(null,d,p,!1,w)},qa.unmountComponentAtNode=function(d){if(!BP(d))throw Error(n(40));return d._reactRootContainer?(S0(function(){WP(null,null,d,!1,function(){d._reactRootContainer=null,d[Kd]=null})}),!0):!1},qa.unstable_batchedUpdates=jD,qa.unstable_renderSubtreeIntoContainer=function(d,p,w,k){if(!BP(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return WP(d,p,w,!1,k)},qa.version="18.3.1-next-f1338f8080-20240426",qa}var VY;function tTe(){if(VY)return ZD.exports;VY=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ZD.exports=eTe(),ZD.exports}var zY;function nTe(){if(zY)return qP;zY=1;var t=tTe();return qP.createRoot=t.createRoot,qP.hydrateRoot=t.hydrateRoot,qP}var rTe=nTe();const iTe=kz(rTe);var X=EA();const sTe=kz(X),ul={ADD:"add",REMOVE:"remove"},jw={PROPERTYCHANGE:"propertychange"},An={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class SA{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function oTe(t,e,n){let r,i;n=n||qf;let s=0,o=t.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+n(t[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function qf(t,e){return t>e?1:t<e?-1:0}function aTe(t,e){return t<e?1:t>e?-1:0}function n5(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const s=t[i];if(s===e)return i;if(s<e)return n(e,t[i-1],s)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function lTe(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function Rr(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function xp(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function cTe(t,e,n){const r=e||qf;return t.every(function(i,s){if(s===0)return!0;const o=r(t[s-1],i);return!(o>0||o===0)})}function Fw(){return!0}function D2(){return!1}function JT(){}function rae(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!xp(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function iae(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function $2(t){for(const e in t)delete t[e]}function f1(t){let e;for(e in t)return!1;return!e}class gh{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let TA=class extends SA{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=n?new gh(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let c=0,u=i.length;c<u;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(s):l=i[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,JT);delete o[r]}return l}disposeInternal(){this.listeners_&&$2(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=JT,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Hn(t,e,n,r,i){if(i){const o=n;n=function(a){return t.removeEventListener(e,n),o.call(r??this,a)}}else r&&r!==t&&(n=n.bind(r));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function d3(t,e,n,r){return Hn(t,e,n,r,!0)}function ti(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),$2(t))}class kA extends TA{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(An.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Hn(this,e[s],n);return i}return Hn(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=d3(this,e[s],n)}else r=d3(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)s8(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}kA.prototype.on;kA.prototype.once;kA.prototype.un;function s8(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ti(t[e]);else ti(t)}function xn(){throw new Error("Unimplemented abstract method.")}let uTe=0;function _n(t){return t.ol_uid||(t.ol_uid=String(++uTe))}class UY extends gh{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class $d extends kA{constructor(e){super(),this.on,this.once,this.un,_n(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new UY(r,e,n)),r=jw.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new UY(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const s=i[e];i[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],f1(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const GY={LENGTH:"length"};class KP extends gh{constructor(e,n,r){super(e),this.element=n,this.index=r}}class Kc extends $d{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(GY.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new KP(ul.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new KP(ul.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new KP(ul.REMOVE,i,e)),this.dispatchEvent(new KP(ul.ADD,n,e))}updateLength_(){this.set(GY.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function cr(t,e){if(!t)throw new Error(e)}let Gr=class sae extends $d{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new sae(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ti(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Hn(e,An.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?hTe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function hTe(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(cr(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const to={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function o8(t){const e=Fa();for(let n=0,r=t.length;n<r;++n)GS(e,t[n]);return e}function ld(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function oae(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function X1(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function p1(t,e){return Az(t,e[0],e[1])}function Wm(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Az(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function a8(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1];let l=to.UNKNOWN;return o<n?l=l|to.LEFT:o>i&&(l=l|to.RIGHT),a<r?l=l|to.BELOW:a>s&&(l=l|to.ABOVE),l===to.UNKNOWN&&(l=to.INTERSECTING),l}function Fa(){return[1/0,1/0,-1/0,-1/0]}function ap(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function AA(t){return ap(1/0,1/0,-1/0,-1/0,t)}function aae(t,e){const n=t[0],r=t[1];return ap(n,r,n,r,e)}function Iz(t,e,n,r,i){const s=AA(i);return lae(s,t,e,n,r)}function m1(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Pz(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function GS(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function lae(t,e,n,r,i){for(;n<r;n+=i)dTe(t,e[n],e[n+1]);return t}function dTe(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Rz(t,e){let n;return n=e(r5(t)),n||(n=e(i5(t)),n)||(n=e(s5(t)),n)||(n=e(Z1(t)),n)?n:!1}function l8(t){let e=0;return j2(t)||(e=qn(t)*Ts(t)),e}function r5(t){return[t[0],t[1]]}function i5(t){return[t[2],t[1]]}function ch(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function fTe(t,e){let n;if(e==="bottom-left")n=r5(t);else if(e==="bottom-right")n=i5(t);else if(e==="top-left")n=Z1(t);else if(e==="top-right")n=s5(t);else throw new Error("Invalid corner");return n}function f3(t,e,n,r,i){const[s,o,a,l,c,u,h,f]=cae(t,e,n,r);return ap(Math.min(s,a,c,h),Math.min(o,l,u,f),Math.max(s,a,c,h),Math.max(o,l,u,f),i)}function cae(t,e,n,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(n),a=Math.sin(n),l=i*o,c=i*a,u=s*o,h=s*a,f=t[0],g=t[1];return[f-l+h,g-c-u,f-l-h,g-c+u,f+l-h,g+c+u,f+l+h,g+c-u,f-l+h,g-c-u]}function Ts(t){return t[3]-t[1]}function Kf(t,e,n){const r=n||Fa();return ia(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):AA(r),r}function Z1(t){return[t[0],t[3]]}function s5(t){return[t[2],t[3]]}function qn(t){return t[2]-t[0]}function ia(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function j2(t){return t[2]<t[0]||t[3]<t[1]}function pTe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function mTe(t,e,n){let r=!1;const i=a8(t,e),s=a8(t,n);if(i===to.INTERSECTING||s===to.INTERSECTING)r=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],f=n[0],g=n[1],v=(g-h)/(f-u);let x,b;s&to.ABOVE&&!(i&to.ABOVE)&&(x=f-(g-c)/v,r=x>=o&&x<=l),!r&&s&to.RIGHT&&!(i&to.RIGHT)&&(b=g-(f-l)*v,r=b>=a&&b<=c),!r&&s&to.BELOW&&!(i&to.BELOW)&&(x=f-(g-a)/v,r=x>=o&&x<=l),!r&&s&to.LEFT&&!(i&to.LEFT)&&(b=g-(f-o)*v,r=b>=a&&b<=c)}return r}function uae(t,e){const n=e.getExtent(),r=ch(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=qn(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function hae(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];uae(t,e);const i=qn(r);if(qn(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function ni(t,e,n){return Math.min(Math.max(t,e),n)}function gTe(t,e,n,r,i,s){const o=i-n,a=s-r;if(o!==0||a!==0){const l=((t-n)*o+(e-r)*a)/(o*o+a*a);l>1?(n=i,r=s):l>0&&(n+=o*l,r+=a*l)}return Yf(t,e,n,r)}function Yf(t,e,n,r){const i=n-t,s=r-e;return i*i+s*s}function yTe(t){const e=t.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(t[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(t[a][r]);l>s&&(s=l,i=a)}if(s===0)return null;const o=t[i];t[i]=t[r],t[r]=o;for(let a=r+1;a<e;a++){const l=-t[a][r]/t[r][r];for(let c=r;c<e+1;c++)r==c?t[a][c]=0:t[a][c]+=l*t[r][c]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function BY(t){return t*180/Math.PI}function Xf(t){return t*Math.PI/180}function ug(t,e){const n=t%e;return n*e<0?n+e:n}function Zl(t,e,n){return t+n*(e-t)}function F2(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function p3(t,e){return Math.round(F2(t,e))}function YP(t,e){return Math.floor(F2(t,e))}function Hm(t,e){return Math.ceil(F2(t,e))}function c8(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function lE(t,e,n){const r=""+t;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function dae(t,e){const n=(""+t).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(n.length,r.length);i++){const s=parseInt(n[i]||"0",10),o=parseInt(r[i]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function vTe(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function m3(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function Cz(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,s=t[1]*n+t[0]*r;return t[0]=i,t[1]=s,t}function _Te(t,e){return t[0]*=e,t[1]*=e,t}function fae(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function pae(t,e){return Math.sqrt(fae(t,e))}function mae(t,e){if(e.canWrapX()){const n=qn(e.getExtent()),r=gae(t,e,n);r&&(t[0]-=r*n)}return t}function gae(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||qn(r),i=Math.floor((t[0]-r[0])/n)),i}function yae(...t){console.warn(...t)}const Vw={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let o5=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Vw[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const IA=6378137,fx=Math.PI*IA,xTe=[-fx,-fx,fx,fx],wTe=[-180,-85,180,85],XP=IA*Math.log(Math.tan(Math.PI/2));class Yv extends o5{constructor(e){super({code:e,units:"m",extent:xTe,global:!0,worldExtent:wTe,getPointResolution:function(n,r){return n/Math.cosh(r[1]/IA)}})}}const WY=[new Yv("EPSG:3857"),new Yv("EPSG:102100"),new Yv("EPSG:102113"),new Yv("EPSG:900913"),new Yv("http://www.opengis.net/def/crs/EPSG/0/3857"),new Yv("http://www.opengis.net/gml/srs/epsg.xml#3857")];function bTe(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=fx*t[s]/180;let o=IA*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>XP?o=XP:o<-XP&&(o=-XP),e[s+1]=o}return e}function ETe(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*t[s]/fx,e[s+1]=360*Math.atan(Math.exp(t[s+1]/IA))/Math.PI-90;return e}const STe=6378137,HY=[-180,-90,180,90],TTe=Math.PI*STe/180;class I0 extends o5{constructor(e,n){super({code:e,units:"degrees",extent:HY,axisOrientation:n,global:!0,metersPerUnit:TTe,worldExtent:HY})}}const qY=[new I0("CRS:84"),new I0("EPSG:4326","neu"),new I0("urn:ogc:def:crs:OGC:1.3:CRS84"),new I0("urn:ogc:def:crs:OGC:2:84"),new I0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new I0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new I0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let u8={};function CC(t){return u8[t]||u8[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function kTe(t,e){u8[t]=e}let Fx={};function g1(t,e,n){const r=t.getCode(),i=e.getCode();r in Fx||(Fx[r]={}),Fx[r][i]=n}function MC(t,e){return t in Fx&&e in Fx[t]?Fx[t][e]:null}const g3=.9996,eu=.00669438,a5=eu*eu,l5=a5*eu,Ty=eu/(1-eu),KY=Math.sqrt(1-eu),zw=(1-KY)/(1+KY),vae=zw*zw,Mz=vae*zw,Nz=Mz*zw,_ae=Nz*zw,xae=1-eu/4-3*a5/64-5*l5/256,ATe=3*eu/8+3*a5/32+45*l5/1024,ITe=15*a5/256+45*l5/1024,PTe=35*l5/3072,RTe=3/2*zw-27/32*Mz+269/512*_ae,CTe=21/16*vae-55/32*Nz,MTe=151/96*Mz-417/128*_ae,NTe=1097/512*Nz,y3=6378137;function OTe(t,e,n){const r=t-5e5,o=(n.north?e:e-1e7)/g3/(y3*xae),a=o+RTe*Math.sin(2*o)+CTe*Math.sin(4*o)+MTe*Math.sin(6*o)+NTe*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,f=h*h,g=f*f,v=1-eu*c,x=Math.sqrt(1-eu*c),b=y3/x,T=(1-eu)/v,A=Ty*u**2,I=A*A,P=r/(b*g3),M=P*P,F=M*P,C=F*P,N=C*P,O=N*P,j=a-h/T*(M/2-C/24*(5+3*f+10*A-4*I-9*Ty))+O/720*(61+90*f+298*A+45*g-252*Ty-3*I);let V=(P-F/6*(1+2*f+A)+N/120*(5-2*A+28*f-3*I+8*Ty+24*g))/u;return V=c8(V+Xf(wae(n.number)),-Math.PI,Math.PI),[BY(V),BY(j)]}const YY=-80,XY=84,LTe=-180,DTe=180;function $Te(t,e,n){t=c8(t,LTe,DTe),e<YY?e=YY:e>XY&&(e=XY);const r=Xf(e),i=Math.sin(r),s=Math.cos(r),o=i/s,a=o*o,l=a*a,c=Xf(t),u=wae(n.number),h=Xf(u),f=y3/Math.sqrt(1-eu*i**2),g=Ty*s**2,v=s*c8(c-h,-Math.PI,Math.PI),x=v*v,b=x*v,T=b*v,A=T*v,I=A*v,P=y3*(xae*r-ATe*Math.sin(2*r)+ITe*Math.sin(4*r)-PTe*Math.sin(6*r)),M=g3*f*(v+b/6*(1-a+g)+A/120*(5-18*a+l+72*g-58*Ty))+5e5;let F=g3*(P+f*o*(x/2+T/24*(5-a+9*g+4*g**2)+I/720*(61-58*a+l+600*g-330*Ty)));return n.north||(F+=1e7),[M,F]}function wae(t){return(t-1)*6-180+3}const jTe=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function bae(t){let e=0;for(const i of jTe){const s=t.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function ZY(t,e){return function(n,r,i,s){const o=n.length;i=i>1?i:2,s=s??i,r||(i>2?r=n.slice():r=new Array(o));for(let a=0;a<o;a+=s){const l=n[a],c=n[a+1],u=t(l,c,e);r[a]=u[0],r[a+1]=u[1]}return r}}function FTe(t){return bae(t)?new o5({code:t,units:"m"}):null}function VTe(t){const e=bae(t.getCode());return e?{forward:ZY($Te,e),inverse:ZY(OTe,e)}:null}const Eae=63710088e-1;function h8(t,e,n){n=n||Eae;const r=Xf(t[1]),i=Xf(e[1]),s=(i-r)/2,o=Xf(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function e6(t,e){let n=0;for(let r=0,i=t.length;r<i-1;++r)n+=h8(t[r],t[r+1],e);return n}function d8(t,e){e=e||{};const n=e.radius||Eae,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=t.getCoordinates(),s=e6(o,n);break}case"MultiLineString":case"Polygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)s+=e6(o[l],n);break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],u=0,h=a.length;u<h;++u)s+=e6(a[u],n);break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=d8(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}const zTe=[VTe],UTe=[FTe];let f8=!0;function Sae(t){f8=!1}function Oz(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function v3(t){kTe(t.getCode(),t),g1(t,t,Oz)}function GTe(t){t.forEach(v3)}function Jr(t){if(typeof t!="string")return t;const e=CC(t);if(e)return e;for(const n of UTe){const r=n(t);if(r)return r}return null}function _3(t,e,n,r){t=Jr(t);let i;const s=t.getPointResolutionFunc();if(s){if(i=s(e,n),r&&r!==t.getUnits()){const o=t.getMetersPerUnit();o&&(i=i*o/Vw[r])}}else{const o=t.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=Dz(t,Jr("EPSG:4326"));if(!a&&o!=="degrees")i=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const u=h8(c.slice(0,2),c.slice(2,4)),h=h8(c.slice(4,6),c.slice(6,8));i=(u+h)/2}const l=r?Vw[r]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function p8(t){GTe(t),t.forEach(function(e){t.forEach(function(n){e!==n&&g1(e,n,Oz)})})}function BTe(t,e,n,r){t.forEach(function(i){e.forEach(function(s){g1(i,s,n),g1(s,i,r)})})}function Lz(t,e){return t?typeof t=="string"?Jr(t):t:Jr(e)}function m8(t){return(function(e,n,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=i){const a=t(e.slice(o,o+r)),l=a.length;for(let c=0,u=i;c<u;++c)n[o+c]=c>=l?e[o+c]:a[c]}return n})}function WTe(t,e,n,r){const i=Jr(t),s=Jr(e);g1(i,s,m8(n)),g1(s,i,m8(r))}function Ci(t,e){return Sae(),V2(t,"EPSG:4326","EPSG:3857")}function Qn(t,e){const n=V2(t,"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=ug(r+180,360)-180),n}function Hy(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Dz(t,e)===Oz)&&n}function Dz(t,e){const n=t.getCode(),r=e.getCode();let i=MC(n,r);if(i)return i;let s=null,o=null;for(const l of zTe)s||(s=l(t)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)i=t6(s.inverse,o.forward);else{const l=MC(n,a);l&&(i=t6(l,o.forward))}else{const l=MC(a,r);l&&(i=t6(s.inverse,l))}return i&&(v3(t),v3(e),g1(t,e,i)),i}function t6(t,e){return function(n,r,i,s){return r=t(n,r,i,s),e(r,r,i,s)}}function QT(t,e){const n=Jr(t),r=Jr(e);return Dz(n,r)}function V2(t,e,n){const r=QT(e,n);if(!r){const i=Jr(e).getCode(),s=Jr(n).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(t,void 0,t.length)}function g8(t,e){return t}function Bu(t,e){return f8&&!m3(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(f8=!1,yae("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Tae(t,e){return t}function cd(t,e){return t}function JY(t,e,n){return function(r){let i,s;if(t.canWrapX()){const o=t.getExtent(),a=qn(o);r=r.slice(0),s=gae(r,t,a),s&&(r[0]=r[0]-s*a),r[0]=ni(r[0],o[0],o[2]),r[1]=ni(r[1],o[1],o[3]),i=n(r)}else i=n(r);return s&&e.canWrapX()&&(i[0]+=s*qn(e.getExtent())),i}}function HTe(){p8(WY),p8(qY),BTe(qY,WY,bTe,ETe)}HTe();const qTe=new Array(6);function zs(){return[1,0,0,1,0,0]}function kae(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5];return t[0]=n*l+i*c,t[1]=r*l+s*c,t[2]=n*u+i*h,t[3]=r*u+s*h,t[4]=n*f+i*g+o,t[5]=r*f+s*g+a,t}function KTe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function Aae(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Yi(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function YTe(t,e,n){return kae(t,KTe(qTe,1,0,0,1,e,n))}function au(t,e,n,r,i,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=r*c,t[1]=i*l,t[2]=-r*l,t[3]=i*c,t[4]=o*r*c-a*r*l+e,t[5]=o*i*l+a*i*c+n,t}function ek(t,e){const n=XTe(e);cr(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-i/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-o*a)/n,t[5]=-(r*l-i*a)/n,t}function XTe(t){return t[0]*t[3]-t[1]*t[2]}const ZTe=[1e5,1e5,1e5,1e5,2,2];function JTe(t){return"matrix("+t.join(", ")+")"}function y8(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function QTe(t,e){const n=y8(t),r=y8(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*ZTe[i])!==0)return!1;return!0}function pd(t,e,n,r,i,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=r){const c=t[l],u=t[l+1];s[a++]=i[0]*c+i[2]*u+i[4],s[a++]=i[1]*c+i[3]*u+i[5];for(let h=2;h<o;h++)s[a++]=t[l+h]}return s&&s.length!=a&&(s.length=a),s}function $z(t,e,n,r,i,s,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),c=s[0],u=s[1];let h=0;for(let f=e;f<n;f+=r){const g=t[f]-c,v=t[f+1]-u;o[h++]=c+g*a-v*l,o[h++]=u+g*l+v*a;for(let x=f+2;x<f+r;++x)o[h++]=t[x]}return o&&o.length!=h&&(o.length=h),o}function eke(t,e,n,r,i,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=r){const f=t[h]-l,g=t[h+1]-c;a[u++]=l+i*f,a[u++]=c+s*g;for(let v=h+2;v<h+r;++v)a[u++]=t[v]}return a&&a.length!=u&&(a.length=u),a}function tke(t,e,n,r,i,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=r){o[a++]=t[l]+i,o[a++]=t[l+1]+s;for(let c=l+2;c<l+r;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const QY=zs(),nke=[NaN,NaN];class Iae extends $d{constructor(){super(),this.extent_=Fa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=rae((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return xn()}closestPointXY(e,n,r,i){return xn()}containsXY(e,n){return this.closestPointXY(e,n,nke,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return xn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&AA(n),this.extentRevision_=this.getRevision()}return pTe(this.extent_,e)}rotate(e,n){xn()}scale(e,n,r){xn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return xn()}getType(){return xn()}applyTransform(e){xn()}intersectsExtent(e){return xn()}translate(e,n){xn()}transform(e,n){const r=Jr(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=Ts(c)/Ts(l);au(QY,c[0],c[3],u,-u,0,0,0);const h=pd(s,0,s.length,a,QY,o),f=QT(r,n);return f?f(h,h,a):h}:QT(r,n);return this.applyTransform(i),this}}class Xg extends Iae{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Iz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return xn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=x3(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){xn()}setLayout(e,n,r){let i;if(e)i=x3(e);else{for(let s=0;s<r;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=J1(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();$z(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=ch(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();eke(i,0,i.length,s,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();tke(r,0,r.length,i,e,n,r),this.changed()}}}function J1(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function x3(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function rke(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return pd(r,0,r.length,i,e,n)}function eX(t,e,n,r,i,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(c===0&&u===0)h=e;else{const f=((i-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let g=0;g<r;++g)o[g]=Zl(t[e+g],t[n+g],f);o.length=r;return}else h=e}for(let f=0;f<r;++f)o[f]=t[h+f];o.length=r}function jz(t,e,n,r,i){let s=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const a=t[e],l=t[e+1],c=Yf(s,o,a,l);c>i&&(i=c),s=a,o=l}return i}function Fz(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=jz(t,e,a,r,i),e=a}return i}function ike(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=Fz(t,e,a,r,i),e=a[a.length-1]}return i}function Vz(t,e,n,r,i,s,o,a,l,c,u){if(e==n)return c;let h,f;if(i===0){if(f=Yf(o,a,t[e],t[e+1]),f<c){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,f}return c}u=u||[NaN,NaN];let g=e+r;for(;g<n;)if(eX(t,g-r,g,r,o,a,u),f=Yf(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r,g+=r}else g+=r*Math.max((Math.sqrt(f)-Math.sqrt(c))/i|0,1);if(s&&(eX(t,n-r,e,r,o,a,u),f=Yf(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function zz(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=Vz(t,e,g,r,i,s,o,a,l,c,u),e=g}return c}function ske(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=zz(t,e,g,r,i,s,o,a,l,c,u),e=g[g.length-1]}return c}function Pae(t,e,n,r){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}function c5(t,e,n,r){for(let i=0,s=n.length;i<s;++i){const o=n[i];for(let a=0;a<r;++a)t[e++]=o[a]}return e}function PA(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=c5(t,e,n[o],r);i[s++]=l,e=l}return i.length=s,i}function Rae(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=PA(t,e,n[o],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function qm(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<n;o+=r)i[s++]=t.slice(o,o+r);return i.length=s,i}function tk(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=qm(t,e,l,r,i[s]),e=l}return i.length=s,i}function v8(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=l.length===1&&l[0]===e?[]:tk(t,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function w3(t,e,n,r,i,s,o){let a,l;const c=(n-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let u=t[e],h=t[e+1],f=0;const g=[0];for(let b=e+r;b<n;b+=r){const T=t[b],A=t[b+1];f+=Math.sqrt((T-u)*(T-u)+(A-h)*(A-h)),g.push(f),u=T,h=A}const v=i*f,x=oTe(g,v);x<0?(l=(v-g[-x-2])/(g[-x-1]-g[-x-2]),a=e+(-x-2)*r):a=e+x*r}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?t[a+u]:Zl(t[a+u],t[a+r+u],l);return s}function _8(t,e,n,r,i,s){if(n==e)return null;let o;if(i<t[e+r-1])return s?(o=t.slice(e,e+r),o[r-1]=i,o):null;if(t[n-1]<i)return s?(o=t.slice(n-r,n),o[r-1]=i,o):null;if(i==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){const f=a+l>>1;i<t[(f+1)*r-1]?l=f:a=f+1}const c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);const u=t[(a+1)*r-1],h=(i-c)/(u-c);o=[];for(let f=0;f<r-1;++f)o.push(Zl(t[(a-1)*r+f],t[a*r+f],h));return o.push(i),o}function oke(t,e,n,r,i,s,o){if(o)return _8(t,e,n[n.length-1],r,i,s);let a;if(i<t[r-1])return s?(a=t.slice(0,r),a[r-1]=i,a):null;if(t[t.length-1]<i)return s?(a=t.slice(t.length-r),a[r-1]=i,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(i<t[e+r-1])return null;if(i<=t[u-1])return _8(t,e,u,r,i,!1);e=u}}return null}function ake(t,e,n,r,i){return!Rz(i,function(o){return!ky(t,e,n,r,o[0],o[1])})}function ky(t,e,n,r,i,s){let o=0,a=t[n-r],l=t[n-r+1];for(;e<n;e+=r){const c=t[e],u=t[e+1];l<=s?u>s&&(c-a)*(s-l)-(i-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(i-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Uz(t,e,n,r,i,s){if(n.length===0||!ky(t,e,n[0],r,i,s))return!1;for(let o=1,a=n.length;o<a;++o)if(ky(t,n[o-1],n[o],r,i,s))return!1;return!0}function lke(t,e,n,r,i,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(Uz(t,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function Cae(t,e,n,r,i){let s;for(e+=r;e<n;e+=r)if(s=i(t.slice(e-r,e),t.slice(e,e+r)),s)return s;return!1}function u5(t,e,n,r,i,s){return s=s??lae(Fa(),t,e,n,r),ia(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:Cae(t,e,n,r,function(o,a){return mTe(i,o,a)}):!1}function cke(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){if(u5(t,e,n[s],r,i))return!0;e=n[s]}return!1}function Mae(t,e,n,r,i){return!!(u5(t,e,n,r,i)||ky(t,e,n,r,i[0],i[1])||ky(t,e,n,r,i[0],i[3])||ky(t,e,n,r,i[2],i[1])||ky(t,e,n,r,i[2],i[3]))}function Nae(t,e,n,r,i){if(!Mae(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(ake(t,n[s-1],n[s],r,i)&&!u5(t,n[s-1],n[s],r,i))return!1;return!0}function uke(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(Nae(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}function Gz(t,e,n,r){let i=t[e],s=t[e+1],o=0;for(let a=e+r;a<n;a+=r){const l=t[a],c=t[a+1];o+=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),i=l,s=c}return o}function h5(t,e,n,r,i,s,o){const a=(n-e)/r;if(a<3){for(;e<n;e+=r)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-r];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let g=0;const v=t[f],x=t[f+1],b=t[h],T=t[h+1];for(let A=f+r;A<h;A+=r){const I=t[A],P=t[A+1],M=gTe(I,P,v,x,b,T);M>g&&(u=A,g=M)}g>i&&(l[(u-e)/r]=1,f+r<u&&c.push(f,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*r],s[o++]=t[e+h*r+1]);return o}function Oae(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=h5(t,e,u,r,i,s,o),a.push(o),e=u}return o}function U0(t,e){return e*Math.round(t/e)}function hke(t,e,n,r,i,s,o){if(e==n)return o;let a=U0(t[e],i),l=U0(t[e+1],i);e+=r,s[o++]=a,s[o++]=l;let c,u;do if(c=U0(t[e],i),u=U0(t[e+1],i),e+=r,e==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<n;){const h=U0(t[e],i),f=U0(t[e+1],i);if(e+=r,h==c&&f==u)continue;const g=c-a,v=u-l,x=h-a,b=f-l;if(g*b==v*x&&(g<0&&x<g||g==x||g>0&&x>g)&&(v<0&&b<v||v==b||v>0&&b>v)){c=h,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=f}return s[o++]=c,s[o++]=u,o}function Bz(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=hke(t,e,u,r,i,s,o),a.push(o),e=u}return o}function dke(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=Bz(t,e,u,r,i,s,o,h),a.push(h),e=u[u.length-1]}return o}class Qi extends Xg{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){Rr(this.flatCoordinates,e),this.changed()}clone(){const e=new Qi(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<X1(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return Cae(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,_8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return qm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return w3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return Gz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=h5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Qi(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return u5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c5(this.flatCoordinates,0,e,this.stride),this.changed()}}let ts=class Lae extends Xg{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Lae(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=Yf(e,n,s[0],s[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return aae(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Az(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Pae(this.flatCoordinates,0,e,this.stride),this.changed()}};const io={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},y1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",fke=y1.includes("safari")&&!y1.includes("chrom"),pke=fke&&(y1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(y1)),mke=y1.includes("webkit")&&!y1.includes("edge"),Dae=y1.includes("macintosh"),gke=typeof devicePixelRatio<"u"?devicePixelRatio:1,rc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Wz=typeof Image<"u"&&Image.prototype.decode,$ae=typeof createImageBitmap=="function",jae=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),Vt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function As(t,e,n,r){let i;return n&&n.length?i=n.shift():rc?i=new class extends OffscreenCanvas{style={}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let n6;function b3(){return n6||(n6=As(1,1)),n6}function d5(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function tX(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function yke(t){for(;t.lastChild;)t.lastChild.remove()}function vke(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){t.appendChild(s);continue}if(!s){t.removeChild(i),--r;continue}t.insertBefore(s,i)}}}function Fae(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function Km(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}const Hz=[NaN,NaN,NaN,0];let r6;function _ke(){return r6||(r6=As(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),r6}const xke=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wke=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,bke=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Eke=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function ZP(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function BS(t){throw new Error('failed to parse "'+t+'" as color')}function Vae(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(wke)||t.match(xke)||t.match(bke);if(s){const o=s[4],a=100/255;return[ni(ZP(s[1],a)+.5|0,0,255),ni(ZP(s[2],a)+.5|0,0,255),ni(ZP(s[3],a)+.5|0,0,255),o!==void 0?ni(ZP(o,100),0,1):1]}BS(t)}if(t.startsWith("#")){if(Eke.test(t)){const s=t.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}BS(t)}const e=_ke();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&BS(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return Vae(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=F2(i[3]/255,3),i}function Ske(t){return typeof t=="string"?t:Kz(t)}const Tke=1024,cE={};let i6=0;function kke(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function s6(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function o6(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function a6(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function l6(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function nX(t){const e=a6(t[0]),n=a6(t[1]),r=a6(t[2]),i=l6(e*.222488403+n*.716873169+r*.06060791),s=500*(l6(e*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-l6(e*.016863605+n*.117638439+r*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+o*o),a<0?a+360:a,t[3]]}function Ake(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=o6(e),s=o6(e+n/500*Math.cos(r)),o=o6(e-n/200*Math.sin(r)),a=s6(s*3.021973625-i*1.617392459-o*.404875592),l=s6(s*-.943766287+i*1.916279586+o*.027607165),c=s6(s*.069407491-i*.22898585+o*1.159737864);return[ni(a+.5|0,0,255),ni(l+.5|0,0,255),ni(c+.5|0,0,255),t[3]]}function qz(t){if(t==="none")return Hz;if(cE.hasOwnProperty(t))return cE[t];if(i6>=Tke){let n=0;for(const r in cE)(n++&3)===0&&(delete cE[r],--i6)}const e=Vae(t);e.length!==4&&BS(t);for(const n of e)isNaN(n)&&BS(t);return cE[t]=e,++i6,e}function lu(t){return Array.isArray(t)?t:qz(t)}function Kz(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}class zae extends TA{constructor(e,n,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=typeof i=="function"?Vt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(An.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Vt.IDLE&&this.loader){this.state=Vt.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;iae(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||$ae&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=Vt.LOADED}).catch(r=>{this.state=Vt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function Ike(t,e,n){const r=t;let i=!0,s=!1,o=!1;const a=[d3(r,An.LOAD,function(){o=!0,s||e()})];return r.src&&Wz?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(o?e():n())})):a.push(d3(r,An.ERROR,n)),function(){i=!1,a.forEach(ti)}}function Pke(t,e){return new Promise((n,r)=>{function i(){o(),n(t)}function s(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",s)}t.addEventListener("load",i),t.addEventListener("error",s)})}function Uae(t,e){return e&&(t.src=e),t.src&&Wz?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):Pke(t)}function Gae(t,e){return e&&(t.src=e),t.src&&Wz&&$ae?t.decode().then(()=>createImageBitmap(t)).catch(n=>{if(t.complete&&t.width)return t;throw n}):Uae(t)}class Rke{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){const i=c6(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){const i=c6(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,s){const o=c6(e,n,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===Vt.IDLE&&i.load(),i.getImageState()===Vt.LOADING?i.ready().then(()=>{this.patternCache_[o]=b3().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=b3().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function c6(t,e,n){const r=n?lu(n):"null";return e+":"+t+":"+r}const Yc=new Rke;let uE=null;class Bae extends TA{constructor(e,n,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?Vt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Vt.LOADED){uE||(uE=As(1,1,void 0,{willReadFrequently:!0})),uE.drawImage(this.image_,0,0);try{uE.getImageData(0,0,1,1),this.tainted_=!1}catch{uE=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(An.CHANGE)}handleImageError_(){this.imageState_=Vt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Vt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=As(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Vt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Vt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Uae(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Vt.LOADED)return;const n=this.image_,r=As(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=Ske(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Vt.LOADED||this.imageState_===Vt.ERROR)e();else{const n=()=>{(this.imageState_===Vt.LOADED||this.imageState_===Vt.ERROR)&&(this.removeEventListener(An.CHANGE,n),e())};this.addEventListener(An.CHANGE,n)}})),this.ready_}}function E3(t,e,n,r,i,s){let o=e===void 0?void 0:Yc.get(e,n,i);return o||(o=new Bae(t,t&&"src"in t?t.src||void 0:e,n,r,i),Yc.set(e,n,i,o,s)),s&&o&&!Yc.getPattern(e,n,i)&&Yc.set(e,n,i,o,s),o}function ud(t){return t?Array.isArray(t)?Kz(t):typeof t=="object"&&"src"in t?Cke(t):t:null}function Cke(t){if(!t.offset||!t.size)return Yc.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Yc.getPattern(e,void 0,t.color);if(n)return n;const r=Yc.get(t.src,"anonymous",null);if(r.getImageState()!==Vt.LOADED)return null;const i=As(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),E3(i.canvas,e,void 0,Vt.LOADED,t.color,!0),Yc.getPattern(e,void 0,t.color)}class Wae{drawCustom(e,n,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const JP="ol-hidden",RA="ol-unselectable",Yz="ol-control",rX="ol-collapsed",Mke=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),iX=["style","variant","weight","size","lineHeight","family"],x8={normal:400,bold:700},w8=function(t){const e=t.match(Mke);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=iX.length;r<i;++r){const s=e[r+1];s!==void 0&&(n[iX[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(n.weight))&&n.weight in x8&&(n.weight=x8[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n},Hae="10px sans-serif",hl="#000",Uw="round",Zf=[],Jf=0,Gw="round",nk=10,rk="#000",ik="center",S3="middle",Ay=[0,0,0,0],sk=1,P_=new $d;let hE=null,sX;const b8={},Nke=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Oke(t,e,n){return`${t} ${e} 16px "${n}"`}const Lke=(function(){let e,n;async function r(s){await n.ready;const o=await n.load(s);if(o.length===0)return!1;const a=w8(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=x8[u.weight]||u.weight;return h===l&&u.style===a.style&&f==c})}async function i(){await n.ready;let s=!0;const o=P_.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await r(c)?($2(b8),P_.set(c,100)):(u+=10,P_.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){n||(n=rc?self.fonts:document.fonts);const o=w8(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(Nke.has(c))continue;const u=Oke(o.style,o.weight,c);P_.get(u)===void 0&&(P_.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),Dke=(function(){let t;return function(e){let n=b8[e];if(n==null){if(rc){const r=w8(e),i=qae(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);b8[e]=n}return n}})();function qae(t,e){return hE||(hE=As(1,1)),t!=sX&&(hE.font=t,sX=hE.font),hE.measureText(e)}function Kae(t,e){return qae(t,e).width}function oX(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,Kae(t,s)),0);return n[e]=r,r}function $ke(t,e){const n=[],r=[],i=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),i.push(o),o=0,a+=l,l=0;continue}const f=e[c+1]||t.font,g=Kae(f,h);n.push(g),o+=g;const v=Dke(f);r.push(v),l=Math.max(l,v)}return{width:s,height:a,widths:n,heights:r,lineWidths:i}}function jke(t,e,n,r,i,s,o,a,l,c,u){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),Fke(r,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(r,i,s,o,a,0,0,o,a)):t.drawImage(r,i,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function Fke(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class Vke extends Wae{constructor(e,n,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?F2(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=zs()}drawImages_(e,n,r,i){if(!this.image_)return;const s=pd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const f=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const v=f+this.imageAnchorX_,x=g+this.imageAnchorY_;au(a,v,x,1,1,c,-v,-x),o.save(),o.transform.apply(o,a),o.translate(v,x),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=pd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<r;n+=i){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,n,r,i,s){const o=this.context_,a=pd(e,n,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,n,r,i){for(let s=0,o=r.length;s<o;++s)n=this.moveToLineTo_(e,n,r[s],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=rke(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(ia(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(i,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!ia(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];i=this.drawRings_(r,i,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),xp(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:ik;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:ud(r||hl)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||Zf;this.strokeState_={lineCap:i!==void 0?i:Uw,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Jf)*this.pixelRatio_,lineJoin:a!==void 0?a:Gw,lineWidth:(l!==void 0?l:sk)*this.pixelRatio_,miterLimit:c!==void 0?c:nk,strokeStyle:ud(r||rk)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:ud(g||hl)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),v=r.getLineCap(),x=r.getLineDash(),b=r.getLineDashOffset(),T=r.getLineJoin(),A=r.getWidth(),I=r.getMiterLimit();this.textStrokeState_={lineCap:v!==void 0?v:Uw,lineDash:x||Zf,lineDashOffset:b||Jf,lineJoin:T!==void 0?T:Gw,lineWidth:A!==void 0?A:sk,miterLimit:I!==void 0?I:nk,strokeStyle:ud(g||rk)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:i!==void 0?i:Hae,textAlign:h!==void 0?h:ik,textBaseline:f!==void 0?f:S3},this.text_=u!==void 0?Array.isArray(u)?u.reduce((g,v,x)=>g+=x%2?" ":v,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const zke=.5,Yae={Point:Yke,LineString:Hke,Polygon:Zke,MultiPoint:Xke,MultiLineString:qke,MultiPolygon:Kke,GeometryCollection:Wke,Circle:Gke};function Uke(t,e){return parseInt(_n(t),10)-parseInt(_n(e),10)}function aX(t,e){const n=Xae(t,e);return n*n}function Xae(t,e){return zke*t/e}function Gke(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function lX(t,e,n,r,i,s,o,a){const l=[],c=n.getImage();if(c){let f=!0;const g=c.getImageState();g==Vt.LOADED||g==Vt.ERROR?f=!1:g==Vt.IDLE&&c.load(),f&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>i(null)),Bke(t,e,n,r,s,o,a),h}function Bke(t,e,n,r,i,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,i);if(n.getRenderer())Zae(t,l,n,e,o);else{const u=Yae[l.getType()];u(t,l,n,e,o,s)}}function Zae(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Zae(t,o[a],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function Wke(t,e,n,r,i,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=Yae[o[a].getType()];c(t,o[a],n,r,i,s)}}function Hke(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function qke(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function Kke(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function Yke(t,e,n,r,i,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Vt.LOADED)return;const u=t.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,r,i)}if(l){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,r,i)}}function Xke(t,e,n,r,i,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Vt.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,r,i)}if(c){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,r,i)}}function Zke(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}let Jke=!1;function Qke(t,e,n,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Jke,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:n,featureProjection:i}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function cX(t,e){return function(n,r,i,s,o){Qke(t,e,n,r,i,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function eAe(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Jae(t,e,n,r){const i=[];let s=Fa();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Iz(t,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function Xz(t,e,n,r,i,s,o){let a,l,c,u,h,f,g;const v=i[s+1],x=[];for(let A=0,I=n.length;A<I;++A){const P=n[A];for(u=t[P-r],f=t[P-r+1],a=e;a<P;a+=r)h=t[a],g=t[a+1],(v<=f&&g<=v||f<=v&&v<=g)&&(c=(v-f)/(g-f)*(h-u)+u,x.push(c)),u=h,f=g}let b=NaN,T=-1/0;for(x.sort(qf),u=x[0],a=1,l=x.length;a<l;++a){h=x[a];const A=Math.abs(h-u);A>T&&(c=(u+h)/2,Uz(t,e,n,r,c,v)&&(b=c,T=A)),u=h}return isNaN(b)&&(b=i[s]),o?(o.push(b,v,T),o):[b,v,T]}function Qae(t,e,n,r,i){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Xz(t,e,l,r,i,2*o,s),e=l[l.length-1]}return s}function tAe(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const s=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=s}e+=r,n-=r}}function Zz(t,e,n,r){let i=0,s=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];i+=(a-s)*(l+o),s=a,o=l}return i===0?void 0:i>0}function Jz(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Zz(t,e,a,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function ele(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!Jz(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function T3(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=Zz(t,e,a,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&tAe(t,e,a,r),e=a}return e}function E8(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s)e=T3(t,e,n[s],r,i);return e}function tle(t,e){const n=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=Zz(t,r,l,2);if(s===void 0&&(s=c),c===s)n.push(e.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=o+1,r=l}return n}class f5 extends Xg{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){const e=new f5(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=e-s[0],a=n-s[1],l=o*o+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=s[0]+c*o,r[1]=s[1]+c*a;for(let u=2;u<this.stride;++u)r[u]=s[u]}return r.length=this.stride,l}return i}containsXY(e,n){const r=this.flatCoordinates,i=e-r[0],s=n-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,r=n[this.stride]-n[0];return ap(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(ia(e,n)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:Rz(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let s=1;s<n;++s)i[n+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=Pae(i,0,e,this.stride);i[s++]=i[0]+n;for(let o=1,a=this.stride;o<a;++o)i[s++]=i[o];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const r=this.getCenter(),i=this.getStride();this.setCenter($z(r,0,r.length,i,e,n,r)),this.changed()}}f5.prototype.transform;class tu extends Iae{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ti),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(Hn(e[n],An.CHANGE,this.changed,this))}clone(){const e=new tu(u6(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<X1(this.getExtent(),e,n))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,n,r,i);return i}containsXY(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){AA(e);const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)Pz(e,n[r].getExtent());return e}getGeometries(){return u6(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(i=!0)}return i?new tu(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=ch(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(u6(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function u6(t){return t.map(e=>e.clone())}function nle(t,e,n,r){let i=0;const s=t[n-r],o=t[n-r+1];let a=0,l=0;for(;e<n;e+=r){const c=t[e]-s,u=t[e+1]-o;i+=l*c-a*u,a=c,l=u}return i/2}function rle(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=nle(t,e,a,r),e=a}return i}function nAe(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=rle(t,e,a,r),e=a[a.length-1]}return i}class ok extends Xg{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new ok(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<X1(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(jz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return nle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=h5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new ok(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c5(this.flatCoordinates,0,e,this.stride),this.changed()}}class uh extends Xg{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const i=e,s=[],o=[];for(let l=0,c=i.length;l<c;++l){const u=i[l];Rr(s,u.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Rr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new uh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<X1(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zz(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,oke(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return tk(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Qi(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new Qi(e.slice(s,l),r);i.push(c),s=l}return i}getLength(){const e=this.ends_;let n=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=Gz(this.flatCoordinates,n,e[i],this.stride),n=e[i];return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=w3(n,r,l,s,.5);Rr(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Oae(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new uh(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return cke(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=PA(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class Zg extends Xg{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){Rr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Zg(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<X1(this.getExtent(),e,n))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Yf(e,n,s[a],s[a+1]);if(c<i){i=c;for(let u=0;u<o;++u)r[u]=s[a+u];r.length=o}}return i}getCoordinates(){return qm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new ts(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new ts(e.slice(s,s+r),n);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let i=0,s=n.length;i<s;i+=r){const o=n[i],a=n[i+1];if(Az(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=c5(this.flatCoordinates,0,e,this.stride),this.changed()}}class bl extends Xg{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?Rr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new bl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<X1(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Fz(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zz(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return Uz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return rle(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),T3(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,tk(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=ch(this.getExtent());this.flatInteriorPoint_=Xz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ts(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new ok(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new ok(n.slice(s,l),e);i.push(c),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Jz(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=T3(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Bz(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new bl(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Nae(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=PA(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function uX(t){if(j2(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new bl(s,"XY",[s.length])}class lp extends Xg{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,l=i.length;a<l;++a){const c=i[a],u=s.length,h=c.getEnds();for(let f=0,g=h.length;f<g;++f)h[f]+=u;Rr(s,c.getFlatCoordinates()),o.push(h)}n=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;Rr(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,s=n.length;i<s;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();const r=new lp(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<X1(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ike(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ske(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return lke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return nAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),E8(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,v8(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Jae(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Qae(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Zg(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;ele(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=E8(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=dke(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new lp(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=n;return new bl(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const u=new bl(n.slice(s,c),e,l);i.push(u),s=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return uke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=Rae(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const hX=zs();class dl{constructor(e,n,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?aae(this.flatCoordinates_):Iz(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=ch(this.getExtent());this.flatInteriorPoints_=Xz(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=tle(this.flatCoordinates_,this.ends_),n=Jae(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Qae(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=w3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=w3(e,n,o,2,.5);Rr(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Jr(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Ts(r)/Ts(n);au(hX,r[0],r[3],i,-i,0,0,0),pd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,hX,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new dl(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=rae((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=h5(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Oae(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=Bz(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new dl(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}dl.prototype.getFlatCoordinates=dl.prototype.getOrientedFlatCoordinates;function ile(t,e,n=0,r=t.length-1,i=rAe){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+f)),v=Math.min(r,Math.floor(e+(l-c)*h/l+f));ile(t,e,g,v,i)}const s=t[e];let o=n,a=r;for(dE(t,n,e),i(t[r],s)>0&&dE(t,n,r);o<a;){for(dE(t,o,a),o++,a--;i(t[o],s)<0;)o++;for(;i(t[a],s)>0;)a--}i(t[n],s)===0?dE(t,n,a):(a++,dE(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function dE(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function rAe(t,e){return t<e?-1:t>e?1:0}let sle=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!eR(e,n))return r;const i=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?i(a):a;eR(e,l)&&(n.leaf?r.push(a):d6(e,l)?this._all(a,r):s.push(a))}n=s.pop()}return r}collides(e){let n=this.data;if(!eR(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const s=n.children[i],o=n.leaf?this.toBBox(s):s;if(eR(e,o)){if(n.leaf||d6(e,o))return!0;r.push(s)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=R_([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const u=iAe(e,r.children,n);if(u!==-1)return r.children.splice(u,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&d6(r,i)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const s=r-n+1;let o=this._maxEntries,a;if(s<=o)return a=R_(e.slice(n,r+1)),Xv(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=R_([]),a.leaf=!1,a.height=i;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));dX(e,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const h=Math.min(u+c-1,r);dX(e,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const g=Math.min(f+l-1,h);a.children.push(this._build(e,f,g,i-1))}}return Xv(a,this.toBBox),a}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=h6(c),h=aAe(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,n,s);for(o.children.push(e),KE(o,i);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(i,s,n)}_split(e,n){const r=e[n],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=R_(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,Xv(r,this.toBBox),Xv(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,n){this.data=R_([e,n]),this.data.height=e.height+1,this.data.leaf=!1,Xv(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,s=1/0,o=1/0;for(let a=n;a<=r-n;a++){const l=qE(e,0,a,this.toBBox),c=qE(e,a,r,this.toBBox),u=lAe(l,c),h=h6(l)+h6(c);u<s?(s=u,i=a,o=h<o?h:o):u===s&&h<o&&(o=h,i=a)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:sAe,s=e.leaf?this.compareMinY:oAe,o=this._allDistMargin(e,n,r,i),a=this._allDistMargin(e,n,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const s=this.toBBox,o=qE(e,0,n,s),a=qE(e,r-n,r,s);let l=QP(o)+QP(a);for(let c=n;c<r-n;c++){const u=e.children[c];KE(o,e.leaf?s(u):u),l+=QP(o)}for(let c=r-n-1;c>=n;c--){const u=e.children[c];KE(a,e.leaf?s(u):u),l+=QP(a)}return l}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)KE(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():Xv(e[n],this.toBBox)}};function iAe(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Xv(t,e){qE(t,0,t.children.length,e,t)}function qE(t,e,n,r,i){i||(i=R_(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];KE(i,t.leaf?r(o):o)}return i}function KE(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function sAe(t,e){return t.minX-e.minX}function oAe(t,e){return t.minY-e.minY}function h6(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function QP(t){return t.maxX-t.minX+(t.maxY-t.minY)}function aAe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function lAe(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function d6(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function eR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function R_(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dX(t,e,n,r,i){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;ile(t,o,e,n,i),s.push(e,o,o,n)}}class fX{constructor(e){this.rbush_=new sle(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[_n(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const o=e[i],a=n[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=l,this.items_[_n(a)]=l}this.rbush_.load(r)}remove(e){const n=_n(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[_n(n)],i=[r.minX,r.minY,r.maxX,r.maxY];m1(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,s=e.length;i<s;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return f1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return ap(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class Qz extends $d{constructor(e){super(),this.projection=Jr(e.projection),this.attributions_=pX(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=pX(e),this.changed()}setState(e){this.state_=e,this.changed()}}function pX(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const Zo={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Xp extends gh{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class fu extends Qz{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=JT,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(cr(this.format_,"`format` must be set when `url` is set"),this.loader_=cX(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:eAe;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new fX:null,this.loadedExtentsRtree_=new fX,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new Kc(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=_n(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new Xp(Zo.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof dl||(this.featureChangeKeys_[e]=[Hn(n,An.CHANGE,this.handleFeatureChange_,this),Hn(n,jw.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof dl){const s=this.idIndex_[i];s instanceof dl?Array.isArray(s)?s.push(n):this.idIndex_[i]=[s,n]:r=!1}else r=!1}return r&&(cr(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=_n(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=_n(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(Zo.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new Xp(Zo.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(Zo.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(Zo.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(ul.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(ul.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ti);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new Xp(Zo.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof dl||s.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof dl||i.intersectsExtent(e)){const s=n(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),f1(this.nullGeometryFeatures_)||Rr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=hae(e,n);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||Fw,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u instanceof dl?0:u.closestPointXY(r,i,o,a),a<h){s=c;const f=Math.sqrt(a);l[0]=r-f,l[1]=i-f,l[2]=r+f,l[3]=i+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=_n(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new Xp(Zo.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:_n(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&f1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,n,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];i.forEachInExtent(l,function(u){return Wm(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Xp(Zo.FEATURESLOADSTART)),this.loader_.call(this,l,n,r,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xp(Zo.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xp(Zo.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(m1(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=_n(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[n]?.forEach(ti),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(Zo.REMOVEFEATURE)&&this.dispatchEvent(new Xp(Zo.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){cr(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(cX(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class sr{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new sr({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=E3(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Vt.IDLE&&n.load(),n.getImageState()===Vt.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?_n(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:lu(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Bn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Bn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function mX(t){return t[0]>0&&t[1]>0}function cAe(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Ma(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class p5{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ma(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new p5({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return xn()}getImage(e){return xn()}getHitDetectionImage(){return xn()}getPixelRatio(e){return 1}getImageState(){return xn()}getImageSize(){return xn()}getOrigin(){return xn()}getSize(){return xn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ma(e)}listenImageChange(e){xn()}load(){xn()}unlistenImageChange(e){xn()}ready(){return Promise.resolve()}}class m5 extends p5{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Vt.LOADING:Vt.LOADED,this.imageState_===Vt.LOADING&&this.ready().then(()=>this.imageState_=Vt.LOADED),this.render()}clone(){const e=this.getScale(),n=new m5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const n=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=Yc.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=As(o,o);this.draw_(s,a,e),i=a.canvas,Yc.set(r,null,null,new Bae(i,void 0,null,Vt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const F=i;i=s,s=F}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=i-c,h=Math.sqrt(l*l+u*u),f=h/l;if(e==="miter"&&f<=r)return f*n;const g=n/2/f,v=n/2*(u/h),b=Math.sqrt((i+g)*(i+g)+v*v)-i;if(this.radius2_===void 0||e==="bevel")return b*2;const T=i*Math.sin(a),A=Math.sqrt(i*i-T*T),I=s-A,M=Math.sqrt(T*T+I*I)/T;if(M<=r){const F=M*n/2-s-i;return 2*Math.max(b,F)}return b*2}createRenderOptions(){let e=Uw,n=Gw,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=ud(this.stroke_.getColor()??rk),a=this.stroke_.getWidth()??sk,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Gw,e=this.stroke_.getLineCap()??Uw,r=this.stroke_.getMiterLimit()??nk);const l=this.calculateLineJoinSize_(n,a,r),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=hl),n.fillStyle=ud(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=lu(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=As(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=hl,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class uo extends m5{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new uo({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class In{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=gX,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new In({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=gX,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function uAe(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(cr(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let f6=null;function ole(t,e){if(!f6){const n=new sr({color:"rgba(255,255,255,0.4)"}),r=new Bn({color:"#3399CC",width:1.25});f6=[new In({image:new uo({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return f6}function hAe(){const t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new In({fill:new sr({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new In({stroke:new Bn({color:e,width:r+2})}),new In({stroke:new Bn({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new In({image:new uo({radius:r*2,fill:new sr({color:n}),stroke:new Bn({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function gX(t){return t.getGeometry()}const dAe="#333";class nu{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Ma(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new sr({color:dAe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new nu({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof sr?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ma(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const bs={ANIMATING:0,INTERACTING:1},an={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},tR=[an.FILL],Ym=[an.STROKE],Iy=[an.BEGIN_PATH],yX=[an.CLOSE_PATH];class CA extends Wae{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)i[0]=e[a],i[1]=e[a+1],p1(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,n,r,i,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=i);let u=e[n],h=e[n+1];const f=this.tmpCoordinate_;let g=!0,v,x,b;for(v=n+i;v<r;v+=i)f[0]=e[v],f[1]=e[v+1],b=a8(c,f),b!==x?(g&&(a[l++]=u,a[l++]=h,g=!1),a[l++]=f[0],a[l++]=f[1]):b===to.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],g=!1):g=!0,u=f[0],h=f[1],x=b;return(s&&g||v===n+i)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,n,r,i,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],c=this.appendFlatLineCoordinates(e,n,l,i,!1,!1);s.push(c),n=l}return n}drawCustom(e,n,r,i,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,f,g;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const v=e.getEndss();g=0;for(let x=0,b=v.length;x<b;++x){const T=[];g=this.drawCustomCoordinates_(c,g,v[x],a,T),f.push(T)}this.instructions.push([an.CUSTOM,l,f,e,r,v8,s]),this.hitDetectionInstructions.push([an.CUSTOM,l,f,e,i||r,v8,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([an.CUSTOM,l,h,e,r,tk,s]),this.hitDetectionInstructions.push([an.CUSTOM,l,h,e,i||r,tk,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([an.CUSTOM,l,u,e,r,qm,s]),this.hitDetectionInstructions.push([an.CUSTOM,l,u,e,i||r,qm,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([an.CUSTOM,l,u,e,r,qm,s]),this.hitDetectionInstructions.push([an.CUSTOM,l,u,e,i||r,qm,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([an.CUSTOM,l,u,e,r,void 0,s]),this.hitDetectionInstructions.push([an.CUSTOM,l,u,e,i||r,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[an.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[an.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,s,o=-1;for(n=0;n<r;++n)i=e[n],s=i[0],s==an.END_GEOMETRY?o=n:s==an.BEGIN_GEOMETRY&&(i[2]=n,lTe(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=ud(r||hl)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=ud(r||rk);const i=e.getLineCap();n.lineCap=i!==void 0?i:Uw;const s=e.getLineDash();n.lineDash=s?s.slice():Zf;const o=e.getLineDashOffset();n.lineDashOffset=o||Jf;const a=e.getLineJoin();n.lineJoin=a!==void 0?a:Gw;const l=e.getWidth();n.lineWidth=l!==void 0?l:sk;const c=e.getMiterLimit();n.miterLimit=c!==void 0?c:nk,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[an.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[an.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!xp(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[an.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=oae(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ld(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class fAe extends CA{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!p1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([an.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([an.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||p1(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([an.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([an.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class pAe extends CA{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),a=[an.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zf,Jf],Iy);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Ym),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zf,Jf],Iy);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(Ym),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ym),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ym),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Iy)}}class vX extends CA{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(Iy),this.hitDetectionInstructions.push(Iy);for(let c=0;c<l;++c){const u=r[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,u,i,!0,!a),g=[an.MOVE_TO_LINE_TO,h,f];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(yX),this.hitDetectionInstructions.push(yX)),n=u}return o&&(this.instructions.push(tR),this.hitDetectionInstructions.push(tR)),a&&(this.instructions.push(Ym),this.hitDetectionInstructions.push(Ym)),n}drawCircle(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,hl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zf,Jf]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[an.CIRCLE,c];this.instructions.push(Iy,u),this.hitDetectionInstructions.push(Iy,u),i.fillStyle!==void 0&&(this.instructions.push(tR),this.hitDetectionInstructions.push(tR)),i.strokeStyle!==void 0&&(this.instructions.push(Ym),this.hitDetectionInstructions.push(Ym)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,hl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zf,Jf]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_FILL_STYLE,hl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([an.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Zf,Jf]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=U0(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function mAe(t,e,n,r,i){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+i<r;){const[c,u]=l.slice(-2),h=e[o+i],f=e[o+i+1],g=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=g,a>=t){const v=(t-a+g)/g,x=Zl(c,h,v),b=Zl(u,f,v);l.push(x,b),s.push(l),l=[x,b],a==t&&(o+=i),a=0}else if(a<t)l.push(e[o+i],e[o+i+1]),o+=i;else{const v=g-a,x=Zl(c,h,v/g),b=Zl(u,f,v/g);l.push(x,b),s.push(l),l=[x,b],a=0,o+=i}}return a>0&&s.push(l),s}function gAe(t,e,n,r,i){let s=n,o=n,a=0,l=0,c=n,u,h,f,g,v,x,b,T,A,I;for(h=n;h<r;h+=i){const P=e[h],M=e[h+1];v!==void 0&&(A=P-v,I=M-x,g=Math.sqrt(A*A+I*I),b!==void 0&&(l+=f,u=Math.acos((b*A+T*I)/(f*g)),u>t&&(l>a&&(a=l,s=c,o=h),l=0,c=h-i)),f=g,b=A,T=I),v=P,x=M}return l+=g,l>a?[c,h]:[s,o]}const k3={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class yAe extends CA{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[hl]={fillStyle:hl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!ia(this.maxExtent,e.getExtent()))return;let f;if(u=e.getFlatCoordinates(),c=="LineString")f=[u.length];else if(c=="MultiLineString")f=e.getEnds();else if(c=="Polygon")f=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=e.getEndss();f=[];for(let T=0,A=b.length;T<A;++T)f.push(b[T][0])}this.beginGeometry(e,n,r);const g=o.repeat,v=g?void 0:o.textAlign;let x=0;for(let b=0,T=f.length;b<T;++b){let A;g?A=mAe(g*this.resolution,u,x,f[b],h):A=[u.slice(x,f[b])];for(let I=0,P=A.length;I<P;++I){const M=A[I];let F=0,C=M.length;if(v==null){const O=gAe(o.maxAngle,M,0,M.length,2);F=O[0],C=O[1]}for(let O=F;O<C;O+=h)a.push(M[O],M[O+1]);const N=a.length;x=f[b],this.drawChars_(l,N),l=N}}this.endGeometry(n)}else{let f=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||f.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const P=e.getFlatInteriorPoints();u=[];for(let M=0,F=P.length;M<F;M+=3)o.overflow||f.push(P[M+2]/this.resolution),u.push(P[M],P[M+1]);if(u.length===0)return;h=2;break}const g=this.appendFlatPointCoordinates(u,h);if(g===l)return;if(f&&(g-l)/2!==u.length/h){let P=l/2;f=f.filter((M,F)=>{const C=a[(P+F)*2]===u[F*h]&&a[(P+F)*2+1]===u[F*h+1];return C||--P,C})}this.saveTextStates_();const v=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,x=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,r);let b=o.padding;if(b!=Ay&&(o.scale[0]<0||o.scale[1]<0)){let P=o.padding[0],M=o.padding[1],F=o.padding[2],C=o.padding[3];o.scale[0]<0&&(M=-M,C=-C),o.scale[1]<0&&(P=-P,F=-F),b=[P,M,F,C]}const T=this.pixelRatio;this.instructions.push([an.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==Ay?Ay:b.map(function(P){return P*T}),v,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const A=1/T,I=v?v.slice(0):null;I&&(I[1]=hl),this.hitDetectionInstructions.push([an.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,b,I,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?hl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||ik,justify:n.justify,textBaseline:n.textBaseline||S3,scale:n.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=k3[i.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([an.DRAW_CHARS,e,n,c,i.overflow,a,i.maxAngle,l,u,s,f*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([an.DRAW_CHARS,e,n,c,i.overflow,a&&hl,i.maxAngle,l,u,s,f*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=ud(o.getColor()||hl)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const x=a.getLineDash(),b=a.getLineDashOffset(),T=a.getWidth(),A=a.getMiterLimit();s.lineCap=a.getLineCap()||Uw,s.lineDash=x?x.slice():Zf,s.lineDashOffset=b===void 0?Jf:b,s.lineJoin=a.getLineJoin()||Gw,s.lineWidth=T===void 0?sk:T,s.miterLimit=A===void 0?nk:A,s.strokeStyle=ud(a.getColor()||rk)}r=this.textState_;const l=e.getFont()||Hae;Lke(l);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||S3,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Ay,r.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),g=e.getKeepUpright(),v=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=v===void 0?0:v,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:_n(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+_n(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const vAe={Circle:vX,Default:CA,Image:fAe,LineString:pAe,Polygon:vX,Text:yAe};class _Ae{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const s=r[i].finish();e[n][i]=s}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[n];if(s===void 0){const o=vAe[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=s}return s}}function xAe(t,e,n,r,i,s,o,a,l,c,u,h,f=!0){let g=t[e],v=t[e+1],x=0,b=0,T=0,A=0;function I(){x=g,b=v,e+=r,g=t[e],v=t[e+1],A+=T,T=Math.sqrt((g-x)*(g-x)+(v-b)*(v-b))}do I();while(e<n-r&&A+T<s);let P=T===0?0:(s-A)/T;const M=Zl(x,g,P),F=Zl(b,v,P),C=e-r,N=A,O=s+a*l(c,i,u);for(;e<n-r&&A+T<O;)I();P=T===0?0:(O-A)/T;const j=Zl(x,g,P),V=Zl(b,v,P);let G=!1;if(f)if(h){const $e=[M,F,j,V];$z($e,0,4,2,h,$e,$e),G=$e[0]>$e[2]}else G=M>j;const U=Math.PI,fe=[],Re=C+r===e;e=C,T=0,A=N,g=t[e],v=t[e+1];let Be;if(Re){I(),Be=Math.atan2(v-b,g-x),G&&(Be+=Be>0?-U:U);const $e=(j+M)/2,pe=(V+F)/2;return fe[0]=[$e,pe,(O-s)/2,Be,i],fe}i=i.replace(/\n/g," ");for(let $e=0,pe=i.length;$e<pe;){I();let De=Math.atan2(v-b,g-x);if(G&&(De+=De>0?-U:U),Be!==void 0){let le=De-Be;if(le+=le>U?-2*U:le<-U?2*U:0,Math.abs(le)>o)return null}Be=De;const Me=$e;let Q=0;for(;$e<pe;++$e){const le=G?pe-$e-1:$e,ve=a*l(c,i[le],u);if(e+r<n&&A+T<s+Q+ve/2)break;Q+=ve}if($e===Me)continue;const W=G?i.substring(pe-Me,pe-$e):i.substring(Me,$e);P=T===0?0:(s+Q/2-A)/T;const ne=Zl(x,g,P),ie=Zl(b,v,P);fe.push([ne,ie,Q/2,De,W]),s+=Q}return fe}class ale{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(b3(),{get:(e,n)=>{if(typeof b3()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const s=n[r];if(typeof s=="function"){s(e);continue}const o=n[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Zv=Fa(),Zp=[],nf=[],rf=[],Jp=[];function _X(t){return t[3].declutterBox}const xX=new RegExp("[-----]");function p6(t,e){return e==="start"?e=xX.test(t)?"right":"left":e==="end"&&(e=xX.test(t)?"left":"right"),k3[e]}function wAe(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function bAe(t,e,n){return n%2===0&&(t+=e),t}class EAe{constructor(e,n,r,i,s){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=zs(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new ale:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const s=e+n+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?k3[l.justify]:p6(Array.isArray(e)?e[0]:e,l.textAlign||ik),f=i&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(wAe,[]),{width:v,height:x,widths:b,heights:T,lineWidths:A}=$ke(l,g),I=v+f,P=[],M=(I+2)*u[0],F=(x+f)*u[1],C={width:M<0?Math.floor(M):Math.ceil(M),height:F<0?Math.floor(F):Math.ceil(F),contextInstructions:P};(u[0]!=1||u[1]!=1)&&P.push("scale",u),i&&(P.push("strokeStyle",o.strokeStyle),P.push("lineWidth",f),P.push("lineCap",o.lineCap),P.push("lineJoin",o.lineJoin),P.push("miterLimit",o.miterLimit),P.push("setLineDash",[o.lineDash]),P.push("lineDashOffset",o.lineDashOffset)),r&&P.push("fillStyle",a.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const N=.5-h;let O=h*I+N*f;const j=[],V=[];let G=0,U=0,fe=0,Re=0,Be;for(let $e=0,pe=g.length;$e<pe;$e+=2){const De=g[$e];if(De===`
`){U+=G,G=0,O=h*I+N*f,++Re;continue}const Me=g[$e+1]||l.font;Me!==Be&&(i&&j.push("font",Me),r&&V.push("font",Me),Be=Me),G=Math.max(G,T[fe]);const Q=[De,O+N*b[fe]+h*(b[fe]-A[Re]),.5*(f+G)+U];O+=b[fe],i&&j.push("strokeText",Q),r&&V.push("fillText",Q),++fe}return Array.prototype.push.apply(P,j),Array.prototype.push.apply(P,V),this.labels_[s]=C,C}replayTextBackground_(e,n,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,s,o,a,l,c,u,h,f,g,v,x,b){a*=f[0],l*=f[1];let T=r-a,A=i-l;const I=s+c>e?e-c:s,P=o+u>n?n-u:o,M=v[3]+I*f[0]+v[1],F=v[0]+P*f[1]+v[2],C=T-v[3],N=A-v[0];(x||h!==0)&&(Zp[0]=C,Jp[0]=C,Zp[1]=N,nf[1]=N,nf[0]=C+M,rf[0]=nf[0],rf[1]=N+F,Jp[1]=rf[1]);let O;return h!==0?(O=au(zs(),r,i,1,1,h,-r,-i),Yi(O,Zp),Yi(O,nf),Yi(O,rf),Yi(O,Jp),ap(Math.min(Zp[0],nf[0],rf[0],Jp[0]),Math.min(Zp[1],nf[1],rf[1],Jp[1]),Math.max(Zp[0],nf[0],rf[0],Jp[0]),Math.max(Zp[1],nf[1],rf[1],Jp[1]),Zv)):ap(Math.min(C,C+M),Math.min(N,N+F),Math.max(C,C+M),Math.max(N,N+F),Zv),g&&(T=Math.round(T),A=Math.round(A)),{drawImageX:T,drawImageY:A,drawImageW:I,drawImageH:P,originX:c,originY:u,declutterBox:{minX:Zv[0],minY:Zv[1],maxX:Zv[2],maxY:Zv[3],value:b},canvasTransform:O,scale:f}}replayImageOrLabel_(e,n,r,i,s,o,a){const l=!!(o||a),c=i.declutterBox,u=a?a[2]*i.scale[0]/2:0;return c.minX-u<=n[0]&&c.maxX+u>=0&&c.minY-u<=n[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,Zp,nf,rf,Jp,o,a),jke(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=Yi(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const s=this.textStates[n],o=this.createLabel(e,n,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=p6(Array.isArray(e)?e[0]:e,s.textAlign||ik),u=k3[s.textBaseline||S3],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],g=c*f+2*(.5-c)*h,v=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:g,anchorY:v}}execute_(e,n,r,i,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&xp(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=pd(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Aae(this.renderedTransform_,r));let h=0;const f=i.length;let g=0,v,x,b,T,A,I,P,M,F,C,N,O,j,V=0,G=0;const U=this.coordinateCache_,fe=this.viewRotation_,Re=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Be={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:fe},$e=this.instructions!=i||this.overlaps?0:200;let pe,De,Me,Q;for(;h<f;){const W=i[h];switch(W[0]){case an.BEGIN_GEOMETRY:pe=W[1],Q=W[3],pe.getGeometry()?a!==void 0&&!ia(a,Q.getExtent())?h=W[2]+1:++h:h=W[2],c&&(c.zIndex=W[4]);break;case an.BEGIN_PATH:V>$e&&(this.fill_(e),V=0),G>$e&&(e.stroke(),G=0),!V&&!G&&(e.beginPath(),A=NaN,I=NaN),++h;break;case an.CIRCLE:g=W[1];const ie=u[g],le=u[g+1],ve=u[g+2],qe=u[g+3],Ke=ve-ie,Se=qe-le,we=Math.sqrt(Ke*Ke+Se*Se);e.moveTo(ie+we,le),e.arc(ie,le,we,0,2*Math.PI,!0),++h;break;case an.CLOSE_PATH:e.closePath(),++h;break;case an.CUSTOM:g=W[1],v=W[2];const Dt=W[3],Ye=W[4],sn=W[5];Be.geometry=Dt,Be.feature=pe,h in U||(U[h]=[]);const $t=U[h];sn?sn(u,g,v,2,$t):($t[0]=u[g],$t[1]=u[g+1],$t.length=2),c&&(c.zIndex=W[6]),Ye($t,Be),++h;break;case an.DRAW_IMAGE:g=W[1],v=W[2],F=W[3],x=W[4],b=W[5];let fn=W[6];const yn=W[7],dt=W[8],ur=W[9],jn=W[10];let Un=W[11];const Qr=W[12];let go=W[13];T=W[14]||"declutter";const Ar=W[15];if(!F&&W.length>=20){C=W[19],N=W[20],O=W[21],j=W[22];const Ve=this.drawLabelWithPointPlacement_(C,N,O,j);F=Ve.label,W[3]=F;const ee=W[23];x=(Ve.anchorX-ee)*this.pixelRatio,W[4]=x;const ge=W[24];b=(Ve.anchorY-ge)*this.pixelRatio,W[5]=b,fn=F.height,W[6]=fn,go=F.width,W[13]=go}let Ti;W.length>25&&(Ti=W[25]);let Cs,wt,Xn;W.length>17?(Cs=W[16],wt=W[17],Xn=W[18]):(Cs=Ay,wt=null,Xn=null),jn&&Re?Un+=fe:!jn&&!Re&&(Un-=fe);let hr=0;for(;g<v;g+=2){if(Ti&&Ti[hr++]<go/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(F.width,F.height,u[g],u[g+1],go,fn,x,b,dt,ur,Un,Qr,s,Cs,!!wt||!!Xn,pe),ee=[e,n,F,Ve,yn,wt,Xn];if(l){let ge,Le,Je;if(Ar){const et=v-g;if(!Ar[et]){Ar[et]={args:ee,declutterMode:T};continue}const Mt=Ar[et];ge=Mt.args,Le=Mt.declutterMode,delete Ar[et],Je=_X(ge)}let ze,nt;if(ge&&(Le!=="declutter"||!l.collides(Je))&&(ze=!0),(T!=="declutter"||!l.collides(Ve.declutterBox))&&(nt=!0),Le==="declutter"&&T==="declutter"){const et=ze&&nt;ze=et,nt=et}ze&&(Le!=="none"&&l.insert(Je),this.replayImageOrLabel_.apply(this,ge)),nt&&(T!=="none"&&l.insert(Ve.declutterBox),this.replayImageOrLabel_.apply(this,ee))}else this.replayImageOrLabel_.apply(this,ee)}++h;break;case an.DRAW_CHARS:const Ft=W[1],Ln=W[2],Qt=W[3],Lo=W[4];j=W[5];const Vi=W[6],Ms=W[7],Mn=W[8];O=W[9];const ki=W[10];C=W[11],Array.isArray(C)&&(C=C.reduce(bAe,"")),N=W[12];const He=[W[13],W[13]];T=W[14]||"declutter";const ke=W[15],Ae=this.textStates[N],rn=Ae.font,z=[Ae.scale[0]*Ms,Ae.scale[1]*Ms];let bt;rn in this.widths_?bt=this.widths_[rn]:(bt={},this.widths_[rn]=bt);const Y=Gz(u,Ft,Ln,2),ae=Math.abs(z[0])*oX(rn,C,bt);if(Lo||ae<=Y){const Ve=this.textStates[N].textAlign,ee=(Y-ae)*p6(C,Ve),ge=xAe(u,Ft,Ln,2,C,ee,Vi,Math.abs(z[0]),oX,rn,bt,Re?0:this.viewRotation_,ke);e:if(ge){const Le=[];let Je,ze,nt,et,Mt;if(O)for(Je=0,ze=ge.length;Je<ze;++Je){Mt=ge[Je],nt=Mt[4],et=this.createLabel(nt,N,"",O),x=Mt[2]+(z[0]<0?-ki:ki),b=Qt*et.height+(.5-Qt)*2*ki*z[1]/z[0]-Mn;const zt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,x,b,0,0,Mt[3],He,!1,Ay,!1,pe);if(l&&T==="declutter"&&l.collides(zt.declutterBox))break e;Le.push([e,n,et,zt,1,null,null])}if(j)for(Je=0,ze=ge.length;Je<ze;++Je){Mt=ge[Je],nt=Mt[4],et=this.createLabel(nt,N,j,""),x=Mt[2],b=Qt*et.height-Mn;const zt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,x,b,0,0,Mt[3],He,!1,Ay,!1,pe);if(l&&T==="declutter"&&l.collides(zt.declutterBox))break e;Le.push([e,n,et,zt,1,null,null])}l&&T!=="none"&&l.load(Le.map(_X));for(let zt=0,gn=Le.length;zt<gn;++zt)this.replayImageOrLabel_.apply(this,Le[zt])}}++h;break;case an.END_GEOMETRY:if(o!==void 0){pe=W[1];const Ve=o(pe,Q,T);if(Ve)return Ve}++h;break;case an.FILL:$e?V++:this.fill_(e),++h;break;case an.MOVE_TO_LINE_TO:for(g=W[1],v=W[2],De=u[g],Me=u[g+1],e.moveTo(De,Me),A=De+.5|0,I=Me+.5|0,g+=2;g<v;g+=2)De=u[g],Me=u[g+1],P=De+.5|0,M=Me+.5|0,(g==v-2||P!==A||M!==I)&&(e.lineTo(De,Me),A=P,I=M);++h;break;case an.SET_FILL_STYLE:this.alignAndScaleFill_=W[2],V&&(this.fill_(e),V=0,G&&(e.stroke(),G=0)),e.fillStyle=W[1],++h;break;case an.SET_STROKE_STYLE:G&&(e.stroke(),G=0),this.setStrokeStyle_(e,W),++h;break;case an.STROKE:$e?G++:e.stroke(),++h;break;default:++h;break}}V&&this.fill_(e),G&&e.stroke()}execute(e,n,r,i,s,o){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,s)}}const my=["Polygon","Circle","LineString","Image","Text","Default"],lle=["Image","Text"],SAe=my.filter(t=>!lle.includes(t));class TAe{constructor(e,n,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=zs(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new EAe(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,s,o){i=Math.round(i);const a=i*2+1,l=au(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=As(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Fa(),GS(h,e),ld(h,n*(this.renderBuffer_+i),h));const f=kAe(i);let g;function v(M,F,C){const N=u.getImageData(0,0,a,a).data;for(let O=0,j=f.length;O<j;O++)if(N[f[O]]>0){if(!o||C==="none"||g!=="Image"&&g!=="Text"||o.includes(M)){const V=(f[O]-3)/4,G=i-V%a,U=i-(V/a|0),fe=s(M,F,G*G+U*U);if(fe)return fe}u.clearRect(0,0,a,a);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(qf);let b,T,A,I,P;for(b=x.length-1;b>=0;--b){const M=x[b].toString();for(A=this.executorsByZIndex_[M],T=my.length-1;T>=0;--T)if(g=my[T],I=A[g],I!==void 0&&(P=I.executeHitDetection(u,l,r,v,h),P))return P}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],s=n[2],o=n[3],a=[r,i,r,o,s,o,s,i];return pd(a,0,8,2,e,a),a}isEmpty(){return f1(this.executorsByZIndex_)}execute(e,n,r,i,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?aTe:qf),o=o||my;const c=my.length;for(let u=0,h=l.length;u<h;++u){const f=l[u].toString(),g=this.executorsByZIndex_[f];for(let v=0,x=o.length;v<x;++v){const b=o[v],T=g[b];if(T!==void 0){const A=a===null?void 0:T.getZIndexContext(),I=A?A.getContext():e,P=this.maxExtent_&&b!=="Image"&&b!=="Text";if(P&&(I.save(),this.clip(I,r)),!A||b==="Text"||b==="Image"?T.execute(I,n,r,i,s,a):A.pushFunction(M=>T.execute(M,n,r,i,s,a)),P&&I.restore(),A){A.offset();const M=l[u]*c+my.indexOf(b);this.deferredZIndexContexts_[M]||(this.deferredZIndexContexts_[M]=[]),this.deferredZIndexContexts_[M].push(A)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(qf);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[r]].length=0}}const m6={};function kAe(t){if(m6[t]!==void 0)return m6[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return m6[t]=i,i}function wX(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}let MA=class cle extends p5{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;cr(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||_n(o)),cr(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),cr(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Vt.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Vt.LOADED:Vt.IDLE:l=Vt.LOADING:l=Vt.LOADED),this.color_=e.color!==void 0?lu(e.color):null,this.iconImage_=E3(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(wX(g[0],g[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(wX(c,u,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new cle({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=E3(null,e,this.crossOrigin_,Vt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Vt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Vt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(An.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(An.CHANGE,e)}ready(){return this.iconImage_.ready()}};const id=.5;function AAe(t,e,n,r,i,s,o,a,l){const c=i,u=t[0]*id,h=t[1]*id,f=As(u,h);f.imageSmoothingEnabled=!1;const g=f.canvas,v=new Vke(f,id,i,null,o,a,null),x=n.length,b=Math.floor((256*256*256-1)/x),T={};for(let I=1;I<=x;++I){const P=n[I-1],M=P.getStyleFunction()||r;if(!M)continue;let F=M(P,s);if(!F)continue;Array.isArray(F)||(F=[F]);const N=(I*b).toString(16).padStart(7,"#00000");for(let O=0,j=F.length;O<j;++O){const V=F[O],G=V.getGeometryFunction()(P);if(!G||!ia(c,G.getExtent()))continue;const U=V.clone(),fe=U.getFill();fe&&fe.setColor(N);const Re=U.getStroke();Re&&(Re.setColor(N),Re.setLineDash(null)),U.setText(void 0);const Be=V.getImage();if(Be){const Me=Be.getImageSize();if(!Me)continue;const Q=As(Me[0],Me[1],void 0,{alpha:!1}),W=Q.canvas;Q.fillStyle=N,Q.fillRect(0,0,W.width,W.height),U.setImage(new MA({img:W,anchor:Be.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Be.getOrigin(),opacity:1,size:Be.getSize(),scale:Be.getScale(),rotation:Be.getRotation(),rotateWithView:Be.getRotateWithView()}))}const $e=U.getZIndex()||0;let pe=T[$e];pe||(pe={},T[$e]=pe,pe.Polygon=[],pe.Circle=[],pe.LineString=[],pe.Point=[]);const De=G.getType();if(De==="GeometryCollection"){const Me=G.getGeometriesArrayRecursive();for(let Q=0,W=Me.length;Q<W;++Q){const ne=Me[Q];pe[ne.getType().replace("Multi","")].push(ne,U)}}else pe[De.replace("Multi","")].push(G,U)}}const A=Object.keys(T).map(Number).sort(qf);for(let I=0,P=A.length;I<P;++I){const M=T[A[I]];for(const F in M){const C=M[F];for(let N=0,O=C.length;N<O;N+=2){v.setStyle(C[N+1]);for(let j=0,V=e.length;j<V;++j)v.setTransform(e[j]),v.drawGeometry(C[N])}}}return f.getImageData(0,0,g.width,g.height)}function IAe(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*id),s=Math.floor(Math.round(t[1])*id),o=(ni(i,0,n.width-1)+ni(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&r.push(e[u/h-1])}return r}class WS extends gh{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}const PAe=5;class ule extends kA{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=PAe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return xn()}getData(e){return null}prepareFrame(e){return xn()}renderFrame(e,n){return xn()}forEachFeatureAtCoordinate(e,n,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Vt.LOADED||n.getState()===Vt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Vt.LOADED&&n!=Vt.ERROR&&e.addEventListener(An.CHANGE,this.boundHandleImageChange_),n==Vt.IDLE&&(e.load(),n=e.getState()),n==Vt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const bX=[];let C_=null;function RAe(){C_=As(1,1,void 0,{willReadFrequently:!0})}class eU extends ule{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=zs(),this.pixelTransform=zs(),this.inversePixelTransform=zs(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){C_||RAe(),C_.clearRect(0,0,1,1);let i;try{C_.drawImage(e,n,r,1,1,0,0,1,1),i=C_.getImageData(0,0,1,1).data}catch{return C_=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&xp(lu(e.style.backgroundColor),lu(r)))){const a=e.firstElementChild;Km(a)&&(o=a.getContext("2d"))}if(o&&QTe(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=rc?Fae():document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=As();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=Z1(r),s=s5(r),o=i5(r),a=r5(r);Yi(n.coordinateToPixelTransform,i),Yi(n.coordinateToPixelTransform,s),Yi(n.coordinateToPixelTransform,o),Yi(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Yi(l,i),Yi(l,s),Yi(l,o),Yi(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(qn(r)/i*o),l=Math.round(Ts(r)/i*o);au(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),ek(this.inversePixelTransform,this.pixelTransform);const c=JTe(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const s=new WS(e,this.inversePixelTransform,r,n);i.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(io.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(io.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ale),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(io.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(io.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,s,o,a){const l=s/2,c=o/2,u=i/n,h=-u,f=-e[0]+a,g=-e[1];return au(this.tempTransform,l,c,u,h,-r,f,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class CAe extends eU{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Fa(),this.wrappedRenderedExtent_=Fa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),g=n.pixelRatio,v=n.viewHints,x=!(v[bs.ANIMATING]||v[bs.INTERACTING]),b=this.context,T=Math.round(qn(i)/a*g),A=Math.round(Ts(i)/a*g),I=h.getWrapX()&&l.canWrapX(),P=I?qn(u):null,M=I?Math.ceil((i[2]-u[2])/P)+1:1;let F=I?Math.floor((i[0]-u[0])/P):0;do{let C=this.getRenderTransform(o,a,0,g,T,A,F*P);n.declutter&&(C=C.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],C,c,x,r===void 0?my:r?lle:SAe,r?f&&n.declutter[f]:void 0)}while(++F<M)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=As(this.context.canvas.width,this.context.canvas.height,bX))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,d5(this.context),bX.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(io.PRERENDER)||this.getLayer().hasListener(io.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=cd(r.extent);a=ia(l,e.extent),this.clipped_=a&&!Wm(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=r[0]*id,f=r[1]*id;u.push(this.getRenderTransform(i,s,o,id,h,f,0).slice());const g=c.getSource(),v=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Wm(v,l)){let x=l[0];const b=qn(v);let T=0,A;for(;x<v[0];)--T,A=b*T,u.push(this.getRenderTransform(i,s,o,id,h,f,A).slice()),x+=b;for(T=0,x=l[2];x>v[2];)++T,A=b*T,u.push(this.getRenderTransform(i,s,o,id,h,f,A).slice()),x-=b}this.hitDetectionImageData_=AAe(r,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,aX(s,this.renderedPixelRatio_))}n(IAe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,v){const x=_n(f),b=c[x];if(b){if(b!==!0&&v<b.distanceSq){if(v===0)return c[x]=!0,s.splice(s.lastIndexOf(b),1),i(f,l,g);b.geometry=g,b.distanceSq=v}}else{if(v===0)return c[x]=!0,i(f,l,g);s.push(c[x]={feature:f,layer:l,geometry:g,distanceSq:v,callback:i})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,u,h?n.declutter?.[h]?.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[bs.ANIMATING],s=e.viewHints[bs.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,f=e.pixelRatio,g=n.getRevision(),v=n.getRenderBuffer();let x=n.getRenderOrder();x===void 0&&(x=Uke);const b=c.center.slice(),T=ld(l,v*h),A=T.slice(),I=[T.slice()],P=u.getExtent();if(r.getWrapX()&&u.canWrapX()&&!Wm(P,e.extent)){const fe=qn(P),Re=Math.max(qn(T)/2,fe);T[0]=P[0]-Re,T[2]=P[2]+Re,mae(b,u);const Be=uae(I[0],u);Be[0]<P[0]&&Be[2]<P[2]?I.push([Be[0]+fe,Be[1],Be[2]+fe,Be[3]]):Be[0]>P[0]&&Be[2]>P[2]&&I.push([Be[0]-fe,Be[1],Be[2]-fe,Be[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&Wm(this.wrappedRenderedExtent_,T))return xp(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new _Ae(Xae(h,f),T,h,f);let F;for(let fe=0,Re=I.length;fe<Re;++fe)r.loadFeatures(I[fe],h,u);const C=aX(h,f);let N=!0;const O=(fe,Re)=>{let Be;const $e=fe.getStyleFunction()||n.getStyleFunction();if($e&&(Be=$e(fe,h)),Be){const pe=this.renderFeature(fe,C,Be,M,F,this.getLayer().getDeclutter(),Re);N=N&&!pe}},j=Tae(T),V=r.getFeaturesInExtent(j);x&&V.sort(x);for(let fe=0,Re=V.length;fe<Re;++fe)O(V[fe],fe);this.renderedFeatures_=V,this.ready=N;const G=M.finish(),U=new TAe(T,h,f,r.getOverlaps(),G,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=T,this.renderedCenter_=b,this.renderedProjection_=u,this.renderedPixelRatio_=f,this.replayGroup_=U,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,u=r.length;c<u;++c)l=lX(i,e,r[c],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=lX(i,e,r,n,this.boundHandleStyleImageChange_,s,o,a);return l}}let Q1=0;const Ss=1<<Q1++,Wt=1<<Q1++,Fs=1<<Q1++,bi=1<<Q1++,El=1<<Q1++,Xc=1<<Q1++,nR=Math.pow(2,Q1)-1,tU={[Ss]:"boolean",[Wt]:"number",[Fs]:"string",[bi]:"color",[El]:"number[]",[Xc]:"size"},MAe=Object.keys(tU).map(Number).sort(qf);function NAe(t){return t in tU}function px(t){const e=[];for(const n of MAe)YE(t,n)&&e.push(tU[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function YE(t,e){return(t&e)===e}function Jh(t,e){return t===e}class $s{constructor(e,n){if(!NAe(e))throw new Error(`literal expressions must have a specific type, got ${px(e)}`);this.type=e,this.value=n}}class hle{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function nU(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function oo(t,e,n){switch(typeof t){case"boolean":{if(Jh(e,Fs))return new $s(Fs,t?"true":"false");if(!YE(e,Ss))throw new Error(`got a boolean, but expected ${px(e)}`);return new $s(Ss,t)}case"number":{if(Jh(e,Xc))return new $s(Xc,Ma(t));if(Jh(e,Ss))return new $s(Ss,!!t);if(Jh(e,Fs))return new $s(Fs,t.toString());if(!YE(e,Wt))throw new Error(`got a number, but expected ${px(e)}`);return new $s(Wt,t)}case"string":{if(Jh(e,bi))return new $s(bi,qz(t));if(Jh(e,Ss))return new $s(Ss,!!t);if(!YE(e,Fs))throw new Error(`got a string, but expected ${px(e)}`);return new $s(Fs,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return BAe(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(Jh(e,Xc)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new $s(Xc,t)}if(Jh(e,bi)){if(t.length===3)return new $s(bi,[...t,1]);if(t.length===4)return new $s(bi,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!YE(e,El))throw new Error(`got an array of numbers, but expected ${px(e)}`);return new $s(El,t)}const Te={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},OAe={[Te.Get]:En(Dn(1,1/0),EX),[Te.Var]:En(Dn(1,1),LAe),[Te.Has]:En(Dn(1,1/0),EX),[Te.Id]:En(DAe,Jv),[Te.Concat]:En(Dn(2,1/0),xr(Fs)),[Te.GeometryType]:En($Ae,Jv),[Te.LineMetric]:En(Jv),[Te.Resolution]:En(g6,Jv),[Te.Zoom]:En(g6,Jv),[Te.Time]:En(g6,Jv),[Te.Any]:En(Dn(2,1/0),xr(Ss)),[Te.All]:En(Dn(2,1/0),xr(Ss)),[Te.Not]:En(Dn(1,1),xr(Ss)),[Te.Equal]:En(Dn(2,2),xr(nR)),[Te.NotEqual]:En(Dn(2,2),xr(nR)),[Te.GreaterThan]:En(Dn(2,2),xr(Wt)),[Te.GreaterThanOrEqualTo]:En(Dn(2,2),xr(Wt)),[Te.LessThan]:En(Dn(2,2),xr(Wt)),[Te.LessThanOrEqualTo]:En(Dn(2,2),xr(Wt)),[Te.Multiply]:En(Dn(2,1/0),SX),[Te.Coalesce]:En(Dn(2,1/0),SX),[Te.Divide]:En(Dn(2,2),xr(Wt)),[Te.Add]:En(Dn(2,1/0),xr(Wt)),[Te.Subtract]:En(Dn(2,2),xr(Wt)),[Te.Clamp]:En(Dn(3,3),xr(Wt)),[Te.Mod]:En(Dn(2,2),xr(Wt)),[Te.Pow]:En(Dn(2,2),xr(Wt)),[Te.Abs]:En(Dn(1,1),xr(Wt)),[Te.Floor]:En(Dn(1,1),xr(Wt)),[Te.Ceil]:En(Dn(1,1),xr(Wt)),[Te.Round]:En(Dn(1,1),xr(Wt)),[Te.Sin]:En(Dn(1,1),xr(Wt)),[Te.Cos]:En(Dn(1,1),xr(Wt)),[Te.Atan]:En(Dn(1,2),xr(Wt)),[Te.Sqrt]:En(Dn(1,1),xr(Wt)),[Te.Match]:En(Dn(4,1/0),TX,FAe),[Te.Between]:En(Dn(3,3),xr(Wt)),[Te.Interpolate]:En(Dn(6,1/0),TX,VAe),[Te.Case]:En(Dn(3,1/0),jAe,zAe),[Te.In]:En(Dn(2,2),UAe),[Te.Number]:En(Dn(1,1/0),xr(nR)),[Te.String]:En(Dn(1,1/0),xr(nR)),[Te.Array]:En(Dn(1,1/0),xr(Wt)),[Te.Color]:En(Dn(1,4),xr(Wt)),[Te.Band]:En(Dn(1,3),xr(Wt)),[Te.Palette]:En(Dn(2,2),GAe),[Te.ToString]:En(Dn(1,1),xr(Ss|Wt|Fs|bi))};function EX(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=t[s+1];switch(typeof o){case"number":{i[s]=new $s(Wt,o);break}case"string":{i[s]=new $s(Fs,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return i}function LAe(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new $s(Fs,r)]}function DAe(t,e,n){n.featureId=!0}function $Ae(t,e,n){n.geometryType=!0}function g6(t,e,n){n.mapState=!0}function Jv(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Dn(t,e){return function(n,r,i){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${s}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function SX(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=oo(t[s+1],e,n);i[s]=o}return i}function xr(t){return function(e,n,r){const i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=oo(e[o+1],t,r);s[o]=a}return s}}function jAe(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function TX(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function FAe(t,e,n){const r=t.length-1,i=Fs|Wt|Ss,s=oo(t[1],i,n),o=oo(t[t.length-1],e,n),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=oo(t[l+2],s.type,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=oo(t[l+3],o.type,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function VAe(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new $s(Wt,i);let o;try{o=oo(t[2],Wt,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const c=oo(t[l+3],Wt,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=oo(t[l+4],e,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function zAe(t,e,n){const r=oo(t[t.length-1],e,n),i=new Array(t.length-1);for(let s=0;s<i.length-1;s+=2){try{const o=oo(t[s+1],Ss,n);i[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=oo(t[s+2],r.type,n);i[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function UAe(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Fs}else i=Wt;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const l=oo(r[a],i,n);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[oo(t[1],i,n),...s]}function GAe(t,e,n){let r;try{r=oo(t[1],Wt,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let o=0;o<s.length;o++){let a;try{a=oo(i[o],bi,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof $s))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[r,...s]}function En(...t){return function(e,n,r){const i=e[0];let s;for(let o=0;o<t.length;o++){const a=t[o](e,n,r);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new hle(n,i,...s)}}function BAe(t,e,n){const r=t[0],i=OAe[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function rU(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return rU(t.getGeometries()[0]);default:return""}}function dle(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function wp(t,e,n){const r=oo(t,e,n);return hh(r)}function hh(t,e){if(t instanceof $s){if(t.type===bi&&typeof t.value=="string"){const r=qz(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case Te.Number:case Te.String:case Te.Coalesce:return WAe(t);case Te.Get:case Te.Var:case Te.Has:return HAe(t);case Te.Id:return r=>r.featureId;case Te.GeometryType:return r=>r.geometryType;case Te.Concat:{const r=t.args.map(i=>hh(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Te.Resolution:return r=>r.resolution;case Te.Any:case Te.All:case Te.Between:case Te.In:case Te.Not:return KAe(t);case Te.Equal:case Te.NotEqual:case Te.LessThan:case Te.LessThanOrEqualTo:case Te.GreaterThan:case Te.GreaterThanOrEqualTo:return qAe(t);case Te.Multiply:case Te.Divide:case Te.Add:case Te.Subtract:case Te.Clamp:case Te.Mod:case Te.Pow:case Te.Abs:case Te.Floor:case Te.Ceil:case Te.Round:case Te.Sin:case Te.Cos:case Te.Atan:case Te.Sqrt:return YAe(t);case Te.Case:return XAe(t);case Te.Match:return ZAe(t);case Te.Interpolate:return JAe(t);case Te.ToString:return QAe(t);default:throw new Error(`Unsupported operator ${n}`)}}function WAe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hh(t.args[s]);switch(n){case Te.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Te.Number:case Te.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function HAe(t,e){const r=t.args[0].value;switch(t.operator){case Te.Get:return i=>{const s=t.args;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case Te.Var:return i=>i.variables[r];case Te.Has:return i=>{const s=t.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function qAe(t,e){const n=t.operator,r=hh(t.args[0]),i=hh(t.args[1]);switch(n){case Te.Equal:return s=>r(s)===i(s);case Te.NotEqual:return s=>r(s)!==i(s);case Te.LessThan:return s=>r(s)<i(s);case Te.LessThanOrEqualTo:return s=>r(s)<=i(s);case Te.GreaterThan:return s=>r(s)>i(s);case Te.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function KAe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hh(t.args[s]);switch(n){case Te.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case Te.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case Te.Between:return s=>{const o=i[0](s),a=i[1](s),l=i[2](s);return o>=a&&o<=l};case Te.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case Te.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function YAe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hh(t.args[s]);switch(n){case Te.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case Te.Divide:return s=>i[0](s)/i[1](s);case Te.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case Te.Subtract:return s=>i[0](s)-i[1](s);case Te.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const l=i[2](s);return o>l?l:o};case Te.Mod:return s=>i[0](s)%i[1](s);case Te.Pow:return s=>Math.pow(i[0](s),i[1](s));case Te.Abs:return s=>Math.abs(i[0](s));case Te.Floor:return s=>Math.floor(i[0](s));case Te.Ceil:return s=>Math.ceil(i[0](s));case Te.Round:return s=>Math.round(i[0](s));case Te.Sin:return s=>Math.sin(i[0](s));case Te.Cos:return s=>Math.cos(i[0](s));case Te.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Te.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function XAe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=hh(t.args[i]);return i=>{for(let s=0;s<n-1;s+=2)if(r[s](i))return r[s+1](i);return r[n-1](i)}}function ZAe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=hh(t.args[i]);return i=>{const s=r[0](i);for(let o=1;o<n-1;o+=2)if(s===r[o](i))return r[o+1](i);return r[n-1](i)}}function JAe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=hh(t.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,l;for(let c=2;c<n;c+=2){const u=r[c](i);let h=r[c+1](i);const f=Array.isArray(h);if(f&&(h=kke(h)),u>=o)return c===2?h:f?eIe(s,o,a,l,u,h):XE(s,o,a,l,u,h);a=u,l=h}return l}}function QAe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hh(t.args[s]);switch(n){case Te.ToString:return s=>{const o=i[0](s);return t.args[0].type===bi?Kz(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function XE(t,e,n,r,i,s){const o=i-n;if(o===0)return r;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return r+l*(s-r)}function eIe(t,e,n,r,i,s){if(i-n===0)return r;const a=nX(r),l=nX(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[XE(t,e,n,a[0],i,l[0]),XE(t,e,n,a[1],i,l[1]),a[2]+XE(t,e,n,0,i,c),XE(t,e,n,r[3],i,s[3])];return Ake(u)}function tIe(t){return!0}function nIe(t){const e=nU(),n=rIe(t,e),r=dle();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=rU(i.getGeometry())),n(r)}}function kX(t){const e=nU(),n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=S8(t[o],e);const i=dle(),s=new Array(n);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const c=o.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<n;++c){const u=r[c](i);u&&(s[l]=u,l+=1)}return s.length=l,s}}function rIe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const s=t[i],o="filter"in s?wp(s.filter,Ss,e):tIe;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=S8(s.style[c],e)}else a=[S8(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<n;++a){const l=r[a].filter;if(l(i)&&!(t[a].else&&o)){o=!0;for(const c of r[a].styles){const u=c(i);u&&s.push(u)}}}return s}}function S8(t,e){const n=ak(t,"",e),r=lk(t,"",e),i=iIe(t,e),s=sIe(t,e),o=fl(t,"z-index",e);if(!n&&!r&&!i&&!s&&!f1(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new In;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(r){const u=r(l);u&&(c=!1),a.setStroke(u)}if(i){const u=i(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function ak(t,e,n){let r;if(e+"fill-pattern-src"in t)r=cIe(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;r=iU(t,e+"fill-color",n)}if(!r)return null;const i=new sr;return function(s){const o=r(s);return o===Hz?null:(i.setColor(o),i)}}function lk(t,e,n){const r=fl(t,e+"stroke-width",n),i=iU(t,e+"stroke-color",n);if(!r&&!i)return null;const s=Nf(t,e+"stroke-line-cap",n),o=Nf(t,e+"stroke-line-join",n),a=fle(t,e+"stroke-line-dash",n),l=fl(t,e+"stroke-line-dash-offset",n),c=fl(t,e+"stroke-miter-limit",n),u=new Bn;return function(h){if(i){const f=i(h);if(f===Hz)return null;u.setColor(f)}if(r&&u.setWidth(r(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function iIe(t,e){const n="text-",r=Nf(t,n+"value",e);if(!r)return null;const i=ak(t,n,e),s=ak(t,n+"background-",e),o=lk(t,n,e),a=lk(t,n+"background-",e),l=Nf(t,n+"font",e),c=fl(t,n+"max-angle",e),u=fl(t,n+"offset-x",e),h=fl(t,n+"offset-y",e),f=Vx(t,n+"overflow",e),g=Nf(t,n+"placement",e),v=fl(t,n+"repeat",e),x=g5(t,n+"scale",e),b=Vx(t,n+"rotate-with-view",e),T=fl(t,n+"rotation",e),A=Nf(t,n+"align",e),I=Nf(t,n+"justify",e),P=Nf(t,n+"baseline",e),M=Vx(t,n+"keep-upright",e),F=fle(t,n+"padding",e),C=y5(t,n+"declutter-mode"),N=new nu({declutterMode:C});return function(O){if(N.setText(r(O)),i&&N.setFill(i(O)),s&&N.setBackgroundFill(s(O)),o&&N.setStroke(o(O)),a&&N.setBackgroundStroke(a(O)),l&&N.setFont(l(O)),c&&N.setMaxAngle(c(O)),u&&N.setOffsetX(u(O)),h&&N.setOffsetY(h(O)),f&&N.setOverflow(f(O)),g){const j=g(O);if(j!=="point"&&j!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(j)}if(v&&N.setRepeat(v(O)),x&&N.setScale(x(O)),b&&N.setRotateWithView(b(O)),T&&N.setRotation(T(O)),A){const j=A(O);if(j!=="left"&&j!=="center"&&j!=="right"&&j!=="end"&&j!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(j)}if(I){const j=I(O);if(j!=="left"&&j!=="right"&&j!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(j)}if(P){const j=P(O);if(j!=="bottom"&&j!=="top"&&j!=="middle"&&j!=="alphabetic"&&j!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(j)}return F&&N.setPadding(F(O)),M&&N.setKeepUpright(M(O)),N}}function sIe(t,e){return"icon-src"in t?oIe(t,e):"shape-points"in t?aIe(t,e):"circle-radius"in t?lIe(t,e):null}function oIe(t,e){const n="icon-",r=n+"src",i=ple(t[r],r),s=A3(t,n+"anchor",e),o=g5(t,n+"scale",e),a=fl(t,n+"opacity",e),l=A3(t,n+"displacement",e),c=fl(t,n+"rotation",e),u=Vx(t,n+"rotate-with-view",e),h=IX(t,n+"anchor-origin"),f=PX(t,n+"anchor-x-units"),g=PX(t,n+"anchor-y-units"),v=fIe(t,n+"color"),x=hIe(t,n+"cross-origin"),b=dIe(t,n+"offset"),T=IX(t,n+"offset-origin"),A=I3(t,n+"width"),I=I3(t,n+"height"),P=uIe(t,n+"size"),M=y5(t,n+"declutter-mode"),F=new MA({src:i,anchorOrigin:h,anchorXUnits:f,anchorYUnits:g,color:v,crossOrigin:x,offset:b,offsetOrigin:T,height:I,width:A,size:P,declutterMode:M});return function(C){return a&&F.setOpacity(a(C)),l&&F.setDisplacement(l(C)),c&&F.setRotation(c(C)),u&&F.setRotateWithView(u(C)),o&&F.setScale(o(C)),s&&F.setAnchor(s(C)),F}}function aIe(t,e){const n="shape-",r=n+"points",i=n+"radius",s=T8(t[r],r),o=T8(t[i],i),a=ak(t,n,e),l=lk(t,n,e),c=g5(t,n+"scale",e),u=A3(t,n+"displacement",e),h=fl(t,n+"rotation",e),f=Vx(t,n+"rotate-with-view",e),g=I3(t,n+"radius2"),v=I3(t,n+"angle"),x=y5(t,n+"declutter-mode"),b=new m5({points:s,radius:o,radius2:g,angle:v,declutterMode:x});return function(T){return a&&b.setFill(a(T)),l&&b.setStroke(l(T)),u&&b.setDisplacement(u(T)),h&&b.setRotation(h(T)),f&&b.setRotateWithView(f(T)),c&&b.setScale(c(T)),b}}function lIe(t,e){const n="circle-",r=ak(t,n,e),i=lk(t,n,e),s=fl(t,n+"radius",e),o=g5(t,n+"scale",e),a=A3(t,n+"displacement",e),l=fl(t,n+"rotation",e),c=Vx(t,n+"rotate-with-view",e),u=y5(t,n+"declutter-mode"),h=new uo({radius:5,declutterMode:u});return function(f){return s&&h.setRadius(s(f)),r&&h.setFill(r(f)),i&&h.setStroke(i(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function fl(t,e,n){if(!(e in t))return;const r=wp(t[e],Wt,n);return function(i){return T8(r(i),e)}}function Nf(t,e,n){if(!(e in t))return null;const r=wp(t[e],Fs,n);return function(i){return ple(r(i),e)}}function cIe(t,e,n){const r=Nf(t,e+"pattern-src",n),i=AX(t,e+"pattern-offset",n),s=AX(t,e+"pattern-size",n),o=iU(t,e+"color",n);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function Vx(t,e,n){if(!(e in t))return null;const r=wp(t[e],Ss,n);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function iU(t,e,n){if(!(e in t))return null;const r=wp(t[e],bi,n);return function(i){return mle(r(i),e)}}function fle(t,e,n){if(!(e in t))return null;const r=wp(t[e],El,n);return function(i){return NA(r(i),e)}}function A3(t,e,n){if(!(e in t))return null;const r=wp(t[e],El,n);return function(i){const s=NA(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function AX(t,e,n){if(!(e in t))return null;const r=wp(t[e],El,n);return function(i){return gle(r(i),e)}}function g5(t,e,n){if(!(e in t))return null;const r=wp(t[e],El|Wt,n);return function(i){return pIe(r(i),e)}}function I3(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function uIe(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return Ma(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function hIe(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function IX(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function PX(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function dIe(t,e){const n=t[e];if(n!==void 0)return NA(n,e)}function y5(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function fIe(t,e){const n=t[e];if(n!==void 0)return mle(n,e)}function NA(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function ple(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function T8(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function mle(t,e){if(typeof t=="string")return t;const n=NA(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function gle(t,e){const n=NA(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function pIe(t,e){return typeof t=="number"?t:gle(t,e)}const Au={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function RX(t,e,n){return(function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,c=e?0:s[1]*i,u=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+u,g=t[2]-l/2+u,v=t[1]+c/2+h,x=t[3]-c/2+h;f>g&&(f=(g+f)/2,g=f),v>x&&(v=(x+v)/2,x=v);let b=ni(r[0],f,g),T=ni(r[1],v,x);if(o&&n&&i){const A=30*i;b+=-A*Math.log(1+Math.max(0,f-r[0])/A)+A*Math.log(1+Math.max(0,r[0]-g)/A),T+=-A*Math.log(1+Math.max(0,v-r[1])/A)+A*Math.log(1+Math.max(0,r[1]-x)/A)}return[b,T]})}function mIe(t){return t}function yle(t){return Math.pow(t,3)}function z2(t){return 1-yle(1-t)}function gIe(t){return 3*t*t-2*t*t*t}function yIe(t){return t}function sU(t,e,n,r){const i=qn(e)/n[0],s=Ts(e)/n[1];return r?Math.min(t,Math.max(i,s)):Math.min(t,Math.min(i,s))}function oU(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),ni(r,n/2,e*2)}function vIe(t,e,n,r){return e=e!==void 0?e:!0,(function(i,s,o,a){if(i!==void 0){const l=t[0],c=t[t.length-1],u=n?sU(l,n,o,r):l;if(a)return e?oU(i,u,c):ni(i,c,u);const h=Math.min(u,i),f=Math.floor(n5(t,h,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}})}function _Ie(t,e,n,r,i,s){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(o,a,l,c){if(o!==void 0){const u=i?sU(e,i,l,s):e;if(c)return r?oU(o,u,n):ni(o,n,u);const h=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-h),g=-a*(.5-h)+.5,v=Math.min(u,o),x=Math.floor(Math.log(e/v)/Math.log(t)+g),b=Math.max(f,x),T=e/Math.pow(t,b);return ni(T,n,u)}})}function CX(t,e,n,r,i){return n=n!==void 0?n:!0,(function(s,o,a,l){if(s!==void 0){const c=r?sU(t,r,a,i):t;return!n||!l?ni(s,e,c):oU(s,c,e)}})}function aU(t){if(t!==void 0)return 0}function MX(t){if(t!==void 0)return t}function xIe(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function wIe(t){const e=Xf(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const bIe=42,lU=256,y6=0;class sd extends $d{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Lz(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Sae(),e.center&&(e.center=Bu(e.center,this.projection_)),e.extent&&(e.extent=cd(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in Au)delete n[a];this.setProperties(n,!0);const r=SIe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=EIe(e),s=r.constraint,o=TIe(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-n[3]+n[1]-i[1]),a=s/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Bu(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Bu(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const u=arguments[i];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(i===n){r&&rR(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;i<n;++i){const u=arguments[i],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||gIe,callback:r};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=ug(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}kIe(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(bs.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[bs.ANIMATING]>0}getInteracting(){return this.hints_[bs.INTERACTING]>0}cancelAnimations(){this.setHint(bs.ANIMATING,-this.hints_[bs.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&rR(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],g=l.sourceCenter[1],v=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=f+h*(v-f),T=g+h*(x-g);this.targetCenter_=[b,T]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(v,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?ug(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(bs.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&rR(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],Cz(r,e-this.getRotation()),vTe(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-i[0])/s,a=n[1]-e*(n[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&g8(e,this.getProjection())}getCenterInternal(){return this.get(Au.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return Tae(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();cr(n,"The view center is not defined");const r=this.getResolution();cr(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return cr(i!==void 0,"The view rotation is not defined"),f3(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Au.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(cd(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=qn(e)/n[0],i=Ts(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(s){return n/Math.pow(e,s*i)})}getRotation(){return this.get(Au.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/n;return(function(o){return Math.log(r/o)/n/s})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=v6(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const s=n5(this.resolutions_,e,1);n=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=ni(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ni(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(cr(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){cr(!j2(e),"Cannot fit empty extent provided as `geometry`");const i=cd(e,this.getProjection());r=uX(i)}else if(e.getType()==="Circle"){const i=cd(e.getExtent(),this.getProjection());r=uX(i),r.rotate(this.getRotation(),ch(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=s.length;h<f;h+=o){const g=s[h]*r-s[h+1]*i,v=s[h]*i+s[h+1]*r;a=Math.min(a,g),l=Math.min(l,v),c=Math.max(c,g),u=Math.max(u,v)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=ch(a);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const g=f[0]*h-f[1]*u,v=f[1]*h+f[0]*u,x=this.getConstrainedCenter([g,v],l),b=n.callback?n.callback:JT;n.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:n.duration,easing:n.easing},b):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),rR(b,!0))}centerOn(e,n,r){this.centerOnInternal(Bu(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(v6(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=v6(e,i,[a[0]/2+o[3],a[1]/2+o[0]],n,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=g8(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Bu(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Bu(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Bu(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(Au.ROTATION)!==i&&this.set(Au.ROTATION,i),this.get(Au.RESOLUTION)!==o&&(this.set(Au.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Au.CENTER)||!m3(this.get(Au.CENTER),a))&&this.set(Au.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!m3(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:z2,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(bs.INTERACTING,1)}endInteraction(e,n,r){r=r&&Bu(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(bs.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function rR(t,e){setTimeout(function(){t(e)},0)}function EIe(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return RX(t.extent,t.constrainOnlyCenter,n)}const e=Lz(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,RX(n,!1,!1)}return mIe}function SIe(t){let e,n,r,o=t.minZoom!==void 0?t.minZoom:y6,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=Lz(t.projection,"EPSG:3857"),g=f.getExtent();let v=t.constrainOnlyCenter,x=t.extent;if(!c&&!x&&f.isGlobal()&&(v=!1,x=g),t.resolutions!==void 0){const b=t.resolutions;n=b[o],r=b[a]!==void 0?b[a]:b[b.length-1],t.constrainResolution?e=vIe(b,u,!v&&x,h):e=CX(n,r,u,!v&&x,h)}else{const T=(g?Math.max(qn(g),Ts(g)):360*Vw.degrees/f.getMetersPerUnit())/lU/Math.pow(2,y6),A=T/Math.pow(2,28-y6);n=t.maxResolution,n!==void 0?o=0:n=T/Math.pow(l,o),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(l,a):r=T/Math.pow(l,a):r=A),a=o+Math.floor(Math.log(n/r)/Math.log(l)),r=n/Math.pow(l,a-o),t.constrainResolution?e=_Ie(l,n,r,u,!v&&x,h):e=CX(n,r,u,!v&&x,h)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:l}}function TIe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?wIe():n===!1?MX:typeof n=="number"?xIe(n):MX}return aU}function kIe(t){return!(t.sourceCenter&&t.targetCenter&&!m3(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function v6(t,e,n,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*r,l+=(n[1]-e[1]/2)*r,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const br={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class vle extends $d{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[br.OPACITY]=e.opacity!==void 0?e.opacity:1,cr(typeof n[br.OPACITY]=="number","Layer opacity must be a number"),n[br.VISIBLE]=e.visible!==void 0?e.visible:!0,n[br.Z_INDEX]=e.zIndex,n[br.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[br.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[br.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[br.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ni(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return xn()}getLayerStatesArray(e){return xn()}getExtent(){return this.get(br.EXTENT)}getMaxResolution(){return this.get(br.MAX_RESOLUTION)}getMinResolution(){return this.get(br.MIN_RESOLUTION)}getMinZoom(){return this.get(br.MIN_ZOOM)}getMaxZoom(){return this.get(br.MAX_ZOOM)}getOpacity(){return this.get(br.OPACITY)}getSourceState(){return xn()}getVisible(){return this.get(br.VISIBLE)}getZIndex(){return this.get(br.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(br.EXTENT,e)}setMaxResolution(e){this.set(br.MAX_RESOLUTION,e)}setMinResolution(e){this.set(br.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(br.MAX_ZOOM,e)}setMinZoom(e){this.set(br.MIN_ZOOM,e)}setOpacity(e){cr(typeof e=="number","Layer opacity must be a number"),this.set(br.OPACITY,e)}setVisible(e){this.set(br.VISIBLE,e)}setZIndex(e){this.set(br.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class OA extends vle{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(br.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(br.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ti(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Hn(e,An.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof sd?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return cU(i,n.viewState)&&(!s||ia(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];const n=this.getSource()?.getAttributions();if(!n)return[];const r=e instanceof sd?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(br.MAP,e)}getMapInternal(){return this.get(br.MAP)}setMap(e){this.mapPrecomposeKey_&&(ti(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ti(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Hn(e,io.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Hn(this,An.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);cr(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(br.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function cU(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}const NX={RENDER_ORDER:"renderOrder"};class v5 extends OA{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(NX.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new sle(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(NX.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?ole:e;const n=AIe(e);this.styleFunction_=e===null?void 0:uAe(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function AIe(t){if(t===void 0)return ole;if(!t)return null;if(typeof t=="function"||t instanceof In)return t;if(!Array.isArray(t))return kX([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof In){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof In))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in n){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return nIe(i)}return kX(t)}class yh extends v5{constructor(e){super(e)}createRenderer(){return new CAe(this)}}const Qp={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Rm extends gh{constructor(e,n){super(e),this.layer=n}}const _6={LAYERS:"layers"};let _5=class _le extends vle{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_6.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Kc(r.slice(),{unique:!0}):cr(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Kc(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ti),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Hn(e,ul.ADD,this.handleLayersAdd_,this),Hn(e,ul.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ti);$2(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const s=n[r];this.registerLayerListeners_(s),this.dispatchEvent(new Rm(Qp.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const n=[Hn(e,jw.PROPERTYCHANGE,this.handleLayerChange_,this),Hn(e,An.CHANGE,this.handleLayerChange_,this)];e instanceof _le&&n.push(Hn(e,Qp.ADDLAYER,this.handleLayerGroupAdd_,this),Hn(e,Qp.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[_n(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new Rm(Qp.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Rm(Qp.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new Rm(Qp.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=_n(n);this.listenerKeys_[r].forEach(ti),delete this.listenerKeys_[r],this.dispatchEvent(new Rm(Qp.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(_6.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Rm(Qp.REMOVELAYER,r[i]))}this.set(_6.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=n.length;o<a;o++){const l=n[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Kf(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}};const ln={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function xle(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function k8(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const P3=34962,uU=34963,IIe=35044,x6=35048,PIe=5121,RIe=5123,CIe=5125,wle=5126,OX=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function MIe(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!pke},e);const n=OX.length;for(let r=0;r<n;++r)try{const i=t.getContext(OX[r],e);if(i)return i}catch{}return null}const NIe={STATIC_DRAW:IIe};class w6{constructor(e,n){this.array_=null,this.type_=e,cr(e===P3||e===uU,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:NIe.STATIC_DRAW}ofSize(e){return this.array_=new(iR(this.type_))(e),this}fromArray(e){return this.array_=iR(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(iR(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=iR(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function iR(t){switch(t){case P3:return Float32Array;case uU:return Uint32Array;default:return Float32Array}}const sR={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},OIe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,LIe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class LX{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||OIe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||LIe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,c=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,c),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=_n(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const df={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},So={UNSIGNED_BYTE:PIe,UNSIGNED_SHORT:RIe,UNSIGNED_INT:CIe,FLOAT:wle},R3={};function DX(t){return"shared/"+t}let $X=0;function DIe(){const t="unique/"+$X;return $X+=1,t}function $Ie(t){let e=R3[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:MIe(n)},R3[t]=e}return e.users+=1,e.context}function jIe(t){const e=R3[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete R3[t]}class FIe extends SA{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?DX(e.canvasCacheKey):DIe(),this.gl_=$Ie(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(sR.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(sR.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=zs(),this.offsetScaleMatrix_=zs(),this.tmpMat4_=xle(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new LX({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new LX({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===DX(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return cr(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const n=this.gl_,r=_n(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=_n(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(sR.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(sR.RESTORED,this.boundHandleWebGLContextRestored_),jIe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(e,n,r){const i=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-e,a=e*s;r.drawElements(r.TRIANGLES,o,i,a)}drawElementsInstanced(e,n,r){const i=this.gl_;this.getExtension("OES_element_index_uint");const s=this.getInstancedRenderingExtension_(),o=i.UNSIGNED_INT,a=4,l=n-e,c=e*a;s.drawElementsInstancedANGLE(i.TRIANGLES,l,o,c,r);for(let u=0;u<this.maxAttributeCount_;u++)s.vertexAttribDivisorANGLE(u,0)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(df.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(df.ZOOM,e.viewState.zoom),this.setUniformFloatValue(df.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(df.PIXEL_RATIO,i),this.setUniformFloatVec2(df.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(df.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(df.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(df.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,k8(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=_n(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=_n(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return au(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,n,r,i,s,o){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,n,r,!1,i,s),o&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,n){const r=VIe(e);let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.name&&this.enableAttributeArray_(o.name,o.size,o.type||wle,r,i,n),i+=o.size*ble(o.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){$2(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,c=0,u=s.RGBA,h=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,n):n?s.texImage2D(s.TEXTURE_2D,a,l,u,h,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,null),r}}function VIe(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*ble(r.type)}return e}function ble(t){switch(t){case So.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case So.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case So.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case So.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class hU extends TA{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(An.CHANGE)}release(){this.setState(ln.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ln.EMPTY){if(this.state!==ln.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){xn()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:yle(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function A8(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const zIe=new Error("disposed"),UIe=[256,256];class jX extends hU{constructor(e){const n=ln.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=A8(this.data_);return e?[e.width,e.height]:UIe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ln.IDLE&&this.state!==ln.ERROR)return;this.state=ln.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=ln.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=ln.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(zIe),this.controller_=null),super.disposeInternal()}}class Ele extends hU{constructor(e,n,r,i,s,o){super(e,n,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,rc?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ln.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=ln.ERROR,this.unlistenImage_(),this.image_=GIe(),this.changed()}handleImageLoad_(){if(rc)this.state=ln.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ln.LOADED:this.state=ln.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==ln.ERROR&&(this.state=ln.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ln.IDLE&&(this.state=ln.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Ike(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function GIe(){const t=As(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}let b6;const zx=[];function FX(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function E6(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function BIe(){if(b6===void 0){const t=As(6,6,zx);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",FX(t,4,5,4,0),FX(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;b6=E6(e,0)||E6(e,4)||E6(e,8),d5(t),zx.push(t.canvas)}return b6}function C3(t,e,n,r){const i=V2(n,e,t);let s=_3(e,r,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||p1(l,i)){const c=_3(t,s,i)/s;isFinite(c)&&c>0&&(s/=c)}return s}function WIe(t,e,n,r){const i=ch(n);let s=C3(t,e,i,r);return(!isFinite(s)||s<=0)&&Rz(n,function(o){return s=C3(t,e,o,r),isFinite(s)&&s>0}),s}function Sle(t,e,n,r,i,s,o,a,l,c,u,h,f,g){const v=As(Math.round(n*t),Math.round(n*e),zx);if(h||(v.imageSmoothingEnabled=!1),l.length===0)return v.canvas;v.scale(n,n);function x(M){return Math.round(M*n)/n}v.globalCompositeOperation="lighter";const b=Fa();l.forEach(function(M,F,C){Pz(b,M.extent)});let T;const A=n/r,I=(h?1:1+Math.pow(2,-24))/A;(!f||l.length!==1||c!==0)&&(T=As(Math.round(qn(b)*A),Math.round(Ts(b)*A),zx),h||(T.imageSmoothingEnabled=!1),l.forEach(function(M,F,C){if(M.image.width>0&&M.image.height>0){if(M.clipExtent){T.save();const G=(M.clipExtent[0]-b[0])*A,U=-(M.clipExtent[3]-b[3])*A,fe=qn(M.clipExtent)*A,Re=Ts(M.clipExtent)*A;T.rect(h?G:Math.round(G),h?U:Math.round(U),h?fe:Math.round(G+fe)-Math.round(G),h?Re:Math.round(U+Re)-Math.round(U)),T.clip()}const N=(M.extent[0]-b[0])*A,O=-(M.extent[3]-b[3])*A,j=qn(M.extent)*A,V=Ts(M.extent)*A;T.drawImage(M.image,c,c,M.image.width-2*c,M.image.height-2*c,h?N:Math.round(N),h?O:Math.round(O),h?j:Math.round(N+j)-Math.round(N),h?V:Math.round(O+V)-Math.round(O)),M.clipExtent&&T.restore()}}));const P=Z1(o);return a.getTriangles().forEach(function(M,F,C){const N=M.source,O=M.target;let j=N[0][0],V=N[0][1],G=N[1][0],U=N[1][1],fe=N[2][0],Re=N[2][1];const Be=x((O[0][0]-P[0])/s),$e=x(-(O[0][1]-P[1])/s),pe=x((O[1][0]-P[0])/s),De=x(-(O[1][1]-P[1])/s),Me=x((O[2][0]-P[0])/s),Q=x(-(O[2][1]-P[1])/s),W=j,ne=V;j=0,V=0,G-=W,U-=ne,fe-=W,Re-=ne;const ie=[[G,U,0,0,pe-Be],[fe,Re,0,0,Me-Be],[0,0,G,U,De-$e],[0,0,fe,Re,Q-$e]],le=yTe(ie);if(!le)return;if(v.save(),v.beginPath(),BIe()||!h){v.moveTo(pe,De);const qe=4,Ke=Be-pe,Se=$e-De;for(let we=0;we<qe;we++)v.lineTo(pe+x((we+1)*Ke/qe),De+x(we*Se/(qe-1))),we!=qe-1&&v.lineTo(pe+x((we+1)*Ke/qe),De+x((we+1)*Se/(qe-1)));v.lineTo(Me,Q)}else v.moveTo(pe,De),v.lineTo(Be,$e),v.lineTo(Me,Q);v.clip(),v.transform(le[0],le[2],le[1],le[3],Be,$e),v.translate(b[0]-W,b[3]-ne);let ve;if(T)ve=T.canvas,v.scale(I,-I);else{const qe=l[0],Ke=qe.extent;ve=qe.image,v.scale(qn(Ke)/ve.width,-Ts(Ke)/ve.height)}v.drawImage(ve,0,0),v.restore()}),T&&(d5(T),zx.push(T.canvas)),u&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,a.getTriangles().forEach(function(M,F,C){const N=M.target,O=(N[0][0]-P[0])/s,j=-(N[0][1]-P[1])/s,V=(N[1][0]-P[0])/s,G=-(N[1][1]-P[1])/s,U=(N[2][0]-P[0])/s,fe=-(N[2][1]-P[1])/s;v.beginPath(),v.moveTo(V,G),v.lineTo(O,j),v.lineTo(U,fe),v.closePath(),v.stroke()}),v.restore()),v.canvas}const HIe=10,VX=.25;class Tle{constructor(e,n,r,i,s,o,a){this.sourceProj_=e,this.targetProj_=n;let l={};const c=a?m8(I=>Yi(a,V2(I,this.targetProj_,this.sourceProj_))):QT(this.targetProj_,this.sourceProj_);this.transformInv_=function(I){const P=I[0]+"/"+I[1];return l[P]||(l[P]=c(I)),l[P]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&qn(i)>=qn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?qn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?qn(this.targetProj_.getExtent()):null;const u=Z1(r),h=s5(r),f=i5(r),g=r5(r),v=this.transformInv_(u),x=this.transformInv_(h),b=this.transformInv_(f),T=this.transformInv_(g),A=HIe+(o?Math.max(0,Math.ceil(Math.log2(l8(r)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,g,v,x,b,T,A),this.wrapsXInSource_){let I=1/0;this.triangles_.forEach(function(P,M,F){I=Math.min(I,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-I>this.sourceWorldWidth_/2){const M=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];M[0][0]-I>this.sourceWorldWidth_/2&&(M[0][0]-=this.sourceWorldWidth_),M[1][0]-I>this.sourceWorldWidth_/2&&(M[1][0]-=this.sourceWorldWidth_),M[2][0]-I>this.sourceWorldWidth_/2&&(M[2][0]-=this.sourceWorldWidth_);const F=Math.min(M[0][0],M[1][0],M[2][0]);Math.max(M[0][0],M[1][0],M[2][0])-F<this.sourceWorldWidth_/2&&(P.source=M)}})}l={}}addTriangle_(e,n,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,n,r]})}addQuad_(e,n,r,i,s,o,a,l,c){const u=o8([s,o,a,l]),h=this.sourceWorldWidth_?qn(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1;let v=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=o8([e,n,r,i]);v=qn(b)/this.targetWorldWidth_>VX||v}!g&&this.sourceProj_.isGlobal()&&h&&(v=h>VX||v)}if(!v&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!ia(u,this.maxSourceExtent_))return;let x=0;if(!v&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)v=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(c>0){if(!v){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(b);let A;g?A=(ug(s[0],f)+ug(a[0],f))/2-ug(T[0],f):A=(s[0]+a[0])/2-T[0];const I=(s[1]+a[1])/2-T[1];v=A*A+I*I>this.errorThresholdSquared_}if(v){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const b=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(b),A=[(i[0]+e[0])/2,(i[1]+e[1])/2],I=this.transformInv_(A);this.addQuad_(e,n,b,A,s,o,T,I,c-1),this.addQuad_(A,b,r,i,I,T,a,l,c-1)}else{const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(b),A=[(r[0]+i[0])/2,(r[1]+i[1])/2],I=this.transformInv_(A);this.addQuad_(e,b,A,i,s,T,I,l,c-1),this.addQuad_(b,n,r,A,T,o,a,I,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,s,a,l),(x&14)==0&&this.addTriangle_(e,r,n,s,a,o),x&&((x&13)==0&&this.addTriangle_(n,i,e,o,l,s),(x&7)==0&&this.addTriangle_(n,i,r,o,l,a))}calculateSourceExtent(){const e=Fa();return this.triangles_.forEach(function(n,r,i){const s=n.source;GS(e,s[0]),GS(e,s[1]),GS(e,s[2])}),e}getTriangles(){return this.triangles_}}const kle=.5;class Ale extends hU{constructor(e,n,r,i,s,o,a,l,c,u,h,f){super(s,ln.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const b=v?Kf(g,v):g;if(l8(b)===0){this.state=ln.EMPTY;return}const T=e.getExtent();T&&(x?x=Kf(x,T):x=T);const A=i.getResolution(this.wrappedTileCoord_[0]),I=WIe(e,r,b,A);if(!isFinite(I)||I<=0){this.state=ln.EMPTY;return}const P=u!==void 0?u:kle;if(this.triangulation_=new Tle(e,r,b,x,I*P,A),this.triangulation_.getTriangles().length===0){this.state=ln.EMPTY;return}this.sourceZ_=n.getZForResolution(I);let M=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(M[1]=ni(M[1],x[1],x[3]),M[3]=ni(M[3],x[1],x[3])):M=Kf(M,x)),!l8(M))this.state=ln.EMPTY;else{let F=0,C=0;e.canWrapX()&&(F=qn(T),C=Math.floor((M[0]-T[0])/F)),hae(M.slice(),e,!0).forEach(O=>{const j=n.getTileRangeForExtentAndZ(O,this.sourceZ_);for(let V=j.minX;V<=j.maxX;V++)for(let G=j.minY;G<=j.maxY;G++){const U=c(this.sourceZ_,V,G,a);if(U){const fe=C*F;this.sourceTiles_.push({tile:U,offset:fe})}}++C}),this.sourceTiles_.length===0&&(this.state=ln.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==ln.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=n.offset,i[2]+=n.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=n.offset,s[2]+=n.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ln.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Sle(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ln.LOADED}this.changed()}load(){if(this.state==ln.IDLE){this.state=ln.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==ln.IDLE||r==ln.LOADING){e++;const i=Hn(n,An.CHANGE,s=>{const o=n.getState();(o==ln.LOADED||o==ln.ERROR||o==ln.EMPTY)&&(ti(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==ln.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ti),this.sourcesListenerKeys_=null}release(){this.canvas_&&(d5(this.canvas_.getContext("2d")),zx.push(this.canvas_),this.canvas_=null),super.release()}}class dU{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Qv(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new dU(t,e,n,r)}class zX{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof SA&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return cr(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return cr(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){cr(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function M3(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function qIe(t,e,n){return t+"/"+e+"/"+n}function NC(t,e,n,r,i){return`${_n(t)},${e},${qIe(n,r,i)}`}function Ile(t){return KIe(t[0],t[1],t[2])}function KIe(t,e,n){return(e<<t)+n}function YIe(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(r,i):!0}class fU extends ule{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=zs(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(br.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(io.PRECOMPOSE)){const i=new WS(io.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(io.POSTCOMPOSE)){const i=new WS(io.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof fU)){n=!0;continue}const u=l.getClassName();if((n||u!==i)&&(r+=1,n=!1),i=u,c===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new FIe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(br.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){au(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new WS(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(io.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(io.POSTRENDER,e,n)}}const S6={TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight"};class XIe{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function ZIe(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function hg(t){const e=t.toString();return e.includes(".")?e:e+".0"}function pU(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(hg).join(", ")})`}function OC(t){const e=lu(t),n=e.length>3?e[3]:1;return pU([e[0]/255,e[1]/255,e[2]/255,n])}function JIe(t){const e=Ma(t);return pU(e)}const T6={};let QIe=0;function ck(t){return t in T6||(T6[t]=QIe++),T6[t]}function Of(t){return hg(ck(t))}function mU(t){return"u_var_"+t}function Ple(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const k6="getBandValue",ePe="u_paletteTextures",Rle="featureId",Cle="geometryType",I8=-9999999;function tPe(t,e,n,r){const i=oo(t,e,n);return gU(i,e,r)}function gr(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=gU(n.args[o],r,e);return t(s,e)}}const nPe={[Te.Get]:(t,e)=>{const r=e.args[0].value;r in t.properties||(t.properties[r]={name:r,type:e.type});let s="a_prop_"+r;return Jh(e.type,Ss)&&(s=`(${s} > 0.0)`),s},[Te.Id]:t=>(t.featureId=!0,"a_"+Rle),[Te.GeometryType]:t=>(t.geometryType=!0,"a_"+Cle),[Te.LineMetric]:()=>"currentLineMetric",[Te.Var]:(t,e)=>{const r=e.args[0].value;r in t.variables||(t.variables[r]={name:r,type:e.type});let s=mU(r);return Jh(e.type,Ss)&&(s=`(${s} > 0.0)`),s},[Te.Has]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${hg(I8)})`},[Te.Resolution]:()=>"u_resolution",[Te.Zoom]:()=>"u_zoom",[Te.Time]:()=>"u_time",[Te.Any]:gr(t=>`(${t.join(" || ")})`),[Te.All]:gr(t=>`(${t.join(" && ")})`),[Te.Not]:gr(([t])=>`(!${t})`),[Te.Equal]:gr(([t,e])=>`(${t} == ${e})`),[Te.NotEqual]:gr(([t,e])=>`(${t} != ${e})`),[Te.GreaterThan]:gr(([t,e])=>`(${t} > ${e})`),[Te.GreaterThanOrEqualTo]:gr(([t,e])=>`(${t} >= ${e})`),[Te.LessThan]:gr(([t,e])=>`(${t} < ${e})`),[Te.LessThanOrEqualTo]:gr(([t,e])=>`(${t} <= ${e})`),[Te.Multiply]:gr(t=>`(${t.join(" * ")})`),[Te.Divide]:gr(([t,e])=>`(${t} / ${e})`),[Te.Add]:gr(t=>`(${t.join(" + ")})`),[Te.Subtract]:gr(([t,e])=>`(${t} - ${e})`),[Te.Clamp]:gr(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[Te.Mod]:gr(([t,e])=>`mod(${t}, ${e})`),[Te.Pow]:gr(([t,e])=>`pow(${t}, ${e})`),[Te.Abs]:gr(([t])=>`abs(${t})`),[Te.Floor]:gr(([t])=>`floor(${t})`),[Te.Ceil]:gr(([t])=>`ceil(${t})`),[Te.Round]:gr(([t])=>`floor(${t} + 0.5)`),[Te.Sin]:gr(([t])=>`sin(${t})`),[Te.Cos]:gr(([t])=>`cos(${t})`),[Te.Atan]:gr(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[Te.Sqrt]:gr(([t])=>`sqrt(${t})`),[Te.Match]:gr(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],o=t[i+1];r=`(${e} == ${s} ? ${o} : ${r||n})`}return r}),[Te.Between]:gr(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[Te.Interpolate]:gr(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let c;t===hg(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[Te.Case]:gr(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[Te.In]:gr(([t,...e],n)=>{const r=ZIe("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[Te.Array]:gr(t=>`vec${t.length}(${t.join(", ")})`),[Te.Color]:gr(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[Te.Band]:gr(([t,e,n],r)=>{if(!(k6 in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${S6.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[k6]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${S6.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${S6.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${k6}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[Te.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let c=0;c<r.length;c++){const u=r[c].value,h=lu(u),f=c*4;s[f]=h[0],s[f+1]=h[1],s[f+2]=h[2],s[f+3]=h[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${ePe}[${t.paletteTextures.length}]`,a=new XIe(o,s);t.paletteTextures.push(a);const l=gU(n,Wt,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function gU(t,e,n){if(t instanceof hle){const r=nPe[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&Wt)>0)return hg(t.value);if((t.type&Ss)>0)return t.value.toString();if((t.type&Fs)>0)return Of(t.value.toString());if((t.type&bi)>0)return OC(t.value);if((t.type&El)>0)return pU(t.value);if((t.type&Xc)>0)return JIe(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${px(e)})`)}function rPe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const UX=.985;function Tn(t,e,n){const r=nU();return tPe(e,n,r,t)}function iPe(t){const e=lu(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const sPe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function yU(t){return t===bi||t===Xc?2:t===El?4:1}function P8(t){const e=yU(t);return e>1?`vec${e}`:"float"}function Mle(t,e){for(const n in e.variables){const r=e.variables[n],i=mU(r.name);let s=P8(r.type);r.type===bi&&(s="vec4"),t.addUniform(i,s)}for(const n in e.properties){const r=e.properties[n],i=P8(r.type),s=`a_prop_${r.name}`;r.type===bi?t.addAttribute(s,i,`unpackColor(${s})`,"vec4"):t.addAttribute(s,i)}for(const n in e.functions)t.addVertexShaderFunction(e.functions[n]),t.addFragmentShaderFunction(e.functions[n])}function Nle(t,e){const n={};for(const r in t.variables){const i=t.variables[r],s=mU(i.name);n[s]=()=>{const o=e[i.name];if(typeof o=="number")return o;if(typeof o=="boolean")return o?1:0;if(i.type===bi){const a=[...lu(o||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??=1,a}return typeof o=="string"?ck(o):o}}return n}function Ole(t){const e={};for(const n in t.properties){const r=t.properties[n],i=s=>{const o=s.get(r.name);return r.type===bi?iPe([...lu(o||"#eee")]):typeof o=="string"?ck(o):typeof o=="boolean"?o?1:0:o};e[`prop_${r.name}`]={size:yU(r.type),callback:i}}return e}const e_=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${sPe}
`,t_=rPe();class Lle{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${hg(t_["circle-radius"])} + ${hg(t_["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=OC(t_["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=hg(t_["stroke-width"]),this.strokeColorExpression_=OC(t_["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Of("round"),this.strokeJoinExpression_=Of("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=OC(t_["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,n){return this.uniforms_.push({name:e,type:n}),this}addAttribute(e,n,r,i){return this.attributes_.push({name:e,type:n,varyingName:e.replace(/^a_/,"v_"),varyingType:i??n,varyingExpression:r??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${UX} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${UX}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Of("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Of("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Of("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Of("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${e_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class N3{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=_n(e),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(e){const n=_n(e),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(e){const n=_n(e),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(e,n){const r=e.getType();switch(r){case"GeometryCollection":{const i=e.getGeometriesArray();for(const s of i)this.addGeometry_(s,n);break}case"MultiPolygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEndss(),n,_n(n),i.getStride());break}case"MultiLineString":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,_n(n),i.getStride());break}case"MultiPoint":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,_n(n),i.getStride());break}case"Polygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,_n(n),i.getStride());break}case"Point":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,_n(n),i.getStride());break}case"LineString":case"LinearRing":{const i=e,s=i.getStride();this.addCoordinates_(r,i.getFlatCoordinates(),null,n,_n(n),s,i.getLayout?.());break}}}addCoordinates_(e,n,r,i,s,o,a){let l;switch(e){case"MultiPolygon":{const c=r;for(let u=0,h=c.length;u<h;u++){let f=c[u];const g=u>0?c[u-1]:null,v=g?g[g.length-1]:0,x=f[f.length-1];f=v>0?f.map(b=>b-v):f,this.addCoordinates_("Polygon",n.slice(v,x),f,i,s,o,a)}break}case"MultiLineString":{const c=r;for(let u=0,h=c.length;u<h;u++){const f=u>0?c[u-1]:0;this.addCoordinates_("LineString",n.slice(f,c[u]),null,i,s,o,a)}break}case"MultiPoint":for(let c=0,u=n.length;c<u;c+=o)this.addCoordinates_("Point",n.slice(c,c+2),null,i,s,null,null);break;case"Polygon":{const c=r;if(i instanceof dl){const f=tle(n,c);if(f.length>1){this.addCoordinates_("MultiPolygon",n,f,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const u=r.length,h=r.map((f,g,v)=>g>0?(f-v[g-1])/o:f/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(oPe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(h),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=u;for(let f=0,g=c.length;f<g;f++){const v=f>0?c[f-1]:0;this.addCoordinates_("LinearRing",n.slice(v,c[f]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(aPe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}removeRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e,n){if(!this.uidToRef_.get(_n(e)))return;this.removeFeature(e);let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}removeFeature(e){let n=this.clearFeatureEntryInPointBatch_(e);n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.removeRef_(n.ref,_n(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const n=new N3;n.globalCounter_=this.globalCounter_,n.uidToRef_=this.uidToRef_,n.refToFeature_=this.refToFeature_;let r=!0;for(const i of this.refToFeature_.values())e(i)&&(n.addFeature(i),r=!1);return r?new N3:n}}function oPe(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function aPe(t,e,n){return e===3&&n==="XYM"?t:e===4?t.filter((r,i)=>i%e!==2):e===3?t.map((r,i)=>i%e!==2?r:0):new Array(t.length*1.5).fill(0).map((r,i)=>i%3===2?0:t[Math.round(i/1.5)])}function lPe(){const t='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function I(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const z=[],B={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function P(t,e,n,r,x){const o=t[e++],i=t[e++],f=z;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),B.instanceAttributesPosition=u,B}function N(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=E(f,[...l]),p=E(f,[...c]);function v(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}let b=-1,M=-1,m=s;const A=null!==x;if(null!==r){b=v(h,p,E(f,[...[t[r],t[r+1]]])),Math.cos(b)<=.985&&(m+=Math.tan((b-Math.PI)/2))}if(A){M=v(p,h,E(f,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((Math.PI-M)/2))}const g=Math.pow(2,24),Z=u%g,d=Math.floor(u/g)*g;return o.push(l[0],l[1],a,c[0],c[1],y,b,M,Z,d,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:m}}function R(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const S="GENERATE_POLYGON_BUFFERS",T="GENERATE_POINT_BUFFERS",_="GENERATE_LINE_STRING_BUFFERS",O=self;O.onmessage=t=>{const e=t.data;switch(e.type){case T:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=P(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);O.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case _:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(I(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=N(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);O.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case S:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=R(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);O.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}const A6={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function cPe(t,e){e=e||[];const n=256,r=n-1,i=Math.floor(t/n/n/n)/r,s=Math.floor(t/n/n)%n/r,o=Math.floor(t/n)%n/r,a=t%n/r;return e[0]=i*256*255+s*255,e[1]=o*256*255+a*255,e}function uPe(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function vU(t,e,n,r){let i=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);let l=a?.[0]??a;l===I8&&console.warn('The "has" operator might return false positives.'),l===void 0?l=I8:l===null&&(l=0),t[r+i++]=l,!(!o.size||o.size===1)&&(t[r+i++]=a[1],!(o.size<3)&&(t[r+i++]=a[2],!(o.size<4)&&(t[r+i++]=a[3])))}return i}function x5(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function hPe(t,e,n,r){const i=(2+x5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++)s[0]=l.flatCoordss[c][0],s[1]=l.flatCoordss[c][1],Yi(r,s),e[o++]=s[0],e[o++]=s[1],o+=vU(e,n,l,o)}return e}function dPe(t,e,n,r){const i=3*t.verticesCount+(1+x5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,pd(l.flatCoordss[c],0,s.length,3,r,s,3),o+=vU(e,n,l,o),e[o++]=s.length/3;for(let h=0,f=s.length;h<f;h+=3)e[o++]=s[h],e[o++]=s[h+1],e[o++]=s[h+2]}}return e}function fPe(t,e,n,r){const i=2*t.verticesCount+(1+x5(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,pd(l.flatCoordss[c],0,s.length,2,r,s),o+=vU(e,n,l,o),e[o++]=l.ringsVerticesCounts[c].length;for(let h=0,f=l.ringsVerticesCounts[c].length;h<f;h++)e[o++]=l.ringsVerticesCounts[c][h];for(let h=0,f=s.length;h<f;h+=2)e[o++]=s[h],e[o++]=s[h+1]}}return e}function O3(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function _U(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=Tn(n,t[`${r}radius`],Wt);if(`${r}radius2`in t){const s=Tn(n,t[`${r}radius2`],Wt);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${Tn(n,t[`${r}stroke-width`],Wt)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=Tn(n,t[`${r}scale`],Xc);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(Tn(n,t[`${r}displacement`],El)),`${r}rotation`in t&&e.setSymbolRotationExpression(Tn(n,t[`${r}rotation`],Wt)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function Dle(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function xU(t,e,n,r,i){const s=new Image;s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],cr(typeof t[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),s.src=t[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`u_texture${i}_size`,"vec2");const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,e.addUniform(`u_texture${i}`,"sampler2D"),o}function wU(t,e,n,r,i){let s=Tn(n,t[`${e}offset`],Xc);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function pPe(t,e,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,_U(t,e,r,"circle-");let i=null;"circle-opacity"in t&&(i=Tn(r,t["circle-opacity"],Wt));let s="coordsPx";"circle-scale"in t&&(s=`coordsPx / ${Tn(r,t["circle-scale"],Xc)}`);let o=null;"circle-fill-color"in t&&(o=Tn(r,t["circle-fill-color"],bi));let a=null;"circle-stroke-color"in t&&(a=Tn(r,t["circle-stroke-color"],bi));let l=Tn(r,t["circle-radius"],Wt),c=null;"circle-stroke-width"in t&&(c=Tn(r,t["circle-stroke-width"],Wt),l=`(${l} + ${c} * 0.5)`);const u=`circleDistanceField(${s}, ${l})`,h=Dle(u,o,a,c,i);e.setSymbolColorExpression(h)}function mPe(t,e,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,_U(t,e,r,"shape-");let i=null;"shape-opacity"in t&&(i=Tn(r,t["shape-opacity"],Wt));let s="coordsPx";"shape-scale"in t&&(s=`coordsPx / ${Tn(r,t["shape-scale"],Xc)}`);let o=null;"shape-fill-color"in t&&(o=Tn(r,t["shape-fill-color"],bi));let a=null;"shape-stroke-color"in t&&(a=Tn(r,t["shape-stroke-color"],bi));let l=null;"shape-stroke-width"in t&&(l=Tn(r,t["shape-stroke-width"],Wt));const c=Tn(r,t["shape-points"],Wt);let u="0.";"shape-angle"in t&&(u=Tn(r,t["shape-angle"],Wt));let h,f=Tn(r,t["shape-radius"],Wt);if(l!==null&&(f=`${f} + ${l} * 0.5`),"shape-radius2"in t){let v=Tn(r,t["shape-radius2"],Wt);l!==null&&(v=`${v} + ${l} * 0.5`),h=`starDistanceField(${s}, ${c}, ${f}, ${v}, ${u})`}else h=`regularDistanceField(${s}, ${c}, ${f}, ${u})`;const g=Dle(h,o,a,l,i);e.setSymbolColorExpression(g)}function gPe(t,e,n,r){let i="vec4(1.0)";"icon-color"in t&&(i=Tn(r,t["icon-color"],bi)),"icon-opacity"in t&&(i=`${i} * vec4(1.0, 1.0, 1.0, ${Tn(r,t["icon-opacity"],Wt)})`);const s=O3(t["icon-src"]),o=xU(t,e,n,"icon-",s);if(e.setSymbolColorExpression(`${i} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(o),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${Tn(r,t["icon-width"],Wt)}, ${Tn(r,t["icon-height"],Wt)})`),"icon-offset"in t&&"icon-size"in t){const a=Tn(r,t["icon-size"],El),l=e.getSymbolSizeExpression();e.setSymbolSizeExpression(a);const c=wU(t,"icon-",r,"v_quadSizePx",a);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(_U(t,e,r,"icon-"),"icon-anchor"in t){const a=Tn(r,t["icon-anchor"],El);let l="1.0";"icon-scale"in t&&(l=Tn(r,t["icon-scale"],Xc));let c;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:t["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let u=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":u=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":u=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":u=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${u}`)}}function yPe(t,e,n,r){if("stroke-color"in t&&e.setStrokeColorExpression(Tn(r,t["stroke-color"],bi)),"stroke-pattern-src"in t){const i=O3(t["stroke-pattern-src"]),s=xU(t,e,n,"stroke-pattern-",i);let o=s,a="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(o=Tn(r,t["stroke-pattern-size"],El),a=wU(t,"stroke-pattern-",r,s,o));let l="0.";"stroke-pattern-spacing"in t&&(l=Tn(r,t["stroke-pattern-spacing"],Wt));let c="0.";"stroke-pattern-start-offset"in t&&(c=Tn(r,t["stroke-pattern-start-offset"],Wt)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const u=`u_texture${i}`;let h="1.";"stroke-color"in t&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${u}, ${s}, ${a}, ${o}, ${l}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`),r.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${o}, ${l}, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(Tn(r,t["stroke-width"],Wt)),"stroke-offset"in t&&e.setStrokeOffsetExpression(Tn(r,t["stroke-offset"],Wt)),"stroke-line-cap"in t&&e.setStrokeCapExpression(Tn(r,t["stroke-line-cap"],Fs)),"stroke-line-join"in t&&e.setStrokeJoinExpression(Tn(r,t["stroke-line-join"],Fs)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(Tn(r,t["stroke-miter-limit"],Wt)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Of("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${Of("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let i=t["stroke-line-dash"].map(v=>Tn(r,v,Wt));i.length%2===1&&(i=[...i,...i]);let s="0.";"stroke-line-dash-offset"in t&&(s=Tn(r,t["stroke-line-dash-offset"],Wt));const a=`dashDistanceField_${O3(t["stroke-line-dash"])}`,l=i.map((v,x)=>`float dashLength${x}`).join(", "),c=i.map((v,x)=>`dashLength${x}`).join(" + ");let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType, lineWidth)`;for(let v=2;v<i.length;v+=2)u=`${u} + dashLength${v-2} + dashLength${v-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${v}, totalDashLength, capType, lineWidth))`;r.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth, ${l}) {
  float totalDashLength = ${c};
  return ${h};
}`;const f=i.map((v,x)=>`${v}`).join(", ");e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType, v_width, ${f})`);let g=i.join(" + ");e.getStrokePatternLengthExpression()&&(r.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,g=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${g})`),e.setStrokePatternLengthExpression(g)}}function vPe(t,e,n,r){if("fill-color"in t&&e.setFillColorExpression(Tn(r,t["fill-color"],bi)),"fill-pattern-src"in t){const i=O3(t["fill-pattern-src"]),s=xU(t,e,n,"fill-pattern-",i);let o=s,a="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(o=Tn(r,t["fill-pattern-size"],El),a=wU(t,"fill-pattern-",r,s,o)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${i}`;let c="1.";"fill-color"in t&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function GX(t,e,n){const r=Ple(),i=new Lle,s={};if("icon-src"in t?gPe(t,i,s,r):"shape-points"in t?mPe(t,i,s,r):"circle-radius"in t&&pPe(t,i,s,r),yPe(t,i,s,r),vPe(t,i,s,r),n){const l=Tn(r,n,Ss);i.setFragmentDiscardExpression(`!${l}`)}const o={};function a(l,c,u,h){if(!r[l])return;const f=P8(u),g=yU(u);i.addAttribute(`a_${c}`,f),o[c]={size:g,callback:h}}return a("geometryType",Cle,Fs,l=>ck(rU(l.getGeometry()))),a("featureId",Rle,Fs|Wt,l=>{const c=l.getId()??null;return typeof c=="string"?ck(c):c}),Mle(i,r),{builder:i,attributes:{...o,...Ole(r)},uniforms:{...s,...Nle(r,e)}}}const _Pe=[];let I6;function xPe(){return I6||(I6=lPe()),I6}let wPe=0;const Tc={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class bPe{constructor(e,n,r,i){this.helper_,this.hitDetectionEnabled_=!!i,this.styleShaders=EPe(e,n),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return cPe(this.ref,_Pe)},size:2});for(const s of this.styleShaders){for(const o in s.attributes)o in this.customAttributes_||(this.customAttributes_[o]=s.attributes[o]);for(const o in s.uniforms)o in this.uniforms_||(this.uniforms_[o]=s.uniforms[o])}this.renderPasses_=this.styleShaders.map(s=>{const o={},a=Object.entries(this.customAttributes_).map(([l,c])=>({name:l in s.attributes||l==="hitColor"?`a_${l}`:null,size:c.size||1,type:So.FLOAT}));return s.builder.getFillVertexShader()&&(o.fillRenderPass={vertexShader:s.builder.getFillVertexShader(),fragmentShader:s.builder.getFillFragmentShader(),attributesDesc:[{name:Tc.POSITION,size:2,type:So.FLOAT},...a],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),s.builder.getStrokeVertexShader()&&(o.strokeRenderPass={vertexShader:s.builder.getStrokeVertexShader(),fragmentShader:s.builder.getStrokeFragmentShader(),attributesDesc:[{name:Tc.LOCAL_POSITION,size:2,type:So.FLOAT}],instancedAttributesDesc:[{name:Tc.SEGMENT_START,size:2,type:So.FLOAT},{name:Tc.MEASURE_START,size:1,type:So.FLOAT},{name:Tc.SEGMENT_END,size:2,type:So.FLOAT},{name:Tc.MEASURE_END,size:1,type:So.FLOAT},{name:Tc.JOIN_ANGLES,size:2,type:So.FLOAT},{name:Tc.DISTANCE_LOW,size:1,type:So.FLOAT},{name:Tc.DISTANCE_HIGH,size:1,type:So.FLOAT},{name:Tc.ANGLE_TANGENT_SUM,size:1,type:So.FLOAT},...a],instancePrimitiveVertexCount:6}),s.builder.getSymbolVertexShader()&&(o.symbolRenderPass={vertexShader:s.builder.getSymbolVertexShader(),fragmentShader:s.builder.getSymbolFragmentShader(),attributesDesc:[{name:Tc.LOCAL_POSITION,size:2,type:So.FLOAT}],instancedAttributesDesc:[{name:Tc.POSITION,size:2,type:So.FLOAT},...a],instancePrimitiveVertexCount:6}),o}),this.hasFill_=this.renderPasses_.some(s=>s.fillRenderPass),this.hasStroke_=this.renderPasses_.some(s=>s.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(s=>s.symbolRenderPass),this.setHelper(r)}async generateBuffers(e,n){if(e.isEmpty())return null;const r=this.generateRenderInstructions_(e,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=ek(zs(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,n){const r=this.hasFill_?fPe(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?dPe(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?hPe(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=wPe++;let s;switch(n){case"Polygon":s=A6.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=A6.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=A6.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:x5(this.customAttributes_)},a=xPe();return a.postMessage(o,[e.buffer]),e=null,new Promise(l=>{const c=u=>{const h=u.data;if(h.id!==i||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const f=new w6(uU,x6).fromArrayBuffer(h.indicesBuffer),g=new w6(P3,x6).fromArrayBuffer(h.vertexAttributesBuffer),v=new w6(P3,x6).fromArrayBuffer(h.instanceAttributesBuffer);this.helper_.flushBufferData(f),this.helper_.flushBufferData(g),this.helper_.flushBufferData(v),l([f,g,v])};a.addEventListener("message",c)})}render(e,n,r){for(const i of this.renderPasses_)i.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],i.fillRenderPass,n,r),i.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],i.strokeRenderPass,n,r),i.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],i.symbolRenderPass,n,r)}renderInternal_(e,n,r,i,s,o){const a=e.getSize();if(a===0)return;const l=i.instancedAttributesDesc.length;if(this.helper_.useProgram(i.program,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i.attributesDesc),this.helper_.bindBuffer(r),this.helper_.enableAttributesInstanced(i.instancedAttributesDesc),o(),l){const c=i.instancedAttributesDesc.reduce((h,f)=>h+(f.size||1),0),u=r.getSize()/c;this.helper_.drawElementsInstanced(0,a,u)}else this.helper_.drawElements(0,a)}setHelper(e,n=null){this.helper_=e;for(const r of this.renderPasses_)r.fillRenderPass&&(r.fillRenderPass.program=this.helper_.getProgram(r.fillRenderPass.fragmentShader,r.fillRenderPass.vertexShader)),r.strokeRenderPass&&(r.strokeRenderPass.program=this.helper_.getProgram(r.strokeRenderPass.fragmentShader,r.strokeRenderPass.vertexShader)),r.symbolRenderPass&&(r.symbolRenderPass.program=this.helper_.getProgram(r.symbolRenderPass.fragmentShader,r.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1]),this.helper_.flushBufferData(n.polygonBuffers[2])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1]),this.helper_.flushBufferData(n.lineStringBuffers[2])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1]),this.helper_.flushBufferData(n.pointBuffers[2])))}}function EPe(t,e){const n=Array.isArray(t)?t:[t];if("style"in n[0]){const r=[],i=n,s=[];for(const o of i){const a=Array.isArray(o.style)?o.style:[o.style];let l=o.filter;o.else&&s.length&&(l=["all",...s.map(u=>["!",u])],o.filter&&l.push(o.filter),l.length<3&&(l=l[1])),o.filter&&s.push(o.filter);const c=a.map(u=>GX(u,e,l));r.push(...c)}return r}return"builder"in n[0]?n:n.map(r=>GX(r,e,null))}const jh=new Uint8Array(4);class SPe{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){xp(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return jh[0]=0,jh[1]=0,jh[2]=0,jh[3]=0,jh;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return jh[0]=this.data_[r*4],jh[1]=this.data_[r*4+1],jh[2]=this.data_[r*4+2],jh[3]=this.data_[r*4+3],jh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function TPe(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=i?qn(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}const n_={...df,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class kPe extends fU{constructor(e,n){const r={[n_.RENDER_EXTENT]:[0,0,0,0],[n_.PATTERN_ORIGIN]:[0,0],[n_.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Fa(),this.currentTransform_=zs(),this.tmpCoords_=[0,0],this.tmpTransform_=zs(),this.tmpMat4_=xle(),this.currentFrameStateTransform_=zs(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(n),this.batch_=new N3,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Hn(n,Zo.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Hn(n,Zo.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Hn(n,Zo.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Hn(n,Zo.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new bPe(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new SPe(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e,n){const r=n.feature;this.batch_.changeFeature(r,e)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){Aae(this.tmpTransform_,this.currentFrameStateTransform_),kae(this.tmpTransform_,e),this.helper.setUniformMatrixValue(n_.PROJECTION_MATRIX,k8(this.tmpMat4_,this.tmpTransform_)),ek(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(n_.SCREEN_TO_WORLD_MATRIX,k8(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,ek(this.tmpTransform_,e),Yi(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(n_.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=TPe(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[bs.ANIMATING]&&!e.viewHints[bs.INTERACTING],o=!m1(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,c=i.resolution,u=n instanceof v5?n.getRenderBuffer():0,h=ld(e.extent,u*c);r.loadFeatures(h,c,l),this.ready=!1;const f=this.helper.makeProjectionTransform(e,zs());this.styleRenderer_.generateBuffers(this.batch_,f).then(g=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=g,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),YTe(this.currentFrameStateTransform_,o*s,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)});while(++o<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(cr(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const o=Yi(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=uPe(l),u=this.batch_.getFeatureFromRef(c);if(u)return i(u,this.getLayer(),null)}disposeBuffers(e){const n=r=>{for(const i of r)i&&this.helper.deleteBuffer(i)};e.pointBuffers&&n(e.pointBuffers),e.lineStringBuffers&&n(e.lineStringBuffers),e.polygonBuffers&&n(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){ti(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const sf={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},APe=["#00f","#0ff","#0f0","#ff0","#f00"];class IPe extends v5{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(sf.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:APe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(sf.BLUR)}getGradient(){return this.get(sf.GRADIENT)}getRadius(){return this.get(sf.RADIUS)}handleGradientChanged_(){this.gradient_=PPe(this.getGradient())}setBlur(e){const n=this.get(sf.BLUR);if(this.set(sf.BLUR,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(sf.GRADIENT,e)}setRadius(e){const n=this.get(sf.RADIUS);if(this.set(sf.RADIUS,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new Lle,n=Ple(),r=Tn(n,this.filter_,Ss);let i=Tn(n,this.getRadius(),Wt),s=Tn(n,this.getBlur(),Wt);const o={};typeof this.getBlur()=="number"&&(s="a_blur",o.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(i="a_radius",o.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const h=typeof this.weight_=="string"?f=>f.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:f=>{const g=h(f);return g!==void 0?ni(g,0,1):1}},l="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const h=["clamp",this.weight_,0,1];l=Tn(n,h,Wt)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${s});
  float radius = ${i};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${i} + ${s}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${i} + ${s}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),Mle(e,n);const c=Ole(n),u=Nle(n,this.styleVariables_);return new kPe(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...c,...a},uniforms:{...u,...o}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function PPe(t){const r=As(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)i.addColorStop(o*s,t[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class RPe extends eU{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(n.extent!==void 0&&(l=Kf(l,cd(n.extent,i.projection))),!a[bs.ANIMATING]&&!a[bs.INTERACTING]&&!j2(l))if(o){const c=i.projection,u=o.getImage(l,s,r,c);u&&(this.loadImage(u)?this.image=u:u.getState()===Vt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Yi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!p1(s,i))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=qn(o),c=Math.floor(a.width*((i[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Ts(o),h=Math.floor(a.height*((o[3]-i[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,n){const r=this.image,i=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,f=h.center,g=h.resolution,v=u*o/(g*l),x=u*a/(g*l);this.prepareContainer(e,n);const b=this.context.canvas.width,T=this.context.canvas.height,A=this.getRenderContext(e);let I=!1,P=!0;if(c.extent){const O=cd(c.extent,h.projection);P=ia(O,e.extent),I=P&&!Wm(O,e.extent),I&&this.clipUnrotated(A,e,O)}const M=r.getImage(),F=au(this.tempTransform,b/2,T/2,v,x,0,l*(i[0]-f[0])/o,l*(f[1]-i[3])/a);this.renderedResolution=a*u/l;const C=M.width*F[0],N=M.height*F[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,e),P&&C>=.5&&N>=.5){const O=F[4],j=F[5],V=c.opacity;V!==1&&(A.save(),A.globalAlpha=V),A.drawImage(M,0,0,+M.width,+M.height,O,j,C,N),V!==1&&A.restore()}return this.postRender(this.context,e),I&&A.restore(),A.imageSmoothingEnabled=!0,this.container}}class CPe extends OA{constructor(e){e=e||{},super(e)}}class MPe extends CPe{constructor(e){super(e)}createRenderer(){return new RPe(this)}getData(e){return super.getData(e)}}function P6(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function NPe(t,e,n){const r=t[n];return r?r.delete(e):!1}function BX(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=Kf(e,cd(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=Kf(e,i))}return e}class OPe extends eU{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Fa(),this.tempTileRange_=new dU(0,0,0,0),this.tempTileCoord_=M3(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new zX(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new zX(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const s=this.tileCache_,a=this.getLayer().getSource(),l=NC(a,a.getKey(),e,n,r);let c;if(s.containsKey(l))c=s.get(l);else{const u=i.viewState.projection,h=a.getProjection();if(c=a.getTile(e,n,r,i.pixelRatio,u,!h||Hy(h,u)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,n,r,i){const s=this.getOrCreateTile(e,n,r,i);return s||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Yi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!p1(s,i))return null;const o=n.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(n.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(i,u),f=this.getTile(u,h[1],h[2],n);if(!f||f.getState()!==ln.LOADED)continue;const g=l.getOrigin(u),v=Ma(l.getTileSize(u)),x=l.getResolution(u);let b;if(f instanceof Ele||f instanceof Ale)b=f.getImage();else if(f instanceof jX){if(b=A8(f.getData()),!b)continue}else continue;const T=Math.floor(c*((i[0]-g[0])/x-h[1]*v[0])),A=Math.floor(c*((g[1]-i[1])/x-h[2]*v[1])),I=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(b,T+I,A+I)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=_n(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],f=a.getMapInternal(),g=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),v=o.rotation,x=v?cae(o.center,o.resolution,v,e.size):void 0;for(let b=r;b>=g;--b){const T=c.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),A=c.getResolution(b);for(let I=T.minX;I<=T.maxX;++I)for(let P=T.minY;P<=T.maxY;++P){if(v&&!c.tileCoordIntersectsViewport([b,I,P],x))continue;const M=this.getTile(b,I,P,e);if(!M||!P6(i,M,b))continue;const C=M.getKey();if(h[C]=!0,M.getState()===ln.IDLE&&!e.tileQueue.isKeyQueued(C)){const N=M3(b,I,P,this.tempTileCoord_);e.tileQueue.enqueue([M,u,c.getTileCoordCenter(N),A])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=NC(this.getLayer().getSource(),a[l],i,s,o);if(r.containsKey(c)){const u=r.peek(c);if(u.getState()===ln.LOADED)return u.endTransition(_n(this)),P6(n,u,i),!0}}return!1}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const f=NC(l,c,r,u,h);let g=!1;if(a.containsKey(f)){const v=a.peek(f);v.getState()===ln.LOADED&&(P6(i,v,r),g=!0)}g||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),f=h.getZForResolution(o,u.zDirection),g=h.getResolution(f),v=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==v&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=v):this.renderedSourceKey_=v;let x=e.extent;const b=u.getTilePixelRatio(l);this.prepareContainer(e,n);const T=this.context.canvas.width,A=this.context.canvas.height,I=r.extent&&cd(r.extent);I&&(x=Kf(x,cd(r.extent)));const P=g*T/2/b,M=g*A/2/b,F=[a[0]-P,a[1]-M,a[0]+P,a[1]+M],C={};this.renderedTiles.length=0;const N=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const pe=h.getZForResolution(i.nextResolution,u.zDirection),De=BX(e,e.nextExtent);this.enqueueTiles(e,De,pe,C,N)}const O=BX(e,x);if(this.enqueueTiles(e,O,f,C,0),N>0&&setTimeout(()=>{this.enqueueTiles(e,O,f-1,C,N-1)},0),!(f in C))return this.container;const j=_n(this),V=e.time;for(const pe of C[f]){const De=pe.getState();if(De===ln.EMPTY)continue;const Me=pe.tileCoord;if(De===ln.LOADED&&pe.getAlpha(j,V)===1){pe.endTransition(j);continue}if(De!==ln.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Me,C)){NPe(C,pe,f),e.animate=!0;continue}if(this.findAltTiles_(h,Me,f+1,C))continue;const ne=h.getMinZoom();for(let ie=f-1;ie>=ne&&!this.findAltTiles_(h,Me,ie,C);--ie);}const G=g/o*l/b,U=this.getRenderContext(e);au(this.tempTransform,T/2,A/2,G,G,0,-T/2,-A/2),r.extent&&this.clipUnrotated(U,e,I),u.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,e);const fe=Object.keys(C).map(Number);fe.sort(qf);let Re;const Be=[],$e=[];for(let pe=fe.length-1;pe>=0;--pe){const De=fe[pe],Me=u.getTilePixelSize(De,l,s),W=h.getResolution(De)/g,ne=Me[0]*W*G,ie=Me[1]*W*G,le=h.getTileCoordForCoordAndZ(Z1(F),De),ve=h.getTileCoordExtent(le),qe=Yi(this.tempTransform,[b*(ve[0]-F[0])/g,b*(F[3]-ve[3])/g]),Ke=b*u.getGutterForProjection(s);for(const Se of C[De]){if(Se.getState()!==ln.LOADED)continue;const we=Se.tileCoord,Dt=le[1]-we[1],Ye=Math.round(qe[0]-(Dt-1)*ne),sn=le[2]-we[2],$t=Math.round(qe[1]-(sn-1)*ie),fn=Math.round(qe[0]-Dt*ne),yn=Math.round(qe[1]-sn*ie),dt=Ye-fn,ur=$t-yn,jn=fe.length===1;let Un=!1;Re=[fn,yn,fn+dt,yn,fn+dt,yn+ur,fn,yn+ur];for(let Qr=0,go=Be.length;Qr<go;++Qr)if(!jn&&De<$e[Qr]){const Ar=Be[Qr];ia([fn,yn,fn+dt,yn+ur],[Ar[0],Ar[3],Ar[4],Ar[7]])&&(Un||(U.save(),Un=!0),U.beginPath(),U.moveTo(Re[0],Re[1]),U.lineTo(Re[2],Re[3]),U.lineTo(Re[4],Re[5]),U.lineTo(Re[6],Re[7]),U.moveTo(Ar[6],Ar[7]),U.lineTo(Ar[4],Ar[5]),U.lineTo(Ar[2],Ar[3]),U.lineTo(Ar[0],Ar[1]),U.clip())}Be.push(Re),$e.push(De),this.drawTile(Se,e,fn,yn,dt,ur,Ke,jn),Un&&U.restore(),this.renderedTiles.unshift(Se),this.updateUsedTiles(e.usedTiles,u,Se)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!m1(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&U.restore(),U.imageSmoothingEnabled=!0,this.renderComplete){const pe=(De,Me)=>{const Q=_n(u),W=Me.wantedTiles[Q],ne=W?Object.keys(W).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(pe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,s,o,a,l){let c;if(e instanceof jX){if(c=A8(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(n),h=_n(this),f=n.layerStatesArray[n.layerIndex],g=f.opacity*(l?e.getAlpha(h,n.time):1),v=g!==u.globalAlpha;v&&(u.save(),u.globalAlpha=g),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,s,o),v&&u.restore(),g!==f.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=_n(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const oR={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class LPe extends OA{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(oR.PRELOAD)}setPreload(e){this.set(oR.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(oR.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(oR.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class Cm extends LPe{constructor(e){super(e)}createRenderer(){return new OPe(this,{cacheSize:this.getCacheSize()})}}function R8(t){return Array.isArray(t)?Math.min(...t):t}const r_=[0,0,0],em=5;class $le{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,cr(cTe(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,cr(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Z1(r)),cr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,cr(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:lU,cr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new dU(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,l=i.maxY;a<=l;++a)r([n,s,a])}forEachTileCoordParentTileRange(e,n,r,i){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Qv(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,c,r),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return Qv(s,s+1,o,o+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(n===i)return Qv(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-i),c=Math.floor(s*l),u=Math.floor(o*l);if(n<i)return Qv(c,c,u,u,r);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return Qv(c,h,u,f,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,r_);const i=r_[1],s=r_[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,r_);const o=r_[1],a=r_[2];return Qv(i,o,s,a,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Ma(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Ma(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,l=o+s[0]*i,c=a+s[1]*i;return ap(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),c=Ma(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/r/c[0],h=a*(l[1]-n)/r/c[1];return i?(u=Hm(u,em)-1,h=Hm(h,em)-1):(u=YP(u,em),h=YP(h,em)),M3(o,u,h,s)}getTileCoordForXYAndZ_(e,n,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),l=Ma(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return i?(c=Hm(c,em)-1,u=Hm(u,em)-1):(c=YP(c,em),u=YP(u,em)),M3(r,c,u,s)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=n5(this.resolutions_,e,n||0);return ni(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return Mae(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function jle(t){let e=t.getDefaultTileGrid();return e||(e=FPe(t),t.setDefaultTileGrid(e)),e}function DPe(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),s=bU(n);if(!p1(s,i)){const o=qn(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,t.getTileCoordForCoordAndZ(i,r)}return e}function $Pe(t,e,n,r){r=r!==void 0?r:"top-left";const i=Fle(t,e,n);return new $le({extent:t,origin:fTe(t,r),resolutions:i,tileSize:n})}function jPe(t){const e=t||{},n=e.extent||Jr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Fle(n,e.maxZoom,e.tileSize,e.maxResolution)};return new $le(r)}function Fle(t,e,n,r){e=e!==void 0?e:bIe,n=Ma(n!==void 0?n:lU);const i=Ts(t),s=qn(t);r=r>0?r:Math.max(s/n[0],i/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function FPe(t,e,n,r){const i=bU(t);return $Pe(i,e,n,r)}function bU(t){t=Jr(t);let e=t.getExtent();if(!e){const n=180*Vw.degrees/t.getMetersPerUnit();e=ap(-n,-n,n,n)}return e}function EU(t,e){const n=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&n.push(i+"="+encodeURIComponent(e[i]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}const VPe=/\{z\}/g,zPe=/\{x\}/g,UPe=/\{y\}/g,GPe=/\{-y\}/g;function BPe(t,e,n,r,i){return t.replace(VPe,e.toString()).replace(zPe,n.toString()).replace(UPe,r.toString()).replace(GPe,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function WPe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function HPe(t,e){return(function(n,r,i){if(!n)return;let s;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return BPe(t,o,n[1],n[2],s)})}function qPe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=HPe(t[i],e);return KPe(r)}function KPe(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=Ile(e),s=ug(i,t.length);return t[s](e,n,r)})}class YPe extends Qz{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&Ma(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||_n(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,s,o){return xn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:jle(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),o=Ma(i.getTileSize(e),this.tmpSize);return s==1?o:cAe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=DPe(i,e,r)),YIe(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class XPe extends gh{constructor(e,n){super(e),this.tile=n}}const R6={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class SU extends YPe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===SU.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=_n(n),i=n.getState();let s;i==ln.LOADING?(this.tileLoadingKeys_[r]=!0,s=R6.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==ln.ERROR?R6.TILELOADERROR:i==ln.LOADED?R6.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new XPe(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=WPe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(qPe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class Vle extends SU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:zle,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Ele,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Hy(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||Hy(n,e)))return this.tileGrid;const r=_n(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=jle(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,s,o){const a=[e,n,r],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,i,s):void 0,u=new this.tileClass(a,c!==void 0?ln.IDLE:ln.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(An.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,r,i,s,o){const a=this.getProjection();if(!a||!s||Hy(a,s))return this.getTileInternal(e,n,r,i,a||s);const l=[e,n,r],c=this.getKey(),u=this.getTileGridForProjection(a),h=this.getTileGridForProjection(s),f=this.getTileCoordForTileUrlFunction(l,s),g=new Ale(a,u,s,h,l,f,this.getTilePixelRatio(i),this.getGutter(),(v,x,b,T)=>this.getTileInternal(v,x,b,T,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,n,r,i,s,o){const a=this.getKey(),l=NC(this,a,e,n,r);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,n,r,i,s,a);return o?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=Jr(e);if(r){const i=_n(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function zle(t,e){if(rc){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const o=t.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),s.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class gy extends Vle{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:jPe({extent:bU(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const ZPe="modulepreload",JPe=function(t){return"/detectorapp-nl/"+t},WX={},_e=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=JPe(c),c in WX)return;WX[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ZPe,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((g,v)=>{f.addEventListener("load",g),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class QPe extends zae{constructor(e,n,r,i,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=n.getExtent();c&&n.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?Kf(r,c):r,h=ch(u),f=C3(e,n,h,i),g=kle,v=new Tle(e,n,u,l,f*g,i),x=v.calculateSourceExtent(),b=j2(x)?null:o(x,f,s),T=b?Vt.IDLE:Vt.EMPTY,A=b?b.getPixelRatio():1;super(r,i,A,T),this.targetProj_=n,this.maxSourceExtent_=l,this.triangulation_=v,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=A,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Vt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Vt.LOADED){const n=qn(this.targetExtent_)/this.targetResolution_,r=Ts(this.targetExtent_)/this.targetResolution_;this.canvas_=Sle(n,r,this.sourcePixelRatio_,R8(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Vt.IDLE){this.state=Vt.LOADING,this.changed();const e=this.sourceImage_.getState();e==Vt.LOADED||e==Vt.ERROR?this.reproject_():(this.sourceListenerKey_=Hn(this.sourceImage_,An.CHANGE,n=>{const r=this.sourceImage_.getState();(r==Vt.LOADED||r==Vt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ti(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Xm=4,C6={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class eRe extends gh{constructor(e,n){super(e),this.image=n}}class tRe extends Qz{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const n=this.getResolutions();if(n){const r=n5(n,e,0);e=n[r]}return e}getImage(e,n,r,i){const s=this.getProjection();if(!s||!i||Hy(s,i))return s&&(i=s),this.getImageInternal(e,n,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Hy(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==n&&m1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new QPe(s,i,e,n,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,n,r,i){if(this.loader){const s=Ule(e,n,r,1),o=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Wm(this.wantedExtent_,s)||Wm(this.image.getExtent(),s))&&(this.wantedResolution_&&R8(this.wantedResolution_)===o||R8(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new zae(s,o,r,this.loader),this.image.addEventListener(An.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const n=e.target;let r;switch(n.getState()){case Vt.LOADING:this.loading=!0,r=C6.IMAGELOADSTART;break;case Vt.LOADED:this.loading=!1,r=C6.IMAGELOADEND;break;case Vt.ERROR:this.loading=!1,r=C6.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new eRe(r,n))}}function nRe(t,e){t.getImage().src=e}function Ule(t,e,n,r){const i=e/n,s=ch(t),o=Hm(qn(t)/i,Xm),a=Hm(Ts(t)/i,Xm),l=Hm((r-1)*o/2,Xm),c=o+2*l,u=Hm((r-1)*a/2,Xm),h=a+2*u;return f3(s,i,0,[c,h])}function rRe(t,e,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[p3(qn(e)/a,Xm),p3(Ts(e)/a,Xm)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const c=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return EU(c,s)}function iRe(t){const e=t.load?t.load:Gae,n=Jr(t.projection||"EPSG:3857"),r=t.ratio??1.5,i=t.crossOrigin??null;return function(s,o,a){a=t.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,t.params),s=Ule(s,o,a,r);const c=rRe(t.url,s,o,a,n,l),u=new Image;return u.crossOrigin=i,e(u,c).then(h=>{const f=qn(s)/h.width*a;return{image:h,extent:s,resolution:f,pixelRatio:a}})}}class sRe extends tRe{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:nRe,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=iRe({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Gae(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const C8="1.3.0";function oRe(t,e,n,r,i){i.WIDTH=n[0],i.HEIGHT=n[1];const s=r.getAxisOrientation(),o=dae(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=r.getCode();const a=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),EU(t,i)}function aRe(t,e,n,r,i,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/n,l=[p3(qn(t)/a,Xm),p3(Ts(t)/a,Xm)];if(n!=1)switch(o){case"geoserver":const u=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return oRe(i,t,l,r,s)}function HX(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:C8,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}const lRe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class cRe extends gy{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[lRe];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,o)=>{const a=s.getImage();!rc&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||zle)(s,o)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const L3=1/0;class uRe{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,$2(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){cr(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=L3?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,s=n[e],o=r[e],a=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<i&&r[c]<r[l]?c:l;n[e]=n[u],r[e]=r[u],e=u}n[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,s=r[n],o=i[n];for(;n>e;){const a=this.getParentIndex_(n);if(i[a]>o)r[n]=r[a],i[n]=i[a],n=a;else break}r[n]=s,i[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==L3?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=l,n[i++]=o);n.length=i,r.length=i,this.heapify_()}}class hRe extends uRe{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(An.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===ln.LOADED||r===ln.ERROR||r===ln.EMPTY){r!==ln.ERROR&&n.removeEventListener(An.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===ln.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function dRe(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return L3;const s=t.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}class fRe extends Vle{constructor(e){e=e||{};const n=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Fa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,n,r,i){const s=Jr(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=V2(e,s,o),c=C3(o,s,e,n),u=a.getZForResolution(c,this.zDirection),h=a.getResolution(u),f=a.getTileCoordForCoordAndZ(l,u);if(a.getResolutions().length<=f[0])return;let g=a.getTileCoordExtent(f,this.tmpExtent_);const v=this.gutter_;v!==0&&(g=ld(g,h*v,g));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,HX(this.params_,"GetFeatureInfo"),i);const b=Math.floor((l[0]-g[0])/h),T=Math.floor((g[3]-l[1])/h);return x[this.v13_?"I":"X"]=b,x[this.v13_?"J":"Y"]=T,this.getRequestUrl_(f,g,1,o||s,x)}getLegendUrl(e,n){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:C8,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,n),EU(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=ug(Ile(e),o.length);a=o[l]}return aRe(n,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||C8;this.v13_=dae(e,"1.3")>=0}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=ld(o,s*a,o));const l=Object.assign({},HX(this.params_,"GetMap"));return this.getRequestUrl_(e,o,n,r,l)}}class M_ extends gh{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Af extends M_{constructor(e,n,r,i,s,o){super(e,n,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Cr={SINGLECLICK:"singleclick",CLICK:An.CLICK,DBLCLICK:An.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},M8={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class pRe extends TA{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Hn(r,M8.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Hn(r,M8.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(An.TOUCHMOVE,this.boundHandleTouchMove_,jae?{passive:!1}:!1)}emulateClick_(e){let n=new Af(Cr.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Af(Cr.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Af(Cr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==Cr.POINTERUP||n.type==Cr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==Cr.POINTERDOWN||n.type==Cr.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Af(Cr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ti),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Af(Cr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Hn(r,Cr.POINTERMOVE,this.handlePointerMove_,this),Hn(r,Cr.POINTERUP,this.handlePointerUp_,this),Hn(this.element_,Cr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Hn(this.element_.getRootNode(),Cr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Af(Cr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Af(Cr.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ti(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(An.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ti(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ti),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const ym={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Yo={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class w5 extends $d{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let n=0,r=this.listenerKeys.length;n<r;++n)ti(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==JT&&this.listenerKeys.push(Hn(e,ym.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class mRe extends w5{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(An.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+RA+" "+Yz+(this.collapsed_&&this.collapsible_?" "+rX:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>iae(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!xp(n,this.renderedAttributions_)){yke(this.ulElement_);for(let i=0,s=n.length;i<s;++i){const o=document.createElement("li");o.innerHTML=n[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(rX),this.collapsed_?tX(this.collapseLabel_,this.label_):tX(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class gRe extends w5{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(An.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+RA+" "+Yz,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(JP)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:z2}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(JP);!s&&r===0?this.element.classList.add(JP):s&&r!==0&&this.element.classList.remove(JP)}this.label_.style.transform=i}this.rotation_=r}}class yRe extends w5{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(An.CLICK,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(An.CLICK,this.handleClick_.bind(this,-r),!1);const f=n+" "+RA+" "+Yz,g=this.element;g.className=f,g.appendChild(u),g.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:z2})):r.setZoom(s)}}}function vRe(t){t=t||{};const e=new Kc;return(t.zoom===void 0||t.zoom)&&e.push(new yRe(t.zoomOptions)),(t.rotate===void 0||t.rotate)&&e.push(new gRe(t.rotateOptions)),(t.attribution===void 0||t.attribution)&&e.push(new mRe(t.attributionOptions)),e}class _Re{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[n]-this.points_[r],o=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const N8={ACTIVE:"active"};class LA extends $d{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(N8.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(N8.ACTIVE,e)}setMap(e){this.map_=e}}function xRe(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:yIe,center:t.getConstrainedCenter(i)})}}function TU(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const s=t.getConstrainedZoom(i+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:r!==void 0?r:250,easing:z2})}class wRe extends LA{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==Cr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();TU(a,o,s,this.duration_),r.preventDefault(),n=!0}return!n}}function O8(t){const e=arguments;return function(n){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](n),!!r);++i);return r}}const bRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ERe=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},Gle=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?ERe(t):!0},LC=Fw,Ble=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(mke&&Dae&&e.ctrlKey)},SRe=D2,kU=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},TRe=function(t){const e=t.originalEvent;return Dae?e.metaKey:e.ctrlKey},L8=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Wle=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},M6=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},kRe=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class U2 extends LA{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Cr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Cr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Cr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==Cr.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function AU(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class ARe extends U2{constructor(e){super({stopDown:D2}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:O8(kU,kRe);this.condition_=e.onFocusOnly?O8(Gle,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(AU(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();_Te(s,a.getResolution()),Cz(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:z2})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class IRe extends U2{constructor(e){e=e||{},super({stopDown:D2}),this.condition_=e.condition?e.condition:bRe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!M6(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===aU)return;const i=n.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return M6(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return M6(e)&&Ble(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class PRe extends SA{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new bl([i])}getGeometry(){return this.geometry_}}const i_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class fE extends gh{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class RRe extends U2{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new PRe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Ble,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],s=r[1]-n[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new fE(i_.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new fE(n?i_.BOXEND:i_.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new fE(i_.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new fE(i_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new fE(i_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class CRe extends RRe{constructor(e){e=e||{};const n=e.condition?e.condition:L8;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:z2})}}const P0={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class MRe extends LA{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return kU(n)&&Wle(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==An.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==P0.DOWN||i==P0.LEFT||i==P0.RIGHT||i==P0.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;i==P0.DOWN?c=-a:i==P0.LEFT?l=-a:i==P0.RIGHT?l=a:c=a;const u=[l,c];Cz(u,o.getRotation()),xRe(o,u,this.duration_),r.preventDefault(),n=!0}}return!n}}class NRe extends LA{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!TRe(n)&&Wle(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==An.KEYDOWN||e.type==An.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();TU(a,o,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const ORe=40,LRe=300;class DRe extends LA{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:LC;this.condition_=e.onFocusOnly?O8(Gle,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==An.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=ORe;break;case WheelEvent.DOM_DELTA_PAGE:s*=LRe;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-ni(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),TU(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class $Re extends U2{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=D2),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==aU&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(AU(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class jRe extends U2{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=D2),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(AU(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function FRe(t){t=t||{};const e=new Kc,n=new _Re(-.005,.05,100);return(t.altShiftDragRotate===void 0||t.altShiftDragRotate)&&e.push(new IRe),(t.doubleClickZoom===void 0||t.doubleClickZoom)&&e.push(new wRe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan===void 0||t.dragPan)&&e.push(new ARe({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate===void 0||t.pinchRotate)&&e.push(new $Re),(t.pinchZoom===void 0||t.pinchZoom)&&e.push(new jRe({duration:t.zoomDuration})),(t.keyboard===void 0||t.keyboard)&&(e.push(new MRe),e.push(new NRe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom===void 0||t.mouseWheelZoom)&&e.push(new DRe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom===void 0||t.shiftDragZoom)&&e.push(new CRe({duration:t.zoomDuration})),e}class VRe extends SA{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){xn()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;au(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),ek(i,r)}forEachFeatureAtCoordinate(e,n,r,i,s,o,a,l){let c;const u=n.viewState;function h(P,M,F,C){return s.call(o,M,P?F:null,C)}const f=u.projection,g=mae(e.slice(),f),v=[[0,0]];if(f.canWrapX()&&i){const P=f.getExtent(),M=qn(P);v.push([-M,0],[M,0])}const x=n.layerStatesArray,b=x.length,T=[],A=[];for(let P=0;P<v.length;P++)for(let M=b-1;M>=0;--M){const F=x[M],C=F.layer;if(C.hasRenderer()&&cU(F,u)&&a.call(l,C)){const N=C.getRenderer(),O=C.getSource();if(N&&O){const j=O.getWrapX()?g:e,V=h.bind(null,F.managed);A[0]=j[0]+v[P][0],A[1]=j[1]+v[P][1],c=N.forEachFeatureAtCoordinate(A,n,r,V,T)}if(c)return c}}if(T.length===0)return;const I=1/T.length;return T.forEach((P,M)=>P.distanceSq+=M*I),T.sort((P,M)=>P.distanceSq-M.distanceSq),T.some(P=>c=P.callback(P.feature,P.layer,P.geometry)),c}hasFeatureAtCoordinate(e,n,r,i,s,o){return this.forEachFeatureAtCoordinate(e,n,r,i,Fw,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){xn()}scheduleExpireIconCache(e){Yc.canExpireCache()&&e.postRenderFunctions.push(zRe)}}function zRe(t,e){Yc.expire()}class URe extends VRe{constructor(e){super(e),this.fontChangeListenerKey_=Hn(P_,jw.PROPERTYCHANGE,e.redrawText,e),this.element_=rc?Fae():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=RA+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new WS(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){ti(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(io.PRECOMPOSE,e);const n=e.layerStatesArray.sort((c,u)=>c.zIndex-u.zIndex);n.some(c=>c.layer instanceof v5&&c.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,u=n.length;c<u;++c){const h=n[c];e.layerIndex=c;const f=h.layer,g=f.getSourceState();if(!cU(h,i)||g!="ready"&&g!="undefined"){f.unrender();continue}const v=f.render(e,o);v&&(v!==o&&(this.children_.push(v),o=v),s.push(h))}this.declutter(e,s),vke(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Km(l)){const c=l.getContext("2d");for(const u of this.children_){const h=u.firstElementChild||u,f=u.style.backgroundColor;if(f&&(!Km(h)||h.width>0)&&(c.fillStyle=f,c.fillRect(0,0,l.width,l.height)),Km(h)&&h.width>0){const g=u.style.opacity||h.style.opacity;c.globalAlpha=g===""?1:Number(g);const v=h.style.transform;if(v)c.setTransform(...y8(v));else{const x=parseFloat(h.style.width)/h.width,b=parseFloat(h.style.height)/h.height;c.setTransform(x,0,0,b,0,0)}c.drawImage(h,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(io.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function Hle(t){if(t instanceof OA){t.setMapInternal(null);return}t instanceof _5&&t.getLayers().forEach(Hle)}function qle(t,e){if(t instanceof OA){t.setMapInternal(e);return}if(t instanceof _5){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)qle(n[r],e)}}let GRe=class extends $d{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=BRe(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:gke,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=zs(),this.pixelToCoordinateTransform_=zs(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,rc||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,rc||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||(rc?new Kc:vRe()),this.interactions=n.interactions||(rc?new Kc:FRe({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new hRe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Yo.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Yo.VIEW,this.handleViewChanged_),this.addChangeListener(Yo.SIZE,this.handleSizeChanged_),this.addChangeListener(Yo.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof sd)&&e.view.then(function(i){r.setView(new sd(i))}),this.controls.addEventListener(ul.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(ul.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(ul.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(ul.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(ul.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(ul.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){qle(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Fw,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof _5?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Fw,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(Yo.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return g8(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Yi(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Yo.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Kc){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Bu(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Yi(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Yo.SIZE)}getView(){return this.get(Yo.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return dRe(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Af(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===M8.POINTERDOWN||r===An.WHEEL||r===An.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=n.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[bs.ANIMATING]||o[bs.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(io.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(io.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new M_(ym.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new M_(ym.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ti(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(An.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(An.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Km(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Km(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new URe(this)),!Km(n)){this.mapBrowserEventHandler_=new pRe(this,this.moveTolerance_);for(const i in Cr)this.mapBrowserEventHandler_.addEventListener(Cr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(An.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(An.WHEEL,this.boundHandleBrowserEvent_,jae?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=n.getRootNode();r=i instanceof ShadowRoot?i.host:n}if(this.targetChangeHandlerKeys_=[Hn(r,An.KEYDOWN,this.handleBrowserEvent,this),Hn(r,An.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ti(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ti(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Hn(e,jw.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Hn(e,An.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ti),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Rm("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Hn(e,jw.PROPERTYCHANGE,this.render,this),Hn(e,An.CHANGE,this.render,this),Hn(e,"addlayer",this.handleLayerAdd_,this),Hn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Hle(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(n!==void 0&&mX(n)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:f3(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:_n(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=f3(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!j2(this.previousExtent_)&&!m1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new M_(ym.MOVESTART,this,i)),this.previousExtent_=AA(this.previousExtent_)),this.previousExtent_&&!s.viewHints[bs.ANIMATING]&&!s.viewHints[bs.INTERACTING]&&!m1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new M_(ym.MOVEEND,this,s)),oae(s.extent,this.previousExtent_))),this.dispatchEvent(new M_(ym.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(ym.LOADSTART)||this.hasListener(ym.LOADEND)||this.hasListener(io.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Rm("removelayer",n)),this.set(Yo.LAYERGROUP,e)}setSize(e){this.set(Yo.SIZE,e)}setTarget(e){this.set(Yo.TARGET,e)}setView(e){if(!e||e instanceof sd){this.set(Yo.VIEW,e);return}this.set(Yo.VIEW,new sd);const n=this;e.then(function(r){n.setView(new sd(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,s;if(Km(e))i=e.width,s=e.height;else{const o=getComputedStyle(e);i=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(n=[Math.max(0,i),Math.max(0,s)],!mX(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&yae("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!xp(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function BRe(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new _5({layers:t.layers});n[Yo.LAYERGROUP]=r,n[Yo.TARGET]=t.target,n[Yo.VIEW]=t.view instanceof sd?t.view:new sd;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new Kc(t.controls.slice()):(cr(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new Kc(t.interactions.slice()):(cr(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Kc(t.overlays.slice()):(cr(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Kc,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const N6="units",WRe=[1,2,5],pE=25.4/.28;class HRe extends w5{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+RA,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(N6,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(N6)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(N6,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let o=_3(r,e.resolution,n,s);const a=this.minWidth_*(this.dpi_||pE)/pE,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||pE)/pE:void 0;let c=a*o,u="";if(i=="degrees"){const I=Vw.degrees;c*=I,c<I/60?(u="",o*=3600):c<I?(u="",o*=60):u=""}else if(i=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(i=="nautical")o/=1852,u="NM";else if(i=="metric")c<1e-6?(u="nm",o*=1e9):c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(i=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,g,v,x=0,b,T;for(;;){v=Math.floor(h/3);const I=Math.pow(10,v);if(f=WRe[(h%3+3)%3]*I,g=Math.round(f/o),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&g>=l){f=x,g=b,v=T;break}else if(g>=a)break;x=f,b=g,T=v,++h}const A=this.scaleBar_?this.createScaleBar(g,f,u):f.toFixed(v<0?-v:0)+" "+u;this.renderedHTML_!=A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,n,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,i,s){const a=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:n/this.scaleBarSteps_*-1,c=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${r?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=_3(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||pE,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const qRe={},qX=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const g=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(v=>v(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(qRe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},KRe=t=>t?qX(t):qX;var O6={exports:{}},L6={},D6={exports:{}},$6={};var KX;function YRe(){if(KX)return $6;KX=1;var t=EA();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var g=f(),v=r({inst:{value:g,getSnapshot:f}}),x=v[0].inst,b=v[1];return s(function(){x.value=g,x.getSnapshot=f,l(x)&&b({inst:x})},[h,g,f]),i(function(){return l(x)&&b({inst:x}),h(function(){l(x)&&b({inst:x})})},[h]),o(g),g}function l(h){var f=h.getSnapshot;h=h.value;try{var g=f();return!n(h,g)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return $6.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,$6}var YX;function XRe(){return YX||(YX=1,D6.exports=YRe()),D6.exports}var XX;function ZRe(){if(XX)return L6;XX=1;var t=EA(),e=XRe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return L6.useSyncExternalStoreWithSelector=function(c,u,h,f,g){var v=s(null);if(v.current===null){var x={hasValue:!1,value:null};v.current=x}else x=v.current;v=a(function(){function T(F){if(!A){if(A=!0,I=F,F=f(F),g!==void 0&&x.hasValue){var C=x.value;if(g(C,F))return P=C}return P=F}if(C=P,r(I,F))return C;var N=f(F);return g!==void 0&&g(C,N)?(I=F,C):(I=F,P=N)}var A=!1,I,P,M=h===void 0?null:h;return[function(){return T(u())},M===null?void 0:function(){return T(M())}]},[u,h,f,g]);var b=i(c,v[0],v[1]);return o(function(){x.hasValue=!0,x.value=b},[b]),l(b),b},L6}var ZX;function JRe(){return ZX||(ZX=1,O6.exports=ZRe()),O6.exports}var QRe=JRe();const eCe=kz(QRe),Kle={},{useDebugValue:tCe}=sTe,{useSyncExternalStoreWithSelector:nCe}=eCe;let JX=!1;const rCe=t=>t;function iCe(t,e=rCe,n){(Kle?"commercial":void 0)!=="production"&&n&&!JX&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),JX=!0);const r=nCe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return tCe(r),r}const QX=t=>{(Kle?"commercial":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?KRe(t):t,n=(r,i)=>iCe(e,r,i);return Object.assign(n,e),n},po=t=>t?QX(t):QX;var Yle=Symbol.for("immer-nothing"),eZ=Symbol.for("immer-draftable"),hc=Symbol.for("immer-state");function Ku(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var uk=Object.getPrototypeOf;function Bw(t){return!!t&&!!t[hc]}function v1(t){return t?Xle(t)||Array.isArray(t)||!!t[eZ]||!!t.constructor?.[eZ]||DA(t)||E5(t):!1}var sCe=Object.prototype.constructor.toString(),tZ=new WeakMap;function Xle(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=tZ.get(n);return r===void 0&&(r=Function.toString.call(n),tZ.set(n,r)),r===sCe}function D3(t,e,n=!0){b5(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function b5(t){const e=t[hc];return e?e.type_:Array.isArray(t)?1:DA(t)?2:E5(t)?3:0}function D8(t,e){return b5(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Zle(t,e,n){const r=b5(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function oCe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function DA(t){return t instanceof Map}function E5(t){return t instanceof Set}function G0(t){return t.copy_||t.base_}function $8(t,e){if(DA(t))return new Map(t);if(E5(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Xle(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[hc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(uk(t),r)}else{const r=uk(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function IU(t,e=!1){return S5(t)||Bw(t)||!v1(t)||(b5(t)>1&&Object.defineProperties(t,{set:aR,add:aR,clear:aR,delete:aR}),Object.freeze(t),e&&Object.values(t).forEach(n=>IU(n,!0))),t}function aCe(){Ku(2)}var aR={value:aCe};function S5(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var lCe={};function _1(t){const e=lCe[t];return e||Ku(0,t),e}var hk;function Jle(){return hk}function cCe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function nZ(t,e){e&&(_1("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function j8(t){F8(t),t.drafts_.forEach(uCe),t.drafts_=null}function F8(t){t===hk&&(hk=t.parent_)}function rZ(t){return hk=cCe(hk,t)}function uCe(t){const e=t[hc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function iZ(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[hc].modified_&&(j8(e),Ku(4)),v1(t)&&(t=$3(e,t),e.parent_||j3(e,t)),e.patches_&&_1("Patches").generateReplacementPatches_(n[hc].base_,t,e.patches_,e.inversePatches_)):t=$3(e,n,[]),j8(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Yle?t:void 0}function $3(t,e,n){if(S5(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[hc];if(!i)return D3(e,(s,o)=>sZ(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return j3(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),D3(o,(l,c)=>sZ(t,i,s,l,c,n,a),r),j3(t,s,!1),n&&t.patches_&&_1("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function sZ(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=S5(i);if(!(a&&!o)){if(Bw(i)){const l=s&&e&&e.type_!==3&&!D8(e.assigned_,r)?s.concat(r):void 0,c=$3(t,i,l);if(Zle(n,r,c),Bw(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(v1(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;$3(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(DA(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&j3(t,i)}}}function j3(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&IU(e,n)}function hCe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Jle(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=PU;n&&(i=[r],s=dk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var PU={get(t,e){if(e===hc)return t;const n=G0(t);if(!D8(n,e))return dCe(t,n,e);const r=n[e];return t.finalized_||!v1(r)?r:r===j6(t.base_,e)?(F6(t),t.copy_[e]=z8(r,t)):r},has(t,e){return e in G0(t)},ownKeys(t){return Reflect.ownKeys(G0(t))},set(t,e,n){const r=Qle(G0(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=j6(G0(t),e),s=i?.[hc];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(oCe(n,i)&&(n!==void 0||D8(t.base_,e)))return!0;F6(t),V8(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return j6(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,F6(t),V8(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=G0(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Ku(11)},getPrototypeOf(t){return uk(t.base_)},setPrototypeOf(){Ku(12)}},dk={};D3(PU,(t,e)=>{dk[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});dk.deleteProperty=function(t,e){return dk.set.call(this,t,e,void 0)};dk.set=function(t,e,n){return PU.set.call(this,t[0],e,n,t[0])};function j6(t,e){const n=t[hc];return(n?G0(n):t)[e]}function dCe(t,e,n){const r=Qle(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Qle(t,e){if(!(e in t))return;let n=uk(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=uk(n)}}function V8(t){t.modified_||(t.modified_=!0,t.parent_&&V8(t.parent_))}function F6(t){t.copy_||(t.copy_=$8(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fCe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Ku(6),r!==void 0&&typeof r!="function"&&Ku(7);let i;if(v1(e)){const s=rZ(this),o=z8(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?j8(s):F8(s)}return nZ(s,r),iZ(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Yle&&(i=void 0),this.autoFreeze_&&IU(i,!0),r){const s=[],o=[];_1("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Ku(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){v1(t)||Ku(8),Bw(t)&&(t=pCe(t));const e=rZ(this),n=z8(t,void 0);return n[hc].isManual_=!0,F8(e),n}finishDraft(t,e){const n=t&&t[hc];(!n||!n.isManual_)&&Ku(9);const{scope_:r}=n;return nZ(r,e),iZ(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=_1("Patches").applyPatches_;return Bw(t)?r(t,e):this.produce(t,i=>r(i,e))}};function z8(t,e){const n=DA(t)?_1("MapSet").proxyMap_(t,e):E5(t)?_1("MapSet").proxySet_(t,e):hCe(t,e);return(e?e.scope_:Jle()).drafts_.push(n),n}function pCe(t){return Bw(t)||Ku(10,t),ece(t)}function ece(t){if(!v1(t)||S5(t))return t;const e=t[hc];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=$8(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=$8(t,!0);return D3(n,(i,s)=>{Zle(n,i,ece(s))},r),e&&(e.finalized_=!1),n}var mCe=new fCe,gCe=mCe.produce;const yCe=t=>(e,n,r)=>(r.setState=(i,s,...o)=>{const a=typeof i=="function"?gCe(i):i;return e(a,s,...o)},t(r.setState,n,r)),G2=yCe,Es=po()(G2((t,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,rawGPSHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,navigationMode:"free",config:{centerOnUser:!0},fetchPassivePosition:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{t(r=>{r.tracking||(r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy)})},()=>{},{enableHighAccuracy:!1,maximumAge:6e4,timeout:1e4})},startTracking:()=>{t(n=>{n.tracking=!0})},stopTracking:()=>{t(n=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),n.tracking=!1,n.speed=null,n.headingSource=null,n.heading=null,n.smoothHeading=null,n.rawGPSHeading=null,n.watchId=null,n.navigationMode="free"})},updatePosition:n=>{t(r=>{r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy,r.speed=n.coords.speed,r.rawGPSHeading=n.coords.heading,n.coords.accuracy!==null&&n.coords.accuracy<20?n.coords.heading!==null&&n.coords.speed!==null&&n.coords.speed>.5?r.headingSource="gps":r.headingSource="compass":r.headingSource=null})},setSmoothedHeading:n=>{t(r=>{r.smoothHeading=n,r.heading=n})},setWatchId:n=>{t(r=>{r.watchId=n})},resetFirstFix:()=>{t(n=>{n.firstFix=!1})},setNavigationMode:n=>{t(r=>{r.navigationMode=n})},toggleNavigationMode:()=>{t(n=>{n.navigationMode=n.navigationMode==="free"?"headingUp":"free"})}}))),Py={Kansenkaart:{name:"Kansenkaart",factory:async()=>{const{createKansenkaartLayerOL:t}=await _e(async()=>{const{createKansenkaartLayerOL:e}=await import("./kansenkaartOL-Cg4hC-5P.js");return{createKansenkaartLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:t}=await _e(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createAHNLayerOL:e}},[]);return t()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:t}=await _e(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createGeomorfologieLayerOL:e}},[]);return t()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:t}=await _e(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createBodemkaartLayerOL:e}},[]);return t()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:t}=await _e(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createIKAWLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:t}=await _e(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createFAMKESteentijdLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE IJzertijd":{name:"FAMKE IJzertijd",factory:async()=>{const{createFAMKEIJzertijdLayerOL:t}=await _e(async()=>{const{createFAMKEIJzertijdLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createFAMKEIJzertijdLayerOL:e}},[]);return t()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:t}=await _e(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createEssenLayerOL:e}},[]);return t()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:t}=await _e(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createRijksmonumentenLayerOL:e}},[]);return t()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:t}=await _e(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return t()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:t}=await _e(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createWerelderfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:t}=await _e(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-DvqpJ59I.js");return{createTerpenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:t}=await _e(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-BhvQ3En5.js");return{createLiniesLayerOL:e}},[]);return t()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:t}=await _e(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-BhvQ3En5.js");return{createInundatiesLayerOL:e}},[]);return t()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:t}=await _e(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-BhvQ3En5.js");return{createMilitaireObjectenLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:t}=await _e(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo800ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:t}=await _e(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo100ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:t}=await _e(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:t}=await _e(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo1500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:t}=await _e(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo2750vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:t}=await _e(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo5500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:t}=await _e(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-CqF0BzaP.js");return{createPaleo9000vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:t}=await _e(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-B0WHpjG1.js");return{createReligieusErfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:t}=await _e(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-CetsxWHl.js");return{createAHN4ColorElevationLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:t}=await _e(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-CetsxWHl.js");return{createAHN4HillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:t}=await _e(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-CetsxWHl.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade Kleur":{name:"AHN4 Hillshade Kleur",factory:async()=>{const{createAHN4ShadedReliefLayerOL:t}=await _e(async()=>{const{createAHN4ShadedReliefLayerOL:e}=await import("./hillshadeLayers-CetsxWHl.js");return{createAHN4ShadedReliefLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:t}=await _e(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createGewaspercelenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:t}=await _e(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createKadastraleKaartLayerOL:e}},[]);return t()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:t}=await _e(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createScheepswrakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:t}=await _e(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createWoonheuvelsLayerOL:e}},[]);return t()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:t}=await _e(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./romeinseFortenOL-CpqpZ30H.js");return{createRomeinseFortenLayerOL:e}},__vite__mapDeps([0,1]));return t()},immediateLoad:!1},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:t}=await _e(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createWindmolensLayerOL:e}},[]);return t()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:t}=await _e(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createErfgoedlijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:t}=await _e(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createOudeKernenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenPuntenLayerOL:t}=await _e(async()=>{const{createRelictenPuntenLayerOL:e}=await import("./relictenGelderlandOL-DWTVI4oN.js");return{createRelictenPuntenLayerOL:e}},[]);return t()},immediateLoad:!1},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:t}=await _e(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:t}=await _e(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:t}=await _e(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-CKvFi1iY.js");return{createVerdronkenDorpenLayerOL:e}},[]);return t()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:t}=await _e(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:t}=await _e(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKRomeinsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:t}=await _e(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKSteentijdLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:t}=await _e(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKVroegeMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:t}=await _e(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKLateMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:t}=await _e(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-CPAJVxoo.js");return{createAMKOverigLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:t}=await _e(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-Cy-wswXR.js");return{createRomeinseWegenLayerOL:e}},[]);return t()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:t}=await _e(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-Cy-wswXR.js");return{createRomeinseWegenWereldLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:t}=await _e(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-v7_AOFZ0.js");return{createKastelenLayerOL:e}},__vite__mapDeps([2,1]));return t()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:t}=await _e(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-DpyPsP3c.js");return{createRuinesLayerOL:e}},__vite__mapDeps([3,1]));return t()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:t}=await _e(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-Bq2SgeZu.js");return{createVeengebiedenLayerOL:e}},[]);return t()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:t}=await _e(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-Zh38Pk59.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([4,1]));return t()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:t}=await _e(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-CdpHp7wU.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([5,1]));return t()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:t}=await _e(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-BcD_dtNI.js");return{createUIKAVVlakkenLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:t}=await _e(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-Bnw6WUCk.js");return{createUIKAVBufferlaagLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:t}=await _e(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-K_Ky1uax.js");return{createUIKAVExpertLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:t}=await _e(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-0djnG4cf.js");return{createUIKAVUiterwaardenLayerOL:e}},[]);return t()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:t}=await _e(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-CThq25hq.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([6,1]));return t()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:t}=await _e(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-Sl1YRNIL.js");return{createMuseaLayerOL:e}},__vite__mapDeps([7,1]));return t()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:t}=await _e(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-CXPAKcMO.js");return{createStrandjesLayerOL:e}},[]);return t()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:t}=await _e(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-BOjYcbQe.js");return{createParkenLayerOL:e}},[]);return t()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:t}=await _e(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-CG2WZL3D.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([8,1]));return t()},immediateLoad:!1},Ruiterpaden:{name:"Ruiterpaden",factory:async()=>{const{createRuiterpadenLayerOL:t}=await _e(async()=>{const{createRuiterpadenLayerOL:e}=await import("./ruiterpadenOL-blr1IELp.js");return{createRuiterpadenLayerOL:e}},[]);return t()},immediateLoad:!1},Laarzenpaden:{name:"Laarzenpaden",factory:async()=>{const{createLaarzenpadenLayerOL:t}=await _e(async()=>{const{createLaarzenpadenLayerOL:e}=await import("./laarzenpadenOL-B6ckJTS6.js");return{createLaarzenpadenLayerOL:e}},[]);return t()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:t}=await _e(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-DOxC-KDM.js");return{createFossielenLayerOL:e}},__vite__mapDeps([9,10,1]));return t()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:t}=await _e(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-BkKPy4dQ.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([11,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:t}=await _e(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-hOU5dnhP.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([12,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:t}=await _e(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-wCS0r5o4.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([13,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:t}=await _e(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-D8NX1upF.js");return{createFossielHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:t}=await _e(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-BgZKTNXF.js");return{createMineralenHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:t}=await _e(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-abUris8_.js");return{createGoudrivierenLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:t}=await _e(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-DY0kLeYX.js");return{createBunkersLayerOL:e}},__vite__mapDeps([14,1]));return t()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:t}=await _e(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-BxQ6Zn2s.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([15,1]));return t()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:t}=await _e(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-BnWMOB95.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([16,1]));return t()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:t}=await _e(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-BQmBa3fV.js");return{createVliegveldenLayerOL:e}},[]);return t()},immediateLoad:!1}};function vCe(){return Object.values(Py).filter(t=>t.immediateLoad&&t.platform!=="arcgis")}const ji=po()(G2((t,e)=>({map:null,arcgisMap:null,arcgisView:null,arcgisInitialized:!1,rotation:0,rotationEnabled:!0,setMap:n=>{t(r=>{r.map=n})},setArcGISMap:(n,r)=>{t(i=>{i.arcgisMap=n,i.arcgisView=r,i.arcgisInitialized=!0})},setRotation:n=>{t(r=>{if(r.rotation=n,r.map&&r.rotationEnabled){const i=n*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{t(n=>{n.rotationEnabled=!0})},disableRotation:()=>{t(n=>{n.rotationEnabled=!1,n.rotation=0,n.map&&n.map.getView().animate({rotation:0,duration:500})})}}))),Vs=po()(G2((t,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,"FAMKE IJzertijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Archeo Onderzoeken":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN4 Hillshade Kleur":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Ruiterpaden:!1,Laarzenpaden:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN4 Hillshade Kleur":.8,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"FAMKE Steentijd":.6,"FAMKE IJzertijd":.6,Essen:.6,Terpen:.7,"AMK Monumenten":.45,"AMK Romeins":.6,"AMK Steentijd":.6,"AMK Vroege ME":.6,"AMK Late ME":.6,"AMK Overig":.6,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},arcgisLayers:{},toggleLayer:n=>{const r=e(),i=!r.visible[n];t(a=>{a.visible[n]=i}),Py[n]?.platform==="arcgis"?i&&!r.arcgisLayers[n]?e().loadLayer(n):r.arcgisLayers[n]&&(r.arcgisLayers[n].visible=i):i&&!r.layers[n]?e().loadLayer(n):r.layers[n]&&r.layers[n].setVisible(i)},setLayerVisibility:(n,r)=>{const i=e(),o=Py[n]?.platform==="arcgis";t(l=>{if(l.visible[n]=r,o){const c=l.arcgisLayers[n];c&&(c.visible=r)}else{const c=l.layers[n];c&&c.setVisible(r)}});const a=o?i.arcgisLayers[n]:i.layers[n];r&&!a&&e().loadLayer(n)},setLayerOpacity:(n,r)=>{const s=Py[n]?.platform==="arcgis";t(o=>{if(o.opacity[n]=r,s){const a=o.arcgisLayers[n];a&&(a.opacity=r)}else{const a=o.layers[n];a&&a.setOpacity(r)}})},registerLayer:(n,r)=>{t(i=>{i.layers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&r.setVisible(i.visible[n]),i.opacity[n]!==void 0&&r.setOpacity(i.opacity[n])})},registerArcGISLayer:(n,r)=>{t(i=>{i.arcgisLayers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&(r.visible=i.visible[n]),i.opacity[n]!==void 0&&(r.opacity=i.opacity[n])})},unregisterLayer:n=>{t(r=>{delete r.layers[n],delete r.arcgisLayers[n],delete r.loadingState[n]})},loadLayer:async n=>{const r=e(),i=Py[n];if(!i){console.warn(` Layer "${n}" not found in registry`);return}const s=i.platform==="arcgis";if(r.loadingState[n]==="loading"||s&&r.arcgisLayers[n]||!s&&r.layers[n])return;const o=ji.getState();if(s){if(!o.arcgisMap||!o.arcgisInitialized){console.warn(` Cannot load ArcGIS layer "${n}": ArcGIS map not initialized`);return}}else if(!o.map){console.warn(` Cannot load layer "${n}": map not initialized`);return}t(a=>{a.loadingState[n]="loading"}),console.log(` Loading ${s?"ArcGIS":"OL"} layer: ${n}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const l=e();if(s){const c=a;c.visible=l.visible[n]??!1,l.opacity[n]!==void 0&&(c.opacity=l.opacity[n]),o.arcgisMap.add(c),t(u=>{u.arcgisLayers[n]=c,u.loadingState[n]="loaded"})}else{const c=a;c.setVisible(l.visible[n]??!1),l.opacity[n]!==void 0&&c.setOpacity(l.opacity[n]),o.map.addLayer(c),t(u=>{u.layers[n]=c,u.loadingState[n]="loaded"})}console.log(` Layer loaded: ${n}`)}catch(a){console.error(` Failed to load layer "${n}":`,a),t(l=>{l.loadingState[n]="error"})}}}))),zr=po()(G2((t,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,monumentSearchOpen:!1,monumentFilterOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstFormPhoto:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,routeDashboardOpen:!1,collapsedCategories:new Set,closeAllPanels:()=>{t(n=>{n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1})},toggleLayerControl:()=>{t(n=>{n.layerControlOpen=!n.layerControlOpen})},toggleLegend:()=>{t(n=>{n.legendOpen=!n.legendOpen})},toggleBackgroundsPanel:()=>{t(n=>{const r=n.backgroundsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{t(n=>{const r=n.themesPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{t(n=>{const r=n.settingsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{t(n=>{const r=n.infoPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.infoPanelOpen=!0)})},togglePresetsPanel:()=>{t(n=>{const r=n.presetsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.presetsPanelOpen=!0)})},toggleCategory:n=>{t(r=>{r.collapsedCategories.has(n)?r.collapsedCategories.delete(n):r.collapsedCategories.add(n)})},setLayerControlOpen:n=>{t(r=>{r.layerControlOpen=n})},setLegendOpen:n=>{t(r=>{r.legendOpen=n})},openVondstForm:(n,r)=>{t(i=>{i.backgroundsPanelOpen=!1,i.themesPanelOpen=!1,i.settingsPanelOpen=!1,i.infoPanelOpen=!1,i.presetsPanelOpen=!1,i.vondstFormOpen=!0,i.vondstFormLocation=n||null,i.vondstFormPhoto=r||null})},closeVondstForm:()=>{t(n=>{n.vondstFormOpen=!1,n.vondstFormLocation=null,n.vondstFormPhoto=null})},toggleVondstDashboard:()=>{t(n=>{const r=n.vondstDashboardOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!1})},openAddPointModal:(n,r)=>{t(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=n,i.addPointModalLocation=r})},closeAddPointModal:()=>{t(n=>{n.addPointModalOpen=!1,n.addPointModalLayerId=null,n.addPointModalLocation=null})},openLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!1})},openLayerDashboard:n=>{t(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=n,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{t(n=>{n.layerDashboardOpen=!1,n.layerDashboardLayerId=null})},toggleRouteDashboard:()=>{t(n=>{n.routeDashboardOpen=!n.routeDashboardOpen})},toggleMonumentSearch:()=>{t(n=>{const r=n.monumentSearchOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentSearchOpen=!r})},closeMonumentSearch:()=>{t(n=>{n.monumentSearchOpen=!1})},toggleMonumentFilter:()=>{t(n=>{const r=n.monumentFilterOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.monumentFilterOpen=!0)})},closeMonumentFilter:()=>{t(n=>{n.monumentFilterOpen=!1})}}))),_Ce=()=>{};var oZ={};const tce=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xCe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[u],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tce(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xCe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new wCe;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wCe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bCe=function(t){const e=tce(t);return nce.encodeByteArray(e,!0)},F3=function(t){return bCe(t).replace(/\./g,"")},rce=function(t){try{return nce.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ice(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ECe=()=>ice().__FIREBASE_DEFAULTS__,SCe=()=>{if(typeof process>"u"||typeof oZ>"u")return;const t=oZ.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TCe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rce(t[1]);return e&&JSON.parse(e)},T5=()=>{try{return _Ce()||ECe()||SCe()||TCe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sce=t=>T5()?.emulatorHosts?.[t],oce=t=>{const e=sce(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ace=()=>T5()?.config,lce=t=>T5()?.[`_${t}`];let kCe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ev(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function RU(t){return(await fetch(t,{credentials:"include"})).ok}function cce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[F3(JSON.stringify(n)),F3(JSON.stringify(o)),""].join(".")}const HS={};function ACe(){const t={prod:[],emulator:[]};for(const e of Object.keys(HS))HS[e]?t.emulator.push(e):t.prod.push(e);return t}function ICe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let aZ=!1;function CU(t,e){if(typeof window>"u"||typeof document>"u"||!ev(window.location.host)||HS[t]===e||HS[t]||aZ)return;HS[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=ACe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{aZ=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=ICe(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),b=document.getElementById(x)||document.createElement("a"),T=n("preprendIcon"),A=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),u(b,x);const P=c();l(A,T),I.append(A,v,b,P),document.body.appendChild(I)}s?(v.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PCe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bs())}function uce(){const t=T5()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RCe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CCe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function MCe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NCe(){const t=Bs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hce(){return!uce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dce(){return!uce()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function fce(){try{return typeof indexedDB=="object"}catch{return!1}}function OCe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const LCe="FirebaseError";class jd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LCe,Object.setPrototypeOf(this,jd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$A.prototype.create)}}class $A{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DCe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jd(i,a,r)}}function DCe(t,e){return t.replace($Ce,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const $Ce=/\{\$([^}]+)}/g;function jCe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function x1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lZ(s)&&lZ(o)){if(!x1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lZ(t){return t!==null&&typeof t=="object"}function jA(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function FCe(t,e){const n=new VCe(t,e);return n.subscribe.bind(n)}class VCe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zCe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=V6),i.error===void 0&&(i.error=V6),i.complete===void 0&&(i.complete=V6);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zCe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function V6(){}function ho(t){return t&&t._delegate?t._delegate:t}class Ag{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const B0="[DEFAULT]";class UCe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kCe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BCe(e))try{this.getOrInitializeService({instanceIdentifier:B0})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=B0){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=B0){return this.instances.has(e)}getOptions(e=B0){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GCe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=B0){return this.component?this.component.multipleInstances?e:B0:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GCe(t){return t===B0?void 0:t}function BCe(t){return t.instantiationMode==="EAGER"}class WCe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UCe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(er||(er={}));const HCe={debug:er.DEBUG,verbose:er.VERBOSE,info:er.INFO,warn:er.WARN,error:er.ERROR,silent:er.SILENT},qCe=er.INFO,KCe={[er.DEBUG]:"log",[er.VERBOSE]:"log",[er.INFO]:"info",[er.WARN]:"warn",[er.ERROR]:"error"},YCe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KCe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class MU{constructor(e){this.name=e,this._logLevel=qCe,this._logHandler=YCe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HCe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,er.DEBUG,...e),this._logHandler(this,er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,er.VERBOSE,...e),this._logHandler(this,er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,er.INFO,...e),this._logHandler(this,er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,er.WARN,...e),this._logHandler(this,er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,er.ERROR,...e),this._logHandler(this,er.ERROR,...e)}}const XCe=(t,e)=>e.some(n=>t instanceof n);let cZ,uZ;function ZCe(){return cZ||(cZ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JCe(){return uZ||(uZ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pce=new WeakMap,U8=new WeakMap,mce=new WeakMap,z6=new WeakMap,NU=new WeakMap;function QCe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(dg(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pce.set(n,t)}).catch(()=>{}),NU.set(e,t),e}function eMe(t){if(U8.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});U8.set(t,e)}let G8={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return U8.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mce.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tMe(t){G8=t(G8)}function nMe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(U6(this),e,...n);return mce.set(r,e.sort?e.sort():[e]),dg(r)}:JCe().includes(t)?function(...e){return t.apply(U6(this),e),dg(pce.get(this))}:function(...e){return dg(t.apply(U6(this),e))}}function rMe(t){return typeof t=="function"?nMe(t):(t instanceof IDBTransaction&&eMe(t),XCe(t,ZCe())?new Proxy(t,G8):t)}function dg(t){if(t instanceof IDBRequest)return QCe(t);if(z6.has(t))return z6.get(t);const e=rMe(t);return e!==t&&(z6.set(t,e),NU.set(e,t)),e}const U6=t=>NU.get(t);function iMe(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=dg(o);return r&&o.addEventListener("upgradeneeded",l=>{r(dg(o.result),l.oldVersion,l.newVersion,dg(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const sMe=["get","getKey","getAll","getAllKeys","count"],oMe=["put","add","delete","clear"],G6=new Map;function hZ(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(G6.get(e))return G6.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=oMe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sMe.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return G6.set(e,s),s}tMe(t=>({...t,get:(e,n,r)=>hZ(e,n)||t.get(e,n,r),has:(e,n)=>!!hZ(e,n)||t.has(e,n)}));class aMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lMe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lMe(t){return t.getComponent()?.type==="VERSION"}const B8="@firebase/app",dZ="0.14.6";const cp=new MU("@firebase/app"),cMe="@firebase/app-compat",uMe="@firebase/analytics-compat",hMe="@firebase/analytics",dMe="@firebase/app-check-compat",fMe="@firebase/app-check",pMe="@firebase/auth",mMe="@firebase/auth-compat",gMe="@firebase/database",yMe="@firebase/data-connect",vMe="@firebase/database-compat",_Me="@firebase/functions",xMe="@firebase/functions-compat",wMe="@firebase/installations",bMe="@firebase/installations-compat",EMe="@firebase/messaging",SMe="@firebase/messaging-compat",TMe="@firebase/performance",kMe="@firebase/performance-compat",AMe="@firebase/remote-config",IMe="@firebase/remote-config-compat",PMe="@firebase/storage",RMe="@firebase/storage-compat",CMe="@firebase/firestore",MMe="@firebase/ai",NMe="@firebase/firestore-compat",OMe="firebase",LMe="12.6.0";const W8="[DEFAULT]",DMe={[B8]:"fire-core",[cMe]:"fire-core-compat",[hMe]:"fire-analytics",[uMe]:"fire-analytics-compat",[fMe]:"fire-app-check",[dMe]:"fire-app-check-compat",[pMe]:"fire-auth",[mMe]:"fire-auth-compat",[gMe]:"fire-rtdb",[yMe]:"fire-data-connect",[vMe]:"fire-rtdb-compat",[_Me]:"fire-fn",[xMe]:"fire-fn-compat",[wMe]:"fire-iid",[bMe]:"fire-iid-compat",[EMe]:"fire-fcm",[SMe]:"fire-fcm-compat",[TMe]:"fire-perf",[kMe]:"fire-perf-compat",[AMe]:"fire-rc",[IMe]:"fire-rc-compat",[PMe]:"fire-gcs",[RMe]:"fire-gcs-compat",[CMe]:"fire-fst",[NMe]:"fire-fst-compat",[MMe]:"fire-vertex","fire-js":"fire-js",[OMe]:"fire-js-all"};const V3=new Map,$Me=new Map,H8=new Map;function fZ(t,e){try{t.container.addComponent(e)}catch(n){cp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function w1(t){const e=t.name;if(H8.has(e))return cp.debug(`There were multiple attempts to register component ${e}.`),!1;H8.set(e,t);for(const n of V3.values())fZ(n,t);for(const n of $Me.values())fZ(n,t);return!0}function k5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nc(t){return t==null?!1:t.settings!==void 0}const jMe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fg=new $A("app","Firebase",jMe);class FMe{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ag("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fg.create("app-deleted",{appName:this._name})}}const tv=LMe;function gce(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:W8,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw fg.create("bad-app-name",{appName:String(i)});if(n||(n=ace()),!n)throw fg.create("no-options");const s=V3.get(i);if(s){if(x1(n,s.options)&&x1(r,s.config))return s;throw fg.create("duplicate-app",{appName:i})}const o=new WCe(i);for(const l of H8.values())o.addComponent(l);const a=new FMe(n,r,o);return V3.set(i,a),a}function OU(t=W8){const e=V3.get(t);if(!e&&t===W8&&ace())return gce();if(!e)throw fg.create("no-app",{appName:t});return e}function md(t,e,n){let r=DMe[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cp.warn(o.join(" "));return}w1(new Ag(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const VMe="firebase-heartbeat-database",zMe=1,fk="firebase-heartbeat-store";let B6=null;function yce(){return B6||(B6=iMe(VMe,zMe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fk)}catch(n){console.warn(n)}}}}).catch(t=>{throw fg.create("idb-open",{originalErrorMessage:t.message})})),B6}async function UMe(t){try{const n=(await yce()).transaction(fk),r=await n.objectStore(fk).get(vce(t));return await n.done,r}catch(e){if(e instanceof jd)cp.warn(e.message);else{const n=fg.create("idb-get",{originalErrorMessage:e?.message});cp.warn(n.message)}}}async function pZ(t,e){try{const r=(await yce()).transaction(fk,"readwrite");await r.objectStore(fk).put(e,vce(t)),await r.done}catch(n){if(n instanceof jd)cp.warn(n.message);else{const r=fg.create("idb-set",{originalErrorMessage:n?.message});cp.warn(r.message)}}}function vce(t){return`${t.name}!${t.options.appId}`}const GMe=1024,BMe=30;class WMe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qMe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=mZ();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>BMe){const i=KMe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cp.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=mZ(),{heartbeatsToSend:n,unsentEntries:r}=HMe(this._heartbeatsCache.heartbeats),i=F3(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return cp.warn(e),""}}}function mZ(){return new Date().toISOString().substring(0,10)}function HMe(t,e=GMe){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gZ(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gZ(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qMe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fce()?OCe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UMe(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pZ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pZ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gZ(t){return F3(JSON.stringify({version:2,heartbeats:t})).length}function KMe(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function YMe(t){w1(new Ag("platform-logger",e=>new aMe(e),"PRIVATE")),w1(new Ag("heartbeat",e=>new WMe(e),"PRIVATE")),md(B8,dZ,t),md(B8,dZ,"esm2020"),md("fire-js","")}YMe("");function _ce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XMe=_ce,xce=new $A("auth","Firebase",_ce());const z3=new MU("@firebase/auth");function ZMe(t,...e){z3.logLevel<=er.WARN&&z3.warn(`Auth (${tv}): ${t}`,...e)}function DC(t,...e){z3.logLevel<=er.ERROR&&z3.error(`Auth (${tv}): ${t}`,...e)}function Ad(t,...e){throw DU(t,...e)}function ih(t,...e){return DU(t,...e)}function LU(t,e,n){const r={...XMe(),[e]:n};return new $A("auth","Firebase",r).create(e,{appName:t.name})}function pg(t){return LU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JMe(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ad(t,"argument-error"),LU(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function DU(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xce.create(t,...e)}function kn(t,e,...n){if(!t)throw DU(e,...n)}function zf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw DC(e),new Error(e)}function up(t,e){t||zf(e)}function q8(){return typeof self<"u"&&self.location?.href||""}function QMe(){return yZ()==="http:"||yZ()==="https:"}function yZ(){return typeof self<"u"&&self.location?.protocol||null}function e3e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QMe()||CCe()||"connection"in navigator)?navigator.onLine:!0}function t3e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class FA{constructor(e,n){this.shortDelay=e,this.longDelay=n,up(n>e,"Short delay should be less than long delay!"),this.isMobile=PCe()||MCe()}get(){return e3e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $U(t,e){up(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class wce{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const n3e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const r3e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],i3e=new FA(3e4,6e4);function A5(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function B2(t,e,n,r,i={}){return bce(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=jA({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return RCe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ev(t.emulatorConfig.host)&&(c.credentials="include"),wce.fetch()(await Sce(t,t.config.apiHost,n,a),c)})}async function bce(t,e,n){t._canInitEmulator=!1;const r={...n3e,...e};try{const i=new s3e(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lR(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lR(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lR(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lR(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw LU(t,u,c);Ad(t,u)}}catch(i){if(i instanceof jd)throw i;Ad(t,"network-request-failed",{message:String(i)})}}async function Ece(t,e,n,r,i={}){const s=await B2(t,e,n,r,i);return"mfaPendingCredential"in s&&Ad(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Sce(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?$U(t.config,i):`${t.config.apiScheme}://${i}`;return r3e.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class s3e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ih(this.auth,"network-request-failed")),i3e.get())})}}function lR(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ih(t,e,r);return i.customData._tokenResponse=n,i}async function o3e(t,e){return B2(t,"POST","/v1/accounts:delete",e)}async function U3(t,e){return B2(t,"POST","/v1/accounts:lookup",e)}function qS(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a3e(t,e=!1){const n=ho(t),r=await n.getIdToken(e),i=jU(r);kn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qS(W6(i.auth_time)),issuedAtTime:qS(W6(i.iat)),expirationTime:qS(W6(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function W6(t){return Number(t)*1e3}function jU(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return DC("JWT malformed, contained fewer than 3 sections"),null;try{const i=rce(n);return i?JSON.parse(i):(DC("Failed to decode base64 JWT payload"),null)}catch(i){return DC("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vZ(t){const e=jU(t);return kn(e,"internal-error"),kn(typeof e.exp<"u","internal-error"),kn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function pk(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jd&&l3e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function l3e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class c3e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class K8{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qS(this.lastLoginAt),this.creationTime=qS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function G3(t){const e=t.auth,n=await t.getIdToken(),r=await pk(t,U3(e,{idToken:n}));kn(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?Tce(i.providerUserInfo):[],o=h3e(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new K8(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function u3e(t){const e=ho(t);await G3(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function h3e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Tce(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function d3e(t,e){const n=await bce(t,{},async()=>{const r=jA({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Sce(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ev(t.emulatorConfig.host)&&(l.credentials="include"),wce.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function f3e(t,e){return B2(t,"POST","/v2/accounts:revokeToken",A5(t,e))}class Ux{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){kn(e.idToken,"internal-error"),kn(typeof e.idToken<"u","internal-error"),kn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){kn(e.length!==0,"internal-error");const n=vZ(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(kn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await d3e(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ux;return r&&(kn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(kn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(kn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ux,this.toJSON())}_performRefresh(){return zf("not implemented")}}function tm(t,e){kn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qu{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new c3e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new K8(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await pk(this,this.stsTokenManager.getToken(this.auth,e));return kn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a3e(this,e)}reload(){return u3e(this)}_assign(e){this!==e&&(kn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qu({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){kn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await G3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nc(this.auth.app))return Promise.reject(pg(this.auth));const e=await this.getIdToken();return await pk(this,o3e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:v,stsTokenManager:x}=n;kn(h&&x,e,"internal-error");const b=Ux.fromJSON(this.name,x);kn(typeof h=="string",e,"internal-error"),tm(r,e.name),tm(i,e.name),kn(typeof f=="boolean",e,"internal-error"),kn(typeof g=="boolean",e,"internal-error"),tm(s,e.name),tm(o,e.name),tm(a,e.name),tm(l,e.name),tm(c,e.name),tm(u,e.name);const T=new Qu({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return v&&Array.isArray(v)&&(T.providerData=v.map(A=>({...A}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ux;i.updateFromServerResponse(n);const s=new Qu({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await G3(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];kn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Tce(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ux;a.updateFromIdToken(r);const l=new Qu({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new K8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}const _Z=new Map;function Uf(t){up(t instanceof Function,"Expected a class definition");let e=_Z.get(t);return e?(up(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_Z.set(t,e),e)}class kce{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kce.type="NONE";const xZ=kce;function $C(t,e,n){return`firebase:${t}:${e}:${n}`}class Gx{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$C(this.userKey,i.apiKey,s),this.fullPersistenceKey=$C("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await U3(this.auth,{idToken:e}).catch(()=>{});return n?Qu._fromGetAccountInfoResponse(this.auth,n,e):null}return Qu._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gx(Uf(xZ),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Uf(xZ);const o=$C(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await U3(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Qu._fromGetAccountInfoResponse(e,f,u)}else h=Qu._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Gx(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Gx(s,e,r))}}function wZ(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rce(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ace(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mce(e))return"Blackberry";if(Nce(e))return"Webos";if(Ice(e))return"Safari";if((e.includes("chrome/")||Pce(e))&&!e.includes("edge/"))return"Chrome";if(Cce(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Ace(t=Bs()){return/firefox\//i.test(t)}function Ice(t=Bs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pce(t=Bs()){return/crios\//i.test(t)}function Rce(t=Bs()){return/iemobile/i.test(t)}function Cce(t=Bs()){return/android/i.test(t)}function Mce(t=Bs()){return/blackberry/i.test(t)}function Nce(t=Bs()){return/webos/i.test(t)}function FU(t=Bs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function p3e(t=Bs()){return FU(t)&&!!window.navigator?.standalone}function m3e(){return NCe()&&document.documentMode===10}function Oce(t=Bs()){return FU(t)||Cce(t)||Nce(t)||Mce(t)||/windows phone/i.test(t)||Rce(t)}function Lce(t,e=[]){let n;switch(t){case"Browser":n=wZ(Bs());break;case"Worker":n=`${wZ(Bs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tv}/${r}`}class g3e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function y3e(t,e={}){return B2(t,"GET","/v2/passwordPolicy",A5(t,e))}const v3e=6;class _3e{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??v3e,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class x3e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bZ(this),this.idTokenSubscription=new bZ(this),this.beforeStateQueue=new g3e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xce,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Uf(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gx.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await U3(this,{idToken:e}),r=await Qu._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(nc(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return kn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await G3(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t3e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nc(this.app))return Promise.reject(pg(this));const n=e?ho(e):null;return n&&kn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&kn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nc(this.app)?Promise.reject(pg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nc(this.app)?Promise.reject(pg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Uf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y3e(this),n=new _3e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $A("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await f3e(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Uf(e)||this._popupRedirectResolver;kn(n,this,"argument-error"),this.redirectPersistenceManager=await Gx.create(this,[Uf(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(kn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return kn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lce(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZMe(`Error while retrieving App Check token: ${e.error}`),e?.token}}function VA(t){return ho(t)}class bZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=FCe(n=>this.observer=n)}get next(){return kn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let VU={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w3e(t){VU=t}function b3e(t){return VU.loadJS(t)}function E3e(){return VU.gapiScript}function S3e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function T3e(t,e){const n=k5(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(x1(s,e??{}))return i;Ad(i,"already-initialized")}return n.initialize({options:e})}function k3e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Uf);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function A3e(t,e,n){const r=VA(t);kn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Dce(e),{host:o,port:a}=I3e(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){kn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),kn(x1(c,r.config.emulator)&&x1(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,ev(o)?(RU(`${s}//${o}${l}`),CU("Auth",!0)):P3e()}function Dce(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function I3e(t){const e=Dce(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:EZ(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:EZ(o)}}}function EZ(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function P3e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class $ce{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zf("not implemented")}_getIdTokenResponse(e){return zf("not implemented")}_linkToIdToken(e,n){return zf("not implemented")}_getReauthenticationResolver(e){return zf("not implemented")}}async function Bx(t,e){return Ece(t,"POST","/v1/accounts:signInWithIdp",A5(t,e))}const R3e="http://localhost";class b1 extends $ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new b1(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ad("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new b1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bx(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bx(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bx(e,n)}buildRequest(){const e={requestUri:R3e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=jA(n)}return e}}class zU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class zA extends zU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class jm extends zA{constructor(){super("facebook.com")}static credential(e){return b1._fromParams({providerId:jm.PROVIDER_ID,signInMethod:jm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jm.credentialFromTaggedObject(e)}static credentialFromError(e){return jm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jm.credential(e.oauthAccessToken)}catch{return null}}}jm.FACEBOOK_SIGN_IN_METHOD="facebook.com";jm.PROVIDER_ID="facebook.com";class Yu extends zA{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return b1._fromParams({providerId:Yu.PROVIDER_ID,signInMethod:Yu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yu.credentialFromTaggedObject(e)}static credentialFromError(e){return Yu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yu.credential(n,r)}catch{return null}}}Yu.GOOGLE_SIGN_IN_METHOD="google.com";Yu.PROVIDER_ID="google.com";class Fm extends zA{constructor(){super("github.com")}static credential(e){return b1._fromParams({providerId:Fm.PROVIDER_ID,signInMethod:Fm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fm.credentialFromTaggedObject(e)}static credentialFromError(e){return Fm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fm.credential(e.oauthAccessToken)}catch{return null}}}Fm.GITHUB_SIGN_IN_METHOD="github.com";Fm.PROVIDER_ID="github.com";class Vm extends zA{constructor(){super("twitter.com")}static credential(e,n){return b1._fromParams({providerId:Vm.PROVIDER_ID,signInMethod:Vm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vm.credentialFromTaggedObject(e)}static credentialFromError(e){return Vm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vm.credential(n,r)}catch{return null}}}Vm.TWITTER_SIGN_IN_METHOD="twitter.com";Vm.PROVIDER_ID="twitter.com";async function C3e(t,e){return Ece(t,"POST","/v1/accounts:signUp",A5(t,e))}class Ig{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Qu._fromIdTokenResponse(e,r,i),o=SZ(r);return new Ig({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=SZ(r);return new Ig({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function SZ(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function M3e(t){if(nc(t.app))return Promise.reject(pg(t));const e=VA(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Ig({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await C3e(e,{returnSecureToken:!0}),r=await Ig._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class B3 extends jd{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,B3.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new B3(e,n,r,i)}}function jce(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?B3._fromErrorAndOperation(t,s,e,r):s})}async function N3e(t,e,n=!1){const r=await pk(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ig._forOperation(t,"link",r)}async function O3e(t,e,n=!1){const{auth:r}=t;if(nc(r.app))return Promise.reject(pg(r));const i="reauthenticate";try{const s=await pk(t,jce(r,i,e,t),n);kn(s.idToken,r,"internal-error");const o=jU(s.idToken);kn(o,r,"internal-error");const{sub:a}=o;return kn(t.uid===a,r,"user-mismatch"),Ig._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ad(r,"user-mismatch"),s}}async function L3e(t,e,n=!1){if(nc(t.app))return Promise.reject(pg(t));const r="signIn",i=await jce(t,r,e),s=await Ig._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function D3e(t,e,n,r){return ho(t).onIdTokenChanged(e,n,r)}function $3e(t,e,n){return ho(t).beforeAuthStateChanged(e,n)}function Fce(t,e,n,r){return ho(t).onAuthStateChanged(e,n,r)}function Vce(t){return ho(t).signOut()}const W3="__sak";class zce{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(W3,"1"),this.storage.removeItem(W3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const j3e=1e3,F3e=10;class Uce extends zce{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Oce(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);m3e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,F3e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},j3e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uce.type="LOCAL";const V3e=Uce;class Gce extends zce{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gce.type="SESSION";const Bce=Gce;function z3e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class I5{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new I5(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await z3e(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}I5.receivers=[];function UU(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class U3e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=UU("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function gd(){return window}function G3e(t){gd().location.href=t}function Wce(){return typeof gd().WorkerGlobalScope<"u"&&typeof gd().importScripts=="function"}async function B3e(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W3e(){return navigator?.serviceWorker?.controller||null}function H3e(){return Wce()?self:null}const Hce="firebaseLocalStorageDb",q3e=1,H3="firebaseLocalStorage",qce="fbase_key";class UA{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function P5(t,e){return t.transaction([H3],e?"readwrite":"readonly").objectStore(H3)}function K3e(){const t=indexedDB.deleteDatabase(Hce);return new UA(t).toPromise()}function Y8(){const t=indexedDB.open(Hce,q3e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(H3,{keyPath:qce})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(H3)?e(r):(r.close(),await K3e(),e(await Y8()))})})}async function TZ(t,e,n){const r=P5(t,!0).put({[qce]:e,value:n});return new UA(r).toPromise()}async function Y3e(t,e){const n=P5(t,!1).get(e),r=await new UA(n).toPromise();return r===void 0?null:r.value}function kZ(t,e){const n=P5(t,!0).delete(e);return new UA(n).toPromise()}const X3e=800,Z3e=3;class Kce{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Y8(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Z3e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wce()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=I5._getInstance(H3e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await B3e(),!this.activeServiceWorker)return;this.sender=new U3e(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W3e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Y8();return await TZ(e,W3,"1"),await kZ(e,W3),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>TZ(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Y3e(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kZ(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=P5(i,!1).getAll();return new UA(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X3e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kce.type="LOCAL";const J3e=Kce;new FA(3e4,6e4);function Yce(t,e){return e?Uf(e):(kn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class GU extends $ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bx(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bx(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bx(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Q3e(t){return L3e(t.auth,new GU(t),t.bypassAuthState)}function e4e(t){const{auth:e,user:n}=t;return kn(n,e,"internal-error"),O3e(n,new GU(t),t.bypassAuthState)}async function t4e(t){const{auth:e,user:n}=t;return kn(n,e,"internal-error"),N3e(n,new GU(t),t.bypassAuthState)}class Xce{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Q3e;case"linkViaPopup":case"linkViaRedirect":return t4e;case"reauthViaPopup":case"reauthViaRedirect":return e4e;default:Ad(this.auth,"internal-error")}}resolve(e){up(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){up(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const n4e=new FA(2e3,1e4);async function AZ(t,e,n){if(nc(t.app))return Promise.reject(ih(t,"operation-not-supported-in-this-environment"));const r=VA(t);JMe(t,e,zU);const i=Yce(r,n);return new Ry(r,"signInViaPopup",e,i).executeNotNull()}class Ry extends Xce{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ry.currentPopupAction&&Ry.currentPopupAction.cancel(),Ry.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return kn(e,this.auth,"internal-error"),e}async onExecution(){up(this.filter.length===1,"Popup operations only handle one event");const e=UU();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ih(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ih(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ry.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ih(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n4e.get())};e()}}Ry.currentPopupAction=null;const r4e="pendingRedirect",jC=new Map;class i4e extends Xce{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jC.get(this.auth._key());if(!e){try{const r=await s4e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jC.set(this.auth._key(),e)}return this.bypassAuthState||jC.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s4e(t,e){const n=l4e(e),r=a4e(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function o4e(t,e){jC.set(t._key(),e)}function a4e(t){return Uf(t._redirectPersistence)}function l4e(t){return $C(r4e,t.config.apiKey,t.name)}async function c4e(t,e,n=!1){if(nc(t.app))return Promise.reject(pg(t));const r=VA(t),i=Yce(r,e),o=await new i4e(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const u4e=600*1e3;class h4e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!d4e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Zce(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ih(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u4e&&this.cachedEventUids.clear(),this.cachedEventUids.has(IZ(e))}saveEventToCache(e){this.cachedEventUids.add(IZ(e)),this.lastProcessedEventTime=Date.now()}}function IZ(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zce({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function d4e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zce(t);default:return!1}}async function f4e(t,e={}){return B2(t,"GET","/v1/projects",e)}const p4e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m4e=/^https?/;async function g4e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f4e(t);for(const n of e)try{if(y4e(n))return}catch{}Ad(t,"unauthorized-domain")}function y4e(t){const e=q8(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!m4e.test(n))return!1;if(p4e.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const v4e=new FA(3e4,6e4);function PZ(){const t=gd().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _4e(t){return new Promise((e,n)=>{function r(){PZ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PZ(),n(ih(t,"network-request-failed"))},timeout:v4e.get()})}if(gd().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gd().gapi?.load)r();else{const i=S3e("iframefcb");return gd()[i]=()=>{gapi.load?r():n(ih(t,"network-request-failed"))},b3e(`${E3e()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw FC=null,e})}let FC=null;function x4e(t){return FC=FC||_4e(t),FC}const w4e=new FA(5e3,15e3),b4e="__/auth/iframe",E4e="emulator/auth/iframe",S4e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T4e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k4e(t){const e=t.config;kn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$U(e,E4e):`https://${t.config.authDomain}/${b4e}`,r={apiKey:e.apiKey,appName:t.name,v:tv},i=T4e.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${jA(r).slice(1)}`}async function A4e(t){const e=await x4e(t),n=gd().gapi;return kn(n,t,"internal-error"),e.open({where:document.body,url:k4e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S4e,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ih(t,"network-request-failed"),a=gd().setTimeout(()=>{s(o)},w4e.get());function l(){gd().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const I4e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P4e=500,R4e=600,C4e="_blank",M4e="http://localhost";class RZ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N4e(t,e,n,r=P4e,i=R4e){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...I4e,width:r.toString(),height:i.toString(),top:s,left:o},c=Bs().toLowerCase();n&&(a=Pce(c)?C4e:n),Ace(c)&&(e=e||M4e,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(p3e(c)&&a!=="_self")return O4e(e||"",a),new RZ(null);const h=window.open(e||"",a,u);kn(h,t,"popup-blocked");try{h.focus()}catch{}return new RZ(h)}function O4e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const L4e="__/auth/handler",D4e="emulator/auth/handler",$4e=encodeURIComponent("fac");async function CZ(t,e,n,r,i,s){kn(t.config.authDomain,t,"auth-domain-config-required"),kn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tv,eventId:i};if(e instanceof zU){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",jCe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof zA){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${$4e}=${encodeURIComponent(l)}`:"";return`${j4e(t)}?${jA(a).slice(1)}${c}`}function j4e({config:t}){return t.emulator?$U(t,D4e):`https://${t.authDomain}/${L4e}`}const H6="webStorageSupport";class F4e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bce,this._completeRedirectFn=c4e,this._overrideRedirectResult=o4e}async _openPopup(e,n,r,i){up(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await CZ(e,n,r,q8(),i);return N4e(e,s,UU())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await CZ(e,n,r,q8(),i);return G3e(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(up(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await A4e(e),r=new h4e(e);return n.register("authEvent",i=>(kn(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(H6,{type:H6},i=>{const s=i?.[0]?.[H6];s!==void 0&&n(!!s),Ad(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g4e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Oce()||Ice()||FU()}}const V4e=F4e;var MZ="@firebase/auth",NZ="1.12.0";class z4e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){kn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function U4e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function G4e(t){w1(new Ag("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;kn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lce(t)},c=new x3e(r,i,s,l);return k3e(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),w1(new Ag("auth-internal",e=>{const n=VA(e.getProvider("auth").getImmediate());return(r=>new z4e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),md(MZ,NZ,U4e(t)),md(MZ,NZ,"esm2020")}const B4e=300,W4e=lce("authIdTokenMaxAge")||B4e;let OZ=null;const H4e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>W4e)return;const i=n?.token;OZ!==i&&(OZ=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function q4e(t=OU()){const e=k5(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T3e(t,{popupRedirectResolver:V4e,persistence:[J3e,V3e,Bce]}),r=lce("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=H4e(s.toString());$3e(n,o,()=>o(n.currentUser)),D3e(n,a=>o(a))}}const i=sce("auth");return i&&A3e(n,`http://${i}`),n}function K4e(){return document.getElementsByTagName("head")?.[0]??document}w3e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ih("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",K4e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});G4e("Browser");var Y4e="firebase",X4e="12.7.0";md(Y4e,X4e,"app");var LZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var mg,Jce;(function(){var t;function e(C,N){function O(){}O.prototype=N.prototype,C.F=N.prototype,C.prototype=new O,C.prototype.constructor=C,C.D=function(j,V,G){for(var U=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)U[fe-2]=arguments[fe];return N.prototype[V].apply(j,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,N,O){O||(O=0);const j=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)j[V]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(V=0;V<16;++V)j[V]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=C.g[0],O=C.g[1],V=C.g[2];let G=C.g[3],U;U=N+(G^O&(V^G))+j[0]+3614090360&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(V^N&(O^V))+j[1]+3905402710&4294967295,G=N+(U<<12&4294967295|U>>>20),U=V+(O^G&(N^O))+j[2]+606105819&4294967295,V=G+(U<<17&4294967295|U>>>15),U=O+(N^V&(G^N))+j[3]+3250441966&4294967295,O=V+(U<<22&4294967295|U>>>10),U=N+(G^O&(V^G))+j[4]+4118548399&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(V^N&(O^V))+j[5]+1200080426&4294967295,G=N+(U<<12&4294967295|U>>>20),U=V+(O^G&(N^O))+j[6]+2821735955&4294967295,V=G+(U<<17&4294967295|U>>>15),U=O+(N^V&(G^N))+j[7]+4249261313&4294967295,O=V+(U<<22&4294967295|U>>>10),U=N+(G^O&(V^G))+j[8]+1770035416&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(V^N&(O^V))+j[9]+2336552879&4294967295,G=N+(U<<12&4294967295|U>>>20),U=V+(O^G&(N^O))+j[10]+4294925233&4294967295,V=G+(U<<17&4294967295|U>>>15),U=O+(N^V&(G^N))+j[11]+2304563134&4294967295,O=V+(U<<22&4294967295|U>>>10),U=N+(G^O&(V^G))+j[12]+1804603682&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(V^N&(O^V))+j[13]+4254626195&4294967295,G=N+(U<<12&4294967295|U>>>20),U=V+(O^G&(N^O))+j[14]+2792965006&4294967295,V=G+(U<<17&4294967295|U>>>15),U=O+(N^V&(G^N))+j[15]+1236535329&4294967295,O=V+(U<<22&4294967295|U>>>10),U=N+(V^G&(O^V))+j[1]+4129170786&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^V&(N^O))+j[6]+3225465664&4294967295,G=N+(U<<9&4294967295|U>>>23),U=V+(N^O&(G^N))+j[11]+643717713&4294967295,V=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(V^G))+j[0]+3921069994&4294967295,O=V+(U<<20&4294967295|U>>>12),U=N+(V^G&(O^V))+j[5]+3593408605&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^V&(N^O))+j[10]+38016083&4294967295,G=N+(U<<9&4294967295|U>>>23),U=V+(N^O&(G^N))+j[15]+3634488961&4294967295,V=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(V^G))+j[4]+3889429448&4294967295,O=V+(U<<20&4294967295|U>>>12),U=N+(V^G&(O^V))+j[9]+568446438&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^V&(N^O))+j[14]+3275163606&4294967295,G=N+(U<<9&4294967295|U>>>23),U=V+(N^O&(G^N))+j[3]+4107603335&4294967295,V=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(V^G))+j[8]+1163531501&4294967295,O=V+(U<<20&4294967295|U>>>12),U=N+(V^G&(O^V))+j[13]+2850285829&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^V&(N^O))+j[2]+4243563512&4294967295,G=N+(U<<9&4294967295|U>>>23),U=V+(N^O&(G^N))+j[7]+1735328473&4294967295,V=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(V^G))+j[12]+2368359562&4294967295,O=V+(U<<20&4294967295|U>>>12),U=N+(O^V^G)+j[5]+4294588738&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^V)+j[8]+2272392833&4294967295,G=N+(U<<11&4294967295|U>>>21),U=V+(G^N^O)+j[11]+1839030562&4294967295,V=G+(U<<16&4294967295|U>>>16),U=O+(V^G^N)+j[14]+4259657740&4294967295,O=V+(U<<23&4294967295|U>>>9),U=N+(O^V^G)+j[1]+2763975236&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^V)+j[4]+1272893353&4294967295,G=N+(U<<11&4294967295|U>>>21),U=V+(G^N^O)+j[7]+4139469664&4294967295,V=G+(U<<16&4294967295|U>>>16),U=O+(V^G^N)+j[10]+3200236656&4294967295,O=V+(U<<23&4294967295|U>>>9),U=N+(O^V^G)+j[13]+681279174&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^V)+j[0]+3936430074&4294967295,G=N+(U<<11&4294967295|U>>>21),U=V+(G^N^O)+j[3]+3572445317&4294967295,V=G+(U<<16&4294967295|U>>>16),U=O+(V^G^N)+j[6]+76029189&4294967295,O=V+(U<<23&4294967295|U>>>9),U=N+(O^V^G)+j[9]+3654602809&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^V)+j[12]+3873151461&4294967295,G=N+(U<<11&4294967295|U>>>21),U=V+(G^N^O)+j[15]+530742520&4294967295,V=G+(U<<16&4294967295|U>>>16),U=O+(V^G^N)+j[2]+3299628645&4294967295,O=V+(U<<23&4294967295|U>>>9),U=N+(V^(O|~G))+j[0]+4096336452&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~V))+j[7]+1126891415&4294967295,G=N+(U<<10&4294967295|U>>>22),U=V+(N^(G|~O))+j[14]+2878612391&4294967295,V=G+(U<<15&4294967295|U>>>17),U=O+(G^(V|~N))+j[5]+4237533241&4294967295,O=V+(U<<21&4294967295|U>>>11),U=N+(V^(O|~G))+j[12]+1700485571&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~V))+j[3]+2399980690&4294967295,G=N+(U<<10&4294967295|U>>>22),U=V+(N^(G|~O))+j[10]+4293915773&4294967295,V=G+(U<<15&4294967295|U>>>17),U=O+(G^(V|~N))+j[1]+2240044497&4294967295,O=V+(U<<21&4294967295|U>>>11),U=N+(V^(O|~G))+j[8]+1873313359&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~V))+j[15]+4264355552&4294967295,G=N+(U<<10&4294967295|U>>>22),U=V+(N^(G|~O))+j[6]+2734768916&4294967295,V=G+(U<<15&4294967295|U>>>17),U=O+(G^(V|~N))+j[13]+1309151649&4294967295,O=V+(U<<21&4294967295|U>>>11),U=N+(V^(O|~G))+j[4]+4149444226&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~V))+j[11]+3174756917&4294967295,G=N+(U<<10&4294967295|U>>>22),U=V+(N^(G|~O))+j[2]+718787259&4294967295,V=G+(U<<15&4294967295|U>>>17),U=O+(G^(V|~N))+j[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(V+(U<<21&4294967295|U>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+G&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const O=N-this.blockSize,j=this.C;let V=this.h,G=0;for(;G<N;){if(V==0)for(;G<=O;)i(this,C,G),G+=this.blockSize;if(typeof C=="string"){for(;G<N;)if(j[V++]=C.charCodeAt(G++),V==this.blockSize){i(this,j),V=0;break}}else for(;G<N;)if(j[V++]=C[G++],V==this.blockSize){i(this,j),V=0;break}}this.h=V,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var O=C.length-8;O<C.length;++O)C[O]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,O=0;O<4;++O)for(let j=0;j<32;j+=8)C[N++]=this.g[O]>>>j&255;return C};function s(C,N){var O=a;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=N(C)}function o(C,N){this.h=N;const O=[];let j=!0;for(let V=C.length-1;V>=0;V--){const G=C[V]|0;j&&G==N||(O[V]=G,j=!1)}this.g=O}var a={};function l(C){return-128<=C&&C<128?s(C,function(N){return new o([N|0],N<0?-1:0)}):new o([C|0],C<0?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return b(c(-C));const N=[];let O=1;for(let j=0;C>=O;j++)N[j]=C/O|0,O*=4294967296;return new o(N,0)}function u(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return b(u(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=c(Math.pow(N,8));let j=h;for(let G=0;G<C.length;G+=8){var V=Math.min(8,C.length-G);const U=parseInt(C.substring(G,G+V),N);V<8?(V=c(Math.pow(N,V)),j=j.j(V).add(c(U))):(j=j.j(O),j=j.add(c(U)))}return j}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();let C=0,N=1;for(let O=0;O<this.g.length;O++){const j=this.i(O);C+=(j>=0?j:4294967296+j)*N,N*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(x(this))return"-"+b(this).toString(C);const N=c(Math.pow(C,6));var O=this;let j="";for(;;){const V=P(O,N).g;O=T(O,V.j(N));let G=((O.g.length>0?O.g[0]:O.h)>>>0).toString(C);if(O=V,v(O))return G+j;for(;G.length<6;)G="0"+G;j=G+j}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=T(this,C),x(C)?-1:v(C)?0:1};function b(C){const N=C.g.length,O=[];for(let j=0;j<N;j++)O[j]=~C.g[j];return new o(O,~C.h).add(f)}t.abs=function(){return x(this)?b(this):this},t.add=function(C){const N=Math.max(this.g.length,C.g.length),O=[];let j=0;for(let V=0;V<=N;V++){let G=j+(this.i(V)&65535)+(C.i(V)&65535),U=(G>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);j=U>>>16,G&=65535,U&=65535,O[V]=U<<16|G}return new o(O,O[O.length-1]&-2147483648?-1:0)};function T(C,N){return C.add(b(N))}t.j=function(C){if(v(this)||v(C))return h;if(x(this))return x(C)?b(this).j(b(C)):b(b(this).j(C));if(x(C))return b(this.j(b(C)));if(this.l(g)<0&&C.l(g)<0)return c(this.m()*C.m());const N=this.g.length+C.g.length,O=[];for(var j=0;j<2*N;j++)O[j]=0;for(j=0;j<this.g.length;j++)for(let V=0;V<C.g.length;V++){const G=this.i(j)>>>16,U=this.i(j)&65535,fe=C.i(V)>>>16,Re=C.i(V)&65535;O[2*j+2*V]+=U*Re,A(O,2*j+2*V),O[2*j+2*V+1]+=G*Re,A(O,2*j+2*V+1),O[2*j+2*V+1]+=U*fe,A(O,2*j+2*V+1),O[2*j+2*V+2]+=G*fe,A(O,2*j+2*V+2)}for(C=0;C<N;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=N;C<2*N;C++)O[C]=0;return new o(O,0)};function A(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function I(C,N){this.g=C,this.h=N}function P(C,N){if(v(N))throw Error("division by zero");if(v(C))return new I(h,h);if(x(C))return N=P(b(C),N),new I(b(N.g),b(N.h));if(x(N))return N=P(C,b(N)),new I(b(N.g),N.h);if(C.g.length>30){if(x(C)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var O=f,j=N;j.l(C)<=0;)O=M(O),j=M(j);var V=F(O,1),G=F(j,1);for(j=F(j,2),O=F(O,2);!v(j);){var U=G.add(j);U.l(C)<=0&&(V=V.add(O),G=U),j=F(j,1),O=F(O,1)}return N=T(C,V.j(N)),new I(V,N)}for(V=h;C.l(N)>=0;){for(O=Math.max(1,Math.floor(C.m()/N.m())),j=Math.ceil(Math.log(O)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),G=c(O),U=G.j(N);x(U)||U.l(C)>0;)O-=j,G=c(O),U=G.j(N);v(G)&&(G=f),V=V.add(G),C=T(C,U)}return new I(V,C)}t.B=function(C){return P(this,C).h},t.and=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let j=0;j<N;j++)O[j]=this.i(j)&C.i(j);return new o(O,this.h&C.h)},t.or=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let j=0;j<N;j++)O[j]=this.i(j)|C.i(j);return new o(O,this.h|C.h)},t.xor=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let j=0;j<N;j++)O[j]=this.i(j)^C.i(j);return new o(O,this.h^C.h)};function M(C){const N=C.g.length+1,O=[];for(let j=0;j<N;j++)O[j]=C.i(j)<<1|C.i(j-1)>>>31;return new o(O,C.h)}function F(C,N){const O=N>>5;N%=32;const j=C.g.length-O,V=[];for(let G=0;G<j;G++)V[G]=N>0?C.i(G+O)>>>N|C.i(G+O+1)<<32-N:C.i(G+O);return new o(V,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Jce=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,mg=o}).apply(typeof LZ<"u"?LZ:typeof self<"u"?self:typeof window<"u"?window:{});var cR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qce,ZE,eue,VC,X8,tue,nue,rue;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof cR=="object"&&cR];for(var D=0;D<S.length;++D){var B=S[D];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(S,D){if(D)e:{var B=r;S=S.split(".");for(var Z=0;Z<S.length-1;Z++){var Ee=S[Z];if(!(Ee in B))break e;B=B[Ee]}S=S[S.length-1],Z=B[S],D=D(Z),D!=Z&&D!=null&&e(B,S,{configurable:!0,writable:!0,value:D})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(D){var B=[],Z;for(Z in D)Object.prototype.hasOwnProperty.call(D,Z)&&B.push([Z,D[Z]]);return B}});var s=s||{},o=this||self;function a(S){var D=typeof S;return D=="object"&&S!=null||D=="function"}function l(S,D,B){return S.call.apply(S.bind,arguments)}function c(S,D,B){return c=l,c.apply(null,arguments)}function u(S,D){var B=Array.prototype.slice.call(arguments,1);return function(){var Z=B.slice();return Z.push.apply(Z,arguments),S.apply(this,Z)}}function h(S,D){function B(){}B.prototype=D.prototype,S.Z=D.prototype,S.prototype=new B,S.prototype.constructor=S,S.Ob=function(Z,Ee,Fe){for(var _t=Array(arguments.length-2),Nn=2;Nn<arguments.length;Nn++)_t[Nn-2]=arguments[Nn];return D.prototype[Ee].apply(Z,_t)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function g(S){const D=S.length;if(D>0){const B=Array(D);for(let Z=0;Z<D;Z++)B[Z]=S[Z];return B}return[]}function v(S,D){for(let Z=1;Z<arguments.length;Z++){const Ee=arguments[Z];var B=typeof Ee;if(B=B!="object"?B:Ee?Array.isArray(Ee)?"array":B:"null",B=="array"||B=="object"&&typeof Ee.length=="number"){B=S.length||0;const Fe=Ee.length||0;S.length=B+Fe;for(let _t=0;_t<Fe;_t++)S[B+_t]=Ee[_t]}else S.push(Ee)}}class x{constructor(D,B){this.i=D,this.j=B,this.h=0,this.g=null}get(){let D;return this.h>0?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function b(S){o.setTimeout(()=>{throw S},0)}function T(){var S=C;let D=null;return S.g&&(D=S.g,S.g=S.g.next,S.g||(S.h=null),D.next=null),D}class A{constructor(){this.h=this.g=null}add(D,B){const Z=I.get();Z.set(D,B),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var I=new x(()=>new P,S=>S.reset());class P{constructor(){this.next=this.g=this.h=null}set(D,B){this.h=D,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,C=new A,N=()=>{const S=Promise.resolve(void 0);M=()=>{S.then(O)}};function O(){for(var S;S=T();){try{S.h.call(S.g)}catch(B){b(B)}var D=I;D.j(S),D.h<100&&(D.h++,S.next=D.g,D.g=S)}F=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(S,D){this.type=S,this.g=this.target=D,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,D=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const B=()=>{};o.addEventListener("test",B,D),o.removeEventListener("test",B,D)}catch{}return S})();function U(S){return/^[\s\xa0]*$/.test(S)}function fe(S,D){V.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,D)}h(fe,V),fe.prototype.init=function(S,D){const B=this.type=S.type,Z=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=D,D=S.relatedTarget,D||(B=="mouseover"?D=S.fromElement:B=="mouseout"&&(D=S.toElement)),this.relatedTarget=D,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Re="closure_listenable_"+(Math.random()*1e6|0),Be=0;function $e(S,D,B,Z,Ee){this.listener=S,this.proxy=null,this.src=D,this.type=B,this.capture=!!Z,this.ha=Ee,this.key=++Be,this.da=this.fa=!1}function pe(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function De(S,D,B){for(const Z in S)D.call(B,S[Z],Z,S)}function Me(S,D){for(const B in S)D.call(void 0,S[B],B,S)}function Q(S){const D={};for(const B in S)D[B]=S[B];return D}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(S,D){let B,Z;for(let Ee=1;Ee<arguments.length;Ee++){Z=arguments[Ee];for(B in Z)S[B]=Z[B];for(let Fe=0;Fe<W.length;Fe++)B=W[Fe],Object.prototype.hasOwnProperty.call(Z,B)&&(S[B]=Z[B])}}function ie(S){this.src=S,this.g={},this.h=0}ie.prototype.add=function(S,D,B,Z,Ee){const Fe=S.toString();S=this.g[Fe],S||(S=this.g[Fe]=[],this.h++);const _t=ve(S,D,Z,Ee);return _t>-1?(D=S[_t],B||(D.fa=!1)):(D=new $e(D,this.src,Fe,!!Z,Ee),D.fa=B,S.push(D)),D};function le(S,D){const B=D.type;if(B in S.g){var Z=S.g[B],Ee=Array.prototype.indexOf.call(Z,D,void 0),Fe;(Fe=Ee>=0)&&Array.prototype.splice.call(Z,Ee,1),Fe&&(pe(D),S.g[B].length==0&&(delete S.g[B],S.h--))}}function ve(S,D,B,Z){for(let Ee=0;Ee<S.length;++Ee){const Fe=S[Ee];if(!Fe.da&&Fe.listener==D&&Fe.capture==!!B&&Fe.ha==Z)return Ee}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Ke={};function Se(S,D,B,Z,Ee){if(Array.isArray(D)){for(let Fe=0;Fe<D.length;Fe++)Se(S,D[Fe],B,Z,Ee);return null}return B=ur(B),S&&S[Re]?S.J(D,B,a(Z)?!!Z.capture:!1,Ee):we(S,D,B,!1,Z,Ee)}function we(S,D,B,Z,Ee,Fe){if(!D)throw Error("Invalid event type");const _t=a(Ee)?!!Ee.capture:!!Ee;let Nn=yn(S);if(Nn||(S[qe]=Nn=new ie(S)),B=Nn.add(D,B,Z,_t,Fe),B.proxy)return B;if(Z=Dt(),B.proxy=Z,Z.src=S,Z.listener=B,S.addEventListener)G||(Ee=_t),Ee===void 0&&(Ee=!1),S.addEventListener(D.toString(),Z,Ee);else if(S.attachEvent)S.attachEvent($t(D.toString()),Z);else if(S.addListener&&S.removeListener)S.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Dt(){function S(B){return D.call(S.src,S.listener,B)}const D=fn;return S}function Ye(S,D,B,Z,Ee){if(Array.isArray(D))for(var Fe=0;Fe<D.length;Fe++)Ye(S,D[Fe],B,Z,Ee);else Z=a(Z)?!!Z.capture:!!Z,B=ur(B),S&&S[Re]?(S=S.i,Fe=String(D).toString(),Fe in S.g&&(D=S.g[Fe],B=ve(D,B,Z,Ee),B>-1&&(pe(D[B]),Array.prototype.splice.call(D,B,1),D.length==0&&(delete S.g[Fe],S.h--)))):S&&(S=yn(S))&&(D=S.g[D.toString()],S=-1,D&&(S=ve(D,B,Z,Ee)),(B=S>-1?D[S]:null)&&sn(B))}function sn(S){if(typeof S!="number"&&S&&!S.da){var D=S.src;if(D&&D[Re])le(D.i,S);else{var B=S.type,Z=S.proxy;D.removeEventListener?D.removeEventListener(B,Z,S.capture):D.detachEvent?D.detachEvent($t(B),Z):D.addListener&&D.removeListener&&D.removeListener(Z),(B=yn(D))?(le(B,S),B.h==0&&(B.src=null,D[qe]=null)):pe(S)}}}function $t(S){return S in Ke?Ke[S]:Ke[S]="on"+S}function fn(S,D){if(S.da)S=!0;else{D=new fe(D,this);const B=S.listener,Z=S.ha||S.src;S.fa&&sn(S),S=B.call(Z,D)}return S}function yn(S){return S=S[qe],S instanceof ie?S:null}var dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ur(S){return typeof S=="function"?S:(S[dt]||(S[dt]=function(D){return S.handleEvent(D)}),S[dt])}function jn(){j.call(this),this.i=new ie(this),this.M=this,this.G=null}h(jn,j),jn.prototype[Re]=!0,jn.prototype.removeEventListener=function(S,D,B,Z){Ye(this,S,D,B,Z)};function Un(S,D){var B,Z=S.G;if(Z)for(B=[];Z;Z=Z.G)B.push(Z);if(S=S.M,Z=D.type||D,typeof D=="string")D=new V(D,S);else if(D instanceof V)D.target=D.target||S;else{var Ee=D;D=new V(Z,S),ne(D,Ee)}Ee=!0;let Fe,_t;if(B)for(_t=B.length-1;_t>=0;_t--)Fe=D.g=B[_t],Ee=Qr(Fe,Z,!0,D)&&Ee;if(Fe=D.g=S,Ee=Qr(Fe,Z,!0,D)&&Ee,Ee=Qr(Fe,Z,!1,D)&&Ee,B)for(_t=0;_t<B.length;_t++)Fe=D.g=B[_t],Ee=Qr(Fe,Z,!1,D)&&Ee}jn.prototype.N=function(){if(jn.Z.N.call(this),this.i){var S=this.i;for(const D in S.g){const B=S.g[D];for(let Z=0;Z<B.length;Z++)pe(B[Z]);delete S.g[D],S.h--}}this.G=null},jn.prototype.J=function(S,D,B,Z){return this.i.add(String(S),D,!1,B,Z)},jn.prototype.K=function(S,D,B,Z){return this.i.add(String(S),D,!0,B,Z)};function Qr(S,D,B,Z){if(D=S.i.g[String(D)],!D)return!0;D=D.concat();let Ee=!0;for(let Fe=0;Fe<D.length;++Fe){const _t=D[Fe];if(_t&&!_t.da&&_t.capture==B){const Nn=_t.listener,ss=_t.ha||_t.src;_t.fa&&le(S.i,_t),Ee=Nn.call(ss,Z)!==!1&&Ee}}return Ee&&!Z.defaultPrevented}function go(S,D){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=c(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(D)>2147483647?-1:o.setTimeout(S,D||0)}function Ar(S){S.g=go(()=>{S.g=null,S.i&&(S.i=!1,Ar(S))},S.l);const D=S.h;S.h=null,S.m.apply(null,D)}class Ti extends j{constructor(D,B){super(),this.m=D,this.l=B,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Ar(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(S){j.call(this),this.h=S,this.g={}}h(Cs,j);var wt=[];function Xn(S){De(S.g,function(D,B){this.g.hasOwnProperty(B)&&sn(D)},S),S.g={}}Cs.prototype.N=function(){Cs.Z.N.call(this),Xn(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hr=o.JSON.stringify,Ft=o.JSON.parse,Ln=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function Qt(){}function Lo(){}var Vi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ms(){V.call(this,"d")}h(Ms,V);function Mn(){V.call(this,"c")}h(Mn,V);var ki={},He=null;function ke(){return He=He||new jn}ki.Ia="serverreachability";function Ae(S){V.call(this,ki.Ia,S)}h(Ae,V);function rn(S){const D=ke();Un(D,new Ae(D))}ki.STAT_EVENT="statevent";function z(S,D){V.call(this,ki.STAT_EVENT,S),this.stat=D}h(z,V);function bt(S){const D=ke();Un(D,new z(D,S))}ki.Ja="timingevent";function Y(S,D){V.call(this,ki.Ja,S),this.size=D}h(Y,V);function ae(S,D){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},D)}function Ve(){this.g=!0}Ve.prototype.ua=function(){this.g=!1};function ee(S,D,B,Z,Ee,Fe){S.info(function(){if(S.g)if(Fe){var _t="",Nn=Fe.split("&");for(let $r=0;$r<Nn.length;$r++){var ss=Nn[$r].split("=");if(ss.length>1){const fs=ss[0];ss=ss[1];const Ol=fs.split("_");_t=Ol.length>=2&&Ol[1]=="type"?_t+(fs+"="+ss+"&"):_t+(fs+"=redacted&")}}}else _t=null;else _t=Fe;return"XMLHTTP REQ ("+Z+") [attempt "+Ee+"]: "+D+`
`+B+`
`+_t})}function ge(S,D,B,Z,Ee,Fe,_t){S.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+Ee+"]: "+D+`
`+B+`
`+Fe+" "+_t})}function Le(S,D,B,Z){S.info(function(){return"XMLHTTP TEXT ("+D+"): "+ze(S,B)+(Z?" "+Z:"")})}function Je(S,D){S.info(function(){return"TIMEOUT: "+D})}Ve.prototype.info=function(){};function ze(S,D){if(!S.g)return D;if(!D)return null;try{const Fe=JSON.parse(D);if(Fe){for(S=0;S<Fe.length;S++)if(Array.isArray(Fe[S])){var B=Fe[S];if(!(B.length<2)){var Z=B[1];if(Array.isArray(Z)&&!(Z.length<1)){var Ee=Z[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(let _t=1;_t<Z.length;_t++)Z[_t]=""}}}}return hr(Fe)}catch{return D}}var nt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},et={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mt;function zt(){}h(zt,Qt),zt.prototype.g=function(){return new XMLHttpRequest},Mt=new zt;function gn(S){return encodeURIComponent(String(S))}function q(S){var D=1;S=S.split(":");const B=[];for(;D>0&&S.length;)B.push(S.shift()),D--;return S.length&&B.push(S.join(":")),B}function re(S,D,B,Z){this.j=S,this.i=D,this.l=B,this.S=Z||1,this.V=new Cs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var te={},se={};function oe(S,D,B){S.M=1,S.A=Ud(vc(D)),S.u=B,S.R=!0,Pe(S,null)}function Pe(S,D){S.F=Date.now(),Oe(S),S.B=vc(S.A);var B=S.B,Z=S.S;Array.isArray(Z)||(Z=[String(Z)]),Rb(B.i,"t",Z),S.C=0,B=S.j.L,S.h=new J,S.g=ZI(S.j,B?D:null,!S.u),S.P>0&&(S.O=new Ti(c(S.Y,S,S.g),S.P)),D=S.V,B=S.g,Z=S.ba;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(wt[0]=Ee.toString()),Ee=wt);for(let Fe=0;Fe<Ee.length;Fe++){const _t=Se(B,Ee[Fe],Z||D.handleEvent,!1,D.h||D);if(!_t)break;D.g[_t.key]=_t}D=S.J?Q(S.J):{},S.u?(S.v||(S.v="POST"),D["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,D)):(S.v="GET",S.g.ea(S.B,S.v,null,D)),rn(),ee(S.i,S.v,S.B,S.l,S.S,S.u)}re.prototype.ba=function(S){S=S.target;const D=this.O;D&&Ih(S)==3?D.j():this.Y(S)},re.prototype.Y=function(S){try{if(S==this.g)e:{const Nn=Ih(this.g),ss=this.g.ya(),$r=this.g.ca();if(!(Nn<3)&&(Nn!=3||this.g&&(this.h.h||this.g.la()||YI(this.g)))){this.K||Nn!=4||ss==7||(ss==8||$r<=0?rn(3):rn(2)),gt(this);var D=this.g.ca();this.X=D;var B=Ge(this);if(this.o=D==200,ge(this.i,this.v,this.B,this.l,this.S,Nn,D),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,Ee=this.g;if((Z=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Z)){var Fe=Z;break t}}Fe=null}if(S=Fe)Le(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ut(this,S);else{this.o=!1,this.m=3,bt(12),ct(this),Rt(this);break e}}if(this.R){S=!0;let fs;for(;!this.K&&this.C<B.length;)if(fs=Ne(this,B),fs==se){Nn==4&&(this.m=4,bt(14),S=!1),Le(this.i,this.l,null,"[Incomplete Response]");break}else if(fs==te){this.m=4,bt(15),Le(this.i,this.l,B,"[Invalid Chunk]"),S=!1;break}else Le(this.i,this.l,fs,null),ut(this,fs);if(Ie(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||B.length!=0||this.h.h||(this.m=1,bt(16),S=!1),this.o=this.o&&S,!S)Le(this.i,this.l,B,"[Invalid Chunked Response]"),ct(this),Rt(this);else if(B.length>0&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.aa&&!_t.P&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),p0(_t),_t.P=!0,bt(11))}}else Le(this.i,this.l,B,null),ut(this,B);Nn==4&&ct(this),this.o&&!this.K&&(Nn==4?Tv(this.j,this):(this.o=!1,Oe(this)))}else Mb(this.g),D==400&&B.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),ct(this),Rt(this)}}}catch{}};function Ge(S){if(!Ie(S))return S.g.la();const D=YI(S.g);if(D==="")return"";let B="";const Z=D.length,Ee=Ih(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return ct(S),Rt(S),"";S.h.i=new o.TextDecoder}for(let Fe=0;Fe<Z;Fe++)S.h.h=!0,B+=S.h.i.decode(D[Fe],{stream:!(Ee&&Fe==Z-1)});return D.length=0,S.h.g+=B,S.C=0,S.h.g}function Ie(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Ne(S,D){var B=S.C,Z=D.indexOf(`
`,B);return Z==-1?se:(B=Number(D.substring(B,Z)),isNaN(B)?te:(Z+=1,Z+B>D.length?se:(D=D.slice(Z,Z+B),S.C=Z+B,D)))}re.prototype.cancel=function(){this.K=!0,ct(this)};function Oe(S){S.T=Date.now()+S.H,at(S,S.H)}function at(S,D){if(S.D!=null)throw Error("WatchDog timer not null");S.D=ae(c(S.aa,S),D)}function gt(S){S.D&&(o.clearTimeout(S.D),S.D=null)}re.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Je(this.i,this.B),this.M!=2&&(rn(),bt(17)),ct(this),this.m=2,Rt(this)):at(this,this.T-S)};function Rt(S){S.j.I==0||S.K||Tv(S.j,S)}function ct(S){gt(S);var D=S.O;D&&typeof D.dispose=="function"&&D.dispose(),S.O=null,Xn(S.V),S.g&&(D=S.g,S.g=null,D.abort(),D.dispose())}function ut(S,D){try{var B=S.j;if(B.I!=0&&(B.g==S||yu(B.h,S))){if(!S.L&&yu(B.h,S)&&B.I==3){try{var Z=B.Ba.g.parse(D)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var Ee=Z;if(Ee[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<S.F)Sv(B),Ml(B);else break e;Ch(B),bt(18)}}else B.xa=Ee[1],0<B.xa-B.K&&Ee[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=ae(c(B.Va,B),6e3));yi(B.h)<=1&&B.ta&&(B.ta=void 0)}else Nl(B,11)}else if((S.L||B.g==S)&&Sv(B),!U(D))for(Ee=B.Ba.g.parse(D),D=0;D<Ee.length;D++){let $r=Ee[D];const fs=$r[0];if(!(fs<=B.K))if(B.K=fs,$r=$r[1],B.I==2)if($r[0]=="c"){B.M=$r[1],B.ba=$r[2];const Ol=$r[3];Ol!=null&&(B.ka=Ol,B.j.info("VER="+B.ka));const qd=$r[4];qd!=null&&(B.za=qd,B.j.info("SVER="+B.za));const Mh=$r[5];Mh!=null&&typeof Mh=="number"&&Mh>0&&(Z=1.5*Mh,B.O=Z,B.j.info("backChannelRequestTimeoutMs_="+Z)),Z=B;const Nh=S.g;if(Nh){const Iv=Nh.g?Nh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iv){var Fe=Z.h;Fe.g||Iv.indexOf("spdy")==-1&&Iv.indexOf("quic")==-1&&Iv.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(yc(Fe,Fe.h),Fe.h=null))}if(Z.G){const Lb=Nh.g?Nh.g.getResponseHeader("X-HTTP-Session-Id"):null;Lb&&(Z.wa=Lb,_r(Z.J,Z.G,Lb))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-S.F,B.j.info("Handshake RTT: "+B.T+"ms")),Z=B;var _t=S;if(Z.na=Ob(Z,Z.L?Z.ba:null,Z.W),_t.L){Rl(Z.h,_t);var Nn=_t,ss=Z.O;ss&&(Nn.H=ss),Nn.D&&(gt(Nn),Oe(Nn)),Z.g=_t}else Do(Z);B.i.length>0&&Hd(B)}else $r[0]!="stop"&&$r[0]!="close"||Nl(B,7);else B.I==3&&($r[0]=="stop"||$r[0]=="close"?$r[0]=="stop"?Nl(B,7):bv(B):$r[0]!="noop"&&B.l&&B.l.qa($r),B.A=0)}}rn(4)}catch{}}var wn=class{constructor(S,D){this.g=S,this.map=D}};function Ir(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dr(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function yi(S){return S.h?1:S.g?S.g.size:0}function yu(S,D){return S.h?S.h==D:S.g?S.g.has(D):!1}function yc(S,D){S.g?S.g.add(D):S.h=D}function Rl(S,D){S.h&&S.h==D?S.h=null:S.g&&S.g.has(D)&&S.g.delete(D)}Ir.prototype.cancel=function(){if(this.i=is(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function is(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let D=S.i;for(const B of S.g.values())D=D.concat(B.G);return D}return g(S.i)}var Pp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ai(S,D){if(S){S=S.split("&");for(let B=0;B<S.length;B++){const Z=S[B].indexOf("=");let Ee,Fe=null;Z>=0?(Ee=S[B].substring(0,Z),Fe=S[B].substring(Z+1)):Ee=S[B],D(Ee,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function bh(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let D;S instanceof bh?(this.l=S.l,l0(this,S.j),this.o=S.o,this.g=S.g,Eh(this,S.u),this.h=S.h,Rp(this,Cb(S.i)),this.m=S.m):S&&(D=String(S).match(Pp))?(this.l=!1,l0(this,D[1]||"",!0),this.o=c0(D[2]||""),this.g=c0(D[3]||"",!0),Eh(this,D[4]),this.h=c0(D[5]||"",!0),Rp(this,D[6]||"",!0),this.m=c0(D[7]||"")):(this.l=!1,this.i=new ir(null,this.l))}bh.prototype.toString=function(){const S=[];var D=this.j;D&&S.push(u0(D,Tb,!0),":");var B=this.g;return(B||D=="file")&&(S.push("//"),(D=this.o)&&S.push(u0(D,Tb,!0),"@"),S.push(gn(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&S.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&S.push("/"),S.push(u0(B,B.charAt(0)=="/"?h0:kb,!0))),(B=this.i.toString())&&S.push("?",B),(B=this.m)&&S.push("#",u0(B,Ab)),S.join("")},bh.prototype.resolve=function(S){const D=vc(this);let B=!!S.j;B?l0(D,S.j):B=!!S.o,B?D.o=S.o:B=!!S.g,B?D.g=S.g:B=S.u!=null;var Z=S.h;if(B)Eh(D,S.u);else if(B=!!S.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var Ee=D.h.lastIndexOf("/");Ee!=-1&&(Z=D.h.slice(0,Ee+1)+Z)}if(Ee=Z,Ee==".."||Ee==".")Z="";else if(Ee.indexOf("./")!=-1||Ee.indexOf("/.")!=-1){Z=Ee.lastIndexOf("/",0)==0,Ee=Ee.split("/");const Fe=[];for(let _t=0;_t<Ee.length;){const Nn=Ee[_t++];Nn=="."?Z&&_t==Ee.length&&Fe.push(""):Nn==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),Z&&_t==Ee.length&&Fe.push("")):(Fe.push(Nn),Z=!0)}Z=Fe.join("/")}else Z=Ee}return B?D.h=Z:B=S.i.toString()!=="",B?Rp(D,Cb(S.i)):B=!!S.m,B&&(D.m=S.m),D};function vc(S){return new bh(S)}function l0(S,D,B){S.j=B?c0(D,!0):D,S.j&&(S.j=S.j.replace(/:$/,""))}function Eh(S,D){if(D){if(D=Number(D),isNaN(D)||D<0)throw Error("Bad port number "+D);S.u=D}else S.u=null}function Rp(S,D,B){D instanceof ir?(S.i=D,_v(S.i,S.l)):(B||(D=u0(D,kL)),S.i=new ir(D,S.l))}function _r(S,D,B){S.i.set(D,B)}function Ud(S){return _r(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function c0(S,D){return S?D?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function u0(S,D,B){return typeof S=="string"?(S=encodeURI(S).replace(D,Sb),B&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Sb(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Tb=/[#\/\?@]/g,kb=/[#\?:]/g,h0=/[#\?]/g,kL=/[#\?@]/g,Ab=/#/g;function ir(S,D){this.h=this.g=null,this.i=S||null,this.j=!!D}function Sh(S){S.g||(S.g=new Map,S.h=0,S.i&&Ai(S.i,function(D,B){S.add(decodeURIComponent(D.replace(/\+/g," ")),B)}))}t=ir.prototype,t.add=function(S,D){Sh(this),this.i=null,S=Th(this,S);let B=this.g.get(S);return B||this.g.set(S,B=[]),B.push(D),this.h+=1,this};function Ib(S,D){Sh(S),D=Th(S,D),S.g.has(D)&&(S.i=null,S.h-=S.g.get(D).length,S.g.delete(D))}function vv(S,D){return Sh(S),D=Th(S,D),S.g.has(D)}t.forEach=function(S,D){Sh(this),this.g.forEach(function(B,Z){B.forEach(function(Ee){S.call(D,Ee,Z,this)},this)},this)};function Pb(S,D){Sh(S);let B=[];if(typeof D=="string")vv(S,D)&&(B=B.concat(S.g.get(Th(S,D))));else for(S=Array.from(S.g.values()),D=0;D<S.length;D++)B=B.concat(S[D]);return B}t.set=function(S,D){return Sh(this),this.i=null,S=Th(this,S),vv(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[D]),this.h+=1,this},t.get=function(S,D){return S?(S=Pb(this,S),S.length>0?String(S[0]):D):D};function Rb(S,D,B){Ib(S,D),B.length>0&&(S.i=null,S.g.set(Th(S,D),g(B)),S.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],D=Array.from(this.g.keys());for(let Z=0;Z<D.length;Z++){var B=D[Z];const Ee=gn(B);B=Pb(this,B);for(let Fe=0;Fe<B.length;Fe++){let _t=Ee;B[Fe]!==""&&(_t+="="+gn(B[Fe])),S.push(_t)}}return this.i=S.join("&")};function Cb(S){const D=new ir;return D.i=S.i,S.g&&(D.g=new Map(S.g),D.h=S.h),D}function Th(S,D){return D=String(D),S.j&&(D=D.toLowerCase()),D}function _v(S,D){D&&!S.j&&(Sh(S),S.i=null,S.g.forEach(function(B,Z){const Ee=Z.toLowerCase();Z!=Ee&&(Ib(this,Z),Rb(this,Ee,B))},S)),S.j=D}function kh(S,D){const B=new Ve;if(o.Image){const Z=new Image;Z.onload=u(yo,B,"TestLoadImage: loaded",!0,D,Z),Z.onerror=u(yo,B,"TestLoadImage: error",!1,D,Z),Z.onabort=u(yo,B,"TestLoadImage: abort",!1,D,Z),Z.ontimeout=u(yo,B,"TestLoadImage: timeout",!1,D,Z),o.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=S}else D(!1)}function Ah(S,D){const B=new Ve,Z=new AbortController,Ee=setTimeout(()=>{Z.abort(),yo(B,"TestPingServer: timeout",!1,D)},1e4);fetch(S,{signal:Z.signal}).then(Fe=>{clearTimeout(Ee),Fe.ok?yo(B,"TestPingServer: ok",!0,D):yo(B,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(Ee),yo(B,"TestPingServer: error",!1,D)})}function yo(S,D,B,Z,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),Z(B)}catch{}}function d0(){this.g=new Ln}function Gd(S){this.i=S.Sb||null,this.h=S.ab||!1}h(Gd,Qt),Gd.prototype.g=function(){return new Cl(this.i,this.h)};function Cl(S,D){jn.call(this),this.H=S,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Cl,jn),t=Cl.prototype,t.open=function(S,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=D,this.readyState=1,vu(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const D={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(D.body=S),(this.H||o).fetch(new Request(this.D,D)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cp(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,vu(this)),this.g&&(this.readyState=3,vu(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;HI(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function HI(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var D=S.value?S.value:new Uint8Array(0);(D=this.B.decode(D,{stream:!S.done}))&&(this.response=this.responseText+=D)}S.done?Cp(this):vu(this),this.readyState==3&&HI(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,Cp(this))},t.Na=function(S){this.g&&(this.response=S,Cp(this))},t.ga=function(){this.g&&Cp(this)};function Cp(S){S.readyState=4,S.l=null,S.j=null,S.B=null,vu(S)}t.setRequestHeader=function(S,D){this.A.append(S,D)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],D=this.h.entries();for(var B=D.next();!B.done;)B=B.value,S.push(B[0]+": "+B[1]),B=D.next();return S.join(`\r
`)};function vu(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function qI(S){let D="";return De(S,function(B,Z){D+=Z,D+=":",D+=B,D+=`\r
`}),D}function xv(S,D,B){e:{for(Z in B){var Z=!1;break e}Z=!0}Z||(B=qI(B),typeof S=="string"?B!=null&&gn(B):_r(S,D,B))}function ei(S){jn.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ei,jn);var KI=/^https?$/i,AL=["POST","PUT"];t=ei.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,D,B,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);D=D?D.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(D,String(S),!0),this.B=!1}catch(Fe){Mp(this,Fe);return}if(S=B||"",B=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var Ee in Z)B.set(Ee,Z[Ee]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Fe of Z.keys())B.set(Fe,Z.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(B.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),Ee=o.FormData&&S instanceof o.FormData,!(Array.prototype.indexOf.call(AL,D,void 0)>=0)||Z||Ee||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,_t]of B)this.g.setRequestHeader(Fe,_t);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Fe){Mp(this,Fe)}};function Mp(S,D){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=D,S.o=5,Np(S),Wd(S)}function Np(S){S.A||(S.A=!0,Un(S,"complete"),Un(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Un(this,"complete"),Un(this,"abort"),Wd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wd(this,!0)),ei.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Bd(this):this.Xa())},t.Xa=function(){Bd(this)};function Bd(S){if(S.h&&typeof s<"u"){if(S.v&&Ih(S)==4)setTimeout(S.Ca.bind(S),0);else if(Un(S,"readystatechange"),Ih(S)==4){S.h=!1;try{const Fe=S.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var B;if(!(B=D)){var Z;if(Z=Fe===0){let _t=String(S.D).match(Pp)[1]||null;!_t&&o.self&&o.self.location&&(_t=o.self.location.protocol.slice(0,-1)),Z=!KI.test(_t?_t.toLowerCase():"")}B=Z}if(B)Un(S,"complete"),Un(S,"success");else{S.o=6;try{var Ee=Ih(S)>2?S.g.statusText:""}catch{Ee=""}S.l=Ee+" ["+S.ca()+"]",Np(S)}}finally{Wd(S)}}}}function Wd(S,D){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const B=S.g;S.g=null,D||Un(S,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ih(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Ih(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var D=this.g.responseText;return S&&D.indexOf(S)==0&&(D=D.substring(S.length)),Ft(D)}};function YI(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Mb(S){const D={};S=(S.g&&Ih(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<S.length;Z++){if(U(S[Z]))continue;var B=q(S[Z]);const Ee=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Fe=D[Ee]||[];D[Ee]=Fe,Fe.push(B)}Me(D,function(Z){return Z.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ph(S,D,B){return B&&B.internalChannelParams&&B.internalChannelParams[S]||D}function wv(S){this.za=0,this.i=[],this.j=new Ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ph("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ph("baseRetryDelayMs",5e3,S),this.Za=Ph("retryDelaySeedMs",1e4,S),this.Ta=Ph("forwardChannelMaxRetries",2,S),this.va=Ph("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Ir(S&&S.concurrentRequestLimit),this.Ba=new d0,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=wv.prototype,t.ka=8,t.I=1,t.connect=function(S,D,B,Z){bt(0),this.W=S,this.H=D||{},B&&Z!==void 0&&(this.H.OSID=B,this.H.OAID=Z),this.F=this.X,this.J=Ob(this,null,this.W),Hd(this)};function bv(S){if(Ev(S),S.I==3){var D=S.V++,B=vc(S.J);if(_r(B,"SID",S.M),_r(B,"RID",D),_r(B,"TYPE","terminate"),Rh(S,B),D=new re(S,S.j,D),D.M=2,D.A=Ud(vc(B)),B=!1,o.navigator&&o.navigator.sendBeacon)try{B=o.navigator.sendBeacon(D.A.toString(),"")}catch{}!B&&o.Image&&(new Image().src=D.A,B=!0),B||(D.g=ZI(D.j,null),D.g.ea(D.A)),D.F=Date.now(),Oe(D)}m0(S)}function Ml(S){S.g&&(p0(S),S.g.cancel(),S.g=null)}function Ev(S){Ml(S),S.v&&(o.clearTimeout(S.v),S.v=null),Sv(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&o.clearTimeout(S.m),S.m=null)}function Hd(S){if(!Dr(S.h)&&!S.m){S.m=!0;var D=S.Ea;M||N(),F||(M(),F=!0),C.add(D,S),S.D=0}}function XI(S,D){return yi(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=D.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=ae(c(S.Ea,S,D),kv(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Ee=new re(this,this.j,S);let Fe=this.o;if(this.U&&(Fe?(Fe=Q(Fe),ne(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(Ee.J=Fe,Fe=null),this.S)e:{for(var D=0,B=0;B<this.i.length;B++){t:{var Z=this.i[B];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(D+=Z,D>4096){D=B;break e}if(D===4096||B===this.i.length-1){D=B+1;break e}}D=1e3}else D=1e3;D=Nb(this,Ee,D),B=vc(this.J),_r(B,"RID",S),_r(B,"CVER",22),this.G&&_r(B,"X-HTTP-Session-Id",this.G),Rh(this,B),Fe&&(this.R?D="headers="+gn(qI(Fe))+"&"+D:this.u&&xv(B,this.u,Fe)),yc(this.h,Ee),this.Ra&&_r(B,"TYPE","init"),this.S?(_r(B,"$req",D),_r(B,"SID","null"),Ee.U=!0,oe(Ee,B,null)):oe(Ee,B,D),this.I=2}}else this.I==3&&(S?f0(this,S):this.i.length==0||Dr(this.h)||f0(this))};function f0(S,D){var B;D?B=D.l:B=S.V++;const Z=vc(S.J);_r(Z,"SID",S.M),_r(Z,"RID",B),_r(Z,"AID",S.K),Rh(S,Z),S.u&&S.o&&xv(Z,S.u,S.o),B=new re(S,S.j,B,S.D+1),S.u===null&&(B.J=S.o),D&&(S.i=D.G.concat(S.i)),D=Nb(S,B,1e3),B.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),yc(S.h,B),oe(B,Z,D)}function Rh(S,D){S.H&&De(S.H,function(B,Z){_r(D,Z,B)}),S.l&&De({},function(B,Z){_r(D,Z,B)})}function Nb(S,D,B){B=Math.min(S.i.length,B);const Z=S.l?c(S.l.Ka,S.l,S):null;e:{var Ee=S.i;let Nn=-1;for(;;){const ss=["count="+B];Nn==-1?B>0?(Nn=Ee[0].g,ss.push("ofs="+Nn)):Nn=0:ss.push("ofs="+Nn);let $r=!0;for(let fs=0;fs<B;fs++){var Fe=Ee[fs].g;const Ol=Ee[fs].map;if(Fe-=Nn,Fe<0)Nn=Math.max(0,Ee[fs].g-100),$r=!1;else try{Fe="req"+Fe+"_"||"";try{var _t=Ol instanceof Map?Ol:Object.entries(Ol);for(const[qd,Mh]of _t){let Nh=Mh;a(Mh)&&(Nh=hr(Mh)),ss.push(Fe+qd+"="+encodeURIComponent(Nh))}}catch(qd){throw ss.push(Fe+"type="+encodeURIComponent("_badmap")),qd}}catch{Z&&Z(Ol)}}if($r){_t=ss.join("&");break e}}_t=void 0}return S=S.i.splice(0,B),D.G=S,_t}function Do(S){if(!S.g&&!S.v){S.Y=1;var D=S.Da;M||N(),F||(M(),F=!0),C.add(D,S),S.A=0}}function Ch(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=ae(c(S.Da,S),kv(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Op(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=ae(c(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ml(this),Op(this))};function p0(S){S.B!=null&&(o.clearTimeout(S.B),S.B=null)}function Op(S){S.g=new re(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var D=vc(S.na);_r(D,"RID","rpc"),_r(D,"SID",S.M),_r(D,"AID",S.K),_r(D,"CI",S.F?"0":"1"),!S.F&&S.ia&&_r(D,"TO",S.ia),_r(D,"TYPE","xmlhttp"),Rh(S,D),S.u&&S.o&&xv(D,S.u,S.o),S.O&&(S.g.H=S.O);var B=S.g;S=S.ba,B.M=1,B.A=Ud(vc(D)),B.u=null,B.R=!0,Pe(B,S)}t.Va=function(){this.C!=null&&(this.C=null,Ml(this),Ch(this),bt(19))};function Sv(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function Tv(S,D){var B=null;if(S.g==D){Sv(S),p0(S),S.g=null;var Z=2}else if(yu(S.h,D))B=D.G,Rl(S.h,D),Z=1;else return;if(S.I!=0){if(D.o)if(Z==1){B=D.u?D.u.length:0,D=Date.now()-D.F;var Ee=S.D;Z=ke(),Un(Z,new Y(Z,B)),Hd(S)}else Do(S);else if(Ee=D.m,Ee==3||Ee==0&&D.X>0||!(Z==1&&XI(S,D)||Z==2&&Ch(S)))switch(B&&B.length>0&&(D=S.h,D.i=D.i.concat(B)),Ee){case 1:Nl(S,5);break;case 4:Nl(S,10);break;case 3:Nl(S,6);break;default:Nl(S,2)}}}function kv(S,D){let B=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(B*=2),B*D}function Nl(S,D){if(S.j.info("Error code "+D),D==2){var B=c(S.bb,S),Z=S.Ua;const Ee=!Z;Z=new bh(Z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||l0(Z,"https"),Ud(Z),Ee?kh(Z.toString(),B):Ah(Z.toString(),B)}else bt(2);S.I=0,S.l&&S.l.pa(D),m0(S),Ev(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function m0(S){if(S.I=0,S.ja=[],S.l){const D=is(S.h);(D.length!=0||S.i.length!=0)&&(v(S.ja,D),v(S.ja,S.i),S.h.i.length=0,g(S.i),S.i.length=0),S.l.oa()}}function Ob(S,D,B){var Z=B instanceof bh?vc(B):new bh(B);if(Z.g!="")D&&(Z.g=D+"."+Z.g),Eh(Z,Z.u);else{var Ee=o.location;Z=Ee.protocol,D=D?D+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;const Fe=new bh(null);Z&&l0(Fe,Z),D&&(Fe.g=D),Ee&&Eh(Fe,Ee),B&&(Fe.h=B),Z=Fe}return B=S.G,D=S.wa,B&&D&&_r(Z,B,D),_r(Z,"VER",S.ka),Rh(S,Z),Z}function ZI(S,D,B){if(D&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return D=S.Aa&&!S.ma?new ei(new Gd({ab:B})):new ei(S.ma),D.Fa(S.L),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function JI(){}t=JI.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Av(){}Av.prototype.g=function(S,D){return new vo(S,D)};function vo(S,D){jn.call(this),this.g=new wv(D),this.l=S,this.h=D&&D.messageUrlParams||null,S=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(S?S["X-WebChannel-Content-Type"]=D.messageContentType:S={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.sa&&(S?S["X-WebChannel-Client-Profile"]=D.sa:S={"X-WebChannel-Client-Profile":D.sa}),this.g.U=S,(S=D&&D.Qb)&&!U(S)&&(this.g.u=S),this.A=D&&D.supportsCrossDomainXhr||!1,this.v=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!U(D)&&(this.g.G=D,S=this.h,S!==null&&D in S&&(S=this.h,D in S&&delete S[D])),this.j=new Lp(this)}h(vo,jn),vo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vo.prototype.close=function(){bv(this.g)},vo.prototype.o=function(S){var D=this.g;if(typeof S=="string"){var B={};B.__data__=S,S=B}else this.v&&(B={},B.__data__=hr(S),S=B);D.i.push(new wn(D.Ya++,S)),D.I==3&&Hd(D)},vo.prototype.N=function(){this.g.l=null,delete this.j,bv(this.g),delete this.g,vo.Z.N.call(this)};function QI(S){Ms.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var D=S.__sm__;if(D){e:{for(const B in D){S=B;break e}S=void 0}(this.i=S)&&(S=this.i,D=D!==null&&S in D?D[S]:void 0),this.data=D}else this.data=S}h(QI,Ms);function eP(){Mn.call(this),this.status=1}h(eP,Mn);function Lp(S){this.g=S}h(Lp,JI),Lp.prototype.ra=function(){Un(this.g,"a")},Lp.prototype.qa=function(S){Un(this.g,new QI(S))},Lp.prototype.pa=function(S){Un(this.g,new eP)},Lp.prototype.oa=function(){Un(this.g,"b")},Av.prototype.createWebChannel=Av.prototype.g,vo.prototype.send=vo.prototype.o,vo.prototype.open=vo.prototype.m,vo.prototype.close=vo.prototype.close,rue=function(){return new Av},nue=function(){return ke()},tue=ki,X8={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,VC=nt,et.COMPLETE="complete",eue=et,Lo.EventType=Vi,Vi.OPEN="a",Vi.CLOSE="b",Vi.ERROR="c",Vi.MESSAGE="d",jn.prototype.listen=jn.prototype.J,ZE=Lo,ei.prototype.listenOnce=ei.prototype.K,ei.prototype.getLastError=ei.prototype.Ha,ei.prototype.getLastErrorCode=ei.prototype.ya,ei.prototype.getStatus=ei.prototype.ca,ei.prototype.getResponseJson=ei.prototype.La,ei.prototype.getResponseText=ei.prototype.la,ei.prototype.send=ei.prototype.ea,ei.prototype.setWithCredentials=ei.prototype.Fa,Qce=ei}).apply(typeof cR<"u"?cR:typeof self<"u"?self:typeof window<"u"?window:{});const DZ="@firebase/firestore",$Z="4.9.3";let Po=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Po.UNAUTHENTICATED=new Po(null),Po.GOOGLE_CREDENTIALS=new Po("google-credentials-uid"),Po.FIRST_PARTY=new Po("first-party-uid"),Po.MOCK_USER=new Po("mock-user");let W2="12.7.0";const E1=new MU("@firebase/firestore");function N_(){return E1.logLevel}function ft(t,...e){if(E1.logLevel<=er.DEBUG){const n=e.map(BU);E1.debug(`Firestore (${W2}): ${t}`,...n)}}function Ra(t,...e){if(E1.logLevel<=er.ERROR){const n=e.map(BU);E1.error(`Firestore (${W2}): ${t}`,...n)}}function S1(t,...e){if(E1.logLevel<=er.WARN){const n=e.map(BU);E1.warn(`Firestore (${W2}): ${t}`,...n)}}function BU(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ht(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iue(t,r,n)}function iue(t,e,n){let r=`FIRESTORE (${W2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ra(r),new Error(r)}function nn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||iue(e,i,r)}function Cn(t,e){return t}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends jd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yd{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class sue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Z4e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Po.UNAUTHENTICATED)))}shutdown(){}}class J4e{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Q4e{constructor(e){this.t=e,this.currentUser=Po.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yd;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yd,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yd)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn(typeof r.accessToken=="string",31837,{l:r}),new sue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nn(e===null||typeof e=="string",2055,{h:e}),new Po(e)}}class eNe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Po.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tNe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eNe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Po.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class jZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nNe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nn(this.o===void 0,3512);const r=s=>{s.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new jZ(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new jZ(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function rNe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class WU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=rNe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Rn(t,e){return t<e?-1:t>e?1:0}function Z8(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return q6(i)===q6(s)?Rn(i,s):q6(i)?1:-1}return Rn(t.length,e.length)}const iNe=55296,sNe=57343;function q6(t){const e=t.charCodeAt(0);return e>=iNe&&e<=sNe}function Ww(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function oue(t){return t+"\0"}const FZ="__name__";class Qh{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ht(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ht(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qh?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Qh.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Rn(e.length,n.length)}static compareSegments(e,n){const r=Qh.isNumericId(e),i=Qh.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qh.extractNumericId(e).compare(Qh.extractNumericId(n)):Z8(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mg.fromString(e.substring(4,e.length-2))}}class Tr extends Qh{construct(e,n,r){return new Tr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new St(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Tr(n)}static emptyPath(){return new Tr([])}}const oNe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Oi extends Qh{construct(e,n,r){return new Oi(e,n,r)}static isValidIdentifier(e){return oNe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Oi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===FZ}static keyField(){return new Oi([FZ])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new St(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new St(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new St(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new St(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Oi(n)}static emptyPath(){return new Oi([])}}class At{constructor(e){this.path=e}static fromPath(e){return new At(Tr.fromString(e))}static fromName(e){return new At(Tr.fromString(e).popFirst(5))}static empty(){return new At(Tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Tr(e.slice()))}}function aue(t,e,n){if(!n)throw new St(We.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aNe(t,e,n,r){if(e===!0&&r===!0)throw new St(We.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function VZ(t){if(!At.isDocumentKey(t))throw new St(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zZ(t){if(At.isDocumentKey(t))throw new St(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lue(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function R5(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ht(12329,{type:typeof t})}function cu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new St(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=R5(t);throw new St(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ks(t,e){const n={typeString:t};return e&&(n.value=e),n}function GA(t,e){if(!lue(t))throw new St(We.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new St(We.INVALID_ARGUMENT,n);return!0}const UZ=-62135596800,GZ=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GZ);return new Ur(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new St(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new St(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<UZ)throw new St(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GZ}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(GA(e,Ur._jsonSchema))return new Ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UZ;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ur._jsonSchemaVersion="firestore/timestamp/1.0",Ur._jsonSchema={type:ks("string",Ur._jsonSchemaVersion),seconds:ks("number"),nanoseconds:ks("number")};class on{static fromTimestamp(e){return new on(e)}static min(){return new on(new Ur(0,0))}static max(){return new on(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const mk=-1;class q3{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function J8(t){return t.fields.find((e=>e.kind===2))}function W0(t){return t.fields.filter((e=>e.kind!==2))}q3.UNKNOWN_ID=-1;class zC{constructor(e,n){this.fieldPath=e,this.kind=n}}class gk{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gk(0,dc.min())}}function lNe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=on.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new dc(i,At.empty(),e)}function cue(t){return new dc(t.readTime,t.key,mk)}class dc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new dc(on.min(),At.empty(),mk)}static max(){return new dc(on.max(),At.empty(),mk)}}function HU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Rn(t.largestBatchId,e.largestBatchId))}const uue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nv(t){if(t.code!==We.FAILED_PRECONDITION||t.message!==uue)throw t;ft("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,r)=>{n(e)}))}static reject(e){return new xe(((n,r)=>{r(e)}))}static waitFor(e){return new xe(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next((i=>i?xe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new xe(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===s&&r(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new xe(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}const Yl="SimpleDb";class C5{static open(e,n,r,i){try{return new C5(n,e.transaction(i,r))}catch(s){throw new KS(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new yd,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new KS(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=qU(r.target.error);this.S.reject(new KS(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ft(Yl,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new uNe(n)}}class gg{static delete(e){return ft(Yl,"Removing database:",e),yy(ice().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!fce())return!1;if(gg.F())return!0;const e=Bs(),n=gg.M(e),r=0<n&&n<10,i=due(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,gg.M(Bs())===12.2&&Ra("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ft(Yl,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new KS(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new St(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new St(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new KS(e,o))},i.onupgradeneeded=s=>{ft(Yl,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next((()=>{ft(Yl,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=C5.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),xe.reject(c)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ft(Yl,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function due(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class cNe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return yy(this.U.delete())}}class KS extends St{constructor(e,n){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Jg(t){return t.name==="IndexedDbTransactionError"}class uNe{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ft(Yl,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ft(Yl,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),yy(r)}add(e){return ft(Yl,"ADD",this.store.name,e,e),yy(this.store.add(e))}get(e){return yy(this.store.get(e)).next((n=>(n===void 0&&(n=null),ft(Yl,"GET",this.store.name,e,n),n)))}delete(e){return ft(Yl,"DELETE",this.store.name,e),yy(this.store.delete(e))}count(){return ft(Yl,"COUNT",this.store.name),yy(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new xe(((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}}))}{const s=this.cursor(r),o=[];return this.H(s,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new xe(((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){ft(Yl,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((s,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new xe(((r,i)=>{n.onerror=s=>{const o=qU(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new xe(((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new cNe(a),c=n(a.primaryKey,a.value,l);if(c instanceof xe){const u=c.catch((h=>(l.done(),xe.reject(h))));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}})).next((()=>xe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function yy(t){return new xe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=qU(r.target.error);n(i)}}))}let BZ=!1;function qU(t){const e=gg.M(Bs());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return BZ||(BZ=!0,setTimeout((()=>{throw r}),0)),r}}return t}const YS="IndexBackfiller";class hNe{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ft(YS,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ft(YS,`Documents written: ${n}`)}catch(n){Jg(n)?ft(YS,"Ignoring IndexedDB error during index backfill: ",n):await nv(n)}await this.re(6e4)}))}}class dNe{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,s=!0;return xe.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return ft(YS,`Processing collection: ${o}`),this.oe(e,o,i).next((a=>{i-=a,r.add(o)}));s=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,s))).next((a=>(ft(YS,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,s)=>{const o=cue(s);HU(o,r)>0&&(r=o)})),new dc(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class Zc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zc.ce=-1;const qy=-1;function M5(t){return t==null}function yk(t){return t===0&&1/t==-1/0}function fNe(t){return typeof t=="number"&&Number.isInteger(t)&&!yk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const K3="";function da(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WZ(e)),e=pNe(t.get(n),e);return WZ(e)}function pNe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case K3:n+="";break;default:n+=s}}return n}function WZ(t){return t+K3+""}function hd(t){const e=t.length;if(nn(e>=2,64408,{path:t}),e===2)return nn(t.charAt(0)===K3&&t.charAt(1)==="",56145,{path:t}),Tr.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(K3,s);switch((o<0||o>n)&&Ht(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Ht(61167,{path:t})}s=o+2}return new Tr(r)}const H0="remoteDocuments",BA="owner",s_="owner",vk="mutationQueues",mNe="userId",Hu="mutations",HZ="batchId",Cy="userMutationsIndex",qZ=["userId","batchId"];function UC(t,e){return[t,da(e)]}function fue(t,e,n){return[t,da(e),n]}const gNe={},Hw="documentMutations",Y3="remoteDocumentsV14",yNe=["prefixPath","collectionGroup","readTime","documentId"],GC="documentKeyIndex",vNe=["prefixPath","collectionGroup","documentId"],pue="collectionGroupIndex",_Ne=["collectionGroup","readTime","prefixPath","documentId"],_k="remoteDocumentGlobal",Q8="remoteDocumentGlobalKey",qw="targets",mue="queryTargetsIndex",xNe=["canonicalId","targetId"],Kw="targetDocuments",wNe=["targetId","path"],KU="documentTargetsIndex",bNe=["path","targetId"],X3="targetGlobalKey",Ky="targetGlobal",xk="collectionParents",ENe=["collectionId","parent"],Yw="clientMetadata",SNe="clientId",N5="bundles",TNe="bundleId",O5="namedQueries",kNe="name",YU="indexConfiguration",ANe="indexId",eF="collectionGroupIndex",INe="collectionGroup",XS="indexState",PNe=["indexId","uid"],gue="sequenceNumberIndex",RNe=["uid","sequenceNumber"],ZS="indexEntries",CNe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yue="documentKeyIndex",MNe=["indexId","uid","orderedDocumentKey"],L5="documentOverlays",NNe=["userId","collectionPath","documentId"],tF="collectionPathOverlayIndex",ONe=["userId","collectionPath","largestBatchId"],vue="collectionGroupOverlayIndex",LNe=["userId","collectionGroup","largestBatchId"],XU="globals",DNe="name",_ue=[vk,Hu,Hw,H0,qw,BA,Ky,Kw,Yw,_k,xk,N5,O5],$Ne=[..._ue,L5],xue=[vk,Hu,Hw,Y3,qw,BA,Ky,Kw,Yw,_k,xk,N5,O5,L5],wue=xue,ZU=[...wue,YU,XS,ZS],jNe=ZU,bue=[...ZU,XU],FNe=bue;class nF extends hue{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Hs(t,e){const n=Cn(t);return gg.O(n.le,e)}function KZ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qg(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Eue(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Si{constructor(e,n){this.comparator=e,this.root=n||Ro.EMPTY}insert(e,n){return new Si(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ro.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ro.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uR(this.root,e,this.comparator,!1)}getReverseIterator(){return new uR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uR(this.root,e,this.comparator,!0)}}class uR{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ro{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ro.RED,this.left=i??Ro.EMPTY,this.right=s??Ro.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ro(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ro.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ro.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ro.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ro.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ht(27949);return e+(this.isRed()?0:1)}}Ro.EMPTY=null,Ro.RED=!0,Ro.BLACK=!1;Ro.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ro(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new YZ(this.data.getIterator())}getIteratorFrom(e){return new YZ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hr(this.comparator);return n.data=e,n}}class YZ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function o_(t){return t.hasNext()?t.getNext():void 0}class ml{constructor(e){this.fields=e,e.sort(Oi.comparator)}static empty(){return new ml([])}unionWith(e){let n=new Hr(Oi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ml(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ww(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Sue extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ps{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sue("Invalid base64 string: "+s):s}})(e);return new Ps(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new Ps(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ps.EMPTY_BYTE_STRING=new Ps("");const VNe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hp(t){if(nn(!!t,39018),typeof t=="string"){let e=0;const n=VNe.exec(t);if(nn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wi(t.seconds),nanos:wi(t.nanos)}}function wi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dp(t){return typeof t=="string"?Ps.fromBase64String(t):Ps.fromUint8Array(t)}const Tue="server_timestamp",kue="__type__",Aue="__previous_value__",Iue="__local_write_time__";function JU(t){return(t?.mapValue?.fields||{})[kue]?.stringValue===Tue}function D5(t){const e=t.mapValue.fields[Aue];return JU(e)?D5(e):e}function wk(t){const e=hp(t.mapValue.fields[Iue].timestampValue);return new Ur(e.seconds,e.nanos)}class zNe{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const Z3="(default)";class T1{constructor(e,n){this.projectId=e,this.database=n||Z3}static empty(){return new T1("","")}get isDefaultDatabase(){return this.database===Z3}isEqual(e){return e instanceof T1&&e.projectId===this.projectId&&e.database===this.database}}const QU="__type__",Pue="__max__",Zm={mapValue:{fields:{__type__:{stringValue:Pue}}}},eG="__vector__",Xw="value",BC={nullValue:"NULL_VALUE"};function Pg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?JU(t)?4:Rue(t)?9007199254740991:$5(t)?10:11:Ht(28295,{value:t})}function Id(t,e){if(t===e)return!0;const n=Pg(t);if(n!==Pg(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wk(t).isEqual(wk(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=hp(i.timestampValue),a=hp(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return dp(i.bytesValue).isEqual(dp(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return wi(i.geoPointValue.latitude)===wi(s.geoPointValue.latitude)&&wi(i.geoPointValue.longitude)===wi(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return wi(i.integerValue)===wi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wi(i.doubleValue),a=wi(s.doubleValue);return o===a?yk(o)===yk(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return Ww(t.arrayValue.values||[],e.arrayValue.values||[],Id);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(KZ(o)!==KZ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Id(o[l],a[l])))return!1;return!0})(t,e);default:return Ht(52216,{left:t})}}function bk(t,e){return(t.values||[]).find((n=>Id(n,e)))!==void 0}function Rg(t,e){if(t===e)return 0;const n=Pg(t),r=Pg(e);if(n!==r)return Rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rn(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=wi(s.integerValue||s.doubleValue),l=wi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return XZ(t.timestampValue,e.timestampValue);case 4:return XZ(wk(t),wk(e));case 5:return Z8(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=dp(s),l=dp(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Rn(a[c],l[c]);if(u!==0)return u}return Rn(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Rn(wi(s.latitude),wi(o.latitude));return a!==0?a:Rn(wi(s.longitude),wi(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ZZ(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},c=a[Xw]?.arrayValue,u=l[Xw]?.arrayValue,h=Rn(c?.values?.length||0,u?.values?.length||0);return h!==0?h:ZZ(c,u)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===Zm.mapValue&&o===Zm.mapValue)return 0;if(s===Zm.mapValue)return 1;if(o===Zm.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Z8(l[h],u[h]);if(f!==0)return f;const g=Rg(a[l[h]],c[u[h]]);if(g!==0)return g}return Rn(l.length,u.length)})(t.mapValue,e.mapValue);default:throw Ht(23264,{he:n})}}function XZ(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rn(t,e);const n=hp(t),r=hp(e),i=Rn(n.seconds,r.seconds);return i!==0?i:Rn(n.nanos,r.nanos)}function ZZ(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Rg(n[i],r[i]);if(s)return s}return Rn(n.length,r.length)}function Zw(t){return rF(t)}function rF(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=hp(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dp(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rF(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rF(n.fields[o])}`;return i+"}"})(t.mapValue):Ht(61005,{value:t})}function WC(t){switch(Pg(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=D5(t);return e?16+WC(e):16;case 5:return 2*t.stringValue.length;case 6:return dp(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+WC(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Qg(r.fields,((s,o)=>{i+=s.length+WC(o)})),i})(t.mapValue);default:throw Ht(13486,{value:t})}}function Ek(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function iF(t){return!!t&&"integerValue"in t}function Sk(t){return!!t&&"arrayValue"in t}function JZ(t){return!!t&&"nullValue"in t}function QZ(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function HC(t){return!!t&&"mapValue"in t}function $5(t){return(t?.mapValue?.fields||{})[QU]?.stringValue===eG}function JS(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qg(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=JS(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=JS(t.arrayValue.values[n]);return e}return{...t}}function Rue(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Pue}const Cue={mapValue:{fields:{[QU]:{stringValue:eG},[Xw]:{arrayValue:{}}}}};function UNe(t){return"nullValue"in t?BC:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ek(T1.empty(),At.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?$5(t)?Cue:{mapValue:{}}:Ht(35942,{value:t})}function GNe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ek(T1.empty(),At.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Cue:"mapValue"in t?$5(t)?{mapValue:{}}:Zm:Ht(61959,{value:t})}function eJ(t,e){const n=Rg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function tJ(t,e){const n=Rg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class sa{constructor(e){this.value=e}static empty(){return new sa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!HC(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=JS(n)}setAll(e){let n=Oi.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=JS(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());HC(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Id(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];HC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qg(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new sa(JS(this.value))}}function Mue(t){const e=[];return Qg(t.fields,((n,r)=>{const i=new Oi([n]);if(HC(r)){const s=Mue(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new ml(e)}class Zi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Zi(e,0,on.min(),on.min(),on.min(),sa.empty(),0)}static newFoundDocument(e,n,r,i){return new Zi(e,1,n,on.min(),r,i,0)}static newNoDocument(e,n){return new Zi(e,2,n,on.min(),on.min(),sa.empty(),0)}static newUnknownDocument(e,n){return new Zi(e,3,n,on.min(),on.min(),sa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(on.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=on.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jw{constructor(e,n){this.position=e,this.inclusive=n}}function nJ(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Rg(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rJ(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Id(t.position[n],e.position[n]))return!1;return!0}class J3{constructor(e,n="asc"){this.field=e,this.dir=n}}function BNe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Nue{}class nr extends Nue{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WNe(e,n,r):n==="array-contains"?new KNe(e,r):n==="in"?new Fue(e,r):n==="not-in"?new YNe(e,r):n==="array-contains-any"?new XNe(e,r):new nr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HNe(e,r):new qNe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Rg(n,this.value)):n!==null&&Pg(this.value)===Pg(n)&&this.matchesComparison(Rg(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends Nue{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return Qw(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qw(t){return t.op==="and"}function sF(t){return t.op==="or"}function tG(t){return Oue(t)&&Qw(t)}function Oue(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function oF(t){if(t instanceof nr)return t.field.canonicalString()+t.op.toString()+Zw(t.value);if(tG(t))return t.filters.map((e=>oF(e))).join(",");{const e=t.filters.map((n=>oF(n))).join(",");return`${t.op}(${e})`}}function Lue(t,e){return t instanceof nr?(function(r,i){return i instanceof nr&&r.op===i.op&&r.field.isEqual(i.field)&&Id(r.value,i.value)})(t,e):t instanceof Br?(function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&Lue(o,i.filters[a])),!0):!1})(t,e):void Ht(19439)}function Due(t,e){const n=t.filters.concat(e);return Br.create(n,t.op)}function $ue(t){return t instanceof nr?(function(n){return`${n.field.canonicalString()} ${n.op} ${Zw(n.value)}`})(t):t instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map($ue).join(" ,")+"}"})(t):"Filter"}class WNe extends nr{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class HNe extends nr{constructor(e,n){super(e,"in",n),this.keys=jue("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class qNe extends nr{constructor(e,n){super(e,"not-in",n),this.keys=jue("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function jue(t,e){return(e.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class KNe extends nr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sk(n)&&bk(n.arrayValue,this.value)}}class Fue extends nr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bk(this.value.arrayValue,n)}}class YNe extends nr{constructor(e,n){super(e,"not-in",n)}matches(e){if(bk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bk(this.value.arrayValue,n)}}class XNe extends nr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>bk(this.value.arrayValue,r)))}}class ZNe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function aF(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ZNe(t,e,n,r,i,s,o)}function k1(t){const e=Cn(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>oF(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),M5(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Zw(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Zw(r))).join(",")),e.Te=n}return e.Te}function WA(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!BNe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Lue(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rJ(t.startAt,e.startAt)&&rJ(t.endAt,e.endAt)}function Q3(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function e4(t,e){return t.filters.filter((n=>n instanceof nr&&n.field.isEqual(e)))}function iJ(t,e,n){let r=BC,i=!0;for(const s of e4(t,e)){let o=BC,a=!0;switch(s.op){case"<":case"<=":o=UNe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=BC}eJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];eJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function sJ(t,e,n){let r=Zm,i=!0;for(const s of e4(t,e)){let o=Zm,a=!0;switch(s.op){case">=":case">":o=GNe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zm}tJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];tJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class HA{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JNe(t,e,n,r,i,s,o,a){return new HA(t,e,n,r,i,s,o,a)}function j5(t){return new HA(t)}function oJ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vue(t){return t.collectionGroup!==null}function QS(t){const e=Cn(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hr(Oi.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new J3(s,r))})),n.has(Oi.keyField().canonicalString())||e.Ie.push(new J3(Oi.keyField(),r))}return e.Ie}function ru(t){const e=Cn(t);return e.Ee||(e.Ee=QNe(e,QS(t))),e.Ee}function QNe(t,e){if(t.limitType==="F")return aF(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new J3(i.field,s)}));const n=t.endAt?new Jw(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jw(t.startAt.position,t.startAt.inclusive):null;return aF(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lF(t,e){const n=t.filters.concat([e]);return new HA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cF(t,e,n){return new HA(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function F5(t,e){return WA(ru(t),ru(e))&&t.limitType===e.limitType}function zue(t){return`${k1(ru(t))}|lt:${t.limitType}`}function O_(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>$ue(i))).join(", ")}]`),M5(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Zw(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Zw(i))).join(",")),`Target(${r})`})(ru(t))}; limitType=${t.limitType})`}function qA(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):At.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of QS(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const c=nJ(o,a,l);return o.inclusive?c<=0:c<0})(r.startAt,QS(r),i)||r.endAt&&!(function(o,a,l){const c=nJ(o,a,l);return o.inclusive?c>=0:c>0})(r.endAt,QS(r),i))})(t,e)}function e5e(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Uue(t){return(e,n)=>{let r=!1;for(const i of QS(t)){const s=t5e(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function t5e(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Rg(l,c):Ht(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ht(19790,{direction:t.dir})}}class bp{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qg(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return Eue(this.inner)}size(){return this.innerSize}}const n5e=new Si(At.comparator);function ic(){return n5e}const Gue=new Si(At.comparator);function JE(...t){let e=Gue;for(const n of t)e=e.insert(n.key,n);return e}function Bue(t){let e=Gue;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function dd(){return eT()}function Wue(){return eT()}function eT(){return new bp((t=>t.toString()),((t,e)=>t.isEqual(e)))}const r5e=new Si(At.comparator),i5e=new Hr(At.comparator);function Gn(...t){let e=i5e;for(const n of t)e=e.add(n);return e}const s5e=new Hr(Rn);function o5e(){return s5e}function nG(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yk(e)?"-0":e}}function Hue(t){return{integerValue:""+t}}function a5e(t,e){return fNe(e)?Hue(e):nG(t,e)}class V5{constructor(){this._=void 0}}function l5e(t,e,n){return t instanceof e2?(function(i,s){const o={fields:{[kue]:{stringValue:Tue},[Iue]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&JU(s)&&(s=D5(s)),s&&(o.fields[Aue]=s),{mapValue:o}})(n,e):t instanceof t2?Kue(t,e):t instanceof n2?Yue(t,e):(function(i,s){const o=que(i,s),a=aJ(o)+aJ(i.Ae);return iF(o)&&iF(i.Ae)?Hue(a):nG(i.serializer,a)})(t,e)}function c5e(t,e,n){return t instanceof t2?Kue(t,e):t instanceof n2?Yue(t,e):n}function que(t,e){return t instanceof Tk?(function(r){return iF(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class e2 extends V5{}class t2 extends V5{constructor(e){super(),this.elements=e}}function Kue(t,e){const n=Xue(e);for(const r of t.elements)n.some((i=>Id(i,r)))||n.push(r);return{arrayValue:{values:n}}}class n2 extends V5{constructor(e){super(),this.elements=e}}function Yue(t,e){let n=Xue(e);for(const r of t.elements)n=n.filter((i=>!Id(i,r)));return{arrayValue:{values:n}}}class Tk extends V5{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function aJ(t){return wi(t.integerValue||t.doubleValue)}function Xue(t){return Sk(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Zue{constructor(e,n){this.field=e,this.transform=n}}function u5e(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof t2&&i instanceof t2||r instanceof n2&&i instanceof n2?Ww(r.elements,i.elements,Id):r instanceof Tk&&i instanceof Tk?Id(r.Ae,i.Ae):r instanceof e2&&i instanceof e2})(t.transform,e.transform)}class h5e{constructor(e,n){this.version=e,this.transformResults=n}}class la{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new la}static exists(e){return new la(void 0,e)}static updateTime(e){return new la(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qC(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class z5{}function Jue(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new U5(t.key,la.none()):new H2(t.key,t.data,la.none());{const n=t.data,r=sa.empty();let i=new Hr(Oi.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ep(t.key,r,new ml(i.toArray()),la.none())}}function d5e(t,e,n){t instanceof H2?(function(i,s,o){const a=i.value.clone(),l=cJ(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Ep?(function(i,s,o){if(!qC(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=cJ(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Que(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function tT(t,e,n,r){return t instanceof H2?(function(s,o,a,l){if(!qC(s.precondition,o))return a;const c=s.value.clone(),u=uJ(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Ep?(function(s,o,a,l){if(!qC(s.precondition,o))return a;const c=uJ(s.fieldTransforms,l,o),u=o.data;return u.setAll(Que(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(s,o,a){return qC(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function f5e(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=que(r.transform,i||null);s!=null&&(n===null&&(n=sa.empty()),n.set(r.field,s))}return n||null}function lJ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ww(r,i,((s,o)=>u5e(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class H2 extends z5{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ep extends z5{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Que(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function cJ(t,e,n){const r=new Map;nn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,c5e(o,a,n[i]))}return r}function uJ(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,l5e(s,o,e))}return r}class U5 extends z5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ehe extends z5{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rG{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&d5e(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tT(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tT(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Wue();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Jue(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(on.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Gn())}isEqual(e){return this.batchId===e.batchId&&Ww(this.mutations,e.mutations,((n,r)=>lJ(n,r)))&&Ww(this.baseMutations,e.baseMutations,((n,r)=>lJ(n,r)))}}class iG{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return r5e})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new iG(e,n,r,i)}}class sG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class p5e{constructor(e,n){this.count=e,this.unchangedNames=n}}var ys,or;function m5e(t){switch(t){case We.OK:return Ht(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return Ht(15467,{code:t})}}function the(t){if(t===void 0)return Ra("GRPC error has no .code"),We.UNKNOWN;switch(t){case ys.OK:return We.OK;case ys.CANCELLED:return We.CANCELLED;case ys.UNKNOWN:return We.UNKNOWN;case ys.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case ys.INTERNAL:return We.INTERNAL;case ys.UNAVAILABLE:return We.UNAVAILABLE;case ys.UNAUTHENTICATED:return We.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case ys.NOT_FOUND:return We.NOT_FOUND;case ys.ALREADY_EXISTS:return We.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return We.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case ys.ABORTED:return We.ABORTED;case ys.OUT_OF_RANGE:return We.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return We.UNIMPLEMENTED;case ys.DATA_LOSS:return We.DATA_LOSS;default:return Ht(39323,{code:t})}}(or=ys||(ys={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";function g5e(){return new TextEncoder}const y5e=new mg([4294967295,4294967295],0);function hJ(t){const e=g5e().encode(t),n=new Jce;return n.update(e),new Uint8Array(n.digest())}function dJ(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new mg([n,r],0),new mg([i,s],0)]}class oG{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new QE(`Invalid padding: ${n}`);if(r<0)throw new QE(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new QE(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new QE(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=mg.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(mg.fromNumber(r)));return i.compare(y5e)===1&&(i=new mg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hJ(e),[r,i]=dJ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new oG(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=hJ(e),[r,i]=dJ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class QE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class G5{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,KA.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new G5(on.min(),i,new Si(Rn),ic(),Gn())}}class KA{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new KA(r,n,Gn(),Gn(),Gn())}}class KC{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class nhe{constructor(e,n){this.targetId=e,this.Ce=n}}class rhe{constructor(e,n,r=Ps.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class fJ{constructor(){this.ve=0,this.Fe=pJ(),this.Me=Ps.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Gn(),n=Gn(),r=Gn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ht(38017,{changeType:s})}})),new KA(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pJ()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v5e{constructor(e){this.Ge=e,this.ze=new Map,this.je=ic(),this.Je=hR(),this.He=hR(),this.Ye=new Si(Rn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ht(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Q3(s))if(r===0){const o=new At(s.path);this.et(n,o,Zi.newNoDocument(o,on.min()))}else nn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=dp(r).toUint8Array()}catch(l){if(l instanceof Sue)return S1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new oG(o,i,s)}catch(l){return S1(l instanceof QE?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&Q3(a.target)){const l=new At(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Zi.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=Gn();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new G5(e,n,this.Ye,this.je,r);return this.je=ic(),this.Je=hR(),this.He=hR(),this.Ye=new Si(Rn),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fJ,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hr(Rn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hr(Rn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ft("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fJ),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function hR(){return new Si(At.comparator)}function pJ(){return new Si(At.comparator)}const _5e={asc:"ASCENDING",desc:"DESCENDING"},x5e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w5e={and:"AND",or:"OR"};class b5e{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uF(t,e){return t.useProto3Json||M5(e)?e:{value:e}}function r2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ihe(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E5e(t,e){return r2(t,e.toTimestamp())}function La(t){return nn(!!t,49232),on.fromTimestamp((function(n){const r=hp(n);return new Ur(r.seconds,r.nanos)})(t))}function aG(t,e){return hF(t,e).canonicalString()}function hF(t,e){const n=(function(i){return new Tr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function she(t){const e=Tr.fromString(t);return nn(phe(e),10190,{key:e.toString()}),e}function t4(t,e){return aG(t.databaseId,e.path)}function Yy(t,e){const n=she(e);if(n.get(1)!==t.databaseId.projectId)throw new St(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new St(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(lhe(n))}function ohe(t,e){return aG(t.databaseId,e)}function ahe(t){const e=she(t);return e.length===4?Tr.emptyPath():lhe(e)}function dF(t){return new Tr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lhe(t){return nn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mJ(t,e,n){return{name:t4(t,e),fields:n.value.mapValue.fields}}function S5e(t,e,n){const r=Yy(t,e.name),i=La(e.updateTime),s=e.createTime?La(e.createTime):on.min(),o=new sa({mapValue:{fields:e.fields}}),a=Zi.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function T5e(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ht(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,u){return c.useProto3Json?(nn(u===void 0||typeof u=="string",58123),Ps.fromBase64String(u||"")):(nn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ps.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const u=c.code===void 0?We.UNKNOWN:the(c.code);return new St(u,c.message||"")})(o);n=new rhe(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yy(t,r.document.name),s=La(r.document.updateTime),o=r.document.createTime?La(r.document.createTime):on.min(),a=new sa({mapValue:{fields:r.document.fields}}),l=Zi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new KC(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yy(t,r.document),s=r.readTime?La(r.readTime):on.min(),o=Zi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new KC([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yy(t,r.document),s=r.removedTargetIds||[];n=new KC([],s,i,null)}else{if(!("filter"in e))return Ht(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new p5e(i,s),a=r.targetId;n=new nhe(a,o)}}return n}function n4(t,e){let n;if(e instanceof H2)n={update:mJ(t,e.key,e.value)};else if(e instanceof U5)n={delete:t4(t,e.key)};else if(e instanceof Ep)n={update:mJ(t,e.key,e.data),updateMask:C5e(e.fieldMask)};else{if(!(e instanceof ehe))return Ht(16599,{Vt:e.type});n={verify:t4(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof e2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof t2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof n2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tk)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ht(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:E5e(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ht(27497)})(t,e.precondition)),n}function fF(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?la.updateTime(La(s.updateTime)):s.exists!==void 0?la.exists(s.exists):la.none()})(e.currentDocument):la.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,a){let l=null;if("setToServerValue"in a)nn(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new e2;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new t2(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new n2(u)}else"increment"in a?l=new Tk(o,a.increment):Ht(16584,{proto:a});const c=Oi.fromServerFormat(a.fieldPath);return new Zue(c,l)})(t,i))):[];if(e.update){e.update.name;const i=Yy(t,e.update.name),s=new sa({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const c=l.fieldPaths||[];return new ml(c.map((u=>Oi.fromServerFormat(u))))})(e.updateMask);return new Ep(i,s,o,n,r)}return new H2(i,s,n,r)}if(e.delete){const i=Yy(t,e.delete);return new U5(i,n)}if(e.verify){const i=Yy(t,e.verify);return new ehe(i,n)}return Ht(1463,{proto:e})}function k5e(t,e){return t&&t.length>0?(nn(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?La(i.updateTime):La(s);return o.isEqual(on.min())&&(o=La(s)),new h5e(o,i.transformResults||[])})(n,e)))):[]}function che(t,e){return{documents:[ohe(t,e.path)]}}function uhe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ohe(t,i);const s=(function(c){if(c.length!==0)return fhe(Br.create(c,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(c){if(c.length!==0)return c.map((u=>(function(f){return{field:L_(f.field),direction:I5e(f.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=uF(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function hhe(t){let e=ahe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nn(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=(function(h){const f=dhe(h);return f instanceof Br&&tG(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((f=>(function(v){return new J3(D_(v.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,M5(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(h){const f=!!h.before,g=h.values||[];return new Jw(g,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const f=!h.before,g=h.values||[];return new Jw(g,f)})(n.endAt)),JNe(e,i,o,s,a,"F",l,c)}function A5e(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dhe(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=D_(n.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=D_(n.unaryFilter.field);return nr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=D_(n.unaryFilter.field);return nr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=D_(n.unaryFilter.field);return nr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}})(t):t.fieldFilter!==void 0?(function(n){return nr.create(D_(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((r=>dhe(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}})(n.compositeFilter.op))})(t):Ht(30097,{filter:t})}function I5e(t){return _5e[t]}function P5e(t){return x5e[t]}function R5e(t){return w5e[t]}function L_(t){return{fieldPath:t.canonicalString()}}function D_(t){return Oi.fromServerFormat(t.fieldPath)}function fhe(t){return t instanceof nr?(function(n){if(n.op==="=="){if(QZ(n.value))return{unaryFilter:{field:L_(n.field),op:"IS_NAN"}};if(JZ(n.value))return{unaryFilter:{field:L_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(QZ(n.value))return{unaryFilter:{field:L_(n.field),op:"IS_NOT_NAN"}};if(JZ(n.value))return{unaryFilter:{field:L_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:L_(n.field),op:P5e(n.op),value:n.value}}})(t):t instanceof Br?(function(n){const r=n.getFilters().map((i=>fhe(i)));return r.length===1?r[0]:{compositeFilter:{op:R5e(n.op),filters:r}}})(t):Ht(54877,{filter:t})}function C5e(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function phe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Gf{constructor(e,n,r,i,s=on.min(),o=on.min(),a=Ps.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Gf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mhe{constructor(e){this.yt=e}}function M5e(t,e){let n;if(e.document)n=S5e(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=I1(e.noDocument.readTime);n=Zi.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht(56709);{const r=At.fromSegments(e.unknownDocument.path),i=I1(e.unknownDocument.version);n=Zi.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Ur(i[0],i[1]);return on.fromTimestamp(s)})(e.readTime)),n}function gJ(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:r4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,o){return{name:t4(s,o.key),fields:o.data.value.mapValue.fields,updateTime:r2(s,o.version.toTimestamp()),createTime:r2(s,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:A1(e.version)};else{if(!e.isUnknownDocument())return Ht(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:A1(e.version)}}return r}function r4(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function A1(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function I1(t){const e=new Ur(t.seconds,t.nanoseconds);return on.fromTimestamp(e)}function vy(t,e){const n=(e.baseMutations||[]).map((s=>fF(t.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>fF(t.yt,s))),i=Ur.fromMillis(e.localWriteTimeMs);return new rG(e.batchId,i,n,r)}function eS(t){const e=I1(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?I1(t.lastLimboFreeSnapshotVersion):on.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){const o=s.documents.length;return nn(o===1,1966,{count:o}),ru(j5(ahe(s.documents[0])))})(t.query):(function(s){return ru(hhe(s))})(t.query),new Gf(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ps.fromBase64String(t.resumeToken))}function ghe(t,e){const n=A1(e.snapshotVersion),r=A1(e.lastLimboFreeSnapshotVersion);let i;i=Q3(e.target)?che(t.yt,e.target):uhe(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:k1(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yhe(t){const e=hhe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cF(e,e.limit,"L"):e}function K6(t,e){return new sG(e.largestBatchId,fF(t.yt,e.overlayMutation))}function yJ(t,e){const n=e.path.lastSegment();return[t,da(e.path.popLast()),n]}function vJ(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:A1(r.readTime),documentKey:da(r.documentKey.path),largestBatchId:r.largestBatchId}}class N5e{getBundleMetadata(e,n){return _J(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:I1(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return _J(e).put((function(i){return{bundleId:i.id,createTime:A1(La(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return xJ(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:yhe(s.bundledQuery),readTime:I1(s.readTime)}})(r)}))}saveNamedQuery(e,n){return xJ(e).put((function(i){return{name:i.name,readTime:A1(La(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function _J(t){return Hs(t,N5)}function xJ(t){return Hs(t,O5)}class B5{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new B5(e,r)}getOverlay(e,n){return mE(e).get(yJ(this.userId,n)).next((r=>r?K6(this.serializer,r):null))}getOverlays(e,n){const r=dd();return xe.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,o)=>{const a=new sG(n,o);i.push(this.St(e,a))})),xe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(da(o.getCollectionPath()))));const s=[];return i.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(mE(e).Z(tF,a))})),xe.waitFor(s)}getOverlaysForCollection(e,n,r){const i=dd(),s=da(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return mE(e).J(tF,o).next((a=>{for(const l of a){const c=K6(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=dd();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return mE(e).ee({index:vue,range:a},((l,c,u)=>{const h=K6(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()})).next((()=>s))}St(e,n){return mE(e).put((function(i,s,o){const[a,l,c]=yJ(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:n4(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function mE(t){return Hs(t,L5)}class O5e{bt(e){return Hs(e,XU)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Ps.fromUint8Array(r):Ps.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class _y{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(wi(e.integerValue));else if("doubleValue"in e){const r=wi(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),yk(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=hp(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(dp(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Rue(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):$5(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ht(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=Xw,s=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(wi(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),At.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}_y.Kt=new _y;const a_=255;function L5e(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function wJ(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const o=L5e(255&r[s]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class D5e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=wJ(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=wJ(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(a_),this.sn(255)}_n(){this.an(a_),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===a_?(this.sn(a_),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===a_?(this.an(a_),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $5e{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class j5e{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class gE{constructor(){this.cn=new D5e,this.ln=new $5e(this.cn),this.hn=new j5e(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class xy{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new xy(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:YC(this.En),directionalValue:YC(this.dn),orderedDocumentKey:YC(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function nm(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=bJ(t.En,e.En),n!==0?n:(n=bJ(t.dn,e.dn),n!==0?n:At.comparator(t.In,e.In)))}function bJ(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function YC(t){return dce()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function EJ(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class SJ{constructor(e){this.mn=new Hr(((n,r)=>Oi.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(nn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=J8(e);if(n!==void 0&&!this.wn(n))return!1;const r=W0(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Hr(Oi.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new zC(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new zC(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new zC(r.field,r.dir==="asc"?0:1)));return new q3(q3.UNKNOWN_ID,this.collectionId,n,gk.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function vhe(t){if(nn(t instanceof nr||t instanceof Br,20012),t instanceof nr){if(t instanceof Fue){const n=t.value.arrayValue?.values?.map((r=>nr.create(t.field,"==",r)))||[];return Br.create(n,"or")}return t}const e=t.filters.map((n=>vhe(n)));return Br.create(e,t.op)}function F5e(t){if(t.getFilters().length===0)return[];const e=gF(vhe(t));return nn(_he(e),7391),pF(e)||mF(e)?[e]:e.getFilters()}function pF(t){return t instanceof nr}function mF(t){return t instanceof Br&&tG(t)}function _he(t){return pF(t)||mF(t)||(function(n){if(n instanceof Br&&sF(n)){for(const r of n.getFilters())if(!pF(r)&&!mF(r))return!1;return!0}return!1})(t)}function gF(t){if(nn(t instanceof nr||t instanceof Br,34018),t instanceof nr)return t;if(t.filters.length===1)return gF(t.filters[0]);const e=t.filters.map((r=>gF(r)));let n=Br.create(e,t.op);return n=i4(n),_he(n)?n:(nn(n instanceof Br,64498),nn(Qw(n),40251),nn(n.filters.length>1,57927),n.filters.reduce(((r,i)=>lG(r,i))))}function lG(t,e){let n;return nn(t instanceof nr||t instanceof Br,38388),nn(e instanceof nr||e instanceof Br,25473),n=t instanceof nr?e instanceof nr?(function(i,s){return Br.create([i,s],"and")})(t,e):TJ(t,e):e instanceof nr?TJ(e,t):(function(i,s){if(nn(i.filters.length>0&&s.filters.length>0,48005),Qw(i)&&Qw(s))return Due(i,s.getFilters());const o=sF(i)?i:s,a=sF(i)?s:i,l=o.filters.map((c=>lG(c,a)));return Br.create(l,"or")})(t,e),i4(n)}function TJ(t,e){if(Qw(e))return Due(e,t.getFilters());{const n=e.filters.map((r=>lG(t,r)));return Br.create(n,"or")}}function i4(t){if(nn(t instanceof nr||t instanceof Br,11850),t instanceof nr)return t;const e=t.getFilters();if(e.length===1)return i4(e[0]);if(Oue(t))return t;const n=e.map((i=>i4(i))),r=[];return n.forEach((i=>{i instanceof nr?r.push(i):i instanceof Br&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Br.create(r,t.op)}class V5e{constructor(){this.Cn=new cG}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(dc.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(dc.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class cG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hr(Tr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hr(Tr.comparator)).toArray()}}const kJ="IndexedDbIndexManager",dR=new Uint8Array(0);class z5e{constructor(e,n){this.databaseId=n,this.vn=new cG,this.Fn=new bp((r=>k1(r)),((r,i)=>WA(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const s={collectionId:r,parent:da(i)};return AJ(e).put(s)}return xe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[oue(n),""],!1,!0);return AJ(e).J(i).next((s=>{for(const o of s){if(o.collectionId!==n)break;r.push(hd(o.parent))}return r}))}addFieldIndex(e,n){const r=yE(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=c_(e);return s.next((a=>{o.put(vJ(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=yE(e),i=c_(e),s=l_(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=yE(e),r=l_(e),i=c_(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return xe.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new SJ(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=l_(e);let i=!0;const s=new Map;return xe.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{i&&(i=!!a),s.set(o,a)})))).next((()=>{if(i){let o=Gn();const a=[];return xe.forEach(s,((l,c)=>{ft(kJ,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(l)} to execute ${k1(n)}`);const u=(function(I,P){const M=J8(P);if(M===void 0)return null;for(const F of e4(I,M.fieldPath))switch(F.op){case"array-contains-any":return F.value.arrayValue.values||[];case"array-contains":return[F.value]}return null})(c,l),h=(function(I,P){const M=new Map;for(const F of W0(P))for(const C of e4(I,F.fieldPath))switch(C.op){case"==":case"in":M.set(F.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return M.set(F.fieldPath.canonicalString(),C.value),Array.from(M.values())}return null})(c,l),f=(function(I,P){const M=[];let F=!0;for(const C of W0(P)){const N=C.kind===0?iJ(I,C.fieldPath,I.startAt):sJ(I,C.fieldPath,I.startAt);M.push(N.value),F&&(F=N.inclusive)}return new Jw(M,F)})(c,l),g=(function(I,P){const M=[];let F=!0;for(const C of W0(P)){const N=C.kind===0?sJ(I,C.fieldPath,I.endAt):iJ(I,C.fieldPath,I.endAt);M.push(N.value),F&&(F=N.inclusive)}return new Jw(M,F)})(c,l),v=this.On(l,c,f),x=this.On(l,c,g),b=this.Nn(l,c,h),T=this.Bn(l.indexId,u,v,f.inclusive,x,g.inclusive,b);return xe.forEach(T,(A=>r.Y(A,n.limit).next((I=>{I.forEach((P=>{const M=At.fromSegments(P.documentKey);o.has(M)||(o=o.add(M),a.push(M))}))}))))})).next((()=>a))}return xe.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=F5e(Br.create(e.filters,"and")).map((r=>aF(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):dR,g=this.kn(e,f,r[h%c],i),v=this.qn(e,f,s[h%c],o),x=a.map((b=>this.kn(e,f,b,!0)));u.push(...this.createRange(g,v,x))}return u}kn(e,n,r,i){const s=new xy(e,At.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new xy(e,At.empty(),n,r);return i?s.An():s}xn(e,n){const r=new SJ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return xe.forEach(i,(s=>this.xn(e,s).next((o=>{o?r!==0&&o.fields.length<(function(l){let c=new Hr(Oi.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new gE;for(const i of W0(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);_y.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new gE;return _y.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new gE;return _y.Kt.Dt(Ek(this.databaseId,n),r.Pn((function(s){const o=W0(s);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new gE);let s=0;for(const o of W0(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Sk(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);_y.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new gE;l.seed(a.un()),_y.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find((r=>r instanceof nr&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=yE(e),i=c_(e);return(n?r.J(eF,IDBKeyRange.bound(n,n)):r.J()).next((s=>{const o=[];return xe.forEach(s,(a=>i.get([a.indexId,this.uid]).next((l=>{o.push((function(u,h){const f=h?new gk(h.sequenceNumber,new dc(I1(h.readTime),new At(hd(h.documentKey)),h.largestBatchId)):gk.empty(),g=u.fields.map((([v,x])=>new zC(Oi.fromServerFormat(v),x)));return new q3(u.indexId,u.collectionGroup,g,f)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Rn(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=yE(e),s=c_(e);return this.Gn(e).next((o=>i.J(eF,IDBKeyRange.bound(n,n)).next((a=>xe.forEach(a,(l=>s.put(vJ(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return xe.forEach(n,((i,s)=>{const o=r.get(i.collectionGroup);return(o?xe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),xe.forEach(a,(l=>this.zn(e,i,l).next((c=>{const u=this.jn(s,l);return c.isEqual(u)?xe.resolve():this.Jn(e,s,l,c,u)})))))))}))}Hn(e,n,r,i){return l_(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return l_(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=l_(e);let s=new Hr(nm);return i.ee({index:yue,range:IDBKeyRange.only([r.indexId,this.uid,YC(this.$n(r,n))])},((o,a)=>{s=s.add(new xy(r.indexId,n,EJ(a.arrayValue),EJ(a.directionalValue)))})).next((()=>s))}jn(e,n){let r=new Hr(nm);const i=this.Qn(n,e);if(i==null)return r;const s=J8(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Sk(o))for(const a of o.arrayValue.values||[])r=r.add(new xy(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new xy(n.indexId,e.key,dR,i));return r}Jn(e,n,r,i,s){ft(kJ,"Updating index entries for document '%s'",n.key);const o=[];return(function(l,c,u,h,f){const g=l.getIterator(),v=c.getIterator();let x=o_(g),b=o_(v);for(;x||b;){let T=!1,A=!1;if(x&&b){const I=u(x,b);I<0?A=!0:I>0&&(T=!0)}else x!=null?A=!0:T=!0;T?(h(b),b=o_(v)):A?(f(x),x=o_(g)):(x=o_(g),b=o_(v))}})(i,s,nm,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),xe.waitFor(o)}Gn(e){let n=1;return c_(e).ee({index:gue,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>nm(o,a))).filter(((o,a,l)=>!a||nm(o,l[a-1])!==0));const i=[];i.push(e);for(const o of r){const a=nm(o,e),l=nm(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,dR,At.empty()),l=i[o+1].Vn(this.uid,dR,At.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return nm(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(IJ)}getMinOffset(e,n){return xe.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ht(44426))))).next(IJ)}}function AJ(t){return Hs(t,xk)}function l_(t){return Hs(t,ZS)}function yE(t){return Hs(t,YU)}function c_(t){return Hs(t,XS)}function IJ(t){nn(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;HU(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new dc(e.readTime,e.documentKey,n)}const PJ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xhe=41943040;class Qo{static withCacheSize(e){return new Qo(e,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function whe(t,e,n){const r=t.store(Hu),i=t.store(Hw),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},((u,h,f)=>(a++,f.delete())));s.push(l.next((()=>{nn(a===1,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const h=fue(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return xe.waitFor(s).next((()=>c))}function s4(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ht(14731);e=t.noDocument}return JSON.stringify(e).length}Qo.DEFAULT_COLLECTION_PERCENTILE=10,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qo.DEFAULT=new Qo(xhe,Qo.DEFAULT_COLLECTION_PERCENTILE,Qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qo.DISABLED=new Qo(-1,0,0);class W5{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){nn(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new W5(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rm(e).ee({index:Cy,range:r},((i,s,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=$_(e),o=rm(e);return o.add({}).next((a=>{nn(typeof a=="number",49019);const l=new rG(a,n,r,i),c=(function(g,v,x){const b=x.baseMutations.map((A=>n4(g.yt,A))),T=x.mutations.map((A=>n4(g.yt,A)));return{userId:v,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:b,mutations:T}})(this.serializer,this.userId,l),u=[];let h=new Hr(((f,g)=>Rn(f.canonicalString(),g.canonicalString())));for(const f of i){const g=fue(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(s.put(g,gNe))}return h.forEach((f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),xe.waitFor(u).next((()=>l))}))}lookupMutationBatch(e,n){return rm(e).get(n).next((r=>r?(nn(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),vy(this.serializer,r)):null))}er(e,n){return this.Xn[n]?xe.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return rm(e).ee({index:Cy,range:i},((o,a,l)=>{a.userId===this.userId&&(nn(a.batchId>=r,47524,{tr:r}),s=vy(this.serializer,a)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=qy;return rm(e).ee({index:Cy,range:n,reverse:!0},((i,s,o)=>{r=s.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,qy],[this.userId,Number.POSITIVE_INFINITY]);return rm(e).J(Cy,n).next((r=>r.map((i=>vy(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=UC(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return $_(e).ee({range:i},((o,a,l)=>{const[c,u,h]=o,f=hd(u);if(c===this.userId&&n.path.isEqual(f))return rm(e).get(h).next((g=>{if(!g)throw Ht(61480,{nr:o,batchId:h});nn(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(vy(this.serializer,g))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);const i=[];return n.forEach((s=>{const o=UC(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=$_(e).ee({range:a},((c,u,h)=>{const[f,g,v]=c,x=hd(g);f===this.userId&&s.path.isEqual(x)?r=r.add(v):h.done()}));i.push(l)})),xe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=UC(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Hr(Rn);return $_(e).ee({range:o},((l,c,u)=>{const[h,f,g]=l,v=hd(f);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(g)):u.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((s=>{i.push(rm(e).get(s).next((o=>{if(o===null)throw Ht(35274,{batchId:s});nn(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(vy(this.serializer,o))})))})),xe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return whe(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),xe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return xe.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return $_(e).ee({range:r},((s,o,a)=>{if(s[0]===this.userId){const l=hd(s[1]);i.push(l)}else a.done()})).next((()=>{nn(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,n){return bhe(e,this.userId,n)}_r(e){return Ehe(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:qy,lastStreamToken:""}))}}function bhe(t,e,n){const r=UC(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return $_(t).ee({range:s,X:!0},((a,l,c)=>{const[u,h,f]=a;u===e&&h===i&&(o=!0),c.done()})).next((()=>o))}function rm(t){return Hs(t,Hu)}function $_(t){return Hs(t,Hw)}function Ehe(t){return Hs(t,vk)}class P1{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new P1(0)}static cr(){return new P1(-1)}}class U5e{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new P1(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>on.fromTimestamp(new Ur(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>u_(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(nn(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return u_(e).ee(((o,a)=>{const l=eS(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>xe.waitFor(s))).next((()=>i))}forEachTarget(e,n){return u_(e).ee(((r,i)=>{const s=eS(i);n(s)}))}lr(e){return RJ(e).get(X3).next((n=>(nn(n!==null,2888),n)))}hr(e,n){return RJ(e).put(X3,n)}Pr(e,n){return u_(e).put(ghe(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=k1(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return u_(e).ee({range:i,index:mue},((o,a,l)=>{const c=eS(a);WA(n,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=zm(e);return n.forEach((o=>{const a=da(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))})),xe.waitFor(i)}removeMatchingKeys(e,n,r){const i=zm(e);return xe.forEach(n,(s=>{const o=da(s.path);return xe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=zm(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=zm(e);let s=Gn();return i.ee({range:r,X:!0},((o,a,l)=>{const c=hd(o[1]),u=new At(c);s=s.add(u)})).next((()=>s))}containsKey(e,n){const r=da(n.path),i=IDBKeyRange.bound([r],[oue(r)],!1,!0);let s=0;return zm(e).ee({index:KU,X:!0,range:i},(([o,a],l,c)=>{o!==0&&(s++,c.done())})).next((()=>s>0))}At(e,n){return u_(e).get(n).next((r=>r?eS(r):null))}}function u_(t){return Hs(t,qw)}function RJ(t){return Hs(t,Ky)}function zm(t){return Hs(t,Kw)}const CJ="LruGarbageCollector",G5e=1048576;function MJ([t,e],[n,r]){const i=Rn(t,n);return i===0?Rn(e,r):i}class B5e{constructor(e){this.Ir=e,this.buffer=new Hr(MJ),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();MJ(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class She{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ft(CJ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jg(n)?ft(CJ,"Ignoring IndexedDB error during garbage collection: ",n):await nv(n)}await this.Vr(3e5)}))}}class W5e{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(Zc.ce);const r=new B5e(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(PJ)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PJ):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),N_()<=er.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function The(t,e){return new W5e(t,e)}class H5e{constructor(e,n){this.db=e,this.garbageCollector=The(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return fR(e,r)}removeReference(e,n,r){return fR(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return fR(e,n)}br(e,n){return(function(i,s){let o=!1;return Ehe(i).te((a=>bhe(i,a,s).next((l=>(l&&(o=!0),xe.resolve(!l)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((o,a)=>{if(a<=n){const l=this.br(e,o).next((c=>{if(!c)return s++,r.getEntry(e,o).next((()=>(r.removeEntry(o,on.min()),zm(e).delete((function(h){return[0,da(h.path)]})(o)))))}));i.push(l)}})).next((()=>xe.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return fR(e,n)}Sr(e,n){const r=zm(e);let i,s=Zc.ce;return r.ee({index:KU},(([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Zc.ce&&n(new At(hd(i)),s),s=c,i=l):s=Zc.ce})).next((()=>{s!==Zc.ce&&n(new At(hd(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fR(t,e){return zm(t).put((function(r,i){return{targetId:0,path:da(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class khe{constructor(){this.changes=new bp((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class q5e{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return R0(e).put(r)}removeEntry(e,n,r){return R0(e).delete((function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],r4(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Zi.newInvalidDocument(n);return R0(e).ee({index:GC,range:IDBKeyRange.only(vE(n))},((i,s)=>{r=this.Cr(n,s)})).next((()=>r))}vr(e,n){let r={size:0,document:Zi.newInvalidDocument(n)};return R0(e).ee({index:GC,range:IDBKeyRange.only(vE(n))},((i,s)=>{r={document:this.Cr(n,s),size:s4(s)}})).next((()=>r))}getEntries(e,n){let r=ic();return this.Fr(e,n,((i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=ic(),i=new Si(At.comparator);return this.Fr(e,n,((s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,s4(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return xe.resolve();let i=new Hr(LJ);n.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(vE(i.first()),vE(i.last())),o=i.getIterator();let a=o.getNext();return R0(e).ee({index:GC,range:s},((l,c,u)=>{const h=At.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&LJ(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(vE(a)):u.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),r4(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return R0(e).J(IDBKeyRange.bound(a,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let u=ic();for(const h of c){const f=this.Cr(At.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(qA(n,f)||i.has(f.key))&&(u=u.insert(f.key,f))}return u}))}getAllFromCollectionGroup(e,n,r,i){let s=ic();const o=OJ(n,r),a=OJ(n,dc.max());return R0(e).ee({index:pue,range:IDBKeyRange.bound(o,a,!0)},((l,c,u)=>{const h=this.Cr(At.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()})).next((()=>s))}newChangeBuffer(e){return new K5e(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return NJ(e).get(Q8).next((n=>(nn(!!n,20021),n)))}Dr(e,n){return NJ(e).put(Q8,n)}Cr(e,n){if(n){const r=M5e(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(on.min())))return r}return Zi.newInvalidDocument(e)}}function Ahe(t){return new q5e(t)}class K5e extends khe{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new bp((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Hr(((s,o)=>Rn(s.canonicalString(),o.canonicalString())));return this.changes.forEach(((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=gJ(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=s4(l);r+=c-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=gJ(this.Nr.serializer,o.convertToNoDocument(on.min()));n.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.Nr.updateMetadata(e,r)),xe.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})})),r)))}}function NJ(t){return Hs(t,_k)}function R0(t){return Hs(t,Y3)}function vE(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function OJ(t,e){const n=e.documentKey.path.toArray();return[t,r4(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function LJ(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Rn(n[s],r[s]),i)return i;return i=Rn(n.length,r.length),i||(i=Rn(n[n.length-2],r[r.length-2]),i||Rn(n[n.length-1],r[r.length-1]))}class Y5e{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Ihe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&tT(r.mutation,i,ml.empty(),Ur.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Gn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Gn()){const i=dd();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=JE();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=dd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Gn())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=ic();const o=eT(),a=(function(){return eT()})();return n.forEach(((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Ep)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tT(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):o.set(c.key,ml.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>a.set(c,new Y5e(u,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=eT();let i=new Si(((o,a)=>o-a)),s=Gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||ml.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||Gn()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Wue();u.forEach((f=>{if(!s.has(f)){const g=Jue(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return xe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vue(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):xe.resolve(dd());let a=mk,l=s;return o.next((c=>xe.forEach(c,((u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?xe.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,Gn()))).next((u=>({batchId:a,changes:Bue(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=JE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=JE();return this.indexManager.getCollectionParents(e,s).next((a=>xe.forEach(a,(l=>{const c=(function(h,f){return new HA(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((u=>{u.forEach(((h,f)=>{o=o.insert(h,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Zi.newInvalidDocument(u)))}));let a=JE();return o.forEach(((l,c)=>{const u=s.get(l);u!==void 0&&tT(u.mutation,c,ml.empty(),Ur.now()),qA(n,c)&&(a=a.insert(l,c))})),a}))}}class X5e{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return xe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:La(i.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:yhe(i.bundledQuery),readTime:La(i.readTime)}})(n)),xe.resolve()}}class Z5e{constructor(){this.overlays=new Si(At.comparator),this.qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=dd();return xe.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),xe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const i=dd(),s=n.length+1,o=new At(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Si(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=dd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=dd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return xe.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sG(n,r));let s=this.qr.get(n);s===void 0&&(s=Gn(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class J5e{constructor(){this.sessionToken=Ps.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class uG{constructor(){this.Qr=new Hr(no.$r),this.Ur=new Hr(no.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new no(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new no(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new At(new Tr([])),r=new no(n,e),i=new no(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new At(new Tr([])),r=new no(n,e),i=new no(n,e+1);let s=Gn();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new no(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class no{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return At.comparator(e.key,n.key)||Rn(e.Yr,n.Yr)}static Kr(e,n){return Rn(e.Yr,n.Yr)||At.comparator(e.key,n.key)}}class Q5e{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hr(no.$r)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rG(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new no(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?qy:this.tr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new no(n,0),i=new no(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);return n.forEach((i=>{const s=new no(i,0),o=new no(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),xe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;At.isDocumentKey(s)||(s=s.child(""));const o=new no(new At(s),0);let a=new Hr(Rn);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),xe.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){nn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return xe.forEach(n.mutations,(i=>{const s=new no(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new no(n,0),i=this.Zr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eOe{constructor(e){this.ri=e,this.docs=(function(){return new Si(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():Zi.newInvalidDocument(n))}getEntries(e,n){let r=ic();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zi.newInvalidDocument(i))})),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ic();const o=n.path,a=new At(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||HU(cue(u),r)<=0||(i.has(u.key)||qA(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ht(9500)}ii(e,n){return xe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new tOe(this)}getSize(e){return xe.resolve(this.size)}}class tOe extends khe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),xe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class nOe{constructor(e){this.persistence=e,this.si=new bp((n=>k1(n)),WA),this.lastRemoteSnapshotVersion=on.min(),this.highestTargetId=0,this.oi=0,this._i=new uG,this.targetCount=0,this.ai=P1.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),xe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new P1(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Pr(n),xe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),xe.waitFor(s).next((()=>i))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),xe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this._i.containsKey(n))}}class hG{constructor(e,n){this.ui={},this.overlays={},this.ci=new Zc(0),this.li=!1,this.li=!0,this.hi=new J5e,this.referenceDelegate=e(this),this.Pi=new nOe(this),this.indexManager=new V5e,this.remoteDocumentCache=(function(i){return new eOe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new mhe(n),this.Ii=new X5e(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Z5e,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Q5e(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ft("MemoryPersistence","Starting transaction:",e);const i=new rOe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return xe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class rOe extends hue{constructor(e){super(),this.currentSequenceNumber=e}}class H5{constructor(e){this.persistence=e,this.Ri=new uG,this.Vi=null}static mi(e){return new H5(e)}get fi(){if(this.Vi)return this.Vi;throw Ht(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.fi,(r=>{const i=At.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,on.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class o4{constructor(e,n){this.persistence=e,this.pi=new bp((r=>da(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=The(this,n)}static mi(e,n){return new o4(e,n)}Ei(){}di(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return xe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?xe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,on.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=WC(e.data.value)),n}br(e,n,r){return xe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class iOe{constructor(e){this.serializer=e}k(e,n,r,i){const s=new C5("createOrUpgrade",n);r<1&&i>=1&&((function(l){l.createObjectStore(BA)})(e),(function(l){l.createObjectStore(vk,{keyPath:mNe}),l.createObjectStore(Hu,{keyPath:HZ,autoIncrement:!0}).createIndex(Cy,qZ,{unique:!0}),l.createObjectStore(Hw)})(e),DJ(e),(function(l){l.createObjectStore(H0)})(e));let o=xe.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(Kw),l.deleteObjectStore(qw),l.deleteObjectStore(Ky)})(e),DJ(e)),o=o.next((()=>(function(l){const c=l.store(Ky),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:on.min().toTimestamp(),targetCount:0};return c.put(X3,u)})(s)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(l,c){return c.store(Hu).J().next((h=>{l.deleteObjectStore(Hu),l.createObjectStore(Hu,{keyPath:HZ,autoIncrement:!0}).createIndex(Cy,qZ,{unique:!0});const f=c.store(Hu),g=h.map((v=>f.put(v)));return xe.waitFor(g)}))})(e,s)))),o=o.next((()=>{(function(l){l.createObjectStore(Yw,{keyPath:SNe})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(s)))),r<6&&i>=6&&(o=o.next((()=>((function(l){l.createObjectStore(_k)})(e),this.wi(s))))),r<7&&i>=7&&(o=o.next((()=>this.Si(s)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,s)))),r<9&&i>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(s)))),r<11&&i>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(N5,{keyPath:TNe})})(e),(function(l){l.createObjectStore(O5,{keyPath:kNe})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(l){const c=l.createObjectStore(L5,{keyPath:NNe});c.createIndex(tF,ONe,{unique:!1}),c.createIndex(vue,LNe,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(l){const c=l.createObjectStore(Y3,{keyPath:yNe});c.createIndex(GC,vNe),c.createIndex(pue,_Ne)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(H0)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(o=o.next((()=>(function(l){l.createObjectStore(YU,{keyPath:ANe,autoIncrement:!0}).createIndex(eF,INe,{unique:!1}),l.createObjectStore(XS,{keyPath:PNe}).createIndex(gue,RNe,{unique:!1}),l.createObjectStore(ZS,{keyPath:CNe}).createIndex(yue,MNe,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(XS).clear()})).next((()=>{n.objectStore(ZS).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(XU,{keyPath:DNe})})(e)}))),r<18&&i>=18&&dce()&&(o=o.next((()=>{n.objectStore(XS).clear()})).next((()=>{n.objectStore(ZS).clear()}))),o}wi(e){let n=0;return e.store(H0).ee(((r,i)=>{n+=s4(i)})).next((()=>{const r={byteSize:n};return e.store(_k).put(Q8,r)}))}yi(e){const n=e.store(vk),r=e.store(Hu);return n.J().next((i=>xe.forEach(i,(s=>{const o=IDBKeyRange.bound([s.userId,qy],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Cy,o).next((a=>xe.forEach(a,(l=>{nn(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=vy(this.serializer,l);return whe(e,s.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(Kw),r=e.store(H0);return e.store(Ky).get(X3).next((i=>{const s=[];return r.ee(((o,a)=>{const l=new Tr(o),c=(function(h){return[0,da(h)]})(l);s.push(n.get(c).next((u=>u?xe.resolve():(h=>n.put({targetId:0,path:da(h),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>xe.waitFor(s)))}))}bi(e,n){e.createObjectStore(xk,{keyPath:ENe});const r=n.store(xk),i=new cG,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:da(l)})}};return n.store(H0).ee({X:!0},((o,a)=>{const l=new Tr(o);return s(l.popLast())})).next((()=>n.store(Hw).ee({X:!0},(([o,a,l],c)=>{const u=hd(a);return s(u.popLast())}))))}Di(e){const n=e.store(qw);return n.ee(((r,i)=>{const s=eS(i),o=ghe(this.serializer,s);return n.put(o)}))}Ci(e,n){const r=n.store(H0),i=[];return r.ee(((s,o)=>{const a=n.store(Y3),l=(function(h){return h.document?new At(Tr.fromString(h.document.name).popFirst(5)):h.noDocument?At.fromSegments(h.noDocument.path):h.unknownDocument?At.fromSegments(h.unknownDocument.path):Ht(36783)})(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))})).next((()=>xe.waitFor(i)))}Fi(e,n){const r=n.store(Hu),i=Ahe(this.serializer),s=new hG(H5.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let c=a.get(l.userId)??Gn();vy(this.serializer,l).keys().forEach((u=>c=c.add(u))),a.set(l.userId,c)})),xe.forEach(a,((l,c)=>{const u=new Po(c),h=B5.wt(this.serializer,u),f=s.getIndexManager(u),g=W5.wt(u,this.serializer,f,s.referenceDelegate);return new Ihe(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new nF(n,Zc.ce),l).next()}))}))}}function DJ(t){t.createObjectStore(Kw,{keyPath:wNe}).createIndex(KU,bNe,{unique:!0}),t.createObjectStore(qw,{keyPath:"targetId"}).createIndex(mue,xNe,{unique:!0}),t.createObjectStore(Ky)}const im="IndexedDbPersistence",Y6=18e5,X6=5e3,Z6="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sOe="main";class dG{constructor(e,n,r,i,s,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!dG.v())throw new St(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new H5e(this,i),this.$i=n+sOe,this.serializer=new mhe(l),this.Ui=new gg(this.$i,this.Ni,new iOe(this.serializer)),this.hi=new O5e,this.Pi=new U5e(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ahe(this.serializer),this.Ii=new N5e,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&Ra(im,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(We.FAILED_PRECONDITION,Z6);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Zc(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pR(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Jg(e))return ft(im,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft(im,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return _E(e).get(s_).next((n=>xe.resolve(this.es(n))))}ts(e){return pR(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Y6)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Hs(n,Yw);return r.J().next((i=>{const s=this.ss(i,Y6),o=i.filter((a=>s.indexOf(a)===-1));return xe.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?xe.resolve(!0):_E(e).get(s_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,X6)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new St(We.FAILED_PRECONDITION,Z6);return!1}}return!(!this.networkEnabled||!this.inForeground)||pR(e).J().next((r=>this.ss(r,X6).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ft(im,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[BA,Yw],(e=>{const n=new nF(e,Zc.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>pR(e).J().next((n=>this.ss(n,Y6).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return W5.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z5e(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return B5.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ft(im,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?FNe:l===17?bue:l===16?jNe:l===15?ZU:l===14?wue:l===13?xue:l===12?$Ne:l===11?_ue:void Ht(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,s,(a=>(o=new nF(a,this.ci?this.ci.next():Zc.ce),n==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw Ra(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new St(We.FAILED_PRECONDITION,uue);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return _E(e).get(s_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,X6)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new St(We.FAILED_PRECONDITION,Z6)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _E(e).put(s_,n)}static v(){return gg.v()}Zi(e){const n=_E(e);return n.get(s_).next((r=>this.es(r)?(ft(im,"Releasing primary lease."),n.delete(s_)):xe.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Ra(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;hce()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return ft(im,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Ra(im,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Ra("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function _E(t){return Hs(t,BA)}function pR(t){return Hs(t,Yw)}function oOe(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class fG{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Gn(),i=Gn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fG(e,n.fromCache,r,i)}}class aOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Phe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hce()?8:due(Bs())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new aOe;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(N_()<=er.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",O_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xe.resolve()):(N_()<=er.DEBUG&&ft("QueryEngine","Query:",O_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(N_()<=er.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",O_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ru(n))):xe.resolve())}ys(e,n){if(oJ(n))return xe.resolve(null);let r=ru(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=cF(n,null,"F"),r=ru(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=Gn(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,cF(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,i){return oJ(n)||i.isEqual(on.min())?xe.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?xe.resolve(null):(N_()<=er.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),O_(n)),this.vs(e,o,n,lNe(i,mk)).next((a=>a)))}))}Ds(e,n){let r=new Hr(Uue(e));return n.forEach(((i,s)=>{qA(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return N_()<=er.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",O_(n)),this.ps.getDocumentsMatchingQuery(e,n,dc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const pG="LocalStore",lOe=3e8;class cOe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Si(Rn),this.xs=new bp((s=>k1(s)),WA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ihe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Rhe(t,e,n,r){return new cOe(t,e,n,r)}async function Che(t,e){const n=Cn(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=Gn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function uOe(t,e){const n=Cn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,u){const h=c.batch,f=h.keys();let g=xe.resolve();return f.forEach((v=>{g=g.next((()=>u.getEntry(l,v))).next((x=>{const b=c.docVersions.get(v);nn(b!==null,48541),x.version.compareTo(b)<0&&(h.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),u.addEntry(x)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Gn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function Mhe(t){const e=Cn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function hOe(t,e){const n=Cn(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(s,u.addedDocuments,h))));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ps.EMPTY_BYTE_STRING,on.min()).withLastLimboFreeSnapshotVersion(on.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(x,b,T){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=lOe?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(f,g,u)&&a.push(n.Pi.updateTargetData(s,g))}));let l=ic(),c=Gn();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))})),a.push(dOe(s,o,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(on.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next((h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(u)}return xe.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function dOe(t,e,n){let r=Gn(),i=Gn();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=ic();return n.forEach(((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(on.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ft(pG,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function fOe(t,e){const n=Cn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=qy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function pOe(t,e){const n=Cn(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,xe.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Gf(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function yF(t,e,n){const r=Cn(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Jg(o))throw o;ft(pG,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $J(t,e,n){const r=Cn(t);let i=on.min(),s=Gn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,u){const h=Cn(l),f=h.xs.get(u);return f!==void 0?xe.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)})(r,o,ru(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:on.min(),n?s:Gn()))).next((a=>(mOe(r,e5e(e),a),{documents:a,Qs:s})))))}function mOe(t,e,n){let r=t.Os.get(e)||on.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class jJ{constructor(){this.activeTargetIds=o5e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Nhe{constructor(){this.Mo=new jJ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jJ,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gOe{Oo(e){}shutdown(){}}const FJ="ConnectivityMonitor";class VJ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(FJ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(FJ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let mR=null;function vF(){return mR===null?mR=(function(){return 268435456+Math.round(2147483648*Math.random())})():mR++,"0x"+mR.toString(16)}const J6="RestConnection",yOe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vOe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Z3?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=vF(),a=this.zo(e,n.toUriEncodedString());ft(J6,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=ev(c);return this.Jo(e,a,l,r,u).then((h=>(ft(J6,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw S1(J6,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+W2})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=yOe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class _Oe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const zo="WebChannelConnection";class xOe extends vOe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=vF();return new Promise(((a,l)=>{const c=new Qce;c.setWithCredentials(!0),c.listenOnce(eue.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case VC.NO_ERROR:const h=c.getResponseJson();ft(zo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case VC.TIMEOUT:ft(zo,`RPC '${e}' ${o} timed out`),l(new St(We.DEADLINE_EXCEEDED,"Request time out"));break;case VC.HTTP_ERROR:const f=c.getStatus();if(ft(zo,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const x=(function(T){const A=T.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(A)>=0?A:We.UNKNOWN})(v.status);l(new St(x,v.message))}else l(new St(We.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new St(We.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ft(zo,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(i);ft(zo,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const i=vF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rue(),a=nue(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ft(zo,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,g=!1;const v=new _Oe({Yo:b=>{g?ft(zo,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(ft(zo,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ft(zo,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),x=(b,T,A)=>{b.listen(T,(I=>{try{A(I)}catch(P){setTimeout((()=>{throw P}),0)}}))};return x(h,ZE.EventType.OPEN,(()=>{g||(ft(zo,`RPC '${e}' stream ${i} transport opened.`),v.o_())})),x(h,ZE.EventType.CLOSE,(()=>{g||(g=!0,ft(zo,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(h))})),x(h,ZE.EventType.ERROR,(b=>{g||(g=!0,S1(zo,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.a_(new St(We.UNAVAILABLE,"The operation could not be completed")))})),x(h,ZE.EventType.MESSAGE,(b=>{if(!g){const T=b.data[0];nn(!!T,16349);const A=T,I=A?.error||A[0]?.error;if(I){ft(zo,`RPC '${e}' stream ${i} received error:`,I);const P=I.status;let M=(function(N){const O=ys[N];if(O!==void 0)return the(O)})(P),F=I.message;M===void 0&&(M=We.INTERNAL,F="Unknown error status: "+P+" with message "+I.message),g=!0,v.a_(new St(M,F)),h.close()}else ft(zo,`RPC '${e}' stream ${i} received:`,T),v.u_(T)}})),x(a,tue.STAT_EVENT,(b=>{b.stat===X8.PROXY?ft(zo,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===X8.NOPROXY&&ft(zo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function wOe(){return typeof window<"u"?window:null}function XC(){return typeof document<"u"?document:null}function q5(t){return new b5e(t,!0)}class Ohe{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const zJ="PersistentStream";class Lhe{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ohe(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(Ra(n.toString()),Ra("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new St(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ft(zJ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ft(zJ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bOe extends Lhe{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=T5e(this.serializer,e),r=(function(s){if(!("targetChange"in s))return on.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?on.min():o.readTime?La(o.readTime):on.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=dF(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=Q3(l)?{documents:che(s,l)}:{query:uhe(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ihe(s,o.resumeToken);const c=uF(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(on.min())>0){a.readTime=r2(s,o.snapshotVersion.toTimestamp());const c=uF(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=A5e(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=dF(this.serializer),n.removeTarget=e,this.q_(n)}}class EOe extends Lhe{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=k5e(e.writeResults,e.commitTime),r=La(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=dF(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>n4(this.serializer,r)))};this.q_(n)}}class SOe{}class TOe extends SOe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new St(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,hF(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new St(We.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,hF(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new St(We.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kOe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ra(n),this.aa=!1):ft("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const R1="RemoteStore";class AOe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{rv(this)&&(ft(R1,"Restarting streams for network reachability change."),await(async function(l){const c=Cn(l);c.Ea.add(4),await YA(c),c.Ra.set("Unknown"),c.Ea.delete(4),await K5(c)})(this))}))})),this.Ra=new kOe(r,i)}}async function K5(t){if(rv(t))for(const e of t.da)await e(!0)}async function YA(t){for(const e of t.da)await e(!1)}function Dhe(t,e){const n=Cn(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vG(n)?yG(n):q2(n).O_()&&gG(n,e))}function mG(t,e){const n=Cn(t),r=q2(n);n.Ia.delete(e),r.O_()&&$he(n,e),n.Ia.size===0&&(r.O_()?r.L_():rv(n)&&n.Ra.set("Unknown"))}function gG(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(on.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}q2(t).Y_(e)}function $he(t,e){t.Va.Ue(e),q2(t).Z_(e)}function yG(t){t.Va=new v5e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),q2(t).start(),t.Ra.ua()}function vG(t){return rv(t)&&!q2(t).x_()&&t.Ia.size>0}function rv(t){return Cn(t).Ea.size===0}function jhe(t){t.Va=void 0}async function IOe(t){t.Ra.set("Online")}async function POe(t){t.Ia.forEach(((e,n)=>{gG(t,e)}))}async function ROe(t,e){jhe(t),vG(t)?(t.Ra.ha(e),yG(t)):t.Ra.set("Unknown")}async function COe(t,e,n){if(t.Ra.set("Online"),e instanceof rhe&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){ft(R1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await a4(t,r)}else if(e instanceof KC?t.Va.Ze(e):e instanceof nhe?t.Va.st(e):t.Va.tt(e),!n.isEqual(on.min()))try{const r=await Mhe(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Ps.EMPTY_BYTE_STRING,u.snapshotVersion)),$he(s,l);const h=new Gf(u.target,l,c,u.sequenceNumber);gG(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){ft(R1,"Failed to raise snapshot:",r),await a4(t,r)}}async function a4(t,e,n){if(!Jg(e))throw e;t.Ea.add(1),await YA(t),t.Ra.set("Offline"),n||(n=()=>Mhe(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ft(R1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await K5(t)}))}function Fhe(t,e){return e().catch((n=>a4(t,n,e)))}async function XA(t){const e=Cn(t),n=Cg(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qy;for(;MOe(e);)try{const i=await fOe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,NOe(e,i)}catch(i){await a4(e,i)}Vhe(e)&&zhe(e)}function MOe(t){return rv(t)&&t.Ta.length<10}function NOe(t,e){t.Ta.push(e);const n=Cg(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Vhe(t){return rv(t)&&!Cg(t).x_()&&t.Ta.length>0}function zhe(t){Cg(t).start()}async function OOe(t){Cg(t).ra()}async function LOe(t){const e=Cg(t);for(const n of t.Ta)e.ea(n.mutations)}async function DOe(t,e,n){const r=t.Ta.shift(),i=iG.from(r,e,n);await Fhe(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await XA(t)}async function $Oe(t,e){e&&Cg(t).X_&&await(async function(r,i){if((function(o){return m5e(o)&&o!==We.ABORTED})(i.code)){const s=r.Ta.shift();Cg(r).B_(),await Fhe(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await XA(r)}})(t,e),Vhe(t)&&zhe(t)}async function UJ(t,e){const n=Cn(t);n.asyncQueue.verifyOperationInProgress(),ft(R1,"RemoteStore received new credentials");const r=rv(n);n.Ea.add(3),await YA(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await K5(n)}async function jOe(t,e){const n=Cn(t);e?(n.Ea.delete(2),await K5(n)):e||(n.Ea.add(2),await YA(n),n.Ra.set("Unknown"))}function q2(t){return t.ma||(t.ma=(function(n,r,i){const s=Cn(n);return s.sa(),new bOe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:IOe.bind(null,t),t_:POe.bind(null,t),r_:ROe.bind(null,t),H_:COe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),vG(t)?yG(t):t.Ra.set("Unknown")):(await t.ma.stop(),jhe(t))}))),t.ma}function Cg(t){return t.fa||(t.fa=(function(n,r,i){const s=Cn(n);return s.sa(),new EOe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:OOe.bind(null,t),r_:$Oe.bind(null,t),ta:LOe.bind(null,t),na:DOe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await XA(t)):(await t.fa.stop(),t.Ta.length>0&&(ft(R1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class _G{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new _G(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xG(t,e){if(Ra("AsyncQueue",`${e}: ${t}`),Jg(t))return new St(We.UNAVAILABLE,`${e}: ${t}`);throw t}class Wx{static emptySet(e){return new Wx(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=JE(),this.sortedSet=new Si(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wx)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Wx;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class GJ{constructor(){this.ga=new Si(At.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ht(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class i2{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new i2(e,n,Wx.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&F5(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class FOe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class VOe{constructor(){this.queries=BJ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Cn(n),s=i.queries;i.queries=BJ(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new St(We.ABORTED,"Firestore shutting down"))}}function BJ(){return new bp((t=>zue(t)),F5)}async function Uhe(t,e){const n=Cn(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new FOe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=xG(o,`Initialization of query '${O_(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&wG(n)}async function Ghe(t,e){const n=Cn(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function zOe(t,e){const n=Cn(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&wG(n)}function UOe(t,e,n){const r=Cn(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function wG(t){t.Ca.forEach((e=>{e.next()}))}var _F,WJ;(WJ=_F||(_F={})).Ma="default",WJ.Cache="cache";class Bhe{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new i2(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=i2.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_F.Cache}}class Whe{constructor(e){this.key=e}}class Hhe{constructor(e){this.key=e}}class GOe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gn(),this.mutatedKeys=Gn(),this.eu=Uue(e),this.tu=new Wx(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new GJ,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,h)=>{const f=i.get(u),g=qA(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?v!==x&&(r.track({type:3,doc:g}),b=!0):this.su(f,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),b=!0):f&&!g&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=x?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,h)=>(function(g,v){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Rt:b})}};return x(g)-x(v)})(u.type,h.type)||this.eu(u.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new i2(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new GJ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Gn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Hhe(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Whe(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Gn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return i2.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bG="SyncEngine";class BOe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WOe{constructor(e){this.key=e,this.hu=!1}}class HOe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new bp((a=>zue(a)),F5),this.Iu=new Map,this.Eu=new Set,this.du=new Si(At.comparator),this.Au=new Map,this.Ru=new uG,this.Vu={},this.mu=new Map,this.fu=P1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function qOe(t,e,n=!0){const r=Jhe(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await qhe(r,e,n,!0),i}async function KOe(t,e){const n=Jhe(t);await qhe(n,e,!0,!1)}async function qhe(t,e,n,r){const i=await pOe(t.localStore,ru(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await YOe(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Dhe(t.remoteStore,i),a}async function YOe(t,e,n,r,i){t.pu=(h,f,g)=>(async function(x,b,T,A){let I=b.view.ru(T);I.Cs&&(I=await $J(x.localStore,b.query,!1).then((({documents:C})=>b.view.ru(C,I))));const P=A&&A.targetChanges.get(b.targetId),M=A&&A.targetMismatches.get(b.targetId)!=null,F=b.view.applyChanges(I,x.isPrimaryClient,P,M);return qJ(x,b.targetId,F.au),F.snapshot})(t,h,f,g);const s=await $J(t.localStore,e,!0),o=new GOe(e,s.Qs),a=o.ru(s.documents),l=KA.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);qJ(t,n,c.au);const u=new BOe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function XOe(t,e,n){const r=Cn(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!F5(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await yF(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mG(r.remoteStore,i.targetId),xF(r,i.targetId)})).catch(nv)):(xF(r,i.targetId),await yF(r.localStore,i.targetId,!0))}async function ZOe(t,e){const n=Cn(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mG(n.remoteStore,r.targetId))}async function JOe(t,e,n){const r=Qhe(t);try{const i=await(function(o,a){const l=Cn(o),c=Ur.now(),u=a.reduce(((g,v)=>g.add(v.key)),Gn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let v=ic(),x=Gn();return l.Ns.getEntries(g,u).next((b=>{v=b,v.forEach(((T,A)=>{A.isValidDocument()||(x=x.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,v))).next((b=>{h=b;const T=[];for(const A of a){const I=f5e(A,h.get(A.key).overlayedDocument);I!=null&&T.push(new Ep(A.key,I,Mue(I.value.mapValue),la.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,T,a)})).next((b=>{f=b;const T=b.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(g,b.batchId,T)}))})).then((()=>({batchId:f.batchId,changes:Bue(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new Si(Rn)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(r,i.batchId,n),await ZA(r,i.changes),await XA(r.remoteStore)}catch(i){const s=xG(i,"Failed to persist write");n.reject(s)}}async function Khe(t,e){const n=Cn(t);try{const r=await hOe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?nn(o.hu,14607):i.removedDocuments.size>0&&(nn(o.hu,42227),o.hu=!1))})),await ZA(n,r,e)}catch(r){await nv(r)}}function HJ(t,e,n){const r=Cn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Cn(o);l.onlineState=a;let c=!1;l.queries.forEach(((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)})),c&&wG(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QOe(t,e,n){const r=Cn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Si(At.comparator);o=o.insert(s,Zi.newNoDocument(s,on.min()));const a=Gn().add(s),l=new G5(on.min(),new Map,new Si(Rn),o,a);await Khe(r,l),r.du=r.du.remove(s),r.Au.delete(e),EG(r)}else await yF(r.localStore,e,!1).then((()=>xF(r,e,n))).catch(nv)}async function eLe(t,e){const n=Cn(t),r=e.batch.batchId;try{const i=await uOe(n.localStore,e);Xhe(n,r,null),Yhe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ZA(n,i)}catch(i){await nv(i)}}async function tLe(t,e,n){const r=Cn(t);try{const i=await(function(o,a){const l=Cn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next((h=>(nn(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);Xhe(r,e,n),Yhe(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ZA(r,i)}catch(i){await nv(i)}}function Yhe(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Xhe(t,e,n){const r=Cn(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function xF(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Zhe(t,r)}))}function Zhe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mG(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),EG(t))}function qJ(t,e,n){for(const r of n)r instanceof Whe?(t.Ru.addReference(r.key,e),nLe(t,r)):r instanceof Hhe?(ft(bG,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Zhe(t,r.key)):Ht(19791,{wu:r})}function nLe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ft(bG,"New document in limbo: "+n),t.Eu.add(r),EG(t))}function EG(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new At(Tr.fromString(e)),r=t.fu.next();t.Au.set(r,new WOe(n)),t.du=t.du.insert(n,r),Dhe(t.remoteStore,new Gf(ru(j5(n.path)),r,"TargetPurposeLimboResolution",Zc.ce))}}async function ZA(t,e,n){const r=Cn(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((c=>{if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){i.push(c);const u=fG.As(l.targetId,c);s.push(u)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,c){const u=Cn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>xe.forEach(c,(f=>xe.forEach(f.Es,(g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g))).next((()=>xe.forEach(f.ds,(g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))))))}catch(h){if(!Jg(h))throw h;ft(pG,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.Ms.get(f),v=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(v);u.Ms=u.Ms.insert(f,x)}}})(r.localStore,s))}async function rLe(t,e){const n=Cn(t);if(!n.currentUser.isEqual(e)){ft(bG,"User change. New user:",e.toKey());const r=await Che(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new St(We.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ZA(n,r.Ls)}}function iLe(t,e){const n=Cn(t),r=n.Au.get(e);if(r&&r.hu)return Gn().add(r.key);{let i=Gn();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Jhe(t){const e=Cn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Khe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iLe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QOe.bind(null,e),e.Pu.H_=zOe.bind(null,e.eventManager),e.Pu.yu=UOe.bind(null,e.eventManager),e}function Qhe(t){const e=Cn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eLe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tLe.bind(null,e),e}class kk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=q5(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Rhe(this.persistence,new Phe,e.initialUser,this.serializer)}Cu(e){return new hG(H5.mi,this.serializer)}Du(e){return new Nhe}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kk.provider={build:()=>new kk};class sLe extends kk{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nn(this.persistence.referenceDelegate instanceof o4,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new She(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Qo.withCacheSize(this.cacheSizeBytes):Qo.DEFAULT;return new hG((r=>o4.mi(r,n)),this.serializer)}}class oLe extends kk{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Qhe(this.xu.syncEngine),await XA(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Rhe(this.persistence,new Phe,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new She(r,e.asyncQueue,n)}Mu(e,n){const r=new dNe(n,this.persistence);return new hNe(e.asyncQueue,r)}Cu(e){const n=oOe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Qo.withCacheSize(this.cacheSizeBytes):Qo.DEFAULT;return new dG(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,wOe(),XC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Nhe}}class l4{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>HJ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rLe.bind(null,this.syncEngine),await jOe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new VOe})()}createDatastore(e){const n=q5(e.databaseInfo.databaseId),r=(function(s){return new xOe(s)})(e.databaseInfo);return(function(s,o,a,l){return new TOe(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new AOe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>HJ(this.syncEngine,n,0)),(function(){return VJ.v()?new VJ:new gOe})())}createSyncEngine(e,n){return(function(i,s,o,a,l,c,u){const h=new HOe(i,s,o,a,l,c);return u&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Cn(n);ft(R1,"RemoteStore shutting down."),r.Ea.add(5),await YA(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}l4.provider={build:()=>new l4};class ede{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ra("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Mg="FirestoreClient";class aLe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Po.UNAUTHENTICATED,this.clientId=WU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{ft(Mg,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ft(Mg,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xG(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Q6(t,e){t.asyncQueue.verifyOperationInProgress(),ft(Mg,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Che(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function KJ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lLe(t);ft(Mg,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>UJ(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>UJ(e.remoteStore,i))),t._onlineComponents=e}async function lLe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft(Mg,"Using user provided OfflineComponentProvider");try{await Q6(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;S1("Error using user provided cache. Falling back to memory cache: "+n),await Q6(t,new kk)}}else ft(Mg,"Using default OfflineComponentProvider"),await Q6(t,new sLe(void 0));return t._offlineComponents}async function tde(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft(Mg,"Using user provided OnlineComponentProvider"),await KJ(t,t._uninitializedComponentsProvider._online)):(ft(Mg,"Using default OnlineComponentProvider"),await KJ(t,new l4))),t._onlineComponents}function cLe(t){return tde(t).then((e=>e.syncEngine))}async function nde(t){const e=await tde(t),n=e.eventManager;return n.onListen=qOe.bind(null,e.syncEngine),n.onUnlisten=XOe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=KOe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZOe.bind(null,e.syncEngine),n}function uLe(t,e,n={}){const r=new yd;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new ede({next:f=>{u.Nu(),o.enqueueAndForget((()=>Ghe(s,h)));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new St(We.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new St(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Bhe(j5(a.path),u,{includeMetadataChanges:!0,qa:!0});return Uhe(s,h)})(await nde(t),t.asyncQueue,e,n,r))),r.promise}function hLe(t,e,n={}){const r=new yd;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new ede({next:f=>{u.Nu(),o.enqueueAndForget((()=>Ghe(s,h))),f.fromCache&&l.source==="server"?c.reject(new St(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Bhe(a,u,{includeMetadataChanges:!0,qa:!0});return Uhe(s,h)})(await nde(t),t.asyncQueue,e,n,r))),r.promise}function rde(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const YJ=new Map;const ide="firestore.googleapis.com",XJ=!0;class ZJ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new St(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ide,this.ssl=XJ}else this.host=e.host,this.ssl=e.ssl??XJ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xhe;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<G5e)throw new St(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aNe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rde(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new St(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new St(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new St(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y5{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ZJ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new St(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ZJ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Z4e;switch(r.type){case"firstParty":return new tNe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new St(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=YJ.get(n);r&&(ft("ComponentProvider","Removing Datastore"),YJ.delete(n),r.terminate())})(this),Promise.resolve()}}function dLe(t,e,n,r={}){t=cu(t,Y5);const i=ev(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(RU(`https://${a}`),CU("Firestore",!0)),s.host!==ide&&s.host!==a&&S1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!x1(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Po.MOCK_USER;else{c=cce(r.mockUserToken,t._app?.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new St(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Po(h)}t._authCredentials=new J4e(new sue(c,u))}}class K2{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new K2(this.firestore,e,this._query)}}class ds{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ds(this.firestore,e,this._key)}toJSON(){return{type:ds._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(GA(n,ds._jsonSchema))return new ds(e,r||null,new At(Tr.fromString(n.referencePath)))}}ds._jsonSchemaVersion="firestore/documentReference/1.0",ds._jsonSchema={type:ks("string",ds._jsonSchemaVersion),referencePath:ks("string")};class yg extends K2{constructor(e,n,r){super(e,n,j5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ds(this.firestore,null,new At(e))}withConverter(e){return new yg(this.firestore,e,this._path)}}function JJ(t,e,...n){if(t=ho(t),aue("collection","path",e),t instanceof Y5){const r=Tr.fromString(e,...n);return zZ(r),new yg(t,null,r)}{if(!(t instanceof ds||t instanceof yg))throw new St(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tr.fromString(e,...n));return zZ(r),new yg(t.firestore,null,r)}}function My(t,e,...n){if(t=ho(t),arguments.length===1&&(e=WU.newId()),aue("doc","path",e),t instanceof Y5){const r=Tr.fromString(e,...n);return VZ(r),new ds(t,null,new At(r))}{if(!(t instanceof ds||t instanceof yg))throw new St(We.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Tr.fromString(e,...n));return VZ(r),new ds(t.firestore,t instanceof yg?t.converter:null,new At(r))}}const QJ="AsyncQueue";class eQ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ohe(this,"async_queue_retry"),this._c=()=>{const r=XC();r&&ft(QJ,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=XC();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=XC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new yd;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Jg(e))throw e;ft(QJ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ra("INTERNAL UNHANDLED ERROR: ",tQ(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=_G.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ht(47125,{Pc:tQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function tQ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class e0 extends Y5{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new eQ,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eQ(e),this._firestoreClient=void 0,await e}}}function fLe(t,e){const n=typeof t=="object"?t:OU(),r=typeof t=="string"?t:Z3,i=k5(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oce("firestore");s&&dLe(i,...s)}return i}function SG(t){if(t._terminated)throw new St(We.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sde(t),t._firestoreClient}function sde(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new zNe(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,rde(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aLe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}function pLe(t,e){S1("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return mLe(t,l4.provider,{build:r=>new oLe(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function mLe(t,e,n){if((t=cu(t,e0))._firestoreClient||t._terminated)throw new St(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new St(We.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},sde(t)}class Wc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wc(Ps.fromBase64String(e))}catch(n){throw new St(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wc(Ps.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(GA(e,Wc._jsonSchema))return Wc.fromBase64String(e.bytes)}}Wc._jsonSchemaVersion="firestore/bytes/1.0",Wc._jsonSchema={type:ks("string",Wc._jsonSchemaVersion),bytes:ks("string")};class X5{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new St(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Oi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Z5{constructor(e){this._methodName=e}}class vd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new St(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new St(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vd._jsonSchemaVersion}}static fromJSON(e){if(GA(e,vd._jsonSchema))return new vd(e.latitude,e.longitude)}}vd._jsonSchemaVersion="firestore/geoPoint/1.0",vd._jsonSchema={type:ks("string",vd._jsonSchemaVersion),latitude:ks("number"),longitude:ks("number")};class _d{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_d._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(GA(e,_d._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new _d(e.vectorValues);throw new St(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_d._jsonSchemaVersion="firestore/vectorValue/1.0",_d._jsonSchema={type:ks("string",_d._jsonSchemaVersion),vectorValues:ks("object")};const gLe=/^__.*__$/;class yLe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ep(e,this.data,this.fieldMask,n,this.fieldTransforms):new H2(e,this.data,n,this.fieldTransforms)}}class ode{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ep(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ade(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ac:t})}}class TG{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new TG({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return c4(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ade(this.Ac)&&gLe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vLe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||q5(e)}Cc(e,n,r,i=!1){return new TG({Ac:e,methodName:n,Dc:r,path:Oi.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J5(t){const e=t._freezeSettings(),n=q5(t._databaseId);return new vLe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lde(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);AG("Data must be an object, but it was:",o,r);const a=cde(r,o);let l,c;if(s.merge)l=new ml(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=wF(e,h,n);if(!o.contains(f))throw new St(We.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);hde(u,f)||u.push(f)}l=new ml(u),c=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,c=o.fieldTransforms;return new yLe(new sa(a),l,c)}class Q5 extends Z5{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q5}}class kG extends Z5{_toFieldTransform(e){return new Zue(e.path,new e2)}isEqual(e){return e instanceof kG}}function _Le(t,e,n,r){const i=t.Cc(1,e,n);AG("Data must be an object, but it was:",i,r);const s=[],o=sa.empty();Qg(r,((l,c)=>{const u=IG(e,l,n);c=ho(c);const h=i.yc(u);if(c instanceof Q5)s.push(u);else{const f=JA(c,h);f!=null&&(s.push(u),o.set(u,f))}}));const a=new ml(s);return new ode(o,a,i.fieldTransforms)}function xLe(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[wF(e,r,n)],l=[i];if(s.length%2!=0)throw new St(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(wF(e,s[f])),l.push(s[f+1]);const c=[],u=sa.empty();for(let f=a.length-1;f>=0;--f)if(!hde(c,a[f])){const g=a[f];let v=l[f];v=ho(v);const x=o.yc(g);if(v instanceof Q5)c.push(g);else{const b=JA(v,x);b!=null&&(c.push(g),u.set(g,b))}}const h=new ml(c);return new ode(u,h,o.fieldTransforms)}function wLe(t,e,n,r=!1){return JA(n,t.Cc(r?4:3,e))}function JA(t,e){if(ude(t=ho(t)))return AG("Unsupported field value:",e,t),cde(t,e);if(t instanceof Z5)return(function(r,i){if(!ade(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=JA(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=ho(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a5e(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ur.fromDate(r);return{timestampValue:r2(i.serializer,s)}}if(r instanceof Ur){const s=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:r2(i.serializer,s)}}if(r instanceof vd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wc)return{bytesValue:ihe(i.serializer,r._byteString)};if(r instanceof ds){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:aG(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _d)return(function(o,a){return{mapValue:{fields:{[QU]:{stringValue:eG},[Xw]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return nG(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${R5(r)}`)})(t,e)}function cde(t,e){const n={};return Eue(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qg(t,((r,i)=>{const s=JA(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function ude(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof vd||t instanceof Wc||t instanceof ds||t instanceof Z5||t instanceof _d)}function AG(t,e,n){if(!ude(n)||!lue(n)){const r=R5(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function wF(t,e,n){if((e=ho(e))instanceof X5)return e._internalPath;if(typeof e=="string")return IG(t,e);throw c4("Field path arguments must be of type string or ",t,!1,void 0,n)}const bLe=new RegExp("[~\\*/\\[\\]]");function IG(t,e,n){if(e.search(bLe)>=0)throw c4(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new X5(...e.split("."))._internalPath}catch{throw c4(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function c4(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new St(We.INVALID_ARGUMENT,a+t+l)}function hde(t,e){return t.some((n=>n.isEqual(e)))}class dde{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ds(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ELe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(PG("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ELe extends dde{data(){return super.data()}}function PG(t,e){return typeof e=="string"?IG(t,e):e instanceof X5?e._internalPath:e._delegate._internalPath}function SLe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new St(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RG{}class TLe extends RG{}function kLe(t,e,...n){let r=[];e instanceof RG&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((l=>l instanceof CG)).length,a=s.filter((l=>l instanceof eO)).length;if(o>1||o>0&&a>0)throw new St(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class eO extends TLe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new eO(e,n,r)}_apply(e){const n=this._parse(e);return fde(e._query,n),new K2(e.firestore,e.converter,lF(e._query,n))}_parse(e){const n=J5(e.firestore);return(function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new St(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){rQ(h,u);const v=[];for(const x of h)v.push(nQ(l,s,x));f={arrayValue:{values:v}}}else f=nQ(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||rQ(h,u),f=wLe(a,o,h,u==="in"||u==="not-in");return nr.create(c,u,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ALe(t,e,n){const r=e,i=PG("where",t);return eO._create(i,r,n)}class CG extends RG{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new CG(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)fde(o,l),o=lF(o,l)})(e._query,n),new K2(e.firestore,e.converter,lF(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nQ(t,e,n){if(typeof(n=ho(n))=="string"){if(n==="")throw new St(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vue(e)&&n.indexOf("/")!==-1)throw new St(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Tr.fromString(n));if(!At.isDocumentKey(r))throw new St(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ek(t,new At(r))}if(n instanceof ds)return Ek(t,n._key);throw new St(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${R5(n)}.`)}function rQ(t,e){if(!Array.isArray(t)||t.length===0)throw new St(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fde(t,e){const n=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new St(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new St(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ILe{convertValue(e,n="none"){switch(Pg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ht(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qg(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[Xw].arrayValue?.values?.map((r=>wi(r.doubleValue)));return new _d(n)}convertGeoPoint(e){return new vd(wi(e.latitude),wi(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=D5(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wk(e));default:return null}}convertTimestamp(e){const n=hp(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Tr.fromString(e);nn(phe(r),9688,{name:e});const i=new T1(r.get(1),r.get(3)),s=new At(r.popFirst(5));return i.isEqual(n)||Ra(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function pde(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class tS{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xy extends dde{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ZC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(PG("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xy._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xy._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xy._jsonSchema={type:ks("string",Xy._jsonSchemaVersion),bundleSource:ks("string","DocumentSnapshot"),bundleName:ks("string"),bundle:ks("string")};class ZC extends Xy{data(e={}){return super.data(e)}}class Hx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new tS(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new ZC(this._firestore,this._userDataWriter,r.key,r,new tS(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new St(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new ZC(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new ZC(i._firestore,i._userDataWriter,a.doc.key,a.doc,new tS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:PLe(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hx._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=WU.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PLe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:t})}}function RLe(t){t=cu(t,ds);const e=cu(t.firestore,e0);return uLe(SG(e),t._key).then((n=>LLe(e,t,n)))}Hx._jsonSchemaVersion="firestore/querySnapshot/1.0",Hx._jsonSchema={type:ks("string",Hx._jsonSchemaVersion),bundleSource:ks("string","QuerySnapshot"),bundleName:ks("string"),bundle:ks("string")};class mde extends ILe{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ds(this.firestore,null,n)}}function CLe(t){t=cu(t,K2);const e=cu(t.firestore,e0),n=SG(e),r=new mde(e);return SLe(t._query),hLe(n,t._query).then((i=>new Hx(e,r,t,i)))}function e$(t,e,n){t=cu(t,ds);const r=cu(t.firestore,e0),i=pde(t.converter,e,n);return tO(r,[lde(J5(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,la.none())])}function MLe(t,e,n,...r){t=cu(t,ds);const i=cu(t.firestore,e0),s=J5(i);let o;return o=typeof(e=ho(e))=="string"||e instanceof X5?xLe(s,"updateDoc",t._key,e,n,r):_Le(s,"updateDoc",t._key,e),tO(i,[o.toMutation(t._key,la.exists(!0))])}function NLe(t){return tO(cu(t.firestore,e0),[new U5(t._key,la.none())])}function OLe(t,e){const n=cu(t.firestore,e0),r=My(t),i=pde(t.converter,e);return tO(n,[lde(J5(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,la.exists(!1))]).then((()=>r))}function tO(t,e){return(function(r,i){const s=new yd;return r.asyncQueue.enqueueAndForget((async()=>JOe(await cLe(r),i,s))),s.promise})(SG(t),e)}function LLe(t,e,n){const r=n.docs.get(e._key),i=new mde(t);return new Xy(t,i,e._key,r,new tS(n.hasPendingWrites,n.fromCache),e.converter)}function t$(){return new kG("serverTimestamp")}(function(e,n=!0){(function(i){W2=i})(tv),w1(new Ag("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new e0(new Q4e(r.getProvider("auth-internal")),new nNe(o,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new St(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new T1(c.options.projectId,u)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),md(DZ,$Z,e),md(DZ,$Z,"esm2020")})();const gde="firebasestorage.googleapis.com",DLe="storageBucket",$Le=120*1e3,jLe=600*1e3;class Fd extends jd{constructor(e,n,r=0){super(n$(e),`Firebase Storage: ${n} (${n$(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fd.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return n$(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pd;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pd||(Pd={}));function n$(t){return"storage/"+t}function FLe(){const t="An unknown error occurred, please check the error payload for server response.";return new Fd(Pd.UNKNOWN,t)}function VLe(){return new Fd(Pd.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zLe(){return new Fd(Pd.CANCELED,"User canceled the upload/download.")}function ULe(t){return new Fd(Pd.INVALID_URL,"Invalid URL '"+t+"'.")}function GLe(t){return new Fd(Pd.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function iQ(t){return new Fd(Pd.INVALID_ARGUMENT,t)}function yde(){return new Fd(Pd.APP_DELETED,"The Firebase app was deleted.")}function BLe(t){return new Fd(Pd.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class eh{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=eh.makeFromUrl(e,n)}catch{return new eh(e,"")}if(r.path==="")return r;throw GLe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),v={bucket:1,path:3},x=n===gde?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${x}/${i}/${b}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:g,indices:v,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<I.length;P++){const M=I[P],F=M.regex.exec(e);if(F){const C=F[M.indices.bucket];let N=F[M.indices.path];N||(N=""),r=new eh(C,N),M.postModify(r);break}}if(r==null)throw ULe(e);return r}}class WLe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function HLe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,t(g,l())},b)}function f(){s&&clearTimeout(s)}function g(b,...T){if(c){f();return}if(b){f(),u.call(null,b,...T);return}if(l()||o){f(),u.call(null,b,...T);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let v=!1;function x(b){v||(v=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function qLe(t){t(!1)}function KLe(t){return t!==void 0}function sQ(t,e,n,r){if(r<e)throw iQ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw iQ(`Invalid value for '${t}'. Expected ${n} or less.`)}function YLe(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var u4;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(u4||(u4={}));function XLe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class ZLe{constructor(e,n,r,i,s,o,a,l,c,u,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,x)=>{this.resolve_=v,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new gR(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===u4.NO_ERROR,l=s.getStatus();if(!a||XLe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===u4.ABORT;r(!1,new gR(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new gR(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());KLe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=FLe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?yde():zLe();o(l)}else{const l=VLe();o(l)}};this.canceled_?n(!1,new gR(!1,null,!0)):this.backoffId_=HLe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&qLe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gR{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function JLe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function QLe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eDe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function tDe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nDe(t,e,n,r,i,s,o=!0,a=!1){const l=YLe(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return eDe(u,e),JLe(u,n),QLe(u,s),tDe(u,r),new ZLe(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function rDe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function iDe(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class h4{constructor(e,n){this._service=e,n instanceof eh?this._location=n:this._location=eh.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new h4(e,n)}get root(){const e=new eh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iDe(this._location.path)}get storage(){return this._service}get parent(){const e=rDe(this._location.path);if(e===null)return null;const n=new eh(this._location.bucket,e);return new h4(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw BLe(e)}}function oQ(t,e){const n=e?.[DLe];return n==null?null:eh.makeFromBucketSpec(n,t)}function sDe(t,e,n,r={}){t.host=`${e}:${n}`;const i=ev(e);i&&(RU(`https://${t.host}/b`),CU("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:cce(s,t.app.options.projectId))}class oDe{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=gde,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$Le,this._maxUploadRetryTime=jLe,this._requests=new Set,i!=null?this._bucket=eh.makeFromBucketSpec(i,this._host):this._bucket=oQ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=eh.makeFromBucketSpec(this._url,e):this._bucket=oQ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sQ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sQ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new h4(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new WLe(yde());{const o=nDe(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const aQ="@firebase/storage",lQ="0.14.0";const vde="storage";function aDe(t=OU(),e){t=ho(t);const r=k5(t,vde).getImmediate({identifier:e}),i=oce("storage");return i&&lDe(r,...i),r}function lDe(t,e,n,r={}){sDe(t,e,n,r)}function cDe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new oDe(n,r,i,e,tv)}function uDe(){w1(new Ag(vde,cDe,"PUBLIC").setMultipleInstances(!0)),md(aQ,lQ,""),md(aQ,lQ,"esm2020")}uDe();const hDe={apiKey:"AIzaSyBcLuKvUr5XqEJTwOf9I0hqJ1o9g3kOZ-g",authDomain:"detectorapp-nl.firebaseapp.com",projectId:"detectorapp-nl",storageBucket:"detectorapp-nl.firebasestorage.app",messagingSenderId:"110954177210",appId:"1:110954177210:web:d77c9ed262ad92bc431883"},MG=gce(hDe),Ny=q4e(MG),Bf=fLe(MG);aDe(MG);pLe(Bf).catch(t=>{t.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):t.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const dDe={};function fDe(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Ak=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Ak(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Ak(r)(n)}}}},pDe=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,T)=>({...T,...b}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...b)},r,i);const u=Ak(s.serialize),h=()=>{const b=s.partialize({...r()});let T;const A=u({state:b,version:s.version}).then(I=>c.setItem(s.name,I)).catch(I=>{T=I});if(T)throw T;return A},f=i.setState;i.setState=(b,T)=>{f(b,T),h()};const g=t((...b)=>{n(...b),h()},r,i);let v;const x=()=>{var b;if(!c)return;o=!1,a.forEach(A=>A(r()));const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,r()))||void 0;return Ak(c.getItem.bind(c))(s.name).then(A=>{if(A)return s.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var I;return v=s.merge(A,(I=r())!=null?I:g),n(v,!0),h()}).then(()=>{T?.(v,void 0),o=!0,l.forEach(A=>A(v))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:b=>{s={...s,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},x(),v||g},mDe=(t,e)=>(n,r,i)=>{let s={storage:fDe(()=>localStorage),partialize:x=>x,version:0,merge:(x,b)=>({...b,...x}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...x)},r,i);const u=()=>{const x=s.partialize({...r()});return c.setItem(s.name,{state:x,version:s.version})},h=i.setState;i.setState=(x,b)=>{h(x,b),u()};const f=t((...x)=>{n(...x),u()},r,i);i.getInitialState=()=>f;let g;const v=()=>{var x,b;if(!c)return;o=!1,a.forEach(A=>{var I;return A((I=r())!=null?I:f)});const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(x=r())!=null?x:f))||void 0;return Ak(c.getItem.bind(c))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return[!0,s.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var I;const[P,M]=A;if(g=s.merge(M,(I=r())!=null?I:f),n(g,!0),P)return u()}).then(()=>{T?.(g,void 0),g=r(),o=!0,l.forEach(A=>A(g))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:x=>{s={...s,...x},x.storage&&(c=x.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>v(),hasHydrated:()=>o,onHydrate:x=>(a.add(x),()=>{a.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},s.skipHydration||v(),g||f},gDe=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((dDe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),pDe(t,e)):mDe(t,e),vh=gDe,Pn=po()(vh(t=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!1,showRouteRecordButton:!1,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,weatherFontScale:100,voiceFeedbackEnabled:!1,showStepCounter:!1,showFontSliders:!1,showWeatherButton:!1,hideWelcomeModal:!1,setDefaultBackground:e=>t({defaultBackground:e}),setShowScaleBar:e=>t({showScaleBar:e}),setGpsAutoStart:e=>t({gpsAutoStart:e}),setShowAccuracyCircle:e=>t({showAccuracyCircle:e}),setHapticFeedback:e=>t({hapticFeedback:e}),setVondstenLocalOnly:e=>t({vondstenLocalOnly:e}),setShowVondstButton:e=>t({showVondstButton:e}),setShowRouteRecordButton:e=>t({showRouteRecordButton:e}),setShowLocalVondsten:e=>t({showLocalVondsten:e}),setShowCustomPointLayers:e=>t({showCustomPointLayers:e}),setFontScale:e=>t({fontScale:e}),setLayerPanelFontScale:e=>t({layerPanelFontScale:e}),setPresetPanelFontScale:e=>t({presetPanelFontScale:e}),setMenuFontScale:e=>t({menuFontScale:e}),setWeatherFontScale:e=>t({weatherFontScale:e}),setVoiceFeedbackEnabled:e=>t({voiceFeedbackEnabled:e}),setShowStepCounter:e=>t({showStepCounter:e}),setShowFontSliders:e=>t({showFontSliders:e}),setShowWeatherButton:e=>t({showWeatherButton:e}),setHideWelcomeModal:e=>t({hideWelcomeModal:e})}),{name:"detectorapp-settings",version:2,migrate:(t,e)=>e<2?{...t,showScaleBar:!0}:t})),nO=po()(G2((t,e)=>({user:null,accessToken:null,loading:!1,error:null,initialized:!1,setUser:n=>{t(r=>{r.user=n,r.loading=!1})},setLoading:n=>{t(r=>{r.loading=n})},setError:n=>{t(r=>{r.error=n})},setAccessToken:n=>{t(r=>{r.accessToken=n})},signInWithGoogle:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new Yu;await AZ(Ny,n)}catch(n){console.error("Google sign-in error:",n),t(r=>{r.error=n.message,r.loading=!1})}},connectGoogleFit:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new Yu;n.addScope("https://www.googleapis.com/auth/fitness.activity.read");const r=await AZ(Ny,n),i=Yu.credentialFromResult(r);return i?.accessToken?(t(s=>{s.accessToken=i.accessToken||null,s.loading=!1}),console.log(" Google Fit gekoppeld"),!0):(t(s=>{s.loading=!1}),!1)}catch(n){return console.error("Google Fit connect error:",n),t(r=>{r.error=n.message,r.loading=!1}),!1}},logout:async()=>{t(n=>{n.loading=!0});try{await Vce(Ny),t(n=>{n.accessToken=null})}catch(n){console.error("Logout error:",n),t(r=>{r.error=n.message,r.loading=!1})}},initAuth:()=>{e().initialized||(t(n=>{n.initialized=!0}),Fce(Ny,n=>{t(r=>{r.user=n,r.loading=!1}),n&&Pn.getState().setVondstenLocalOnly(!1)}))}})));po()(G2((t,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async n=>{t(r=>{r.loading=!0});try{const r=kLe(JJ(Bf,"vondsten"),ALe("userId","==",n)),s=(await CLe(r)).docs.map(o=>({id:o.id,...o.data()}));t(o=>{o.vondsten=s,o.loading=!1})}catch(r){t(i=>{i.error=r.message,i.loading=!1})}},addVondst:async n=>{const r=new Date().toISOString(),i={...n,createdAt:r,updatedAt:r},s=await OLe(JJ(Bf,"vondsten"),i);return t(o=>{o.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(n,r)=>{const i=My(Bf,"vondsten",n);await MLe(i,{...r,updatedAt:new Date().toISOString()}),t(s=>{const o=s.vondsten.findIndex(a=>a.id===n);o!==-1&&(s.vondsten[o]={...s.vondsten[o],...r})})},deleteVondst:async n=>{await NLe(My(Bf,"vondsten",n)),t(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==n)})}})));const yR=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Gewaspercelen","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],cQ=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],_de=po()(vh((t,e)=>({presets:[...yR],customDefaults:null,applyPreset:n=>{const r=e().presets.find(s=>s.id===n);if(!r)return;const i=Vs.getState();cQ.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(o=>{i.setLayerVisibility(o,o===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(n,r)=>{const i=Vs.getState(),s=Object.entries(i.visible).filter(([a,l])=>l&&cQ.includes(a)).map(([a])=>a),o={id:`custom-${Date.now()}`,name:n,icon:r,layers:s,isBuiltIn:!1};t(a=>({presets:[...a.presets,o]})),console.log(` Preset aangemaakt: ${n} met ${s.length} lagen`)},updatePreset:(n,r)=>{t(i=>({presets:i.presets.map(s=>s.id===n?{...s,...r}:s)}))},deletePreset:n=>{t(r=>({presets:r.presets.filter(i=>i.id!==n||i.isBuiltIn)}))},saveAsDefaults:()=>{const n=e().presets;t({customDefaults:[...n]}),console.log(" Presets opgeslagen als standaard")},resetToDefaults:()=>{const{customDefaults:n}=e();n?(t({presets:[...n]}),console.log(" Presets hersteld naar eigen standaard")):(t({presets:[...yR]}),console.log(" Presets hersteld naar originele standaard"))},resetToBuiltIn:()=>{t({presets:[...yR],customDefaults:null}),console.log(" Presets gereset naar originele instellingen")}}),{name:"detectorapp-presets",version:10,migrate:(t,e)=>e<10?{presets:[...yR]}:t})),uQ=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],QA=po()(vh((t,e)=>({layers:[],addLayer:n=>{const r=crypto.randomUUID(),i=e().layers.length,s=uQ[i%uQ.length];return t(o=>({layers:[...o.layers,{...n,id:r,createdAt:new Date().toISOString(),color:n.color||s,visible:n.visible??!0,opacity:n.opacity??1}]})),r},removeLayer:n=>t(r=>({layers:r.layers.filter(i=>i.id!==n)})),updateLayer:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)})),toggleVisibility:n=>t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)})),setOpacity:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,opacity:r}:s)})),setColor:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,color:r}:s)})),clearAll:()=>t({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),yDe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],NG=po()(vh((t,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:n=>t({tier:n}),unlockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.includes(n)?r.unlockedRegions:[...r.unlockedRegions,n]})),lockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==n)})),setDevMode:n=>t({devMode:n}),isRegionUnlocked:n=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(n)},isLayerUnlocked:(n,r="free",i=["nl"])=>{const s=e();return s.devMode||yDe.includes(n)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(o=>s.unlockedRegions.includes(o)):!1},canAccessPremiumFeatures:()=>{const n=e();return n.devMode||n.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));po()(vh(t=>({parkingLocation:null,showParkingButton:!0,setParkingLocation:e=>t({parkingLocation:e}),clearParkingLocation:()=>t({parkingLocation:null}),setShowParkingButton:e=>t({showParkingButton:e})}),{name:"detectorapp-parking"}));function hQ(){return new Date().toISOString().split("T")[0]}po()(vh((t,e)=>({steps:0,distance:0,startTime:null,isActive:!1,todaySteps:0,todayDate:hQ(),stepLength:.75,incrementStep:()=>{const n=e(),r=hQ(),i=n.todayDate===r?n.todaySteps+1:1;t({steps:n.steps+1,distance:(n.steps+1)*n.stepLength,todaySteps:i,todayDate:r})},resetSession:()=>{t({steps:0,distance:0,startTime:null})},setActive:n=>{t({isActive:n,startTime:n?Date.now():e().startTime})},setStepLength:n=>{const r=e();t({stepLength:n,distance:r.steps*n})}}),{name:"step-counter-storage",partialize:t=>({todaySteps:t.todaySteps,todayDate:t.todayDate,stepLength:t.stepLength})}));const dQ={sunAzimuth:315,sunElevation:45,verticalExaggeration:2,colorRamp:"terrain",minElevation:-5,maxElevation:50,showControls:!1};po()(vh(t=>({...dQ,setSunAzimuth:e=>t({sunAzimuth:e}),setSunElevation:e=>t({sunElevation:e}),setVerticalExaggeration:e=>t({verticalExaggeration:e}),setColorRamp:e=>t({colorRamp:e}),setMinElevation:e=>t({minElevation:e}),setMaxElevation:e=>t({maxElevation:e}),setShowControls:e=>t({showControls:e}),resetToDefaults:()=>t(dQ)}),{name:"detectorapp-hillshade"}));const vDe=()=>Math.random().toString(36).substring(2,9),_De={0:"Helder",1:"Overwegend helder",2:"Halfbewolkt",3:"Bewolkt",45:"Mist",48:"Rijp/mist",51:"Lichte motregen",53:"Motregen",55:"Dichte motregen",56:"Lichte ijzel",57:"Ijzel",61:"Lichte regen",63:"Regen",65:"Hevige regen",66:"Lichte ijsregen",67:"IJsregen",71:"Lichte sneeuw",73:"Sneeuw",75:"Hevige sneeuw",77:"Korrelsneeuw",80:"Lichte buien",81:"Buien",82:"Hevige buien",85:"Lichte sneeuwbuien",86:"Sneeuwbuien",95:"Onweer",96:"Onweer met hagel",99:"Zwaar onweer met hagel"};function xDe(t){const e=["N","NNO","NO","ONO","O","OZO","ZO","ZZO","Z","ZZW","ZW","WZW","W","WNW","NW","NNW"],n=Math.round(t/22.5)%16;return e[n]}const nT=po()(vh((t,e)=>({weatherData:null,isLoading:!1,error:null,savedLocations:[{id:"current",name:"Huidige locatie",lat:0,lon:0,isCurrentLocation:!0}],selectedLocationId:"current",weatherPanelOpen:!1,showBuienradar:!1,setWeatherData:n=>t({weatherData:n}),setIsLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),addLocation:n=>t(r=>({savedLocations:[...r.savedLocations,{...n,id:vDe()}]})),removeLocation:n=>t(r=>({savedLocations:r.savedLocations.filter(i=>i.id!==n),selectedLocationId:r.selectedLocationId===n?"current":r.selectedLocationId})),setSelectedLocation:n=>t({selectedLocationId:n}),updateCurrentLocation:(n,r)=>t(i=>({savedLocations:i.savedLocations.map(s=>s.isCurrentLocation?{...s,lat:n,lon:r}:s)})),toggleWeatherPanel:()=>t(n=>({weatherPanelOpen:!n.weatherPanelOpen})),setWeatherPanelOpen:n=>t({weatherPanelOpen:n}),setShowBuienradar:n=>t({showBuienradar:n}),fetchWeather:async(n,r)=>{const{setIsLoading:i,setError:s,setWeatherData:o,savedLocations:a,selectedLocationId:l}=e();i(!0),s(null);try{const c=new URL("https://api.open-meteo.com/v1/forecast");c.searchParams.set("latitude",n.toString()),c.searchParams.set("longitude",r.toString()),c.searchParams.set("current","temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m,wind_gusts_10m,cloud_cover,is_day,snow_depth"),c.searchParams.set("hourly","temperature_2m,precipitation,precipitation_probability,weather_code,wind_speed_10m,wind_direction_10m,relative_humidity_2m"),c.searchParams.set("daily","weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,wind_speed_10m_max,sunrise,sunset"),c.searchParams.set("minutely_15","precipitation"),c.searchParams.set("timezone","Europe/Amsterdam"),c.searchParams.set("forecast_days","7"),c.searchParams.set("past_days","7");const u=await fetch(c.toString());if(!u.ok)throw new Error("Kon weerdata niet ophalen");const h=await u.json();let f=0;const g=h.daily.temperature_2m_min||[],v=new Date().toISOString().split("T")[0],x=h.daily.time.indexOf(v);for(let O=x-1;O>=0&&g[O]<0;O--)f++;const b=a.find(O=>O.id===l)||a[0],T=new Date,A=[],I=[];if(h.minutely_15?.time&&h.minutely_15?.precipitation){const O=new Date(T.getTime()+72e5),j=new Date(T.getTime()+2880*60*1e3);for(let V=0;V<h.minutely_15.time.length;V++){const G=new Date(h.minutely_15.time[V]);G<T||(G<=O&&A.push({time:h.minutely_15.time[V],precipitation:h.minutely_15.precipitation[V]}),G<=j&&I.push({time:h.minutely_15.time[V],precipitation:h.minutely_15.precipitation[V]}))}}const P=T.getHours(),M=T.toISOString().split("T")[0],F=h.hourly.time.map((O,j)=>({time:O,temperature:h.hourly.temperature_2m[j],precipitation:h.hourly.precipitation[j],precipitationProbability:h.hourly.precipitation_probability[j],weatherCode:h.hourly.weather_code[j],windSpeed:h.hourly.wind_speed_10m[j],windDirection:h.hourly.wind_direction_10m[j],humidity:h.hourly.relative_humidity_2m[j]})).filter(O=>new Date(O.time)>=T).slice(0,24),C=h.daily.time.map((O,j)=>({date:O,temperatureMax:h.daily.temperature_2m_max[j],temperatureMin:h.daily.temperature_2m_min[j],precipitationSum:h.daily.precipitation_sum[j],precipitationProbability:h.daily.precipitation_probability_max[j],weatherCode:h.daily.weather_code[j],windSpeedMax:h.daily.wind_speed_10m_max[j],sunrise:h.daily.sunrise[j],sunset:h.daily.sunset[j]})).filter(O=>O.date>=M),N={location:{...b,lat:n,lon:r},current:{temperature:h.current.temperature_2m,apparentTemperature:h.current.apparent_temperature,humidity:h.current.relative_humidity_2m,precipitation:h.current.precipitation,weatherCode:h.current.weather_code,windSpeed:h.current.wind_speed_10m,windDirection:h.current.wind_direction_10m,windGusts:h.current.wind_gusts_10m,cloudCover:h.current.cloud_cover,isDay:h.current.is_day===1,snowDepth:h.current.snow_depth},hourly:F,daily:C,precipitation15min:A,precipitation48h:I,frostDays:f,lastUpdated:Date.now()};try{const O=new URL("https://air-quality-api.open-meteo.com/v1/air-quality");O.searchParams.set("latitude",n.toString()),O.searchParams.set("longitude",r.toString()),O.searchParams.set("current","grass_pollen,birch_pollen,alder_pollen,mugwort_pollen,ragweed_pollen,olive_pollen");const j=await fetch(O.toString());if(j.ok){const V=await j.json();if(V.current){const G=U=>Math.min(5,Math.round(U/20));N.pollen={grass:G(V.current.grass_pollen||0),birch:G(V.current.birch_pollen||0),alder:G(V.current.alder_pollen||0),mugwort:G(V.current.mugwort_pollen||0),ragweed:G(V.current.ragweed_pollen||0),olive:G(V.current.olive_pollen||0)}}}}catch{}o(N)}catch(c){s(c instanceof Error?c.message:"Onbekende fout")}finally{i(!1)}}}),{name:"detectorapp-weather",partialize:t=>({savedLocations:t.savedLocations,selectedLocationId:t.selectedLocationId,showBuienradar:t.showBuienradar})}));function wDe({target:t,viewOptions:e}){const n=X.useRef(null),r=X.useRef(null),i=ji(o=>o.setMap),s=Pn(o=>o.showScaleBar);return X.useEffect(()=>{if(!n.current){const o={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},a=new GRe({target:t,controls:[],view:new sd({center:Ci(o.center),zoom:o.zoom,rotation:o.rotation,minZoom:o.minZoom,maxZoom:o.maxZoom})});n.current=a,i(a),window.__olMap=a}return()=>{n.current&&(n.current.setTarget(void 0),i(null),window.__olMap=null)}},[t,e,i]),X.useEffect(()=>{const o=n.current;o&&(s?r.current||(r.current=new HRe({units:"metric",bar:!1,text:!0,minWidth:80}),o.addControl(r.current)):r.current&&(o.removeControl(r.current),r.current=null))},[s]),n.current}function _(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Akt(t,e){return function(n,r){e(n,r,t)}}function Ikt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Pkt(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var bDe=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Rkt(t){function e(s){t.error=t.hasError?new bDe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}let Jm;const wo=globalThis;function ye(t){return typeof Jm[t]=="function"?Jm[t]=Jm[t](wo):Jm[t]}Jm=wo.dojoConfig?.has||wo.esriConfig?.has?{...wo.dojoConfig?.has,...wo.esriConfig?.has}:{},ye.add=(t,e,n,r)=>{(r||Jm[t]===void 0)&&(Jm[t]=e),n&&ye(t)},ye.cache=Jm,ye.add("big-integer-warning-enabled",!0),ye.add("esri-deprecation-warnings",!0),ye.add("esri-tests-disable-screenshots",!1),ye.add("esri-tests-use-full-window",!1),ye.add("esri-tests-post-to-influx",!0),ye.add("esri-cim-animations-enable-status","enabled"),ye.add("esri-cim-animations-spotlight",!1),ye.add("esri-cim-animations-freeze-time",!1),(()=>{ye.add("host-webworker",wo.WorkerGlobalScope!==void 0&&self instanceof wo.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ye.add("host-browser",t),ye.add("host-node",!(typeof wo.process!="object"||!wo.process.versions?.node||!wo.process.versions.v8)),ye.add("dom",t),ye("host-browser")){const e=navigator,n=e.userAgent,r=e.appVersion,i=parseFloat(r);if(ye.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),ye.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),ye.add("khtml",r.includes("Konqueror")?i:void 0),ye.add("edge",parseFloat(n.split("Edge/")[1])||void 0),ye.add("opr",parseFloat(n.split("OPR/")[1])||void 0),ye.add("webkit",!ye("wp")&&!ye("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),ye.add("chrome",!ye("edge")&&!ye("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),ye.add("android",!ye("wp")&&parseFloat(n.split("Android ")[1])||void 0),ye.add("safari",!r.includes("Safari")||ye("wp")||ye("chrome")||ye("android")||ye("edge")||ye("opr")?void 0:parseFloat(r.split("Version/")[1])),ye.add("mac",r.includes("Macintosh")),!ye("wp")&&/(iPhone|iPod|iPad)/.test(n)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));ye.add(s,a),ye.add("ios",a)}ye("webkit")||(!n.includes("Gecko")||ye("wp")||ye("khtml")||ye("edge")||ye.add("mozilla",i),ye("mozilla")&&ye.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(wo.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),n=/iPhone/i.test(t);e&&ye.add("esri-mobile",e),n&&ye.add("esri-iPhone",n),ye.add("esri-geolocation",!!navigator.geolocation)}ye.add("esri-wasm","WebAssembly"in wo),ye.add("esri-performance-mode-frames-between-render",20),ye.add("esri-force-performance-mode",!1),ye.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in wo,e=wo.crossOriginIsolated===!1;return t&&!e}),ye.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ye.add("esri-atomics","Atomics"in wo),ye.add("esri-workers","Worker"in wo),ye.add("web-feat:cache","caches"in wo),ye.add("esri-workers-arraybuffer-transfer",!ye("safari")||Number(ye("safari"))>=12),ye.add("workers-pool-size",8),ye.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ye.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ye.add("featurelayer-fast-triangulation-enabled",!0),ye.add("featurelayer-animation-enabled",!0),ye.add("featurelayer-snapshot-enabled",!0),ye.add("featurelayer-snapshot-initial-tolerance",0),ye.add("featurelayer-snapshot-point-min-threshold",8e4),ye.add("featurelayer-snapshot-point-max-threshold",4e5),ye.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ye.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ye.add("featurelayer-snapshot-polygon-min-threshold",2e3),ye.add("featurelayer-snapshot-polygon-max-threshold",2e3),ye.add("featurelayer-snapshot-polyline-min-threshold",2e3),ye.add("featurelayer-snapshot-polyline-max-threshold",2e3),ye.add("featurelayer-snapshot-max-vertex-count",25e4),ye.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),ye.add("featurelayer-snapshot-concurrency",4),ye.add("featurelayer-snapshot-coverage",.1),ye.add("featurelayer-query-max-depth",4),ye.add("featurelayer-query-pausing-enabled",!1),ye.add("featurelayer-query-tile-concurrency",4),ye.add("featurelayer-query-tile-max-features",6e5),ye.add("featurelayer-advanced-symbols",!1),ye.add("featurelayer-pbf",!0),ye.add("featurelayer-pbf-statistics",!1),ye.add("feature-layers-workers",!0),ye.add("feature-polyline-generalization-factor",1),ye.add("parquetlayer-full-query-feature-count",2e4),ye.add("parquetlayer-hittest-max-feature-count",1),ye.add("parquetlayer-persistence-enabled",!1),ye.add("mapview-transitions-duration",200),ye.add("mapview-essential-goto-duration",200),ye.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ye.add("mapserver-pbf-version-support",10.81),ye.add("mapservice-popup-identify-max-tolerance",20),ye.add("request-queue-concurrency-hosted",16),ye.add("request-queue-concurrency-non-hosted",4),ye.add("curve-densification-coarse-segments",128),ye.add("curve-densification-max-segments",2e3),ye.add("curve-densification-min-segments",3),ye.add("curve-densification-pixel-deviation",.5),ye.add("view-readyState-waiting-delay",1e3),ye.add("gradient-depth-bias",.01),ye.add("gradient-depth-epsilon",1e-8),ye.add("enable-feature:esri-compress-textures",!0),ye("host-webworker")||ye("host-browser")&&(ye.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ye.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function Ckt(t){}function EDe(t){return()=>t}function Mkt(t){return t}var ol;let SDe=(ol=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*ol._m}getInt(){return this._seed=(ol._a*this._seed+ol._c)%ol._m,this._seed}getFloat(){return this.getInt()/(ol._m-1)}getIntRange(e,n){return Math.round(this.getFloatRange(e,n))}getFloatRange(e,n){const r=n-e;return e+this.getInt()/ol._m*r}},ol._m=2147483647,ol._a=48271,ol._c=0,ol);const TDe=1.5,Nkt=1/TDe,Okt=.5;function xde(t){return t}function kDe(t,e=xde){if(!t||t.length===0)return;let n=t[0],r=e(n);for(let i=1;i<t.length;++i){const s=t[i],o=Number(e(s));o>r&&(r=o,n=s)}return n}function Lkt(t,e=xde){return kDe(t,n=>-e(n))}function Dkt(t,e){return e?t.filter((n,r,i)=>i.findIndex(e.bind(null,n))===r):Array.from(new Set(t))}function ADe(t,e,n,r,i,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),i=Math.max(0,i),n=Math.max(0,n<0?(t?.length??0)+n:n),s=Math.max(0,s<0?(r?.length??0)+s:s);const a=n-e;if(t==null||r==null||a!==s-i)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[i+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[i+l])return!1;return!0}function rO(t,e,n){return ADe(t,0,t?.length??0,e,0,e?.length??0,n)}function $kt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}function fQ(t,e,n){let r,i;return n?(r=e.filter(s=>!t.some(o=>n(o,s))),i=t.filter(s=>!e.some(o=>n(o,s)))):(r=e.filter(s=>!t.includes(s)),i=t.filter(s=>!e.includes(s))),{added:r,removed:i}}function jkt(t){return t&&typeof t.length=="number"}function Fkt(t,e){const n=t.length;if(n===0)return[];const r=[];for(let i=0;i<n;i+=e)r.push(t.slice(i,i+e));return r}let wde=class{constructor(){this.last=0}};const bde=new wde;function bF(t,e,n,r){r=r||bde;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function EF(t,e,n,r){const i=t.length,s=bF(t,e,i,r);if(s!==-1)return t[s]=t[i-1],t.pop(),e}const Iu=new Set;function IDe(t,e,n=t.length,r=e.length,i,s){if(r===0||n===0)return n;Iu.clear();for(let a=0;a<r;++a)Iu.add(e[a]);i=i||bde;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(Iu.has(t[a])&&(s?.push(t[a]),Iu.delete(t[a]),t[a]=t[n-1],--n,--a,Iu.size===0||n===0))return Iu.clear(),n;for(let a=0;a<o;++a)if(Iu.has(t[a])&&(s?.push(t[a]),Iu.delete(t[a]),t[a]=t[n-1],--n,--a,Iu.size===0||n===0))return Iu.clear(),n;return Iu.clear(),n}function PDe(t,e){let n=0;for(let r=0;r<t.length;++r){const i=t[r];e(i,r)&&(t[n]=i,n++)}return t.length=n,t}function zkt(t,e,n){const r=t.length;if(e>=r)return t.slice();const i=Ede(n),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(i()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function Ede(t){return t?(pQ.seed=t,()=>pQ.getFloat()):Math.random}const pQ=new SDe;function Ukt(t,e){if(!t)return t;const n=Ede(e);for(let r=t.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=t[r];t[r]=t[i],t[i]=s}return t}function Sde(t,e){const n=t.indexOf(e);return n!==-1?(t.splice(n,1),e):null}function s2(t,e){return t!=null}const Gkt=[];function Bkt(t){return t instanceof ArrayBuffer}function OG(t){return t?.constructor?.name==="Int8Array"}function Tde(t){return t?.constructor?.name==="Uint8Array"}function kde(t){return t?.constructor?.name==="Uint8ClampedArray"}function LG(t){return t?.constructor?.name==="Int16Array"}function Ade(t){return t?.constructor?.name==="Uint16Array"}function DG(t){return t?.constructor?.name==="Int32Array"}function Ide(t){return t?.constructor?.name==="Uint32Array"}function RDe(t){return t?.constructor?.name==="Float16Array"}function iO(t){return t?.constructor?.name==="Float32Array"}function sO(t){return t?.constructor?.name==="Float64Array"}function CDe(t){return"buffer"in t}const Pde=1024;function Wkt(t){return sO(t)||iO(t)||DG(t)||LG(t)||OG(t)}function Hkt(t){return sO(t)||iO(t)}function qkt(t){return sO(t)?179769e303:RDe(t)?65504:iO(t)?3402823e32:Ide(t)?4294967295:Ade(t)?65535:Tde(t)||kde(t)?255:DG(t)?2147483647:LG(t)?32767:OG(t)?127:256}const Kkt=-32768,Ykt=-2147483648;function Xkt(t){return t}function MDe(t,e){let n;for(n in t)t.hasOwnProperty(n)&&t[n]===void 0&&delete t[n];return t}function Ze(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Mde(t);if(e!=null)return e;if(rT(t))return t.clone();if(Rde(t))return t.map(Ze);if(Cde(t))throw new Error("Trying to clone an unclonable Accessor instance");const n={};for(const r of Object.getOwnPropertyNames(t))n[r]=Ze(t[r]);return n}function SF(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const n=Mde(t);if(n!=null)return n;if(Rde(t)){let i=!0;const s=t.map(o=>{const a=SF(o,e);return o!=null&&a==null&&(i=!1),a});return i?s:null}if(rT(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(Cde(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const i of Object.getOwnPropertyNames(t)){const s=t[i],o=SF(s);if(s!=null&&o==null)return null;r[i]=o}return r}function rT(t){return typeof t.clone=="function"}function Rde(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Cde(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function mQ(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Mde(t){if(OG(t)||Tde(t)||kde(t)||LG(t)||Ade(t)||DG(t)||Ide(t)||iO(t)||sO(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[n,r]of t)e.set(n,Ze(r));return e}if(t instanceof Set){const e=new Set;for(const n of t)e.add(Ze(n));return e}return null}function $G(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function Nde(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&rO(t,e):t instanceof Set?e instanceof Set&&ODe(t,e):t instanceof Map?e instanceof Map&&LDe(t,e):!!mQ(t)&&mQ(e)&&NDe(t,e))}function NDe(t,e){if(t===null||e===null)return!1;const n=Object.keys(t);if(e===null||Object.keys(e).length!==n.length)return!1;for(const r of n)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function ODe(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function LDe(t,e){if(t.size!==e.size)return!1;for(const[n,r]of t){const i=e.get(n);if(i!==r||i===void 0&&!e.has(n))return!1}return!0}function DDe(t,e,n=!1){return Lde(t,e,n)}function oO(t,e){if(e!=null)return e[t]||Ode(t.split("."),!1,e)}function Y2(t,e,n){const r=t.split("."),i=r.pop(),s=Ode(r,!0,n);s&&i&&(s[i]=e)}function gQ(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const n=e;if(t.length!==n.length)return!0;for(let r=0;r<t.length;r++)if(gQ(t[r],n[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(gQ(t[n],e[n]))return!0;return!1}return t!==e}function Ode(t,e,n){let r=n;for(const i of t){if(r==null)return;if(!(i in r)){if(!e)return;r[i]={}}r=r[i]}return r}function Lde(t,e,n){return e?Object.keys(e).reduce((r,i)=>{if(i==="__proto__")return r;let s=r[i],o=e[i];return s===o?r:s===void 0?(r[i]=Ze(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.slice():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.slice())):o&&typeof o=="object"?r[i]=Lde(s,o,n):r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[i]=o),r)},t||{}):t}function Zkt(t,e){for(const n of Object.entries(t))if(e===n[1])return n[0]}function aO(t,e){return Object.values(t).includes(e)}const tr={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(DDe(tr,globalThis.esriConfig,!0),delete tr.has),!tr.assetsPath){{const t="4.34";tr.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}tr.defaultAssetsPath=tr.assetsPath}const $De=/\{([^}]+)\}/g;function yQ(t){return t??""}function Dde(t,e){return e?t.replaceAll($De,typeof e=="object"?(n,r)=>yQ(oO(r,e)):(n,r)=>yQ(e(r))):t}function Jkt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,n=>e?.includes(n)?n:`\\${n}`)}function $de(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}let vQ;function Qkt(t){return vQ??=new DOMParser,vQ.parseFromString(t||"","text/html").body.innerText||""}function eAt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function tAt(t,...e){let n=t[0];for(let r=0;r<e.length;++r)n+=e[r]+t[r+1];return n}const _Q={info:0,warn:1,error:2,none:3};var ls;let Tt=(ls=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,ls._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=ls.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,ls._loggers.get(e)||new ls({module:e})}_log(e,n,...r){if(this._matchLevel(e)){if(n!=="always"&&!ls._throttlingDisabled){const i=FDe(r),s=this._loggedMessages[e].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=ls._tickCounter)return;this._loggedMessages[e].set(i,ls._tickCounter),ls._scheduleTickCounterIncrement()}for(const i of tr.log.interceptors)if(i(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,n){let r=this;for(;r!=null;){const i=r[e];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",jDe)}_matchLevel(e){const n=tr.log.level||"warn";return _Q[this._parentWithMember("level",n)]<=_Q[e]}static _scheduleTickCounterIncrement(){ls._tickCounterScheduled||(ls._tickCounterScheduled=!0,Promise.resolve().then(()=>{ls._tickCounter++,ls._tickCounterScheduled=!1}))}},ls._loggers=new Map,ls._tickCounter=0,ls._tickCounterScheduled=!1,ls._throttlingDisabled=!1,ls);function jDe(t,e,...n){console[t](`[${e}]`,...n)}function FDe(...t){return $de(JSON.stringify(t,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function VDe(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(n,r)=>r===""?"$":(oO(r,e)??"").toString())}let jde=class{constructor(e,n,r=void 0){this.name=e,this.details=r,this.message=(n&&VDe(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Xe=class Fde extends jde{constructor(e,n,r){super(e,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return Ze(n)}catch{return"[object]"}}))}}catch(e){throw Tt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new Fde(e.name,e.message,e.details)}};Xe.prototype.type="error";function d4(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const zDe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,UDe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function xQ(t){const e=t?.match(zDe);if(!e)return null;const[,n,r,i]=e;if(!n)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=UDe;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function Vde(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function zde(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):n.test(t)?t=t.replace(n,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Ude(t){const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}function GDe(t){const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}const BDe=()=>Tt.getLogger("esri.core.urlUtils"),X2=tr.request,wQ="esri/config: esriConfig.request.proxyUrl is not set.",Gde=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Bde=/^\s*http:/i,WDe=/^\s*https:/i,HDe=/^\s*file:/i,Wde=/:\d+$/,qDe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,KDe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),YDe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let qx=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(KDe);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(YDe),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const vR={},XDe=new qx(tr.applicationUrl);let oa=XDe;const ZDe=JDe();let jG=ZDe;const FG=()=>oa,iAt=()=>jG;function JDe(){const t=oa.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${oa.scheme}://${oa.host}${oa.port!=null?`:${oa.port}`:""}`}${e}`}function Va(t){if(!t)return null;const e={path:null,query:null},n=new qx(t),r=t.indexOf("?");return n.query===null?e.path=t:(e.path=t.slice(0,r),e.query=VG(n.query)),n.fragment&&(e.hash=n.fragment,n.query===null&&(e.path=e.path.slice(0,e.path.length-(n.fragment.length+1)))),e}function VG(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function Ik(t,e){return t?Object.keys(t).map(n=>{const r=t[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=e?.[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>d4(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):d4(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function Hde(t=!1){let e,n=X2.proxyUrl;if(typeof t=="string"){e=s6e(t);const r=lO(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw BDe().warn(wQ),new Xe("urlUtils:proxy-not-set",wQ);return e&&kF()&&(n=WG(n)),Va(n)}function sAt(t,e=!1){const n=lO(t);let r,i;if(n){const s=zG(n.proxyUrl);r=s.path,i=s.query?VG(s.query):null}else if(e){const s=Hde(t);r=s.path,i=s.query}if(r){const s=Va(t);t=r+"?"+s.path;const o=Ik({...i,...s.query});o&&(t=`${t}?${o}`)}return t}const xE={path:"",query:""};function zG(t){const e=t.indexOf("?");return e!==-1?(xE.path=t.slice(0,e),xE.query=t.slice(e+1)):(xE.path=t,xE.query=null),xE}function qde(t){return t=(t=p4(t=u6e(t=zG(t).path),!0)).toLowerCase()}function QDe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:qde(t.urlPrefix)},n=X2.proxyRules,r=e.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;i=s;break}o.startsWith(r)&&(i=s+1)}return n.splice(i,0,e),i}function lO(t){const e=X2.proxyRules,n=qde(t);for(let r=0;r<e.length;r++)if(n.startsWith(e[r].urlPrefix))return e[r]}function oAt(t,e){if(!t||!e)return!1;t=f4(t),e=f4(e);const n=xQ(t),r=xQ(e);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&C1(t,e,!0)}function e6e(t,e){return t=f4(t),e=f4(e),p4(t)===p4(e)}function f4(t){const e=(t=vg(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function TF(t,e=X2.interceptors){const n=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function C1(t,e,n=!1){if(!t||!e)return!1;const r=IF(t),i=IF(e);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function UG(t){if(typeof t=="string"){if(!_l(t))return!0;t=IF(t)}if(C1(t,oa))return!0;const e=X2.trustedServers||[];for(let n=0;n<e.length;n++){const r=t6e(e[n]);for(let i=0;i<r.length;i++)if(C1(t,r[i]))return!0}return!1}function t6e(t){return vR[t]||(BG(t)||Rd(t)?vR[t]=[new qx(Hc(t))]:vR[t]=[new qx(`http://${t}`),new qx(`https://${t}`)]),vR[t]}function Hc(t,e=jG,n){return Rd(t)?n?.preserveProtocolRelative?t:oa.scheme==="http"&&oa.authority===ac(t).slice(2)?`http:${t}`:`https:${t}`:BG(t)?t:eI(t.startsWith("/")?c6e(e):e,t)}function GG(t,e=jG,n){if(t==null||!_l(t))return t;const r=vg(t),i=r.toLowerCase(),s=vg(e).toLowerCase().replace(/\/+$/,""),o=n?vg(n).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const a=(h,f,g)=>(g=h.indexOf(f,g))===-1?h.length:g;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let h=0;h<u;h++)t=`../${t}`;else t=`./${t}`;return t}function vg(t){return t=f6e(t=d6e(t=h6e(t=Hc(t=t.trim()))))}function eI(...t){const e=t.filter(s2);if(!e?.length)return;const n=[];if(_l(e[0])){const i=e[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),a6e(e[0])&&(n[0]+="/"),e[0]=i.slice(s+2))}else e[0].startsWith("/")&&n.push("");const r=e.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function ac(t,e=!1){if(t==null||tI(t)||iv(t))return null;let n=t.indexOf("://");if(n===-1&&Rd(t))n=2;else{if(n===-1)return null;n+=3}const r=t.indexOf("/",n);return r!==-1&&(t=t.slice(0,r)),e&&(t=p4(t,!0)),t}function _l(t){return Rd(t)||BG(t)}function tI(t){return t!=null&&t.startsWith("blob:")}function iv(t){return t!=null&&t.startsWith("data:")}function n6e(t){const e=o2(t);return e?.isBase64?Ude(e.data):null}function aAt(t){return GDe(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const r6e=/^data:(.*?)(;base64)?,(.*)$/;function o2(t){const e=t.match(r6e);if(!e)return null;const[,n,r,i]=e;return{mediaType:n,isBase64:!!r,data:i}}function Kde(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function i6e(t){return(await fetch(t)).blob()}function lAt(t){const e=n6e(t);if(!e)return null;const n=o2(t);return new Blob([e],{type:n.mediaType})}function Rd(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function BG(t){return t!=null&&Gde.test(t)}function s6e(t){return t!=null&&WDe.test(t)||oa.scheme==="https"&&Rd(t)}function o6e(t){return t!=null&&Bde.test(t)||oa.scheme==="http"&&Rd(t)}function a6e(t){return t!=null&&HDe.test(t)}function WG(t){return Rd(t)?`https:${t}`:t.replace(Bde,"https:")}function l6e(){return oa.scheme==="http"}function kF(){return oa.scheme==="https"}function p4(t,e=!1){return Rd(t)?t.slice(2):(t=t.replace(Gde,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function c6e(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return n===-1?t:t.slice(0,n)}function cAt(t){let e=0;if(_l(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function uAt(t,e){if(!t)return"";const n=Va(t).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!e?.length)return r;const i=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(i,"")}function u6e(t){return t.endsWith("/")?t:`${t}/`}function Yde(t){return t.replace(/\/+$/,"")}function h6e(t){if(/^https?:\/\//i.test(t)){const e=zG(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function d6e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function f6e(t){const e=X2.httpsDomains;if(!o6e(t))return t;const n=t.indexOf("/",7);let r;if(r=n===-1?t:t.slice(0,n),r=r.toLowerCase().slice(7),Wde.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return l6e()&&r===oa.authority&&!qDe.test(t)||(kF()&&r===oa.authority||e&&e.some(i=>r===i||r.endsWith(`.${i}`))||kF()&&!lO(t))&&(t=WG(t)),t}function AF(t,e,n){if(!(e&&n&&t&&_l(t)))return t;const r=t.indexOf("//"),i=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(i<0?t.length:i,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${n}${t.slice(o)}`}function p6e(t,e){const n=new URL(t);return n.host=e,n.port&&!Wde.test(e)&&(n.port=""),n.toString()}function hAt(t){return new URL(t).host}function IF(t){return typeof t=="string"?new qx(Hc(t)):(t.scheme||(t.scheme=oa.scheme),t)}function dAt(t){return g6e.test(t)}function Xde(t,e){const n=Va(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function m6e(t,e,n){const r=Va(t),i=r.query||{};return i[e]=String(n),`${r.path}?${Ik(i)}`}function r$(t,e){if(!e)return t;const n=Va(t),r=n.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const i=Ik(r);return i?`${n.path}?${i}`:n.path}function Zde(t){if(t==null)return null;const e=t.match(Jde);return e?e[2]:null}function bQ(t){if(t==null)return null;const e=t.match(Jde);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function fAt(t){return typeof t=="string"?o2(t)??{data:t}:new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(o2(r.result)),r.onerror=i=>n(i)})}const Jde=/([^.]*)\.([^/]*)$/,g6e=/(^data:image\/svg|\.svg$)/i,Qde="20251114",efe="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const y6e="4.34";let Zr,HG=y6e;function pAt(t){Zr=t}function mAt(t){const e=Zr?.findCredential(t);return e?.token?m6e(t,"token",e.token):t}HG="4.34.8",ye("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ye("host-webworker");function v6e(t,e){for(const n of t.values())if(e(n))return!0;return!1}function gAt(t,e){for(const n of t.values())if(!e(n))return!1;return!0}function yAt(t,e){for(const n of t.values())if(e(n))return n;return null}function nI(t,e,n){const r=t.get(e);if(r!==void 0)return r;const i=n();return t.set(e,i),i}function vAt(t){const e=new Map;return n=>(e.has(n)||e.set(n,t(n)),e.get(n))}const _6e={remove:()=>{}};function Kn(t){return t?{remove(){t&&(t(),t=void 0)}}:_6e}function tfe(t){t.forEach(e=>e?.remove())}function _At(t){tfe(t),t.length=0}function sv(t){return Kn(()=>tfe(t))}function xAt(t){return Kn(()=>t()?.remove())}function x6e(t){return Kn(()=>t?.abort())}function wAt(t){return Kn(t!=null?()=>t.destroy():void 0)}function w6e(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function bAt(t){w6e(t)&&t.remove()}function EAt(t){return{[Symbol.dispose](){t.remove()}}}function b6e(t){return{setTimeout:(e,n)=>{const r=t.setTimeout(e,n);return Kn(()=>t.clearTimeout(r))}}}const Z2=b6e(globalThis);function cO(t){return E6e(t)||nfe(t)}function E6e(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function nfe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function J2(t,e,n){if(!cO(t))throw new TypeError("target is not a Evented or EventTarget object");return nfe(t)?S6e(t,e,n):t.on(e,n)}function S6e(t,e,n,r){if(Array.isArray(e)){const i=e.slice();for(const s of i)t.addEventListener(s,n,r);return Kn(()=>{for(const s of i)t.removeEventListener(s,n,r)})}return t.addEventListener(e,n,r),Kn(()=>t.removeEventListener(e,n,r))}function rfe(t,e,n){if(!cO(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,n);const r=J2(t,e,i=>{r.remove(),n.call(t,i)});return r}function ife(t,e){if(t==null)throw new Error(e??"value is None")}function Ni(t){return t?.destroy(),null}function SAt(t){return t?.dispose(),null}function ri(t){return t?.remove(),null}function M1(t){return t?.abort(),null}function TAt(t){return t?.release(),null}function kAt(t,e,n){return t!=null&&e!=null?n!=null?n(t,e):t.equals(e):t===e}function T6e(t,e){let n;return t.some((r,i)=>(n=e(r,i),n!=null)),n??void 0}function kr(t="Aborted"){return new Xe("AbortError",t)}function pi(t,e="Aborted"){if(fa(t))throw kr(e)}function rI(t){return t instanceof AbortSignal?t:t?.signal??void 0}function fa(t){const e=rI(t);return e!=null&&e.aborted}function sfe(t){if(_a(t))throw t}function EQ(t){if(!_a(t))throw t}function uu(t,e){const n=rI(t);if(n!=null){if(!n.aborted)return rfe(n,"abort",()=>e());e()}}function qG(t,e){const n=rI(t);if(n!=null)return pi(n),rfe(n,"abort",()=>e(kr()))}function k6e(t,e){return rI(e)==null?t:new Promise((n,r)=>{let i=uu(e,()=>r(kr()));const s=()=>{i=ri(i)};t.then(s,s),t.then(n,r)})}function _a(t){return t?.name==="AbortError"}async function m4(t){try{return await t}catch(e){if(!_a(e))throw e;return}}async function KG(t){if(!t)return;if(typeof t.forEach!="function"){const n=Object.keys(t),r=n.map(o=>t[o]),i=await KG(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const e=t;return Promise.allSettled(e).then(n=>Array.from(e,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function A6e(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function AAt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function ofe(t,e=void 0,n){const r=new AbortController;return uu(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(e)},t);uu(r,()=>{o&&(clearTimeout(o),s(kr()))})})}function IAt(t,e,n,r){const i=n&&"abort"in n?n:null;r!=null||i||(r=n);let s=setTimeout(()=>{s=0,i?.abort()},e);const o=()=>r||new Xe("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function I6e(t,e){const n=new AbortController,r=setTimeout(()=>n.abort(),e);return uu(t,()=>{n.abort(),clearTimeout(r)}),{...t,signal:n.signal}}function pa(t){return t&&typeof t.then=="function"}function PF(t){return pa(t)?t:Promise.resolve(t)}function P6e(t,e=-1){let n,r,i,s,o=null;const a=(...l)=>{if(n){r=l,s&&s.reject(kr()),s=fc();const f=s.promise;if(o){const g=o;o=null,g.abort()}return f}if(i=s||fc(),s=null,e>0){const f=new AbortController;n=PF(t(...l,f.signal));const g=n;ofe(e).then(()=>{n===g&&(s?f.abort():o=f)})}else n=1,n=PF(t(...l));const c=()=>{const f=r;r=i=n=o=null,f!=null&&a(...f)},u=n,h=i;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function fc(){let t,e;const n=new Promise((i,s)=>{t=i,e=s}),r=i=>{t(i)};return r.resolve=i=>t(i),r.reject=i=>e(i),r.timeout=(i,s)=>Z2.setTimeout(()=>r.reject(s),i),r.promise=n,r}function PAt(t,e){e.then(t.resolve,t.reject)}async function SQ(t){await Promise.resolve(),pi(t)}function Q2(t,e){const n=e?.url?.path;if(t&&n&&(t=Hc(t,n,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=GG(t,e.portalItem.itemUrl);r!=null&&r.startsWith(R6e)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=RF(t,e?.portal))&&hO.test(t)?YG(t):t}function a2(t,e,n=0){if((t=t&&hO.test(t)?ufe(t):t)==null)return t;!_l(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=Hc(t);if(e){const i=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(i){const s=RF(i,e.portal),o=RF(r,e.portal);r=GG(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=cfe(r,e?.portal),_l(r)&&(r=vg(r)),e?.resources&&e?.portalItem&&!_l(r)&&!iv(r)&&n===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function uO(t,e,n){return Q2(t,n)}function l2(t,e,n,r){const i=a2(t,r);i!==void 0&&(e[n]=i)}const hO=/\/items\/([^/]+)\/resources\/(.*)/,R6e="./resources/";function afe(t){return(t?.match(hO)??null)?.[1]??null}function lfe(t){const e=t?.match(hO)??null;if(e==null)return null;const n=e[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=bQ(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=bQ(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function cfe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?AF(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function RF(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const n=`${e.urlKey}.${e.customBaseUrl}`,r=FG();return C1(r,`${r.scheme}://${n}`)?AF(t,e.portalHostname,n):AF(t,n,e.portalHostname)}function YG(t){if(!t)return t||null;let e=t;return e&&Zr&&!Zr.findCredential(e)&&(e=zde(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function ufe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Zr&&!Zr.findCredential(e)&&(e=zde(e)),e}const C6e=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:cfe,fromCDNUrl:ufe,fromJSON:Q2,itemIdFromResourceUrl:afe,prefixAndFilenameFromResourceUrl:lfe,read:uO,toCDNUrl:YG,toJSON:a2,write:l2},Symbol.toStringTag,{value:"Module"})),hfe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},dfe=Object.values(hfe),ffe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${dfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),M6e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${dfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),N6e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function RAt(t){return ffe.test(t)}function iI(t){if(t==null)return null;const e=Va(t),n=e?.path.match(ffe)||e?.path.match(M6e);if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:pfe(a!==-1?i.slice(a+1):i),serverType:hfe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function O6e(t){const e=Va(t).path.match(N6e);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function pfe(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function CAt(t,e){const n=[];if(t){const r=iI(t);r!=null&&r.title&&n.push(r.title)}if(e){const r=pfe(e);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function TQ(t){let e=ac(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function MAt(t,e){return t&&Yde(Xde(t,e))}function NAt(t){let{url:e}=t;if(!e)return{url:e};e=Xde(e,t.logger);const n=Va(e),r=iI(n.path);let i;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(i=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=O6e(n.path);s!=null&&(e=s.serviceUrl,i=s.sublayerId)}return{url:Yde(e),layerId:i}}function OAt(t,e,n,r,i){l2(e,r,"url",i),r.url&&t.layerId!=null&&(r.url=eI(r.url,n,t.layerId.toString()))}function LAt(t){if(!t)return!1;const e=t.toLowerCase(),n=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),i=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return n&&(r||i||s)}const L6e=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function XG(t){if(!ZG(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),n=tr.apiKeys;if(Array.isArray(n.scopes)){for(const r of n.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return n.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?n.basemapStyles:tr.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?tr.apiKey:null}function CF(){return tr.apiKey!=null||tr.apiKeys.basemapStyles!=null}function D6e(t,e){return e?ZG(t):XG(t)!=null}function ZG(t){const e=ac(t,!0);return!!e&&!L6e.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function $6e(t,e,n=!1,r){return new Promise((i,s)=>{if(fa(r))return void s(kQ());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=async()=>{const u=t;try{await u.decode()}catch{}c(),i(u)},l=()=>{if(!t)return;const u=t;c(),u.src="",s(kQ())};const c=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",o),t.addEventListener("load",a)})}function kQ(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const mfe="Timeout exceeded";function j6e(){return new Error(mfe)}function DAt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===mfe}function F6e(t){tr.request.crossOriginNoCorsDomains||(tr.request.crossOriginNoCorsDomains={});const e=tr.request.crossOriginNoCorsDomains;for(let n of t)n=n.toLowerCase(),/^https?:\/\//.test(n)?e[ac(n)??""]=0:(e[ac("http://"+n)??""]=0,e[ac("https://"+n)??""]=0)}function V6e(t){const e=tr.request.crossOriginNoCorsDomains;if(e){let n=ac(t);if(n)return n=n.toLowerCase(),!C1(n,FG())&&e[n]<Date.now()-36e5}return!1}async function z6e(t){const e=Va(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const n=tr.request.crossOriginNoCorsDomains,r=ac(t);n&&r&&(n[r.toLowerCase()]=Date.now())}const MF=new Map;function U6e(t,e){const n=e?.preferredHost;if(!n||C1(t,`https://${n}`,!0))return;const r=iI(t);if(!r||r.serverType!=="FeatureServer"||Vde(t))return;const i=r.url.path.toLowerCase();MF.has(i)||MF.set(i,n)}function AQ(t){const e=iI(t)?.url.path.toLowerCase();if(!e)return t;const n=MF.get(e);return n?p6e(t,n):t}async function es(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=VG(e.query.toString().replaceAll("+"," ")));const n=iv(t),r=tI(t);r||n||(t=vg(t));const i={url:t,requestOptions:{...e}},s=g=>({data:g,getAllHeaders:c2,getHeader:c2,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=TF(t,Uc.internalInterceptors);if(o){const g=await PQ(o,i);if(g!=null)return s(g)}let a=TF(t);if(a){const g=await PQ(a,i);if(g!=null)return s(g);a.after||a.error||(a=null)}if(t=i.url,(e=i.requestOptions).responseType==="image"&&(ye("host-webworker")||ye("host-node")))throw sh("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(e.method==="head"){if(e.body)throw sh("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw sh("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await q6e(),g4)return g4.execute(t,e);const l=new AbortController,c=uu(e,()=>l.abort()),u={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:Uc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=e.useRequestQueue?J6e(u):OF(u),f=await h.finally(()=>c?.remove());return a?.after?.(f),f}let g4,gfe=!1;const Uc=tr.request,yfe="FormData"in globalThis,G6e=new Set([499,498,403,401]),B6e=new Set(["COM_0056","COM_0057","SB_0008"]),W6e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],c2=()=>null,y4=Symbol();function H6e(t){const e=ac(t);e&&!es._corsServers.includes(e)&&es._corsServers.push(e)}function IQ(t){const e=ac(t);return!e||e.endsWith(".arcgis.com")||es._corsServers.includes(e)||UG(e)}function sh(t,e,n,r){let i;const s={url:n.url,requestOptions:n.requestOptions,getAllHeaders:c2,getHeader:c2,ssl:!1};if(e instanceof Xe)return e.details?(e.details=Ze(e.details),e.details.url=n.url,e.details.requestOptions=n.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(u=>r.headers.get(u)),l=r?.status,c=e.message;c&&(i=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],i??=e.details):(s.messages=e.details,i??=s.messages?.[0]),s.raw=y4 in e?e[y4]:e}return i??="Error",_a(e)?kr():new Xe(t,i,s)}async function q6e(){ye("host-webworker")&&(!g4&&globalThis.invokeStaticMessage?g4=await _e(()=>import("./request-DTqdgX7_.js"),[]):gfe=!0)}async function NF(){Zr||await _e(()=>import("./IdentityManager-BHIa8mbd.js"),__vite__mapDeps([17,18]))}async function K6e(t){const e=t.params.url,n=t.params.requestOptions,r=t.controller.signal,i=n.body;let s=null,o=null;if(yfe&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),t.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},keepalive:n.keepAlive??!1,method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:Uc.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(gfe||n.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||n.query?.token||s?.get("token")),!t.hasToken){const a=XG(e);a&&(n.query??={},n.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!vfe(e)&&!fa(r)){let a;n.authMode==="immediate"?(await NF(),a=await Zr.getCredential(e,{signal:r})):n.authMode==="no-prompt"?(await NF(),a=await Zr.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Zr&&(a=Zr.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function vfe(t){return W6e.some(e=>e.test(t))}async function Y6e(t){let e=t.params.url,n=AQ(e);const r=t.params.requestOptions,i=t.fetchOptions??{},s=tI(e)||iv(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:Uc.timeout;let l=!1;if(!s){t.useSSL&&(e=WG(e));let g={...r.query};t.credentialToken&&(g.token=t.credentialToken);let v=Ik(g);ye("esri-url-encodes-apostrophe")&&(v=v.replaceAll("'","%27"));const x=n.length+1+v.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||x>Uc.maxUrlLength;const T=r.useProxy||!!lO(e);if(T){const A=Hde(e);b=A.path,!l&&b.length+1+x>Uc.maxUrlLength&&(l=!0),A.query&&(g={...A.query,...g})}if(i.method==="HEAD"&&(l||T)){if(l)throw x>Uc.maxUrlLength?sh("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):sh("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(T)throw sh("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=r$(e,g):(i.body=Ik(g),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):e=r$(e,g),T&&(t.useProxy=!0,e=`${b}?${e}`),g.token&&yfe&&i.body instanceof FormData&&!Vde(e)&&i.body.set("token",g.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:C1(e,FG())||(UG(e)||Zr&&Zr.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include",V6e(e)&&await z6e(l?r$(e,g):e)),n=AQ(e)}let c,u,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")u=i,u.url=n,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.keepalive||i.method!=="GET"||l||X6e(r.headers)||!s&&!t.useProxy&&Uc.proxyUrl&&!IQ(e)){if(es._beforeFetch&&await es._beforeFetch(e,i),c=await fetch(n,i),es._afterFetch&&await es._afterFetch(c),t.useProxy||H6e(e),r.responseType==="native")u=c;else if(i.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":u=await c.arrayBuffer();break;case"blob":case"image":u=await c.blob();break;default:u=await c.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=RQ(u,"application/xml");break;case"document":u=RQ(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const g=c.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&u[o==="blob"?"size":"byteLength"]<=750)try{const v=await new Response(u).json();v.error&&(u=v)}catch{}}o==="image"&&u instanceof Blob&&(u=await CQ(URL.createObjectURL(u),t,!0))}}else{u=await c.text();try{u=JSON.parse(u)}catch{}}}else u=await CQ(n,t)}catch(g){if(g.name==="AbortError")throw f?j6e():kr("Request canceled");if(!(!c&&g instanceof TypeError&&Uc.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||IQ(e))throw g;t.redoRequest=!0,QDe({proxyUrl:Uc.proxyUrl,urlPrefix:ac(e)??""})}finally{h&&clearTimeout(h)}return[c,u]}async function PQ(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let n,r;try{r=await t.before(e)}catch(i){n=sh("request:interceptor",i,e)}if((r instanceof Error||r instanceof Xe)&&(n=sh("request:interceptor",r,e)),n)throw t.error&&t.error(n),n;return r}}function X6e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function RQ(t,e){let n;try{n=new DOMParser().parseFromString(t,e)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}es._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],es._beforeFetch=void 0,es._afterFetch=void 0;const Z6e=new Map;async function J6e(t){const e=e$e(t.params.url);if(!e)return OF(t);const{QueueProcessor:n}=await _e(()=>import("./QueueProcessor-Df6WsTz6.js"),[]);return nI(Z6e,e.origin,()=>{const i=e.isHosted?ye("request-queue-concurrency-hosted"):ye("request-queue-concurrency-non-hosted");return new n({concurrency:i,process:s=>{if(fa(s.params.requestOptions))throw sh("",kr("Request canceled"),s.params);return OF(s)}})}).push(t)}async function OF(t){let e,n;await K6e(t);try{do[e,n]=await Y6e(t);while(!await Q6e(t,e,n))}catch(s){const o=sh("request:server",s,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(n)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&n.user?.username&&!UG(r)){const s=ac(r,!0);s&&Uc.trustedServers.push(s)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&F6e(n.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&U6e(r,n);const i=t.credential;if(i&&Zr){let o=Zr.findServerInfo(i.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=Zr.findCredential(o,i.userId);a&&Zr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:n,getAllHeaders:e?()=>Array.from(e.headers):c2,getHeader:e?s=>e.headers.get(s):c2,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Q6e(t,e,n){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error&&typeof n.error=="object"?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[y4]=n,i.details=n.messages)),!i&&!e.ok)throw i=new Error(`Unable to load ${e.url} status: ${e.status}`),i[y4]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());const l=r.authMode;if(s===403&&(a===4||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&G6e.has(s)&&!vfe(t.params.url)&&(s!==403||(!o||!B6e.has(o))&&(a==null||a===2&&t.credentialToken))){await NF();try{const c=await Zr.getCredential(t.params.url,{error:sh("request:server",i,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;i=c}}if(i)throw i;return!0}function CQ(t,e,n=!1){const r=e.controller.signal,i=new Image;return e.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=Uc.priority,i.src=t,$6e(i,t,n,r)}function e$e(t){let e,n;return typeof t=="string"?(e=ac(t,!0),n=TQ(t)):(e=t.origin,n=TQ(t.toString())),e==null?null:{origin:e,isHosted:n}}function t$e(t){return t?.release&&typeof t.release=="function"}function n$e(t){return t?.acquire&&typeof t.acquire=="function"}var Sg;let eb=(Sg=class{constructor(e,n,r,i=1,s=0){this._creator=e,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){let n;if(Sg.test.disabled)n=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=this._creator()}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...e):n$e(n)&&n.acquire(...e),n}release(e){e&&!Sg.test.disabled&&(this._releaseFunction?this._releaseFunction(e):t$e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let n=e;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Sg.test={disabled:!!ye("esri-tests-disable-memory-pools")},Sg);function r$e(t){t.length=0}let Pa=class{constructor(e=50,n=50){this._pool=new eb(()=>[],void 0,r$e,n,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return i$.acquire()}static release(e){return i$.release(e)}static prune(){i$.prune()}};const i$=new Pa(100),MQ=new WeakMap;function i$e(t,e,n=!1){const r=` DEPRECATED - ${e}`;if(!n)return void t.warn(r);let i=MQ.get(t);i||(i=new Set,MQ.set(t,i)),i.has(e)||(i.add(e),t.warn(r))}const v4="https://www.esriurl.com/";function s$e(t,e,n,r={}){ye("esri-deprecation-warnings")&&Ng(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${v4}${n}/`,`Esri's move to web components: ${v4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function o$e(t,e,n,r={}){ye("esri-deprecation-warnings")&&Ng(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${v4}${n}/`,`Esri's move to web components: ${v4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function jAt(t,e,n={}){ye("esri-deprecation-warnings")&&Ng(t,`Module: ${e}`,n)}function _fe(t,e,n={}){if(ye("esri-deprecation-warnings")){const{moduleName:r}=n;Ng(t,`Function: ${(r?r+"::":"")+e+"()"}`,n)}}function LF(t,e,n={}){if(ye("esri-deprecation-warnings")){const{moduleName:r}=n;Ng(t,`Property: ${(r?r+"::":"")+e}`,n)}}function a$e(t,e,n={}){ye("esri-deprecation-warnings")&&Ng(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...n})}function Ng(t,e,n={}){if(ye("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),i&&(a+=`
	 Version: ${i}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;i$e(t,a,o)}}function FAt(t){const e=[];return function*(){yield*e;let n,r=e.length;for(;!(n=t.next()).done;)for(e.push(n.value),yield n.value;++r<e.length;)yield e[r]}}function l$e(t,e){for(const n of t)if(n!=null&&e(n))return n}function _4(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let tb=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(n=>{e+=n.length}),e}add(e,n){if(_4(e)){const r=this._getOrCreateGroup(n);for(const i of e)OQ(i)&&r.push(i)}else OQ(e)&&this._getOrCreateGroup(n).push(e);return this}forEach(e,n){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&n&&r.forEach(n)}}has(e){return this._groups.has(_R(e))}remove(e){if(typeof e!="string"&&_4(e)){for(const n of e)this.remove(n);return this}return this.has(e)?(NQ(this._getGroup(e)),this._groups.delete(_R(e)),this):this}removeAll(){return this._groups.forEach(NQ),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const n=[];return this._groups.set(_R(e),n),n}_getGroup(e){return this._groups.get(_R(e))}};function _R(t){return t||"_default_"}function NQ(t){for(const e of t)e instanceof tb?e.removeAll():e.remove()}function OQ(t){return t!=null&&(!!t.remove||t instanceof tb)}const xfe=Symbol("Accessor-beforeDestroy");function Og(t){return t.__accessor__??null}function c$e(t,e){return t?.metadata?.[e]!=null}function JC(t,e,n){return n?x4(t,e,{policy:n,path:""}):x4(t,e,null)}function x4(t,e,n){return e?Object.keys(e).reduce((r,i)=>{const s=i;if(s==="__proto__")return r;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=Ze(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(u=>{l.includes(u)||l.push(u)}));else if(c&&typeof c=="object")if(n){const u=n.path;n.path=o,r[s]=x4(l,c,n),n.path=u}else r[s]=x4(l,c,null);else r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[s]=c);return r},t||{}):t}function wfe(t){return Array.isArray(t)?t:t.split(".")}function LQ(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function u$e(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...LQ(n));return e}return LQ(t)}function bfe(t,e,n,r){const i=u$e(e);if(i.length!==1){const s=i.map(o=>r(t,o,n));return sv(s)}return r(t,i[0],n)}function Efe(t,e){const n=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}const r=Og(e);return c$e(r,n)?r.get(n):e[n]}function Sfe(t,e,n){if(t==null)return t;const r=Efe(e[n],t);return!r&&n<e.length-1?void 0:n===e.length-1?r:Sfe(r,e,n+1)}function sI(t,e,n=0){return typeof e!="string"||e.includes(".")?Sfe(t,wfe(e),n):Efe(e,t)}function fd(t,e){return sI(t,e)}function DQ(t,e){return sI(e,t)!==void 0}const Jl={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function nb(t){let e=t.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!n){e=Object.create(e);for(const r in e)e[r]=Ze(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function oI(t,e){const n=nb(t);let r=n[e];return r||(r=n[e]={}),r}function h$e(t,e){return JC(t,e,f$e)}const d$e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function f$e(t){return d$e.test(t)?"replace":"merge"}let p$e=class{constructor(e,n){this._observers=e,this._observer=n}remove(){Sde(this._observers,this._observer)}},Tfe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return m$e;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===e){r=!0;break}}return r||(n.push(e),i&&this._removeDestroyedObservers()),new p$e(n,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const n=e.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&e[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;e[i]=e[i+r]}}e.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const n of e)n.onCommitted();this._observers=null}}};const m$e=Kn(),di={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let dO=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const w4=new dO,nS=[];let iT=w4;function tn(t){iT.onAccessed(t)}let QC=!1,eM=!1;function fp(t,e,n){if(QC)return JG(t,e,n);let r=null;return kfe(t),r=e.call(n),Afe(),r}function g$e(t,e){return fp(w4,t,e)}function JG(t,e,n){const r=QC;QC=!0,kfe(t);let i=null;try{i=e.call(n)}catch(s){eM&&Tt.getLogger("esri.core.accessorSupport.tracking").error(s)}return Afe(),QC=r,i}function kfe(t){iT=t,nS.push(t)}function Afe(){const t=nS.length;if(t>1){const e=nS.pop();iT=nS[t-2],e.onTrackingEnd()}else if(t===1){const e=nS.pop();iT=w4,e.onTrackingEnd()}else iT=w4}function Ife(t,e){if(e.flags&di.DepTrackingInitialized)return;e.flags|=di.DepTrackingInitialized;const n=eM;eM=!1,e.flags&di.AutoTracked?JG(e.trackingTarget,e.metadata.get,t):Pfe(t,e),eM=n}const y$e=[];function Pfe(t,e){e.flags&di.ExplicitlyTracking||(e.flags|=di.ExplicitlyTracking,JG(e.trackingTarget,()=>{const n=e.metadata.dependsOn||y$e;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=wfe(r);for(let s=0,o=t;s<i.length&&o!=null&&typeof o=="object";++s)o=$Q(o,i[s],s!==i.length-1)}else $Q(t,r,!1)}),e.flags&=-129)}function $Q(t,e,n){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=Og(t);if(i){const s=i.propertiesByName.get(r);s&&(tn(s),Ife(t,s))}return n?t[r]:void 0}let jQ=class extends Tfe{constructor(e,n){super(),this.propertyName=e,this.metadata=n,this.trackingTarget=new dO(this),this.flags=0,this.flags=di.Dirty|(n.nonNullable?di.NonNullable:0)|(n.hasOwnProperty("value")?di.HasDefaultValue:0)|(n.get===void 0?di.DepTrackingInitialized:0)|(n.dependsOn===void 0?di.AutoTracked:0)}destroy(){this.flags&di.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&tn(this);const n=e.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&di.Computing||~i&di.Dirty&&n.has(r))return s;this.flags|=di.Computing;const o=e.host;let a;i&di.AutoTracked?a=fp(this.trackingTarget,this.metadata.get,o):(Pfe(o,this),a=this.metadata.get.call(o)),this.flags|=di.DepTrackingInitialized,n.set(r,a,1);const l=n.get(r);return l===s?this.flags&=-2:g$e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&di.Overridden&&(this.flags|=di.Dirty);const e=this._observers;if(e&&e.length>0)for(const n of e)n.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onCommitted()}}};const WAt=8;function QG(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function DF(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function v$e(t){return DF(t)}let _$e=class Rfe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new Rfe;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r))}),n}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,n){this._values.set(e,n)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,n){return this.has(e)}isBelowOrigin(e,n){return!this.has(e)}forEach(e){this._values.forEach(e)}};function h_(t,e,n){return t!==void 0}function FQ(t,e,n,r){return t!==void 0&&(!(n==null&&t.flags&di.NonNullable)||(r.lifecycle,!1))}let x$e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Jl.INITIALIZING,this.store=new _$e,this.mutable=!0,this._origin=7;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new jQ(r,n[r]);this.propertiesByName.set(r,i)}this.metadata=n}initialize(){this.lifecycle=Jl.CONSTRUCTING}constructed(){this.lifecycle=Jl.CONSTRUCTED}destroy(){this.lifecycle=Jl.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==Jl.INITIALIZING}get(e){const n=this.propertiesByName.get(e);if(!h_(n))return;if(n.metadata.get)return n.getComputed(this);this.mutable&&tn(n);const r=this.store;return r.has(e)?r.get(e):n.metadata.value}originOf(e){const n=this.store.originOf(e);if(n===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&di.HasDefaultValue)return"defaults"}return DF(n)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const n=this.propertiesByName.get(e);if(h_(n))return this.store.has(e)?this.store.get(e):n.metadata.value}internalSet(e,n){const r=this.propertiesByName.get(e);h_(r)&&this._internalSet(r,n)}getDependsInfo(e,n,r){const i=this.propertiesByName.get(n);if(!h_(i))return"";const s=new dO,o=fp(s,()=>i.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${n}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof jQ&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,n,r){const i=this.propertiesByName.get(e);if(h_(i))return this._setAtOrigin(i,n,r)}isOverridden(e){const n=this.propertiesByName.get(e);return n!==void 0&&!!(n.flags&di.Overridden)}clearOrigin(e,n){const r=this.store,i=this.propertiesByName.get(e);if(!h_(i))return;const s=r.isAtOrigin(e,n)&&!(i.flags&di.Overridden);r.delete(e,n),s&&i.notifyChange()}clearOverride(e){const n=this.propertiesByName.get(e);n&&n.flags&di.Overridden&&(n.flags&=-3,n.notifyChange())}override(e,n){const r=this.propertiesByName.get(e);if(!FQ(r,e,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if(s$.release(s),!o)return;n=a}r.flags|=di.Overridden,this._internalSet(r,n)}set(e,n){const r=this.propertiesByName.get(e);if(!FQ(r,e,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:l}=o;if(s$.release(o),!a)return;n=l}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(e){this._origin=QG(e)}getDefaultOrigin(){return DF(this._origin)}notifyChange(e){const n=this.propertiesByName.get(e);n!==void 0&&n.notifyChange()}invalidate(e){const n=this.propertiesByName.get(e);n!==void 0&&n.invalidate()}commit(e){const n=this.propertiesByName.get(e);n!==void 0&&n.commit()}_internalSet(e,n){const r=this.lifecycle!==Jl.INITIALIZING?this._origin:0;this._setAtOrigin(e,n,r)}_setAtOrigin(e,n,r){const i=this.store,s=e.propertyName;if(i.isAtOrigin(s,r)&&$G(n,i.get(s))&&~e.flags&di.Overridden)return;const o=i.isBelowOrigin(s,r)||i.isAtOrigin(s,r);o&&e.invalidate(),i.set(s,n,r),o&&e.commit(),Ife(this.host,e)}_cast(e,n){const r=s$.acquire();return r.valid=!0,r.value=n,e&&(r.value=e.call(this.host,n,r)),r}},w$e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const s$=new eb(()=>new w$e);function b4(t,e,n){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))b4(t,r,e[r]);else{if(e.includes(".")){const i=e.split("."),s=i.splice(-1,1)[0];return void b4(fd(t,i),s,n)}const r=t.__accessor__;r!=null&&b$e(e,r),t[e]=n}}function b$e(t,e){if(ye("esri-unknown-property-errors")&&!E$e(t,e))throw new Xe("set:unknown-property",S$e(t,e))}function E$e(t,e){return e.metadata[t]!=null}function S$e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let T$e;function k$e(){return T$e}let Cfe=class extends eb{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const n=super.acquire(...e);return this._set.delete(n),n}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const xR=[];function E4(t){xR.push(t),xR.length===1&&queueMicrotask(()=>{const e=xR.slice();xR.length=0;for(const n of e)n()})}let sT=class{constructor(e,n=30){this.name=e,this._counter=0,this._samples=new Array(n)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,n)=>e-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,n)=>e+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const S4=(t,e,n,r)=>{let i=e,s=e;const o=n>>>1,a=t[i-1];for(;s<=o;){s=i<<1,s<n&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,a)<=0)break;t[i-1]=l,i=s}t[i-1]=a},Mfe=(t,e)=>t<e?-1:t>e?1:0;function A$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Mfe);for(let s=n>>>1;s>e;s--)S4(t,s,n,r);const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,S4(t,i,s,r)}}function*I$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Mfe);for(let s=n>>>1;s>e;s--)S4(t,s,n,r),yield;const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,S4(t,i,s,r),yield}}const P$e=1.5,R$e=1.1;let Nfe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new wde,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>VQ(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];e(i)&&n.push(i)}return n}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,n){const r=this.data.indexOf(e,n);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let n=e;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,n=e.length){for(let r=0;r<n;r++)this.data[this._length++]=e[r]}fill(e,n){for(let r=0;r<n;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,VQ(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const n=bF(this.data,e,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(bF(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,n=e.length,r){this.length=IDe(this.data,e,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,n){if(e>=this.length||n>=this.length||e===n)return;const r=this.data[e];this.data[e]=this.data[n],this.data[n]=r}sort(e){A$e(this.data,0,this.length,e)}iterableSort(e){return I$e(this.data,0,this.length,e)}some(e,n){for(let r=0;r<this.length;++r)if(e.call(n,this.data[r],r,this.data))return!0;return!1}find(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)if(e.call(n,r[s]))return r[s]}filterInPlace(e,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];e.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)e.call(n,r[s],s,r)}forEach(e,n){this.data.slice(0,this.length).forEach(e,n)}map(e,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=e.call(n,this.data[i],i,this.data);return r}reduce(e,n){let r=n;for(let i=0;i<this.length;++i)r=e(r,this.data[i],i,this.data);return r}has(e){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function VQ(t){t.data.length>P$e*t.length&&(t.data.length=Math.floor(t.length*R$e))}function ZAt(t){return t}function C$e(t){return 1e3*t}function JAt(t){return t}function QAt(t){return .001*t}let M$e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},N$e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},$F=0;const wE={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},jF=["prepare","preRender","render","postRender","update","finish"],FF=[],N1=new Nfe;let O$e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Ofe()}};function L$e(){Zy!=null&&(cancelAnimationFrame(Zy),Zy=requestAnimationFrame(eB))}function Ofe(){Zy==null&&($F=performance.now(),Zy=requestAnimationFrame(eB))}const T4={frameTasks:N1,willDispatch:!1,clearFrameTasks:D$e,dispatch:Dfe,executeFrameTasks:$$e,reschedule:L$e};function rb(t){const e=new N$e(t);return FF.push(e),T4.willDispatch||(T4.willDispatch=!0,E4(Dfe)),e}function u2(t){const e=new M$e(t);return N1.push(e),Ofe(),new O$e(e)}let Zy=null;function D$e(t=!1){N1.forAll(e=>{e.removed=!0}),t&&Lfe()}function eB(){const t=performance.now();Zy=null,Zy=N1.some(n=>!n.paused&&!n.removed)?requestAnimationFrame(eB):null,T4.executeFrameTasks(t)}function $$e(t){const e=t-$F;$F=t;const n=1e3/60,r=Math.max(0,e-n);wE.time=t,wE.frameDuration=n-r;for(let i=0;i<jF.length;i++){const s=performance.now(),o=jF[i];N1.forAll(a=>{a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(wE.elapsedFrameTime=performance.now()-t,wE.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,wE)))}),z$e[i].push(performance.now()-s)}Lfe(),U$e.push(performance.now()-t)}const wR=new Nfe;function Lfe(){N1.forAll(t=>{t.removed&&wR.push(t)}),N1.removeUnorderedMany(wR.data,wR.length),wR.clear()}function Dfe(){for(;FF.length;){const t=FF.shift();t.isActive&&t.callback()}T4.willDispatch=!1}function j$e(t=1,e){const n=fc(),r=()=>{fa(e)?n.reject(kr()):t===0?n():(--t,E4(()=>r()))};return r(),n.promise}function F$e(t){return j$e(1,t)}async function V$e(t){await F$e(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const z$e=jF.map(t=>new sT(t)),U$e=new sT("total");function $fe(t,e){for(const n of t.values())if(e(n))return!0;return!1}function zQ(t,e){if(!e)return t;for(const n of e)n!=null&&t.add(n);return t}function rIt(t,e){return e!=null&&t.add(e),t}function tB(t,e){const n=new Set;return zQ(n,t),zQ(n,e),n}function G$e(t,e){const n=new Set;for(const r of e)t.has(r)&&n.add(r);return n}function iIt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function sIt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function B$e(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function W$e(t,e){return B$e(tB(t,e),G$e(t,e))}let H$e=0;function tM(){return++H$e}let fO=class extends dO{constructor(e){super(new q$e(e)),this._observer&&UQ.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&UQ.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},q$e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=K$e}};const UQ=new FinalizationRegistry(t=>{t.deref()?.destroy()});function K$e(){}let Kx=!1;const k4=[];function jfe(t,e){let n=new fO(s),r=null,i=!1;function s(){if(!n||i)return;if(Kx)return void Vfe(s);const a=r;n.clear(),Kx=!0,i=!0,r=fp(n,t),i=!1,Kx=!1,e(r,a),zfe()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=fp(n,t),i=!1,Kn(o)}function Ffe(t,e){let n=new fO(i),r=null;function i(){e(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=fp(n,t),r):null}return o(),Kn(s)}function Y$e(t,e){let n=!1,r=!1;const i=!!e?.sync;let s=new fO(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,s&&!n&&(Kx?Vfe(o):(s.clear(),Kx=!0,n=!0,fp(s,t),n=!1,Kx=!1,zfe()))}function a(){s&&(s.destroy(),s=null)}return n=!0,fp(s,t),n=!1,Kn(a)}function Vfe(t){k4.includes(t)||k4.unshift(t)}function zfe(){for(;k4.length;)k4.pop()()}var a1;let nB=(a1=class{constructor(){this.uid=tM(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,n,r,i,s){return this.pool.acquire(0,e,n,r,i,s,$G)}static acquireTracked(e,n,r,i){return this.pool.acquire(1,e,n,r,null,null,i)}notify(e,n){this.type===0?this.callback.call(this.target,e,n,this.path,this.target):this.callback.call(null,e,n,void 0,void 0)}acquire(e,n,r,i,s,o,a){this.uid=tM(),this.removed=!1,this.type=e,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=tM(),this.removed=!0}},a1.pool=new Cfe(()=>new a1),a1);const nM=new Pa,Qf=new Set;let A4;function I4(t){Qf.delete(t),Qf.add(t),Ufe()}function Ufe(){A4||(A4=rb(J$e))}function X$e(t){if(t.removed)return;const e=t.oldValue,n=t.getValue();t.equals(e,n)||(t.oldValue=n,t.notify(n,e))}function Z$e(t){for(const e of Qf.values())e.target===t&&(e.removed=!0)}function J$e(){let t=10;for(;A4&&t--;){A4=null;const e=Q$e(),n=nM.acquire();for(const r of e){const i=r.uid;X$e(r),i===r.uid&&r.removed&&n.push(r)}for(const r of Qf)r.removed&&(n.push(r),Qf.delete(r));for(const r of n)nB.pool.release(r);nM.release(n),nM.release(e),VF.forEach(r=>r())}}function Q$e(){const t=nM.acquire();t.length=Qf.size;let e=0;for(const n of Qf)t[e]=n,++e;return Qf.clear(),t}const VF=new Set;function eje(t){return VF.add(t),Kn(()=>VF.delete(t))}function tje(t,e,n){let r=bfe(t,e,n,(i,s,o)=>{let a,l,c=Ffe(()=>sI(i,s),(u,h)=>{i.__accessor__?.lifecycle===Jl.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=nB.acquireUntracked(u,o,h,i,s),l=a.uid),I4(a))});return Kn(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,I4(a)),a=null),r=c=null})});return r}function nje(t,e,n){const r=bfe(t,e,n,(i,s,o)=>{let a=!1;return jfe(()=>sI(i,s),(l,c)=>{i.__accessor__.lifecycle!==Jl.DESTROYED?a||(a=!0,$G(c,l)||o.call(i,l,c,s,i),a=!1):r.remove()})});return r}function rje(t,e,n,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==Jl.DESTROYED?r?nje(t,e,n):tje(t,e,n):Kn()}function ije(t,e,n){let r,i,s=Ffe(t,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=nB.acquireTracked(o,e,a,n),i=r.uid),I4(r))});return Kn(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,I4(r)),r=null),s=null})}function sje(t,e,n){let r=!1;return jfe(t,(i,s)=>{r||(r=!0,n(s,i)||e(i,s),r=!1)})}function oje(t,e,n=!1,r=Nde){return n?sje(t,e,r):ije(t,e,r)}function GQ(t){return $fe(Qf,e=>e.oldValue===t)}const Jy=()=>Tt.getLogger("esri.core.accessorSupport.ensureTypes");function aje(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(Jy().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function lje(t){return t==null?t:!!t}function cje(t){return t==null?t:t.toString()}function Ql(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function rB(t){return t==null?t:Math.round(parseFloat(t))}function uje(t){return null}function hje(t,e){return n=>{let r=t(n);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Gfe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function P4(t,e){return e!=null&&t&&!(e instanceof t)}function Bfe(t){return t&&"isCollection"in t}function BQ(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function dje(t,e){if(!e?.constructor||!Bfe(e.constructor))return zF(t,e)?e:new t(e);const n=BQ(t.prototype.itemType),r=BQ(e.constructor.prototype.itemType);return n?r?n===r?e:n.prototype.isPrototypeOf(r.prototype)?new t(e):(zF(t,e),e):new t(e):e}function zF(t,e){return!!Gfe(e)&&(Jy().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+mO(t)+"'"),!0)}function pO(t,e){return e==null?e:Bfe(t)?dje(t,e):P4(t,e)?zF(t,e)?e:new t(e):e}function mO(t){return t?.prototype?.declaredClass||"unknown"}const fje=new WeakMap;function pje(t){switch(t){case Number:return e=>Ql(e);case Lr:return rB;case Boolean:return lje;case String:return cje;case Date:return aje;case iB:return uje;default:return nI(fje,t,()=>pO.bind(null,t))}}function za(t,e){const n=pje(t);return arguments.length===1?n:n(e)}function Pk(t,e,n){return arguments.length===1?Pk.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,n)):[t(e,n)])}function mje(t,e){return arguments.length===1?Pk(n=>za(t,n)):Pk(n=>za(t,n),e)}function Wfe(t,e,n){return e!==0&&Array.isArray(n)?n.map(r=>Wfe(t,e-1,r)):t(n)}function R4(t,e,n){if(arguments.length===2)return s=>R4(t,e,s);if(!n)return n;n=Wfe(t,e,n);let r=e,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function gje(t,e,n){return arguments.length===2?R4(r=>za(t,r),e):R4(r=>za(t,r),e,n)}function Hfe(t){return!!Array.isArray(t)&&!t.some(e=>{const n=typeof e;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function UF(t,e){if(arguments.length===2)return UF(t).call(null,e);const n=new Set,r=t.filter(a=>typeof a!="function"),i=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(n.has(a)||i.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&i.some(h=>!P4(h,a))?a:(u&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),Jy().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>mO(h)).join(", ")),Jy().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):Jy().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Lg(t,e){if(arguments.length===2)return Lg(t).call(null,e);const n={},r=[],i=[];for(const l in t.typeMap){const c=t.typeMap[l];n[l]=za(c),r.push(mO(c)),i.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!P4(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,u=n[c];if(!u)return Jy().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!P4(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Gfe(l)){const h={};for(const f in l)f!==t.key&&(h[f]=l[f]);return u(h)}return u(l)}}let Lr=class{},iB=class{};const uIt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function yje(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function qfe(t){switch(t.type){case"native":return za(t.value);case"array":return Pk(qfe(t.value));case"one-of":return vje(t);default:return null}}function vje(t){let e=null;return(n,r)=>BF(n,t)?n:(e==null&&(e=GF(t)),Jy().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function GF(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Lr:return"integer";case Date:return"date";case iB:return"null";default:return mO(t.value)}case"array":return`array of ${GF(t.value)}`;case"one-of":{const e=t.values.map(n=>GF(n));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function BF(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Lr:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case iB:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!BF(n,e.value));case"one-of":return e.values.some(n=>BF(t,n))}}function E(t={}){return(e,n)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,n),i=oI(e,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in t&&Tt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${e.constructor.name}" already defined in the metadata`,t),i.value=t.value=r.value)),t.readOnly!=null&&(i.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;i.dependsOn=[l],i.get=function(){let h=fd(this,l);if(typeof h=="function"){u||(u=l.split(".").slice(0,-1).join("."));const f=fd(this,u);f&&(h=h.bind(f))}return h},i.readOnly||(i.set=c?function(h){this._override(n,h)}:function(h){b4(this,l,h)})}const o=t.type,a=t.types;if(!i.cast){let l;o?l=_je(o):a&&(l=Array.isArray(a)?Pk(Lg(a[0])):Lg(a)),t.cast=xje(t.cast,l)}h$e(i,t),t.range&&(i.cast=hje(i.cast,t.range))}}function sB(t,e,n){const r=oI(t,n);r.json||(r.json={});let i=r.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function _je(t){let e=0,n=t;if(yje(t))return qfe(t);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],e++;const r=n;if(Hfe(r))return e===0?UF(r):R4(UF(r),e);if(e===1)return mje(r);if(e>1)return gje(r,e);const i=t;return i.from?i.from:za(i)}function xje(t,e){if(t||e)return t?e?(n,r)=>e(t(n,r),r):t:e}function wje(t){if(t.json&&t.json.origins){const e=t.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(e[r]){const i=e[r];n[r].forEach(s=>{e[s]=i}),delete e[r]}}}let Cd=class extends jde{constructor(e,n,r){super(e,n,r)}};Cd.prototype.type="warning";function Kfe(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function bje(t,e){return oB(t,"any",e?.origin)}function C4(t,e){return oB(t,"read",e?.origin)}function Yfe(t,e){return oB(t,"write",e?.origin)}function oB(t,e,n){let r=t?.json;if(r?.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(e==="any"||e in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(e==="any"||e in i)&&(r=i)}return r}const WF=()=>Tt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function WQ(t,e,n){t&&(!n&&!e.read||e.read?.reader||e.read?.enabled===!1||Tje(t)&&Y2("read.reader",aB(t),e))}function aB(t){const e=t.ndimArray??0;if(e>1)return Sje(t);if(e===1)return HQ(t);if("type"in t&&Zfe(t.type)){const n=t.type.prototype?.itemType?.Type,r=HQ(typeof n=="function"?{type:n}:{types:n});return(i,s,o)=>{const a=r(i,s,o);return a&&new t.type(a)}}return lB(t)}function lB(t){return"type"in t?Eje(t.type):kje(t.types)}function Eje(t){return t.prototype.read?(e,n,r)=>{if(e==null)return e;const i=typeof e;if(i!=="object")return void WF().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${i}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Xfe(t,e,n,r){return r!==0&&Array.isArray(e)?e.map(i=>Xfe(t,i,n,r-1)):t(e,void 0,n)}function Sje(t){const e=lB(t),n=Xfe.bind(null,e),r=t.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function HQ(t){const e=lB(t);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const l=e(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=e(n,void 0,i);return s!==void 0?[s]:void 0}}function Zfe(t){if(!Kfe(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?cB(e.Type):Jfe(e.Type))}function Tje(t){return"types"in t?Jfe(t.types):cB(t.type)}function cB(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Zfe(t))}function Jfe(t){for(const e in t.typeMap)if(!cB(t.typeMap[e]))return!1;return!0}function kje(t){let e=null;const n=t.errorContext??"type",r=t.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void WF().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=Ije(t));const l=t.key;if(typeof l!="string")return;const c=i[Aje(l,e,o)],u=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const f=`Type '${c||"unknown"}' is not supported`;return o?.messages&&i&&o.messages.push(new Cd(`${n}:unsupported`,f,{definition:i,context:o})),void WF().error(f)}const h=new u;return h.read(i,o),r?r(h):h}}function Aje(t,e,n){const r=Object.values(e)[0],i=nb(r.prototype)[t],s=C4(i,n),o=s?.read?.source;return o&&typeof o=="string"?o:t}function Ije(t){const e={};for(const n in t.typeMap){const r=t.typeMap[n],i=nb(r.prototype);if(typeof t.key=="function")continue;const s=i[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const o=s.json?.write;if(!o?.writer){e[n]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,c={};o.writer(n,c,l),c[l]&&(e[c[l]]=r)}return e}function Pje(t){if(t.json||(t.json={}),KQ(t.json),YQ(t.json),qQ(t.json),t.json.origins)for(const e in t.json.origins)KQ(t.json.origins[e]),YQ(t.json.origins[e]),qQ(t.json.origins[e]);return!0}function qQ(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function KQ(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function YQ(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function XQ(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const n=t?.ndimArray??0;t&&(n===1||"type"in t&&Kfe(t.type))?e.write.writer=Mje:n>1?e.write.writer=Nje(n):e.types?Array.isArray(e.types)?e.write.writer=Cje(e.types[0]):e.write.writer=Rje(e.types):e.write.writer=Rk}function Rje(t){return(e,n,r,i)=>e?Qfe(e,t,i)?Rk(e,n,r,i):void 0:Rk(e,n,r,i)}function Qfe(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(n?.messages){const r=e.errorContext??"type",i=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new Xe(`${r}:unsupported`,i,{definition:t,context:n})),Tt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function Cje(t){return(e,n,r,i)=>!e||!Array.isArray(e)?Rk(e,n,r,i):Rk(e.filter(s=>Qfe(s,t,i)),n,r,i)}function Rk(t,e,n,r){Y2(n,M4(t,r),e)}function M4(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?N4(t):t}function N4(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function Mje(t,e,n,r){let i;t===null?i=null:t&&typeof t.map=="function"?(i=t.map(s=>M4(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[M4(t,r)],Y2(n,i,e)}function epe(t,e,n){return n!==0&&Array.isArray(t)?t.map(r=>epe(r,e,n-1)):M4(t,e)}function Nje(t){return(e,n,r,i)=>{let s;if(e===null)s=null;else{s=epe(e,i,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Y2(r,s,n)}}function Oje(t){const e=Lje(t);if(t.json.origins)for(const n in t.json.origins){const r=t.json.origins[n],i=r.types?Dje(r):e;WQ(i,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),XQ(i,r)}WQ(e,t.json,!0),XQ(e,t.json)}function Lje(t){return t.json.types?HF(t.json):t.type?tpe(t):HF(t)}function Dje(t){return t.type?tpe(t):HF(t)}function tpe(t){if(!t.type)return;let e=0,n=t.type;for(;Array.isArray(n)&&!Hfe(n);)n=n[0],e++;return{type:n,ndimArray:e}}function HF(t){if(!t.types)return;let e=0,n=t.types;for(;Array.isArray(n);)n=n[0],e++;return{types:n,ndimArray:e}}function $je(t){Pje(t)&&(wje(t),Oje(t))}const o$=new Set,a$=new Set;function ue(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,Fje(e);const n=[],r=[];let i=e.prototype;for(;i;)i.hasOwnProperty("initialize")&&!o$.has(i.initialize)&&(o$.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!a$.has(i.destroy)&&(a$.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);o$.clear(),a$.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=n.length-1;l>=0;l--)n[l].call(this)}}),r.length){let l=!1;const c=this[xfe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=Jl.DESTROYING,l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=nb(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function jje(t,e){return e.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r===void 0)return;n.mutable&&tn(r);const i=n.store;return i.has(t)?i.get(t):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r!==void 0)return r.getComputed(n)}}function Fje(t){const e=t.prototype,n=nb(e),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];$je(s),r[i]={enumerable:!0,configurable:!0,get:jje(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?ZQ("read-only",i):a.lifecycle===Jl.CONSTRUCTED&&s.constructOnly?ZQ("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const ZQ=(t,e)=>{Tt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var JQ,QQ;function Vje(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const sm=Symbol("Accessor-Handles"),l$=Symbol("Accessor-Initialized");var Tg;let Kt=(Tg=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}nb(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let h;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=u,f}return this.inherited=u,h}:e[a]}for(const a in n){const l=Vje(n[a]);E(l)(o.prototype,a)}return ue(r)(o)}static freeze(e){return e instanceof Tg?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Tg?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[JQ]=null,this[QQ]=!1,this.constructor===Tg)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new x$e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),e.length>0&&(n.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,n=e.ctorArgs;e.initialize(),n&&(this.set(n),e.ctorArgs=null),e.constructed(),this.initialize(),this[l$]=!0}initialize(){}[xfe](){this[sm]=Ni(this[sm])}destroy(){this.destroyed||(Z$e(this),this.__accessor__.destroy(),k$e()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[l$]}get destroyed(){return this.__accessor__?.lifecycle===Jl.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===Jl.DESTROYING||!1}commitProperty(e){fd(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,n){return b4(this,e,n),this}watch(e,n,r){return _fe(Tt.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),rje(this,e,n,r)}addHandles(e,n){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const i of r)i.remove();return}(this[sm]??=new tb).add(e,n)}removeHandles(e){this[sm]?.remove(e)}removeAllHandles(){this[sm]?.removeAll()}removeHandlesReference(e){this[sm]?.removeReference(e)}hasHandles(e){return this[sm]?.has(e)===!0}_override(e,n){n===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,n){n==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,n){return this.__accessor__.internalSet(e,n),this}},JQ=sm,QQ=l$,Tg);const gO=t=>{const e=t;class n extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(i,s){let o=this._listenersMap?.get(i);if(!o)return!1;let a=!1;for(const l of o.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,s):a=!0}return a&&(o=o.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return sv(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),Kn(()=>{const a=this._listenersMap?.get(i),l=a?.indexOf(s)??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove(),("deref"in s?s.deref():s)?.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap?.get(i);return s!=null&&s.length>0}}return n},npe=gO(class{}),zje=npe,aI=gO(Kt);function rpe(t){return(e,n)=>{e[n]=t}}let lI=class extends Tfe{notify(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var ff;let Uje=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},Gje=class{constructor(e,n,r,i,s){this.target=e,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const kc=new eb(()=>new Uje,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function eee(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function c$(t){return t?t instanceof Mm?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function u$(t){if(t?.length)return t[0]}function Bje(t,e,n,r){const i=Math.min(t.length-n,e.length-r);let s=0;for(;s<i&&t[n+s]===e[r+s];)s++;return s}function ipe(t,e,n,r){e&&e.forEach((i,s,o)=>{t.push(i),ipe(t,n.call(r,i,s,o),n,r)})}const om=new Set,am=new Set,lm=new Set,h$=new Map;let Wje=0,Mm=ff=class extends aI{static ofType(t){if(!t)return ff;if(h$.has(t))return h$.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const i=t.typeMap[r].prototype.declaredClass;e?e+=` | ${i}`:e=i}let n=class extends ff{};return _([rpe({Type:t,ensureType:typeof t=="function"?za(t):Lg(t)})],n.prototype,"itemType",void 0),n=_([ue(`esri.core.Collection<${e}>`)],n),h$.set(t,n),n}static isCollection(t){return t!=null&&t instanceof ff}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new lI,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Wje++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof ff?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return tn(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,c$(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Kn();if(t==="change"){const n=this._chgListeners,r={removed:!1,callback:e};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),Kn(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return super.on(t,e)}once(t,e){const n="deref"in e?()=>e.deref():()=>e,r=this.on(t,i=>{n()?.call(null,i),r.remove()});return r}add(t,e){if(tn(this._observable),this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e??null);return this._splice(n,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(tn(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e);return this._splice(n,0,c$(t)),this._emitAfterChanges(1),this}at(t){if(tn(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(tn(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return tn(this._observable),this._createNewInstance({items:this._items.map(Ze)})}concat(...t){tn(this._observable);const e=t.map(c$);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(tn(this._observable),!this.length||this._emitBeforeChanges(2))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)t.call(e,n[i],i,n);this._emitAfterChanges(2)}destroyAll(){this.drain(eee)}destroyMany(t){const e=this.removeMany(t);return e.forEach(eee),e}every(t,e){return tn(this._observable),this._items.every(t,e)}filter(t,e){tn(this._observable);const n=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:n})}find(t,e){return tn(this._observable),this._items.find(t,e)}findIndex(t,e){return tn(this._observable),this._items.findIndex(t,e)}flatten(t,e){tn(this._observable);const n=[];return ipe(n,this,t,e),new ff(n)}forEach(t,e){return tn(this._observable),this._items.forEach(t,e)}getItemAt(t){return tn(this._observable),this._items[t]}getNextIndex(t){tn(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return tn(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return tn(this._observable),this._items.indexOf(t,e)}join(t=","){return tn(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return tn(this._observable),this._items.lastIndexOf(t,e)}map(t,e){tn(this._observable);const n=this._items.map(t,e);return new ff({items:n})}reorder(t,e=this.length-1){tn(this._observable);const n=this.indexOf(t);if(n!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),n!==e){if(this._emitBeforeChanges(4))return t;this._splice(n,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(tn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=u$(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return tn(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){tn(this._observable);const n=this._items;return arguments.length===2?n.reduce(t,e):n.reduce(t)}reduceRight(t,e){tn(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(t,e):n.reduceRight(t)}remove(t){return tn(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(tn(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=u$(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(tn(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof ff?t.toArray():t,n=this._items,r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s],a=n.indexOf(o);if(a>-1){const l=1+Bje(e,n,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(tn(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(tn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=u$(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return tn(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return tn(this._observable),this._items.some(t,e)}sort(t){if(tn(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,n)=>e===n?0:e<n?-1:1){const e=this.length-1;for(let n=0;n<e;n++)if(t(this.items[n],this.items[n+1])>0)return!0;return!1}splice(t,e,...n){tn(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(n.length?1:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(t,e,n)||[];return this._emitAfterChanges(r),i}toArray(){return tn(this._observable),this._items.slice()}toJSON(t){return tn(this._observable),this.toArray().map(e=>d4(e)?e.toJSON(t):e)}toLocaleString(){return tn(this._observable),this._items.toLocaleString()}toString(){return tn(this._observable),this._items.toString()}unshift(...t){return tn(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=rb(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=kc.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);kc.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=kc.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);kc.release(a)}}if(n?.length){if(i){const u=[];for(const h of n){const f=i.ensureType(h);f==null&&h!=null||u.push(f)}n=u}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const u=kc.acquire();u.target=this,u.cancellable=!0;const h=kc.acquire();h.target=this,h.cancellable=!1;for(const f of n)a?(u.reset(f),this.emit("before-add",u),u.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));kc.release(h),kc.release(u)}else{if(c)for(const u of n)r.push(u);else r.splice(t,0,...n);this._set("length",r.length)}}if((n?.length||o?.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new Gje(this,n,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const n=kc.acquire();n.target=this,n.cancellable=!0,n.type=t,this.emit("before-changes",n),e=n.defaultPrevented,kc.release(n)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=kc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),kc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const n=e.changes;om.clear(),am.clear(),lm.clear();for(const{added:l,removed:c}of n){if(l)if(lm.size===0&&am.size===0)for(const u of l)om.add(u);else for(const u of l)am.has(u)?(lm.add(u),am.delete(u)):lm.has(u)||om.add(u);if(c)if(lm.size===0&&om.size===0)for(const u of c)am.add(u);else for(const u of c)om.has(u)?om.delete(u):(lm.delete(u),am.add(u))}const r=Pa.acquire();om.forEach(l=>{r.push(l)});const i=Pa.acquire();am.forEach(l=>{i.push(l)});const s=this._items,o=e.items,a=Pa.acquire();if(lm.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||i.length||a.length)){const l={target:this,added:r,removed:i,moved:a},c=e.listeners.length;for(let u=0;u<c;u++){const h=e.listeners[u];h.removed||h.callback.call(this,l)}}Pa.release(r),Pa.release(i),Pa.release(a)}om.clear(),am.clear(),lm.clear()}};_([E()],Mm.prototype,"_updating",void 0),_([E()],Mm.prototype,"length",void 0),_([E()],Mm.prototype,"items",null),_([E({readOnly:!0})],Mm.prototype,"updating",null),Mm=ff=_([ue("esri.core.Collection")],Mm);const Ot=Mm;function xd(t,e,n=Ot){return e||(e=new n),e===t||e.destroyed||(e.removeAll(),Hje(t)?e.addMany(t):t&&e.add(t)),e}function spe(t){return t}function Hje(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let qje=class ope{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new ope;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r.value),r.origin)}),n}get(e,n){n=this._normalizeOrigin(n);const r=this._values.get(e);return n==null||r?.origin===n?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const n=[...this._values.keys()];return e==null?n:n.filter(r=>this._values.get(r)?.origin===e)}set(e,n,r){if((r=this._normalizeOrigin(r))===0){const i=this._values.get(e);if(i?.origin!=null&&i.origin>r)return}this._values.set(e,new Kje(n,r))}delete(e,n){(n=this._normalizeOrigin(n))!=null&&this._values.get(e)?.origin!==n||this._values.delete(e)}has(e,n){return(n=this._normalizeOrigin(n))!=null?this._values.get(e)?.origin===n:this._values.has(e)}isAtOrigin(e,n){return n=this._normalizeOrigin(n),this.has(e,n)&&this.originOf(e)===n}isBelowOrigin(e,n){return n=this._normalizeOrigin(n),!this.has(e)||this.originOf(e)<n}forEach(e){this._values.forEach(({value:n},r)=>e(n,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},Kje=class{constructor(e,n){this.value=e,this.origin=n}};function Yje(t,e,n){e.keys().forEach(i=>{n.set(i,e.get(i),0)});const r=t.metadata;Object.keys(r).forEach(i=>{t.internalGet(i)&&n.set(i,t.internalGet(i),0)})}function Xje(t,e,n){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&DQ(r,n))return!0}else for(const i of r)if(i===e||i.includes(".")&&i.startsWith(e)&&DQ(i,n))return!0;return!1}function Zje(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function Jje(t,e,n,r,i){let s=C4(e[n],i);Zje(s)&&(t[n]=!0);for(const o of Object.getOwnPropertyNames(e))s=C4(e[o],i),Xje(s,n,r)&&(t[o]=!0)}function Qje(t,e,n,r){const i=n.metadata,s=bje(i[e],r),o=s?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&n.set(e,a)}const ape={origin:"service"};function e8e(t,e,n=ape){if(!e||typeof e!="object")return;const r=Og(t),i=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))Jje(s,i,o,e,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=C4(i[o],n).read,l=a?.source;let c;c=l&&typeof l=="string"?sI(e,l):e[o],a?.reader&&(c=a.reader.call(t,c,e,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||Qje(t,o,r,n)}r.setDefaultOrigin("user")}function gIt(t,e,n,r=ape){const i={...r,messages:[]};n(i),i.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function t8e(t,e,n,r,i){const s={};return e.write?.writer?.call(t,r,s,n,i),s}function lpe(t,e,n,r,i,s){if(!r?.write)return!1;const o=fd(t,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&s?.layerContainerType&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Xe("web-document-write:property-required",`Missing value for required property '${n}' on '${t.declaredClass}'`,{propertyName:n,target:t});return a&&s?.messages?s.messages.push(a):a&&!s&&Tt.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(n)===0)&&n8e(t,n,s,r,o)||!i.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(n)<QG(s.origin))}function n8e(t,e,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(t,e,n??void 0);return rO(o,i)}return!1}return s===i}function yIt(t,e,n,r){const i=Og(t),s=i.metadata,o=Yfe(s[e],r);return!!o&&lpe(t,i,e,o,n,r)}function r8e(t,e,n){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return JC(e,t.toJSON(n));const r=Og(t),i=r.metadata;for(const s in i){const o=Yfe(i[s],n);if(!lpe(t,r,s,o,void 0,n))continue;const a=fd(t,s),l=t8e(t,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,n);Object.keys(l).length>0&&(e=JC(e,l),n?.resources?.pendingOperations?.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>JC(e,l,()=>"replace-arrays"))),n?.writtenProperties&&n.writtenProperties.push({target:t,propName:s,oldOrigin:v$e(r.store.originOf(s)),newOrigin:n.origin}))}return e}const t0=t=>{const e=t;let n=class extends e{constructor(...r){super(...r);const i=Og(this),s=i.store,o=new qje;i.store=o,Yje(i,s,o)}read(r,i){e8e(this,r,i)}write(r,i){return r8e(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return i8e.call(this,r,i)}};return n=_([ue("esri.core.JSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function i8e(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(t,e),n}const qt=t0(Kt);let s8e=class{constructor(){this._resolver=fc(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(kr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=fc(),n=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||_a(i)||this._resolver.reject(i)}),e.resolve()}};const cpe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._promiseProps=new s8e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(x6e(r)),this._promiseProps.addResolvingPromise(r.promise))}};return n=_([ue("esri.core.Promise")],n),n},uB=cpe(Kt),o8e="not-loaded",a8e="loading",l8e="failed",tee="loaded",c8e=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const u=qG(o,c);this.destroyed&&c(new Xe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{u&&u.remove()})});if(this.loadStatus===o8e){this._set("loadStatus",a8e);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),a}})),this.when(()=>{this._set("loadStatus",tee),this._loadController=null},i=>{this.destroyed||(this._set("loadStatus",l8e),this._set("loadError",i),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=M1(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===tee}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Xe("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return _([E({readOnly:!0})],n.prototype,"loaded",null),_([E({readOnly:!0})],n.prototype,"loadError",void 0),_([E({clonable:!1})],n.prototype,"loadStatus",void 0),_([E({type:[Cd],readOnly:!0})],n.prototype,"loadWarnings",null),n=_([ue("esri.core.Loadable")],n),n},cI=c8e(uB);function qF(t){return!(!t||!t.load)}function _It(t,e,n){return KG(t.map((r,i)=>e.apply(n,[r,i])))}async function u8e(t,e,n){return(await KG(t.map((r,i)=>e.apply(n,[r,i])))).map(r=>r.value)}function hB(t){return{ok:!0,value:t}}function dB(t){return{ok:!1,error:t}}function h8e(t){return t!=null&&t.ok===!0?t.value:null}function d8e(t){return t!=null&&t.ok===!1?t.error:null}async function upe(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return hB(await t)}catch(e){return dB(e)}}async function xIt(t){try{return hB(await t)}catch(e){return sfe(e),dB(e)}}function yO(t,e){return new vm(t,e)}let vm=class extends Kt{get value(){return h8e(this._result)}get error(){return d8e(this._result)}get finished(){return this._result!=null}constructor(e,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=M1(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(i=>{this._result=hB(i),this._cleanup()},i=>{this._result=dB(i),this._cleanup()}),this._abortHandle=uu(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ri(this._abortHandle),this._abortController=null}};_([E()],vm.prototype,"value",null),_([E()],vm.prototype,"error",null),_([E()],vm.prototype,"finished",null),_([E()],vm.prototype,"promise",void 0),_([E()],vm.prototype,"_result",void 0),vm=_([ue("esri.core.asyncUtils.ReactiveTask")],vm);async function hpe(t,e){return await t.load(),f8e(t,e)}async function f8e(t,e){const n=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ot.isCollection(o)?o.forEach(a=>r(a)):qF(o)&&n.push(o))};e(r);let i=null;if(await u8e(n,async s=>{const o=await upe(p8e(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return t}function p8e(t){return"loadAll"in t&&typeof t.loadAll=="function"}function Zn(t,e,n){let r,i;return e===void 0?(i=t,r=[void 0]):typeof e!="string"?(i=t,r=[void 0],n=e):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=sB(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),n&&(c.write.target=n),c.write.writer=a[o]}}}let Ws=class{constructor(e,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=m8e(e),this.apiValues=nee(this._apiToJSON),this.jsonValues=nee(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&Y2(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const n=this._apiToJSON[e];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function m8e(t){const e={};for(const n in t)e[t[n]]=n;return e}function nee(t){const e=[];for(const n in t)e.push(n);return e.sort(),e}function Il(){return function(t,e){return new Ws(t,{ignoreUnknown:!0,...e})}}let fB=class{constructor(e,n,r,i,s,o){this.semiMajorAxis=e,this.flattening=n,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=i,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const rs=new fB(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),wd=new fB(3396190,1/169.8944472236118,23e4,6e4,.111),Dg=new fB(1737400,0,0,0,0);function Bi(t){if(!tr.assetsPath)throw Tt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Xe("assets:path-not-set","config.assetsPath is not set");return eI(tr.assetsPath,t)}let d$,de=null;function dpe(){return!!de}function g8e(){return!!ye("esri-wasm")}function y8e(){return d$||(d$=_e(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Bi(`esri/geometry/support/${e}`)})).then(t=>{vpe(t)}),d$)}const rM={geogToProj(t,e,n){de.ensureCache.prepare();const r=O1(n),i=n===r,s=de.ensureFloat64(r),o=de._pe_geog_to_proj(de.getPointer(t),e,s);return o&&$g(n,e,s,i),o},projGeog(t,e,n,r){switch(r){case Li.PE_TRANSFORM_P_TO_G:return rM.projToGeog(t,e,n);case Li.PE_TRANSFORM_G_TO_P:return rM.geogToProj(t,e,n)}return 0},projToGeog:(t,e,n)=>rM.projToGeogCenter(t,e,n,0),projToGeogCenter(t,e,n,r){de.ensureCache.prepare();const i=O1(n),s=n===i,o=de.ensureFloat64(i),a=de._pe_proj_to_geog_center(de.getPointer(t),e,o,r);return a&&$g(n,e,o,s),a}};let Li=class fr{static init(){fr.PE_BUFFER_MAX=de.PeDefs.prototype.PE_BUFFER_MAX,fr.PE_NAME_MAX=de.PeDefs.prototype.PE_NAME_MAX,fr.PE_MGRS_MAX=de.PeDefs.prototype.PE_MGRS_MAX,fr.PE_USNG_MAX=de.PeDefs.prototype.PE_USNG_MAX,fr.PE_DD_MAX=de.PeDefs.prototype.PE_DD_MAX,fr.PE_DDM_MAX=de.PeDefs.prototype.PE_DDM_MAX,fr.PE_DMS_MAX=de.PeDefs.prototype.PE_DMS_MAX,fr.PE_UTM_MAX=de.PeDefs.prototype.PE_UTM_MAX,fr.PE_PARM_MAX=de.PeDefs.prototype.PE_PARM_MAX,fr.PE_TYPE_NONE=de.PeDefs.prototype.PE_TYPE_NONE,fr.PE_TYPE_GEOGCS=de.PeDefs.prototype.PE_TYPE_GEOGCS,fr.PE_TYPE_PROJCS=de.PeDefs.prototype.PE_TYPE_PROJCS,fr.PE_TYPE_GEOGTRAN=de.PeDefs.prototype.PE_TYPE_GEOGTRAN,fr.PE_TYPE_COORDSYS=de.PeDefs.prototype.PE_TYPE_COORDSYS,fr.PE_TYPE_UNIT=de.PeDefs.prototype.PE_TYPE_UNIT,fr.PE_TYPE_LINUNIT=de.PeDefs.prototype.PE_TYPE_LINUNIT,fr.PE_STR_OPTS_NONE=de.PeDefs.prototype.PE_STR_OPTS_NONE,fr.PE_STR_AUTH_NONE=de.PeDefs.prototype.PE_STR_AUTH_NONE,fr.PE_STR_AUTH_TOP=de.PeDefs.prototype.PE_STR_AUTH_TOP,fr.PE_STR_NAME_CANON=de.PeDefs.prototype.PE_STR_NAME_CANON,fr.PE_STR_FMT_WKT=de.PeDefs.prototype.PE_STR_FMT_WKT,fr.PE_STR_FMT_WKT2=de.PeDefs.prototype.PE_STR_FMT_WKT2,fr.PE_PARM_X0=de.PeDefs.prototype.PE_PARM_X0,fr.PE_PARM_ND=de.PeDefs.prototype.PE_PARM_ND,fr.PE_TRANSFORM_1_TO_2=de.PeDefs.prototype.PE_TRANSFORM_1_TO_2,fr.PE_TRANSFORM_2_TO_1=de.PeDefs.prototype.PE_TRANSFORM_2_TO_1,fr.PE_TRANSFORM_P_TO_G=de.PeDefs.prototype.PE_TRANSFORM_P_TO_G,fr.PE_TRANSFORM_G_TO_P=de.PeDefs.prototype.PE_TRANSFORM_G_TO_P,fr.PE_HORIZON_RECT=de.PeDefs.prototype.PE_HORIZON_RECT,fr.PE_HORIZON_POLY=de.PeDefs.prototype.PE_HORIZON_POLY,fr.PE_HORIZON_LINE=de.PeDefs.prototype.PE_HORIZON_LINE,fr.PE_HORIZON_DELTA=de.PeDefs.prototype.PE_HORIZON_DELTA}},fpe=null;const ree={},iee={},see=t=>{const e=t.getType();switch(e){case Li.PE_TYPE_GEOGCS:t=de.castObject(t,de.PeGeogcs);break;case Li.PE_TYPE_PROJCS:t=de.castObject(t,de.PeProjcs);break;case Li.PE_TYPE_GEOGTRAN:t=de.castObject(t,de.PeGeogtran);break;default:e&Li.PE_TYPE_UNIT&&(t=de.castObject(t,de.PeUnit))}return t},j_={initialize(){de.PeFactory.prototype.initialize(null)},coordsys:t=>j_.factoryByType(Li.PE_TYPE_COORDSYS,t),factoryByType(t,e){let n=null,r=ree[t];if(r||(r={},ree[t]=r),r.hasOwnProperty(String(e))&&(n=r[e],de.compare(n,de.NULL)&&(n=null)),!n){const i=de.PeFactory.prototype.factoryByType(t,e);de.compare(i,de.NULL)||(n=see(i),r[e]=n)}return n},fromString(t,e){let n=null,r=iee[t];if(r||(r={},iee[t]=r),r.hasOwnProperty(e)&&(n=r[e],de.compare(n,de.NULL)&&(n=null)),!n){const i=de.PeFactory.prototype.fromString(t,e);de.compare(i,de.NULL)||(n=see(i),r[e]=n)}return n},geogcs:t=>j_.factoryByType(Li.PE_TYPE_GEOGCS,t),geogtran:t=>j_.factoryByType(Li.PE_TYPE_GEOGTRAN,t),getCode:t=>de.PeFactory.prototype.getCode(t),projcs:t=>j_.factoryByType(Li.PE_TYPE_PROJCS,t),unit:t=>j_.factoryByType(Li.PE_TYPE_UNIT,t)};let oee,ppe=null;const pB={PE_GTLIST_OPTS_COMMON:0,init(){pB.PE_GTLIST_OPTS_COMMON=de.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,oee=de._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,n,r,i,s){let o=null;const a=new de.PeInteger(s);try{const l=de.PeGTlistExtended.prototype.getGTlist(t,e,n,r,i,a);if((s=a.val)&&(o=[l],s>1)){const c=de.getPointer(l);for(let u=1;u<s;u++)o.push(de.wrapPointer(c+oee*u,de.PeGTlistExtendedEntry))}}finally{de.destroy(a)}return o}},v8e={destroy(t){if(t?.length){for(const e of t)zu(e),e.getEntries().forEach(n=>{zu(n);const r=n.getGeogtran();zu(r),r.getParameters().forEach(zu),[r.getGeogcs1(),r.getGeogcs2()].forEach(i=>{zu(i);const s=i.getDatum();zu(s),zu(s.getSpheroid()),zu(i.getPrimem()),zu(i.getUnit())})});de.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},_8e={geogToGeog(t,e,n,r,i){de.ensureCache.prepare();const s=O1(n),o=n===s,a=de.ensureFloat64(s);let l=0;r&&(l=de.ensureFloat64(r));const c=de._pe_geog_to_geog(de.getPointer(t),e,a,l,i);return c&&$g(n,e,a,o),c}},x8e={geodesicCoordinate(t,e,n,r,i,s,o,a){de.PeLineType.prototype.geodesic_coordinate(t,e,n,r,i,s,o,a)},geodeticCoordinate(t,e,n,r,i,s,o,a,l){de.PeLineType.prototype.geodetic_coordinate(t,e,n,r,i,s,o,a,l)},geodeticDistance(t,e,n,r,i,s,o,a,l,c){de.PeLineType.prototype.geodetic_distance(t,e,n,r,i,s,o,a,l,c)},greatEllipticDistance(t,e,n,r,i,s,o,a,l){de.PeLineType.prototype.great_elliptic_distance(t,e,n,r,i,s,o,a,l)}},w8e={phiToEta:(t,e)=>de.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>de.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>de.PeMath.prototype.phi_to_phig(t,e),q:(t,e,n)=>de.PeMath.prototype.q(t,e,n),q90:(t,e)=>de.PeMath.prototype.q90(t,e)},f$=(t,e,n,r,i,s)=>{let o,a;switch(de.ensureCache.prepare(),t){case"dd":o=de._pe_geog_to_dd,a=Li.PE_DD_MAX;break;case"ddm":o=de._pe_geog_to_ddm,a=Li.PE_DDM_MAX;break;case"dms":o=de._pe_geog_to_dms,a=Li.PE_DMS_MAX}let l=0;e&&(l=de.getPointer(e));const c=O1(r),u=de.ensureFloat64(c),h=vO(n,a),f=o(l,n,u,i,de.ensureInt32(h));if(f)for(let g=0;g<n;g++)s[g]=de.UTF8ToString(h[g]);return f},p$=(t,e,n,r,i)=>{let s;switch(de.ensureCache.prepare(),t){case"dd":s=de._pe_dd_to_geog;break;case"ddm":s=de._pe_ddm_to_geog;break;case"dms":s=de._pe_dms_to_geog}let o=0;e&&(o=de.getPointer(e));const a=r.map(h=>de.ensureString(h)),l=de.ensureInt32(a),c=de.ensureFloat64(new Array(2*n)),u=s(o,n,l,c);return u&&$g(i,n,c),u},b8e={geogToDms:(t,e,n,r,i)=>f$("dms",t,e,n,r,i),dmsToGeog:(t,e,n,r)=>p$("dms",t,e,n,r),geogToDdm:(t,e,n,r,i)=>f$("ddm",t,e,n,r,i),ddmToGeog:(t,e,n,r)=>p$("ddm",t,e,n,r),geogToDd:(t,e,n,r,i)=>f$("dd",t,e,n,r,i),ddToGeog:(t,e,n,r)=>p$("dd",t,e,n,r)};let mpe=class F_{static init(){F_.PE_MGRS_STYLE_NEW=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,F_.PE_MGRS_STYLE_OLD=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,F_.PE_MGRS_STYLE_AUTO=de.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,F_.PE_MGRS_180_ZONE_1_PLUS=de.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,F_.PE_MGRS_ADD_SPACES=de.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,n,r,i,s,o,a){de.ensureCache.prepare();let l=0;e&&(l=de.getPointer(e));const c=O1(r),u=de.ensureFloat64(c),h=vO(n,Li.PE_MGRS_MAX),f=de.ensureInt32(h),g=de._pe_geog_to_mgrs_extended(l,n,u,i,s,o,f);if(g)for(let v=0;v<n;v++)a[v]=de.UTF8ToString(h[v]);return g}static mgrsToGeogExtended(e,n,r,i,s){de.ensureCache.prepare();let o=0;e&&(o=de.getPointer(e));const a=r.map(h=>de.ensureString(h)),l=de.ensureInt32(a),c=de.ensureFloat64(new Array(2*n)),u=de._pe_mgrs_to_geog_extended(o,n,l,i,c);return u&&$g(s,n,c),u}};const E8e={geogToUsng(t,e,n,r,i,s,o){de.ensureCache.prepare();let a=0;t&&(a=de.getPointer(t));const l=O1(n),c=de.ensureFloat64(l),u=vO(e,Li.PE_MGRS_MAX),h=de.ensureInt32(u),f=de._pe_geog_to_usng(a,e,c,r,i,s,h);if(f)for(let g=0;g<e;g++)o[g]=de.UTF8ToString(u[g]);return f},usngToGeog(t,e,n,r){de.ensureCache.prepare();let i=0;t&&(i=de.getPointer(t));const s=n.map(c=>de.ensureString(c)),o=de.ensureInt32(s),a=de.ensureFloat64(new Array(2*e)),l=de._pe_usng_to_geog(i,e,o,a);return l&&$g(r,e,a),l}};let gpe=class iM{static init(){iM.PE_UTM_OPTS_NONE=de.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,iM.PE_UTM_OPTS_ADD_SPACES=de.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,iM.PE_UTM_OPTS_NS=de.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,n,r,i,s){de.ensureCache.prepare();let o=0;e&&(o=de.getPointer(e));const a=O1(r),l=de.ensureFloat64(a),c=vO(n,Li.PE_UTM_MAX),u=de.ensureInt32(c),h=de._pe_geog_to_utm(o,n,l,i,u);if(h)for(let f=0;f<n;f++)s[f]=de.UTF8ToString(c[f]);return h}static utmToGeog(e,n,r,i,s){de.ensureCache.prepare();let o=0;e&&(o=de.getPointer(e));const a=r.map(h=>de.ensureString(h)),l=de.ensureInt32(a),c=de.ensureFloat64(new Array(2*n)),u=de._pe_utm_to_geog(o,n,l,i,c);return u&&$g(s,n,c),u}};var al;let ype=(al=class{static init(){al.PE_PCSINFO_OPTION_NONE=de.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,al.PE_PCSINFO_OPTION_DOMAIN=de.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,al.PE_POLE_OUTSIDE_BOUNDARY=de.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,al.PE_POLE_POINT=de.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,n=al.PE_PCSINFO_OPTION_DOMAIN){let r=null,i=null;return al.cache.has(e)&&(i=al.cache.get(e),i[n]&&(r=i[n])),r||(r=de.PePCSInfo.prototype.generate(e,n),i||(i=[],al.cache.set(e,i)),i[n]=r),r}},al.cache=new Map,al);const S8e={versionString:()=>de.PeVersion.prototype.version_string()};function vpe(t){function e(s,o,a){s[o]=a(s[o])}de=t,Li.init(),pB.init(),mpe.init(),gpe.init(),ype.init(),fpe=class extends de.PeDouble{constructor(s=NaN){super(s)}destroy(){de.destroy(this)}[Symbol.dispose](){this.destroy()}},ppe=class extends de.PeGCSExtent{destroy(){de.destroy(this)}[Symbol.dispose](){this.destroy()}};const n=[de.PeAngunit,de.PeDatum,de.PeGeogcs,de.PeGeogtran,de.PeObject,de.PeParameter,de.PePrimem,de.PeProjcs,de.PeSpheroid,de.PeUnit];for(const s of n)e(s.prototype,"getName",o=>function(){return o.call(this,new Array(Li.PE_NAME_MAX))});for(const s of[de.PeGeogtran,de.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array(Li.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=de.getValue(l,"*");a[c]=u?de.wrapPointer(u,de.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(de.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return $g(l,a,s.call(this),o),l}),e(de.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=de._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!de.compare(l,de.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=de.getPointer(l);for(let h=1;h<c;h++)a.push(de.wrapPointer(u+o*h,de.PeGTlistExtendedGTs))}}return a}});const r=de._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!de.compare(l,de.NULL)){a=[l];const c=l.getNump();if(c>1){const u=de.getPointer(l);for(let h=1;h<c;h++)a.push(de.wrapPointer(u+r*h,de.PeHorizon))}}return o.set(s,a),a};e(de.PeProjcs.prototype,"horizonGcsGenerate",i),e(de.PeProjcs.prototype,"horizonPcsGenerate",i),de.PeObject.prototype.toString=function(s=Li.PE_STR_OPTS_NONE){de.ensureCache.prepare();const o=de.getPointer(this),a=de.ensureInt8(new Array(Li.PE_BUFFER_MAX));return de.UTF8ToString(de._pe_object_to_string_ext(o,s,a))},de.PeGeogcs.prototype.destroy=function(){this.Delete(),zu(this),this.ptr=0},de.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},de.PeProjcs.prototype.destroy=function(){this.Delete(),zu(this),this.ptr=0},de.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function zu(t){if(!t)return;const e=de.getClass(t);if(!e)return;const n=de.getCache(e);if(!n)return;const r=de.getPointer(t);r&&delete n[r]}function vO(t,e){const n=[],r=new Array(e);for(let i=0;i<t;i++)n.push(de.ensureInt8(r));return n}function O1(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function $g(t,e,n,r=!1){if(r)for(let i=0;i<2*e;i++)t[i]=de.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=t.length===0;for(let s=0;s<e;s++)i&&(t[s]=new Array(2)),t[s][0]=de.getValue(n,"double"),t[s][1]=de.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}const SIt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:rM,PeDefs:Li,get PeDouble(){return fpe},PeFactory:j_,get PeGCSExtent(){return ppe},PeGTTransformations:_8e,PeGTlistExtended:pB,PeGTlistExtendedEntry:v8e,PeLineType:x8e,PeMath:w8e,PeNotationDms:b8e,PeNotationMgrs:mpe,PeNotationUsng:E8e,PeNotationUtm:gpe,PePCSInfo:ype,PeVersion:S8e,_init:vpe,get _pe(){return de},isLoaded:dpe,isSupported:g8e,load:y8e},Symbol.toStringTag,{value:"Module"}));let y;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(y=2e3;y<=2045;y++)H[y]=0;for(y=2056;y<=2065;y++)H[y]=0;for(y=2067;y<=2135;y++)H[y]=0;for(y=2137;y<=2154;y++)H[y]=0;for(y=2161;y<=2170;y++)H[y]=0;for(y=2172;y<=2193;y++)H[y]=0;for(y=2195;y<=2198;y++)H[y]=0;for(y=2200;y<=2203;y++)H[y]=0;for(y=2205;y<=2217;y++)H[y]=0;for(y=2222;y<=2224;y++)H[y]=1;for(y=2225;y<=2250;y++)H[y]=2;for(y=2251;y<=2253;y++)H[y]=1;for(y=2257;y<=2264;y++)H[y]=2;for(y=2274;y<=2279;y++)H[y]=2;for(y=2280;y<=2282;y++)H[y]=1;for(y=2283;y<=2289;y++)H[y]=2;for(y=2290;y<=2292;y++)H[y]=0;for(y=2308;y<=2313;y++)H[y]=0;for(y=2315;y<=2491;y++)H[y]=0;for(y=2494;y<=2866;y++)H[y]=0;for(y=2867;y<=2869;y++)H[y]=1;for(y=2870;y<=2888;y++)H[y]=2;for(y=2891;y<=2895;y++)H[y]=2;for(y=2896;y<=2898;y++)H[y]=1;for(y=2902;y<=2908;y++)H[y]=2;for(y=2915;y<=2920;y++)H[y]=2;for(y=2921;y<=2923;y++)H[y]=1;for(y=2924;y<=2930;y++)H[y]=2;for(y=2931;y<=2962;y++)H[y]=0;for(y=2964;y<=2968;y++)H[y]=2;for(y=2969;y<=2973;y++)H[y]=0;for(y=2975;y<=2991;y++)H[y]=0;for(y=2995;y<=3051;y++)H[y]=0;for(y=3054;y<=3079;y++)H[y]=0;for(y=3081;y<=3088;y++)H[y]=0;for(y=3092;y<=3101;y++)H[y]=0;for(y=3106;y<=3138;y++)H[y]=0;for(y=3146;y<=3151;y++)H[y]=0;for(y=3153;y<=3166;y++)H[y]=0;for(y=3168;y<=3172;y++)H[y]=0;for(y=3174;y<=3203;y++)H[y]=0;for(y=3294;y<=3358;y++)H[y]=0;for(y=3367;y<=3403;y++)H[y]=0;for(y=3408;y<=3416;y++)H[y]=0;for(y=3417;y<=3438;y++)H[y]=2;for(y=3441;y<=3446;y++)H[y]=2;for(y=3447;y<=3450;y++)H[y]=0;for(y=3451;y<=3459;y++)H[y]=2;for(y=3460;y<=3478;y++)H[y]=0;for(y=3554;y<=3559;y++)H[y]=0;for(y=3560;y<=3570;y++)H[y]=2;for(y=3571;y<=3581;y++)H[y]=0;for(y=3594;y<=3597;y++)H[y]=0;for(y=3601;y<=3604;y++)H[y]=0;for(y=3637;y<=3639;y++)H[y]=0;for(y=3665;y<=3667;y++)H[y]=0;for(y=3693;y<=3695;y++)H[y]=0;for(y=3701;y<=3727;y++)H[y]=0;for(y=3728;y<=3739;y++)H[y]=2;for(y=3740;y<=3751;y++)H[y]=0;for(y=3753;y<=3760;y++)H[y]=2;for(y=3761;y<=3773;y++)H[y]=0;for(y=3775;y<=3777;y++)H[y]=0;for(y=3779;y<=3781;y++)H[y]=0;for(y=3783;y<=3785;y++)H[y]=0;for(y=3788;y<=3791;y++)H[y]=0;for(y=3797;y<=3802;y++)H[y]=0;for(y=3814;y<=3816;y++)H[y]=0;for(y=3825;y<=3829;y++)H[y]=0;for(y=3832;y<=3841;y++)H[y]=0;for(y=3844;y<=3852;y++)H[y]=0;for(y=3873;y<=3885;y++)H[y]=0;for(y=3890;y<=3893;y++)H[y]=0;for(y=3907;y<=3912;y++)H[y]=0;for(y=3942;y<=3950;y++)H[y]=0;for(y=3968;y<=3970;y++)H[y]=0;for(y=3973;y<=3976;y++)H[y]=0;for(y=3986;y<=3989;y++)H[y]=0;for(y=3994;y<=3997;y++)H[y]=0;for(y=4048;y<=4051;y++)H[y]=0;for(y=4056;y<=4063;y++)H[y]=0;for(y=4093;y<=4096;y++)H[y]=0;for(y=4390;y<=4398;y++)H[y]=0;for(y=4399;y<=4413;y++)H[y]=2;for(y=4418;y<=4433;y++)H[y]=2;for(y=4455;y<=4457;y++)H[y]=2;for(y=4484;y<=4489;y++)H[y]=0;for(y=4491;y<=4554;y++)H[y]=0;for(y=4568;y<=4589;y++)H[y]=0;for(y=4652;y<=4656;y++)H[y]=0;for(y=4766;y<=4800;y++)H[y]=0;for(y=5014;y<=5016;y++)H[y]=0;for(y=5069;y<=5072;y++)H[y]=0;for(y=5105;y<=5130;y++)H[y]=0;for(y=5167;y<=5188;y++)H[y]=0;for(y=5253;y<=5259;y++)H[y]=0;for(y=5269;y<=5275;y++)H[y]=0;for(y=5292;y<=5311;y++)H[y]=0;for(y=5329;y<=5331;y++)H[y]=0;for(y=5343;y<=5349;y++)H[y]=0;for(y=5355;y<=5357;y++)H[y]=0;for(y=5387;y<=5389;y++)H[y]=0;for(y=5459;y<=5463;y++)H[y]=0;for(y=5479;y<=5482;y++)H[y]=0;for(y=5518;y<=5520;y++)H[y]=0;for(y=5530;y<=5539;y++)H[y]=0;for(y=5550;y<=5552;y++)H[y]=0;for(y=5562;y<=5583;y++)H[y]=0;for(y=5623;y<=5625;y++)H[y]=2;for(y=5631;y<=5639;y++)H[y]=0;for(y=5649;y<=5653;y++)H[y]=0;for(y=5663;y<=5680;y++)H[y]=0;for(y=5682;y<=5685;y++)H[y]=0;for(y=5875;y<=5877;y++)H[y]=0;for(y=5896;y<=5899;y++)H[y]=0;for(y=5921;y<=5940;y++)H[y]=0;for(y=6050;y<=6125;y++)H[y]=0;for(y=6244;y<=6275;y++)H[y]=0;for(y=6328;y<=6348;y++)H[y]=0;for(y=6350;y<=6356;y++)H[y]=0;for(y=6366;y<=6372;y++)H[y]=0;for(y=6381;y<=6387;y++)H[y]=0;for(y=6393;y<=6404;y++)H[y]=0;for(y=6480;y<=6483;y++)H[y]=0;for(y=6511;y<=6514;y++)H[y]=0;for(y=6579;y<=6581;y++)H[y]=0;for(y=6619;y<=6624;y++)H[y]=0;for(y=6625;y<=6627;y++)H[y]=2;for(y=6628;y<=6632;y++)H[y]=0;for(y=6634;y<=6637;y++)H[y]=0;for(y=6669;y<=6692;y++)H[y]=0;for(y=6707;y<=6709;y++)H[y]=0;for(y=6720;y<=6723;y++)H[y]=0;for(y=6732;y<=6738;y++)H[y]=0;for(y=6931;y<=6933;y++)H[y]=0;for(y=6956;y<=6959;y++)H[y]=0;for(y=7005;y<=7007;y++)H[y]=0;for(y=7057;y<=7070;y++)H[y]=2;for(y=7074;y<=7082;y++)H[y]=0;for(y=7109;y<=7118;y++)H[y]=0;for(y=7119;y<=7127;y++)H[y]=1;for(y=7374;y<=7376;y++)H[y]=0;for(y=7528;y<=7586;y++)H[y]=0;for(y=7587;y<=7645;y++)H[y]=2;for(y=7692;y<=7696;y++)H[y]=0;for(y=7755;y<=7787;y++)H[y]=0;for(y=7791;y<=7795;y++)H[y]=0;for(y=7799;y<=7801;y++)H[y]=0;for(y=7803;y<=7805;y++)H[y]=0;for(y=7825;y<=7831;y++)H[y]=0;for(y=7845;y<=7859;y++)H[y]=0;for(y=8013;y<=8032;y++)H[y]=0;for(y=8065;y<=8068;y++)H[y]=1;for(y=8518;y<=8529;y++)H[y]=2;for(y=8533;y<=8536;y++)H[y]=2;for(y=8538;y<=8540;y++)H[y]=2;for(y=8677;y<=8679;y++)H[y]=0;for(y=8836;y<=8840;y++)H[y]=0;for(y=8857;y<=8859;y++)H[y]=0;for(y=8908;y<=8910;y++)H[y]=0;for(y=9154;y<=9159;y++)H[y]=0;for(y=9205;y<=9218;y++)H[y]=0;for(y=9271;y<=9273;y++)H[y]=0;for(y=9295;y<=9297;y++)H[y]=0;for(y=9356;y<=9360;y++)H[y]=0;for(y=9404;y<=9407;y++)H[y]=0;for(y=9476;y<=9482;y++)H[y]=0;for(y=9487;y<=9494;y++)H[y]=0;for(y=9697;y<=9699;y++)H[y]=0;for(y=9821;y<=9865;y++)H[y]=0;for(y=10285;y<=10291;y++)H[y]=0;for(y=10314;y<=10317;y++)H[y]=0;for(y=10448;y<=10465;y++)H[y]=0;for(y=10726;y<=10729;y++)H[y]=0;for(y=10731;y<=10733;y++)H[y]=0;for(y=11114;y<=11118;y++)H[y]=0;for(y=20004;y<=20032;y++)H[y]=0;for(y=20047;y<=20049;y++)H[y]=0;for(y=20062;y<=20092;y++)H[y]=0;for(y=20135;y<=20138;y++)H[y]=0;for(y=20248;y<=20258;y++)H[y]=0;for(y=20348;y<=20358;y++)H[y]=0;for(y=20436;y<=20440;y++)H[y]=0;for(y=20822;y<=20824;y++)H[y]=0;for(y=20904;y<=20932;y++)H[y]=0;for(y=20934;y<=20936;y++)H[y]=0;for(y=21004;y<=21032;y++)H[y]=0;for(y=21035;y<=21037;y++)H[y]=0;for(y=21095;y<=21097;y++)H[y]=0;for(y=21148;y<=21150;y++)H[y]=0;for(y=21207;y<=21264;y++)H[y]=0;for(y=21307;y<=21364;y++)H[y]=0;for(y=21413;y<=21423;y++)H[y]=0;for(y=21453;y<=21463;y++)H[y]=0;for(y=21473;y<=21483;y++)H[y]=0;for(y=21780;y<=21782;y++)H[y]=0;for(y=21891;y<=21894;y++)H[y]=0;for(y=21896;y<=21899;y++)H[y]=0;for(y=22171;y<=22177;y++)H[y]=0;for(y=22181;y<=22187;y++)H[y]=0;for(y=22191;y<=22197;y++)H[y]=0;for(y=22207;y<=22222;y++)H[y]=0;for(y=22229;y<=22232;y++)H[y]=0;for(y=22234;y<=22236;y++)H[y]=0;for(y=22243;y<=22250;y++)H[y]=0;for(y=22262;y<=22265;y++)H[y]=0;for(y=22307;y<=22322;y++)H[y]=0;for(y=22348;y<=22357;y++)H[y]=0;for(y=22407;y<=22422;y++)H[y]=0;for(y=22462;y<=22465;y++)H[y]=0;for(y=22521;y<=22525;y++)H[y]=0;for(y=22607;y<=22622;y++)H[y]=0;for(y=22641;y<=22646;y++)H[y]=0;for(y=22648;y<=22657;y++)H[y]=0;for(y=22707;y<=22722;y++)H[y]=0;for(y=22762;y<=22765;y++)H[y]=0;for(y=22807;y<=22822;y++)H[y]=0;for(y=22991;y<=22994;y++)H[y]=0;for(y=23028;y<=23038;y++)H[y]=0;for(y=23301;y<=23333;y++)H[y]=2;for(y=23830;y<=23853;y++)H[y]=0;for(y=23866;y<=23872;y++)H[y]=0;for(y=23877;y<=23884;y++)H[y]=0;for(y=23886;y<=23894;y++)H[y]=0;for(y=23946;y<=23948;y++)H[y]=0;for(y=24311;y<=24313;y++)H[y]=0;for(y=24342;y<=24347;y++)H[y]=0;for(y=24370;y<=24374;y++)H[y]=10;for(y=24375;y<=24381;y++)H[y]=0;for(y=24718;y<=24721;y++)H[y]=0;for(y=24817;y<=24821;y++)H[y]=0;for(y=24877;y<=24882;y++)H[y]=0;for(y=24891;y<=24893;y++)H[y]=0;for(y=25391;y<=25395;y++)H[y]=0;for(y=25828;y<=25838;y++)H[y]=0;for(y=26191;y<=26195;y++)H[y]=0;for(y=26391;y<=26393;y++)H[y]=0;for(y=26701;y<=26722;y++)H[y]=0;for(y=26729;y<=26799;y++)H[y]=2;for(y=26801;y<=26803;y++)H[y]=2;for(y=26811;y<=26813;y++)H[y]=2;for(y=26847;y<=26870;y++)H[y]=2;for(y=26891;y<=26899;y++)H[y]=0;for(y=26901;y<=26923;y++)H[y]=0;for(y=26929;y<=26946;y++)H[y]=0;for(y=26948;y<=26998;y++)H[y]=0;for(y=27037;y<=27040;y++)H[y]=0;for(y=27205;y<=27232;y++)H[y]=0;for(y=27258;y<=27260;y++)H[y]=0;for(y=27391;y<=27398;y++)H[y]=0;for(y=27561;y<=27564;y++)H[y]=0;for(y=27571;y<=27574;y++)H[y]=0;for(y=27581;y<=27584;y++)H[y]=0;for(y=27591;y<=27594;y++)H[y]=0;for(y=27700;y<=27707;y++)H[y]=0;for(y=28191;y<=28193;y++)H[y]=0;for(y=28348;y<=28358;y++)H[y]=0;for(y=28402;y<=28432;y++)H[y]=0;for(y=28462;y<=28492;y++)H[y]=0;for(y=29118;y<=29122;y++)H[y]=0;for(y=29168;y<=29172;y++)H[y]=0;for(y=29177;y<=29185;y++)H[y]=0;for(y=29187;y<=29195;y++)H[y]=0;for(y=29900;y<=29903;y++)H[y]=0;for(y=30161;y<=30179;y++)H[y]=0;for(y=30491;y<=30494;y++)H[y]=0;for(y=30729;y<=30732;y++)H[y]=0;for(y=31251;y<=31259;y++)H[y]=0;for(y=31265;y<=31268;y++)H[y]=0;for(y=31275;y<=31279;y++)H[y]=0;for(y=31281;y<=31297;y++)H[y]=0;for(y=31461;y<=31469;y++)H[y]=0;for(y=31491;y<=31495;y++)H[y]=0;for(y=31917;y<=31922;y++)H[y]=0;for(y=31965;y<=32e3;y++)H[y]=0;for(y=32001;y<=32003;y++)H[y]=2;for(y=32005;y<=32031;y++)H[y]=2;for(y=32033;y<=32060;y++)H[y]=2;for(y=32064;y<=32067;y++)H[y]=2;for(y=32074;y<=32077;y++)H[y]=2;for(y=32081;y<=32086;y++)H[y]=0;for(y=32107;y<=32130;y++)H[y]=0;for(y=32133;y<=32159;y++)H[y]=0;for(y=32164;y<=32167;y++)H[y]=2;for(y=32180;y<=32199;y++)H[y]=0;for(y=32201;y<=32260;y++)H[y]=0;for(y=32301;y<=32360;y++)H[y]=0;for(y=32401;y<=32460;y++)H[y]=0;for(y=32501;y<=32560;y++)H[y]=0;for(y=32601;y<=32662;y++)H[y]=0;for(y=32664;y<=32667;y++)H[y]=2;for(y=32701;y<=32761;y++)H[y]=0;for(y=53001;y<=53004;y++)H[y]=0;for(y=53008;y<=53019;y++)H[y]=0;for(y=53021;y<=53032;y++)H[y]=0;for(y=53034;y<=53037;y++)H[y]=0;for(y=53042;y<=53046;y++)H[y]=0;for(y=53074;y<=53080;y++)H[y]=0;for(y=54001;y<=54004;y++)H[y]=0;for(y=54008;y<=54019;y++)H[y]=0;for(y=54021;y<=54032;y++)H[y]=0;for(y=54034;y<=54037;y++)H[y]=0;for(y=54042;y<=54046;y++)H[y]=0;for(y=54048;y<=54053;y++)H[y]=0;for(y=54074;y<=54080;y++)H[y]=0;for(y=54090;y<=54096;y++)H[y]=0;for(y=54098;y<=54101;y++)H[y]=0;for(y=65161;y<=65163;y++)H[y]=0;for(y=102001;y<=102040;y++)H[y]=0;for(y=102042;y<=102063;y++)H[y]=0;for(y=102065;y<=102067;y++)H[y]=0;for(y=102070;y<=102117;y++)H[y]=0;for(y=102122;y<=102216;y++)H[y]=0;for(y=102221;y<=102377;y++)H[y]=0;for(y=102382;y<=102388;y++)H[y]=0;for(y=102389;y<=102398;y++)H[y]=2;for(y=102399;y<=102444;y++)H[y]=0;for(y=102445;y<=102447;y++)H[y]=2;for(y=102448;y<=102458;y++)H[y]=0;for(y=102459;y<=102468;y++)H[y]=2;for(y=102469;y<=102499;y++)H[y]=0;for(y=102500;y<=102519;y++)H[y]=1;for(y=102520;y<=102524;y++)H[y]=0;for(y=102525;y<=102529;y++)H[y]=2;for(y=102530;y<=102588;y++)H[y]=0;for(y=102590;y<=102598;y++)H[y]=0;for(y=102601;y<=102603;y++)H[y]=0;for(y=102605;y<=102628;y++)H[y]=0;for(y=102629;y<=102646;y++)H[y]=2;for(y=102648;y<=102700;y++)H[y]=2;for(y=102701;y<=102703;y++)H[y]=0;for(y=102707;y<=102730;y++)H[y]=2;for(y=102733;y<=102758;y++)H[y]=2;for(y=102767;y<=102900;y++)H[y]=0;for(y=102901;y<=102933;y++)H[y]=2;for(y=102934;y<=102950;y++)H[y]=13;for(y=102951;y<=102963;y++)H[y]=0;for(y=102965;y<=102969;y++)H[y]=0;for(y=102971;y<=102973;y++)H[y]=0;for(y=102975;y<=102989;y++)H[y]=0;for(y=102990;y<=102992;y++)H[y]=1;for(y=102997;y<=103002;y++)H[y]=0;for(y=103003;y<=103008;y++)H[y]=2;for(y=103009;y<=103011;y++)H[y]=0;for(y=103012;y<=103014;y++)H[y]=2;for(y=103019;y<=103021;y++)H[y]=0;for(y=103022;y<=103024;y++)H[y]=2;for(y=103029;y<=103031;y++)H[y]=0;for(y=103032;y<=103034;y++)H[y]=2;for(y=103065;y<=103068;y++)H[y]=0;for(y=103074;y<=103076;y++)H[y]=0;for(y=103077;y<=103079;y++)H[y]=1;for(y=103080;y<=103082;y++)H[y]=0;for(y=103083;y<=103085;y++)H[y]=2;for(y=103090;y<=103093;y++)H[y]=0;for(y=103097;y<=103099;y++)H[y]=0;for(y=103100;y<=103102;y++)H[y]=2;for(y=103107;y<=103109;y++)H[y]=0;for(y=103110;y<=103112;y++)H[y]=2;for(y=103113;y<=103116;y++)H[y]=0;for(y=103117;y<=103120;y++)H[y]=2;for(y=103153;y<=103157;y++)H[y]=0;for(y=103158;y<=103162;y++)H[y]=2;for(y=103163;y<=103165;y++)H[y]=0;for(y=103166;y<=103168;y++)H[y]=1;for(y=103169;y<=103171;y++)H[y]=2;for(y=103186;y<=103188;y++)H[y]=0;for(y=103189;y<=103191;y++)H[y]=2;for(y=103192;y<=103195;y++)H[y]=0;for(y=103196;y<=103199;y++)H[y]=2;for(y=103200;y<=103224;y++)H[y]=0;for(y=103225;y<=103227;y++)H[y]=1;for(y=103232;y<=103237;y++)H[y]=0;for(y=103238;y<=103243;y++)H[y]=2;for(y=103244;y<=103246;y++)H[y]=0;for(y=103247;y<=103249;y++)H[y]=2;for(y=103254;y<=103256;y++)H[y]=0;for(y=103257;y<=103259;y++)H[y]=2;for(y=103264;y<=103266;y++)H[y]=0;for(y=103267;y<=103269;y++)H[y]=2;for(y=103300;y<=103375;y++)H[y]=0;for(y=103381;y<=103383;y++)H[y]=0;for(y=103384;y<=103386;y++)H[y]=1;for(y=103387;y<=103389;y++)H[y]=0;for(y=103390;y<=103392;y++)H[y]=2;for(y=103397;y<=103399;y++)H[y]=0;for(y=103400;y<=103471;y++)H[y]=2;for(y=103476;y<=103478;y++)H[y]=0;for(y=103479;y<=103481;y++)H[y]=2;for(y=103486;y<=103488;y++)H[y]=0;for(y=103489;y<=103491;y++)H[y]=2;for(y=103492;y<=103495;y++)H[y]=0;for(y=103496;y<=103499;y++)H[y]=2;for(y=103528;y<=103543;y++)H[y]=0;for(y=103544;y<=103548;y++)H[y]=2;for(y=103549;y<=103551;y++)H[y]=0;for(y=103552;y<=103554;y++)H[y]=1;for(y=103555;y<=103557;y++)H[y]=2;for(y=103558;y<=103560;y++)H[y]=0;for(y=103571;y<=103573;y++)H[y]=0;for(y=103574;y<=103576;y++)H[y]=2;for(y=103577;y<=103580;y++)H[y]=0;for(y=103581;y<=103583;y++)H[y]=2;for(y=103595;y<=103694;y++)H[y]=0;for(y=103696;y<=103699;y++)H[y]=0;for(y=103700;y<=103793;y++)H[y]=2;for(y=103794;y<=103890;y++)H[y]=0;for(y=103891;y<=103896;y++)H[y]=2;for(y=103900;y<=103971;y++)H[y]=2;for(y=103972;y<=103977;y++)H[y]=0;for(y=112e3;y<=112101;y++)H[y]=0;const _pe=[102100,102113,3857,3785,900913],T8e=[104905,104971],k8e=[104903],A8e=[4326,..._pe,...T8e,...k8e],Ck=[-20037508342788905e-9,20037508342788905e-9],KF=[-20037508342787e-6,20037508342787e-6],m$={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Ck,origin:KF,dx:1e-5},xpe={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ck,origin:KF,dx:1e-5},102100:m$,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Ck,origin:KF,dx:1e-5},3857:m$,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:m$,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function fo(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const n=t.wkid,r=e.wkid;if(n!=null||r!=null){if(n===r||Md(t)&&Md(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&n===a}let i,s;return t.wkt2&&e.wkt2?(i=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(i=t.wkt,s=e.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function Da(t){const e=t?.wkid;return e!=null&&e>=2e3&&xpe[e]||null}function wpe(t){if(!t)return;const{wkid:e,vcsWkid:n}=t;if(e)return n?JSON.stringify({wkid:e,vcsWkid:n}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?n?{wkt:r,vcsWkid:n}:{wkt:r}:{})}function ib(t){if(!sc(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const n=t.wkt2||t.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function I8e(t){return!(bpe(t)||Epe(t))}function L1(t){return t?.wkid===4326}function TIt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function aee(t){return t?.wkid===4490}function Md(t){const e=t?.wkid;return e!=null&&e>=2e3&&_pe.includes(e)}function P8e(t){return t?.wkid===32662}function _O(t){return t===104971||t===104905}function bpe(t){return _O(t?.wkid)}function xO(t){return t===104903}function Epe(t){return xO(t?.wkid)}function R8e(t){const e=t?.wkid;return e!=null&&e>=2e3&&A8e.includes(e)}function sc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Spe={wkid:4326,wkt:Dde(xpe[4326].wkTemplate,{Central_Meridian:"0.0"})},Tpe={wkid:102100,latestWkid:3857},C8e={wkid:32662};function mB(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const M8e=mB(rs),gB=mB(wd),yB=mB(Dg),N8e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${rs.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},O8e=gB.wkt.toUpperCase(),L8e=yB.wkt.toUpperCase();function D8e(t){if(t!=null&&sc(t)){const e=t.wkid,n=t.wkt2??t.wkt;if(_O(e))return wd;const r=n?.toUpperCase();if(n&&r===O8e)return wd;if(xO(e)||r&&r===L8e)return Dg}return rs}function kIt(t){return _O(t)?wd:xO(t)?Dg:rs}function O4(t){return fo(t,M8e)}function jg(t){return O4(t)||fo(t,gB)||fo(t,yB)}const AIt=39.37,$8e=rs.radius*Math.PI/200,kpe=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,h2=H,Ape=/UNIT\[([^\]]+)]/i,j8e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),F8e=Il()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Pu=t=>t*t,cm=t=>t*t*t,Mk={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Pu(.001)},"square-centimeters":{inBaseUnits:Pu(.01)},"square-decimeters":{inBaseUnits:Pu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Pu(1e3)},"square-inches":{inBaseUnits:Pu(.0254)},"square-feet":{inBaseUnits:Pu(.3048)},"square-yards":{inBaseUnits:Pu(.9144)},"square-miles":{inBaseUnits:Pu(1609.344)},"square-nautical-miles":{inBaseUnits:Pu(1852)},"square-us-feet":{inBaseUnits:Pu(1200/3937)},acres:{inBaseUnits:.0015625*Pu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*cm(.001)},"cubic-centimeters":{inBaseUnits:1e3*cm(.01)},"cubic-decimeters":{inBaseUnits:1e3*cm(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*cm(1e3)},"cubic-inches":{inBaseUnits:1e3*cm(.0254)},"cubic-feet":{inBaseUnits:1e3*cm(.3048)},"cubic-yards":{inBaseUnits:1e3*cm(.9144)},"cubic-miles":{inBaseUnits:1e3*cm(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},V8e=(()=>{const t={};for(const e in Mk)for(const n in Mk[e].units)t[n]=e;return t})();function z8e(t,e,n){return t*Mk[n].units[e].inBaseUnits}function U8e(t,e,n){return t/Mk[n].units[e].inBaseUnits}const G8e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],B8e=["metric","imperial"],Ipe=[...B8e,...G8e],W8e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function YF(t){const e=V8e[t];if(!e)throw new Error("unknown type");return e}function lee(t,e=null){return e=e||YF(t),Mk[e].baseUnit===t}function dh(t,e,n){if(e===n)return t;const r=YF(e);if(r!==YF(n))throw new Error("incompatible units");const i=lee(e,r)?t:z8e(t,e,r);return lee(n,r)?i:U8e(i,n,r)}function IIt(t,e,n,r=!1){if(!r&&ib(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const i=ov(e);return i!==n&&(t=i?dh(t,i,n):dh(t*=Vd(e),"meters",n)),t}function PIt(t,e,n,r=!1){if(!r&&ib(n))throw new Error("Unable to convert from a linear unit to an angular unit.");const i=ov(n);return e!==i&&(t=i?dh(t,e,i):dh(t,e,"meters")/Vd(n)),t}function H8e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function RIt(t){return H8e(t)}function CIt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function MIt(t,e,n){switch(n){case"metric":return q8e(t,e);case"imperial":return Y8e(t,e);default:return n}}function NIt(t,e,n){switch(n){case"metric":return K8e(t,e);case"imperial":return X8e(t,e);default:return n}}function q8e(t,e){const n=dh(t,e,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function K8e(t,e){const n=dh(t,e,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function Y8e(t,e){const n=dh(t,e,"feet");return Math.abs(n)<1e3?"feet":"miles"}function X8e(t,e){const n=dh(t,e,"feet");return Math.abs(n)<1e5?"feet":"miles"}function OIt(t,e){const n=dh(t,e,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function LIt(t,e){const n=dh(t,e,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function DIt(t,e,n){return dh(t,e,"meters")/(n*Math.PI/180)}function vB(t){return F8e.fromJSON(t.toLowerCase())||null}function cee(t){if(t!=null&&!I8e(t))return 1;const e=Vd(t);return e>1e5?1:e}function Ppe(t){return Vd(t)>=D8e(t).metersPerDegree?"meters":ov(t)}function Vd(t,e=rs.metersPerDegree){return Z8e(t,!0)??e}function Z8e(t,e=!1){const n=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(n){if(_O(n))return wd.metersPerDegree;if(xO(n))return Dg.metersPerDegree;i=h2.values[h2[n]],!i&&e&&j8e.has(n)&&(i=$8e)}else r&&(Mpe(r)?i=uee(kpe.exec(r),i):Cpe(r)&&(i=uee(Ape.exec(r),i)));return i}function $It(t){return ib(t)?1:Vd(t)}function uee(t,e){return t?.[1]?Rpe(t[1]):e}function Rpe(t){return parseFloat(t.split(",")[1])}function ov(t){const e=t?.wkid??null,n=t?.wkt2??t?.wkt??null;let r=null;if(e)r=h2.units[h2[e]];else if(n){const i=Mpe(n)?kpe:Cpe(n)?Ape:null;if(i){const s=i.exec(n);s?.[1]&&(r=Q8e(s[1]))}}return r!=null?vB(r):null}function jIt(t){const e=ov(t);return e!=null&&Ipe.includes(e)?e:null}function FIt(t){const e=Ppe(t);return e!=null&&Ipe.includes(e)?e:null}function VIt(t){const e=ov(t);return e==null?null:W8e.get(e)}function Cpe(t){return/^GEOCCS/i.test(t)}function Mpe(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const J8e=1e-7;function Q8e(t){let n=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!n||!vB(n)){const r=Rpe(t);n=null;const i=h2.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<J8e){n=h2.units[s];break}}return n}function zIt(t){const e=ov(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const eFe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},tFe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},nFe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},UIt=Il()(eFe),GIt=Il()(tFe),BIt=Il()(nFe);var Uh,od;let Bt=(od=class extends qt{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Uh.WebMercator;if(e?.wkid===4326)return Uh.WGS84;const n=new Uh;return n.read(e),n}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return L1(this)}get isWebMercator(){return Md(this)}get isGeographic(){return ib(this)}get isWrappable(){return R8e(this)}get metersPerUnit(){return Vd(this)}get unit(){return ov(this)||(this.isGeographic?"degrees":null)}writeWkt(e,n){this.wkid||(n.wkt=e)}clone(){if(this===Uh.WGS84)return new Uh(Spe);if(this===Uh.WebMercator)return new Uh(Tpe);const e=new Uh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Ze(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:n,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return n==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===n&&s.referenceServiceName===r:s.id===n}return fo(this,e)}toJSON(e){return this.write(void 0,e)}},Uh=od,od.GCS_NAD_1927=null,od.WGS84=null,od.WebMercator=null,od.PlateCarree=null,od);_([E({readOnly:!0})],Bt.prototype,"isWGS84",null),_([E({readOnly:!0})],Bt.prototype,"isWebMercator",null),_([E({readOnly:!0})],Bt.prototype,"isGeographic",null),_([E({readOnly:!0})],Bt.prototype,"isWrappable",null),_([E({type:Lr,json:{write:!0}})],Bt.prototype,"latestWkid",void 0),_([E({readOnly:!0})],Bt.prototype,"metersPerUnit",null),_([E({readOnly:!0})],Bt.prototype,"unit",null),_([E({type:Lr,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Bt.prototype,"wkid",void 0),_([E({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Bt.prototype,"wkt",void 0),_([Zn("wkt"),Zn("web-scene","wkt")],Bt.prototype,"writeWkt",null),_([E({type:String,json:{write:!1}})],Bt.prototype,"wkt2",void 0),_([E({type:Lr,json:{write:!0}})],Bt.prototype,"vcsWkid",void 0),_([E({type:Lr,json:{write:!0}})],Bt.prototype,"latestVcsWkid",void 0),_([E()],Bt.prototype,"imageCoordinateSystem",void 0),Bt=Uh=_([ue("esri.geometry.SpatialReference")],Bt),Bt.prototype.toJSON.isDefaultToJSON=!0,Bt.GCS_NAD_1927=Kt.freeze(new Bt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Bt.WGS84=Kt.freeze(new Bt(Spe)),Bt.WebMercator=Kt.freeze(new Bt(Tpe)),Bt.PlateCarree=Kt.freeze(new Bt(C8e));function lr(t,e,n){let r,i;return e===void 0||Array.isArray(e)?(i=t,n=e,r=[void 0]):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=sB(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],n&&(c.read.source=(c.read.source||[]).concat(n))})}}let js=class extends qt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Bt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,n){if(e instanceof Bt)return e;if(e!=null){const r=new Bt;return r.read(e,n),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,n){this.cache[e]=n}};_([E()],js.prototype,"type",void 0),_([E({readOnly:!0})],js.prototype,"cache",null),_([E({readOnly:!0})],js.prototype,"extent",null),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],js.prototype,"hasM",void 0),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],js.prototype,"hasZ",void 0),_([E({type:Bt,json:{write:!0},value:Bt.WGS84})],js.prototype,"spatialReference",void 0),_([lr("spatialReference")],js.prototype,"readSpatialReference",null),js=_([ue("esri.geometry.Geometry")],js);const rFe=Object.prototype.toString;function iFe(t){const e="__accessorMetadata__"in t?za(t):t;return function(...n){if(n.push(e),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return sFe.apply(this,n)}}function sFe(t,e,n,r){oI(t,e).cast=r}function oFe(t){return(e,n)=>{oI(e,t).cast=e[n]}}function Gs(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&rFe.call(t[0])==="[object Function]"?iFe(t[0]):t.length===1&&typeof t[0]=="string"?oFe(t[0]):void 0}function d2(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new Xe("internal:mesh","Mesh geometries are not supported for this operation")}function aFe(t){t.forEach(d2)}const lFe=57.29577951308232,cFe=.017453292519943;function hee(t){return t*lFe}function dee(t){return t*cFe}function HIt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/rs.radius))}function XF(t){return t.wkid!=null||t.wkt!=null}const g$=[0,0];function L4(t,e,n,r,i){const s=t,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,g$,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,g$,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,g$,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const h=a[u];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(e(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function sM(t,e){const n=t&&(XF(t)?t:t.spatialReference),r=e&&(XF(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!n||!r)&&(!!fo(r,n)||Md(r)&&L1(n)||Md(n)&&L1(r))}function wO(t,e){if(t==null)return null;const n=t.spatialReference,r=e&&(XF(e)?e:e.spatialReference);return sM(n,r)?fo(n,r)?Ze(t):Md(r)?L4(t,mx,Bt.WebMercator,!1,Ze(t)):L1(r)?L4(t,bO,Bt.WGS84,!1,Ze(t)):null:null}function mx(t,e,n=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=dee(e);return n[0]=dee(t)*rs.radius,n[1]=rs.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function bO(t,e,n=[0,0],r=!1){if(t===Ck[0])n[0]=-180;else if(t===Ck[1])n[0]=180;else{const i=hee(t/rs.radius);n[0]=r?i:i-360*Math.floor((i+180)/360)}return n[1]=hee(Math.PI/2-2*Math.atan(Math.exp(-e/rs.radius))),n}function Qy(t,e=!1,n=Ze(t)){return d2(t),d2(n),L4(t,mx,Bt.WebMercator,e,n)}function rS(t,e=!1,n=Ze(t)){return d2(t),d2(n),L4(t,bO,Bt.WGS84,e,n)}function Npe(t,e){const n=t.x-e.x,r=t.y-e.y,i=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(n*n+r*r+i*i)}function uFe(t){return Ope(t,Lpe)?.[0]??null}function hFe(t){return Ope(t,Lpe)?.[1]??null}function Ope({x:t,y:e,spatialReference:n},r=[0,0]){if(n){if(Md(n))return bO(t,e,r);if(ib(n))return r[0]=t,r[1]=e,r}return null}const Lpe=[0,0];var oM;const y$=[0,0];function fee(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Jt=oM=class extends js{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const n=t._get("spatialReference");e._set("spatialReference",Kt.isFrozen(n)?n:n.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,n,r,i){let s;if(Array.isArray(t))s=t,i=e,t=s[0],e=s[1],n=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Bt(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)Tt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)Tt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i?.isWebMercator){const a=mx(s.longitude,s.latitude,y$);t=a[0],e=a[1]}}}else fee(n)?(i=n,n=null):fee(r)&&(i=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?Tt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&Tt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return hFe(this)}set latitude(t){const{spatialReference:e,x:n}=this;t!=null&&e&&(e.isWebMercator?this._set("y",mx(n,t,y$)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return uFe(this)}set longitude(t){const{y:e,spatialReference:n}=this;t!=null&&n&&(n.isWebMercator?this._set("x",mx(t,e,y$)[0]):n.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,n){e[n]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new oM;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return oM.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:u}=t;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=mx(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=bO(l,c),u=s}return e===l&&n===c&&r===o&&i===a&&s.wkid===u.wkid}offset(t,e,n){return this.x+=t,this.y+=e,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const t=Da(this.spatialReference);if(!t)return this;let e=this.x;const[n,r]=t.valid,i=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i),this._set("x",e),this}distance(t){return Npe(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],Jt.prototype,"cache",null),_([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jt.prototype,"hasM",null),_([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jt.prototype,"hasZ",null),_([E({type:Number})],Jt.prototype,"latitude",null),_([E({type:Number})],Jt.prototype,"longitude",null),_([E({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Gs(t=>isNaN(t)?t:Ql(t))],Jt.prototype,"x",void 0),_([Zn("x")],Jt.prototype,"writeX",null),_([lr("x")],Jt.prototype,"readX",null),_([E({type:Number,json:{write:!0}})],Jt.prototype,"y",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Jt.prototype,"z",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Jt.prototype,"m",void 0),Jt=oM=_([ue("esri.geometry.Point")],Jt),Jt.prototype.toJSON.isDefaultToJSON=!0;const v$=[0,0];function uI(t,e){return e!=null&&Sa(t,e.x,e.y,e.z)}function qIt(t,e){if(!e.points?.length)return!1;for(const n of e.points)if(!f2(t,n))return!1;return!0}function dFe(t,e){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Sa(t,n,r,i)&&Sa(t,n,o,i)&&Sa(t,s,o,i)&&Sa(t,s,r,i)&&Sa(t,n,r,a)&&Sa(t,n,o,a)&&Sa(t,s,o,a)&&Sa(t,s,r,a):Sa(t,n,r)&&Sa(t,n,o)&&Sa(t,s,o)&&Sa(t,s,r)}function f2(t,e){return Sa(t,e[0],e[1])}function fFe(t,e){return Sa(t,e[0],e[1],e[2])}function Sa(t,e,n,r){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function _B(t,e){return v$[1]=e.y,v$[0]=e.x,pFe(t,v$)}function pFe(t,e){return xB(t.rings,e)}function xB(t,e){if(!t||t.length<1)return!1;if(mFe(t))return pee(!1,t,e);let n=!1;for(let r=0,i=t.length;r<i;r++)n=pee(n,t[r],e);return n}function mFe(t){return!Array.isArray(t[0][0])}function pee(t,e,n){const[r,i]=n;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=e[a],[h,f]=e[o];(u<i&&f>=i||f<i&&u>=i)&&c+(i-u)/(f-u)*(h-c)<r&&(s=!s)}return s}function gFe(t,e){return uI(t,e)}function yFe(t,e){const n=t.hasZ&&e.hasZ;let r,i,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(i=e.ymin,t.ymax<i)return!1}else if(i=t.ymin,e.ymax<i)return!1;if(n&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function vFe(t,e){const{points:n,hasZ:r}=e,i=r?fFe:f2;for(const s of n)if(i(t,s))return!0;return!1}const D1=[0,0],$1=[0,0],j1=[0,0],F1=[0,0],_Fe=[D1,$1,j1,F1],Dpe=[[j1,D1],[D1,$1],[$1,F1],[F1,j1]];function xFe(t,e){return wFe(t,e.rings)}function wFe(t,e){D1[0]=t.xmin,D1[1]=t.ymax,$1[0]=t.xmax,$1[1]=t.ymax,j1[0]=t.xmin,j1[1]=t.ymin,F1[0]=t.xmax,F1[1]=t.ymin;for(const n of _Fe)if(xB(e,n))return!0;for(const n of e){if(!n.length)continue;let r=n[0];if(f2(t,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(f2(t,s)||$pe(r,s,Dpe))return!0;r=s}}return!1}function bFe(t,e){D1[0]=t.xmin,D1[1]=t.ymax,$1[0]=t.xmax,$1[1]=t.ymax,j1[0]=t.xmin,j1[1]=t.ymin,F1[0]=t.xmax,F1[1]=t.ymin;const n=e.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(f2(t,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(f2(t,o)||$pe(i,o,Dpe))return!0;i=o}}return!1}const Zs=[0,0];function EFe(t){for(let e=0;e<t.length;e++){const n=t[e];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],u=t[a][l+1];if(ZF(s,o,c,u,Zs)&&!(Zs[0]===s[0]&&Zs[1]===s[1]||Zs[0]===c[0]&&Zs[1]===c[1]||Zs[0]===o[0]&&Zs[1]===o[1]||Zs[0]===u[0]&&Zs[1]===u[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let l=i+2;l<s;l++){const c=n[l],u=n[l+1];if(ZF(o,a,c,u,Zs)&&!(Zs[0]===o[0]&&Zs[1]===o[1]||Zs[0]===c[0]&&Zs[1]===c[1]||Zs[0]===a[0]&&Zs[1]===a[1]||Zs[0]===u[0]&&Zs[1]===u[1]))return!0}}}return!1}function $pe(t,e,n){for(let r=0;r<n.length;r++)if(ZF(t,e,n[r][0],n[r][1]))return!0;return!1}function ZF(t,e,n,r,i){const[s,o]=t,[a,l]=e,[c,u]=n,[h,f]=r,g=h-c,v=s-c,x=a-s,b=f-u,T=o-u,A=l-o,I=b*x-g*A;if(I===0)return!1;const P=(g*T-b*v)/I,M=(x*T-A*v)/I;return P>=0&&P<=1&&M>=0&&M<=1&&(i&&(i[0]=s+P*(a-s),i[1]=o+P*(l-o)),!0)}function SFe(t){switch(t){case"esriGeometryEnvelope":case"extent":return yFe;case"esriGeometryMultipoint":case"multipoint":return vFe;case"esriGeometryPoint":case"point":return gFe;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return xFe;case"esriGeometryPolyline":case"polyline":return bFe}}var $u;function TFe(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function um(t,e,n){return e==null?n:n==null?e:t(e,n)}let $n=$u=class extends js{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,n,r,i){return TFe(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Bt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:n,ymax:r,spatialReference:i??Bt.WGS84}}static fromPoint(t){return new $u({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Jt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new $u;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&sM(e,n)&&(t=e.isWebMercator?Qy(t):rS(t,!0)),t.type==="point"?uI(this,t):t.type==="extent"&&dFe(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&sM(e,n)&&(t=e.isWebMercator?Qy(t):rS(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),n=this.width*e,r=this.height*e;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*e;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*e;this.mmin+=i,this.mmax-=i}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,n=t.spatialReference;return e&&n&&!fo(e,n)&&sM(e,n)&&(t=e.isWebMercator?Qy(t):rS(t,!0)),SFe(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,n){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=um(Math.min,this.zmin,t.zmin),this.zmax=um(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=um(Math.min,this.mmin,t.mmin),this.mmax=um(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=um(Math.max,this.zmin,t.zmin),this.zmax=um(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=um(Math.max,this.mmin,t.mmin),this.mmax=um(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Da(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,n=this._getCM(t);if(n){const r=e.isWebMercator?rS(n):n;this.xmin-=n.x,this.xmax-=n.x,e.isWebMercator||(r.x=_$(r.x,t).x),this.spatialReference=new Bt(Dde((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[n,r]=t.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(e=this.center),e}_normalize(t,e,n){const r=this.spatialReference;if(!r)return this;const i=n??Da(r);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(t)return this._shiftCM(i);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;t=t||Da(o);const[h,f]=t.valid;u=_$(this.xmin,t);const g=u.x,v=u.frameId;u=_$(this.xmax,t);const x=u.x,b=u.frameId,T=g===x&&a>0;if(a>2*f){const A=new $u(l<c?g:x,i,f,s,o),I=new $u(h,i,l<c?x:g,s,o),P=new $u(0,i,f,s,o),M=new $u(h,i,0,s,o),F=[],C=[];A.contains(P)&&F.push(v),A.contains(M)&&C.push(v),I.contains(P)&&F.push(b),I.contains(M)&&C.push(b);for(let N=v+1;N<b;N++)F.push(N),C.push(N);e.push({extent:A,frameIds:[v]},{extent:I,frameIds:[b]},{extent:P,frameIds:F},{extent:M,frameIds:C})}else g>x||T?e.push({extent:new $u(g,i,f,s,o),frameIds:[v]},{extent:new $u(h,i,x,s,o),frameIds:[b]}):e.push({extent:new $u(g,i,x,s,o),frameIds:[v]});this.cache._parts=e}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(i)}return e}};function _$(t,e){const[n,r]=e.valid,i=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i,o=s):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i,o=-s),{x:t,frameId:o}}_([E({readOnly:!0})],$n.prototype,"cache",null),_([E({readOnly:!0})],$n.prototype,"center",null),_([E({readOnly:!0})],$n.prototype,"extent",null),_([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$n.prototype,"hasM",null),_([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],$n.prototype,"hasZ",null),_([E({readOnly:!0})],$n.prototype,"height",null),_([E({readOnly:!0})],$n.prototype,"width",null),_([E({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],$n.prototype,"xmin",void 0),_([E({type:Number,json:{write:!0}})],$n.prototype,"ymin",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],$n.prototype,"mmin",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$n.prototype,"zmin",void 0),_([E({type:Number,json:{write:!0}})],$n.prototype,"xmax",void 0),_([E({type:Number,json:{write:!0}})],$n.prototype,"ymax",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],$n.prototype,"mmax",void 0),_([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],$n.prototype,"zmax",void 0),$n=$u=_([ue("esri.geometry.Extent")],$n),$n.prototype.toJSON.isDefaultToJSON=!0;let oT;const kFe=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,JF=globalThis.document?.documentElement;function jpe(){const t=JF?.getAttribute("lang"),e=globalThis.navigator?.language;return kFe??t??e??"en"}function iu(){return oT===void 0&&(oT=jpe()),oT}const AFe=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function wB(t=iu()){return Vpe(t)?.language}function Fpe(t=iu()){const e=Vpe(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function Vpe(t=iu()){return AFe.exec(t)?.groups}const aM=[];function zpe(t){return aM.push(t),Kn(()=>{aM.splice(aM.indexOf(t),1)})}const lM=[];function bB(t){return lM.push(t),Kn(()=>lM.splice(lM.indexOf(t),1))}function mee(){const t=jpe();oT!==t&&([...lM].forEach(e=>e(t)),oT=t,[...aM].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",mee),JF&&new MutationObserver(()=>{mee()}).observe(JF,{attributeFilter:["lang"]});let bR;function IFe(t){return bR&&!bR.destroyed||(bR=t()),bR}var QF;const PFe=new Ws({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let cs=QF=class extends Kt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new QF({categories:this.categories?Ze(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=wO(this.extent,Bt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>PFe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};_([E()],cs.prototype,"categories",void 0),_([E()],cs.prototype,"disableExtraQuery",void 0),_([E({type:$n})],cs.prototype,"extent",void 0),_([E()],cs.prototype,"filter",void 0),_([E()],cs.prototype,"num",void 0),_([E()],cs.prototype,"query",void 0),_([E()],cs.prototype,"sortField",void 0),_([E()],cs.prototype,"sortOrder",null),_([E()],cs.prototype,"start",void 0),cs=QF=_([ue("esri.portal.PortalQueryParams")],cs);var e9;let Gi=e9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const n=e.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):n})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new Xe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new e9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let n=za(cs,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new cs,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",e)):(n=n?n.clone():new cs,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,e))}_fetchCategorySchemaSet(t,e){const n=this.portal;return n.fetchSelf(n.authMode,!0,e).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new cs({disableExtraQuery:!0,num:1,query:i});return n.queryGroups(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new cs({num:1,query:`typekeywords:"${t}"`});return i.queryItems(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(i=>{const s=i?.categorySchema;return s?.length?s:[]}):[])}};_([E()],Gi.prototype,"access",void 0),_([E({type:Date})],Gi.prototype,"created",void 0),_([E()],Gi.prototype,"description",void 0),_([E()],Gi.prototype,"id",void 0),_([E()],Gi.prototype,"isInvitationOnly",void 0),_([E({type:Date})],Gi.prototype,"modified",void 0),_([E()],Gi.prototype,"owner",void 0),_([E()],Gi.prototype,"portal",void 0),_([E()],Gi.prototype,"snippet",void 0),_([E()],Gi.prototype,"sortField",void 0),_([E()],Gi.prototype,"sortOrder",void 0),_([E()],Gi.prototype,"sourceJSON",void 0),_([E()],Gi.prototype,"tags",void 0),_([E()],Gi.prototype,"thumbnail",void 0),_([E({readOnly:!0})],Gi.prototype,"thumbnailUrl",null),_([E()],Gi.prototype,"title",void 0),_([E({readOnly:!0})],Gi.prototype,"url",null),Gi=e9=_([ue("esri.portal.PortalGroup")],Gi);let q0=class extends Kt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};_([E()],q0.prototype,"nextQueryParams",void 0),_([E()],q0.prototype,"queryParams",void 0),_([E()],q0.prototype,"results",void 0),_([E()],q0.prototype,"total",void 0),q0=_([ue("esri.portal.PortalQueryResult")],q0);let pf=class extends qt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Xe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};_([E({type:Date})],pf.prototype,"created",void 0),_([E()],pf.prototype,"id",void 0),_([E()],pf.prototype,"portal",void 0),_([E()],pf.prototype,"title",void 0),_([E({readOnly:!0})],pf.prototype,"url",null),_([E()],pf.prototype,"username",void 0),pf=_([ue("esri.portal.PortalFolder")],pf);var t9;let jr=t9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,n=t?.data,r=t?.folder,i={method:"post"};e&&(i.query=e.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let n=this.userContentUrl;t.ownerFolder&&(n+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const n=this.userContentUrl+"/deleteItems",r=[],i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:e}},o=await this.portal.request(n,s);for(const a of o.results){const l=t.find(h=>a.itemId===h.id),c=a.success;let u=null;c?(l.id=null,l.portal=null):a.error&&(u=new Xe("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:u})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let n;return n=e&&e.folders?e.folders.map(r=>{const i=pf.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(n=>{const r=Gi.fromJSON(n);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:n}=await _e(()=>Promise.resolve().then(()=>Upe),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(e,{query:r});let s;return i?.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Gi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Xe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const n=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(n+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new Xe("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new t9({sourceJSON:t});return e.read(t),e}};_([E()],jr.prototype,"access",void 0),_([E({type:Date})],jr.prototype,"created",void 0),_([E()],jr.prototype,"culture",void 0),_([E()],jr.prototype,"description",void 0),_([E()],jr.prototype,"email",void 0),_([E()],jr.prototype,"favGroupId",void 0),_([E()],jr.prototype,"fullName",void 0),_([E()],jr.prototype,"id",void 0),_([E({type:Date})],jr.prototype,"modified",void 0),_([E()],jr.prototype,"orgId",void 0),_([E()],jr.prototype,"portal",void 0),_([E()],jr.prototype,"preferredView",void 0),_([E()],jr.prototype,"privileges",void 0),_([E()],jr.prototype,"region",void 0),_([E()],jr.prototype,"role",void 0),_([E()],jr.prototype,"roleId",void 0),_([E()],jr.prototype,"sourceJSON",void 0),_([E()],jr.prototype,"thumbnail",void 0),_([E({readOnly:!0})],jr.prototype,"thumbnailUrl",null),_([E()],jr.prototype,"units",void 0),_([E({readOnly:!0})],jr.prototype,"userContentUrl",null),_([E({readOnly:!0})],jr.prototype,"url",null),_([E()],jr.prototype,"username",void 0),_([E()],jr.prototype,"userLicenseTypeId",void 0),_([E()],jr.prototype,"userType",void 0),jr=t9=_([ue("esri.portal.PortalUser")],jr);var Vl;let bE;const gee={PortalGroup:()=>Promise.resolve({default:Gi}),PortalItem:()=>_e(()=>Promise.resolve().then(()=>Upe),void 0),PortalUser:()=>Promise.resolve({default:jr})};var ad;let it=(ad=class extends t0(cI){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=tr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){yee.unregister(this),this.defaultBasemap=Ni(this.defaultBasemap),this.defaultDevBasemap=Ni(this.defaultDevBasemap),this.defaultVectorBasemap=Ni(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ri(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const n of e)tr.request.trustedServers.includes(n)||tr.request.trustedServers.push(n);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,n=!e||this.canSearchPublic;return this.id&&!n?` AND orgid:${this.id}`:null}get hasAPIKey(){return D6e(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const n=e.indexOf("/sharing");e=n>0?e.slice(0,n):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,n=this.thumbnail;return e&&n?this._normalizeSSL(e+"/portals/self/resources/"+n):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let n=null;return e&&(n=jr.fromJSON(e),n.portal=this),n}load(e){const n=_e(async()=>{const{default:r}=await Promise.resolve().then(()=>kVe);return{default:r}},void 0).then(({default:r})=>{pi(e),bE=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&Zr){const i=Zr;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==Vl.AUTH_MODE_AUTO&&this.authMode!==Vl.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",RFe(new WeakRef(this))),yee.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),n=(await _e(async()=>{const{default:r}=await import("./ElevationLayer-CjGN1cxj.js");return{default:r}},__vite__mapDeps([19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]))).default;return e?e.map(r=>new n({id:r.id,url:r.url})):[]}async fetchBasemaps(e,n){const r=await this._fetchBasemaps(e,n);if(n?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,n);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const n=new cs;n.query=this.default3DBasemapQuery,n.disableExtraQuery=!0;const r=(await this.queryItems(n,e)).results.find(i=>i.type==="Web Scene");return r?new bE({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(n=>n.categorySchema):fa(e)?Promise.reject(kr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(n=>n.classificationSchema):null}fetchFeaturedGroups(e){const n=this.featuredGroups,r=new cs({num:100,sortField:"title"});if(n?.length){const i=[];for(const s of n)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return fa(e)?Promise.reject(kr()):Promise.resolve([])}fetchRegions(e){const n=this.user?.culture||this.culture||iu();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:n}})}fetchSettings(e){const n=this.user?.culture||this.culture||iu();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:n}})}static getDefault(){return IFe(()=>new Vl)}queryGroups(e,n){return this.queryPortal("/community/groups",e,"PortalGroup",n)}queryItems(e,n){return this.queryPortal("/search",e,"PortalItem",n)}queryUsers(e,n){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",n)}fetchSelf(e=this.authMode,n=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:iu().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),n&&(s.query.default=!0),this.request(i,s)}queryPortal(e,n,r,i){const s=za(cs,n),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(l=>{const c=s.clone();return c.start=l.nextStart,new q0({nextQueryParams:c,queryParams:s,total:l.total,results:Vl._resultsToTypedArray(a,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(sfe(c),l)));return r&&gee[r]?gee[r]().then(({default:a})=>(pi(i),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Xe("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Vl.AUTH_MODE_ANONYMOUS||this.authMode===Vl.AUTH_MODE_NO_PROMPT&&!Zr)return Promise.reject(new Xe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=n=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(n||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=n,this.fetchSelf("immediate"))):this.user&&this.credential===n?null:(this.credential=n,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Zr?Zr.getCredential(this.restUrl,{prompt:this.authMode!==Vl.AUTH_MODE_NO_PROMPT}).then(n=>e(n)):e(this.credential)}normalizeUrl(e){const n=this.credential?.token;return this._normalizeSSL(n?e+(e.includes("?")?"&":"?")+"token="+n:e)}requestToTypedArray(e,n,r){return this.request(e,n).then(i=>{const s=Vl._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():i)).then(()=>s,()=>s)})}request(e,n={}){const r={f:"json",...n.query},{authMode:i=this.authMode===Vl.AUTH_MODE_ANONYMOUS||this.authMode===Vl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=n,u={authMode:i,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return n.withCredentials&&(u.withCredentials=!0),es(this._normalizeSSL(e),u).then(h=>h.data)}toJSON(){throw new Xe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Vl({sourceJSON:e})}_getHelperService(e){const n=this.helperServices?.[e];if(!n)throw new Xe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return n}async _fetchBasemaps(e,n){const r=new cs;r.query=e||(CF()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,n);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,n);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new bE({portalItem:a})):[]}async _fetchBasemaps3D(e,n){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(CF())return[];const i=new cs({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,n);if(!s.total)return[];const o=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=o.sortField||"name",i.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(i,n);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new bE({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const n=bE.fromJSON(e);return n.portalItem={portal:this},n}return null}static _resultsToTypedArray(e,n,r,i){let s;if(r){const o=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||n)&&(s=s.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,n);return typeof l.load=="function"&&l.load(o),l}))}else s=[];return s}},Vl=ad,ad.AUTH_MODE_ANONYMOUS="anonymous",ad.AUTH_MODE_AUTO="auto",ad.AUTH_MODE_IMMEDIATE="immediate",ad.AUTH_MODE_NO_PROMPT="no-prompt",ad);_([E()],it.prototype,"access",void 0),_([E()],it.prototype,"allSSL",void 0),_([E()],it.prototype,"authMode",void 0),_([E()],it.prototype,"authorizedCrossOriginDomains",void 0),_([lr("authorizedCrossOriginDomains")],it.prototype,"readAuthorizedCrossOriginDomains",null),_([E()],it.prototype,"basemapGalleryGroupQuery",void 0),_([E({json:{name:"3DBasemapGalleryGroupQuery"}})],it.prototype,"basemapGalleryGroupQuery3D",void 0),_([E({json:{name:"g3DTilesGalleryGroupQuery"}})],it.prototype,"g3DTilesGalleryGroupQuery",void 0),_([E({json:{name:"g3dTilesEnabled"}})],it.prototype,"g3dTilesEnabled",void 0),_([E()],it.prototype,"bingKey",void 0),_([E()],it.prototype,"canListApps",void 0),_([E()],it.prototype,"canListData",void 0),_([E()],it.prototype,"canListPreProvisionedItems",void 0),_([E()],it.prototype,"canProvisionDirectPurchase",void 0),_([E()],it.prototype,"canSearchPublic",void 0),_([E()],it.prototype,"canShareBingPublic",void 0),_([E()],it.prototype,"canSharePublic",void 0),_([E()],it.prototype,"canSignInArcGIS",void 0),_([E()],it.prototype,"canSignInIDP",void 0),_([E()],it.prototype,"colorSetsGroupQuery",void 0),_([E()],it.prototype,"commentsEnabled",void 0),_([E({type:Date})],it.prototype,"created",void 0),_([E()],it.prototype,"credential",void 0),_([E()],it.prototype,"culture",void 0),_([E()],it.prototype,"currentVersion",void 0),_([E()],it.prototype,"customBaseUrl",void 0),_([E()],it.prototype,"default3DBasemapQuery",void 0),_([E()],it.prototype,"defaultBasemap",void 0),_([lr("defaultBasemap")],it.prototype,"readDefaultBasemap",null),_([E()],it.prototype,"defaultDevBasemap",void 0),_([lr("defaultDevBasemap")],it.prototype,"readDefaultDevBasemap",null),_([E({type:$n})],it.prototype,"defaultExtent",void 0),_([E()],it.prototype,"defaultVectorBasemap",void 0),_([lr("defaultVectorBasemap")],it.prototype,"readDefaultVectorBasemap",null),_([E()],it.prototype,"description",void 0),_([E()],it.prototype,"devBasemapGalleryGroupQuery",void 0),_([E()],it.prototype,"eueiEnabled",void 0),_([E({readOnly:!0})],it.prototype,"extraQuery",null),_([E()],it.prototype,"featuredGroups",void 0),_([E()],it.prototype,"featuredItemsGroupQuery",void 0),_([E()],it.prototype,"galleryTemplatesGroupQuery",void 0),_([E()],it.prototype,"layoutGroupQuery",void 0),_([E()],it.prototype,"livingAtlasGroupQuery",void 0),_([E({readOnly:!0})],it.prototype,"hasAPIKey",null),_([E()],it.prototype,"hasCategorySchema",void 0),_([E()],it.prototype,"hasClassificationSchema",void 0),_([E()],it.prototype,"helpBase",void 0),_([E()],it.prototype,"helperServices",void 0),_([E()],it.prototype,"helpMap",void 0),_([E()],it.prototype,"homePageFeaturedContent",void 0),_([E()],it.prototype,"homePageFeaturedContentCount",void 0),_([E()],it.prototype,"httpPort",void 0),_([E()],it.prototype,"httpsPort",void 0),_([E()],it.prototype,"id",void 0),_([E()],it.prototype,"ipCntryCode",void 0),_([E({readOnly:!0})],it.prototype,"isOrganization",null),_([E()],it.prototype,"isPortal",void 0),_([E()],it.prototype,"isReadOnly",void 0),_([E({readOnly:!0})],it.prototype,"itemPageUrl",null),_([E()],it.prototype,"layerTemplatesGroupQuery",void 0),_([E()],it.prototype,"maxTokenExpirationMinutes",void 0),_([E({type:Date})],it.prototype,"modified",void 0),_([E()],it.prototype,"name",void 0),_([E()],it.prototype,"portalHostname",void 0),_([E()],it.prototype,"portalMode",void 0),_([E()],it.prototype,"portalProperties",void 0),_([E()],it.prototype,"region",void 0),_([E()],it.prototype,"recycleBinEnabled",void 0),_([E({readOnly:!0})],it.prototype,"restUrl",null),_([E()],it.prototype,"rotatorPanels",void 0),_([E()],it.prototype,"showHomePageDescription",void 0),_([E()],it.prototype,"sourceJSON",void 0),_([E()],it.prototype,"staticImagesUrl",void 0),_([E({json:{name:"2DStylesGroupQuery"}})],it.prototype,"stylesGroupQuery2d",void 0),_([E({json:{name:"stylesGroupQuery"}})],it.prototype,"stylesGroupQuery3d",void 0),_([E()],it.prototype,"supportsHostedServices",void 0),_([E()],it.prototype,"symbolSetsGroupQuery",void 0),_([E()],it.prototype,"templatesGroupQuery",void 0),_([E()],it.prototype,"thumbnail",void 0),_([E({readOnly:!0})],it.prototype,"thumbnailUrl",null),_([E()],it.prototype,"units",void 0),_([E()],it.prototype,"url",void 0),_([E()],it.prototype,"urlKey",void 0),_([lr("urlKey")],it.prototype,"readUrlKey",null),_([E()],it.prototype,"user",void 0),_([lr("user")],it.prototype,"readUser",null),_([E()],it.prototype,"use3dBasemaps",void 0),_([E()],it.prototype,"useDefault3dBasemap",void 0),_([E()],it.prototype,"useStandardizedQuery",void 0),_([E()],it.prototype,"useVectorBasemaps",void 0),_([E()],it.prototype,"vectorBasemapGalleryGroupQuery",void 0),it=Vl=_([ue("esri.portal.Portal")],it);const yee=new FinalizationRegistry(t=>{t.remove()});function RFe(t){const e=Zr;return()=>{const n=t.deref();n&&e.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let mf=class extends Kt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:vee(e.path,e.portalItem)}:e}set path(e){e!=null&&_l(e)?Tt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return vee(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",n){const r=this.cdnUrl;if(r==null)throw new Xe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:n?.cacheBust?Date.now():null},signal:n?.signal})}async update(e,n){const{addOrUpdateResources:r}=await _e(()=>import("./resourceUtils-GUMJTbU_.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:n?.compress,access:n?.access}],"update",n),this}hasPath(){return this.path!=null}};function vee(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&_l(t)&&(t=GG(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}_([E()],mf.prototype,"portalItem",void 0),_([E({type:String,value:null})],mf.prototype,"path",null),_([Gs("path")],mf.prototype,"_castPath",null),_([E({type:String,readOnly:!0})],mf.prototype,"url",null),_([E({type:String,readOnly:!0})],mf.prototype,"cdnUrl",null),_([E({type:String,readOnly:!0})],mf.prototype,"itemRelativeUrl",null),mf=_([ue("esri.portal.PortalItemResource")],mf);let Oy=class extends Kt{constructor(e){super(e),this.created=null,this.rating=null}};_([E({type:Date})],Oy.prototype,"created",void 0),_([E()],Oy.prototype,"rating",void 0),Oy=_([ue("esri.portal.PortalRating")],Oy);var K0;const CFe=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),MFe=new Set(["KML","GeoJson","CSV"]);let vn=K0=class extends t0(cI){static from(t){return pO(K0,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let n=t;return t==="Feature Service"||t==="Feature Collection"?n=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?n=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?n="Scene Layer":t==="Video Service"?n="Video Layer":t==="Scene Package"?n="Scene Layer Package":t==="Stream Service"?n="Feature Layer":t==="Geoprocessing Service"?n=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?n="GeoEnrichment Service":t==="Geocoding Service"?n="Locator":t==="Microsoft Powerpoint"?n="Microsoft PowerPoint":t==="GeoJson"?n="GeoJSON":t==="Globe Service"?n="Globe Layer":t==="Vector Tile Service"?n="Tile Layer":t==="netCDF"?n="NetCDF":t==="Map Service"?n=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?n=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?n="Big Data File Share":t==="Compact Tile Package"?n="Tile Package (tpkx)":t==="Raster function template"?n="Raster Function Template":t==="OGCFeatureServer"?n="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?n="Instant App":t==="Insights Page"?n="Insights Report":t==="Excalibur Imagery Project"?n="Excalibur Project":t==="3DTiles Service"?n="3D tiles layer":t==="3DTiles Package"&&(n="3D tiles package"),n}readExtent(t){return t&&t.length?new $n(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),u=e.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":u?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),h=e.includes("Relational"),i=c||h?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):i=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?i="maps":t==="web scene"?i=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?i="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?i="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?i="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?i="datafiles":t==="360 vr experience"?i="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?i="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?i="addindesktop":t==="pdf"?i="pdf":t==="microsoft word"?i="word":t==="microsoft excel"?i="excel":t==="microsoft powerpoint"?i="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?i="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?i="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?i="layersgray":t==="analysis model"?i="analysismodel":t==="scene package"?i="scenepackage":t==="3dtiles package"?i="3dtileslayerpackage":t==="3dtiles service"?i="3dtileslayer":t==="mobile scene package"?i="mobilescenepackage":t==="tile package"||t==="compact tile package"?i="tilepackage":t==="task file"?i="taskfile":t==="report template"?i="report-template":t==="statistical data collection"?i="statisticaldatacollection":t==="insights workbook"?i="workbook":t==="insights model"?i="insightsmodel":t==="insights page"?i="insightspage":t==="insights theme"?i="insightstheme":t==="hub initiative"?i="hubinitiative":t==="hub page"?i="hubpage":t==="hub site application"?i="hubsite":t==="hub event"?i="hubevent":t==="hub project"?i="hubproject":t==="relational database connection"?i="relationaldatabaseconnection":t==="big data file share"?i="datastorecollection":t==="image collection"?i="imagecollection":t==="desktop style"?i="desktopstyle":t==="style"?i=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?i="dashboard":t==="raster function template"?i="rasterprocessingtemplate":t==="vector tile package"?i="vectortilepackage":t==="ortho mapping project"?i="orthomappingproject":t==="ortho mapping template"?i="orthomappingtemplate":t==="solution"?i="solutions":t==="geopackage"?i="geopackage":t==="deep learning package"?i="deeplearningpackage":t==="real time analytic"?i="realtimeanalytics":t==="reality mapping project"?i="realitymappingproject":t==="big data analytic"?i="bigdataanalytics":t==="feed"?i="feed":t==="excalibur imagery project"?i="excaliburimageryproject":t==="notebook"?i="notebook":t==="storymap"?i="storymap":t==="survey123 add in"?i="survey123addin":t==="mission"?i="mission":t==="mission report"?i="missionreport":t==="mission template"?i="missiontemplate":t==="quickcapture project"?i="quickcaptureproject":t==="pro report"?i="proreport":t==="pro report template"?i="proreporttemplate":t==="urban model"?i="urbanmodel":t==="urban project"?i="urbanproject":t==="web experience"?i="experiencebuilder":t==="web experience template"?i="webexperiencetemplate":t==="experience builder widget"?i="experiencebuilderwidget":t==="experience builder widget package"?i="experiencebuilderwidgetpackage":t==="workflow"?i="workflow":t==="kernel gateway connection"?i="kernelgatewayconnection":t==="insights script"?i="insightsscript":t==="hub initiative template"?i="hubinitiativetemplate":t==="storymap theme"?i="storymaptheme":t==="knowledge graph"?i="knowledgegraph":t==="knowledge graph layer"?i="knowledgegraphlayer":t==="knowledge studio project"?i="knowledgestudio":t==="native application"?i="nativeapp":t==="native application installer"?i="nativeappinstaller":t==="web link chart"?i="linkchart":t==="knowledge graph web investigation"?i="investigation":t==="ogcfeatureserver"?i="features":t==="pro presentation"?i="propresentation":t==="pro project"?i="proproject":t==="insights workbook package"?i="insightsworkbookpackage":t==="apache parquet"?i="apacheparquet":t==="notebook code snippet library"?i="notebookcodesnippets":t==="suitability model"?i="suitabilitymodel":t==="esri classifier definition"?i="classifierdefinition":t==="esri classification schema"?i="classificationschema":t==="insights data engineering workbook"?i="dataengineeringworkbook":t==="insights data engineering model"?i="dataengineeringmodel":t==="deep learning studio project"?i="deeplearningproject":t==="discussion"?i="discussion":t==="allsource project"?i="allsourceproject":t==="api key"?i="apikey":t==="data pipeline"?i="datapipelines":t==="group layer"?(f=e.includes("Map"),i=f?"layergroup2d":"layergroup"):i=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",i?Bi(n+i+r+".png"):null}get isLayer(){return this.type!=null&&CFe.has(this.type)}get itemCdnUrl(){return YG(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=it.getDefault()),n=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},n=t instanceof Oy?t.rating:t;return n==null||isNaN(n)||typeof t!="number"||(e.query.rating=n),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Oy({rating:n,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ze(this.applicationProxies),avgRating:this.avgRating,categories:Ze(this.categories),classification:Ze(this.classification),created:Ze(this.created),culture:this.culture,description:this.description,extent:Ze(this.extent),groupCategories:Ze(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ze(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ze(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new K0({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const n=t[e];n&&(t[e]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Oy(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},K0)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?n.query.text=e:typeof e=="object"&&(n.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Xe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:n}=this;await e.signIn();const{copyResources:r,folder:i,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:l}=await e.request(`${n}/copy`,a);return new K0({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,n=t.filename,r={method:"post"};if(typeof e=="string")iv(e)?r.query={data:e}:r.query={url:Hc(e)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",e,n):i.append("file",e),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:n}=await _e(()=>import("./resourceUtils-GUMJTbU_.js"),[]);return n(this,t,e)}async addResource(t,e,n){const{addOrUpdateResources:r}=await _e(()=>import("./resourceUtils-GUMJTbU_.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:n?.compress,access:n?.access}],"add",n),t}async removeResource(t,e){const{removeResource:n}=await _e(()=>import("./resourceUtils-GUMJTbU_.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Xe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await _e(()=>import("./resourceUtils-GUMJTbU_.js"),[]);return e(this,t)}resourceFromPath(t){return new mf({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:Ze(this.categories),classification:Ze(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};return MDe(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new K0({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};_([E({type:["private","shared","org","public"]})],vn.prototype,"access",void 0),_([E()],vn.prototype,"accessInformation",void 0),_([E({type:String})],vn.prototype,"apiKey",void 0),_([E({json:{read:{source:"appProxies"}}})],vn.prototype,"applicationProxies",void 0),_([E()],vn.prototype,"avgRating",void 0),_([E()],vn.prototype,"categories",void 0),_([E()],vn.prototype,"classification",void 0),_([E({type:Date})],vn.prototype,"created",void 0),_([E()],vn.prototype,"culture",void 0),_([E()],vn.prototype,"description",void 0),_([E({readOnly:!0})],vn.prototype,"displayName",null),_([E({type:$n})],vn.prototype,"extent",void 0),_([lr("extent")],vn.prototype,"readExtent",null),_([E()],vn.prototype,"groupCategories",void 0),_([E({readOnly:!0})],vn.prototype,"iconUrl",null),_([E()],vn.prototype,"id",void 0),_([E({readOnly:!0})],vn.prototype,"isLayer",null),_([E({type:Boolean,readOnly:!0})],vn.prototype,"isOrgItem",void 0),_([E()],vn.prototype,"itemControl",void 0),_([E({readOnly:!0})],vn.prototype,"itemPageUrl",null),_([E({readOnly:!0})],vn.prototype,"itemUrl",null),_([E()],vn.prototype,"licenseInfo",void 0),_([E({type:Date})],vn.prototype,"modified",void 0),_([E()],vn.prototype,"name",void 0),_([E()],vn.prototype,"numComments",void 0),_([E()],vn.prototype,"numRatings",void 0),_([E()],vn.prototype,"numViews",void 0),_([E()],vn.prototype,"owner",void 0),_([E()],vn.prototype,"ownerFolder",void 0),_([E({type:it})],vn.prototype,"portal",void 0),_([E()],vn.prototype,"screenshots",void 0),_([E()],vn.prototype,"size",void 0),_([E()],vn.prototype,"snippet",void 0),_([E()],vn.prototype,"sourceJSON",void 0),_([E({type:String})],vn.prototype,"sourceUrl",void 0),_([E({type:String})],vn.prototype,"spatialReference",void 0),_([E()],vn.prototype,"tags",void 0),_([E()],vn.prototype,"thumbnail",void 0),_([E({readOnly:!0})],vn.prototype,"thumbnailUrl",null),_([E()],vn.prototype,"title",void 0),_([E()],vn.prototype,"type",void 0),_([E()],vn.prototype,"typeKeywords",void 0),_([E({type:String,json:{read(t,e){if(MFe.has(e.type)){const n=this.portal?.restUrl;t||=n&&this.id?`${n}/content/items/${this.id}/data`:null}return t}}})],vn.prototype,"url",void 0),_([E({readOnly:!0})],vn.prototype,"userItemUrl",null),vn=K0=_([ue("esri.portal.PortalItem")],vn);const Upe=Object.freeze(Object.defineProperty({__proto__:null,get default(){return vn}},Symbol.toStringTag,{value:"Module"})),Gpe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function NFe(t){return t in Gpe}function _ee(t){if(NFe(t)){const e=Gpe[t];return e===!0?t:e}return null}const iS=[],Yx=new Map;function xee(t){for(const e of Yx.keys())Hpe(t.pattern,e)&&Yx.delete(e)}function OFe(t){return iS.includes(t)||(xee(t),iS.unshift(t)),Kn(()=>{const e=iS.indexOf(t);e>-1&&(iS.splice(e,1),xee(t))})}async function Bpe(t){const e=iu();Yx.has(t)||Yx.set(t,LFe(t,e));const n=Yx.get(t);return n&&await DFe.add(n),n}function Wpe(t){const e=wB(t);return e?_ee(t)??_ee(e):null}async function LFe(t,e){const n=[];for(const r of iS)if(Hpe(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(i){n.push(i)}throw n.length?new Xe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:n}):new Xe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function Hpe(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}bB(()=>{Yx.clear()});const DFe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=fc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function $Fe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,n=await Bpe("esri/t9n/basemaps");return n[t]||n[e]}const n9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Bi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Bi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Bi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Bi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Bi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Bi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Nd="system",EB="unknown",Nk="UTC",jFe=Intl.DateTimeFormat().resolvedOptions().timeZone,wee=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class av extends Error{}class FFe extends av{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class VFe extends av{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class zFe extends av{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class gx extends av{}class qpe extends av{constructor(e){super(`Invalid unit ${e}`)}}class ea extends av{}class hm extends av{constructor(){super("Zone is an abstract class")}}const Ct="numeric",fh="short",lc="long",D4={year:Ct,month:Ct,day:Ct},Kpe={year:Ct,month:fh,day:Ct},UFe={year:Ct,month:fh,day:Ct,weekday:fh},Ype={year:Ct,month:lc,day:Ct},Xpe={year:Ct,month:lc,day:Ct,weekday:lc},Zpe={hour:Ct,minute:Ct},Jpe={hour:Ct,minute:Ct,second:Ct},Qpe={hour:Ct,minute:Ct,second:Ct,timeZoneName:fh},eme={hour:Ct,minute:Ct,second:Ct,timeZoneName:lc},tme={hour:Ct,minute:Ct,hourCycle:"h23"},nme={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23"},rme={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:fh},ime={hour:Ct,minute:Ct,second:Ct,hourCycle:"h23",timeZoneName:lc},sme={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct},ome={year:Ct,month:Ct,day:Ct,hour:Ct,minute:Ct,second:Ct},ame={year:Ct,month:fh,day:Ct,hour:Ct,minute:Ct},lme={year:Ct,month:fh,day:Ct,hour:Ct,minute:Ct,second:Ct},GFe={year:Ct,month:fh,day:Ct,weekday:fh,hour:Ct,minute:Ct},cme={year:Ct,month:lc,day:Ct,hour:Ct,minute:Ct,timeZoneName:fh},ume={year:Ct,month:lc,day:Ct,hour:Ct,minute:Ct,second:Ct,timeZoneName:fh},hme={year:Ct,month:lc,day:Ct,weekday:lc,hour:Ct,minute:Ct,timeZoneName:lc},dme={year:Ct,month:lc,day:Ct,weekday:lc,hour:Ct,minute:Ct,second:Ct,timeZoneName:lc};class hI{get type(){throw new hm}get name(){throw new hm}get ianaName(){return this.name}get isUniversal(){throw new hm}offsetName(e,n){throw new hm}formatOffset(e,n){throw new hm}offset(e){throw new hm}equals(e){throw new hm}get isValid(){throw new hm}}let x$=null;class EO extends hI{static get instance(){return x$===null&&(x$=new EO),x$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Eme(e,n,r)}formatOffset(e,n){return aT(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const r9=new Map;function BFe(t){let e=r9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),r9.set(t,e)),e}const WFe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function HFe(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function qFe(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=WFe[s];s==="era"?r[a]=o:Sn(a)||(r[a]=parseInt(o,10))}return r}const w$=new Map;class ph extends hI{static create(e){let n=w$.get(e);return n===void 0&&w$.set(e,n=new ph(e)),n}static resetCache(){w$.clear(),r9.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=ph.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Eme(e,n,r,this.name)}formatOffset(e,n){return aT(this.offset(e),n)}offset(e){if(!this.valid)return NaN;const n=new Date(e);if(isNaN(n))return NaN;const r=BFe(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?qFe(r,n):HFe(r,n);a==="BC"&&(i=-Math.abs(i)+1);const f=TO({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let g=+n;const v=g%1e3;return g-=v>=0?v:1e3+v,(f-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let bee={};function KFe(t,e={}){const n=JSON.stringify([t,e]);let r=bee[n];return r||(r=new Intl.ListFormat(t,e),bee[n]=r),r}const i9=new Map;function s9(t,e={}){const n=JSON.stringify([t,e]);let r=i9.get(n);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),i9.set(n,r)),r}const o9=new Map;function YFe(t,e={}){const n=JSON.stringify([t,e]);let r=o9.get(n);return r===void 0&&(r=new Intl.NumberFormat(t,e),o9.set(n,r)),r}const a9=new Map;function XFe(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=a9.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),a9.set(i,s)),s}let sS=null;function ZFe(){return sS||(sS=new Intl.DateTimeFormat().resolvedOptions().locale,sS)}const l9=new Map;function fme(t){let e=l9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),l9.set(t,e)),e}const c9=new Map;function JFe(t){let e=c9.get(t);if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in e||(e={...pme,...e}),c9.set(t,e)}return e}function QFe(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=s9(t).resolvedOptions(),i=t}catch{const l=t.substring(0,n);r=s9(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function e9e(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function t9e(t){const e=[];for(let n=1;n<=12;n++){const r=hn.utc(2009,n,1);e.push(t(r))}return e}function n9e(t){const e=[];for(let n=1;n<=7;n++){const r=hn.utc(2016,11,13+n);e.push(t(r))}return e}function ER(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function r9e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||fme(t.locale).numberingSystem==="latn"}class i9e{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=YFe(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):IB(e,3);return xs(n,this.padTo)}}}class s9e{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&ph.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=s9(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class o9e{constructor(e,n,r){this.opts={style:"long",...r},!n&&wme()&&(this.rtf=XFe(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):I9e(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const pme={firstDay:1,minimalDays:4,weekend:[6,7]};class Or{static fromOpts(e){return Or.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||qi.defaultLocale,a=o||(s?"en-US":ZFe()),l=n||qi.defaultNumberingSystem,c=r||qi.defaultOutputCalendar,u=h9(i)||qi.defaultWeekSettings;return new Or(a,l,c,u,o)}static resetCache(){sS=null,i9.clear(),o9.clear(),a9.clear(),l9.clear(),c9.clear()}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Or.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,l]=QFe(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=e9e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=r9e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Or.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,h9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return ER(this,e,kme,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");n&=!r;const i=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=t9e(o)}return this.monthsCache[s][e]})}weekdays(e,n=!1){return ER(this,e,Pme,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=n9e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return ER(this,void 0,()=>Rme,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[hn.utc(2016,11,13,9),hn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return ER(this,e,Cme,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[hn.utc(-40,1,1),hn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new i9e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new s9e(e,this.intl,n)}relFormatter(e={}){return new o9e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return KFe(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||fme(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bme()?JFe(this.locale):pme}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let b$=null;class ca extends hI{static get utcInstance(){return b$===null&&(b$=new ca(0)),b$}static instance(e){return e===0?ca.utcInstance:new ca(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new ca(kO(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${aT(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${aT(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return aT(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class a9e extends hI{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Um(t,e){if(Sn(t)||t===null)return e;if(t instanceof hI)return t;if(f9e(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?EO.instance:n==="utc"||n==="gmt"?ca.utcInstance:ca.parseSpecifier(n)||ph.create(t)}else return _g(t)?ca.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new a9e(t)}const SB={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Eee={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},l9e=SB.hanidec.replace(/[\[|\]]/g,"").split("");function c9e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(SB.hanidec)!==-1)e+=l9e.indexOf(t[n]);else for(const i in Eee){const[s,o]=Eee[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const u9=new Map;function u9e(){u9.clear()}function Ru({numberingSystem:t},e=""){const n=t||"latn";let r=u9.get(n);r===void 0&&(r=new Map,u9.set(n,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${SB[n]}${e}`),r.set(e,i)),i}let See=()=>Date.now(),Tee="system",kee=null,Aee=null,Iee=null,Pee=60,Ree,Cee=null,qi=class{static get now(){return See}static set now(e){See=e}static set defaultZone(e){Tee=e}static get defaultZone(){return Um(Tee,EO.instance)}static get defaultLocale(){return kee}static set defaultLocale(e){kee=e}static get defaultNumberingSystem(){return Aee}static set defaultNumberingSystem(e){Aee=e}static get defaultOutputCalendar(){return Iee}static set defaultOutputCalendar(e){Iee=e}static get defaultWeekSettings(){return Cee}static set defaultWeekSettings(e){Cee=h9(e)}static get twoDigitCutoffYear(){return Pee}static set twoDigitCutoffYear(e){Pee=e%100}static get throwOnInvalid(){return Ree}static set throwOnInvalid(e){Ree=e}static resetCaches(){Or.resetCache(),ph.resetCache(),hn.resetCache(),u9e()}};class th{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mme=[0,31,59,90,120,151,181,212,243,273,304,334],gme=[0,31,60,91,121,152,182,213,244,274,305,335];function Jc(t,e){return new th("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function TB(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function yme(t,e,n){return n+(dI(t)?gme:mme)[e-1]}function vme(t,e){const n=dI(t)?gme:mme,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function kB(t,e){return(t-e+7)%7+1}function $4(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=yme(r,i,s),a=kB(TB(r,i,s),n);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=Ok(c,e,n)):l>Ok(r,e,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...AO(t)}}function Mee(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=kB(TB(r,1,e),n),a=Xx(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=Xx(c)):l>a?(c=r+1,l-=Xx(r)):c=r;const{month:u,day:h}=vme(c,l);return{year:c,month:u,day:h,...AO(t)}}function E$(t){const{year:e,month:n,day:r}=t,i=yme(e,n,r);return{year:e,ordinal:i,...AO(t)}}function Nee(t){const{year:e,ordinal:n}=t,{month:r,day:i}=vme(e,n);return{year:e,month:r,day:i,...AO(t)}}function Oee(t,e){if(!Sn(t.localWeekday)||!Sn(t.localWeekNumber)||!Sn(t.localWeekYear)){if(!Sn(t.weekday)||!Sn(t.weekNumber)||!Sn(t.weekYear))throw new gx("Cannot mix locale-based week fields with ISO-based week fields");return Sn(t.localWeekday)||(t.weekday=t.localWeekday),Sn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Sn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function h9e(t,e=4,n=1){const r=SO(t.weekYear),i=Qc(t.weekNumber,1,Ok(t.weekYear,e,n)),s=Qc(t.weekday,1,7);return r?i?s?!1:Jc("weekday",t.weekday):Jc("week",t.weekNumber):Jc("weekYear",t.weekYear)}function d9e(t){const e=SO(t.year),n=Qc(t.ordinal,1,Xx(t.year));return e?n?!1:Jc("ordinal",t.ordinal):Jc("year",t.year)}function _me(t){const e=SO(t.year),n=Qc(t.month,1,12),r=Qc(t.day,1,j4(t.year,t.month));return e?n?r?!1:Jc("day",t.day):Jc("month",t.month):Jc("year",t.year)}function xme(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=Qc(e,0,23)||e===24&&n===0&&r===0&&i===0,o=Qc(n,0,59),a=Qc(r,0,59),l=Qc(i,0,999);return s?o?a?l?!1:Jc("millisecond",i):Jc("second",r):Jc("minute",n):Jc("hour",e)}function Sn(t){return typeof t>"u"}function _g(t){return typeof t=="number"}function SO(t){return typeof t=="number"&&t%1===0}function f9e(t){return typeof t=="string"}function p9e(t){return Object.prototype.toString.call(t)==="[object Date]"}function wme(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bme(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function m9e(t){return Array.isArray(t)?t:[t]}function Lee(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function g9e(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function p2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h9(t){if(t==null)return null;if(typeof t!="object")throw new ea("Week settings must be an object");if(!Qc(t.firstDay,1,7)||!Qc(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Qc(e,1,7)))throw new ea("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Qc(t,e,n){return SO(t)&&t>=e&&t<=n}function y9e(t,e){return t-e*Math.floor(t/e)}function xs(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Nm(t){if(!(Sn(t)||t===null||t===""))return parseInt(t,10)}function C0(t){if(!(Sn(t)||t===null||t===""))return parseFloat(t)}function AB(t){if(!(Sn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function IB(t,e,n="round"){const r=10**e;switch(n){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function dI(t){return t%4===0&&(t%100!==0||t%400===0)}function Xx(t){return dI(t)?366:365}function j4(t,e){const n=y9e(e-1,12)+1,r=t+(e-n)/12;return n===2?dI(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function TO(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Dee(t,e,n){return-kB(TB(t,1,e),n)+e-1}function Ok(t,e=4,n=1){const r=Dee(t,e,n),i=Dee(t+1,e,n);return(Xx(t)-r+i)/7}function d9(t){return t>99?t:t>qi.twoDigitCutoffYear?1900+t:2e3+t}function Eme(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function kO(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Sme(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new ea(`Invalid unit value ${t}`);return e}function F4(t,e){const n={};for(const r in t)if(p2(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=Sme(i)}return n}function aT(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${xs(n,2)}:${xs(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${xs(n,2)}${xs(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function AO(t){return g9e(t,["hour","minute","second","millisecond"])}const v9e=["January","February","March","April","May","June","July","August","September","October","November","December"],Tme=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_9e=["J","F","M","A","M","J","J","A","S","O","N","D"];function kme(t){switch(t){case"narrow":return[..._9e];case"short":return[...Tme];case"long":return[...v9e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Ame=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ime=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],x9e=["M","T","W","T","F","S","S"];function Pme(t){switch(t){case"narrow":return[...x9e];case"short":return[...Ime];case"long":return[...Ame];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Rme=["AM","PM"],w9e=["Before Christ","Anno Domini"],b9e=["BC","AD"],E9e=["B","A"];function Cme(t){switch(t){case"narrow":return[...E9e];case"short":return[...b9e];case"long":return[...w9e];default:return null}}function S9e(t){return Rme[t.hour<12?0:1]}function T9e(t,e){return Pme(e)[t.weekday-1]}function k9e(t,e){return kme(e)[t.month-1]}function A9e(t,e){return Cme(e)[t.year<0?0:1]}function I9e(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[t],u=r?l?c[1]:c[2]||c[1]:l?i[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function $ee(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const P9e={D:D4,DD:Kpe,DDD:Ype,DDDD:Xpe,t:Zpe,tt:Jpe,ttt:Qpe,tttt:eme,T:tme,TT:nme,TTT:rme,TTTT:ime,f:sme,ff:ame,fff:cme,ffff:hme,F:ome,FF:lme,FFF:ume,FFFF:dme};class aa{static create(e,n={}){return new aa(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||i)&&s.push({literal:i||/^\s+$/.test(r),val:r===""?"'":r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return P9e[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0,r=void 0){if(this.opts.forceSimple)return xs(e,n);const i={...this.opts};return n>0&&(i.padTo=n),r&&(i.signDisplay=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,v)=>this.loc.extract(e,g,v),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?S9e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,v)=>r?k9e(e,g):s(v?{month:g}:{month:g,day:"numeric"},"month"),c=(g,v)=>r?T9e(e,g):s(v?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),u=g=>{const v=aa.macroTokenToFormatOpts(g);return v?this.formatWithSystemDefault(e,v):g},h=g=>r?A9e(e,g):s({era:g},"era"),f=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(g)}};return $ee(aa.parseFormat(n),f)}formatDurationFromString(e,n){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(u,h)=>f=>{const g=i(f);if(g){const v=h.isNegativeDuration&&g!==h.largestUnit?r:1;let x;return this.opts.signMode==="negativeLargestOnly"&&g!==h.largestUnit?x="never":this.opts.signMode==="all"?x="always":x="auto",this.num(u.get(g)*v,f.length,x)}else return f},o=aa.parseFormat(n),a=o.reduce((u,{literal:h,val:f})=>h?u:u.concat(f),[]),l=e.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return $ee(o,s(l,c))}}const Mme=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function sb(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function ob(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,l]=s(e,i);return[{...n,...o},a||r,l]},[{},null,1]).slice(0,2)}function ab(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function Nme(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Nm(e[n+i]);return[r,null,n+i]}}const Ome=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,R9e=`(?:${Ome.source}?(?:\\[(${Mme.source})\\])?)?`,PB=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Lme=RegExp(`${PB.source}${R9e}`),RB=RegExp(`(?:[Tt]${Lme.source})?`),C9e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,M9e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,N9e=/(\d{4})-?(\d{3})/,O9e=Nme("weekYear","weekNumber","weekDay"),L9e=Nme("year","ordinal"),D9e=/(\d{4})-(\d\d)-(\d\d)/,Dme=RegExp(`${PB.source} ?(?:${Ome.source}|(${Mme.source}))?`),$9e=RegExp(`(?: ${Dme.source})?`);function Zx(t,e,n){const r=t[e];return Sn(r)?n:Nm(r)}function j9e(t,e){return[{year:Zx(t,e),month:Zx(t,e+1,1),day:Zx(t,e+2,1)},null,e+3]}function lb(t,e){return[{hours:Zx(t,e,0),minutes:Zx(t,e+1,0),seconds:Zx(t,e+2,0),milliseconds:AB(t[e+3])},null,e+4]}function fI(t,e){const n=!t[e]&&!t[e+1],r=kO(t[e+1],t[e+2]),i=n?null:ca.instance(r);return[{},i,e+3]}function pI(t,e){const n=t[e]?ph.create(t[e]):null;return[{},n,e+1]}const F9e=RegExp(`^T?${PB.source}$`),V9e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function z9e(t){const[e,n,r,i,s,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",f=(g,v=!1)=>g!==void 0&&(v||g&&u)?-g:g;return[{years:f(C0(n)),months:f(C0(r)),weeks:f(C0(i)),days:f(C0(s)),hours:f(C0(o)),minutes:f(C0(a)),seconds:f(C0(l),l==="-0"),milliseconds:f(AB(c),h)}]}const U9e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function CB(t,e,n,r,i,s,o){const a={year:e.length===2?d9(Nm(e)):Nm(e),month:Tme.indexOf(n)+1,day:Nm(r),hour:Nm(i),minute:Nm(s)};return o&&(a.second=Nm(o)),t&&(a.weekday=t.length>3?Ame.indexOf(t)+1:Ime.indexOf(t)+1),a}const G9e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function B9e(t){const[,e,n,r,i,s,o,a,l,c,u,h]=t,f=CB(e,i,r,n,s,o,a);let g;return l?g=U9e[l]:c?g=0:g=kO(u,h),[f,new ca(g)]}function W9e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const H9e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,q9e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,K9e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function jee(t){const[,e,n,r,i,s,o,a]=t;return[CB(e,i,r,n,s,o,a),ca.utcInstance]}function Y9e(t){const[,e,n,r,i,s,o,a]=t;return[CB(e,a,n,r,i,s,o),ca.utcInstance]}const X9e=sb(C9e,RB),Z9e=sb(M9e,RB),J9e=sb(N9e,RB),Q9e=sb(Lme),$me=ob(j9e,lb,fI,pI),e7e=ob(O9e,lb,fI,pI),t7e=ob(L9e,lb,fI,pI),n7e=ob(lb,fI,pI);function r7e(t){return ab(t,[X9e,$me],[Z9e,e7e],[J9e,t7e],[Q9e,n7e])}function i7e(t){return ab(W9e(t),[G9e,B9e])}function s7e(t){return ab(t,[H9e,jee],[q9e,jee],[K9e,Y9e])}function o7e(t){return ab(t,[V9e,z9e])}const a7e=ob(lb);function l7e(t){return ab(t,[F9e,a7e])}const c7e=sb(D9e,$9e),u7e=sb(Dme),h7e=ob(lb,fI,pI);function d7e(t){return ab(t,[c7e,$me],[u7e,h7e])}const Fee="Invalid Duration",jme={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},f7e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...jme},Ac=146097/400,d_=146097/4800,p7e={years:{quarters:4,months:12,weeks:Ac/7,days:Ac,hours:Ac*24,minutes:Ac*24*60,seconds:Ac*24*60*60,milliseconds:Ac*24*60*60*1e3},quarters:{months:3,weeks:Ac/28,days:Ac/4,hours:Ac*24/4,minutes:Ac*24*60/4,seconds:Ac*24*60*60/4,milliseconds:Ac*24*60*60*1e3/4},months:{weeks:d_/7,days:d_,hours:d_*24,minutes:d_*24*60,seconds:d_*24*60*60,milliseconds:d_*24*60*60*1e3},...jme},Ly=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],m7e=Ly.slice(0).reverse();function of(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new pr(r)}function Fme(t,e){let n=e.milliseconds??0;for(const r of m7e.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function Vee(t,e){const n=Fme(t,e)<0?-1:1;Ly.reduceRight((r,i)=>{if(Sn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),Ly.reduce((r,i)=>{if(Sn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function zee(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class pr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?p7e:f7e;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Or.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return pr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ea(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new pr({values:F4(e,pr.normalizeUnit),loc:Or.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(_g(e))return pr.fromMillis(e);if(pr.isDuration(e))return e;if(typeof e=="object")return pr.fromObject(e);throw new ea(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=o7e(e);return r?pr.fromObject(r,n):pr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=l7e(e);return r?pr.fromObject(r,n):pr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ea("need to specify a reason the Duration is invalid");const r=e instanceof th?e:new th(e,n);if(qi.throwOnInvalid)throw new zFe(r);return new pr({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new qpe(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?aa.create(this.loc,r).formatDurationFromString(this,e):Fee}toHuman(e={}){if(!this.isValid)return Fee;const n=e.showZeros!==!1,r=Ly.map(i=>{const s=this.values[i];return Sn(s)||s===0&&!n?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=IB(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},hn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Fme(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=pr.fromDurationLike(e),r={};for(const i of Ly)(p2(n.values,i)||p2(this.values,i))&&(r[i]=n.get(i)+this.get(i));return of(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=pr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=Sme(e(this.values[r],r));return of(this,{values:n},!0)}get(e){return this[pr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...F4(e,pr.normalizeUnit)};return of(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return of(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Vee(this.matrix,e),of(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=zee(this.normalize().shiftToAll().toObject());return of(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>pr.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of Ly)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;_g(i[o])&&(a+=i[o]);const l=Math.trunc(a);n[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else _g(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Vee(this.matrix,n),of(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return of(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=zee(this.values);return of(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of Ly)if(!n(this.values[r],e.values[r]))return!1;return!0}}const f_="Invalid Interval";function g7e(t,e){return!t||!t.isValid?Wi.invalid("missing or invalid start"):!e||!e.isValid?Wi.invalid("missing or invalid end"):e<t?Wi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Wi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ea("need to specify a reason the Interval is invalid");const r=e instanceof th?e:new th(e,n);if(qi.throwOnInvalid)throw new VFe(r);return new Wi({invalid:r})}static fromDateTimes(e,n){const r=EE(e),i=EE(n),s=g7e(r,i);return s??new Wi({start:r,end:i})}static after(e,n){const r=pr.fromDurationLike(n),i=EE(e);return Wi.fromDateTimes(i,i.plus(r))}static before(e,n){const r=pr.fromDurationLike(n),i=EE(e);return Wi.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=hn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,l;try{a=hn.fromISO(i,n),l=a.isValid}catch{l=!1}if(o&&l)return Wi.fromDateTimes(s,a);if(o){const c=pr.fromISO(i,n);if(c.isValid)return Wi.after(s,c)}else if(l){const c=pr.fromISO(r,n);if(c.isValid)return Wi.before(a,c)}}return Wi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Wi.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(EE).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(Wi.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=pr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(Wi.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:Wi.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return Wi.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push(Wi.fromDateTimes(n,l.time)),n=null);return Wi.merge(i)}difference(...e){return Wi.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:f_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=D4,n={}){return this.isValid?aa.create(this.s.loc.clone(n),e).formatInterval(this):f_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:f_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:f_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:f_}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:f_}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):pr.invalid(this.invalidReason)}mapEndpoints(e){return Wi.fromDateTimes(e(this.s),e(this.e))}}let SR=class{static hasDST(e=qi.defaultZone){const n=hn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return ph.isValidZone(e)}static normalizeZone(e){return Um(e,qi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Or.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Or.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Or.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Or.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Or.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Or.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Or.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Or.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Or.create(n,null,"gregory").eras(e)}static features(){return{relative:wme(),localeWeek:bme()}}};function Uee(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(pr.fromMillis(r).as("days"))}function y7e(t,e,n){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Uee(l,c);return(u-u%7)/7}],["days",Uee]],i={},s=t;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,i[l]=c(t,e),a=s.plus(i),a>e?(i[l]--,t=s.plus(i),t>e&&(a=t,i[l]--,t=s.plus(i))):t=a);return[t,i,a,o]}function v7e(t,e,n,r){let[i,s,o,a]=y7e(t,e,n);const l=e-i,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=pr.fromObject(s,r);return c.length>0?pr.fromMillis(l,r).shiftTo(...c).plus(u):u}const _7e="missing Intl.DateTimeFormat.formatToParts support";function wr(t,e=n=>n){return{regex:t,deser:([n])=>e(c9e(n))}}const x7e="",Vme=`[ ${x7e}]`,zme=new RegExp(Vme,"g");function w7e(t){return t.replace(/\./g,"\\.?").replace(zme,Vme)}function Gee(t){return t.replace(/\./g,"").replace(zme," ").toLowerCase()}function Cu(t,e){return t===null?null:{regex:RegExp(t.map(w7e).join("|")),deser:([n])=>t.findIndex(r=>Gee(n)===Gee(r))+e}}function Bee(t,e){return{regex:t,deser:([,n,r])=>kO(n,r),groups:e}}function TR(t){return{regex:t,deser:([e])=>e}}function b7e(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function E7e(t,e){const n=Ru(e),r=Ru(e,"{2}"),i=Ru(e,"{3}"),s=Ru(e,"{4}"),o=Ru(e,"{6}"),a=Ru(e,"{1,2}"),l=Ru(e,"{1,3}"),c=Ru(e,"{1,6}"),u=Ru(e,"{1,9}"),h=Ru(e,"{2,4}"),f=Ru(e,"{4,6}"),g=b=>({regex:RegExp(b7e(b.val)),deser:([T])=>T,literal:!0}),x=(b=>{if(t.literal)return g(b);switch(b.val){case"G":return Cu(e.eras("short"),0);case"GG":return Cu(e.eras("long"),0);case"y":return wr(c);case"yy":return wr(h,d9);case"yyyy":return wr(s);case"yyyyy":return wr(f);case"yyyyyy":return wr(o);case"M":return wr(a);case"MM":return wr(r);case"MMM":return Cu(e.months("short",!0),1);case"MMMM":return Cu(e.months("long",!0),1);case"L":return wr(a);case"LL":return wr(r);case"LLL":return Cu(e.months("short",!1),1);case"LLLL":return Cu(e.months("long",!1),1);case"d":return wr(a);case"dd":return wr(r);case"o":return wr(l);case"ooo":return wr(i);case"HH":return wr(r);case"H":return wr(a);case"hh":return wr(r);case"h":return wr(a);case"mm":return wr(r);case"m":return wr(a);case"q":return wr(a);case"qq":return wr(r);case"s":return wr(a);case"ss":return wr(r);case"S":return wr(l);case"SSS":return wr(i);case"u":return TR(u);case"uu":return TR(a);case"uuu":return wr(n);case"a":return Cu(e.meridiems(),0);case"kkkk":return wr(s);case"kk":return wr(h,d9);case"W":return wr(a);case"WW":return wr(r);case"E":case"c":return wr(n);case"EEE":return Cu(e.weekdays("short",!1),1);case"EEEE":return Cu(e.weekdays("long",!1),1);case"ccc":return Cu(e.weekdays("short",!0),1);case"cccc":return Cu(e.weekdays("long",!0),1);case"Z":case"ZZ":return Bee(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Bee(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return TR(/[a-z_+-/]{1,256}?/i);case" ":return TR(/[^\S\n\r]/);default:return g(b)}})(t)||{invalidReason:_7e};return x.token=t,x}const S7e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function T7e(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=S7e[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function k7e(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function A7e(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(p2(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function I7e(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return Sn(t.z)||(n=ph.create(t.z)),Sn(t.Z)||(n||(n=new ca(t.Z)),r=t.Z),Sn(t.q)||(t.M=(t.q-1)*3+1),Sn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Sn(t.u)||(t.S=AB(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let S$=null;function P7e(){return S$||(S$=hn.fromMillis(1555555555555)),S$}function R7e(t,e){if(t.literal)return t;const n=aa.macroTokenToFormatOpts(t.val),r=Wme(n,e);return r==null||r.includes(void 0)?t:r}function Ume(t,e){return Array.prototype.concat(...t.map(n=>R7e(n,e)))}class Gme{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=Ume(aa.parseFormat(n),e),this.units=this.tokens.map(r=>E7e(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=k7e(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=A7e(e,this.regex,this.handlers),[i,s,o]=r?I7e(r):[null,null,void 0];if(p2(r,"a")&&p2(r,"H"))throw new gx("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Bme(t,e,n){return new Gme(t,n).explainFromTokens(e)}function C7e(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=Bme(t,e,n);return[r,i,s,o]}function Wme(t,e){if(!t)return null;const r=aa.create(e,t).dtFormatter(P7e()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>T7e(o,t,s))}const T$="Invalid DateTime",Wee=864e13;function oS(t){return new th("unsupported zone",`the zone "${t.name}" is not supported`)}function k$(t){return t.weekData===null&&(t.weekData=$4(t.c)),t.weekData}function A$(t){return t.localWeekData===null&&(t.localWeekData=$4(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function M0(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new hn({...n,...e,old:n})}function Hme(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function kR(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function cM(t,e,n){return Hme(TO(t),e,n)}function Hee(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,j4(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=pr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=TO(s);let[l,c]=Hme(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function p_(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=hn.fromObject(t,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return hn.invalid(new th("unparsable",`the input "${i}" can't be parsed as ${r}`))}function AR(t,e,n=!0){return t.isValid?aa.create(Or.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function I$(t,e,n){const r=t.c.year>9999||t.c.year<0;let i="";if(r&&t.c.year>=0&&(i+="+"),i+=xs(t.c.year,r?6:4),n==="year")return i;if(e){if(i+="-",i+=xs(t.c.month),n==="month")return i;i+="-"}else if(i+=xs(t.c.month),n==="month")return i;return i+=xs(t.c.day),i}function qee(t,e,n,r,i,s,o){let a=!n||t.c.millisecond!==0||t.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=xs(t.c.hour),o==="hour")break;if(e){if(l+=":",l+=xs(t.c.minute),o==="minute")break;a&&(l+=":",l+=xs(t.c.second))}else{if(l+=xs(t.c.minute),o==="minute")break;a&&(l+=xs(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(l+=".",l+=xs(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=xs(Math.trunc(-t.o/60)),l+=":",l+=xs(Math.trunc(-t.o%60))):(l+="+",l+=xs(Math.trunc(t.o/60)),l+=":",l+=xs(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const qme={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},M7e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},N7e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},uM=["year","month","day","hour","minute","second","millisecond"],O7e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],L7e=["year","ordinal","hour","minute","second","millisecond"];function hM(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new qpe(t);return e}function Kee(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return hM(t)}}function D7e(t){if(aS===void 0&&(aS=qi.now()),t.type!=="iana")return t.offset(aS);const e=t.name;let n=f9.get(e);return n===void 0&&(n=t.offset(aS),f9.set(e,n)),n}function Yee(t,e){const n=Um(e.zone,qi.defaultZone);if(!n.isValid)return hn.invalid(oS(n));const r=Or.fromObject(e);let i,s;if(Sn(t.year))i=qi.now();else{for(const l of uM)Sn(t[l])&&(t[l]=qme[l]);const o=_me(t)||xme(t);if(o)return hn.invalid(o);const a=D7e(n);[i,s]=cM(t,a,n)}return new hn({ts:i,zone:n,loc:r,o:s})}function Xee(t,e,n){const r=Sn(n.round)?!0:n.round,i=Sn(n.rounding)?"trunc":n.rounding,s=(a,l)=>(a=IB(a,r||n.calendary?0:2,n.calendary?"round":i),e.loc.clone(n).relFormatter(n).format(a,l)),o=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(o(n.unit),n.unit);for(const a of n.units){const l=o(a);if(Math.abs(l)>=1)return s(l,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function Zee(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let aS;const f9=new Map;class hn{constructor(e){const n=e.zone||qi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new th("invalid input"):null)||(n.isValid?null:oS(n));this.ts=Sn(e.ts)?qi.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=_g(e.o)&&!e.old?e.o:n.offset(this.ts);i=kR(this.ts,a),r=Number.isNaN(i.year)?new th("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Or.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new hn({})}static local(){const[e,n]=Zee(arguments),[r,i,s,o,a,l,c]=n;return Yee({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=Zee(arguments),[r,i,s,o,a,l,c]=n;return e.zone=ca.utcInstance,Yee({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const r=p9e(e)?e.valueOf():NaN;if(Number.isNaN(r))return hn.invalid("invalid input");const i=Um(n.zone,qi.defaultZone);return i.isValid?new hn({ts:r,zone:i,loc:Or.fromObject(n)}):hn.invalid(oS(i))}static fromMillis(e,n={}){if(_g(e))return e<-Wee||e>Wee?hn.invalid("Timestamp out of range"):new hn({ts:e,zone:Um(n.zone,qi.defaultZone),loc:Or.fromObject(n)});throw new ea(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(_g(e))return new hn({ts:e*1e3,zone:Um(n.zone,qi.defaultZone),loc:Or.fromObject(n)});throw new ea("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Um(n.zone,qi.defaultZone);if(!r.isValid)return hn.invalid(oS(r));const i=Or.fromObject(n),s=F4(e,Kee),{minDaysInFirstWeek:o,startOfWeek:a}=Oee(s,i),l=qi.now(),c=Sn(n.specificOffset)?r.offset(l):n.specificOffset,u=!Sn(s.ordinal),h=!Sn(s.year),f=!Sn(s.month)||!Sn(s.day),g=h||f,v=s.weekYear||s.weekNumber;if((g||u)&&v)throw new gx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new gx("Can't mix ordinal dates with month/day");const x=v||s.weekday&&!g;let b,T,A=kR(l,c);x?(b=O7e,T=M7e,A=$4(A,o,a)):u?(b=L7e,T=N7e,A=E$(A)):(b=uM,T=qme);let I=!1;for(const j of b){const V=s[j];Sn(V)?I?s[j]=T[j]:s[j]=A[j]:I=!0}const P=x?h9e(s,o,a):u?d9e(s):_me(s),M=P||xme(s);if(M)return hn.invalid(M);const F=x?Mee(s,o,a):u?Nee(s):s,[C,N]=cM(F,c,r),O=new hn({ts:C,zone:r,o:N,loc:i});return s.weekday&&g&&e.weekday!==O.weekday?hn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:hn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=r7e(e);return p_(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=i7e(e);return p_(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=s7e(e);return p_(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(Sn(e)||Sn(n))throw new ea("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=C7e(o,e,n);return u?hn.invalid(u):p_(a,l,r,`format ${n}`,e,c)}static fromString(e,n,r={}){return hn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=d7e(e);return p_(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ea("need to specify a reason the DateTime is invalid");const r=e instanceof th?e:new th(e,n);if(qi.throwOnInvalid)throw new FFe(r);return new hn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=Wme(e,Or.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return Ume(aa.parseFormat(e),Or.fromObject(n)).map(i=>i.val).join("")}static resetCache(){aS=void 0,f9.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?k$(this).weekYear:NaN}get weekNumber(){return this.isValid?k$(this).weekNumber:NaN}get weekday(){return this.isValid?k$(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?A$(this).weekday:NaN}get localWeekNumber(){return this.isValid?A$(this).weekNumber:NaN}get localWeekYear(){return this.isValid?A$(this).weekYear:NaN}get ordinal(){return this.isValid?E$(this.c).ordinal:NaN}get monthShort(){return this.isValid?SR.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?SR.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?SR.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?SR.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=TO(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const l=r-o*n,c=r-a*n,u=kR(l,o),h=kR(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[M0(this,{ts:l}),M0(this,{ts:c})]:[this]}get isInLeapYear(){return dI(this.year)}get daysInMonth(){return j4(this.year,this.month)}get daysInYear(){return this.isValid?Xx(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ok(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ok(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=aa.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(ca.instance(e),n)}toLocal(){return this.setZone(qi.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Um(e,qi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=cM(o,s,e)}return M0(this,{ts:i,zone:e})}else return hn.invalid(oS(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return M0(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=F4(e,Kee),{minDaysInFirstWeek:r,startOfWeek:i}=Oee(n,this.loc),s=!Sn(n.weekYear)||!Sn(n.weekNumber)||!Sn(n.weekday),o=!Sn(n.ordinal),a=!Sn(n.year),l=!Sn(n.month)||!Sn(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new gx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new gx("Can't mix ordinal dates with month/day");let h;s?h=Mee({...$4(this.c,r,i),...n},r,i):Sn(n.ordinal)?(h={...this.toObject(),...n},Sn(n.day)&&(h.day=Math.min(j4(h.year,h.month),h.day))):h=Nee({...E$(this.c),...n});const[f,g]=cM(h,this.o,this.zone);return M0(this,{ts:f,o:g})}plus(e){if(!this.isValid)return this;const n=pr.fromDurationLike(e);return M0(this,Hee(this,n))}minus(e){if(!this.isValid)return this;const n=pr.fromDurationLike(e).negate();return M0(this,Hee(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=pr.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?aa.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):T$}toLocaleString(e=D4,n={}){return this.isValid?aa.create(this.loc.clone(n),e).formatDateTime(this):T$}toLocaleParts(e={}){return this.isValid?aa.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=hM(o);const a=e==="extended";let l=I$(this,a,o);return uM.indexOf(o)>=3&&(l+="T"),l+=qee(this,a,n,r,i,s,o),l}toISODate({format:e="extended",precision:n="day"}={}){return this.isValid?I$(this,e==="extended",hM(n)):null}toISOWeekDate(){return AR(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=hM(a),(i&&uM.indexOf(a)>=3?"T":"")+qee(this,o==="extended",n,e,r,s,a)):null}toRFC2822(){return AR(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return AR(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?I$(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),AR(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():T$}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return pr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=m9e(n).map(pr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=v7e(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(hn.now(),e,n)}until(e){return this.isValid?Wi.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||hn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Xee(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Xee(e.base||hn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(hn.isDateTime))throw new ea("min requires all arguments be DateTimes");return Lee(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(hn.isDateTime))throw new ea("max requires all arguments be DateTimes");return Lee(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Bme(o,e,n)}static fromStringExplain(e,n,r={}){return hn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Or.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new Gme(s,e)}static fromFormatParser(e,n,r={}){if(Sn(e)||Sn(n))throw new ea("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Or.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new ea(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=n.explainFromTokens(e);return u?hn.invalid(u):p_(a,l,r,`format ${n.format}`,e,c)}static get DATE_SHORT(){return D4}static get DATE_MED(){return Kpe}static get DATE_MED_WITH_WEEKDAY(){return UFe}static get DATE_FULL(){return Ype}static get DATE_HUGE(){return Xpe}static get TIME_SIMPLE(){return Zpe}static get TIME_WITH_SECONDS(){return Jpe}static get TIME_WITH_SHORT_OFFSET(){return Qpe}static get TIME_WITH_LONG_OFFSET(){return eme}static get TIME_24_SIMPLE(){return tme}static get TIME_24_WITH_SECONDS(){return nme}static get TIME_24_WITH_SHORT_OFFSET(){return rme}static get TIME_24_WITH_LONG_OFFSET(){return ime}static get DATETIME_SHORT(){return sme}static get DATETIME_SHORT_WITH_SECONDS(){return ome}static get DATETIME_MED(){return ame}static get DATETIME_MED_WITH_SECONDS(){return lme}static get DATETIME_MED_WITH_WEEKDAY(){return GFe}static get DATETIME_FULL(){return cme}static get DATETIME_FULL_WITH_SECONDS(){return ume}static get DATETIME_HUGE(){return hme}static get DATETIME_HUGE_WITH_SECONDS(){return dme}}function EE(t){if(hn.isDateTime(t))return t;if(t&&t.valueOf&&_g(t.valueOf()))return hn.fromJSDate(t);if(t&&typeof t=="object")return hn.fromObject(t);throw new ea(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const $7e="shortOffset";function j7e(t){return"timeZoneIANA"in t}function F7e(t){return t.startsWith("UTC")}function ePt(t,e=!1){return{json:{read:{source:t,reader:(n,r)=>r[t]?V7e(r[t]):null},write:!!e&&{allowNull:!0,writer(n,r){r[t]=n?z7e(n):null}}}}}function V7e(t,e=Nd){return t?j7e(t)?t.timeZoneIANA:U7e(t,e):e}function z7e(t){return{timeZoneIANA:t}}function U7e(t,e=Nd){if(!t||!wee.has(t.timeZone))return e;const n=wee.get(t.timeZone);return F7e(t.timeZone)||t.respectsDaylightSaving?n:G7e(n)}function G7e(t){const e=hn.local().setZone(t),n=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${ca.instance(-n).formatOffset(0,"narrow")}`}function tPt(t,e,n,r,i){if(e&&i==="date")return{timeZone:Nk,timeZoneName:void 0};const s=r.hour,o=n===EB;return{timeZone:o?i==="timestamp-offset"?void 0:t??Nk:n,timeZoneName:o&&s?$7e:void 0}}function B7e(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Nd||t===EB||e.has(t.toLowerCase())||n.has(t.toLowerCase())}const W7e={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},H7e={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Kme={timeZone:Nk},Fh={year:"numeric",month:"numeric",day:"numeric"},SE={year:"numeric",month:"long",day:"numeric"},TE={year:"numeric",month:"short",day:"numeric"},kE={year:"numeric",month:"long",weekday:"long",day:"numeric"},Om={hour:"numeric",minute:"numeric"},Y0={...Om,second:"numeric"},Yme={hourCycle:"h23"},AE={...Om,...Yme},IE={...Y0,...Yme},Xme={"short-date":Fh,"short-date-short-time":{...Fh,...Om},"short-date-short-time-24":{...Fh,...AE},"short-date-long-time":{...Fh,...Y0},"short-date-long-time-24":{...Fh,...IE},"short-date-le":Fh,"short-date-le-short-time":{...Fh,...Om},"short-date-le-short-time-24":{...Fh,...AE},"short-date-le-long-time":{...Fh,...Y0},"short-date-le-long-time-24":{...Fh,...IE},"long-month-day-year":SE,"long-month-day-year-short-time":{...SE,...Om},"long-month-day-year-short-time-24":{...SE,...AE},"long-month-day-year-long-time":{...SE,...Y0},"long-month-day-year-long-time-24":{...SE,...IE},"day-short-month-year":TE,"day-short-month-year-short-time":{...TE,...Om},"day-short-month-year-short-time-24":{...TE,...AE},"day-short-month-year-long-time":{...TE,...Y0},"day-short-month-year-long-time-24":{...TE,...IE},"long-date":kE,"long-date-short-time":{...kE,...Om},"long-date-short-time-24":{...kE,...AE},"long-date-long-time":{...kE,...Y0},"long-date-long-time-24":{...kE,...IE},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Om,"long-time":Y0},q7e=Il()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Zme={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},K7e=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),Y7e=K7e.find(({type:t})=>t==="month")?.value.toLowerCase();function Jme(){const t=wB();return(t&&Zme[t])??Fpe()}Y7e!=="mart"&&(Zme.bs="sr-Latn-CS");let p9=new WeakMap;const IO=Xme["short-date-short-time"];function X7e(t){let e=p9.get(t);if(!e){const n=Jme(),r=NB(t.timeZone??Nd),i={...t,timeZone:r};e=new Intl.DateTimeFormat(n,i),p9.set(t,e)}return e}function nPt(t){return Xme[t]}function rPt(t){const{dateStyle:e,timeStyle:n,hour12:r,year:i,month:s}=t,o={};return e?o.dateStyle=e:i&&(o.year=i,o.month=s||void 0),n&&!o.year&&(o.timeStyle=n,o.hour12=r==="auto"?void 0:r==="always"),o}function MB(t,e=IO){return X7e(e).format(t)}function iPt(t,e=IO){return MB(new Date(t),{...e,...Kme,...H7e})}function sPt(t,e=IO){return MB(new Date(`1970-01-01T${t}Z`),{...e,...Kme,...W7e})}function oPt(t,e=IO){if(e.timeZone)return MB(new Date(t),e);const n=hn.fromISO(t,{setZone:!0}),r=n.offset===0?Nk:e.timeZone,i={...e,timeZone:r};return n.toLocaleString(i,{locale:Jme()})}function NB(t){switch(t){case Nd:return jFe;case EB:return Nk;default:return t}}bB(()=>{p9=new WeakMap});const Z7e={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let dM=new WeakMap,Qme={};function m9(t){const e=t||Qme;if(!dM.has(e)){const n=wB(),r=n&&Z7e[n]||Fpe();dM.set(e,new Intl.NumberFormat(r,t))}return dM.get(e)}function aPt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function lPt(t){const{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r==="auto"?"auto":r==="always"}}function cPt(t,e){return Object.is(t,-0)&&(t=0),m9(e).format(t)}function uPt(t,e=iu()){if(!t)return null;let n=Jee.get(e);if(!n){const r=m9().formatToParts(12345.6),i=[...m9({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(i.map((h,f)=>[h,f])),o=new RegExp(`[${r.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${i.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,u=/[-\u2212\u2013\u2014\u2015]/g;n=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,g=>String(s.get(g))).replaceAll(c,"").replaceAll(u,"-"))==="")return null;const f=Number(h);return isNaN(f)?null:f},Jee.set(e,n)}return n(t)}bB(()=>{dM=new WeakMap,Qme={}});const Jee=new Map;async function J7e(t,e,n,r){const i=e.exec(n);if(!i)throw new Xe("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${e}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=Wpe(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await Qee(t(c))}catch(h){if(c===l)throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:h});try{u=await Qee(t(l))}catch(f){throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return u}async function Qee(t){if(ete.fetchBundleAsset!=null)return ete.fetchBundleAsset(t);const e=await es(t,{responseType:"text"});return JSON.parse(e.data)}let Q7e=class{constructor({base:e="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,n){return J7e(this.getAssetUrl,this.matcher,e,n)}};function eVe(t){return new Q7e(t)}const ete={};OFe(eVe({pattern:"esri/",location:Bi}));let gf=class extends Kt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let n=e==="local"||e==="global"?e:Wpe(e??iu())??"global";return n=n==="no"?"nb":n,n}};_([E()],gf.prototype,"apiKey",void 0),_([E()],gf.prototype,"id",void 0),_([E()],gf.prototype,"language",void 0),_([E()],gf.prototype,"places",void 0),_([E()],gf.prototype,"serviceUrl",void 0),_([E()],gf.prototype,"worldview",void 0),gf=_([ue("esri.support.BasemapStyle")],gf);const tVe=gf,ege=Symbol("BasemapInstance");function fPt(t){return t!=null&&typeof t=="object"&&ege in t}function dn(t,e,n={}){return OB(t,e,n,tge)}function pc(t,e,n={}){return OB(t,e,n,nge)}function OB(t,e,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(ri(i),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(i=oje(t,s,n.sync,n.equals),n.initial){const o=t();s(o,o)}return i}function V1(t,e,n,r={}){let i=null,s=null,o=null;function a(){i&&s&&(s.remove(),r.onListenerRemove?.(i),i=null,s=null)}function l(u){r.once&&r.once&&ri(o),n(u)}const c=dn(t,(u,h)=>{a(),cO(u)&&(i=u,s=J2(u,e,l),r.onListenerAdd?.(u))},{sync:r.sync,initial:!0});return o=Kn(()=>{c.remove(),a()}),o}function LB(t,e){return nVe(t,nge,e)}function nVe(t,e,n){if(fa(n))return Promise.reject(kr());const r=t();if(e?.(r))return Promise.resolve(r);let i=null;function s(){i=ri(i)}return new Promise((o,a)=>{i=sv([uu(n,()=>{s(),a(kr())}),OB(t,l=>{s(),o(l)},{sync:!1,once:!0},e??tge)])})}function tge(t){return!0}function nge(t){return!!t}function pPt(t,e,n={}){let r=!1;const i=dn(t,(s,o)=>{r||e(s,o)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}const Fg={sync:!0},ma={initial:!0},ta={sync:!0,initial:!0};let rge=0;const DB=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+rge++})}};return n=_([ue("esri.core.Identifiable")],n),n},$B=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:rge++})}};return n=_([ue("esri.core.Identifiable.NumericIdentifiable")],n),n};DB(class{});async function rVe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:n}=await _e(async()=>{const{fromItem:r}=await import("./portalLayers-BpmKs1w1.js");return{fromItem:r}},__vite__mapDeps([35,36,37,38,39,33]));try{return await n(e)}catch(r){const i=e?.portalItem,s=i?.id||"unset",o=i?.portal?.url||tr.portalUrl;throw Tt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}const tte={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function P$(t,e,n,r=Nd){const i=new ph(NB(r)),s=hn.fromJSDate(t,{zone:i}),o=n==="decades"||n==="centuries"?"year":ige(n);return n==="decades"&&(e*=10),n==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function mPt(t,e,n="milliseconds"){const r=t.getTime(),i=iVe(e,n,"milliseconds");return new Date(r+i)}function nte(t,e,n=Nd){const r=new ph(NB(n)),i=hn.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=ige(e);return i.startOf(s).toJSDate()}function iVe(t,e,n){return t===0?0:t*tte[e]/tte[n]}function gPt(t,e){return t&&e?t.intersection(e):t||e}function ige(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Pc,vw;let Ta=(vw=class extends qt{static get allTime(){return rte}static get empty(){return sVe}static fromArray(e){return new Pc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,n){return n.end!=null?new Date(n.end):null}writeEnd(e,n){n.end=e?.getTime()??null}get isAllTime(){return this.equals(Pc.allTime)}get isEmpty(){return this.equals(Pc.empty)}readStart(e,n){return n.start!=null?new Date(n.start):null}writeStart(e,n){n.start=e?.getTime()??null}clone(){return new Pc({end:this.end,start:this.start})}equals(e){if(!e)return!1;const n=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return n===i&&r===s}expandTo(e,n=Nd){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=nte(r,e,n));let i=this.end;if(i){const s=nte(i,e,n);i=i.getTime()===s.getTime()?s:P$(s,1,e,n)}return new Pc({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Pc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const n=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,a;return i>=n&&i<=r?o=i:n>=i&&n<=s&&(o=n),r>=i&&r<=s?a=r:s>=n&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?Pc.empty:new Pc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,n,r=Nd){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Pc,{start:s,end:o}=this;return s!=null&&(i.start=P$(s,e,n,r)),o!=null&&(i.end=P$(o,e,n,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return rte.clone();const n=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Pc({start:n,end:r})}},Pc=vw,vw);_([E({type:Date,json:{write:{allowNull:!0}}})],Ta.prototype,"end",void 0),_([lr("end")],Ta.prototype,"readEnd",null),_([Zn("end")],Ta.prototype,"writeEnd",null),_([E({readOnly:!0,json:{read:!1}})],Ta.prototype,"isAllTime",null),_([E({readOnly:!0,json:{read:!1}})],Ta.prototype,"isEmpty",null),_([E({type:Date,json:{write:{allowNull:!0}}})],Ta.prototype,"start",void 0),_([lr("start")],Ta.prototype,"readStart",null),_([Zn("start")],Ta.prototype,"writeStart",null),Ta=Pc=_([ue("esri.time.TimeExtent")],Ta);const rte=new Ta,sVe=new Ta({start:void 0,end:void 0});let oVe=0,_i=class extends gO(DB(cI)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new $n(-180,-90,180,90,Bt.WGS84),this.id=Date.now().toString(16)+"-layer-"+oVe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Bt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const n=typeof e=="string"?{url:e}:e;return(await _e(async()=>{const{fromUrl:r}=await import("./arcgisLayers-B6kD4nv5.js");return{fromUrl:r}},__vite__mapDeps([40,36,37,39]))).fromUrl(n)}static fromPortalItem(e){return rVe(e)}initialize(){this.when().catch(e=>{_a(e)||Tt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Va(this.url)}createLayerView(e,n){return Promise.reject(new Xe("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await es(e,{query:{f:"json"},responseType:"json"})).data;throw new Xe("layer:no-attribution-data","Layer does not have attribution data")}};_([E({type:String})],_i.prototype,"attributionDataUrl",void 0),_([E({readOnly:!0})],_i.prototype,"effectiveVisible",null),_([E({type:$n})],_i.prototype,"fullExtent",void 0),_([E({readOnly:!0})],_i.prototype,"hasAttributionData",null),_([E({type:String,clonable:!1})],_i.prototype,"id",void 0),_([E({type:Boolean,nonNullable:!0})],_i.prototype,"legendEnabled",void 0),_([E({type:["show","hide","hide-children"]})],_i.prototype,"listMode",void 0),_([E({type:Number,range:{min:0,max:1},nonNullable:!0})],_i.prototype,"opacity",void 0),_([E({clonable:!1})],_i.prototype,"parent",void 0),_([E({readOnly:!0})],_i.prototype,"parsedUrl",null),_([E({type:Boolean,readOnly:!0})],_i.prototype,"persistenceEnabled",void 0),_([E({type:Boolean})],_i.prototype,"popupEnabled",void 0),_([E({type:Boolean})],_i.prototype,"attributionVisible",void 0),_([E({type:Bt})],_i.prototype,"spatialReference",void 0),_([E({type:String})],_i.prototype,"title",void 0),_([E({readOnly:!0,json:{read:!1}})],_i.prototype,"type",void 0),_([E()],_i.prototype,"url",void 0),_([E({type:Ta})],_i.prototype,"visibilityTimeExtent",void 0),_([E({type:Boolean,nonNullable:!0})],_i.prototype,"visible",void 0),_i=_([ue("esri.layers.Layer")],_i);const IR=new WeakMap;function sge(t){return!t.destroyed&&(IR.has(t)||t.addHandles([dn(()=>{const{parent:e}=t;return!!(e&&e instanceof _i)&&(e.type==="catalog-dynamic-group"||sge(e))},e=>IR.set(t,e),ta),Kn(()=>IR.delete(t))]),IR.get(t))}function aVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function vPt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function lVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function cVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function _Pt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function ite(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function V_(t){return t?.type==="subtype-sublayer"}const xPt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function wPt(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function bPt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function PO(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function EPt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function uVe(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function SPt(t){return aVe(t)&&uVe(t)}async function TPt(t,e){const n=Zr?.findServerInfo(t);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await es(i,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function hVe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function dVe(t){return hVe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function fVe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function pVe(t){return!!fVe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function mVe(t,e){return null}function kPt(t){return null}function gVe(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function APt(t,e){!e||!gVe(t)||mVe(t.url)}const yVe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),vVe=new Set(["integrated-mesh-3dtiles"]),oge=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),_Ve=new Set([...oge,"link-chart"]);function xVe(t){switch(t.layerContainerType){case"basemap-base-layers":return yVe;case"basemap-ground-layers":return vVe;case"operational-layers":return t.origin==="link-chart"?_Ve:oge;default:return null}}function wVe(t,e){if(e.restrictedWebMapWriting){const n=xVe(e);return n==null||n.has(t.type)&&!PO(t)}return!0}function bVe(t,e){if(e)if(PO(t)){const n=oO("featureCollection.layers",e),r=n?.[0]?.layerDefinition;r&&ste(t,r)}else t.type!=="group"&&ste(t,e)}function ste(t,e){"maxScale"in t&&(e.maxScale=N4(t.maxScale)??void 0),"minScale"in t&&(e.minScale=N4(t.minScale)??void 0)}function EVe(t,e){if(bVe(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=N4(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(PO(t)){const n=e.featureCollection;n&&(n.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function R$(t,e,n){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return n?.messages&&n.messages.push(new Xe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(PO(t)&&!t.isTable)e=t.resourceInfo;else if(wVe(t,n)){const r={};return t.write(r,n)?r:null}return e!=null&&EVe(t,e=Ze(e)),e}var ote,z_,l1;let Ya=(l1=class extends t0(cI){constructor(e){super(e),this[ote]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+z_.idCounter++,this.baseLayers=new Ot,this.referenceLayers=new Ot,this.groundLayers=new Ot;const n=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||Tt.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this},i=a=>{const l=a.item;return l.parent===this?(Tt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(Tt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},s=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>n(a.item)),this.baseLayers.on("after-remove",a=>s(a.item)),this.referenceLayers.on("after-add",a=>n(a.item)),this.referenceLayers.on("after-remove",a=>s(a.item)),this.groundLayers.on("before-add",i),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{Tt.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroyed||i.destroy();const n=this.groundLayers.toArray();for(const i of n)i.destroyed||i.destroy();const r=this.referenceLayers.toArray();for(const i of r)i.destroyed||i.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Ni(this.portalItem)}removeChildLayer(e){for(const n of[this.baseLayers,this.referenceLayers,this.groundLayers])n.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",xd(e,this._get("baseLayers")))}_writeBaseLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=R$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),this.referenceLayers.forEach(s=>{const o=R$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),i.push(o))})),n.baseMapLayers=i}set groundLayers(e){this._set("groundLayers",xd(e,this._get("groundLayers")))}_writeGroundLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=R$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),i.length>0&&(n.groundLayers=i))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",xd(e,this._get("referenceLayers")))}writeTitle(e,n){n.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return hpe(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(n=>rT(n)?n.clone():n),groundLayers:this.groundLayers.map(n=>rT(n)?n.clone():n),referenceLayers:this.referenceLayers.map(n=>rT(n)?n.clone():n)};return this.loaded&&(e.loadStatus="loaded"),new z_({resourceInfo:this.resourceInfo}).set(e)}read(e,n){this.resourceInfo||this._set("resourceInfo",{data:e,context:n}),super.read(e,n)}write(e,n){return e=e||{},n?.origin||(n={origin:"web-map",...n}),super.write(e,n),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=Ze(r);return i.url&&Rd(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&Rd(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:n,portalItem:r,style:i}=this;pi(e);const s=[];if(n){const o=n.context?n.context.url:null;if(s.push(this._loadLayersFromJSON(n.data,o,e)),n.data.id&&!n.data.title){const a=n.data.id;s.push($Fe(a).then(l=>{l&&this.read({title:l},n.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,n,r){const i=this.resourceInfo?.context,s=this.portalItem?.portal||i?.portal||null,o=TVe[i?.origin||""]??"web-map",{populateOperationalLayers:a}=await _e(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-Bi59phT6.js");return{populateOperationalLayers:c}},__vite__mapDeps([41,38,37,36,39,35,33,42])),l=[];if(pi(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},u=g=>o==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,h=a(this.baseLayers,e.baseMapLayers.filter(g=>!u(g)),c);l.push(h);const f=a(this.referenceLayers,e.baseMapLayers.filter(u),c);l.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},u=a(this.groundLayers,e.groundLayers,c);l.push(u)}await Promise.allSettled(l)}async _loadFromItem(e,n){const r=await e.load(n),i=await r.fetchData("json",n),s=Va(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:SVe[e.type||""]??"web-map",portal:e.portal||it.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||it.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,n)}async _loadFromStylesService(e,n){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??tr.apiKeys.basemapStyles,[a,l]=await Promise.all([(await es(i,{query:{token:o},signal:n?.signal})).data,(await es(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:n?.signal})).data]);this.thumbnailUrl??=a.thumbnailUrl;const c=Va(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,n),o)for(const u of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=o)}static fromId(e){const n=n9[e];return n?n.itemId?new z_({portalItem:{id:n.itemId,portal:{url:"https://www.arcgis.com"}}}):z_.fromJSON(n,n.is3d?{origin:"web-scene",portal:new it({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},ote=ege,z_=l1,l1.idCounter=0,l1);_([E({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,n,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ot}},writer(t,e,n,r){this._writeBaseLayers(t,e,r)}}}}}})],Ya.prototype,"baseLayers",null),_([E({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,n,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:Ot}},writer(t,e,n,r){this._writeGroundLayers(t,e,r)}}}}}})],Ya.prototype,"groundLayers",null),_([E({type:String,json:{origins:{"web-scene":{write:!0}}}})],Ya.prototype,"id",void 0),_([E({type:vn})],Ya.prototype,"portalItem",void 0),_([E()],Ya.prototype,"referenceLayers",null),_([E({readOnly:!0})],Ya.prototype,"resourceInfo",void 0),_([E({type:Bt})],Ya.prototype,"spatialReference",void 0),_([E({type:tVe})],Ya.prototype,"style",void 0),_([E()],Ya.prototype,"thumbnailUrl",void 0),_([E({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Ya.prototype,"title",void 0),_([Zn("title")],Ya.prototype,"writeTitle",null),Ya=z_=_([ue("esri.Basemap")],Ya);const SVe={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},TVe={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},lT=Ya,kVe=Object.freeze(Object.defineProperty({__proto__:null,default:lT},Symbol.toStringTag,{value:"Module"})),V4={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function AVe(t){return!!V4[t]||!!V4[t.toLowerCase()]}function age(t){return V4[t]??V4[t.toLowerCase()]}function IPt(t){return[...age(t)]}function C$(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function IVe(t,e,n,r=1){const i=(t%360+360)%360/360,s=n<=.5?n*(e+1):n+e-n*e,o=2*n-s;return[Math.round(255*C$(o,s,i+1/3)),Math.round(255*C$(o,s,i)),Math.round(255*C$(o,s,i-1/3)),r]}function PPt(t){const e=t.length>5,n=e?8:4,r=(1<<n)-1,i=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=n,a[3]=i*l/255),l=o&r,o>>=n,a[2]=i*l,l=o&r,o>>=n,a[1]=i*l,l=o&r,o>>=n,a[0]=i*l,a}function lge(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),i=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,n+16*n,r+16*r,(i+16*i)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function cge(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const n=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){if(n[0].endsWith("%")){const i=n.map(s=>2.56*parseFloat(s));return n.length===4&&(i[3]=parseFloat(n[3])),ate(i)}return ate(n.map(i=>parseFloat(i)))}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return IVe(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3]??"1"))}return null}function ate(t){return t[0]=Jx(t[0]),t[1]=Jx(t[1]),t[2]=Jx(t[2]),t[3]=t.length===4?hge(t[3]):1,t}function uge(t){let e=AVe(t)?age(t):null;return e??=cge(t),e??=lge(t),e}function RPt(t){const e=uge(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function hge(t){return dge(t,0,1)}function Jx(t){return Math.round(dge(t,0,255))}function dge(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t}const fge=2.2,PVe=1/fge;function CPt(t){return t**fge}function MPt(t){return t**PVe}const lte=new Float32Array(1);function NPt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function hu(t,e,n){return Math.min(Math.max(t,e),n)}function OPt(t){return!(t&t-1)}function LPt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function lS(t,e,n){return t+(e-t)*n}function DPt(t,e,n,r,i){return lS(r,i,(t-e)/(n-e))}function mI(t){return t*Math.PI/180}function pge(t){return 180*t/Math.PI}function $Pt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function jPt(t){return Math.acos(hu(t,-1,1))}function RVe(t){return Math.asin(hu(t,-1,1))}function xg(t,e,n=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=n}function FPt(t,e,n=1e-6){return!xg(t,e,n)&&t>e}function VPt(t,e,n=1e-6){return!xg(t,e,n)&&t<e}function zPt(t,e,n=1e-6){return xg(t,e,n)||t>e}const z4=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function g9(t){return z4.setFloat64(0,t),z4.getBigInt64(0)}function CVe(t){return z4.setBigInt64(0,t),z4.getFloat64(0)}const fM=1000000n,MVe=mge(1);function mge(t){const e=g9(t=Math.abs(t)),n=CVe(e<=fM?fM:e-fM);return Math.abs(t-n)}function UPt(t,e,n=MVe){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(n!=null&&mge(Math.min(Math.abs(t),Math.abs(e)))<n)return Math.abs(t-e)<=n;const r=g9(t),i=g9(e);return r<0!=i<0?!1:!((r<i?i-r:r-i)>fM)}function gge(t,e,n=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),i=Math.abs(t),s=Math.abs(e);if(t===0||e===0||i<1e-12&&s<1e-12){if(r>.01*n)return!1}else if(r/(i+s)>n)return!1;return!0}function GPt(t){return yge(Math.max(-cte,Math.min(t,cte)))}function yge(t){return lte[0]=t,lte[0]}function BPt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(xg(e,1)&&xg(n,1)&&xg(r,1))}function WPt(t,e){return(t%e+e)%e}const cte=yge(34028234663852886e22);function HPt(t,e,n){if(n===void 0||+n==0)return Math[t](e);if(e=+e,n=+n,isNaN(e)||typeof n!="number"||n%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function PR(t){return hu(rB(t),0,255)}function RR(t,e){const n=t.toString(16).padStart(2,"0");return e?n.slice(0,1):n}let Yn=class Rc{static blendColors(e,n,r,i=new Rc){return i.r=Math.round(e.r+(n.r-e.r)*r),i.g=Math.round(e.g+(n.g-e.g)*r),i.b=Math.round(e.b+(n.b-e.b)*r),i.a=e.a+(n.a-e.a)*r,i._sanitize()}static fromRgb(e,n){const r=cge(e);return r?Rc.fromArray(r,n):null}static fromHex(e,n=new Rc){const r=lge(e);return r?Rc.fromArray(r,n):null}static fromArray(e,n=new Rc){return n._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(e,n){const r=uge(e);return r?Rc.fromArray(r,n):null}static fromJSON(e){return e!=null?new Rc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,n){return e==null?null:(n??=[0,0,0,0],n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.a!=null?e.a:1,n)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Rc.fromString(e,this):Array.isArray(e)?Rc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Rc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const n=e?.capitalize??!1,r=e?.digits??6,i=r===3||r===4,s=r===4||r===8,o=`#${RR(this.r,i)}${RR(this.g,i)}${RR(this.b,i)}${s?RR(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(e=!1){const n=this.r+", "+this.g+", "+this.b;return e?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const n=PR(this.r),r=PR(this.g),i=PR(this.b);return e===0||this.a!==1?[n,r,i,PR(255*this.a)]:[n,r,i]}clone(){return new Rc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Jx(this.r),this.g=Jx(this.g),this.b=Jx(this.b),this.a=hge(this.a),this}_set(e,n,r,i){this.r=e,this.g=n,this.b=r,this.a=i}};Yn.prototype.declaredClass="esri.Color";let Xu=class extends Ot{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(Y$e(()=>this._refresh(),Fg))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let n=0;for(const r of e)r!=null&&(n=this._processCollection(n,r));this.splice(n)}_createNewInstance(e){return new Ot(e)}_processCollection(e,n){if(!n)return e;const r=this.itemFilterFunction??(i=>!!i);for(const i of n)if(i){if(r(i)){const s=this.indexOf(i,e);s>=0?s!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};_([E()],Xu.prototype,"getCollections",void 0),_([E()],Xu.prototype,"getChildrenFunction",void 0),_([E()],Xu.prototype,"itemFilterFunction",void 0),Xu=_([ue("esri.core.CollectionFlattener")],Xu);function pn(t,e={}){const n=t instanceof Ws?t:new Ws(t,e),{alwaysWriteDefaults:r,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return E({type:s?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!l&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var y9;let pM=y9=class extends qt{constructor(t){super(t),this.type="none"}clone(){return new y9({type:this.type})}};_([pn({none:"none",stayAbove:"stay-above"}),E({json:{write:{isRequired:!0}}})],pM.prototype,"type",void 0),pM=y9=_([ue("esri.ground.NavigationConstraint")],pM);const vge=Symbol("GroundInstance");function KPt(t){return t!=null&&typeof t=="object"&&vge in t}function _ge(t){const e=rB(100*(1-t));return Math.max(0,Math.min(e,100))}function xge(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var ute,v9,nae;let Cc=v9=(nae=class extends t0(cI){constructor(t){super(t),this[ute]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ot;const e=r=>{const{parent:i}=r;i&&i!==this&&"remove"in i&&i.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&Tt.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>n(r.item))]),this.allLayers=new Xu({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{_a(t)||Tt.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Ni(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",xd(t,this._get("layers")))}writeLayers(t,e,n,r){const i=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};EDe(s)().write(o,r)&&i.push(o)}else r?.messages&&r.messages.push(new Xe("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=i}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return hpe(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:n}=await _e(()=>import("./ElevationQuery-BVqBc8WX.js"),__vite__mapDeps([43,44]));return pi(e),n(this.layers.filter(hte).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:n}=await _e(()=>import("./ElevationQuery-BVqBc8WX.js"),__vite__mapDeps([43,44]));return pi(e),n(this.layers.filter(hte).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:Ze(this.surfaceColor),navigationConstraint:Ze(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new v9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,n){const r=e?.origin||"web-scene",i=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=await _e(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-Bi59phT6.js");return{populateOperationalLayers:l}},__vite__mapDeps([41,38,37,36,39,35,33,42]));pi(n);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},ute=vge,nae);function hte(t){return t&&"createElevationSampler"in t}_([E()],Cc.prototype,"parent",void 0),_([E()],Cc.prototype,"integratedMeshGround",null),_([E({json:{read:!1,write:{isRequired:!0}}})],Cc.prototype,"layers",null),_([E()],Cc.prototype,"allLayers",void 0),_([Zn("layers")],Cc.prototype,"writeLayers",null),_([E({readOnly:!0})],Cc.prototype,"resourceInfo",void 0),_([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Lr,read:{reader:xge,source:"transparency"},write:{writer:(t,e)=>{e.transparency=_ge(t)},target:"transparency"}}})],Cc.prototype,"opacity",void 0),_([E({type:Yn,json:{type:[Lr],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Cc.prototype,"surfaceColor",void 0),_([E({type:pM,json:{write:!0}})],Cc.prototype,"navigationConstraint",void 0),Cc=v9=_([ue("esri.Ground")],Cc);const U4=Cc,NVe=Symbol("ClonableMixin"),mo=t=>{var i;var e;const n=t;let r=(i=class extends n{constructor(){super(...arguments),this[e]=!0}clone(s){const o=Og(this);ife(o,"unable to clone instance of non-accessor class");const a=o.metadata,l=o.store,c={},u=new Map;for(const f in a){const g=a[f],v=l?.originOf(f),x=g.clonable;if(g.readOnly||x===!1||v!==7&&v!==0&&v!==5&&v!==4)continue;const b=this[f];let T=null;if(typeof x=="function")T=x(b,s);else if(x==="reference")T=b;else if(T=SF(b,s),b!=null&&T==null)continue;v===0?u.set(f,T):c[f]=T}const h=new(Object.getPrototypeOf(this)).constructor(c);if(u.size){const f=Og(h)?.store;if(f)for(const[g,v]of u)f.set(g,v,0)}return h}},e=NVe,i);return r=_([ue("esri.core.Clonable")],r),r},jB=mo(Kt),OVe="randomUUID"in crypto;function gI(){if(OVe)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=n=>t[n].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function YPt(){return`{${gI().toUpperCase()}}`}function XPt(){return`{${gI()}}`}function ZPt(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const m_={Base64:0,Hex:1,String:2,Raw:3},Qx=8,wge=(1<<Qx)-1;function Qm(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function LVe(t){const e=[];for(let n=0,r=t.length*Qx;n<r;n+=Qx)e[n>>5]|=(t.charCodeAt(n/Qx)&wge)<<n%32;return e}function DVe(t){const e=[];for(let n=0,r=32*t.length;n<r;n+=Qx)e.push(String.fromCharCode(t[n>>5]>>>n%32&wge));return e.join("")}function $Ve(t){const e="0123456789abcdef",n=[];for(let r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}function jVe(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let i=0,s=4*t.length;i<s;i+=3){const o=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*t.length?r.push("="):r.push(n.charAt(o>>6*(3-a)&63))}return r.join("")}function FVe(t,e){return t<<e|t>>>32-e}function RO(t,e,n,r,i,s){return Qm(FVe(Qm(Qm(e,t),Qm(r,s)),i),n)}function Uo(t,e,n,r,i,s,o){return RO(e&n|~e&r,t,e,i,s,o)}function Go(t,e,n,r,i,s,o){return RO(e&r|n&~r,t,e,i,s,o)}function Bo(t,e,n,r,i,s,o){return RO(e^n^r,t,e,i,s,o)}function Wo(t,e,n,r,i,s,o){return RO(n^(e|~r),t,e,i,s,o)}function VVe(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=n,l=r,c=i,u=s;n=Uo(n,r,i,s,t[o],7,-680876936),s=Uo(s,n,r,i,t[o+1],12,-389564586),i=Uo(i,s,n,r,t[o+2],17,606105819),r=Uo(r,i,s,n,t[o+3],22,-1044525330),n=Uo(n,r,i,s,t[o+4],7,-176418897),s=Uo(s,n,r,i,t[o+5],12,1200080426),i=Uo(i,s,n,r,t[o+6],17,-1473231341),r=Uo(r,i,s,n,t[o+7],22,-45705983),n=Uo(n,r,i,s,t[o+8],7,1770035416),s=Uo(s,n,r,i,t[o+9],12,-1958414417),i=Uo(i,s,n,r,t[o+10],17,-42063),r=Uo(r,i,s,n,t[o+11],22,-1990404162),n=Uo(n,r,i,s,t[o+12],7,1804603682),s=Uo(s,n,r,i,t[o+13],12,-40341101),i=Uo(i,s,n,r,t[o+14],17,-1502002290),r=Uo(r,i,s,n,t[o+15],22,1236535329),n=Go(n,r,i,s,t[o+1],5,-165796510),s=Go(s,n,r,i,t[o+6],9,-1069501632),i=Go(i,s,n,r,t[o+11],14,643717713),r=Go(r,i,s,n,t[o],20,-373897302),n=Go(n,r,i,s,t[o+5],5,-701558691),s=Go(s,n,r,i,t[o+10],9,38016083),i=Go(i,s,n,r,t[o+15],14,-660478335),r=Go(r,i,s,n,t[o+4],20,-405537848),n=Go(n,r,i,s,t[o+9],5,568446438),s=Go(s,n,r,i,t[o+14],9,-1019803690),i=Go(i,s,n,r,t[o+3],14,-187363961),r=Go(r,i,s,n,t[o+8],20,1163531501),n=Go(n,r,i,s,t[o+13],5,-1444681467),s=Go(s,n,r,i,t[o+2],9,-51403784),i=Go(i,s,n,r,t[o+7],14,1735328473),r=Go(r,i,s,n,t[o+12],20,-1926607734),n=Bo(n,r,i,s,t[o+5],4,-378558),s=Bo(s,n,r,i,t[o+8],11,-2022574463),i=Bo(i,s,n,r,t[o+11],16,1839030562),r=Bo(r,i,s,n,t[o+14],23,-35309556),n=Bo(n,r,i,s,t[o+1],4,-1530992060),s=Bo(s,n,r,i,t[o+4],11,1272893353),i=Bo(i,s,n,r,t[o+7],16,-155497632),r=Bo(r,i,s,n,t[o+10],23,-1094730640),n=Bo(n,r,i,s,t[o+13],4,681279174),s=Bo(s,n,r,i,t[o],11,-358537222),i=Bo(i,s,n,r,t[o+3],16,-722521979),r=Bo(r,i,s,n,t[o+6],23,76029189),n=Bo(n,r,i,s,t[o+9],4,-640364487),s=Bo(s,n,r,i,t[o+12],11,-421815835),i=Bo(i,s,n,r,t[o+15],16,530742520),r=Bo(r,i,s,n,t[o+2],23,-995338651),n=Wo(n,r,i,s,t[o],6,-198630844),s=Wo(s,n,r,i,t[o+7],10,1126891415),i=Wo(i,s,n,r,t[o+14],15,-1416354905),r=Wo(r,i,s,n,t[o+5],21,-57434055),n=Wo(n,r,i,s,t[o+12],6,1700485571),s=Wo(s,n,r,i,t[o+3],10,-1894986606),i=Wo(i,s,n,r,t[o+10],15,-1051523),r=Wo(r,i,s,n,t[o+1],21,-2054922799),n=Wo(n,r,i,s,t[o+8],6,1873313359),s=Wo(s,n,r,i,t[o+15],10,-30611744),i=Wo(i,s,n,r,t[o+6],15,-1560198380),r=Wo(r,i,s,n,t[o+13],21,1309151649),n=Wo(n,r,i,s,t[o+4],6,-145523070),s=Wo(s,n,r,i,t[o+11],10,-1120210379),i=Wo(i,s,n,r,t[o+2],15,718787259),r=Wo(r,i,s,n,t[o+9],21,-343485551),n=Qm(n,a),r=Qm(r,l),i=Qm(i,c),s=Qm(s,u)}return[n,r,i,s]}function zVe(t,e=m_.Hex){const n=e||m_.Base64,r=VVe(LVe(t),t.length*Qx);switch(n){case m_.Raw:return r;case m_.Hex:return $Ve(r);case m_.String:return DVe(r);case m_.Base64:return jVe(r)}}function UVe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function _9(t){return FB[GVe(t)]||WVe}function GVe(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:BVe(t.url)}function BVe(t){const e=Zde(t);return x9[e]||bge}const FB={},bge="text/plain",WVe=FB[bge],x9={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in x9)FB[x9[t]]=t;function HVe(t){const e=t?.origins??[void 0];return(n,r)=>{const i=qVe(t,n,r);for(const s of e){const o=sB(n,s,r);for(const a in i)o[a]=i[a]}}}function qVe(t,e,n){if(t?.type==="resource")return KVe(t,e,n);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:i}=C6e;return{read:r,write:i}}}}function KVe(t,e,n){const r=oI(e,n);return{type:String,read:(i,s,o)=>{const a=uO(i,s,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(i,s,o,a){if(!a?.resources)return typeof i=="string"?void(s[o]=a2(i,a)):void(s[o]=i.write({},a));const l=ZVe(i),c=a2(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),u=r.type!==String&&(!UVe(this)||a?.origin&&this.originIdOf(n)>QG(a.origin)),h={object:this,propertyName:n,value:i,targetUrl:c,dest:s,targetPropertyName:o,context:a,params:t};a?.portalItem&&c&&!_l(c)?u&&t?.contentAddressed?w9(h):u?YVe(h):XVe(h):a?.portalItem&&(c==null||afe(c)!=null||tI(c)||u)?w9(h):s[o]=c}}}}function w9(t){const{targetUrl:e,params:n,value:r,context:i,dest:s,targetPropertyName:o}=t;if(!i.portalItem)return;const a=lfe(e),l=Sge(r,e,i);if(n?.contentAddressed&&l.type!=="json")return void i.messages?.push(new Xe("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=n?.contentAddressed&&l.type==="json"?zVe(l.jsonString):a?.filename??gI(),u=eI(n?.prefix??a?.prefix,c),h=`${u}.${_9(l)}`;if(n?.contentAddressed&&i.resources&&l.type==="json"){const v=i.resources.toKeep.find(({resource:x})=>x.path===h)??i.resources.toAdd.find(({resource:x})=>x.path===h);if(v)return void(s[o]=v.resource.itemRelativeUrl)}const f=i.portalItem.resourceFromPath(h);tI(e)&&i.resources&&i.resources.pendingOperations.push(i6e(e).then(v=>{f.path=`${u}.${_9({type:"blob",blob:v})}`,s[o]=f.itemRelativeUrl}).catch(()=>{}));const g=n?.compress??!1;i.resources&&Ege({...t,resource:f,content:l,compress:g,updates:i.resources.toAdd}),s[o]=f.itemRelativeUrl}function YVe(t){const{context:e,targetUrl:n,params:r,value:i,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(n),l=Sge(i,n,e),c=_9(l),u=Zde(a.path),h=r?.compress??!1;c===u?(e.resources&&Ege({...t,resource:a,content:l,compress:h,updates:e.resources.toUpdate}),s[o]=n):w9(t)}function XVe({context:t,targetUrl:e,dest:n,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),n[r]=e)}function Ege({object:t,propertyName:e,updates:n,resource:r,content:i,compress:s}){const o=a=>{JVe(t,e,a)};n.push({resource:r,content:i,compress:s,finish:o})}function Sge(t,e,n){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(n))}}function ZVe(t){return t==null?null:typeof t=="string"?t:t.url}function JVe(t,e,n){typeof t[e]=="string"?t[e]=n.url:t[e].url=n.url}let mM=class extends mo(qt){constructor(e){super(e),this.color=null}};_([E({type:Yn,json:{type:[Lr],write:!0}})],mM.prototype,"color",void 0),mM=_([ue("esri.effects.FocusAreaOutline")],mM);const QVe=mM;function QPt(t){const e=[];for(t.reset();t.nextPath();){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);e.push(n)}return t.reset(),e}function eze(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function eRt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,n=t.hasM;if(t.type==="point")return n&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:n?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let i=!1,s=!1;return r.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function CO(t,e){const n=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function Tge(t,e,n){const r=t[0]+n*(e[0]-t[0]),i=t[1]+n*(e[1]-t[1]);return t.length>2&&e.length>2?[r,i,t[2]+n*(e[2]-t[2])]:[r,i]}function tze(t,e,n,r){return nze(t,e,n[r],n[r+1])}function nze(t,e,n,r){const[i,s]=e,[o,a]=n,[l,c]=r,u=l-o,h=c-a,f=u*u+h*h,g=(i-o)*u+(s-a)*h,v=Math.min(1,Math.max(0,g/f));return t[0]=o+u*v,t[1]=a+h*v,t}function tRt(t,e,n,r,i,s){let o=n,a=r,l=i-o,c=s-a;if(l!==0||c!==0){const u=((t-o)*l+(e-a)*c)/(l*l+c*c);u>1?(o=i,a=s):u>0&&(o+=l*u,a+=c*u)}return l=t-o,c=e-a,l*l+c*c}function kge(t,e){return Tge(t,e,.5)}function nRt(t){const e=t.length;let n=0;for(let r=0;r<e-1;++r)n+=CO(t[r],t[r+1]);return n}function rRt(t,e){if(e<=0)return t[0];const n=t.length;let r=0;for(let i=0;i<n-1;++i){const s=CO(t[i],t[i+1]);if(e-r<s){const o=(e-r)/s;return Tge(t[i],t[i+1],o)}r+=s}return t[n-1]}function Age(t,e=0,n=1){let r=0;const i=t.length;let s=t[0];for(let o=1;o<i;o++){const a=t[o];r+=(a[e]-s[e])*(a[n]+s[n]),s=a}if(Ige(t)){const o=t[0];r+=(o[e]-s[e])*(o[n]+s[n])}return r>=0}function Ige(t){const e=t.length;return e>0&&!rO(t[0],t[e-1])}function iRt(t){"rings"in t&&(rze(t),ize(t))}function rze(t){if("rings"in t)for(const e of t.rings)Ige(e)&&e.push(e[0].slice())}function ize(t){if(!("rings"in t)||t.rings.length===0||Age(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function sRt(t){return t.type!=="polygon"&&t.type!=="polyline"||sze(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function sze(t,e){const n=Da(e);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of t){let a=1/0,l=-1/0;for(const u of o){const h=oze(u[0],r,i);a=Math.min(a,h),l=Math.max(l,h),u[0]=h}const c=l-a;s-c<c&&o.forEach(u=>{u[0]<0&&(u[0]+=s)})}}function oze(t,e,n){const r=n-e;return t<e?n-(e-t)%r:t>n?e+(t-e)%r:t}function oRt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[n,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function aRt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function aze(t){return cze(t.rings,t.hasZ??!1)}function lze(t){const e=aze(t);if(!e)return null;const{hasZ:n,spatialReference:r}=t,[i,s,o]=e;return isNaN(i)||isNaN(s)||n&&isNaN(o)?null:{x:i,y:s,z:n?o:void 0,spatialReference:r}}function cze(t,e){if(!t?.length)return null;const n=[],r=[],i=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=Pge(t[s],e,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],e&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||e&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=t[0]&&t[0].length?uze(t[0],e):null;if(!s)return null;n[0]=s[0],n[1]=s[1],e&&s.length>2&&(n[2]=s[2])}return n}function Pge(t,e,n){let r=0,i=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const g=t[f],v=t[(f+1)%t.length],[x,b,T]=g,A=x-l,I=b-c,[P,M,F]=v,C=P-l,N=M-c,O=A*N-C*I;if(o+=O,r+=(A+C)*O,i+=(I+N)*O,e&&g.length>2&&v.length>2){const j=T-u,V=F-u,G=A*V-C*j;s+=(j+V)*G,a+=G}x<n[0]&&(n[0]=x),x>n[1]&&(n[1]=x),b<n[2]&&(n[2]=b),b>n[3]&&(n[3]=b),e&&(T<n[4]&&(n[4]=T),T>n[5]&&(n[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,i/(6*o)+c,o];return e&&(n[4]===n[5]||a===0?(h[3]=(n[4]+n[5])/2,h[4]=0):(h[3]=s/(6*a)+u,h[4]=a)),h}function lRt(t,e){let n=0,r=0,i=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[u,h]=l,f=u-s,g=h-o,[v,x]=c,b=v-s,T=x-o,A=f*T-b*g;i+=A,n+=(f+b)*A,r+=(g+T)*A,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function uze(t,e){const n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const u=t[l],h=t[l+1];if(u&&h){n[0]=u[0],n[1]=u[1],r[0]=h[0],r[1]=h[1],e&&u.length>2&&h.length>2&&(n[2]=u[2],r[2]=h[2]);const f=CO(n,r);if(f){i+=f;const g=kge(u,h);s+=f*g[0],o+=f*g[1],e&&g.length>2&&(a+=f*g[2])}}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.length?t[0]:null}function hze(t){const{hasZ:e,totalSize:n}=t;if(n===0)return null;const r=[],i=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=Pge(eze(t),t.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?dze(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function dze(t){const{hasZ:e}=t,n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,u=t.z;for(;t.nextPoint();){const h=t.x,f=t.y,g=t.z;n[0]=l,n[1]=c,r[0]=h,r[1]=f,e&&(n[2]=u,r[2]=g);const v=CO(n,r);if(v){i+=v;const x=kge(n,r);s+=v*x[0],o+=v*x[1],e&&x.length>2&&(a+=v*x[2])}l=h,c=f,u=g}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const fze=1e-6;function cRt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<fze){const i=hze(t);return i?[i[0],i[1]]:null}const n=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)mze(n,r,t);return n[0]*=1/e,n[1]*=1/e,n[0]+=r[0],n[1]+=r[1],n}const pze=1/3;function mze(t,e,n){if(!t||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,l=0,c=0;for(;n.nextPoint();)l=n.x-r,c=n.y-i,s=.5*pze*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const u=n.getCurrentRingArea(),h=[r,i];return h[0]-=e[0],h[1]-=e[1],h[0]*=u,h[1]*=u,t[0]+=h[0],t[1]+=h[1],t}function gl(t=wze){return[t[0],t[1],t[2],t[3]]}function Rge(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function gze(t,e,n,r,i=gl()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function uRt(t,e=gl()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function yze(t,e,n=new $n){return n.xmin=t[0],n.ymin=t[1],n.xmax=t[2],n.ymax=t[3],n.spatialReference=e,n}function qc(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function vze(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function _ze(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function hRt(t,e,n){if(e!=null)if("length"in e)E9(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}else Rge(n,t)}function dRt(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];i=Math.min(i,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function fRt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function VB(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function zB(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function pRt(t){return VB(t)*zB(t)}function mRt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function gRt(t){const e=VB(t),n=zB(t);return Math.sqrt(e*e+n*n)}function yRt(t,e){return!!t&&b9(t,e.x,e.y)}function b9(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function vRt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function _Rt(t,e,n){return Math.max(e[0],t[0])-n<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-n<=Math.min(e[3],t[3])}function xze(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function xRt(t,e,n,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function wRt(t){return t?Rge(t,dte):gl(dte)}function E9(t){return t!=null&&t.length===4}function bRt(t,e){return E9(t)&&E9(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const dte=[1/0,1/0,-1/0,-1/0],wze=[0,0,0,0];let UB=1e-6;function xl(){return UB}function bze(t){UB=t}const GB=Math.random,Eze=Math.PI/180,Sze=180/Math.PI;function BB(t){return t*Eze}function Tze(t){return t*Sze}function kze(t,e){return Math.abs(t-e)<=UB*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:GB,equals:kze,getEpsilon:xl,setEpsilon:bze,toDegree:Tze,toRadian:BB},Symbol.toStringTag,{value:"Module"}));function ew(t,e){return t[0]=e[0],t[1]=e[1],t}function ro(t,e,n){return t[0]=e,t[1]=n,t}function Cge(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Lk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Mge(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function Nge(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Aze(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Ize(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Pze(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Rze(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function Cze(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function yI(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Mze(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function MO(t,e){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function Dk(t,e){const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function G4(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function Oge(t){const e=t[0],n=t[1];return e*e+n*n}function Lge(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Nze(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function S9(t,e){const n=e[0],r=e[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function Dge(t,e){return t[0]*e[0]+t[1]*e[1]}function $ge(t,e,n){const r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Oze(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function Lze(t,e=1){const n=2*GB()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Dze(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function nd(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function gM(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function $ze(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function jze(t,e,n,r){const i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}function Fze(t,e){const n=t[0],r=t[1],i=e[0],s=e[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(n*i+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Vze(t){return"vec2("+t[0]+", "+t[1]+")"}function zze(t,e){return t[0]===e[0]&&t[1]===e[1]}function Uze(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=xl();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function Gze(t,e,n,r,i){let s=e[0]-n[0],o=e[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const Bze=G4,WB=Lk,Wze=Mge,Hze=Nge,qze=MO,Kze=Dk,Yze=Oge;Object.freeze(Object.defineProperty({__proto__:null,add:Cge,angle:Fze,ceil:Aze,copy:ew,cross:$ge,dist:qze,distance:MO,div:Hze,divide:Nge,dot:Dge,equals:Uze,exactEquals:zze,floor:Ize,inverse:Nze,len:Bze,length:G4,lerp:Oze,max:Rze,min:Pze,mul:Wze,multiply:Mge,negate:Lge,normalize:S9,projectAndScale:Gze,random:Lze,rotate:jze,round:Cze,scale:yI,scaleAndAdd:Mze,set:ro,sqrDist:Kze,sqrLen:Yze,squaredDistance:Dk,squaredLength:Oge,str:Vze,sub:WB,subtract:Lk,transformMat2:Dze,transformMat2d:nd,transformMat3:gM,transformMat4:$ze},Symbol.toStringTag,{value:"Module"}));function Lf(t,e,n,r){return t[0]=e[0]*(1-r)+n[0]*r,t[1]=e[1]*(1-r)+n[1]*r,t}function Na(t,e){return Dk(t,e)}function ERt(t,e,n){const r=Na(e,n);if(r===0)return Na(e,t);const i=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]);return i*i/r}function Xze(t,e,n,r,i){const[s,o]=e,[a,l]=n,[c,u]=r,[h,f]=i,g=(s-a)*(u-f)-(o-l)*(c-h);if(g===0)return null;const v=(s*l-o*a)*(c-h)-(s-a)*(c*f-u*h),x=(s*l-o*a)*(u-f)-(o-l)*(c*f-u*h);return t[0]=v/g,t[1]=x/g,t}const nh=2*Math.PI;function e1(t,e){const n=Math.atan2(t,e);return n<0?n+nh:n}function jge(t){return Math.abs(t)%nh}function fte(t){const e=jge(t);return e<Math.PI?e:nh-e}function NO(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function Fge(t,e,n,r){if(xg(jge(t-e),0))return n?[t,t]:[t,r?t-nh:t+nh];const[i,s]=r?[t-nh,t]:[t,t+nh];return[t,vI({min:i,max:s},e)]}function vI({min:t,max:e},n){let r;return r=e-n,r>=nh?(r-=r%nh,n+r):(r=n-t,r>=nh?(r-=r%nh,n-r):n)}function Zze(t,e){const n=vI(t,e);return n>t.min&&n<t.max?n:fte(n-t.min)<fte(n-t.max)?t.min:t.max}function Vge(t,e,n,r=10){return e.map(i=>{let s=i;for(let o=0;o<r;o++){const[a,l,c,u,h,f]=n(s),g=t[0]-a,v=t[1]-l,x=-c,b=-u;s+=-(2*g*x+2*v*b)/(2*x*x+2*g*-h+2*b*b+2*v*-f||1e-6)}return s})}const Jze=[0,0];function zge(t){const e=1-t,n=e*e,r=t*t;return[n*e,3*t*n,3*r*e,r*t]}function T9(t,e,n,r,i){const[s,o,a,l]=zge(i);return[t[0]*s+e[0]*o+n[0]*a+r[0]*l,t[1]*s+e[1]*o+n[1]*a+r[1]*l]}function pte(t,e,n,r,i){const[s,o,a,l]=zge(i);return t*s+e*o+n*a+r*l}function SRt(t,e,n){const r=t,[i,s,o]=e.b;return T9(r,s,o,i,n)}function Qze(t,e,n){const r=t,[i,s,o]=e.b,a=Lf([0,0],r,s,n),l=Lf(Jze,s,o,n),c=Lf([0,0],o,i,n),u=Lf([0,0],a,l,n),h=Lf([0,0],l,c,n);return[{b:[Lf([],u,h,n),a,u]},{b:[[...i],h,c]}]}function TRt(t,e,n){const r=t,[i,s,o]=e.b,a=Vge(n,[.1,.5,.9],h=>{const f=1-h,[g,v]=T9(r,s,o,i,h);return[g,v,3*f*f*(s[0]-r[0])+6*f*h*(o[0]-s[0])+3*h*h*(i[0]-o[0]),3*f*f*(s[1]-r[1])+6*f*h*(o[1]-s[1])+3*h*h*(i[1]-o[1]),6*f*(o[0]-2*s[0]+r[0])+6*h*(i[0]-2*o[0]+s[0]),6*f*(o[1]-2*s[1]+r[1])+6*h*(i[1]-2*o[1]+s[1])]}).map(h=>Math.min(1,Math.max(0,h)));a.push(0,1);let l=1/0;const c=a.map(h=>{const f=T9(r,s,o,i,h),[g,v]=f,x=n[0]-g,b=n[1]-v,T=Math.sqrt(x*x+b*b);return l=Math.min(T,l),{t:h,curvePoint:f,distance:T}}),u=[];for(const h of c){const{t:f,distance:g}=h;gge(g,l)&&!u.some(({t:v})=>xg(v,f))&&u.push(h)}return u}function eUe(t,e,n){const r=e,[i,s,o]=n.b;if(qc(t,r),qc(t,i),b9(t,s[0],s[1])&&b9(t,o[0],o[1]))return t;for(const a of mte(r[0],s[0],o[0],i[0]))a>0&&a<1&&vze(t,pte(r[0],s[0],o[0],i[0],a));for(const a of mte(r[1],s[1],o[1],i[1]))a>0&&a<1&&_ze(t,pte(r[1],s[1],o[1],i[1],a));return t}function mte(t,e,n,r){const i=3*(3*(e-n)-t+r),s=6*(t-2*e+n),o=3*(e-t);if(i===0)return s!==0?[-o/s]:[];const a=Math.sqrt(s*s-4*i*o);return[(-s+a)/(2*i),(-s-a)/(2*i)]}function kRt(t,e,n){let i=0,s=[e];for(let o=0;o<16;o++){let a=t;const l=[];for(const u of s)l.push(...Qze(a,u,.5)),a=u.b[0];s=l,a=t,i=0;let c=0;for(const u of s){const[h,f,g]=u.b,v=Math.sqrt(Na(a,h));i+=(v+(Math.sqrt(Na(a,f))+Math.sqrt(Na(f,g))+Math.sqrt(Na(g,h))))/2,c+=v,a=h}if(i-c<n)return i}return i}function tUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n,[c,u]=[s-r,o-i];let h=c*(a-r)+u*(l-i);h/=c**2+u**2,h=hu(h,0,1);const f=Lf([0,0],t,e,h);return{t:h,curvePoint:f,distance:Math.sqrt(Na(f,n))}}let Uge=class{constructor(e,n,r,i,s,o){this.cx=e,this.cy=n,this.radius=r,this.thetaStart=i,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:n,radius:r,thetaStart:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}get endPoint(){const{cx:e,cy:n,radius:r,thetaEnd:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}};function B4(t,e){const{cx:n,cy:r,radius:i}=t;return[n+i*Math.cos(e),r+i*Math.sin(e)]}function yM(t,e){if(t.isInvalid)return Lf([0,0],t.startPoint,t.endPoint,e);const{thetaStart:n,thetaEnd:r}=t;return B4(t,n*(1-e)+r*e)}function IRt(t,e){if(t.isInvalid)return tUe(t.startPoint,t.endPoint,e);const{cx:n,cy:r,thetaStart:i,thetaEnd:s}=t,[o,a]=e,l=Zze(NO(i,s),Math.atan2(a-r,o-n)),c=B4(t,l);return{t:(l-i)/(s-i),curvePoint:c,distance:Math.sqrt(Na(e,c))}}function gte(t,e){if(e.isInvalid)return qc(t,e.startPoint),qc(t,e.endPoint),t;const{cx:n,cy:r,radius:i,thetaStart:s,thetaEnd:o}=e;qc(t,B4(e,s)),qc(t,B4(e,o));const a=NO(s,o),l=Math.PI/2;let c=0;for(const u of[[n+i,r],[n,r+i],[n-i,r],[n,r-i]])c=vI(a,c),c>a.min&&c<a.max&&qc(t,u),c+=l;return t}function PRt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:n,thetaEnd:r}=t;return e*Math.abs(r-n)}function nUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function rUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function tw(t,e,n,r,i,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Gge(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bge(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Wge(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l;let v=n*h+r*f+i*g;return v?(v=1/v,t[0]=h*v,t[1]=(-u*r+i*c)*v,t[2]=(a*r-i*o)*v,t[3]=f*v,t[4]=(u*n-i*l)*v,t[5]=(-a*n+i*s)*v,t[6]=g*v,t[7]=(-c*n+r*l)*v,t[8]=(o*n-r*s)*v,t):null}function iUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=i*c-r*u,t[2]=r*a-i*o,t[3]=a*l-s*u,t[4]=n*u-i*l,t[5]=i*s-n*a,t[6]=s*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*s,t}function vM(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function $k(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1],v=n[2],x=n[3],b=n[4],T=n[5],A=n[6],I=n[7],P=n[8];return t[0]=f*r+g*o+v*c,t[1]=f*i+g*a+v*u,t[2]=f*s+g*l+v*h,t[3]=x*r+b*o+T*c,t[4]=x*i+b*a+T*u,t[5]=x*s+b*l+T*h,t[6]=A*r+I*o+P*c,t[7]=A*i+I*a+P*u,t[8]=A*s+I*l+P*h,t}function k9(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+g*o+c,t[7]=f*i+g*a+u,t[8]=f*s+g*l+h,t}function Hge(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);return t[0]=g*r+f*o,t[1]=g*i+f*a,t[2]=g*s+f*l,t[3]=g*o-f*r,t[4]=g*a-f*i,t[5]=g*l-f*s,t[6]=c,t[7]=u,t[8]=h,t}function sUe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function oUe(t,e,n){const r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t}function aUe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function lUe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function cUe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function uUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function hUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,v=i*l,x=s*o,b=s*a,T=s*l;return t[0]=1-h-v,t[3]=u-T,t[6]=f+b,t[1]=u+T,t[4]=1-c-v,t[7]=g-x,t[2]=f-b,t[5]=g+x,t[8]=1-c-h,t}function dUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,v=n*h+r*f+i*g;if(!v)return null;const x=1/v;return t[0]=h*x,t[1]=(-u*r+i*c)*x,t[2]=(a*r-i*o)*x,t[3]=f*x,t[4]=(u*n-i*l)*x,t[5]=(-a*n+i*s)*x,t[6]=g*x,t[7]=(-c*n+r*l)*x,t[8]=(o*n-r*s)*x,t}function fUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],v=e[12],x=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,M=r*l-i*a,F=r*c-s*a,C=i*c-s*l,N=u*x-h*v,O=u*b-f*v,j=u*T-g*v,V=h*b-f*x,G=h*T-g*x,U=f*T-g*b;let fe=A*U-I*G+P*V+M*j-F*O+C*N;return fe?(fe=1/fe,t[0]=(a*U-l*G+c*V)*fe,t[1]=(l*j-o*U-c*O)*fe,t[2]=(o*G-a*j+c*N)*fe,t[3]=(i*G-r*U-s*V)*fe,t[4]=(n*U-i*j+s*O)*fe,t[5]=(r*j-n*G-s*N)*fe,t[6]=(x*C-b*F+T*M)*fe,t[7]=(b*P-v*C-T*I)*fe,t[8]=(v*F-x*P+T*A)*fe,t):null}function pUe(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function mUe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function gUe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function yUe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function qge(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function vUe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function _Ue(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function xUe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function wUe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e[0],f=e[1],g=e[2],v=e[3],x=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=xl();return Math.abs(n-h)<=P*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=P*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-g)<=P*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-v)<=P*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-x)<=P*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-b)<=P*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-T)<=P*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-A)<=P*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-I)<=P*Math.max(1,Math.abs(u),Math.abs(I))}function bUe(t){const e=xl(),n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}const EUe=$k,SUe=qge;Object.freeze(Object.defineProperty({__proto__:null,add:yUe,adjoint:iUe,copy:rUe,determinant:vM,equals:wUe,exactEquals:xUe,frob:gUe,fromMat2d:uUe,fromMat4:nUe,fromQuat:hUe,fromRotation:lUe,fromScaling:cUe,fromTranslation:aUe,identity:Gge,invert:Wge,isOrthoNormal:bUe,mul:EUe,multiply:$k,multiplyScalar:vUe,multiplyScalarAndAdd:_Ue,normalFromMat4:fUe,normalFromMat4Legacy:dUe,projection:pUe,rotate:Hge,scale:sUe,scaleByVec2:oUe,set:tw,str:mUe,sub:SUe,subtract:qge,translate:k9,transpose:Bge},Symbol.toStringTag,{value:"Module"}));function lv(){return[1,0,0,0,1,0,0,0,1]}function TUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function kUe(t,e,n,r,i,s,o,a,l){return[t,e,n,r,i,s,o,a,l]}const AUe=lv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:AUe,clone:TUe,create:lv,fromValues:kUe},Symbol.toStringTag,{value:"Module"}));const g_=lv();function IUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n;tw(g_,r,s,a,i,o,l,1,1,1);const c=vM(g_),u=4*c/(Na(t,e)+Na(e,n)+Na(n,t));if(!isFinite(u)||Math.abs(u)<1e-8)return null;const h=r**2+i**2,f=s**2+o**2,g=a**2+l**2;tw(g_,h,f,g,i,o,l,1,1,1);const v=vM(g_);return tw(g_,h,f,g,r,s,a,1,1,1),[v/c*.5,vM(g_)/c*-.5]}function Kge(t,e){const[n,r]=e.c,i=IUe(t,r,n),s=i==null,o=i??Lf([],t,n,.5),[a,l]=t,[c,u]=r,[h,f]=n,[g,v]=o,x=a-g,b=l-v,T=Math.sqrt(x*x+b*b),A=e1(l-v,a-g),I=e1(u-v,c-g);let P=e1(f-v,h-g);return(I-A)*(P-I)<0&&(P+=2*Math.sign(A-P)*Math.PI),new Uge(g,v,T,A,P,s)}function RRt(t,e,n){const r=yM(t,n/2),i=yM(t,n),s=yM(t,(n+1)/2);return[{c:[i,r]},{c:[[...e.c[0]],s]}]}function CRt(t,e){const[n]=e.c,{cx:r,cy:i,thetaStart:s,thetaEnd:o,radius:a,isInvalid:l}=Kge(t,e);return{a:[n,[r,i],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,l?s:0,a,l?0:1]}}function MRt(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function NRt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function HB(t){return"b"in t}function qB(t){return"c"in t}function OO(t){return Array.isArray(t)}function ORt(t){return"a"in t}function Yge(t){return"a"in t&&t.a.length===4}function PUe(t){return"a"in t&&t.a.length===7}function M$(t){return OO(t)?t:HB(t)?t.b[0]:qB(t)?t.c[0]:t.a[0]}function RUe(t){if(HB(t)){const[e,n,r]=t.b;return{b:[[...e],[...n],[...r]]}}if(qB(t)){const[e,n]=t.c;return{c:[[...e],[...n]]}}if(OO(t))return[...t];if(Yge(t)){const[e,n,r,i]=t.a;return{a:[[...e],[...n],r,i]}}if(PUe(t)){const[e,n,r,i,s,o,a]=t.a;return{a:[[...e],[...n],r,i,s,o,a]}}return t}function CUe(t,e){const[n,r,i,s]=e.a,[o,a]=t,[l,c]=n,[u,h]=r,f=o-u,g=a-h,v=Math.sqrt(f*f+g*g),x=l-u,b=c-h,T=Math.sqrt(x*x+b*b),A=v===0||T===0||!gge(v,T),I=v,[P,M]=Fge(e1(a-h,o-u),Math.atan2(c-h,l-u),i,s);return new Uge(u,h,I,P,M,A)}function LRt(t,e,n){const{cx:r,cy:i,thetaStart:s,thetaEnd:o}=t,[a,l,c,u]=e.a,h=s*(1-n)+o*n;return[{a:[yM(t,n),[r,i],Math.abs(h-s)<Math.PI?1:0,u]},{a:[[...a],[r,i],Math.abs(o-h)<Math.PI?1:0,u]}]}let MUe=class{constructor(e,n,r,i,s,o,a,l,c){this.cx=e,this.cy=n,this.a=r,this.b=i,this.cosR=s,this.sinR=o,this.u1=a,this.u2=l,this.isInvalid=c}};function KB(t,e){const[n,r,i,s,o,a,l]=e.a,[c,u]=t,[h,f]=n,[g,v]=r,x=a*l,b=Math.cos(o),T=Math.sin(o),[A,I]=Fge(e1(1/x*(u-v)*b-1/x*(c-g)*T,1/a*(u-v)*T+1/a*(c-g)*b),Math.atan2(1/x*(f-v)*b-1/x*(h-g)*T,1/a*(f-v)*T+1/a*(h-g)*b),i,s);return new MUe(g,v,a,x,b,T,A,I,a===0||x===0)}function jk(t,e){const{a:n,b:r,cosR:i,sinR:s,cx:o,cy:a}=t,l=Math.cos(e),c=Math.sin(e);return[n*l*i-r*c*s+o,n*l*s+r*c*i+a]}function U_(t,e){const{u1:n,u2:r}=t;return jk(t,n*(1-e)+r*e)}function $Rt(t,e,n){if(n<0||n>1)return[];if(n===0||n===1)return[RUe(e)];const[r,[i,s],o,a,l,c,u]=e.a,{u1:h,u2:f}=t,g=h*(1-n)+f*n;return[{a:[[...U_(t,n)],[i,s],Math.abs(g-h)<Math.PI?1:0,a,l,c,u]},{a:[[...r],[i,s],Math.abs(f-g)<Math.PI?1:0,a,l,c,u]}]}function jRt(t,e){const{a:n,b:r,cosR:i,sinR:s,u1:o,u2:a}=t,l=Math.PI/6,c=Vge(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],x=>{const b=Math.cos(x),T=Math.sin(x),[A,I]=jk(t,x);return[A,I,-n*i*T-r*s*b,-n*s*T+r*i*b,-n*i*b+r*s*T,-n*s*b-r*i*T]}),u=NO(o,a),h=new Set(c.map(x=>vI(u,x)).filter(x=>x>u.min&&x<u.max));h.add(o),h.add(a);let f,g,v=1/0;for(const x of h){const b=jk(t,x),[T,A]=b,I=e[0]-T,P=e[1]-A,M=I*I+P*P;M<v&&(f=(x-o)/(a-o),g=b,v=M)}return{t:f,curvePoint:g,distance:Math.sqrt(v)}}function NUe(t,e,n){const r=KB(e,n),{a:i,b:s,u1:o,u2:a,cosR:l,sinR:c,isInvalid:u}=r,h=n.a[0];if(qc(t,e),qc(t,h),u)return t;const f=Math.atan2(-s*c,i*l),g=f+Math.PI,v=Math.atan2(s*l,i*c),x=v+Math.PI,b=NO(o,a);for(const T of[f,g,v,x].map(A=>vI(b,A)))T>b.min&&T<b.max&&qc(t,jk(r,T));return t}function FRt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=KB(t,e),{u1:h,u2:f,isInvalid:g}=u,v=f-h;if(g)return Math.sqrt(Na(t,r));const x=14,b=[0,0];let T=0,A=[U_(u,0),U_(u,.25),U_(u,.5),U_(u,.75),U_(u,1)];for(let I=0;I<x;I++){const P=A.length-1,M=v/(2*P),F=[];for(let N=0;N<P;N++)F.push(A[N]),F.push(jk(u,h+(2*N+1)*M));F.push(A[A.length-1]),A=F,T=0;let C=0;for(let N=1;N<A.length;N++){const O=A[N-1],j=A[N];if(T+=Math.sqrt(Na(O,j)),N>1){const V=A[N-2],G=Xze(b,V,O,i,j);C+=G?Math.sqrt(Na(O,G)):Math.abs(j[0]-O[0])+Math.abs(j[1]-O[1])}else C+=T}if(C-T<n)return T}return T}const yte=lv(),CR=lv(),vte=lv(),dm=lv();function VRt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=KB(t,e),{cosR:h,sinR:f,a:g,b:v,cx:x,cy:b}=u,T=gM([0,0],r,n),A=gM([0,0],i,n),I=n[0]*n[4]<0?1-o:o;{const P=g*g*f*f+v*v*h*h,M=2*(v*v-g*g)*f*h,F=g*g*h*h+v*v*f*f,C=-2*P*x-M*b,N=-M*x-2*F*b;tw(yte,P,M/2,C/2,M/2,F,N/2,C/2,N/2,P*x*x+M*x*b+F*b*b-g*g*v*v)}if(Wge(CR,n),CR==null){const P=gM([0,0],t,n);return{a:[T,A,s,o,e1(T[1],T[0]),Math.sqrt(Na(T,P))/2,0]}}Bge(vte,CR),$k(dm,$k(dm,vte,yte),CR);{const P=dm[0],M=2*dm[1],F=dm[4],C=2*dm[2],N=2*dm[5],O=M*M-4*P*F,j=2*(P*N*N+F*C*C-M*C*N+O*dm[8]),V=Math.sqrt((P-F)**2+M*M),G=-Math.sqrt(j*(P+F+V))/O,U=-Math.sqrt(j*(P+F-V))/O;return{a:[T,A,s,I,.5*e1(-M,F-P),G,U/G]}}}function OUe(t,e,n){if(OO(n))return qc(t,e),qc(t,n),t;if(HB(n))return eUe(t,e,n);if(qB(n)){const r=Kge(e,n);return gte(t,r)}if(Yge(n)){const r=CUe(e,n);return gte(t,r)}return NUe(t,e,n)}function Xge(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Zge(t){return t.points!==void 0}function Jge(t){return t.x!==void 0&&t.y!==void 0}function Qge(t){return t.paths!==void 0}function e0e(t){return t.rings!==void 0}function t0e(t){function e(n,r){return n==null?r:r==null?n:t(n,r)}return e}const eg=t0e(Math.min),tg=t0e(Math.max);function zRt(t,e){return Qge(e)?m2(t,e.curvePaths??e.paths,!1,!1)??t:e0e(e)?m2(t,e.curveRings??e.rings,!1,!1)??t:Zge(e)?YB(t,e.points,!1,!1,!1,!1):Xge(e)?n0e(t,e):(Jge(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function URt(t){let e,n,r,i;for(t.reset(),e=r=1/0,n=i=-1/0;t.nextPath();){const s=LUe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return gl([e,r,n,i])}function LUe(t){let e,n,r,i;for(e=r=1/0,n=i=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),n=Math.max(t.x,n),i=Math.max(t.y,i);return gl([e,r,n,i])}function GRt(t,e){return Qge(e)?m2(t,e.curvePaths??e.paths,!0,!1)??t:e0e(e)?m2(t,e.curveRings??e.rings,!0,!1)??t:Zge(e)?YB(t,e.points,!0,!1,!0,!1):Xge(e)?n0e(t,e,!0,!1,!0,!1):(Jge(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function m2(t,e,n,r){const i=n?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,u]=M$(e[0][0]),h=c,f=u;for(let g=0;g<e.length;g++){const v=e[g];for(let x=0;x<v.length;x++){const b=M$(v[x]),[T,A]=b;if(c=eg(c,T),u=eg(u,A),h=tg(h,T),f=tg(f,A),n&&b.length>2){const F=b[2];s=eg(s,F),o=tg(o,F)}if(r&&b.length>i){const F=b[i];a=eg(s,F),l=tg(o,F)}const I=v[x];if(OO(I)||x<1)continue;const P=M$(v[x-1]),M=gze(c,u,h,f);[c,u,h,f]=OUe(M,P,I)}}return n?r?(t[0]=c,t[1]=u,t[2]=s,t[3]=a,t[4]=h,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=u,t[2]=s,t[3]=h,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=u,t[2]=a,t[3]=h,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=u,t[2]=h,t[3]=f,t.length=4,t)}function n0e(t,e,n,r,i,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let u=e.zmin,h=e.zmax,f=e.mmin,g=e.mmax;return i?(u=u||0,h=h||0,s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=a,t[5]=c,t[6]=h,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=u,t[3]=a,t[4]=c,t[5]=h,t)):s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function YB(t,e,n,r,i,s){const o=n?3:2,a=r&&s,l=n&&i;if(!e.length||!e[0].length)return null;let c,u,h,f,[g,v]=e[0],[x,b]=e[0];for(let T=0;T<e.length;T++){const A=e[T],[I,P]=A;if(g=eg(g,I),v=eg(v,P),x=tg(x,I),b=tg(b,P),l&&A.length>2){const M=A[2];c=eg(c,M),u=tg(u,M)}if(a&&A.length>o){const M=A[o];h=eg(c,M),f=tg(u,M)}}return i?(c=c||0,u=u||0,s?(h=h||0,f=f||0,t[0]=g,t[1]=v,t[2]=c,t[3]=h,t[4]=x,t[5]=b,t[6]=u,t[7]=f,t):(t[0]=g,t[1]=v,t[2]=c,t[3]=x,t[4]=b,t[5]=u,t)):s?(h=h||0,f=f||0,t[0]=g,t[1]=v,t[2]=h,t[3]=x,t[4]=b,t[5]=f,t):(t[0]=g,t[1]=v,t[2]=x,t[3]=b,t)}function DUe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function $Ue(t){return t.points!==void 0}function jUe(t){return t.x!==void 0&&t.y!==void 0}function FUe(t){return t.paths!==void 0}function VUe(t){return t.rings!==void 0}const XB=[];function r0e(t,e,n,r){return{xmin:t,ymin:e,xmax:n,ymax:r}}function i0e(t,e,n,r,i,s){return{xmin:t,ymin:e,zmin:n,xmax:r,ymax:i,zmax:s}}function s0e(t,e,n,r,i,s){return{xmin:t,ymin:e,mmin:n,xmax:r,ymax:i,mmax:s}}function o0e(t,e,n,r,i,s,o,a){return{xmin:t,ymin:e,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function ZB(t,e=!1,n=!1){return e?n?o0e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):i0e(t[0],t[1],t[2],t[3],t[4],t[5]):n?s0e(t[0],t[1],t[2],t[3],t[4],t[5]):r0e(t[0],t[1],t[2],t[3])}function BRt(t){return t?DUe(t)?t:jUe(t)?zUe(t):VUe(t)?l0e(t):FUe(t)?c0e(t):$Ue(t)?a0e(t):null:null}function a0e(t){const{hasZ:e,hasM:n,points:r}=t,i=YB(XB,r,e??!1,n??!1,e??!1,n??!1);return i?ZB(i,e,n):null}function zUe(t){const{x:e,y:n,z:r,m:i}=t,s=i!=null;return r!=null?s?o0e(e,n,r,i,e,n,r,i):i0e(e,n,r,e,n,r):s?s0e(e,n,i,e,n,i):r0e(e,n,e,n)}function l0e(t){const{hasZ:e,hasM:n,rings:r,curveRings:i}=t,s=m2(XB,i??r,e??!1,n??!1);return s?ZB(s,e,n):null}function c0e(t){const{hasZ:e,hasM:n,paths:r,curvePaths:i}=t,s=m2(XB,i??r,e??!1,n??!1);return s?ZB(s,e,n):null}function g2(t,e,n=!1){let{hasM:r,hasZ:i}=t;Array.isArray(e)?e.length!==4||r||i?e.length===3&&n&&!r?(i=!0,r=!1):e.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!i||e.hasZ)),t.hasZ=i,t.hasM=r}var _M;function _te(t){return!Array.isArray(t[0])}function UUe(t){return typeof t[0]?.[0]=="number"}function GUe(t){if(!t)return;let{rings:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],UUe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,rings:e,spatialReference:i}}let xi=_M=class extends js{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:n}=t;let r=!1,i=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new _M(s)}constructor(t){super(GUe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){LF(Tt.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=lze(this);return t?Jt.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=Ze(t)}get extent(){const t=l0e(this),{spatialReference:e}=this;return t?new $n({...t,spatialReference:e}):null}get isSelfIntersecting(){return LF(Tt.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),EFe(this.rings)}writeRings(t,e){e.rings=Ze(this.rings)}addRing(t){if(!t)return;const e=this.rings,n=e.length;if(_te(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new _M;return t.spatialReference=this.spatialReference,t.rings=Ze(this.rings),t.curveRings=Ze(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;if(e!=null!=(n!=null)||e!=null&&n!=null&&!e.equals(n)||this.rings.length!==t.rings.length)return!1;const r=([i,s,o,a],[l,c,u,h])=>i===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=t.rings[i];if(!rO(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=wO(t,this.spatialReference);return _B(this,e??t)}isClockwise(t){const e=_te(t)?t.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):t;return Age(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.rings[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Jt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Jt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Jt(n[0],n[1],n[2],n[3],this.spatialReference):new Jt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(g2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t].splice(e,0,n),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Jt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Jt(i,n));return this.notifyChange("rings"),r}setPoint(t,e,n){return this._validateInputs(t,e)?(g2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t][e]=n,this.notifyChange("rings"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],xi.prototype,"cache",null),_([E({readOnly:!0})],xi.prototype,"centroid",null),_([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],xi.prototype,"curveRings",void 0),_([Zn("curveRings")],xi.prototype,"writeCurveRings",null),_([E({readOnly:!0})],xi.prototype,"extent",null),_([E({readOnly:!0})],xi.prototype,"isSelfIntersecting",null),_([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],xi.prototype,"rings",void 0),_([Zn("rings")],xi.prototype,"writeRings",null),xi=_M=_([ue("esri.geometry.Polygon")],xi),xi.prototype.toJSON.isDefaultToJSON=!0;function n0(){return[0,0,0]}function BUe(t){return[t[0],t[1],t[2]]}function cb(t,e,n){return[t,e,n]}function WUe(t,e,n){return[t,e,n]}function HUe(t,e=n0()){const n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function u0e(){return n0()}function h0e(){return cb(1,1,1)}function d0e(){return cb(1,0,0)}function f0e(){return cb(0,1,0)}function p0e(){return cb(0,0,1)}const qUe=u0e(),KUe=h0e(),YUe=d0e(),XUe=f0e(),ZUe=p0e();Object.freeze(Object.defineProperty({__proto__:null,ONES:KUe,UNIT_X:YUe,UNIT_Y:XUe,UNIT_Z:ZUe,ZEROS:qUe,clone:BUe,create:n0,freeze:WUe,fromArray:HUe,fromValues:cb,ones:h0e,unitX:d0e,unitY:f0e,unitZ:p0e,zeros:u0e},Symbol.toStringTag,{value:"Module"}));var A9;function JUe(t){if(!t)return;let{points:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,points:e,spatialReference:i}}let qu=A9=class extends js{constructor(t){super(JUe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=a0e(this);return t?new $n({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=Ze(this.points)}clone(){const{points:t,spatialReference:e,hasM:n,hasZ:r}=this;return new A9({points:Ze(t),spatialReference:e.clone(),hasM:n,hasZ:r})}addPoint(t){return g2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],n={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=e[2],r=3),this.hasM&&(n.m=e[r]),new Jt(n)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Jt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(g2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};_([E({readOnly:!0})],qu.prototype,"cache",null),_([E({readOnly:!0})],qu.prototype,"extent",null),_([E({type:[[Number]],json:{write:{isRequired:!0}}})],qu.prototype,"points",void 0),_([Zn("points")],qu.prototype,"writePoints",null),qu=A9=_([ue("esri.geometry.Multipoint")],qu),qu.prototype.toJSON.isDefaultToJSON=!0;var I9;function QUe(t){return!Array.isArray(t[0])}function eGe(t){return typeof t[0]?.[0]=="number"}function tGe(t){if(!t)return;let{paths:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],eGe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,paths:e,spatialReference:i}}let ws=I9=class extends js{constructor(t){super(tGe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=Ze(t)}get extent(){const t=c0e(this),{spatialReference:e}=this;return t?new $n({...t,spatialReference:e}):null}writePaths(t,e){e.paths=Ze(this.paths)}addPath(t){if(!t)return;const e=this.paths,n=e.length;if(QUe(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new I9;return t.spatialReference=this.spatialReference,t.paths=Ze(this.paths),t.curvePaths=Ze(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Jt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Jt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Jt(n[0],n[1],n[2],n[3],this.spatialReference):new Jt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(g2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t].splice(e,0,n),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Jt(i,n));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Jt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(t,e,n){return this._validateInputs(t,e)?(g2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t][e]=n,this.notifyChange("paths"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};_([E({readOnly:!0})],ws.prototype,"cache",null),_([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],ws.prototype,"curvePaths",void 0),_([Zn("curvePaths")],ws.prototype,"writeCurvePaths",null),_([E({readOnly:!0})],ws.prototype,"extent",null),_([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],ws.prototype,"paths",void 0),_([Zn("paths")],ws.prototype,"writePaths",null),ws=I9=_([ue("esri.geometry.Polyline")],ws),ws.prototype.toJSON.isDefaultToJSON=!0;var P9;let G_=P9=class extends Kt{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new P9({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};_([E()],G_.prototype,"isInverse",void 0),_([E()],G_.prototype,"wkt",void 0),_([E()],G_.prototype,"wkid",void 0),G_=P9=_([ue("esri.geometry.operators.support.GeographicTransformationStep")],G_);var R9;let cT=R9=class extends Kt{constructor(t){super(t),this.steps=[]}getInverse(){const t=new R9;for(let e=this.steps.length-1;e>=0;e--){const n=this.steps[e];t.steps.push(n.getInverse())}return t}};_([E({type:[G_],nonNullable:!0})],cT.prototype,"steps",void 0),cT=R9=_([ue("esri.geometry.operators.support.GeographicTransformation")],cT);const WRt=Math.PI/180,HRt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,fm=rs.radius,Mu=rs.eccentricitySquared,nGe={a1:fm*Mu,a2:fm*Mu*fm*Mu,a3:fm*Mu*Mu/2,a4:fm*Mu*fm*Mu*2.5,a5:fm*Mu+fm*Mu*Mu/2,a6:1-Mu},qRt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:rs.radius,f:rs.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Dg.radius,f:Dg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:wd.radius,f:wd.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:wd.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},rGe={2:{5:hi,7:null,9:null,10:hi,1:hT,6:null,8:null,0:null,3:nw,11:rw,2:hi,4:ow},5:{5:hi,7:null,9:null,10:hi,1:hT,6:null,8:null,0:null,3:nw,11:rw,2:hi,4:ow},7:{5:null,7:hi,9:null,10:hi,1:null,6:bte,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:hi,10:hi,1:null,6:null,8:wte,0:null,3:null,11:null,2:null,4:null},3:{5:uT,7:null,9:null,10:uT,1:sGe,6:null,8:null,0:null,3:hi,11:lGe,2:uT,4:oGe},4:{5:aw,7:null,9:null,10:aw,1:yGe,6:null,8:null,0:null,3:vGe,11:cGe,2:aw,4:hi},1:{5:sw,7:null,9:null,10:sw,1:hi,6:null,8:null,0:null,3:pGe,11:uGe,2:sw,4:mGe},6:{5:null,7:Ste,9:null,10:Ste,1:null,6:hi,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:Ete,10:Ete,1:null,6:null,8:hi,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:hi,3:null,11:null,2:null,4:null},10:{5:hi,7:hi,9:hi,10:hi,1:hT,6:bte,8:wte,0:null,3:nw,11:rw,2:hi,4:ow},11:{5:iw,7:null,9:null,10:iw,1:hGe,6:null,8:null,0:null,3:dGe,11:hi,2:iw,4:fGe}};function m0e(t,e){return iGe(t,e)?.projector}function iGe(t,e){if(t==null||e==null)return null;if(af.source.spatialReference===t&&af.dest.spatialReference===e)return af;const n=xte(t,af.source),r=xte(e,af.dest);return n===0&&r===0?fo(t,e)?af.projector=hi:af.projector=null:af.projector=rGe[n][r],af}function xte(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Vd(t,1)),O4(t)?e.spatialReferenceId=1:L1(t)?e.spatialReferenceId=2:Md(t)?e.spatialReferenceId=3:P8e(t)?e.spatialReferenceId=11:t.wkt===N8e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===gB.wkt?e.spatialReferenceId=6:t.wkt===yB.wkt?e.spatialReferenceId=8:bpe(t)?e.spatialReferenceId=7:Epe(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function hi(t,e,n,r){t!==n&&(n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e])}function uT(t,e,n,r){n[r]=v2*(t[e]/t1),n[r+1]=v2*(g0e-2*Math.atan(Math.exp(-t[e+1]/t1))),n[r+2]=t[e+2]}function sGe(t,e,n,r){const i=t[e]/t1,s=g0e-2*Math.atan(Math.exp(-t[e+1]/t1)),o=t1+t[e+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o}function oGe(t,e,n,r){uT(t,e,n,r),ow(n,r,n,r)}function aGe(t,e,n,r,i){const s=.4999999*Math.PI,o=hu(y2*t[e+1],-s,s),a=Math.sin(o);n[r++]=y2*t[e]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=t[e+2]}function nw(t,e,n,r){aGe(t,e,n,r,rs)}function rw(t,e,n,r){n[r]=t[e]*Tte,n[r+1]=t[e+1]*Tte,n[r+2]=t[e+2]}function iw(t,e,n,r){n[r]=t[e]*kte,n[r+1]=t[e+1]*kte,n[r+2]=t[e+2]}function lGe(t,e,n,r){uT(t,e,n,r),rw(n,r,n,r)}function cGe(t,e,n,r){aw(t,e,n,r),rw(n,r,n,r)}function uGe(t,e,n,r){sw(t,e,n,r),rw(n,r,n,r)}function hGe(t,e,n,r){iw(t,e,n,r),hT(n,r,n,r)}function dGe(t,e,n,r){iw(t,e,n,r),nw(n,r,n,r)}function fGe(t,e,n,r){iw(t,e,n,r),ow(n,r,n,r)}function JB(t,e,n,r,i){const s=i+t[e+2],o=y2*t[e+1],a=y2*t[e],l=Math.cos(o)*s;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(o)*s}function wte(t,e,n,r){JB(t,e,n,r,Dg.radius)}function bte(t,e,n,r){JB(t,e,n,r,wd.radius)}function hT(t,e,n,r){JB(t,e,n,r,rs.radius)}function QB(t,e,n,r,i){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=RVe(a/(l===0?1:l)),u=Math.atan2(o,s);n[r++]=v2*u,n[r++]=v2*c,n[r]=l-i}function Ete(t,e,n,r){QB(t,e,n,r,Dg.radius)}function Ste(t,e,n,r){QB(t,e,n,r,wd.radius)}function sw(t,e,n,r){QB(t,e,n,r,rs.radius)}function pGe(t,e,n,r){sw(t,e,n,r),nw(n,r,n,r)}function mGe(t,e,n,r){sw(t,e,n,r),ow(n,r,n,r)}function gGe(t,e,n,r,i){const s=y2*t[e],o=y2*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(u+a)*c*Math.cos(s),n[r++]=(u+a)*c*Math.sin(s),n[r++]=(u*(1-i.eccentricitySquared)+a)*l}function ow(t,e,n,r){gGe(t,e,n,r,rs)}function aw(t,e,n,r){const i=nGe,s=t[e],o=t[e+1],a=t[e+2];let l,c,u,h,f,g,v,x,b,T,A,I,P,M,F,C,N,O,j,V,G;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),V=Math.atan2(o,s),g=a*a/h,v=c/h,M=i.a2/f,F=i.a3-i.a4/f,v>.3?(x=l/f*(1+v*(i.a1+M+g*F)/f),j=Math.asin(x),T=x*x,b=Math.sqrt(1-T)):(b=u/f*(1-g*(i.a5-M-v*F)/f),j=Math.acos(b),T=1-b*b,x=Math.sqrt(T)),A=1-rs.eccentricitySquared*T,I=rs.radius/Math.sqrt(A),P=i.a6*I,M=u-I*b,F=l-P*x,N=b*M+x*F,C=b*F-x*M,O=C/(P/A+N),j+=O,G=N+C*O/2,a<0&&(j=-j),n[r++]=v2*V,n[r++]=v2*j,n[r]=G}function yGe(t,e,n,r){aw(t,e,n,r),hT(n,r,n,r)}function vGe(t,e,n,r){aw(t,e,n,r),nw(n,r,n,r)}const af={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:hi},y2=mI(1),v2=pge(1),g0e=.5*Math.PI,t1=rs.radius,Tte=t1*Math.PI/180,kte=180/(t1*Math.PI);function _I(t,e,n,r,i,s,o=Math.floor(t.length/3)){const a=m0e(e,i);if(a==null)return!1;if(a===hi){if(t===r&&n===s)return!0;const c=n+3*o;for(let u=n,h=s;u<c;u++,h++)r[h]=t[u];return!0}const l=n+3*o;for(let c=n,u=s;c<l;c+=3,u+=3)a(t,c,r,u);return!0}const KRt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:_I},Symbol.toStringTag,{value:"Module"}));function Ate(t,e,n,r,i,s){return MR[0]=t,MR[1]=e,MR[2]=n,_I(MR,r,0,i,s,0)}const MR=n0();function _Ge(t,e,n){if(e==null||n==null||n.vcsWkid||fo(e,n)||jg(e)||jg(n))return null;const r=cee(e)/cee(n);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return i=>xGe(i,r);case"polyline":case"esriGeometryPolyline":return i=>bGe(i,r);case"polygon":case"esriGeometryPolygon":return i=>wGe(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>EGe(i,r);case"extent":case"esriGeometryEnvelope":return i=>SGe(i,r);default:return null}}function xGe(t,e){t?.z!=null&&(t.z*=e)}function wGe(t,e){if(t)for(const n of t.rings)for(const r of n)r.length>2&&(r[2]*=e)}function bGe(t,e){if(t)for(const n of t.paths)for(const r of n)r.length>2&&(r[2]*=e)}function EGe(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}function SGe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let dT=null,Fk=null,Vk=null,_2=null,C9={};const eW=new lI;function Sp(){return!!(Fk?.isLoaded()&&Vk?.isLoaded()&&_2?.isLoaded())}function y0e(){return!!Sp()||(tn(eW),Vg(),!1)}function v0e(t,e){return!t||!e||mh(t,e)||y0e()}function TGe(t,e){return!mh(t,e)&&!Sp()}async function Vg(t){dT==null&&(dT=Promise.all([_e(()=>import("./projectOperator-Ct1JnSiM.js"),__vite__mapDeps([45,46,47])).then(e=>(Fk=e,Fk.load())),_e(()=>import("./projectOperator-DhKtC7Xk.js"),__vite__mapDeps([48,46,47])).then(e=>(Vk=e,Vk.load())),_e(()=>import("./geographicTransformationUtils-C47ka7rE.js"),[]).then(e=>(_2=e,_2.load()))])),await dT,pi(t),eW.notify()}function cv(t,e,n){return Array.isArray(t)?t.length===0?[]:(aFe(t),M9(t,t[0].spatialReference,e,n)):(d2(t),M9([t],t.spatialReference,e,n)[0])}function M9(t,e,n,r){if(e==null||n==null)return t;if(mh(e,n,r))return t.map(i=>xM(i,e,n));if(r?.geographicTransformation==null&&O4(e))return t.map(i=>xM(i,e,Bt.WGS84)).map(i=>zk(i,n));if(r?.geographicTransformation==null&&O4(n))return t.map(i=>zk(i,Bt.WGS84)).map(i=>xM(i,Bt.WGS84,n));if(!Sp())throw new x0e;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:_2.getTransformation(e,n,r.areaOfInterestExtent)||new cT};else if(!r?.areaOfInterestExtent){const i=kGe(e,n);let s=C9[i];s||(s=_2.getTransformation(e,n)||new cT,C9[i]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof js?Fk.executeMany(t,n,r):Vk.executeMany(t,n,r)}function kGe(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function AGe(t,e){const n=_0e([t],e);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function _0e(t,e){if(!Sp()){for(const n of t)if(n!=null&&!fo(n.spatialReference,e)&&sc(n.spatialReference)&&sc(e)&&!mh(n.spatialReference,e))return tn(eW),{pending:Vg(),geometries:null}}return{pending:null,geometries:t.map(n=>n==null?null:fo(n.spatialReference,e)?n:sc(n.spatialReference)&&sc(e)?zk(n,e):null)}}let x0e=class extends Xe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function IGe(){dT=null,Fk=null,Vk=null,_2=null,C9={}}const PGe={get loadPromise(){return dT}};function zk(t,e){try{const n=cv(t,e);if(n==null)return null;"xmin"in t&&"xmin"in n&&(n.zmin=t.zmin,n.zmax=t.zmax);const r=_Ge(n.type,t.spatialReference,e);return r?.(n),n}catch(n){if(!(n instanceof x0e))throw n;return null}}async function w0e(t,e,n){const r=t.spatialReference;return r!=null&&e!=null&&await b0e(r,e,null,n),zk(t,e)}function mh(t,e,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!fo(t,e)||sc(t)&&sc(e)&&!!m0e(t,e))}function RGe(t,e){if(fo(t,e))return!0;if(!sc(t)||!sc(e))return!1;const n=L1(t)||Md(t)||aee(t),r=L1(e)||Md(e)||aee(e);return n&&r}async function b0e(t,e,n,r){if(Sp())return SQ(r);if(Array.isArray(t)){for(const{source:i,dest:s,options:o}of t)if(i&&s&&!mh(i,s,o))return Vg(r)}else if(t&&e&&!mh(t,e,n))return Vg(r);return SQ(r)}function xM(t,e,n){return t?"x"in t?E0e(t,e,new Jt,n,0):"xmin"in t?I0e(t,e,new $n,n,0):"rings"in t?A0e(t,e,new xi,n,0):"paths"in t?T0e(t,e,new ws,n,0):"points"in t?S0e(t,e,new qu,n,0):null:null}function CGe(t,e,n=e.spatialReference,r=0){return n!=null&&t.spatialReference!=null&&E0e(t,t.spatialReference,e,n,r)!=null}function E0e(t,e,n,r,i){na[0]=t.x,na[1]=t.y;const s=t.z;return na[2]=s!==void 0?s:i,_I(na,e,0,na,r,0)?(n.x=na[0],n.y=na[1],n.spatialReference=r,s!==void 0||jg(r)?(n.z=na[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),t.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=t.m,n.hasM=!0),n):null}function MGe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&S0e(t,t.spatialReference,e,n,r)!=null}function S0e(t,e,n,r,i){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,u=[];for(const f of s)u.push(f[0],f[1],o?f[2]:i);if(!_I(u,e,0,u,r,0,c))return null;const h=o||jg(r);for(let f=0;f<c;++f){const g=3*f,v=u[g],x=u[g+1];h&&a?l.push([v,x,u[g+2],s[f][3]]):h?l.push([v,x,u[g+2]]):a?l.push([v,x,s[f][2]]):l.push([v,x])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function NGe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&T0e(t,t.spatialReference,e,n,r)!=null}function T0e(t,e,n,r,i){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!P0e(s,o??!1,a??!1,e,l,r,i))return null;const c=o||jg(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function k0e(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&A0e(t,t.spatialReference,e,n,r)!=null}function A0e(t,e,n,r,i){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!P0e(s,o??!1,a??!1,e,l,r,i))return null;const c=o||jg(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function OGe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&I0e(t,t.spatialReference,e,n,r)!=null}function I0e(t,e,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=t,h=c?t.zmin:i;if(!Ate(s,o,h,e,na,r))return null;const f=c||jg(r);n.xmin=na[0],n.ymin=na[1],f&&(n.zmin=na[2]);const g=c?t.zmax:i;return Ate(a,l,g,e,na,r)?(n.xmax=na[0],n.ymax=na[1],f&&(n.zmax=na[2]),u&&(n.mmin=t.mmin,n.mmax=t.mmax),n.spatialReference=r,n):null}function P0e(t,e,n,r,i,s,o=0){const a=new Array;for(const u of t)for(const h of u)a.push(h[0],h[1],e?h[2]:o);if(!_I(a,r,0,a,s,0))return!1;let l=0;i.length=0;const c=e||jg(s);for(const u of t){const h=new Array;for(const f of u)c&&n?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):n?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}const na=n0(),XRt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:mh,initializeProjection:b0e,isEqualBaseGCS:RGe,isLoaded:Sp,isLoadedOrLoad:y0e,isLoadedOrLoadFor:v0e,load:Vg,project:cv,projectExtent:OGe,projectMany:M9,projectMultipoint:MGe,projectOrLoad:AGe,projectOrLoadMany:_0e,projectPoint:CGe,projectPolygon:k0e,projectPolyline:NGe,projectWithZConversion:w0e,projectWithoutEngine:xM,requiresLoad:TGe,test:PGe,tryProjectWithZConversion:zk,unload:IGe},Symbol.toStringTag,{value:"Module"}));var wM;let N9=wM=class extends t0(Ot.ofType(xi)){constructor(t){super(t)}clone(){return new wM(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(n=>{if(!e.equals(n.spatialReference)){if(!mh(n.spatialReference,e))return t?.messages?.push(new Cd("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const i=new xi;k0e(n,i,e),n=i}const r=n.toJSON(t);return delete r.spatialReference,r}).filter(n=>n!=null):this.toArray().map(n=>n.toJSON(t))}static fromJSON(t,e){const n=new wM;return t.forEach(r=>n.add(xi.fromJSON(r,e))),n}};N9=wM=_([ue("esri.layers.support.PolygonCollection")],N9);const fT=N9;let yf=class extends t0(jB){constructor(e){super(e),this.id=`focusarea-${gI()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new fT}readGeometries(e,n,r){Array.isArray(e)?this.geometries=fT.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(Q2(e,r),r))}async _loadGeometries(e,n){const r=await es(e,{responseType:"json"});this.geometries=fT.fromJSON(r.data,n)}};_([E({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),E()],yf.prototype,"id",void 0),_([E({type:String,json:{write:!0}})],yf.prototype,"title",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],yf.prototype,"enabled",void 0),_([E({type:QVe,json:{write:!0}})],yf.prototype,"outline",void 0),_([E({type:fT,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new fT(t.items.map(e=>e.clone()))}),HVe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],yf.prototype,"geometries",void 0),_([lr(["web-scene","portal-item","service"],"geometries")],yf.prototype,"readGeometries",null),yf=_([ue("esri.effects.FocusArea")],yf);const LGe=yf;let cS=class extends t0(jB){constructor(e){super(e),this.areas=new Ot,this.style="bright"}};_([E({type:Ot.ofType(LGe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ot(t.items.map(e=>e.clone()))})],cS.prototype,"areas",void 0),_([E({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],cS.prototype,"style",void 0),cS=_([ue("esri.effects.FocusAreas")],cS);const R0e=cS;function DGe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function $Ge(t){return!(!DGe(t)||!dVe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!pVe(t)||sge(t))}const jGe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,FGe="screenUtils.toPt: input not recognized!",C0e=96;function QRt(t){return t?t/72*C0e:0}function z1(t){return t?72*t/C0e:0}function Ei(t){if(typeof t=="string"){const e=t.match(jGe);if(e){const n=Number(e[1]),r=e[3]&&e[3].toLowerCase(),i=t.startsWith("-"),s=r==="px"?z1(n):n;return i?-s:s}return console.warn(FGe),null}return t}function Us(t=0,e=0){return{x:t,y:e}}function eCt(t){return t?Us(t.x,t.y):null}function tCt(t=0,e=0){return[t,e]}function nCt(t=0,e=0,n=0){return[t,e,n]}function rCt(t){return t}function iCt(t){return t}function sCt(t){return t}function oCt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function M0e(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function VGe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function zGe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,v,x){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=u,b[11]=h,b[12]=f,b[13]=g,b[14]=v,b[15]=x,b}const UGe=M0e();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:UGe,clone:VGe,create:M0e,fromValues:zGe},Symbol.toStringTag,{value:"Module"}));function N0e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function GGe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,v,x,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=f,t[12]=g,t[13]=v,t[14]=x,t[15]=b,t}function LO(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function BGe(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function WGe(t,e){return O0e(t,e)||LO(t),t}function O0e(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],v=e[12],x=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,M=r*l-i*a,F=r*c-s*a,C=i*c-s*l,N=u*x-h*v,O=u*b-f*v,j=u*T-g*v,V=h*b-f*x,G=h*T-g*x,U=f*T-g*b;let fe=A*U-I*G+P*V+M*j-F*O+C*N;return fe?(fe=1/fe,t[0]=(a*U-l*G+c*V)*fe,t[1]=(i*G-r*U-s*V)*fe,t[2]=(x*C-b*F+T*M)*fe,t[3]=(f*F-h*C-g*M)*fe,t[4]=(l*j-o*U-c*O)*fe,t[5]=(n*U-i*j+s*O)*fe,t[6]=(b*P-v*C-T*I)*fe,t[7]=(u*C-f*P+g*I)*fe,t[8]=(o*G-a*j+c*N)*fe,t[9]=(r*j-n*G-s*N)*fe,t[10]=(v*F-x*P+T*A)*fe,t[11]=(h*P-u*F-g*A)*fe,t[12]=(a*O-o*V-l*N)*fe,t[13]=(n*V-r*O+i*N)*fe,t[14]=(x*I-v*M-b*A)*fe,t[15]=(u*M-h*I+f*A)*fe,t):null}function HGe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],v=e[12],x=e[13],b=e[14],T=e[15];return t[0]=a*(f*T-g*b)-h*(l*T-c*b)+x*(l*g-c*f),t[1]=-(r*(f*T-g*b)-h*(i*T-s*b)+x*(i*g-s*f)),t[2]=r*(l*T-c*b)-a*(i*T-s*b)+x*(i*c-s*l),t[3]=-(r*(l*g-c*f)-a*(i*g-s*f)+h*(i*c-s*l)),t[4]=-(o*(f*T-g*b)-u*(l*T-c*b)+v*(l*g-c*f)),t[5]=n*(f*T-g*b)-u*(i*T-s*b)+v*(i*g-s*f),t[6]=-(n*(l*T-c*b)-o*(i*T-s*b)+v*(i*c-s*l)),t[7]=n*(l*g-c*f)-o*(i*g-s*f)+u*(i*c-s*l),t[8]=o*(h*T-g*x)-u*(a*T-c*x)+v*(a*g-c*h),t[9]=-(n*(h*T-g*x)-u*(r*T-s*x)+v*(r*g-s*h)),t[10]=n*(a*T-c*x)-o*(r*T-s*x)+v*(r*c-s*a),t[11]=-(n*(a*g-c*h)-o*(r*g-s*h)+u*(r*c-s*a)),t[12]=-(o*(h*b-f*x)-u*(a*b-l*x)+v*(a*f-l*h)),t[13]=n*(h*b-f*x)-u*(r*b-i*x)+v*(r*f-i*h),t[14]=-(n*(a*b-l*x)-o*(r*b-i*x)+v*(r*l-i*a)),t[15]=n*(a*f-l*h)-o*(r*f-i*h)+u*(r*l-i*a),t}function qGe(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],v=t[13],x=t[14],b=t[15];return(e*o-n*s)*(h*b-f*x)-(e*a-r*s)*(u*b-f*v)+(e*l-i*s)*(u*x-h*v)+(n*a-r*o)*(c*b-f*g)-(n*l-i*o)*(c*x-h*g)+(r*l-i*a)*(c*v-u*g)}function L0e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],v=e[11],x=e[12],b=e[13],T=e[14],A=e[15];let I=n[0],P=n[1],M=n[2],F=n[3];return t[0]=I*r+P*a+M*h+F*x,t[1]=I*i+P*l+M*f+F*b,t[2]=I*s+P*c+M*g+F*T,t[3]=I*o+P*u+M*v+F*A,I=n[4],P=n[5],M=n[6],F=n[7],t[4]=I*r+P*a+M*h+F*x,t[5]=I*i+P*l+M*f+F*b,t[6]=I*s+P*c+M*g+F*T,t[7]=I*o+P*u+M*v+F*A,I=n[8],P=n[9],M=n[10],F=n[11],t[8]=I*r+P*a+M*h+F*x,t[9]=I*i+P*l+M*f+F*b,t[10]=I*s+P*c+M*g+F*T,t[11]=I*o+P*u+M*v+F*A,I=n[12],P=n[13],M=n[14],F=n[15],t[12]=I*r+P*a+M*h+F*x,t[13]=I*i+P*l+M*f+F*b,t[14]=I*s+P*c+M*g+F*T,t[15]=I*o+P*u+M*v+F*A,t}function KGe(t,e,n){const r=n[0],i=n[1],s=n[2];if(e===t)t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],v=e[8],x=e[9],b=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=v,t[9]=x,t[10]=b,t[11]=T,t[12]=o*r+u*i+v*s+e[12],t[13]=a*r+h*i+x*s+e[13],t[14]=l*r+f*i+b*s+e[14],t[15]=c*r+g*i+T*s+e[15]}return t}function YGe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function XGe(t,e,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=xl())return void N0e(t,e);a=1/a,i*=a,s*=a,o*=a;const l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],v=e[3],x=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=e[9],M=e[10],F=e[11],C=i*i*u+c,N=s*i*u+o*l,O=o*i*u-s*l,j=i*s*u-o*l,V=s*s*u+c,G=o*s*u+i*l,U=i*o*u+s*l,fe=s*o*u-i*l,Re=o*o*u+c;t[0]=h*C+x*N+I*O,t[1]=f*C+b*N+P*O,t[2]=g*C+T*N+M*O,t[3]=v*C+A*N+F*O,t[4]=h*j+x*V+I*G,t[5]=f*j+b*V+P*G,t[6]=g*j+T*V+M*G,t[7]=v*j+A*V+F*G,t[8]=h*U+x*fe+I*Re,t[9]=f*U+b*fe+P*Re,t[10]=g*U+T*fe+M*Re,t[11]=v*U+A*fe+F*Re,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function ZGe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function JGe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function QGe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function eBe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function tBe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nBe(t,e,n){if(e===0)return LO(t);let r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s);if(o<=xl())return null;o=1/o,r*=o,i*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=i*r*c+s*a,t[2]=s*r*c-i*a,t[3]=0,t[4]=r*i*c-s*a,t[5]=i*i*c+l,t[6]=s*i*c+r*a,t[7]=0,t[8]=r*s*c+i*a,t[9]=i*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rBe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function iBe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function sBe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D0e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,l=i+i,c=s+s,u=r*a,h=r*l,f=r*c,g=i*l,v=i*c,x=s*c,b=o*a,T=o*l,A=o*c;return t[0]=1-(g+x),t[1]=h+A,t[2]=f-T,t[3]=0,t[4]=h-A,t[5]=1-(u+x),t[6]=v+b,t[7]=0,t[8]=f+T,t[9]=v-b,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function oBe(t,e){const n=aBe,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+u*r+l*s-c*i)/h,n[1]=2*(l*o+u*i+c*r-a*s)/h,n[2]=2*(c*o+u*s+a*i-l*r)/h):(n[0]=2*(a*o+u*r+l*s-c*i),n[1]=2*(l*o+u*i+c*r-a*s),n[2]=2*(c*o+u*s+a*i-l*r)),D0e(t,e,n),t}const aBe=n0();function lBe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function cBe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function uBe(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function hBe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],l=i+i,c=s+s,u=o+o,h=i*l,f=i*c,g=i*u,v=s*c,x=s*u,b=o*u,T=a*l,A=a*c,I=a*u,P=r[0],M=r[1],F=r[2];return t[0]=(1-(v+b))*P,t[1]=(f+I)*P,t[2]=(g-A)*P,t[3]=0,t[4]=(f-I)*M,t[5]=(1-(h+b))*M,t[6]=(x+T)*M,t[7]=0,t[8]=(g+A)*F,t[9]=(x-T)*F,t[10]=(1-(h+v))*F,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dBe(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,f=s*c,g=s*u,v=s*h,x=o*u,b=o*h,T=a*h,A=l*c,I=l*u,P=l*h,M=r[0],F=r[1],C=r[2],N=i[0],O=i[1],j=i[2],V=(1-(x+T))*M,G=(g+P)*M,U=(v-I)*M,fe=(g-P)*F,Re=(1-(f+T))*F,Be=(b+A)*F,$e=(v+I)*C,pe=(b-A)*C,De=(1-(f+x))*C;return t[0]=V,t[1]=G,t[2]=U,t[3]=0,t[4]=fe,t[5]=Re,t[6]=Be,t[7]=0,t[8]=$e,t[9]=pe,t[10]=De,t[11]=0,t[12]=n[0]+N-(V*N+fe*O+$e*j),t[13]=n[1]+O-(G*N+Re*O+pe*j),t[14]=n[2]+j-(U*N+Be*O+De*j),t[15]=1,t}function fBe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,v=i*l,x=s*o,b=s*a,T=s*l;return t[0]=1-h-v,t[1]=u+T,t[2]=f-b,t[3]=0,t[4]=u-T,t[5]=1-c-v,t[6]=g+x,t[7]=0,t[8]=f+b,t[9]=g-x,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pBe(t,e,n,r,i,s,o){const a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function mBe(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function gBe(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function yBe(t,e,n,r,i,s,o){const a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}function vBe(t,e,n,r){const i=e[0],s=e[1],o=e[2];let a=i-n[0],l=s-n[1],c=o-n[2];const u=xl();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void LO(t);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],g=r[1],v=r[2];let x=g*c-v*l,b=v*a-f*c,T=f*l-g*a;h=Math.sqrt(x*x+b*b+T*T),h?(h=1/h,x*=h,b*=h,T*=h):(x=0,b=0,T=0);let A=l*T-c*b,I=c*x-a*T,P=a*b-l*x;h=Math.sqrt(A*A+I*I+P*P),h?(h=1/h,A*=h,I*=h,P*=h):(A=0,I=0,P=0),t[0]=x,t[1]=A,t[2]=a,t[3]=0,t[4]=b,t[5]=I,t[6]=l,t[7]=0,t[8]=T,t[9]=P,t[10]=c,t[11]=0,t[12]=-(x*i+b*s+T*o),t[13]=-(A*i+I*s+P*o),t[14]=-(a*i+l*s+c*o),t[15]=1}function _Be(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let u=i-n[0],h=s-n[1],f=o-n[2],g=u*u+h*h+f*f;g>0&&(g=1/Math.sqrt(g),u*=g,h*=g,f*=g);let v=l*f-c*h,x=c*u-a*f,b=a*h-l*u;return g=v*v+x*x+b*b,g>0&&(g=1/Math.sqrt(g),v*=g,x*=g,b*=g),t[0]=v,t[1]=x,t[2]=b,t[3]=0,t[4]=h*b-f*x,t[5]=f*v-u*b,t[6]=u*x-h*v,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function xBe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function wBe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function bBe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function $0e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function EBe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function SBe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function TBe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function kBe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],g=t[11],v=t[12],x=t[13],b=t[14],T=t[15],A=e[0],I=e[1],P=e[2],M=e[3],F=e[4],C=e[5],N=e[6],O=e[7],j=e[8],V=e[9],G=e[10],U=e[11],fe=e[12],Re=e[13],Be=e[14],$e=e[15],pe=xl();return Math.abs(n-A)<=pe*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-I)<=pe*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(i-P)<=pe*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(s-M)<=pe*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-F)<=pe*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(a-C)<=pe*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-N)<=pe*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-O)<=pe*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(u-j)<=pe*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(h-V)<=pe*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(f-G)<=pe*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-U)<=pe*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(v-fe)<=pe*Math.max(1,Math.abs(v),Math.abs(fe))&&Math.abs(x-Re)<=pe*Math.max(1,Math.abs(x),Math.abs(Re))&&Math.abs(b-Be)<=pe*Math.max(1,Math.abs(b),Math.abs(Be))&&Math.abs(T-$e)<=pe*Math.max(1,Math.abs(T),Math.abs($e))}function ABe(t){const e=xl(),n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}function IBe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const PBe=L0e,RBe=$0e;Object.freeze(Object.defineProperty({__proto__:null,add:bBe,adjoint:HGe,copy:N0e,determinant:qGe,equals:kBe,exactEquals:TBe,frob:wBe,fromQuat:fBe,fromQuat2:oBe,fromRotation:nBe,fromRotationTranslation:D0e,fromRotationTranslationScale:hBe,fromRotationTranslationScaleOrigin:dBe,fromScaling:tBe,fromTranslation:eBe,fromXRotation:rBe,fromYRotation:iBe,fromZRotation:sBe,frustum:pBe,getRotation:uBe,getScale:cBe,getTranslation:lBe,hasIdentityRotation:IBe,identity:LO,invert:O0e,invertOrIdentity:WGe,isOrthoNormal:ABe,lookAt:vBe,mul:PBe,multiply:L0e,multiplyScalar:EBe,multiplyScalarAndAdd:SBe,ortho:yBe,perspective:mBe,perspectiveFromFieldOfView:gBe,rotate:XGe,rotateX:ZGe,rotateY:JGe,rotateZ:QGe,scale:YGe,set:GGe,str:xBe,sub:RBe,subtract:$0e,targetTo:_Be,translate:KGe,transpose:BGe},Symbol.toStringTag,{value:"Module"}));const N$=()=>Tt.getLogger("esri.support.basemapUtils");function CBe(){return{}}function MBe(t){for(const e in t){const n=t[e];n&&!n.destroyed&&n.destroy(),delete t[e]}}function NBe(t,e){let n;if(typeof t=="string"){const r=t in n9,i=!r&&t.includes("/");if(!r&&!i){if(CF())N$().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(n9).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");N$().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(n=e[t]),n||(n=r?lT.fromId(t):new lT({style:{id:t}}),e&&(e[t]=n))}else n=za(lT,t);return n?.destroyed&&(N$().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function OBe(t){return new Xu({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const n=[];return"tables"in e&&n.push(e.tables),"layers"in e&&n.push(e.layers),n},itemFilterFunction:e=>{const n=e.parent;return!!n&&"tables"in n&&n.tables.includes(e)}})}function NR(t){for(const e of t.values())e?.destroy();t.clear()}const Ite={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function LBe(t){let e=null;if(typeof t=="string")if(t in Ite){const n=Ite[t];e=new U4({resourceInfo:{data:{layers:[n]}}})}else Tt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=za(U4,t);return e}function O9(t,e,n){let r,i;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),r?.[e]===n)return r;if(r?.type==="group"&&(i=O9(r.layers,e,n),i))return i}}const DBe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.layers=new Ot;const i=a=>{a.parent&&a.removeFromParent()},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||Tt.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void Tt.getLogger(this).error("#add()","Cannot add layer to itself.");i(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",xd(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof _i){const o=r;o.parent===this?this.reorder(o,i):s.add(o,i)}else pa(r)?r.then(o=>{this.destroyed||this.add(o,i)}):Tt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let o=s.getNextIndex(i);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return O9(this.layers,"id",r)}findLayerByUid(r){return O9(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return _([E()],n.prototype,"layers",null),n=_([ue("esri.support.LayersMixin")],n),n},$Be=new Set(["feature","subtype-group"]);function L9(t,e,n){if(t)for(let r=0,i=t.length;r<i;r++){const s=t.at(r);if(s[e]===n)return s;if(s?.type==="group"){const o=L9(s.tables,e,n);if(o)return o}}}const jBe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.tables=new Ot,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,$Be.has(s.type)||Tt.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",xd(r,this._get("tables")))}findTableById(r){return L9(this.tables,"id",r)}findTableByUid(r){return L9(this.tables,"uid",r)}};return _([E()],n.prototype,"tables",null),n=_([ue("esri.support.TablesMixin")],n),n};let Mc=class extends jBe(DBe(aI)){constructor(e){super(e),this.allLayers=new Xu({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:n=>"layers"in n?n.layers:null}),this.focusAreas=new R0e,this.allTables=OBe(this),this.basemap=null,this.editableLayers=new Xu({getCollections:()=>[this.allLayers],itemFilterFunction:$Ge}),this.ground=new U4,this._basemapCache=CBe(),this.addHandles(pc(()=>this.ground,(n,r)=>{r?.parent===this&&(r.parent=null),n.parent=this},{sync:!0}))}destroy(){MBe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Ni(this.basemap),Ni(this.ground),this._set("ground",null)}castBasemap(e){return NBe(e,this._basemapCache)}castGround(e){return LBe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(n=>n.id===e)}findTableById(e){return this.allTables.find(n=>n.id===e)}};_([E({readOnly:!0,dependsOn:[]})],Mc.prototype,"allLayers",void 0),_([E({type:R0e,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Mc.prototype,"focusAreas",void 0),_([E({readOnly:!0})],Mc.prototype,"allTables",void 0),_([E({type:lT,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Mc.prototype,"basemap",void 0),_([Gs("basemap")],Mc.prototype,"castBasemap",null),_([E({readOnly:!0})],Mc.prototype,"editableLayers",void 0),_([E({type:U4,nonNullable:!0})],Mc.prototype,"ground",void 0),_([Gs("ground")],Mc.prototype,"castGround",null),_([E()],Mc.prototype,"undoRedo",void 0),Mc=_([ue("esri.Map")],Mc);const j0e=Mc;let X0=class extends jB{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],X0.prototype,"row",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],X0.prototype,"column",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],X0.prototype,"rows",void 0),_([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],X0.prototype,"columns",void 0),X0=_([ue("esri.CameraLayout")],X0);const F0e=X0;let DO=class{constructor(e,n){this.min=e,this.max=n,this.range=n-e}normalize(e,n=0,r=!1){return Pte(this.range,this.min,this.max,e,n,r)}clamp(e,n=0){return hu(e-n,this.min,this.max)+n}monotonic(e,n,r){return e<n?n:n+D9(this.range,e-n,r)}minimalMonotonic(e,n,r){return Pte(this.range,e,e+this.range,n,r)}center(e,n,r){return n=this.monotonic(e,n,r),this.normalize((e+n)/2,r)}diff(e,n,r){return this.monotonic(e,n,r)-e}shortestSignedDiff(e,n){e=this.normalize(e);const r=(n=this.normalize(n))-e,i=n<e?this.minimalMonotonic(e,n)-e:n-this.minimalMonotonic(n,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,n,r){return n=this.minimalMonotonic(e,n),(r=this.minimalMonotonic(e,r))>e&&r<n}};function Pte(t,e,n,r,i=0,s=!1){return(r-=i)<e?r+=D9(t,e-r):r>n&&(r-=D9(t,r-n)),s&&r===n&&(r=e),r+i}function D9(t,e,n=0){return Math.ceil((e-n)/t)*t+n}const uCt=new DO(0,2*Math.PI),hCt=new DO(-Math.PI,Math.PI),FBe=new DO(0,360);let Gh=class extends mo(qt){constructor(...e){super(...e),this.position=new Jt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new F0e}normalizeCtorArgs(e,n,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return n!=null&&(s.heading=n),r!=null&&(s.tilt=r),i!=null&&(s.fov=i),s}return e}writePosition(e,n,r,i){const s=e.clone();s.x=Ql(e.x||0),s.y=Ql(e.y||0),s.z=e.hasZ?Ql(e.z||0):e.z,n[r]=s.write({},i)}readPosition(e,n){const r=new Jt;return r.read(e,n),r.x=Ql(r.x||0),r.y=Ql(r.y||0),r.z=r.hasZ?Ql(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};_([E({type:Jt,json:{write:{isRequired:!0}}})],Gh.prototype,"position",void 0),_([Zn("position")],Gh.prototype,"writePosition",null),_([lr("position")],Gh.prototype,"readPosition",null),_([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Gs(t=>FBe.normalize(Ql(t)))],Gh.prototype,"heading",void 0),_([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Gs(t=>hu(Ql(t),-180,180))],Gh.prototype,"tilt",void 0),_([E({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Gs(t=>hu(Ql(t,55),1,170))],Gh.prototype,"fov",void 0),_([E({type:F0e,nonNullable:!0,json:{read:!1,write:!1}})],Gh.prototype,"layout",void 0),Gh=_([ue("esri.Camera")],Gh);const VBe=Gh;function V0e(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function z0e(t){return t.points!==void 0}function U0e(t){return t.x!==void 0&&t.y!==void 0}function G0e(t){return t.paths!==void 0||t.curvePaths!==void 0}function tW(t){return t.rings!==void 0||t.curveRings!==void 0}function x2(t){return t==null?null:t instanceof js?t:U0e(t)?Jt.fromJSON(t):G0e(t)?ws.fromJSON(t):tW(t)?xi.fromJSON(t):z0e(t)?qu.fromJSON(t):V0e(t)?$n.fromJSON(t):null}function nW(t){return t?U0e(t)?"esriGeometryPoint":G0e(t)?"esriGeometryPolyline":tW(t)?"esriGeometryPolygon":V0e(t)?"esriGeometryEnvelope":z0e(t)?"esriGeometryMultipoint":null:null}const zBe={esriGeometryPoint:Jt,esriGeometryPolyline:ws,esriGeometryPolygon:xi,esriGeometryEnvelope:$n,esriGeometryMultipoint:qu,esriGeometryMultiPatch:xi};function UBe(t){return t&&zBe[t]||null}const GBe=Il()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),fCt=Il()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),rW={base:js,key:"type",typeMap:{extent:$n,multipoint:qu,point:Jt,polyline:ws,polygon:xi}};function pCt(t){return t.type==="point"}function mCt(t){return t.type==="multipoint"}function gCt(t){return t.type==="polygon"}function yCt(t){return t.type==="polyline"}var $9;let _m=$9=class extends qt{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new $9({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};_([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:O$}}}}})],_m.prototype,"rotation",void 0),_([Gs("rotation")],_m.prototype,"castRotation",null),_([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:O$}}}}})],_m.prototype,"scale",void 0),_([E({types:rW,json:{read:x2,write:!0,origins:{"web-scene":{read:x2,write:{overridePolicy:O$}}}}})],_m.prototype,"targetGeometry",void 0),_([E({type:VBe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],_m.prototype,"camera",void 0),_m=$9=_([ue("esri.Viewpoint")],_m);const su=_m;function O$(){return{enabled:!this.camera}}let Uk=class{constructor(e=n=>n.values().next().value){this._peeker=e,this._observable=new lI,this._items=new Set}get length(){return tn(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return tn(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const n=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){tn(this._observable),yield*this._items}};const B0e=new FinalizationRegistry(t=>{t.close()});function BBe(t,e){B0e.register(t,e,e)}function WBe(t){B0e.unregister(t)}function W0e(t,e){return new Proxy({},{get:(n,r,i)=>(...s)=>{let o,a;const l=s[s.length-1];return HBe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function HBe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const qBe={statsWorker:()=>_e(()=>import("./statsWorker-DC9vVxhL.js"),__vite__mapDeps([49,50,51,52,53,54,55,56,57])),geometryEngineWorker:()=>_e(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([58,59,60,61])),arcadeGeometryOperatorsWorker:()=>_e(()=>import("./operatorsWorker-Dqgh6-Mq.js"),[]),CSVSourceWorker:()=>_e(()=>import("./CSVSourceWorker-BOvVK642.js"),__vite__mapDeps([62,63,64,26,65,66,67,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,84,85,86,87])),EdgeProcessingWorker:()=>_e(()=>import("./EdgeProcessingWorker-ZaGKTIEV.js"),__vite__mapDeps([88,89,90,91,53,54,92,93,94,95,96,97,98])),ElevationSamplerWorker:()=>_e(()=>import("./ElevationSamplerWorker-CotXGo3g.js"),__vite__mapDeps([99,69,100,101,102,103,104,105,106,91,53,54,107])),FeatureServiceSnappingSourceWorker:()=>_e(()=>import("./FeatureServiceSnappingSourceWorker-Dnbe6sKV.js"),__vite__mapDeps([108,65,66,64,26,67,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,30,31,109,110,111,112,113])),GaussianSplatSortWorker:()=>_e(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>_e(()=>import("./GeoJSONSourceWorker-vvQL6fO8.js"),__vite__mapDeps([114,66,64,26,67,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,115,63,86,87,116])),LercWorker:()=>_e(()=>import("./LercWorker-DmO2ZFs0.js"),[]),MemorySourceWorker:()=>_e(()=>import("./MemorySourceWorker-C53KSZ3h.js"),__vite__mapDeps([117,66,64,26,67,118,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,86,87,116,63])),PBFDecoderWorker:()=>_e(()=>import("./PBFDecoderWorker-H0CwoJTn.js"),__vite__mapDeps([119,120,26,66,64,67,110,111])),FeaturePipelineWorker:()=>_e(()=>import("./FeaturePipelineWorker-BG8LBNhE.js"),__vite__mapDeps([121,122,123,124,125,93,126,127,76,77,78,83,128,64,26,66,67,129,51,130,131,132,133,71,70,134,135,136,137,138,139,140,141,142,87,143,144,145,146,72,73,74,24,25,75,79,50,52,53,54,55,56,57,80,81,82,147,148,149,150,47,151,152,153,154,155,115,63,86,116,112,110,111,113,156,157])),PointCloudWorker:()=>_e(()=>import("./PointCloudWorker-BmNjMk9Z.js"),__vite__mapDeps([158,159,160,53,161,162,163,164,165,166,54,102,103,167,168])),RasterWorker:()=>_e(()=>import("./RasterWorker-MeYvjh0A.js"),__vite__mapDeps([169,170,171,61,172,173,53,54,174,175,176,177,178,179])),SceneLayerSnappingSourceWorker:()=>_e(()=>import("./SceneLayerSnappingSourceWorker-DQNtoVQs.js"),__vite__mapDeps([180,181,182,54,168,160,183,184,53,167,91,95,96,97,90,92,93,94,98])),SceneLayerWorker:()=>_e(()=>import("./SceneLayerWorker-CwzkkKaa.js"),__vite__mapDeps([185,100,106,186,104])),WFSSourceWorker:()=>_e(()=>import("./WFSSourceWorker-Dvj_posH.js"),__vite__mapDeps([187,66,64,26,67,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,115,63,116,188,189])),WorkerTileHandler:()=>_e(()=>import("./WorkerTileHandler-CMPPQylD.js"),__vite__mapDeps([190,140,191,141,192,111,26,144,193,194,94,93,173,53,54,195,139])),Lyr3DWorker:()=>_e(()=>import("./Lyr3DWorker-B5lHZh7J.js"),[]),Feature3DPipelineWorker:()=>_e(()=>import("./Feature3DPipelineWorker-BrDDCU5E.js"),__vite__mapDeps([196,73,66,64,26,67,74,24,25,75,76,77,78,70,71,79,51,50,52,53,54,55,56,57,80,81,82,83,197,198,199,200,177,164,201,31,202,203,142,87,163,135,127,131,132,204,205,122,206,207,105,100,186,104,208,161,209,97,91,210,182,168,160,181,211,212,184,167,166,159,102,103,94,93,90,92,213,214,215,216,217,218,219,220,221,222,69,112,110,111,113,223])),TextureCompressionWorker:()=>_e(()=>import("./TextureCompressionWorker-CRflXKXC.js"),[]),FlowWorker:()=>_e(()=>import("./FlowWorker-hk4waCjI.js"),__vite__mapDeps([224,179])),ParquetSourceWorker:()=>_e(()=>import("./ParquetSourceWorker-Dg1I9J1f.js"),__vite__mapDeps([225,146,73,66,64,26,67,74,24,25,75,76,77,78,70,71,79,51,50,52,53,54,55,56,57,80,81,82,83,86,87,226,85,149,128,129,148,147])),PanoramicMeshWorker:()=>_e(()=>import("./PanoramicMeshWorker-B-PP6LbP.js"),__vite__mapDeps([227,170]))},H0e="worker:port-closed",ep={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let KBe=0;function q0e(){return KBe++}function YBe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function W4(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function K0e(t,e,n,r){if(e.type===ep.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==ep.INVOKE&&e.type!==ep.RESPONSE)return void t.postMessage(e);let i;YBe(n)?(i=Rte(n.transferList),e.data=n.result):(i=Rte(r),e.data=n),i?t.postMessage(e,i):t.postMessage(e)}function Gk(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Rte(t){if(!t?.length)return null;if(ye("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(n=>!XBe(n));return e.length?e:null}function XBe(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function _Ct(t){try{return await t}catch(e){const n=e?.name===H0e;if(!(_a(e)||n))throw e;return}}const{CLOSE:OR,ABORT:j9,INVOKE:Cte,RESPONSE:PE,OPEN_PORT:Mte,ON:Nte}=ep,ZBe=2;let JBe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===j9?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Gc;let w2=(Gc=class{static connect(e,n){const r=new MessageChannel;let i;i=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Gc(r.port1,{channel:r,client:i,schedule:n});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),Gc.clients.set(s,i),r.port2}static loadWorker(e){const n=qBe[e];return n?n():Promise.resolve(null)}constructor(e,n,r,i){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new JBe(s=>this._onInvokeMessage(s)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:OR}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new Xe(H0e,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:n}));const o=q0e();return new Promise((a,l)=>{if(fa(i))return this._processWork(),void l(kr());const c=uu(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),ri(h.abortHandle),this._post({type:j9,jobId:o}),l(kr()))}),u={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,u),this._post({type:Cte,jobId:o,methodName:e,abortable:i!=null},n,s)})}createInvokeProxy(e){return W0e(this,e)}on(e,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:Nte,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),Kn(()=>{r.port1.postMessage({type:OR}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Mte,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=ZBe)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=e;this.apply(n,r,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{ri(e.abortHandle),e.reject(kr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,n){const r=Gk(e);if(r)switch(r.type){case PE:this._onResponseMessage(r);break;case Cte:n?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case j9:this._onAbortMessage(r);break;case OR:this._onCloseMessage();break;case Mte:this._onOpenPortMessage(r);break;case Nte:this._onOnMessage(r)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Gc.clients.get(this)===e&&e.destroy(),Gc.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[n];try{if(!u&&n&&n.includes(".")){const h=n.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],u=c[h[f+1]]}if(typeof u!="function")throw new TypeError(`${n} is not a function`);i.push({client:this,signal:o?o.signal:null}),l=u.apply(c,i)}catch(h){return void this._post({type:PE,jobId:r,error:W4(h)})}pa(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:PE,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),_a(h)||this._post({type:PE,jobId:r,error:W4(h||{message:`Error encountered at method ${n}`})}))})):this._post({type:PE,jobId:r},l)}_onOpenPortMessage(e){new Gc(e.port,{client:this._client})}_onOnMessage(e){const{port:n}=e,r=this._client.on(e.eventType,s=>{n.postMessage(s)}),i=J2(e.port,"message",s=>{Gk(s)?.type===OR&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),ri(o.abortHandle),r?o.reject(Xe.fromJSON(JSON.parse(r))):o.resolve(i)}_post(e,n,r){return K0e(this._port,e,n,r)}},Gc.kernelInfo={buildDate:Qde,fullVersion:HG,revision:efe},Gc.clients=new Map,Gc),QBe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new Uk,this._ongoingLowPriorityJobsQueue=new Uk}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,n){return new Promise((r,i)=>{let s=!0;const o=a=>{pi(n.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];pa(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new w2(c,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new w2(l,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a?.invoke(e,n,r))}return i}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(kr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(kr(`Worker closing, aborting job calling '${e.methodName}'`));for(const n of this._clientPromises)n.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,WBe(this)}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=fc();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:n,invokeOptions:r,resolver:i});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a?.jobAdded())}return i.promise}createInvokeProxy(e){return W0e(this,e)}on(e,n){return Promise.all(this._clientPromises).then(()=>sv(this._clients.map(r=>r.on(e,n))))}openPorts(){return new Promise(e=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r===0&&e(n)})})}get test(){}};const eWe={async request(t,e){const n=t.options,r=n.responseType;n.signal=e?.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&TF(t.url)?.after?r:"array-buffer";const i=await es(t.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Ote={};function tWe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...Ote.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ote.baseUrl),e}let nWe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>e[n](...r)})}},bM=class{constructor(){this._dispatcher=new nWe,this._workerPostMessage({type:ep.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){E4(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,n,r){this._dispatcher.addEventListener(e,n,r)}removeEventListener(e,n,r){this._dispatcher.removeEventListener(e,n,r)}_workerPostMessage(e){E4(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const n=Gk(e);if(n&&n.type===ep.OPEN){const{modulePath:r,jobId:i}=n;let s=await w2.loadWorker(r);s||(s=await import(r));const o=w2.connect(s);this._workerPostMessage({type:ep.OPENED,jobId:i,data:o})}}};const F9=()=>Tt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:rWe}=ep,iWe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let LR,DR;const Lte="Failed to create Worker. Fallback to execute module in main thread";async function sWe(){if(!ye("esri-workers"))return Dte(new bM);if(!LR&&!DR)try{const e=iWe.split("{CONFIGURATION}").join(oWe());LR=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){DR=e||{}}let t;if(LR)try{t=new Worker(LR,{name:"esri-worker-"+aWe++})}catch{F9().warn(Lte,DR),t=new bM}else F9().warn(Lte,DR),t=new bM;return Dte(t)}async function Dte(t){return new Promise(e=>{function n(i){const s=Gk(i);s&&s.type===rWe&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(i){i.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),F9().warn("Failed to create Worker. Fallback to execute module in main thread",i),(t=new bM).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})}function oWe(){let t;if(tr.default!=null){const i={...tr};delete i.default,t=JSON.parse(JSON.stringify(i))}else t=JSON.parse(JSON.stringify(tr));t.assetsPath=Hc(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?Hc(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=iu(),t.has={"esri-csp-restrictions":ye("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ye("esri-2d-update-debug"),"esri-2d-log-updating":ye("esri-2d-log-updating"),"featurelayer-pbf":ye("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ye("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ye("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ye("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ye("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ye("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ye("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ye("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ye("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ye("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ye("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":ye("parquetlayer-full-query-feature-count"),"esri-atomics":ye("esri-atomics"),"esri-shared-array-buffer":ye("esri-shared-array-buffer"),"esri-tiles-debug":ye("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ye("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ye("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=Hc(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=Hc(t.workers.workerPath):t.workers.workerPath=Hc(Bi("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=tr.workers.loaderConfig,n=tWe({baseUrl:e?.baseUrl,locale:iu(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:n,kernelInfo:{buildDate:Qde,fullVersion:HG,revision:efe}})}let aWe=0;const{ABORT:$te,INVOKE:lWe,OPEN:cWe,OPENED:uWe,RESPONSE:RE}=ep;let hWe=class Y0e{static async create(e){const n=await sWe();return new Y0e(n,e)}constructor(e,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=n,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),Tt.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,n={}){const{signal:r}=n,i=q0e();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:qG(r,()=>{this._outJobs.delete(i),this._post({type:$te,jobId:i})})};this._outJobs.set(i,a),this._post({type:cWe,jobId:i,modulePath:e})})}_onMessage(e){const n=Gk(e);if(n)switch(n.type){case uWe:this._onOpenedMessage(n);break;case RE:this._onResponseMessage(n);break;case $te:this._onAbortMessage(n);break;case lWe:this._onInvokeMessage(n)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=eWe[n];let c;try{if(typeof l!="function")throw new TypeError(`${n} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(u){return void this._post({type:RE,jobId:r,error:W4(u)})}pa(c)?(a.set(r,{controller:o,promise:c}),c.then(u=>{a.has(r)&&(a.delete(r),this._post({type:RE,jobId:r},u))},u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+n}),_a(u)||this._post({type:RE,jobId:r,error:W4(u||{message:`Error encountered at method ${n}`})}))})):this._post({type:RE,jobId:r},c)}_onOpenedMessage(e){const{jobId:n,data:r}=e,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),ri(i.abortHandle),i.resolve(r))}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),ri(s.abortHandle),r?s.reject(Xe.fromJSON(JSON.parse(r))):s.resolve(i))}_post(e,n,r){return K0e(this.worker,e,n,r)}};const jte=ye("host-browser")?Math.min(navigator.hardwareConcurrency-1,ye("workers-pool-size")??8):0;let Dy=ye("esri-mobile")?Math.min(jte,3):jte;Dy||(Dy=ye("safari")&&ye("mac")?7:2);let Fte=0;const EM=[];function dWe(){X0e()}async function $R(t,e){const n=new QBe,{registryTarget:r,...i}=e;return await n.open(t,i),r&&BBe(r,n),n}async function SCt(t,e={}){if(typeof t!="string")throw new Xe("workers:undefined-module","modulePath is missing");let n=e.strategy||"distributed";if(ye("host-webworker")&&!ye("esri-workers")&&(n="local"),n==="local"){let r=await w2.loadWorker(t);r||(r=await import(t)),pi(e.signal);const i=e.client||r;return $R([w2.connect(r,e.schedule)],{...e,client:i})}if(await X0e(),pi(e.signal),n==="dedicated"){const r=Fte++%Dy;return $R([await EM[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Dy);if(r<Dy){const i=new Array(r);for(let s=0;s<r;++s){const o=Fte++%Dy;i[s]=EM[o].open(t,e)}return $R(i,e)}}return $R(EM.map(r=>r.open(t,e)),e)}let jR=null;async function X0e(){if(jR)return jR;new AbortController;const t=[];for(let e=0;e<Dy;e++){const n=hWe.create(e).then(r=>(EM[e]=r,r));t.push(n)}return jR=Promise.all(t),jR}let pT=class extends Ot{constructor(e){super(e),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ot.ofType(this.itemType.Type))(e):new Ot(e)}};function V9(t,e){return{type:t,cast:spe,set(n){const r=xd(n,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}_([E()],pT.prototype,"owner",null),pT=_([ue("esri.core.support.OwningCollection")],pT);var z9,_w;let Ao=(_w=class extends qt{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new z9({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},z9=_w,_w);_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ao.prototype,"cols",void 0),_([E({type:Lr,json:{write:!0}})],Ao.prototype,"level",void 0),_([E({type:String,json:{write:!0}})],Ao.prototype,"levelValue",void 0),_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ao.prototype,"origin",void 0),_([E({type:Number,json:{write:!0}})],Ao.prototype,"resolution",void 0),_([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ao.prototype,"rows",void 0),_([E({type:Number,json:{write:!0}})],Ao.prototype,"scale",void 0),Ao=z9=_([ue("esri.layers.support.LOD")],Ao);let fWe=class Z0e{constructor(e,n,r,i=gl()){this._level=e,this._row=n,this._col=r,this.extent=i}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new Z0e(e.level,e.row,e.col,e.extent)}};var B_;const Vte=new Ws({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var xw;let ba=(xw=class extends qt{static create(e={}){const{resolutionFactor:n=1,scales:r,size:i=256,spatialReference:s=Bt.WebMercator,numLODs:o=24}=e;if(!sc(s)){const f=[];if(r)for(let g=0;g<r.length;g++){const v=r[g];f.push(new Ao({level:g,scale:v,resolution:v}))}else{let g=5e-4;for(let v=o-1;v>=0;v--)f.unshift(new Ao({level:v,scale:g,resolution:g})),g*=2}return new B_({dpi:96,lods:f,origin:new Jt(0,0,s),size:[i,i],spatialReference:s})}const a=Da(s),l=e.origin?new Jt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Jt(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,u=1/(Vd(s)*39.37*c),h=[];if(r)for(let f=0;f<r.length;f++){const g=r[f],v=g*u;h.push(new Ao({level:f,scale:g,resolution:v}))}else{let f=ib(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const g=Math.ceil(o/n);h.push(new Ao({level:0,scale:f,resolution:f*u}));for(let v=1;v<g;v++){const x=f/2**n,b=x*u;h.push(new Ao({level:v,scale:x,resolution:b})),f=x}}return new B_({dpi:c,lods:h,origin:l,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:n}=this;if(e&&n){const r=Da(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-n.x)<=r.dx}return!1}readOrigin(e,n){return Jt.fromJSON({spatialReference:n.spatialReference,...e})}set lods(e){let n=0,r=0;const i=[],s=this._levelToLOD={};e&&(n=-1/0,r=1/0,e.forEach(o=>{i.push(o.scale),n=o.scale>n?o.scale:n,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,n){return[n.cols,n.rows]}writeSize(e,n){n.cols=e[0],n.rows=e[1]}zoomToScale(e){const n=this.scales;if(e<=0)return n[0];if(e>=n.length-1)return n[n.length-1];const r=Math.floor(e),i=r+1;return n[r]/(n[r]/n[i])**(e-r)}scaleToZoom(e){const n=this.scales,r=n.length-1;let i=0;for(;i<r;i++){const s=n[i],o=n[i+1];if(s<=e)return i;if(o===e)return i+1;if(s>e&&o<e)return i+Math.log(s/e)/Math.log(s/o)}return i}tileAt(e,n,r,i){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof n=="number")o=n,a=r;else if(fo(n.spatialReference,this.spatialReference))o=n.x,a=n.y,i=r;else{const u=wO(n,this.spatialReference);if(u==null)return null;o=u.x,a=u.y,i=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return i??=new fWe(0,0,0),i.level=e,i.row=Math.floor((this.origin.y-a)/c+.001),i.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,n=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&n===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,o=r.resolution*this.size[1]/2**i;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const n=this._upsampleLevels[e.level];return!(!n||n.parentLevel===-1)&&(e.level=n.parentLevel,e.row=Math.floor(e.row/n.factor+.001),e.col=Math.floor(e.col/n.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,n){const r=this.lodAt(n.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],o=i*this.size[1];return e[0]=this.origin.x+n.col*s,e[1]=this.origin.y-(n.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return B_.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const n=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&n===0)return this;const r=[],i=this.lods.length-n;for(let s=0;s<i;s++){const o=s+n,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Ao({level:s,scale:a,resolution:l}))}return new B_({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let n=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:n?n.level:-1,factor:n?n.resolution/i.resolution:0},n=i}}},B_=xw,xw);_([E({type:Number,json:{write:!0}})],ba.prototype,"compressionQuality",void 0),_([E({type:Number,json:{write:!0}})],ba.prototype,"dpi",void 0),_([E({type:String,json:{read:Vte.read,write:Vte.write,origins:{"web-scene":{read:!1,write:!1}}}})],ba.prototype,"format",void 0),_([E({readOnly:!0})],ba.prototype,"isWrappable",null),_([E({type:Jt,json:{write:!0}})],ba.prototype,"origin",void 0),_([lr("origin")],ba.prototype,"readOrigin",null),_([E({type:[Ao],value:null,json:{write:!0}})],ba.prototype,"lods",null),_([E({readOnly:!0})],ba.prototype,"scales",void 0),_([E({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],ba.prototype,"size",void 0),_([lr("size",["rows","cols"])],ba.prototype,"readSize",null),_([Zn("size",{cols:{type:Lr},rows:{type:Lr}})],ba.prototype,"writeSize",null),_([E({type:Bt,json:{write:!0}})],ba.prototype,"spatialReference",void 0),ba=B_=_([ue("esri.layers.support.TileInfo")],ba);let b2=class extends pT{constructor(e){super(e),this.addHandles(this.on("before-add",n=>{n.item!=null&&n.item.parent===this.owner&&(Tt.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};b2=_([ue("esri.support.AnalysesCollection")],b2);const SM={widthBreakpoint:{getValue(t){const e=t.viewSize[0],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,n=e[0],r=e[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},L$={xsmall:544,small:768,medium:992,large:1200};function pWe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function D$(t,e){return e?SM[t].valueToClassName[e].split(" "):[]}const mWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=L$}initialize(){this.addHandles(dn(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ma))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!pWe(r)){const i=JSON.stringify(L$,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=L$}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Pa.acquire(),i=Pa.acquire();let s,o=!1;for(s in SM){const a=this[s],l=SM[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[s]=l,D$(s,a).forEach(c=>i.push(c)),D$(s,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,i),Pa.release(r),Pa.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in SM)D$(i,this[i]).forEach(s=>r.classList.remove(s))}};return _([E()],n.prototype,"breakpoints",null),_([E()],n.prototype,"orientation",void 0),_([E()],n.prototype,"widthBreakpoint",void 0),_([E()],n.prototype,"heightBreakpoint",void 0),n=_([ue("esri.views.BreakpointsOwner")],n),n};function iW(t){return typeof t=="string"?document.getElementById(t):t??null}function zte(t,e){for(;;){const n=t.firstChild;if(!n)break;e.appendChild(n)}}let n1=class extends Kt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,n,r={}){return this._installWatch(e,n,r,dn)}addWhen(e,n,r={}){return this._installWatch(e,n,r,pc)}addOnCollectionChange(e,n,{initial:r=!1,final:i=!1}={}){const s=++this._handleId;return this.addHandles([V1(e,"after-changes",this._createSyncUpdatingCallback(),Fg),V1(e,"change",n,{onListenerAdd:r?o=>n({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>n({added:[],removed:o.toArray()}):void 0})],s),Kn(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const n=++this._handleId;this.addHandles(Kn(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(FR)||this._set("updating",!1))}),n),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(n);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,n,r={},i){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=i(e,n,r);return this.addHandles(o,s),Kn(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,n){const r=this._createSyncUpdatingCallback(),i=dn(e,r,{sync:!0,equals:()=>!1});return this.addHandles(i,n),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(FR),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(rb(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(FR))}),FR)}}};_([E({readOnly:!0})],n1.prototype,"updating",void 0),n1=_([ue("esri.core.support.UpdatingHandles")],n1);const FR=-42;var H4=function(){return H4=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},H4.apply(this,arguments)},U9={exports:{}},Fi={},G9={exports:{}},uv={};function J0e(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function gWe(t,e,n){}function yWe(t,e,n){}var vWe=/javascript\s*\:/img;function _We(t,e){return vWe.test(e)?"":e}uv.whiteList=J0e();uv.getDefaultWhiteList=J0e;uv.onAttr=gWe;uv.onIgnoreAttr=yWe;uv.safeAttrValue=_We;var xWe={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},CE=xWe;function wWe(t,e){t=CE.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,s=0,o="";function a(){if(!r){var u=CE.trim(t.slice(i,s)),h=u.indexOf(":");if(h!==-1){var f=CE.trim(u.slice(0,h)),g=CE.trim(u.slice(h+1));if(f){var v=e(i,o.length,f,g,u);v&&(o+=v+"; ")}}}i=s+1}for(;s<n;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,i=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return CE.trim(o)}var bWe=wWe,VR=uv,EWe=bWe;function Ute(t){return t==null}function SWe(t){var e={};for(var n in t)e[n]=t[n];return e}function Q0e(t){t=SWe(t||{}),t.whiteList=t.whiteList||VR.whiteList,t.onAttr=t.onAttr||VR.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||VR.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||VR.safeAttrValue,this.options=t}Q0e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,s=n.onIgnoreAttr,o=n.safeAttrValue,a=EWe(t,function(l,c,u,h,f){var g=r[u],v=!1;if(g===!0?v=g:typeof g=="function"?v=g(h):g instanceof RegExp&&(v=g.test(h)),v!==!0&&(v=!1),h=o(u,h),!!h){var x={position:c,sourcePosition:l,source:f,isWhite:v};if(v){var b=i(u,h,x);return Ute(b)?u+":"+h:b}else{var b=s(u,h,x);if(!Ute(b))return b}}});return a};var TWe=Q0e;(function(t,e){var n=uv,r=TWe;function i(o,a){var l=new r(a);return l.process(o)}e=t.exports=i,e.FilterCSS=r;for(var s in n)e[s]=n[s]})(G9,G9.exports);var sW=G9.exports,oW={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},kWe=sW.FilterCSS,AWe=sW.getDefaultWhiteList,q4=oW;function eye(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var tye=new kWe;function IWe(t,e,n){}function PWe(t,e,n){}function RWe(t,e,n){}function CWe(t,e,n){}function nye(t){return t.replace(NWe,"&lt;").replace(OWe,"&gt;")}function MWe(t,e,n,r){if(n=lye(n),e==="href"||e==="src"){if(n=q4.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(zR.lastIndex=0,zR.test(n))return""}else if(e==="style"){if(Gte.lastIndex=0,Gte.test(n)||(Bte.lastIndex=0,Bte.test(n)&&(zR.lastIndex=0,zR.test(n))))return"";r!==!1&&(r=r||tye,n=r.process(n))}return n=cye(n),n}var NWe=/</g,OWe=/>/g,LWe=/"/g,DWe=/&quot;/g,$We=/&#([a-zA-Z0-9]*);?/gim,jWe=/&colon;?/gim,FWe=/&newline;?/gim,zR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Gte=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Bte=/u\s*r\s*l\s*\(.*/gi;function rye(t){return t.replace(LWe,"&quot;")}function iye(t){return t.replace(DWe,'"')}function sye(t){return t.replace($We,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function oye(t){return t.replace(jWe,":").replace(FWe," ")}function aye(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return q4.trim(e)}function lye(t){return t=iye(t),t=sye(t),t=oye(t),t=aye(t),t}function cye(t){return t=rye(t),t=nye(t),t}function VWe(){return""}function zWe(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(o){return n?!0:q4.indexOf(t,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([s!==!1?s:l.position,u]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return q4.forEach(i,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function UWe(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function GWe(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}Fi.whiteList=eye();Fi.getDefaultWhiteList=eye;Fi.onTag=IWe;Fi.onIgnoreTag=PWe;Fi.onTagAttr=RWe;Fi.onIgnoreTagAttr=CWe;Fi.safeAttrValue=MWe;Fi.escapeHtml=nye;Fi.escapeQuote=rye;Fi.unescapeQuote=iye;Fi.escapeHtmlEntities=sye;Fi.escapeDangerHtml5Entities=oye;Fi.clearNonPrintableCharacter=aye;Fi.friendlyAttrValue=lye;Fi.escapeAttrValue=cye;Fi.onIgnoreTagStripAll=VWe;Fi.StripTagBody=zWe;Fi.stripCommentTag=UWe;Fi.stripBlankChar=GWe;Fi.cssFilter=tye;Fi.getDefaultCSSWhiteList=AWe;var $O={},Lm=oW;function BWe(t){var e=Lm.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Lm.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function WWe(t){return t.slice(0,2)==="</"}function HWe(t,e,n){var r="",i=0,s=!1,o=!1,a=0,l=t.length,c="",u="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){r+=n(t.slice(i,a)),s=a,i=a;continue}if(h===">"){r+=n(t.slice(i,s)),u=t.slice(s,a+1),c=BWe(u),r+=e(s,r.length,c,u,WWe(u)),i=a+1,s=!1;continue}if(h==='"'||h==="'")for(var f=1,g=t.charAt(a-f);g.trim()===""||g==="=";){if(g==="="){o=h;continue e}g=t.charAt(a-++f)}}else if(h===o){o=!1;continue}}return i<t.length&&(r+=n(t.substr(i))),r}var qWe=/[^a-zA-Z0-9\\_:.-]/gim;function KWe(t,e){var n=0,r=0,i=[],s=!1,o=t.length;function a(f,g){if(f=Lm.trim(f),f=f.replace(qWe,"").toLowerCase(),!(f.length<1)){var v=e(f,g||"");v&&i.push(v)}}for(var l=0;l<o;l++){var c=t.charAt(l),u,h;if(s===!1&&c==="="){s=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:XWe(t,l+1);continue}if(s!==!1&&l===r){if(h=t.indexOf(c,l+1),h===-1)break;u=Lm.trim(t.slice(r+1,h)),a(s,u),s=!1,l=h,n=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(h=YWe(t,l),h===-1){u=Lm.trim(t.slice(n,l)),a(u),s=!1,n=l+1;continue}else{l=h-1;continue}else if(h=ZWe(t,l-1),h===-1){u=Lm.trim(t.slice(n,l)),u=Wte(u),a(s,u),s=!1,n=l+1;continue}else continue}return n<t.length&&(s===!1?a(t.slice(n)):a(s,Wte(Lm.trim(t.slice(n))))),Lm.trim(i.join(" "))}function YWe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function XWe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function ZWe(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function JWe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function Wte(t){return JWe(t)?t.substr(1,t.length-2):t}$O.parseTag=HWe;$O.parseAttr=KWe;var QWe=sW.FilterCSS,Wu=Fi,uye=$O,eHe=uye.parseTag,tHe=uye.parseAttr,TM=oW;function UR(t){return t==null}function nHe(t){var e=TM.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=TM.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=TM.trim(t.slice(0,-1))),{html:t,closing:n}}function rHe(t){var e={};for(var n in t)e[n]=t[n];return e}function iHe(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function hye(t){t=rHe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Wu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=iHe(t.whiteList||t.allowList):t.whiteList=Wu.whiteList,t.onTag=t.onTag||Wu.onTag,t.onTagAttr=t.onTagAttr||Wu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Wu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Wu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Wu.safeAttrValue,t.escapeHtml=t.escapeHtml||Wu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new QWe(t.css))}hye.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,o=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=e.cssFilter;n.stripBlankChar&&(t=Wu.stripBlankChar(t)),n.allowCommentTag||(t=Wu.stripCommentTag(t));var h=!1;n.stripIgnoreTagBody&&(h=Wu.StripTagBody(n.stripIgnoreTagBody,s),s=h.onIgnoreTag);var f=eHe(t,function(g,v,x,b,T){var A={sourcePosition:g,position:v,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,x)},I=i(x,b,A);if(!UR(I))return I;if(A.isWhite){if(A.isClosing)return"</"+x+">";var P=nHe(b),M=r[x],F=tHe(P.html,function(C,N){var O=TM.indexOf(M,C)!==-1,j=o(x,C,N,O);return UR(j)?O?(N=l(x,C,N,u),N?C+'="'+N+'"':C):(j=a(x,C,N,O),UR(j)?void 0:j):j});return b="<"+x,F&&(b+=" "+F),P.closing&&(b+=" /"),b+=">",b}else return I=s(x,b,A),UR(I)?c(b):I},c);return h&&(f=h.remove(f)),f};var sHe=hye;(function(t,e){var n=Fi,r=$O,i=sHe;function s(a,l){var c=new i(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=i,(function(){for(var a in n)e[a]=n[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(U9,U9.exports);var y_=U9.exports,oHe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},dye=(function(){function t(e,n){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=H4(H4({},y_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):y_.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;e&&!n?i=e:e&&n?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=e[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new y_.FilterXSS(i)}return t.prototype.sanitize=function(e,n){switch(n===void 0&&(n={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,n);default:return n.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,n){var r=(n??{}).isProtocolRequired,i=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?y_.escapeAttrValue(e):!s&&!i?y_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,n,r,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,n,r,i):y_.safeAttrValue(e,n,r,i)},t.prototype.validate=function(e,n){n===void 0&&(n={});var r=this.sanitize(e,n);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var n=this;return String(e).replace(/[&<>"'\/]/g,function(r){return n._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var n=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,i){return n.test(r)?r:"&#x".concat(Number(e.charCodeAt(i)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var n={};return e.forEach(function(r){Object.keys(r).forEach(function(i){Array.isArray(r[i])&&Array.isArray(n[i])?n[i]=n[i].concat(r[i]):n[i]=r[i]})}),n},t.prototype._iterateOverObject=function(e,n){var r=this;n===void 0&&(n={});try{var i=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,n);return c.isValid?a.concat([l]):(i=!0,a.concat([c.sanitized]))},[]);else if(oHe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],u=r.validate(c,n);return u.isValid?a[l]=c:(i=!0,a[l]=u.sanitized),a},{})}else return n.allowUndefined&&typeof e>"u"?void 0:null;return i?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const aHe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],lHe=aHe.reduce((t,e)=>(t[e]=[],t),{}),cHe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],fye=new dye({whiteList:lHe,onTagAttr:(t,e,n)=>{const r=`${e}="${n}"`;if(cHe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),ICt=new dye({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),pye="http://www.w3.org/",jO=`${pye}2000/svg`,mye=`${pye}1999/xlink`;let Hte=[],aW=(t,e)=>{let n={};return Object.keys(t).forEach(r=>{n[r]=t[r]}),e&&Object.keys(e).forEach(r=>{n[r]=e[r]}),n},lW=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),gye=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},uHe=(t,e,n)=>{if(e.vnodeSelector!==""){for(let r=n;r<t.length;r++)if(lW(t[r],e))return r}return-1},$$=(t,e,n,r)=>{let i=t[e];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(lW(a,i))throw new Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},hHe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},B9=[],W9=!1,yye=t=>{(t.children||[]).forEach(yye),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},qte=()=>{W9=!1,B9.forEach(yye),B9.length=0},Kte=t=>{B9.push(t),W9||(W9=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(qte,{timeout:16}):setTimeout(qte,16))},Yte=t=>{let e=t.domNode;if(t.properties){let n=t.properties.exitAnimation;if(n)return e.style.pointerEvents="none",void n(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Kte(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),Kte(t))},dHe=(t,e,n)=>{if(!e)return;let r=n.eventHandlerInterceptor,i=Object.keys(e),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")q9(t,l,!0);else if(a==="classes"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h],g=l[f];g&&(gye(g),n.styleApplyer(t,f,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let u=l;l=function(h){u.apply(this,[h]),h.target["oninput-value"]=h.target.value}})()),t[a]=l):n.namespace===jO?a==="href"?t.setAttributeNS(mye,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=fye.sanitize(l):H9(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function H9(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let K4,fHe=(t,e,n)=>{if(e)for(let r of e)mT(r,t,void 0,n)},vye=(t,e,n)=>{fHe(t,e.children,n),e.text&&(t.textContent=e.text),dHe(t,e.properties,n),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,n,e.vnodeSelector,e.properties,e.children])},mT=(t,e,n,r)=>{let i,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")i=t.domNode=a.createTextNode(t.text),n!==void 0?e.insertBefore(i,n):e.appendChild(i);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let u=o.charAt(s-1),h=o.slice(s,l);u==="."?i.classList.add(h):u==="#"?i.id=h:(h==="svg"&&(r=aW(r,{namespace:jO})),r.namespace!==void 0?i=t.domNode=a.createElementNS(r.namespace,h):(i=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&i.setAttribute("type",t.properties.type)),n!==void 0?e.insertBefore(i,n):i.parentNode!==e&&e.appendChild(i)),s=l+1}}vye(i,t,r)}},q9=(t,e,n)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,n)})},pHe=(t,e,n,r)=>{if(!n)return;let i=!1,s=Object.keys(n),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=n[l],u=e[l];if(l==="class")u!==c&&(q9(t,u,!1),q9(t,c,!0));else if(l==="classes"){let h=t.classList,f=Object.keys(c),g=f.length;for(let v=0;v<g;v++){let x=f[v],b=!!c[x];b!==!!u[x]&&(i=!0,b?h.add(x):h.remove(x))}}else if(l==="styles"){let h=Object.keys(c),f=h.length;for(let g=0;g<f;g++){let v=h[g],x=c[v];x!==u[v]&&(i=!0,x?(gye(x),r.styleApplyer(t,v,x)):r.styleApplyer(t,v,""))}}else if(c||typeof u!="string"||(c=""),l!=="value"||H9(t)){if(c!==u){let h=typeof c;h==="function"&&r.eventHandlerInterceptor||(r.namespace===jO?l==="href"?t.setAttributeNS(mye,l,c):t.setAttribute(l,c):h==="string"?l==="innerHTML"?t[l]=fye.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):H9(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),i=!0)}}else{let h=t[l];h!==c&&(t["oninput-value"]?h===t["oninput-value"]:c!==u)&&(t[l]=c,t["oninput-value"]=void 0),c!==u&&(i=!0)}}return i},mHe=(t,e,n,r,i)=>{if(n===r)return!1;r=r||Hte;let s,o=(n=n||Hte).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let h=l<o?n[l]:void 0,f=r[c];if(h!==void 0&&lW(h,f))u=K4(h,f,i)||u,l++;else{let g=uHe(n,f,l+1);if(g>=0){for(s=l;s<g;s++)Yte(n[s]),$$(n,s,t,"removed");u=K4(n[g],f,i)||u,l=g+1}else mT(f,e,l<o?n[l].domNode:void 0,i),hHe(f),$$(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)Yte(n[s]),$$(n,s,t,"removed");return u};K4=(t,e,n)=>{let r=t.domNode,i=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,i=!0,i}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(n=aW(n,{namespace:jO})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=mHe(e,r,t.children,e.children,n)||s,s=pHe(r,t.properties,e.properties,n)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,n,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),i};let GR=(t,e)=>({getLastRender:()=>t,update:n=>{if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=n,K4(r,n,e)},domNode:t.domNode});const gHe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.charAt(0)==="-"?t.style.setProperty(e,n):t.style[e]=n}};let uS=t=>aW(gHe,t),ng={append:(t,e,n)=>(n=uS(n),mT(e,t,void 0,n),GR(e,n)),insertBefore:(t,e,n)=>(n=uS(n),mT(e,t.parentNode,t,n),GR(e,n)),merge:(t,e,n)=>(n=uS(n),e.domNode=t,vye(t,e,n),GR(e,n)),replace:(t,e,n)=>(n=uS(n),mT(e,t.parentNode,t,n),t.parentNode.removeChild(t),GR(e,n))},_ye,yHe=(t,e)=>{let n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n};_ye=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let vHe=(t,e)=>{let n=t;return e.forEach(r=>{n=n&&n.children?_ye(n.children,i=>i.domNode===r):void 0}),n},_He=(t,e,n)=>{let r=function(i){n("domEvent",i);let s=e(),o=yHe(i.currentTarget,s.domNode);o.reverse();let a,l=vHe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(i,s,o,a)=>r},Xte=t=>{let e,n,r=uS(t),i=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(h,f,g)=>{let v,x=()=>v;r.eventHandlerInterceptor=_He(e,x,i),v=h(f,g(),r),a.push(v),l.push(g)},u=()=>{if(n=void 0,s){s=!1,i("renderStart",void 0);for(let h=0;h<a.length;h++){let f=l[h]();i("rendered",void 0),a[h].update(f),i("patched",void 0)}i("renderDone",void 0),s=!0}};return e={renderNow:u,scheduleRender:()=>{n||o||(n=requestAnimationFrame(u))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(h,f)=>{c(ng.append,h,f)},insertBefore:(h,f)=>{c(ng.insertBefore,h,f)},merge:(h,f)=>{c(ng.merge,h,f)},replace:(h,f)=>{c(ng.replace,h,f)},detach:h=>{for(let f=0;f<l.length;f++)if(l[f]===h)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},xm=class extends Kt{constructor(){super(...arguments),this.items=new Ot,this._watchUpdatingTracking=new n1,this._callbacks=new Map,this._projector=Xte(),this._hiddenProjector=Xte()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const r of n.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of n.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const n=this._hiddenSurface,r=this._hiddenProjector;let i;const s=()=>(i=e.render(),i);r.append(n,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i?.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);n.firstChild;)n.removeChild(n.firstChild);return o}overlaps(e,n){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(n);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,n){const r=!!n?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(i.save(),s.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};_([E({readOnly:!0})],xm.prototype,"surface",void 0),_([E({readOnly:!0})],xm.prototype,"items",void 0),_([E({readOnly:!0})],xm.prototype,"needsRender",null),_([E({readOnly:!0})],xm.prototype,"_watchUpdatingTracking",void 0),_([E({readOnly:!0})],xm.prototype,"updating",null),xm=_([ue("esri.views.overlay.ViewOverlay")],xm);const Zte=xm,j$=[0,0];function xHe(t){const e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return j$[0]=n.left+(e?.pageXOffset??0),j$[1]=n.top+(e?.pageYOffset??0),j$}function Jte(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function wHe(t){const e=document.createElement("div");return t.appendChild(e),e}const v_=16,ME=750,bHe=512,EHe=2,SHe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._freqInfo={freq:v_,time:ME},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([dn(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),dn(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())}),dn(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([dn(()=>this.ui,(i,s)=>this._handleUIChange(i,s),ma),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=iW(r);if(s||typeof r!="string"||Tt.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Jte(this.root),this._set("root",null)),this.userContent&&(zte(this.userContent,i),Jte(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",zte(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new Zte;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(dn(()=>c.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=u2({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ri(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&i?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,s){const o=this.position;return r-=o?o[0]:0,i-=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const o=this.position;return r+=o?o[0]:0,i+=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_updateAria(){const{surface:r,aria:i}=this;r&&(r.ariaLabelledByElements=i?.labelledByElements??null,r.ariaDescribedByElements=i?.describedByElements??null,r.ariaLabel=i?.label??null,r.ariaDescription=i?.description??null)}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(dn(()=>this.root,s=>{r.container=s?wHe(s):null},ma),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=v_,r.time=ME;const i=u2({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=v_,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const u=this._position();c.freq=u||l?v_:Math.min(ME,c.freq*EHe),!l&&c.freq>=bHe&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=v_,r.time=ME,i.resume()});this.container!=null&&s.observe(this.container);const o=Kn(()=>s.disconnect());this.addHandles([J2(window,"resize",()=>{r.freq=v_,r.time=ME,i.resume()}),o,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return i===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&xHe(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return _([E()],n.prototype,"aria",void 0),_([E()],n.prototype,"container",null),_([E({readOnly:!0})],n.prototype,"focused",null),_([E({readOnly:!0})],n.prototype,"height",void 0),_([E()],n.prototype,"messagesCommon",void 0),_([E({type:Zte})],n.prototype,"overlay",void 0),_([E({readOnly:!0})],n.prototype,"position",void 0),_([E({readOnly:!0})],n.prototype,"resizing",void 0),_([E({readOnly:!0})],n.prototype,"root",void 0),_([E({value:null,readOnly:!0})],n.prototype,"size",null),_([E({readOnly:!0})],n.prototype,"surface",void 0),_([E({readOnly:!0})],n.prototype,"suspended",void 0),_([E({nonNullable:!0})],n.prototype,"ui",null),_([E({readOnly:!0})],n.prototype,"userContent",void 0),_([E({readOnly:!0})],n.prototype,"width",void 0),_([E()],n.prototype,"widthBreakpoint",void 0),n=_([ue("esri.views.DOMContainer")],n),n},BR="popup",Qte="manual";function bd(t){return t!=null&&"open"in t&&"declaredClass"in t}function pp(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function THe(t,e,n){const[r,i,s]=e;if(n){const[o,a,l]=n;o&&bd(a)&&(a.view=null,o.remove(a,BR),a!==i&&i&&a.destroy()),o&&l&&pp(l)&&(l.view=null,o.remove(l,BR),l!==s&&s&&l.remove())}r&&bd(i)&&(i.view=t,r.add(i,{key:BR,position:Qte,internal:!0})),r&&s&&pp(s)&&(s.view=t,r.add(s,{key:BR,position:Qte,internal:!0}))}async function kHe(t,e){const{popup:n,popupElement:r}=t;bd(n)?await WR(n,null,e):r&&pp(r)?await WR(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:i,popupElement:s}=t;bd(i)&&!t.destroyed&&t.ready&&t.popupEnabled?await WR(i,null,e):s&&pp(s)&&await WR(null,s,e)})}function AHe(t,e){const{popup:n,popupElement:r}=t;if(bd(n))return n.open(e);r&&pp(r)&&r.open(e)}function IHe(t,e){bd(t)&&t.close(),e&&pp(e)&&(e.visible=!1)}async function WR(t,e,n){if(bd(t)){const r=await t.viewModel.handleViewClick(n);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&pp(e)){const r=await e.handleViewClick(n);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const xye=ye("mac")?"Meta":"Control",PHe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),RHe=t=>PHe.has(t);let CHe=class{constructor(e,n=[]){this.eventType=e,this.keyModifiers=n}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=e.modifiers;for(const r of this.keyModifiers)if(!n.has(r))return!1;return!0}},qs=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const n=this._incoming[e];for(const r of n)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(n=>this._handleEvent(n)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,n,r){let i;typeof n=="function"?(r=n,i=[]):i=n||[];const s=typeof e=="string"?new CHe(e,i):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const h=this._incoming[u.match.eventType];if(h){const f=h.indexOf(u);h.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new MHe(s,r,{onPause:a,onRemove:a,onResume:u=>{const h=this._incoming[u.match.eventType];h&&!h.includes(u)&&(h.push(u),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const n=new NHe(e,{onEmit:(r,i,s,o)=>{this._manager?.emit(r.eventType,i,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const n=this._incoming[e.type];if(n){for(const r of n)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},MHe=class{constructor(e,n,r){this.match=e,this._callback=n,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},NHe=class{constructor(e,n){this.eventType=e,this._removed=!1,this._handler=n}emit(e,n,r){this._removed||this._handler.onEmit(this,e,n,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},OHe=class extends qs{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",n=>this._update(n.data))}_update(e){const n=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:i,native:{pointerId:s}}=e;n===this._value&&this._x===r&&this._y===i&&this._id===s||(this._value=n,this._x=r,this._y=i,this._id=s,this._onChange(s,n,r,i))}},LHe=class{constructor(e,n){this._observable=new lI,this._value=e,this._equalityFunction=n}get value(){return tn(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function E2(t,e=Nde){return new LHe(t,e)}let DHe=class extends qs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=E2(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},$He=class{constructor(e,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const r in e){const i=e[r],s=new Cfe(i,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=eje(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const n=this._properties[e];for(const r of n.acquired)GQ(r)||n.pool.release(r);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(e){const n=this._owner._get(e),r=this._properties[e];let i=r.pool.acquire();for(r.acquired.push(i);i===n;)i=r.pool.acquire(),r.acquired.push(i);return Ufe(),i}_release(){for(const e in this._properties){const n=this._properties[e];let r=0;for(const i of n.acquired)GQ(i)?n.acquired[r++]=i:n.pool.release(i);n.acquired.length=r}}},jHe=class{constructor(){this.id=0,this.type="mouse",this.location=Us()}},ju=class extends Kt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=xye,this._propertiesPool=new $He({latestPointerInfo:()=>new jHe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const n of e)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,n,r=tp.INTERNAL){if(this._nameToGroup[e]||n.length===0)return;const i={name:e,handlers:n.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,h,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(i,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const n=this._nameToGroup[e];n?(n.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):Tt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,n=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)RHe(a)||n.add(a)}i.active=s}this._sourceEvents=e,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,n,r,i){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==n||s.location.x!==r||s.location.y!==i){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=n,o.location.x=r,o.location.y=i,this._latestPointerInfo=o}}_onEventReceived(e,n){if(e==="pointer-capture-lost"){const s=n;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,n);const r=this._testTimestamp??n.native?.timestamp,i=n.native?.cancelable;this._emitInputEventFromSource(e,n,r,i)}_updateKeyModifiers(e,n){if(!n)return;let r=!1;const i=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=n.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=n.native;s("Alt",!!o?.altKey),s("Control",!!o?.ctrlKey),s("Ctrl",!!o?.ctrlKey),s("Shift",!!o?.shiftKey),s("Meta",!!o?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new OHe((e,n,r,i)=>this._setLatestPointer(e,n,r,i)),this._multiTouchHandler=new DHe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],tp.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,tp.INTERNAL)}_setPointerCapture(e,n,r,i){const s=e.name+"-"+n.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,n,r,i){this._emitInputEvent(0,e,n,r,i)}_emitInputEvent(e,n,r,i,s,o){const a=i??this._currentPropagation?.timestamp??performance.now(),l=s??!1,c={event:new FHe(n,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new Uk,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:r}=e.events.pop(),i=n.data?.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&e.currentHandler.eventCallback?.(n),n.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const n=new Uk;n.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)n.push(r.events.pop());r.events=n,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,n){if(e.handler.hasSideEffects!==n.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==n.groupPriority)return e.groupPriority>n.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of n.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const s=r.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(e){const n=[];for(const r of e){let i=0;for(;i<n.length&&this._compareHandlerPriority(r,n[i])>=0;)i++;n.splice(i,0,r)}return n}get test(){}};_([E({readOnly:!0})],ju.prototype,"hasPendingInputs",null),_([E({constructOnly:!0})],ju.prototype,"eventSource",void 0),_([E({constructOnly:!0})],ju.prototype,"recognizers",void 0),_([E()],ju.prototype,"multiTouchActive",null),_([E()],ju.prototype,"_latestPointerInfo",void 0),_([E()],ju.prototype,"latestPointerInfo",null),_([E()],ju.prototype,"_paused",void 0),_([E({readOnly:!0})],ju.prototype,"updating",null),ju=_([ue("esri.views.input.InputManager")],ju);let FHe=class{constructor(e,n,r,i,s){this.type=e,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const n=(r,i)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw r;return r};return(typeof e=="function"?e():e).then(r=>n(r,!1),r=>n(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const tp={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},VHe=t=>{const e=t;let n=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([dn(()=>[this.ui,this.popup,this.popupElement],([r,i,s],o)=>{const[a,l,c]=o??[];THe(this,[r,i,s],[a,l,c])},ta),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&kHe(this,r)},tp.WIDGET)]),LB(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>_e(()=>import("./Popup-C-oc366h.js").then(r=>r.P),__vite__mapDeps([228,229,18,230,231,232,233,204,200,177,164,201,31,202,203,142,87,205,122,163,206,82,130,234,55,235,236,131,132,24,25,198,199,135,83,78,127,76,77,52,53,54,237,112,110,111,26,64,67,113,238,239,240,241,242,20,29,243,244,245,246,27,247,248,249,250,251,252,154,253,254,255,256,257,28,30,258,259,260,261,262,33,263,264,197,265,266,32,267,268,269,270,271,272,273,274,275,276,42,277,134,278,279,280,281])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(bd(this.popup))return this.popup.open(r);if(this.popupElement&&pp(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void Tt.getLogger(this).error(new Xe("view:null-popup","Popup is null and can't be opened"));AHe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),IHe(this.popup,this.popupElement)}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!bd(this.popup))return this._popupSetupTask=yO(async r=>{if(!this.popupEnabled||!pp(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),pi(r),customElements.get("arcgis-popup")||Tt.getLogger(this).error(new Xe("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:i}=await _e(()=>import("./Popup-C-oc366h.js").then(o=>o.P),__vite__mapDeps([228,229,18,230,231,232,233,204,200,177,164,201,31,202,203,142,87,205,122,163,206,82,130,234,55,235,236,131,132,24,25,198,199,135,83,78,127,76,77,52,53,54,237,112,110,111,26,64,67,113,238,239,240,241,242,20,29,243,244,245,246,27,247,248,249,250,251,252,154,253,254,255,256,257,28,30,258,259,260,261,262,33,263,264,197,265,266,32,267,268,269,270,271,272,273,274,275,276,42,277,134,278,279,280,281]));if(pi(r),!this.popup||bd(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:o,close:a,...l}=s;this.popup=new i({...l})}else this.popup=new i(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const o=[],a=[];let l=!1;const c=I6e(s,ye("popup-view-fetch-timeout")??UHe),u=g=>{const v=new zHe(g);return a.push(v),o.push(v.promise),v},h=g=>{const v=a.at(-1);return v&&v.layerView===g&&!l?v:u(g)};for(const g of i)"graphic"in g?(h(g.layerView).graphics.push(g.graphic),l=!1):(o.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,c)),l=!0);a.forEach(g=>g.resolve(c));const f=A6e(o).then(g=>g.filter(v=>!!v).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:o}=await this.popupHitTest(r);pi(i);const a=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return _([E()],n.prototype,"popup",void 0),_([E()],n.prototype,"popupElement",void 0),_([E()],n.prototype,"popupEnabled",void 0),n=_([ue("esri.views.PopupView")],n),n};let zHe=class{constructor(e){this.layerView=e,this._resolver=fc(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let s;return n.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?i.resolve(o):i.reject(s)}),i.promise}};const UHe=5e3;var hS;const Y4=Il()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),wye=Y4.jsonValues.slice();EF(wye,"orthometric");const gT=Il()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let tl=hS=class extends qt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,n){return Y4.write(t,e,n)}readHeightModel(t,e,n){return Y4.read(t)||(n?.messages&&n.messages.push(GHe(t,{context:n})),null)}readHeightUnit(t,e,n){return gT.read(t)||(n?.messages&&n.messages.push(ene(t,{context:n})),null)}readHeightUnitService(t,e,n){return vB(t)||gT.read(t)||(n?.messages&&n.messages.push(ene(t,{context:n})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new hS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const n=Ppe(e);return new hS({heightModel:t.heightModel,heightUnit:n??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new hS;return e.read(t,{origin:"web-scene"}),e}};function ene(t,e){return new Cd("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function GHe(t,e){return new Cd("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}_([E({type:Y4.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:wye,default:"ellipsoidal",write:{isRequired:!0}}}}})],tl.prototype,"heightModel",void 0),_([Zn("web-scene","heightModel")],tl.prototype,"writeHeightModel",null),_([lr(["web-scene","service"],"heightModel")],tl.prototype,"readHeightModel",null),_([E({type:gT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:gT.jsonValues,write:{writer:gT.write,isRequired:!0}}}}})],tl.prototype,"heightUnit",void 0),_([lr("web-scene","heightUnit")],tl.prototype,"readHeightUnit",null),_([lr("service","heightUnit")],tl.prototype,"readHeightUnitService",null),_([E({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],tl.prototype,"vertCRS",void 0),_([lr("service","vertCRS",["vertCRS","ellipsoid","geoid"])],tl.prototype,"readVertCRS",null),tl=hS=_([ue("esri.geometry.HeightModelInfo")],tl);let F$;async function BHe(){return F$==null&&(F$=_e(()=>import("./WhereClauseCache-zovzyWUC.js"),__vite__mapDeps([74,24,25,75,76,77,78])).then(t=>new t.WhereClauseCache(500,500))),F$}async function WHe(t,e){const n=await BHe(),r=n.get(t,e);if(r==null)throw n.getError(t,e);return r}function UCt(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function GCt(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function BCt(t,e){return e.length===0?null:`${t} IN (${HHe(e)})`}function HHe(t){return t.map(e=>typeof e=="string"?qHe(e):e).join(",")}function qHe(t){return`'${t.replaceAll("'","''")}'`}function WCt(t){return typeof t=="number"}function HCt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function qCt(t){return typeof t=="boolean"}function xI(t){return typeof t=="string"||t instanceof String}function KHe(t){return t==null||xI(t)}function KCt(t){return Array.isArray(t)}function YCt(t){return t?.declaredClass==="esri.Graphic"}function XCt(t){return t instanceof Date}const YHe="HH:mm",XHe="HH:mm:ss",ZHe="HH:mm:ss.SSS",JHe=[ZHe,XHe,YHe,"TT"],QHe="yyyy-MM-dd";function tne(t){if(!t||!xI(t))return null;const e=hn.fromFormat(t,QHe);return e.isValid?e:null}function nne(t){return t&&xI(t)?T6e(JHe,e=>{const n=hn.fromFormat(t,e);return n.isValid?n:null})??null:null}function rne(t){if(!t||!xI(t))return null;const e=hn.fromISO(t);return e.isValid?e:null}const bye=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function eqe(t){return t!=null&&bye.has(t.type)}function Eye(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Sye(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Tye(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const tqe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);tB(bye,tqe);function ZCt(t,e){const n=t?.domain;if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=eqe(t);return Eye(t)||Tye(t)||Sye(t)?{...nqe(t,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function nqe(t,e,n){return Eye(t)?{min:tne(n)?.toMillis(),max:tne(e)?.toMillis(),rawMin:n,rawMax:e}:Tye(t)?{min:nne(n)?.toMillis(),max:nne(e)?.toMillis(),rawMin:n,rawMax:e}:Sye(t)?{min:rne(n)?.toMillis(),max:rne(e)?.toMillis(),rawMin:n,rawMax:e}:{max:null,min:null}}function rqe(t){if(!t)return;const e=t.match(iqe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const iqe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function JCt(t){return t.match(sqe)?.[1]?.replaceAll("\\'","'")??null}const sqe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let V$;function oqe(){return V$||(V$=(async()=>{const[t,e,n]=await Promise.all([_e(()=>import("./arcadeUtils-BcENEI9M.js"),__vite__mapDeps([282,283,284,77,285,76,78,286,239,84,287,66,64,26,67,83,288,289,75,134,290,240,241,291])),_e(()=>import("./batchExec-mSKGv1vE.js"),__vite__mapDeps([292,146])),_e(()=>import("./aiServices-BMGGcT-7.js").then(r=>r.a),__vite__mapDeps([288,78,285,76,77,286,239,84,289,284]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:n,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),V$}const aqe=/^([0-9_])/,lqe=/[^a-z0-9_\u0080-\uffff]+/gi;function QCt(t){return t==null?null:t.trim().replaceAll(lqe,"_").replace(aqe,"F$1")||null}const cqe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],uqe=["field","normalizationField"];function eMt(t,e){if(t!=null&&e!=null){for(const n of Array.isArray(t)?t:[t])if(ine(cqe,n,e),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)ine(uqe,r,e)}}function ine(t,e,n){if(t)for(const r of t){const i=oO(r,e),s=i&&typeof i!="function"&&n.get(i);s&&Y2(r,s.name,e)}}function tMt(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=n?.name??null,t.endField=r?.name??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=n?.name??null,t.endTimeField=r?.name??null}}const z$=new Set;function cW(t,e){return t&&e?(z$.clear(),Bk(z$,t,e),Array.from(z$).sort()):[]}function Bk(t,e,n){if(n)if(e?.fields?.length)if(n.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of n)Wk(t,e,r);else{if(n.includes("*"))return t.clear(),void t.add("*");for(const r of n)r!=null&&t.add(r)}}function Wk(t,e,n){if(typeof n=="string")if(e){const r=e.get(n);r&&t.add(r.name)}else t.add(n)}function nMt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(n=>n.name):e}function rMt(t,e,n=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=cW(t,e);return r.length/t.fields.length>=n?["*"]:r}async function U1(t,e,n,r){if(!r)return;const i=rqe(r);if(i)Wk(t,e,i);else{const{arcadeUtils:s}=await oqe(),o=s.extractFieldNames(r,n?.partitions??e?.fields?.map(a=>a.name));for(const a of o)Wk(t,n?.index??e,a)}}async function uW(t,e,n){if(n&&n!=="1=1"){const r=await WHe(n,e);if(!r.isStandardized)throw new Xe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});Bk(t,e,r.fieldNames)}}function iMt({displayField:t,fields:e}){return t||(e?.length?hqe(e):null)}function hqe(t){return U$(t,"name-or-title")||U$(t,"unique-identifier")||U$(t,"type-or-category")||dqe(t)}function dqe(t){for(const e of t){if(!e?.name)continue;const n=e.name.toLowerCase();if(n.includes("name")||n.includes("title"))return e.name}return null}function U$(t,e){for(const n of t)if(n?.valueType&&n.valueType===e)return n.name;return null}async function sMt(t,e){if(!e)return;const n=e.elevationInfo?.featureExpressionInfo;return n?n.collectRequiredFields(t,e.fieldsIndex):void 0}function fqe(t,e,n){n.onStatisticExpression?U1(t,e,null,n.onStatisticExpression.expression):t.add(n.onStatisticField)}async function oMt(t,e,n){if(!e||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(kye(t,e,i)),n.fields&&r.push(...n.fields.map(async s=>fqe(t,e.fieldsIndex,s))),await Promise.all(r)}async function aMt(t,e){const{fieldsIndex:n,trackInfo:r}=e;if(!e||!r||!n)return;const i=[r.latestObservations.renderer?.collectRequiredFields(t,n),r.previousObservations.renderer?.collectRequiredFields(t,n),r.trackLines.renderer?.collectRequiredFields(t,n)];r.popupTemplate&&i.push(kye(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const o of s)i.push(Pye(t,n,o));await Promise.all(i)}async function kye(t,e,n){const r=[];n?.expressionInfos&&r.push(...n.expressionInfos.map(s=>U1(t,e.fieldsIndex,null,s.expression)));const i=n?.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(U1(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function lMt(t,e,n){e&&(e.timeInfo&&n?.timeExtent&&Bk(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&Bk(t,e.fieldsIndex,[e.floorInfo.floorField]),n?.where!=null&&await uW(t,e.fieldsIndex,n.where))}async function cMt(t,e,n){e&&n&&await Promise.all(n.map(r=>pqe(t,e,r)))}async function pqe(t,e,n){e&&n&&(n.valueExpression?await U1(t,e.fieldsIndex,null,n.valueExpression):n.field&&Wk(t,e.fieldsIndex,n.field))}function uMt(t){return t?cW(t.fieldsIndex,Aye(t)):[]}function mqe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?cW(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function hMt(t,e,n){if(!e||!n)return;const r=e.fieldsIndex;await Promise.all(n.filters.map(i=>uW(t,r,i.where)))}const gqe=new Set(["oid","global-id","guid"]),yqe=new Set(["oid","global-id"]),vqe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function _qe(t){const e=new Set;Iye(t).forEach(r=>e.add(r)),mqe(t).forEach(r=>e.add(r.toLowerCase()));const n=t&&"infoFor3D"in t?t.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function Aye(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=e;return[n,r,i,s].filter(Boolean)}function Iye(t){return Aye(t).map(e=>e.toLowerCase())}function dMt(t,e){return t.editable&&!gqe.has(t.type)&&!Iye(e).includes(t.name?.toLowerCase()??"")}function fMt(t,e){const n=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&n===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&n===e.globalIdField.toLowerCase()||_qe(e).includes(n)||yqe.has(t.type)||vqe.some(r=>r.test(n)))}async function pMt(t,e){const{labelingInfo:n,fieldsIndex:r}=e;n?.length&&await Promise.all(n.map(i=>Pye(t,r,i)))}async function Pye(t,e,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await U1(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Wk(t,e,o.slice(1,-1))})}await uW(t,e,i)}function mMt(t){const e=t.defaultValue;return e!==void 0&&Cye(t,e)?e:t.nullable?null:void 0}function gMt(t){const e=typeof t=="string"?{type:t}:t;return Pqe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function Rye(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function xqe(t){return t===null||Rye(t)}function wqe(t){return t===null||Number.isInteger(t)}function bqe(){return!0}function Cye(t,e){let n;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=t.nullable?wqe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=t.nullable?xqe:Rye;break;case"string":case"esriFieldTypeString":n=t.nullable?KHe:xI;break;default:n=bqe}return arguments.length===1?n:n(e)}const Eqe=["integer","small-integer","big-integer","long"],Sqe=["single","double"],Tqe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],kqe=["esriFieldTypeSingle","esriFieldTypeDouble"],Mye=new Set([...Eqe,...Tqe]),Aqe=new Set([...Sqe,...kqe]),Iqe=tB(Mye,Aqe);function yMt(t){return t!=null&&Mye.has(t.type)}function Nye(t){return t!=null&&Iqe.has(t.type)}function Pqe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function Rqe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function Cqe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function Mqe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function Nqe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function vMt(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function _Mt(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function xMt(t,e){return Oqe(t,e)===null}function wMt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function Oqe(t,e){return t==null||t.nullable&&e===null?null:Cye(t,e)?Nye(t)&&!Lqe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function Lqe(t,e){const n=typeof t=="string"?Oye(t):t;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(e)&&e>=r&&e<=i:e>=r&&e<=i}function Oye(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return Dqe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return $qe;case"esriFieldTypeBigInteger":case"big-integer":return jqe;case"esriFieldTypeSingle":case"single":return Fqe;case"esriFieldTypeDouble":case"double":return Vqe}}const Dqe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},$qe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},jqe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},HR=(2-2**-23)*2**127,Fqe={min:-HR,max:HR,isInteger:!1,rawMin:-HR,rawMax:HR},Vqe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function bMt(t,e,n){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${n} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${n} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${n} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:i}=Oye(e.type);return`Value ${n} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${i}`}}}function EMt(t,e){return!zqe(t,e,null)}function zqe(t,e,n){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)&&(i=!0,n==null))break;return i}function SMt(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function Uqe(t){const e=t?.match(/{[^}]+}/g);return e?e.map(n=>n.slice(1,-1).split(":")[0].trim()):[]}let kM=class extends qt{constructor(e){super(e),this.type=null}};_([E({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],kM.prototype,"type",void 0),kM=_([ue("esri.popup.content.Content")],kM);const Tp=kM,qR=new Ws({asc:"ascending",desc:"descending"});let dS=class extends mo(qt){constructor(e){super(e),this.field=null,this.order="ascending"}};_([E({type:String,json:{write:!0}})],dS.prototype,"field",void 0),_([E({type:qR.apiValues,json:{type:qR.jsonValues,read:qR.read,write:qR.write}})],dS.prototype,"order",void 0),dS=_([ue("esri.popup.support.AttachmentsOrderByInfo")],dS);const Gqe=dS;let Bh=class extends mo(Tp){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};_([E({type:[String],json:{write:!0}})],Bh.prototype,"attachmentKeywords",void 0),_([E({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],Bh.prototype,"attachmentTypes",void 0),_([E({type:String,json:{write:!0}})],Bh.prototype,"description",void 0),_([E({type:["auto","preview","list"],json:{write:!0}})],Bh.prototype,"displayType",void 0),_([E({type:[Gqe],json:{write:!0}})],Bh.prototype,"orderByFields",void 0),_([E({type:String,json:{write:!0}})],Bh.prototype,"title",void 0),_([E({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Bh.prototype,"type",void 0),Bh=_([ue("esri.popup.content.AttachmentsContent")],Bh);const Hk=Bh;var K9;let Z0=K9=class extends Tp{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new K9({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ze(this.outFields):null})}};_([E()],Z0.prototype,"creator",void 0),_([E()],Z0.prototype,"destroyer",void 0),_([E()],Z0.prototype,"outFields",void 0),_([E({type:["custom"],readOnly:!0})],Z0.prototype,"type",void 0),Z0=K9=_([ue("esri.popup.content.CustomContent")],Z0);const Bqe=Z0;var Y9;let W_=Y9=class extends qt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new Y9({title:this.title,expression:this.expression})}};_([E({type:String,json:{write:!0}})],W_.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],W_.prototype,"expression",void 0),_([E({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],W_.prototype,"returnType",void 0),W_=Y9=_([ue("esri.popup.ElementExpressionInfo")],W_);const Wqe=W_;var X9;let fS=X9=class extends Tp{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new X9({expressionInfo:this.expressionInfo?.clone()})}};_([E({type:Wqe,json:{write:!0}})],fS.prototype,"expressionInfo",void 0),_([E({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],fS.prototype,"type",void 0),fS=X9=_([ue("esri.popup.content.ExpressionContent")],fS);const FO=fS;let AM=class extends mo(qt){constructor(e){super(e),this.type=null}};_([E({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],AM.prototype,"type",void 0),AM=_([ue("esri.layers.support.FieldFormat")],AM);const hW=AM,Lye="auto";let vf=class extends hW{constructor(e){super(e),this.dateStyle=null,this.hour12=Lye,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};_([E({type:["full","long","medium","short"],json:{write:!0}})],vf.prototype,"dateStyle",void 0),_([E({type:["always","auto","never"],nonNullable:!0,json:{default:Lye,write:!0}})],vf.prototype,"hour12",void 0),_([E({type:["long","short"],json:{write:!0}})],vf.prototype,"month",void 0),_([E({type:["full","long","medium","short"],json:{write:!0}})],vf.prototype,"timeStyle",void 0),_([E({type:["date-time"]})],vf.prototype,"type",void 0),_([E({type:["numeric"],json:{write:!0}})],vf.prototype,"year",void 0),vf=_([ue("esri.layers.support.DateTimeFieldFormat")],vf);const r1=vf,sne={min:0,max:20},Dye=2,$ye=0,jye="decimal",Fye="auto";let wm=class extends hW{constructor(e){super(e),this.maximumFractionDigits=Dye,this.minimumFractionDigits=$ye,this.style=jye,this.type="number",this.useGrouping=Fye}};_([E({type:Lr,nonNullable:!0,range:sne,json:{default:Dye,write:!0}})],wm.prototype,"maximumFractionDigits",void 0),_([E({type:Lr,nonNullable:!0,range:sne,json:{default:$ye,write:!0}})],wm.prototype,"minimumFractionDigits",void 0),_([E({type:["decimal"],nonNullable:!0,json:{default:jye,write:!0}})],wm.prototype,"style",void 0),_([E({type:["number"]})],wm.prototype,"type",void 0),_([E({type:["always","auto","never"],nonNullable:!0,json:{default:Fye,write:!0}})],wm.prototype,"useGrouping",void 0),wm=_([ue("esri.layers.support.NumberFieldFormat")],wm);const X4=wm;let H_=class extends mo(qt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};_([pn(q7e)],H_.prototype,"dateFormat",void 0),_([E({type:Boolean,json:{write:!0}})],H_.prototype,"digitSeparator",void 0),_([E({type:Lr,json:{write:!0}})],H_.prototype,"places",void 0),H_=_([ue("esri.popup.support.FieldInfoFormat")],H_);const ub=H_,Hqe={base:hW,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":r1,number:X4}};function MMt(t,e){const{format:n}=t;return e&&VO(e)?n?Vye(n,e):IM(e,{hour12:"always",useGrouping:"always"}):null}function Vye(t,e){const{dateFormat:n}=t;if(!e)return n?ane(t):one(t);if(!VO(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return zye(t);case"single":case"double":return one(t);case"date":case"timestamp-offset":return n?ane(t):IM(e,r);case"date-only":return n?qqe(t):IM(e);case"time-only":return n?Kqe(t):IM(e,r)}}function VO(t){return Nye(t)||Rqe(t)||Cqe(t)||Nqe(t)||Mqe(t)}function zye(t){return new X4({useGrouping:t.digitSeparator?"always":"never"})}function one(t){const e=zye(t),{places:n}=t;return e.minimumFractionDigits=n??0,e.maximumFractionDigits=n??2,e}function ane(t){return new r1({dateStyle:Uye(t),year:Hye(t),month:Bye(t),timeStyle:Wye(t),hour12:Gye(t)})}function qqe(t){return new r1({dateStyle:Uye(t),year:Hye(t),month:Bye(t)})}function Kqe(t){return new r1({timeStyle:Wye(t),hour12:Gye(t)})}function Uye(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Gye(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function Bye(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Wye(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function Hye(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function Yqe(t,e){const n=t.type==="number",r=t.type==="date-time";if(!e)return n?lne(t):r?cne(t):null;if(VO(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return n?qye(t):null;case"single":case"double":return n?lne(t):null;case"date":case"timestamp-offset":return r?cne(t):null;case"date-only":return r?Xqe(t):null;case"time-only":return r?Zqe(t):null}}function qye(t){return new ub({digitSeparator:t.useGrouping!=="never"})}function lne(t){const e=qye(t);return e.places=t.maximumFractionDigits,e}function cne(t){let e;const n=Kye(t),r=Yye(t),i=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=Xye(t);return n&&r&&i?e=`${n}-${r}-${i}`:n&&r?e=`${n}-${r}`:n?e=n:s&&o?e=`${o}-${s}`:s&&(e=s),e?new ub({dateFormat:e}):null}function Xqe(t){let e;const n=Kye(t),r=t.year==="numeric"?"year":null,i=Xye(t);return n?e=n:r&&i?e=`${i}-${r}`:r&&(e=r),e?new ub({dateFormat:e}):null}function Zqe(t){let e;const n=Yye(t),r=t.hour12==="never"?"24":null;return n&&r?e=`short-date-${n}-${r}`:n&&(e=`short-date-${n}`),e?new ub({dateFormat:e}):null}function Kye(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function Yye(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function Xye(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function IM(t,e){if(!VO(t))return;const n=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new X4({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:n});case"single":case"double":return new X4({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:n});case"date":case"timestamp-offset":return new r1({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new r1({dateStyle:"short"});case"time-only":return new r1({timeStyle:"short",hour12:r})}}let zl=class extends mo(qt){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?Yqe(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?Vye(e):null)}readFormat(e,n){if(!n.fieldFormat)return e?ub.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};_([E({value:null,clonable:!1,types:Hqe,json:{write:{overridePolicy(t,e,n){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!n?.writeFieldFormat}}}}})],zl.prototype,"fieldFormat",null),_([E({type:String,json:{write:!0}})],zl.prototype,"fieldName",void 0),_([E({value:null,clonable:!1,type:ub,json:{write:!0}})],zl.prototype,"format",null),_([lr("format")],zl.prototype,"readFormat",null),_([E({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],zl.prototype,"isEditable",void 0),_([E({type:String,json:{write:!0}})],zl.prototype,"label",void 0),_([E({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],zl.prototype,"statisticType",void 0),_([pn(new Ws({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],zl.prototype,"stringFieldOption",void 0),_([E({type:String,json:{write:!0}})],zl.prototype,"tooltip",void 0),_([E({type:Boolean,json:{write:!0}})],zl.prototype,"visible",void 0),zl=_([ue("esri.popup.FieldInfo")],zl);const Zye=zl;var Z9;let bm=Z9=class extends Tp{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new Z9(Ze({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};_([E({type:Object,json:{write:!0}})],bm.prototype,"attributes",void 0),_([E({type:String,json:{write:!0}})],bm.prototype,"description",void 0),_([E({type:[Zye],json:{write:!0}})],bm.prototype,"fieldInfos",void 0),_([E({type:String,json:{write:!0}})],bm.prototype,"title",void 0),_([E({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],bm.prototype,"type",void 0),bm=Z9=_([ue("esri.popup.content.FieldsContent")],bm);const qk=bm;let J0=class extends qt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};_([E({type:String,json:{write:!0}})],J0.prototype,"altText",void 0),_([E({type:String,json:{write:!0}})],J0.prototype,"caption",void 0),_([E({type:String,json:{write:!0}})],J0.prototype,"title",void 0),_([E({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],J0.prototype,"type",void 0),J0=_([ue("esri.popup.content.mixins.MediaInfo")],J0);const dW=J0;var J9;let Q0=J9=class extends Kt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new J9({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};_([E()],Q0.prototype,"color",void 0),_([E()],Q0.prototype,"fieldName",void 0),_([E()],Q0.prototype,"tooltip",void 0),_([E()],Q0.prototype,"value",void 0),Q0=J9=_([ue("esri.popup.content.support.ChartMediaInfoValueSeries")],Q0);const Jqe=Q0;var Q9;let Em=Q9=class extends qt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new Q9({colors:Ze(this.colors),fields:Ze(this.fields),normalizeField:this.normalizeField,series:Ze(this.series),tooltipField:this.tooltipField})}};_([E({type:[Yn],json:{type:[[Lr]],write:!0}})],Em.prototype,"colors",void 0),_([E({type:[String],json:{write:{isRequired:!0}}})],Em.prototype,"fields",void 0),_([E({type:String,json:{write:!0}})],Em.prototype,"normalizeField",void 0),_([E({type:[Jqe],json:{read:!1}})],Em.prototype,"series",void 0),_([E({type:String,json:{write:!0}})],Em.prototype,"tooltipField",void 0),Em=Q9=_([ue("esri.popup.content.support.ChartMediaInfoValue")],Em);const Qqe=Em;let pS=class extends dW{constructor(e){super(e),this.type=null,this.value=void 0}};_([E({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],pS.prototype,"type",void 0),_([E({type:Qqe,json:{write:{isRequired:!0}}})],pS.prototype,"value",void 0),pS=_([ue("esri.popup.content.mixins.ChartMediaInfo")],pS);const zO=pS,UO=Il()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var e7;let PM=e7=class extends zO{constructor(t){super(t),this.type="bar-chart"}clone(){return new e7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:UO.write,isRequired:!0}}})],PM.prototype,"type",void 0),PM=e7=_([ue("esri.popup.content.BarChartMediaInfo")],PM);const Jye=PM;var t7;let RM=t7=class extends zO{constructor(t){super(t),this.type="column-chart"}clone(){return new t7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:UO.write,isRequired:!0}}})],RM.prototype,"type",void 0),RM=t7=_([ue("esri.popup.content.ColumnChartMediaInfo")],RM);const Qye=RM;var n7;let mS=n7=class extends qt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new n7({linkURL:this.linkURL,sourceURL:this.sourceURL})}};_([E({type:String,json:{write:!0}})],mS.prototype,"linkURL",void 0),_([E({type:String,json:{write:{isRequired:!0}}})],mS.prototype,"sourceURL",void 0),mS=n7=_([ue("esri.popup.content.support.ImageMediaInfoValue")],mS);const eKe=mS;var r7;let q_=r7=class extends dW{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new r7({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};_([E({type:Number,json:{write:!0}})],q_.prototype,"refreshInterval",void 0),_([E({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],q_.prototype,"type",void 0),_([E({type:eKe,json:{write:{isRequired:!0}}})],q_.prototype,"value",void 0),q_=r7=_([ue("esri.popup.content.ImageMediaInfo")],q_);const e1e=q_;var i7;let CM=i7=class extends zO{constructor(t){super(t),this.type="line-chart"}clone(){return new i7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:UO.write,isRequired:!0}}})],CM.prototype,"type",void 0),CM=i7=_([ue("esri.popup.content.LineChartMediaInfo")],CM);const t1e=CM;var s7;let MM=s7=class extends zO{constructor(t){super(t),this.type="pie-chart"}clone(){return new s7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};_([E({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:UO.write,isRequired:!0}}})],MM.prototype,"type",void 0),MM=s7=_([ue("esri.popup.content.PieChartMediaInfo")],MM);const n1e=MM,o7={base:dW,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Jye,"column-chart":Qye,"line-chart":t1e,"pie-chart":n1e,image:e1e}};var a7;let Fu=a7=class extends Tp{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?e1e.fromJSON(e):e.type==="barchart"?Jye.fromJSON(e):e.type==="columnchart"?Qye.fromJSON(e):e.type==="linechart"?t1e.fromJSON(e):e.type==="piechart"?n1e.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(n=>n.toJSON())}clone(){return new a7(Ze({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};_([E()],Fu.prototype,"activeMediaInfoIndex",void 0),_([E({type:Object,json:{write:!0}})],Fu.prototype,"attributes",void 0),_([E({type:String,json:{write:!0}})],Fu.prototype,"description",void 0),_([E({types:[o7]})],Fu.prototype,"mediaInfos",void 0),_([lr("mediaInfos")],Fu.prototype,"readMediaInfos",null),_([Zn("mediaInfos")],Fu.prototype,"writeMediaInfos",null),_([E({type:String,json:{write:!0}})],Fu.prototype,"title",void 0),_([E({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Fu.prototype,"type",void 0),Fu=a7=_([ue("esri.popup.content.MediaContent")],Fu);const Kk=Fu;var l7;let gS=l7=class extends qt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new l7({field:this.field,order:this.order})}};_([E({type:String,json:{write:!0}})],gS.prototype,"field",void 0),_([E({type:["asc","desc"],json:{write:!0}})],gS.prototype,"order",void 0),gS=l7=_([ue("esri.popup.support.RelatedRecordsInfoFieldOrder")],gS);const r1e=gS;let Wh=class extends mo(Tp){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};_([E({type:String,json:{write:!0}})],Wh.prototype,"description",void 0),_([E({type:Number,json:{type:Lr,write:!0}})],Wh.prototype,"displayCount",void 0),_([E({type:["list"],json:{write:{isRequired:!0}}})],Wh.prototype,"displayType",void 0),_([E({type:[r1e],json:{write:!0}})],Wh.prototype,"orderByFields",void 0),_([E({type:Number,json:{type:Lr,write:{isRequired:!0}}})],Wh.prototype,"relationshipId",void 0),_([E({type:String,json:{write:!0}})],Wh.prototype,"title",void 0),_([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Wh.prototype,"type",void 0),Wh=_([ue("esri.popup.content.RelationshipContent")],Wh);const Yk=Wh;var c7;let yS=c7=class extends Tp{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new c7({text:this.text})}};_([E({type:String,json:{write:!0}})],yS.prototype,"text",void 0),_([E({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],yS.prototype,"type",void 0),yS=c7=_([ue("esri.popup.content.TextContent")],yS);const Xk=yS;let _f=class extends mo(qt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};_([E({type:String,json:{write:!0}})],_f.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],_f.prototype,"description",void 0),_([E({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],_f.prototype,"type",void 0),_([E({type:Number,json:{type:Lr,write:!0}})],_f.prototype,"associatedNetworkSourceId",void 0),_([E({type:Number,json:{type:Lr,write:!0}})],_f.prototype,"associatedAssetGroup",void 0),_([E({type:Number,json:{type:Lr,write:!0}})],_f.prototype,"associatedAssetType",void 0),_f=_([ue("esri.popup.support.UtilityNetworkAssociationType")],_f);const tKe=_f;let Sm=class extends mo(Tp){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};_([E({type:String,json:{write:!0}})],Sm.prototype,"description",void 0),_([E({type:Number,json:{type:Lr,write:!0}})],Sm.prototype,"displayCount",void 0),_([E({type:String,json:{write:!0}})],Sm.prototype,"title",void 0),_([E({type:[tKe],json:{write:!0}})],Sm.prototype,"associationTypes",void 0),_([pn({utilityNetworkAssociations:"utility-network-associations"})],Sm.prototype,"type",void 0),Sm=_([ue("esri.popup.content.UtilityNetworkAssociationsContent")],Sm);const fW=Sm,nKe={base:null,key:"type",typeMap:{attachment:Hk,media:Kk,text:Xk,expression:FO,field:qk,relationship:Yk,utilityNetworkAssociations:fW}},rKe={base:null,key:"type",typeMap:{attachment:Hk,media:Kk,text:Xk,expression:FO,field:qk,relationship:Yk}};var u7;let ey=u7=class extends qt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new u7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};_([E({type:String,json:{write:!0}})],ey.prototype,"name",void 0),_([E({type:String,json:{write:!0}})],ey.prototype,"title",void 0),_([E({type:String,json:{write:!0}})],ey.prototype,"expression",void 0),_([E({type:["string","number"],json:{write:!0}})],ey.prototype,"returnType",void 0),ey=u7=_([ue("esri.popup.ExpressionInfo")],ey);const iKe=ey;var h7;let vS=h7=class extends qt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new h7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};_([E({type:Boolean,json:{write:!0}})],vS.prototype,"returnTopmostRaster",void 0),_([E({type:Boolean,json:{write:!0}})],vS.prototype,"showNoDataRecords",void 0),vS=h7=_([ue("esri.popup.LayerOptions")],vS);const sKe=vS;var d7;let _S=d7=class extends qt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new d7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ze(this.orderByFields):null})}};_([E({type:Boolean,json:{write:!0}})],_S.prototype,"showRelatedRecords",void 0),_([E({type:[r1e],json:{write:!0}})],_S.prototype,"orderByFields",void 0),_S=d7=_([ue("esri.popup.RelatedRecordsInfo")],_S);const une=_S;var f7;let Nc=f7=class extends DB(Kt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new f7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};_([E()],Nc.prototype,"active",void 0),_([E()],Nc.prototype,"className",void 0),_([E()],Nc.prototype,"disabled",void 0),_([E()],Nc.prototype,"icon",void 0),_([E()],Nc.prototype,"id",void 0),_([E()],Nc.prototype,"indicator",void 0),_([E()],Nc.prototype,"title",void 0),_([E()],Nc.prototype,"type",void 0),_([E()],Nc.prototype,"visible",void 0),Nc=f7=_([ue("esri.support.actions.ActionBase")],Nc);const pW=Nc;var p7;let NM=p7=class extends pW{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new p7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};_([E()],NM.prototype,"image",void 0),NM=p7=_([ue("esri.support.actions.ActionButton")],NM);const oKe=NM;var m7;let xS=m7=class extends pW{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new m7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};_([E()],xS.prototype,"image",void 0),_([E()],xS.prototype,"value",void 0),xS=m7=_([ue("esri.support.actions.ActionToggle")],xS);const aKe=xS,NE="relationships/",hne="expression/",lKe=Ot.ofType({key:"type",defaultKeyValue:"button",base:pW,typeMap:{button:oKe,toggle:aKe}}),cKe={base:Tp,key:"type",typeMap:{media:Kk,custom:Bqe,text:Xk,attachments:Hk,fields:qk,expression:FO,relationship:Yk,utilityNetworkAssociations:fW}},i1e=new Set(["attachments","fields","media","text","expression","relationship"]),uKe=new Set([...i1e,"utility-network-associations"]);let gs=class extends mo(qt){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(n=>Lg(cKe,n)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||pa(e)?e:(Tt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeWebSceneContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeWebMapContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeFieldInfos(e,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:a,...l}=i||{};if(e){const c=o?o.filter(h=>h.type==="fields"):[],u=c.length&&c.every(h=>h.fieldInfos?.length);n.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(l);return u&&(f.visible=!1),f})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,n,l)}writeLayerOptions(e,n,r,i){n[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,n){n.title=e||""}async collectRequiredFields(e,n,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,n,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Bk(e,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,n){const r=new Set;return await this.collectRequiredFields(r,e,n),[...r].sort()}_writePopupTemplateContent(e,n,r){typeof e!="string"?Array.isArray(e)&&(n.popupElements=e.filter(i=>r?.origin==="web-scene"?i1e.has(i.type):uKe.has(i.type)).map(i=>i?.toJSON(r)),n.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(n):i.type==="media"?this._writeMediaContent(i,n):i.type==="text"?this._writeTextContent(i,n):i.type==="relationship"&&this._writeRelationshipContent(i,n)})):n.description=e}_writeFieldsContent(e,n,r){const i=e.fieldInfos;if(!Array.isArray(i)||!i.length)return;const s=n.fieldInfos;if(Array.isArray(s))for(const o of i){const a=s.find(l=>l.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());a?a.visible=!0:s.push(o.toJSON(r))}else n.fieldInfos=i.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,n){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],i=[...n.relatedRecordsInfo?.orderByFields||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...i?.length&&{orderByFields:i}}}_writeTextContent(e,n){!n.description&&e.text&&(n.description=e.text)}_writeMediaContent(e,n){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=Ze(e.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(e,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),Kk.fromJSON(s)):s.type==="text"?(s.text||!e||i.description||(s.text=e,i.description=!0),Xk.fromJSON(s)):s.type==="attachments"?Hk.fromJSON(s):s.type==="fields"?qk.fromJSON(s):s.type==="expression"?FO.fromJSON(s):s.type==="relationship"?Yk.fromJSON(s):s.type==="utilityNetworkAssociations"?fW.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:n,order:r}=e;if(!n?.startsWith(NE))return null;const i=n.replace(NE,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return!Number.isNaN(s)&&o?Yk.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,n){const{order:r,field:i}=e;return{field:`${NE}${n}/${i}`,order:r}}_readPopupInfo({description:e,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];e?s.push(new Xk({text:e})):s.push(new qk),Array.isArray(n)&&n.length&&s.push(Kk.fromJSON({mediaInfos:n})),r&&s.push(Hk.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&a?.length&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const n=e?.type;if(n==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(n==="custom")return e.outFields||[];if(n==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(n==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(e.text):n==="relationship"||n==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:n,title:r,value:i}=e,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,n){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,n,r,i){i&&await Promise.all(i.map(s=>U1(e,n,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:n,visible:r})=>!(r!==void 0&&!r||!n||n.startsWith(NE)||n.startsWith(hne))).map(n=>n.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:n,title:r,type:i}=e,s=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return Uqe(e).filter(n=>!(n.startsWith(NE)||n.startsWith(hne)))}};_([E({type:lKe})],gs.prototype,"actions",void 0),_([E()],gs.prototype,"content",void 0),_([Gs("content")],gs.prototype,"castContent",null),_([lr("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],gs.prototype,"readContent",null),_([Zn("web-scene","content",{popupElements:{type:Ot.ofType(rKe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(o7)},description:{type:String},relatedRecordsInfo:{type:une}})],gs.prototype,"writeWebSceneContent",null),_([Zn("content",{popupElements:{type:Ot.ofType(nKe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(o7)},description:{type:String},relatedRecordsInfo:{type:une}})],gs.prototype,"writeWebMapContent",null),_([E({type:[iKe],json:{write:!0}})],gs.prototype,"expressionInfos",void 0),_([E({type:[Zye]})],gs.prototype,"fieldInfos",void 0),_([Zn("fieldInfos")],gs.prototype,"writeFieldInfos",null),_([E({type:sKe})],gs.prototype,"layerOptions",void 0),_([Zn("layerOptions")],gs.prototype,"writeLayerOptions",null),_([E({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],gs.prototype,"lastEditInfoEnabled",void 0),_([E()],gs.prototype,"outFields",void 0),_([E()],gs.prototype,"overwriteActions",void 0),_([E()],gs.prototype,"returnGeometry",void 0),_([E({json:{type:String}})],gs.prototype,"title",void 0),_([Zn("title")],gs.prototype,"writeTitle",null),gs=_([ue("esri.PopupTemplate")],gs);const hKe=gs,s1e=Symbol("idFieldsProviderSymbol");function dKe(t){return!!t&&s1e in t}function dne(t){return dKe(t)?t[s1e]:void 0}const o1e=Symbol("popupProvider");function VMt(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function fKe(t){return!!t&&o1e in t}function pKe(t){return fKe(t)?t[o1e]:null}function zMt(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const n=[];for(const r of e.fieldNames)n.push(t.attributes[r]??null);return JSON.stringify(n)}}}function fne(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const n=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(n)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const pne=new Ws({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let mKe=0,hs=class extends qt{constructor(e){super(e),this.id="sym"+mKe++,this.type=null,this.color=new Yn([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};_([E({type:pne.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:pne.write,isRequired:!0}}})],hs.prototype,"type",void 0),_([E({type:Yn,json:{write:{allowNull:!0}}})],hs.prototype,"color",void 0),_([lr("color")],hs.prototype,"readColor",null),hs=_([ue("esri.symbols.Symbol")],hs);var g7;let ll=g7=class extends hs{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(i=>{const s=i.valueExpressionInfo;return s?U1(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new g7({data:Ze(this.data)})}hash(){return $de(JSON.stringify(this.data)).toString()}};_([E({json:{write:!1}})],ll.prototype,"color",void 0),_([E({json:{write:!0}})],ll.prototype,"data",void 0),_([lr("data",["symbol"])],ll.prototype,"readData",null),_([Zn("data",{})],ll.prototype,"writeData",null),_([pn({CIMSymbolReference:"cim"},{readOnly:!0})],ll.prototype,"type",void 0),ll=g7=_([ue("esri.symbols.CIMSymbol")],ll);let Ca=class extends qt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,n,r){e||(n[r]=e)}};_([E({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Ca.prototype,"enabled",void 0),_([Zn("enabled")],Ca.prototype,"writeEnabled",null),_([E({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Ca.prototype,"type",void 0),Ca=_([ue("esri.symbols.Symbol3DLayer")],Ca);function gKe(t,e){const n=e.transparency!=null?xge(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Yn([r[0]||0,r[1]||0,r[2]||0,n]):null}function yKe(t,e){e.color=t.toJSON().slice(0,3);const n=_ge(t.a);n!==0&&(e.transparency=n)}function r0(t){return{type:Yn,nonNullable:t?.nonNullable,json:{type:[Lr],default:null,read:{source:["color","transparency"],reader:gKe},write:{target:{color:{type:[Lr],isRequired:t?.colorRequiredOnWrite},transparency:{type:Lr}},writer:yKe}}}}const Od={type:Number,cast:Ei,json:{write:!0}};function BMt(t){return t==="emissive"?0:1}let ty=class extends qt{constructor(e){super(e),this.color=new Yn([0,0,0,1]),this.extensionLength=0,this.size=z1(1)}clone(){}cloneProperties(){return{color:Ze(this.color),size:this.size,extensionLength:this.extensionLength}}};_([E({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],ty.prototype,"type",void 0),_([E(r0({colorRequiredOnWrite:!0}))],ty.prototype,"color",void 0),_([E({...Od,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],ty.prototype,"extensionLength",void 0),_([E(Od)],ty.prototype,"size",void 0),ty=_([ue("esri.symbols.edges.Edges3D")],ty);const mW=ty;var y7;let OM=y7=class extends mW{constructor(t){super(t),this.type="sketch"}clone(){return new y7(this.cloneProperties())}};_([pn({sketch:"sketch"},{readOnly:!0})],OM.prototype,"type",void 0),OM=y7=_([ue("esri.symbols.edges.SketchEdges3D")],OM);const vKe=OM;var v7;let LM=v7=class extends mW{constructor(t){super(t),this.type="solid"}clone(){return new v7(this.cloneProperties())}};_([pn({solid:"solid"},{readOnly:!0})],LM.prototype,"type",void 0),LM=v7=_([ue("esri.symbols.edges.SolidEdges3D")],LM);const _Ke=LM,a1e={types:{key:"type",base:mW,typeMap:{solid:_Ke,sketch:vKe}},json:{write:!0}};var _7;let yx=_7=class extends qt{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new _7(t)}};_([E({json:{write:!1}})],yx.prototype,"strength",void 0),_([E({json:{write:!1}})],yx.prototype,"source",void 0),yx=_7=_([ue("esri.symbols.support.Symbol3DEmissive")],yx);var x7;let oc=x7=class extends qt{constructor(t){super(t),this.color=null,this.emissive=new yx({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new x7(t)}};_([E(r0())],oc.prototype,"color",void 0),_([E({type:yx,json:{write:!1}})],oc.prototype,"emissive",void 0),oc=x7=_([ue("esri.symbols.support.Symbol3DMaterial")],oc);var w7,ww;let If=(ww=class extends Ca{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new w7({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},w7=ww,ww);_([pn({Extrude:"extrude"},{readOnly:!0})],If.prototype,"type",void 0),_([E({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],If.prototype,"size",void 0),_([E({type:oc,json:{write:!0}})],If.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],If.prototype,"castShadows",void 0),_([E(a1e)],If.prototype,"edges",void 0),If=w7=_([ue("esri.symbols.ExtrudeSymbol3DLayer")],If);let yT=class extends qt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],yT.prototype,"type",void 0),yT=_([ue("esri.symbols.patterns.LinePattern3D")],yT);const xKe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var b7;const wKe=Il()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let $y=b7=class extends yT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new b7(t)}};_([E({type:["style"],json:{write:{isRequired:!0}}})],$y.prototype,"type",void 0),_([pn(wKe),E({type:xKe,json:{write:{isRequired:!0}}})],$y.prototype,"style",void 0),$y=b7=_([ue("esri.symbols.patterns.LineStylePattern3D")],$y);let vT=class extends qt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],vT.prototype,"type",void 0),vT=_([ue("esri.symbols.patterns.Pattern3D")],vT);const bKe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var E7;let vx=E7=class extends vT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new E7({style:this.style})}};_([E({type:["style"],json:{write:{isRequired:!0}}})],vx.prototype,"type",void 0),_([E({type:bKe,json:{read:!0,write:{isRequired:!0}}})],vx.prototype,"style",void 0),vx=E7=_([ue("esri.symbols.patterns.StylePattern3D")],vx);const EKe={types:{key:"type",base:vT,typeMap:{style:vx}},json:{write:!0}},l1e={types:{key:"type",base:yT,typeMap:{style:$y}},json:{write:!0}},_T=new Yn("white"),SKe=new Yn([255,255,255,0]);function TKe(t){return t.r===0&&t.g===0&&t.b===0}var S7;let xT=S7=class extends oc{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new S7(t)}};_([pn({multiply:"multiply",replace:"replace",tint:"tint"})],xT.prototype,"colorMixMode",void 0),xT=S7=_([ue("esri.symbols.support.Symbol3DFillMaterial")],xT);function gW(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function kKe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function AKe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,v,x){return[t,e,n,r,i,s,o,a,l,c,u,h,f,g,v,x]}const IKe=gW();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:IKe,clone:kKe,create:gW,fromValues:AKe},Symbol.toStringTag,{value:"Module"}));function PKe(t){return t<=Pde?new Array(t).fill(0):new Float64Array(t)}function KMt(t){return(CDe(t)?t.byteLength/8:t.length)<=Pde?Array.from(t):new Float64Array(t)}function YMt(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}function XMt(t){return[...t]}function ZMt(t){const e=gW();for(let n=0;n<16;++n)e[n]=t[n];return e}function wI(t=NKe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function yW(t,e,n,r,i,s,o=wI()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function JMt(t,e=wI()){return RKe(t,0,t.length/3,e)}function RKe(t,e,n,r=wI()){return c1e(r,T7),CKe(r,t,e,n),r}function QMt(t,e=PKe(24)){const[n,r,i,s,o,a]=t;return e[0]=n,e[1]=r,e[2]=i,e[3]=n,e[4]=r,e[5]=a,e[6]=n,e[7]=o,e[8]=i,e[9]=n,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=i,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=i,e[21]=s,e[22]=o,e[23]=a,e}function e3t(t,e){const n=isFinite(t[2])||isFinite(t[5]);return new $n(n?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function t3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function n3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function r3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function CKe(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<r;u++)i=Math.min(i,e[n+3*u]),s=Math.min(s,e[n+3*u+1]),o=Math.min(o,e[n+3*u+2]),a=Math.max(a,e[n+3*u]),l=Math.max(l,e[n+3*u+1]),c=Math.max(c,e[n+3*u+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function i3t(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(n)for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function s3t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function bI(t){return t[0]>=t[3]?0:t[3]-t[0]}function EI(t){return t[1]>=t[4]?0:t[4]-t[1]}function SI(t){return t[2]>=t[5]?0:t[5]-t[2]}function o3t(t){const e=bI(t),n=SI(t),r=EI(t);return Math.sqrt(e*e+n*n+r*r)}function a3t(t,e=[0,0,0]){return e[0]=t[0]+bI(t)/2,e[1]=t[1]+EI(t)/2,e[2]=t[2]+SI(t)/2,e}function l3t(t,e=[0,0,0]){return e[0]=bI(t),e[1]=EI(t),e[2]=SI(t),e}function c3t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function MKe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function u3t(t,e){return e==null||MKe(t,e)}function h3t(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function d3t(t,e,n=t){const r=t[0]+bI(t)/2,i=t[1]+EI(t)/2,s=t[2]+SI(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function f3t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function p3t(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function m3t(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function c1e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function g3t(t){return t?c1e(t,T7):wI(T7)}function y3t(t,e=gl()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function v3t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function _3t(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=i,t[5]=Number.POSITIVE_INFINITY,t}function mne(t){return t.length===6}function x3t(t){return bI(t)===0&&EI(t)===0&&SI(t)===0}function w3t(t,e,n){if(t==null||e==null)return t===e;if(!mne(t)||!mne(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const T7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],NKe=[0,0,0,0,0,0];wI();function b3t(t,{isPrimitive:e,width:n,depth:r,height:i}){const s=e?10:1;if(n==null&&i==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=cb(n,r,i);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const OKe=yW(-.5,-.5,-.5,.5,.5,.5),LKe=yW(-.5,-.5,0,.5,.5,1),DKe=yW(-.5,-.5,0,.5,.5,.5);function E3t(t){switch(t){case"sphere":case"cube":case"diamond":return OKe;case"cylinder":case"cone":case"inverted-cone":return LKe;case"tetrahedron":return DKe;default:return}}const vW=["butt","square","round"],$Ke=[...vW,"none"],u1e=["miter","bevel","round"];var k7;let ny=k7=class extends qt{constructor(t){super(t),this.color=new Yn([0,0,0,1]),this.size=z1(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new k7(t)}};_([E(r0({colorRequiredOnWrite:!0}))],ny.prototype,"color",void 0),_([E({...Od,json:{write:{isRequired:!0}}})],ny.prototype,"size",void 0),_([E(l1e)],ny.prototype,"pattern",void 0),_([E({type:vW,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],ny.prototype,"patternCap",void 0),ny=k7=_([ue("esri.symbols.support.Symbol3DOutline")],ny);var DM,bw;let ql=(bw=class extends Ca{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new DM(e)}static fromSimpleFillSymbol(e){const n=e.outline&&e.outline.style&&e.outline.style!=="solid"?new $y({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??_T).clone(),pattern:n};return n&&e.outline?.cap&&(r.patternCap=e.outline.cap),new DM({material:new xT({color:(e.color??SKe).clone()}),pattern:e.style&&e.style!=="solid"?new vx({style:e.style}):null,outline:r})}},DM=bw,bw);_([pn({Fill:"fill"},{readOnly:!0})],ql.prototype,"type",void 0),_([E({type:xT,json:{write:!0}})],ql.prototype,"material",void 0),_([E(EKe)],ql.prototype,"pattern",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ql.prototype,"castShadows",void 0),_([E({type:ny,json:{write:!0}})],ql.prototype,"outline",void 0),_([E(a1e)],ql.prototype,"edges",void 0),ql=DM=_([ue("esri.symbols.FillSymbol3DLayer")],ql);var A7;const jKe=Il()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let ry=A7=class extends qt{constructor(t){super(t)}readHref(t,e,n){return t?Q2(t,n):e.dataURI}writeHref(t,e,n,r){t&&(iv(t)?e.dataURI=t:(e.href=a2(t,r),_l(e.href)&&(e.href=vg(e.href))))}clone(){return new A7({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};_([E({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],ry.prototype,"href",void 0),_([lr("href")],ry.prototype,"readHref",null),_([Zn("href",{href:{type:String},dataURI:{type:String}})],ry.prototype,"writeHref",null),_([pn(jKe)],ry.prototype,"primitive",void 0),ry=A7=_([ue("esri.symbols.support.IconSymbol3DLayerResource")],ry);const S3t="circle";let $M=class extends mo(qt){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};_([E({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],$M.prototype,"mode",void 0),$M=_([ue("esri.symbols.support.OccludedVisibility")],$M);const h1e=$M;var I7;let _x=I7=class extends Kt{constructor(t){super(t),this.x=0,this.y=0}clone(){return new I7({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};_([E({type:Number})],_x.prototype,"x",void 0),_([E({type:Number})],_x.prototype,"y",void 0),_x=I7=_([ue("esri.symbols.support.Symbol3DAnchorPosition2D")],_x);var P7;let wS=P7=class extends qt{constructor(t){super(t),this.color=new Yn([0,0,0,1]),this.size=z1(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new P7(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};_([E(r0({colorRequiredOnWrite:!0}))],wS.prototype,"color",void 0),_([E({...Od,json:{write:{isRequired:!0}}})],wS.prototype,"size",void 0),wS=P7=_([ue("esri.symbols.support.Symbol3DIconOutline")],wS);var K_,Ew;let eo=(Ew=class extends Ca{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new K_({anchor:this.anchor,anchorPosition:Ze(this.anchorPosition),enabled:this.enabled,material:Ze(this.material),outline:Ze(this.outline),resource:Ze(this.resource),angle:this.angle,size:this.size,occludedVisibility:Ze(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const n=e.color||_T,r=gne(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||_T).clone()}:null;return new K_({size:e.size,angle:e.angle,resource:{primitive:VKe(()=>Tt.getLogger(this.prototype),e.style)},material:{color:n},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const n=!e.color||TKe(e.color)?_T:e.color,r=gne(e);return new K_({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:n.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new K_({resource:{href:Kde({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},K_=Ew,Ew);function gne(t){const e="width"in t?t.width:t.size,n="height"in t?t.height:t.size,r=yne(t.xoffset),i=yne(t.yoffset);return(r||i)&&e&&n?{x:-r/e,y:i/n}:null}function yne(t){return isFinite(t)?t:0}_([E({type:oc,json:{write:!0}})],eo.prototype,"material",void 0),_([E({type:ry,json:{write:!0}})],eo.prototype,"resource",void 0),_([pn({Icon:"icon"},{readOnly:!0})],eo.prototype,"type",void 0),_([E({...Od,json:{write:{isRequired:!0}}})],eo.prototype,"size",void 0),_([pn({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],eo.prototype,"anchor",void 0),_([E({type:_x,json:{type:[Number],read:{reader:t=>new _x({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],eo.prototype,"anchorPosition",void 0),_([E({type:wS,json:{write:!0}})],eo.prototype,"outline",void 0),_([E({type:Number,json:{write:!0,default:0}})],eo.prototype,"angle",void 0),_([E({type:h1e})],eo.prototype,"occludedVisibility",void 0),eo=K_=_([ue("esri.symbols.IconSymbol3DLayer")],eo);const FKe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function VKe(t,e){return FKe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const zKe=["begin","end","begin-end"],d1e=["arrow","circle","square","diamond","cross","x"];let Df=class extends mo(qt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};_([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Df.prototype,"type",void 0),_([E({type:zKe,json:{default:"begin-end",write:!0}})],Df.prototype,"placement",void 0),_([E({type:d1e,json:{default:"arrow",write:!0}})],Df.prototype,"style",void 0),_([E({type:Yn,json:{type:[Lr],default:null,write:!0}})],Df.prototype,"color",void 0),Df=_([ue("esri.symbols.LineStyleMarker3D")],Df);var jM,Sw;let il=(Sw=class extends Ca{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=z1(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new jM(e)}static fromSimpleLineSymbol(e){const n={enabled:!0,size:e.width??z1(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new $y({style:e.style}):null,material:new oc({color:(e.color||_T).clone()}),marker:e.marker?new Df({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new jM(n)}},jM=Sw,Sw);_([E({type:oc,json:{write:!0}})],il.prototype,"material",void 0),_([pn({Line:"line"},{readOnly:!0})],il.prototype,"type",void 0),_([E({type:u1e,json:{write:!0,default:"miter"}})],il.prototype,"join",void 0),_([E({type:vW,json:{write:!0,default:"butt"}})],il.prototype,"cap",void 0),_([E({...Od,json:{write:{isRequired:!0}}})],il.prototype,"size",void 0),_([E(l1e)],il.prototype,"pattern",void 0),_([E({types:{key:"type",base:Df,typeMap:{style:Df}},json:{write:!0}})],il.prototype,"marker",void 0),il=jM=_([ue("esri.symbols.LineSymbol3DLayer")],il);var R7;const UKe=Il()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let bS=R7=class extends qt{clone(){return new R7({href:this.href,primitive:this.primitive})}};_([E({type:String,json:{read:uO,write:l2}})],bS.prototype,"href",void 0),_([pn(UKe)],bS.prototype,"primitive",void 0),bS=R7=_([ue("esri.symbols.support.ObjectSymbol3DLayerResource")],bS);const A3t="sphere";var C7;let wy=C7=class extends Kt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new C7({x:this.x,y:this.y,z:this.z})}};_([E({type:Number})],wy.prototype,"x",void 0),_([E({type:Number})],wy.prototype,"y",void 0),_([E({type:Number})],wy.prototype,"z",void 0),wy=C7=_([ue("esri.symbols.support.Symbol3DAnchorPosition3D")],wy);var M7,Tw;let Qs=(Tw=class extends Ca{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new M7({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},M7=Tw,Tw);_([E({type:oc,json:{write:!0}})],Qs.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Qs.prototype,"castShadows",void 0),_([E({type:bS,json:{write:!0}})],Qs.prototype,"resource",void 0),_([pn({Object:"object"},{readOnly:!0})],Qs.prototype,"type",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"width",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"height",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"depth",void 0),_([pn({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],Qs.prototype,"anchor",void 0),_([E({type:wy,json:{type:[Number],read:{reader:t=>new wy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Qs.prototype,"anchorPosition",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"heading",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"tilt",void 0),_([E({type:Number,json:{write:!0}})],Qs.prototype,"roll",void 0),_([E({readOnly:!0})],Qs.prototype,"isPrimitive",null),Qs=M7=_([ue("esri.symbols.ObjectSymbol3DLayer")],Qs);var N7,kw;let Eo=(kw=class extends Ca{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,n){return e??(n.height==null&&n.size!=null?n.size:void 0)}readHeight(e,n){return e??(n.width==null&&n.size!=null?n.size:void 0)}clone(){return new N7({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},N7=kw,kw);_([E({type:oc,json:{write:!0}})],Eo.prototype,"material",void 0),_([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Eo.prototype,"castShadows",void 0),_([pn({Path:"path"},{readOnly:!0})],Eo.prototype,"type",void 0),_([E({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],Eo.prototype,"profile",void 0),_([E({type:u1e,nonNullable:!0,json:{write:!0,default:"miter"}})],Eo.prototype,"join",void 0),_([E({type:$Ke,nonNullable:!0,json:{write:!0,default:"butt"}})],Eo.prototype,"cap",void 0),_([E({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Eo.prototype,"width",void 0),_([lr("width",["width","size","height"])],Eo.prototype,"readWidth",null),_([E({type:Number,json:{write:!0}})],Eo.prototype,"height",void 0),_([lr("height",["height","size","width"])],Eo.prototype,"readHeight",null),_([E({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],Eo.prototype,"anchor",void 0),_([E({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],Eo.prototype,"profileRotation",void 0),Eo=N7=_([ue("esri.symbols.PathSymbol3DLayer")],Eo);const GKe=["none","underline","line-through"],BKe=["normal","italic","oblique"],WKe=["normal","lighter","bold","bolder"],f1e={type:Number,cast:t=>{const e=Ql(t);return e===0?1:hu(e,.1,4)},nonNullable:!0},HKe=["left","right","center"],qKe=["baseline","top","middle","bottom"],p1e={type:HKe,nonNullable:!0},m1e={type:qKe,nonNullable:!0},I3t=8;var O7;let Fc=O7=class extends qt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ei(t)}clone(){return new O7({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};_([E({type:GKe,json:{default:"none",write:!0}})],Fc.prototype,"decoration",void 0),_([E({type:String,json:{write:!0}})],Fc.prototype,"family",void 0),_([E({type:Number,json:{write:{overridePolicy:(t,e,n)=>({enabled:!n||!n.textSymbol3D})}}})],Fc.prototype,"size",void 0),_([Gs("size")],Fc.prototype,"castSize",null),_([E({type:BKe,json:{default:"normal",write:!0}})],Fc.prototype,"style",void 0),_([E({type:WKe,json:{default:"normal",write:!0}})],Fc.prototype,"weight",void 0),Fc=O7=_([ue("esri.symbols.Font")],Fc);var L7;let xx=L7=class extends qt{constructor(){super(...arguments),this.color=new Yn([0,0,0,1]),this.size=0}clone(){const t={color:Ze(this.color),size:this.size};return new L7(t)}};_([E(r0())],xx.prototype,"color",void 0),_([E(Od)],xx.prototype,"size",void 0),xx=L7=_([ue("esri.symbols.support.Symbol3DHalo")],xx);let wT=class extends mo(qt){constructor(e){super(e),this.color=null}};_([E(r0())],wT.prototype,"color",void 0),wT=_([ue("esri.symbols.support.Symbol3DTextBackground")],wT);var FM,Aw;let _s=(Aw=class extends Ca{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,n,r,i){const s={...i,textSymbol3D:!0};n.font=e.write({},s),delete n.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new FM({enabled:this.enabled,font:Ze(this.font),halo:Ze(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ze(this.background),occludedVisibility:Ze(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new FM({font:e.font!=null?e.font.clone():new Fc,halo:KKe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new oc({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new wT({color:e.backgroundColor.clone()}):null})}},FM=Aw,Aw);function KKe(t,e){return t&&e!=null&&e>0?new xx({color:Ze(t),size:e}):null}_([E({type:Fc,json:{write:!0}})],_s.prototype,"font",null),_([Zn("font")],_s.prototype,"writeFont",null),_([E({type:xx,json:{write:!0}})],_s.prototype,"halo",void 0),_([E({...p1e,json:{default:"center",write:!0}})],_s.prototype,"horizontalAlignment",void 0),_([E({...f1e,json:{default:1,write:!0}})],_s.prototype,"lineHeight",void 0),_([E({type:oc,json:{write:!0}})],_s.prototype,"material",void 0),_([E({type:wT,json:{write:!0}})],_s.prototype,"background",void 0),_([E(Od)],_s.prototype,"size",null),_([E({type:String,json:{write:!0}})],_s.prototype,"text",void 0),_([pn({Text:"text"},{readOnly:!0})],_s.prototype,"type",void 0),_([E({...m1e,json:{default:"baseline",write:!0}})],_s.prototype,"verticalAlignment",void 0),_([E({type:h1e})],_s.prototype,"occludedVisibility",void 0),_s=FM=_([ue("esri.symbols.TextSymbol3DLayer")],_s);var D7,Iw;let Pf=(Iw=class extends Ca{constructor(e){super(e),this.color=$7.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new D7({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},D7=Iw,Iw);_([E({type:Yn,nonNullable:!0,json:{type:[Lr],write:(t,e,n)=>e[n]=t.toArray(1),default:()=>$7.clone(),defaultEquals:t=>t.toCss(!0)===$7.toCss(!0)}})],Pf.prototype,"color",void 0),_([pn({Water:"water"},{readOnly:!0})],Pf.prototype,"type",void 0),_([E({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Pf.prototype,"waterbodySize",void 0),_([E({type:Number,json:{write:!0,default:null}})],Pf.prototype,"waveDirection",void 0),_([E({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Pf.prototype,"waveStrength",void 0),Pf=D7=_([ue("esri.symbols.WaterSymbol3DLayer")],Pf);const $7=new Yn([0,119,190]);var j7;let $f=j7=class extends Kt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new j7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};_([E({type:String})],$f.prototype,"name",void 0),_([E({type:String})],$f.prototype,"styleUrl",void 0),_([E({type:String})],$f.prototype,"styleName",void 0),_([E({type:it})],$f.prototype,"portal",void 0),$f=j7=_([ue("esri.symbols.support.StyleOrigin")],$f);var F7;let bT=F7=class extends Kt{constructor(){super(...arguments),this.url=""}clone(){return new F7({url:this.url})}};_([E({type:String})],bT.prototype,"url",void 0),bT=F7=_([ue("esri.symbols.support.Thumbnail")],bT);const g1e={icon:eo,object:Qs,line:il,path:Eo,fill:ql,extrude:If,text:_s,water:Pf},YKe=Ot.ofType({base:Ca,key:"type",typeMap:g1e,errorContext:"symbol-layer"});let sl=class extends hs{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=n?.type,i=r||Ot;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&Tt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){xd(e,this._get("symbolLayers"))}readStyleOrigin(e,n,r){if(e.styleUrl&&e.name){const i=Q2(e.styleUrl,r);return new $f({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new $f({portal:r?.portal||it.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new Cd("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,n,r,i){if(e.styleUrl&&e.name){let s=a2(e.styleUrl,i);_l(s)&&(s=vg(s)),n.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&i?.portal&&!e6e(e.portal.restUrl,i.portal.restUrl)?i?.messages&&i.messages.push(new Cd("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Ca||e&&g1e[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};_([E({json:{read:!1,write:!1}})],sl.prototype,"color",null),_([E({type:YKe,nonNullable:!0,json:{write:!0}}),Gs(spe)],sl.prototype,"symbolLayers",null),_([E({type:$f})],sl.prototype,"styleOrigin",void 0),_([lr("styleOrigin")],sl.prototype,"readStyleOrigin",null),_([Zn("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],sl.prototype,"writeStyleOrigin",null),_([E({type:bT,json:{read:!1}})],sl.prototype,"thumbnail",void 0),_([E({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],sl.prototype,"type",void 0),sl=_([ue("esri.symbols.Symbol3D")],sl);let wx=class extends qt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};_([E({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],wx.prototype,"type",void 0),_([E({readOnly:!0})],wx.prototype,"visible",void 0),wx=_([ue("esri.symbols.callouts.Callout3D")],wx);var V7;let VM=V7=class extends qt{constructor(t){super(t),this.color=new Yn("white")}clone(){return new V7({color:Ze(this.color)})}};_([E(r0({colorRequiredOnWrite:!0}))],VM.prototype,"color",void 0),VM=V7=_([ue("esri.symbols.callouts.LineCallout3DBorder")],VM);const XKe=VM;var z7;let Rf=z7=class extends wx{constructor(t){super(t),this.type="line",this.color=new Yn([0,0,0,1]),this.size=z1(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new z7({color:Ze(this.color),size:this.size,border:Ze(this.border)})}};_([pn({line:"line"})],Rf.prototype,"type",void 0),_([E(r0({colorRequiredOnWrite:!0}))],Rf.prototype,"color",void 0),_([E({...Od,json:{write:{isRequired:!0}}})],Rf.prototype,"size",void 0),_([E({type:XKe,json:{write:!0}})],Rf.prototype,"border",void 0),_([E({readOnly:!0})],Rf.prototype,"visible",null),Rf=z7=_([ue("esri.symbols.callouts.LineCallout3D")],Rf);function _W(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function y1e(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!_W(t)}function M3t(t){return t.type==="point-3d"||t.type==="label-3d"}function N3t(t){return t.horizontalAlignment==="center"}const v1e={types:{key:"type",base:wx,typeMap:{line:Rf}},json:{write:!0}};var U7;let Gm=U7=class extends qt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new U7({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};_([E({...Od,json:{write:{isRequired:!0}}})],Gm.prototype,"screenLength",void 0),_([E({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Gm.prototype,"minWorldLength",void 0),_([E({type:Number,json:{write:!0}})],Gm.prototype,"maxWorldLength",void 0),Gm=U7=_([ue("esri.symbols.support.Symbol3DVerticalOffset")],Gm);var zM;const _1e=Ot.ofType({base:null,key:"type",typeMap:{text:_s}});let ed=zM=class extends sl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new _1e,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return y1e(this)}hasVisibleVerticalOffset(){return _W(this)}clone(){return new zM({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail),callout:Ze(this.callout),verticalOffset:Ze(this.verticalOffset)})}static fromTextSymbol(t){return new zM({symbolLayers:new Ot([_s.fromTextSymbol(t)])})}};_([E({type:Gm,json:{write:!0}})],ed.prototype,"verticalOffset",void 0),_([E(v1e)],ed.prototype,"callout",void 0),_([E({json:{read:!1,write:!1}})],ed.prototype,"styleOrigin",void 0),_([E({type:_1e})],ed.prototype,"symbolLayers",void 0),_([pn({LabelSymbol3D:"label-3d"},{readOnly:!0})],ed.prototype,"type",void 0),ed=zM=_([ue("esri.symbols.LabelSymbol3D")],ed);var UM;const x1e=Ot.ofType({base:null,key:"type",typeMap:{line:il,path:Eo}}),ZKe=Ot.ofType({base:null,key:"type",typeMap:{line:il,path:Eo}});let rg=UM=class extends sl{constructor(t){super(t),this.symbolLayers=new x1e,this.type="line-3d"}clone(){return new UM({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleLineSymbol(t){return new UM({symbolLayers:new Ot([il.fromSimpleLineSymbol(t)])})}};_([E({type:x1e,json:{type:ZKe}})],rg.prototype,"symbolLayers",void 0),_([pn({LineSymbol3D:"line-3d"},{readOnly:!0})],rg.prototype,"type",void 0),rg=UM=_([ue("esri.symbols.LineSymbol3D")],rg);var GM;const w1e=Ot.ofType({base:null,key:"type",typeMap:{fill:ql}});let jy=GM=class extends sl{constructor(t){super(t),this.symbolLayers=new w1e,this.type="mesh-3d"}clone(){return new GM({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleFillSymbol(t){return new GM({symbolLayers:new Ot([ql.fromSimpleFillSymbol(t)])})}};_([E({type:w1e})],jy.prototype,"symbolLayers",void 0),_([pn({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],jy.prototype,"type",void 0),jy=GM=_([ue("esri.symbols.MeshSymbol3D")],jy);let ES=class extends hs{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};_([pn({esriSLS:"simple-line"},{readOnly:!0})],ES.prototype,"type",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],ES.prototype,"width",void 0),ES=_([ue("esri.symbols.LineSymbol")],ES);var G7;let Hh=G7=class extends qt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,n,r){e[n]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,n,r){r?.origin==="web-map"||(e[n]=t)}clone(){return new G7({color:Ze(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};_([E({type:["begin","end","begin-end"],json:{write:!0}})],Hh.prototype,"placement",void 0),_([pn({"line-marker":"line-marker"},{readOnly:!0}),E({json:{origins:{"web-map":{write:!1}}}})],Hh.prototype,"type",void 0),_([E({type:d1e})],Hh.prototype,"style",void 0),_([Zn("style")],Hh.prototype,"writeStyle",null),_([E({type:Yn,value:null,json:{write:{allowNull:!0}}})],Hh.prototype,"color",null),_([lr("color")],Hh.prototype,"readColor",null),_([Zn("color")],Hh.prototype,"writeColor",null),Hh=G7=_([ue("esri.symbols.LineSymbolMarker")],Hh);const JKe=Hh;var B7;const G$=new Ws({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let ka=B7=class extends ES{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,n,r,i,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),n!=null&&(o.width=Ei(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=Ei(s)),o}clone(){return new B7({color:Ze(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};_([pn({esriSLS:"simple-line"},{readOnly:!0})],ka.prototype,"type",void 0),_([E({type:G$.apiValues,json:{read:G$.read,write:G$.write}})],ka.prototype,"style",void 0),_([E({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],ka.prototype,"cap",void 0),_([E({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],ka.prototype,"join",void 0),_([E({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":JKe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],ka.prototype,"marker",void 0),_([E({type:Number,json:{read:!1,write:!1}})],ka.prototype,"miterLimit",void 0),ka=B7=_([ue("esri.symbols.SimpleLineSymbol")],ka);let bx=class extends hs{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};_([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ka}},json:{default:null,write:!0}})],bx.prototype,"outline",void 0),_([E({type:["simple-fill","picture-fill"],readOnly:!0})],bx.prototype,"type",void 0),bx=_([ue("esri.symbols.FillSymbol")],bx);function QKe(t,e,n){return e.imageData?Kde({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):b1e(e.url,n)}function b1e(t,e){if(!_l(t)){const n=tYe(e);if(n)return eI(n,"images",t)}return Q2(t,e)}function eYe(t,e,n,r){if(iv(t)){const i=o2(t);if(!i)return;e.contentType=i.mediaType,e.imageData=i.data,n&&n.imageData===e.imageData&&n.url&&l2(n.url,e,"url",r)}else l2(t,e,"url",r)}const E1e={json:{read:{source:["imageData","url"],reader:QKe},write:{writer(t,e,n,r){eYe(t,e,this.source,r)}}}},S1e={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,n){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=b1e(e.url,n)),r}}}};function tYe(t){if(!t)return null;const{origin:e,layer:n}=t;if(e!=="service"&&e!=="portal-item")return null;const r=n?.type;return r==="feature"||r==="stream"?n.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var W7;let Qa=W7=class extends bx{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e&&(i.outline=e),n!=null&&(i.width=Ei(n)),r!=null&&(i.height=Ei(r)),i}clone(){const t=new W7({color:Ze(this.color),height:this.height,outline:Ze(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};_([pn({esriPFS:"picture-fill"},{readOnly:!0})],Qa.prototype,"type",void 0),_([E(E1e)],Qa.prototype,"url",void 0),_([E({type:Number,json:{write:!0}})],Qa.prototype,"xscale",void 0),_([E({type:Number,json:{write:!0}})],Qa.prototype,"yscale",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Qa.prototype,"width",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Qa.prototype,"height",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Qa.prototype,"xoffset",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Qa.prototype,"yoffset",void 0),_([E(S1e)],Qa.prototype,"source",void 0),Qa=W7=_([ue("esri.symbols.PictureFillSymbol")],Qa);let Cf=class extends hs{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};_([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Cf.prototype,"angle",void 0),_([E({type:["simple-marker","picture-marker"],readOnly:!0})],Cf.prototype,"type",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Cf.prototype,"xoffset",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Cf.prototype,"yoffset",void 0),_([E({cast:t=>t==="auto"?t:Ql(Ei(t)),json:{write:!0}})],Cf.prototype,"size",void 0),Cf=_([ue("esri.symbols.MarkerSymbol")],Cf);var H7;let nl=H7=class extends Cf{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ei(e)),n!=null&&(r.height=Ei(n)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new H7({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};_([E({json:{write:!1}})],nl.prototype,"color",void 0),_([pn({esriPMS:"picture-marker"},{readOnly:!0})],nl.prototype,"type",void 0),_([E(E1e)],nl.prototype,"url",void 0),_([E(S1e)],nl.prototype,"source",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],nl.prototype,"height",void 0),_([lr("height",["height","size"])],nl.prototype,"readHeight",null),_([E({type:Number,cast:Ei,json:{write:!0}})],nl.prototype,"width",void 0),_([E({json:{write:!1}})],nl.prototype,"size",void 0),nl=H7=_([ue("esri.symbols.PictureMarkerSymbol")],nl);var iy;const T1e=Ot.ofType({base:null,key:"type",typeMap:{icon:eo,object:Qs,text:_s}});let rd=iy=class extends sl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new T1e,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return y1e(this)}hasVisibleVerticalOffset(){return _W(this)}clone(){return new iy({verticalOffset:Ze(this.verticalOffset),callout:Ze(this.callout),styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new iy({symbolLayers:new Ot([eo.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new iy({symbolLayers:new Ot([eo.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const n=t.data.symbol;return new iy(n?.callout?{symbolLayers:new Ot([eo.fromCIMSymbol(t)]),callout:new Rf({size:.5,color:new Yn([0,0,0])}),verticalOffset:new Gm({screenLength:40})}:{symbolLayers:new Ot([eo.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new iy({symbolLayers:new Ot([_s.fromTextSymbol(t)])})}};_([E({type:Gm,json:{write:!0}})],rd.prototype,"verticalOffset",void 0),_([E(v1e)],rd.prototype,"callout",void 0),_([E({type:T1e,json:{origins:{"web-scene":{write:!0}}}})],rd.prototype,"symbolLayers",void 0),_([pn({PointSymbol3D:"point-3d"},{readOnly:!0})],rd.prototype,"type",void 0),rd=iy=_([ue("esri.symbols.PointSymbol3D")],rd);var SS;const k1e=Ot.ofType({base:null,key:"type",typeMap:{extrude:If,fill:ql,icon:eo,line:il,object:Qs,text:_s,water:Pf}});let ig=SS=class extends sl{constructor(t){super(t),this.symbolLayers=new k1e,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Ng(Tt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Ng(Tt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(V1(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Fg))}clone(){return new SS({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromJSON(t){const e=new SS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new SS({symbolLayers:new Ot([ql.fromSimpleFillSymbol(t)])})}};_([E({type:k1e,json:{write:!0}})],ig.prototype,"symbolLayers",void 0),_([pn({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ig.prototype,"type",void 0),ig=SS=_([ue("esri.symbols.PolygonSymbol3D")],ig);var q7;const B$=new Ws({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let jf=q7=class extends bx{constructor(...t){super(...t),this.color=new Yn([0,0,0,.25]),this.outline=new ka,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),n&&(r.color=n),r}clone(){return new q7({color:Ze(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};_([E()],jf.prototype,"color",void 0),_([E()],jf.prototype,"outline",void 0),_([pn({esriSFS:"simple-fill"},{readOnly:!0})],jf.prototype,"type",void 0),_([E({type:B$.apiValues,json:{read:B$.read,write:B$.write}})],jf.prototype,"style",void 0),jf=q7=_([ue("esri.symbols.SimpleFillSymbol")],jf);var K7;const W$=new Ws({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Wl=K7=class extends Cf{constructor(...t){super(...t),this.color=new Yn([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new ka}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e!=null&&(i.size=Ei(e)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new K7({angle:this.angle,color:Ze(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};_([E()],Wl.prototype,"color",void 0),_([Zn("color")],Wl.prototype,"writeColor",null),_([pn({esriSMS:"simple-marker"},{readOnly:!0})],Wl.prototype,"type",void 0),_([E()],Wl.prototype,"size",void 0),_([E({type:W$.apiValues,json:{read:W$.read,write:W$.write}})],Wl.prototype,"style",void 0),_([E({type:String,json:{write:!0}})],Wl.prototype,"path",null),_([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":ka}},json:{default:null,write:!0}})],Wl.prototype,"outline",void 0),Wl=K7=_([ue("esri.symbols.SimpleMarkerSymbol")],Wl);var Y7;let Yr=Y7=class extends hs{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Fc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),n&&(r.color=n),r}writeLineWidth(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}castLineWidth(t){return Ei(t)}writeLineHeight(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}clone(){return new Y7({angle:this.angle,backgroundColor:Ze(this.backgroundColor),borderLineColor:Ze(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ze(this.color),font:this.font&&this.font.clone(),haloColor:Ze(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};_([E({type:Yn,json:{write:!0}})],Yr.prototype,"backgroundColor",void 0),_([E({type:Yn,json:{write:!0}})],Yr.prototype,"borderLineColor",void 0),_([E({type:Number,json:{write:!0},cast:Ei})],Yr.prototype,"borderLineSize",void 0),_([E({type:Fc,json:{write:!0}})],Yr.prototype,"font",void 0),_([E({...p1e,json:{write:!0}})],Yr.prototype,"horizontalAlignment",void 0),_([E({type:Boolean,json:{write:!0}})],Yr.prototype,"kerning",void 0),_([E({type:Yn,json:{write:!0}})],Yr.prototype,"haloColor",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Yr.prototype,"haloSize",void 0),_([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rightToLeft",void 0),_([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rotated",void 0),_([E({type:String,json:{write:!0}})],Yr.prototype,"text",void 0),_([pn({esriTS:"text"},{readOnly:!0})],Yr.prototype,"type",void 0),_([E({...m1e,json:{write:!0}})],Yr.prototype,"verticalAlignment",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Yr.prototype,"xoffset",void 0),_([E({type:Number,cast:Ei,json:{write:!0}})],Yr.prototype,"yoffset",void 0),_([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Yr.prototype,"angle",void 0),_([E({type:Number,json:{write:!0}})],Yr.prototype,"width",void 0),_([E({type:Number})],Yr.prototype,"lineWidth",void 0),_([Zn("lineWidth")],Yr.prototype,"writeLineWidth",null),_([Gs("lineWidth")],Yr.prototype,"castLineWidth",null),_([E(f1e)],Yr.prototype,"lineHeight",void 0),_([Zn("lineHeight")],Yr.prototype,"writeLineHeight",null),Yr=Y7=_([ue("esri.symbols.TextSymbol")],Yr);var X7;let rl=X7=class extends hs{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:it.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new X7({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){_fe(Tt.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new Xe("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,n=e?this._fetchCacheKey:null;if(e!=null){const o=n&&e.get(n);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await _e(()=>import("./webStyleSymbolUtils-DUXlbZg-.js"),__vite__mapDeps([293,294,202,203,142,87,206]));pi(t);const i=r(this,{portal:this.portal},t);i.catch(o=>{Tt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await i;return e?.set(n,s.clone()),s}};_([E({json:{write:!1}})],rl.prototype,"color",void 0),_([E({type:String,json:{write:!0}})],rl.prototype,"styleName",void 0),_([E({type:it,json:{write:!1}})],rl.prototype,"portal",void 0),_([E({type:String,json:{read:uO,write:l2}})],rl.prototype,"styleUrl",void 0),_([E({type:bT,json:{read:!1}})],rl.prototype,"thumbnail",void 0),_([E({type:String,json:{write:!0}})],rl.prototype,"name",void 0),_([pn({styleSymbolReference:"web-style"},{readOnly:!0})],rl.prototype,"type",void 0),_([E()],rl.prototype,"_fetchCacheKey",null),rl=X7=_([ue("esri.symbols.WebStyleSymbol")],rl);function $3t(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function j3t(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const xW={base:hs,key:"type",typeMap:{"simple-fill":jf,"picture-fill":Qa,"picture-marker":nl,"simple-line":ka,"simple-marker":Wl,text:Yr,"label-3d":ed,"line-3d":rg,"mesh-3d":jy,"point-3d":rd,"polygon-3d":ig,"web-style":rl,cim:ll},errorContext:"symbol"},F3t={base:hs,key:"type",typeMap:{"picture-marker":nl,"simple-marker":Wl,"point-3d":rd,cim:ll},errorContext:"symbol"},V3t={base:hs,key:"type",typeMap:{"simple-line":ka,"line-3d":rg,cim:ll},errorContext:"symbol"},z3t={base:hs,key:"type",typeMap:{"simple-fill":jf,"picture-fill":Qa,"polygon-3d":ig,cim:ll},errorContext:"symbol"},U3t={base:hs,key:"type",typeMap:{"picture-marker":nl,"simple-marker":Wl,text:Yr,"web-style":rl,cim:ll},errorContext:"symbol"},G3t=aB({types:xW}),B3t={base:hs,key:"type",typeMap:{"simple-fill":jf,"picture-fill":Qa,"picture-marker":nl,"simple-line":ka,"simple-marker":Wl,text:Yr,"line-3d":rg,"mesh-3d":jy,"point-3d":rd,"polygon-3d":ig,"web-style":rl,cim:ll},errorContext:"symbol"},W3t={base:hs,key:"type",typeMap:{text:Yr,"label-3d":ed},errorContext:"symbol"},H3t={base:hs,key:"type",typeMap:{"line-3d":rg,"mesh-3d":jy,"point-3d":rd,"polygon-3d":ig,"web-style":rl,cim:ll},errorContext:"symbol"},q3t={base:hs,key:"type",typeMap:{"label-3d":ed},errorContext:"symbol"},K3t=Lg(xW);var Z7;function nYe(t){if(!t)return null;const e={};for(const n in t){const r=x2(t[n]);r&&(e[n]=r)}return Object.keys(e).length!==0?e:null}function rYe(t){if(t==null)return null;const e={};for(const n in t){const r=t[n];r&&(e[n]=r.toJSON())}return Object.keys(e).length!==0?e:null}var Pw;let Xo=(Pw=class extends mo(qt){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:tM(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&a$e(Tt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const n=this._get("aggregateGeometries");JSON.stringify(n)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const n=this._get("attributes");n!==e&&(this._set("attributes",e),this._notifyLayer("attributes",n,e))}set geometry(e){const n=this._get("geometry");n!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",n,e))}set popupTemplate(e){const n=this._get("popupTemplate");n!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",n,e))}set symbol(e){const n=this._get("symbol");n!==e&&(this._set("symbol",e),this._notifyLayer("symbol",n,e))}get version(){return this._version}set visible(e){const n=this._get("visible");n!==e&&(this._set("visible",e),this._notifyLayer("visible",n,e))}cloneShallow(){return new Z7({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const n=pKe(this.origin);if(n)return n.popupTemplate??(e?n.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i&&typeof i=="object"){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,n){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=n,this._notifyLayer("attributes",r,n,e)}else this.attributes={[e]:n}}getObjectId(){const e=dne(this.origin);if(e)return fne(this,e);const n=this.sourceLayer??this.layer;return n?fne(this,n):null}getGlobalId(){const e=dne(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const n=this.sourceLayer??this.layer;return n&&"globalIdField"in n&&n.globalIdField?this.getAttribute(n.globalIdField):null}toJSON(){return{aggregateGeometries:rYe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:d4(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:n}=this;if(n?.type==="mesh"){const r={origin:n.origin,transform:n.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,n,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:n,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([pc(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:n})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===n||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=n,this.notifyMeshTransformChanged())}),pc(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,n)=>e===n,sync:!0})])}},Z7=Pw,Pw);_([E({value:null,json:{read:nYe}})],Xo.prototype,"aggregateGeometries",null),_([E({value:null})],Xo.prototype,"attributes",null),_([E({value:null,types:rW,json:{read:x2}})],Xo.prototype,"geometry",null),_([E({type:Boolean})],Xo.prototype,"isAggregate",void 0),_([E({clonable:!1})],Xo.prototype,"layer",void 0),_([E({clonable:"reference"})],Xo.prototype,"origin",void 0),_([E({type:hKe,value:null})],Xo.prototype,"popupTemplate",null),_([E({clonable:"reference"})],Xo.prototype,"sourceLayer",void 0),_([E({value:null,types:xW})],Xo.prototype,"symbol",null),_([E({clonable:!1,json:{read:!1,write:!1}})],Xo.prototype,"_version",void 0),_([E({type:Boolean,value:!0})],Xo.prototype,"visible",null),Xo=Z7=_([ue("esri.Graphic")],Xo);let ET=class extends pT{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};_([rpe({Type:Xo,ensureType:za(Xo)})],ET.prototype,"itemType",void 0),ET=_([ue("esri.support.GraphicsCollection")],ET);let xf=class extends Kt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ot,this.groundLayerViews=new Ot,this.referenceLayerViews=new Ot,this._loadingHandle=dn(()=>this.view?.map?.basemap,n=>{n&&n.load().catch(()=>{})},ma)}destroy(){this._set("view",null),this._loadingHandle=ri(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.groundLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};_([E({constructOnly:!0})],xf.prototype,"view",void 0),_([E({readOnly:!0})],xf.prototype,"baseLayerViews",void 0),_([E({readOnly:!0})],xf.prototype,"groundLayerViews",void 0),_([E({readOnly:!0})],xf.prototype,"referenceLayerViews",void 0),_([E({readOnly:!0})],xf.prototype,"suspended",null),_([E({type:Boolean,readOnly:!0})],xf.prototype,"updating",null),xf=_([ue("esri.views.BasemapView")],xf);const iYe=xf;let Ul=class extends Kt{constructor(e){super(e),this.factor=1.5,this.offset=Us(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};_([E({type:Number})],Ul.prototype,"factor",void 0),_([E({nonNullable:!0})],Ul.prototype,"offset",void 0),_([E()],Ul.prototype,"position",void 0),_([E({type:Number,range:{min:0}})],Ul.prototype,"size",void 0),_([E()],Ul.prototype,"maskUrl",void 0),_([E()],Ul.prototype,"maskEnabled",void 0),_([E()],Ul.prototype,"overlayUrl",void 0),_([E()],Ul.prototype,"overlayEnabled",void 0),_([E({readOnly:!0})],Ul.prototype,"version",null),_([E({type:Boolean})],Ul.prototype,"visible",void 0),Ul=_([ue("esri.views.Magnifier")],Ul);const A1e=Ul;let lw=class{constructor(e){this._observable=new lI,this._map=new Map(e)}get size(){return tn(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const n=this._map.delete(e);return n&&this._observable.notify(),n}entries(){return tn(this._observable),this._map.entries()}forEach(e,n){tn(this._observable),this._map.forEach((r,i)=>e.call(n,r,i,this),n)}get(e){return tn(this._observable),this._map.get(e)}has(e){return tn(this._observable),this._map.has(e)}keys(){return tn(this._observable),this._map.keys()}set(e,n){return this._map.set(e,n),this._observable.notify(),this}values(){return tn(this._observable),this._map.values()}[Symbol.iterator](){return tn(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var J7;let TS=J7=class extends qt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new J7({name:this.name,code:this.code})}};_([E({type:String,json:{write:{isRequired:!0}}})],TS.prototype,"name",void 0),_([E({type:[String,Number],json:{write:{isRequired:!0}}})],TS.prototype,"code",void 0),TS=J7=_([ue("esri.layers.support.CodedValue")],TS);const sYe=new Ws({inherited:"inherited",codedValue:"coded-value",range:"range"});let sg=class extends qt{constructor(e){super(e),this.name=null,this.type=null}};_([E({type:String,json:{write:!0}})],sg.prototype,"name",void 0),_([pn(sYe),E({json:{write:{isRequired:!0}}})],sg.prototype,"type",void 0),sg=_([ue("esri.layers.support.Domain")],sg);var Q7,Rw;let Ex=(Rw=class extends sg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let n=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(n=i.name),!!n))}return n}clone(){return new Q7({codedValues:Ze(this.codedValues),name:this.name})}},Q7=Rw,Rw);_([E({type:[TS],json:{write:{isRequired:!0}}})],Ex.prototype,"codedValues",void 0),_([pn({codedValue:"coded-value"})],Ex.prototype,"type",void 0),Ex=Q7=_([ue("esri.layers.support.CodedValueDomain")],Ex);var eV,Cw;let ST=(Cw=class extends sg{constructor(e){super(e),this.type="inherited"}clone(){return new eV}},eV=Cw,Cw);_([pn({inherited:"inherited"})],ST.prototype,"type",void 0),ST=eV=_([ue("esri.layers.support.InheritedDomain")],ST);var tV,Mw;let by=(Mw=class extends sg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new tV({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},tV=Mw,Mw);_([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,n){e[n]=[this.minValue||0,t]},isRequired:!0}}})],by.prototype,"maxValue",void 0),_([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,n){e[n]=[t,this.maxValue||0]},isRequired:!0}}})],by.prototype,"minValue",void 0),_([pn({range:"range"})],by.prototype,"type",void 0),by=tV=_([ue("esri.layers.support.RangeDomain")],by);const oYe={key:"type",base:sg,typeMap:{range:by,"coded-value":Ex,inherited:ST}};function aYe(t){if(!t?.type)return null;switch(t.type){case"range":return by.fromJSON(t);case"codedValue":return Ex.fromJSON(t);case"inherited":return ST.fromJSON(t)}return null}const lYe=new Ws({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var nV;const cYe=new Ws({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Nw;let Ho=(Nw=class extends qt{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?.value??null}readValueType(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?cYe.fromJSON(r.fieldValueType):null}clone(){return new nV({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},nV=Nw,Nw);_([E({type:String,json:{write:!0}})],Ho.prototype,"alias",void 0),_([E({type:[String,Number],json:{write:{allowNull:!0}}})],Ho.prototype,"defaultValue",void 0),_([E()],Ho.prototype,"description",void 0),_([lr("description")],Ho.prototype,"readDescription",null),_([E({types:oYe,json:{read:{reader:aYe},write:!0}})],Ho.prototype,"domain",void 0),_([E({type:Boolean,json:{write:!0}})],Ho.prototype,"editable",void 0),_([E({type:Lr,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Ho.prototype,"length",void 0),_([E({type:String,json:{write:!0}})],Ho.prototype,"name",void 0),_([E({type:Boolean,json:{write:!0}})],Ho.prototype,"nullable",void 0),_([pn(lYe)],Ho.prototype,"type",void 0),_([E()],Ho.prototype,"valueType",void 0),_([lr("valueType",["description"])],Ho.prototype,"readValueType",null),_([E({type:Boolean,json:{read:!1}})],Ho.prototype,"visible",void 0),Ho=nV=_([ue("esri.layers.support.Field")],Ho);var rV;let Y_=rV=class extends qt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new rV({mapLayerId:t,gdbVersion:e})}};_([pn({mapLayer:"map-layer"}),E({json:{write:{isRequired:!0}}})],Y_.prototype,"type",void 0),_([E({type:Lr,json:{write:{isRequired:!0}}})],Y_.prototype,"mapLayerId",void 0),_([E({type:String,json:{write:!0}})],Y_.prototype,"gdbVersion",void 0),Y_=rV=_([ue("esri.layers.support.source.MapLayerSource")],Y_);var iV;let wf=iV=class extends qt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:n,spatialReference:r,geometryType:i}=this,s={workspaceId:t,query:e,oidFields:n,spatialReference:r?.clone()??void 0,geometryType:i};return new iV(s)}};_([pn({queryTable:"query-table"}),E({json:{write:{isRequired:!0}}})],wf.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],wf.prototype,"workspaceId",void 0),_([E({type:String,json:{write:!0}})],wf.prototype,"query",void 0),_([E({type:String,json:{write:!0}})],wf.prototype,"oidFields",void 0),_([E({type:Bt,json:{write:!0}})],wf.prototype,"spatialReference",void 0),_([pn(GBe)],wf.prototype,"geometryType",void 0),wf=iV=_([ue("esri.layers.support.source.QueryTableDataSource")],wf);var sV;let X_=sV=class extends qt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new sV({workspaceId:t,dataSourceName:e})}};_([pn({raster:"raster"}),E({json:{write:{isRequired:!0}}})],X_.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],X_.prototype,"dataSourceName",void 0),_([E({type:String,json:{write:!0}})],X_.prototype,"workspaceId",void 0),X_=sV=_([ue("esri.layers.support.source.RasterDataSource")],X_);var oV;let sy=oV=class extends qt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:n}=this;return new oV({workspaceId:t,gdbVersion:e,dataSourceName:n})}};_([pn({table:"table"}),E({json:{write:{isRequired:!0}}})],sy.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],sy.prototype,"workspaceId",void 0),_([E({type:String,json:{write:!0}})],sy.prototype,"gdbVersion",void 0),_([E({type:String,json:{write:!0}})],sy.prototype,"dataSourceName",void 0),sy=oV=_([ue("esri.layers.support.source.TableDataSource")],sy);var aV,lV;const uYe=Il()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Gl=aV=class extends qt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,n){return vne()(t,e,n)}castLeftTableSource(t){return Lg(cV(),t)}readRightTableSource(t,e,n){return vne()(t,e,n)}castRightTableSource(t){return Lg(cV(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:n,rightTableSource:r,joinType:i}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:n?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:i};return new aV(s)}};_([pn({joinTable:"join-table"}),E({json:{write:{isRequired:!0}}})],Gl.prototype,"type",void 0),_([E({type:String,json:{write:!0}})],Gl.prototype,"leftTableKey",void 0),_([E({type:String,json:{write:!0}})],Gl.prototype,"rightTableKey",void 0),_([E({json:{write:!0}})],Gl.prototype,"leftTableSource",void 0),_([lr("leftTableSource")],Gl.prototype,"readLeftTableSource",null),_([Gs("leftTableSource")],Gl.prototype,"castLeftTableSource",null),_([E({json:{write:!0}})],Gl.prototype,"rightTableSource",void 0),_([lr("rightTableSource")],Gl.prototype,"readRightTableSource",null),_([Gs("rightTableSource")],Gl.prototype,"castRightTableSource",null),_([pn(uYe)],Gl.prototype,"joinType",void 0),Gl=aV=_([ue("esri.layers.support.source.JoinTableDataSource")],Gl);let H$=null;function vne(){return H$||(H$=aB({types:cV()})),H$}let q$=null;function cV(){return q$||(q$={key:"type",base:null,typeMap:{"data-layer":Mf,"map-layer":Y_}}),q$}const hYe={key:"type",base:null,typeMap:{"join-table":Gl,"query-table":wf,raster:X_,table:sy}};var Ow;let Mf=(Ow=class extends qt{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:n}=this;return new lV({fields:e,dataSource:n})}},lV=Ow,Ow);_([pn({dataLayer:"data-layer"}),E({json:{write:{isRequired:!0}}})],Mf.prototype,"type",void 0),_([E({type:[Ho],json:{write:!0}})],Mf.prototype,"fields",void 0),_([E({types:hYe,json:{write:!0}})],Mf.prototype,"dataSource",void 0),Mf=lV=_([ue("esri.layers.support.source.DataLayerSource")],Mf),Mf.from=za(Mf);let oy=class extends mo(qt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};_([E({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],oy.prototype,"onFields",void 0),_([E({type:String,json:{write:!0}})],oy.prototype,"operator",void 0),_([E({type:String,json:{write:!0}})],oy.prototype,"searchTerm",void 0),_([E({type:String,json:{write:!0}})],oy.prototype,"searchType",void 0),oy=_([ue("esri.rest.support.FullTextSearch")],oy);const dYe=oy;var uV;const _ne=new Ws({upperLeft:"upper-left",lowerLeft:"lower-left"});let Dm=uV=class extends qt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new uV(Ze({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};_([E({type:$n,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dm.prototype,"extent",void 0),_([E({type:["view","edit"],json:{write:!0}})],Dm.prototype,"mode",void 0),_([E({type:String,json:{read:_ne.read,write:_ne.write}})],Dm.prototype,"originPosition",void 0),_([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Dm.prototype,"tolerance",void 0),Dm=uV=_([ue("esri.rest.support.QuantizationParameters")],Dm);const fYe=t=>{const e=t;let n=class extends e{};return n=_([ue("esri.rest.support.QueryMixin")],n),n},pYe=new Ws({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var hV;const xne=new Ws({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Vu=hV=class extends qt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ze(t))}clone(){return new hV({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ze(this.statisticParameters)})}};_([E({type:Number,json:{write:!0}})],Vu.prototype,"maxPointCount",void 0),_([E({type:Number,json:{write:!0}})],Vu.prototype,"maxRecordCount",void 0),_([E({type:Number,json:{write:!0}})],Vu.prototype,"maxVertexCount",void 0),_([E({type:String,json:{write:!0}})],Vu.prototype,"onStatisticField",void 0),_([E({type:String,json:{write:!0}})],Vu.prototype,"outStatisticFieldName",void 0),_([E({type:String,json:{read:{source:"statisticType",reader:xne.read},write:{target:"statisticType",writer:xne.write}}})],Vu.prototype,"statisticType",void 0),_([E({type:Object})],Vu.prototype,"statisticParameters",void 0),_([Zn("statisticParameters")],Vu.prototype,"writeStatisticParameters",null),Vu=hV=_([ue("esri.rest.support.StatisticDefinition")],Vu);var BM;const mYe=new Ws({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var c1;let en=(c1=class extends fYe(qt){static from(e){return pO(BM,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,n){n.historicMoment=e&&e.getTime()}writeParameterValues(e,n){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[i]=s.getTime():r[i]=s}n.parameterValues=r}}writeStart(e,n){n.resultOffset=this.start,n.resultRecordCount=this.num||10,n.where="1=1"}writeWhere(e,n){n.where=e||"1=1"}clone(){return new BM(Ze({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},BM=c1,c1.MAX_MAX_RECORD_COUNT_FACTOR=5,c1);_([E({json:{write:!0}})],en.prototype,"aggregateIds",void 0),_([E({type:Boolean,json:{write:!0}})],en.prototype,"cacheHint",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"compactGeometryEnabled",void 0),_([E({json:{write:!0}})],en.prototype,"datumTransformation",void 0),_([Gs("datumTransformation")],en.prototype,"castDatumTransformation",null),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"defaultSpatialReferenceEnabled",void 0),_([E({type:Number,json:{write:!0}})],en.prototype,"distance",void 0),_([E({type:Mf,json:{write:!0}})],en.prototype,"dynamicDataSource",void 0),_([E({type:String,json:{write:!0}})],en.prototype,"formatOf3DObjects",void 0),_([E({type:[dYe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],en.prototype,"fullText",void 0),_([E({type:String,json:{write:!0}})],en.prototype,"gdbVersion",void 0),_([E({types:rW,json:{read:x2,write:!0}})],en.prototype,"geometry",void 0),_([E({type:Number,json:{write:!0}})],en.prototype,"geometryPrecision",void 0),_([E({type:[String],json:{write:!0}})],en.prototype,"groupByFieldsForStatistics",void 0),_([E({type:String,json:{write:!0}})],en.prototype,"having",void 0),_([E({type:Date})],en.prototype,"historicMoment",void 0),_([Zn("historicMoment")],en.prototype,"writeHistoricMoment",null),_([E({type:Number,json:{write:!0}})],en.prototype,"maxAllowableOffset",void 0),_([E({type:Number,cast:t=>t<1?1:t>en.MAX_MAX_RECORD_COUNT_FACTOR?en.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],en.prototype,"maxRecordCountFactor",void 0),_([E({type:["xyFootprint"],json:{write:!0}})],en.prototype,"multipatchOption",void 0),_([E({type:Number,json:{read:{source:"resultRecordCount"}}})],en.prototype,"num",void 0),_([E({json:{write:!0}})],en.prototype,"objectIds",void 0),_([E({type:[String],json:{write:!0}})],en.prototype,"orderByFields",void 0),_([E({type:[String],json:{write:!0}})],en.prototype,"outFields",void 0),_([E({type:Bt,json:{name:"outSR",write:!0}})],en.prototype,"outSpatialReference",void 0),_([E({type:[Vu],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],en.prototype,"outStatistics",void 0),_([E({json:{write:!0}})],en.prototype,"parameterValues",void 0),_([Zn("parameterValues")],en.prototype,"writeParameterValues",null),_([E({type:Jt,json:{write:!0}})],en.prototype,"pixelSize",void 0),_([E({type:Dm,json:{write:!0}})],en.prototype,"quantizationParameters",void 0),_([E({type:[Object],json:{write:!0}})],en.prototype,"rangeValues",void 0),_([E({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],en.prototype,"relationParameter",void 0),_([E({type:String,json:{write:!0}})],en.prototype,"resultType",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"returnCentroid",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"returnDistinctValues",void 0),_([E({type:Boolean,json:{default:!0,write:!0}})],en.prototype,"returnExceededLimitFeatures",void 0),_([E({type:Boolean,json:{write:!0}})],en.prototype,"returnGeometry",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"returnQueryGeometry",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"returnM",void 0),_([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],en.prototype,"returnZ",void 0),_([E({type:Boolean,json:{write:!0}})],en.prototype,"returnTrueCurves",void 0),_([E({type:Bt,json:{write:!0}})],en.prototype,"sourceSpatialReference",void 0),_([pn(pYe,{ignoreUnknown:!1,name:"spatialRel"})],en.prototype,"spatialRelationship",void 0),_([E({type:Number,json:{read:{source:"resultOffset"}}})],en.prototype,"start",void 0),_([Zn("start"),Zn("num")],en.prototype,"writeStart",null),_([E({type:String,json:{write:!0}})],en.prototype,"sqlFormat",void 0),_([E({type:String,json:{write:!0}})],en.prototype,"text",void 0),_([E({type:Ta,json:{write:!0}})],en.prototype,"timeExtent",void 0),_([E({type:Boolean,json:{default:!1,write:!0}})],en.prototype,"timeReferenceUnknownClient",void 0),_([pn(mYe,{ignoreUnknown:!1}),E({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],en.prototype,"units",void 0),_([E({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],en.prototype,"where",void 0),_([Zn("where")],en.prototype,"writeWhere",null),en=BM=_([ue("esri.rest.support.Query")],en);function pm(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Oc=class extends aI{constructor(e){super(e),this._selectionMap=new lw,this._sources=new Ot,this._trashCan=[],this._layerEditHandles=new Ot,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([dn(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),dn(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},ma),V1(()=>this.sources,"change",e=>{const n=this._selectionMap,r=[];for(const i of e.removed){const s=n.get(i);s&&(n.delete(i),s.highlightHandle?.remove(),r.push({layer:i,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ri)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[n,r]=e;return{layer:n,selection:[...r.selection]}})}get count(){let e=0;for(const n of this._selectionMap.values())e+=n.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){xd(e,this._sources)}syncSources(){const e=new Set,n=this.view?.map;if(!n)return;const r=i=>{cVe(i)?(i.layers?.forEach(r),i.tables?.forEach(r)):lVe(i)?(i.sublayers?.forEach(r),i.subtables?.forEach(r)):ite(i)?i.sublayers?.forEach(r):pm(i)&&e.add(i)};n.allLayers.forEach(r),n.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,n={},r="layerView"){const{view:i,selections:s}=this;if(!i&&r==="layerView")return Tt.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?s.filter(a=>e.includes(a.layer)):s).map(async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const u=V_(l)?l.parent:l;if(u!=null){if(i&&r==="layerView"&&!wne(u)&&bne(u)){const h=await i.whenLayerView(u).catch(()=>null);if(h)return Ene(h,c,n)}return Ene(u,c,n)}}).filter(s2);return(await Promise.all(o)).filter(s2)}updateSelection(e){const n=new Map;for(const[s,o]of this._selectionMap)n.set(s,[...o.selection]);let r=!1;const i=e.current.concat(e.added);for(const s of i){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(pm(o)||V_(o))&&a!==null){const l=nI(n,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(pm(o)||V_(o))&&a!==null){const l=n.get(o),c=l?.indexOf(a);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of n){const u=s.get(l);u!==void 0&&o.push(u),s.set(l,{selection:c}),a.push({layer:l,selection:c,...fQ(u!==void 0?u.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,n){this._setSelection(e,n)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,n){const r=this._selectionMap.get(e),i=r!==void 0?[...r.selection]:[];for(const s of n)i.includes(s)||i.push(s);this._setSelection(e,i)}removeFromSelection(e,n){const r=this._selectionMap.get(e);if(!r)return;const i=[];for(const s of r.selection)n.includes(s)||i.push(s);this._setSelection(e,i)}toggleInSelection(e,n){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,n);const i=new Set(r.selection),s=new Set(n),o=W$e(i,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const n=[];for(const[r,i]of this._selectionMap.entries())n.push({layer:r,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(n)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:n,_selectionMap:r,showHighlight:i}=this,s=this._vizTaskId;for(const o of e){const a=r.get(o),l=V_(o)?o.parent:o;if(l!=null&&bne(l)){if(wne(l))continue;n.whenLayerView(l).then(c=>{a?.highlightHandle?.remove(),a!=null&&i&&s===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=c.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(ri);const e=new Set(this.sources.map(n=>V_(n)?n.parent:n));for(const n of e)pm(n)&&"on"in n&&n.on&&this._layerEditHandles.push(n.on("edits",r=>this._onLayerEdit(r,n)))}_onLayerEdit(e,n){if(ite(n))this._onParentLayerEdit(e,n);else if(e.deletedFeatures.length&&this._selectionMap.has(n)){const r=[];e.deletedFeatures.forEach(({error:i,objectId:s})=>{s!=null&&i==null&&r.push(s)}),this.removeFromSelection(n,r)}}_onParentLayerEdit(e,n){const{deletedFeatures:r,edits:i,updatedFeatures:s}=e;if(i?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[n.objectIdField];if(a==null||s.find(u=>u.objectId===a)?.error)return;const l=n.findSublayerForFeature(o);if(!pm(l))return;const c=n.sublayers.find(u=>!(!pm(u)||!this.getSelection(u)?.includes(a)));pm(c)&&c!==l&&(this.removeFromSelection(c,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),n.sublayers.forEach(a=>{pm(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,n){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!yYe(r,{selection:n})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...n]});const i={layer:e,selection:[...n],...fQ(r!==void 0?r.selection:[],n)};this._onSelectionChange([i])}}};_([E()],Oc.prototype,"_selectionMap",void 0),_([E()],Oc.prototype,"_sources",void 0),_([E({readOnly:!0,nonNullable:!0})],Oc.prototype,"selections",null),_([E({readOnly:!0,nonNullable:!0})],Oc.prototype,"count",null),_([E()],Oc.prototype,"view",void 0),_([E({readOnly:!0,nonNullable:!0})],Oc.prototype,"hasSelection",null),_([E()],Oc.prototype,"showHighlight",void 0),_([E()],Oc.prototype,"sources",null),_([E()],Oc.prototype,"highlightName",void 0),Oc=_([ue("esri.views.SelectionManager")],Oc);const wne=t=>V_(t)?t.parent?.isTable===!0:t.isTable,gYe=t=>t.layer!==void 0,bne=t=>t?.when!==void 0,yYe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const n=[...t.selection],r=[...e.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},Ene=async(t,e,n={})=>{let r;if(gYe(t)){const i=t;r=i===void 0?null:await i.queryFeatures(new en({...n,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const i=t;r=i===void 0?null:await i.queryFeatures(new en({...n,objectIds:e})).then(s=>({data:s,layer:i}))}return r},vYe=Oc;let kS=class extends mo(Kt){constructor(e){super(e),this.accentColor=new Yn([255,127,0]),this.textColor=new Yn([255,255,255])}};_([E({type:Yn,nonNullable:!0})],kS.prototype,"accentColor",void 0),_([E({type:Yn,nonNullable:!0})],kS.prototype,"textColor",void 0),kS=_([ue("esri.views.Theme")],kS);const dV=kS,I1e=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],P1e={};function R1e(t){return!!P1e[t]}function _Ye(t){for(const e of t)if(!R1e(e))return!1;return!0}I1e.forEach(t=>{P1e[t]=!0});let C1e=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,r,i){const s=Array.isArray(e)?e:e.split(",");if(!_Ye(s))return s.some(R1e)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof r=="function"?o=r:i=r,i=i??tp.DEFAULT;const l=this._createUniqueGroupName(),c=new xYe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:i});for(const u of s){const h=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],i),Kn(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of n){const i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},xYe=class extends qs{constructor(e,n,r,i){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of n)switch(s){case"click":this.registerIncoming("click",r,o=>i(EYe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>i(SYe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>i(TYe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>i(kYe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>i(AYe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>i(IYe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>i(PYe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>i(OE(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>i(OE(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>i(OE(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>i(RYe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>i(CYe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>i(OE(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>i(OE(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{i(MYe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{i(wYe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{i(bYe(o))})}}_wrapDrag(e){const n=e.data,{x:r,y:i}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const l=n.pointer.native,c=n.buttons,{cancelable:u,timestamp:h}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:i,origin:f,pointerType:o,button:a,buttons:c,radius:n.radius,angle:pge(n.angle),native:l,timestamp:h,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}};function wYe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function bYe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function EYe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,screenPoint:Us(s,o),mapPoint:TI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function SYe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,mapPoint:TI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function TYe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:TI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function kYe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:TI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function AYe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:TI(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function TI(t,e,n){return t.toMap(Us(e,n),{exclude:[]})}function IYe(t){const{key:e,repeat:n,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-down",key:e,repeat:n,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function PYe(t){const{key:e,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:"key-up",key:e,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function OE(t,e){const{x:n,y:r,button:i,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:u,timestamp:h}=t;return{type:e,x:n,y:r,pointerId:l,pointerType:c,button:i,buttons:s,native:o,timestamp:h,eventId:a,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function RYe(t){const{x:e,y:n,buttons:r,native:i,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:h,timestamp:f}=t;return{type:"pointer-drag",x:e,y:n,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:u,native:i,timestamp:f,eventId:s,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function CYe(t){const{cancelable:e,data:n,timestamp:r}=t,{x:i,y:s,deltaY:o,native:a}=n;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function MYe(t){const{action:e,state:n,device:r}=t.data,{cancelable:i,timestamp:s}=t,{buttons:o,axes:a}=n;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const NYe="z",OYe="r",M1e={cancel:"Escape",complete:"Enter"},s4t={...M1e,redo:OYe,undo:NYe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},o4t={toggle:"Control"},a4t={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},l4t={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:xye,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let c4t=class{constructor(){this._bindings=new Map}add(e,n){return this.addToggle(e,r=>{r.type==="key-down"&&n(r)})}addToggle(e,n){const r=LYe.fromDefinition(e,n),i=nI(this._bindings,r.key,()=>[]);return i.push(r),Kn(()=>Sde(i,r))}register(e,n=tp.WIDGET){return sv([e.on("key-down",r=>this.dispatch(e.inputManager,r),n),e.on("key-up",r=>this.dispatch(e.inputManager,r),n)])}dispatch(e,n){const r=n.key,i=this._bindings.get(r);if(i)for(const s of i)s.process(e,n)}},LYe=class fV{constructor(e,n,r,i,s){this.key=e,this.modifiers=n,this.repeats=r,this.continuePropagation=i,this.callback=s}process(e,n){if(!(n.key!==this.key||"repeat"in n&&n.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||n.stopPropagation(),this.callback(n)}}static fromDefinition(e,n){if(typeof e=="string")return new fV(e,[],!1,!1,n);const{key:r,modifier:i,repeats:s,continuePropagation:o}=e;return new fV(r,i?Array.isArray(i)?i:[i]:[],!!s,!!o,n)}};function DYe(t){return[t.on("before-add",e=>{const n=e.item;if(n==null||t.includes(n))return Tt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{const n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function pV(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function $Ye(t){return t.type==="key-down"&&t.key===M1e.cancel}function qh(t){return Us(t.x,t.y)}function N1e(t,e){const n=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return n?Us(e.clientX-n.left,e.clientY-n.top):Us(0,0)}function O1e(t,e){return e instanceof Event?N1e(t,e):qh(e)}function L1e(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let WM=class extends Kt{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new lw,this._grabbedManipulators=new lw,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,n){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Sne(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Tne(e))break;const i=qh(e),s=__(i,e.pointerType,n.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:i,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!Tne(e))break;const i=this._grabbedManipulators.get(e.pointerId),s=i?.manipulator,o=i?.tool;if(s==null||o==null)break;const a=qh(e);a.x=hu(a.x,0,n.view.width),a.y=hu(a.y,0,n.view.height);const l=i.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}r();break}case"immediate-click":{const i=qh(e),s=__(i,e.pointerType,n.tools);if(!jYe(e)){for(const c of n.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,u=!0)}),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),K$(o,r);break}case"click":{const i=qh(e),s=__(i,e.pointerType,n.tools),o=s?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const i=qh(e),s=__(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),K$(o,r);break}case"immediate-double-click":{const i=qh(e),s=__(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&K$(o,r);break}}this._onFocusChange(n.tools)}_releaseManipulatorBeforeDragging(e,n,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:qh(n)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,n){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:qh(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>n.add(i)),this._hoveredManipulators.forEach(({tool:i})=>r.add(i));for(const i of e){i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);const s=this._grabbedManipulators.values(),o=l$e(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:n,setActiveTool:r},i=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},u)=>{o(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Us(n.x,n.y),r,n.pointerType,e)})}handleHoverEvent(e,n){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Sne(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(qh(e),e.pointerId,e.pointerType,n))}_updateHoveredStateForPointerAtScreenPosition(e,n,r,i){let s=__(e,r,i);const o=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:n},r)=>{e===r&&(this._hoveredManipulators.delete(e),n.hovering=!1)})}_cursorFromMap(e,n){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return n}};function __(t,e,n){for(const r of n){if(r.manipulators==null||!pV(r))continue;const i=r.manipulators.intersect(t,e);if(i!=null)return{tool:r,manipulator:i}}return null}function Sne(t){return t==="mouse"}function Tne(t){return t.pointerType!=="mouse"||t.button===0}function jYe(t){return!!t.native.shiftKey}function K$(t,e){t?.consumesClicks&&e()}_([E()],WM.prototype,"cursor",null),WM=_([ue("esri.views.interactive.ToolViewManagerManipulatorState")],WM);const kne="attached",Y$="tools",FYe=1e3;let Kh=class extends Kt{constructor(e){super(e),this._updatingHandles=new n1,this._clock=Z2,this._manipulatorState=new WM,this.tools=new Ot,this._interacting=!1,this._interactingTimeout=FYe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(I1e,e=>{this._handleInputEvent(e)},tp.TOOL),...DYe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Tt.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const n=this.activeTool;this._set("activeTool",e),n?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const i=pV(r);this.activeTool!=null&&i||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!i)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const n of this.tools)if(n.visible&&n.cursor!=null)return n.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ri(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([dn(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(n=>n.onElevationChange(e)))],kne):this.addHandles(dn(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(kne),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const n of this.tools)n.manipulators&&n.manipulators.forEach(({manipulator:r})=>e(r,n))}_handleInputEvent(e){let n=!1;const r={...e,stopPropagation:()=>{n=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const i of this.tools)!n&&i.visible&&i.handleInputEvent(r);!n&&$Ye(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),n||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Y$);for(const e of this.tools){if(e instanceof Kt){const n=dn(()=>[e.cursor,e.visible,e.editable],()=>{pV(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(n,Y$)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],Y$)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(n=>(e==null||n!==e)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}get test(){}};_([E({constructOnly:!0,nonNullable:!0})],Kh.prototype,"view",void 0),_([E({value:null})],Kh.prototype,"activeTool",null),_([E({readOnly:!0,type:Ot})],Kh.prototype,"tools",void 0),_([E()],Kh.prototype,"cursor",null),_([E({readOnly:!0})],Kh.prototype,"updating",null),_([E()],Kh.prototype,"_interacting",void 0),_([E({readOnly:!0})],Kh.prototype,"interacting",null),Kh=_([ue("esri.views.ToolViewManager")],Kh);const VYe=new Yn("cyan"),zYe=1,UYe=.25,GYe=new Yn("black"),BYe=.4,WYe=.2,f4t=.25,D1e="default",HYe="temporary",qYe=new Yn("yellow");var mV;let Bl=mV=class extends Kt{constructor(t){super(t),this.name=D1e,this.color=VYe.clone(),this.haloColor=null,this.haloOpacity=zYe,this.fillOpacity=UYe,this.shadowColor=GYe.clone(),this.shadowOpacity=BYe,this.shadowDifference=WYe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new mV({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};_([E({type:String,constructOnly:!0,nonNullable:!0})],Bl.prototype,"name",void 0),_([E({type:Yn,nonNullable:!0})],Bl.prototype,"color",void 0),_([E({type:Yn})],Bl.prototype,"haloColor",void 0),_([E({nonNullable:!0})],Bl.prototype,"haloOpacity",void 0),_([E({nonNullable:!0})],Bl.prototype,"fillOpacity",void 0),_([E({type:Yn,nonNullable:!0})],Bl.prototype,"shadowColor",void 0),_([E({nonNullable:!0})],Bl.prototype,"shadowOpacity",void 0),_([E({nonNullable:!0})],Bl.prototype,"shadowDifference",void 0),_([E({nonNullable:!0})],Bl.prototype,"haloWidth",void 0),_([E({nonNullable:!0})],Bl.prototype,"haloBlur",void 0),Bl=mV=_([ue("esri.views.support.HighlightOptions")],Bl);const wg=Bl;function KYe(){return new(Ot.ofType(wg))([new wg({name:D1e}),new wg({name:HYe,color:qYe})])}let Z_=class extends Kt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":YYe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return XYe[this.deviceType]}};_([E({nonNullable:!0,readOnly:!0})],Z_.prototype,"nativeIndex",void 0),_([E({type:String,readOnly:!0})],Z_.prototype,"deviceType",null),_([E({type:Number,readOnly:!0})],Z_.prototype,"axisThreshold",null),Z_=_([ue("esri.views.input.gamepad.GamepadInputDevice")],Z_);const wW=Z_,YYe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),XYe={standard:.15,spacemouse:.025,unknown:0};let AS=class extends Kt{constructor(e){super(e),this.devices=new Ot,this.enabledFocusMode="document"}};_([E({type:Ot.ofType(wW),readOnly:!0})],AS.prototype,"devices",void 0),_([E({type:["document","view","none"]})],AS.prototype,"enabledFocusMode",void 0),AS=_([ue("esri.views.input.gamepad.GamepadSettings")],AS);const ZYe=AS;let HM=class extends Kt{constructor(){super(...arguments),this.gamepad=new ZYe}};_([E({readOnly:!0})],HM.prototype,"gamepad",void 0),HM=_([ue("esri.views.input.Input")],HM);const JYe=HM,X$=()=>E({type:["pan","rotate","zoom","none"],nonNullable:!0});let ay=class extends Kt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};_([X$()],ay.prototype,"dragPrimary",void 0),_([X$()],ay.prototype,"dragSecondary",void 0),_([X$()],ay.prototype,"dragTertiary",void 0),_([E({type:["zoom","none"],nonNullable:!0})],ay.prototype,"mouseWheel",void 0),ay=_([ue("esri.views.navigation.NavigationActionMap")],ay);const bW=ay;let Tm=class extends Kt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};_([E({type:Boolean,nonNullable:!0})],Tm.prototype,"enabled",void 0),_([E({type:wW})],Tm.prototype,"device",void 0),_([E({type:["pan","zoom"],nonNullable:!0})],Tm.prototype,"mode",void 0),_([E({type:["forward-down","forward-up"],nonNullable:!0})],Tm.prototype,"tiltDirection",void 0),_([E({type:Number,nonNullable:!0})],Tm.prototype,"velocityFactor",void 0),Tm=_([ue("esri.views.navigation.gamepad.GamepadSettings")],Tm);const $1e=Tm;let km=class extends Kt{constructor(e){super(e),this.actionMap=new bW,this.browserTouchPanEnabled=!0,this.gamepad=new $1e,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){LF(Tt.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};_([E({type:bW,nonNullable:!0})],km.prototype,"actionMap",void 0),_([E({type:Boolean})],km.prototype,"browserTouchPanEnabled",void 0),_([E({type:$1e,nonNullable:!0})],km.prototype,"gamepad",void 0),_([E({type:Boolean})],km.prototype,"momentumEnabled",void 0),_([E({type:Boolean})],km.prototype,"mouseWheelZoomEnabled",null),km=_([ue("esri.views.navigation.Navigation")],km);const GO=km;function x4t(t,e,n){const r=j1e(t),i=e,s=QYe(r,i,n);if(r){const o=tl.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!n&&o!==r.heightUnit){const a=new Xe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!eXe(t)||s===4)return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=r?.heightUnit||"unknown",a=i?.heightUnit||"unknown",l=new Xe("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 2:{const o=r?.heightModel||"unknown",a=i?.heightModel||"unknown",l=new Xe("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 3:{const o=r?.vertCRS||"unknown",a=i?.vertCRS||"unknown",l=new Xe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}}return null}function QYe(t,e,n){if(!Ane(t)||!Ane(e))return 4;if(t==null||e==null)return 0;if(!n&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function Ane(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function eXe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!z1e(t)}function j1e(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?iI(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&F1e(t)&&t.heightModelInfo?t.heightModelInfo:z1e(t)?tl.deriveUnitFromSR(nXe,t.spatialReference):null}function F1e(t){return"heightModelInfo"in t}function V1e(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function z1e(t){return V1e(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):U1e(t)}function tXe(t){return t.layers!=null||U1e(t)||V1e(t)||F1e(t)}function U1e(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const nXe=new tl({heightModel:"gravity-related-height"});let gV,Z$=null;async function rXe(t){Z$||(Z$=_e(()=>import("./geometryServiceUtils-DfkuJihF.js"),__vite__mapDeps([295,296])).then(e=>gV=e)),await Z$,pi(t)}async function G1e(t,e,n,r){if(!t)return null;const i=t.spatialReference;return Sp()||mh(i,e)?cv(t,e):gV?gV.projectGeometry(t,e,n,r):(await Promise.race([rXe(r),Vg(r)]),G1e(t,e,n,r))}async function w4t(t,e){try{return t?.spatialReference?await w0e(t,e):null}catch{return null}}let Kr=class extends Kt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=M1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),n=[];return this.priorityCollection!=null&&n.push(this.priorityCollection),n.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),n}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const i=this._getSupportedSpatialReferences(r);if(i.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,i);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const n=this._pickSpatialReferenceCandidate(e);return{spatialReference:n?.spatialReference??null,viewingMode:n?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),n=this.spatialReference;if(!n)return{updating:this._spatialReferenceTask.updating};let r;const i=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(n))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const n=this._collectLayers(this.mapCollections,r=>{const i=j1e(r);return!!i&&(e={heightModelInfo:i,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>tXe(r));return{...e,updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],n=this._collectLayers(this.mapCollections,r=>{const i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:i[0],o=i.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of i)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:n}}get _extentTask(){const{candidates:e,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=M1(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:yO(async s=>{try{const o=await G1e(r.extent,i,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(fa(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,n){if(e==null)return n;const r=new Array;for(const i of e)for(const s of n){if(!i.spatialReference.equals(s.spatialReference))continue;const o=sXe(i.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:i.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const n=this.defaultSpatialReference;return e==null||e.length<1?n?{spatialReference:n,viewingMode:null}:null:(n!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(n))&&(e=e.filter(({spatialReference:r})=>r.equals(n))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(n.length===0)return[];const r=[];for(const i of n){const s=this.getSpatialReferenceSupport(i,e);if(s!=null){const o=s.constraints??[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const n=this.spatialReference;return e.find(({extent:r})=>n.equals(r.spatialReference))||e[0]}_collectLayers(e,n,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const i=new iXe(r,n);for(const s of e)if(this._collectCollection(s,i),i.done||i.preloading===this.sourcePreloadCount)break;return i.updating}_collectCollection(e,n){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&n.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":if(n.updating||(n.done=n.pushLayer(r)),n.done||n.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},n)}if(n.done||n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(n=>{_a(n)}),"loading"):e.loadStatus:"loaded"}};_([E()],Kr.prototype,"required",void 0),_([E({constructOnly:!0})],Kr.prototype,"map",void 0),_([E({constructOnly:!0})],Kr.prototype,"getSpatialReferenceSupport",void 0),_([E()],Kr.prototype,"defaultSpatialReference",void 0),_([E()],Kr.prototype,"userSpatialReference",void 0),_([E()],Kr.prototype,"sourcePreloadCount",void 0),_([E()],Kr.prototype,"priorityCollection",void 0),_([E()],Kr.prototype,"requiresExtentInSpatialReference",void 0),_([E()],Kr.prototype,"suspended",void 0),_([E({readOnly:!0})],Kr.prototype,"ready",null),_([E({readOnly:!0})],Kr.prototype,"heightModelInfoReady",null),_([E({readOnly:!0})],Kr.prototype,"spatialReference",null),_([E({readOnly:!0})],Kr.prototype,"extent",null),_([E({readOnly:!0})],Kr.prototype,"heightModelInfo",null),_([E({readOnly:!0})],Kr.prototype,"vcsWkid",null),_([E({readOnly:!0})],Kr.prototype,"latestVcsWkid",null),_([E({readOnly:!0})],Kr.prototype,"viewingMode",null),_([E({readOnly:!0})],Kr.prototype,"tileInfo",null),_([E({readOnly:!0})],Kr.prototype,"mapCollections",null),_([E({readOnly:!0})],Kr.prototype,"_spatialReferenceTask",null),_([E({readOnly:!0})],Kr.prototype,"_tileInfoTask",null),_([E({readOnly:!0})],Kr.prototype,"_heightModelInfoTask",null),_([E({readOnly:!0})],Kr.prototype,"_extentCandidatesTask",null),_([E()],Kr.prototype,"_extentTask",null),_([E()],Kr.prototype,"_projectExtentTask",void 0),Kr=_([ue("esri.views.support.DefaultsFromMap")],Kr);let iXe=class{constructor(e,n){this.layerFilter=e,this.pushLayer=n,this.preloading=-1,this.updating=!1,this.done=!1}};function sXe(t,e){return t!=null?e!=null?t===e&&t:t:e}function oXe(t){return"tryRecycleWith"in t}let aXe=class{constructor(e,n,r){this.layer=e,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=fc(),this.promise=this._deferred.promise,uu(this._controller.signal,()=>{this._recycleController?.abort();const i=new Xe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(i)})}tryRecycle(e){if(!this.done||!this.layerView||!oXe(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const n=this.layer.type,r=this._recycleController.signal;for(let i=0;i<e.length;i++){const s=e[i];if(s.type!==n)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(i,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(pi(r),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:n,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:n},layer:r}=this;this._map=e.map;try{let i,s;if(await r.load({signal:n}),r.prefetchResources&&await r.prefetchResources({signal:n}),lXe(r))i=await r.createLayerView(e,{signal:n});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Xe("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);pi(n),i="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{s=ri(s),i.destroyed||i.destroy(),this.done=!0};s=uu(n,o),pi(n);try{await i.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new Xe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=i,r.emit("layerview-create",{view:e,layerView:i}),e.emit("layerview-create",{layer:r,layerView:i}),this.done=!0,this._deferred?.resolve(i)}catch(i){r.emit("layerview-create-error",{view:e,error:i}),e.emit("layerview-create-error",{layer:r,error:i}),this.done=!0,this._deferred?.reject(new Xe("layerview:create-error","layerview creation failed",{layer:r,error:i}))}}};function lXe(t){return t.createLayerView!==_i.prototype.createLayerView}function cXe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let Xa=class extends Kt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new n1,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const n=this.view.map?.allLayers;if(n)for(const r of n)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=fc(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(rb(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:n}=this.view;if(!n)return void this.clear();if(this._map!==n&&(this.clear(),this._map=n),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],s=this.view.ready,o=u=>{if(u!=null){for(const h of u)if(h){if(this.layerViewFilter?.(h)===!1)continue;r.add(h);const f=this._layerLayerViewInfoMap.get(h);f&&s?f.start():f||this._recyclingInfoMap.has(h)||i.push(h),"layers"in h&&h.layers&&o(h.layers)}}};for(const u of this._rootCollectionNames)o(fd(this,u));const a=new Array,l=u=>{const h=u.tryRecycle(i);h?(this._recyclingInfoMap.set(u.layer,u),this.notifyChange("updating"),h.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule(),this.notifyChange("updating")}).catch(f=>{_a(f)||(this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(u)};for(const u of this._layerLayerViewInfoMap.values())r.has(u.layer)||(this._layerLayerViewInfoMap.delete(u.layer),l(u));for(const u of this._recyclingInfoMap.values())r.has(u.layer)||(this._recyclingInfoMap.delete(u.layer),l(u));for(const u of i)this._createLayerView(u);this._refreshCollections(),a.forEach(u=>u.destroy());const c=[n?.ground?.layers,n?.basemap?.baseLayers,n?.basemap?.groundLayers,n?.basemap?.referenceLayers,n?.layers].filter(u=>!!u);r.forEach(u=>"layers"in u&&c.push(u.layers)),this.addHandles(c.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([V1(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),dn(()=>{const e=this.view,n=e?.map;return[n?.basemap,n?.ground,n?.layers,e?.ready]},()=>this._reschedule(),ta)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),NR(this._recyclingInfoMap),NR(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(kr()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||v6e(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),NR(this._layerLayerViewInfoMap),NR(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const n=this._layerLayerViewInfoMap.get(e)?.promise;if(!n){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new Xe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return n}isCreatingLayerViewsForLayer(e,n){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const i=r.layerView;return!(!i||!n||i.parent===n)||!!(r.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,i))}_refreshCollections(){for(const[e,n]of this._layersToLayerViews)this._populateLayerViewsOwners(fd(this,e),fd(this,n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())fd(this,e)?.removeAll()}_populateLayerViewsOwners(e,n,r){if(!e||!n)return void n?.removeAll();let i=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o?.layerView)continue;const{layerView:a}=o;a.layer=s,a.parent=r,n.at(i)!==a&&n.splice(i,0,a),"layers"in s&&cXe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++i}i<n.length&&n.splice(i)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const n=new aXe(e,this.view,this.layerViewImporter);n.promise?.then(()=>this._refreshCollections(),r=>{r&&(_a(r)||r.name==="cancelled:layerview-create")||Tt.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};_([E()],Xa.prototype,"_workPromise",void 0),_([E({readOnly:!0})],Xa.prototype,"_watchUpdatingTracking",void 0),_([E({readOnly:!0})],Xa.prototype,"_layersToLayerViews",void 0),_([E({constructOnly:!0})],Xa.prototype,"layerviewMapping",void 0),_([E({readOnly:!0})],Xa.prototype,"_rootCollectionNames",null),_([E({constructOnly:!0})],Xa.prototype,"layerViewFilter",void 0),_([E()],Xa.prototype,"layerViewImporter",void 0),_([E()],Xa.prototype,"supportsGround",void 0),_([E({readOnly:!0})],Xa.prototype,"updating",null),_([E({readOnly:!0})],Xa.prototype,"updatingRemaining",null),_([E({constructOnly:!0})],Xa.prototype,"view",void 0),Xa=_([ue("esri.views.support.LayerViewManager")],Xa);const uXe=Xa;let J_=class extends Kt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};_([E()],J_.prototype,"featureTitleFields",void 0),_([E()],J_.prototype,"utilityNetworkFields",void 0),_([E()],J_.prototype,"globalIdField",void 0),J_=_([ue("esri.views.support.RequiredFieldsOptions")],J_);const hXe=J_;var Q_,kg;let Lt=(kg=class extends gO(uB){constructor(e){super(e),this._userSpatialReference=null,this.handles=new tb,this.updatingHandles=new n1,this.allLayerViews=new Xu({getCollections:()=>this.layerviewCollections,getChildrenFunction:fXe}),this.analyses=new b2,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new ET,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ot,this.magnifier=new A1e,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new Ot,this._highPriorityCursorHandles=new Ot,this.input=new JYe,this.navigation=new GO,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new C1e(this),this.persistableViewModels=new Ot,this.requiredFieldsOptions=new hXe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(dn(()=>this.preconditionsReady,n=>{const r=this.ready;if(n?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,Q_.views.add(this)):(this._lockedSpatialReference=null,Q_.views.remove(this)),this.notifyChange("spatialReference"),!n&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(n&&!r){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new Xe("view:startup-error","View._startup failed",i)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Fg))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,LB(()=>this.ready)))),this.basemapView=new iYe({view:this}),this.layerViewManager=new uXe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new Kh({view:this}),this.selectionManager=new vYe({view:this}),this.addHandles([pc(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{Tt.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),dn(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ta),dn(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Fg),dn(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ta)])}get _layerToLayerviewMapping(){return Q_._layerToLayerview}destroy(){this.destroyed||(Q_.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Ni(this.graphics),this.analyses=Ni(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Ni(this.analysisViewManager),this.toolViewManager=Ni(this.toolViewManager),this.layerViewManager=Ni(this.layerViewManager),this.selectionManager=Ni(this.selectionManager),this.basemapView=Ni(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Ni(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Tt.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Kr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,n)=>this.getSpatialReferenceSupport(e,n),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??KYe()}set highlights(e){this._set("highlights",xd(e,this._get("highlights"),Ot.ofType(wg)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||qF(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(Tt.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),qF(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&n&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=yO(i=>ofe(ye("view-readyState-waiting-delay"),null,i)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=M1(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const n=!fo(e,this._get("spatialReference"));this._set("_userSpatialReference",e),n&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Nd}set timeZone(e){this._userTimeZone=e,B7e(e)||Tt.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,n="low"){const r=n==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,i={cursor:e},s=Kn(()=>r.remove(i));return r.add(i),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new dV}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new Xe("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,n){return this.isResolved()&&!this.ready&&Tt.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,n)}forceReadyCycle(){this.ready&&(pc(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,n){return super.on(e,n)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const n=document.createElement("div");n.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const i=document.createElement("div");i.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",i.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",n.appendChild(r),n.appendChild(i),n.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(n),e}}},Q_=kg,kg._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],kg.views=new Ot,kg);_([E()],Lt.prototype,"_userSpatialReference",void 0),_([E()],Lt.prototype,"activeTool",null),_([E({readOnly:!0})],Lt.prototype,"allLayerViews",void 0),_([E({readOnly:!0})],Lt.prototype,"layerviewCollections",null),_([E(V9(b2,"analyses"))],Lt.prototype,"analyses",void 0),_([E()],Lt.prototype,"animation",null),_([E()],Lt.prototype,"basemapView",void 0),_([E()],Lt.prototype,"center",null),_([E()],Lt.prototype,"defaultsFromMapSettings",null),_([E()],Lt.prototype,"defaultsFromMap",null),_([E()],Lt.prototype,"dependencies",void 0),_([E()],Lt.prototype,"displayFilterEnabled",void 0),_([E({type:$n})],Lt.prototype,"extent",null),_([E()],Lt.prototype,"fatalError",void 0),_([E(V9(ET,"graphics"))],Lt.prototype,"graphics",void 0),_([E({readOnly:!0,type:tl})],Lt.prototype,"heightModelInfo",null),_([E({type:Ot.ofType(wg)})],Lt.prototype,"highlights",null),_([E({readOnly:!0})],Lt.prototype,"interacting",null),_([E({constructOnly:!0})],Lt.prototype,"layerViewFilter",void 0),_([E({readOnly:!0})],Lt.prototype,"navigating",null),_([E({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Lt.prototype,"preconditionsReady",null),_([E({readOnly:!0})],Lt.prototype,"typeSpecificPreconditionsReady",void 0),_([E({type:Ot,readOnly:!0})],Lt.prototype,"layerViews",void 0),_([E()],Lt.prototype,"resolution",null),_([E({type:A1e})],Lt.prototype,"magnifier",void 0),_([E({value:null,type:j0e})],Lt.prototype,"map",null),_([E()],Lt.prototype,"padding",void 0),_([E({readOnly:!0})],Lt.prototype,"ready",void 0),_([E()],Lt.prototype,"_readyStateWaitingTask",void 0),_([E({readOnly:!0})],Lt.prototype,"readyState",null),_([E({type:Bt})],Lt.prototype,"spatialReference",null),_([E()],Lt.prototype,"stationary",null),_([E({type:Ta})],Lt.prototype,"timeExtent",null),_([E({type:String,nonNullable:!0})],Lt.prototype,"timeZone",null),_([E()],Lt.prototype,"tools",null),_([E()],Lt.prototype,"toolViewManager",void 0),_([E({readOnly:!0})],Lt.prototype,"type",void 0),_([E({type:Number})],Lt.prototype,"scale",void 0),_([E({readOnly:!0})],Lt.prototype,"updating",void 0),_([E({readOnly:!0})],Lt.prototype,"initialExtentRequired",void 0),_([E({readOnly:!0})],Lt.prototype,"initialExtent",null),_([E()],Lt.prototype,"cursor",null),_([E({readOnly:!0})],Lt.prototype,"input",void 0),_([E({type:GO,nonNullable:!0})],Lt.prototype,"navigation",void 0),_([E()],Lt.prototype,"layerViewManager",void 0),_([E()],Lt.prototype,"analysisViewManager",void 0),_([E()],Lt.prototype,"selectionManager",void 0),_([E()],Lt.prototype,"width",void 0),_([E()],Lt.prototype,"height",void 0),_([E({readOnly:!0})],Lt.prototype,"resizing",void 0),_([E({value:null,readOnly:!0})],Lt.prototype,"size",null),_([E({readOnly:!0})],Lt.prototype,"suspended",void 0),_([E({readOnly:!0})],Lt.prototype,"viewEvents",void 0),_([E({readOnly:!0})],Lt.prototype,"persistableViewModels",void 0),_([E()],Lt.prototype,"_isValid",void 0),_([E()],Lt.prototype,"_readyCycleForced",void 0),_([E()],Lt.prototype,"_lockedSpatialReference",void 0),_([E()],Lt.prototype,"_userTimeZone",void 0),_([E()],Lt.prototype,"_lockedTimeZone",void 0),_([E()],Lt.prototype,"_userTimeExtent",void 0),_([E()],Lt.prototype,"_lockedTimeExtent",void 0),_([E({type:dV})],Lt.prototype,"theme",void 0),_([E({readOnly:!0,type:dV})],Lt.prototype,"effectiveTheme",null),Lt=Q_=_([ue("esri.views.View")],Lt);const J$=globalThis.$arcgis;J$&&!J$.views&&Object.defineProperty(J$,"views",{configurable:!1,enumerable:!0,writable:!1,value:Lt.views});const dXe=Lt;function fXe(t){return t.layerViews}function $i(){return[0,0]}function pXe(t){return[t[0],t[1]]}function kI(t,e){return[t,e]}function mXe(t,e){return[t,e]}function gXe(t,e=$i()){const n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function B1e(){return $i()}function W1e(){return kI(1,1)}function H1e(){return kI(1,0)}function q1e(){return kI(0,1)}const yXe=B1e(),vXe=W1e(),_Xe=H1e(),xXe=q1e();Object.freeze(Object.defineProperty({__proto__:null,ONES:vXe,UNIT_X:_Xe,UNIT_Y:xXe,ZEROS:yXe,clone:pXe,create:$i,freeze:mXe,fromArray:gXe,fromValues:kI,ones:W1e,unitX:H1e,unitY:q1e,zeros:B1e},Symbol.toStringTag,{value:"Module"}));function wXe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K1e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function bXe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function EW(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5];let l=n*s-r*i;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*o)*l,t[5]=(r*o-n*a)*l,t):null}function EXe(t){return t[0]*t[3]-t[1]*t[2]}function Y1e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],g=n[4],v=n[5];return t[0]=r*c+s*u,t[1]=i*c+o*u,t[2]=r*h+s*f,t[3]=i*h+o*f,t[4]=r*g+s*v+a,t[5]=i*g+o*v+l,t}function AI(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*c,t[1]=i*u+o*c,t[2]=r*-c+s*u,t[3]=i*-c+o*u,t[4]=a,t[5]=l,t}function BO(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function S2(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=i*c+o*u+l,t}function X1e(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function Z1e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function SW(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function SXe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function TXe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function kXe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function J1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function AXe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function IXe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function PXe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function RXe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5],v=xl();return Math.abs(n-l)<=v*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=v*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=v*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=v*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-f)<=v*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-g)<=v*Math.max(1,Math.abs(a),Math.abs(g))}const CXe=Y1e,MXe=J1e;Object.freeze(Object.defineProperty({__proto__:null,add:kXe,copy:wXe,determinant:EXe,equals:RXe,exactEquals:PXe,frob:TXe,fromRotation:X1e,fromScaling:Z1e,fromTranslation:SW,identity:K1e,invert:EW,mul:CXe,multiply:Y1e,multiplyScalar:AXe,multiplyScalarAndAdd:IXe,rotate:AI,scale:BO,set:bXe,str:SXe,sub:MXe,subtract:J1e,translate:S2},Symbol.toStringTag,{value:"Module"}));function Ed(){return[1,0,0,1,0,0]}function NXe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function OXe(t,e,n,r,i,s){return[t,e,n,r,i,s]}const LXe=Ed();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:LXe,clone:NXe,create:Ed,fromValues:OXe},Symbol.toStringTag,{value:"Module"}));const KR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new ws({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Bt.WebMercator}),minus180Line:new ws({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Bt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new ws({paths:[[[180,-180],[180,180]]],spatialReference:Bt.WGS84}),minus180Line:new ws({paths:[[[-180,-180],[-180,180]]],spatialReference:Bt.WGS84})}};function Fy(t,e){return Math.ceil((t-e)/(2*e))}function Q1e(t,e){const n=TT(t);for(const r of n)for(const i of r)i[0]+=e;return t}function TT(t){return tW(t)?t.rings:t.paths}function A4t(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function DXe(t){return typeof t=="string"?Va(t):Ze(t)}function $Xe(t,e,n){const r={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[i]=s.map(o=>$Xe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n?.[i]);r[i]=e?o:JSON.stringify(o)}else r[i]=e?s:JSON.stringify(s);else r[i]=s}return r}function jXe(t,e){return t?e&&ZG(t)?e:XG(t)??Zr?.findCredential(t)?.token:null}async function I4t(t,e,n){const r=jXe(t,e);return r||(!Zr&&tr.request.useIdentity&&await _e(()=>import("./IdentityManager-BHIa8mbd.js"),__vite__mapDeps([17,18])),(await Zr.getCredential(t,n))?.token)}async function FXe(t,e,n,r){const i=DXe(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:wpe(s),target:JSON.stringify({geometryType:nW(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await es(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(u=>{const h=x2(u);return h.spatialReference=s,h})}}function VXe(t){return{geometryType:nW(t[0]),geometries:t.map(e=>e.toJSON())}}function zXe(t,e,n){const r=UBe(e);return t.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}async function UXe(t,e,n){const r=typeof t=="string"?Va(t):t,i=e[0].spatialReference,s=nW(e[0]),o={...n,query:{...r.query,f:"json",sr:wpe(i),geometries:JSON.stringify(VXe(e))}},{data:a}=await es(r.path+"/simplify",o);return zXe(a.geometries,s,i)}const eve=()=>Tt.getLogger("esri.geometry.support.normalizeUtils");function GXe(t){return t.type==="polygon"}function BXe(t){return t[0].type==="polygon"}function WXe(t){return t[0].type==="polyline"}function Ine(t){const e=[];let n=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&e.push([(n+r)/2,0])}return e}function HXe(t,e){if(!(t instanceof ws||t instanceof xi)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw eve().error(i),new Xe("internal:geometry",i)}const n=TT(t),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],u=i[o+1][1],h=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),f=(u-l)/h,g=(c-a)/h,v=h/e;if(v>1){for(let A=1;A<=v-1;A++){const I=A*e,P=g*I+a,M=f*I+l;s.push([P,M])}const x=(h+Math.floor(v-1)*e)/2,b=g*x+a,T=f*x+l;s.push([b,T])}s.push([c,u])}}return GXe(t)?new xi({rings:r,spatialReference:t.spatialReference}):new ws({paths:r,spatialReference:t.spatialReference})}function Pne(t,e,n){if(e){const r=HXe(t,1e6);t=rS(r,!0)}return n&&(t=Q1e(t,n)),t}function Rne(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const i=Fy(r,e);t[0]=r+i*(-2*e)}else if(r<n){const i=Fy(r,n);t[0]=r+i*(-2*n)}}else{const r=t.x;if(r>e){const i=Fy(r,e);t=t.clone().offset(i*(-2*e),0)}else if(r<n){const i=Fy(r,n);t=t.clone().offset(i*(-2*n),0)}}return t}function qXe(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=TT(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let u=0;for(let f=0;f<l.length;f++){const g=l[f][0];u=g>u?g:u}u=Number(u.toFixed(9));const h=-360*Fy(u,180);for(let f=0;f<l.length;f++){const g=s.getPoint(a,f);s.setPoint(a,f,g.clone().offset(h,0))}return!0}})}if(i===n){if(BXe(t))for(const a of TT(s))t[i]=t[i].addRing(a);else if(WXe(t))for(const a of TT(s))t[i]=t[i].addPath(a)}else n=i,t[i]=s}return t}async function KXe(t,e,n){if(!Array.isArray(t))return KXe([t],e);e&&typeof e!="string"&&eve().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??tr.geometryServiceUrl;let i,s,o,a,l,c,u,h,f=0;const g=[],v=[];for(const P of t)if(P!=null)if(i||(i=P.spatialReference,s=Da(i),o=i.isWebMercator,c=o?102100:4326,a=KR[c].maxX,l=KR[c].minX,u=KR[c].plus180Line,h=KR[c].minus180Line),s)if(P.type==="mesh")v.push(P);else if(P.type==="point")v.push(Rne(P.clone(),a,l));else if(P.type==="multipoint"){const M=P.clone();M.points=M.points.map(F=>Rne(F,a,l)),v.push(M)}else if(P.type==="extent"){const M=P.clone()._normalize(!1,!1,s);v.push(M.rings?new xi(M):M)}else if(P.extent){const M=P.extent,F=Fy(M.xmin,l)*(2*a);let C=F===0?P.clone():Q1e(P.clone(),F);M.offset(F,0);let{xmin:N,xmax:O}=M;N=Number(N.toFixed(9)),O=Number(O.toFixed(9)),M.intersects(u)&&O!==a?(f=O>f?O:f,C=Pne(C,o),g.push(C),v.push("cut")):M.intersects(h)&&N!==l?(f=O*(2*a)>f?O*(2*a):f,C=Pne(C,o,360),g.push(C),v.push("cut")):v.push(C)}else v.push(P.clone());else v.push(P);else v.push(P);let x=Fy(f,a),b=-90;const T=x,A=new ws;for(;x>0;){const P=360*x-180;A.addPath([[P,b],[P,-1*b]]),b*=-1,x--}if(g.length>0&&T>0){const P=qXe(g,await FXe(r,g,A,n)),M=[],F=[];for(let O=0;O<v.length;O++){const j=v[O];if(j!=="cut")F.push(j);else{const V=P.shift(),G=t[O];G!=null&&G.type==="polygon"&&G.rings&&G.rings.length>1&&V.rings.length>=G.rings.length?(M.push(V),F.push("simplify")):F.push(o?Qy(V):V)}}if(!M.length)return F;const C=await UXe(r,M,n),N=[];for(let O=0;O<F.length;O++){const j=F[O];j!=="simplify"?N.push(j):N.push(o?Qy(C.shift()):C.shift())}return N}const I=[];for(let P=0;P<v.length;P++){const M=v[P];if(M!=="cut")I.push(M);else{const F=g.shift();I.push(o===!0?Qy(F):F)}}return I}function YXe(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&Da(t.spatialReference);if(!n)return e;const[r,i]=n.valid,s=2*i,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=i||o>s||l<r||c>i)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=Ine(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=Ine(t.paths);break;case"multipoint":a=t.points}const u=e.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=i,c=Math.max(f,c)):(f-=i,l=Math.min(f,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=i,u.xmax-=i,u):e}function TW(t,e,n){const r=Da(n);if(r==null)return t;const[i,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<i&&(a=-Math.ceil(Math.abs(e-i)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<i&&(l=-Math.ceil(Math.abs(t-i)/o));let c=t+(a-l)*o;const u=c-e;return u>s?c-=o:u<i&&(c+=o),c}function P4t(t,e){return kW(e)?.normalize(t)??t}function kW(t){const e=Da(t);if(e==null)return null;const[n,r]=e.valid;return new DO(n,r)}const R4t=kW(Bt.WGS84);kW(Bt.WebMercator);const tve=96,nve=39.37,XXe=180/Math.PI;function rve(t){return t.wkid?t:t.spatialReference||Bt.WGS84}function AW(t,e){return e.type?ro(t,e.x,e.y):ew(t,e)}function ive(t){return Vd(t)}function WO(t,e,n=0){let r=t.width,i=t.height;if(n!==0){const a=mI(n),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,i=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,i/o)*iZe(t.spatialReference)}async function IS(t,e,n,r){let i,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ot.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(u=>"attributes"in u),l=t.some(u=>!u.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const u=new Map;for(const v of t){const x=v.layer,b=u.get(x)||[],T=v.attributes[x.objectIdField];T!=null&&b.push(T),u.set(x,b)}const h=[];u.forEach((v,x)=>{const b=e.allLayerViews?.find(T=>T.layer.id===x.id);if(b&&"queryFeatures"in b){const T=x.createQuery();T.objectIds=v,T.returnGeometry=!0,h.push(b.queryFeatures(T))}});const f=await Promise.all(h),g=[];for(const v of f)if(v&&v.features&&v.features.length)for(const x of v.features)x.geometry!=null&&g.push(x.geometry);c=g}for(const u of c)r=await IS(u,e,n,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")i=new Jt(t);else if(t instanceof js)i=t;else if("geometry"in t){if(t.geometry)i=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0,i=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new $n({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=YXe(i);break;default:s=i.extent}if(!s)return null;Sp()||mh(s.spatialReference,n)||await Vg();const o=cv(s,n);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=TW(a.x,r.center.x,n),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function ZXe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,n=0;for(const r of t){const i=r.layer;i?.minScale&&i.maxScale&&(e=i.minScale<e?i.minScale:e,n=i.maxScale>n?i.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function Cne(t,e){const n=rve(t);return fo(n,e)||n.imageCoordinateSystem||e.imageCoordinateSystem?t:cv(t,e)}async function JXe(t,e){if(!t||!e)return new su({targetGeometry:new Jt,scale:0,rotation:0});let n=e.spatialReference;const{constraints:r,padding:i,viewpoint:s,size:o}=e,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;t instanceof su?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof $n?c=t:t instanceof js?c=await IS(t,e,n):t&&(c=await IS(t.center,e,n)||await IS(t.target,e,n)||await IS(t,e,n)),!c&&s?.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),n||(n=rve(e.spatialReference||e.extent||c)),Sp()||fo(c.spatialReference,n)||mh(c.spatialReference,n)||await Vg();const u=Cne(c,n),h="center"in u?u.center:u;e.pickClosestTarget!==!1&&h.type==="point"&&s.targetGeometry?.type==="point"&&(h.x=TW(h.x,s.targetGeometry.x,h.spatialReference));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:s&&(f=s.rotation);let g=0;g=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:WO(Cne(c.extent,n),a,f);const v=ZXe(t.target??t);v&&(v.min&&v.min<g?g=v.min:v.max&&v.max>g&&(g=v.max));let x=new su({targetGeometry:h,scale:g,rotation:f});return r&&(x=r.fit(x),r.constrainByGeometry(x),r.rotationEnabled||(x.rotation=s.rotation)),x}function ua(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function QXe(t,e,n){return n?ro(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):yI(t,e,.5)}const eZe=(function(){const t=$i();return function(e,n,r){const i=n.targetGeometry;AW(t,i);const s=.5*hb(n);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=i.spatialReference,e}})();function tZe(t,e,n,r,i){return yV(t,e,n.center),t.scale=WO(n,r),i?.constraints?.constrain(t),t}function nZe(t,e,n,r){return RW(t,e,n,r),EW(t,t)}const sve=(function(){const t=$i();return function(e,n,r){return WB(e,sZe(e,n),QXe(t,n,r))}})(),rZe=(function(){const t=Ed(),e=$i();return function(n,r,i,s){const o=hb(r),a=IW(r);return ro(e,o,o),Z1e(t,e),AI(t,t,a),S2(t,t,sve(e,i,s)),S2(t,t,[0,s.top-s.bottom]),ro(n,t[4],t[5])}})();function hb(t){return t.scale*ove(t.targetGeometry?.spatialReference)}function ove(t){return sc(t)?1/(ive(t)*nve*tve):1}function IW(t){return BB(t.rotation)||0}function iZe(t){return sc(t)?ive(t)*nve*tve:1}function sZe(t,e){return yI(t,e,.5)}const PW=(function(){const t=$i(),e=$i(),n=$i();return function(r,i,s,o,a,l){return Lge(t,i),yI(e,s,.5*l),ro(n,1/o*l,-1/o*l),SW(r,e),a&&AI(r,r,a),BO(r,r,n),S2(r,r,t),r}})(),RW=(function(){const t=$i();return function(e,n,r,i){const s=hb(n),o=IW(n);return AW(t,n.targetGeometry),PW(e,t,r,s,o,i)}})(),oZe=(function(){const t=$i();return function(e,n,r,i){const s=hb(n);return AW(t,n.targetGeometry),PW(e,t,r,s,0,i)}})();function ave(t){const e=Da(t);return e?e.valid[1]-e.valid[0]:0}function aZe(t,e){return Math.round(ave(t)/e)}const lZe=(function(){const t=$i(),e=$i(),n=[0,0,0];return function(r,i,s){Lk(t,r,i),S9(t,t),Lk(e,r,s),S9(e,e),$ge(n,t,e);let o=Math.acos(Dge(t,e)/(G4(t)*G4(e)))*XXe;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),cZe=(function(){const t=$i();return function(e,n,r,i){const s=e.targetGeometry;return ua(e,n),rZe(t,n,r,i),s.x+=t[0],s.y+=t[1],e}})(),yV=function(t,e,n){ua(t,e);const r=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t},uZe=(function(){const t=$i();return function(e,n,r,i,s){s||(s="center"),WB(t,r,i),yI(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":ro(t,0,0);break;case"left":ro(t,-o,0);break;case"top":ro(t,0,a);break;case"right":ro(t,o,0);break;case"bottom":ro(t,0,-a);break;case"top-left":ro(t,-o,a);break;case"bottom-left":ro(t,-o,-a);break;case"top-right":ro(t,o,a);break;case"bottom-right":ro(t,o,-a)}return HO(e,n,t),e}})();function C4t(t,e,n){return ua(t,e),t.rotation+=n,t}function hZe(t,e,n){return ua(t,e),t.rotation=n,t}const dZe=(function(){const t=$i();return function(e,n,r,i,s){return ua(e,n),isNaN(r)||r===0||(cve(t,i,n,s),e.scale=n.scale*r,uve(t,t,e,s),HO(e,e,ro(t,t[0]-i[0],i[1]-t[1]))),e}})();function Mne(t,e,n){return ua(t,e),t.scale=n,t}const lve=(function(){const t=$i();return function(e,n,r,i,s,o){return ua(e,n),isNaN(r)||r===0||(cve(t,s,n,o),e.scale=n.scale*r,e.rotation+=i,uve(t,t,e,o),HO(e,e,ro(t,t[0]-s[0],s[1]-t[1]))),e}})(),M4t=(function(){const t=$i(),e=$i();return function(n,r,i,s,o,a,l){return sve(e,a,l),Cge(t,o,e),s?lve(n,r,i,s,t,a):dZe(n,r,i,t,a)}})(),cve=(function(){const t=Ed();return function(e,n,r,i){return nd(e,n,nZe(t,r,i,1))}})(),uve=(function(){const t=Ed();return function(e,n,r,i){return nd(e,n,RW(t,r,i,1))}})(),HO=(function(){const t=$i(),e=Ed();return function(n,r,i){ua(n,r);const s=hb(r),o=n.targetGeometry;return X1e(e,IW(r)),BO(e,e,kI(s,s)),nd(t,i,e),o.x+=t[0],o.y+=t[1],n}})();function hve(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function fZe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function pZe(t,e,n,r,i,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function dve(t,e,n,r){const i=e[r],s=e[r+1];t[r]=n[0]*i+n[2]*s+n[4],t[r+1]=n[1]*i+n[3]*s+n[5]}function mZe(t,e,n,r=0,i=0,s=2){const o=i||e.length/s;for(let a=r;a<o;a++)dve(t,e,n,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:fZe,create:hve,fromValues:pZe,transform:dve,transformMany:mZe},Symbol.toStringTag,{value:"Module"}));function qM(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function gZe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yZe(t,e,n,r,i,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:gZe,create:qM,fromValues:yZe},Symbol.toStringTag,{value:"Module"}));function fve(){return new Float32Array(2)}function vZe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function T2(t,e){const n=new Float32Array(2);return n[0]=t,n[1]=e,n}function pve(){return fve()}function mve(){return T2(1,1)}function gve(){return T2(1,0)}function yve(){return T2(0,1)}const _Ze=pve(),xZe=mve(),wZe=gve(),bZe=yve();Object.freeze(Object.defineProperty({__proto__:null,ONES:xZe,UNIT_X:wZe,UNIT_Y:bZe,ZEROS:_Ze,clone:vZe,create:fve,fromValues:T2,ones:mve,unitX:gve,unitY:yve,zeros:pve},Symbol.toStringTag,{value:"Module"}));function EZe(t){return t instanceof Float32Array&&t.length>=2}function SZe(t){return Array.isArray(t)&&t.length>=2}function Q$(t){return EZe(t)||SZe(t)}var vV;const lf=[0,0];let bf=vV=class extends qt{constructor(t){super(t),this._viewpoint2D={center:$i(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new $n,this.id=0,this.inverseTransform=Ed(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Ed(),this.transformNoRotation=Ed(),this.displayMat3=qM(),this.displayViewMat3=qM(),this.viewMat3=qM(),this.viewMat2d=hve(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=ua(n,t.viewpoint),this._set("size",ew(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new vV({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return Q$(e)?nd(t,e,this.inverseTransform):(lf[0]=e,lf[1]=n,nd(t,lf,this.inverseTransform))}toScreen(t,e,n){return Q$(e)?nd(t,e,this.transform):(lf[0]=e,lf[1]=n,nd(t,lf,this.transform))}toScreenNoRotation(t,e,n){return Q$(e)?nd(t,e,this.transformNoRotation):(lf[0]=e,lf[1]=n,nd(t,lf,this.transformNoRotation))}wrapMapCoordinate(t,e){ew(t,e);const[n]=e,[r]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const l=ave(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(n<o||n>a)&&(t[0]=TW(n,r,s)),t}getScreenTransform(t,e){const{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return PW(t,n,i,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new su({targetGeometry:new Jt(t[0],t[1],e),scale:n,rotation:r});if(this._set("viewpoint",o),!s||!e||!n)return;this.resolution=hb(o),this.rotation=r,this.scale=n,this.spatialReference=e,ew(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;tw(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Gge(this.viewMat3),u=T2(s[0]/2,s[1]/2),h=T2(-s[0]/2,-s[1]/2),f=BB(r);k9(c,c,u),Hge(c,c,f),k9(c,c,h),$k(this.displayViewMat3,this.displayMat3,c);const g=SW(this.viewMat2d,u);return AI(g,g,f),S2(g,g,h),eZe(this.extent,o,s),RW(this.transform,o,s,i),EW(this.inverseTransform,this.transform),oZe(this.transformNoRotation,o,s,i),this.worldScreenWidth=aZe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};_([E({readOnly:!0})],bf.prototype,"id",void 0),_([E({value:1,json:{write:!0}})],bf.prototype,"pixelRatio",null),_([E({json:{write:!0}})],bf.prototype,"size",null),_([E()],bf.prototype,"spatialReference",void 0),_([E({type:su,json:{write:!0}})],bf.prototype,"viewpoint",null),_([E({readOnly:!0})],bf.prototype,"visibleArea",null),bf=vV=_([ue("esri.views.2d.ViewState")],bf);const Nne=bf;var _V,xV;let Ff=_V=class extends Kt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new _V({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};_([E()],Ff.prototype,"left",void 0),_([E()],Ff.prototype,"top",void 0),_([E()],Ff.prototype,"right",void 0),_([E()],Ff.prototype,"bottom",void 0),Ff=_V=_([ue("esri.views.2d.PaddedViewState.Padding")],Ff);let ex=xV=class extends Nne{constructor(...t){super(...t),this.paddedViewState=new Nne,this._updateContent=(()=>{const e=$i();return()=>{const n=this._get("size"),r=this._get("padding");if(!n||!r)return;const i=this.paddedViewState;ro(e,r.left+r.right,r.top+r.bottom),Lk(e,n,e),ew(i.size,e);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(dn(()=>[this.size,this.padding],()=>this._updateContent(),Fg)),this.padding=new Ff,this.size=[0,0]}set padding(t){this._set("padding",t||new Ff)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const n=this._get("padding");n&&(e=cZe(t.clone(),t,this._get("size"),n));const{targetGeometry:r,rotation:i,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=i,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new xV({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};_([E()],ex.prototype,"paddedViewState",void 0),_([E({type:Ff})],ex.prototype,"padding",null),_([E()],ex.prototype,"viewpoint",null),ex=xV=_([ue("esri.views.2d.PaddedViewState")],ex);const CW=ex;let PS=class extends Kt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};_([E()],PS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),_([E()],PS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),PS=_([ue("esri.views.support.debugFlags")],PS);const TZe=new PS,vve=Symbol("Yield");let kZe=class{constructor(){this._tasks=new Array,this._numPendingTasks=E2(0),this._readyToRun=E2(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return vve;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,n,r){return this._addTask((i,s)=>new Lne(i,s,e,n,r),Array.prototype.push)}unshift(e,n,r){return this._addTask((i,s)=>new Lne(i,s,e,n,r),Array.prototype.unshift)}pushGenerator(e,n,r){return this._addTask((i,s)=>new AZe(i,s,e,n,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const n=this._tasks.shift();this._updateReadyToRun();try{if(fa(n.signal))this._cancelTask(n,kr());else switch(n.type){case 0:this._processSimple(n,e);break;case 1:this._processGenerator(n,e);break;case 2:this._processIterator(n,e);break;default:}}catch(r){n.reject(r)}return!0}cancelAll(){const e=kr();for(const n of this._tasks)this._cancelTask(n,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,n){if(e.abortCallback){const r=e.abortCallback(n);e.type===2&&e.iterator.return&&One(e.iterator.return()),pa(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&One(e.iterator.throw(n)),e.reject(n)}_onIteratorResult(e,n){n.done?e.resolve(n.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,n){const r=e.callback(n);pa(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,n){const r=e.generatorFunction(n),i=new IZe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(i,n)}_processIterator(e,n){const r=e.iterator.next(n);pa(r)?r.then(i=>this._onIteratorResult(e,i),e.reject):this._onIteratorResult(e,r)}_addTask(e,n){return new Promise((r,i)=>{const s=e(r,i);n.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function One(t){pa(t)?t.then(ej,ej):ej(t)}function ej(t){_a(t)||t instanceof Error||t instanceof Xe||t!=null&&typeof t=="object"&&"done"in t&&t.done||Tt.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let MW=class{constructor(e,n,r=void 0,i=void 0){this.resolve=e,this.reject=n,this.signal=r,this.abortCallback=i}},Lne=class extends MW{constructor(e,n,r,i,s){super(e,n,i,s),this.callback=r,this.type=0}},AZe=class extends MW{constructor(e,n,r,i,s){super(e,n,i,s),this.generatorFunction=r,this.type=1}},IZe=class extends MW{constructor(e,n,r,i,s){super(e,n,i,s),this.iterator=r,this.type=2}};function PZe(){return new OZe}const On={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},jc=0,Dne=new Map([[On.RESOURCE_CONTROLLER_IMMEDIATE,jc],[On.RESOURCE_CONTROLLER,4],[On.SLIDE,jc],[On.STREAM_DATA_LOADER,jc],[On.ELEVATION_QUERY,jc],[On.TERRAIN_SURFACE,1],[On.SURFACE_GEOMETRY_UPDATES,1],[On.LOD_RENDERER,2],[On.GRAPHICS_CORE,2],[On.I3S_CONTROLLER,2],[On.POINT_CLOUD_LAYER,2],[On.FEATURE_TILE_FETCHER,2],[On.STREAM_CONTROLLER,2],[On.CLOUDS_GENERATOR,2],[On.OVERLAY,4],[On.OVERLAY_RENDERER,4],[On.STAGE,4],[On.GRAPHICS_DECONFLICTOR,4],[On.FILTER_VISIBILITY,4],[On.SCALE_VISIBILITY,4],[On.FRUSTUM_VISIBILITY,4],[On.POINT_OF_INTEREST_FREQUENT,6],[On.POINT_OF_INTEREST_INFREQUENT,30],[On.LABELER,8],[On.FEATURE_QUERY_ENGINE,8],[On.FEATURE_TILE_TREE,16],[On.FEATURE_TILE_TREE_ACTIVE,jc],[On.ELEVATION_ALIGNMENT,12],[On.ELEVATION_ALIGNMENT_SCENE,14],[On.TEXT_TEXTURE_ATLAS,12],[On.TEXTURE_UNLOAD,12],[On.LINE_OF_SIGHT_TOOL,16],[On.LINE_OF_SIGHT_TOOL_INTERACTIVE,jc],[On.SNAPPING,jc],[On.SHADOW_ACCUMULATOR,30],[On.FLOW_GENERATOR,12],[On.MAPVIEW_FETCH_QUEUE,jc],[On.MAPVIEW_LAYERVIEW_UPDATE,2],[On.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,jc]]);function $ne(t){return Dne.has(t)?Dne.get(t):typeof t=="number"?t:1}const RZe=6.5,jne=1,CZe=30,MZe=1e3/30,NZe=100,Fne=.9;let OZe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=E2(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new sT("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new _ve,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=dn(()=>TZe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,ma);for(const e of Object.keys(On))this.performanceInfo.tasks.set(On[e],new sT(String(On[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,ri(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,n){const r=new LZe(this,e,n);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new sT(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const n=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-n),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let n=RZe,r=e.frameDuration,i=jne;switch(this.state){case 2:n=0,r=Math.max(NZe,e.frameDuration),i=CZe;break;case 1:r=Math.max(MZe,e.frameDuration)}return r=r-e.elapsedFrameTime-n,this.state!==2&&r<jne&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,i),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){EF(this._tasks,e),EF(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(n=>{n.name===e&&n.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let n="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?n="r":n!=="r"&&(n="w"))}),n}_getRuntime(e){let n=0;return this._tasks.forEach(r=>{r.name===e&&(n+=r.runtime)}),n}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let n="";return e.forEach((r,i)=>{n+=r>1?` ${r}x ${i}`:` ${i}`}),n}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((n,r)=>r.needsUpdate?++n:n,0);this._load=this._load*Fne+e*(1-Fne)}_schedule(){for(PDe(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===jc&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,n=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==jc&&r.blockFrame!==this._frameNumber&&(e=!0,n=Math.max(n,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===vve&&(n.blockFrame=this._frameNumber)}catch(i){Tt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,i),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-e;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(On))this._frameTaskTimes.set(On[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((n,r)=>this.performanceInfo.tasks.get(r).push(n)),this.performanceInfo.total.push(e)}get test(){return this._test}},LZe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,n,r){this._scheduler=e,this.name=n,this.blockFrame=0,this.runtime=0,this._queue=new kZe,this._handles=new tb,this._basePriority=$ne(n),this.schedulePriority=this._basePriority,this._task=E2(r??this._queue),this._handles.add(pc(()=>this.task.readyToRun,i=>e.taskRunningChanged(i)))}remove(){this.processQueue(kT),this._scheduler.removeTask(this),this.schedule=tj.schedule,this.reschedule=tj.reschedule,this.scheduleGenerator=tj.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const n=$ne(e);this._basePriority!==jc&&this.schedulePriority===0||(this.schedulePriority=n),this._basePriority=n}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,n,r){return this._queue.push(e,n,r)}reschedule(e,n,r){return this._queue.unshift(e,n,r)}scheduleGenerator(e,n,r){return this._queue.pushGenerator(e,n,r)}processQueue(e){return this._queue.runTask(e)}},_ve=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const kT=new _ve;kT.enabled=!1;let DZe=class{remove(){}processQueue(){}schedule(e,n,r){try{if(fa(n)){const i=kr();return r?Promise.resolve(r(i)):Promise.reject(i)}return PF(e(kT))}catch(i){return Promise.reject(i)}}reschedule(e,n,r){return this.schedule(e,n,r)}async scheduleGenerator(e,n,r){if(fa(n)){const s=kr();if(r)return r(s);throw s}const i=e(kT);for(;;){const s=i.next(kT),o=pa(s)?await s:s;if(fa(n)){const a=kr();if(r){const c=r(a),u=i.return(null);return pa(u)&&await m4(u),c}const l=i.throw(a);throw pa(l)&&await m4(l),a}if(o.done)return o.value}}};const tj=new DZe;let $Ze=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=PZe(),this._schedulerHandle=pc(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||pa(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=n=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(n)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new CW,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=dn(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=u2(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const n=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function jZe(t,e){const{spatialReference:n}=e,r=[e.x,e.y];let i,s,o,a;const l=[0,0],c=FZe(t);for(let f=0;f<c.length;f++){const g=c[f];for(let v=0;v<g.length-1;v++){tze(l,r,g,v);const x=MO(r,l);(i==null||x<i)&&(i=x,s=[...l],o=f,a=v)}}if(i==null||!s||o==null||a==null)throw new Xe("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,h]=s;return{coordinate:new Jt({x:u,y:h,spatialReference:n}),distance:i}}function FZe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var wV;let Ey=wV=class extends $B(Kt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return cv(this.geometry,this.spatialReference)}catch(t){return Tt.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?uI(this.normalizedGeometry,n):_B(this.normalizedGeometry,n))return t;const{coordinate:r}=jZe(this.normalizedGeometry,n);return r&&(t.targetGeometry=r),t}clone(){return new wV({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};_([E({constructOnly:!0})],Ey.prototype,"geometry",void 0),_([E({readOnly:!0})],Ey.prototype,"normalizedGeometry",null),_([E({constructOnly:!0})],Ey.prototype,"spatialReference",void 0),Ey=wV=_([ue("esri.views.2d.constraints.GeometryConstraint")],Ey);var bV;let RS=bV=class extends $B(Kt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new bV({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};_([E()],RS.prototype,"enabled",void 0),_([E()],RS.prototype,"rotationEnabled",void 0),RS=bV=_([ue("esri.views.2d.constraints.RotationConstraint")],RS);const xve=RS;var EV;let Za=EV=class extends $B(Kt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:r,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!e?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);e=e.map(u=>u.clone()),e.sort((u,h)=>h.scale-u.scale),e.forEach((u,h)=>u.level=h);for(const u of e)!l&&n>0&&n>=u.scale&&(o=u.level,l=!0),!c&&r>0&&r>=u.scale&&(a=t?t.level:-1,c=!0),t=u;i===-1&&(i=n===0?0:o),s===-1&&(s=r===0?e.length-1:a),i=Math.max(i,0),i=Math.min(i,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),i>s&&([i,s]=[s,i]),n=e[i].scale,r=e[s].scale,e.splice(0,i),e.splice(s-i+1),e.forEach((u,h)=>{this._lodByScale[u.scale]=u,this._scales[h]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const n=this.effectiveMinScale,r=this.effectiveMaxScale,i=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=n!==0&&t.scale>n;if(o||a){const l=a?n:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);i.x=s.x+(i.x-s.x)*c,i.y=s.y+(i.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const n=Math.floor(t),r=Math.ceil(t);return e[n]+(t-n)*(e[r]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let n,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let i=0;i<e.length-1;i++){if(n=e[i],r=e[i+1],r===t)return i+this.effectiveMinZoom+1;if(n>t&&r<t)return i+this.effectiveMinZoom+1-(t-r)/(n-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new EV({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};_([E({readOnly:!0})],Za.prototype,"effectiveLODs",void 0),_([E({readOnly:!0})],Za.prototype,"effectiveMinZoom",void 0),_([E({readOnly:!0})],Za.prototype,"effectiveMaxZoom",void 0),_([E({readOnly:!0})],Za.prototype,"effectiveMinScale",void 0),_([E({readOnly:!0})],Za.prototype,"effectiveMaxScale",void 0),_([E()],Za.prototype,"lods",void 0),_([E()],Za.prototype,"minZoom",void 0),_([E()],Za.prototype,"maxZoom",void 0),_([E()],Za.prototype,"minScale",void 0),_([E()],Za.prototype,"maxScale",void 0),_([E()],Za.prototype,"snapToZoom",void 0),Za=EV=_([ue("esri.views.2d.constraints.ZoomConstraint")],Za);const wve=Za,VZe={base:null,key:"type",typeMap:{extent:$n,polygon:xi}};let Ui=class extends Kt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ot}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Ey({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new xve({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),n=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===n&&e.minZoom===r&&e.maxZoom===i&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new wve({lods:n,minZoom:r,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const n=this.effectiveMaxScale;return n===0||e>=n}canZoomOutTo(e){const n=this.effectiveMinScale;return n===0||e<=n}constrain(e,n){return this._zoom.constrain(e,n),this._rotation.constrain(e,n),this._geometry.constrain(e,n),this.customConstraints.forEach(r=>r.constrain(e,n)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(n=>n.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};_([E({readOnly:!0})],Ui.prototype,"effectiveLODs",null),_([E({readOnly:!0})],Ui.prototype,"effectiveMinScale",null),_([E({readOnly:!0})],Ui.prototype,"effectiveMaxScale",null),_([E({readOnly:!0})],Ui.prototype,"effectiveMinZoom",null),_([E({readOnly:!0})],Ui.prototype,"effectiveMaxZoom",null),_([E({types:VZe,value:null})],Ui.prototype,"geometry",null),_([E({type:[Ao]})],Ui.prototype,"lods",void 0),_([E()],Ui.prototype,"minScale",void 0),_([E()],Ui.prototype,"maxScale",void 0),_([E()],Ui.prototype,"minZoom",void 0),_([E()],Ui.prototype,"maxZoom",void 0),_([E()],Ui.prototype,"rotationEnabled",void 0),_([E()],Ui.prototype,"snapToZoom",void 0),_([E({type:Ot})],Ui.prototype,"customConstraints",void 0),_([E()],Ui.prototype,"view",void 0),_([E({readOnly:!0})],Ui.prototype,"version",null),_([E({type:Ey,readOnly:!0})],Ui.prototype,"_geometry",null),_([E({type:xve})],Ui.prototype,"_rotation",null),_([E({readOnly:!0,type:wve})],Ui.prototype,"_zoom",null),Ui=_([ue("esri.views.2d.MapViewConstraints")],Ui);const Vne=Ui;let qo=class extends Kt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([dn(()=>this.constraints?.version,n=>{this.constraints&&n&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Fg)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:n}=this.state.paddedViewState;return this.state.commitProperty("id"),new Jt({x:e[0],y:e[1],spatialReference:n})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void Tt.getLogger(this).error(new Xe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;yV(r,r,n),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Tt.getLogger(this).error(new Xe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void Tt.getLogger(this).error(new Xe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;tZe(r,r,n,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const n=this.viewpoint;hZe(n,n,e),this.viewpoint=n}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const n=this.viewpoint;Mne(n,n,e),this.viewpoint=n}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let n,r;try{n=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new Xe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new Xe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new Xe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void Tt.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const i=new su({targetGeometry:new Jt,scale:0,rotation:0});ua(i,n),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const n=this.constraints?.zoomToScale(e)??0;if(!n)return void this._set("zoom",-1);const r=this.viewpoint;Mne(r,r,n),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:n,constraints:r}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let h,f,g;const v=l?.rotation,x=l?.targetGeometry;x?.type==="extent"?h=x:x?.type==="point"&&(f=x,g=l?.scale);const b=s??h;return{center:i??f??b?.center,rotation:a??v,scale:(o??u??g??(b&&WO(b,[e[0]-n.left-n.right,e[1]-n.top-n.bottom])))||void 0}}startup(e,n,r,i){const s=e.targetGeometry;try{this._project(e,r)}catch(o){Tt.getLogger(this).warn(new Cd("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=i||new Jt({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new CW({padding:this.padding,size:n,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,n],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,o=new Jt({x:e,y:n,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const n=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=n.scale;else{const l=n.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=l}const r=n.clone(),[i,s]=n.center;let o=null;try{o=this._project(new Jt({x:i,y:s,spatialReference:n.spatialReference}),e)}catch(l){dpe()||Tt.getLogger(this).warn(new Cd("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new Jt({x:0,y:0,spatialReference:e}));const a=yV(new su({targetGeometry:new Jt,scale:0,rotation:0}),n.viewpoint,o);r.viewpoint=a;try{const c=[n.size[0]/2,n.size[1]/2],u=[c[0]+20,c[1]],h=n.toMap([0,0],u),{x:f,y:g}=this._project(new Jt({x:h[0],y:h[1],spatialReference:n.spatialReference}),e);h[0]=f,h[1]=g,r.toScreen(h,h);const v=lZe(c,h,u),x=Math.hypot(h[0]-c[0],h[1]-c[1])/20;!Number.isFinite(x)||Math.abs(x)>4?(a.rotation=0,a.targetGeometry=new Jt({x:0,y:0,spatialReference:e})):(a.scale*=x,a.scale>ye("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,n){if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,n],uZe(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;const n=[0,0],[r,i]=this.state.toMap(n,[e.x,e.y]),s=this.state.spatialReference;return new Jt({x:r,y:i,spatialReference:s})}toScreen(e,n){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),i=[r.x,r.y];return n?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),Us(i[0],i[1])}_project(e,n){const r=e?.targetGeometry||e;if(!n)return e;if(!r)return null;if(n.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||fo(n,r.spatialReference))return e;const i=cv(r,n);if(!i)throw new Xe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:n});return zZe(e)?(e.targetGeometry=i,e):i}};function zZe(t){return t?.declaredClass==="esri.Viewpoint"}_([E({type:Jt})],qo.prototype,"center",null),_([E()],qo.prototype,"constraints",void 0),_([E({type:$n})],qo.prototype,"extent",null),_([E({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],qo.prototype,"padding",null),_([E()],qo.prototype,"ready",void 0),_([E()],qo.prototype,"resizeAlign",void 0),_([E({readOnly:!0})],qo.prototype,"resolution",null),_([E({type:Number})],qo.prototype,"rotation",null),_([E({type:Number})],qo.prototype,"scale",null),_([E({readOnly:!0})],qo.prototype,"state",void 0),_([E({type:su})],qo.prototype,"viewpoint",null),_([E({readOnly:!0})],qo.prototype,"visibleArea",null),_([E()],qo.prototype,"zoom",null),qo=_([ue("esri.views.2d.ViewStateManager")],qo);const zne=160;let CS=class extends Kt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=zne&&this.clear()},zne))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};_([E()],CS.prototype,"_timer",void 0),_([E()],CS.prototype,"stationary",null),CS=_([ue("esri.views.2d.support.StationaryManager")],CS);const UZe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new qo({constraints:new Vne({view:this})}),this.stationaryManager=new CS,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new $Ze(this),this.viewEvents=new C1e(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([dn(()=>this.viewpoint,()=>this.stationaryManager.flip(),Fg)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return _([E({readOnly:!0})],n.prototype,"animationManager",void 0),_([E({readOnly:!0})],n.prototype,"fullOpacity",void 0),_([E()],n.prototype,"stateManager",void 0),_([E()],n.prototype,"constraintsInfo",null),_([E()],n.prototype,"extent",null),_([E({readOnly:!0})],n.prototype,"state",null),_([E({readOnly:!0})],n.prototype,"mapViewNavigation",void 0),_([E()],n.prototype,"renderingOptions",void 0),_([E({readOnly:!0})],n.prototype,"interacting",null),_([E()],n.prototype,"stationary",null),_([E()],n.prototype,"animation",null),_([E({type:Vne})],n.prototype,"constraints",null),_([E()],n.prototype,"padding",null),_([E()],n.prototype,"resizeAlign",null),_([E()],n.prototype,"rotation",null),_([E({readOnly:!0})],n.prototype,"viewEvents",void 0),_([E({type:su})],n.prototype,"viewpoint",null),n=_([ue("esri.views.Viewport2DBaseMixin")],n),n},GZe=()=>tr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Lw;let tx=(Lw=class extends uB{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=fc(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new Xe("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,n){n||(n=pa(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",n)}},Lw.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Lw);_([E({readOnly:!0})],tx.prototype,"done",null),_([E({readOnly:!0,type:String})],tx.prototype,"state",void 0),_([E()],tx.prototype,"target",void 0),tx=_([ue("esri.views.ViewAnimation")],tx);const SV=tx;let KM=class extends Kt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,n){if(!e)return void Tt.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new SV;this.view.animation=r,await LB(()=>this.view.ready,n);const i={...n,animate:n?.animate??(!GZe()&&this.view.animationsEnabled),animationMode:n?.animationMode??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h}=this.view,f=JXe(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h,pickClosestTarget:n?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},i.animate?this._gotoAnimated(f,i):this._gotoImmediate(f,i)}_gotoImmediate(e,n){const r=this._gotoTask,i=this.view.animation,s=e.then(o=>{if(pi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=o,i.finish()});return this._cancellableGoTo(r,i,s,n)}_gotoAnimated(e,n){const r=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();const s=e.then(o=>{if(pi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");return i.update(o),this.view.animationManager.animate(i,this.view.viewpoint,n),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,s,n)}_cancellableGoTo(e,n,r,i){const s=()=>e===this._gotoTask;return k6e(r,i).finally(()=>{s()&&(n.done||n.stop())})}};_([E({constructOnly:!0})],KM.prototype,"view",void 0),KM=_([ue("esri.views.2d.GoToManager")],KM);function bve(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function Eve(t,e){return e.some(n=>bve(t,n))}function Une(t,{dragPrimary:e,dragSecondary:n,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:n},{key:"tertiary",value:r}].filter(i=>i.value===t).map(i=>i.key)}let Gne=class extends qs{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(e,n){bve(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},BZe=class extends qs{constructor(e,n,r){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(e){const{data:n}=e,{pointerType:r}=n;if(r!==this.pointerType)return;e.stopPropagation();const{action:i,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const h=l.snapScale(this._currentScale),f=(s.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},qO=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const n=e.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},WZe=class extends qs{constructor(e,n,r){super(!0),this.view=e,this.pointerActions=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new qO({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&Eve(r.data,this.pointerActions)})}_handleDrag(e){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},HZe=class extends qs{constructor(e,n,r){super(!0),this._view=e,this.pointerActions=n;const i=this._view.mapViewNavigation;this._dragEventSeparator=new qO({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&Eve(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function Sve(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function qZe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function KZe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function YZe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Tve(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function kve(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function Ave(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function XZe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function ZZe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function JZe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function QZe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function eJe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function tJe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function nJe(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t}function rJe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Ive(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function iJe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Pve(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function Rve(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Cve(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function sJe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function oJe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function TV(t,e){const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function Mve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function aJe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function lJe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=i*l-s*a,u=s*o-r*l,h=r*a-i*o,f=Math.sqrt(c*c+u*u+h*h);return t[0]=c/f,t[1]=u/f,t[2]=h/f,t}function cJe(t,e,n,r){const i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function uJe(t,e,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+r[0]*c+i[0]*u,t[1]=e[1]*a+n[1]*l+r[1]*c+i[1]*u,t[2]=e[2]*a+n[2]*l+r[2]*c+i[2]*u,t}function hJe(t,e,n,r,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return t[0]=e[0]*c+n[0]*u+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*u+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*u+r[2]*h+i[2]*f,t}function dJe(t,e=1){const n=GB,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=i*e,t}function fJe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12],t[1]=n[1]*r+n[5]*i+n[9]*s+n[13],t[2]=n[2]*r+n[6]*i+n[10]*s+n[14],t}function pJe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function mJe(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,v=s*u-r*f,x=r*h-i*u,b=2*o;return t[0]=a+u*b+2*g,t[1]=l+h*b+2*v,t[2]=c+f*b+2*x,t}function gJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function yJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function vJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function _Je(t,e){TV(Bne,t),TV(Wne,e);const n=Mve(Bne,Wne);return n>1?0:n<-1?Math.PI:Math.acos(n)}const Bne=n0(),Wne=n0();function xJe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function wJe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function bJe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=xl();return Math.abs(n-s)<=l*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function EJe(t,e,n){const r=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const SJe=Tve,TJe=kve,kJe=Ave,AJe=Pve,IJe=Rve,PJe=Sve,RJe=Cve;Object.freeze(Object.defineProperty({__proto__:null,abs:JZe,add:YZe,angle:_Je,bezier:hJe,ceil:XZe,clamp:nJe,copy:qZe,cross:aJe,crossAndNormalize:lJe,direction:EJe,dist:AJe,distance:Pve,div:kJe,divide:Ave,dot:Mve,equals:bJe,exactEquals:wJe,floor:ZZe,hermite:uJe,inverse:oJe,len:PJe,length:Sve,lerp:cJe,max:tJe,min:eJe,mul:TJe,multiply:kve,negate:sJe,normalize:TV,random:dJe,rotateX:gJe,rotateY:yJe,rotateZ:vJe,round:rJe,scale:Ive,scaleAndAdd:iJe,set:KZe,sign:QZe,sqrDist:IJe,sqrLen:RJe,squaredDistance:Rve,squaredLength:Cve,str:xJe,sub:SJe,subtract:Tve,transformMat3:pJe,transformMat4:fJe,transformQuat:mJe},Symbol.toStringTag,{value:"Module"}));function Nu(t){let e=t*t;return t<0&&(e*=-1),e}function CJe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function MJe(t,e,n){const r=n,i=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Nu(i.axes[0]),r.translation[1]=Nu(i.axes[1]),r.translation[2]=Nu(i.buttons[7])-Nu(i.buttons[6]),r.heading=Nu(i.axes[2]),r.tilt=Nu(i.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Nu(i.axes[0]),r.translation[1]=1.2*Nu(i.axes[1]),r.translation[2]=2*-Nu(i.axes[2]),r.heading=1.2*Nu(i.axes[5]),r.tilt=1.2*Nu(i.axes[3])),r.tilt*=o,Ive(r.translation,r.translation,a),r}function NJe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let OJe=class extends qs{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new tb,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([dn(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=u2({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ma)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,CJe(this._transformation)):(this._currentDevice=e.data.device,MJe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const n=this._transformation;if(NJe(n))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=DJe*i*e;HO(r,r,[n.translation[0]*s,-n.translation[1]*s]);const o=1+n.translation[2]*$Je*e,a=this._view.constraints.rotationEnabled?-n.heading*LJe*e:0,l=this._view.size,c=[l[0]/2,l[1]];lve(r,r,o,a,c,l);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const LJe=.06,DJe=.7,$Je=6e-4;function Nve(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Kn(()=>document.removeEventListener("visibilitychange",e))}let jJe=class extends qs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const s=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;i.stopPropagation(),i.preventDefault();const o=i.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=Nve(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const n=this._currentDirection!=null;if(e!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},FJe=class extends qs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(n),this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=Nve(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,n){for(const r of e)this._keyToDirection.set(r,n)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection.get(e.data.key);if(this._pressed=i!=null,this._pressed){if(e.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},VJe=class extends qs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=0),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(i){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const zJe=.6;let UJe=class extends qs{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:r,y:i,deltaY:s}=e.data,o=1/zJe**(1/60*s),a=n.zoom(o,[r,i]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()})}},GJe=class extends qs{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new qO({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Hne(t){const e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value||1:0),axes:e.axes.map(n=>HJe(n,t.axisThreshold))}:{buttons:[],axes:[]}}function BJe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function WJe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function HJe(t,e){const n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}let qJe=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,Hne(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(qne(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const n=new wW(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=u2({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;qne(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=Hne(s),l=r||WJe(a);o&&(o.timestamp===i.timestamp||!o.active&&l||BJe(o.state,a))||this._emitGamepadEvent(i,a,!l)})}_emitGamepadEvent(e,n,r){const i=this._latestUpdate[e.index],s=i&&i.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:o})}};function KJe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function qne(t){for(const e of navigator.getGamepads())KJe(e)&&t(e)}const Kne=ye("edge"),YJe=ye("chrome"),XJe=ye("ff"),ZJe=ye("safari"),Yne="esri-view-surface",x_={touchNone:`${Yne}--touch-none`,touchPan:`${Yne}--touch-pan`};var u1;let JJe=(u1=class{constructor(e,n){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new qJe(e,n),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Ni(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const n in this._active)if(!e||!e.has(n)){const r=this._active[n];this._element.removeEventListener(nj[n],r),delete this._active[n]}e&&e.forEach(n=>{if(!this._active[n]&&nj[n]){const r=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(nj[n],r),this._active[n]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,n){n?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?x_.touchNone:x_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?x_.touchPan:x_.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(x_.touchNone),this._element.classList.remove(x_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,n){const r=N1e(this._element,e);return u1.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(e,n){const{key:r}=n;r&&e==="key-up"&&this._keyDownState.delete(r);const i={native:n,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(i.key),this._callback(e,i)}_handlePointer(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ye("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,n){let r=this._getDeltaFromTrackpadOrMouseWheel(n);switch(n.deltaMode){case 0:Kne&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Kne?r*=.7:YJe||ZJe?r*=.6:XJe&&(r*=1.375);const i=100,s=Math.abs(r);s>i&&(r=r/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(e,n)}_handleDefault(e,n){const r={native:n};n.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},u1.test={disableSubpixelCoordinates:!1},u1);const nj={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let QJe=class extends qs{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const Ove=()=>({maximumClickDelay:300}),eQe=(t={})=>({...Ove(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),NW=(t={})=>({...Ove(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function Z4(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function tQe(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function nQe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Us()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[I,P]=t,[M,F]=[P.x-I.x,P.y-I.y];return e.radius=Math.sqrt(M*M+F*F)/2,e.center.x=(I.x+P.x)/2,e.center.y=(I.y+P.y)/2,e}let n=0,r=0;for(let I=0;I<t.length;I++)n+=t[I].x,r+=t[I].y;n/=t.length,r/=t.length;const i=t.map(I=>I.x-n),s=t.map(I=>I.y-r);let o=0,a=0,l=0,c=0,u=0,h=0,f=0;for(let I=0;I<i.length;I++){const P=i[I],M=s[I],F=P*P,C=M*M;o+=F,a+=C,l+=P*M,c+=F*P,u+=C*M,h+=P*C,f+=M*F}const g=.5*(c+h),v=.5*(u+f),x=o*a-l*l,b=(g*a-v*l)/x,T=(o*v-l*g)/x,A=Us(b+n,T+r);return{radius:Math.sqrt(b*b+T*T+(o+a)/t.length),center:A}}function i1(t){const{native:e}=t,{pointerId:n,button:r,pointerType:i}=e;return i==="mouse"?`${n}:${r}`:`${i}`}let rQe=class extends qs{constructor(e={},n=Z2){super(!1),this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Us(0,0),this._pointerState=new Map,this._parameters=NW(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new qO({start:(r,i)=>this._dragStart(r,i),update:(r,i)=>this._dragUpdate(i),end:(r,i)=>this._dragEnd(i)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=ri(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const n=this._pointerState.get(e);n&&(n.doubleTapTimeout=ri(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=n,{center:s}=r;this._dragStartCenter=s;const o=rj("begin",Us(0,0),r);this._doubleTapDrag.emit(o,void 0,i),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=rj("update",Us(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=rj("end",Us(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:n}=e,r=i1(n),i=this._pointerState.get(r),{pointerType:s}=n.native;if(i){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),Z4(i.event.data,n)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:n}=e,{pointerType:r}=n.native,i=i1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function rj(t,e,n){const{button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}=n;return{action:t,delta:e,button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}}let iQe=class extends qs{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,r,i){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:sQe(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const n=e.native.pointerId,r=YR(this._activePointerMap).angle,i={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);const s=YM(i,Lve(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const n=e.native.pointerId,r=this._activePointerMap.get(n);r?r.event=e:this._addPointer(e)}_removePointer(e){const n=YR(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){const n=YR(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=YM(r,n)-e,r.lastAngle=YM(r,n)-e})}_emitEvent(e,n,r){const i=YR(this._activePointerMap);this._drag.emit(this._createPayload(e,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const n=e.data,r=n.currentEvent,i=e.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Lve(t){const e=[];return t.forEach(n=>{e.push(Us(n.event.x,n.event.y))}),nQe(e)}function YR(t){const e=Lve(t);let n=0;return t.forEach(r=>{let i=YM(r,e),s=i-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=r.lastAngle+s,r.lastAngle=i;const o=i-r.initialAngle;n+=o}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function sQe(t){const e=new Map;return t.forEach((n,r)=>e.set(r,n.event)),e}function YM(t,e){const n=t.event,r=n.x-e.center.x,i=n.y-e.center.y;return Math.atan2(i,r)}let oQe=class extends qs{constructor(e={},n=Z2){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=NW(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=i1(n);if(!this._pointerState.has(r)){const i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(e){const n=e.data,r=i1(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){const s=i.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),Z4(s,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(n))):Z4(i,e.data)>o?this._removeState(n):this._startImmediateDoubleClick(e,i)}}_startImmediateDoubleClick(e,n){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const n=i1(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},aQe=class extends qs{constructor(e={},n=Z2){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=eQe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=ri(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=n.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(XR("update",i,n),void 0,i.modifiers):tQe(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),i.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const n=e.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(XR("start",i,n)):this._pointerDrag.emit(XR("start",i,i.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(XR("end",s,n==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function XR(t,e,n){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:n}}let lQe=class extends qs{constructor(e={},n=Z2){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=NW(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=ri(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,n){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=ri(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const n=e.data,{pointerType:r}=n.native,i=cQe(n);if(!this._pointerState.has(i))return void this._startClick(e);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;Z4(o,n)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(e)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const n=i1(e.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:n}=e,{native:{pointerType:r}}=n,i=i1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s);this._pointerState.set(i,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function cQe(t){const{pointerId:e,pointerType:n,button:r}=t.native;return n==="mouse"?`${e}:${r}`:`${n}`}const ZR={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Xne=Symbol("handles");let nx=class extends Kt{initialize(){const e=()=>this.view?.ready;this.addHandles([pc(()=>!e(),()=>this._disconnect()),pc(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Xne),this._inputManager=Ni(this._inputManager)}_connect(){const e=this.view.surface,n=new JJe(e,this.view.input),r=[new oQe,new aQe,new lQe,new iQe(this.view.navigation),new rQe],i=new ju({eventSource:n,recognizers:r}),s=new WZe(this.view,["primary"]),o=new HZe(this.view,["secondary"]);i.installHandlers("prevent-context-menu",[new QJe],tp.INTERNAL),i.installHandlers("navigation",[new GJe(this.view),new OJe(this.view),new UJe(this.view),new Gne(this.view),new Gne(this.view,[ZR.counter]),s,new jJe(this.view,ZR.pan),new VJe(this.view,ZR.zoom),new FJe(this.view,ZR.rotate),o,new BZe(this.view,"touch")],tp.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,this.addHandles([dn(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},ma),dn(()=>{const{actionMap:a}=this.view.navigation;return{panActions:Une("pan",a),rotateActions:Une("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},ta)],Xne)}get test(){}};_([E()],nx.prototype,"view",void 0),_([E()],nx.prototype,"latestPointerInfo",null),_([E()],nx.prototype,"multiTouchActive",null),nx=_([ue("esri.views.2d.input.MapViewInputManager")],nx);const uQe=nx,hQe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToManager=new KM({view:this}),this.animationsEnabled=!0,this.inputManager=new uQe({view:this}),this.addHandles([this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,s,o){return this.viewEvents.on(r,i,s,o)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=L1e(r)?O1e(this,r):r;return this.stateManager.toMap(i)}};return _([E()],n.prototype,"goToManager",void 0),_([E({readOnly:!0})],n.prototype,"interacting",null),_([E()],n.prototype,"stationary",null),_([E()],n.prototype,"animationsEnabled",void 0),_([E({readOnly:!0})],n.prototype,"inputManager",void 0),n=_([ue("esri.views.Viewport2DMixin")],n),n};let Zne=class{constructor(e){this._view=e,this.viewpoint=new su({targetGeometry:new Jt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,n]=this._view.size;return Math.sqrt(e*e+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return ove(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,n){n.pan=Npe(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,n.rotate=mI(r),n.sourceZoom=this.scale,n.targetZoom=e.scale}interpolate(e,n,r){const{pan:i,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=lS(e.center.x,n.center.x,i),l.y=lS(e.center.y,n.center.y,i),this.viewpoint.scale=lS(e.scale,n.scale+a,o);let c=e.rotation;const u=n.rotation;Math.abs(u-c)>=180&&(c+=360*(c<u?1:-1)),this.viewpoint.rotation=lS(c,u,s)}copyFrom(e){ua(this.viewpoint,e.viewpoint),this._view=e.view}};function LE(t,e,n,r){const i=3*t,s=3*(n-t)-i,o=1-i-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function u(v){return((o*v+s)*v+i)*v}function h(v){return((c*v+l)*v+a)*v}function f(v){return(3*o*v+2*s)*v+i}function g(v,x){let b,T,A,I,P,M;for(A=v,M=0;M<8;M++){if(I=u(A)-v,Math.abs(I)<x)return A;if(P=f(A),Math.abs(P)<1e-6)break;A-=I/P}if(b=0,T=1,A=v,A<b)return b;if(A>T)return T;for(;b<T;){if(I=u(A),Math.abs(I-v)<x)return A;v>I?b=A:T=A,A=.5*(T-b)+b}return A}return function(v,x=1e-6){return h(g(v,x))}}const Vc={};Vc.ease=LE(.25,.1,.25,1),Vc.linear=LE(0,0,1,1),Vc.easeIn=Vc["ease-in"]=LE(.42,0,1,1),Vc.easeOut=Vc["ease-out"]=LE(0,0,.58,1),Vc.easeInOut=Vc["ease-in-out"]=LE(.42,0,.58,1);const dQe=t=>t,Zk=t=>t*t,J4=t=>1-Zk(1-t),Jne=t=>t<.5?Zk(2*t)/2:(J4(2*(t-.5))+1)/2,Q4=t=>t*t*t,kV=t=>1-Q4(1-t),Qne=t=>t<.5?Q4(2*t)/2:(kV(2*(t-.5))+1)/2,eN=t=>t*t*t*t,AV=t=>1-eN(1-t),ere=t=>t<.5?eN(2*t)/2:(AV(2*(t-.5))+1)/2,tN=t=>t*t*t*t*t,IV=t=>1-tN(1-t),tre=t=>t<.5?tN(2*t)/2:(IV(2*(t-.5))+1)/2,nN=t=>1-Math.cos(t*Math.PI/2),PV=t=>1-nN(1-t),nre=t=>t<.5?nN(2*t)/2:(PV(2*(t-.5))+1)/2,rN=t=>2**(10*(t-1)),iN=t=>1-rN(1-t),rre=t=>t<.5?rN(2*t)/2:(iN(2*(t-.5))+1)/2,sN=t=>-(Math.sqrt(1-t*t)-1),RV=t=>1-sN(1-t),ire=t=>t<.5?sN(2*t)/2:(RV(2*(t-.5))+1)/2;function pu(t){const e=2*(t-Math.sqrt((t-1)*t)),n=e/2/t;return r=>r<n?t*r*r:e*r-e+1}function mu(t,e){return(n,r)=>n<e?e*t(n/e,r):1-t((1-n)/(1-e),r)*(1-e)}const sre=mu(pu(1),1),ore=mu(pu(1),0),oN=mu(pu(1),.5),are=mu(pu(2),1),lre=mu(pu(2),0),cre=mu(pu(2),.5),ure=mu(pu(3),1),hre=mu(pu(3),0),dre=mu(pu(3),.5),fre=mu(pu(4),1),pre=mu(pu(4),0),mre=mu(pu(4),.5),gre={linear:dQe,"in-quad":Zk,"out-quad":J4,"in-out-quad":Jne,"in-coast-quad":sre,"out-coast-quad":ore,"in-out-coast-quad":oN,"in-cubic":Q4,"out-cubic":kV,"in-out-cubic":Qne,"in-coast-cubic":are,"out-coast-cubic":lre,"in-out-coast-cubic":cre,"in-quart":eN,"out-quart":AV,"in-out-quart":ere,"in-coast-quart":ure,"out-coast-quart":hre,"in-out-coast-quart":dre,"in-quint":tN,"out-quint":IV,"in-out-quint":tre,"in-coast-quint":fre,"out-coast-quint":pre,"in-out-coast-quint":mre,"in-sine":nN,"out-sine":PV,"in-out-sine":nre,"in-expo":rN,"out-expo":iN,"in-out-expo":rre,"in-circ":sN,"out-circ":RV,"in-out-circ":ire,"quad-in":Zk,"quad-out":J4,"quad-in-out":Jne,"quad-in-coast":sre,"quad-out-coast":ore,"quad-in-out-coast":oN,"cubic-in":Q4,"cubic-out":kV,"cubic-in-out":Qne,"cubic-in-coast":are,"cubic-out-coast":lre,"cubic-in-out-coast":cre,"quart-in":eN,"quart-out":AV,"quart-in-out":ere,"quart-in-coast":ure,"quart-out-coast":hre,"quart-in-out-coast":dre,"quint-in":tN,"quint-out":IV,"quint-in-out":tre,"quint-in-coast":fre,"quint-out-coast":pre,"quint-in-out-coast":mre,"sine-in":nN,"sine-out":PV,"sine-in-out":nre,"expo-in":rN,"expo-out":iN,"expo-in-out":rre,"circ-in":sN,"circ-out":RV,"circ-in-out":ire,ease:t=>Vc.ease(t),"ease-in":t=>Vc.easeIn(t),"ease-out":t=>Vc.easeOut(t),"ease-in-out":t=>Vc.easeInOut(t)};let fQe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const aN={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Dve={maxDuration:4e3};let pQe=class $ve{constructor(e){this._createCamera=e,this.compared=new fQe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:aN.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new $ve(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,n,r){this.source!==e&&this.source.copyFrom(e),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??aN.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const n=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>xl()}get hasFov(){return Math.abs(this.compared.fov)>xl()}get hasRotate(){return this.compared.rotate>xl()}},mQe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},gQe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,n)=>e+n.time,0)}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,i=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,n),s.hasPan&&!isNaN(n.pan)&&isFinite(s.compared.pan)?n.pan=(r+c.compared.pan*n.pan)/s.compared.pan:n.pan=1,s.hasRotate&&!isNaN(n.rotate)&&isFinite(s.compared.rotate)?n.rotate=(i+c.compared.rotate*n.rotate)/s.compared.rotate:n.rotate=1,o&&!isNaN(n.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:u,targetZoom:h}=c.compared,f=n.zoom*(h-u)+u,g=this.segments[0].definition.compared.sourceZoom,v=this.segments[this.segments.length-1].definition.compared.targetZoom,x=Math.abs(h-g)>Math.abs(u-g)?h:u;n.zoomOffset=x-v,n.zoom=(f-g)/(x-g)}else n.zoom=1;return n}e-=l.time,r+=c.compared.pan,i+=c.compared.rotate}}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r)}},ij=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,n=e.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:s}=this.definition;let o=0,a=0;r&&(i&&(o=(n/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&i&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&i){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(i&&s){const c=this._panPixelsAtSource/this._rotatePixels,u=1+c;this._panPixelFlow=c/u*l,this._rotatePixelFlow=1/u*l}else i?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/yQe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=e*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-e-n)/(r-n)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:n,segmentEnd:r}=this.definition;return n+e*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*e*this._time)-1))/(n*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),n.zoom=this._interpolateComponentsZoom(e),n.pan=this._interpolateComponentsPan(e),n.rotate=this._interpolateComponentsRotate(e),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(e)}};const yQe=mI(45);function vQe(t,e,n){const r=e-t.compared.sourceZoom,i=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(n.ascensionFactor*Math.LN2*t.compared.pan+i)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*i)}function _Qe(t,e,n){const r=1/e,i=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*i*s*o*l+t.halfWindowSize*i*s*o*c/(a*a)}function xQe(t,e,n){const r=e-t.compared.sourceZoom,i=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function wQe(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function bQe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function EQe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function SQe(t,e,n){return-t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function TQe(t,e,n){return t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function kQe(t,e,n){return-2*t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function AQe(t,e,n){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function IQe(t,e,n){const r=Math.log(e/t.compared.targetZoom),i=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*i*s*a+t.halfWindowSize*r*i*s*l/(o*o)+t.halfWindowSize*i*s*a*l/e}function PQe(t,e,n){const r=e-t.compared.targetZoom,i=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+n.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function RQe(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function CQe(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function MQe(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function NQe(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const n=Math.LN2*t.compared.pan,r=e,i=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*i);return t.compared.sourceZoom<=t.compared.targetZoom?s*(n-i):s*(n+i)}function OQe(t,e){let n=LQe(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},i=r.ascensionFactor===0,s=r.descensionFactor===0,o=i?wQe:vQe,a=i?bQe:_Qe,l=i?EQe:xQe,c=s?RQe:AQe,u=s?CQe:IQe,h=s?MQe:PQe,f=M=>o(t,M,r)+SQe(t,M,r)+c(t,M,r),g=M=>a(t,M,r)+TQe(t,M,r)+u(t,M,r),v=M=>l(t,M,r)+kQe(t,M,r)+h(t,M,r);let x=f(n);const b=NQe(t);let T;const A=e.maximumIterations||20,I=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<A;T++){const M=e.desiredSlope??1e-6;let F=g(n);Math.abs(F)>M&&(F+=M);const C=F/v(n);if(isNaN(C)||n>=I&&C<0){if(!isFinite(I))return null;n=I,x=f(n);break}if(n-=C,n<=t.compared.sourceZoom||n<=t.compared.targetZoom)return null;const N=f(n);if(Math.abs(N-x)/x<=.005)break;x=N}return isNaN(x)||x>b*(1-.3)||n<=t.compared.sourceZoom||n<=t.compared.targetZoom?null:n}function LQe(t,e){const n=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<n?e.maximumDistance!=null?n+(e.maximumDistance-n)/2:1.5*n:e.maximumDistance?Math.min(e.maximumDistance,r):r}let DQe=class extends gQe{constructor(e,n){super(),this._preallocSegments=[new ij,new ij,new ij],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,n)}update(e,n){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=n?.apex?OQe(e,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r),e===this._ascensionSegment?r.zoom=J4(r.zoom):e===this._descensionSegment&&(r.zoom=Zk(r.zoom))}_updateWithApex(e,n){const[r,i,s]=this._preallocSegments,o=n?.ascensionFactor??.5,a=Math.min(1-o,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=e,i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*l,i.definition.compared.rotate=this.definition.compared.rotate*l,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+l,i.update(),this.segments.push(i)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const $Qe=new mQe;let jQe=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=oN,this.definition=new pQe(e),this.path=new DQe}update(e,n,r){this.definition.update(e,n,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(C$e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?oN:iN)}cameraAt(e,n){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,$Qe);n.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const n=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-n)/(r-n)}_applyTimeSettings(e,n){const r=n.speedFactor!=null?n.speedFactor:1,i=n.minDuration??aN.minDuration/r,s=n.maxDuration??aN.maxDuration/r;return e=n.duration!=null?n.duration:Math.min(Math.max(e/r,i),s)}};const FQe=2e3,VQe=64;let zQe=class{constructor(e){this._view=e,this._animation=new jQe(()=>new Zne(this._view)),this._current=new Zne(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,n,r={}){ua(this._current.viewpoint,e),ua(this._source.viewpoint,e),ua(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(e,n){this._animation.cameraAt(n,this._current),ua(e,this._current.viewpoint)}},rx=class extends Kt{constructor(e){super(e),this._animation=null,this._destinationViewState=new CW,this.updateFunction=null,this.easing=gre.ease,this.viewpoint=new su({targetGeometry:new Jt,scale:0,rotation:0}),this._updateTask=u2({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new zQe(e.view)}destroy(){this._updateTask=ri(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,n,r){this.stop();const i=this.viewpoint;ua(i,n);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(n.scale,s.scale)*VQe,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??Dve.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?gre[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,UQe(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,n){this.stop(),this.updateFunction=n,this.viewpoint=e;const r=new SV({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const n=this.animation;if(n&&n.state!==SV.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,i=this._transition.duration,s=i>0?r/i:1,o=s>=1;this._transition.applyRatio(this.viewpoint,s),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function UQe(t,e,n,r){if(e?.duration!=null)return!0;const{time:i,isLinear:s}=t,o=e?.speedFactor||1;if(i>(e?.maxDuration??Dve.maxDuration/o))return!1;if(s){const l=$i(),c=Us(...r.toScreen(l,...n.center)),u=Us(...n.toScreen(l,...r.center)),h=u!=null&&u.x>-1*n.size[0]&&u.x<(1.5+.5)*n.size[0]&&u.y>-1*n.size[1]&&u.y<(1.5+.5)*n.size[1],f=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(i>FQe/o&&!h&&!f)return!1}return!0}_([E()],rx.prototype,"easing",void 0),_([E()],rx.prototype,"view",void 0),_([E()],rx.prototype,"viewpoint",void 0),rx=_([ue("esri.views.2d.AnimationManager")],rx);const GQe=rx;function oi(){return Promise.all([_e(()=>import("./webglDeps-B6rDlXN-.js"),__vite__mapDeps([297,222,298,299,300,26,94])),_e(()=>import("./mapViewDeps-DW2jekiW.js"),__vite__mapDeps([301,173,53,54,138,139,129,64,26,140,131,132,137,141,125,142,87,302,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,307,143,144,308,83,78,127,76,77,309,51,297,310,156,311,312,191,313,211,212,314,111,123,128,130,122,71,70,315,145,316,136,45,46,47,317,147,152,120,318,319,320,321,218,252,322,323]))])}const DE=()=>oi().then(()=>_e(()=>import("./TileLayerView2D-DmMAmXmr.js"),__vite__mapDeps([324,137,132,138,139,129,64,26,140,131,141,125,142,87,308,173,53,54,83,78,127,76,77,309,51,306,249,305,124,93,299,300,94,221,222,161,192,195,66,67,310,303,298,213,304,133,156,311,312,191,111,302,126,31,134,146,143,144,211,212,317,123,128,130,122,71,70,147,152,120,325,326,327,321,328,281,329,319,320,330,331,332,252,333,334,335,336,337]))),N0=()=>oi().then(()=>_e(()=>import("./FeatureLayerView2D-B5Z1sB9E.js").then(t=>t.F),__vite__mapDeps([338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),yre={"base-dynamic":()=>oi().then(()=>_e(()=>import("./BaseDynamicLayerView2D-Cg64U-so.js"),__vite__mapDeps([343,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,345,330,331]))),"base-tile":DE,"bing-maps":DE,catalog:()=>oi().then(()=>_e(()=>import("./CatalogLayerView2D-CCosKLm1.js"),__vite__mapDeps([346,328,306,249,281,330]))),"catalog-dynamic-group":()=>oi().then(()=>_e(()=>import("./CatalogDynamicGroupLayerView2D-CtETOhwA.js"),__vite__mapDeps([347,328,306,249,281,330]))),"catalog-footprint":()=>oi().then(()=>_e(()=>import("./CatalogFootprintLayerView2D-DaXB8CwA.js"),__vite__mapDeps([348,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),csv:N0,"geo-rss":()=>oi().then(()=>_e(()=>import("./GeoRSSLayerView2D-Cv6y05vk.js"),__vite__mapDeps([349,244,204,200,177,164,201,31,202,203,142,87,197,198,199,163,24,25,135,83,78,127,76,77,131,132,52,53,54,205,122,206,238,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,137,141,303,213,304,133,134,146,317,308,173,309,51,123,128,130,71,70,147,152,120,330]))),feature:N0,geojson:N0,parquet:N0,graphics:()=>oi().then(()=>_e(()=>import("./GraphicsLayerView2D-DrbnSqv4.js"),__vite__mapDeps([350,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),group:()=>oi().then(()=>_e(()=>import("./GroupLayerView2D-BfDXc0xT.js"),__vite__mapDeps([351,328,306,249,281,330]))),imagery:()=>oi().then(()=>_e(()=>import("./ImageryLayerView2D-D87woBeH.js"),__vite__mapDeps([352,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,317,83,78,138,139,129,140,131,132,137,141,142,87,308,173,53,54,127,76,77,309,51,123,126,128,130,122,133,71,70,302,303,298,213,304,31,134,146,147,152,120,329,319,320,321,344,326,327,345,176,291,339,336,330,331,337]))),"imagery-tile":()=>oi().then(()=>_e(()=>import("./ImageryTileLayerView2D-Cc0KmYFt.js"),__vite__mapDeps([354,355,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,175,356,321,303,298,213,316,304,133,327,357,176,337,291,339,336,330,331]))),kml:()=>oi().then(()=>_e(()=>import("./KMLLayerView2D-CmNVdAeB.js"),__vite__mapDeps([358,359,197,198,199,200,177,164,201,31,202,203,142,87,163,24,25,135,83,78,127,76,77,131,132,52,53,54,204,205,122,206,238,326,306,249,303,222,298,299,213,327,344,305,124,125,93,300,26,94,221,161,192,195,66,64,67,328,281,318,319,320,126,321,302,138,139,129,140,137,141,304,133,134,146,317,308,173,309,51,123,128,130,71,70,147,152,120,330,45,46,47,176,313,297,211,212,311,356]))),"knowledge-graph":()=>oi().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-C1KIVdCb.js"),__vite__mapDeps([360,328,306,249,281,330]))),"link-chart":()=>oi().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-C1KIVdCb.js"),__vite__mapDeps([360,328,306,249,281,330]))),"knowledge-graph-sublayer":N0,"map-image":()=>oi().then(()=>_e(()=>import("./MapImageLayerView2D-DR8xAc4g.js"),__vite__mapDeps([361,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,317,83,78,138,139,129,140,131,132,137,141,142,87,308,173,53,54,127,76,77,309,51,123,126,128,130,122,133,71,70,302,304,31,134,146,147,152,120,329,319,320,321,345,330,362,252,333,335,339,331,332,334,336,337]))),"map-notes":()=>oi().then(()=>_e(()=>import("./MapNotesLayerView2D-CUxpNIVg.js"),__vite__mapDeps([363,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),media:()=>oi().then(()=>_e(()=>import("./MediaLayerView2D-CqWQvFlg.js"),__vite__mapDeps([364,365,152,204,200,177,164,201,31,202,203,142,87,137,132,138,139,129,64,26,140,131,141,125,308,173,53,54,83,78,127,76,77,309,51,306,249,305,124,93,299,300,94,221,222,161,192,195,66,67,310,303,298,213,304,133,156,311,312,191,111,302,126,134,146,143,144,211,212,317,123,128,130,122,71,70,147,120,315,145,366,316,328,281,330]))),"ogc-feature":()=>oi().then(()=>_e(()=>import("./OGCFeatureLayerView2D-Ds_TYGei.js"),__vite__mapDeps([367,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),"open-street-map":DE,"oriented-imagery":N0,route:()=>oi().then(()=>_e(()=>import("./RouteLayerView2D-B1fnqq2B.js"),__vite__mapDeps([368,369,370,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),stream:()=>oi().then(()=>_e(()=>import("./StreamLayerView2D-DOQKMshH.js"),__vite__mapDeps([371,238,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),"subtype-group":()=>oi().then(()=>_e(()=>import("./SubtypeGroupLayerView2D-CqxDYwI0.js"),__vite__mapDeps([372,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),tile:DE,"vector-tile":()=>oi().then(()=>_e(()=>import("./VectorTileLayerView2D-KWstUCL6.js"),__vite__mapDeps([373,122,141,111,26,137,132,24,25,191,312,192,140,222,300,94,221,305,124,125,93,299,161,306,249,195,66,64,67,321,69,244,193,194,173,53,54,328,281,330,331]))),video:()=>oi().then(()=>_e(()=>import("./VideoLayerView2D-DiBaEgIH.js"),__vite__mapDeps([374,375,247,29,248,249,268,30,31,376,236,131,132,235,24,25,366,161,305,124,125,93,299,300,26,94,221,222,306,192,195,66,64,67,302,138,139,129,140,137,141,142,87,303,298,213,126,304,133,134,146,316,377,328,281,318,319,320,321,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330]))),wcs:()=>oi().then(()=>_e(()=>import("./ImageryTileLayerView2D-Cc0KmYFt.js"),__vite__mapDeps([354,355,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,175,356,321,303,298,213,316,304,133,327,357,176,337,291,339,336,330,331]))),"web-tile":DE,wfs:N0,wms:()=>oi().then(()=>_e(()=>import("./WMSLayerView2D-pSa1dn9n.js"),__vite__mapDeps([378,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,345,330,331,379,339]))),wmts:()=>oi().then(()=>_e(()=>import("./WMTSLayerView2D-DJjWdobB.js"),__vite__mapDeps([380,325,326,306,249,303,222,298,299,213,327,305,124,125,93,300,26,94,221,161,192,195,66,64,67,321,328,281,330,331]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function BQe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Xe(`${n}:view-not-supported`,`${e} is not supported in 2D`)}const vre={hasLayerViewModule:t=>yre[t.type]!=null,importLayerView:t=>{const e=yre[t.type];if(e==null)throw BQe(t);return e(t)}};var Kl;let db=(Kl=class{static getId(e,n,r,i){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${n}/${r}/${i}`}constructor(e,n,r,i){this.set(e,n,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,n=4095&this.col,r=63&this.level;return(3&this.world)<<30|n<<22|e<<8|r}acquire(e,n,r,i){this.set(e,n,r,i)}contains(e){const n=e.level-this.level;return n>=0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}containsChild(e){const n=e.level-this.level;return n>0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Kl(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,n,r,i){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+n,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Kl(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,n,r){const i=this.clone();return i.col+=e,i.row+=n,r.normalizeKey(i),i}getChildKeys(){const e=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new Kl(e,n,r,i),new Kl(e,n,r+1,i),new Kl(e,n+1,r,i),new Kl(e,n+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},Kl.pool=new eb(()=>new Kl(""),null,null,25,50),Kl);function w_(t,e){return[t,e]}function O0(t,e,n){return t[0]=e,t[1]=n,t}function WQe(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}const Ou=new db("0/0/0/0");let HQe=class jve{static create(e,n,r=null){const i=Da(e.spatialReference),s=n.origin||w_(e.origin.x,e.origin.y),o=w_(e.size[0]*n.resolution,e.size[1]*n.resolution),a=w_(-1/0,-1/0),l=w_(1/0,1/0),c=w_(1/0,1/0);r!=null&&(O0(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),O0(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),O0(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:u,rows:h}=n;let f,g,v,x;return!r&&u&&h&&(O0(a,u[0],h[0]),O0(l,u[1],h[1]),O0(c,u[1]-u[0]+1,h[1]-h[0]+1)),e.isWrappable?(f=w_(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/e.size[0]),c[1]),g=!0,v=i.origin,x=i.valid):(f=c,g=!1),new jve(n.level,n.resolution,n.scale,s,a,l,c,o,f,g,v,x)}constructor(e,n,r,i,s,o,a,l,c,u,h,f){this.level=e,this.resolution=n,this.scale=r,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=u,this._spatialReferenceOrigin=h,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const n=this.worldSize[0];return e<0?n-1-Math.abs((e+1)%n):e%n}normalizeKey(e){if(!this.wrap)return;const n=this.worldSize[0],r=e.col;r<0?(e.col=r+n,e.world-=1):r>=n&&(e.col=r-n,e.world+=1)}denormalizeCol(e,n){return this.wrap?this.worldSize[0]*n+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const n=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&r&&i?n===r[0]?i[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?i[1]:n:n}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,n,r=!1){Ou.set(n);const i=r?Ou.col:this.denormalizeCol(Ou.col,Ou.world),s=Ou.row;return WQe(e,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),e}getTileCoords(e,n,r=!1){Ou.set(n);const i=r?Ou.col:this.denormalizeCol(Ou.col,Ou.world);return Array.isArray(e)?O0(e,this.getXForColumn(i),this.getYForRow(Ou.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(Ou.row)),e}};var h1;let OW=(h1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:n,colFrom:r,colTo:i}of this.spans)for(let s=r;s<=i;s++){const o=e.getWorldForColumn(s);yield new db(e.level,n,e.normalizeCol(s),o)}}forEach(e,n){const{spans:r,lodInfo:i}=this,{level:s}=i;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(n,s,o,i.normalizeCol(c),i.getWorldForColumn(c))}},h1.pool=new eb(()=>new h1),h1),sj=class{constructor(e,n,r){this.row=e,this.colFrom=n,this.colTo=r}};const ui=new db("0/0/0/0");let qQe=class Fve{static create(e,n){e[1]>n[1]&&([e,n]=[n,e]);const[r,i]=e,[s,o]=n,a=s-r,l=o-i,c=l!==0?a/l:0,u=(Math.ceil(i)-i)*c,h=(Math.floor(i)-i)*c;return new Fve(r,Math.floor(i),Math.ceil(o),c,a<0?u:h,a<0?h:u,a<0?s:r,a<0?r:s)}constructor(e,n,r,i,s,o,a,l){this.x=e,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const jl=[[0,0],[0,0],[0,0],[0,0]],KQe=1e-6;let YQe=class{constructor(e,n=null,r=e.lods[0].level,i=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>HQe.create(e,a,n));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,n,r=!1){ui.set(n);const i=this._infoByLevel[ui.level];return i?i.getTileBounds(e,ui,r):e}getTileCoords(e,n,r=!1){ui.set(n);const i=this._infoByLevel[ui.level];return i?i.getTileCoords(e,ui,r):e}getTileCoverage(e,n=192,r=!0,i="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=OW.pool.acquire(s),a=this._wrap;let l,c,u,h=1/0,f=-1/0;const g=o.spans;jl[0][0]=jl[0][1]=jl[1][1]=jl[3][0]=-n,jl[1][0]=jl[2][0]=e.size[0]+n,jl[2][1]=jl[3][1]=e.size[1]+n;for(const T of jl)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const v=[];let x=3;for(let T=0;T<4;T++){if(jl[T][1]===jl[x][1]){x=T;continue}const A=qQe.create(jl[T],jl[x]);h=Math.min(A.ymin,h),f=Math.max(A.ymax,f),v[A.ymin]===void 0&&(v[A.ymin]=[]),v[A.ymin].push(A),x=T}if(h==null||f==null||f-h>100)return null;let b=[];for(l=h;l<f;){v[l]!=null&&(b=b.concat(v[l])),c=1/0,u=-1/0;for(let T=b.length-1;T>=0;T--){const A=b[T];c=Math.min(c,A.getLeftCol()),u=Math.max(u,A.getRightCol())}if(c=Math.floor(c),u=Math.floor(u),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(u/s.worldSize[0]);for(let A=Math.floor(c/s.worldSize[0]);A<=T;A++)g.push(new sj(l,Math.max(s.getFirstColumnForWorld(A),c),Math.min(s.getLastColumnForWorld(A),u)))}else g.push(new sj(l,c,u));else c>s.last[0]||u<s.first[0]||(c=Math.max(c,s.first[0]),u=Math.min(u,s.last[0]),g.push(new sj(l,c,u)));l+=1;for(let T=b.length-1;T>=0;T--){const A=b[T];A.ymax>=l?A.incrRow():b.splice(T,1)}}return o}getTileParentId(e){ui.set(e);const n=this._infoByLevel[ui.level],r=this._lodInfos.indexOf(n)-1;return r<0?null:(this._getTileIdAtLOD(ui,this._lodInfos[r],ui),ui.id)}getTileResolution(e){const n=this._infoByLevel[typeof e=="object"?e.level:e];return n?n.resolution:-1}getTileScale(e){const n=this._infoByLevel[e.level];return n?n.scale:-1}intersects(e,n){ui.set(n);const r=this._infoByLevel[ui.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(ui,i,ui);const o=i.denormalizeCol(ui.col,ui.world);for(const a of e.spans)if(a.row===ui.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((x,b)=>(x[0]=Math.min(x[0],b.row),x[1]=Math.max(x[1],b.row),x[2]=Math.min(x[2],b.colFrom),x[3]=Math.max(x[3],b.colTo),x),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(ui.col,ui.world),h=i.getColumnForX(r.getXForColumn(u)),f=i.getRowForY(r.getYForRow(ui.row)),g=i.getColumnForX(r.getXForColumn(u+1))-1,v=i.getRowForY(r.getYForRow(ui.row+1))-1;return!(h>c||g<l||f>a||v<o)}const s=i.denormalizeCol(ui.col,ui.world);return e.spans.some(o=>o.row===ui.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,n,r){if(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],this._wrap){const i=Da(this.tileInfo.spatialReference),s=-r*(i.valid[1]-i.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>n[0])return this._infoByScale[n[0]];for(let r=1;r<n.length-1;r++)if(e>n[r]+KQe)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]}getClosestInfoForScale(e){const n=this.scales;return this._infoByScale[e]||(e=n.reduce((r,i)=>Math.abs(i-e)<Math.abs(r-e)?i:r,n[0])),this._infoByScale[e]}scaleToLevel(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=n.length-1;r>=0;r--)if(e<n[r])return r===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[r]].level+(n[r]-e)/(n[r]-n[r+1]);return this._infoByScale[n[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,n,r){const i=this._infoByLevel[r.level];return e.set(r),n.resolution<i.resolution?null:(n.resolution===i.resolution||(e.level=n.level,e.col=Math.floor(r.col*i.resolution/n.resolution+.01),e.row=Math.floor(r.row*i.resolution/n.resolution+.01)),e)}},XQe=class{constructor(e,n){this.item=e,this.controller=n,this.promise=null}},ZQe=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new lw,this._controllers=new lw,this._processingItems=new lw,this._pausedSignal=E2(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new Uk(e.peeker),this.process=e.process;const n=e.scheduler;e.priority&&n&&(this._task=n.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=ri(this._schedule),this._task=ri(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const n=this._controllers.get(e);n&&n.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(n=>e.push(n)),this._controllers.clear(),e.forEach(n=>n.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((n,r)=>e(r))}get(e){const n=this._deferreds.get(e);return n?n.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,n){const r=this.get(e);if(r)return r;const i=new AbortController;let s=null;n&&(s=uu(n,()=>i.abort()));const o=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),a(),c.reject(kr())},a=()=>{l.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=qG(i.signal,o),c=fc();return this._deferreds.set(e,c),this._controllers.set(e,i),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(kr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const n of e)this._queue.push(n.item),n.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=rb(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(n))}_processError(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(n))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let n;const r=new AbortController,i=new XQe(e,r);this._processingItems.set(e,i);try{n=this.process(e,r.signal)}catch(s){this._processError(i,s)}pa(n)?(i.promise=n,n.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,n)}get test(){}};const _re=[0,0];let Ef=class extends Kt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:n,scheduler:r,priority:i}=this;this._queue=new ZQe({concurrency:e,scheduler:r,priority:i,process:(s,o)=>{const a=this._keyToItem.get(s);return n(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Ni(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const n=typeof e=="string"?e:e.id;this._queue.abort(n)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const n=e.key.id;if(this._queue.has(n))return this._queue.get(n);const r=this._queue.push(n),i=this.tileInfoView.getTileScale(e.key),s=nI(this._tilesByScale,i,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(i),this._keyToItem.delete(n)};return s.add(e.key),this._keyToItem.set(n,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const n=new Set;for(const o of e)n.add(this._keyToItem.get(o).key);const r=this.state.scale;let i,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if($fe(a,l=>n.has(l))){const l=Math.abs(o-r);l<s&&(i=a,s=l)}return this._getClosestTileKey(i,e).id}_getClosestTileKey(e,n){const r=this.tileInfoView,i=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(n.has(a.id)){r.getTileCoords(_re,a);const l=MO(_re,i);l<o&&(o=l,s=a)}return s}};_([E({constructOnly:!0})],Ef.prototype,"concurrency",void 0),_([E({constructOnly:!0})],Ef.prototype,"priority",void 0),_([E({constructOnly:!0})],Ef.prototype,"process",void 0),_([E({constructOnly:!0})],Ef.prototype,"scheduler",void 0),_([E()],Ef.prototype,"state",void 0),_([E({constructOnly:!0})],Ef.prototype,"tileInfoView",void 0),Ef=_([ue("esri.views.2d.tiling.TileQueue")],Ef);const ANt=Ef;let JQe=class{constructor(e,n,r){this.maxSize=e,this._tileInfoView=n,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const n=this._tilePerId.get(e);if(!n)return;const r=n.key.level,i=this._tileKeysPerLevel[r];xre(this._tilePerId,e);for(let s=0;s<i.length;s++)if(i[s].id===e){i.splice(s,1);break}return n.visible=!0,n}add(e){e.visible=!1;const n=e.key,r=n.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const i=n.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(n)}prune(e,n,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==e&&(i=this._pruneAroundCenterTile(i,n,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,n,r,e))}_pruneAroundCenterTile(e,n,r,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],u=[0,0],h=[0,0];for(s.sort((f,g)=>(u[0]=a.x+l*(f.col+.5),u[1]=a.y-c*(f.row+.5),h[0]=a.x+l*(g.col+.5),h[1]=a.y-c*(g.row+.5),Dk(u,n)-Dk(h,n)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const n=this._tilePerId.get(e);this._removedFunc&&n&&this._removedFunc(n),xre(this._tilePerId,e)}};function xre(t,e){t.delete(e)}const L0=new db(0,0,0,0),cf=new Map,$E=[],oj=[];let PNt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new JQe(e.cacheSize,this.tileInfoView,n=>{this.releaseTile(n)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:n,tileIndex:r}=this,{scale:i,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&i>this._previousScale;if(this._previousScale=i,!n&&(i>a||i<l))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:f}=u,{level:g}=f;this.tiles.length=0,r.forEach(T=>T.visible=!0);let v=0,x=0;if(h.length>0)for(const{row:T,colFrom:A,colTo:I}of h)for(let P=A;P<=I;P++){v++;const M=L0.set(g,T,f.normalizeCol(P),f.getWorldForColumn(P)).id;let F=r.get(M);if(F)F.isReady?(cf.set(M,F),x++):c||this._addParentTile(M,cf);else{if(this._tileCache?.has(M)){if(F=this._tileCache.pop(M),this.tileIndex.set(M,F),F.isReady){cf.set(M,F),x++;continue}}else F=this.acquireTile(L0),this.tileIndex.set(M,F);c||this._addParentTile(M,cf)}}const b=x===v;for(const[T,A]of r){if(cf.has(T))continue;L0.set(T);const I=this.tileInfoView.intersects(u,L0),P=this.cachePolicy==="purge"?L0.level!==g:L0.level>g;!I||!c&&b?!P&&I||$E.push(A):A.isReady?P&&this.cachePolicy==="purge"&&this._hasReadyAncestor(L0,g)?$E.push(A):oj.push(A):P&&$E.push(A)}for(const T of oj)T.isReady&&cf.set(T.key.id,T);for(const T of $E)this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(T.key.id);for(const T of cf.values())this.tiles.push(T);for(const T of r.values())cf.has(T.key.id)||(T.visible=!1);this._tileCache?.prune(g,s,o),OW.pool.release(u),oj.length=0,$E.length=0,cf.clear()}clear(){const{tileIndex:e}=this;for(const n of e.values())this.releaseTile(n);e.clear()}refresh(e){for(const n of this.tileIndex.values())e(n);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,n){let r=e,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i?.isReady){n.has(i.key.id)||n.set(i.key.id,i);break}}else if(this._tileCache?.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i?.isReady)){n.has(i.key.id)||n.set(i.key.id,i);break}}_hasReadyAncestor(e,n){const r=gl();this.tileInfoView.getTileBounds(r,e,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=n&&i.key.level<e.level){const s=gl();if(this.tileInfoView.getTileBounds(s,i.key,!0),xze(s,r))return!0}return!1}};const QQe={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>_e(()=>import("./ElevationProfileAnalysisView2D-BI0U0EkC.js"),__vite__mapDeps([381,173,53,54,229,375,247,29,248,249,268,30,31,382,323,383,384,385,386,387,388,47,389,390,391,392,393,159,160,24,25,394,395,396,44,397,398,186,104,167,168,182,231,102,399,151,195,210,181])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function eet(t){const e=QQe[t.type];if(!e)throw new Xe("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let tet=class{constructor(e,n={}){this.events=new zje,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):n.canvas!=null&&(this._canvas=n.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let i=this._canvas.getContext("webgl2",r);i||(i=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=i,this._handles=sv([J2(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,n){if(this._hasMajorPerformanceCaveat||ye("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ye("esri-performance-mode-frames-between-render")&&(n(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,i,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${i}, ${s}, ${o}, ${a}, ${l})`}}else n()}resize(e){const n=this._canvas,r=n.style,{state:{size:i},pixelRatio:s}=e,o=i[0],a=i[1],l=Math.round(o*s),c=Math.round(a*s);n.width===l&&n.height===c||(n.width=l,n.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,n){const[r,i]=e.center,[s,o]=n.center,[a,l]=e.toScreen([0,0],s,o),[c,u]=e.toScreen([0,0],r,i),h=c-a,f=u-l,g=e.scale/n.scale,v=n.rotation-e.rotation,x=Ed();return K1e(x),BO(x,x,[g,g]),AI(x,x,mI(v)),S2(x,x,[h,f]),x}};function net(t,e,n,r,i){Vve(t,e,n||0,r||t.length-1,i||ret)}function Vve(t,e,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);Vve(t,e,Math.max(n,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),i)}var u=t[e],h=n,f=r;for(jE(t,n,e),i(t[r],u)>0&&jE(t,n,r);h<f;){for(jE(t,h,f),h++,f--;i(t[h],u)<0;)h++;for(;i(t[f],u)>0;)f--}i(t[n],u)===0?jE(t,n,f):jE(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function jE(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function ret(t,e){return t<e?-1:t>e?1:0}function lN(t,e){if(!(this instanceof lN))return new lN(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function iet(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function b_(t,e){MS(t,0,t.children.length,e,t)}function MS(t,e,n,r,i){i||(i=ix(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=e;o<n;o++)s=t.children[o],NS(i,t.leaf?r(s):s);return i}function NS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function wre(t,e){return t.minX-e.minX}function bre(t,e){return t.minY-e.minY}function aj(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function JR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function set(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function oet(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function lj(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function QR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function ix(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ere(t,e,n,r,i){for(var s,o=[e,n];o.length;)(n=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,net(t,s,e,n,i),o.push(e,s,s,n))}lN.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!QR(t,e))return n;for(var i,s,o,a,l=[];e;){for(i=0,s=e.children.length;i<s;i++)o=e.children[i],QR(t,a=e.leaf?r(o):o)&&(e.leaf?n.push(o):lj(t,a)?this._all(o,n):l.push(o));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!QR(t,e))return!1;for(var r,i,s,o,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(s=e.children[r],QR(t,o=e.leaf?n(s):s)){if(e.leaf||lj(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=ix([]),this},remove:function(t,e){if(t==null)return this;for(var n,r,i,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=c.pop(),s=!0),o.leaf&&(i=iet(t,o.children,e))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!lj(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:wre,compareMinY:bre,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,s=n-e+1,o=this._maxEntries;if(s<=o)return b_(i=ix(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(i=ix([])).leaf=!1,i.height=r;var a,l,c,u,h=Math.ceil(s/o),f=h*Math.ceil(Math.sqrt(o));for(Ere(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Ere(t,a,c=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=c;l+=h)u=Math.min(l+h-1,c),i.children.push(this._build(t,l,u,r-1));return b_(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,s,o,a,l,c,u,h;r.push(e),!e.leaf&&r.length-1!==n;){for(u=h=1/0,i=0,s=e.children.length;i<s;i++)l=aj(o=e.children[i]),(c=set(t,o)-l)<h?(h=c,u=l<u?l:u,a=o):c===h&&l<u&&(u=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),s=[],o=this._chooseSubtree(i,this.data,e,s);for(o.children.push(t),NS(o,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),o=ix(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,b_(n,this.toBBox),b_(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,e){this.data=ix([t,e]),this.data.height=t.height+1,this.data.leaf=!1,b_(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,s,o,a,l,c,u;for(l=c=1/0,r=e;r<=n-e;r++)o=oet(i=MS(t,0,r,this.toBBox),s=MS(t,r,n,this.toBBox)),a=aj(i)+aj(s),o<l?(l=o,u=r,c=a<c?a:c):o===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:wre,i=t.leaf?this.compareMinY:bre;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,s,o=this.toBBox,a=MS(t,0,e,o),l=MS(t,n-e,n,o),c=JR(a)+JR(l);for(i=e;i<n-e;i++)s=t.children[i],NS(a,t.leaf?o(s):s),c+=JR(a);for(i=n-e-1;i>=e;i--)s=t.children[i],NS(l,t.leaf?o(s):s),c+=JR(l);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)NS(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)t[n].children.length===0?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():b_(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function aet(t,{timeZone:e,timeExtent:n}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:n?.start,currentEnd:n?.end}}}}let Sre=class zve{constructor(e,n){this.key=new db(0,0,0,0),this.bounds=gl(),this.objectIds=new Set,this.key.set(n);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return yze(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return aet(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),n=Pa.acquire();for(let r=0;r<e.length;r++)n[r]=new zve(this.tileInfoView,e[r]);return n}getQuantizationParameters(){return Dm.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const D0={added:[],removed:[]},cj=new Set,cet=new db(0,0,0,0);function uet(t,e){const n=Da(e);if(!n)return null;const[r,i]=n.valid;return t[2]>i?[gl([t[0],t[1],i,t[3]]),gl([r,t[1],r+t[2]-i,t[3]])]:t[0]<r?[gl([r,t[1],t[2],t[3]]),gl([i-(r-t[0]),t[1],i,t[3]])]:null}let het=class extends npe{constructor(e){super(),this._tiles=new Map,this._index=lN(9,ye("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||VB(e)===0||zB(e)===0)return[];const n=uet(e,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const n={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const i=new Sre(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(const r of e.removed)if(this.has(r)){const i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(e){const n=this.tileScheme.getTileCoverage(e,0);if(!n)return;const{spans:r,lodInfo:i}=n,{level:s}=i;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const u=cet.set(s,o,i.normalizeCol(c),i.getWorldForColumn(c)).id;if(cj.add(u),!this.has(u)){const h=new Sre(this.tileScheme,u);this._tiles.set(u,h),this._index.insert(h),this.tiles.push(h),D0.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];cj.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),D0.removed.push(a))}(D0.added.length||D0.removed.length)&&this.emit("update",D0),OW.pool.release(n),cj.clear(),D0.added.length=0,D0.removed.length=0}};const NNt=1e-30,Tre=512,eC=16777216,ONt=8,LNt=29,DNt=24,$Nt=4,jNt=0,FNt=0,VNt=0,zNt=1,UNt=2,GNt=3,BNt=4,WNt=5,HNt=6,qNt=12,KNt=13,YNt=5,det=6,XNt=5,ZNt=6,Uve=6,fet=1<<Uve,JNt=fet<<1,QNt=1.05,e5t=3,t5t=1,n5t=3,r5t=3,i5t=5,s5t=6,o5t=1.15,pet=4,a5t=128,met=256,l5t=met-2*pet,c5t=2,u5t=128,h5t=1,d5t=10,f5t=1024,p5t=128,m5t=4,g5t=1,y5t=1<<20,v5t=.75,_5t=10,x5t=.75,w5t=256,b5t=32,E5t=512,S5t=0,T5t=1,get=1,k5t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],A5t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],FE=256,yet=()=>Tt.getLogger("esri.views.webgl.checkWebGLError");function Gve(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const Bve=!!ye("enable-feature:webgl-debug");function Wve(){return Bve}function I5t(){return Bve}function $0(t,e=Wve()){if(e){const n=Gve(t);if(n){const r=new Error().stack;yet().error(new Xe("webgl-error","WebGL error occurred",{message:n,stack:r}))}}}const P5t={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},j0={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Gt={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},vet=Object.values(Gt),cN={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},AT={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},CV={FLOAT:j0.FLOAT,UNSIGNED_BYTE:j0.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:j0.BYTE,UNSIGNED_SHORT:j0.UNSIGNED_SHORT,SHORT:j0.SHORT,UNSIGNED_INT:j0.UNSIGNED_INT,INT:j0.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},R5t=33984,kre={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},C5t=1029,M5t=0,N5t=36064,O5t=36065,L5t=36066,D5t=36067,$5t=33306,j5t=36096,F5t=36128,Ko={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function V5t(t,e,n,r=0){const i=t.gl;t.bindBuffer(n);for(const s of n.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const a=r*s.stride;if(s.count<=4)i.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+a),i.enableVertexAttribArray(o),s.divisor>0&&i.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)i.vertexAttribPointer(o+l,3,s.type,s.normalized,s.stride,s.offset+12*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)i.vertexAttribPointer(o+l,4,s.type,s.normalized,s.stride,s.offset+16*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(Wve()){const l=Gve(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${a}:`,l,s)}}}function z5t(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function _et(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Gt.R8:case Gt.R8I:case Gt.R8UI:case Gt.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Gt.RGBA4:case Gt.R16F:case Gt.R16I:case Gt.R16UI:case Gt.RG8:case Gt.RG8I:case Gt.RG8UI:case Gt.RG8_SNORM:case Gt.RGB565:case Gt.RGB5_A1:case AT.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Gt.RGB8:case Gt.RGB8I:case Gt.RGB8UI:case Gt.RGB8_SNORM:case Gt.SRGB8:case AT.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Gt.RGBA8:case Gt.R32F:case Gt.R11F_G11F_B10F:case Gt.RG16F:case Gt.R32I:case Gt.R32UI:case Gt.RG16I:case Gt.RG16UI:case Gt.RGBA8I:case Gt.RGBA8UI:case Gt.RGBA8_SNORM:case Gt.SRGB8_ALPHA8:case Gt.RGB9_E5:case Gt.RGB10_A2UI:case Gt.RGB10_A2:case AT.DEPTH_COMPONENT32F:case cN.DEPTH24_STENCIL8:return 4;case cN.DEPTH32F_STENCIL8:return 5;case Gt.RGB16F:case Gt.RGB16I:case Gt.RGB16UI:return 6;case Gt.RG32F:case Gt.RG32I:case Gt.RG32UI:case Gt.RGBA16F:case Gt.RGBA16I:case Gt.RGBA16UI:return 8;case Gt.RGB32F:case Gt.RGB32I:case Gt.RGB32UI:return 12;case Gt.RGBA32F:case Gt.RGBA32I:case Gt.RGBA32UI:return 16;case Ko.COMPRESSED_RGB_S3TC_DXT1_EXT:case Ko.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Ko.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Ko.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Ko.COMPRESSED_R11_EAC:case Ko.COMPRESSED_SIGNED_R11_EAC:case Ko.COMPRESSED_RGB8_ETC2:case Ko.COMPRESSED_SRGB8_ETC2:case Ko.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Ko.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Ko.COMPRESSED_RG11_EAC:case Ko.COMPRESSED_SIGNED_RG11_EAC:case Ko.COMPRESSED_RGBA8_ETC2_EAC:case Ko.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let Hve=class{constructor(e=0,n=e){this.width=e,this.height=n,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=CV.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function xet(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:_et(t.internalFormat))*(t.target===34067?6:1))}const VE=()=>Tt.getLogger("esri/views/webgl/textureUtils");function zE(t){const{width:e,height:n,depth:r}=t;(e!=null&&e<0||n!=null&&n<0||r!=null&&r<0)&&VE().error("Negative dimension parameters are not allowed!");const{internalFormat:i}=t;if(i&&(qve(i)||Kve(i))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&VE().error("Depth textures cannot have mipmaps"),s?a!==9729&&a!==9728&&VE().error("Depth textures cannot sample mipmaps"):(a!==9728&&VE().error("Depth textures without filtering must use NEAREST filtering"),o&&VE().error("Depth textures without filtering cannot use compare function"))}}function wet(t){return vet.includes(t)}function qve(t){return aO(AT,t)}function Kve(t){return aO(cN,t)}function bet(t){return t!=null&&aO(Ko,t)}function sx(t){return t!=null&&"type"in t&&t.type==="compressed"}function Eet(t){return t!=null&&"byteLength"in t}function Are(t){return t!=null&&!sx(t)&&!Eet(t)}function E_(t){return t===32879||t===35866}function Ire(t,e,n,r=1){let i=Math.max(e,n);return t===32879&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function tC(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case CV.FLOAT:switch(t.pixelFormat){case 6408:return Gt.RGBA32F;case 6407:return Gt.RGB32F;default:throw new Xe("texture:unknown-format","Unable to derive format")}case CV.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Gt.RGBA8;case 6407:return Gt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?cN.DEPTH24_STENCIL8:e===6402?AT.DEPTH_COMPONENT24:e,t.internalFormat}function Tet(t){let e="width"in t?t.width:t.codedWidth,n="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,n=t.videoHeight),{width:e,height:n,depth:1}}let ket=class Yve extends Hve{constructor(e,n){switch(super(),this.context=e,Object.assign(this,n),this.internalFormat){case Gt.R16F:case Gt.R32F:case Gt.R8_SNORM:case Gt.R8:this.pixelFormat=6403;break;case Gt.R8I:case Gt.R8UI:case Gt.R16I:case Gt.R16UI:case Gt.R32I:case Gt.R32UI:this.pixelFormat=36244}}static validate(e,n){return new Yve(e,n)}};const Aet=!!ye("esri-tests-disable-gpu-memory-measurements"),uf=()=>Tt.getLogger("esri/views/webgl/Texture");var vs;let Iet=(vs=class{constructor(e,n=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=n;else{const i=ket.validate(e,n);if(!i)throw new Xe("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=i}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return Aet?0:xet(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(kre.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,n){const r=this._descriptor;if(r.width!==e||r.height!==n){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=n,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!sx(e)&&this._descriptor.internalFormat&&aO(Ko,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!sx(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,n,r,i,s,o,a=0){o||uf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||uf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=tC(l);const{context:c,pixelFormat:u,dataType:h,target:f,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");const v=c.bindTexture(this,vs.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>l.width||r+s>l.height)&&uf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:x}=c;a&&(i&&s||uf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),x.pixelStorei(x.UNPACK_SKIP_ROWS,a)),Are(o)?x.texSubImage2D(f,e,n,r,i,s,u,h,o):sx(o)?x.compressedTexSubImage2D(f,e,n,r,i,s,l.internalFormat,o.levels[e]):x.texSubImage2D(f,e,n,r,i,s,u,h,o),a&&x.pixelStorei(x.UNPACK_SKIP_ROWS,0),c.bindTexture(v,vs.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,n,r,i,s,o,a,l){l||uf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||uf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=tC(c);const{context:u,pixelFormat:h,dataType:f,isImmutable:g,target:v}=c;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");E_(v)||uf().warn("Attempting to set 3D texture data on a non-3D texture");const x=u.bindTexture(this,vs.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(vs.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+s>c.width||r+o>c.height||i+a>c.depth)&&uf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=u;if(sx(l))l=l.levels[e],b.compressedTexSubImage3D(v,e,n,r,i,s,o,a,c.internalFormat,l);else{const T=l;b.texSubImage3D(v,e,n,r,i,s,o,a,h,f,T)}u.bindTexture(x,vs.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,zE(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const n=this._descriptor.context.bindTexture(this,vs.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(vs.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(n,vs.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,zE(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,zE(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),zE(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=M1(this._compressionAbortController)}_setData(e,n){const r=this._descriptor,i=r.context?.gl;if(!i)return;$0(i),this.hasWebGLTextureObject||(this._glName=i.createTexture(),r.context.instanceCounter.increment(kre.Texture,this)),zE(r);const s=r.context.bindTexture(this,vs.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(vs.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),$0(i);const o=n??r.target,a=E_(o);if(Are(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:c,depth:u}=r;if(l==null||c==null)throw new Xe("texture:missing-size","Width and height must be specified!");if(a&&u==null)throw new Xe("texture:missing-depth","Depth must be specified!");if(r.internalFormat=tC(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,c,u),sx(e)){if(!bet(r.internalFormat))throw new Xe("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,c,u,e),$0(i),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),$0(i),r.context.bindTexture(s,vs.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let n=34069;n<=34074;n++)this._setData(e,n)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:n,flipped:r,preMultiplyAlpha:i}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,n),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_setDataFromTexImageSource(e,n){const{gl:r}=this._descriptor.context,i=this._descriptor;i.internalFormat=tC(i);const s=E_(n),{width:o,height:a,depth:l}=Tet(e);i.width&&i.height,i.width||(i.width=o),i.height||(i.height=a),s&&i.depth,s&&(i.depth=l),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,i.internalFormat,i.hasMipmap,o,a,l),this._texImage(n,0,i.internalFormat,o,a,l,e),$0(r),i.hasMipmap&&(this.generateMipmap(),$0(r))}_setDataFromCompressedSource(e,n,r){const i=this._descriptor,{width:s,height:o,depth:a}=i,l=e.levels,c=Ire(r,s,o,a),u=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(i.target,33085,u),this._forEachMipmapLevel((h,f,g,v)=>{const x=l[Math.min(h,l.length-1)];this._compressedTexImage(r,h,n,f,g,v,x)},u)}_texStorage(e,n,r,i,s,o){const{gl:a}=this._descriptor.context;if(!wet(n)&&!qve(n)&&!Kve(n))throw new Xe("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?Ire(e,i,s,o):1;if(E_(e)){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,n,i,s,o)}else a.texStorage2D(e,l,n,i,s);this._wasImmutablyAllocated=!0}_texImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=E_(e),{isImmutable:u,pixelFormat:h,dataType:f}=this._descriptor;if(u){if(a!=null){const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,n,0,0,0,i,s,o,h,f,g)}else l.texSubImage2D(e,n,0,0,i,s,h,f,g)}}else{const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,n,r,i,s,o,0,h,f,g)}else l.texImage2D(e,n,r,i,s,0,h,f,g)}}_compressedTexImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=E_(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,n,0,0,0,i,s,o,r,a)}else l.compressedTexSubImage2D(e,n,0,0,i,s,r,a)}else if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,n,r,i,s,o,0,a)}else l.compressedTexImage2D(e,n,r,i,s,0,a)}async _compressOnWorker(e){const{width:n,height:r,context:i,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:h}=i.capabilities;if(!vs.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!u&&!h)return;this.abortCompression();const f=new AbortController;let g;this._compressionAbortController=f,l?.increment();try{e instanceof Uint8Array?g=e.buffer:(g=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),pi(f));const v={data:g,width:n,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!u,hasS3TC:!!h},x=await vs.compressionWorkerHandle.invoke(v,f.signal,"low");if(pi(f),x.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=x.internalFormat,this._setData(x.compressedTexture),c?.(b-this.usedMemory)}}catch(v){_a(v)||uf().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),g instanceof ImageBitmap&&g.close()}}_forEachMipmapLevel(e,n=1/0){let{width:r,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===32879;if(r==null||i==null||l&&s==null)throw new Xe("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,i,s),o&&(r!==1||i!==1||l&&s!==1)&&!(c>=n);++c)r=Math.max(1,r>>1),i=Math.max(1,i>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,n=e.context?.gl;let r=e.samplingMode,i=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(i=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(i=9728)),n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,r),n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,i)}_applyWrapMode(){const e=this._descriptor,n=e.context?.gl;typeof e.wrapMode=="number"?(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode)):(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode.s),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,n=e.context?.gl,r=e.compareEnabled?n.COMPARE_REF_TO_TEXTURE:n.NONE;n.texParameteri(e.target,n.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&n.texParameteri(e.target,n.TEXTURE_COMPARE_FUNC,n.GREATER),$0(n)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,n=e.context.capabilities.textureFilterAnisotropic;n&&e.context.gl.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},vs.TEXTURE_UNIT_FOR_UPDATES=0,vs.compressionWorkerHandle=null,vs);const uj=()=>Tt.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Pet(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Ret=[0,0,0,0];let Xve=class{constructor(){this.type="single",this._highlightOptions=new wg,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*FE),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,n){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,det),n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<Uve)-1,activeGradient:this}]}_updateGradientTexture(e){const n=Cet(this._highlightOptions);if(n===this._optionsShadeTexKey)return;this._optionsShadeTexKey=n,Pet(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,i=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*get,c=Math.abs(i)>l?Math.round(10*(Math.abs(i)-l))/10:0,u=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let h;c&&!u?uj().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&u?uj().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&u&&uj().error("The highlight is "+Math.max(c,u)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function g(x,b,T){f[0]=(1-T)*x[0]+T*b[0],f[1]=(1-T)*x[1]+T*b[1],f[2]=(1-T)*x[2]+T*b[2],f[3]=(1-T)*x[3]+T*b[3]}const{_texelData:v}=this;for(let x=0;x<FE;++x)h=i+x/(FE-1)*(a-i),h<i?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):h<s?g(Ret,r.outlineColor,(h-i)/(s-i)):h<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:h<a?g(r.outlineColor,r.fillColor,(h-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,v[4*x]=255*f[0],v[4*x+1]=255*f[1],v[4*x+2]=255*f[2],v[4*x+3]=255*f[3];if(this._minMaxDistance[0]=i,this._minMaxDistance[1]=a,!this._shadeTex){const x=new Hve(FE,1);x.wrapMode=33071,this._shadeTex=new Iet(e,x)}this._shadeTex.updateData(0,0,0,FE,1,this._texelData)}};function Cet(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Met=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let n=0;n<e.length;n++)this.gradients[n]||(this.gradients[n]=new Xve),this.gradients[n].setHighlightOptions(e[n]);for(let n=e.length+1;n<this.gradients.length;n++)this.gradients[n].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const n=[];for(let r=0;r<this.gradients.length;r++){const i=this.gradients[r];n.push({activeReasons:e,activeGradient:i}),e<<=1}return n}};const Zve={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Net={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Oet={...Zve,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Let({pixelRatio:t,state:e,displayLevel:n,requiredLevel:r},i){const s=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:e.scale,currentZoom:n,metersPerSRUnit:Vd(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function Jve(t){return t.passOptions?.type==="highlight"}function Qve(t){return t.passOptions?.type==="hittest"}function Det(t){if(!Qve(t))return null;const{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=t.passOptions;return{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function $et(t){if(!Jve(t))return null;const{activeReasons:e,highlightAll:n}=t.passOptions;return{activeReasons:e,highlightAll:n?1:0}}function W5t(t,e,n){const r={};for(const i in n)typeof n[i]!="function"?r[i]=n[i]:r[i]=n[i](t,e);return r}function H5t(t,e){const{attributeView:n,context:r}=t;return{storage:n.getUniforms(r),view:Let(t,e),hittestRequest:Det(t),highlight:$et(t)}}function q5t(t){return{inside:t.selection===2,outside:t.selection===3}}function jet(t){return Qve(t)?Net:Jve(t)&&t.passOptions.stepType==="clear"?Oet:Zve}function K5t(t){const{row:e,col:n}=t.key,r=n*Tre,i=e*Tre;return{tileOffsetFromLocalOrigin:[r%eC,i%eC],maxIntsToLocalOrigin:[Math.floor(r/eC),Math.floor(i/eC)]}}const Fet=new Ws({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function Y5t(t){return Fet.toJSON(t)}function X5t(t){const{bandCount:e,attributeTable:n,colormap:r,pixelType:i}=t.raster.rasterInfo;return e===1&&(n!=null||r!=null||i==="u8"||i==="s8")}function Vet(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Met:new Xve),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function Z5t(t,e,n,r){const{painter:i,highlightGradient:s}=t,{highlight:o}=i.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const u={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(u),n(u),c<l.length-1){let f=0;for(let g=c+1;g<l.length;g++)f|=l[g].activeReasons;n({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};i.setPipelineState(jet(t)),i.updatePipelineState(t.context),o.draw(h),o.unbind()}t.passOptions=a}const nC=t=>parseFloat(t)/100;function zet(t,e,n){const r=typeof t.left=="string"?nC(t.left)*e:t.left,i=typeof t.right=="string"?nC(t.right)*e:t.right,s=typeof t.top=="string"?nC(t.top)*n:t.top,o=typeof t.bottom=="string"?nC(t.bottom)*n:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-i,r),ymin:a,ymax:Math.max(n-o,s)}}function e_e(t,e,n,r){switch(e.type){case"rect":{const{width:i,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=zet(e,i,s),{x:u,y:h}=n;return u>o&&u<a&&h>l&&h<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||xB(e.path,[n.x,n.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?_B(e.geometry,r):uI(e.geometry,r))}}function Uet(t){if(!t.highlights)return null;const e=t.highlights.findIndex(n=>n.name==="default");return e===-1?null:t.highlights.items[e]}function Get(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ot([new wg])}const n=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[n].assignFrom(e):(t.highlights.removeAt(n),t.highlights.length===0&&(t.highlights=null))}async function Bet(t,e,n){const r=L1e(e)?O1e(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,l=null;n?.include?Rre(n.include,Pre(t,f=>{i.add(f),hj(f,g=>s.add(g))},(f,g)=>{s.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>o=!0)):(o=!0,i=new Set(t.allLayerViews),i.forEach(f=>{hj(f,g=>s.add(g))})),n?.exclude&&Rre(n.exclude,Pre(t,f=>{i.delete(f),hj(f,g=>s.delete(g))},f=>s.delete(f),f=>{l||(l=new Set),l.add(f)}));const c=t.toMap(r),u=t.allLayerViews.filter(f=>!f.suspended&&i.has(f)&&f.clips.every(g=>e_e(t,g,r,c))).reverse();let h=[...o?t.graphicsView.hitTest(c).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:c})):[],...await Promise.all(u.map(f=>f.hitTest(c,r)).toArray())].filter(s2).flat().filter(s2);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||s.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(MV(f.graphic)))),l&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(MV(f.graphic)))),{screenPoint:r,results:h}}function Pre(t,e,n,r,i,s){return o=>{if(o instanceof Xo){if(o.layer===t)s?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&i?.(a)}r(MV(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&n(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function Rre(t,e){if(t)if(_4(t))for(const n of t)if(_4(n))for(const r of n)e(r);else e(n);else e(t)}function MV(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function hj(t,e){const n=t.layer;n?.type==="subtype-group"&&n.sublayers.forEach(r=>{e(r)})}let UE=null,uN=!0;function Wet(t,e,n){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(uN)try{return new ImageData(t,e)}catch{uN=!1}return t_e(t,e,n)}function J5t(t,e,n,r){if(!e||!n)throw new Error("Cannot construct image data without dimensions");if(uN)try{return new ImageData(t,e,n)}catch{uN=!1}const i=t_e(e,n,r);return i.data.set(t,0),i}function Het(){return UE||(UE=document.createElement("canvas"),UE.width=1,UE.height=1),UE}function t_e(t,e,n){return n||(n=Het()),n.getContext("2d").createImageData(t,e)}async function qet(t,e){const n=window.URL.createObjectURL(t);try{const{data:r}=await es(n,{...e,responseType:"image"});return r}catch(r){throw _a(r)?r:new Xe("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function Q5t(t,e){const{arrayBuffer:n,mediaType:r}=await Ket(t,e),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await _e(()=>import("./gif-BULDmyyv.js"),[]);if(s(n))return o(n,e)}if(i){const{isAnimatedPNG:s,parseApng:o}=await _e(()=>import("./apng-B63tquyl.js"),__vite__mapDeps([400,61]));if(s(n))return o(n,e)}return qet(new Blob([n],{type:r}),e)}async function Ket(t,e){const n=o2(t);if(n?.isBase64)return{arrayBuffer:Ude(n.data),mediaType:n.mediaType};const r=await es(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function n_e(t,e,n){const{ctx:r,canvas:i}=i_e(t,n),s=r.getImageData(0,0,t.width,t.height),o=o_e(i,e);return s_e(i),{dataUrl:o,data:s}}function r_e(t,e){const{ctx:n,canvas:r}=i_e(t,e),i=n.getImageData(0,0,t.width,t.height);return s_e(r),i}function i_e(t,e){const n=Yet();e.premultipliedAlpha&&Qet(t),n.width=t.width,n.height=t.height;const r=n.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&Jet(r),{ctx:r,canvas:n}}function s_e(t){t.width=0,t.height=0}function Yet(){return dj==null&&(dj=document.createElement("canvas")),dj}let dj=null;function o_e(t,e){const n=ett[e.format],r=e.quality/100;return t.toDataURL(n,r)}function a_e(t,e){const n=Zet(t),r=ntt[n];return{format:n,quality:hu(e??r,0,100)}}function l_e(t,e){return e/Math.max(t[0],t[1])}function Xet(t,e,n,r=0,i=0,s=t.width-r,o=t.height-i,a=!1){const{data:l}=t,{width:c,height:u,data:h}=e,f=s/c,g=o/u,v=Math.ceil(f/2),x=Math.ceil(g/2),b=t.width;for(let T=0;T<u;T++)for(let A=0;A<c;A++){const I=4*(A+(a?u-T-1:T)*c);let P=0,M=0,F=0,C=0,N=0,O=0;const j=(T+.5)*g;for(let V=Math.floor(T*g);V<(T+1)*g;V++){const G=Math.abs(j-(V+.5))/x,U=(A+.5)*f,fe=G*G;for(let Re=Math.floor(A*f);Re<(A+1)*f;Re++){const Be=Math.abs(U-(Re+.5))/v,$e=Math.sqrt(fe+Be*Be);if($e>=1)continue;let pe=2*$e*$e*$e-3*$e*$e+1;const De=4*(r+Re+(i+V)*b);O+=pe*l[De+3],M+=pe,!n&&l[De+3]<255&&(pe=pe*l[De+3]/255),F+=pe*l[De],C+=pe*l[De+1],N+=pe*l[De+2],P+=pe}}h[I]=F/P,h[I+1]=C/P,h[I+2]=N/P,h[I+3]=O/M}return e}function Zet(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return ttt}}function Jet(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Qet(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==255&&i>0){const s=255/i;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const ett={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Cre=98,ttt="png",ntt={png:100,jpg:Cre,jpeg:Cre},eOt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Wet,encode:n_e,encodeData:r_e,getFormatAndQuality:a_e,getMaximumResolutionScale:l_e,resampleHermite:Xet,toDataUrl:o_e},Symbol.toStringTag,{value:"Module"})),c_e={flipY:!0,premultipliedAlpha:!0};async function rtt(t,e){const n=await u_e(t,e),{format:r,quality:i}=a_e(e?.format,e?.quality);return n_e(n,{format:r,quality:i},c_e)}async function itt(t,e){const n=await u_e(t,e);return r_e(n,c_e)}function u_e(t,e){const n=att(e||{},ott(t.stage,t.size),t.size,t.padding),r=stt(e,t.allLayerViews);return t.stage.takeScreenshot(n,r,t.backgroundColor,e?.rotation)}function stt(t={},e){if(!t.layers)return;const n=[];return t.layers.forEach(r=>{const i=e.find(s=>s.layer.id===r.id);i?.container&&n.push(i.container)}),n}function ott(t,e){return Math.min(4,l_e(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function att(t,e,n,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;t.width!=null&&t.height!=null?i=[t.width,t.height]:t.width==null&&t.height!=null?i=[t.height,t.height]:t.width!=null&&t.height==null?i=[t.width,t.width]:t.width==null&&t.height==null&&(i=null);const s=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(i){const u=s/o,h=i[0]/i[1];if(h>u){const f=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-f)/2),width:c.width,height:Math.round(f)}}else{const f=c.height*h;c={x:Math.round(c.x+(c.width-f)/2),y:c.y,width:Math.round(f),height:c.height}}}else i=[c.width,c.height];return i[0]>c.width?(a=Math.min(i[0]/c.width,e),l=i[0]/c.width/a):(a=1,l=i[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const ltt=t=>t.includes("Brush");let h_e=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),ltt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const Mre=Symbol("analyses-owner-handles");let Am=class extends Kt{constructor(e){super(e),this._allAnalysisViews=new Ot,this._creatingViewCount=0,this._attachedToViewResolver=Nre(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(n,r)=>this.view.emit(n,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(kr("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(kr()),this._attachedToViewResolver=Nre()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const n=this._items.get(e);if(n==null||n.state.list===1)throw new Xe("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return n.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),Mre)}_disconnectOwners(){this.removeHandles(Mre),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const i of e)this._addAnalysis(i);const n=e.on("after-add",i=>this._addAnalysis(i.item)),r=e.on("after-remove",i=>this._removeAnalysis(i.item));return Kn(()=>{n.remove(),r.remove();for(const i of e)this._removeAnalysis(i)})}_addAnalysis(e){const n=this._items.get(e);if(n==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=yO(i=>this._createAnalysisViewPromise(r,i).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else n.state.list=0}_removeAnalysis(e){const n=this._items.get(e);n!=null?(n.state.list=1,this._scheduleUpdate()):Tt.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=rb(()=>this._update()))}_update(){this._scheduledUpdateHandle=ri(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:n,view:r}=e;switch(this._items.delete(n),e.state.view){case 0:e.createAnalysisViewTask=M1(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Ni(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:n,analysisView:r}))}})}async _createAnalysisViewPromise(e,n){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new Xe("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(fa(n))throw this._creatingViewCount-=1,kr("AnalysisView creation aborted");const i=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;uu(n,()=>{s&&this._destroyAnalysisView(r,i)});try{await i.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,i),o}if(fa(n))throw kr();return s=!1,e.view=i,e.state.view=1,this._allAnalysisViews.add(i),this._creatingViewCount-=1,i}_destroyAnalysisView(e,n){n.destroyed||(this._creatingViewCount-=1,n.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:n}))}};_([E()],Am.prototype,"updating",null),_([E({constructOnly:!0})],Am.prototype,"importAnalysisViewModule",void 0),_([E({constructOnly:!0})],Am.prototype,"view",void 0),_([E()],Am.prototype,"_allAnalysisViews",void 0),_([E()],Am.prototype,"_creatingViewCount",void 0),Am=_([ue("esri.views.support.AnalysisViewManager")],Am);const ctt=Am;function Nre(){const t=fc();return t.promise.catch(()=>{}),t}let utt=class{constructor(e){this.getUnmaskedRenderer=e}};function htt(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new utt(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Ore;function dtt(){return Ore??=mtt(),Ore}let ftt=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function ptt(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let n=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=e.getContext("webgl2"),n!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=htt(n)?.getUnmaskedRenderer()??"unknown")),n==null)return n;t.available=!0,t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),n}function mtt(){const t=new ftt,e=ptt(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function gtt(t){const e=dtt();return e.available?t==="3d"&&e.majorPerformanceCaveat?new Xe("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new Xe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Xe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Xe("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function ytt(t){return t&&"nodeType"in t}function vtt(t){return t&&typeof t.render=="function"}const Lre={component:"esri-component"};let ly=class extends Kt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const n=this._get("node");e!==n&&(e&&e.classList.add(Lre.component),n&&n.classList.remove(Lre.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||ytt(e)?(this._set("widget",null),iW(e)):(vtt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};_([E()],ly.prototype,"id",null),_([E()],ly.prototype,"node",null),_([Gs("node")],ly.prototype,"castNode",null),_([E({readOnly:!0})],ly.prototype,"widget",void 0),ly=_([ue("esri.views.ui.Component")],ly);const XM=ly,_tt=(t,e)=>{let n=t;for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n.parentNode instanceof ShadowRoot?n=n.parentNode.host:n=n.parentNode}return!1},oOt=(t,e,n)=>{const r=xtt(e).subscribe;return r(i=>{i.some(o=>_tt(t,o.target))&&n()})},fj={},xtt=t=>{const e=t.join(","),n=fj[e];if(n!==void 0)return n;const r=new Set,i=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&i.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(i.disconnect(),fj[e]=void 0)})};return fj[e]=s,s},d_e=(t,e)=>{let n=t;for(;n;){const r=n.closest?.(e);if(r)return r;const i=n.getRootNode?.();if(i===globalThis.document)return;n=i.host}};function wtt(t){const e=d_e(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const aOt=(t,e,n)=>d_e(t,`[${e}]`)?.getAttribute(e)??n,btt="--esri-calcite-mode-name";function Ett(){const t=getComputedStyle(document.body).getPropertyValue(btt).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const f_e="calcite-mode-";function p_e(t){return Ett()??wtt(t??document.body)}function lOt(t){return p_e(t)==="dark"}function Stt(t){return`${f_e}${p_e(t)}`}function Ttt(t){const e=Stt(t);ktt(t),t.classList.add(e)}function ktt(t){Array.from(t.classList).forEach(e=>{e.startsWith(f_e)&&t.classList.remove(e)})}const KO=new Map;function m_e(){KO.clear()}function Att(t){return KO.get(t)}function Itt(t,e){KO.set(t,e)}function pj(t){KO.delete(t)}function Ptt(...t){const e=Pa.acquire();for(let r=0;r<t.length;r++){const i=t[r],s=typeof i;if(s==="string")e.push(i);else if(Array.isArray(i))e.push.apply(e,i);else if(s==="object")for(const o in i)i[o]&&e.push(o)}const n=e.join(" ");return Pa.release(e),n}(()=>{const t=new Map,e=new ResizeObserver(r=>{m_e();for(const i of r)t.get(i.target)?.(i)}),n=(r,i,s)=>(t.set(r,i),e.observe(r,s),Kn(()=>{e.unobserve(r),t.delete(r)}));return(r,i,s)=>{let o=null;return sv([dn(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=n(a,i,s))},ta),Kn(()=>o?.remove())])}})();function Rtt(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function cOt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function uOt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function Ctt(t){return t==="Enter"||t===" "}async function Mtt(t,e){await V$e(rI(e));const n=typeof t=="function"?t():t;n&&("setFocus"in n&&typeof n.setFocus=="function"?await n.setFocus():n instanceof HTMLElement&&n.focus())}const Ntt={left:0,top:0,bottom:0,right:0},g_e={bottom:30,top:15,right:15,left:15},hf="esri-ui",Ka={ui:hf,corner:`${hf}-corner`,innerContainer:`${hf}-inner-container`,manualContainer:`${hf}-manual-container`,cornerContainer:`${hf}-corner-container`,topLeft:`${hf}-top-left`,topRight:`${hf}-top-right`,bottomLeft:`${hf}-bottom-left`,bottomRight:`${hf}-bottom-right`};function Ott(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function rC(t){return t===0?"0":`${t}px`}function mj(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function gj(t,{top:e,bottom:n,left:r,right:i}){t.style.top=e,t.style.bottom=n,t.style.left=r,t.style.right=i}let Yh=class extends aI{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=iu(),this.view=null,this._applyViewPadding=()=>{const n=this.container;n&&gj(n,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const n=this._innerContainer;n&&gj(n,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([dn(()=>[this.view?.padding,this.container],this._applyViewPadding,ma),dn(()=>this.padding,this._applyUIPadding,ma),dn(()=>[this.container,this._locale],([e,n])=>{e&&e.setAttribute("lang",n)},ma),zpe(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const n=this._get("container");e!==n&&(e&&(e.classList.add(Ka.ui),Ttt(e),this._attachContainers(e)),n&&(n.classList.remove(Ka.ui),gj(n,{top:"",bottom:"",left:"",right:""}),n.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const n=this._getViewPadding(),{top:r,bottom:i}=n;return Math.max(e-r-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...g_e,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const n=this._getViewPadding(),{left:r,right:i}=n;return Math.max(e-r-i,0)}add(e,n){let r,i,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,n));const o=mj(e);o&&({index:r,position:n,component:e,key:i}=o),n&&typeof n=="object"&&({index:r,key:i,position:n,internal:s}=n),!e||n&&!this._isValidPosition(n)||this._add(e,n,r??this._getNumComponentsAtPosition(n),i,s)}remove(e,n){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,n));const r=this._find(e);if(r){const i=this._componentMap.get(r);if(!i||i.key!==n)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i.position&&l.index>i.index&&l.index--}),this._components.splice(s,1)[0]}}empty(e,n={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,n);return}const r=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||n.removeInternal);for(const s of i)this.remove(s)}move(e,n){if(Array.isArray(e)&&e.forEach(o=>this.move(o,n)),!e)return;let r;const i=mj(e)||mj(n);if(i&&(r=i.index,n=i.position,e=i.component||e),n&&!this._isValidPosition(n))return;const s=this.remove(e);s&&this.add(s,{position:n,index:r})}find(e){if(!e)return null;const n=this._findById(e);return n&&(n.widget||n.node)}getComponents(e,n={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,n)):this._getComponentsAtPosition(e,n):this._components.filter(r=>n.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}getPosition(e){for(const n in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[n].contains(e))return n;return null}_add(e,n,r,i,s){e instanceof XM||(e=new XM({node:e}));const{widget:o}=e;o!=null&&o instanceof Kt&&o.addHandles(Kn(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[n];this._components.some(l=>{const c=this._componentMap.get(l)?.position,u=c?this._positionNameToContainerLookup[c]:null;return a===u&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),u=c?.position,h=u?this._positionNameToContainerLookup[u]:null;c&&h===a&&c.index>=r&&c.index++}),this._place({component:e,position:n,index:r}),this._components.push(e),this._componentMap.set(e,{key:i,position:n,internal:s,index:r})}_find(e){return e?e instanceof XM?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??Ntt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ka.innerContainer,Ka.cornerContainer);const n=document.createElement("div");n.classList.add(Ka.innerContainer,Ka.manualContainer);const r=document.createElement("div");r.classList.add(Ka.topLeft,Ka.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(Ka.topRight,Ka.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(Ka.bottomLeft,Ka.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Ka.bottomRight,Ka.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=n;const a=Rtt();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":s,"bottom-right":o,"top-leading":a?i:r,"top-trailing":a?r:i,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:n,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const n=e.position??"manual",{component:r,index:i}=e,s=this._positionNameToContainerLookup[n],o=i!=null&&i>-1;if(Ott(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const l of a){const c=this._findByNode(l);if(c&&i<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:rC(e.top),left:rC(e.left),right:rC(e.right),bottom:rC(e.bottom)}}_findByComponent(e){return this._components.find(n=>n===e)??null}_findById(e){return this._components.find(({id:n})=>n===e)??null}_findByNode(e){return e?this._components.find(({node:n})=>n===e):null}_getComponentsAtPosition(e,n){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(s2).filter(i=>n.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};_([E()],Yh.prototype,"_locale",void 0),_([E()],Yh.prototype,"container",null),_([E()],Yh.prototype,"height",null),_([E({value:g_e})],Yh.prototype,"padding",null),_([Gs("padding")],Yh.prototype,"castPadding",null),_([E()],Yh.prototype,"view",void 0),_([E()],Yh.prototype,"width",null),Yh=_([ue("esri.views.ui.UI")],Yh);const Ltt=Yh,Dtt={handleInterceptedEvent:(t,e,n,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||n,[r]))},$tt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.startsWith("-")?t.style.setProperty(e,n):t.style[e]=n}},jtt=t=>({...$tt,...t}),Ftt=(t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n},Vtt=(t,e)=>t.find(e),Dre=(t,e,n=!1)=>{let r=t;return e.forEach((i,s)=>{const o=r?.children?Vtt(r.children,a=>a.domNode===i):void 0;n&&!o&&s!==e.length-1||(r=o)}),r},ztt=t=>{let e;const n={...Dtt,...t},r=jtt(n),i=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],u=(f,g,v)=>{let x;r.eventHandlerInterceptor=(T,A,I,P)=>function(M){let F;i("domEvent",M);const C=Ftt(M.currentTarget,x.domNode),N=C.some(j=>customElements.get(j?.tagName?.toLowerCase()));if(M.eventPhase===Event.CAPTURING_PHASE||!N)C.reverse(),F=Dre(x.getLastRender(),C);else{const j=M.composedPath(),V=j.slice(j.indexOf(M.currentTarget),j.indexOf(x.domNode)).reverse();F=Dre(x.getLastRender(),V,!0)}let O;return F&&(O=n.handleInterceptedEvent(e,F,this,M)),i("domEventProcessed",M),O},n.postProcessProjectionOptions?.(r);const b=v();x=f(g,b,r),r.eventHandlerInterceptor=void 0,l.push(x),c.push(v),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(x,b)};let h=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let f=0;f<l.length;f++){const g=c[f]();i("rendered",void 0);try{l[f].update(g)}catch(v){console.error(v)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,l,c)),e={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,g)=>{u(ng.append,f,g)},insertBefore:(f,g)=>{u(ng.insertBefore,f,g)},merge:(f,g)=>{u(ng.merge,f,g)},replace:(f,g)=>{u(ng.replace,f,g)},detach:f=>{for(let g=0;g<c.length;g++)if(c[g]===f)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},Ri=(t,e,...n)=>{try{return t?.call(e,...n)}catch(r){console.error(r,t)}},NV=async(t,e,...n)=>{try{return await t?.call(e,...n)}catch(r){console.error(r,t)}},LW=Symbol.for("controller"),Utt=t=>typeof t=="object"&&t!==null&&(LW in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),dOt=t=>typeof t?.then=="function";let OS;const LS=t=>{OS!==t&&(OS=t,queueMicrotask(()=>OS===t?OS=void 0:0))},YO=t=>OS;let cy=[];const Gtt=t=>{if(t===void 0){cy=[];return}const e=cy.indexOf(t);cy=e===-1?[...cy,t]:cy.slice(0,e+1),queueMicrotask(()=>cy=[])},Btt=()=>cy;let Sx;const fOt=t=>{Sx!==t&&(Sx=t,queueMicrotask(()=>Sx===t?Sx=void 0:0))},Wtt=()=>{const t=Sx;return Sx=void 0,t},Htt=async(t,e)=>{const n=DW(t);if(n===void 0)return t;if(await n.ready,typeof e=="function"){const r=n.watchExports(i=>e(i,r))}return n.exports},qtt=async t=>{const e=DW(t);return await e.ready,e},DW=t=>{const n=YO().manager.X(t);if(n!==void 0)return n;if(Utt(t))return t;const r=Wtt();if(r!==void 0)return r};let OV=!1;const pOt=t=>{OV=!0;try{return t()}finally{OV=!1}};const ZM=globalThis,$W=ZM.ShadowRoot&&(ZM.ShadyCSS===void 0||ZM.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,jW=Symbol(),$re=new WeakMap;let y_e=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==jW)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if($W&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=$re.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&$re.set(n,e))}return e}toString(){return this.cssText}};const Ktt=t=>new y_e(typeof t=="string"?t:t+"",void 0,jW),gOt=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new y_e(n,t,jW)},Ytt=(t,e)=>{if($W)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=ZM.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},jre=$W?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ktt(n)})(t):t;const{is:Xtt,defineProperty:Ztt,getOwnPropertyDescriptor:Jtt,getOwnPropertyNames:Qtt,getOwnPropertySymbols:ent,getPrototypeOf:tnt}=Object,XO=globalThis,Fre=XO.trustedTypes,nnt=Fre?Fre.emptyScript:"",rnt=XO.reactiveElementPolyfillSupport,IT=(t,e)=>t,LV={toAttribute(t,e){switch(e){case Boolean:t=t?nnt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},FW=(t,e)=>!Xtt(t,e),Vre={attribute:!0,type:String,converter:LV,reflect:!1,useDefault:!1,hasChanged:FW};Symbol.metadata??=Symbol("metadata"),XO.litPropertyMetadata??=new WeakMap;let ox=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Vre){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Ztt(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=Jtt(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Vre}static _$Ei(){if(this.hasOwnProperty(IT("elementProperties")))return;const e=tnt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(IT("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(IT("properties"))){const n=this.properties,r=[...Qtt(n),...ent(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(jre(i))}else e!==void 0&&n.push(jre(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ytt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:LV).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:LV;this._$Em=i;const a=o.fromAttribute(n,s.type);this[i]=a??this._$Ej?.get(i)??a,this._$Em=null}}requestUpdate(e,n,r,i=!1,s){if(e!==void 0){const o=this.constructor;if(i===!1&&(s=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??FW)(s,n)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};ox.elementStyles=[],ox.shadowRootOptions={mode:"open"},ox[IT("elementProperties")]=new Map,ox[IT("finalized")]=new Map,rnt?.({ReactiveElement:ox}),(XO.reactiveElementVersions??=[]).push("2.1.2");const VW=globalThis,zre=t=>t,hN=VW.trustedTypes,Ure=hN?hN.createPolicy("lit-html",{createHTML:t=>t}):void 0,v_e="$lit$",Bm=`lit$${Math.random().toFixed(9).slice(2)}$`,__e="?"+Bm,int=`<${__e}>`,G1=document,Jk=()=>G1.createComment(""),Qk=t=>t===null||typeof t!="object"&&typeof t!="function",zW=Array.isArray,snt=t=>zW(t)||typeof t?.[Symbol.iterator]=="function",yj=`[ 	
\f\r]`,GE=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gre=/-->/g,Bre=/>/g,F0=RegExp(`>|${yj}(?:([^\\s"'>=/]+)(${yj}*=${yj}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Wre=/'/g,Hre=/"/g,x_e=/^(?:script|style|textarea|title)$/i,w_e=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),vOt=w_e(1),_Ot=w_e(2),zg=Symbol.for("lit-noChange"),Ji=Symbol.for("lit-nothing"),qre=new WeakMap,Vy=G1.createTreeWalker(G1,129);function b_e(t,e){if(!zW(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ure!==void 0?Ure.createHTML(e):e}const ont=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=GE;for(let a=0;a<n;a++){const l=t[a];let c,u,h=-1,f=0;for(;f<l.length&&(o.lastIndex=f,u=o.exec(l),u!==null);)f=o.lastIndex,o===GE?u[1]==="!--"?o=Gre:u[1]!==void 0?o=Bre:u[2]!==void 0?(x_e.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=F0):u[3]!==void 0&&(o=F0):o===F0?u[0]===">"?(o=i??GE,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?F0:u[3]==='"'?Hre:Wre):o===Hre||o===Wre?o=F0:o===Gre||o===Bre?o=GE:(o=F0,i=void 0);const g=o===F0&&t[a+1].startsWith("/>")?" ":"";s+=o===GE?l+int:h>=0?(r.push(c),l.slice(0,h)+v_e+l.slice(h)+Bm+g):l+Bm+(h===-2?a:g)}return[b_e(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class eA{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=ont(e,n);if(this.el=eA.createElement(c,r),Vy.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=Vy.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(v_e)){const f=u[o++],g=i.getAttribute(h).split(Bm),v=/([.?@])?(.*)/.exec(f);l.push({type:1,index:s,name:v[2],strings:g,ctor:v[1]==="."?lnt:v[1]==="?"?cnt:v[1]==="@"?unt:ZO}),i.removeAttribute(h)}else h.startsWith(Bm)&&(l.push({type:6,index:s}),i.removeAttribute(h));if(x_e.test(i.tagName)){const h=i.textContent.split(Bm),f=h.length-1;if(f>0){i.textContent=hN?hN.emptyScript:"";for(let g=0;g<f;g++)i.append(h[g],Jk()),Vy.nextNode(),l.push({type:2,index:++s});i.append(h[f],Jk())}}}else if(i.nodeType===8)if(i.data===__e)l.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Bm,h+1))!==-1;)l.push({type:7,index:s}),h+=Bm.length-1}s++}}static createElement(e,n){const r=G1.createElement("template");return r.innerHTML=e,r}}function k2(t,e,n=t,r){if(e===zg)return e;let i=r!==void 0?n._$Co?.[r]:n._$Cl;const s=Qk(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=i:n._$Cl=i),i!==void 0&&(e=k2(t,i._$AS(t,e.values),i,r)),e}class ant{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=(e?.creationScope??G1).importNode(n,!0);Vy.currentNode=i;let s=Vy.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new II(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new hnt(s,this,e)),this._$AV.push(c),l=r[++a]}o!==l?.index&&(s=Vy.nextNode(),o++)}return Vy.currentNode=G1,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class II{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=Ji,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=k2(this,e,n),Qk(e)?e===Ji||e==null||e===""?(this._$AH!==Ji&&this._$AR(),this._$AH=Ji):e!==this._$AH&&e!==zg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):snt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ji&&Qk(this._$AH)?this._$AA.nextSibling.data=e:this.T(G1.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=eA.createElement(b_e(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(n);else{const s=new ant(i,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=qre.get(e.strings);return n===void 0&&qre.set(e.strings,n=new eA(e)),n}k(e){zW(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new II(this.O(Jk()),this.O(Jk()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=zre(e).nextSibling;zre(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class ZO{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=Ji,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Ji}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=k2(this,e,n,0),o=!Qk(e)||e!==this._$AH&&e!==zg,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=k2(this,a[r+l],n,l),c===zg&&(c=this._$AH[l]),o||=!Qk(c)||c!==this._$AH[l],c===Ji?e=Ji:e!==Ji&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!i&&this.j(e)}j(e){e===Ji?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let lnt=class extends ZO{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ji?void 0:e}};class cnt extends ZO{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ji)}}let unt=class extends ZO{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=k2(this,e,n,0)??Ji)===zg)return;const r=this._$AH,i=e===Ji&&r!==Ji||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Ji&&(r===Ji||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},hnt=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){k2(this,e)}};const dnt=VW.litHtmlPolyfillSupport;dnt?.(eA,II),(VW.litHtmlVersions??=[]).push("3.3.2");const fnt=(t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=n?.renderBefore??null;r._$litPart$=i=new II(e.insertBefore(Jk(),s),s,void 0,n??{})}return i._$AI(t),i};const UW=globalThis;let cw=class extends ox{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=fnt(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return zg}};cw._$litElement$=!0,cw.finalized=!0,UW.litElementHydrateSupport?.({LitElement:cw});const pnt=UW.litElementPolyfillSupport;pnt?.({LitElement:cw});(UW.litElementVersions??=[]).push("4.2.2");class tA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const mnt=(t,e)=>{const n=e/gnt;let r=0;const i=setInterval(()=>{r+=n,r>=e&&(clearInterval(i),t())},n);return i},gnt=4,ynt=(t,e,n)=>{const r=Object.keys(t),i=r.length;Tx===void 0&&queueMicrotask(JO),Tx??=new Map;let s=Tx.get(t);return s===void 0&&(s={callbacks:[],keyCount:i},Tx.set(t,s)),s.keyCount!==i&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=i),s.callbacks.push(o=>{const a=c=>Ri(e,null,c),l=o[i];l===void 0?a(void 0):t[l]===n?a(l):a(void 0)}),n};let Tx;const JO=()=>{Tx?.forEach(({callbacks:t},e)=>{const n=Object.keys(e);t.forEach(r=>r(n))}),Tx=void 0},vnt=(t,e,n)=>{const r=t.manager;return r.V!==Ji&&r.V!==n&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=n,r.T.push((i,s)=>Ri(e,void 0,n===s?i:void 0)),n},_nt=(t=[YO(),...Btt()],e,n)=>{const r=Array.isArray(t)?t:[t];let i=r.length+1;const s=o=>{i-=1,o!==void 0&&(i=Math.min(i,0)),i===0&&e(o)};r.forEach(o=>ynt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),n));for(const o of r)if("manager"in o&&o.manager.component===o){vnt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),n);break}return n},xnt=(t="",e={},n=YO())=>{const r={emit:i=>{t===""&&JO();const s=new CustomEvent(t,{detail:i,cancelable:!0,bubbles:!0,composed:!0,...e});return n.el.dispatchEvent(s),s}};return t===""&&_nt(void 0,i=>t=i.key,r),r},SOt=xnt.bind(null,"");var E_e;E_e=LW;class wnt{constructor(e){this.#n=[],this.#e=[],this.#r=[],this.#l=[],this.#c=[],this.#u=[],this.#h=[],this.#d=[],this.#o=[],this.#a=!1,this.P=new tA,this.connectedCalled=!1,this.loadedCalled=!1,this[E_e]=!0,this.#s=[];const n=this,r=e??YO();n.#t=r,n.ready=n.P.promise,n.#i=Yre(n),n.component=r,n.#t.addController(n),n.#t.manager===void 0||(Gtt(n),queueMicrotask(()=>n.catchUpLifecycle()))}#n;#e;#r;#l;#c;#u;#h;#d;#o;#a;#t;catchUpLifecycle(){const{manager:e}=this.#t;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#a&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#i;get exports(){return this.#i}set exports(e){const n=this.#i;n!==e&&(this.#i=e,this.#s.forEach(Ri),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,n)),this.P.resolve(e)}setProvisionalExports(e,n=!0){this.#i=n?Yre(e):e,this.#s.forEach(Ri)}#s;watchExports(e){const n=()=>e(this.#i);return this.#s.push(n),()=>{this.#s.splice(this.#s.indexOf(n),1)}}get use(){return LS(this.#t),Htt}get useRef(){return LS(this.#t),qtt}get useRefSync(){return LS(this.#t),DW}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#n.push(e)}onDisconnected(e){this.#e.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#c.push(e)}onUpdated(e){this.#u.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#t.el.isConnected&&this.#f(e)}triggerConnected(){const e=this;e.hostConnected&&Ri(e.hostConnected,e),e.#n.forEach(Ri),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Ri(e.hostDisconnected,e),e.#e.forEach(Ri),e.#o.forEach(Ri),e.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const e=this;e.hostLoad&&await NV(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(NV)),this.P.resolve(this.#i)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Ri(this.hostLoaded,this),this.#l.forEach(Ri),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Ri(this.hostUpdate,this,e),this.#c.forEach(Kre,e)}triggerUpdated(e){this.hostUpdated&&Ri(this.hostUpdated,this,e),this.#u.forEach(Kre,e)}triggerDestroy(){this.hostDestroy&&Ri(this.hostDestroy,this),this.#h.forEach(Ri)}triggerLifecycle(){this.hostLifecycle&&this.#f(()=>this.hostLifecycle()),this.#d.forEach(this.#f,this)}#f(e){LS(this.#t);const n=Ri(e);(Array.isArray(n)?n:[n]).forEach(i=>{typeof i=="function"?this.#o.push(i):typeof i=="object"&&typeof i.remove=="function"&&this.#o.push(i.remove)})}}function Kre(t){Ri(t,void 0,this)}const bnt=wnt,Yre=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,i,s){if(!((i==="exports"||i==="_exports")&&i in r&&r[i]===n)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)}},n=new Proxy(t,e);return n},Ent=t=>t.replace(Snt,(e,n)=>`${n===0?"":"-"}${e.toLowerCase()}`),Snt=/[A-Z]+(?![a-z])|[A-Z]/gu,Tnt=1,knt=2,Ant=4,Int=8,Pnt=16,Rnt=32,Cnt=64,S_e=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const n=e;return n.manager?.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Xre={};function T_e(){}const JM=Object.defineProperty,Mnt=globalThis.HTMLElement??T_e;var el,Vf,Dw,xA,DV;const bq=class bq extends Mnt{constructor(){var i;super();Tu(this,xA);Tu(this,el);Tu(this,Vf);Tu(this,Dw);ku(this,Vf,{}),ku(this,Dw,[]),this.I=new tA,this.H=new tA,this.J=[];const n=this,r=n.constructor;n._offspring=n.J,n._postLoad=n.I,r.C?.forEach(s=>{Object.hasOwn(n,s)&&(Pr(n,Vf)[s]=n[s],delete n[s])}),r.A?oE(i=n,xA,DV).call(i,{a:r.A}):r.B.then(async s=>{var o;await r.K.p,oE(o=n,xA,DV).call(o,await(s.default?.then(a=>typeof a=="function"?{a}:a)??s))}).catch(s=>{n.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const n of this.C??[])JM(this.prototype,n,{configurable:!0,enumerable:!0,get(){return Pr(this,Vf)[n]},set(r){Pr(this,Vf)[n]=r}});for(const n of this.E??[])JM(this.prototype,n,{async value(...r){return Pr(this,el)||await this.H.promise,await Pr(this,el)[n](...r)},configurable:!0});for(const n of this.D??[])JM(this.prototype,n,{value(...r){return Pr(this,el)[n](...r)},configurable:!0})}get manager(){return Pr(this,el)?.manager}attributeChangedCallback(n,r,i){Pr(this,el)?.attributeChangedCallback(n,r,i),Pr(this,el)||Pr(this,Dw).push(n)}connectedCallback(){Pr(this,el)?Pr(this,el).connectedCallback?.():queueMicrotask(()=>this.G=S_e(this))}disconnectedCallback(){Pr(this,el)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Pr(this,el)?.requestUpdate()}};el=new WeakMap,Vf=new WeakMap,Dw=new WeakMap,xA=new WeakSet,DV=function(n){const r=this.constructor,i=r.L,s=Pr(this,Vf),o=Object.values(n).find(f=>f.L===i),a=`${i}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);Ont(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,ku(this,el,u),ku(this,Vf,u),Pr(this,Dw).forEach(f=>u.attributeChangedCallback(f,null,this.getAttribute(f))),Object.entries(s).forEach(Nnt,u);const h=this.isConnected;(h||this.G)&&(u.connectedCallback?.(),h||u.disconnectedCallback())},bq.lumina=!0;let Zre=bq;function Nnt([t,e]){this[t]=e}const Ont=t=>{const e=t.prototype,n=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(i,s){n.setAttribute.call(this.el,i,s)},e.removeAttribute=function(i){n.removeAttribute.call(this.el,i)},JM(e,"isConnected",{get(){return Reflect.get(n,"isConnected",this.el)}}))};const k_e={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},A_e=t=>(...e)=>({_$litDirective$:t,values:e});let I_e=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};const Lnt=A_e(class extends I_e{constructor(t){if(super(t),t.type!==k_e.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return zg}});const P_e="important",Dnt=" !"+P_e,$nt=A_e(class extends I_e{constructor(t){if(super(t),t.type!==k_e.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in e){const i=e[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith(Dnt);r.includes("-")||s?n.setProperty(r,s?i.slice(0,-11):i,s?P_e:""):n[r]=i}}return zg}});class jnt extends bnt{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=Ji,this.T=[],this.#r=new WeakMap,this.#e=e,this.exports=void 0,this.hasDestroy=$V in e&&typeof e.destroy=="function",cw.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const n=e.el.localName;throw e.el.remove(),new Error(`The ${n} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${$V} prop.`)}this.#n!==void 0&&clearTimeout(this.#n),JO();for(const n of e.M)"triggerConnected"in n?n.triggerConnected():Ri(n.hostConnected,n)},hostDisconnected:()=>{for(const n of e.M)"triggerDisconnected"in n?n.triggerDisconnected():Ri(n.hostDisconnected,n);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const n of e.M)"triggerUpdate"in n?n.triggerUpdate(this.Q):Ri(n.hostUpdate,n,this.Q)},hostUpdated:()=>{for(const n of e.M)"triggerUpdated"in n?n.triggerUpdated(this.Q):Ri(n.hostUpdated,n,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),LS(e)}#n;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#n=void 0,this.destroyed=!0;for(const e of this.#e.M)"triggerDestroy"in e?e.triggerDestroy():Ri(e.hostDestroy,e);this.#e.M.splice(0)}}U(){if(this.#n!==void 0&&clearTimeout(this.#n),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const e=()=>{this.#e.destroy()};this.#n=mnt(e,Fnt)}}S(e,n){const r=this.T;this.V=Ji,this.T=[],r.forEach(i=>i(e,n))}#r;W(e,n){(typeof n=="object"&&n!==null||typeof n=="function")&&this.#r.set(n,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let Fnt=1e3;const $V="autoDestroyDisabled";var By,wA,bA,Wy,td,L2,R_e,C_e;const ZT=class ZT extends cw{constructor(){super();Tu(this,L2);Tu(this,By);Tu(this,wA);Tu(this,bA);Tu(this,Wy);Tu(this,td);this.M=[],this.manager=new jnt(this);const n=this,r=n.constructor,i=r.N,s=r.K.o,o=ZT.prototype.shouldUpdate;ku(n,Wy,i?.H??new tA),n.I=i?.I??new tA,n.J=i?.J??[],n._offspring=n.J,n._postLoad=n.I,n.el=i??n,ku(n,bA,n.enableUpdating),n.enableUpdating=T_e,n.shouldUpdate!==o&&(ku(n,wA,n.shouldUpdate),n.shouldUpdate=o),s&&(ku(n,By,new Map),r.elementProperties.forEach((a,l)=>Pr(n,By).set(l,s())))}static finalizeStyles(n){const r=super.finalizeStyles(n),i=this.shadowRootOptions===Xre;return this.K?.commonStyles===void 0||i?r:[this.K.commonStyles,...r]}static createProperty(n,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=s?.hasChanged??FW,a={attribute:i&Tnt&&typeof n=="string"?Ent(n):!1,reflect:!!(i&knt),type:i&Ant?Boolean:i&Int?Number:void 0,state:!!(i&Pnt),readOnly:!!(i&Rnt),noAccessor:!!(i&Cnt),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(n,a)}static getPropertyDescriptor(n,r,i){const s=this.K,o=super.getPropertyDescriptor(n,r,i);return i.d=o,{...o,get(){return s.t?.(Pr(this,By).get(n)),o.get?.call(this)},set(a){const l=this.manager;if(i.readOnly&&!OV&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${n}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),i.c&&Pr(this,By)?.get(n)?.notify(),l.T.length>0&&(JO(),l?.S(n,a))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const n=this.constructor.K.c?.(()=>this.requestUpdate());ku(this,td,n);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>oE(this,L2,C_e).call(this).catch(i=>{Pr(this,Wy).reject(i),setTimeout(()=>{throw i})})):n&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Pr(this,td)?.destroy(),ku(this,td,void 0)}createRenderRoot(){const n=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,o=n??(i===Xre?this.el:this.el.attachShadow(i));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(n){var r;return this.manager.Q=n,((r=Pr(this,wA))==null?void 0:r.call(this,n))??!0}update(n){Pr(this,td)?oE(this,L2,R_e).call(this,n):super.update(n)}listen(n,r,i){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(n,s,i),()=>this.el.removeEventListener(n,s,i)))}listenOn(n,r,i,s){const o=i?.bind(this)??i;this.manager.onLifecycle(()=>(n.addEventListener(r,o,s),()=>n.removeEventListener(r,o,s)))}async componentOnReady(){return await Pr(this,Wy).promise,this}addController(n){this.M.push(n),!(LW in n)&&this.renderRoot&&this.el.isConnected&&n.hostConnected?.()}removeController(n){this.M.splice(this.M.indexOf(n),1),n.controllerRemoved?.()}};By=new WeakMap,wA=new WeakMap,bA=new WeakMap,Wy=new WeakMap,td=new WeakMap,L2=new WeakSet,R_e=function(n){try{Pr(this,td).clear(),this.constructor.K.r(Pr(this,td),()=>MY(ZT.prototype,this,"update").call(this,n))}catch(r){throw Pr(this,td).clear(),r}},C_e=async function(){const n=this.el.G??S_e(this.el);n&&await n;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(NV(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has($V)&&this.manager.U()),Pr(this,bA).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const i=this.J.filter(s=>!s.manager?.loadedCalled);i.length&&await Promise.allSettled(i.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():Ri(s.hostLoaded,s);this.loaded?.(),Pr(this,Wy).resolve()},ZT.lumina=!0;let Jre=ZT;const Vnt=t=>{let e;const n=i=>{e=new URL(i,globalThis.location?.href||void 0).href},r={...t,getAssetPath(i){const s=new URL(i,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:n,customElement(i,s){s.K=r,s.L=i,customElements.get(i)||customElements.define(i,s)}};return n(t.defaultAssetPath),r},kOt=t=>typeof t=="object"&&t!=null?Lnt(t):t,AOt=t=>typeof t=="object"&&t!=null?$nt(t):t,IOt=Ji;function POt(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}const ROt={toAttribute:t=>t===!0?"":t===!1?null:t},znt="calcite-mode-auto",Unt="calcite-mode-dark",COt={rtl:"calcite--rtl"},MOt={filter:250,nextTick:0,resize:150,reposition:100},NOt=25;function Qre(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>t.contains(Unt)||t.contains(znt)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&r(o),s=o};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const PT=globalThis.calciteConfig,OOt=PT?.focusTrapStack||[],LOt=PT?.logLevel||"info",eie="3.3.3",Gnt="2025-10-08",Bnt="7391af08e";function Wnt(){if(PT&&PT.version)return;console.info(`Using Calcite Components ${eie} [Date: ${Gnt}, Revision: ${Bnt}]`);const t=PT||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:eie,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?Qre():document.addEventListener("DOMContentLoaded",Qre,{once:!0});queueMicrotask(Wnt);const Hnt=Vnt({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:DOt,getAssetPath:$Ot,setAssetPath:qnt}=Hnt;let M_e=!1;const Knt=t=>{M_e=!0,qnt(t)};let N_e;function Ynt(){M_e||Knt(Hc(Bi(N_e)))}function GW(t){const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push(t[n]?.());return e.length>0?Promise.all(e):null}N_e="components/assets";const O_e=Symbol("widget"),L_e=Symbol("widget-test-data"),Xnt=[],Znt={},dN=new WeakMap;function D_e(t,e){let n=e.children;if(n?.length)for(let i=0;i<n.length;++i)n[i]=D_e(t,n[i]);else n=Xnt;const r=e.vnodeSelector;if(fN(r)){const i=e.properties||Znt,s=i.key||r,o={key:s,afterCreate:Jnt,afterUpdate:Qnt,afterRemoved:$_e,parentWidget:t,widgetConstructor:r,widgetProperties:{...i,key:s,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function Jnt(t,e,n,{parentWidget:r,widgetConstructor:i,widgetProperties:s}){const o=new i(s);o.container=t,dN.set(t,o),o.afterCreate?.(o,t),r.addHandles(Kn(()=>$_e(t))),queueMicrotask(()=>{o[L_e].projector?.renderNow()})}function Qnt(t,e,n,{widgetProperties:r}){const i=dN.get(t);i&&(i.set(r),i.afterUpdate?.(i,t))}function $_e(t){const e=dN.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),dN.delete(t))}function fN(t){return typeof t=="function"&&t[O_e]}const tie=new Set;function ert(t){tie.add(t),t.finally(()=>tie.delete(t))}function trt(t){return Kn()}var nie;let nrt=0;function j_e(t,e){const n=Object.prototype.hasOwnProperty;for(const r in e)n.call(e,r)&&n.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?j_e(t[r],e[r]):t[r]=e[r]);return t}const rrt=ztt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,n=/capture$/i;t.eventHandlerInterceptor=(r,i,s,o)=>{const a=e?.(r,i,s,o),l=n.test(r);if(!((r=r.replace(n,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),u=g=>a?.call(s,g);s.addEventListener(c,u,l);const h=()=>s.removeEventListener(c,u,l),f=o.afterRemoved;o.afterRemoved=g=>{f?.(g),h()}}return a}},handleInterceptedEvent(t,e,n,r){const{eventPhase:i,type:s}=r,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(m_e(),t.scheduleRender(),l[a].call(l.bind||n,r))}});let vj=!1;var d1;let Js=(d1=class extends cpe(aI){constructor(e,n){super(e,n),this._attached=!1,this._projector=rrt,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=P6e(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:u})=>{if(this.destroyed)return;let h=await Bpe(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(h=j_e(Ze(h),this.uiStrings)),this[u]=h)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&Tt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(trt()),Ynt();const r="esri-widget-uid-"+gI(),i=this.render.bind(this);this._trackingTarget=new fO(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=i()??s(),c=l.properties??={};if(c.key??=r,fN(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),c.styles.display??="";let u=0;return l.children?.forEach(h=>{fN(h.vnodeSelector)||(h.properties??={},h.properties.key??=`${this.id}--${u++}`)}),D_e(this,l)};this.render=()=>{if(vj)return o();let l=Att(this)??null;if(l)return l;this._trackingTarget.clear(),vj=!0;try{l=fp(this._trackingTarget,o)}catch(c){throw Tt.getLogger(this).error(c),c}finally{vj=!1}return l&&Itt(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),ert(this._resourcesFetch)}normalizeCtorArgs(e,n){const r={...e};return n&&(r.container=n),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(EQ):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Ni(this._trackingTarget),Ni(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,pj(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return iW(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+nrt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(nie=O_e,L_e)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(pj(this),this._projector.scheduleRender())}classes(...e){return Ptt.apply(this,e)}renderNow(){pj(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(dn(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&cO(n)&&this.addHandles(this._delegatedEventNames.map(i=>J2(n,i,s=>{this.emit(i,s)})),"delegated-events")},ta)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(EQ),this.scheduleRender()};this.addHandles([zpe(e),dn(()=>this.uiStrings,e)]),this.addHandles(pc(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},d1[nie]=!0,d1.vnodeSelector="div",d1);_([E()],Js.prototype,"_readyForTrueRender",void 0),_([E({value:null})],Js.prototype,"container",null),_([Gs("container")],Js.prototype,"castContainer",null),_([E()],Js.prototype,"icon",null),_([E()],Js.prototype,"id",null),_([E()],Js.prototype,"label",null),_([E()],Js.prototype,"renderable",null),_([E()],Js.prototype,"uiStrings",void 0),_([E()],Js.prototype,"viewModel",void 0),_([E({value:!0})],Js.prototype,"visible",null),_([E()],Js.prototype,"key",void 0),_([E()],Js.prototype,"children",void 0),_([E()],Js.prototype,"afterCreate",void 0),_([E()],Js.prototype,"afterUpdate",void 0),_([E()],Js.prototype,"afterRemoved",void 0),Js=_([ue("esri.widgets.Widget")],Js);const QO=Js,irt=new Map;function srt(t){return irt.get(t)}function rie(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function ort(t,e){return t.length!==e.length||t.some((n,r)=>n.text!==e[r].text)}function iC(t,e,n){!n||!e||t.find(r=>r.layerView===e&&r.text===n)||t.push({text:n,layerView:e})}function art(t){return t.type==="bing-maps"}const Vh=[];let ax=class extends Kt{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ot,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=this.view?.allLayerViews;n&&(this.addHandles(n.map(r=>dn(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(r=>{r.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e?.removed&&e.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([V1(()=>this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),pc(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;Vh.length=0;let n=!1,r=null;if(!t||!e)return void this._clear();e.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const o=s.layer;if(rie(o,"user"))return void iC(Vh,s,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(n=!0,r=s),o.hasAttributionData){if(this._fetchedAttributionData.has(s)){const l=this._fetchedAttributionData.get(s);return void(l?iC(Vh,s,this._getDynamicAttribution(l,t,o)):rie(o)&&iC(Vh,s,o.copyright))}return void this._fetchAttributionData(s)}const a="portalItem"in o?o.portalItem?.accessInformation:void 0;iC(Vh,s,a||o.copyright)});const i=e.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const s=srt(this.view);if(s){const o=s.getAttributionText();for(let a=o.length-1;a>-1;--a)Vh.unshift({text:o[a],layerView:i})}}n&&r&&Vh.unshift({text:"Google Maps",layerView:r}),ort(this.items,Vh)&&(this.items.removeAll(),this.items.addMany(Vh)),Vh.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await upe(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const n=e.ok?this._createContributionIndex(e.value,art(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()}_createContributionIndex(t,e){const n=t.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(e&&a.zoomMin?1:0),u=a.zoomMax-(e&&a.zoomMax?1:0),h=new $n({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Bt.WGS84}),f={extent:Qy(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=c;g<=u;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,n){const{extent:r,scale:i}=e;let s=n.tileInfo?.scaleToZoom(i)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!r||s==null||s<=-1)return"";const o=t[s],a=wO(r.center.clone().normalize(),Bt.WebMercator),l=new Set;return o?o.filter(c=>{const u=c.id,h=!l.has(u)&&a&&c.extent&&uI(c.extent,a);return h&&l.add(u),h}).sort((c,u)=>u.score-c.score||c.objectId-u.objectId).map(c=>c.attribution).join(", "):""}};_([E({readOnly:!0,type:Ot})],ax.prototype,"items",void 0),_([E({readOnly:!0})],ax.prototype,"state",null),_([E()],ax.prototype,"view",void 0),ax=_([ue("esri.widgets.Attribution.AttributionViewModel")],ax);const F_e=ax,Sd={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function lrt(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:urt(t[e])}}}function crt(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function urt(t){return function(e,...n){crt(e)?Ctt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...n)}}function eL(t){return(e,n)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:n})}}var hrt=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},V_e=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?V_e(i,e):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=hrt(i)),e.push(i))}},drt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(n.length===1&&typeof n[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:n[0],domNode:null};var i=[];return V_e(n,i),{vnodeSelector:t,properties:e||void 0,children:i,text:void 0,domNode:null}};function yl(t,e,...n){return typeof t!="function"||fN(t)?drt(t,e??null,...n):t(e,...n)}function jOt(...t){return t}const S_="esri-attribution",T_={base:S_,poweredBy:`${S_}__powered-by`,sources:`${S_}__sources`,open:`${S_}--open`,sourcesOpen:`${S_}__sources--open`,link:`${S_}__link`};let Ea=class extends QO{constructor(e,n){super(e,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:i})=>{this._scheduleOverflowCheck(i)})}),this._mutationObserver=new MutationObserver(r=>{let i=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){i=!0;break}i&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new F_e}initialize(){this.addHandles(V1(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,n)=>(e.includes(n.text)||e.push(n.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[T_.open]:this._isOpen};return yl("div",{bind:this,class:this.classes(T_.base,Sd.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return yl("div",{class:T_.poweredBy},"Powered by"," ",yl("a",{class:T_.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,n=this._isInteractive,r=n?0:void 0,{attributionText:i}=this,s={[T_.sourcesOpen]:e,[Sd.interactive]:n};return yl("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(T_.sources,s),innerHTML:i,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let n=!1;const{clientHeight:r,clientWidth:i,scrollWidth:s}=e,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(n=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};_([E()],Ea.prototype,"_isOpen",void 0),_([E()],Ea.prototype,"_isInteractive",null),_([E()],Ea.prototype,"_attributionTextOverflowed",void 0),_([E()],Ea.prototype,"_prevSourceNodeHeight",void 0),_([E({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ea.prototype,"attributionText",null),_([E()],Ea.prototype,"icon",null),_([E()],Ea.prototype,"itemDelimiter",void 0),_([E()],Ea.prototype,"label",null),_([E(),eL("esri/widgets/Attribution/t9n/Attribution")],Ea.prototype,"messages",void 0),_([E()],Ea.prototype,"view",null),_([E({type:F_e})],Ea.prototype,"viewModel",void 0),_([lrt()],Ea.prototype,"_toggleState",null),Ea=_([ue("esri.widgets.Attribution")],Ea);const frt=Ea;function prt(){const t=ye("mapview-essential-goto-duration");return t==null?t:t}function mrt(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function grt(t,e,n){return t.goTo(e,n)}const yrt=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return ife(i),this.goToOverride?this.goToOverride(i,r):grt(i,r.target,r.options)}};return _([E()],n.prototype,"goToOverride",void 0),_([E()],n.prototype,"view",void 0),n=_([ue("esri.widgets.support.GoTo")],n),n};let uy=class extends yrt(Kt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(ma)}destroy(){this.view=null}get canShowNorth(){return mrt(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:prt()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const n=-e.heading;this._set("orientation",{x:0,y:0,z:n})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?dn(()=>e?.rotation,this._updateForRotation,ma):dn(()=>e?.camera,this._updateForCamera,ma))}_watchForView(e){this.addHandles(dn(()=>this.view,this._updateRotationWatcher,e))}};_([E({readOnly:!0})],uy.prototype,"canShowNorth",null),_([E({readOnly:!0})],uy.prototype,"orientation",void 0),_([E({readOnly:!0})],uy.prototype,"state",null),_([E()],uy.prototype,"view",void 0),uy=_([ue("esri.widgets.Compass.CompassViewModel")],uy);const z_e=uy,iie="esri-compass",sie={base:iie,iconContainer:`${iie}__icon-container`};let Sf=class extends QO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new z_e,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return GW({button:()=>_e(()=>import("./index-B0iqDV3A.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414])),icon:()=>_e(()=>import("./index-no9_ZMbu.js").then(e=>e.i),__vite__mapDeps([406,407,408]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:n}=this.viewModel,{messages:r}=this;return yl("div",{class:this.classes(sie.base,Sd.widget)},yl("calcite-button",{class:Sd.widgetButton,disabled:n==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},yl("div",{"aria-hidden":"true",class:sie.iconContainer,title:r.reset},yl("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};_([E()],Sf.prototype,"goToOverride",null),_([E()],Sf.prototype,"icon",null),_([E()],Sf.prototype,"label",null),_([E(),eL("esri/widgets/Compass/t9n/Compass")],Sf.prototype,"messages",void 0),_([E()],Sf.prototype,"view",null),_([E({type:z_e})],Sf.prototype,"viewModel",void 0),Sf=_([ue("esri.widgets.Compass")],Sf);const vrt=Sf,oie="esri-navigation-toggle",aie={base:oie,isLayoutHorizontal:`${oie}--horizontal`};let lx=class extends Kt{constructor(t){super(t),this._navigationMode="pan",this.view=null,t?.isDefaultViewModel||o$e(Tt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:e,...n}=t;return n}initialize(){this.addHandles(pc(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const e=this._navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}};_([E({readOnly:!0})],lx.prototype,"state",null),_([E()],lx.prototype,"_navigationMode",void 0),_([E()],lx.prototype,"view",void 0),lx=_([ue("esri.widgets.NavigationToggle.NavigationToggleViewModel")],lx);const U_e=lx;let Tf=class extends QO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new U_e({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;Mtt(r),this.toggle()},e?.isDefaultUI||s$e(Tt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:n,...r}=e;return r}loadDependencies(){return GW({button:()=>_e(()=>import("./index-B0iqDV3A.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",n=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return yl("div",{class:this.classes(aie.base,Sd.widget,{[aie.isLayoutHorizontal]:this.layout==="horizontal"})},yl("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:n?"outline-fill":"solid",class:Sd.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?void 0:-1,title:r}),yl("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:n?"solid":"outline-fill",class:Sd.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?-1:void 0,title:r}))}};_([E()],Tf.prototype,"icon",null),_([E()],Tf.prototype,"label",null),_([E({value:"vertical"})],Tf.prototype,"layout",null),_([E(),eL("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Tf.prototype,"messages",void 0),_([E()],Tf.prototype,"view",null),_([E({type:U_e})],Tf.prototype,"viewModel",void 0),Tf=_([ue("esri.widgets.NavigationToggle")],Tf);const _rt=Tf;let hy=class extends Kt{get canZoomIn(){if(!this.view?.ready)return!1;const n=this.view?.constraints?.effectiveMaxScale;return n===0||this._scale>n}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};_([E({readOnly:!0})],hy.prototype,"canZoomIn",null),_([E({readOnly:!0})],hy.prototype,"canZoomOut",null),_([E()],hy.prototype,"view",void 0),_([E()],hy.prototype,"_scale",null),hy=_([ue("esri.widgets.Zoom.ZoomConditions2D")],hy);const xrt=hy;let cx=class extends Kt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};_([E({readOnly:!0})],cx.prototype,"canZoomIn",null),_([E({readOnly:!0})],cx.prototype,"canZoomOut",null),_([E()],cx.prototype,"view",void 0),cx=_([ue("esri.widgets.Zoom.ZoomConditions3D")],cx);const wrt=cx;let Im=class extends Kt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new xrt({view:e}):e.type==="3d"&&(this._zoomConditions=new wrt({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():m4(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():m4(e.goTo({zoomFactor:.5})))}};_([E()],Im.prototype,"_zoomConditions",void 0),_([E()],Im.prototype,"canZoomIn",null),_([E()],Im.prototype,"canZoomOut",null),_([E({readOnly:!0})],Im.prototype,"state",null),_([E()],Im.prototype,"view",null),Im=_([ue("esri.widgets.Zoom.ZoomViewModel")],Im);const G_e=Im,lie={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let kf=class extends QO{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new G_e,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return GW({button:()=>_e(()=>import("./index-B0iqDV3A.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[lie.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=this.viewModel,{zoomIn:i,zoomOut:s}=this.messages;return yl("div",{class:this.classes(lie.base,Sd.widget,e)},yl("calcite-button",{class:Sd.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),yl("calcite-button",{class:Sd.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};_([E()],kf.prototype,"icon",null),_([E()],kf.prototype,"label",null),_([E({value:"vertical"})],kf.prototype,"layout",null),_([E(),eL("esri/widgets/Zoom/t9n/Zoom")],kf.prototype,"messages",void 0),_([E()],kf.prototype,"view",null),_([E({type:G_e})],kf.prototype,"viewModel",void 0),kf=_([ue("esri.widgets.Zoom")],kf);const brt=kf;function Ert(t){return t?.view!==void 0}let QM=class extends Ltt{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(n=>{const r=this._find(n),i=r?.widget;Ert(i)&&(i.view=e)})},this._componentsWatcher=(e,n)=>{this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([dn(()=>this.components,this._componentsWatcher,ma),dn(()=>this.view,this._updateViewAwareWidgets,ma)])}_add(t,e,n,r,i){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,n,r,i)}_removeComponents(t){t.forEach(e=>{const n=this._find(e);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){const e=this._createWidget(t);return new XM({id:t,node:e})}_createWidget(t){const e=this.view;switch(t){case"attribution":return new frt({view:e});case"compass":return new vrt({view:e});case"navigation-toggle":return new _rt({view:e,isDefaultUI:!0});case"zoom":return new brt({view:e})}}};_([E()],QM.prototype,"components",void 0),QM=_([ue("esri.views.ui.DefaultUI")],QM);const B_e=QM;let e3=class extends B_e{constructor(e){super(e),this.components=["attribution","zoom"]}};_([E()],e3.prototype,"components",void 0),e3=_([ue("esri.views.ui.2d.DefaultUI2D")],e3);const W_e=e3;let Srt=class{constructor(t={},e={},n=8,r=1/0){this.disabledExtensions=t,this.debugWebGLExtensions=e,this.maxAnisotropy=n,this.maxPreferredTexturePixels=r}},Trt=class jV{constructor(e,n,r=""){this.major=e,this.minor=n,this._context=r}lessThan(e,n){return this.major<e||e===this.major&&this.minor<n}greaterEqual(e,n){return!this.lessThan(e,n)}validate(e){if(this.major!==e.major){const n=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Xe(n+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new jV(this.major,this.minor,this._context)}static parse(e,n=""){const[r,i]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new Xe((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!i?.match||!s.test(i))throw new Xe((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(i,10);return new jV(o,a,n)}};class krt extends Trt{constructor(e,n){super(e,n,"webmap")}}function _j(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new krt(2,35);var FV;let t3=FV=class extends qt{constructor(t){super(t),this.color=new Yn([0,0,0,1])}clone(){return new FV(Ze({color:this.color}))}};_([E({type:Yn,json:{write:!0}})],t3.prototype,"color",void 0),t3=FV=_([ue("esri.webmap.background.ColorBackground")],t3);const Art=t3;let H_e,q_e,K_e,Y_e,X_e,Z_e,J_e;async function Irt(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([_e(()=>import("./webglDeps-B6rDlXN-.js"),__vite__mapDeps([297,222,298,299,300,26,94])),_e(()=>import("./mapViewDeps-DW2jekiW.js"),__vite__mapDeps([301,173,53,54,138,139,129,64,26,140,131,132,137,141,125,142,87,302,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,307,143,144,308,83,78,127,76,77,309,51,297,310,156,311,312,191,313,211,212,314,111,123,128,130,122,71,70,315,145,316,136,45,46,47,317,147,152,120,318,319,320,321,218,252,322,323]))]);q_e=t,K_e=e,Y_e=n,X_e=r,Z_e=i,J_e=s,H_e=o}var $w;let Fn=($w=class extends hQe(UZe(mWe(VHe(SHe(dXe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Xu({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new GO({actionMap:new bW({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new b2,this.analysisViewManager=new ctt({importAnalysisViewModule:n=>eet(n),view:this}),this.floors=new Ot,this.grid=null,this.map=null,this.timeline=new h_e,this.type="2d",this.view2dType=null,this.ui=new W_e,this.animationsEnabled=!0,this.test={takeScreenshot:async n=>itt(this._getScreenshotView(n),n)},this.padding={top:0,right:0,bottom:0,left:0},dWe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Ni(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new het(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,n=this.spatialReference;return{lods:e?.spatialReference?.equals(n)?e.lods:null,spatialReference:n}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:n,center:r,viewpoint:i,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(n?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const n=e.targetGeometry,r=this.spatialReference;return v0e(n.spatialReference,r)}get background(){return _j(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return Uet(this)}set highlightOptions(e){Get(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&Tt.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),n=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(ye("esri-2d-log-updating")){const r=this.allLayerViews.reduce((i,s)=>({...i,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${n}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return n}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new xi({rings:[e.map(n=>[n[0],n[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,n){return Bet(this,e,n)}async takeScreenshot(e){return rtt(this._getScreenshotView(e),e)}toScreen(e,n){return this.stateManager.toScreen(e,n)}async whenAnalysisView(e){if(e.parent==null)throw new Xe("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return _j(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return _j(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return vre.hasLayerViewModule(e)}importLayerView(e){return vre.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Tt.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const n=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(c=>c.clips.every(u=>e_e(this,u,e,n))).reverse(),s=new globalThis.Map(i.map(c=>[c.layer.uid,c])),o=[];let a=0,l=0;for(;a<r.results.length||l<i.length;){const c=r.results.at(a);if(c&&c.type!=="graphic"){++a;continue}const u=s.get((c?.layer??c?.graphic.layer)?.uid);if((!c||u)&&l<i.length&&i.at(l)!==u){const h=i.at(l);"fetchPopupFeaturesAtLocation"in h&&o.push({mapPoint:n,layerView:h}),++l}else c&&(o.push({graphic:c.graphic,layerView:u}),++a)}return{hits:o,location:n}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=gtt(this.type);if(ye("safari")&&ye("safari")<9&&(e=new Xe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ye("safari")})),e!=null)throw Tt.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Irt()}_getDefaultViewpoint(){const{constraints:e,initialExtent:n,map:r,padding:i,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,c=l?.targetGeometry?.extent??n,u=c?.center,h=l?.rotation??0,f=l?.scale||c&&WO(c,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),g=a.center??u,v=a.rotation??h,x=a.scale??f;return g&&x?new su({targetGeometry:g,scale:x,rotation:v}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const n=new tet(this.surface),r=new H_e(this.surface,{canvas:this.renderCanvas,contextOptions:new Srt(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},n);this.stage=r,this._magnifierView=new Z_e,this._magnifierView.magnifier=this.magnifier,this._gridView=new J_e;const i=new Y_e({view:this});this._set("labelManager",i);const s=new GQe({view:this});this._set("animationManager",s);const o=new X_e({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),dn(()=>this.stationary,l=>r.stationary=l,ta),dn(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},ta),dn(()=>this.magnifier,l=>this._magnifierView.magnifier=l,ta),dn(()=>this.grid,l=>this._gridView.grid=l,ta),dn(()=>this.renderingOptions,l=>r.renderingOptions=l,ta),dn(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=Vet(r.highlightGradient,this.highlights.items)},ta),dn(()=>this.state.id,()=>r.state=this.state,ta),dn(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},ta)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(n=>{this.stage.addChild(n.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new YQe(ba.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const n=new q_e({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new K_e(e)});this._set("graphicsView",n)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:n,padding:r,size:i,stage:s}=this;return{allLayerViews:n,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const n of this.allLayerViews)n.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const n of this.allLayerViews)n.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},$w.type="2d",$w);_([E({constructOnly:!0})],Fn.prototype,"deactivatedWebGLExtensions",void 0),_([E({constructOnly:!0})],Fn.prototype,"debugWebGLExtensions",void 0),_([E({readOnly:!0})],Fn.prototype,"featuresTilingScheme",void 0),_([E({readOnly:!0})],Fn.prototype,"graphicsTileStore",null),_([E()],Fn.prototype,"graphicsView",void 0),_([E()],Fn.prototype,"constraintsInfo",null),_([E()],Fn.prototype,"initialExtentRequired",null),_([E()],Fn.prototype,"labelManager",void 0),_([E({type:GO,nonNullable:!0})],Fn.prototype,"navigation",void 0),_([E({constructOnly:!0})],Fn.prototype,"renderCanvas",void 0),_([E()],Fn.prototype,"renderingOptions",void 0),_([E({constructOnly:!0})],Fn.prototype,"supersampleScreenshotsEnabled",void 0),_([E()],Fn.prototype,"defaultsFromMapSettings",null),_([E({readOnly:!0})],Fn.prototype,"typeSpecificPreconditionsReady",null),_([E(V9(b2,"analyses"))],Fn.prototype,"analyses",void 0),_([E()],Fn.prototype,"analysisViewManager",void 0),_([E({type:Art})],Fn.prototype,"background",null),_([E()],Fn.prototype,"center",null),_([E({type:Ot})],Fn.prototype,"floors",void 0),_([E()],Fn.prototype,"grid",void 0),_([E({type:wg})],Fn.prototype,"highlightOptions",null),_([E()],Fn.prototype,"map",void 0),_([E()],Fn.prototype,"padding",null),_([E({readOnly:!0})],Fn.prototype,"rendering",null),_([E({readOnly:!0})],Fn.prototype,"resolution",null),_([E()],Fn.prototype,"scale",null),_([E({type:Boolean,value:!1})],Fn.prototype,"spatialReferenceLocked",null),_([E({readOnly:!0})],Fn.prototype,"tileInfo",null),_([E({type:h_e,readOnly:!0})],Fn.prototype,"timeline",void 0),_([E({readOnly:!0})],Fn.prototype,"type",void 0),_([E({readOnly:!0})],Fn.prototype,"updating",null),_([E({readOnly:!0})],Fn.prototype,"view2dType",void 0),_([E({readOnly:!0})],Fn.prototype,"visibleArea",null),_([E()],Fn.prototype,"zoom",null),_([E({readOnly:!0})],Fn.prototype,"navigating",null),_([E(),Gs(t=>t instanceof B_e?t:pO(W_e,t))],Fn.prototype,"ui",void 0),_([E()],Fn.prototype,"animationsEnabled",void 0),Fn=_([ue("esri.views.View2D")],Fn);const Prt=Fn;let n3=class extends Prt{constructor(t){super(t),this.view2dType="map"}};_([E({readOnly:!0})],n3.prototype,"view2dType",void 0),n3=_([ue("esri.views.MapView")],n3);const Rrt=n3,cie=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Crt(){const t=X.useRef(null),e=X.useRef(null),n=X.useRef(!1),r=X.useRef(!1),[i,s]=X.useState(!1);wDe({target:"map"});const o=ji(T=>T.map),a=ji(T=>T.setArcGISMap),l=Vs(T=>T.registerLayer),c=Vs(T=>T.setLayerVisibility),u=Pn(T=>T.defaultBackground);X.useEffect(()=>{if(!o){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const T=new Cm({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new cRe}),A=new Cm({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new gy({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),I=new Cm({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new gy({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),P=new Cm({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new gy({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),M=new Cm({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new gy({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),F=new Cm({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new gy({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});o.addLayer(T),o.addLayer(A),o.addLayer(I),o.addLayer(P),o.addLayer(M),o.addLayer(F),console.log(" Base layers added:",{osm:T.getVisible(),cartodb:A.getVisible(),satellite:I.getVisible()}),l("OpenStreetMap",T),l("CartoDB (licht)",A),l("Luchtfoto",I),l("Labels Overlay",P),l("TMK 1850",M),l("Bonnebladen 1900",F),o.updateSize(),console.log(" Map size:",o.getSize()),console.log(" Map center:",o.getView().getCenter()),console.log(" Map zoom:",o.getView().getZoom()),h()},[o,l]);async function h(){if(!o){console.error(" Cannot load layers: map is null");return}const T=vCe();console.log(` Loading ${T.length} immediate-load layers (WMS/Tile)...`);const A=await Promise.allSettled(T.map(async P=>{try{const M=await P.factory();return M?{name:P.name,layer:M}:null}catch(M){return console.warn(` Failed to create ${P.name}:`,M),null}}));let I=0;A.forEach(P=>{if(P.status==="fulfilled"&&P.value){const{name:M,layer:F}=P.value;o.addLayer(F),l(M,F),I++,console.log(`   ${M}`)}}),console.log(` Immediate layers loaded: ${I}/${T.length}`),console.log(` Total layers on map: ${o.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}X.useEffect(()=>{if(!o||!e.current||r.current)return;console.log(" Initializing ArcGIS MapView for AHN layers...");const T=o.getView(),A=T.getCenter(),I=T.getZoom()||8,P=A?Qn(A):[5.5,52],M=new j0e({}),F=new Rrt({container:e.current,map:M,center:P,zoom:I,constraints:{rotationEnabled:!1},ui:{components:[]},background:{color:[0,0,0,0]}});return F.when(()=>{console.log(" ArcGIS MapView ready"),console.log(" ArcGIS center:",F.center?.longitude,F.center?.latitude),console.log(" ArcGIS zoom:",F.zoom),a(M,F),s(!0),r.current=!0,T.on("change:center",()=>{const C=T.getCenter();if(C){const N=Qn(C);F.goTo({center:N},{animate:!1})}}),T.on("change:resolution",()=>{const C=T.getZoom();C!==void 0&&F.goTo({zoom:C},{animate:!1})})}).catch(C=>{console.error(" ArcGIS MapView initialization failed:",C),console.error("Error details:",C.message)}),()=>{F&&F.destroy()}},[o,a]),X.useEffect(()=>{if(!o||n.current)return;const T=setTimeout(()=>{const A=u||"CartoDB (licht)";cie.forEach(I=>{c(I,!1)}),cie.includes(A)?c(A,!0):c("CartoDB (licht)",!0),n.current=!0,console.log(` Default background: ${A}`)},100);return()=>clearTimeout(T)},[o,u,c]);const f=Pn(T=>T.gpsAutoStart),g=Es(T=>T.startTracking),v=X.useRef(!1);X.useEffect(()=>{if(!(!o||v.current)&&f){const T=setTimeout(()=>{g(),v.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(T)}},[o,f,g]);const x={width:"100%",height:"100vh"},b={opacity:i?1:0,transition:"opacity 0.3s ease"};return m.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[m.jsx("div",{id:"map",ref:t,style:x}),m.jsx("div",{id:"arcgis-map",ref:e,style:b})]})}const BW=X.createContext({});function WW(t){const e=X.useRef(null);return e.current===null&&(e.current=t()),e.current}const tL=X.createContext(null),HW=X.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Mrt extends X.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Nrt({children:t,isPresent:e}){const n=X.useId(),r=X.useRef(null),i=X.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=X.useContext(HW);return X.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),m.jsx(Mrt,{isPresent:e,childRef:r,sizeRef:i,children:X.cloneElement(t,{ref:r})})}const Ort=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=WW(Lrt),l=X.useId(),c=X.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=X.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return X.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),X.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=m.jsx(Nrt,{isPresent:n,children:t})),m.jsx(tL.Provider,{value:u,children:t})};function Lrt(){return new Map}function Q_e(t=!0){const e=X.useContext(tL);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=X.useId();X.useEffect(()=>{t&&i(s)},[t]);const o=X.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const sC=t=>t.key||"";function uie(t){const e=[];return X.Children.forEach(t,n=>{X.isValidElement(n)&&e.push(n)}),e}const qW=typeof window<"u",exe=qW?X.useLayoutEffect:X.useEffect,Jn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=Q_e(o),c=X.useMemo(()=>uie(t),[t]),u=o&&!a?[]:c.map(sC),h=X.useRef(!0),f=X.useRef(c),g=WW(()=>new Map),[v,x]=X.useState(c),[b,T]=X.useState(c);exe(()=>{h.current=!1,f.current=c;for(let P=0;P<b.length;P++){const M=sC(b[P]);u.includes(M)?g.delete(M):g.get(M)!==!0&&g.set(M,!1)}},[b,u.length,u.join("-")]);const A=[];if(c!==v){let P=[...c];for(let M=0;M<b.length;M++){const F=b[M],C=sC(F);u.includes(C)||(P.splice(M,0,F),A.push(F))}s==="wait"&&A.length&&(P=A),T(uie(P)),x(c);return}const{forceRender:I}=X.useContext(BW);return m.jsx(m.Fragment,{children:b.map(P=>{const M=sC(P),F=o&&!a?!1:c===b||u.includes(M),C=()=>{if(g.has(M))g.set(M,!0);else return;let N=!0;g.forEach(O=>{O||(N=!1)}),N&&(I?.(),T(f.current),o&&l?.(),r&&r())};return m.jsx(Ort,{isPresent:F,initial:!h.current||n?void 0:!1,custom:F?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:F?void 0:C,children:P},M)})})},cc=t=>t;let txe=cc;function KW(t){let e;return()=>(e===void 0&&(e=t()),e)}const A2=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},np=t=>t*1e3,rp=t=>t/1e3,Drt={useManualTiming:!1};function $rt(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const g=h&&r?e:n;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const oC=["read","resolveKeyframes","update","preRender","render","postRender"],jrt=40;function nxe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=oC.reduce((T,A)=>(T[A]=$rt(s),T),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,g=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,jrt),1),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},v=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:oC.reduce((T,A)=>{const I=o[A];return T[A]=(P,M=!1,F=!1)=>(n||v(),I.schedule(P,M,F)),T},{}),cancel:T=>{for(let A=0;A<oC.length;A++)o[oC[A]].cancel(T)},state:i,steps:o}}const{schedule:mi,cancel:Ug,state:ko,steps:xj}=nxe(typeof requestAnimationFrame<"u"?requestAnimationFrame:cc,!0),rxe=X.createContext({strict:!1}),hie={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},I2={};for(const t in hie)I2[t]={isEnabled:e=>hie[t].some(n=>!!e[n])};function Frt(t){for(const e in t)I2[e]={...I2[e],...t[e]}}const Vrt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vrt.has(t)}let ixe=t=>!pN(t);function zrt(t){t&&(ixe=e=>e.startsWith("on")?!pN(e):t(e))}try{zrt(require("@emotion/is-prop-valid").default)}catch{}function Urt(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ixe(i)||n===!0&&pN(i)||!e&&!pN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Grt(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const nL=X.createContext({});function nA(t){return typeof t=="string"||Array.isArray(t)}function rL(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const YW=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XW=["initial",...YW];function iL(t){return rL(t.animate)||XW.some(e=>nA(t[e]))}function sxe(t){return!!(iL(t)||t.variants)}function Brt(t,e){if(iL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||nA(n)?n:void 0,animate:nA(r)?r:void 0}}return t.inherit!==!1?e:{}}function Wrt(t){const{initial:e,animate:n}=Brt(t,X.useContext(nL));return X.useMemo(()=>({initial:e,animate:n}),[die(e),die(n)])}function die(t){return Array.isArray(t)?t.join(" "):t}const Hrt=Symbol.for("motionComponentSymbol");function kx(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qrt(t,e,n){return X.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):kx(n)&&(n.current=r))},[e])}const ZW=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Krt="framerAppearId",oxe="data-"+ZW(Krt),{schedule:JW}=nxe(queueMicrotask,!1),axe=X.createContext({});function Yrt(t,e,n,r,i){var s,o;const{visualElement:a}=X.useContext(nL),l=X.useContext(rxe),c=X.useContext(tL),u=X.useContext(HW).reducedMotion,h=X.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,g=X.useContext(axe);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Xrt(h.current,n,i,g);const v=X.useRef(!1);X.useInsertionEffect(()=>{f&&v.current&&f.update(n,c)});const x=n[oxe],b=X.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return exe(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),JW.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),X.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,x)}),b.current=!1))}),f}function Xrt(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:lxe(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&kx(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function lxe(t){if(t)return t.options.allowProjection!==!1?t.projection:lxe(t.parent)}function Zrt({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Frt(t);function a(c,u){let h;const f={...X.useContext(HW),...c,layoutId:Jrt(c)},{isStatic:g}=f,v=Wrt(c),x=r(c,g);if(!g&&qW){Qrt();const b=eit(f);h=b.MeasureLayout,v.visualElement=Yrt(i,x,f,e,b.ProjectionNode)}return m.jsxs(nL.Provider,{value:v,children:[h&&v.visualElement?m.jsx(h,{visualElement:v.visualElement,...f}):null,n(i,c,qrt(x,v.visualElement,u),x,g,v.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=X.forwardRef(a);return l[Hrt]=i,l}function Jrt({layoutId:t}){const e=X.useContext(BW).id;return e&&t!==void 0?e+"-"+t:t}function Qrt(t,e){X.useContext(rxe).strict}function eit(t){const{drag:e,layout:n}=I2;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const tit=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function QW(t){return typeof t!="string"||t.includes("-")?!1:!!(tit.indexOf(t)>-1||/[A-Z]/u.test(t))}function fie(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function eH(t,e,n,r){if(typeof e=="function"){const[i,s]=fie(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=fie(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const VV=t=>Array.isArray(t),nit=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),rit=t=>VV(t)?t[t.length-1]||0:t,ha=t=>!!(t&&t.getVelocity);function r3(t){const e=ha(t)?t.get():t;return nit(e)?e.toValue():e}function iit({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:sit(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const cxe=t=>(e,n)=>{const r=X.useContext(nL),i=X.useContext(tL),s=()=>iit(t,e,r,i);return n?s():WW(s)};function sit(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=r3(s[f]);let{initial:o,animate:a}=t;const l=iL(t),c=sxe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!rL(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const v=eH(t,f[g]);if(v){const{transitionEnd:x,transition:b,...T}=v;for(const A in T){let I=T[A];if(Array.isArray(I)){const P=u?I.length-1:0;I=I[P]}I!==null&&(i[A]=I)}for(const A in x)i[A]=x[A]}}}return i}const fb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hv=new Set(fb),uxe=t=>e=>typeof e=="string"&&e.startsWith(t),hxe=uxe("--"),oit=uxe("var(--"),tH=t=>oit(t)?ait.test(t.split("/*")[0].trim()):!1,ait=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dxe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mp=(t,e,n)=>n>e?e:n<t?t:n,pb={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},rA={...pb,transform:t=>mp(0,1,t)},aC={...pb,default:1},PI=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Pm=PI("deg"),Td=PI("%"),mn=PI("px"),lit=PI("vh"),cit=PI("vw"),pie={...Td,parse:t=>Td.parse(t)/100,transform:t=>Td.transform(t*100)},uit={borderWidth:mn,borderTopWidth:mn,borderRightWidth:mn,borderBottomWidth:mn,borderLeftWidth:mn,borderRadius:mn,radius:mn,borderTopLeftRadius:mn,borderTopRightRadius:mn,borderBottomRightRadius:mn,borderBottomLeftRadius:mn,width:mn,maxWidth:mn,height:mn,maxHeight:mn,top:mn,right:mn,bottom:mn,left:mn,padding:mn,paddingTop:mn,paddingRight:mn,paddingBottom:mn,paddingLeft:mn,margin:mn,marginTop:mn,marginRight:mn,marginBottom:mn,marginLeft:mn,backgroundPositionX:mn,backgroundPositionY:mn},hit={rotate:Pm,rotateX:Pm,rotateY:Pm,rotateZ:Pm,scale:aC,scaleX:aC,scaleY:aC,scaleZ:aC,skew:Pm,skewX:Pm,skewY:Pm,distance:mn,translateX:mn,translateY:mn,translateZ:mn,x:mn,y:mn,z:mn,perspective:mn,transformPerspective:mn,opacity:rA,originX:pie,originY:pie,originZ:mn},mie={...pb,transform:Math.round},nH={...uit,...hit,zIndex:mie,size:mn,fillOpacity:rA,strokeOpacity:rA,numOctaves:mie},dit={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fit=fb.length;function pit(t,e,n){let r="",i=!0;for(let s=0;s<fit;s++){const o=fb[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=dxe(a,nH[o]);if(!l){i=!1;const u=dit[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function rH(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(hv.has(l)){o=!0;continue}else if(hxe(l)){i[l]=c;continue}else{const u=dxe(c,nH[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=pit(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const mit={offset:"stroke-dashoffset",array:"stroke-dasharray"},git={offset:"strokeDashoffset",array:"strokeDasharray"};function yit(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?mit:git;t[s.offset]=mn.transform(-r);const o=mn.transform(e),a=mn.transform(n);t[s.array]=`${o} ${a}`}function gie(t,e,n){return typeof t=="string"?t:mn.transform(e+n*t)}function vit(t,e,n){const r=gie(e,t.x,t.width),i=gie(n,t.y,t.height);return`${r} ${i}`}function iH(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(rH(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:v}=t;f.transform&&(v&&(g.transform=f.transform),delete f.transform),v&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=vit(v,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&yit(f,o,a,l,!1)}const sH=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),fxe=()=>({...sH(),attrs:{}}),oH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pxe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const mxe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gxe(t,e,n,r){pxe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(mxe.has(i)?i:ZW(i),e.attrs[i])}const mN={};function _it(t){Object.assign(mN,t)}function yxe(t,{layout:e,layoutId:n}){return hv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!mN[t]||t==="opacity")}function aH(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ha(i[o])||e.style&&ha(e.style[o])||yxe(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function vxe(t,e,n){const r=aH(t,e,n);for(const i in t)if(ha(t[i])||ha(e[i])){const s=fb.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function xit(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const yie=["x","y","width","height","cx","cy","r"],wit={useVisualState:cxe({scrapeMotionValuesFromProps:vxe,createRenderState:fxe,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(hv.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<yie.length;a++){const l=yie[a];t[l]!==e[l]&&(o=!0)}o&&mi.read(()=>{xit(n,r),mi.render(()=>{iH(r,i,oH(n.tagName),t.transformTemplate),gxe(n,r)})})}})},bit={useVisualState:cxe({scrapeMotionValuesFromProps:aH,createRenderState:sH})};function _xe(t,e,n){for(const r in e)!ha(e[r])&&!yxe(r,n)&&(t[r]=e[r])}function Eit({transformTemplate:t},e){return X.useMemo(()=>{const n=sH();return rH(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Sit(t,e){const n=t.style||{},r={};return _xe(r,n,t),Object.assign(r,Eit(t,e)),r}function Tit(t,e){const n={},r=Sit(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function kit(t,e,n,r){const i=X.useMemo(()=>{const s=fxe();return iH(s,e,oH(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_xe(s,t.style,t),i.style={...s,...i.style}}return i}function Ait(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(QW(n)?kit:Tit)(r,s,o,n),c=Urt(r,typeof n=="string",t),u=n!==X.Fragment?{...c,...l,ref:i}:{},{children:h}=r,f=X.useMemo(()=>ha(h)?h.get():h,[h]);return X.createElement(n,{...u,children:f})}}function Iit(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...QW(r)?wit:bit,preloadedFeatures:t,useRender:Ait(i),createVisualElement:e,Component:r};return Zrt(o)}}function xxe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function sL(t,e,n){const r=t.getProps();return eH(r,e,n!==void 0?n:r.custom,t)}const Pit=KW(()=>window.ScrollTimeline!==void 0);class Rit{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Pit()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Cit extends Rit{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function lH(t,e){return t?t[e]||t.default||t:void 0}const zV=2e4;function wxe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<zV;)e+=n,r=t.next(e);return e>=zV?1/0:e}function cH(t){return typeof t=="function"}function vie(t,e){t.timeline=e,t.onfinish=null}const uH=t=>Array.isArray(t)&&typeof t[0]=="number",Mit={linearEasing:void 0};function Nit(t,e){const n=KW(t);return()=>{var r;return(r=Mit[e])!==null&&r!==void 0?r:n()}}const gN=Nit(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bxe=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(A2(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Exe(t){return!!(typeof t=="function"&&gN()||!t||typeof t=="string"&&(t in UV||gN())||uH(t)||Array.isArray(t)&&t.every(Exe))}const DS=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,UV={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:DS([0,.65,.55,1]),circOut:DS([.55,0,1,.45]),backIn:DS([.31,.01,.66,-.59]),backOut:DS([.33,1.53,.69,.99])};function Sxe(t,e){if(t)return typeof t=="function"&&gN()?bxe(t,e):uH(t)?DS(t):Array.isArray(t)?t.map(n=>Sxe(n,e)||UV.easeOut):UV[t]}const Uu={x:!1,y:!1};function Txe(){return Uu.x||Uu.y}function Oit(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function kxe(t,e){const n=Oit(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function _ie(t){return e=>{e.pointerType==="touch"||Txe()||t(e)}}function Lit(t,e,n={}){const[r,i,s]=kxe(t,n),o=_ie(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=_ie(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Axe=(t,e)=>e?t===e?!0:Axe(t,e.parentElement):!1,hH=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Dit=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $it(t){return Dit.has(t.tagName)||t.tabIndex!==-1}const $S=new WeakSet;function xie(t){return e=>{e.key==="Enter"&&t(e)}}function wj(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jit=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=xie(()=>{if($S.has(n))return;wj(n,"down");const i=xie(()=>{wj(n,"up")}),s=()=>wj(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function wie(t){return hH(t)&&!Txe()}function Fit(t,e,n={}){const[r,i,s]=kxe(t,n),o=a=>{const l=a.currentTarget;if(!wie(a)||$S.has(l))return;$S.add(l);const c=e(a),u=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!wie(g)||!$S.has(l))&&($S.delete(l),typeof c=="function"&&c(g,{success:v}))},h=g=>{u(g,n.useGlobalTarget||Axe(l,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!$it(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>jit(c,i),i)}),s}function Vit(t){return t==="x"||t==="y"?Uu[t]?null:(Uu[t]=!0,()=>{Uu[t]=!1}):Uu.x||Uu.y?null:(Uu.x=Uu.y=!0,()=>{Uu.x=Uu.y=!1})}const Ixe=new Set(["width","height","top","left","right","bottom",...fb]);let i3;function zit(){i3=void 0}const kd={now:()=>(i3===void 0&&kd.set(ko.isProcessing||Drt.useManualTiming?ko.timestamp:performance.now()),i3),set:t=>{i3=t,queueMicrotask(zit)}};function dH(t,e){t.indexOf(e)===-1&&t.push(e)}function fH(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class pH{constructor(){this.subscriptions=[]}add(e){return dH(this.subscriptions,e),()=>fH(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Pxe(t,e){return e?t*(1e3/e):0}const bie=30,Uit=t=>!isNaN(parseFloat(t));class Git{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=kd.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=kd.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Uit(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new pH);const r=this.events[e].add(n);return e==="change"?()=>{r(),mi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=kd.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>bie)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,bie);return Pxe(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function iA(t,e){return new Git(t,e)}function Bit(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,iA(n))}function Wit(t,e){const n=sL(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=rit(s[o]);Bit(t,o,a)}}function Hit(t){return!!(ha(t)&&t.add)}function GV(t,e){const n=t.getValue("willChange");if(Hit(n))return n.add(e)}function Rxe(t){return t.props[oxe]}const Cxe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qit=1e-7,Kit=12;function Yit(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Cxe(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>qit&&++a<Kit);return o}function RI(t,e,n,r){if(t===e&&n===r)return cc;const i=s=>Yit(s,0,1,t,n);return s=>s===0||s===1?s:Cxe(i(s),e,r)}const Mxe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Nxe=t=>e=>1-t(1-e),Oxe=RI(.33,1.53,.69,.99),mH=Nxe(Oxe),Lxe=Mxe(mH),Dxe=t=>(t*=2)<1?.5*mH(t):.5*(2-Math.pow(2,-10*(t-1))),gH=t=>1-Math.sin(Math.acos(t)),$xe=Nxe(gH),jxe=Mxe(gH),Fxe=t=>/^0[^.\s]+$/u.test(t);function Xit(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Fxe(t):!0}const RT=t=>Math.round(t*1e5)/1e5,yH=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Zit(t){return t==null}const Jit=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vH=(t,e)=>n=>!!(typeof n=="string"&&Jit.test(n)&&n.startsWith(t)||e&&!Zit(n)&&Object.prototype.hasOwnProperty.call(n,e)),Vxe=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(yH);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Qit=t=>mp(0,255,t),bj={...pb,transform:t=>Math.round(Qit(t))},zy={test:vH("rgb","red"),parse:Vxe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+bj.transform(t)+", "+bj.transform(e)+", "+bj.transform(n)+", "+RT(rA.transform(r))+")"};function est(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const BV={test:vH("#"),parse:est,transform:zy.transform},Ax={test:vH("hsl","hue"),parse:Vxe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Td.transform(RT(e))+", "+Td.transform(RT(n))+", "+RT(rA.transform(r))+")"},Jo={test:t=>zy.test(t)||BV.test(t)||Ax.test(t),parse:t=>zy.test(t)?zy.parse(t):Ax.test(t)?Ax.parse(t):BV.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?zy.transform(t):Ax.transform(t)},tst=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nst(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(yH))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(tst))===null||n===void 0?void 0:n.length)||0)>0}const zxe="number",Uxe="color",rst="var",ist="var(",Eie="${}",sst=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sA(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(sst,l=>(Jo.test(l)?(r.color.push(s),i.push(Uxe),n.push(Jo.parse(l))):l.startsWith(ist)?(r.var.push(s),i.push(rst),n.push(l)):(r.number.push(s),i.push(zxe),n.push(parseFloat(l))),++s,Eie)).split(Eie);return{values:n,split:a,indexes:r,types:i}}function Gxe(t){return sA(t).values}function Bxe(t){const{split:e,types:n}=sA(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===zxe?s+=RT(i[o]):a===Uxe?s+=Jo.transform(i[o]):s+=i[o]}return s}}const ost=t=>typeof t=="number"?0:t;function ast(t){const e=Gxe(t);return Bxe(t)(e.map(ost))}const Gg={test:nst,parse:Gxe,createTransformer:Bxe,getAnimatableNone:ast},lst=new Set(["brightness","contrast","saturate","opacity"]);function cst(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(yH)||[];if(!r)return t;const i=n.replace(r,"");let s=lst.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const ust=/\b([a-z-]*)\(.*?\)/gu,WV={...Gg,getAnimatableNone:t=>{const e=t.match(ust);return e?e.map(cst).join(" "):t}},hst={...nH,color:Jo,backgroundColor:Jo,outlineColor:Jo,fill:Jo,stroke:Jo,borderColor:Jo,borderTopColor:Jo,borderRightColor:Jo,borderBottomColor:Jo,borderLeftColor:Jo,filter:WV,WebkitFilter:WV},_H=t=>hst[t];function Wxe(t,e){let n=_H(t);return n!==WV&&(n=Gg),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dst=new Set(["auto","none","0"]);function fst(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!dst.has(s)&&sA(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Wxe(n,i)}const Sie=t=>t===pb||t===mn,Tie=(t,e)=>parseFloat(t.split(", ")[e]),kie=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return Tie(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?Tie(s[1],t):0}},pst=new Set(["x","y","z"]),mst=fb.filter(t=>!pst.has(t));function gst(t){const e=[];return mst.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const P2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:kie(4,13),y:kie(5,14)};P2.translateX=P2.x;P2.translateY=P2.y;const s1=new Set;let HV=!1,qV=!1;function Hxe(){if(qV){const t=Array.from(s1).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=gst(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}qV=!1,HV=!1,s1.forEach(t=>t.complete()),s1.clear()}function qxe(){s1.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qV=!0)})}function yst(){qxe(),Hxe()}class xH{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(s1.add(this),HV||(HV=!0,mi.read(qxe),mi.resolveKeyframes(Hxe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),s1.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,s1.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Kxe=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),vst=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _st(t){const e=vst.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Yxe(t,e,n=1){const[r,i]=_st(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Kxe(o)?parseFloat(o):o}return tH(i)?Yxe(i,e,n+1):i}const Xxe=t=>e=>e.test(t),xst={test:t=>t==="auto",parse:t=>t},Zxe=[pb,mn,Td,Pm,cit,lit,xst],Aie=t=>Zxe.find(Xxe(t));class Jxe extends xH{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),tH(c))){const u=Yxe(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Ixe.has(r)||e.length!==2)return;const[i,s]=e,o=Aie(i),a=Aie(s);if(o!==a)if(Sie(o)&&Sie(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Xit(e[i])&&r.push(i);r.length&&fst(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=P2[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=P2[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const Iie=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Gg.test(t)||t==="0")&&!t.startsWith("url("));function wst(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function bst(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Iie(i,e),a=Iie(s,e);return!o||!a?!1:wst(t)||(n==="spring"||cH(n))&&r}const Est=t=>t!==null;function oL(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Est),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Sst=40;class Qxe{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=kd.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Sst?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yst(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=kd.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!bst(e,r,i,s))if(o)this.options.duration=0;else{l&&l(oL(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Di=(t,e,n)=>t+(e-t)*n;function Ej(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Tst({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Ej(l,a,t+1/3),s=Ej(l,a,t),o=Ej(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function yN(t,e){return n=>n>0?e:t}const Sj=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},kst=[BV,zy,Ax],Ast=t=>kst.find(e=>e.test(t));function Pie(t){const e=Ast(t);if(!e)return!1;let n=e.parse(t);return e===Ax&&(n=Tst(n)),n}const Rie=(t,e)=>{const n=Pie(t),r=Pie(e);if(!n||!r)return yN(t,e);const i={...n};return s=>(i.red=Sj(n.red,r.red,s),i.green=Sj(n.green,r.green,s),i.blue=Sj(n.blue,r.blue,s),i.alpha=Di(n.alpha,r.alpha,s),zy.transform(i))},Ist=(t,e)=>n=>e(t(n)),CI=(...t)=>t.reduce(Ist),KV=new Set(["none","hidden"]);function Pst(t,e){return KV.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Rst(t,e){return n=>Di(t,e,n)}function wH(t){return typeof t=="number"?Rst:typeof t=="string"?tH(t)?yN:Jo.test(t)?Rie:Nst:Array.isArray(t)?ewe:typeof t=="object"?Jo.test(t)?Rie:Cst:yN}function ewe(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>wH(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function Cst(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=wH(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Mst(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const Nst=(t,e)=>{const n=Gg.createTransformer(e),r=sA(t),i=sA(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?KV.has(t)&&!i.values.length||KV.has(e)&&!r.values.length?Pst(t,e):CI(ewe(Mst(r,i),i.values),n):yN(t,e)};function twe(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Di(t,e,n):wH(t)(t,e)}const Ost=5;function nwe(t,e,n){const r=Math.max(e-Ost,0);return Pxe(n-t(r),e-r)}const Ki={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tj=.001;function Lst({duration:t=Ki.duration,bounce:e=Ki.bounce,velocity:n=Ki.velocity,mass:r=Ki.mass}){let i,s,o=1-e;o=mp(Ki.minDamping,Ki.maxDamping,o),t=mp(Ki.minDuration,Ki.maxDuration,rp(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,g=YV(c,o),v=Math.exp(-h);return Tj-f/g*v},s=c=>{const h=c*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-h),x=YV(Math.pow(c,2),o);return(-i(c)+Tj>0?-1:1)*((f-g)*v)/x}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-Tj+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=$st(i,s,a);if(t=np(t),isNaN(l))return{stiffness:Ki.stiffness,damping:Ki.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Dst=12;function $st(t,e,n){let r=n;for(let i=1;i<Dst;i++)r=r-t(r)/e(r);return r}function YV(t,e){return t*Math.sqrt(1-e*e)}const jst=["duration","bounce"],Fst=["stiffness","damping","mass"];function Cie(t,e){return e.some(n=>t[n]!==void 0)}function Vst(t){let e={velocity:Ki.velocity,stiffness:Ki.stiffness,damping:Ki.damping,mass:Ki.mass,isResolvedFromDuration:!1,...t};if(!Cie(t,Fst)&&Cie(t,jst))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*mp(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ki.mass,stiffness:i,damping:s}}else{const n=Lst(t);e={...e,...n,mass:Ki.mass},e.isResolvedFromDuration=!0}return e}function rwe(t=Ki.visualDuration,e=Ki.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:g}=Vst({...n,velocity:-rp(n.velocity||0)}),v=f||0,x=c/(2*Math.sqrt(l*u)),b=o-s,T=rp(Math.sqrt(l/u)),A=Math.abs(b)<5;r||(r=A?Ki.restSpeed.granular:Ki.restSpeed.default),i||(i=A?Ki.restDelta.granular:Ki.restDelta.default);let I;if(x<1){const M=YV(T,x);I=F=>{const C=Math.exp(-x*T*F);return o-C*((v+x*T*b)/M*Math.sin(M*F)+b*Math.cos(M*F))}}else if(x===1)I=M=>o-Math.exp(-T*M)*(b+(v+T*b)*M);else{const M=T*Math.sqrt(x*x-1);I=F=>{const C=Math.exp(-x*T*F),N=Math.min(M*F,300);return o-C*((v+x*T*b)*Math.sinh(N)+M*b*Math.cosh(N))/M}}const P={calculatedDuration:g&&h||null,next:M=>{const F=I(M);if(g)a.done=M>=h;else{let C=0;x<1&&(C=M===0?np(v):nwe(I,M,F));const N=Math.abs(C)<=r,O=Math.abs(o-F)<=i;a.done=N&&O}return a.value=a.done?o:F,a},toString:()=>{const M=Math.min(wxe(P),zV),F=bxe(C=>P.next(M*C).value,M,30);return M+"ms "+F}};return P}function Mie({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},g=N=>a!==void 0&&N<a||l!==void 0&&N>l,v=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let x=n*e;const b=h+x,T=o===void 0?b:o(b);T!==b&&(x=T-h);const A=N=>-x*Math.exp(-N/r),I=N=>T+A(N),P=N=>{const O=A(N),j=I(N);f.done=Math.abs(O)<=c,f.value=f.done?T:j};let M,F;const C=N=>{g(f.value)&&(M=N,F=rwe({keyframes:[f.value,v(f.value)],velocity:nwe(I,N,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:N=>{let O=!1;return!F&&M===void 0&&(O=!0,P(N),C(N)),M!==void 0&&N>=M?F.next(N-M):(!O&&P(N),f)}}}const zst=RI(.42,0,1,1),Ust=RI(0,0,.58,1),iwe=RI(.42,0,.58,1),Gst=t=>Array.isArray(t)&&typeof t[0]!="number",Bst={linear:cc,easeIn:zst,easeInOut:iwe,easeOut:Ust,circIn:gH,circInOut:jxe,circOut:$xe,backIn:mH,backInOut:Lxe,backOut:Oxe,anticipate:Dxe},Nie=t=>{if(uH(t)){txe(t.length===4);const[e,n,r,i]=t;return RI(e,n,r,i)}else if(typeof t=="string")return Bst[t];return t};function Wst(t,e,n){const r=[],i=n||twe,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||cc:e;a=CI(l,a)}r.push(a)}return r}function Hst(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(txe(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Wst(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=A2(t[h],t[h+1],u);return a[h](f)};return n?u=>c(mp(t[0],t[s-1],u)):c}function qst(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=A2(0,e,r);t.push(Di(n,1,i))}}function Kst(t){const e=[0];return qst(e,t.length-1),e}function Yst(t,e){return t.map(n=>n*e)}function Xst(t,e){return t.map(()=>e||iwe).splice(0,t.length-1)}function vN({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Gst(r)?r.map(Nie):Nie(r),s={done:!1,value:e[0]},o=Yst(n&&n.length===e.length?n:Kst(e),t),a=Hst(o,e,{ease:Array.isArray(i)?i:Xst(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Zst=t=>{const e=({timestamp:n})=>t(n);return{start:()=>mi.update(e,!0),stop:()=>Ug(e),now:()=>ko.isProcessing?ko.timestamp:kd.now()}},Jst={decay:Mie,inertia:Mie,tween:vN,keyframes:vN,spring:rwe},Qst=t=>t/100;class bH extends Qxe{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||xH,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=cH(n)?n:Jst[n]||vN;let l,c;a!==vN&&typeof e[0]!="number"&&(l=CI(Qst,twe(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=wxe(u));const{calculatedDuration:h}=u,f=h+i,g=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:v,repeatDelay:x,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-f*(this.speed>=0?1:-1),A=this.speed>=0?T<0:T>u;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let I=this.currentTime,P=s;if(g){const N=Math.min(this.currentTime,u)/h;let O=Math.floor(N),j=N%1;!j&&N>=1&&(j=1),j===1&&O--,O=Math.min(O,g+1),O%2&&(v==="reverse"?(j=1-j,x&&(j-=x/h)):v==="mirror"&&(P=o)),I=mp(0,1,j)*h}const M=A?{done:!1,value:l[0]}:P.next(I);a&&(M.value=a(M.value));let{done:F}=M;!A&&c!==null&&(F=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return C&&i!==void 0&&(M.value=oL(l,this.options,i)),b&&b(M.value),C&&this.finish(),M}get duration(){const{resolved:e}=this;return e?rp(e.calculatedDuration):0}get time(){return rp(this.currentTime)}set time(e){e=np(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=rp(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Zst,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const eot=new Set(["opacity","clipPath","filter","transform"]);function tot(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Sxe(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const not=KW(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),_N=10,rot=2e4;function iot(t){return cH(t.type)||t.type==="spring"||!Exe(t.ease)}function sot(t,e){const n=new bH({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<rot;)r=n.sample(s),i.push(r.value),s+=_N;return{times:void 0,keyframes:i,duration:s-_N,ease:"linear"}}const swe={anticipate:Dxe,backInOut:Lxe,circInOut:jxe};function oot(t){return t in swe}class Oie extends Qxe{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Jxe(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&gN()&&oot(s)&&(s=swe[s]),iot(this.options)){const{onComplete:h,onUpdate:f,motionValue:g,element:v,...x}=this.options,b=sot(e,x);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=tot(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(vie(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(oL(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return rp(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return rp(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=np(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return cc;const{animation:r}=n;vie(r,e)}return cc}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...g}=this.options,v=new bH({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),x=np(this.time);c.setWithVelocity(v.sample(x-_N).value,v.sample(x).value,_N)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return not()&&r&&eot.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const aot={type:"spring",stiffness:500,damping:25,restSpeed:10},lot=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cot={type:"keyframes",duration:.8},uot={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hot=(t,{keyframes:e})=>e.length>2?cot:hv.has(t)?t.startsWith("scale")?lot(e[1]):aot:uot;function dot({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const EH=(t,e,n,r={},i,s)=>o=>{const a=lH(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-np(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};dot(a)||(u={...u,...hot(t,u)}),u.duration&&(u.duration=np(u.duration)),u.repeatDelay&&(u.repeatDelay=np(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=oL(u.keyframes,a);if(f!==void 0)return mi.update(()=>{u.onUpdate(f),u.onComplete()}),new Cit([])}return!s&&Oie.supports(u)?new Oie(u):new bH(u)};function fot({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function owe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),g=l[h];if(g===void 0||u&&fot(u,h))continue;const v={delay:n,...lH(o||{},h)};let x=!1;if(window.MotionHandoffAnimation){const T=Rxe(t);if(T){const A=window.MotionHandoffAnimation(T,h,mi);A!==null&&(v.startTime=A,x=!0)}}GV(t,h),f.start(EH(h,f,g,t.shouldReduceMotion&&Ixe.has(h)?{type:!1}:v,t,x));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{mi.update(()=>{a&&Wit(t,a)})}),c}function XV(t,e,n={}){var r;const i=sL(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(owe(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return pot(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function pot(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(mot).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(XV(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function mot(t,e){return t.sortNodePosition(e)}function got(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>XV(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=XV(t,e,n);else{const i=typeof e=="function"?sL(t,e,n.custom):e;r=Promise.all(owe(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const yot=XW.length;function awe(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?awe(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yot;n++){const r=XW[n],i=t.props[r];(nA(i)||i===!1)&&(e[r]=i)}return e}const vot=[...YW].reverse(),_ot=YW.length;function xot(t){return e=>Promise.all(e.map(({animation:n,options:r})=>got(t,n,r)))}function wot(t){let e=xot(t),n=Lie(),r=!0;const i=l=>(c,u)=>{var h;const f=sL(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:g,transitionEnd:v,...x}=f;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=awe(t.parent)||{},h=[],f=new Set;let g={},v=1/0;for(let b=0;b<_ot;b++){const T=vot[b],A=n[T],I=c[T]!==void 0?c[T]:u[T],P=nA(I),M=T===l?A.isActive:null;M===!1&&(v=b);let F=I===u[T]&&I!==c[T]&&P;if(F&&r&&t.manuallyAnimateOnMount&&(F=!1),A.protectedKeys={...g},!A.isActive&&M===null||!I&&!A.prevProp||rL(I)||typeof I=="boolean")continue;const C=bot(A.prevProp,I);let N=C||T===l&&A.isActive&&!F&&P||b>v&&P,O=!1;const j=Array.isArray(I)?I:[I];let V=j.reduce(i(T),{});M===!1&&(V={});const{prevResolvedValues:G={}}=A,U={...G,...V},fe=$e=>{N=!0,f.has($e)&&(O=!0,f.delete($e)),A.needsAnimating[$e]=!0;const pe=t.getValue($e);pe&&(pe.liveStyle=!1)};for(const $e in U){const pe=V[$e],De=G[$e];if(g.hasOwnProperty($e))continue;let Me=!1;VV(pe)&&VV(De)?Me=!xxe(pe,De):Me=pe!==De,Me?pe!=null?fe($e):f.add($e):pe!==void 0&&f.has($e)?fe($e):A.protectedKeys[$e]=!0}A.prevProp=I,A.prevResolvedValues=V,A.isActive&&(g={...g,...V}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(F&&C)||O)&&h.push(...j.map($e=>({animation:$e,options:{type:T}})))}if(f.size){const b={};f.forEach(T=>{const A=t.getBaseTarget(T),I=t.getValue(T);I&&(I.liveStyle=!0),b[T]=A??null}),h.push({animation:b})}let x=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Lie(),r=!0}}}function bot(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!xxe(e,t):!1}function V0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lie(){return{animate:V0(!0),whileInView:V0(),whileHover:V0(),whileTap:V0(),whileDrag:V0(),whileFocus:V0(),exit:V0()}}class i0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Eot extends i0{constructor(e){super(e),e.animationState||(e.animationState=wot(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rL(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Sot=0;class Tot extends i0{constructor(){super(...arguments),this.id=Sot++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const kot={animation:{Feature:Eot},exit:{Feature:Tot}};function oA(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function MI(t){return{point:{x:t.pageX,y:t.pageY}}}const Aot=t=>e=>hH(e)&&t(e,MI(e));function CT(t,e,n,r){return oA(t,e,Aot(n),r)}const Die=(t,e)=>Math.abs(t-e);function Iot(t,e){const n=Die(t.x,e.x),r=Die(t.y,e.y);return Math.sqrt(n**2+r**2)}class lwe{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Aj(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=Iot(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:v}=h,{timestamp:x}=ko;this.history.push({...v,timestamp:x});const{onStart:b,onMove:T}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=kj(f,this.transformPagePoint),mi.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Aj(h.type==="pointercancel"?this.lastMoveEventInfo:kj(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,b),v&&v(h,b)},!hH(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=MI(e),a=kj(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ko;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Aj(a,this.history)),this.removeListeners=CI(CT(this.contextWindow,"pointermove",this.handlePointerMove),CT(this.contextWindow,"pointerup",this.handlePointerUp),CT(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ug(this.updatePoint)}}function kj(t,e){return e?{point:e(t.point)}:t}function $ie(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Aj({point:t},e){return{point:t,delta:$ie(t,cwe(e)),offset:$ie(t,Pot(e)),velocity:Rot(e,.1)}}function Pot(t){return t[0]}function cwe(t){return t[t.length-1]}function Rot(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=cwe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>np(e)));)n--;if(!r)return{x:0,y:0};const s=rp(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const uwe=1e-4,Cot=1-uwe,Mot=1+uwe,hwe=.01,Not=0-hwe,Oot=0+hwe;function mc(t){return t.max-t.min}function Lot(t,e,n){return Math.abs(t-e)<=n}function jie(t,e,n,r=.5){t.origin=r,t.originPoint=Di(e.min,e.max,t.origin),t.scale=mc(n)/mc(e),t.translate=Di(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Cot&&t.scale<=Mot||isNaN(t.scale))&&(t.scale=1),(t.translate>=Not&&t.translate<=Oot||isNaN(t.translate))&&(t.translate=0)}function MT(t,e,n,r){jie(t.x,e.x,n.x,r?r.originX:void 0),jie(t.y,e.y,n.y,r?r.originY:void 0)}function Fie(t,e,n){t.min=n.min+e.min,t.max=t.min+mc(e)}function Dot(t,e,n){Fie(t.x,e.x,n.x),Fie(t.y,e.y,n.y)}function Vie(t,e,n){t.min=e.min-n.min,t.max=t.min+mc(e)}function NT(t,e,n){Vie(t.x,e.x,n.x),Vie(t.y,e.y,n.y)}function $ot(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Di(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Di(n,t,r.max):Math.min(t,n)),t}function zie(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jot(t,{top:e,left:n,bottom:r,right:i}){return{x:zie(t.x,n,i),y:zie(t.y,e,r)}}function Uie(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Fot(t,e){return{x:Uie(t.x,e.x),y:Uie(t.y,e.y)}}function Vot(t,e){let n=.5;const r=mc(t),i=mc(e);return i>r?n=A2(e.min,e.max-r,t.min):r>i&&(n=A2(t.min,t.max-i,e.min)),mp(0,1,n)}function zot(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ZV=.35;function Uot(t=ZV){return t===!1?t=0:t===!0&&(t=ZV),{x:Gie(t,"left","right"),y:Gie(t,"top","bottom")}}function Gie(t,e,n){return{min:Bie(t,e),max:Bie(t,n)}}function Bie(t,e){return typeof t=="number"?t:t[e]||0}const Wie=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ix=()=>({x:Wie(),y:Wie()}),Hie=()=>({min:0,max:0}),as=()=>({x:Hie(),y:Hie()});function Dc(t){return[t("x"),t("y")]}function dwe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Got({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Bot(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ij(t){return t===void 0||t===1}function JV({scale:t,scaleX:e,scaleY:n}){return!Ij(t)||!Ij(e)||!Ij(n)}function dy(t){return JV(t)||fwe(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fwe(t){return qie(t.x)||qie(t.y)}function qie(t){return t&&t!=="0%"}function xN(t,e,n){const r=t-n,i=e*r;return n+i}function Kie(t,e,n,r,i){return i!==void 0&&(t=xN(t,i,r)),xN(t,n,r)+e}function QV(t,e=0,n=1,r,i){t.min=Kie(t.min,e,n,r,i),t.max=Kie(t.max,e,n,r,i)}function pwe(t,{x:e,y:n}){QV(t.x,e.translate,e.scale,e.originPoint),QV(t.y,n.translate,n.scale,n.originPoint)}const Yie=.999999999999,Xie=1.0000000000001;function Wot(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rx(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,pwe(t,o)),r&&dy(s.latestValues)&&Rx(t,s.latestValues))}e.x<Xie&&e.x>Yie&&(e.x=1),e.y<Xie&&e.y>Yie&&(e.y=1)}function Px(t,e){t.min=t.min+e,t.max=t.max+e}function Zie(t,e,n,r,i=.5){const s=Di(t.min,t.max,i);QV(t,e,n,s,r)}function Rx(t,e){Zie(t.x,e.x,e.scaleX,e.scale,e.originX),Zie(t.y,e.y,e.scaleY,e.scale,e.originY)}function mwe(t,e){return dwe(Bot(t.getBoundingClientRect(),e))}function Hot(t,e,n){const r=mwe(t,n),{scroll:i}=e;return i&&(Px(r.x,i.offset.x),Px(r.y,i.offset.y)),r}const gwe=({current:t})=>t?t.ownerDocument.defaultView:null,qot=new WeakMap;class Kot{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=as(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(MI(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Vit(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Dc(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Td.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const I=A.layout.layoutBox[b];I&&(T=mc(I)*(parseFloat(T)/100))}}this.originPoint[b]=T}),v&&mi.postRender(()=>v(u,h)),GV(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(g&&this.currentDirection===null){this.currentDirection=Yot(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),x&&x(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Dc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new lwe(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:gwe(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&mi.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!lC(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=$ot(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&kx(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=jot(i.layoutBox,n):this.constraints=!1,this.elastic=Uot(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Dc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zot(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!kx(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Hot(r,i.root,this.visualElement.getTransformPagePoint());let o=Fot(i.layout.layoutBox,s);if(n){const a=n(Got(o));this.hasMutatedConstraints=!!a,a&&(o=dwe(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Dc(u=>{if(!lC(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return GV(this.visualElement,e),r.start(EH(e,r,0,n,this.visualElement,!1))}stopAnimation(){Dc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Dc(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Dc(n=>{const{drag:r}=this.getProps();if(!lC(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Di(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!kx(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Dc(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Vot({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Dc(o=>{if(!lC(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Di(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;qot.set(this.visualElement,this);const e=this.visualElement.current,n=CT(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();kx(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),mi.read(r);const o=oA(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Dc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=ZV,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function lC(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Yot(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Xot extends i0{constructor(e){super(e),this.removeGroupControls=cc,this.removeListeners=cc,this.controls=new Kot(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||cc}unmount(){this.removeGroupControls(),this.removeListeners()}}const Jie=t=>(e,n)=>{t&&mi.postRender(()=>t(e,n))};class Zot extends i0{constructor(){super(...arguments),this.removePointerDownListener=cc}onPointerDown(e){this.session=new lwe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gwe(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Jie(e),onStart:Jie(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&mi.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=CT(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const s3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qie(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const BE={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(mn.test(t))t=parseFloat(t);else return t;const n=Qie(t,e.target.x),r=Qie(t,e.target.y);return`${n}% ${r}%`}},Jot={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Gg.parse(t);if(i.length>5)return r;const s=Gg.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Di(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Qot extends X.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_it(eat),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),s3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||mi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),JW.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ywe(t){const[e,n]=Q_e(),r=X.useContext(BW);return m.jsx(Qot,{...t,layoutGroup:r,switchLayoutGroup:X.useContext(axe),isPresent:e,safeToRemove:n})}const eat={borderRadius:{...BE,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:BE,borderTopRightRadius:BE,borderBottomLeftRadius:BE,borderBottomRightRadius:BE,boxShadow:Jot};function tat(t,e,n){const r=ha(t)?t:iA(t);return r.start(EH("",r,e,n)),r.animation}function nat(t){return t instanceof SVGElement&&t.tagName!=="svg"}const rat=(t,e)=>t.depth-e.depth;class iat{constructor(){this.children=[],this.isDirty=!1}add(e){dH(this.children,e),this.isDirty=!0}remove(e){fH(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(rat),this.isDirty=!1,this.children.forEach(e)}}function sat(t,e){const n=kd.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ug(r),t(s-e))};return mi.read(r,!0),()=>Ug(r)}const vwe=["TopLeft","TopRight","BottomLeft","BottomRight"],oat=vwe.length,ese=t=>typeof t=="string"?parseFloat(t):t,tse=t=>typeof t=="number"||mn.test(t);function aat(t,e,n,r,i,s){i?(t.opacity=Di(0,n.opacity!==void 0?n.opacity:1,lat(r)),t.opacityExit=Di(e.opacity!==void 0?e.opacity:1,0,cat(r))):s&&(t.opacity=Di(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<oat;o++){const a=`border${vwe[o]}Radius`;let l=nse(e,a),c=nse(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||tse(l)===tse(c)?(t[a]=Math.max(Di(ese(l),ese(c),r),0),(Td.test(c)||Td.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Di(e.rotate||0,n.rotate||0,r))}function nse(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lat=_we(0,.5,$xe),cat=_we(.5,.95,cc);function _we(t,e,n){return r=>r<t?0:r>e?1:n(A2(t,e,r))}function rse(t,e){t.min=e.min,t.max=e.max}function Ic(t,e){rse(t.x,e.x),rse(t.y,e.y)}function ise(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sse(t,e,n,r,i){return t-=e,t=xN(t,1/n,r),i!==void 0&&(t=xN(t,1/i,r)),t}function uat(t,e=0,n=1,r=.5,i,s=t,o=t){if(Td.test(e)&&(e=parseFloat(e),e=Di(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Di(s.min,s.max,r);t===s&&(a-=e),t.min=sse(t.min,e,n,a,i),t.max=sse(t.max,e,n,a,i)}function ose(t,e,[n,r,i],s,o){uat(t,e[n],e[r],e[i],e.scale,s,o)}const hat=["x","scaleX","originX"],dat=["y","scaleY","originY"];function ase(t,e,n,r){ose(t.x,e,hat,n?n.x:void 0,r?r.x:void 0),ose(t.y,e,dat,n?n.y:void 0,r?r.y:void 0)}function lse(t){return t.translate===0&&t.scale===1}function xwe(t){return lse(t.x)&&lse(t.y)}function cse(t,e){return t.min===e.min&&t.max===e.max}function fat(t,e){return cse(t.x,e.x)&&cse(t.y,e.y)}function use(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wwe(t,e){return use(t.x,e.x)&&use(t.y,e.y)}function hse(t){return mc(t.x)/mc(t.y)}function dse(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class pat{constructor(){this.members=[]}add(e){dH(this.members,e),e.scheduleRender()}remove(e){if(fH(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mat(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const fy={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},jS=typeof window<"u"&&window.MotionDebug!==void 0,Pj=["","X","Y","Z"],gat={visibility:"hidden"},fse=1e3;let yat=0;function Rj(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function bwe(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Rxe(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",mi,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&bwe(r)}function Ewe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=yat++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jS&&(fy.totalNodes=fy.resolvedTargetDeltas=fy.recalculatedProjection=0),this.nodes.forEach(xat),this.nodes.forEach(Tat),this.nodes.forEach(kat),this.nodes.forEach(wat),jS&&window.MotionDebug.record(fy)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new iat)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new pH),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=nat(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=sat(f,250),s3.hasAnimatedSinceResize&&(s3.hasAnimatedSinceResize=!1,this.nodes.forEach(mse))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Cat,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=u.getProps(),A=!this.targetLayout||!wwe(this.targetLayout,v)||g,I=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,I);const P={...lH(x,"layout"),onPlay:b,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||mse(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ug(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Aat),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bwe(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pse);return}this.isUpdating||this.nodes.forEach(Eat),this.isUpdating=!1,this.nodes.forEach(Sat),this.nodes.forEach(vat),this.nodes.forEach(_at),this.clearAllSnapshots();const a=kd.now();ko.delta=mp(0,1e3/60,a-ko.timestamp),ko.timestamp=a,ko.isProcessing=!0,xj.update.process(ko),xj.preRender.process(ko),xj.render.process(ko),ko.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,JW.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bat),this.sharedNodes.forEach(Iat)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,mi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){mi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=as(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!xwe(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||dy(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Mat(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return as();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Nat))){const{scroll:u}=this.root;u&&(Px(l.x,u.offset.x),Px(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=as();if(Ic(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ic(l,o),Px(l.x,h.offset.x),Px(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=as();Ic(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Rx(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),dy(u.latestValues)&&Rx(l,u.latestValues)}return dy(this.latestValues)&&Rx(l,this.latestValues),l}removeTransform(o){const a=as();Ic(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!dy(c.latestValues))continue;JV(c.latestValues)&&c.updateSnapshot();const u=as(),h=c.measurePageBox();Ic(u,h),ase(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return dy(this.latestValues)&&ase(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ko.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=ko.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=as(),this.relativeTargetOrigin=as(),NT(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=as(),this.targetWithTransforms=as()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Dot(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ic(this.target,this.layout.layoutBox),pwe(this.target,this.targetDelta)):Ic(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=as(),this.relativeTargetOrigin=as(),NT(this.relativeTargetOrigin,this.target,g.target),Ic(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jS&&fy.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||JV(this.parent.latestValues)||fwe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ko.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Ic(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Wot(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=as());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ise(this.prevProjectionDelta.x,this.projectionDelta.x),ise(this.prevProjectionDelta.y,this.projectionDelta.y)),MT(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!dse(this.projectionDelta.x,this.prevProjectionDelta.x)||!dse(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),jS&&fy.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ix(),this.projectionDelta=Ix(),this.projectionDeltaWithTransform=Ix()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Ix();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=as(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,b=this.getStack(),T=!b||b.members.length<=1,A=!!(x&&!T&&this.options.crossfade===!0&&!this.path.some(Rat));this.animationProgress=0;let I;this.mixTargetDelta=P=>{const M=P/1e3;gse(h.x,o.x,M),gse(h.y,o.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(NT(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Pat(this.relativeTarget,this.relativeTargetOrigin,f,M),I&&fat(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=as()),Ic(I,this.relativeTarget)),x&&(this.animationValues=u,aat(u,c,this.latestValues,M,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ug(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=mi.update(()=>{s3.hasAnimatedSinceResize=!0,this.currentAnimation=tat(0,fse,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Swe(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||as();const h=mc(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=mc(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Ic(a,l),Rx(a,u),MT(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new pat),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Rj("z",o,c,this.animationValues);for(let u=0;u<Pj.length;u++)Rj(`rotate${Pj[u]}`,o,c,this.animationValues),Rj(`skew${Pj[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return gat;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=r3(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=r3(o?.pointerEvents)||""),this.hasProjected&&!dy(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=mat(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y:v}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in mN){if(f[x]===void 0)continue;const{correct:b,applyTo:T}=mN[x],A=c.transform==="none"?f[x]:b(f[x],h);if(T){const I=T.length;for(let P=0;P<I;P++)c[T[P]]=A}else c[x]=A}return this.options.layoutId&&(c.pointerEvents=h===this?r3(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(pse),this.root.sharedNodes.clear()}}}function vat(t){t.updateLayout()}function _at(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Dc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=mc(f);f.min=r[h].min,f.max=f.min+g}):Swe(s,n.layoutBox,r)&&Dc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=mc(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Ix();MT(a,r,n.layoutBox);const l=Ix();o?MT(l,t.applyTransform(i,!0),n.measuredBox):MT(l,r,n.layoutBox);const c=!xwe(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const v=as();NT(v,n.layoutBox,f.layoutBox);const x=as();NT(x,r,g.layoutBox),wwe(v,x)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function xat(t){jS&&fy.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wat(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function bat(t){t.clearSnapshot()}function pse(t){t.clearMeasurements()}function Eat(t){t.isLayoutDirty=!1}function Sat(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function mse(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Tat(t){t.resolveTargetDelta()}function kat(t){t.calcProjection()}function Aat(t){t.resetSkewAndRotation()}function Iat(t){t.removeLeadSnapshot()}function gse(t,e,n){t.translate=Di(e.translate,0,n),t.scale=Di(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function yse(t,e,n,r){t.min=Di(e.min,n.min,r),t.max=Di(e.max,n.max,r)}function Pat(t,e,n,r){yse(t.x,e.x,n.x,r),yse(t.y,e.y,n.y,r)}function Rat(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Cat={duration:.45,ease:[.4,0,.1,1]},vse=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_se=vse("applewebkit/")&&!vse("chrome/")?Math.round:cc;function xse(t){t.min=_se(t.min),t.max=_se(t.max)}function Mat(t){xse(t.x),xse(t.y)}function Swe(t,e,n){return t==="position"||t==="preserve-aspect"&&!Lot(hse(e),hse(n),.2)}function Nat(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Oat=Ewe({attachResizeListener:(t,e)=>oA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cj={current:void 0},Twe=Ewe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cj.current){const t=new Oat({});t.mount(window),t.setOptions({layoutScroll:!0}),Cj.current=t}return Cj.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Lat={pan:{Feature:Zot},drag:{Feature:Xot,ProjectionNode:Twe,MeasureLayout:ywe}};function wse(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&mi.postRender(()=>s(e,MI(e)))}class Dat extends i0{mount(){const{current:e}=this.node;e&&(this.unmount=Lit(e,n=>(wse(this.node,n,"Start"),r=>wse(this.node,r,"End"))))}unmount(){}}class $at extends i0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=CI(oA(this.node.current,"focus",()=>this.onFocus()),oA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bse(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&mi.postRender(()=>s(e,MI(e)))}class jat extends i0{mount(){const{current:e}=this.node;e&&(this.unmount=Fit(e,n=>(bse(this.node,n,"Start"),(r,{success:i})=>bse(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ez=new WeakMap,Mj=new WeakMap,Fat=t=>{const e=ez.get(t.target);e&&e(t)},Vat=t=>{t.forEach(Fat)};function zat({root:t,...e}){const n=t||document;Mj.has(n)||Mj.set(n,{});const r=Mj.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Vat,{root:t,...e})),r[i]}function Uat(t,e,n){const r=zat(e);return ez.set(t,n),r.observe(t),()=>{ez.delete(t),r.unobserve(t)}}const Gat={some:0,all:1};class Bat extends i0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Gat[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return Uat(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Wat(e,n))&&this.startObserver()}unmount(){}}function Wat({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Hat={inView:{Feature:Bat},tap:{Feature:jat},focus:{Feature:$at},hover:{Feature:Dat}},qat={layout:{ProjectionNode:Twe,MeasureLayout:ywe}},tz={current:null},kwe={current:!1};function Kat(){if(kwe.current=!0,!!qW)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>tz.current=t.matches;t.addListener(e),e()}else tz.current=!1}const Yat=[...Zxe,Jo,Gg],Xat=t=>Yat.find(Xxe(t)),Ese=new WeakMap;function Zat(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ha(i))t.addValue(r,i);else if(ha(s))t.addValue(r,iA(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,iA(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Sse=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Jat{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xH,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=kd.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,mi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=iL(n),this.isVariantNode=sxe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const v=f[g];l[g]!==void 0&&ha(v)&&v.set(l[g],!1)}}mount(e){this.current=e,Ese.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kwe.current||Kat(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:tz.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Ese.delete(this.current),this.projection&&this.projection.unmount(),Ug(this.notifyUpdate),Ug(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=hv.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&mi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in I2){const n=I2[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):as()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Sse.length;r++){const i=Sse[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Zat(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=iA(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Kxe(i)||Fxe(i))?i=parseFloat(i):!Xat(i)&&Gg.test(n)&&(i=Wxe(e,n)),this.setBaseTarget(e,ha(i)?i.get():i)),ha(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=eH(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ha(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new pH),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Awe extends Jat{constructor(){super(...arguments),this.KeyframeResolver=Jxe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ha(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Qat(t){return window.getComputedStyle(t)}class elt extends Awe{constructor(){super(...arguments),this.type="html",this.renderInstance=pxe}readValueFromInstance(e,n){if(hv.has(n)){const r=_H(n);return r&&r.default||0}else{const r=Qat(e),i=(hxe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mwe(e,n)}build(e,n,r){rH(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return aH(e,n,r)}}class tlt extends Awe{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=as}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(hv.has(n)){const r=_H(n);return r&&r.default||0}return n=mxe.has(n)?n:ZW(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vxe(e,n,r)}build(e,n,r){iH(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){gxe(e,n,r,i)}mount(e){this.isSVGTag=oH(e.tagName),super.mount(e)}}const nlt=(t,e)=>QW(t)?new tlt(e):new elt(e,{allowProjection:t!==X.Fragment}),rlt=Iit({...kot,...Hat,...Lat,...qat},nlt),kt=Grt(rlt);const ilt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),slt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Tse=t=>{const e=slt(t);return e.charAt(0).toUpperCase()+e.slice(1)},Iwe=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),olt=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var alt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const llt=X.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>X.createElement("svg",{ref:l,...alt,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Iwe("lucide",i),...!s&&!olt(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>X.createElement(c,u)),...Array.isArray(s)?s:[s]]));const lt=(t,e)=>{const n=X.forwardRef(({className:r,...i},s)=>X.createElement(llt,{ref:s,iconNode:e,className:Iwe(`lucide-${ilt(Tse(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Tse(t),n};const clt=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],ult=lt("archive-restore",clt);const hlt=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Pwe=lt("archive",hlt);const dlt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],flt=lt("ban",dlt);const plt=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Rwe=lt("book-open",plt);const mlt=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Cwe=lt("bug",mlt);const glt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],SH=lt("calendar",glt);const ylt=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],aL=lt("camera",ylt);const vlt=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Mwe=lt("chart-column",vlt);const _lt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gp=lt("check",_lt);const xlt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mb=lt("chevron-down",xlt);const wlt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Nwe=lt("chevron-left",wlt);const blt=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],gb=lt("chevron-right",blt);const Elt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],lL=lt("chevron-up",Elt);const Slt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Owe=lt("circle-alert",Slt);const Tlt=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],klt=lt("circle-check-big",Tlt);const Alt=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wN=lt("clock",Alt);const Ilt=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]],Plt=lt("cloud-fog",Ilt);const Rlt=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Clt=lt("cloud-lightning",Rlt);const Mlt=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Nlt=lt("cloud-off",Mlt);const Olt=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],TH=lt("cloud-rain",Olt);const Llt=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Dlt=lt("cloud-snow",Llt);const $lt=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],yp=lt("cloud",$lt);const jlt=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Flt=lt("code",jlt);const Vlt=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lwe=lt("compass",Vlt);const zlt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],bN=lt("crosshair",zlt);const Ult=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],EN=lt("download",Ult);const Glt=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Blt=lt("droplets",Glt);const Wlt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bg=lt("external-link",Wlt);const Hlt=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],SN=lt("eye-off",Hlt);const qlt=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TN=lt("eye",qlt);const Klt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kH=lt("file-text",Klt);const Ylt=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Xlt=lt("flame",Ylt);const Zlt=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],kse=lt("flower-2",Zlt);const Jlt=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Qlt=lt("folder-open",Jlt);const ect=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],tct=lt("folder-plus",ect);const nct=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],rct=lt("folder",nct);const ict=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],nz=lt("funnel",ict);const sct=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],oct=lt("gauge",sct);const act=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],lct=lt("gem",act);const cct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],uct=lt("globe",cct);const hct=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Dwe=lt("grid-3x3",hct);const dct=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],$we=lt("grip-horizontal",dct);const fct=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],pct=lt("image-plus",fct);const mct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],AH=lt("info",mct);const gct=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],jwe=lt("landmark",gct);const yct=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],uc=lt("layers",yct);const vct=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Fwe=lt("list",vct);const _ct=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],cL=lt("loader-circle",_ct);const xct=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wct=lt("locate-fixed",xct);const bct=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],rz=lt("lock",bct);const Ect=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],IH=lt("log-out",Ect);const Sct=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Sl=lt("map-pin",Sct);const Tct=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],uL=lt("map",Tct);const kct=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Vwe=lt("menu",kct);const Act=[["path",{d:"M5 12h14",key:"1ays0h"}]],zwe=lt("minus",Act);const Ict=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],R2=lt("mountain",Ict);const Pct=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Rct=lt("mouse-pointer",Pct);const Cct=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],yb=lt("navigation",Cct);const Mct=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Uwe=lt("pause",Mct);const Nct=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ase=lt("pen-line",Nct);const Oct=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Lct=lt("pen",Oct);const Dct=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],C2=lt("pencil",Dct);const $ct=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],Gwe=lt("person-standing",$ct);const jct=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Bwe=lt("play",jct);const Fct=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],du=lt("plus",Fct);const Vct=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zct=lt("refresh-cw",Vct);const Uct=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Wwe=lt("rotate-ccw",Uct);const Gct=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Bct=lt("rotate-cw",Gct);const Wct=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],kN=lt("route",Wct);const Hct=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],B1=lt("ruler",Hct);const qct=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hwe=lt("save",qct);const Kct=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Yct=lt("scale",Kct);const Xct=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],aA=lt("search",Xct);const Zct=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iz=lt("settings",Zct);const Jct=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Qct=lt("settings-2",Jct);const eut=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],tut=lt("share-2",eut);const nut=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],rut=lt("shield",nut);const iut=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],sz=lt("sliders-horizontal",iut);const sut=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],out=lt("sliders-vertical",sut);const aut=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],lut=lt("smartphone",aut);const cut=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],uut=lt("square",cut);const hut=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],dut=lt("sun",hut);const fut=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],put=lt("tag",fut);const mut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],gut=lt("target",mut);const yut=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],vut=lt("timer",yut);const _ut=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zd=lt("trash-2",_ut);const xut=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],wut=lt("tree-palm",xut);const but=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Eut=lt("trending-down",but);const Sut=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tut=lt("trending-up",Sut);const kut=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],PH=lt("type",kut);const Aut=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],NI=lt("upload",Aut);const Iut=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],RH=lt("user",Iut);const Put=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Rut=lt("volume-2",Put);const Cut=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Mut=lt("waves",Cut);const Nut=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Out=lt("wifi-off",Nut);const Lut=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Ise=lt("wind",Lut);const Dut=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ai=lt("x",Dut);const $ut=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],jut=lt("zoom-in",$ut);function Fut(){const{tracking:t,startTracking:e,stopTracking:n,updatePosition:r,setWatchId:i}=Es(),s=X.useCallback(a=>{r(a)},[r]),o=X.useCallback(a=>{console.error("GPS error:",a),alert(`GPS fout: ${a.message}`),n()},[n]);return X.useEffect(()=>{if(!t)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),n();return}const a=navigator.geolocation.watchPosition(s,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(a),()=>{navigator.geolocation.clearWatch(a)}},[t,s,o,i,n]),{tracking:t,start:e,stop:n,toggle:()=>t?n():e()}}async function Vut(){const t=DeviceOrientationEvent;if(typeof t.requestPermission=="function")try{return await t.requestPermission()==="granted"}catch{return!1}return!0}function zut(){const{tracking:t,start:e,stop:n}=Fut(),r=Es(a=>a.navigationMode),i=Es(a=>a.setNavigationMode),s=t&&r==="headingUp",o=async()=>{t?r==="free"?i("headingUp"):n():(await Vut(),e(),i("free"))};return m.jsx(kt.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${s?"bg-gradient-to-br from-green-400 to-green-600 text-white shadow-lg shadow-green-500/30":t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{scale:[1,1.02,1]}:{},transition:t?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":s?"Rijmodus actief (kaart draait mee)":t?"GPS actief - klik voor rijmodus":"GPS starten",title:s?"Rijmodus actief - klik om GPS te stoppen":t?"GPS actief - klik voor rijmodus":"GPS starten",children:s?m.jsx(yb,{size:22,strokeWidth:2}):m.jsx(wct,{size:22,strokeWidth:2})})}const Uut="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`),Pse=new In({image:new uo({radius:7,fill:new sr({color:"#4285F4"}),stroke:new Bn({color:"white",width:2.5})})});function Gut(){const t=ji(v=>v.map),e=Es(v=>v.position),n=Es(v=>v.accuracy),r=Es(v=>v.tracking),i=Es(v=>v.smoothHeading),s=Es(v=>v.navigationMode),o=Pn(v=>v.showAccuracyCircle),a=Es(v=>v.firstFix),l=Es(v=>v.resetFirstFix),c=Es(v=>v.config.centerOnUser),u=X.useRef(null),h=X.useRef(null),f=X.useRef(null),g=X.useMemo(()=>v=>new In({image:new MA({src:Uut,scale:.9,rotation:v,rotateWithView:!0,anchor:[.5,.5]})}),[]);return X.useEffect(()=>{if(!t||!e)return;const v=Ci([e.lng,e.lat]);return u.current=new Gr({geometry:new ts(v)}),u.current.setStyle(r?g(0):Pse),h.current=new Gr({geometry:new ts(v)}),f.current=new yh({source:new fu({features:[h.current,u.current]}),zIndex:1e3}),t.addLayer(f.current),()=>{f.current&&t&&t.removeLayer(f.current)}},[t,!!e,g]),X.useEffect(()=>{if(u.current)if(r){const v=i!==null?i*Math.PI/180:0;u.current.setStyle(g(v))}else u.current.setStyle(Pse)},[r,g,i]),X.useEffect(()=>{if(!t||!e||!u.current||!h.current)return;const v=Ci([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(v),h.current.getGeometry()?.setCoordinates(v),r&&o&&n){const x=t.getView().getResolution()||1,b=Math.min(n/x,80);h.current.setStyle(new In({image:new uo({radius:b,fill:new sr({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new In({}));if(a&&r){t.getView().setCenter(v),t.getView().setZoom(17),l();return}r&&c&&!a&&t.getView().animate({center:v,duration:150})},[t,r,e,n,a,l,c,o]),X.useEffect(()=>{if(!u.current||!r)return;const v=i!==null?i*Math.PI/180:0;u.current.setStyle(g(v))},[i,g,r]),X.useEffect(()=>{if(!(!t||!r)&&s==="headingUp"&&i!==null){const v=-(i*Math.PI)/180,x=t.getView(),b=x.getRotation();let T=v-b;for(;T>Math.PI;)T-=2*Math.PI;for(;T<-Math.PI;)T+=2*Math.PI;Math.abs(T)>.01&&x.animate({rotation:b+T,duration:200})}},[t,r,s,i]),X.useEffect(()=>{if(t&&s==="free"){const v=t.getView(),x=v.getRotation();Math.abs(x)>.01&&v.animate({rotation:0,duration:300})}},[t,s]),null}function But(){const t=zr(n=>n.themesPanelOpen),e=zr(n=>n.toggleThemesPanel);return m.jsx(kt.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":t?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:m.jsx(uL,{size:22,strokeWidth:2})})}function Wut(){return m.jsx(But,{})}const cC=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],$m=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],Bc="default-vondsten",oz={id:Bc,name:"Mijn vondsten",color:"#f97316",categories:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()},Hut=t=>t.some(n=>n.id===Bc)?t:[{...oz,createdAt:new Date().toISOString()},...t],co=po()(vh((t,e)=>({layers:[{...oz}],colorIndex:0,addLayer:(n,r=$m)=>{const i=crypto.randomUUID(),s=cC[e().colorIndex%cC.length];return t(o=>({layers:[...o.layers,{id:i,name:n,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:o.colorIndex+1})),i},removeLayer:n=>{t(r=>({layers:r.layers.filter(i=>i.id!==n)}))},updateLayer:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)}))},toggleVisibility:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)}))},toggleArchived:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(n,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:[...o.points,i]}:o)}))},removePoint:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,points:s.points.filter(o=>o.id!==r)}:s)}))},updatePoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,...i}:a)}:o)}))},setPointStatus:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,status:i}:a)}:o)}))},addCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,categories:s.categories.filter(o=>o!==r)}:s)}))},addPhotoToPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:[...a.photos||[],i]}:a)}:o)}))},removePhotoFromPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:(a.photos||[]).filter(l=>l.id!==i)}:a)}:o)}))},updatePhotoInPoint:(n,r,i,s)=>{t(o=>({layers:o.layers.map(a=>a.id===n?{...a,points:a.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(c=>c.id===i?{...c,...s}:c)}:l)}:a)}))},exportLayerAsGeoJSON:n=>{const r=e().layers.find(l=>l.id===n);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},importLayerFromGeoJSON:n=>{try{const r=JSON.parse(n);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,o=i.categories||$m,a=i.color||cC[e().colorIndex%cC.length],l=(r.features||[]).filter(u=>u.geometry?.type==="Point").map(u=>({id:u.properties?.id||crypto.randomUUID(),name:u.properties?.name||"Naamloos",category:u.properties?.category||"Overig",notes:u.properties?.notes||"",url:u.properties?.url,status:u.properties?.status||"todo",sourceLayer:u.properties?.sourceLayer,sourceId:u.properties?.sourceId,photos:u.properties?.photos,coordinates:u.geometry.coordinates,createdAt:u.properties?.createdAt||new Date().toISOString()})),c=crypto.randomUUID();return t(u=>({layers:[...u.layers,{id:c,name:s,color:a,categories:o,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:u.colorIndex+1})),{success:!0,layerId:c}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:n=>e().layers.find(r=>r.id===n),getActiveLayerCount:()=>e().layers.filter(n=>!n.archived).length,getArchivedLayerCount:()=>e().layers.filter(n=>n.archived).length,clearAll:()=>{t(n=>({layers:n.layers.map(r=>r.id===Bc?{...r,points:[]}:r).filter(r=>r.id===Bc),colorIndex:0}))}}),{name:"detectorapp-custom-point-layers",version:3,onRehydrateStorage:()=>t=>{t&&(t.layers.some(n=>n.id===Bc)||(t.layers=[{...oz,createdAt:new Date().toISOString()},...t.layers]))},migrate:(t,e)=>{const n=t;return e<2?{...n,layers:Hut(n.layers||[])}:e<3?{...n,layers:(n.layers||[]).map(r=>r.id===Bc?{...r,name:"Mijn vondsten"}:r)}:n}}));function Ls({title:t,children:e,defaultExpanded:n=!0,layerNames:r}){const[i,s]=X.useState(n),o=Vs(b=>b.visible),a=Vs(b=>b.setLayerVisibility),l=NG(b=>b.isLayerUnlocked),c=b=>{const T=Py[b],A=T?.tier??"free",I=T?.regions??["nl"];return l(b,A,I)},u=r?.filter(b=>c(b))||[],h=u.filter(b=>o[b]).length,f=u.length,g=f>0&&h===f,v=h>0&&h<f,x=b=>{if(b.stopPropagation(),!r||u.length===0)return;const T=!g;u.forEach(A=>{a(A,T)})};return m.jsxs("div",{className:"mb-0.5",children:[m.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[m.jsxs("button",{onClick:b=>{b.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[m.jsx(kt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:m.jsx(gb,{size:14})}),i?m.jsx(Qlt,{size:16,className:"text-blue-500"}):m.jsx(rct,{size:16,className:"text-blue-500"}),m.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:t}),h>0&&m.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:h})]}),r&&r.length>0&&m.jsx("button",{onClick:x,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:g?"#3b82f6":v?"#93c5fd":"white",border:g?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(g||v)&&m.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:m.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),m.jsx(Jn,{initial:!1,children:i&&m.jsx(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function Et({name:t,type:e,hasOverlay:n,displayName:r}){const i=Vs(P=>P.visible[t]),s=Vs(P=>P.visible["Labels Overlay"]),o=Vs(P=>P.loadingState[t]),a=Vs(P=>P.toggleLayer),l=Vs(P=>P.setLayerVisibility),c=NG(P=>P.isLayerUnlocked),u=o==="loading",h=o==="error",f=Py[t],g=f?.tier??"free",v=f?.regions??["nl"],b=!c(t,g,v),T=P=>{P.stopPropagation(),!(u||b)&&(e==="overlay"?a(t):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(F=>{l(F,F===t)}))},A=P=>{P.stopPropagation(),l("Labels Overlay",!s)},I=i??!1;return m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs("button",{onClick:T,disabled:u||b,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${b?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":I?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:b?"Premium laag - upgrade om te ontgrendelen":void 0,children:[m.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":b?"text-gray-400":"text-gray-600"}`,children:[r||t,h&&m.jsx(Owe,{size:12,className:"text-red-500"}),b&&m.jsx(rz,{size:12,className:"text-amber-500"})]}),m.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:b?"#e5e7eb":u?"#93c5fd":I?"#3b82f6":"white",border:b?"2px solid #d1d5db":u?"2px solid #93c5fd":I?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:b?m.jsx(rz,{size:10,strokeWidth:3,className:"text-gray-400"}):u?m.jsx(cL,{size:10,strokeWidth:3,className:"animate-spin"}):I?m.jsx(gp,{size:12,strokeWidth:3}):null})]}),n&&I&&m.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${s?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:s?"Labels verbergen":"Labels tonen",children:m.jsx(put,{size:12})})]})}const qut=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#6b7280"];function qwe({layer:t,compact:e=!1}){const{toggleVisibility:n,removeLayer:r,updateLayer:i,setColor:s}=QA(),[o,a]=X.useState(!1),[l,c]=X.useState(!1),[u,h]=X.useState(t.name),[f,g]=X.useState(!1),v=X.useRef(null),x=X.useRef(null),b=t.features.features.length,T=[...new Set(t.features.features.map(C=>C.geometry?.type).filter(Boolean))];X.useEffect(()=>{l&&v.current&&(v.current.focus(),v.current.select())},[l]),X.useEffect(()=>{const C=N=>{x.current&&!x.current.contains(N.target)&&g(!1)};if(f)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[f]);const A=()=>{o?r(t.id):(a(!0),setTimeout(()=>a(!1),3e3))},I=()=>{const C=u.trim();C&&C!==t.name&&i(t.id,{name:C}),c(!1)},P=()=>{h(t.name),c(!1)},M=C=>{C.key==="Enter"?I():C.key==="Escape"&&P()},F=C=>{s(t.id,C),g(!1)};return e?m.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 hover:bg-blue-50 transition-colors rounded",children:[m.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.color}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&m.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:m.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("span",{className:"text-gray-700 truncate flex-1 cursor-pointer",style:{fontSize:"0.9em"},onClick:()=>n(t.id),children:t.name}),m.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0",children:b})]}):m.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m.jsxs("div",{className:"relative",ref:x,children:[m.jsx("button",{onClick:()=>g(!f),className:"w-5 h-5 rounded border-2 border-white shadow-sm flex-shrink-0 hover:scale-110 transition-transform",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),f&&m.jsx("div",{className:"absolute top-6 left-0 z-50 bg-white rounded-lg shadow-lg border p-2 grid grid-cols-3 gap-1",children:qut.map(C=>m.jsx("button",{onClick:()=>F(C),className:`w-6 h-6 rounded border-2 transition-transform hover:scale-110 ${C===t.color?"border-gray-800 scale-110":"border-white"}`,style:{backgroundColor:C},title:C},C))})]}),m.jsx("div",{className:"flex-1 min-w-0",children:l?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("input",{ref:v,type:"text",value:u,onChange:C=>h(C.target.value),onKeyDown:M,className:"flex-1 text-sm px-1 py-0.5 border rounded min-w-0"}),m.jsx("button",{onClick:I,className:"p-0.5 text-green-600 hover:bg-green-50 rounded",title:"Opslaan",children:m.jsx(gp,{size:14})}),m.jsx("button",{onClick:P,className:"p-0.5 text-gray-400 hover:bg-gray-100 rounded",title:"Annuleren",children:m.jsx(ai,{size:14})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.name}),m.jsx("button",{onClick:()=>c(!0),className:"p-0.5 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Naam wijzigen",children:m.jsx(C2,{size:12})})]}),m.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[m.jsxs("span",{children:[b," ",b===1?"feature":"features"]}),T.length>0&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"mx-0.5",children:""}),m.jsx("span",{children:T.join(", ")})]})]})]})})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.visible?t.color:"#9ca3af"}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&m.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:m.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),m.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${o?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:o?"Klik nogmaals om te verwijderen":"Verwijderen",children:m.jsx(zd,{size:14})})]})]})}const OT="commercial",Kut={commercial:["Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Recreatie"],personal:["Steentijd & Prehistorie","Paleokaarten","Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Provinciale Thema's","Fossielen, Mineralen & Goud","Recreatie"]},Yut={commercial:["Specials (3D)"],personal:["Specials (3D)"]};function Fl(t){return Kut[OT].includes(t)}function Xut(t){return Yut[OT].includes(t)}const Zut=[{name:"Rapa Nui - Moai Productie",url:"https://arcg.is/qu59O1",desc:"Paaseiland steengroeve in 3D"},{name:"Digital Giza - Piramides",url:"http://giza.fas.harvard.edu/giza3d/",desc:"Harvard 3D reconstructie"},{name:"Stonehenge 360",url:"https://www.english-heritage.org.uk/visit/places/stonehenge/history-and-stories/stonehenge360/",desc:"English Heritage virtuele tour"},{name:"Pompeii 3D Explorer",url:"https://www.cyark.org/projects/pompeii/3D-Explorer",desc:"CyArk LiDAR scans"},{name:"Virtual Angkor Wat",url:"https://www.virtualangkor.com/",desc:"3D reconstructie 1300 n.Chr."},{name:"Petra Virtuele Tour",url:"https://www.zamaniproject.org/site-jordan-petra.html",desc:"Zamani Project 3D"}],Jut=[{name:"CyArk (200+ sites)",url:"https://www.cyark.org/projects/",desc:"Wereldwijd erfgoed archief"},{name:"Google Open Heritage",url:"https://artsandculture.google.com/project/openheritage",desc:"26+ UNESCO sites in 3D"}];function Qut(){const{themesPanelOpen:t,toggleThemesPanel:e,toggleSettingsPanel:n}=zr(),{layers:r,toggleVisibility:i}=co(),s=QA(v=>v.layers),o=X.useRef(null),a=Pn(v=>v.layerPanelFontScale),l=Pn(v=>v.setLayerPanelFontScale),c=Pn(v=>v.showFontSliders),u=Pn(v=>v.showCustomPointLayers),h=13*a/100,[f,g]=X.useState(!1);return X.useEffect(()=>{if(!t)return;const v=b=>{o.current&&!o.current.contains(b.target)&&e()},x=setTimeout(()=>{document.addEventListener("click",v)},100);return()=>{clearTimeout(x),document.removeEventListener("click",v)}},[t,e]),m.jsx(Jn,{children:t&&m.jsxs(kt.div,{ref:o,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[m.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-500",style:{fontSize:`${h}px`},children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(uc,{size:14,className:"text-white"}),m.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[c&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:a,onInput:v=>{l(parseInt(v.target.value))},onChange:v=>l(parseInt(v.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a}%`}),m.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),m.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none bg-blue-400/50 hover:bg-blue-400 transition-colors ml-1",children:m.jsx(ai,{size:16,className:"text-white",strokeWidth:2.5})})]})]}),m.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${h}px`},children:[u&&r.filter(v=>!v.archived).length>0&&m.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[m.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:m.jsx("span",{className:"text-orange-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn lagen"})}),r.filter(v=>!v.archived).map(v=>m.jsxs("button",{onClick:x=>{x.stopPropagation(),i(v.id)},className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${v.visible?"bg-orange-50 hover:bg-orange-100":"bg-transparent hover:bg-orange-50"}`,style:{fontSize:"inherit"},children:[m.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[v.name,m.jsxs("span",{className:"text-xs text-gray-400",children:["(",v.points.length,")"]})]}),m.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:v.visible?"#f97316":"white",border:v.visible?"2px solid #f97316":"2px solid #fb923c",color:"white"},children:v.visible&&m.jsx(gp,{size:12,strokeWidth:3})})]},v.id))]}),s.length>0&&m.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[m.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:[m.jsx(NI,{size:12,className:"text-cyan-600"}),m.jsx("span",{className:"text-cyan-600 font-medium",style:{fontSize:"0.9em"},children:"Gemporteerde lagen"})]}),s.map(v=>m.jsx(qwe,{layer:v,compact:!0},v.id)),m.jsx("button",{onClick:()=>{e(),n()},className:"w-full text-left py-1 pl-3 text-xs text-cyan-500 hover:text-cyan-700 hover:bg-cyan-50 transition-colors",children:"+ Laag importeren..."})]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:m.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),m.jsxs("div",{className:"space-y-0",children:[m.jsx(Et,{name:"CartoDB (licht)",type:"base"}),m.jsx(Et,{name:"OpenStreetMap",type:"base"}),m.jsx(Et,{name:"Luchtfoto",type:"base",hasOverlay:!0}),m.jsx(Et,{name:"TMK 1850",type:"base",hasOverlay:!0}),m.jsx(Et,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:m.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),Fl("Steentijd & Prehistorie")&&m.jsxs(Ls,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","FAMKE IJzertijd"],children:[m.jsx(Et,{name:"Hunebedden",type:"overlay"}),m.jsx(Et,{name:"Grafheuvels",type:"overlay"}),m.jsx(Et,{name:"Terpen",type:"overlay"}),m.jsx(Et,{name:"FAMKE Steentijd",type:"overlay"}),m.jsx(Et,{name:"FAMKE IJzertijd",type:"overlay"})]}),Fl("Paleokaarten")&&m.jsxs(Ls,{title:"Paleokaarten",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[m.jsx(Et,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),m.jsx(Et,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]}),Fl("Archeologische lagen")&&m.jsxs(Ls,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Archeo Onderzoeken","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Romeinse Forten Lijnen"],children:[m.jsx(Et,{name:"AMK Monumenten",type:"overlay"}),m.jsxs(Ls,{title:"Per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[m.jsx(Et,{name:"AMK Romeins",type:"overlay"}),m.jsx(Et,{name:"AMK Steentijd",type:"overlay"}),m.jsx(Et,{name:"AMK Vroege ME",type:"overlay"}),m.jsx(Et,{name:"AMK Late ME",type:"overlay"}),m.jsx(Et,{name:"AMK Overig",type:"overlay"})]}),m.jsx(Et,{name:"Archeo Onderzoeken",type:"overlay"}),m.jsxs(Ls,{title:"Romeinse tijd",defaultExpanded:!1,layerNames:["Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Romeinse Forten Lijnen"],children:[m.jsx(Et,{name:"Romeinse wegen (regio)",type:"overlay"}),m.jsx(Et,{name:"Romeinse wegen (Wereld)",type:"overlay"}),m.jsxs(Ls,{title:"Romeinse Forten",defaultExpanded:!1,layerNames:["Romeinse Forten","Romeinse Forten Lijnen"],children:[m.jsx(Et,{name:"Romeinse Forten",type:"overlay"}),m.jsx(Et,{name:"Romeinse Forten Lijnen",type:"overlay"})]})]})]}),Fl("Archeologische verwachtingen")&&m.jsxs(Ls,{title:"Archeologische verwachtingen",defaultExpanded:!1,layerNames:["Kansenkaart","IKAW","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[m.jsx(Et,{name:"Kansenkaart",type:"overlay"}),m.jsx(Et,{name:"IKAW",type:"overlay"}),m.jsx(Et,{name:"UIKAV Punten",type:"overlay"}),m.jsx(Et,{name:"UIKAV Vlakken",type:"overlay"}),m.jsx(Et,{name:"UIKAV Expert",type:"overlay"}),m.jsx(Et,{name:"UIKAV Buffer",type:"overlay"}),m.jsx(Et,{name:"UIKAV Indeling",type:"overlay"})]}),Fl("Erfgoed & Monumenten")&&m.jsxs(Ls,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[m.jsx(Et,{name:"Rijksmonumenten",type:"overlay"}),m.jsx(Et,{name:"Werelderfgoed",type:"overlay"}),m.jsx(Et,{name:"Religieus Erfgoed",type:"overlay"}),m.jsx(Et,{name:"Kastelen",type:"overlay"}),m.jsx(Et,{name:"Runes",type:"overlay"})]}),Fl("WOII & Militair")&&m.jsxs(Ls,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[m.jsx(Et,{name:"WWII Bunkers",type:"overlay"}),m.jsx(Et,{name:"Slagvelden",type:"overlay"}),m.jsx(Et,{name:"Militaire Vliegvelden",type:"overlay"}),m.jsx(Et,{name:"Verdedigingslinies",type:"overlay"}),m.jsx(Et,{name:"Militaire Objecten",type:"overlay"}),m.jsx(Et,{name:"Inundatiegebieden",type:"overlay"})]}),Fl("Hillshade & LiDAR")&&m.jsxs(Ls,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN4 Hillshade Kleur","AHN 0.5m"],children:[m.jsx(Et,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),m.jsx(Et,{name:"AHN4 Hillshade NL",type:"overlay"}),m.jsx(Et,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),m.jsx(Et,{name:"AHN4 Hillshade Kleur",type:"overlay"}),m.jsx(Et,{name:"AHN 0.5m",type:"overlay"})]}),Fl("Terrein & Bodem")&&m.jsxs(Ls,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Geomorfologie","Bodemkaart","Essen"],children:[OT==="personal",m.jsx(Et,{name:"Geomorfologie",type:"overlay"}),m.jsx(Et,{name:"Bodemkaart",type:"overlay"}),m.jsx(Et,{name:"Essen",type:"overlay"})]}),Fl("Percelen")&&m.jsxs(Ls,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[m.jsx(Et,{name:"Gewaspercelen",type:"overlay"}),m.jsx(Et,{name:"Kadastrale Grenzen",type:"overlay"})]}),Fl("Provinciale Thema's")&&m.jsxs(Ls,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[m.jsxs(Ls,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[m.jsx(Et,{name:"Scheepswrakken",type:"overlay"}),m.jsx(Et,{name:"Woonheuvels ZH",type:"overlay"}),m.jsx(Et,{name:"Windmolens",type:"overlay"}),m.jsx(Et,{name:"Erfgoedlijnen",type:"overlay"}),m.jsx(Et,{name:"Oude Kernen",type:"overlay"})]}),m.jsxs(Ls,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[m.jsx(Et,{name:"Relictenkaart Punten",type:"overlay"}),m.jsx(Et,{name:"Relictenkaart Lijnen",type:"overlay"}),m.jsx(Et,{name:"Relictenkaart Vlakken",type:"overlay"})]}),m.jsx(Ls,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:m.jsx(Et,{name:"Verdronken Dorpen",type:"overlay"})})]}),Fl("Fossielen, Mineralen & Goud")&&m.jsxs(Ls,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[m.jsx(Et,{name:"Fossiel Hotspots",type:"overlay"}),m.jsx(Et,{name:"Mineralen Hotspots",type:"overlay"}),m.jsx(Et,{name:"Goudrivieren",type:"overlay"}),m.jsx(Et,{name:"Fossielen Nederland",type:"overlay"}),m.jsx(Et,{name:"Fossielen Belgi",type:"overlay"}),m.jsx(Et,{name:"Fossielen Duitsland",type:"overlay"}),m.jsx(Et,{name:"Fossielen Frankrijk",type:"overlay"})]}),Fl("Recreatie")&&OT==="commercial"&&m.jsxs(Ls,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Strandjes"],children:[m.jsx(Et,{name:"Parken",type:"overlay"}),m.jsx(Et,{name:"Speeltuinen",type:"overlay"}),m.jsx(Et,{name:"Strandjes",type:"overlay",displayName:"Recreatie (strand)"})]}),Fl("Recreatie")&&OT==="personal"&&m.jsxs(Ls,{title:"Recreatie",defaultExpanded:!1,layerNames:["Ruiterpaden","Laarzenpaden","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[m.jsx(Et,{name:"Ruiterpaden",type:"overlay"}),m.jsx(Et,{name:"Laarzenpaden",type:"overlay"}),m.jsx(Et,{name:"Parken",type:"overlay"}),m.jsx(Et,{name:"Speeltuinen",type:"overlay"}),m.jsx(Et,{name:"Musea",type:"overlay"}),m.jsx(Et,{name:"Strandjes",type:"overlay"}),m.jsx(Et,{name:"Kringloopwinkels",type:"overlay"})]}),Xut("Specials (3D)")&&m.jsxs("div",{className:"mb-2",children:[m.jsxs("button",{onClick:v=>{v.stopPropagation(),g(!f)},className:"w-full flex items-center gap-1 py-1 px-1 hover:bg-purple-50 rounded transition-colors border-0 outline-none bg-transparent",children:[f?m.jsx(mb,{size:14,className:"text-purple-500"}):m.jsx(gb,{size:14,className:"text-purple-500"}),m.jsx(uct,{size:12,className:"text-purple-500"}),m.jsx("span",{className:"text-purple-600 font-medium",style:{fontSize:"0.95em"},children:"Specials (3D)"}),m.jsx(bg,{size:10,className:"text-purple-400 ml-auto"})]}),f&&m.jsxs("div",{className:"mt-1",onClick:v=>v.stopPropagation(),children:[Zut.map(v=>m.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",onClick:x=>x.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-gray-700",children:v.name}),m.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:v.desc})]}),m.jsx(bg,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},v.name)),m.jsx("div",{className:"border-t border-gray-200 my-1.5 mx-2"}),Jut.map(v=>m.jsxs("a",{href:v.url,target:"_blank",rel:"noopener noreferrer",onClick:x=>x.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-gray-700 font-medium",children:v.name}),m.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:v.desc})]}),m.jsx(bg,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},v.name))]})]})]})]})]})})}function eht(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var W1=1,H1=2,uw=3,tht=4,az=5,Rse=6378137,nht=6356752314e-3,Cse=.0066943799901413165,LT=484813681109536e-20,st=Math.PI/2,rht=.16666666666666666,iht=.04722222222222222,sht=.022156084656084655,xt=1e-10,Hi=.017453292519943295,vl=57.29577951308232,Mr=Math.PI/4,lA=Math.PI*2,us=3.14159265359,Pl={};Pl.greenwich=0;Pl.lisbon=-9.131906111111;Pl.paris=2.337229166667;Pl.bogota=-74.080916666667;Pl.madrid=-3.687938888889;Pl.rome=12.452333333333;Pl.bern=7.439583333333;Pl.jakarta=106.807719444444;Pl.ferro=-17.666666666667;Pl.brussels=4.367975;Pl.stockholm=18.058277777778;Pl.athens=23.7163375;Pl.oslo=10.722916666667;const oht={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Mse=/[\s_\-\/\(\)]/g;function Bg(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(Mse,""),i=-1,s,o;++i<n.length;)if(s=n[i],o=s.toLowerCase().replace(Mse,""),o===r)return t[s]}function lz(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Hi},lat_1:function(a){e.lat1=a*Hi},lat_2:function(a){e.lat2=a*Hi},lat_ts:function(a){e.lat_ts=a*Hi},lon_0:function(a){e.long0=a*Hi},lon_1:function(a){e.long1=a*Hi},lon_2:function(a){e.long2=a*Hi},alpha:function(a){e.alpha=parseFloat(a)*Hi},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*Hi},lonc:function(a){e.longc=a*Hi},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Bg(oht,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Hi},pm:function(a){var l=Bg(Pl,a);e.from_greenwich=(l||parseFloat(a))*Hi},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in o?(s=o[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class Kwe{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(a=>Array.isArray(a)&&a[0]==="ID"),o=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:o}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),o=s?parseInt(s[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:n,direction:r,unit:l,order:o}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,n.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const r=e.find(f=>Array.isArray(f)&&f[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);n.coordinate_system.unit=f}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const s=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(s){const f=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=f:n.datum=f;const g=e.find(v=>Array.isArray(v)&&v[0]==="PRIMEM");g&&g[1]!=="Greenwich"&&(f.prime_meridian={name:g[1],longitude:parseFloat(g[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const o=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");o&&(n.accuracy=parseFloat(o[1]));const a=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");a&&(n.ellipsoid=this.convert(a)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const l=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(l){const f=l.find(g=>Array.isArray(g));n.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(g=>Array.isArray(g));n.target_crs=f?this.convert(f):null}const u=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");u?n.transformation=this.convert(u):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const f=n.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:h});break;default:n.keyword=e[0];break}return n}}class aht extends Kwe{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class lht extends Kwe{static convert(e,n={}){super.convert(e,n);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),o=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),o&&(n.usage.area=o[1]),a&&(n.usage.bbox=a.slice(1))}return n}}function cht(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function uht(t){return(cht(t)==="2019"?lht:aht).convert(t)}function hht(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var cA=1,Ywe=2,Xwe=3,AN=4,Zwe=5,CH=-1,dht=/\s/,fht=/[A-Za-z]/,pht=/[A-Za-z84_]/,hL=/[,\]]/,Jwe=/[\d\.E\-\+]/;function kp(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=cA}kp.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==AN)for(;dht.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case cA:return this.neutral(t);case Ywe:return this.keyword(t);case AN:return this.quoted(t);case Zwe:return this.afterquote(t);case Xwe:return this.number(t);case CH:return}};kp.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=AN;return}if(hL.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};kp.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=cA;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=cA,this.currentObject=this.stack.pop(),this.currentObject||(this.state=CH);return}};kp.prototype.number=function(t){if(Jwe.test(t)){this.word+=t;return}if(hL.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};kp.prototype.quoted=function(t){if(t==='"'){this.state=Zwe;return}this.word+=t};kp.prototype.keyword=function(t){if(pht.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=cA;return}if(hL.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};kp.prototype.neutral=function(t){if(fht.test(t)){this.word=t,this.state=Ywe;return}if(t==='"'){this.word="",this.state=AN;return}if(Jwe.test(t)){this.word=t,this.state=Xwe;return}if(hL.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};kp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===CH)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function mht(t){var e=new kp(t);return e.output()}function Nj(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,o){return Cx(o,s),s},r);e&&(t[e]=i)}function Cx(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Cx(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Cx(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Cx(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Nj(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Nj(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Cx(t,e[n]);return Nj(e,n,t)}}var ght=.017453292519943295;function Gu(t){return t*ght}function Qwe(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Gu(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Gu(t.lat0>0?90:-90),delete t.lat1)}function Nse(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Ose(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Lse(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Ose(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Ose(t.ellipsoid.semi_minor_axis))))}function IN(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(IN(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Lse(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Lse(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=Nse(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=Nse(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[s]=o*i.unit.conversion_factor:i.unit==="degree"?e[s]=o*Math.PI/180:e[s]=o});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":IN(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),Qwe(e),e)}var yht=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function vht(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function e2e(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];yht.indexOf(i)!==-1&&_ht(t[i]),typeof t[i]=="object"&&e2e(t[i])}}function _ht(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Gu(t.rectified_grid_angle));function a(u){var h=t.to_meter||1;return u*h}var l=function(u){return vht(t,u)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Gu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Gu],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Gu],["lat0","latitude_of_origin",Gu],["lat0","standard_parallel_1",Gu],["lat1","standard_parallel_1",Gu],["lat2","standard_parallel_2",Gu],["azimuth","Azimuth"],["alpha","azimuth",Gu],["srsCode","name"]];c.forEach(l),Qwe(t)}function PN(t){if(typeof t=="object")return IN(t);const e=hht(t);var n=mht(t);if(e==="WKT2"){const s=uht(n);return IN(s)}var r=n[0],i={};return Cx(n,i),e2e(i),i[r]}function To(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?To[t]=lz(arguments[1]):To[t]=PN(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?To[t]=PN(arguments[1]):(To[t]=n,n||delete To[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?To.apply(e,r):To(r)});if(typeof t=="string"){if(t in To)return To[t]}else"EPSG"in t?To["EPSG:"+t.EPSG]=t:"ESRI"in t?To["ESRI:"+t.ESRI]=t:"IAU2000"in t?To["IAU2000:"+t.IAU2000]=t:console.log(t);return}}eht(To);function xht(t){return typeof t=="string"}function wht(t){return t in To}function bht(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var Eht=["3857","900913","3785","102113"];function Sht(t){var e=Bg(t,"authority");if(e){var n=Bg(e,"epsg");return n&&Eht.indexOf(n)>-1}}function Tht(t){var e=Bg(t,"extension");if(e)return Bg(e,"proj4")}function kht(t){return t[0]==="+"}function Aht(t){if(xht(t)){if(wht(t))return To[t];if(bht(t)){var e=PN(t);if(Sht(e))return To["EPSG:3857"];var n=Tht(e);return n?lz(n):e}if(kht(t))return lz(t)}else return"projName"in t?t:PN(t)}function Dse(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function Ld(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function OI(t){return t<0?-1:1}function Pt(t,e){return e||Math.abs(t)<=us?t:t-OI(t)*lA}function oh(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(st-e))/r}function uA(t,e){for(var n=.5*t,r,i,s=st-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(s),i=st-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Iht(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ld(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Pht(t){var e=t.x,n=t.y;if(n*vl>90&&n*vl<-90&&e*vl>180&&e*vl<-180)return null;var r,i;if(Math.abs(Math.abs(n)-st)<=xt)return null;if(this.sphere)r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Mr+.5*n));else{var s=Math.sin(n),o=oh(this.e,n,s);r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=i,t}function Rht(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=st-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=uA(this.e,s),i===-9999)return null}return r=Pt(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var Cht=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Mht={init:Iht,forward:Pht,inverse:Rht,names:Cht};function Nht(){}function $se(t){return t}var t2e=["longlat","identity"];const Oht={init:Nht,forward:$se,inverse:$se,names:t2e};var Lht=[Mht,Oht],py={},Mx=[];function n2e(t,e){var n=Mx.length;return t.names?(Mx[n]=t,t.names.forEach(function(r){py[r.toLowerCase()]=n}),this):(console.log(e),!0)}function r2e(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Dht(t){if(!t)return!1;var e=t.toLowerCase();if(typeof py[e]<"u"&&Mx[py[e]]||(e=r2e(e),e in py&&Mx[py[e]]))return Mx[py[e]]}function $ht(){Lht.forEach(n2e)}const jht={start:$ht,add:n2e,get:Dht};var i2e={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Fht=i2e.WGS84;function Vht(t,e,n,r){var i=t*t,s=e*e,o=(i-s)/i,a=0;r?(t*=1-o*(rht+o*(iht+o*sht)),i=t*t,o=0):a=Math.sqrt(o);var l=(i-s)/s;return{es:o,e:a,ep2:l}}function zht(t,e,n,r,i){if(!t){var s=Bg(i2e,r);s||(s=Fht),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<xt)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var o3={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Uht in o3){var Oj=o3[Uht];Oj.datumName&&(o3[Oj.datumName]=Oj)}function Ght(t,e,n,r,i,s,o){var a={};return t===void 0||t==="none"?a.datum_type=az:a.datum_type=tht,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=W1),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=H1,a.datum_params[3]*=LT,a.datum_params[4]*=LT,a.datum_params[5]*=LT,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=uw,a.grids=o),a.a=n,a.b=r,a.es=i,a.ep2=s,a}var MH={};function Bht(t,e,n){return e instanceof ArrayBuffer?Wht(t,e,n):{ready:Hht(t,e)}}function Wht(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=Yht(i),o=Xht(i,s),a=Zht(i,o,s,r),l={header:o,subgrids:a};return MH[t]=l,l}async function Hht(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),o=await s.readRasters(),a=o,l=[s.getWidth(),s.getHeight()],c=s.getBoundingBox().map(jse),u=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(jse),h=c[0]+(l[0]-1)*u[0],f=c[3]-(l[1]-1)*u[1],g=a[0],v=a[1],x=[];for(let A=l[1]-1;A>=0;A--)for(let I=l[0]-1;I>=0;I--){var b=A*l[0]+I;x.push([-og(v[b]),og(g[b])])}n.push({del:u,lim:l,ll:[-h,f],cvs:x})}var T={header:{nSubgrids:r},subgrids:n};return MH[t]=T,T}function qht(t){if(t===void 0)return null;var e=t.split(",");return e.map(Kht)}function Kht(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:MH[t]||null,isNull:!1}}function jse(t){return t*Math.PI/180}function og(t){return t/3600*Math.PI/180}function Yht(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Xht(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:cz(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function cz(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Zht(t,e,n,r){for(var i=176,s=[],o=0;o<e.nSubgrids;o++){var a=Qht(t,i,n),l=edt(t,i,a,n,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[og(a.lowerLongitude),og(a.lowerLatitude)],del:[og(a.longitudeInterval),og(a.latitudeInterval)],lim:[c,u],count:a.gridNodeCount,cvs:Jht(l)});var h=16;r===!1&&(h=8),i+=176+a.gridNodeCount*h}return s}function Jht(t){return t.map(function(e){return[og(e.longitudeShift),og(e.latitudeShift)]})}function Qht(t,e,n){return{name:cz(t,e+8,e+16).trim(),parent:cz(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function edt(t,e,n,r,i){var s=e+176,o=16;i===!1&&(o=8);for(var a=[],l=0;l<n.gridNodeCount;l++){var c={latitudeShift:t.getFloat32(s+l*o,r),longitudeShift:t.getFloat32(s+l*o+4,r)};i!==!1&&(c.latitudeAccuracy=t.getFloat32(s+l*o+8,r),c.longitudeAccuracy=t.getFloat32(s+l*o+12,r)),a.push(c)}return a}function ou(t,e){if(!(this instanceof ou))return new ou(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var n=Aht(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=ou.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=Bg(o3,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=zht(n.a,n.b,n.rf,n.ellps,n.sphere),o=Vht(s.a,s.b,s.rf,n.R_A),a=qht(n.nadgrids),l=n.datum||Ght(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Dse(this,n),Dse(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}ou.projections=jht;ou.projections.start();function tdt(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===W1?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===H1?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function s2e(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,o,a,l,c;if(i<-st&&i>-1.001*st)i=-st;else if(i>st&&i<1.001*st)i=st;else{if(i<-st)return{x:-1/0,y:-1/0,z:t.z};if(i>st)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,o=n/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-e)+s)*a}}function o2e(t,e,n,r){var i=1e-12,s=i*i,o=30,a,l,c,u,h,f,g,v,x,b,T,A,I,P=t.x,M=t.y,F=t.z?t.z:0,C,N,O;if(a=Math.sqrt(P*P+M*M),l=Math.sqrt(P*P+M*M+F*F),a/n<i){if(C=0,l/n<i)return N=st,O=-r,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(M,P);c=F/l,u=a/l,h=1/Math.sqrt(1-e*(2-e)*u*u),v=u*(1-e)*h,x=c*h,I=0;do I++,g=n/Math.sqrt(1-e*x*x),O=a*v+F*x-g*(1-e*x*x),f=e*g/(g+O),h=1/Math.sqrt(1-f*(2-f)*u*u),b=u*(1-f)*h,T=c*h,A=T*v-b*x,v=b,x=T;while(A*A>s&&I<o);return N=Math.atan(T/Math.abs(b)),{x:C,y:N,z:O}}function ndt(t,e,n){if(e===W1)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===H1){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-a*t.x+o*t.y+t.z)+s}}}function rdt(t,e,n){if(e===W1)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===H1){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-s)/c;return{x:u+l*h-a*f,y:-l*u+h+o*f,z:a*u-o*h+f}}}function uC(t){return t===W1||t===H1}function idt(t,e,n){if(tdt(t,e)||t.datum_type===az||e.datum_type===az)return n;var r=t.a,i=t.es;if(t.datum_type===uw){var s=Fse(t,!1,n);if(s!==0)return;r=Rse,i=Cse}var o=e.a,a=e.b,l=e.es;if(e.datum_type===uw&&(o=Rse,a=nht,l=Cse),i===l&&r===o&&!uC(t.datum_type)&&!uC(e.datum_type))return n;if(n=s2e(n,i,r),uC(t.datum_type)&&(n=ndt(n,t.datum_type,t.datum_params)),uC(e.datum_type)&&(n=rdt(n,e.datum_type,e.datum_params)),n=o2e(n,l,o,a),e.datum_type===uw){var c=Fse(e,!0,n);if(c!==0)return}return n}function Fse(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,g=h.ll[0]-f,v=h.ll[1]-f,x=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,b=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(v>r.y||g>r.x||b<r.y||x<r.x)&&(i=sdt(r,e,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*vl+" "+r.y*vl+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function sdt(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Pt(i.x-Math.PI)+Math.PI;var s=Vse(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var o=9,a=1e-12,l,c;do{if(c=Vse(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Pt(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function Vse(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},h=i.x*i.y,f=i.x*(1-i.y),g=(1-i.x)*(1-i.y),v=(1-i.x)*i.y;return s.x=g*a.x+f*l.x+v*u.x+h*c.x,s.y=g*a.y+f*l.y+v*u.y+h*c.y,s}function zse(t,e,n){var r=n.x,i=n.y,s=n.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(o=r,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=i,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),t.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":n[a]!==void 0&&(c.z=o);break;case"d":n[a]!==void 0&&(c.z=-o);break;default:return null}return c}function a2e(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function odt(t){Use(t.x),Use(t.y)}function Use(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function adt(t,e){return(t.datum.datum_type===W1||t.datum.datum_type===H1||t.datum.datum_type===uw)&&e.datumCode!=="WGS84"||(e.datum.datum_type===W1||e.datum.datum_type===H1||e.datum.datum_type===uw)&&t.datumCode!=="WGS84"}function RN(t,e,n,r){var i;Array.isArray(n)?n=a2e(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(odt(n),t.datum&&e.datum&&adt(t,e)&&(i=new ou("WGS84"),n=RN(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=zse(t,!1,n)),t.projName==="longlat")n={x:n.x*Hi,y:n.y*Hi,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=idt(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*vl,y:n.y*vl,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?zse(e,!0,n):(n&&!s&&delete n.z,n)}var Gse=ou("WGS84");function Lj(t,e,n,r){var i,s,o;return Array.isArray(n)?(i=RN(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=RN(t,e,n,r),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=n[a]}),s)}function hC(t){return t instanceof ou?t:typeof t=="object"&&"oProj"in t?t.oProj:ou(t)}function ldt(t,e,n){var r,i,s=!1,o;return typeof e>"u"?(i=hC(t),r=Gse,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=hC(t),r=Gse,s=!0),r||(r=hC(t)),i||(i=hC(e)),n?Lj(r,i,n):(o={forward:function(a,l){return Lj(r,i,a,l)},inverse:function(a,l){return Lj(i,r,a,l)}},s&&(o.oProj=i),o)}var Bse=6,l2e="AJSAJS",c2e="AFAFAF",Nx=65,Ja=73,$c=79,FS=86,VS=90;const cdt={forward:u2e,inverse:udt,toPoint:h2e};function u2e(t,e){return e=e||5,fdt(hdt({lat:t[1],lon:t[0]}),e)}function udt(t){var e=NH(f2e(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function h2e(t){var e=NH(f2e(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Dj(t){return t*(Math.PI/180)}function Wse(t){return 180*(t/Math.PI)}function hdt(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,o,a,l,c,u,h,f,g=Dj(e),v=Dj(n),x,b;b=Math.floor((n+180)/6)+1,n===180&&(b=60),e>=56&&e<64&&n>=3&&n<12&&(b=32),e>=72&&e<84&&(n>=0&&n<9?b=31:n>=9&&n<21?b=33:n>=21&&n<33?b=35:n>=33&&n<42&&(b=37)),o=(b-1)*6-180+3,x=Dj(o),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(g)*Math.sin(g)),c=Math.tan(g)*Math.tan(g),u=a*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(v-x),f=r*((1-i/4-3*i*i/64-5*i*i*i/256)*g-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*g)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*g)-35*i*i*i/3072*Math.sin(6*g));var T=s*l*(h+(1-c+u)*h*h*h/6+(5-18*c+c*c+72*u-58*a)*h*h*h*h*h/120)+5e5,A=s*(f+l*Math.tan(g)*(h*h/2+(5-c+9*u+4*u*u)*h*h*h*h/24+(61-58*c+c*c+600*u-330*a)*h*h*h*h*h*h/720));return e<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(T),zoneNumber:b,zoneLetter:ddt(e)}}function NH(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,h,f,g,v,x,b,T,A,I=n-5e5,P=e;r<"N"&&(P-=1e7),b=(i-1)*6-180+3,l=a/(1-a),x=P/s,T=x/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),A=T+(3*c/2-27*c*c*c/32)*Math.sin(2*T)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*T)+151*c*c*c/96*Math.sin(6*T),u=o/Math.sqrt(1-a*Math.sin(A)*Math.sin(A)),h=Math.tan(A)*Math.tan(A),f=l*Math.cos(A)*Math.cos(A),g=o*(1-a)/Math.pow(1-a*Math.sin(A)*Math.sin(A),1.5),v=I/(u*s);var M=A-u*Math.tan(A)/g*(v*v/2-(5+3*h+10*f-4*f*f-9*l)*v*v*v*v/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*v*v*v*v*v*v/720);M=Wse(M);var F=(v-(1+2*h+f)*v*v*v/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*v*v*v*v*v/120)/Math.cos(A);F=b+Wse(F);var C;if(t.accuracy){var N=NH({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:N.lat,right:N.lon,bottom:M,left:F}}else C={lat:M,lon:F};return C}function ddt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function fdt(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+pdt(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function pdt(t,e,n){var r=d2e(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return mdt(i,s,r)}function d2e(t){var e=t%Bse;return e===0&&(e=Bse),e}function mdt(t,e,n){var r=n-1,i=l2e.charCodeAt(r),s=c2e.charCodeAt(r),o=i+t-1,a=s+e,l=!1;o>VS&&(o=o-VS+Nx-1,l=!0),(o===Ja||i<Ja&&o>Ja||(o>Ja||i<Ja)&&l)&&o++,(o===$c||i<$c&&o>$c||(o>$c||i<$c)&&l)&&(o++,o===Ja&&o++),o>VS&&(o=o-VS+Nx-1),a>FS?(a=a-FS+Nx-1,l=!0):l=!1,(a===Ja||s<Ja&&a>Ja||(a>Ja||s<Ja)&&l)&&a++,(a===$c||s<$c&&a>$c||(a>$c||s<$c)&&l)&&(a++,a===Ja&&a++),a>FS&&(a=a-FS+Nx-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function f2e(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=d2e(o),c=gdt(n.charAt(0),l),u=ydt(n.charAt(1),l);u<vdt(a);)u+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,g=0,v=0,x,b,T,A,I;return f>0&&(x=1e5/Math.pow(10,f),b=t.substring(s,s+f),g=parseFloat(b)*x,T=t.substring(s+f),v=parseFloat(T)*x),A=g+c,I=v+u,{easting:A,northing:I,zoneLetter:a,zoneNumber:o,accuracy:x}}function gdt(t,e){for(var n=l2e.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===Ja&&n++,n===$c&&n++,n>VS){if(i)throw"Bad character: "+t;n=Nx,i=!0}r+=1e5}return r}function ydt(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=c2e.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===Ja&&n++,n===$c&&n++,n>FS){if(i)throw"Bad character: "+t;n=Nx,i=!0}r+=1e5}return r}function vdt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function M2(t,e,n){if(!(this instanceof M2))return new M2(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}M2.fromMGRS=function(t){return new M2(h2e(t))};M2.prototype.toMGRS=function(t){return u2e([this.x,this.y],t)};var _dt=1,xdt=.25,Hse=.046875,qse=.01953125,Kse=.01068115234375,wdt=.75,bdt=.46875,Edt=.013020833333333334,Sdt=.007120768229166667,Tdt=.3645833333333333,kdt=.005696614583333333,Adt=.3076171875;function OH(t){var e=[];e[0]=_dt-t*(xdt+t*(Hse+t*(qse+t*Kse))),e[1]=t*(wdt-t*(Hse+t*(qse+t*Kse)));var n=t*t;return e[2]=n*(bdt-t*(Edt+t*Sdt)),n*=t,e[3]=n*(Tdt-t*kdt),e[4]=n*t*Adt,e}function vb(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var Idt=20;function LH(t,e,n){for(var r=1/(1-e),i=t,s=Idt;s;--s){var o=Math.sin(i),a=1-e*o*o;if(a=(vb(i,o,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<xt)return i}return i}function Pdt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=OH(this.es),this.ml0=vb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Rdt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s,o,a=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*r,h=Math.pow(u,2),f=this.ep2*Math.pow(l,2),g=Math.pow(f,2),v=Math.abs(l)>xt?Math.tan(n):0,x=Math.pow(v,2),b=Math.pow(x,2);i=1-this.es*Math.pow(a,2),u=u/Math.sqrt(i);var T=vb(n,a,l,this.en);s=this.a*(this.k0*u*(1+h/6*(1-x+f+h/20*(5-18*x+b+14*f-58*x*f+h/42*(61+179*b-b*x-479*x)))))+this.x0,o=this.a*(this.k0*(T-this.ml0+a*r*u/2*(1+h/12*(5-x+9*f+4*g+h/30*(61+b-58*x+270*f-330*x*f+h/56*(1385+543*b-b*x-3111*x))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<xt)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>xt)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=s,t.y=o,t}function Cdt(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=LH(e,this.es,this.en),Math.abs(n)<st){var h=Math.sin(n),f=Math.cos(n),g=Math.abs(f)>xt?Math.tan(n):0,v=this.ep2*Math.pow(f,2),x=Math.pow(v,2),b=Math.pow(g,2),T=Math.pow(b,2);e=1-this.es*Math.pow(h,2);var A=s*Math.sqrt(e)/this.k0,I=Math.pow(A,2);e=e*g,r=n-e*I/(1-this.es)*.5*(1-I/12*(5+3*b-9*v*b+v-4*x-I/30*(61+90*b-252*v*b+45*T+46*v-I/56*(1385+3633*b+4095*T+1574*T*b)))),i=Pt(this.long0+A*(1-I/6*(1+2*b+v-I/20*(5+28*b+24*T+8*v*b+6*v-I/42*(61+662*b+1320*T+720*T*b))))/f,this.over)}else r=st*OI(o),i=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,u=Math.cos(c);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&u===0?i=0:i=Pt(Math.atan2(l,u)+this.long0,this.over)}return t.x=i,t.y=r,t}var Mdt=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const a3={init:Pdt,forward:Rdt,inverse:Cdt,names:Mdt};function p2e(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function pl(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function Ndt(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function Odt(t){var e=Math.abs(t);return e=Ndt(e*(1+e/(pl(1,e)+1))),t<0?-e:e}function DH(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return e+o*Math.sin(2*e)}function Ldt(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return Math.sin(e)*o}function Ddt(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function m2e(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=p2e(n),o=Ddt(n),a=2*i*o,l=-2*r*s,c=t.length-1,u=t[c],h=0,f=0,g=0,v,x;--c>=0;)v=f,x=h,f=u,h=g,u=-v+a*f-l*h+t[c],g=-x+l*f+a*h;return a=r*o,l=i*s,[a*u-l*g,a*g+l*u]}function $dt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(a3.init.apply(this),this.forward=a3.forward,this.inverse=a3.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=DH(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Ldt(this.gtu,2*r))}function jdt(t){var e=Pt(t.x-this.long0,this.over),n=t.y;n=DH(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(s*i,pl(r,i*o)),e=Odt(Math.tan(e));var a=m2e(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function Fdt(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=m2e(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(p2e(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),c=Math.cos(e);n=Math.atan2(o*c,pl(l,c*a)),e=Math.atan2(l,c*a),r=Pt(e+this.long0,this.over),i=DH(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var Vdt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const l3={init:$dt,forward:jdt,inverse:Fdt,names:Vdt};function zdt(t,e){if(t===void 0){if(t=Math.floor((Pt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Udt="etmerc";function Gdt(){var t=zdt(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Hi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,l3.init.apply(this),this.forward=l3.forward,this.inverse=l3.inverse}var Bdt=["Universal Transverse Mercator System","utm"];const Wdt={init:Gdt,names:Bdt,dependsOn:Udt};function $H(t,e){return Math.pow((1-t)/(1+t),e)}var Hdt=20;function qdt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Mr)/(Math.pow(Math.tan(.5*this.lat0+Mr),this.C)*$H(this.e*t,this.ratexp))}function Kdt(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Mr),this.C)*$H(this.e*Math.sin(n),this.ratexp))-st,t.x=this.C*e,t}function Ydt(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+Mr)/this.K,1/this.C),s=Hdt;s>0&&(r=2*Math.atan(i*$H(this.e*Math.sin(t.y),-.5*this.e))-st,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}const jH={init:qdt,forward:Kdt,inverse:Ydt};function Xdt(){jH.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Zdt(t){var e,n,r,i;return t.x=Pt(t.x-this.long0,this.over),jH.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Jdt(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=pl(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,jH.inverse.apply(this,[t]),t.x=Pt(t.x+this.long0,this.over),t}var Qdt=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const eft={init:Xdt,forward:Zdt,inverse:Jdt,names:Qdt};function FH(t,e,n){return e*=n,Math.tan(.5*(st+t))*Math.pow((1-e)/(1+e),.5*n)}function tft(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=xt&&(this.k0=.5*(1+OI(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=xt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=xt&&Math.abs(Math.cos(this.lat_ts))>xt&&(this.k0=.5*this.cons*Ld(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/oh(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ld(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(FH(this.lat0,this.sinlat0,this.e))-st,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function nft(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,o,a,l,c,u,h=Pt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=xt&&Math.abs(n+this.lat0)<=xt?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(h)),t.x=this.a*s*i*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(h))+this.y0,t):(o=2*Math.atan(FH(n,r,this.e))-st,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=xt?(c=oh(this.e,n*this.con,this.con*r),u=2*this.a*this.k0*c/this.cons,t.x=this.x0+u*Math.sin(e-this.long0),t.y=this.y0-this.con*u*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<xt?(s=2*this.a*this.k0/(1+l*Math.cos(h)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),t.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),t.x=s*l*Math.sin(h)+this.x0,t))}function rft(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=xt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<xt?this.lat0>0?e=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=Pt(this.long0+Math.atan2(t.x,t.y),this.over):e=Pt(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=xt){if(o<=xt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*uA(this.e,r),e=this.con*Pt(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=xt?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=Pt(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*uA(this.e,Math.tan(.5*(st+s)));return t.x=e,t.y=n,t}var ift=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const sft={init:tft,forward:nft,inverse:rft,names:ift,ssfn_:FH};function oft(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function aft(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function lft(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t}var cft=["somerc"];const uft={init:oft,forward:aft,inverse:lft,names:cft};var ux=1e-7;function hft(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(r2e(n))!==-1}function dft(){var t,e,n,r,i,s,o,a,l,c,u=0,h,f=0,g=0,v=0,x=0,b=0,T=0;this.no_off=hft(this),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var I=!1;if("rectified_grid_angle"in this&&(I=!0),A&&(T=this.alpha),I&&(u=this.rectified_grid_angle),A||I)f=this.longc;else if(g=this.long1,x=this.lat1,v=this.long2,b=this.lat2,Math.abs(x-b)<=ux||(t=Math.abs(x))<=ux||Math.abs(t-st)<=ux||Math.abs(Math.abs(this.lat0)-st)<=ux||Math.abs(Math.abs(b)-st)<=ux)throw new Error;var P=1-this.es;e=Math.sqrt(P),Math.abs(this.lat0)>xt?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(oh(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),A||I?(A?(h=Math.asin(Math.sin(T)/r),I||(u=T)):(h=u,T=Math.asin(r*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(oh(this.e,x,Math.sin(x)),this.B),o=Math.pow(oh(this.e,b,Math.sin(b)),this.B),i=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),t=g-v,t<-Math.PI?v-=lA:t>Math.PI&&(v+=lA),this.lam0=Pt(.5*(g+v)-Math.atan(c*Math.tan(.5*this.B*(g-v))/l)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*Pt(g-this.lam0,this.over))/(i-1/i)),u=T=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Mr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Mr+i))}function fft(t){var e={},n,r,i,s,o,a,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-st)>xt){if(o=this.E/Math.pow(oh(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<xt)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*t.x),Math.abs(a)<ux?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,a)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function pft(t){var e,n,r,i,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<xt)l.x=0,l.y=a<0?-st:st;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=uA(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var mft=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const gft={init:dft,forward:fft,inverse:pft,names:mft};function yft(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<xt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Ld(this.e,e,n),i=oh(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Ld(this.e,s,o),l=oh(this.e,this.lat2,s),c=Math.abs(Math.abs(this.lat0)-st)<xt?0:oh(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>xt?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function vft(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=xt&&(n=OI(n)*(st-2*xt));var r=Math.abs(Math.abs(n)-st),i,s;if(r>xt)i=oh(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var o=this.ns*Pt(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t}function _ft(t){var e,n,r,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=uA(this.e,r),i===-9999)return null}else i=-st;return s=Pt(l/this.ns+this.long0,this.over),t.x=s,t.y=i,t}var xft=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const wft={init:yft,forward:vft,inverse:_ft,names:xft};function bft(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Eft(t){var e,n,r,i,s,o,a,l=t.x,c=t.y,u=Pt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Sft(t){var e,n,r,i,s,o,a,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1;while(l===0&&u<15);return u>=15?null:t}var Tft=["Krovak","krovak"];const kft={init:bft,forward:Eft,inverse:Sft,names:Tft};function Oa(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function LI(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function DI(t){return .375*t*(1+.25*t*(1+.46875*t))}function $I(t){return .05859375*t*t*(1+.75*t)}function jI(t){return t*t*t*(35/3072)}function VH(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function s0(t){return Math.abs(t)<st?t:t-OI(t)*Math.PI}function CN(t,e,n,r,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function Aft(){this.sphere||(this.e0=LI(this.es),this.e1=DI(this.es),this.e2=$I(this.es),this.e3=jI(this.es),this.ml0=this.a*Oa(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ift(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=VH(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es),f=this.a*Oa(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=f-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Pft(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+n,a=CN(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-st)<=xt)return t.x=this.long0,t.y=st,n<0&&(t.y*=-1),t;var l=VH(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=e*this.a/l,f=h*h;r=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),i=h*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(a)}return t.x=Pt(i+this.long0,this.over),t.y=s0(r),t}var Rft=["Cassini","Cassini_Soldner","cass"];const Cft={init:Aft,forward:Ift,inverse:Pft,names:Rft};function Eg(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var uz=1,hz=2,dz=3,c3=4;function Mft(){var t=Math.abs(this.lat0);if(Math.abs(t-st)<xt?this.mode=this.lat0<0?uz:hz:Math.abs(t)<xt?this.mode=dz:this.mode=c3,this.es>0){var e;switch(this.qp=Eg(this.e,1),this.mmf=.5/(1-this.es),this.apa=zft(this.es),this.mode){case hz:this.dd=1;break;case uz:this.dd=1;break;case dz:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case c3:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Eg(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===c3&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Nft(t){var e,n,r,i,s,o,a,l,c,u,h=t.x,f=t.y;if(h=Pt(h-this.long0,this.over),this.sphere){if(s=Math.sin(f),u=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*s+this.cosph0*u*r,n<=xt)return null;n=Math.sqrt(2/n),e=n*u*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<xt)return null;n=Mr-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(f),o=Eg(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=st+f,o=this.qp-o;break;case this.S_POLE:c=f-st,o=this.qp+o;break}if(Math.abs(c)<xt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):n=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function Oft(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,o,a,l,c;if(this.sphere){var u=0,h,f=0;if(h=Math.sqrt(e*e+n*n),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=xt?0:Math.asin(n*f/h),e*=f,n=u*h;break;case this.OBLIQ:i=Math.abs(h)<=xt?this.lat0:Math.asin(u*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(u-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:n=-n,i=st-i;break;case this.S_POLE:i-=st;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<xt)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+n*o*this.cosb1/l,a=this.qp*c,n=l*this.cosb1*s-n*this.sinb1*o):(c=n*o/l,a=this.qp*c,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=Uft(Math.asin(c),this.apa)}return t.x=Pt(this.long0+r,this.over),t.y=i,t}var Lft=.3333333333333333,Dft=.17222222222222222,$ft=.10257936507936508,jft=.06388888888888888,Fft=.0664021164021164,Vft=.016415012942191543;function zft(t){var e,n=[];return n[0]=t*Lft,e=t*t,n[0]+=e*Dft,n[1]=e*jft,e*=t,n[0]+=e*$ft,n[1]+=e*Fft,n[2]=e*Vft,n}function Uft(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var Gft=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Bft={init:Mft,forward:Nft,inverse:Oft,names:Gft,S_POLE:uz,N_POLE:hz,EQUIT:dz,OBLIQ:c3};function Wg(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Wft(){Math.abs(this.lat1+this.lat2)<xt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ld(this.e3,this.sin_po,this.cos_po),this.qs1=Eg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ld(this.e3,this.sin_po,this.cos_po),this.qs2=Eg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Eg(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>xt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Hft(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Eg(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Pt(e-this.long0,this.over),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function qft(t){var e,n,r,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),s=Pt(i/this.ns0+this.long0,this.over),t.x=s,t.y=o,t}function Kft(t,e){var n,r,i,s,o,a=Wg(.5*e);if(t<xt)return a;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(a),r=Math.cos(a),i=t*n,s=1-i*i,o=.5*s*s/r*(e/(1-l)-n/s+.5/t*Math.log((1-i)/(1+i))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var Yft=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Xft={init:Wft,forward:Hft,inverse:qft,names:Yft,phi1z:Kft};function Zft(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Jft(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,o>0||Math.abs(o)<=xt?(a=this.x0+this.a*s*n*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function Qft(t){var e,n,r,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),o=Wg(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=Pt(this.long0+s,this.over)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var ept=["gnom"];const tpt={init:Zft,forward:Jft,inverse:Qft,names:ept};function npt(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*st:st;for(var r=Math.asin(.5*e),i,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=t*s,i=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function rpt(){this.sphere||(this.k0=Ld(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function ipt(t){var e=t.x,n=t.y,r,i,s=Pt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Eg(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=i,t}function spt(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Pt(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=npt(this.e,2*t.y*this.k0/this.a),e=Pt(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var opt=["cea"];const apt={init:rpt,forward:ipt,inverse:spt,names:opt};function lpt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function cpt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=s0(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function upt(t){var e=t.x,n=t.y;return t.x=Pt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=s0(this.lat0+(n-this.y0)/this.a),t}var hpt=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const dpt={init:lpt,forward:cpt,inverse:upt,names:hpt};var Yse=20;function fpt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=LI(this.es),this.e1=DI(this.es),this.e2=$I(this.es),this.e3=jI(this.es),this.ml0=this.a*Oa(this.e0,this.e1,this.e2,this.e3,this.lat0)}function ppt(t){var e=t.x,n=t.y,r,i,s,o=Pt(e-this.long0,this.over);if(s=o*Math.sin(n),this.sphere)Math.abs(n)<=xt?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(s0(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=xt)r=this.a*o,i=-1*this.ml0;else{var a=VH(this.a,this.e,Math.sin(n))/Math.tan(n);r=a*Math.sin(s),i=this.a*Oa(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function mpt(t){var e,n,r,i,s,o,a,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=xt)e=Pt(r/this.a+this.long0,this.over),n=0;else{o=this.lat0+i/this.a,a=r*r/this.a/this.a+o*o,l=o;var u;for(s=Yse;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=xt){n=l;break}e=Pt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=xt)n=0,e=Pt(this.long0+r/this.a,this.over);else{o=(this.ml0+i)/this.a,a=r*r/this.a/this.a+o*o,l=o;var h,f,g,v,x;for(s=Yse;s;--s)if(x=this.e*Math.sin(l),h=Math.sqrt(1-x*x)*Math.tan(l),f=this.a*Oa(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),v=f/this.a,c=(o*(h*v+1)-v-.5*h*(v*v+a))/(this.es*Math.sin(2*l)*(v*v+a-2*o*v)/(4*h)+(o-v)*(h*g-2/Math.sin(2*l))-g),l-=c,Math.abs(c)<=xt){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Pt(this.long0+Math.asin(r*h/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var gpt=["Polyconic","American_Polyconic","poly"];const ypt={init:fpt,forward:ppt,inverse:mpt,names:gpt};function vpt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function _pt(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,o=i/LT*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var u=c,h=a,f=1,g=0,v,x,b=0,T=0;for(e=1;e<=6;e++)v=f*u-g*h,x=g*u+f*h,f=v,g=x,b=b+this.B_re[e]*f-this.B_im[e]*g,T=T+this.B_im[e]*f+this.B_re[e]*g;return t.x=T*this.a+this.x0,t.y=b*this.a+this.y0,t}function xpt(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,o=s/this.a,a=i/this.a,l=1,c=0,u,h,f=0,g=0;for(e=1;e<=6;e++)u=l*o-c*a,h=c*o+l*a,l=u,c=h,f=f+this.C_re[e]*l-this.C_im[e]*c,g=g+this.C_im[e]*l+this.C_re[e]*c;for(var v=0;v<this.iterations;v++){var x=f,b=g,T,A,I=o,P=a;for(e=2;e<=6;e++)T=x*f-b*g,A=b*f+x*g,x=T,b=A,I=I+(e-1)*(this.B_re[e]*x-this.B_im[e]*b),P=P+(e-1)*(this.B_im[e]*x+this.B_re[e]*b);x=1,b=0;var M=this.B_re[1],F=this.B_im[1];for(e=2;e<=6;e++)T=x*f-b*g,A=b*f+x*g,x=T,b=A,M=M+e*(this.B_re[e]*x-this.B_im[e]*b),F=F+e*(this.B_im[e]*x+this.B_re[e]*b);var C=M*M+F*F;f=(I*M+P*F)/C,g=(P*M-I*F)/C}var N=f,O=g,j=1,V=0;for(e=1;e<=9;e++)j=j*N,V=V+this.D[e]*j;var G=this.lat0+V*LT*1e5,U=this.long0+O;return t.x=U,t.y=G,t}var wpt=["New_Zealand_Map_Grid","nzmg"];const bpt={init:vpt,forward:_pt,inverse:xpt,names:wpt};function Ept(){}function Spt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function Tpt(t){t.x-=this.x0,t.y-=this.y0;var e=Pt(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var kpt=["Miller_Cylindrical","mill"];const Apt={init:Ept,forward:Spt,inverse:Tpt,names:kpt};var Ipt=20;function Ppt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=OH(this.es)}function Rpt(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),o=Ipt;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<xt)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*vb(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function Cpt(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Wg((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Wg(Math.sin(e)/this.n)),r=Pt(r+this.long0,this.over),e=s0(e)):(e=LH(t.y/this.a,this.es,this.en),i=Math.abs(e),i<st?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Pt(n,this.over)):i-xt<st&&(r=this.long0)),t.x=r,t.y=e,t}var Mpt=["Sinusoidal","sinu"];const Npt={init:Ppt,forward:Rpt,inverse:Cpt,names:Mpt};function Opt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Lpt(t){for(var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=n,s=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<xt)break}i/=2,Math.PI/2-Math.abs(n)<xt&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t}function Dpt(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Pt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var $pt=["Mollweide","moll"];const jpt={init:Opt,forward:Lpt,inverse:Dpt,names:$pt};function Fpt(){Math.abs(this.lat1+this.lat2)<xt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=LI(this.es),this.e1=DI(this.es),this.e2=$I(this.es),this.e3=jI(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Ld(this.e,this.sin_phi,this.cos_phi),this.ml1=Oa(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<xt?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Ld(this.e,this.sin_phi,this.cos_phi),this.ml2=Oa(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Oa(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Vpt(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Oa(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*Pt(e-this.long0,this.over),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return t.x=o,t.y=a,t}function zpt(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Pt(this.long0+s/this.ns,this.over),r=s0(this.g-n/this.a),t.x=i,t.y=r,t;var o=this.g-n/this.a;return r=CN(o,this.e0,this.e1,this.e2,this.e3),i=Pt(this.long0+s/this.ns,this.over),t.x=i,t.y=r,t}var Upt=["Equidistant_Conic","eqdc"];const Gpt={init:Fpt,forward:Vpt,inverse:zpt,names:Upt};function Bpt(){this.R=this.a}function Wpt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s;Math.abs(n)<=xt&&(i=this.x0+this.R*r,s=this.y0);var o=Wg(2*Math.abs(n/Math.PI));(Math.abs(r)<=xt||Math.abs(Math.abs(n)-st)<=xt)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),f=h*h,g=h*(2/c-1),v=g*g,x=Math.PI*this.R*(a*(h-v)+Math.sqrt(l*(h-v)*(h-v)-(v+l)*(f-v)))/(v+l);r<0&&(x=-x),i=this.x0+x;var b=l+h;return x=Math.PI*this.R*(g*b-a*Math.sqrt((v+l)*(l+1)-b*b))/(v+l),n>=0?s=this.y0+x:s=this.y0-x,t.x=i,t.y=s,t}function Hpt(t){var e,n,r,i,s,o,a,l,c,u,h,f,g;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,s=r*r+i*i,o=-Math.abs(i)*(1+s),a=o-2*i*i+r*r,l=-2*o+1+2*i*i+s*s,g=i*i/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*g/c/u,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:n=-(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<xt?e=this.long0:e=Pt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),t.x=e,t.y=n,t}var qpt=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Kpt={init:Bpt,forward:Wpt,inverse:Hpt,names:qpt};function Ypt(t,e,n,r,i,s){const o=r-e,a=Math.atan((1-s)*Math.tan(t)),l=Math.atan((1-s)*Math.tan(n)),c=Math.sin(a),u=Math.cos(a),h=Math.sin(l),f=Math.cos(l);let g=o,v,x=100,b,T,A,I,P,M,F,C,N,O,j,V,G,U;do{if(b=Math.sin(g),T=Math.cos(g),A=Math.sqrt(f*b*(f*b)+(u*h-c*f*T)*(u*h-c*f*T)),A===0)return{azi1:0,s12:0};I=c*h+u*f*T,P=Math.atan2(A,I),M=u*f*b/A,F=1-M*M,C=F!==0?I-2*c*h/F:0,N=s/16*F*(4+s*(4-3*F)),v=g,g=o+(1-N)*s*M*(P+N*A*(C+N*I*(-1+2*C*C)))}while(Math.abs(g-v)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:(O=F*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),j=1+O/16384*(4096+O*(-768+O*(320-175*O))),V=O/1024*(256+O*(-128+O*(74-47*O))),G=V*A*(C+V/4*(I*(-1+2*C*C)-V/6*C*(-3+4*A*A)*(-3+4*C*C))),U=i*(1-s)*j*(P-G),{azi1:Math.atan2(f*b,u*h-c*f*T),s12:U})}function Xpt(t,e,n,r,i,s){const o=Math.atan((1-s)*Math.tan(t)),a=Math.sin(o),l=Math.cos(o),c=Math.sin(n),u=Math.cos(n),h=Math.atan2(a,l*u),f=l*c,g=1-f*f,v=g*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),x=1+v/16384*(4096+v*(-768+v*(320-175*v))),b=v/1024*(256+v*(-128+v*(74-47*v)));let T=r/(i*(1-s)*x),A,I=100,P,M,F,C;do P=Math.cos(2*h+T),M=Math.sin(T),F=Math.cos(T),C=b*M*(P+b/4*(F*(-1+2*P*P)-b/6*P*(-3+4*M*M)*(-3+4*P*P))),A=T,T=r/(i*(1-s)*x)+C;while(Math.abs(T-A)>1e-12&&--I>0);if(I===0)return{lat2:NaN,lon2:NaN};const N=a*M-l*F*u,O=Math.atan2(a*F+l*M*u,(1-s)*Math.sqrt(f*f+N*N)),j=Math.atan2(M*c,l*F-a*M*u),V=s/16*g*(4+s*(4-3*g)),G=j-(1-V)*s*f*(T+V*M*(P+V*F*(-1+2*P*P))),U=e+G;return{lat2:O,lon2:U}}function Zpt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Jpt(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=Pt(e-this.long0,this.over),o,a,l,c,u,h,f,g,v,x,b;return this.sphere?Math.abs(this.sin_p12-1)<=xt?(t.x=this.x0+this.a*(st-n)*Math.sin(s),t.y=this.y0-this.a*(st-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=xt?(t.x=this.x0+this.a*(st+n)*Math.sin(s),t.y=this.y0+this.a*(st+n)*Math.cos(s),t):(v=this.sin_p12*r+this.cos_p12*i*Math.cos(s),f=Math.acos(v),g=f?f/Math.sin(f):1,t.x=this.x0+this.a*g*i*Math.sin(s),t.y=this.y0+this.a*g*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(o=LI(this.es),a=DI(this.es),l=$I(this.es),c=jI(this.es),Math.abs(this.sin_p12-1)<=xt?(u=this.a*Oa(o,a,l,c,st),h=this.a*Oa(o,a,l,c,n),t.x=this.x0+(u-h)*Math.sin(s),t.y=this.y0-(u-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=xt?(u=this.a*Oa(o,a,l,c,st),h=this.a*Oa(o,a,l,c,n),t.x=this.x0+(u+h)*Math.sin(s),t.y=this.y0+(u+h)*Math.cos(s),t):Math.abs(e)<xt&&Math.abs(n-this.lat0)<xt?(t.x=t.y=0,t):(x=Ypt(this.lat0,this.long0,n,e,this.a,this.f),b=x.azi1,t.x=x.s12*Math.sin(b),t.y=x.s12*Math.cos(b),t))}function Qpt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o,a,l,c,u,h,f,g,v,x,b;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*st*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=xt?o=this.lat0:(o=Wg(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-st,Math.abs(a)<=xt?this.lat0>=0?s=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):s=Pt(this.long0-Math.atan2(-t.x,t.y),this.over):s=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=s,t.y=o,t)):(l=LI(this.es),c=DI(this.es),u=$I(this.es),h=jI(this.es),Math.abs(this.sin_p12-1)<=xt?(f=this.a*Oa(l,c,u,h,st),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f-e,o=CN(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=xt?(f=this.a*Oa(l,c,u,h,st),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-f,o=CN(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,t.y),this.over),t.x=s,t.y=o,t):(v=Math.atan2(t.x,t.y),x=Math.sqrt(t.x*t.x+t.y*t.y),b=Xpt(this.lat0,this.long0,v,x,this.a,this.f),t.x=b.lon2,t.y=b.lat2,t))}var emt=["Azimuthal_Equidistant","aeqd"];const tmt={init:Zpt,forward:Jpt,inverse:Qpt,names:emt};function nmt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function rmt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,(o>0||Math.abs(o)<=xt)&&(a=this.a*s*n*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function imt(t){var e,n,r,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Wg(e/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=xt?(a=this.lat0,t.x=o,t.y=a,t):(a=Wg(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-st,Math.abs(s)<=xt?(this.lat0>=0?o=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):o=Pt(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=a,t):(o=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=o,t.y=a,t))}var smt=["ortho"];const omt={init:nmt,forward:rmt,inverse:imt,names:smt};var Mi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Nr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function amt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=st-Mr/2?this.face=Mi.TOP:this.lat0<=-(st-Mr/2)?this.face=Mi.BOTTOM:Math.abs(this.long0)<=Mr?this.face=Mi.FRONT:Math.abs(this.long0)<=st+Mr?this.face=this.long0>0?Mi.RIGHT:Mi.LEFT:this.face=Mi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function lmt(t){var e={x:0,y:0},n,r,i,s,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===Mi.TOP)s=st-n,r>=Mr&&r<=st+Mr?(l.value=Nr.AREA_0,i=r-st):r>st+Mr||r<=-(st+Mr)?(l.value=Nr.AREA_1,i=r>0?r-us:r+us):r>-(st+Mr)&&r<=-Mr?(l.value=Nr.AREA_2,i=r+st):(l.value=Nr.AREA_3,i=r);else if(this.face===Mi.BOTTOM)s=st+n,r>=Mr&&r<=st+Mr?(l.value=Nr.AREA_0,i=-r+st):r<Mr&&r>=-Mr?(l.value=Nr.AREA_1,i=-r):r<-Mr&&r>=-(st+Mr)?(l.value=Nr.AREA_2,i=-r-st):(l.value=Nr.AREA_3,i=r>0?-r+us:-r-us);else{var c,u,h,f,g,v,x;this.face===Mi.RIGHT?r=hw(r,+st):this.face===Mi.BACK?r=hw(r,+us):this.face===Mi.LEFT&&(r=hw(r,-st)),f=Math.sin(n),g=Math.cos(n),v=Math.sin(r),x=Math.cos(r),c=g*x,u=g*v,h=f,this.face===Mi.FRONT?(s=Math.acos(c),i=dC(s,h,u,l)):this.face===Mi.RIGHT?(s=Math.acos(u),i=dC(s,h,-c,l)):this.face===Mi.BACK?(s=Math.acos(-c),i=dC(s,h,-u,l)):this.face===Mi.LEFT?(s=Math.acos(-u),i=dC(s,h,c,l)):(s=i=0,l.value=Nr.AREA_0)}return a=Math.atan(12/us*(i+Math.acos(Math.sin(i)*Math.cos(Mr))-st)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Nr.AREA_1?a+=st:l.value===Nr.AREA_2?a+=us:l.value===Nr.AREA_3&&(a+=1.5*us),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function cmt(t){var e={lam:0,phi:0},n,r,i,s,o,a,l,c,u,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=Nr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=Nr.AREA_1,n-=st):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=Nr.AREA_2,n=n<0?n+us:n-us):(h.value=Nr.AREA_3,n+=st),u=us/12*Math.tan(n),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),i=Math.cos(n),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Mi.TOP)c=Math.acos(l),e.phi=st-c,h.value===Nr.AREA_0?e.lam=a+st:h.value===Nr.AREA_1?e.lam=a<0?a+us:a-us:h.value===Nr.AREA_2?e.lam=a-st:e.lam=a;else if(this.face===Mi.BOTTOM)c=Math.acos(l),e.phi=c-st,h.value===Nr.AREA_0?e.lam=-a+st:h.value===Nr.AREA_1?e.lam=-a:h.value===Nr.AREA_2?e.lam=-a-st:e.lam=a<0?-a-us:-a+us;else{var f,g,v;f=l,u=f*f,u>=1?v=0:v=Math.sqrt(1-u)*Math.sin(a),u+=v*v,u>=1?g=0:g=Math.sqrt(1-u),h.value===Nr.AREA_1?(u=g,g=-v,v=u):h.value===Nr.AREA_2?(g=-g,v=-v):h.value===Nr.AREA_3&&(u=g,g=v,v=-u),this.face===Mi.RIGHT?(u=f,f=-g,g=u):this.face===Mi.BACK?(f=-f,g=-g):this.face===Mi.LEFT&&(u=f,f=g,g=-u),e.phi=Math.acos(-v)-st,e.lam=Math.atan2(g,f),this.face===Mi.RIGHT?e.lam=hw(e.lam,-st):this.face===Mi.BACK?e.lam=hw(e.lam,-us):this.face===Mi.LEFT&&(e.lam=hw(e.lam,+st))}if(this.es!==0){var x,b,T;x=e.phi<0?1:0,b=Math.tan(e.phi),T=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function dC(t,e,n,r){var i;return t<xt?(r.value=Nr.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Mr?r.value=Nr.AREA_0:i>Mr&&i<=st+Mr?(r.value=Nr.AREA_1,i-=st):i>st+Mr||i<=-(st+Mr)?(r.value=Nr.AREA_2,i=i>=0?i-us:i+us):(r.value=Nr.AREA_3,i+=st)),i}function hw(t,e){var n=t+e;return n<-us?n+=lA:n>+us&&(n-=lA),n}var umt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const hmt={init:amt,forward:lmt,inverse:cmt,names:umt};var fz=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],zS=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],g2e=.8487,y2e=1.3523,v2e=vl/5,dmt=1/v2e,Ox=18,MN=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},fmt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function pmt(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function mmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function gmt(t){var e=Pt(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*v2e);r<0?r=0:r>=Ox&&(r=Ox-1),n=vl*(n-dmt*r);var i={x:MN(fz[r],n)*e,y:MN(zS[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*g2e+this.x0,i.y=i.y*this.a*y2e+this.y0,i}function ymt(t){var e={x:(t.x-this.x0)/(this.a*g2e),y:Math.abs(t.y-this.y0)/(this.a*y2e)};if(e.y>=1)e.x/=fz[Ox][0],e.y=t.y<0?-st:st;else{var n=Math.floor(e.y*Ox);for(n<0?n=0:n>=Ox&&(n=Ox-1);;)if(zS[n][0]>e.y)--n;else if(zS[n+1][0]<=e.y)++n;else break;var r=zS[n],i=5*(e.y-r[0])/(zS[n+1][0]-r[0]);i=pmt(function(s){return(MN(r,s)-e.y)/fmt(r,s)},i,xt,100),e.x/=MN(fz[n],i),e.y=(5*n+i)*Hi,t.y<0&&(e.y=-e.y)}return e.x=Pt(e.x+this.long0,this.over),e}var vmt=["Robinson","robin"];const _mt={init:mmt,forward:gmt,inverse:ymt,names:vmt};function xmt(){this.name="geocent"}function wmt(t){var e=s2e(t,this.es,this.a);return e}function bmt(t){var e=o2e(t,this.es,this.a,this.b);return e}var Emt=["Geocentric","geocentric","geocent","Geocent"];const Smt={init:xmt,forward:wmt,inverse:bmt,names:Emt};var ra={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},WE={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Tmt(){if(Object.keys(WE).forEach((function(n){if(typeof this[n]>"u")this[n]=WE[n].def;else{if(WE[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);WE[n].num&&(this[n]=parseFloat(this[n]))}WE[n].degrees&&(this[n]=this[n]*Hi)}).bind(this)),Math.abs(Math.abs(this.lat0)-st)<xt?this.mode=this.lat0<0?ra.S_POLE:ra.N_POLE:Math.abs(this.lat0)<xt?this.mode=ra.EQUIT:(this.mode=ra.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function kmt(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case ra.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case ra.EQUIT:s=n*r;break;case ra.S_POLE:s=-e;break;case ra.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case ra.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case ra.EQUIT:s*=e;break;case ra.N_POLE:s*=-(n*r);break;case ra.S_POLE:s*=n*r;break}var o,a;return o=s*this.cg+i*this.sg,a=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*a,s=o*a,t.x=i*this.a,t.y=s*this.a,t}function Amt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=pl(t.x,t.y);if(Math.abs(s)<xt)e.x=0,e.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case ra.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case ra.EQUIT:e.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case ra.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case ra.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Imt=["Tilted_Perspective","tpers"];const Pmt={init:Tmt,forward:kmt,inverse:Amt,names:Imt};function Rmt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Cmt(t){var e=t.x,n=t.y,r,i,s,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/pl(this.radius_p*Math.cos(n),Math.sin(n));if(i=a*Math.cos(e)*Math.cos(n),s=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-i)*i-s*s-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/pl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/pl(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/pl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/pl(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Mmt(t){var e=-1,n=0,r=0,i,s,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*pl(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*pl(1,n));var l=r/this.radius_p;if(i=n*n+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var Nmt=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Omt={init:Rmt,forward:Cmt,inverse:Mmt,names:Nmt};var DT=1.340264,$T=-.081106,jT=893e-6,FT=.003796,NN=Math.sqrt(3)/2;function Lmt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function Dmt(t){var e=Pt(t.x-this.long0,this.over),n=t.y,r=Math.asin(NN*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(NN*(DT+3*$T*i+s*(7*jT+9*FT*i))),t.y=r*(DT+$T*i+s*(jT+FT*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function $mt(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,o,a,l,c;for(c=0;c<n&&(i=r*r,s=i*i*i,o=r*(DT+$T*i+s*(jT+FT*i))-t.y,a=DT+3*$T*i+s*(7*jT+9*FT*i),r-=l=o/a,!(Math.abs(l)<e));++c);return i=r*r,s=i*i*i,t.x=NN*t.x*(DT+3*$T*i+s*(7*jT+9*FT*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/NN),t.x=Pt(t.x+this.long0,this.over),t}var jmt=["eqearth","Equal Earth","Equal_Earth"];const Fmt={init:Lmt,forward:Dmt,inverse:$mt,names:jmt};var hA=1e-10;function Vmt(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<hA)throw new Error;this.es?(this.en=OH(this.es),this.m1=vb(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Umt,this.forward=zmt):(Math.abs(this.phi1)+hA>=st?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Bmt,this.forward=Gmt)}function zmt(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i,s;return r=this.am1+this.m1-vb(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Umt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=pl(t.x,t.y=this.am1-t.y),i=LH(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<st)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-st)<=hA)r=0;else throw new Error;return t.x=Pt(r+(this.long0||0),this.over),t.y=s0(i),t}function Gmt(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>hA?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Bmt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=pl(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>st)throw new Error;return Math.abs(Math.abs(n)-st)<=hA?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Pt(e+(this.long0||0),this.over),t.y=s0(n),t}var Wmt=["bonne","Bonne (Werner lat_1=90)"];const Hmt={init:Vmt,names:Wmt},Xse={OBLIQUE:{forward:Zmt,inverse:Qmt},TRANSVERSE:{forward:Jmt,inverse:egt}},ON={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function qmt(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=t2e.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=ou(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(ON),i=a=>{if(typeof this[a]>"u")return;const l=parseFloat(this[a])*Hi;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){const l=r[a],c=ON[l],u=Object.entries(c);if(u.some(([f])=>typeof this[f]<"u")){n=c;for(let f=0;f<u.length;f++){const[g,v]=u[f],x=i(g);if(typeof x>"u")throw new Error("Missing parameter: "+g+".");this[v]=x}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:o}=Xmt(this,n);this.lamp=s,Math.abs(o)>xt?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=Xse.OBLIQUE):this.projectionType=Xse.TRANSVERSE}function Kmt(t){return this.projectionType.forward(this,t)}function Ymt(t){return this.projectionType.inverse(this,t)}function Xmt(t,e){let n,r;if(e===ON.ROTATE){let i=t.oLongC,s=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(s)-st)<=xt)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(o))}else if(e===ON.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,s=t.oLat1,o=t.oLong2,a=t.oLat2,l=Math.abs(s);if(Math.abs(s)>st-xt)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(a)>st-xt)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(s-a)<xt)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<xt)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(a)*Math.cos(i)-Math.sin(s)*Math.cos(a)*Math.cos(o),Math.sin(s)*Math.cos(a)*Math.sin(o)-Math.cos(s)*Math.sin(a)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:n}}function Zmt(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),s=Math.sin(r),o=Math.cos(r);e.x=Pt(Math.atan2(o*Math.sin(n),t.sphip*o*i+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*o*i);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=vl,a.y*=vl),a}function Jmt(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),s=Math.cos(n);e.x=Pt(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*s);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=vl,o.y*=vl),o}function Qmt(t,e){t.isIdentity&&(e.x*=Hi,e.y*=Hi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const s=Math.cos(r),o=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),t.sphip*a*s-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*a*s)}return e.x=Pt(e.x+t.long0),e}function egt(t,e){t.isIdentity&&(e.x*=Hi,e.y*=Hi);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=t.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=Pt(e.x+t.long0),e}var tgt=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const ngt={init:qmt,forward:Kmt,inverse:Ymt,names:tgt};function rgt(t){t.Proj.projections.add(a3),t.Proj.projections.add(l3),t.Proj.projections.add(Wdt),t.Proj.projections.add(eft),t.Proj.projections.add(sft),t.Proj.projections.add(uft),t.Proj.projections.add(gft),t.Proj.projections.add(wft),t.Proj.projections.add(kft),t.Proj.projections.add(Cft),t.Proj.projections.add(Bft),t.Proj.projections.add(Xft),t.Proj.projections.add(tpt),t.Proj.projections.add(apt),t.Proj.projections.add(dpt),t.Proj.projections.add(ypt),t.Proj.projections.add(bpt),t.Proj.projections.add(Apt),t.Proj.projections.add(Npt),t.Proj.projections.add(jpt),t.Proj.projections.add(Gpt),t.Proj.projections.add(Kpt),t.Proj.projections.add(tmt),t.Proj.projections.add(omt),t.Proj.projections.add(hmt),t.Proj.projections.add(_mt),t.Proj.projections.add(Smt),t.Proj.projections.add(Pmt),t.Proj.projections.add(Omt),t.Proj.projections.add(Fmt),t.Proj.projections.add(Hmt),t.Proj.projections.add(ngt)}const ar=Object.assign(ldt,{defaultDatum:"WGS84",Proj:ou,WGS84:new ou("WGS84"),Point:M2,toPoint:a2e,defs:To,nadgrid:Bht,transform:RN,mgrs:cdt,version:"__VERSION__"});rgt(ar);class _2e{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Gr,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Jr(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Jr(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return xn()}readFeature(e,n){return xn()}readFeatures(e,n){return xn()}readGeometry(e,n){return xn()}readProjection(e){return xn()}writeFeature(e,n){return xn()}writeFeatures(e,n){return xn()}writeGeometry(e,n){return xn()}}function _h(t,e,n){const r=n?Jr(n.featureProjection):null,i=n?Jr(n.dataProjection):null;let s=t;if(r&&i&&!Hy(r,i)){e&&(s=t.clone());const o=e?r:i,a=e?i:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(QT(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const igt={Point:ts,LineString:Qi,Polygon:bl,MultiPoint:Zg,MultiLineString:uh,MultiPolygon:lp};function sgt(t,e,n){return Array.isArray(e[0])?(ele(t,0,e,n)||(t=t.slice(),E8(t,0,e,n)),t):(Jz(t,0,e,n)||(t=t.slice(),T3(t,0,e,n)),t)}function x2e(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(s=>x2e({...t,geometry:s})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=n.layout.length;return _h(new dl(r,r==="Polygon"?sgt(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function zH(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(i=>zH(i,e));return new tu(r)}const n=igt[t.type];return _h(new n(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class ogt extends _2e{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(fC(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(fC(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return xn()}readFeaturesFromObject(e,n){return xn()}readGeometry(e,n){return this.readGeometryFromObject(fC(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return xn()}readProjection(e){return this.readProjectionFromObject(fC(e))}readProjectionFromObject(e){return xn()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return xn()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return xn()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return xn()}}function fC(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class dL extends ogt{constructor(e){e=e||{},super(),this.dataProjection=Jr(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Jr(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=UH(r.geometry);if(this.featureClass===dl)return x2e({geometry:i,id:r.id,properties:r.properties},n);const s=new Gr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(zH(i,n)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,n){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,n)];return i.flat()}readGeometryFromObject(e,n){return agt(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=Jr(n.properties.name);else if(n.type==="EPSG")r=Jr("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=pz(o,n),delete s[e.getGeometryName()]),f1(s)||(r.properties=s),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return pz(e,this.adaptOptions(n))}}function UH(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=cgt(t);break}case"LineString":{n=ugt(t);break}case"Polygon":{n=pgt(t);break}case"MultiPoint":{n=dgt(t);break}case"MultiLineString":{n=hgt(t);break}case"MultiPolygon":{n=fgt(t);break}case"GeometryCollection":{n=lgt(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function agt(t,e){const n=UH(t);return zH(n,e)}function lgt(t,e){return t.geometries.map(function(r){return UH(r)})}function cgt(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:J1(e.length)}}function ugt(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:J1(e[0]?.length||2)}}function hgt(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,r=[],i=PA(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:J1(n)}}function dgt(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:J1(e[0]?.length||2)}}function fgt(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.[0].length||2,i=Rae(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:i,layout:J1(r)}}function pgt(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.length,i=PA(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:i,layout:J1(r)}}function pz(t,e){t=_h(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=xgt(t);break}case"LineString":{r=ggt(t);break}case"Polygon":{r=wgt(t,e);break}case"MultiPoint":{r=vgt(t);break}case"MultiLineString":{r=ygt(t);break}case"MultiPolygon":{r=_gt(t,e);break}case"GeometryCollection":{r=mgt(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function mgt(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return pz(r,e)})}}function ggt(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function ygt(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function vgt(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function _gt(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function xgt(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function wgt(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const LN="http://www.w3.org/2001/XMLSchema-instance";function dv(t,e){return _b().createElementNS(t,e)}function xh(t,e){return w2e(t,e,[]).join("")}function w2e(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)w2e(r,e,n)}return n}function Wf(t){return"documentElement"in t}function Hf(t){return new DOMParser().parseFromString(t,"application/xml")}function Zse(t,e){return(function(n,r){const i=t.call(e??this,n,r);if(i!==void 0){const s=r[r.length-1];Rr(s,i)}})}function Zu(t,e){return(function(n,r){const i=t.call(e??this,n,r);i!==void 0&&r[r.length-1].push(i)})}function GH(t,e){return(function(n,r){const i=t.call(this,n,r);i!==void 0&&(r[r.length-1]=i)})}function Qe(t,e,n){return(function(r,i){const s=t.call(this,r,i);if(s!==void 0){const o=i[i.length-1],a=e!==void 0?e:r.localName;o[a]=s}})}function pt(t,e){return(function(n,r,i){t.call(this,n,r,i),i[i.length-1].node.appendChild(n)})}function b2e(t,e){let n,r;return function(i,s,o){if(n===void 0){n={};const a={};a[i.localName]=t,n[i.namespaceURI]=a,r=wh(i.localName)}E2e(n,r,s,o)}}function wh(t,e){return(function(n,r,i){const o=r[r.length-1].node;let a=t;a===void 0&&(a=i);const l=o.namespaceURI;return dv(l,a)})}const ga=wh();function Tl(t,e){const n=e.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=t[e[i]];return r}function It(t,e,n){n=n!==void 0?n:{};let r,i;for(r=0,i=t.length;r<i;++r)n[t[r]]=e;return n}function o0(t,e,n,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=t[i.namespaceURI];if(s!==void 0){const o=s[i.localName];o!==void 0&&o.call(r,i,n)}}}function rr(t,e,n,r,i){return r.push(t),o0(e,n,r,i),r.pop()}function E2e(t,e,n,r,i,s){const o=(i!==void 0?i:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],a!==void 0&&(l=e.call(s,a,r,i!==void 0?i[c]:void 0),l!==void 0&&t[l.namespaceURI][l.localName].call(s,l,a,r))}function ii(t,e,n,r,i,s,o){return i.push(t),E2e(e,n,r,i,s,o),i.pop()}let $j;function bgt(){return $j===void 0&&typeof XMLSerializer<"u"&&($j=new XMLSerializer),$j}let jj;function _b(){return jj===void 0&&typeof document<"u"&&(jj=document.implementation.createDocument("","",null)),jj}class S2e extends _2e{constructor(){super(),this.xmlSerializer_=bgt()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if(typeof e=="string"){const r=Hf(e);return this.readFeatureFromDocument(r,n)}return Wf(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if(typeof e=="string"){const r=Hf(e);return this.readFeaturesFromDocument(r,n)}return Wf(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Rr(r,this.readFeaturesFromNode(i,n));return r}readFeaturesFromNode(e,n){return xn()}readGeometry(e,n){if(!e)return null;if(typeof e=="string"){const r=Hf(e);return this.readGeometryFromDocument(r,n)}return Wf(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const n=Hf(e);return this.readProjectionFromDocument(n)}return Wf(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}}function Hg(t){const e=xh(t,!1);return Egt(e)}function Egt(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function fL(t){const e=xh(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function vr(t){const e=xh(t,!1);return Sgt(e)}function Sgt(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function dA(t){const e=xh(t,!1);return Tgt(e)}function Tgt(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function zn(t){return xh(t,!1).trim()}function N2(t,e){Sr(t,e?"1":"0")}function kgt(t,e){t.appendChild(_b().createCDATASection(e))}function Agt(t,e){const n=new Date(e*1e3),r=n.getUTCFullYear()+"-"+lE(n.getUTCMonth()+1,2)+"-"+lE(n.getUTCDate(),2)+"T"+lE(n.getUTCHours(),2)+":"+lE(n.getUTCMinutes(),2)+":"+lE(n.getUTCSeconds(),2)+"Z";t.appendChild(_b().createTextNode(r))}function cl(t,e){const n=e.toPrecision();t.appendChild(_b().createTextNode(n))}function DN(t,e){const n=e.toString();t.appendChild(_b().createTextNode(n))}const Igt=/^\s/,Pgt=/\s$/,Rgt=/(\n|\t|\r|<|&| {2})/;function Sr(t,e){typeof e=="string"&&(Igt.test(e)||Pgt.test(e)||Rgt.test(e))?e.split("]]>").forEach((n,r,i)=>{r<i.length-1&&(n+="]]"),r>0&&(n=">"+n),kgt(t,n)}):t.appendChild(_b().createTextNode(e))}const fi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Cgt="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Mgt={rte:T2e,trk:k2e,wpt:A2e},Ngt=It(fi,{rte:Zu(T2e),trk:Zu(k2e),wpt:Zu(A2e)}),Ogt=It(fi,{text:Qe(zn,"linkText"),type:Qe(zn,"linkType")}),Lgt=It(fi,{name:Qe(zn),email:l0t,link:FI}),Dgt=It(fi,{name:Qe(zn),desc:Qe(zn),author:Qe(s0t),copyright:Qe(o0t),link:FI,time:Qe(fL),keywords:Qe(zn),bounds:a0t,extensions:pL}),$gt=It(fi,{year:Qe(dA),license:Qe(zn)}),jgt=It(fi,{rte:pt(d0t),trk:pt(f0t),wpt:pt(m0t)});class Fgt extends S2e{constructor(e){super(),e=e||{},this.dataProjection=Jr("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Hf(e)):Wf(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!fi.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(fi.includes(n.namespaceURI)&&n.localName==="metadata")return rr({},Dgt,n,[]);return null}readFeatureFromNode(e,n){if(!fi.includes(e.namespaceURI))return null;const r=Mgt[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!fi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=rr([],Ngt,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=dv("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",LN),r.setAttributeNS(LN,"xsi:schemaLocation",Cgt),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),ii({node:r},jgt,i0t,e,[n]),r}}const Vgt=It(fi,{name:Qe(zn),cmt:Qe(zn),desc:Qe(zn),src:Qe(zn),link:FI,number:Qe(dA),extensions:pL,type:Qe(zn),rtept:c0t}),zgt=It(fi,{ele:Qe(vr),time:Qe(fL)}),Ugt=It(fi,{name:Qe(zn),cmt:Qe(zn),desc:Qe(zn),src:Qe(zn),link:FI,number:Qe(dA),type:Qe(zn),extensions:pL,trkseg:h0t}),Ggt=It(fi,{trkpt:u0t}),Bgt=It(fi,{ele:Qe(vr),time:Qe(fL)}),Wgt=It(fi,{ele:Qe(vr),time:Qe(fL),magvar:Qe(vr),geoidheight:Qe(vr),name:Qe(zn),cmt:Qe(zn),desc:Qe(zn),src:Qe(zn),link:FI,sym:Qe(zn),type:Qe(zn),fix:Qe(zn),sat:Qe(dA),hdop:Qe(vr),vdop:Qe(vr),pdop:Qe(vr),ageofdgpsdata:Qe(vr),dgpsid:Qe(dA),extensions:pL}),Hgt=["text","type"],qgt=It(fi,{text:pt(Sr),type:pt(Sr)}),Kgt=It(fi,["name","cmt","desc","src","link","number","type","rtept"]),Ygt=It(fi,{name:pt(Sr),cmt:pt(Sr),desc:pt(Sr),src:pt(Sr),link:pt(HH),number:pt(DN),type:pt(Sr),rtept:b2e(pt(qH))}),Xgt=It(fi,["ele","time"]),Zgt=It(fi,["name","cmt","desc","src","link","number","type","trkseg"]),Jgt=It(fi,{name:pt(Sr),cmt:pt(Sr),desc:pt(Sr),src:pt(Sr),link:pt(HH),number:pt(DN),type:pt(Sr),trkseg:b2e(pt(p0t))}),Qgt=wh("trkpt"),e0t=It(fi,{trkpt:pt(qH)}),t0t=It(fi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),n0t=It(fi,{ele:pt(cl),time:pt(Agt),magvar:pt(cl),geoidheight:pt(cl),name:pt(Sr),cmt:pt(Sr),desc:pt(Sr),src:pt(Sr),link:pt(HH),sym:pt(Sr),type:pt(Sr),fix:pt(Sr),sat:pt(DN),hdop:pt(cl),vdop:pt(cl),pdop:pt(cl),ageofdgpsdata:pt(cl),dgpsid:pt(DN)}),r0t={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function i0t(t,e,n){const r=t.getGeometry();if(r){const i=r0t[r.getType()];if(i){const s=e[e.length-1].node;return dv(s.namespaceURI,i)}}}function BH(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function WH(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function s0t(t,e){const n=rr({},Lgt,t,e);if(n)return n}function o0t(t,e){const n=rr({},$gt,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function a0t(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function l0t(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function FI(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),o0(Ogt,t,e)}function pL(t,e){const n=e[e.length-1];n.extensionsNode_=t}function c0t(t,e){const n=rr({},zgt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;BH(i,s,t,n)}}function u0t(t,e){const n=rr({},Bgt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;BH(i,s,t,n)}}function h0t(t,e){const n=e[e.length-1];o0(Ggt,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function T2e(t,e){const n=e[0],r=rr({flatCoordinates:[],layoutOptions:{}},Vgt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=WH(s,i),a=new Qi(i,o);_h(a,!1,n);const l=new Gr(a);return l.setProperties(r,!0),l}function k2e(t,e){const n=e[0],r=rr({flatCoordinates:[],ends:[],layoutOptions:{}},Ugt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=WH(o,i,s),l=new uh(i,a,s);_h(l,!1,n);const c=new Gr(l);return c.setProperties(r,!0),c}function A2e(t,e){const n=e[0],r=rr({},Wgt,t,e);if(!r)return;const i={},s=BH([],i,t,r),o=WH(i,s),a=new ts(s,o);_h(a,!1,n);const l=new Gr(a);return l.setProperties(r,!0),l}function HH(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];ii({node:t},qgt,ga,s,n,Hgt)}function qH(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=t.nodeName=="rtept"?Xgt[s]:t0t[s],c=Tl(o,l);ii({node:t,properties:o},n0t,ga,c,n,l)}function d0t(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="LineString"){const u=_h(o,!0,r);s.geometryLayout=u.getLayout(),i.rtept=u.getCoordinates()}const a=n[n.length-1].node,l=Kgt[a.namespaceURI],c=Tl(i,l);ii(s,Ygt,ga,c,n,l)}function f0t(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=_h(o,!0,r);i.trkseg=u.getLineStrings()}const a=n[n.length-1].node,l=Zgt[a.namespaceURI],c=Tl(i,l);ii(s,Jgt,ga,c,n,l)}function p0t(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},ii(r,e0t,Qgt,e.getCoordinates(),n)}function m0t(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=_h(s,!0,r);i.geometryLayout=o.getLayout(),qH(t,o.getCoordinates(),n)}}const Ap=["http://www.google.com/kml/ext/2.2"],Xt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],g0t="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Jse={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},y0t=It(Xt,{ExtendedData:U2e,Region:G2e,MultiGeometry:Qe(F2e,"geometry"),LineString:Qe($2e,"geometry"),LinearRing:Qe(j2e,"geometry"),Point:Qe(V2e,"geometry"),Polygon:Qe(z2e,"geometry"),Style:Qe(XH),StyleMap:eyt,address:Qe(zn),description:Qe(zn),name:Qe(zn),open:Qe(Hg),phoneNumber:Qe(zn),styleUrl:Qe(M2e),visibility:Qe(Hg)},It(Ap,{MultiTrack:Qe(z0t,"geometry"),Track:Qe(D2e,"geometry")})),v0t=It(Xt,{ExtendedData:U2e,Region:G2e,Link:dyt,address:Qe(zn),description:Qe(zn),name:Qe(zn),open:Qe(Hg),phoneNumber:Qe(zn),visibility:Qe(Hg)}),_0t=It(Xt,{href:Qe(C2e)}),x0t=It(Xt,{Altitude:Qe(vr),Longitude:Qe(vr),Latitude:Qe(vr),Tilt:Qe(vr),AltitudeMode:Qe(zn),Heading:Qe(vr),Roll:Qe(vr)}),I2e=It(Xt,{LatLonAltBox:syt,Lod:ayt}),w0t=It(Xt,["Document","Placemark"]),b0t=It(Xt,{Document:pt(xyt),Placemark:pt(H2e)});let dw,u3=null,mz,VT,zT,UT,$N,gz=null,KH,yz=null,vz,Uy=null,Qse=null,_z=null;function jN(t){return 32/Math.min(t[0],t[1])}function E0t(){dw=[255,255,255,1],u3=new sr({color:dw}),mz=[20,2],VT="pixels",zT="pixels",UT=[64,64],$N="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",gz=new MA({anchor:mz,anchorOrigin:"bottom-left",anchorXUnits:VT,anchorYUnits:zT,crossOrigin:"anonymous",rotation:0,scale:jN(UT),size:UT,src:$N}),KH="NO_IMAGE",yz=new Bn({color:dw,width:1}),vz=new Bn({color:[51,51,51,1],width:2}),Uy=new nu({font:"bold 16px Helvetica",fill:u3,stroke:vz,scale:.8}),Qse=new In({fill:u3,image:gz,text:Uy,stroke:yz,zIndex:0}),_z=[Qse]}let pC;function S0t(t){return t}class T0t extends S2e{constructor(e){super(),e=e||{},_z||E0t(),this.dataProjection=Jr("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:_z,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:S0t,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,n){const r=It(Xt,{Document:Zse(this.readDocumentOrFolder_,this),Folder:Zse(this.readDocumentOrFolder_,this),Placemark:Zu(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=rr([],r,e,n,this);if(i)return i}readPlacemark_(e,n){const r=rr({geometry:null},y0t,e,n,this);if(!r)return;const i=new Gr,s=e.getAttribute("id");s!==null&&i.setId(s);const o=n[0],a=r.geometry;if(a&&_h(a,!1,o),i.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,u=A0t(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,n){const r=e.getAttribute("id");if(r!==null){const i=XH.call(this,e,n);if(i){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,n){const r=e.getAttribute("id");if(r===null)return;const i=O2e.call(this,e,n);if(!i)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,n){if(!Xt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null}readFeaturesFromNode(e,n){if(!Xt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,n);o&&Rr(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const n=Hf(e);return this.readNameFromDocument(n)}return Wf(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(n);if(r)return r}}readNameFromNode(e){for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Xt.includes(n.namespaceURI)&&n.localName=="name")return zn(n);for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;if(Xt.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(n);if(i)return i}}}readNetworkLinks(e){const n=[];if(typeof e=="string"){const r=Hf(e);Rr(n,this.readNetworkLinksFromDocument(r))}else Wf(e)?Rr(n,this.readNetworkLinksFromDocument(e)):Rr(n,this.readNetworkLinksFromNode(e));return n}readNetworkLinksFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Rr(n,this.readNetworkLinksFromNode(r));return n}readNetworkLinksFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=rr({},v0t,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Rr(n,this.readNetworkLinksFromNode(r))}return n}readRegion(e){const n=[];if(typeof e=="string"){const r=Hf(e);Rr(n,this.readRegionFromDocument(r))}else Wf(e)?Rr(n,this.readRegionFromDocument(e)):Rr(n,this.readRegionFromNode(e));return n}readRegionFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Rr(n,this.readRegionFromNode(r));return n}readRegionFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName=="Region"){const i=rr({},I2e,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Rr(n,this.readRegionFromNode(r))}return n}readCamera(e){const n=[];if(typeof e=="string"){const r=Hf(e);Rr(n,this.readCameraFromDocument(r))}else Wf(e)?Rr(n,this.readCameraFromDocument(e)):Rr(n,this.readCameraFromNode(e));return n}readCameraFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Rr(n,this.readCameraFromNode(r));return n}readCameraFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=rr({},x0t,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&Rr(n,this.readCameraFromNode(r))}return n}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=dv(Xt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",Ap[0]),r.setAttributeNS(i,"xmlns:xsi",LN),r.setAttributeNS(LN,"xsi:schemaLocation",g0t);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=w0t[r.namespaceURI],l=Tl(o,a);return ii(s,b0t,ga,l,[n],a,this),r}}function k0t(t,e){const n=[0,0];let r="start";const i=t.getImage();if(i){const a=i.getSize();if(a&&a.length==2){const l=i.getScaleArray(),c=i.getAnchor();n[0]=l[0]*(a[0]-c[0]),n[1]=l[1]*(a[1]/2-c[1]),r="left"}}let s=t.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Uy.getFont()),s.setScale(s.getScale()||Uy.getScale()),s.setFill(s.getFill()||Uy.getFill()),s.setStroke(s.getStroke()||vz)):s=Uy.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(r),new In({image:i,text:s})}function A0t(t,e,n,r,i){return(function(s,o){let a=i,l="",c=[];if(a){const h=s.getGeometry();if(h)if(h instanceof tu)c=h.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Point"||g==="MultiPoint"}),a=c.length>0;else{const f=h.getType();a=f==="Point"||f==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(pC||(pC=document.createElement("textarea")),pC.innerHTML=l,l=pC.value));let u=n;if(t?u=t:e&&(u=P2e(e,n,r)),a){const h=k0t(u[0],l);if(c.length>0){h.setGeometry(new tu(c));const f=new In({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[h,f].concat(u.slice(1))}return h}return u})}function P2e(t,e,n){return Array.isArray(t)?t:typeof t=="string"?P2e(n[t],e,n):e}function mL(t){const e=xh(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function R2e(t){let e=xh(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),o=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;n.push(s,o,a),e=e.substr(i[0].length)}if(e==="")return n}function C2e(t){const e=xh(t,!1).trim();let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function M2e(t){const e=xh(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function I0t(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let r;return e!=="insetPixels"?n!=="insetPixels"?r="bottom-left":r="top-left":n!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(t.getAttribute("x")),xunits:Jse[e],y:parseFloat(t.getAttribute("y")),yunits:Jse[n],origin:r}}function N2e(t){return vr(t)}const P0t=It(Xt,{Pair:Q0t});function O2e(t,e){return rr(void 0,P0t,t,e,this)}const R0t=It(Xt,{Icon:Qe(B0t),color:Qe(mL),heading:Qe(vr),hotSpot:Qe(I0t),scale:Qe(N2e)});function C0t(t,e){const n=rr({},R0t,t,e);if(!n)return;const r=e[e.length-1],i="Icon"in n?n.Icon:{},s=!("Icon"in n)||Object.keys(i).length>0;let o;const a=i.href;a?o=a:s&&(o=$N);let l,c,u,h="bottom-left";const f=n.hotSpot;f?(l=[f.x,f.y],c=f.xunits,u=f.yunits,h=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=mz,c=VT,u=zT):o.includes("arrow-reverse")?(l=[54,42],c=VT,u=zT):o.includes("paddle")&&(l=[32,1],c=VT,u=zT));let g;const v=i.x,x=i.y;v!==void 0&&x!==void 0&&(g=[v,x]);let b;const T=i.w,A=i.h;T!==void 0&&A!==void 0&&(b=[T,A]);let I;const P=n.heading;P!==void 0&&(I=Xf(P));const M=n.scale,F=n.color;if(s){o==$N&&(b=UT);const C=new MA({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:g,offsetOrigin:"bottom-left",rotation:I,scale:M,size:b,src:this.iconUrlFunction_(o),color:F}),N=C.getScaleArray()[0],O=C.getSize();if(O===null){const j=C.getImageState();if(j===Vt.IDLE||j===Vt.LOADING){const V=function(){const G=C.getImageState();if(!(G===Vt.IDLE||G===Vt.LOADING)){const U=C.getSize();if(U&&U.length==2){const fe=jN(U);C.setScale(N*fe)}C.unlistenImageChange(V)}};C.listenImageChange(V),j===Vt.IDLE&&C.load()}}else if(O.length==2){const j=jN(O);C.setScale(N*j)}r.imageStyle=C}else r.imageStyle=KH}const M0t=It(Xt,{color:Qe(mL),scale:Qe(N2e)});function N0t(t,e){const n=rr({},M0t,t,e);if(!n)return;const r=e[e.length-1],i=new nu({fill:new sr({color:"color"in n?n.color:dw}),scale:n.scale});r.textStyle=i}const O0t=It(Xt,{color:Qe(mL),width:Qe(vr)});function L0t(t,e){const n=rr({},O0t,t,e);if(!n)return;const r=e[e.length-1],i=new Bn({color:"color"in n?n.color:dw,width:"width"in n?n.width:1});r.strokeStyle=i}const D0t=It(Xt,{color:Qe(mL),fill:Qe(Hg),outline:Qe(Hg)});function $0t(t,e){const n=rr({},D0t,t,e);if(!n)return;const r=e[e.length-1],i=new sr({color:"color"in n?n.color:dw});r.fillStyle=i;const s=n.fill;s!==void 0&&(r.fill=s);const o=n.outline;o!==void 0&&(r.outline=o)}const j0t=It(Xt,{coordinates:GH(R2e)});function L2e(t,e){return rr(null,j0t,t,e)}function F0t(t,e){const r=e[e.length-1].coordinates,i=xh(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);r.push([a,l,c])}else r.push([])}const V0t=It(Ap,{Track:Zu(D2e)});function z0t(t,e){const n=rr([],V0t,t,e);if(n)return new uh(n)}const U0t=It(Xt,{when:fyt},It(Ap,{coord:F0t}));function D2e(t,e){const n=rr({coordinates:[],whens:[]},U0t,t,e);if(!n)return;const r=[],i=n.coordinates,s=n.whens;for(let o=0,a=Math.min(i.length,s.length);o<a;++o)i[o].length==3&&r.push(i[o][0],i[o][1],i[o][2],s[o]);return new Qi(r,"XYZM")}const G0t=It(Xt,{href:Qe(C2e)},It(Ap,{x:Qe(vr),y:Qe(vr),w:Qe(vr),h:Qe(vr)}));function B0t(t,e){const n=rr({},G0t,t,e);return n||null}const W0t=It(Xt,{coordinates:GH(R2e)});function YH(t,e){return rr(null,W0t,t,e)}const gL=It(Xt,{extrude:Qe(Hg),tessellate:Qe(Hg),altitudeMode:Qe(zn)});function $2e(t,e){const n=rr({},gL,t,e),r=YH(t,e);if(r){const i=new Qi(r,"XYZ");return i.setProperties(n,!0),i}}function j2e(t,e){const n=rr({},gL,t,e),r=YH(t,e);if(r){const i=new bl(r,"XYZ",[r.length]);return i.setProperties(n,!0),i}}const H0t=It(Xt,{LineString:Zu($2e),LinearRing:Zu(j2e),MultiGeometry:Zu(F2e),Point:Zu(V2e),Polygon:Zu(z2e)});function F2e(t,e){const n=rr([],H0t,t,e);if(!n)return null;if(n.length===0)return new tu(n);let r,i=!0;const s=n[0].getType();let o;for(let a=1,l=n.length;a<l;++a)if(o=n[a],o.getType()!=s){i=!1;break}if(i){let a,l;if(s=="Point"){const c=n[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let u=1,h=n.length;u<h;++u)o=n[u],Rr(l,o.getFlatCoordinates());r=new Zg(l,a),Fj(r,n)}else if(s=="LineString")r=new uh(n),Fj(r,n);else if(s=="Polygon")r=new lp(n),Fj(r,n);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new tu(n);else throw new Error("Unknown geometry type found")}else r=new tu(n);return r}function V2e(t,e){const n=rr({},gL,t,e),r=YH(t,e);if(r){const i=new ts(r,"XYZ");return i.setProperties(n,!0),i}}const q0t=It(Xt,{innerBoundaryIs:cyt,outerBoundaryIs:hyt});function z2e(t,e){const n=rr({},gL,t,e),r=rr([null],q0t,t,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let a=1,l=r.length;a<l;++a)Rr(i,r[a]),s.push(i.length);const o=new bl(i,"XYZ",s);return o.setProperties(n,!0),o}}const K0t=It(Xt,{IconStyle:C0t,LabelStyle:N0t,LineStyle:L0t,PolyStyle:$0t});function XH(t,e){const n=rr({},K0t,t,e,this);if(!n)return null;let r="fillStyle"in n?n.fillStyle:u3;const i=n.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in n?n.imageStyle!=KH&&(s=n.imageStyle):s=gz;const o="textStyle"in n?n.textStyle:Uy,a="strokeStyle"in n?n.strokeStyle:yz,l=n.outline;return l!==void 0&&!l?[new In({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new tu(f.getGeometriesArrayRecursive().filter(function(g){const v=g.getType();return v!=="Polygon"&&v!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return u},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new In({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new tu(f.getGeometriesArrayRecursive().filter(function(g){const v=g.getType();return v==="Polygon"||v==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return u},fill:r,stroke:null,zIndex:void 0})]:[new In({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function Fj(t,e){const n=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<n;++c){const u=e[c];r[c]=u.get("extrude"),i[c]=u.get("tessellate"),s[c]=u.get("altitudeMode"),o=o||r[c]!==void 0,a=a||i[c]!==void 0,l=l||s[c]}o&&t.set("extrude",r),a&&t.set("tessellate",i),l&&t.set("altitudeMode",s)}const Y0t=It(Xt,{displayName:Qe(zn),value:Qe(zn)});function X0t(t,e){const n=t.getAttribute("name");o0(Y0t,t,e);const r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:n!==null?r[n]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Z0t=It(Xt,{Data:X0t,SchemaData:nyt});function U2e(t,e){o0(Z0t,t,e)}function G2e(t,e){o0(I2e,t,e)}const J0t=It(Xt,{Style:Qe(XH),key:Qe(zn),styleUrl:Qe(M2e)});function Q0t(t,e){const n=rr({},J0t,t,e,this);if(!n)return;const r=n.key;if(r&&r=="normal"){const i=n.styleUrl;i&&(e[e.length-1]=i);const s=n.Style;s&&(e[e.length-1]=s)}}function eyt(t,e){const n=O2e.call(this,t,e);if(!n)return;const r=e[e.length-1];if(Array.isArray(n))r.Style=n;else if(typeof n=="string")r.styleUrl=n;else throw new Error("`styleMapValue` has an unknown type")}const tyt=It(Xt,{SimpleData:ryt});function nyt(t,e){o0(tyt,t,e)}function ryt(t,e){const n=t.getAttribute("name");if(n!==null){const r=zn(t),i=e[e.length-1];i[n]=r}}const iyt=It(Xt,{altitudeMode:Qe(zn),minAltitude:Qe(vr),maxAltitude:Qe(vr),north:Qe(vr),south:Qe(vr),east:Qe(vr),west:Qe(vr)});function syt(t,e){const n=rr({},iyt,t,e);if(!n)return;const r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}const oyt=It(Xt,{minLodPixels:Qe(vr),maxLodPixels:Qe(vr),minFadeExtent:Qe(vr),maxFadeExtent:Qe(vr)});function ayt(t,e){const n=rr({},oyt,t,e);if(!n)return;const r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}const lyt=It(Xt,{LinearRing:Zu(L2e)});function cyt(t,e){const n=rr([],lyt,t,e);n.length>0&&e[e.length-1].push(...n)}const uyt=It(Xt,{LinearRing:GH(L2e)});function hyt(t,e){const n=rr(void 0,uyt,t,e);if(n){const r=e[e.length-1];r[0]=n}}function dyt(t,e){o0(_0t,t,e)}function fyt(t,e){const r=e[e.length-1].whens,i=xh(t,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function yL(t,e){const n=lu(e),i=[(n.length==4?n[3]:1)*255,n[2],n[1],n[0]];for(let s=0;s<4;++s){const o=Math.floor(i[s]).toString(16);i[s]=o.length==1?"0"+o:o}Sr(t,i.join(""))}function pyt(t,e,n){const r=n[n.length-1],i=r.layout,s=r.stride;let o;if(i=="XY"||i=="XYM")o=2;else if(i=="XYZ"||i=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let u=1;u<o;++u)l+=","+e[c+u]}}Sr(t,l)}const h3=It(Xt,{Data:pt(myt),value:pt(yyt),displayName:pt(gyt)});function myt(t,e,n){t.setAttribute("name",e.name);const r={node:t},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&ii(r,h3,ga,[i.displayName],n,["displayName"]),i!==null&&i.value&&ii(r,h3,ga,[i.value],n,["value"])):ii(r,h3,ga,[i],n,["value"])}function gyt(t,e){Sr(t,e)}function yyt(t,e){Sr(t,e)}const vyt=It(Xt,{Placemark:pt(H2e)}),_yt=function(t,e,n){const r=e[e.length-1].node;return dv(r.namespaceURI,"Placemark")};function xyt(t,e,n){ii({node:t},vyt,_yt,e,n,void 0,this)}const wyt=wh("Data");function byt(t,e,n){const r={node:t},i=e.names,s=e.values,o=i.length;for(let a=0;a<o;a++)ii(r,h3,wyt,[{name:i[a],value:s[a]}],n)}const eoe=It(Xt,["href"],It(Ap,["x","y","w","h"])),toe=It(Xt,{href:pt(Sr)},It(Ap,{x:pt(cl),y:pt(cl),w:pt(cl),h:pt(cl)})),Eyt=function(t,e,n){return dv(Ap[0],"gx:"+n)};function Syt(t,e,n){const r={node:t},i=n[n.length-1].node;let s=eoe[i.namespaceURI],o=Tl(e,s);ii(r,toe,ga,o,n,s),s=eoe[Ap[0]],o=Tl(e,s),ii(r,toe,Eyt,o,n,s)}const Tyt=It(Xt,["scale","heading","Icon","color","hotSpot"]),kyt=It(Xt,{Icon:pt(Syt),color:pt(yL),heading:pt(cl),hotSpot:pt(Qyt),scale:pt(K2e)});function Ayt(t,e,n){const r={node:t},i={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const b=e.getAnchor(),T=e.getOrigin();if(T&&a&&T[0]!==0&&T[1]!==o[1]&&(l.x=T[0],l.y=a[1]-(T[1]+o[1])),b&&(b[0]!==o[0]/2||b[1]!==o[1]/2)){const A={x:b[0],xunits:"pixels",y:o[1]-b[1],yunits:"pixels"};i.hotSpot=A}}i.Icon=l;let c=e.getScaleArray()[0],u=o;if(u===null&&(u=UT),u.length==2){const b=jN(u);c=c/b}c!==1&&(i.scale=c);const h=e.getRotation();h!==0&&(i.heading=h);const f=e.getColor();f&&(i.color=f);const g=n[n.length-1].node,v=Tyt[g.namespaceURI],x=Tl(i,v);ii(r,kyt,ga,x,n,v)}const Iyt=It(Xt,["color","scale"]),Pyt=It(Xt,{color:pt(yL),scale:pt(K2e)});function Ryt(t,e,n){const r={node:t},i={},s=e.getFill();s&&(i.color=s.getColor());const o=e.getScale();o&&o!==1&&(i.scale=o);const a=n[n.length-1].node,l=Iyt[a.namespaceURI],c=Tl(i,l);ii(r,Pyt,ga,c,n,l)}const Cyt=It(Xt,["color","width"]),Myt=It(Xt,{color:pt(yL),width:pt(cl)});function Nyt(t,e,n){const r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=Cyt[s.namespaceURI],a=Tl(i,o);ii(r,Myt,ga,a,n,o)}const Oyt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},B2e=function(t,e,n){if(t){const r=e[e.length-1].node;return dv(r.namespaceURI,Oyt[t.getType()])}},Lyt=wh("Point"),Dyt=wh("LineString"),$yt=wh("LinearRing"),jyt=wh("Polygon"),Fyt=It(Xt,{LineString:pt(fw),Point:pt(fw),Polygon:pt(q2e),GeometryCollection:pt(W2e)});function W2e(t,e,n){const r={node:t},i=e.getType();let s=[],o;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=B2e;else if(i==="MultiPoint")s=e.getPoints(),o=Lyt;else if(i==="MultiLineString")s=e.getLineStrings(),o=Dyt;else if(i==="MultiPolygon")s=e.getPolygons(),o=jyt;else throw new Error("Unknown geometry type");ii(r,Fyt,o,s,n)}const Vyt=It(Xt,{LinearRing:pt(fw)});function noe(t,e,n){ii({node:t},Vyt,$yt,[e],n)}const Vj=It(Xt,{ExtendedData:pt(byt),MultiGeometry:pt(W2e),LineString:pt(fw),LinearRing:pt(fw),Point:pt(fw),Polygon:pt(q2e),Style:pt(Jyt),address:pt(Sr),description:pt(Sr),name:pt(Sr),open:pt(N2),phoneNumber:pt(Sr),styleUrl:pt(Sr),visibility:pt(N2)}),zyt=It(Xt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Uyt=wh("ExtendedData");function H2e(t,e,n){const r={node:t};e.getId()&&t.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(i||{}).sort().filter(function(g){return!s[g]}),a=e.getStyleFunction();if(a){const g=a(e,0);if(g){const v=Array.isArray(g)?g:[g];let x=v;if(e.getGeometry()&&(x=v.filter(function(b){const T=b.getGeometryFunction()(e);if(T){const A=T.getType();return A==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(I){const P=I.getType();return P==="Point"||P==="MultiPoint"}).length:A==="Point"||A==="MultiPoint"}})),this.writeStyles_){let b=v,T=v;e.getGeometry()&&(b=v.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(M){const F=M.getType();return F==="LineString"||F==="MultiLineString"}).length:P==="LineString"||P==="MultiLineString"}}),T=v.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(M){const F=M.getType();return F==="Polygon"||F==="MultiPolygon"}).length:P==="Polygon"||P==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:b,polyStyles:T}}if(x.length&&i.name===void 0){const b=x[0].getText();b&&(i.name=b.getText())}}}const l=n[n.length-1].node,c=zyt[l.namespaceURI],u=Tl(i,c);if(ii(r,Vj,ga,u,n,c),o.length>0){const g=Tl(i,o);ii(r,Vj,Uyt,[{names:o,values:g}],n)}const h=n[0];let f=e.getGeometry();f&&(f=_h(f,!0,h)),ii(r,Vj,B2e,[f],n)}const Gyt=It(Xt,["extrude","tessellate","altitudeMode","coordinates"]),Byt=It(Xt,{extrude:pt(N2),tessellate:pt(N2),altitudeMode:pt(Sr),coordinates:pt(pyt)});function fw(t,e,n){const r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=n[n.length-1].node,a=Gyt[o.namespaceURI],l=Tl(s,a);ii(i,Byt,ga,l,n,a)}const Wyt=It(Xt,["color","fill","outline"]),roe=It(Xt,{outerBoundaryIs:pt(noe),innerBoundaryIs:pt(noe)}),Hyt=wh("innerBoundaryIs"),qyt=wh("outerBoundaryIs");function q2e(t,e,n){const r=e.getLinearRings(),i=r.shift(),s={node:t};ii(s,roe,Hyt,r,n),ii(s,roe,qyt,[i],n)}const Kyt=It(Xt,{color:pt(yL),fill:pt(N2),outline:pt(N2)});function Yyt(t,e,n){const r={node:t},i=e.getFill(),s=e.getStroke(),o={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},a=n[n.length-1].node,l=Wyt[a.namespaceURI],c=Tl(o,l);ii(r,Kyt,ga,c,n,l)}function K2e(t,e){cl(t,Math.round(e*1e6)/1e6)}const Xyt=It(Xt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Zyt=It(Xt,{IconStyle:pt(Ayt),LabelStyle:pt(Ryt),LineStyle:pt(Nyt),PolyStyle:pt(Yyt)});function Jyt(t,e,n){const r={node:t},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,o=Xyt[s.namespaceURI],a=Tl(i,o);ii(r,Zyt,ga,a,n,o)}function Qyt(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}function Y2e(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const s=e[r];if(!CC(s)){const o=t.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),v3(new o5({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<n;++r){const s=e[r],o=CC(s);for(i=0;i<n;++i){const a=e[i],l=CC(a);if(!MC(s,a))if(t.defs[s]===t.defs[a])p8([o,l]);else{const c=t(s,a);WTe(o,l,JY(o,l,c.forward),JY(l,o,c.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");ar.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Y2e(ar);let Gy=null,GT=null,hx=null;function xz(t){Gy&&(t.removeLayer(Gy),Gy=null),GT&&(t.removeLayer(GT),GT=null),hx=null}async function e1t(t,e){try{const n=Qn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${n[0].toFixed(5)}, ${n[1].toFixed(5)}`);const r=ar("EPSG:4326","EPSG:28992",n);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;xz(t);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,o=Date.now(),a=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${o}`;console.log(" WFS URL:",a);const l=new AbortController,c=setTimeout(()=>l.abort(),1e4),u=await fetch(a,{signal:l.signal});if(clearTimeout(c),!u.ok)return console.error("WFS request failed:",u.status),!1;const h=await u.json();if(console.log(" WFS RESPONSE:",JSON.stringify(h).substring(0,500)),!h.features||h.features.length===0)return console.log("No parcel found at location"),!1;const f=h.features[0];console.log(" PARCEL ID:",f.id||f.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(f.bbox||"geen bbox"));const v=new dL().readFeature(f,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),x=v.getGeometry();if(!x)return console.log("No geometry in parcel feature"),!1;const b=f.properties||{};console.log(` Parcel: ${b.category||"unknown"} - ${b.gewasnaam||b.gewas||"geen gewas"}`),console.log(` Geometry type: ${x.getType()}, extent: ${x.getExtent().map(O=>O.toFixed(0)).join(", ")}`);const T=x.getExtent(),A=T[2]-T[0],I=T[3]-T[1],P=Math.max(A,I)*.05,M=[T[0]-P,T[1]-P,T[2]+P,T[3]+P],F=Math.max(A,I)*.3,C=[T[0]-F,T[1]-F,T[2]+F,T[3]+F];hx=x,Gy=new MPe({source:new sRe({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:M,zIndex:998}),Gy.on("prerender",O=>{if(!hx)return;const j=O.context;if(!j)return;const V=O.frameState;if(!V)return;j.save(),j.beginPath(),(hx.getType()==="Polygon"?hx.getCoordinates()[0]:hx.getCoordinates()[0][0]).forEach((U,fe)=>{const Re=t.getPixelFromCoordinate(U);if(!Re)return;const Be=V.pixelRatio,$e=Re[0]*Be,pe=Re[1]*Be;fe===0?j.moveTo($e,pe):j.lineTo($e,pe)}),j.closePath(),j.clip()}),Gy.on("postrender",O=>{const j=O.context;j&&j.restore()}),t.addLayer(Gy);const N=new fu({features:[v]});return GT=new yh({source:N,style:new In({fill:new sr({color:"rgba(0, 0, 0, 0)"}),stroke:new Bn({color:"#dc2626",width:3})}),zIndex:999}),t.addLayer(GT),console.log(" Parcel height map displayed"),!0}catch(n){return console.error("Failed to show parcel height map:",n),!1}}var FN={};FN.version="0.18.5";var X2e=1252,t1t=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Z2e=function(t){t1t.indexOf(t)!=-1&&(X2e=t)};function n1t(){Z2e(1252)}var fA=function(t){Z2e(t)};function r1t(){fA(1200),n1t()}var mC=function(e){return String.fromCharCode(e)},ioe=function(e){return String.fromCharCode(e)},VN,ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function pA(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=ag.charAt(s)+ag.charAt(o)+ag.charAt(a)+ag.charAt(l);return e}function vp(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=ag.indexOf(t.charAt(c++)),o=ag.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=ag.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=ag.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Er=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Ip=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function q1(t){return Er?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function soe(t){return Er?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ju=function(e){return Er?Ip(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function vL(t){if(typeof ArrayBuffer>"u")return Ju(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function VI(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function i1t(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Co=Er?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ip(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function s1t(t){for(var e=[],n=0,r=t.length+250,i=q1(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=q1(65535),r=65530)}return e.push(i.slice(0,n)),Co(e)}var BT=/\u0000/g,gC=/[\u0001-\u0006]/g;function pw(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function rh(t,e){var n=""+t;return n.length>=e?n:Xi("0",e-n.length)+n}function ZH(t,e){var n=""+t;return n.length>=e?n:Xi(" ",e-n.length)+n}function zN(t,e){var n=""+t;return n.length>=e?n:n+Xi(" ",e-n.length)}function o1t(t,e){var n=""+Math.round(t);return n.length>=e?n:Xi("0",e-n.length)+n}function a1t(t,e){var n=""+t;return n.length>=e?n:Xi("0",e-n.length)+n}var ooe=Math.pow(2,32);function k_(t,e){if(t>ooe||t<-ooe)return o1t(t,e);var n=Math.round(t);return a1t(n,e)}function UN(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var aoe=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],zj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function l1t(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var ns={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},loe={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},c1t={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function GN(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,h=Math.floor(i);c<e&&(h=Math.floor(i),a=h*o+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var f=Math.floor(r*a/u);return[f,r*a-f*u,u]}function yC(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=g1t(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var J2e=new Date(1899,11,31,0,0,0),u1t=J2e.getTime(),h1t=new Date(1900,2,1,0,0,0);function Q2e(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=h1t&&(n+=1440*60*1e3),(n-(u1t+(t.getTimezoneOffset()-J2e.getTimezoneOffset())*6e4))/(1440*60*1e3)}function JH(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function d1t(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function f1t(t){var e=t<0?12:11,n=JH(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function p1t(t){var e=JH(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function m1t(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=f1t(t):e===10?n=t.toFixed(10).substr(0,12):n=p1t(t),JH(d1t(n.toUpperCase()))}function wz(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):m1t(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return qg(14,Q2e(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function g1t(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function y1t(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return zj[n.m-1][1];case 5:return zj[n.m-1][0];default:return zj[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return aoe[n.q][0];default:return aoe[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?rh(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=rh(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?rh(l,c):"";return u}function lg(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var ebe=/%/g;function v1t(t,e,n){var r=e.replace(ebe,""),i=e.length-r.length;return ip(t,r,n*Math.pow(10,2*i))+Xi("%",i)}function _1t(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ip(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function tbe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tbe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var nbe=/# (\?+)( ?)\/( ?)(\d+)/;function x1t(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Xi(" ",t[1].length+1+t[4].length):ZH(o,t[1].length)+t[2]+"/"+t[3]+rh(a,t[4].length))}function w1t(t,e,n){return n+(e===0?"":""+e)+Xi(" ",t[1].length+2+t[4].length)}var rbe=/^#*0*\.([0#]+)/,ibe=/\).*[0#]/,sbe=/\(###\) ###\\?-####/;function Aa(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function coe(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function uoe(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function b1t(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function E1t(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Lc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(ibe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Lc("n",r,n):"("+Lc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return _1t(t,e,n);if(e.indexOf("%")!==-1)return v1t(t,e,n);if(e.indexOf("E")!==-1)return tbe(e,n);if(e.charCodeAt(0)===36)return"$"+Lc(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+k_(l,e.length);if(e.match(/^[#?]+$/))return i=k_(n,0),i==="0"&&(i=""),i.length>e.length?i:Aa(e.substr(0,e.length-i.length))+i;if(s=e.match(nbe))return x1t(s,l,c);if(e.match(/^#+0+$/))return c+k_(l,e.length-e.indexOf("0"));if(s=e.match(rbe))return i=coe(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Aa(s[1])).replace(/\.$/,"."+Aa(s[1])).replace(/\.(\d*)$/,function(v,x){return"."+x+Xi("0",Aa(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+coe(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+lg(k_(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Lc(t,e,-n):lg(""+(Math.floor(n)+b1t(n,s[1].length)))+"."+rh(uoe(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Lc(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=pw(Lc(t,e.replace(/[\\-]/g,""),n)),o=0,pw(pw(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(e.match(sbe))return i=Lc(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=GN(l,Math.pow(10,o)-1,!1),i=""+c,u=ip("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=zN(a[2],o),u.length<s[4].length&&(u=Aa(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=GN(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?ZH(a[1],o)+s[2]+"/"+s[3]+zN(a[2],o):Xi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=k_(n,0),e.length<=i.length?i:Aa(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Aa(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=uoe(n,s[1].length),n<0?"-"+Lc(t,e,-n):lg(E1t(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?rh(0,3-v.length):"")+v})+"."+rh(o,s[1].length);switch(e){case"###,##0.00":return Lc(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=lg(k_(l,0));return g!=="0"?c+g:"";case"###,###.00":return Lc(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Lc(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function S1t(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return ip(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function T1t(t,e,n){var r=e.replace(ebe,""),i=e.length-r.length;return ip(t,r,n*Math.pow(10,2*i))+Xi("%",i)}function obe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+obe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Xh(t,e,n){if(t.charCodeAt(0)===40&&!e.match(ibe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Xh("n",r,n):"("+Xh("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return S1t(t,e,n);if(e.indexOf("%")!==-1)return T1t(t,e,n);if(e.indexOf("E")!==-1)return obe(e,n);if(e.charCodeAt(0)===36)return"$"+Xh(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+rh(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Aa(e.substr(0,e.length-i.length))+i;if(s=e.match(nbe))return w1t(s,l,c);if(e.match(/^#+0+$/))return c+rh(l,e.length-e.indexOf("0"));if(s=e.match(rbe))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Aa(s[1])).replace(/\.$/,"."+Aa(s[1])),i=i.replace(/\.(\d*)$/,function(v,x){return"."+x+Xi("0",Aa(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+lg(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Xh(t,e,-n):lg(""+n)+"."+Xi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Xh(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=pw(Xh(t,e.replace(/[\\-]/g,""),n)),o=0,pw(pw(e.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<i.length?i.charAt(o++):v==="0"?"0":""}));if(e.match(sbe))return i=Xh(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=GN(l,Math.pow(10,o)-1,!1),i=""+c,u=ip("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=zN(a[2],o),u.length<s[4].length&&(u=Aa(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=GN(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?ZH(a[1],o)+s[2]+"/"+s[3]+zN(a[2],o):Xi(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Aa(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Aa(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Xh(t,e,-n):lg(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?rh(0,3-v.length):"")+v})+"."+rh(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=lg(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return Xh(t,e.slice(0,e.lastIndexOf(".")),n)+Aa(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function ip(t,e,n){return(n|0)===n?Xh(t,e,n):Lc(t,e,n)}function k1t(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var abe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function lbe(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":UN(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(abe))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function A1t(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,h,f="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!UN(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),v=g==="("||g===")"?g:"t";i[i.length]={t:v,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=yC(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=yC(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=f),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var x={t:a,v:a};if(c==null&&(c=yC(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",f="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",o+=5,f="h"):t.substr(o,5).toUpperCase()==="/"?(c!=null&&(x.v=c.H>=12?"":""),x.t="T",o+=5,f="h"):(x.t="t",++o),c==null&&x.t==="T")return"";i[i.length]=x,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(abe)){if(c==null&&(c=yC(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",lbe(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var b=0,T=0,A;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=f,l="h",b<1&&(b=1);break;case"s":(A=i[o].v.match(/\.0+$/))&&(T=Math.max(T,A[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[o].v.match(/[Hh]/)&&(b=1),b<2&&i[o].v.match(/[Mm]/)&&(b=2),b<3&&i[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var I="",P;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=y1t(i[o].t.charCodeAt(0),i[o].v,c,T),i[o].t="t";break;case"n":case"?":for(P=o+1;i[P]!=null&&((a=i[P].t)==="?"||a==="D"||(a===" "||a==="t")&&i[P+1]!=null&&(i[P+1].t==="?"||i[P+1].t==="t"&&i[P+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[P].v==="/"||i[P].v===" "&&i[P+1]!=null&&i[P+1].t=="?"));)i[o].v+=i[P].v,i[P]={v:"",t:";"},++P;I+=i[o].v,o=P-1;break;case"G":i[o].t="t",i[o].v=wz(e,n);break}var M="",F,C;if(I.length>0){I.charCodeAt(0)==40?(F=e<0&&I.charCodeAt(0)===45?-e:e,C=ip("n",I,F)):(F=e<0&&r>1?-e:e,C=ip("n",I,F),F<0&&i[0]&&i[0].t=="t"&&(C=C.substr(1),i[0].v="-"+i[0].v)),P=C.length-1;var N=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){N=o;break}var O=i.length;if(N===i.length&&C.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(P>=i[o].v.length-1?(P-=i[o].v.length,i[o].v=C.substr(P+1,i[o].v.length)):P<0?i[o].v="":(i[o].v=C.substr(0,P+1),P=-1),i[o].t="t",O=o);P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v)}else if(N!==i.length&&C.indexOf("E")===-1){for(P=C.indexOf(".")-1,o=N;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")-1:i[o].v.length-1,M=i[o].v.substr(u+1);u>=0;--u)P>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(M=C.charAt(P--)+M);i[o].v=M,i[o].t="t",O=o}for(P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v),P=C.indexOf(".")+1,o=N;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==N)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")+1:0,M=i[o].v.substr(0,u);u<i[o].v.length;++u)P<C.length&&(M+=C.charAt(P++));i[o].v=M,i[o].t="t",O=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(F=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=ip(i[o].t,i[o].v,F),i[o].t="t");var j="";for(o=0;o!==i.length;++o)i[o]!=null&&(j+=i[o].v);return j}var hoe=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function doe(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function I1t(t,e){var n=k1t(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(hoe),a=n[1].match(hoe);return doe(e,o)?[r,n[0]]:doe(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function qg(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:ns)[t],r==null&&(r=n.table&&n.table[loe[t]]||ns[loe[t]]),r==null&&(r=c1t[t]||"General");break}if(UN(r,0))return wz(e,n);e instanceof Date&&(e=Q2e(e,n.date1904));var i=I1t(r,e);if(UN(i[1]))return wz(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return A1t(i[1],e,n,i[0])}function cbe(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(ns[n]==null){e<0&&(e=n);continue}if(ns[n]==t){e=n;break}}e<0&&(e=391)}return ns[e]=t,e}function _L(t){for(var e=0;e!=392;++e)t[e]!==void 0&&cbe(t[e],e)}function xL(){ns=l1t()}var ube=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function P1t(t){var e=typeof t=="number"?ns[t]:t;return e=e.replace(ube,"(\\d+)"),new RegExp("^"+e+"$")}function R1t(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(ube)||[]).forEach(function(h,f){var g=parseInt(n[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":l=g;break;case"m":o>=0?a=g:i=g;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var C1t=(function(){var t={};t.version="1.2.0";function e(){for(var C=0,N=new Array(256),O=0;O!=256;++O)C=O,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,N[O]=C;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(C){var N=0,O=0,j=0,V=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(j=0;j!=256;++j)V[j]=C[j];for(j=0;j!=256;++j)for(O=C[j],N=256+j;N<4096;N+=256)O=V[N]=O>>>8^C[O&255];var G=[];for(j=1;j!=16;++j)G[j-1]=typeof Int32Array<"u"?V.subarray(j*256,j*256+256):V.slice(j*256,j*256+256);return G}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],f=i[7],g=i[8],v=i[9],x=i[10],b=i[11],T=i[12],A=i[13],I=i[14];function P(C,N){for(var O=N^-1,j=0,V=C.length;j<V;)O=O>>>8^n[(O^C.charCodeAt(j++))&255];return~O}function M(C,N){for(var O=N^-1,j=C.length-15,V=0;V<j;)O=I[C[V++]^O&255]^A[C[V++]^O>>8&255]^T[C[V++]^O>>16&255]^b[C[V++]^O>>>24]^x[C[V++]]^v[C[V++]]^g[C[V++]]^f[C[V++]]^h[C[V++]]^u[C[V++]]^c[C[V++]]^l[C[V++]]^a[C[V++]]^o[C[V++]]^s[C[V++]]^n[C[V++]];for(j+=15;V<j;)O=O>>>8^n[(O^C[V++])&255];return~O}function F(C,N){for(var O=N^-1,j=0,V=C.length,G=0,U=0;j<V;)G=C.charCodeAt(j++),G<128?O=O>>>8^n[(O^G)&255]:G<2048?(O=O>>>8^n[(O^(192|G>>6&31))&255],O=O>>>8^n[(O^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,U=C.charCodeAt(j++)&1023,O=O>>>8^n[(O^(240|G>>8&7))&255],O=O>>>8^n[(O^(128|G>>2&63))&255],O=O>>>8^n[(O^(128|U>>6&15|(G&3)<<4))&255],O=O>>>8^n[(O^(128|U&63))&255]):(O=O>>>8^n[(O^(224|G>>12&15))&255],O=O>>>8^n[(O^(128|G>>6&63))&255],O=O>>>8^n[(O^(128|G&63))&255]);return~O}return t.table=n,t.bstr=P,t.buf=M,t.str=F,t})(),Xr=(function(){var e={};e.version="1.2.1";function n(q,re){for(var J=q.split("/"),te=re.split("/"),se=0,oe=0,Pe=Math.min(J.length,te.length);se<Pe;++se){if(oe=J[se].length-te[se].length)return oe;if(J[se]!=te[se])return J[se]<te[se]?-1:1}return J.length-te.length}function r(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:r(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(0,re+1)}function i(q){if(q.charAt(q.length-1)=="/")return i(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(re+1)}function s(q,re){typeof re=="string"&&(re=new Date(re));var J=re.getHours();J=J<<6|re.getMinutes(),J=J<<5|re.getSeconds()>>>1,q.write_shift(2,J);var te=re.getFullYear()-1980;te=te<<4|re.getMonth()+1,te=te<<5|re.getDate(),q.write_shift(2,te)}function o(q){var re=q.read_shift(2)&65535,J=q.read_shift(2)&65535,te=new Date,se=J&31;J>>>=5;var oe=J&15;J>>>=4,te.setMilliseconds(0),te.setFullYear(J+1980),te.setMonth(oe-1),te.setDate(se);var Pe=re&31;re>>>=5;var Ge=re&63;return re>>>=6,te.setHours(re),te.setMinutes(Ge),te.setSeconds(Pe<<1),te}function a(q){Xl(q,0);for(var re={},J=0;q.l<=q.length-4;){var te=q.read_shift(2),se=q.read_shift(2),oe=q.l+se,Pe={};switch(te){case 21589:J=q.read_shift(1),J&1&&(Pe.mtime=q.read_shift(4)),se>5&&(J&2&&(Pe.atime=q.read_shift(4)),J&4&&(Pe.ctime=q.read_shift(4))),Pe.mtime&&(Pe.mt=new Date(Pe.mtime*1e3));break}q.l=oe,re[te]=Pe}return re}var l;function c(){return l||(l={})}function u(q,re){if(q[0]==80&&q[1]==75)return rn(q,re);if((q[0]|32)==109&&(q[1]|32)==105)return Je(q,re);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var J=3,te=512,se=0,oe=0,Pe=0,Ge=0,Ie=0,Ne=[],Oe=q.slice(0,512);Xl(Oe,0);var at=h(Oe);switch(J=at[0],J){case 3:te=512;break;case 4:te=4096;break;case 0:if(at[1]==0)return rn(q,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+J)}te!==512&&(Oe=q.slice(0,te),Xl(Oe,28));var gt=q.slice(0,te);f(Oe,J);var Rt=Oe.read_shift(4,"i");if(J===3&&Rt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Rt);Oe.l+=4,Pe=Oe.read_shift(4,"i"),Oe.l+=4,Oe.chk("00100000","Mini Stream Cutoff Size: "),Ge=Oe.read_shift(4,"i"),se=Oe.read_shift(4,"i"),Ie=Oe.read_shift(4,"i"),oe=Oe.read_shift(4,"i");for(var ct=-1,ut=0;ut<109&&(ct=Oe.read_shift(4,"i"),!(ct<0));++ut)Ne[ut]=ct;var wn=g(q,te);b(Ie,oe,wn,te,Ne);var Ir=A(wn,Pe,Ne,te);Ir[Pe].name="!Directory",se>0&&Ge!==U&&(Ir[Ge].name="!MiniFAT"),Ir[Ne[0]].name="!FAT",Ir.fat_addrs=Ne,Ir.ssz=te;var Dr={},yi=[],yu=[],yc=[];I(Pe,Ir,wn,yi,se,Dr,yu,Ge),v(yu,yc,yi),yi.shift();var Rl={FileIndex:yu,FullPaths:yc};return re&&re.raw&&(Rl.raw={header:gt,sectors:wn}),Rl}function h(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(fe,"Header Signature: "),q.l+=16;var re=q.read_shift(2,"u");return[q.read_shift(2,"u"),re]}function f(q,re){var J=9;switch(q.l+=2,J=q.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+J);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+J);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+J)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,re){for(var J=Math.ceil(q.length/re)-1,te=[],se=1;se<J;++se)te[se-1]=q.slice(se*re,(se+1)*re);return te[J-1]=q.slice(J*re),te}function v(q,re,J){for(var te=0,se=0,oe=0,Pe=0,Ge=0,Ie=J.length,Ne=[],Oe=[];te<Ie;++te)Ne[te]=Oe[te]=te,re[te]=J[te];for(;Ge<Oe.length;++Ge)te=Oe[Ge],se=q[te].L,oe=q[te].R,Pe=q[te].C,Ne[te]===te&&(se!==-1&&Ne[se]!==se&&(Ne[te]=Ne[se]),oe!==-1&&Ne[oe]!==oe&&(Ne[te]=Ne[oe])),Pe!==-1&&(Ne[Pe]=te),se!==-1&&te!=Ne[te]&&(Ne[se]=Ne[te],Oe.lastIndexOf(se)<Ge&&Oe.push(se)),oe!==-1&&te!=Ne[te]&&(Ne[oe]=Ne[te],Oe.lastIndexOf(oe)<Ge&&Oe.push(oe));for(te=1;te<Ie;++te)Ne[te]===te&&(oe!==-1&&Ne[oe]!==oe?Ne[te]=Ne[oe]:se!==-1&&Ne[se]!==se&&(Ne[te]=Ne[se]));for(te=1;te<Ie;++te)if(q[te].type!==0){if(Ge=te,Ge!=Ne[Ge])do Ge=Ne[Ge],re[te]=re[Ge]+"/"+re[te];while(Ge!==0&&Ne[Ge]!==-1&&Ge!=Ne[Ge]);Ne[te]=-1}for(re[0]+="/",te=1;te<Ie;++te)q[te].type!==2&&(re[te]+="/")}function x(q,re,J){for(var te=q.start,se=q.size,oe=[],Pe=te;J&&se>0&&Pe>=0;)oe.push(re.slice(Pe*G,Pe*G+G)),se-=G,Pe=Sy(J,Pe*4);return oe.length===0?Ue(0):Co(oe).slice(0,q.size)}function b(q,re,J,te,se){var oe=U;if(q===U){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var Pe=J[q],Ge=(te>>>2)-1;if(!Pe)return;for(var Ie=0;Ie<Ge&&(oe=Sy(Pe,Ie*4))!==U;++Ie)se.push(oe);b(Sy(Pe,te-4),re-1,J,te,se)}}function T(q,re,J,te,se){var oe=[],Pe=[];se||(se=[]);var Ge=te-1,Ie=0,Ne=0;for(Ie=re;Ie>=0;){se[Ie]=!0,oe[oe.length]=Ie,Pe.push(q[Ie]);var Oe=J[Math.floor(Ie*4/te)];if(Ne=Ie*4&Ge,te<4+Ne)throw new Error("FAT boundary crossed: "+Ie+" 4 "+te);if(!q[Oe])break;Ie=Sy(q[Oe],Ne)}return{nodes:oe,data:xoe([Pe])}}function A(q,re,J,te){var se=q.length,oe=[],Pe=[],Ge=[],Ie=[],Ne=te-1,Oe=0,at=0,gt=0,Rt=0;for(Oe=0;Oe<se;++Oe)if(Ge=[],gt=Oe+re,gt>=se&&(gt-=se),!Pe[gt]){Ie=[];var ct=[];for(at=gt;at>=0;){ct[at]=!0,Pe[at]=!0,Ge[Ge.length]=at,Ie.push(q[at]);var ut=J[Math.floor(at*4/te)];if(Rt=at*4&Ne,te<4+Rt)throw new Error("FAT boundary crossed: "+at+" 4 "+te);if(!q[ut]||(at=Sy(q[ut],Rt),ct[at]))break}oe[gt]={nodes:Ge,data:xoe([Ie])}}return oe}function I(q,re,J,te,se,oe,Pe,Ge){for(var Ie=0,Ne=te.length?2:0,Oe=re[q].data,at=0,gt=0,Rt;at<Oe.length;at+=128){var ct=Oe.slice(at,at+128);Xl(ct,64),gt=ct.read_shift(2),Rt=rq(ct,0,gt-Ne),te.push(Rt);var ut={name:Rt,type:ct.read_shift(1),color:ct.read_shift(1),L:ct.read_shift(4,"i"),R:ct.read_shift(4,"i"),C:ct.read_shift(4,"i"),clsid:ct.read_shift(16),state:ct.read_shift(4,"i"),start:0,size:0},wn=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);wn!==0&&(ut.ct=P(ct,ct.l-8));var Ir=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);Ir!==0&&(ut.mt=P(ct,ct.l-8)),ut.start=ct.read_shift(4,"i"),ut.size=ct.read_shift(4,"i"),ut.size<0&&ut.start<0&&(ut.size=ut.type=0,ut.start=U,ut.name=""),ut.type===5?(Ie=ut.start,se>0&&Ie!==U&&(re[Ie].name="!StreamData")):ut.size>=4096?(ut.storage="fat",re[ut.start]===void 0&&(re[ut.start]=T(J,ut.start,re.fat_addrs,re.ssz)),re[ut.start].name=ut.name,ut.content=re[ut.start].data.slice(0,ut.size)):(ut.storage="minifat",ut.size<0?ut.size=0:Ie!==U&&ut.start!==U&&re[Ie]&&(ut.content=x(ut,re[Ie].data,(re[Ge]||{}).data))),ut.content&&Xl(ut.content,0),oe[Rt]=ut,Pe.push(ut)}}function P(q,re){return new Date((tc(q,re+4)/1e7*Math.pow(2,32)+tc(q,re)/1e7-11644473600)*1e3)}function M(q,re){return c(),u(l.readFileSync(q),re)}function F(q,re){var J=re&&re.type;switch(J||Er&&Buffer.isBuffer(q)&&(J="buffer"),J||"base64"){case"file":return M(q,re);case"base64":return u(Ju(vp(q)),re);case"binary":return u(Ju(q),re)}return u(q,re)}function C(q,re){var J=re||{},te=J.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=te+"/",q.FileIndex[0]={name:te,type:5}),J.CLSID&&(q.FileIndex[0].clsid=J.CLSID),N(q)}function N(q){var re="Sh33tJ5";if(!Xr.find(q,"/"+re)){var J=Ue(4);J[0]=55,J[1]=J[3]=50,J[2]=54,q.FileIndex.push({name:re,type:2,content:J,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+re),O(q)}}function O(q,re){C(q);for(var J=!1,te=!1,se=q.FullPaths.length-1;se>=0;--se){var oe=q.FileIndex[se];switch(oe.type){case 0:te?J=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:te=!0,isNaN(oe.R*oe.L*oe.C)&&(J=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(J=!0);break;default:J=!0;break}}if(!(!J&&!re)){var Pe=new Date(1987,1,19),Ge=0,Ie=Object.create?Object.create(null):{},Ne=[];for(se=0;se<q.FullPaths.length;++se)Ie[q.FullPaths[se]]=!0,q.FileIndex[se].type!==0&&Ne.push([q.FullPaths[se],q.FileIndex[se]]);for(se=0;se<Ne.length;++se){var Oe=r(Ne[se][0]);te=Ie[Oe],te||(Ne.push([Oe,{name:i(Oe).replace("/",""),type:1,clsid:Be,ct:Pe,mt:Pe,content:null}]),Ie[Oe]=!0)}for(Ne.sort(function(Rt,ct){return n(Rt[0],ct[0])}),q.FullPaths=[],q.FileIndex=[],se=0;se<Ne.length;++se)q.FullPaths[se]=Ne[se][0],q.FileIndex[se]=Ne[se][1];for(se=0;se<Ne.length;++se){var at=q.FileIndex[se],gt=q.FullPaths[se];if(at.name=i(gt).replace("/",""),at.L=at.R=at.C=-(at.color=1),at.size=at.content?at.content.length:0,at.start=0,at.clsid=at.clsid||Be,se===0)at.C=Ne.length>1?1:-1,at.size=0,at.type=5;else if(gt.slice(-1)=="/"){for(Ge=se+1;Ge<Ne.length&&r(q.FullPaths[Ge])!=gt;++Ge);for(at.C=Ge>=Ne.length?-1:Ge,Ge=se+1;Ge<Ne.length&&r(q.FullPaths[Ge])!=r(gt);++Ge);at.R=Ge>=Ne.length?-1:Ge,at.type=1}else r(q.FullPaths[se+1]||"")==r(gt)&&(at.R=se+1),at.type=2}}}function j(q,re){var J=re||{};if(J.fileType=="mad")return ze(q,J);switch(O(q),J.fileType){case"zip":return bt(q,J)}var te=(function(Rt){for(var ct=0,ut=0,wn=0;wn<Rt.FileIndex.length;++wn){var Ir=Rt.FileIndex[wn];if(Ir.content){var Dr=Ir.content.length;Dr>0&&(Dr<4096?ct+=Dr+63>>6:ut+=Dr+511>>9)}}for(var yi=Rt.FullPaths.length+3>>2,yu=ct+7>>3,yc=ct+127>>7,Rl=yu+ut+yi+yc,is=Rl+127>>7,Pp=is<=109?0:Math.ceil((is-109)/127);Rl+is+Pp+127>>7>is;)Pp=++is<=109?0:Math.ceil((is-109)/127);var Ai=[1,Pp,is,yc,yi,ut,ct,0];return Rt.FileIndex[0].size=ct<<6,Ai[7]=(Rt.FileIndex[0].start=Ai[0]+Ai[1]+Ai[2]+Ai[3]+Ai[4]+Ai[5])+(Ai[6]+7>>3),Ai})(q),se=Ue(te[7]<<9),oe=0,Pe=0;{for(oe=0;oe<8;++oe)se.write_shift(1,Re[oe]);for(oe=0;oe<8;++oe)se.write_shift(2,0);for(se.write_shift(2,62),se.write_shift(2,3),se.write_shift(2,65534),se.write_shift(2,9),se.write_shift(2,6),oe=0;oe<3;++oe)se.write_shift(2,0);for(se.write_shift(4,0),se.write_shift(4,te[2]),se.write_shift(4,te[0]+te[1]+te[2]+te[3]-1),se.write_shift(4,0),se.write_shift(4,4096),se.write_shift(4,te[3]?te[0]+te[1]+te[2]-1:U),se.write_shift(4,te[3]),se.write_shift(-4,te[1]?te[0]-1:U),se.write_shift(4,te[1]),oe=0;oe<109;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1)}if(te[1])for(Pe=0;Pe<te[1];++Pe){for(;oe<236+Pe*127;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1);se.write_shift(-4,Pe===te[1]-1?U:Pe+1)}var Ge=function(Rt){for(Pe+=Rt;oe<Pe-1;++oe)se.write_shift(-4,oe+1);Rt&&(++oe,se.write_shift(-4,U))};for(Pe=oe=0,Pe+=te[1];oe<Pe;++oe)se.write_shift(-4,$e.DIFSECT);for(Pe+=te[2];oe<Pe;++oe)se.write_shift(-4,$e.FATSECT);Ge(te[3]),Ge(te[4]);for(var Ie=0,Ne=0,Oe=q.FileIndex[0];Ie<q.FileIndex.length;++Ie)Oe=q.FileIndex[Ie],Oe.content&&(Ne=Oe.content.length,!(Ne<4096)&&(Oe.start=Pe,Ge(Ne+511>>9)));for(Ge(te[6]+7>>3);se.l&511;)se.write_shift(-4,$e.ENDOFCHAIN);for(Pe=oe=0,Ie=0;Ie<q.FileIndex.length;++Ie)Oe=q.FileIndex[Ie],Oe.content&&(Ne=Oe.content.length,!(!Ne||Ne>=4096)&&(Oe.start=Pe,Ge(Ne+63>>6)));for(;se.l&511;)se.write_shift(-4,$e.ENDOFCHAIN);for(oe=0;oe<te[4]<<2;++oe){var at=q.FullPaths[oe];if(!at||at.length===0){for(Ie=0;Ie<17;++Ie)se.write_shift(4,0);for(Ie=0;Ie<3;++Ie)se.write_shift(4,-1);for(Ie=0;Ie<12;++Ie)se.write_shift(4,0);continue}Oe=q.FileIndex[oe],oe===0&&(Oe.start=Oe.size?Oe.start-1:U);var gt=oe===0&&J.root||Oe.name;if(Ne=2*(gt.length+1),se.write_shift(64,gt,"utf16le"),se.write_shift(2,Ne),se.write_shift(1,Oe.type),se.write_shift(1,Oe.color),se.write_shift(-4,Oe.L),se.write_shift(-4,Oe.R),se.write_shift(-4,Oe.C),Oe.clsid)se.write_shift(16,Oe.clsid,"hex");else for(Ie=0;Ie<4;++Ie)se.write_shift(4,0);se.write_shift(4,Oe.state||0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,Oe.start),se.write_shift(4,Oe.size),se.write_shift(4,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(Oe=q.FileIndex[oe],Oe.size>=4096)if(se.l=Oe.start+1<<9,Er&&Buffer.isBuffer(Oe.content))Oe.content.copy(se,se.l,0,Oe.size),se.l+=Oe.size+511&-512;else{for(Ie=0;Ie<Oe.size;++Ie)se.write_shift(1,Oe.content[Ie]);for(;Ie&511;++Ie)se.write_shift(1,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(Oe=q.FileIndex[oe],Oe.size>0&&Oe.size<4096)if(Er&&Buffer.isBuffer(Oe.content))Oe.content.copy(se,se.l,0,Oe.size),se.l+=Oe.size+63&-64;else{for(Ie=0;Ie<Oe.size;++Ie)se.write_shift(1,Oe.content[Ie]);for(;Ie&63;++Ie)se.write_shift(1,0)}if(Er)se.l=se.length;else for(;se.l<se.length;)se.write_shift(1,0);return se}function V(q,re){var J=q.FullPaths.map(function(Ie){return Ie.toUpperCase()}),te=J.map(function(Ie){var Ne=Ie.split("/");return Ne[Ne.length-(Ie.slice(-1)=="/"?2:1)]}),se=!1;re.charCodeAt(0)===47?(se=!0,re=J[0].slice(0,-1)+re):se=re.indexOf("/")!==-1;var oe=re.toUpperCase(),Pe=se===!0?J.indexOf(oe):te.indexOf(oe);if(Pe!==-1)return q.FileIndex[Pe];var Ge=!oe.match(gC);for(oe=oe.replace(BT,""),Ge&&(oe=oe.replace(gC,"!")),Pe=0;Pe<J.length;++Pe)if((Ge?J[Pe].replace(gC,"!"):J[Pe]).replace(BT,"")==oe||(Ge?te[Pe].replace(gC,"!"):te[Pe]).replace(BT,"")==oe)return q.FileIndex[Pe];return null}var G=64,U=-2,fe="d0cf11e0a1b11ae1",Re=[208,207,17,224,161,177,26,225],Be="00000000000000000000000000000000",$e={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:fe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Be,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function pe(q,re,J){c();var te=j(q,J);l.writeFileSync(re,te)}function De(q){for(var re=new Array(q.length),J=0;J<q.length;++J)re[J]=String.fromCharCode(q[J]);return re.join("")}function Me(q,re){var J=j(q,re);switch(re&&re.type||"buffer"){case"file":return c(),l.writeFileSync(re.filename,J),J;case"binary":return typeof J=="string"?J:De(J);case"base64":return pA(typeof J=="string"?J:De(J));case"buffer":if(Er)return Buffer.isBuffer(J)?J:Ip(J);case"array":return typeof J=="string"?Ju(J):J}return J}var Q;function W(q){try{var re=q.InflateRaw,J=new re;if(J._processChunk(new Uint8Array([3,0]),J._finishFlushFlag),J.bytesRead)Q=q;else throw new Error("zlib does not expose bytesRead")}catch(te){console.error("cannot use native zlib: "+(te.message||te))}}function ne(q,re){if(!Q)return ke(q,re);var J=Q.InflateRaw,te=new J,se=te._processChunk(q.slice(q.l),te._finishFlushFlag);return q.l+=te.bytesRead,se}function ie(q){return Q?Q.deflateRawSync(q):Ln(q)}var le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],qe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ke(q){var re=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(re>>16|re>>8|re)&255}for(var Se=typeof Uint8Array<"u",we=Se?new Uint8Array(256):[],Dt=0;Dt<256;++Dt)we[Dt]=Ke(Dt);function Ye(q,re){var J=we[q&255];return re<=8?J>>>8-re:(J=J<<8|we[q>>8&255],re<=16?J>>>16-re:(J=J<<8|we[q>>16&255],J>>>24-re))}function sn(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=6?0:q[te+1]<<8))>>>J&3}function $t(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=5?0:q[te+1]<<8))>>>J&7}function fn(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=4?0:q[te+1]<<8))>>>J&15}function yn(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=3?0:q[te+1]<<8))>>>J&31}function dt(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=1?0:q[te+1]<<8))>>>J&127}function ur(q,re,J){var te=re&7,se=re>>>3,oe=(1<<J)-1,Pe=q[se]>>>te;return J<8-te||(Pe|=q[se+1]<<8-te,J<16-te)||(Pe|=q[se+2]<<16-te,J<24-te)||(Pe|=q[se+3]<<24-te),Pe&oe}function jn(q,re,J){var te=re&7,se=re>>>3;return te<=5?q[se]|=(J&7)<<te:(q[se]|=J<<te&255,q[se+1]=(J&7)>>8-te),re+3}function Un(q,re,J){var te=re&7,se=re>>>3;return J=(J&1)<<te,q[se]|=J,re+1}function Qr(q,re,J){var te=re&7,se=re>>>3;return J<<=te,q[se]|=J&255,J>>>=8,q[se+1]=J,re+8}function go(q,re,J){var te=re&7,se=re>>>3;return J<<=te,q[se]|=J&255,J>>>=8,q[se+1]=J&255,q[se+2]=J>>>8,re+16}function Ar(q,re){var J=q.length,te=2*J>re?2*J:re+5,se=0;if(J>=re)return q;if(Er){var oe=soe(te);if(q.copy)q.copy(oe);else for(;se<q.length;++se)oe[se]=q[se];return oe}else if(Se){var Pe=new Uint8Array(te);if(Pe.set)Pe.set(q);else for(;se<J;++se)Pe[se]=q[se];return Pe}return q.length=te,q}function Ti(q){for(var re=new Array(q),J=0;J<q;++J)re[J]=0;return re}function Cs(q,re,J){var te=1,se=0,oe=0,Pe=0,Ge=0,Ie=q.length,Ne=Se?new Uint16Array(32):Ti(32);for(oe=0;oe<32;++oe)Ne[oe]=0;for(oe=Ie;oe<J;++oe)q[oe]=0;Ie=q.length;var Oe=Se?new Uint16Array(Ie):Ti(Ie);for(oe=0;oe<Ie;++oe)Ne[se=q[oe]]++,te<se&&(te=se),Oe[oe]=0;for(Ne[0]=0,oe=1;oe<=te;++oe)Ne[oe+16]=Ge=Ge+Ne[oe-1]<<1;for(oe=0;oe<Ie;++oe)Ge=q[oe],Ge!=0&&(Oe[oe]=Ne[Ge+16]++);var at=0;for(oe=0;oe<Ie;++oe)if(at=q[oe],at!=0)for(Ge=Ye(Oe[oe],te)>>te-at,Pe=(1<<te+4-at)-1;Pe>=0;--Pe)re[Ge|Pe<<at]=at&15|oe<<4;return te}var wt=Se?new Uint16Array(512):Ti(512),Xn=Se?new Uint16Array(32):Ti(32);if(!Se){for(var hr=0;hr<512;++hr)wt[hr]=0;for(hr=0;hr<32;++hr)Xn[hr]=0}(function(){for(var q=[],re=0;re<32;re++)q.push(5);Cs(q,Xn,32);var J=[];for(re=0;re<=143;re++)J.push(8);for(;re<=255;re++)J.push(9);for(;re<=279;re++)J.push(7);for(;re<=287;re++)J.push(8);Cs(J,wt,288)})();var Ft=(function(){for(var re=Se?new Uint8Array(32768):[],J=0,te=0;J<qe.length-1;++J)for(;te<qe[J+1];++te)re[te]=J;for(;te<32768;++te)re[te]=29;var se=Se?new Uint8Array(259):[];for(J=0,te=0;J<ve.length-1;++J)for(;te<ve[J+1];++te)se[te]=J;function oe(Ge,Ie){for(var Ne=0;Ne<Ge.length;){var Oe=Math.min(65535,Ge.length-Ne),at=Ne+Oe==Ge.length;for(Ie.write_shift(1,+at),Ie.write_shift(2,Oe),Ie.write_shift(2,~Oe&65535);Oe-- >0;)Ie[Ie.l++]=Ge[Ne++]}return Ie.l}function Pe(Ge,Ie){for(var Ne=0,Oe=0,at=Se?new Uint16Array(32768):[];Oe<Ge.length;){var gt=Math.min(65535,Ge.length-Oe);if(gt<10){for(Ne=jn(Ie,Ne,+(Oe+gt==Ge.length)),Ne&7&&(Ne+=8-(Ne&7)),Ie.l=Ne/8|0,Ie.write_shift(2,gt),Ie.write_shift(2,~gt&65535);gt-- >0;)Ie[Ie.l++]=Ge[Oe++];Ne=Ie.l*8;continue}Ne=jn(Ie,Ne,+(Oe+gt==Ge.length)+2);for(var Rt=0;gt-- >0;){var ct=Ge[Oe];Rt=(Rt<<5^ct)&32767;var ut=-1,wn=0;if((ut=at[Rt])&&(ut|=Oe&-32768,ut>Oe&&(ut-=32768),ut<Oe))for(;Ge[ut+wn]==Ge[Oe+wn]&&wn<250;)++wn;if(wn>2){ct=se[wn],ct<=22?Ne=Qr(Ie,Ne,we[ct+1]>>1)-1:(Qr(Ie,Ne,3),Ne+=5,Qr(Ie,Ne,we[ct-23]>>5),Ne+=3);var Ir=ct<8?0:ct-4>>2;Ir>0&&(go(Ie,Ne,wn-ve[ct]),Ne+=Ir),ct=re[Oe-ut],Ne=Qr(Ie,Ne,we[ct]>>3),Ne-=3;var Dr=ct<4?0:ct-2>>1;Dr>0&&(go(Ie,Ne,Oe-ut-qe[ct]),Ne+=Dr);for(var yi=0;yi<wn;++yi)at[Rt]=Oe&32767,Rt=(Rt<<5^Ge[Oe])&32767,++Oe;gt-=wn-1}else ct<=143?ct=ct+48:Ne=Un(Ie,Ne,1),Ne=Qr(Ie,Ne,we[ct]),at[Rt]=Oe&32767,++Oe}Ne=Qr(Ie,Ne,0)-1}return Ie.l=(Ne+7)/8|0,Ie.l}return function(Ie,Ne){return Ie.length<8?oe(Ie,Ne):Pe(Ie,Ne)}})();function Ln(q){var re=Ue(50+Math.floor(q.length*1.1)),J=Ft(q,re);return re.slice(0,J)}var Qt=Se?new Uint16Array(32768):Ti(32768),Lo=Se?new Uint16Array(32768):Ti(32768),Vi=Se?new Uint16Array(128):Ti(128),Ms=1,Mn=1;function ki(q,re){var J=yn(q,re)+257;re+=5;var te=yn(q,re)+1;re+=5;var se=fn(q,re)+4;re+=4;for(var oe=0,Pe=Se?new Uint8Array(19):Ti(19),Ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ie=1,Ne=Se?new Uint8Array(8):Ti(8),Oe=Se?new Uint8Array(8):Ti(8),at=Pe.length,gt=0;gt<se;++gt)Pe[le[gt]]=oe=$t(q,re),Ie<oe&&(Ie=oe),Ne[oe]++,re+=3;var Rt=0;for(Ne[0]=0,gt=1;gt<=Ie;++gt)Oe[gt]=Rt=Rt+Ne[gt-1]<<1;for(gt=0;gt<at;++gt)(Rt=Pe[gt])!=0&&(Ge[gt]=Oe[Rt]++);var ct=0;for(gt=0;gt<at;++gt)if(ct=Pe[gt],ct!=0){Rt=we[Ge[gt]]>>8-ct;for(var ut=(1<<7-ct)-1;ut>=0;--ut)Vi[Rt|ut<<ct]=ct&7|gt<<3}var wn=[];for(Ie=1;wn.length<J+te;)switch(Rt=Vi[dt(q,re)],re+=Rt&7,Rt>>>=3){case 16:for(oe=3+sn(q,re),re+=2,Rt=wn[wn.length-1];oe-- >0;)wn.push(Rt);break;case 17:for(oe=3+$t(q,re),re+=3;oe-- >0;)wn.push(0);break;case 18:for(oe=11+dt(q,re),re+=7;oe-- >0;)wn.push(0);break;default:wn.push(Rt),Ie<Rt&&(Ie=Rt);break}var Ir=wn.slice(0,J),Dr=wn.slice(J);for(gt=J;gt<286;++gt)Ir[gt]=0;for(gt=te;gt<30;++gt)Dr[gt]=0;return Ms=Cs(Ir,Qt,286),Mn=Cs(Dr,Lo,30),re}function He(q,re){if(q[0]==3&&!(q[1]&3))return[q1(re),2];for(var J=0,te=0,se=soe(re||1<<18),oe=0,Pe=se.length>>>0,Ge=0,Ie=0;(te&1)==0;){if(te=$t(q,J),J+=3,te>>>1)te>>1==1?(Ge=9,Ie=5):(J=ki(q,J),Ge=Ms,Ie=Mn);else{J&7&&(J+=8-(J&7));var Ne=q[J>>>3]|q[(J>>>3)+1]<<8;if(J+=32,Ne>0)for(!re&&Pe<oe+Ne&&(se=Ar(se,oe+Ne),Pe=se.length);Ne-- >0;)se[oe++]=q[J>>>3],J+=8;continue}for(;;){!re&&Pe<oe+32767&&(se=Ar(se,oe+32767),Pe=se.length);var Oe=ur(q,J,Ge),at=te>>>1==1?wt[Oe]:Qt[Oe];if(J+=at&15,at>>>=4,(at>>>8&255)===0)se[oe++]=at;else{if(at==256)break;at-=257;var gt=at<8?0:at-4>>2;gt>5&&(gt=0);var Rt=oe+ve[at];gt>0&&(Rt+=ur(q,J,gt),J+=gt),Oe=ur(q,J,Ie),at=te>>>1==1?Xn[Oe]:Lo[Oe],J+=at&15,at>>>=4;var ct=at<4?0:at-2>>1,ut=qe[at];for(ct>0&&(ut+=ur(q,J,ct),J+=ct),!re&&Pe<Rt&&(se=Ar(se,Rt+100),Pe=se.length);oe<Rt;)se[oe]=se[oe-ut],++oe}}}return re?[se,J+7>>>3]:[se.slice(0,oe),J+7>>>3]}function ke(q,re){var J=q.slice(q.l||0),te=He(J,re);return q.l+=te[1],te[0]}function Ae(q,re){if(q)typeof console<"u"&&console.error(re);else throw new Error(re)}function rn(q,re){var J=q;Xl(J,0);var te=[],se=[],oe={FileIndex:te,FullPaths:se};C(oe,{root:re.root});for(var Pe=J.length-4;(J[Pe]!=80||J[Pe+1]!=75||J[Pe+2]!=5||J[Pe+3]!=6)&&Pe>=0;)--Pe;J.l=Pe+4,J.l+=4;var Ge=J.read_shift(2);J.l+=6;var Ie=J.read_shift(4);for(J.l=Ie,Pe=0;Pe<Ge;++Pe){J.l+=20;var Ne=J.read_shift(4),Oe=J.read_shift(4),at=J.read_shift(2),gt=J.read_shift(2),Rt=J.read_shift(2);J.l+=8;var ct=J.read_shift(4),ut=a(J.slice(J.l+at,J.l+at+gt));J.l+=at+gt+Rt;var wn=J.l;J.l=ct+4,z(J,Ne,Oe,oe,ut),J.l=wn}return oe}function z(q,re,J,te,se){q.l+=2;var oe=q.read_shift(2),Pe=q.read_shift(2),Ge=o(q);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var Ie=q.read_shift(4),Ne=q.read_shift(4),Oe=q.read_shift(4),at=q.read_shift(2),gt=q.read_shift(2),Rt="",ct=0;ct<at;++ct)Rt+=String.fromCharCode(q[q.l++]);if(gt){var ut=a(q.slice(q.l,q.l+gt));(ut[21589]||{}).mt&&(Ge=ut[21589].mt),((se||{})[21589]||{}).mt&&(Ge=se[21589].mt)}q.l+=gt;var wn=q.slice(q.l,q.l+Ne);switch(Pe){case 8:wn=ne(q,Oe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Pe)}var Ir=!1;oe&8&&(Ie=q.read_shift(4),Ie==134695760&&(Ie=q.read_shift(4),Ir=!0),Ne=q.read_shift(4),Oe=q.read_shift(4)),Ne!=re&&Ae(Ir,"Bad compressed size: "+re+" != "+Ne),Oe!=J&&Ae(Ir,"Bad uncompressed size: "+J+" != "+Oe),et(te,Rt,wn,{unsafe:!0,mt:Ge})}function bt(q,re){var J=re||{},te=[],se=[],oe=Ue(1),Pe=J.compression?8:0,Ge=0,Ie=0,Ne=0,Oe=0,at=0,gt=q.FullPaths[0],Rt=gt,ct=q.FileIndex[0],ut=[],wn=0;for(Ie=1;Ie<q.FullPaths.length;++Ie)if(Rt=q.FullPaths[Ie].slice(gt.length),ct=q.FileIndex[Ie],!(!ct.size||!ct.content||Rt=="Sh33tJ5")){var Ir=Oe,Dr=Ue(Rt.length);for(Ne=0;Ne<Rt.length;++Ne)Dr.write_shift(1,Rt.charCodeAt(Ne)&127);Dr=Dr.slice(0,Dr.l),ut[at]=C1t.buf(ct.content,0);var yi=ct.content;Pe==8&&(yi=ie(yi)),oe=Ue(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,Ge),oe.write_shift(2,Pe),ct.mt?s(oe,ct.mt):oe.write_shift(4,0),oe.write_shift(-4,ut[at]),oe.write_shift(4,yi.length),oe.write_shift(4,ct.content.length),oe.write_shift(2,Dr.length),oe.write_shift(2,0),Oe+=oe.length,te.push(oe),Oe+=Dr.length,te.push(Dr),Oe+=yi.length,te.push(yi),oe=Ue(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,Ge),oe.write_shift(2,Pe),oe.write_shift(4,0),oe.write_shift(-4,ut[at]),oe.write_shift(4,yi.length),oe.write_shift(4,ct.content.length),oe.write_shift(2,Dr.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Ir),wn+=oe.l,se.push(oe),wn+=Dr.length,se.push(Dr),++at}return oe=Ue(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,at),oe.write_shift(2,at),oe.write_shift(4,wn),oe.write_shift(4,Oe),oe.write_shift(2,0),Co([Co(te),Co(se),oe])}var Y={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(q,re){if(q.ctype)return q.ctype;var J=q.name||"",te=J.match(/\.([^\.]+)$/);return te&&Y[te[1]]||re&&(te=(J=re).match(/[\.\\]([^\.\\])+$/),te&&Y[te[1]])?Y[te[1]]:"application/octet-stream"}function Ve(q){for(var re=pA(q),J=[],te=0;te<re.length;te+=76)J.push(re.slice(te,te+76));return J.join(`\r
`)+`\r
`}function ee(q){var re=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ne){var Oe=Ne.charCodeAt(0).toString(16).toUpperCase();return"="+(Oe.length==1?"0"+Oe:Oe)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var J=[],te=re.split(`\r
`),se=0;se<te.length;++se){var oe=te[se];if(oe.length==0){J.push("");continue}for(var Pe=0;Pe<oe.length;){var Ge=76,Ie=oe.slice(Pe,Pe+Ge);Ie.charAt(Ge-1)=="="?Ge--:Ie.charAt(Ge-2)=="="?Ge-=2:Ie.charAt(Ge-3)=="="&&(Ge-=3),Ie=oe.slice(Pe,Pe+Ge),Pe+=Ge,Pe<oe.length&&(Ie+="="),J.push(Ie)}}return J.join(`\r
`)}function ge(q){for(var re=[],J=0;J<q.length;++J){for(var te=q[J];J<=q.length&&te.charAt(te.length-1)=="=";)te=te.slice(0,te.length-1)+q[++J];re.push(te)}for(var se=0;se<re.length;++se)re[se]=re[se].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return Ju(re.join(`\r
`))}function Le(q,re,J){for(var te="",se="",oe="",Pe,Ge=0;Ge<10;++Ge){var Ie=re[Ge];if(!Ie||Ie.match(/^\s*$/))break;var Ne=Ie.match(/^(.*?):\s*([^\s].*)$/);if(Ne)switch(Ne[1].toLowerCase()){case"content-location":te=Ne[2].trim();break;case"content-type":oe=Ne[2].trim();break;case"content-transfer-encoding":se=Ne[2].trim();break}}switch(++Ge,se.toLowerCase()){case"base64":Pe=Ju(vp(re.slice(Ge).join("")));break;case"quoted-printable":Pe=ge(re.slice(Ge));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+se)}var Oe=et(q,te.slice(J.length),Pe,{unsafe:!0});oe&&(Oe.ctype=oe)}function Je(q,re){if(De(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var J=re&&re.root||"",te=(Er&&Buffer.isBuffer(q)?q.toString("binary"):De(q)).split(`\r
`),se=0,oe="";for(se=0;se<te.length;++se)if(oe=te[se],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),J||(J=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,J.length)!=J))for(;J.length>0&&(J=J.slice(0,J.length-1),J=J.slice(0,J.lastIndexOf("/")+1),oe.slice(0,J.length)!=J););var Pe=(te[1]||"").match(/boundary="(.*?)"/);if(!Pe)throw new Error("MAD cannot find boundary");var Ge="--"+(Pe[1]||""),Ie=[],Ne=[],Oe={FileIndex:Ie,FullPaths:Ne};C(Oe);var at,gt=0;for(se=0;se<te.length;++se){var Rt=te[se];Rt!==Ge&&Rt!==Ge+"--"||(gt++&&Le(Oe,te.slice(at,se),J),at=se)}return Oe}function ze(q,re){var J=re||{},te=J.boundary||"SheetJS";te="------="+te;for(var se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+te.slice(2)+'"',"","",""],oe=q.FullPaths[0],Pe=oe,Ge=q.FileIndex[0],Ie=1;Ie<q.FullPaths.length;++Ie)if(Pe=q.FullPaths[Ie].slice(oe.length),Ge=q.FileIndex[Ie],!(!Ge.size||!Ge.content||Pe=="Sh33tJ5")){Pe=Pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(wn){return"_x"+wn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(wn){return"_u"+wn.charCodeAt(0).toString(16)+"_"});for(var Ne=Ge.content,Oe=Er&&Buffer.isBuffer(Ne)?Ne.toString("binary"):De(Ne),at=0,gt=Math.min(1024,Oe.length),Rt=0,ct=0;ct<=gt;++ct)(Rt=Oe.charCodeAt(ct))>=32&&Rt<128&&++at;var ut=at>=gt*4/5;se.push(te),se.push("Content-Location: "+(J.root||"file:///C:/SheetJS/")+Pe),se.push("Content-Transfer-Encoding: "+(ut?"quoted-printable":"base64")),se.push("Content-Type: "+ae(Ge,Pe)),se.push(""),se.push(ut?ee(Oe):Ve(Oe))}return se.push(te+`--\r
`),se.join(`\r
`)}function nt(q){var re={};return C(re,q),re}function et(q,re,J,te){var se=te&&te.unsafe;se||C(q);var oe=!se&&Xr.find(q,re);if(!oe){var Pe=q.FullPaths[0];re.slice(0,Pe.length)==Pe?Pe=re:(Pe.slice(-1)!="/"&&(Pe+="/"),Pe=(Pe+re).replace("//","/")),oe={name:i(re),type:2},q.FileIndex.push(oe),q.FullPaths.push(Pe),se||Xr.utils.cfb_gc(q)}return oe.content=J,oe.size=J?J.length:0,te&&(te.CLSID&&(oe.clsid=te.CLSID),te.mt&&(oe.mt=te.mt),te.ct&&(oe.ct=te.ct)),oe}function Mt(q,re){C(q);var J=Xr.find(q,re);if(J){for(var te=0;te<q.FileIndex.length;++te)if(q.FileIndex[te]==J)return q.FileIndex.splice(te,1),q.FullPaths.splice(te,1),!0}return!1}function zt(q,re,J){C(q);var te=Xr.find(q,re);if(te){for(var se=0;se<q.FileIndex.length;++se)if(q.FileIndex[se]==te)return q.FileIndex[se].name=i(J),q.FullPaths[se]=J,!0}return!1}function gn(q){O(q,!0)}return e.find=V,e.read=F,e.parse=u,e.write=Me,e.writeFile=pe,e.utils={cfb_new:nt,cfb_add:et,cfb_del:Mt,cfb_mov:zt,cfb_gc:gn,ReadShift:HT,CheckField:Ibe,prep_blob:Xl,bconcat:Co,use_zlib:W,_deflateRaw:Ln,_inflateRaw:ke,consts:$e},e})();function M1t(t){return typeof t=="string"?vL(t):Array.isArray(t)?i1t(t):t}function zI(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=vL(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?gA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([M1t(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=VI(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Oo(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function foe(t,e){for(var n=[],r=Oo(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function QH(t){for(var e=[],n=Oo(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function wL(t){for(var e=[],n=Oo(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function N1t(t){for(var e=[],n=Oo(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var BN=new Date(1899,11,30,0,0,0);function kl(t,e){var n=t.getTime(),r=BN.getTime()+(t.getTimezoneOffset()-BN.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var hbe=new Date,O1t=BN.getTime()+(hbe.getTimezoneOffset()-BN.getTimezoneOffset())*6e4,poe=hbe.getTimezoneOffset();function dbe(t){var e=new Date;return e.setTime(t*24*60*60*1e3+O1t),e.getTimezoneOffset()!==poe&&e.setTime(e.getTime()+(e.getTimezoneOffset()-poe)*6e4),e}var moe=new Date("2017-02-19T19:06:09.000Z"),fbe=isNaN(moe.getFullYear())?new Date("2/19/17"):moe,L1t=fbe.getFullYear()==2017;function $a(t,e){var n=new Date(t);if(L1t)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(fbe.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function bL(t,e){if(Er&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Al(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Al(t[n]));return e}function Xi(t,e){for(var n="";n.length<e;)n+=t;return n}function sp(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var D1t=["january","february","march","april","may","june","july","august","september","october","november","december"];function mA(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&D1t.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function Vn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Er?r=Ip(n):r=s1t(n),Xr.utils.cfb_add(t,e,r)}Xr.utils.cfb_add(t,e,n)}else t.file(e,n)}function eq(){return Xr.utils.cfb_new()}var Rs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,$1t={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},tq=QH($1t),nq=/[&<>'"]/g,j1t=/[\u0000-\u0008\u000b-\u001f]/g;function Wr(t){var e=t+"";return e.replace(nq,function(n){return tq[n]}).replace(j1t,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function goe(t){return Wr(t).replace(/ /g,"_x0020_")}var pbe=/[\u0000-\u001f]/g;function F1t(t){var e=t+"";return e.replace(nq,function(n){return tq[n]}).replace(/\n/g,"<br/>").replace(pbe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function V1t(t){var e=t+"";return e.replace(nq,function(n){return tq[n]}).replace(pbe,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function z1t(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function U1t(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Uj(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function yoe(t){var e=q1(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function voe(t){return Ip(t,"binary").toString("utf8")}var vC="foo bar baz",WT=Er&&(voe(vC)==Uj(vC)&&voe||yoe(vC)==Uj(vC)&&yoe)||Uj,gA=Er?function(t){return Ip(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},G1t=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),mbe=/(^\s|\s$|\n)/;function Mo(t,e){return"<"+t+(e.match(mbe)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function yA(t){return Oo(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function yt(t,e,n){return"<"+t+(n!=null?yA(n):"")+(e!=null?(e.match(mbe)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function bz(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function B1t(t,e){switch(typeof t){case"string":var n=yt("vt:lpwstr",Wr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return yt((t|0)==t?"vt:i4":"vt:r8",Wr(String(t)));case"boolean":return yt("vt:bool",t?"true":"false")}if(t instanceof Date)return yt("vt:filetime",bz(t));throw new Error("Unable to serialize "+t)}var so={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},xb=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ec={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function W1t(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function H1t(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var _oe=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},xoe=Er?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ip(e)})):_oe(t)}:_oe,woe=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(US(t,i)));return r.join("").replace(BT,"")},rq=Er?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(BT,""):woe(t,e,n)}:woe,boe=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},gbe=Er?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):boe(t,e,n)}:boe,Eoe=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(dx(t,i)));return r.join("")},UI=Er?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):Eoe(e,n,r)}:Eoe,ybe=function(t,e){var n=tc(t,e);return n>0?UI(t,e+4,e+4+n-1):""},vbe=ybe,_be=function(t,e){var n=tc(t,e);return n>0?UI(t,e+4,e+4+n-1):""},xbe=_be,wbe=function(t,e){var n=2*tc(t,e);return n>0?UI(t,e+4,e+4+n-1):""},bbe=wbe,Ebe=function(e,n){var r=tc(e,n);return r>0?rq(e,n+4,n+4+r):""},Sbe=Ebe,Tbe=function(t,e){var n=tc(t,e);return n>0?UI(t,e+4,e+4+n):""},kbe=Tbe,Abe=function(t,e){return W1t(t,e)},WN=Abe,iq=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Er&&(vbe=function(e,n){if(!Buffer.isBuffer(e))return ybe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},xbe=function(e,n){if(!Buffer.isBuffer(e))return _be(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},bbe=function(e,n){if(!Buffer.isBuffer(e))return wbe(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},Sbe=function(e,n){if(!Buffer.isBuffer(e))return Ebe(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},kbe=function(e,n){if(!Buffer.isBuffer(e))return Tbe(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},WN=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):Abe(e,n)},iq=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var dx=function(t,e){return t[e]},US=function(t,e){return t[e+1]*256+t[e]},q1t=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},tc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Sy=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},K1t=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function HT(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,Er&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(US(this,c)),c+=2;t*=2;break;case"utf8":n=UI(this,this.l,this.l+t);break;case"utf16le":t*=2,n=rq(this,this.l,this.l+t);break;case"wstr":return HT.call(this,t,"dbcs");case"lpstr-ansi":n=vbe(this,this.l),t=4+tc(this,this.l);break;case"lpstr-cp":n=xbe(this,this.l),t=4+tc(this,this.l);break;case"lpwstr":n=bbe(this,this.l),t=4+2*tc(this,this.l);break;case"lpp4":t=4+tc(this,this.l),n=Sbe(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+tc(this,this.l),n=kbe(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=dx(this,this.l+t++))!==0;)s.push(mC(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=US(this,this.l+t))!==0;)s.push(mC(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=dx(this,c),this.l=c+1,a=HT.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(mC(US(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=dx(this,c),this.l=c+1,a=HT.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(mC(dx(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=dx(this,this.l),this.l++,r;case 2:return r=(e==="i"?q1t:US)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Sy:K1t)(this,this.l),this.l+=4,r):(i=tc(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=WN(this,this.l):i=WN([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=gbe(this,this.l,t);break}}return this.l+=t,n}var Y1t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},X1t=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Z1t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function J1t(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)Z1t(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Y1t(this,e,this.l);break;case 8:if(r=8,n==="f"){H1t(this,e,this.l);break}case 16:break;case-4:r=4,X1t(this,e,this.l);break}return this.l+=r,this}function Ibe(t,e){var n=gbe(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Xl(t,e){t.l=e,t.read_shift=HT,t.chk=Ibe,t.write_shift=J1t}function Dd(t,e){t.l+=e}function Ue(t){var e=q1(t);return Xl(e,0),e}function wl(){var t=[],e=Er?256:2048,n=function(c){var u=Ue(c);return Xl(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),Co(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function tt(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=Wbt[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&iq(n)&&t.push(n)}}function qT(t,e,n){var r=Al(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Soe(t,e,n){var r=Al(t);return r.s=qT(r.s,e.s,n),r.e=qT(r.e,e.s,n),r}function KT(t,e){if(t.cRel&&t.c<0)for(t=Al(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Al(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=qr(t);return!t.cRel&&t.cRel!=null&&(n=tvt(n)),!t.rRel&&t.rRel!=null&&(n=Q1t(n)),n}function Gj(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+ya(t.s.c)+":"+(t.e.cRel?"":"$")+ya(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+No(t.s.r)+":"+(t.e.rRel?"":"$")+No(t.e.r):KT(t.s,e.biff)+":"+KT(t.e,e.biff)}function sq(t){return parseInt(evt(t),10)-1}function No(t){return""+(t+1)}function Q1t(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function evt(t){return t.replace(/\$(\d+)$/,"$1")}function oq(t){for(var e=nvt(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function ya(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function tvt(t){return t.replace(/^([A-Z])/,"$$$1")}function nvt(t){return t.replace(/^\$([A-Z])/,"$1")}function rvt(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ao(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function qr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function gc(t){var e=t.indexOf(":");return e==-1?{s:ao(t),e:ao(t)}:{s:ao(t.slice(0,e)),e:ao(t.slice(e+1))}}function Is(t,e){return typeof e>"u"||typeof e=="number"?Is(t.s,t.e):(typeof t!="string"&&(t=qr(t)),typeof e!="string"&&(e=qr(e)),t==e?t:t+":"+e)}function gi(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function Toe(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=qg(t.z,n?kl(e):e)}catch{}try{return t.w=qg((t.XF||{}).numFmtId||(n?14:0),n?kl(e):e)}catch{return""+e}}function _p(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?GI[t.v]||t.v:e==null?Toe(t,t.v):Toe(t,e))}function fv(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function Pbe(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?ao(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=gi(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var g={v:e[h][f]},v=o+h,x=a+f;if(c.s.r>v&&(c.s.r=v),c.s.c>x&&(c.s.c=x),c.e.r<v&&(c.e.r=v),c.e.c<x&&(c.e.c=x),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))g=e[h][f];else if(Array.isArray(g.v)&&(g.f=e[h][f][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||ns[14],r.cellDates?(g.t="d",g.w=qg(g.z,kl(g.v))):(g.t="n",g.v=kl(g.v),g.w=qg(g.z,g.v))):g.t="s";if(i)s[v]||(s[v]=[]),s[v][x]&&s[v][x].z&&(g.z=s[v][x].z),s[v][x]=g;else{var b=qr({c:x,r:v});s[b]&&s[b].z&&(g.z=s[b].z),s[b]=g}}}return c.s.c<1e7&&(s["!ref"]=Is(c)),s}function wb(t,e){return Pbe(null,t,e)}function ivt(t){return t.read_shift(4,"i")}function ah(t,e){return e||(e=Ue(4)),e.write_shift(4,t),e}function va(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function lo(t,e){var n=!1;return e==null&&(n=!0,e=Ue(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function svt(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function ovt(t,e){return e||(e=Ue(4)),e.write_shift(2,0),e.write_shift(2,0),e}function aq(t,e){var n=t.l,r=t.read_shift(1),i=va(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(svt(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function avt(t,e){var n=!1;return e==null&&(n=!0,e=Ue(15+4*t.t.length)),e.write_shift(1,0),lo(t.t,e),n?e.slice(0,e.l):e}var lvt=aq;function cvt(t,e){var n=!1;return e==null&&(n=!0,e=Ue(23+4*t.t.length)),e.write_shift(1,1),lo(t.t,e),e.write_shift(4,1),ovt({},e),n?e.slice(0,e.l):e}function gu(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function pv(t,e){return e==null&&(e=Ue(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function mv(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function gv(t,e){return e==null&&(e=Ue(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var uvt=va,Rbe=lo;function lq(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function HN(t,e){var n=!1;return e==null&&(n=!0,e=Ue(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var hvt=va,Ez=lq,cq=HN;function Cbe(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?WN([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Sy(e,0)>>2;return n?i/100:i}function Mbe(t,e){e==null&&(e=Ue(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function Nbe(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function dvt(t,e){return e||(e=Ue(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var yv=Nbe,bb=dvt;function Eb(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function K1(t,e){return(e||Ue(8)).write_shift(8,t,"f")}function fvt(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=bvt[i];c&&(e.rgb=Doe(c));break;case 2:e.rgb=Doe([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function qN(t,e){if(e||(e=Ue(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function pvt(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function mvt(t,e){e||(e=Ue(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var Obe=2,Hl=3,_C=11,KN=19,xC=64,gvt=65,yvt=71,vvt=4108,_vt=4126,Io=80,koe={1:{n:"CodePage",t:Obe},2:{n:"Category",t:Io},3:{n:"PresentationFormat",t:Io},4:{n:"ByteCount",t:Hl},5:{n:"LineCount",t:Hl},6:{n:"ParagraphCount",t:Hl},7:{n:"SlideCount",t:Hl},8:{n:"NoteCount",t:Hl},9:{n:"HiddenCount",t:Hl},10:{n:"MultimediaClipCount",t:Hl},11:{n:"ScaleCrop",t:_C},12:{n:"HeadingPairs",t:vvt},13:{n:"TitlesOfParts",t:_vt},14:{n:"Manager",t:Io},15:{n:"Company",t:Io},16:{n:"LinksUpToDate",t:_C},17:{n:"CharacterCount",t:Hl},19:{n:"SharedDoc",t:_C},22:{n:"HyperlinksChanged",t:_C},23:{n:"AppVersion",t:Hl,p:"version"},24:{n:"DigSig",t:gvt},26:{n:"ContentType",t:Io},27:{n:"ContentStatus",t:Io},28:{n:"Language",t:Io},29:{n:"Version",t:Io},255:{},2147483648:{n:"Locale",t:KN},2147483651:{n:"Behavior",t:KN},1919054434:{}},Aoe={1:{n:"CodePage",t:Obe},2:{n:"Title",t:Io},3:{n:"Subject",t:Io},4:{n:"Author",t:Io},5:{n:"Keywords",t:Io},6:{n:"Comments",t:Io},7:{n:"Template",t:Io},8:{n:"LastAuthor",t:Io},9:{n:"RevNumber",t:Io},10:{n:"EditTime",t:xC},11:{n:"LastPrinted",t:xC},12:{n:"CreatedDate",t:xC},13:{n:"ModifiedDate",t:xC},14:{n:"PageCount",t:Hl},15:{n:"WordCount",t:Hl},16:{n:"CharCount",t:Hl},17:{n:"Thumbnail",t:yvt},18:{n:"Application",t:Io},19:{n:"DocSecurity",t:Hl},255:{},2147483648:{n:"Locale",t:KN},2147483651:{n:"Behavior",t:KN},1919054434:{}};function xvt(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wvt=xvt([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),bvt=Al(wvt),GI={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Evt={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},wC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function Lbe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Dbe(t,e){var n=N1t(Evt),r=[],i;r[r.length]=Rs,r[r.length]=yt("Types",null,{xmlns:so.CT,"xmlns:xsd":so.xsd,"xmlns:xsi":so.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return yt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=yt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:wC[l][e.bookType]||wC[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=yt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:wC[l][e.bookType]||wC[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=yt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var yr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function $be(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function mw(t){var e=[Rs,yt("Relationships",null,{xmlns:so.RELS})];return Oo(t["!id"]).forEach(function(n){e[e.length]=yt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Vr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[yr.HLINK,yr.XPATH,yr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function Svt(t){var e=[Rs];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Ioe(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Tvt(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function kvt(t){var e=[Rs];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(Ioe(t[n][0],t[n][1])),e.push(Tvt("",t[n][0]));return e.push(Ioe("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function jbe(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+FN.version+"</meta:generator></office:meta></office:document-meta>"}var o1=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Bj(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Wr(e),r[r.length]=n?yt(t,e,n):Mo(t,e))}function Fbe(t,e){var n=e||{},r=[Rs,yt("cp:coreProperties",null,{"xmlns:cp":so.CORE_PROPS,"xmlns:dc":so.dc,"xmlns:dcterms":so.dcterms,"xmlns:dcmitype":so.dcmitype,"xmlns:xsi":so.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&Bj("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:bz(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&Bj("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:bz(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=o1.length;++s){var o=o1[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&Bj(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var gw=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Vbe=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function zbe(t){var e=[],n=yt;return t||(t={}),t.Application="SheetJS",e[e.length]=Rs,e[e.length]=yt("Properties",null,{xmlns:so.EXT_PROPS,"xmlns:vt":so.vt}),gw.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Wr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Wr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function Ube(t){var e=[Rs,yt("Properties",null,{xmlns:so.CUST_PROPS,"xmlns:vt":so.vt})];if(!t)return e.join("");var n=1;return Oo(t).forEach(function(i){++n,e[e.length]=yt("property",B1t(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Wr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Poe={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Avt(t,e){var n=[];return Oo(Poe).map(function(r){for(var i=0;i<o1.length;++i)if(o1[i][1]==r)return o1[i];for(i=0;i<gw.length;++i)if(gw[i][1]==r)return gw[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Mo(Poe[r[1]]||r[1],i))}}),yt("DocumentProperties",n.join(""),{xmlns:ec.o})}function Ivt(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&Oo(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<o1.length;++o)if(s==o1[o][1])return;for(o=0;o<gw.length;++o)if(s==gw[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(yt(goe(s),a,{"dt:dt":l}))}}),e&&Oo(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(yt(goe(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+ec.o+'">'+i.join("")+"</"+r+">"}function Pvt(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=Ue(8);return o.write_shift(4,r),o.write_shift(4,i),o}function Roe(t,e){var n=Ue(4),r=Ue(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=Ue(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Pvt(e);break;case 31:case 80:for(r=Ue(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Co([n,r])}var Gbe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Rvt(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Coe(t,e,n){var r=Ue(8),i=[],s=[],o=8,a=0,l=Ue(8),c=Ue(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=Ue(8),c.write_shift(4,0),i.unshift(c);var u=[Ue(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var h=t[a][0];for(l=Ue(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Co(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(Gbe.indexOf(t[a][0])>-1||Vbe.indexOf(t[a][0])>-1)&&t[a][1]!=null){var f=t[a][1],g=0;if(e){g=+e[t[a][0]];var v=n[g];if(v.p=="version"&&typeof f=="string"){var x=f.split(".");f=(+x[0]<<16)+(+x[1]||0)}l=Roe(v.t,f)}else{var b=Rvt(f);b==-1&&(b=31,f=String(f)),l=Roe(b,f)}s.push(l),c=Ue(8),c.write_shift(4,e?g:2+a),i.push(c),o+=8+l.length}var T=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,T),T+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),Co([r].concat(i).concat(s))}function Moe(t,e,n,r,i,s){var o=Ue(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Xr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=Coe(t,n,r);if(a.push(l),i){var c=Coe(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return Co(a)}function Cvt(t,e){e||(e=Ue(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Mvt(t,e){return t.read_shift(e)===1}function Ia(t,e){return e||(e=Ue(2)),e.write_shift(2,+!!t),e}function Bbe(t){return t.read_shift(2,"u")}function zc(t,e){return e||(e=Ue(2)),e.write_shift(2,t),e}function Wbe(t,e,n){return n||(n=Ue(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function Hbe(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function Nvt(t){var e=t.t||"",n=Ue(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=Ue(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Co(i)}function Ovt(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function Lvt(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):Ovt(t,r,n)}function Dvt(t,e,n){if(n.biff>5)return Lvt(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function qbe(t,e,n){return n||(n=Ue(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Noe(t,e){e||(e=Ue(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function $vt(t){var e=Ue(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),Noe(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&Noe(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function Y1(t,e,n,r){return r||(r=Ue(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function jvt(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function Fvt(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function Kbe(t,e){return e||(e=Ue(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function uq(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ue(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Vvt(t,e){var n=!e||e.biff==8,r=Ue(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function zvt(t,e){var n=!e||e.biff>=8?2:1,r=Ue(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Uvt(t,e){var n=Ue(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=Nvt(t[i]);var s=Co([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function Gvt(){var t=Ue(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Bvt(t){var e=Ue(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Wvt(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=Ue(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function Hvt(t,e,n,r){var i=Ue(10);return Y1(t,e,r,i),i.write_shift(4,n),i}function qvt(t,e,n,r,i){var s=!i||i.biff==8,o=Ue(8+ +s+(1+s)*n.length);return Y1(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function Kvt(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function Yvt(t,e){var n=e.biff==8||!e.biff?4:2,r=Ue(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Ooe(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Xvt(t){var e=Ue(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Zvt(t,e,n,r,i,s){var o=Ue(8);return Y1(t,e,r,o),Wbe(n,s,o),o}function Jvt(t,e,n,r){var i=Ue(14);return Y1(t,e,r,i),K1(n,i),i}function Qvt(t,e,n){if(n.biff<8)return e_t(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(jvt(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function e_t(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=Hbe(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function t_t(t){var e=Ue(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)Kbe(t[n],e);return e}function n_t(t){var e=Ue(24),n=ao(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Co([e,$vt(t[1])])}function r_t(t){var e=t[1].Tooltip,n=Ue(10+2*(e.length+1));n.write_shift(2,2048);var r=ao(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function i_t(t){return t||(t=Ue(4)),t.write_shift(2,1),t.write_shift(2,1),t}function s_t(t,e,n){if(!n.cellStyles)return Dd(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function o_t(t,e){var n=Ue(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function a_t(t){for(var e=Ue(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function l_t(t,e,n){var r=Ue(15);return WI(r,t,e),r.write_shift(8,n,"f"),r}function c_t(t,e,n){var r=Ue(9);return WI(r,t,e),r.write_shift(2,n),r}var u_t=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=QH({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=q1(1);switch(l.type){case"base64":u=Ju(vp(a));break;case"binary":u=Ju(a);break;case"buffer":case"array":u=a;break}Xl(u,0);var h=u.read_shift(1),f=!!(h&136),g=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,f=!0;break;case 49:g=!0,f=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var x=0,b=521;h==2&&(x=u.read_shift(2)),u.l+=3,h!=2&&(x=u.read_shift(4)),x>1048576&&(x=1e6),h!=2&&(b=u.read_shift(2));var T=u.read_shift(2),A=l.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(A=t[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var I=[],P={},M=Math.min(u.length,h==2?521:b-10-(g?264:0)),F=v?32:11;u.l<M&&u[u.l]!=13;)switch(P={},P.name=VN.utils.decode(A,u.slice(u.l,u.l+F)).replace(/[\u0000\r\n].*$/g,""),u.l+=F,P.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(P.offset=u.read_shift(4)),P.len=u.read_shift(1),h==2&&(P.offset=u.read_shift(2)),P.dec=u.read_shift(1),P.name.length&&I.push(P),h!=2&&(u.l+=v?13:14),P.type){case"B":(!g||P.len!=8)&&l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var C=0,N=0;for(c[0]=[],N=0;N!=I.length;++N)c[0][N]=I[N].name;for(;x-- >0;){if(u[u.l]===42){u.l+=T;continue}for(++u.l,c[++C]=[],N=0,N=0;N!=I.length;++N){var O=u.slice(u.l,u.l+I[N].len);u.l+=I[N].len,Xl(O,0);var j=VN.utils.decode(A,O);switch(I[N].type){case"C":j.trim().length&&(c[C][N]=j.replace(/\s+$/,""));break;case"D":j.length===8?c[C][N]=new Date(+j.slice(0,4),+j.slice(4,6)-1,+j.slice(6,8)):c[C][N]=j;break;case"F":c[C][N]=parseFloat(j.trim());break;case"+":case"I":c[C][N]=v?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(j.trim().toUpperCase()){case"Y":case"T":c[C][N]=!0;break;case"N":case"F":c[C][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+j+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[C][N]="##MEMO##"+(v?parseInt(j.trim(),10):O.read_shift(4));break;case"N":j=j.replace(/\u0000/g,"").trim(),j&&j!="."&&(c[C][N]=+j||0);break;case"@":c[C][N]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":c[C][N]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":c[C][N]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][N]=-O.read_shift(-8,"f");break;case"B":if(g&&I[N].len==8){c[C][N]=O.read_shift(8,"f");break}case"G":case"P":O.l+=I[N].len;break;case"0":if(I[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[N].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=I,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=wb(n(a,c),c);return u["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,u}function i(a,l){try{return fv(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&fA(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=wl(),h=QN(a,{header:1,raw:!0,cellDates:!0}),f=h[0],g=h.slice(1),v=a["!cols"]||[],x=0,b=0,T=0,A=1;for(x=0;x<f.length;++x){if(((v[x]||{}).DBF||{}).name){f[x]=v[x].DBF.name,++T;continue}if(f[x]!=null){if(++T,typeof f[x]=="number"&&(f[x]=f[x].toString(10)),typeof f[x]!="string")throw new Error("DBF Invalid column name "+f[x]+" |"+typeof f[x]+"|");if(f.indexOf(f[x])!==x){for(b=0;b<1024;++b)if(f.indexOf(f[x]+"_"+b)==-1){f[x]+="_"+b;break}}}}var I=gi(a["!ref"]),P=[],M=[],F=[];for(x=0;x<=I.e.c-I.s.c;++x){var C="",N="",O=0,j=[];for(b=0;b<g.length;++b)g[b][x]!=null&&j.push(g[b][x]);if(j.length==0||f[x]==null){P[x]="?";continue}for(b=0;b<j.length;++b){switch(typeof j[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=j[b]instanceof Date?"D":"C";break;default:N="C"}O=Math.max(O,String(j[b]).length),C=C&&C!=N?"C":N}O>250&&(O=250),N=((v[x]||{}).DBF||{}).type,N=="C"&&v[x].DBF.len>O&&(O=v[x].DBF.len),C=="B"&&N=="N"&&(C="N",F[x]=v[x].DBF.dec,O=v[x].DBF.len),M[x]=C=="C"||N=="N"?O:s[C]||0,A+=M[x],P[x]=C}var V=u.next(32);for(V.write_shift(4,318902576),V.write_shift(4,g.length),V.write_shift(2,296+32*T),V.write_shift(2,A),x=0;x<4;++x)V.write_shift(4,0);for(V.write_shift(4,0|(+e[X2e]||3)<<8),x=0,b=0;x<f.length;++x)if(f[x]!=null){var G=u.next(32),U=(f[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,U,"sbcs"),G.write_shift(1,P[x]=="?"?"C":P[x],"sbcs"),G.write_shift(4,b),G.write_shift(1,M[x]||s[P[x]]||0),G.write_shift(1,F[x]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),b+=M[x]||s[P[x]]||0}var fe=u.next(264);for(fe.write_shift(4,13),x=0;x<65;++x)fe.write_shift(4,0);for(x=0;x<g.length;++x){var Re=u.next(A);for(Re.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(P[b]){case"L":Re.write_shift(1,g[x][b]==null?63:g[x][b]?84:70);break;case"B":Re.write_shift(8,g[x][b]||0,"f");break;case"N":var Be="0";for(typeof g[x][b]=="number"&&(Be=g[x][b].toFixed(F[b]||0)),T=0;T<M[b]-Be.length;++T)Re.write_shift(1,32);Re.write_shift(1,Be,"sbcs");break;case"D":g[x][b]?(Re.write_shift(4,("0000"+g[x][b].getFullYear()).slice(-4),"sbcs"),Re.write_shift(2,("00"+(g[x][b].getMonth()+1)).slice(-2),"sbcs"),Re.write_shift(2,("00"+g[x][b].getDate()).slice(-2),"sbcs")):Re.write_shift(8,"00000000","sbcs");break;case"C":var $e=String(g[x][b]!=null?g[x][b]:"").slice(0,M[b]);for(Re.write_shift(1,$e,"sbcs"),T=0;T<M[b]-$e.length;++T)Re.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}})(),h_t=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Oo(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(f,g){var v=t[g];return typeof v=="number"?ioe(v):v},r=function(f,g,v){var x=g.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return x==59?f:ioe(x)};t["|"]=254;function i(f,g){switch(g.type){case"base64":return s(vp(f),g);case"binary":return s(f,g);case"buffer":return s(Er&&Buffer.isBuffer(f)?f.toString("binary"):VI(f),g);case"array":return s(bL(f),g)}throw new Error("Unrecognized type "+g.type)}function s(f,g){var v=f.split(/[\n\r]+/),x=-1,b=-1,T=0,A=0,I=[],P=[],M=null,F={},C=[],N=[],O=[],j=0,V;for(+g.codepage>=0&&fA(+g.codepage);T!==v.length;++T){j=0;var G=v[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),U=G.replace(/;;/g,"\0").split(";").map(function(le){return le.replace(/\u0000/g,";")}),fe=U[0],Re;if(G.length>0)switch(fe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&P.push(G.slice(3).replace(/;;/g,";"));break;case"C":var Be=!1,$e=!1,pe=!1,De=!1,Me=-1,Q=-1;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"A":break;case"X":b=parseInt(U[A].slice(1))-1,$e=!0;break;case"Y":for(x=parseInt(U[A].slice(1))-1,$e||(b=0),V=I.length;V<=x;++V)I[V]=[];break;case"K":Re=U[A].slice(1),Re.charAt(0)==='"'?Re=Re.slice(1,Re.length-1):Re==="TRUE"?Re=!0:Re==="FALSE"?Re=!1:isNaN(sp(Re))?isNaN(mA(Re).getDate())||(Re=$a(Re)):(Re=sp(Re),M!==null&&lbe(M)&&(Re=dbe(Re))),Be=!0;break;case"E":De=!0;var W=cxt(U[A].slice(1),{r:x,c:b});I[x][b]=[I[x][b],W];break;case"S":pe=!0,I[x][b]=[I[x][b],"S5S"];break;case"G":break;case"R":Me=parseInt(U[A].slice(1))-1;break;case"C":Q=parseInt(U[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}if(Be&&(I[x][b]&&I[x][b].length==2?I[x][b][0]=Re:I[x][b]=Re,M=null),pe){if(De)throw new Error("SYLK shared formula cannot have own formula");var ne=Me>-1&&I[Me][Q];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");I[x][b][1]=uxt(ne[1],{r:x-Me,c:b-Q})}break;case"F":var ie=0;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"X":b=parseInt(U[A].slice(1))-1,++ie;break;case"Y":for(x=parseInt(U[A].slice(1))-1,V=I.length;V<=x;++V)I[V]=[];break;case"M":j=parseInt(U[A].slice(1))/20;break;case"F":break;case"G":break;case"P":M=P[parseInt(U[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=U[A].slice(1).split(" "),V=parseInt(O[0],10);V<=parseInt(O[1],10);++V)j=parseInt(O[2],10),N[V-1]=j===0?{hidden:!0}:{wch:j},hq(N[V-1]);break;case"C":b=parseInt(U[A].slice(1))-1,N[b]||(N[b]={});break;case"R":x=parseInt(U[A].slice(1))-1,C[x]||(C[x]={}),j>0?(C[x].hpt=j,C[x].hpx=Qbe(j)):j===0&&(C[x].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}ie<1&&(M=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}}return C.length>0&&(F["!rows"]=C),N.length>0&&(F["!cols"]=N),g&&g.sheetRows&&(I=I.slice(0,g.sheetRows)),[I,F]}function o(f,g){var v=i(f,g),x=v[0],b=v[1],T=wb(x,g);return Oo(b).forEach(function(A){T[A]=b[A]}),T}function a(f,g){return fv(o(f,g),g)}function l(f,g,v,x){var b="C;Y"+(v+1)+";X"+(x+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+fq(f.f,{r:v,c:x}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(f,g){g.forEach(function(v,x){var b="F;W"+(x+1)+" "+(x+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=YN(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=XN(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,g){g.forEach(function(v,x){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*ZN(v.hpx)+";"),b.length>2&&f.push(b+"R"+(x+1))})}function h(f,g){var v=["ID;PWXL;N;E"],x=[],b=gi(f["!ref"]),T,A=Array.isArray(f),I=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),f["!cols"]&&c(v,f["!cols"]),f["!rows"]&&u(v,f["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var P=b.s.r;P<=b.e.r;++P)for(var M=b.s.c;M<=b.e.c;++M){var F=qr({r:P,c:M});T=A?(f[P]||[])[M]:f[F],!(!T||T.v==null&&(!T.f||T.F))&&x.push(l(T,f,P,M))}return v.join(I)+I+x.join(I)+I+"E"+I}return{to_workbook:a,to_sheet:o,from_sheet:h}})(),d_t=(function(){function t(s,o){switch(o.type){case"base64":return e(vp(s),o);case"binary":return e(s,o);case"buffer":return e(Er&&Buffer.isBuffer(s)?s.toString("binary"):VI(s),o);case"array":return e(bL(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,h=[];u!==a.length;++u){if(a[u].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var f=a[u].trim().split(","),g=f[0],v=f[1];++u;for(var x=a[u]||"";(x.match(/["]/g)||[]).length&1&&u<a.length-1;)x+=`
`+a[++u];switch(x=x.trim(),+g){case-1:if(x==="BOT"){h[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?h[l][c]=!0:x==="FALSE"?h[l][c]=!1:isNaN(sp(v))?isNaN(mA(v).getDate())?h[l][c]=v:h[l][c]=$a(v):h[l][c]=sp(v),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),h[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function n(s,o){return wb(t(s,o),o)}function r(s,o){return fv(n(s,o),o)}var i=(function(){var s=function(l,c,u,h,f){l.push(c),l.push(u+","+h),l.push('"'+f.replace(/"/g,'""')+'"')},o=function(l,c,u,h){l.push(c+","+u),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],u=gi(l["!ref"]),h,f=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(c,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var x=qr({r:g,c:v});if(h=f?(l[g]||[])[v]:l[x],!h){o(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(c,1,0,"="+h.f):o(c,1,0,""):o(c,0,b,"V");break;case"b":o(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=qg(h.z||ns[14],kl($a(h.v)))),o(c,0,h.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var T=`\r
`,A=c.join(T);return A}})();return{to_workbook:r,to_sheet:n,from_sheet:i}})(),Ybe=(function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,f){for(var g=h.split(`
`),v=-1,x=-1,b=0,T=[];b!==g.length;++b){var A=g[b].trim().split(":");if(A[0]==="cell"){var I=ao(A[1]);if(T.length<=I.r)for(v=T.length;v<=I.r;++v)T[v]||(T[v]=[]);switch(v=I.r,x=I.c,A[2]){case"t":T[v][x]=t(A[3]);break;case"v":T[v][x]=+A[3];break;case"vtf":var P=A[A.length-1];case"vtc":switch(A[3]){case"nl":T[v][x]=!!+A[4];break;default:T[v][x]=+A[4];break}A[2]=="vtf"&&(T[v][x]=[T[v][x],P])}}}return f&&f.sheetRows&&(T=T.slice(0,f.sheetRows)),T}function r(h,f){return wb(n(h,f),f)}function i(h,f){return fv(r(h,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var f=[],g=[],v,x="",b=gc(h["!ref"]),T=Array.isArray(h),A=b.s.r;A<=b.e.r;++A)for(var I=b.s.c;I<=b.e.c;++I)if(x=qr({r:A,c:I}),v=T?(h[A]||[])[I]:h[x],!(!v||v.v==null||v.t==="z")){switch(g=["cell",x,"t"],v.t){case"s":case"str":g.push(e(v.v));break;case"n":v.f?(g[2]="vtf",g[3]="n",g[4]=v.v,g[5]=e(v.f)):(g[2]="v",g[3]=v.v);break;case"b":g[2]="vt"+(v.f?"f":"c"),g[3]="nl",g[4]=v.v?"1":"0",g[5]=e(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var P=kl($a(v.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=v.w||qg(v.z||ns[14],P);break;case"e":continue}f.push(g.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[s,o,a,o,c(h),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}})(),f_t=(function(){function t(u,h,f,g,v){v.raw?h[f][g]=u:u===""||(u==="TRUE"?h[f][g]=!0:u==="FALSE"?h[f][g]=!1:isNaN(sp(u))?isNaN(mA(u).getDate())?h[f][g]=u:h[f][g]=$a(u):h[f][g]=sp(u))}function e(u,h){var f=h||{},g=[];if(!u||u.length===0)return g;for(var v=u.split(/[\r\n]/),x=v.length-1;x>=0&&v[x].length===0;)--x;for(var b=10,T=0,A=0;A<=x;++A)T=v[A].indexOf(" "),T==-1?T=v[A].length:T++,b=Math.max(b,T);for(A=0;A<=x;++A){g[A]=[];var I=0;for(t(v[A].slice(0,b).trim(),g,A,I,f),I=1;I<=(v[A].length-b)/10+1;++I)t(v[A].slice(b+(I-1)*10,b+I*10).trim(),g,A,I,f)}return f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var h={},f=!1,g=0,v=0;g<u.length;++g)(v=u.charCodeAt(g))==34?f=!f:!f&&v in n&&(h[v]=(h[v]||0)+1);v=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&v.push([h[g],g]);if(!v.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&v.push([h[g],g])}return v.sort(function(x,b){return x[0]-b[0]||r[x[1]]-r[b[1]]}),n[v.pop()[1]]||44}function s(u,h){var f=h||{},g="",v=f.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):f&&f.FS?g=f.FS:g=i(u.slice(0,1024));var b=0,T=0,A=0,I=0,P=0,M=g.charCodeAt(0),F=!1,C=0,N=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var O=f.dateNF!=null?P1t(f.dateNF):null;function j(){var V=u.slice(I,P),G={};if(V.charAt(0)=='"'&&V.charAt(V.length-1)=='"'&&(V=V.slice(1,-1).replace(/""/g,'"')),V.length===0)G.t="z";else if(f.raw)G.t="s",G.v=V;else if(V.trim().length===0)G.t="s",G.v=V;else if(V.charCodeAt(0)==61)V.charCodeAt(1)==34&&V.charCodeAt(V.length-1)==34?(G.t="s",G.v=V.slice(2,-1).replace(/""/g,'"')):hxt(V)?(G.t="n",G.f=V.slice(1)):(G.t="s",G.v=V);else if(V=="TRUE")G.t="b",G.v=!0;else if(V=="FALSE")G.t="b",G.v=!1;else if(!isNaN(A=sp(V)))G.t="n",f.cellText!==!1&&(G.w=V),G.v=A;else if(!isNaN(mA(V).getDate())||O&&V.match(O)){G.z=f.dateNF||ns[14];var U=0;O&&V.match(O)&&(V=R1t(V,f.dateNF,V.match(O)||[]),U=1),f.cellDates?(G.t="d",G.v=$a(V,U)):(G.t="n",G.v=kl($a(V,U))),f.cellText!==!1&&(G.w=qg(G.z,G.v instanceof Date?kl(G.v):G.v)),f.cellNF||delete G.z}else G.t="s",G.v=V;if(G.t=="z"||(f.dense?(v[b]||(v[b]=[]),v[b][T]=G):v[qr({c:T,r:b})]=G),I=P+1,N=u.charCodeAt(I),x.e.c<T&&(x.e.c=T),x.e.r<b&&(x.e.r=b),C==M)++T;else if(T=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;P<u.length;++P)switch(C=u.charCodeAt(P)){case 34:N===34&&(F=!F);break;case M:case 10:case 13:if(!F&&j())break e;break}return P-I>0&&j(),v["!ref"]=Is(x),v}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,h):wb(e(u,h),h)}function a(u,h){var f="",g=h.type=="string"?[0,0,0,0]:TEt(u,h);switch(h.type){case"base64":f=vp(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof VN<"u"||(f=Er&&Buffer.isBuffer(u)?u.toString("binary"):VI(u));break;case"array":f=bL(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?f=WT(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=WT(f):h.type=="binary"&&typeof VN<"u",f.slice(0,19)=="socialcalc:version:"?Ybe.to_sheet(h.type=="string"?f:WT(f),h):o(f,h)}function l(u,h){return fv(a(u,h),h)}function c(u){for(var h=[],f=gi(u["!ref"]),g,v=Array.isArray(u),x=f.s.r;x<=f.e.r;++x){for(var b=[],T=f.s.c;T<=f.e.c;++T){var A=qr({r:x,c:T});if(g=v?(u[x]||[])[T]:u[A],!g||g.v==null){b.push("          ");continue}for(var I=(g.w||(_p(g),g.w)||"").slice(0,10);I.length<10;)I+=" ";b.push(I+(T===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}})(),Loe=(function(){function t(W,ne,ie){if(W){Xl(W,W.l||0);for(var le=ie.Enum||Me;W.l<W.length;){var ve=W.read_shift(2),qe=le[ve]||le[65535],Ke=W.read_shift(2),Se=W.l+Ke,we=qe.f&&qe.f(W,Ke,ie);if(W.l=Se,ne(we,qe,ve))return}}}function e(W,ne){switch(ne.type){case"base64":return n(Ju(vp(W)),ne);case"binary":return n(Ju(W),ne);case"buffer":case"array":return n(W,ne)}throw"Unsupported type "+ne.type}function n(W,ne){if(!W)return W;var ie=ne||{},le=ie.dense?[]:{},ve="Sheet1",qe="",Ke=0,Se={},we=[],Dt=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},sn=ie.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)ie.Enum=Me,t(W,function(dt,ur,jn){switch(jn){case 0:ie.vers=dt,dt>=4096&&(ie.qpro=!0);break;case 6:Ye=dt;break;case 204:dt&&(qe=dt);break;case 222:qe=dt;break;case 15:case 51:ie.qpro||(dt[1].v=dt[1].v.slice(1));case 13:case 14:case 16:jn==14&&(dt[2]&112)==112&&(dt[2]&15)>1&&(dt[2]&15)<15&&(dt[1].z=ie.dateNF||ns[14],ie.cellDates&&(dt[1].t="d",dt[1].v=dbe(dt[1].v))),ie.qpro&&dt[3]>Ke&&(le["!ref"]=Is(Ye),Se[ve]=le,we.push(ve),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=dt[3],ve=qe||"Sheet"+(Ke+1),qe="");var Un=ie.dense?(le[dt[0].r]||[])[dt[0].c]:le[qr(dt[0])];if(Un){Un.t=dt[1].t,Un.v=dt[1].v,dt[1].z!=null&&(Un.z=dt[1].z),dt[1].f!=null&&(Un.f=dt[1].f);break}ie.dense?(le[dt[0].r]||(le[dt[0].r]=[]),le[dt[0].r][dt[0].c]=dt[1]):le[qr(dt[0])]=dt[1];break}},ie);else if(W[2]==26||W[2]==14)ie.Enum=Q,W[2]==14&&(ie.qpro=!0,W.l=0),t(W,function(dt,ur,jn){switch(jn){case 204:ve=dt;break;case 22:dt[1].v=dt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(dt[3]>Ke&&(le["!ref"]=Is(Ye),Se[ve]=le,we.push(ve),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=dt[3],ve="Sheet"+(Ke+1)),sn>0&&dt[0].r>=sn)break;ie.dense?(le[dt[0].r]||(le[dt[0].r]=[]),le[dt[0].r][dt[0].c]=dt[1]):le[qr(dt[0])]=dt[1],Ye.e.c<dt[0].c&&(Ye.e.c=dt[0].c),Ye.e.r<dt[0].r&&(Ye.e.r=dt[0].r);break;case 27:dt[14e3]&&(Dt[dt[14e3][0]]=dt[14e3][1]);break;case 1537:Dt[dt[0]]=dt[1],dt[0]==Ke&&(ve=dt[1]);break}},ie);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(le["!ref"]=Is(Ye),Se[qe||ve]=le,we.push(qe||ve),!Dt.length)return{SheetNames:we,Sheets:Se};for(var $t={},fn=[],yn=0;yn<Dt.length;++yn)Se[we[yn]]?(fn.push(Dt[yn]||we[yn]),$t[Dt[yn]]=Se[Dt[yn]]||Se[we[yn]]):(fn.push(Dt[yn]),$t[Dt[yn]]={"!ref":"A1"});return{SheetNames:fn,Sheets:$t}}function r(W,ne){var ie=ne||{};if(+ie.codepage>=0&&fA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK1 to JS string");var le=wl(),ve=gi(W["!ref"]),qe=Array.isArray(W),Ke=[];vt(le,0,s(1030)),vt(le,6,l(ve));for(var Se=Math.min(ve.e.r,8191),we=ve.s.r;we<=Se;++we)for(var Dt=No(we),Ye=ve.s.c;Ye<=ve.e.c;++Ye){we===ve.s.r&&(Ke[Ye]=ya(Ye));var sn=Ke[Ye]+Dt,$t=qe?(W[we]||[])[Ye]:W[sn];if(!(!$t||$t.t=="z"))if($t.t=="n")($t.v|0)==$t.v&&$t.v>=-32768&&$t.v<=32767?vt(le,13,g(we,Ye,$t.v)):vt(le,14,x(we,Ye,$t.v));else{var fn=_p($t);vt(le,15,h(we,Ye,fn.slice(0,239)))}}return vt(le,1),le.end()}function i(W,ne){var ie=ne||{};if(+ie.codepage>=0&&fA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK3 to JS string");var le=wl();vt(le,0,o(W));for(var ve=0,qe=0;ve<W.SheetNames.length;++ve)(W.Sheets[W.SheetNames[ve]]||{})["!ref"]&&vt(le,27,De(W.SheetNames[ve],qe++));var Ke=0;for(ve=0;ve<W.SheetNames.length;++ve){var Se=W.Sheets[W.SheetNames[ve]];if(!(!Se||!Se["!ref"])){for(var we=gi(Se["!ref"]),Dt=Array.isArray(Se),Ye=[],sn=Math.min(we.e.r,8191),$t=we.s.r;$t<=sn;++$t)for(var fn=No($t),yn=we.s.c;yn<=we.e.c;++yn){$t===we.s.r&&(Ye[yn]=ya(yn));var dt=Ye[yn]+fn,ur=Dt?(Se[$t]||[])[yn]:Se[dt];if(!(!ur||ur.t=="z"))if(ur.t=="n")vt(le,23,j($t,yn,Ke,ur.v));else{var jn=_p(ur);vt(le,22,C($t,yn,Ke,jn.slice(0,239)))}}++Ke}}return vt(le,1),le.end()}function s(W){var ne=Ue(2);return ne.write_shift(2,W),ne}function o(W){var ne=Ue(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var ie=0,le=0,ve=0,qe=0;qe<W.SheetNames.length;++qe){var Ke=W.SheetNames[qe],Se=W.Sheets[Ke];if(!(!Se||!Se["!ref"])){++ve;var we=gc(Se["!ref"]);ie<we.e.r&&(ie=we.e.r),le<we.e.c&&(le=we.e.c)}}return ie>8191&&(ie=8191),ne.write_shift(2,ie),ne.write_shift(1,ve),ne.write_shift(1,le),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function a(W,ne,ie){var le={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&ie.qpro?(le.s.c=W.read_shift(1),W.l++,le.s.r=W.read_shift(2),le.e.c=W.read_shift(1),W.l++,le.e.r=W.read_shift(2),le):(le.s.c=W.read_shift(2),le.s.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.e.c=W.read_shift(2),le.e.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.s.c==65535&&(le.s.c=le.e.c=le.s.r=le.e.r=0),le)}function l(W){var ne=Ue(8);return ne.write_shift(2,W.s.c),ne.write_shift(2,W.s.r),ne.write_shift(2,W.e.c),ne.write_shift(2,W.e.r),ne}function c(W,ne,ie){var le=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&ie.vers!=20768?(le[0].c=W.read_shift(1),le[3]=W.read_shift(1),le[0].r=W.read_shift(2),W.l+=2):(le[2]=W.read_shift(1),le[0].c=W.read_shift(2),le[0].r=W.read_shift(2)),le}function u(W,ne,ie){var le=W.l+ne,ve=c(W,ne,ie);if(ve[1].t="s",ie.vers==20768){W.l++;var qe=W.read_shift(1);return ve[1].v=W.read_shift(qe,"utf8"),ve}return ie.qpro&&W.l++,ve[1].v=W.read_shift(le-W.l,"cstr"),ve}function h(W,ne,ie){var le=Ue(7+ie.length);le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(1,39);for(var ve=0;ve<le.length;++ve){var qe=ie.charCodeAt(ve);le.write_shift(1,qe>=128?95:qe)}return le.write_shift(1,0),le}function f(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(2,"i"),le}function g(W,ne,ie){var le=Ue(7);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(2,ie,"i"),le}function v(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(8,"f"),le}function x(W,ne,ie){var le=Ue(13);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(8,ie,"f"),le}function b(W,ne,ie){var le=W.l+ne,ve=c(W,ne,ie);if(ve[1].v=W.read_shift(8,"f"),ie.qpro)W.l=le;else{var qe=W.read_shift(2);P(W.slice(W.l,W.l+qe),ve),W.l+=qe}return ve}function T(W,ne,ie){var le=ne&32768;return ne&=-32769,ne=(le?W:0)+(ne>=8192?ne-16384:ne),(le?"":"$")+(ie?ya(ne):No(ne))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(W,ne){Xl(W,0);for(var ie=[],le=0,ve="",qe="",Ke="",Se="";W.l<W.length;){var we=W[W.l++];switch(we){case 0:ie.push(W.read_shift(8,"f"));break;case 1:qe=T(ne[0].c,W.read_shift(2),!0),ve=T(ne[0].r,W.read_shift(2),!1),ie.push(qe+ve);break;case 2:{var Dt=T(ne[0].c,W.read_shift(2),!0),Ye=T(ne[0].r,W.read_shift(2),!1);qe=T(ne[0].c,W.read_shift(2),!0),ve=T(ne[0].r,W.read_shift(2),!1),ie.push(Dt+Ye+":"+qe+ve)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(W.read_shift(2));break;case 6:{for(var sn="";we=W[W.l++];)sn+=String.fromCharCode(we);ie.push('"'+sn.replace(/"/g,'""')+'"')}break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:Se=ie.pop(),Ke=ie.pop(),ie.push(["AND","OR"][we-20]+"("+Ke+","+Se+")");break;default:if(we<32&&I[we])Se=ie.pop(),Ke=ie.pop(),ie.push(Ke+I[we]+Se);else if(A[we]){if(le=A[we][1],le==69&&(le=W[W.l++]),le>ie.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+ie.join("|")+"|");return}var $t=ie.slice(-le);ie.length-=le,ie.push(A[we][0]+"("+$t.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}ie.length==1?ne[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")}function M(W){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=W.read_shift(2),ne[3]=W[W.l++],ne[0].c=W[W.l++],ne}function F(W,ne){var ie=M(W);return ie[1].t="s",ie[1].v=W.read_shift(ne-4,"cstr"),ie}function C(W,ne,ie,le){var ve=Ue(6+le.length);ve.write_shift(2,W),ve.write_shift(1,ie),ve.write_shift(1,ne),ve.write_shift(1,39);for(var qe=0;qe<le.length;++qe){var Ke=le.charCodeAt(qe);ve.write_shift(1,Ke>=128?95:Ke)}return ve.write_shift(1,0),ve}function N(W,ne){var ie=M(W);ie[1].v=W.read_shift(2);var le=ie[1].v>>1;if(ie[1].v&1)switch(le&7){case 0:le=(le>>3)*5e3;break;case 1:le=(le>>3)*500;break;case 2:le=(le>>3)/20;break;case 3:le=(le>>3)/200;break;case 4:le=(le>>3)/2e3;break;case 5:le=(le>>3)/2e4;break;case 6:le=(le>>3)/16;break;case 7:le=(le>>3)/64;break}return ie[1].v=le,ie}function O(W,ne){var ie=M(W),le=W.read_shift(4),ve=W.read_shift(4),qe=W.read_shift(2);if(qe==65535)return le===0&&ve===3221225472?(ie[1].t="e",ie[1].v=15):le===0&&ve===3489660928?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var Ke=qe&32768;return qe=(qe&32767)-16446,ie[1].v=(1-Ke*2)*(ve*Math.pow(2,qe+32)+le*Math.pow(2,qe)),ie}function j(W,ne,ie,le){var ve=Ue(14);if(ve.write_shift(2,W),ve.write_shift(1,ie),ve.write_shift(1,ne),le==0)return ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(2,65535),ve;var qe=0,Ke=0,Se=0,we=0;return le<0&&(qe=1,le=-le),Ke=Math.log2(le)|0,le/=Math.pow(2,Ke-31),we=le>>>0,(we&2147483648)==0&&(le/=2,++Ke,we=le>>>0),le-=we,we|=2147483648,we>>>=0,le*=Math.pow(2,32),Se=le>>>0,ve.write_shift(4,Se),ve.write_shift(4,we),Ke+=16383+(qe?32768:0),ve.write_shift(2,Ke),ve}function V(W,ne){var ie=O(W);return W.l+=ne-14,ie}function G(W,ne){var ie=M(W),le=W.read_shift(4);return ie[1].v=le>>6,ie}function U(W,ne){var ie=M(W),le=W.read_shift(8,"f");return ie[1].v=le,ie}function fe(W,ne){var ie=U(W);return W.l+=ne-10,ie}function Re(W,ne){return W[W.l+ne-1]==0?W.read_shift(ne,"cstr"):""}function Be(W,ne){var ie=W[W.l++];ie>ne-1&&(ie=ne-1);for(var le="";le.length<ie;)le+=String.fromCharCode(W[W.l++]);return le}function $e(W,ne,ie){if(!(!ie.qpro||ne<21)){var le=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var ve=W.read_shift(ne-21,"cstr");return[le,ve]}}function pe(W,ne){for(var ie={},le=W.l+ne;W.l<le;){var ve=W.read_shift(2);if(ve==14e3){for(ie[ve]=[0,""],ie[ve][0]=W.read_shift(2);W[W.l];)ie[ve][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return ie}function De(W,ne){var ie=Ue(5+W.length);ie.write_shift(2,14e3),ie.write_shift(2,ne);for(var le=0;le<W.length;++le){var ve=W.charCodeAt(le);ie[ie.l++]=ve>127?95:ve}return ie[ie.l++]=0,ie}var Me={0:{n:"BOF",f:Bbe},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Re},222:{n:"SHEETNAMELP",f:Be},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:V},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:pe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:fe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Re},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:$e},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),p_t=/^\s|\s$|[\t\n\r]/;function Xbe(t,e){if(!e.bookSST)return"";var n=[Rs];n[n.length]=yt("sst",null,{xmlns:xb[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(p_t)&&(s+=' xml:space="preserve"'),s+=">"+Wr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function m_t(t){return[t.read_shift(4),t.read_shift(4)]}function g_t(t,e){return e||(e=Ue(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var y_t=avt;function v_t(t){var e=wl();tt(e,159,g_t(t));for(var n=0;n<t.length;++n)tt(e,19,y_t(t[n]));return tt(e,160),e.end()}function __t(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function Zbe(t){var e=0,n,r=__t(t),i=r.length+1,s,o,a,l,c;for(n=q1(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var x_t=(function(){function t(i,s){switch(s.type){case"base64":return e(vp(i),s);case"binary":return e(i,s);case"buffer":return e(Er&&Buffer.isBuffer(i)?i.toString("binary"):VI(i),s);case"array":return e(bL(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,h){Array.isArray(a)&&(a[h]=[]);for(var f=/\\\w+\b/g,g=0,v,x=-1;v=f.exec(u);){switch(v[0]){case"\\cell":var b=u.slice(g,f.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var T={v:b,t:"s"};Array.isArray(a)?a[h][x]=T:a[qr({r:h,c:x})]=T}break}g=f.lastIndex}x>c.e.c&&(c.e.c=x)}),a["!ref"]=Is(c),a}function n(i,s){return fv(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=gi(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=qr({r:c,c:u});a=l?(i[c]||[])[u]:i[h],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(_p(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}})();function Doe(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var w_t=6,op=w_t;function YN(t){return Math.floor((t+Math.round(128/op)/256)*op)}function XN(t){return Math.floor((t-5)/op*100+.5)/100}function Sz(t){return Math.round((t*op+5)/op*256)/256}function hq(t){t.width?(t.wpx=YN(t.width),t.wch=XN(t.wpx),t.MDW=op):t.wpx?(t.wch=XN(t.wpx),t.width=Sz(t.wch),t.MDW=op):typeof t.wch=="number"&&(t.width=Sz(t.wch),t.wpx=YN(t.width),t.MDW=op),t.customWidth&&delete t.customWidth}var b_t=96,Jbe=b_t;function ZN(t){return t*96/Jbe}function Qbe(t){return t*Jbe/96}function E_t(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=yt("numFmt",null,{numFmtId:r,formatCode:Wr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=yt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function S_t(t){var e=[];return e[e.length]=yt("cellXfs",null),t.forEach(function(n){e[e.length]=yt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=yt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function eEe(t,e){var n=[Rs,yt("styleSheet",null,{xmlns:xb[0],"xmlns:vt":so.vt})],r;return t.SSF&&(r=E_t(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=S_t(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function T_t(t,e){var n=t.read_shift(2),r=va(t);return[n,r]}function k_t(t,e,n){n||(n=Ue(6+4*e.length)),n.write_shift(2,t),lo(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function A_t(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=pvt(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=fvt(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=va(t),r}function I_t(t,e){e||(e=Ue(153)),e.write_shift(2,t.sz*20),mvt(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),qN(t.color,e);var r=0;return r=2,e.write_shift(1,r),lo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var P_t=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Wj,R_t=Dd;function $oe(t,e){e||(e=Ue(84)),Wj||(Wj=QH(P_t));var n=Wj[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(qN({auto:1},e),qN({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function C_t(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function tEe(t,e,n){n||(n=Ue(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function HE(t,e){return e||(e=Ue(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var M_t=Dd;function N_t(t,e){return e||(e=Ue(51)),e.write_shift(1,0),HE(null,e),HE(null,e),HE(null,e),HE(null,e),HE(null,e),e.length>e.l?e.slice(0,e.l):e}function O_t(t,e){return e||(e=Ue(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),HN(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function L_t(t,e,n){var r=Ue(2052);return r.write_shift(4,t),HN(e,r),HN(n,r),r.length>r.l?r.slice(0,r.l):r}function D_t(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(tt(t,615,ah(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&tt(t,44,k_t(i,e[i]))}),tt(t,616))}}function $_t(t){var e=1;tt(t,611,ah(e)),tt(t,43,I_t({sz:12,color:{theme:1},name:"Calibri",family:2})),tt(t,612)}function j_t(t){var e=2;tt(t,603,ah(e)),tt(t,45,$oe({patternType:"none"})),tt(t,45,$oe({patternType:"gray125"})),tt(t,604)}function F_t(t){var e=1;tt(t,613,ah(e)),tt(t,46,N_t()),tt(t,614)}function V_t(t){var e=1;tt(t,626,ah(e)),tt(t,47,tEe({numFmtId:0},65535)),tt(t,627)}function z_t(t,e){tt(t,617,ah(e.length)),e.forEach(function(n){tt(t,47,tEe(n,0))}),tt(t,618)}function U_t(t){var e=1;tt(t,619,ah(e)),tt(t,48,O_t({xfId:0,name:"Normal"})),tt(t,620)}function G_t(t){var e=0;tt(t,505,ah(e)),tt(t,506)}function B_t(t){var e=0;tt(t,508,L_t(e,"TableStyleMedium9","PivotStyleMedium4")),tt(t,509)}function W_t(t,e){var n=wl();return tt(n,278),D_t(n,t.SSF),$_t(n),j_t(n),F_t(n),V_t(n),z_t(n,e.cellXfs),U_t(n),G_t(n),B_t(n),tt(n,279),n.end()}function nEe(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Rs];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function H_t(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:va(t)}}function q_t(t){var e=Ue(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),lo(t.name,e),e.slice(0,e.l)}function K_t(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Y_t(t){var e=Ue(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function X_t(t,e){var n=Ue(8+2*e.length);return n.write_shift(4,t),lo(e,n),n.slice(0,n.l)}function Z_t(t){return t.l+=4,t.read_shift(4)!=0}function J_t(t,e){var n=Ue(8);return n.write_shift(4,t),n.write_shift(4,1),n}function Q_t(){var t=wl();return tt(t,332),tt(t,334,ah(1)),tt(t,335,q_t({name:"XLDAPR",version:12e4,flags:3496657072})),tt(t,336),tt(t,339,X_t(1,"XLDAPR")),tt(t,52),tt(t,35,ah(514)),tt(t,4096,ah(0)),tt(t,4097,zc(1)),tt(t,36),tt(t,53),tt(t,340),tt(t,337,J_t(1)),tt(t,51,Y_t([[1,0]])),tt(t,338),tt(t,333),t.end()}function rEe(){var t=[Rs];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function ext(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=qr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Lx=1024;function iEe(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[yt("xml",null,{"xmlns:v":ec.v,"xmlns:o":ec.o,"xmlns:x":ec.x,"xmlns:mv":ec.mv}).replace(/\/>/,">"),yt("o:shapelayout",yt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),yt("v:shapetype",[yt("v:stroke",null,{joinstyle:"miter"}),yt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Lx<t*1e3;)Lx+=1e3;return e.forEach(function(s){var o=ao(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?yt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=yt("v:fill",l,a),u={on:"t",obscured:"t"};++Lx,i=i.concat(["<v:shape"+yA({id:"_x0000_s"+Lx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,yt("v:shadow",null,u),yt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Mo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Mo("x:AutoFill","False"),Mo("x:Row",String(o.r)),Mo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function sEe(t){var e=[Rs,yt("comments",null,{xmlns:xb[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=Wr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(Wr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Mo("t",Wr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(Mo("t",Wr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function txt(t,e,n){var r=[Rs,yt("ThreadedComments",null,{xmlns:so.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(yt("threadedComment",Mo("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function nxt(t){var e=[Rs,yt("personList",null,{xmlns:so.TCMNT,"xmlns:x":xb[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(yt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function rxt(t){var e={};e.iauthor=t.read_shift(4);var n=yv(t);return e.rfx=n.s,e.ref=qr(n.s),t.l+=16,e}function ixt(t,e){return e==null&&(e=Ue(36)),e.write_shift(4,t[1].iauthor),bb(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var sxt=va;function oxt(t){return lo(t.slice(0,54))}function axt(t){var e=wl(),n=[];return tt(e,628),tt(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),tt(e,632,oxt(i.a)))})}),tt(e,631),tt(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:ao(r[0]),e:ao(r[0])};tt(e,635,ixt([s,i])),i.t&&i.t.length>0&&tt(e,637,cvt(i)),tt(e,636),delete i.iauthor})}),tt(e,634),tt(e,629),e.end()}function lxt(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Xr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var oEe=["xlsb","xlsm","xlam","biff8","xla"],cxt=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+ya(u)+(l?"":"$")+No(c)}return function(i,s){return e=s,i.replace(t,n)}})(),dq=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,fq=(function(){return function(e,n){return e.replace(dq,function(r,i,s,o,a,l){var c=oq(o)-(s?0:n.c),u=sq(l)-(a?0:n.r),h=u==0?"":a?u+1:"["+u+"]",f=c==0?"":s?c+1:"["+c+"]";return i+"R"+h+"C"+f})}})();function uxt(t,e){return t.replace(dq,function(n,r,i,s,o,a){return r+(i=="$"?i+s:ya(oq(s)+e.c))+(o=="$"?o+a:No(sq(a)+e.r))})}function hxt(t){return t.length!=1}function ms(t){t.l+=1}function Kg(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function aEe(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return lEe(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=Kg(t),a=Kg(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function lEe(t){var e=Kg(t),n=Kg(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function dxt(t,e,n){if(n.biff<8)return lEe(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=Kg(t),o=Kg(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function cEe(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return fxt(t);var r=t.read_shift(n&&n.biff==12?4:2),i=Kg(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function fxt(t){var e=Kg(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function pxt(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function mxt(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return gxt(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function gxt(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function yxt(t,e,n){var r=(t[t.l++]&96)>>5,i=aEe(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function vxt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=aEe(t,s,n);return[r,i,o]}function _xt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function xxt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function wxt(t,e,n){var r=(t[t.l++]&96)>>5,i=dxt(t,e-1,n);return[r,i]}function bxt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function joe(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Ext(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function Sxt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Txt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function kxt(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Axt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function uEe(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function Ixt(t){return t.read_shift(2),uEe(t)}function Pxt(t){return t.read_shift(2),uEe(t)}function Rxt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=cEe(t,0,n);return[r,i]}function Cxt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=mxt(t,0,n);return[r,i]}function Mxt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=cEe(t,0,n);return[r,i,s]}function Nxt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[Nwt[i],fEe[i],r]}function Oxt(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Lxt(t);return[i,(s[0]===0?fEe:Mwt)[s[1]]]}function Lxt(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Dxt(t,e,n){t.l+=n&&n.biff==2?3:4}function $xt(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function jxt(t){return t.l++,GI[t.read_shift(1)]}function Fxt(t){return t.l++,t.read_shift(2)}function Vxt(t){return t.l++,t.read_shift(1)!==0}function zxt(t){return t.l++,Eb(t)}function Uxt(t,e,n){return t.l++,Hbe(t,e-1,n)}function Gxt(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Mvt(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=GI[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Eb(t);break;case 2:n[1]=Dvt(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function Bxt(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?yv:Fvt)(t));return i}function Wxt(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Gxt(t,n.biff);return o}function Hxt(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function qxt(t,e,n){if(n.biff==5)return Kxt(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function Kxt(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function Yxt(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Xxt(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Zxt(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function Jxt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var Qxt=Dd,ewt=Dd,twt=Dd;function BI(t,e,n){return t.l+=2,[pxt(t)]}function pq(t){return t.l+=6,[]}var nwt=BI,rwt=pq,iwt=pq,swt=BI;function hEe(t){return t.l+=2,[Bbe(t),t.read_shift(2)&1]}var owt=BI,awt=hEe,lwt=pq,cwt=BI,uwt=BI,hwt=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function dwt(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=hwt[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function fwt(t){return t.l+=2,[t.read_shift(4)]}function pwt(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function mwt(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function gwt(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function ywt(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function vwt(t){return t.l+=4,[0,0]}var Foe={1:{n:"PtgExp",f:$xt},2:{n:"PtgTbl",f:twt},3:{n:"PtgAdd",f:ms},4:{n:"PtgSub",f:ms},5:{n:"PtgMul",f:ms},6:{n:"PtgDiv",f:ms},7:{n:"PtgPower",f:ms},8:{n:"PtgConcat",f:ms},9:{n:"PtgLt",f:ms},10:{n:"PtgLe",f:ms},11:{n:"PtgEq",f:ms},12:{n:"PtgGe",f:ms},13:{n:"PtgGt",f:ms},14:{n:"PtgNe",f:ms},15:{n:"PtgIsect",f:ms},16:{n:"PtgUnion",f:ms},17:{n:"PtgRange",f:ms},18:{n:"PtgUplus",f:ms},19:{n:"PtgUminus",f:ms},20:{n:"PtgPercent",f:ms},21:{n:"PtgParen",f:ms},22:{n:"PtgMissArg",f:ms},23:{n:"PtgStr",f:Uxt},26:{n:"PtgSheet",f:pwt},27:{n:"PtgEndSheet",f:mwt},28:{n:"PtgErr",f:jxt},29:{n:"PtgBool",f:Vxt},30:{n:"PtgInt",f:Fxt},31:{n:"PtgNum",f:zxt},32:{n:"PtgArray",f:bxt},33:{n:"PtgFunc",f:Nxt},34:{n:"PtgFuncVar",f:Oxt},35:{n:"PtgName",f:Hxt},36:{n:"PtgRef",f:Rxt},37:{n:"PtgArea",f:yxt},38:{n:"PtgMemArea",f:Yxt},39:{n:"PtgMemErr",f:Qxt},40:{n:"PtgMemNoMem",f:ewt},41:{n:"PtgMemFunc",f:Xxt},42:{n:"PtgRefErr",f:Zxt},43:{n:"PtgAreaErr",f:_xt},44:{n:"PtgRefN",f:Cxt},45:{n:"PtgAreaN",f:wxt},46:{n:"PtgMemAreaN",f:gwt},47:{n:"PtgMemNoMemN",f:ywt},57:{n:"PtgNameX",f:qxt},58:{n:"PtgRef3d",f:Mxt},59:{n:"PtgArea3d",f:vxt},60:{n:"PtgRefErr3d",f:Jxt},61:{n:"PtgAreaErr3d",f:xxt},255:{}},_wt={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},xwt={1:{n:"PtgElfLel",f:hEe},2:{n:"PtgElfRw",f:cwt},3:{n:"PtgElfCol",f:nwt},6:{n:"PtgElfRwV",f:uwt},7:{n:"PtgElfColV",f:swt},10:{n:"PtgElfRadical",f:owt},11:{n:"PtgElfRadicalS",f:lwt},13:{n:"PtgElfColS",f:rwt},15:{n:"PtgElfColSV",f:iwt},16:{n:"PtgElfRadicalLel",f:awt},25:{n:"PtgList",f:dwt},29:{n:"PtgSxName",f:fwt},255:{}},wwt={0:{n:"PtgAttrNoop",f:vwt},1:{n:"PtgAttrSemi",f:Axt},2:{n:"PtgAttrIf",f:Txt},4:{n:"PtgAttrChoose",f:Ext},8:{n:"PtgAttrGoto",f:Sxt},16:{n:"PtgAttrSum",f:Dxt},32:{n:"PtgAttrBaxcel",f:joe},33:{n:"PtgAttrBaxcel",f:joe},64:{n:"PtgAttrSpace",f:Ixt},65:{n:"PtgAttrSpaceSemi",f:Pxt},128:{n:"PtgAttrIfError",f:kxt},255:{}};function bwt(t,e,n,r){if(r.biff<8)return Dd(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Wxt(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=Bxt(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(Dd(t,e)),s}function Ewt(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=Foe[s]||Foe[_wt[s]],(s===24||s===25)&&(i=(s===24?xwt:wwt)[t[t.l+1]]),!i||!i.f?Dd(t,e):o.push([i.n,i.f(t,e,n)]);return o}function Swt(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Twt={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function kwt(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function dEe(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Voe(t,e,n){var r=dEe(t,e,n);return r=="#REF"?r:kwt(r,n)}function O2(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,h=0,f=0,g,v="";if(!t[0]||!t[0][0])return"";for(var x=-1,b="",T=0,A=t[0].length;T<A;++T){var I=t[0][T];switch(I[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),x>=0){switch(t[0][x][1][0]){case 0:b=Xi(" ",t[0][x][1][1]);break;case 1:b=Xi("\r",t[0][x][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+b,x=-1}a.push(c+Twt[I[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=qT(I[1][1],o,i),a.push(KT(u,s));break;case"PtgRefN":u=n?qT(I[1][1],n,i):I[1][1],a.push(KT(u,s));break;case"PtgRef3d":h=I[1][1],u=qT(I[1][2],o,i),v=Voe(r,h,i),a.push(v+"!"+KT(u,s));break;case"PtgFunc":case"PtgFuncVar":var P=I[1][0],M=I[1][1];P||(P=0),P&=127;var F=P==0?[]:a.slice(-P);a.length-=P,M==="User"&&(M=F.shift()),a.push(M+"("+F.join(",")+")");break;case"PtgBool":a.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(I[1]);break;case"PtgNum":a.push(String(I[1]));break;case"PtgStr":a.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(I[1]);break;case"PtgAreaN":g=Soe(I[1][1],n?{s:n}:o,i),a.push(Gj(g,i));break;case"PtgArea":g=Soe(I[1][1],o,i),a.push(Gj(g,i));break;case"PtgArea3d":h=I[1][1],g=I[1][2],v=Voe(r,h,i),a.push(v+"!"+Gj(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=I[1][2];var C=(r.names||[])[f-1]||(r[0]||[])[f],N=C?C.Name:"SH33TJSNAME"+String(f);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),a.push(N);break;case"PtgNameX":var O=I[1][1];f=I[1][2];var j;if(i.biff<=5)O<0&&(O=-O),r[O]&&(j=r[O][f]);else{var V="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][f]&&r[O][f].itab>0&&(V=r.SheetNames[r[O][f].itab-1]+"!"):V=r.SheetNames[f-1]+"!"),r[O]&&r[O][f])V+=r[O][f].Name;else if(r[0]&&r[0][f])V+=r[0][f].Name;else{var G=(dEe(r,O,i)||"").split(";;");G[f-1]?V=G[f-1]:V+="SH33TJSERRX"}a.push(V);break}j||(j={Name:"SH33TJSERRY"}),a.push(j.Name);break;case"PtgParen":var U="(",fe=")";if(x>=0){switch(b="",t[0][x][1][0]){case 2:U=Xi(" ",t[0][x][1][1])+U;break;case 3:U=Xi("\r",t[0][x][1][1])+U;break;case 4:fe=Xi(" ",t[0][x][1][1])+fe;break;case 5:fe=Xi("\r",t[0][x][1][1])+fe;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}a.push(U+a.pop()+fe);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:I[1][1],r:I[1][0]};var Re={c:n.c,r:n.r};if(r.sharedf[qr(u)]){var Be=r.sharedf[qr(u)];a.push(O2(Be,o,Re,r,i))}else{var $e=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(O2(c[1],o,Re,r,i)),$e=!0;break}$e||a.push(I[1])}break;case"PtgArray":a.push("{"+Swt(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var pe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&pe.indexOf(t[0][T][0])==-1){I=t[0][x];var De=!0;switch(I[1][0]){case 4:De=!1;case 0:b=Xi(" ",I[1][1]);break;case 5:De=!1;case 1:b=Xi("\r",I[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}a.push((De?b:"")+a.pop()+(De?"":b)),x=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function Awt(t){if(t==null){var e=Ue(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return K1(t);return K1(0)}function Iwt(t,e,n,r,i){var s=Y1(e,n,i),o=Awt(t.v),a=Ue(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=Ue(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var h=Co([s,o,a,c]);return h}function EL(t,e,n){var r=t.read_shift(4),i=Ewt(t,r,n),s=t.read_shift(4),o=s>0?bwt(t,s,i,n):null;return[i,o]}var Pwt=EL,SL=EL,Rwt=EL,Cwt=EL,Mwt={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},fEe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Nwt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Owt(t){var e="of:="+t.replace(dq,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function Lwt(t){return t.replace(/\./,"!")}var YT=typeof Map<"u";function mq(t,e,n){var r=0,i=t.length;if(n){if(YT?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=YT?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(YT?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function TL(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(op=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=XN(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=Sz(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function pEe(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function a0(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){cbe(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Dwt(t,e,n){if(t&&t["!ref"]){var r=gi(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function $wt(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Is(t[n])+'"/>';return e+"</mergeCells>"}function jwt(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=gA(Wr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+yt("outlinePr",null,c)}!s&&!a||(i[i.length]=yt("sheetPr",a,o))}var Fwt=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Vwt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function zwt(t){var e={sheet:1};return Fwt.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),Vwt.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=Zbe(t.password).toString(16).toUpperCase()),yt("sheetProtection",null,e)}function Uwt(t){return pEe(t),yt("pageMargins",null,t)}function Gwt(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=yt("col",null,TL(i,r)));return n[n.length]="</cols>",n.join("")}function Bwt(t,e,n,r){var i=typeof t.ref=="string"?t.ref:Is(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=gc(i);o.s.r==o.e.r&&(o.e.r=gc(e["!ref"]).e.r,i=Is(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),yt("autoFilter",null,{ref:i})}function Wwt(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),yt("sheetViews",yt("sheetView",null,i),{})}function Hwt(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=GI[t.v];break;case"d":r&&r.cellDates?i=$a(t.v,-1).toISOString():(t=Al(t),t.t="n",i=""+(t.v=kl($a(t.v)))),typeof t.z>"u"&&(t.z=ns[14]);break;default:i=t.v;break}var a=Mo("v",Wr(i)),l={r:e},c=a0(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=Mo("v",""+mq(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=yt("f",Wr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),yt("c",a,l)}function qwt(t,e,n,r){var i=[],s=[],o=gi(t["!ref"]),a="",l,c="",u=[],h=0,f=0,g=t["!rows"],v=Array.isArray(t),x={r:c},b,T=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=ya(f);for(h=o.s.r;h<=o.e.r;++h){for(s=[],c=No(h),f=o.s.c;f<=o.e.c;++f){l=u[f]+c;var A=v?(t[h]||[])[f]:t[l];A!==void 0&&(a=Hwt(A,l,t,e))!=null&&s.push(a)}(s.length>0||g&&g[h])&&(x={r:c},g&&g[h]&&(b=g[h],b.hidden&&(x.hidden=1),T=-1,b.hpx?T=ZN(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(x.ht=T,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),i[i.length]=yt("row",s.join(""),x))}if(g)for(;h<g.length;++h)g&&g[h]&&(x={r:h+1},b=g[h],b.hidden&&(x.hidden=1),T=-1,b.hpx?T=ZN(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(x.ht=T,x.customHeight=1),b.level&&(x.outlineLevel=b.level),i[i.length]=yt("row","",x));return i.join("")}function mEe(t,e,n,r){var i=[Rs,yt("worksheet",null,{xmlns:xb[0],"xmlns:r":so.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=gi(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Is(u)}r||(r={}),l["!comments"]=[];var h=[];jwt(l,n,t,e,i),i[i.length]=yt("dimension",null,{ref:c}),i[i.length]=Wwt(l,e,t,n),e.sheetFormat&&(i[i.length]=yt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=Gwt(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=qwt(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=zwt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=Bwt(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=$wt(l["!merges"]));var f=-1,g,v=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(g={ref:x[0]},x[1].Target.charAt(0)!="#"&&(v=Vr(r,-1,Wr(x[1].Target).replace(/#.*$/,""),yr.HLINK),g["r:id"]="rId"+v),(f=x[1].Target.indexOf("#"))>-1&&(g.location=Wr(x[1].Target.slice(f+1))),x[1].Tooltip&&(g.tooltip=Wr(x[1].Tooltip)),i[i.length]=yt("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=Uwt(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Mo("ignoredErrors",yt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(v=Vr(r,-1,"../drawings/drawing"+(t+1)+".xml",yr.DRAW),i[i.length]=yt("drawing",null,{"r:id":"rId"+v}),l["!drawing"]=h),l["!comments"].length>0&&(v=Vr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",yr.VML),i[i.length]=yt("legacyDrawing",null,{"r:id":"rId"+v}),l["!legacy"]=v),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Kwt(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function Ywt(t,e,n){var r=Ue(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=ZN(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var h=-1,f=-1,g=u<<10;g<u+1<<10;++g){c.c=g;var v=Array.isArray(n)?(n[c.r]||[])[c.c]:n[qr(c)];v&&(h<0&&(h=g),f=g)}h<0||(++a,r.write_shift(4,h),r.write_shift(4,f))}var x=r.l;return r.l=l,r.write_shift(4,a),r.l=x,r.length>r.l?r.slice(0,r.l):r}function Xwt(t,e,n,r){var i=Ywt(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&tt(t,0,i)}var Zwt=yv,Jwt=bb;function Qwt(){}function e2t(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=uvt(t),n}function t2t(t,e,n){n==null&&(n=Ue(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return qN({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),Rbe(t,n),n.slice(0,n.l)}function n2t(t){var e=gu(t);return[e]}function r2t(t,e,n){return n==null&&(n=Ue(8)),pv(e,n)}function i2t(t){var e=mv(t);return[e]}function s2t(t,e,n){return n==null&&(n=Ue(4)),gv(e,n)}function o2t(t){var e=gu(t),n=t.read_shift(1);return[e,n,"b"]}function a2t(t,e,n){return n==null&&(n=Ue(9)),pv(e,n),n.write_shift(1,t.v?1:0),n}function l2t(t){var e=mv(t),n=t.read_shift(1);return[e,n,"b"]}function c2t(t,e,n){return n==null&&(n=Ue(5)),gv(e,n),n.write_shift(1,t.v?1:0),n}function u2t(t){var e=gu(t),n=t.read_shift(1);return[e,n,"e"]}function h2t(t,e,n){return n==null&&(n=Ue(9)),pv(e,n),n.write_shift(1,t.v),n}function d2t(t){var e=mv(t),n=t.read_shift(1);return[e,n,"e"]}function f2t(t,e,n){return n==null&&(n=Ue(8)),gv(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function p2t(t){var e=gu(t),n=t.read_shift(4);return[e,n,"s"]}function m2t(t,e,n){return n==null&&(n=Ue(12)),pv(e,n),n.write_shift(4,e.v),n}function g2t(t){var e=mv(t),n=t.read_shift(4);return[e,n,"s"]}function y2t(t,e,n){return n==null&&(n=Ue(8)),gv(e,n),n.write_shift(4,e.v),n}function v2t(t){var e=gu(t),n=Eb(t);return[e,n,"n"]}function _2t(t,e,n){return n==null&&(n=Ue(16)),pv(e,n),K1(t.v,n),n}function x2t(t){var e=mv(t),n=Eb(t);return[e,n,"n"]}function w2t(t,e,n){return n==null&&(n=Ue(12)),gv(e,n),K1(t.v,n),n}function b2t(t){var e=gu(t),n=Cbe(t);return[e,n,"n"]}function E2t(t,e,n){return n==null&&(n=Ue(12)),pv(e,n),Mbe(t.v,n),n}function S2t(t){var e=mv(t),n=Cbe(t);return[e,n,"n"]}function T2t(t,e,n){return n==null&&(n=Ue(8)),gv(e,n),Mbe(t.v,n),n}function k2t(t){var e=gu(t),n=aq(t);return[e,n,"is"]}function A2t(t){var e=gu(t),n=va(t);return[e,n,"str"]}function I2t(t,e,n){return n==null&&(n=Ue(12+4*t.v.length)),pv(e,n),lo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function P2t(t){var e=mv(t),n=va(t);return[e,n,"str"]}function R2t(t,e,n){return n==null&&(n=Ue(8+4*t.v.length)),gv(e,n),lo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function C2t(t,e,n){var r=t.l+e,i=gu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=SL(t,r-t.l,n);o[3]=O2(a,null,i,n.supbooks,n)}else t.l=r;return o}function M2t(t,e,n){var r=t.l+e,i=gu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=SL(t,r-t.l,n);o[3]=O2(a,null,i,n.supbooks,n)}else t.l=r;return o}function N2t(t,e,n){var r=t.l+e,i=gu(t);i.r=n["!row"];var s=Eb(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=SL(t,r-t.l,n);o[3]=O2(a,null,i,n.supbooks,n)}else t.l=r;return o}function O2t(t,e,n){var r=t.l+e,i=gu(t);i.r=n["!row"];var s=va(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=SL(t,r-t.l,n);o[3]=O2(a,null,i,n.supbooks,n)}else t.l=r;return o}var L2t=yv,D2t=bb;function $2t(t,e){return e==null&&(e=Ue(4)),e.write_shift(4,t),e}function j2t(t,e){var n=t.l+e,r=yv(t),i=lq(t),s=va(t),o=va(t),a=va(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function F2t(t,e){var n=Ue(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));bb({s:ao(t[0]),e:ao(t[0])},n),cq("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return lo(i||"",n),lo(t[1].Tooltip||"",n),lo("",n),n.slice(0,n.l)}function V2t(){}function z2t(t,e,n){var r=t.l+e,i=Nbe(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=Pwt(t,r-t.l,n);o[1]=a}else t.l=r;return o}function U2t(t,e,n){var r=t.l+e,i=yv(t),s=[i];if(n.cellFormula){var o=Cwt(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function G2t(t,e,n){n==null&&(n=Ue(18));var r=TL(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var gEe=["left","right","top","bottom","header","footer"];function B2t(t){var e={};return gEe.forEach(function(n){e[n]=Eb(t)}),e}function W2t(t,e){return e==null&&(e=Ue(48)),pEe(t),gEe.forEach(function(n){K1(t[n],e)}),e}function H2t(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function q2t(t,e,n){n==null&&(n=Ue(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function K2t(t){var e=Ue(24);return e.write_shift(4,4),e.write_shift(4,1),bb(t,e),e}function Y2t(t,e){return e==null&&(e=Ue(66)),e.write_shift(2,t.password?Zbe(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function X2t(){}function Z2t(){}function J2t(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Al(e),e.z=e.z||ns[14],e.v=kl($a(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=a0(i.cellXfs,e,i),e.l&&s["!links"].push([qr(l),e.l]),e.c&&s["!comments"].push([qr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=mq(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?tt(t,18,y2t(e,l)):tt(t,7,m2t(e,l))):(l.t="str",o?tt(t,17,R2t(e,l)):tt(t,6,I2t(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?tt(t,13,T2t(e,l)):tt(t,2,E2t(e,l)):o?tt(t,16,w2t(e,l)):tt(t,5,_2t(e,l)),!0;case"b":return l.t="b",o?tt(t,15,c2t(e,l)):tt(t,4,a2t(e,l)),!0;case"e":return l.t="e",o?tt(t,14,f2t(e,l)):tt(t,3,h2t(e,l)),!0}return o?tt(t,12,s2t(e,l)):tt(t,1,r2t(e,l)),!0}function Q2t(t,e,n,r){var i=gi(e["!ref"]||"A1"),s,o="",a=[];tt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=No(u),Xwt(t,e,i,u);var h=!1;if(u<=i.e.r)for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(a[f]=ya(f)),s=a[f]+o;var g=l?(e[u]||[])[f]:e[s];if(!g){h=!1;continue}h=J2t(t,g,u,f,r,e,h)}}tt(t,146)}function ebt(t,e){!e||!e["!merges"]||(tt(t,177,$2t(e["!merges"].length)),e["!merges"].forEach(function(n){tt(t,176,D2t(n))}),tt(t,178))}function tbt(t,e){!e||!e["!cols"]||(tt(t,390),e["!cols"].forEach(function(n,r){n&&tt(t,60,G2t(r,n))}),tt(t,391))}function nbt(t,e){!e||!e["!ref"]||(tt(t,648),tt(t,649,K2t(gi(e["!ref"]))),tt(t,650))}function rbt(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=Vr(n,-1,r[1].Target.replace(/#.*$/,""),yr.HLINK);tt(t,494,F2t(r,i))}}),delete e["!links"]}function ibt(t,e,n,r){if(e["!comments"].length>0){var i=Vr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",yr.VML);tt(t,551,cq("rId"+i)),e["!legacy"]=i}}function sbt(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Is(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=gc(s);a.s.r==a.e.r&&(a.e.r=gc(e["!ref"]).e.r,s=Is(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),tt(t,161,bb(gi(s))),tt(t,162)}}function obt(t,e,n){tt(t,133),tt(t,137,q2t(e,n)),tt(t,138),tt(t,134)}function abt(t,e){e["!protect"]&&tt(t,535,Y2t(e["!protect"]))}function lbt(t,e,n,r){var i=wl(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=gi(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],tt(i,129),(n.vbaraw||o["!outline"])&&tt(i,147,t2t(a,o["!outline"])),tt(i,148,Jwt(l)),obt(i,o,n.Workbook),tbt(i,o),Q2t(i,o,t,e),abt(i,o),sbt(i,o,n,t),ebt(i,o),rbt(i,o,r),o["!margins"]&&tt(i,476,W2t(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&nbt(i,o),ibt(i,o,t,r),tt(i,130),i.end()}function cbt(t,e){t.l+=10;var n=va(t);return{name:n}}var ubt=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function hbt(t){return!t.Workbook||!t.Workbook.WBProps?"false":U1t(t.Workbook.WBProps.date1904)?"true":"false"}var dbt="][*?/\\".split("");function yEe(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return dbt.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function fbt(t,e,n){t.forEach(function(r,i){yEe(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function pbt(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];fbt(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)Dwt(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function vEe(t){var e=[Rs];e[e.length]=yt("workbook",null,{xmlns:xb[0],"xmlns:r":so.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(ubt.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=yt("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Wr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=yt("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=yt("definedName",Wr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function mbt(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=Ez(t),n.name=va(t),n}function gbt(t,e){return e||(e=Ue(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),cq(t.strRelID,e),lo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function ybt(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?va(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function vbt(t,e){e||(e=Ue(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),Rbe(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function _bt(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=hvt(t),o=Rwt(t,0,n),a=lq(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function xbt(t,e){tt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};tt(t,156,gbt(i))}tt(t,144)}function wbt(t,e){e||(e=Ue(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return lo("SheetJS",e),lo(FN.version,e),lo(FN.version,e),lo("7262",e),e.length>e.l?e.slice(0,e.l):e}function bbt(t,e){e||(e=Ue(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function Ebt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(tt(t,135),tt(t,158,bbt(i)),tt(t,136))}}function Sbt(t,e){var n=wl();return tt(n,131),tt(n,128,wbt()),tt(n,153,vbt(t.Workbook&&t.Workbook.WBProps||null)),Ebt(n,t),xbt(n,t),tt(n,132),n.end()}function Tbt(t,e,n){return(e.slice(-4)===".bin"?Sbt:vEe)(t)}function kbt(t,e,n,r,i){return(e.slice(-4)===".bin"?lbt:mEe)(t,n,r,i)}function Abt(t,e,n){return(e.slice(-4)===".bin"?W_t:eEe)(t,n)}function Ibt(t,e,n){return(e.slice(-4)===".bin"?v_t:Xbe)(t,n)}function Pbt(t,e,n){return(e.slice(-4)===".bin"?axt:sEe)(t)}function Rbt(t){return(t.slice(-4)===".bin"?Q_t:rEe)()}function Cbt(t,e){var n=[];return t.Props&&n.push(Avt(t.Props,e)),t.Custprops&&n.push(Ivt(t.Props,t.Custprops)),n.join("")}function Mbt(){return""}function Nbt(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(yt("NumberFormat",null,{"ss:Format":Wr(ns[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(yt("Style",s.join(""),o))}),yt("Styles",n.join(""))}function _Ee(t){return yt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+fq(t.Ref,{r:0,c:0})})}function Obt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(_Ee(i)))}return yt("Names",n.join(""))}function Lbt(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(_Ee(a)))}return s.join("")}function Dbt(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(yt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(yt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(yt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(yt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Mo("ProtectContents","True")),t["!protect"].objects&&i.push(Mo("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Mo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Mo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Mo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":yt("WorksheetOptions",i.join(""),{xmlns:ec.x})}function $bt(t){return t.map(function(e){var n=z1t(e.t||""),r=yt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return yt("Comment",r,{"ss:Author":e.a})}).join("")}function jbt(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+Wr(fq(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=ao(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=Wr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=Wr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",f="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=GI[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||ns[14]);break;case"s":h="String",f=V1t(t.v||"");break}var g=a0(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var v=t.v!=null?f:"",x=t.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(t.c||[]).length>0&&(x+=$bt(t.c)),yt("Cell",x,a)}function Fbt(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Qbe(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Vbt(t,e,n,r){if(!t["!ref"])return"";var i=gi(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(b,T){hq(b);var A=!!b.width,I=TL(T,b),P={"ss:Index":T+1};A&&(P["ss:Width"]=YN(I.width)),b.hidden&&(P["ss:Hidden"]="1"),a.push(yt("Column",null,P))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[Fbt(c,(t["!rows"]||[])[c])],h=i.s.c;h<=i.e.c;++h){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(f=!0);break}if(!f){var g={r:c,c:h},v=qr(g),x=l?(t[c]||[])[h]:t[v];u.push(jbt(x,v,t,e,n,r,g))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function zbt(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?Lbt(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?Vbt(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(Dbt(s,e,t,n)),r.join("")}function Ubt(t,e){e||(e={}),t.SSF||(t.SSF=Al(ns)),t.SSF&&(xL(),_L(t.SSF),e.revssf=wL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],a0(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(Cbt(t,e)),n.push(Mbt()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(yt("Worksheet",zbt(r,e,t),{"ss:Name":Wr(t.SheetNames[r])}));return n[2]=Nbt(t,e),n[3]=Obt(t),Rs+yt("Workbook",n.join(""),{xmlns:ec.ss,"xmlns:o":ec.o,"xmlns:x":ec.x,"xmlns:ss":ec.ss,"xmlns:dt":ec.dt,"xmlns:html":ec.html})}var Hj={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Gbt(t,e){var n=[],r=[],i=[],s=0,o,a=foe(koe,"n"),l=foe(Aoe,"n");if(t.Props)for(o=Oo(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=Oo(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)Gbe.indexOf(i[s][0])>-1||Vbe.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&Xr.utils.cfb_add(e,"/SummaryInformation",Moe(r,Hj.SI,l,Aoe)),(n.length||c.length)&&Xr.utils.cfb_add(e,"/DocumentSummaryInformation",Moe(n,Hj.DSI,a,koe,c.length?c:null,Hj.UDI))}function Bbt(t,e){var n=e||{},r=Xr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Xr.utils.cfb_add(r,i,xEe(t,n)),n.biff==8&&(t.Props||t.Custprops)&&Gbt(t,r),n.biff==8&&t.vbaraw&&lxt(r,Xr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var Wbt={0:{f:Kwt},1:{f:n2t},2:{f:b2t},3:{f:u2t},4:{f:o2t},5:{f:v2t},6:{f:A2t},7:{f:p2t},8:{f:O2t},9:{f:N2t},10:{f:C2t},11:{f:M2t},12:{f:i2t},13:{f:S2t},14:{f:d2t},15:{f:l2t},16:{f:x2t},17:{f:P2t},18:{f:g2t},19:{f:aq},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:_bt},40:{},42:{},43:{f:A_t},44:{f:T_t},45:{f:R_t},46:{f:M_t},47:{f:C_t},48:{},49:{f:ivt},50:{},51:{f:K_t},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:s_t},62:{f:k2t},63:{f:ext},64:{f:X2t},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Dd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:H2t},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:e2t},148:{f:Zwt,p:16},151:{f:V2t},152:{},153:{f:ybt},154:{},155:{},156:{f:mbt},157:{},158:{},159:{T:1,f:m_t},160:{T:-1},161:{T:1,f:yv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:L2t},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:H_t},336:{T:-1},337:{f:Z_t,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Ez},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Qvt},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:z2t},427:{f:U2t},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:B2t},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Qwt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:j2t},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Ez},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:sxt},633:{T:1},634:{T:-1},635:{T:1,f:rxt},636:{T:-1},637:{f:lvt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:cbt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Z2t},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function vt(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&iq(n)&&t.push(n)}}function Hbt(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return vt(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function WI(t,e,n){return t||(t=Ue(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function qbt(t,e,n,r){var i=Ue(9);return WI(i,t,e),Wbe(n,r||"b",i),i}function Kbt(t,e,n){var r=Ue(8+2*n.length);return WI(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Ybt(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?kl($a(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?vt(t,2,c_t(n,r,i)):vt(t,3,l_t(n,r,i));return;case"b":case"e":vt(t,5,qbt(n,r,e.v,e.t));return;case"s":case"str":vt(t,4,Kbt(n,r,(e.v||"").slice(0,255)));return}vt(t,1,WI(null,n,r))}function Xbt(t,e,n,r){var i=Array.isArray(e),s=gi(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Is(s)}for(var c=s.s.r;c<=s.e.r;++c){a=No(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=ya(u)),o=l[u]+a;var h=i?(e[c]||[])[u]:e[o];h&&Ybt(t,h,c,u)}}}function Zbt(t,e){for(var n=e||{},r=wl(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return vt(r,n.biff==4?1033:n.biff==3?521:9,uq(t,16,n)),Xbt(r,t.Sheets[t.SheetNames[i]],i,n),vt(r,10),r.end()}function Jbt(t,e,n){vt(t,49,Wvt({sz:12,name:"Arial"},n))}function Qbt(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&vt(t,1054,Kvt(i,e[i],n))})}function eEt(t,e){var n=Ue(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),vt(t,2151,n),n=Ue(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),Kbe(gi(e["!ref"]||"A1"),n),n.write_shift(4,4),vt(t,2152,n)}function tEt(t,e){for(var n=0;n<16;++n)vt(t,224,Ooe({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){vt(t,224,Ooe(r,0,e))})}function nEt(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];vt(t,440,n_t(r)),r[1].Tooltip&&vt(t,2048,r_t(r))}delete e["!links"]}function rEt(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&vt(t,125,o_t(TL(i,r),i))})}}function iEt(t,e,n,r,i){var s=16+a0(i.cellXfs,e,i);if(e.v==null&&!e.bf){vt(t,513,Y1(n,r,s));return}if(e.bf)vt(t,6,Iwt(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?kl($a(e.v)):e.v;vt(t,515,Jvt(n,r,o,s));break;case"b":case"e":vt(t,517,Zvt(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=mq(i.Strings,e.v,i.revStrings);vt(t,253,Hvt(n,r,a,s))}else vt(t,516,qvt(n,r,(e.v||"").slice(0,255),s,i));break;default:vt(t,513,Y1(n,r,s))}}function sEt(t,e,n){var r=wl(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,h="",f=[],g=gi(s["!ref"]||"A1"),v=c?65536:16384;if(g.e.c>255||g.e.r>=v){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,v-1)}vt(r,2057,uq(n,16,e)),vt(r,13,zc(1)),vt(r,12,zc(100)),vt(r,15,Ia(!0)),vt(r,17,Ia(!1)),vt(r,16,K1(.001)),vt(r,95,Ia(!0)),vt(r,42,Ia(!1)),vt(r,43,Ia(!1)),vt(r,130,zc(1)),vt(r,128,Xvt()),vt(r,131,Ia(!1)),vt(r,132,Ia(!1)),c&&rEt(r,s["!cols"]),vt(r,512,Yvt(g,e)),c&&(s["!links"]=[]);for(var x=g.s.r;x<=g.e.r;++x){h=No(x);for(var b=g.s.c;b<=g.e.c;++b){x===g.s.r&&(f[b]=ya(b)),u=f[b]+h;var T=l?(s[x]||[])[b]:s[u];T&&(iEt(r,T,x,b,e),c&&T.l&&s["!links"].push([u,T.l]))}}var A=a.CodeName||a.name||i;return c&&vt(r,574,Bvt((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&vt(r,229,t_t(s["!merges"])),c&&nEt(r,s),vt(r,442,qbe(A)),c&&eEt(r,s),vt(r,10),r.end()}function oEt(t,e,n){var r=wl(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(vt(r,2057,uq(t,5,n)),n.bookType=="xla"&&vt(r,135),vt(r,225,a?zc(1200):null),vt(r,193,Cvt(2)),l&&vt(r,191),l&&vt(r,192),vt(r,226),vt(r,92,Vvt("SheetJS",n)),vt(r,66,zc(a?1200:1252)),a&&vt(r,353,zc(0)),a&&vt(r,448),vt(r,317,a_t(t.SheetNames.length)),a&&t.vbaraw&&vt(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";vt(r,442,qbe(c))}vt(r,156,zc(17)),vt(r,25,Ia(!1)),vt(r,18,Ia(!1)),vt(r,19,zc(0)),a&&vt(r,431,Ia(!1)),a&&vt(r,444,zc(0)),vt(r,61,Gvt()),vt(r,64,Ia(!1)),vt(r,141,zc(0)),vt(r,34,Ia(hbt(t)=="true")),vt(r,14,Ia(!0)),a&&vt(r,439,Ia(!1)),vt(r,218,zc(0)),Jbt(r,t,n),Qbt(r,t.SSF,n),tEt(r,n),a&&vt(r,352,Ia(!1));var u=r.end(),h=wl();a&&vt(h,140,i_t()),a&&n.Strings&&Hbt(h,252,Uvt(n.Strings)),vt(h,10);var f=h.end(),g=wl(),v=0,x=0;for(x=0;x<t.SheetNames.length;++x)v+=(a?12:11)+(a?2:1)*t.SheetNames[x].length;var b=u.length+v+f.length;for(x=0;x<t.SheetNames.length;++x){var T=s[x]||{};vt(g,133,zvt({pos:b,hs:T.Hidden||0,dt:0,name:t.SheetNames[x]},n)),b+=e[x].length}var A=g.end();if(v!=A.length)throw new Error("BS8 "+v+" != "+A.length);var I=[];return u.length&&I.push(u),A.length&&I.push(A),f.length&&I.push(f),Co(I)}function aEt(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Al(ns)),t&&t.SSF&&(xL(),_L(t.SSF),n.revssf=wL(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,gq(n),n.cellXfs=[],a0(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=sEt(i,n,t);return r.unshift(oEt(t,r,n)),Co(r)}function xEe(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=gc(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return aEt(t,e);case 4:case 3:case 2:return Zbt(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function lEt(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=qr({r:n,c:o}),h=r.dense?(t[n]||[])[o]:t[u],f=h&&h.v!=null&&(h.h||F1t(h.w||(_p(h),h.w)||""))||"",g={};a>1&&(g.rowspan=a),l>1&&(g.colspan=l),r.editable?f='<span contenteditable="true">'+f+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(yt("td",f,g))}}var v="<tr>";return v+s.join("")+"</tr>"}var cEt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',uEt="</body></html>";function hEt(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function wEe(t,e){var n=e||{},r=n.header!=null?n.header:cEt,i=n.footer!=null?n.footer:uEt,s=[r],o=gc(t["!ref"]);n.dense=Array.isArray(t),s.push(hEt(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(lEt(t,o,a,n));return s.push("</table>"+i),s.join("")}function bEe(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?ao(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=gc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var h=[],f=0,g=t["!rows"]||(t["!rows"]=[]),v=0,x=0,b=0,T=0,A=0,I=0;for(t["!cols"]||(t["!cols"]=[]);v<a.length&&x<l;++v){var P=a[v];if(zoe(P)){if(r.display)continue;g[x]={hidden:!0}}var M=P.children;for(b=T=0;b<M.length;++b){var F=M[b];if(!(r.display&&zoe(F))){var C=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):G1t(F.innerHTML),N=F.getAttribute("data-z")||F.getAttribute("z");for(f=0;f<h.length;++f){var O=h[f];O.s.c==T+s&&O.s.r<x+i&&x+i<=O.e.r&&(T=O.e.c+1-s,f=-1)}I=+F.getAttribute("colspan")||1,((A=+F.getAttribute("rowspan")||1)>1||I>1)&&h.push({s:{r:x+i,c:T+s},e:{r:x+i+(A||1)-1,c:T+s+(I||1)-1}});var j={t:"s",v:C},V=F.getAttribute("data-t")||F.getAttribute("t")||"";C!=null&&(C.length==0?j.t=V||"z":r.raw||C.trim().length==0||V=="s"||(C==="TRUE"?j={t:"b",v:!0}:C==="FALSE"?j={t:"b",v:!1}:isNaN(sp(C))?isNaN(mA(C).getDate())||(j={t:"d",v:$a(C)},r.cellDates||(j={t:"n",v:kl(j.v)}),j.z=r.dateNF||ns[14]):j={t:"n",v:sp(C)})),j.z===void 0&&N!=null&&(j.z=N);var G="",U=F.getElementsByTagName("A");if(U&&U.length)for(var fe=0;fe<U.length&&!(U[fe].hasAttribute("href")&&(G=U[fe].getAttribute("href"),G.charAt(0)!="#"));++fe);G&&G.charAt(0)!="#"&&(j.l={Target:G}),r.dense?(t[x+i]||(t[x+i]=[]),t[x+i][T+s]=j):t[qr({c:T+s,r:x+i})]=j,c.e.c<T+s&&(c.e.c=T+s),T+=I}}++x}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,x-1+i),t["!ref"]=Is(c),x>=l&&(t["!fullref"]=Is((c.e.r=a.length-v+x-1+i,c))),t}function EEe(t,e){var n=e||{},r=n.dense?[]:{};return bEe(r,t,e)}function dEt(t,e){return fv(EEe(t,e),e)}function zoe(t){var e="",n=fEt(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function fEt(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var pEt=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+yA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Rs+e}})(),Uoe=(function(){var t=function(s){return Wr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+Wr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,h=gc(s["!ref"]||"A1"),f=s["!merges"]||[],g=0,v=Array.isArray(s);if(s["!cols"])for(u=0;u<=h.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(c=0;c<h.s.r;++c)x=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=h.e.r;++c){for(x=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),u=0;u<h.s.c;++u)l.push(e);for(;u<=h.e.c;++u){var T=!1,A={},I="";for(g=0;g!=f.length;++g)if(!(f[g].s.c>u)&&!(f[g].s.r>c)&&!(f[g].e.c<u)&&!(f[g].e.r<c)){(f[g].s.c!=u||f[g].s.r!=c)&&(T=!0),A["table:number-columns-spanned"]=f[g].e.c-f[g].s.c+1,A["table:number-rows-spanned"]=f[g].e.r-f[g].s.r+1;break}if(T){l.push(n);continue}var P=qr({r:c,c:u}),M=v?(s[c]||[])[u]:s[P];if(M&&M.f&&(A["table:formula"]=Wr(Owt(M.f)),M.F&&M.F.slice(0,P.length)==P)){var F=gc(M.F);A["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,A["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!M){l.push(e);continue}switch(M.t){case"b":I=M.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=M.v?"true":"false";break;case"n":I=M.w||String(M.v||0),A["office:value-type"]="float",A["office:value"]=M.v||0;break;case"s":case"str":I=M.v==null?"":M.v,A["office:value-type"]="string";break;case"d":I=M.w||$a(M.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=$a(M.v).toISOString(),A["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(I);if(M.l&&M.l.Target){var N=M.l.Target;N=N.charAt(0)=="#"?"#"+Lwt(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),C=yt("text:a",C,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+yt("table:table-cell",yt("text:p",C,{}),A)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var h=c["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;hq(h),h.ods=a;var f=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var h=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[Rs],c=yA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=yA({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(jbe().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)l.push(r(o.Sheets[o.SheetNames[h]],o,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function SEe(t,e){if(e.bookType=="fods")return Uoe(t,e);var n=eq(),r="",i=[],s=[];return r="mimetype",Vn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Vn(n,r,Uoe(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Vn(n,r,pEt(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Vn(n,r,Rs+jbe()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Vn(n,r,kvt(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Vn(n,r,Svt(i)),n}function JN(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function mEt(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ju(gA(t))}function gEt(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function Yg(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function yEt(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function vA(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function Fr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function yw(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Ds(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=vA(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=vA(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function bo(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(Fr(r*8+i.type)),i.type==2&&e.push(Fr(i.data.length)),e.push(i.data))})}),Yg(e)}function Lu(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=vA(t,r),s=Ds(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:yw(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=Ds(a.data),c=yw(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=yw(s[3][0].data)>>>0>0),n.push(o)}return n}function A_(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:Fr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:Fr(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:Fr(o.data.length)}],r[2].push({data:bo(o.meta),type:2})});var s=bo(r);e.push(Fr(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),Yg(e)}function vEt(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=vA(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[Yg(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=Yg(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Du(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(vEt(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return Yg(e)}function I_(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=Fr(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Yg(e)}function qj(t,e){var n=new Uint8Array(32),r=JN(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,yEt(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function Kj(t,e){var n=new Uint8Array(32),r=JN(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function mm(t){var e=Ds(t);return vA(e[1][0].data)}function _Et(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&yw(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=JN(t[7][0].data),u=0,h=[],f=JN(t[4][0].data),g=0,v=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),f.setUint16(x*2,65535);continue}c.setUint16(x*2,u,!0),f.setUint16(x*2,g,!0);var b,T;switch(typeof e[x]){case"string":b=qj({t:"s",v:e[x]},n),T=Kj({t:"s",v:e[x]},n);break;case"number":b=qj({t:"n",v:e[x]},n),T=Kj({t:"n",v:e[x]},n);break;case"boolean":b=qj({t:"b",v:e[x]},n),T=Kj({t:"b",v:e[x]},n);break;default:throw new Error("Unsupported value "+e[x])}h.push(b),u+=b.length,v.push(T),g+=T.length,++l}for(t[2][0].data=Fr(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),f.setUint16(x*2,65535,!0);return t[6][0].data=Yg(h),t[3][0].data=Yg(v),l}function xEt(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=gc(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Is(r)));var s=QN(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(ne){return ne.forEach(function(ie){typeof ie=="string"&&o.push(ie)})});var a={},l=[],c=Xr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0],le=ne[1];if(ie.type==2&&ie.name.match(/\.iwa/)){var ve=ie.content,qe=Du(ve),Ke=Lu(qe);Ke.forEach(function(Se){l.push(Se.id),a[Se.id]={deps:[],location:le,type:yw(Se.messages[0].meta[1][0].data)}})}}),l.sort(function(ne,ie){return ne-ie});var u=l.filter(function(ne){return ne>1}).map(function(ne){return[ne,Fr(ne)]});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0];if(ne[1],!!ie.name.match(/\.iwa/)){var le=Lu(Du(ie.content));le.forEach(function(ve){ve.messages.forEach(function(qe){u.forEach(function(Ke){ve.messages.some(function(Se){return yw(Se.meta[1][0].data)!=11006&&gEt(Se.data,Ke[1])})&&a[Ke[0]].deps.push(ve.id)})})})}});for(var h=Xr.find(c,a[1].location),f=Lu(Du(h.content)),g,v=0;v<f.length;++v){var x=f[v];x.id==1&&(g=x)}var b=mm(Ds(g.messages[0].data)[1][0].data);for(h=Xr.find(c,a[b].location),f=Lu(Du(h.content)),v=0;v<f.length;++v)x=f[v],x.id==b&&(g=x);for(b=mm(Ds(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=Lu(Du(h.content)),v=0;v<f.length;++v)x=f[v],x.id==b&&(g=x);for(b=mm(Ds(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=Lu(Du(h.content)),v=0;v<f.length;++v)x=f[v],x.id==b&&(g=x);var T=Ds(g.messages[0].data);{T[6][0].data=Fr(r.e.r+1),T[7][0].data=Fr(r.e.c+1);var A=mm(T[46][0].data),I=Xr.find(c,a[A].location),P=Lu(Du(I.content));{for(var M=0;M<P.length&&P[M].id!=A;++M);if(P[M].id!=A)throw"Bad ColumnRowUIDMapArchive";var F=Ds(P[M].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var C=0;C<=r.e.c;++C){var N=[];N[1]=N[2]=[{type:0,data:Fr(C+420690)}],F[1].push({type:2,data:bo(N)}),F[2].push({type:0,data:Fr(C)}),F[3].push({type:0,data:Fr(C)})}F[4]=[],F[5]=[],F[6]=[];for(var O=0;O<=r.e.r;++O)N=[],N[1]=N[2]=[{type:0,data:Fr(O+726270)}],F[4].push({type:2,data:bo(N)}),F[5].push({type:0,data:Fr(O)}),F[6].push({type:0,data:Fr(O)});P[M].messages[0].data=bo(F)}I.content=I_(A_(P)),I.size=I.content.length,delete T[46];var j=Ds(T[4][0].data);{j[7][0].data=Fr(r.e.r+1);var V=Ds(j[1][0].data),G=mm(V[2][0].data);I=Xr.find(c,a[G].location),P=Lu(Du(I.content));{if(P[0].id!=G)throw"Bad HeaderStorageBucket";var U=Ds(P[0].messages[0].data);for(O=0;O<s.length;++O){var fe=Ds(U[2][0].data);fe[1][0].data=Fr(O),fe[4][0].data=Fr(s[O].length),U[2][O]={type:U[2][0].type,data:bo(fe)}}P[0].messages[0].data=bo(U)}I.content=I_(A_(P)),I.size=I.content.length;var Re=mm(j[2][0].data);I=Xr.find(c,a[Re].location),P=Lu(Du(I.content));{if(P[0].id!=Re)throw"Bad HeaderStorageBucket";for(U=Ds(P[0].messages[0].data),C=0;C<=r.e.c;++C)fe=Ds(U[2][0].data),fe[1][0].data=Fr(C),fe[4][0].data=Fr(r.e.r+1),U[2][C]={type:U[2][0].type,data:bo(fe)};P[0].messages[0].data=bo(U)}I.content=I_(A_(P)),I.size=I.content.length;var Be=mm(j[4][0].data);(function(){for(var ne=Xr.find(c,a[Be].location),ie=Lu(Du(ne.content)),le,ve=0;ve<ie.length;++ve){var qe=ie[ve];qe.id==Be&&(le=qe)}var Ke=Ds(le.messages[0].data);{Ke[3]=[];var Se=[];o.forEach(function(Ye,sn){Se[1]=[{type:0,data:Fr(sn)}],Se[2]=[{type:0,data:Fr(1)}],Se[3]=[{type:2,data:mEt(Ye)}],Ke[3].push({type:2,data:bo(Se)})})}le.messages[0].data=bo(Ke);var we=A_(ie),Dt=I_(we);ne.content=Dt,ne.size=ne.content.length})();var $e=Ds(j[3][0].data);{var pe=$e[1][0];delete $e[2];var De=Ds(pe.data);{var Me=mm(De[2][0].data);(function(){for(var ne=Xr.find(c,a[Me].location),ie=Lu(Du(ne.content)),le,ve=0;ve<ie.length;++ve){var qe=ie[ve];qe.id==Me&&(le=qe)}var Ke=Ds(le.messages[0].data);{delete Ke[6],delete $e[7];var Se=new Uint8Array(Ke[5][0].data);Ke[5]=[];for(var we=0,Dt=0;Dt<=r.e.r;++Dt){var Ye=Ds(Se);we+=_Et(Ye,s[Dt],o),Ye[1][0].data=Fr(Dt),Ke[5].push({data:bo(Ye),type:2})}Ke[1]=[{type:0,data:Fr(r.e.c+1)}],Ke[2]=[{type:0,data:Fr(r.e.r+1)}],Ke[3]=[{type:0,data:Fr(we)}],Ke[4]=[{type:0,data:Fr(r.e.r+1)}]}le.messages[0].data=bo(Ke);var sn=A_(ie),$t=I_(sn);ne.content=$t,ne.size=ne.content.length})()}pe.data=bo(De)}j[3][0].data=bo($e)}T[4][0].data=bo(j)}g.messages[0].data=bo(T);var Q=A_(f),W=I_(Q);return h.content=W,h.size=h.content.length,c}function wEt(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function gq(t){wEt([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function bEt(t,e){return e.bookType=="ods"?SEe(t,e):e.bookType=="numbers"?xEt(t,e):e.bookType=="xlsb"?EEt(t,e):SEt(t,e)}function EEt(t,e){Lx=1024,t&&!t.SSF&&(t.SSF=Al(ns)),t&&t.SSF&&(xL(),_L(t.SSF),e.revssf=wL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,YT?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=oEe.indexOf(e.bookType)>-1,i=Lbe();gq(e=e||{});var s=eq(),o="",a=0;if(e.cellXfs=[],a0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Vn(s,o,Fbe(t.Props,e)),i.coreprops.push(o),Vr(e.rels,2,o,yr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Vn(s,o,zbe(t.Props)),i.extprops.push(o),Vr(e.rels,3,o,yr.EXT_PROPS),t.Custprops!==t.Props&&Oo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Vn(s,o,Ube(t.Custprops)),i.custprops.push(o),Vr(e.rels,4,o,yr.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Vn(s,o,kbt(a-1,o,e,t,u)),i.sheets.push(o),Vr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,yr.WS[0])}if(h){var g=h["!comments"],v=!1,x="";g&&g.length>0&&(x="xl/comments"+a+"."+n,Vn(s,x,Pbt(g,x)),i.comments.push(x),Vr(u,-1,"../comments"+a+"."+n,yr.CMNT),v=!0),h["!legacy"]&&v&&Vn(s,"xl/drawings/vmlDrawing"+a+".vml",iEe(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Vn(s,$be(o),mw(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Vn(s,o,Ibt(e.Strings,o,e)),i.strs.push(o),Vr(e.wbrels,-1,"sharedStrings."+n,yr.SST)),o="xl/workbook."+n,Vn(s,o,Tbt(t,o)),i.workbooks.push(o),Vr(e.rels,1,o,yr.WB),o="xl/theme/theme1.xml",Vn(s,o,nEe(t.Themes,e)),i.themes.push(o),Vr(e.wbrels,-1,"theme/theme1.xml",yr.THEME),o="xl/styles."+n,Vn(s,o,Abt(t,o,e)),i.styles.push(o),Vr(e.wbrels,-1,"styles."+n,yr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Vn(s,o,t.vbaraw),i.vba.push(o),Vr(e.wbrels,-1,"vbaProject.bin",yr.VBA)),o="xl/metadata."+n,Vn(s,o,Rbt(o)),i.metadata.push(o),Vr(e.wbrels,-1,"metadata."+n,yr.XLMETA),Vn(s,"[Content_Types].xml",Dbe(i,e)),Vn(s,"_rels/.rels",mw(e.rels)),Vn(s,"xl/_rels/workbook."+n+".rels",mw(e.wbrels)),delete e.revssf,delete e.ssf,s}function SEt(t,e){Lx=1024,t&&!t.SSF&&(t.SSF=Al(ns)),t&&t.SSF&&(xL(),_L(t.SSF),e.revssf=wL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,YT?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=oEe.indexOf(e.bookType)>-1,i=Lbe();gq(e=e||{});var s=eq(),o="",a=0;if(e.cellXfs=[],a0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Vn(s,o,Fbe(t.Props,e)),i.coreprops.push(o),Vr(e.rels,2,o,yr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Vn(s,o,zbe(t.Props)),i.extprops.push(o),Vr(e.rels,3,o,yr.EXT_PROPS),t.Custprops!==t.Props&&Oo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Vn(s,o,Ube(t.Custprops)),i.custprops.push(o),Vr(e.rels,4,o,yr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var h={"!id":{}},f=t.Sheets[t.SheetNames[a-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Vn(s,o,mEe(a-1,e,t,h)),i.sheets.push(o),Vr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,yr.WS[0])}if(f){var v=f["!comments"],x=!1,b="";if(v&&v.length>0){var T=!1;v.forEach(function(A){A[1].forEach(function(I){I.T==!0&&(T=!0)})}),T&&(b="xl/threadedComments/threadedComment"+a+"."+n,Vn(s,b,txt(v,u,e)),i.threadedcomments.push(b),Vr(h,-1,"../threadedComments/threadedComment"+a+"."+n,yr.TCMNT)),b="xl/comments"+a+"."+n,Vn(s,b,sEe(v)),i.comments.push(b),Vr(h,-1,"../comments"+a+"."+n,yr.CMNT),x=!0}f["!legacy"]&&x&&Vn(s,"xl/drawings/vmlDrawing"+a+".vml",iEe(a,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Vn(s,$be(o),mw(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Vn(s,o,Xbe(e.Strings,e)),i.strs.push(o),Vr(e.wbrels,-1,"sharedStrings."+n,yr.SST)),o="xl/workbook."+n,Vn(s,o,vEe(t)),i.workbooks.push(o),Vr(e.rels,1,o,yr.WB),o="xl/theme/theme1.xml",Vn(s,o,nEe(t.Themes,e)),i.themes.push(o),Vr(e.wbrels,-1,"theme/theme1.xml",yr.THEME),o="xl/styles."+n,Vn(s,o,eEe(t,e)),i.styles.push(o),Vr(e.wbrels,-1,"styles."+n,yr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Vn(s,o,t.vbaraw),i.vba.push(o),Vr(e.wbrels,-1,"vbaProject.bin",yr.VBA)),o="xl/metadata."+n,Vn(s,o,rEe()),i.metadata.push(o),Vr(e.wbrels,-1,"metadata."+n,yr.XLMETA),u.length>1&&(o="xl/persons/person.xml",Vn(s,o,nxt(u)),i.people.push(o),Vr(e.wbrels,-1,"persons/person.xml",yr.PEOPLE)),Vn(s,"[Content_Types].xml",Dbe(i,e)),Vn(s,"_rels/.rels",mw(e.rels)),Vn(s,"xl/_rels/workbook."+n+".rels",mw(e.wbrels)),delete e.revssf,delete e.ssf,s}function TEt(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=vp(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function TEe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return zI(e.file,Xr.write(t,{type:Er?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xr.write(t,e)}function kEt(t,e){var n=Al(e||{}),r=bEt(t,n);return AEt(r,n)}function AEt(t,e){var n={},r=Er?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Xr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(vL(i))}return e.password&&typeof encrypt_agile<"u"?TEe(encrypt_agile(i,e.password),e):e.type==="file"?zI(e.file,i):e.type=="string"?WT(i):i}function IEt(t,e){var n=e||{},r=Bbt(t,n);return TEe(r,n)}function Zh(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return pA(gA(r));case"binary":return gA(r);case"string":return t;case"file":return zI(e.file,r,"utf8");case"buffer":return Er?Ip(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Zh(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function PEt(t,e){switch(e.type){case"base64":return pA(t);case"binary":return t;case"string":return t;case"file":return zI(e.file,t,"binary");case"buffer":return Er?Ip(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function bC(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?pA(n):e.type=="string"?WT(n):n;case"file":return zI(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function kEe(t,e){r1t(),pbt(t);var n=Al(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=kEe(t,n);return n.type="array",vL(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return Zh(Ubt(t,n),n);case"slk":case"sylk":return Zh(h_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return Zh(wEe(t.Sheets[t.SheetNames[i]],n),n);case"txt":return PEt(AEe(t.Sheets[t.SheetNames[i]],n),n);case"csv":return Zh(yq(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return Zh(d_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return bC(u_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return Zh(f_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return Zh(x_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return Zh(Ybe.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return Zh(SEe(t,n),n);case"wk1":return bC(Loe.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return bC(Loe.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),bC(xEe(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),IEt(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return kEt(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function REt(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function CEt(t,e,n){var r={};return r.type="file",r.file=e,REt(r),kEe(t,r)}function MEt(t,e,n,r,i,s,o,a){var l=No(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:n,enumerable:!1})}catch{f.__rowNum__=n}else f.__rowNum__=n;if(!o||t[n])for(var g=e.s.c;g<=e.e.c;++g){var v=o?t[n][g]:t[r[g]+l];if(v===void 0||v.t===void 0){if(c===void 0)continue;s[g]!=null&&(f[s[g]]=c);continue}var x=v.v;switch(v.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(s[g]!=null){if(x==null)if(v.t=="e"&&x===null)f[s[g]]=null;else if(c!==void 0)f[s[g]]=c;else if(u&&x===null)f[s[g]]=null;else continue;else f[s[g]]=u&&(v.t!=="n"||v.t==="n"&&a.rawNumbers!==!1)?x:_p(v,x,a);x!=null&&(h=!1)}}return{row:f,isempty:h}}function QN(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=gi(u);break;case"number":l=gi(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var h=No(l.s.r),f=[],g=[],v=0,x=0,b=Array.isArray(t),T=l.s.r,A=0,I={};b&&!t[T]&&(t[T]=[]);var P=c.skipHidden&&t["!cols"]||[],M=c.skipHidden&&t["!rows"]||[];for(A=l.s.c;A<=l.e.c;++A)if(!(P[A]||{}).hidden)switch(f[A]=ya(A),n=b?t[T][A]:t[f[A]+h],r){case 1:s[A]=A-l.s.c;break;case 2:s[A]=f[A];break;case 3:s[A]=c.header[A-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=_p(n,null,c),x=I[o]||0,!x)I[o]=1;else{do a=o+"_"+x++;while(I[a]);I[o]=x,I[a]=1}s[A]=a}for(T=l.s.r+i;T<=l.e.r;++T)if(!(M[T]||{}).hidden){var F=MEt(t,l,T,f,r,s,b,c);(F.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[v++]=F.row)}return g.length=v,g}var Goe=/"/g;function NEt(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",h=No(n),f=e.s.c;f<=e.e.c;++f)if(r[f]){var g=a.dense?(t[n]||[])[f]:t[r[f]+h];if(g==null)u="";else if(g.v!=null){l=!1,u=""+(a.rawNumbers&&g.t=="n"?g.v:_p(g,null,a));for(var v=0,x=0;v!==u.length;++v)if((x=u.charCodeAt(v))===i||x===s||x===34||a.forceQuotes){u='"'+u.replace(Goe,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(l=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(Goe,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function yq(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=gi(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(t);for(var f=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],v=i.s.c;v<=i.e.c;++v)(f[v]||{}).hidden||(h[v]=ya(v));for(var x=0,b=i.s.r;b<=i.e.r;++b)(g[b]||{}).hidden||(u=NEt(t,i,b,h,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((x++?a:"")+u)));return delete r.dense,n.join("")}function AEe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=yq(t,e);return n}function OEt(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=gi(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=ya(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=No(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function IEe(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?ao(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var h=gi(s["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var f=r.header||[],g=0;e.forEach(function(x,b){Oo(x).forEach(function(T){(g=f.indexOf(T))==-1&&(f[g=f.length]=T);var A=x[T],I="z",P="",M=qr({c:a+g,r:o+b+i});c=_A(s,M),A&&typeof A=="object"&&!(A instanceof Date)?s[M]=A:(typeof A=="number"?I="n":typeof A=="boolean"?I="b":typeof A=="string"?I="s":A instanceof Date?(I="d",r.cellDates||(I="n",A=kl(A)),P=r.dateNF||ns[14]):A===null&&r.nullError&&(I="e",A=0),c?(c.t=I,c.v=A,delete c.w,delete c.R,P&&(c.z=P)):s[M]=c={t:I,v:A},P&&(c.z=P))})}),u.e.c=Math.max(u.e.c,a+f.length-1);var v=No(o);if(i)for(g=0;g<f.length;++g)s[ya(g+a)+v]={t:"s",v:f[g]};return s["!ref"]=Is(u),s}function LEt(t,e){return IEe(null,t,e)}function _A(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=ao(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?_A(t,qr(e)):_A(t,qr({r:e,c:n||0}))}function DEt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function $Et(){return{SheetNames:[],Sheets:{}}}function jEt(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(yEe(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function FEt(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=DEt(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function VEt(t,e){return t.z=e,t}function PEe(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function zEt(t,e,n){return PEe(t,"#"+e,n)}function UEt(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function GEt(t,e,n,r){for(var i=typeof e!="string"?e:gi(e),s=typeof e=="string"?e:Is(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=_A(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var Yj={encode_col:ya,encode_row:No,encode_cell:qr,encode_range:Is,decode_col:oq,decode_row:sq,split_cell:rvt,decode_cell:ao,decode_range:gc,format_cell:_p,sheet_add_aoa:Pbe,sheet_add_json:IEe,sheet_add_dom:bEe,aoa_to_sheet:wb,json_to_sheet:LEt,table_to_sheet:EEe,table_to_book:dEt,sheet_to_csv:yq,sheet_to_txt:AEe,sheet_to_json:QN,sheet_to_html:wEe,sheet_to_formulae:OEt,sheet_to_row_object_array:QN,sheet_get_cell:_A,book_new:$Et,book_append_sheet:jEt,book_set_sheet_visibility:FEt,cell_set_number_format:VEt,cell_set_hyperlink:PEe,cell_set_internal_link:zEt,cell_add_comment:UEt,sheet_set_array_formula:GEt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const lh=po()(vh((t,e)=>({vondsten:[],addVondst:n=>t(r=>({vondsten:[...r.vondsten,{...n,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:n=>t(r=>({vondsten:r.vondsten.filter(i=>i.id!==n)})),updateVondst:(n,r)=>t(i=>({vondsten:i.vondsten.map(s=>s.id===n?{...s,...r}:s)})),clearAll:()=>t({vondsten:[]}),exportAsGeoJSON:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:n.map(a=>({type:"Feature",geometry:{type:"Point",coordinates:[a.location.lng,a.location.lat]},properties:{id:a.id,objectType:a.objectType,material:a.material,period:a.period,depth:a.depth,notes:a.notes,timestamp:a.timestamp,photoUrl:a.photoUrl,condition:a.condition,weight:a.weight,length:a.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},exportAsCSV:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=n.map(c=>{const u=new Date(c.timestamp).toLocaleDateString("nl-NL"),h=c.notes?`"${c.notes.replace(/"/g,'""')}"`:"";return`${c.id},${c.location.lat},${c.location.lng},${u},${c.objectType},${c.material},${c.period},${c.depth||""},${c.condition||""},${c.weight||""},${c.length||""},${h},${c.photoUrl||""}`}).join(`
`),s=r+i,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},exportAsExcel:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(a=>({ID:a.id,Latitude:a.location.lat,Longitude:a.location.lng,Datum:new Date(a.timestamp).toLocaleDateString("nl-NL"),Type:a.objectType,Materiaal:a.material,Periode:a.period,"Diepte (cm)":a.depth||"",Conditie:a.condition||"","Gewicht (g)":a.weight||"","Lengte (mm)":a.length||"",Notities:a.notes||"","Foto URL":a.photoUrl||""})),i=Yj.json_to_sheet(r),s=Yj.book_new();Yj.book_append_sheet(s,i,"Vondsten");const o=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=o,CEt(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(l=>{const c=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${c}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},exportAsKML:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${n.map(l=>{const c=new Date(l.timestamp).toLocaleDateString("nl-NL"),u=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${c}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${u}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}}),{name:"detectorapp-local-vondsten"})),BEt={Fectio:{naam:"Fectio",latinNaam:"Fectio",type:"castellum",periode:"ca. 4 - 270 n.Chr.",beschrijving:"Groot Romeins castellum bij Bunnik/Vechten, aan de splitsing van Rijn en Vecht. Een van de belangrijkste legerbases in Nederland met ruimte voor 500 soldaten. Het fort had barakken, badhuis, hospitaal en pakhuizen. Buiten de muren woonden handelaren en soldatenfamilies in een vicus. Hier is een compleet Romeins schip gevonden (De Meern 1). Strategisch gelegen voor transport over de rivieren. Veel vondsten door natte bodem: leer, hout, textiel naast munten en militaria. Te bezoeken: Archeologisch Park Castellum Hoge Woerd met reconstructie en museum.",watWasHier:"Groot castellum met ruimte voor 500 soldaten, barakken, badhuis, hospitaal en pakhuizen. Buiten het fort een burgerdorp.",watTeZien:"Archeologisch Park Castellum Hoge Woerd toont de contouren. Museum met veel vondsten waaronder een Romeins schip.",verwachteVondsten:"Munten, fibulae, aardewerk, wapens, paardentuig, militaire uitrusting. Door natte bodem ook leer, hout en textiel.",betekenis:"Een van de belangrijkste forten aan de Limes. Knooppunt voor troepen- en goederentransport.",bronnen:["https://www.hogewoerd.nl","https://www.livius.org/articles/place/fectio-vechten/"]},Traiectum:{naam:"Traiectum",latinNaam:"Traiectum",type:"castellum",periode:"ca. 42 - 275 n.Chr.",beschrijving:'Romeins castellum onder het huidige Domplein in Utrecht. De naam betekent "doorwaadbare plaats" - hier splitsten Rijn en Vecht. Het fort (124x152m in laatste fase) bood plaats aan ca. 500 soldaten. Vijf bouwfases: eerst hout, na 200 n.Chr. steen met tufsteen uit de Eifel. Cohors II Hispanorum peditata (Spaanse infanterie) was hier uniek gelegerd 88-275 n.Chr. - hun dakpanstempels zijn nergens anders aan de Limes gevonden! Het fort werd verwoest tijdens de Bataafse Opstand (69 n.Chr.). DOMunder onder het Domplein toont de opgegraven resten. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Castellum (500 soldaten) bij riviersplitsing. Cohors II Hispanorum gelegerd.",watTeZien:"DOMunder onder het Domplein: opgravingen te bezoeken. Principia en poorten blootgelegd.",verwachteVondsten:"Dakpannen met stempels, munten, aardewerk, tufsteen bouwmateriaal, militaria.",betekenis:"UNESCO Werelderfgoed. Oorsprong van de stad Utrecht.",bronnen:["https://www.livius.org/articles/place/traiectum-utrecht/","https://www.utrechtaltijd.nl/verhalen/castellum-traiectum-een-romeinse-legerbasis-in-het-hart-van-de-domstad/","https://www.romeinen.nl/locatie-overzicht/3447271878/domunder-castellum-traiectum"]},Laurum:{naam:"Laurum",latinNaam:"Laurum",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in het huidige Woerden aan de Oude Rijn. Garnizoen van ca. 500 soldaten in houten barakken. Bijzonder vanwege de natte veenbodem: organisch materiaal bleef bewaard zoals houten schrijfplankjes met Latijnse teksten, leren schoenen en een Romeinse boot. Het fort werd meerdere keren herbouwd na overstromingen. De contouren zijn in het stratenpatroon herkenbaar. Buiten de muren lag een vicus (burgerdorp). Vondsten in Stadsmuseum Woerden, waaronder unieke houten voorwerpen die elders zijn vergaan.",watWasHier:"Castellum voor 500 soldaten met houten barakken, badhuis en pakhuizen. Vicus buiten de muren.",watTeZien:"Stadsmuseum Woerden met bijzondere vondsten. Fort-contouren in stratenpatroon herkenbaar.",verwachteVondsten:"Militaria, aardewerk, munten, schrijfplankjes. Door natte veengrond ook hout, leer en schoenen.",betekenis:"Toont Romeins bouwen in moeilijk veengebied. Unieke organische vondsten.",bronnen:["https://www.castellumwoerden.nl"]},"Castellum Praetorium Agrippinae":{naam:"Praetorium Agrippinae",latinNaam:"Praetorium Agrippinae",type:"castellum",periode:"ca. 40 - 275 n.Chr.",beschrijving:"Een van de best opgegraven Romeinse locaties van Nederland. Het castellum werd gesticht in de winter van 39/40 n.Chr. door keizer Caligula, vernoemd naar zijn moeder Vipsania Agrippina. Een opgegraven wijnvat bevatte wijn van de persoonlijke wijngaarden van de keizer! Er zijn 7 bouwfasen gevonden, 6 van hout en de laatste van steen - uniek compleet inzicht in Romeinse bouwtechnieken. Cohors III Gallorum equitata was hier gelegerd. Bij opgravingen (1941-1953) zijn door het grondwater veel organische vondsten bewaard: voedselresten, leer, touw. De vicus buiten het fort strekte zich 1 km uit met 700+ graven. Op het Castellumplein zijn de contouren in brons gemarkeerd.",watWasHier:"Castellum met 7 bouwfasen. Vicus (1 km) met 700+ graven. Detachement Cohors III Gallorum.",watTeZien:"Castellumplein met bronzen markeringen. Torenmuseum Valkenburg. Gereconstrueerde poort.",verwachteVondsten:"Militaria, organisch materiaal (voedsel, leer, touw), aardewerk, munten, inscripties.",betekenis:"Best gedocumenteerde Romeinse fort van Nederland. UNESCO Werelderfgoed.",bronnen:["https://www.livius.org/articles/place/praetorium-agrippinae-valkenburg-zh/","https://www.geschiedenisvanzuidholland.nl/zien-en-doen/locaties/praetorium-agrippinae-in-valkenburg/","https://oudvalkenburgzh.nl/torenmuseum-5/"]},"Castra Hunnerberg":{naam:"Castra Hunnerberg",latinNaam:"Castra",type:"legerkamp",periode:"ca. 16 v.Chr. - 104 n.Chr.",beschrijving:'Enorm Romeins legerkamp op de Hunnerberg bij Nijmegen - 42 hectare (80 voetbalvelden), ruimte voor 12.000 man. De enige plek in Nederland waar echte legioenen (geen hulptroepen) verbleven! Na de Bataafse Opstand (69 n.Chr.) vestigde Legio X Gemina Pia Fidelis zich hier - opgericht door Julius Caesar en het bekendste legioen van Nederland. De afkorting LXG is talloze keren gevonden op dakpannen en tegels. Bij opgravingen zijn ruim 1000 fragmenten militaire uitrusting en paardentuig gevonden. In 104 n.Chr. vertrok het legioen naar de Balkan - een ramp voor de economie. UNESCO Werelderfgoed sinds 2021, omschreven als "bakermat van de Nederduitse Limes".',watWasHier:"Legerkamp voor 12.000 man. Legio X Gemina (71-104 n.Chr.), opgericht door Julius Caesar.",watTeZien:"Museum Het Valkhof. Museum Kam in de Hunnerberg. Grafvelden in Nijmegen-Oost.",verwachteVondsten:"Legioenstempels LXG, militaria, paardentuig, dakpannen, munten, grafstenen.",betekenis:"UNESCO Werelderfgoed. Bakermat van de Limes. Enige legioenskamp in Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-hunnerberg/","https://www.welkominnijmegen.nl/pages/geschiedenis/de-romeinen-in-nijmegen/de-legerkampen.php","https://mijngelderland.nl/inhoud/specials/archeokroniek/romeinse-militaire-uitrusting-en-paardentuig-van-de-hunerberg-te-nijmegen"]},"Castellum Kops Plateau":{naam:"Kops Plateau",latinNaam:"Oppidum Batavorum",type:"castellum",periode:"ca. 10 v.Chr. - 70 n.Chr.",beschrijving:"Vroege Romeinse basis op het Kops Plateau in Nijmegen, later de civiele hoofdstad van de Bataven: Oppidum Batavorum. Hier woonden Romeinen en Bataven samen - het eerste contactpunt tussen beide culturen. Verwoest tijdens de Bataafse Opstand van 69-70 n.Chr. onder leiding van Julius Civilis. Gemengde vondsten: Romeinse militaria n Keltisch-Bataafse voorwerpen. Vroege importaardewerk en munten van Augustus. Nu natuurgebied. Museum Het Valkhof toont de unieke vondsten van deze ontmoeting van culturen.",watWasHier:"Eerst Romeins kamp, later Bataafse hoofdstad. Romeinen en Bataven woonden samen.",watTeZien:"Kops Plateau is natuurgebied. Museum Het Valkhof toont de vondsten.",verwachteVondsten:"Vroege militaria, Keltisch-Bataafse voorwerpen, importaardewerk, munten van Augustus.",betekenis:"Eerste contactpunt Romeinen-Bataven. Begin van romanisering Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-kops-plateau/"]},"Nijmegen, Valkhof":{naam:"Valkhof Nijmegen",latinNaam:"Valkhof",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:"Laat-Romeinse versterking op het Valkhof in Nijmegen, aan de Waaloever. Gebouwd toen het Rijk onder druk stond van Germaanse invallen. Strategische positie boven de rivier. Continuteit: Karel de Grote bouwde hier later zijn palts (koninklijke residentie). De Sint-Nicolaaskapel bevat mogelijk Karolingische elementen op Romeinse fundamenten. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Museum Het Valkhof toont de overgang van Romeinse tijd naar vroege middeleeuwen.",watWasHier:"Laat-Romeinse versterking boven de Waal. Later Karolingische palts.",watTeZien:"Valkhofpark met Sint-Nicolaaskapel. Museum Het Valkhof.",verwachteVondsten:"Laat-Romeinse munten, gordels, riemtongen, militaire gespen, 3e-4e eeuws aardewerk.",betekenis:"Toont overgang Romeinse tijd naar middeleeuwen. Nijmegen bleef machtscentrum.",bronnen:["https://www.museumhetvalkhof.nl"]},"Castellum Op de Hoge Woerd":{naam:"Hoge Woerd",latinNaam:"Castellum",type:"castellum",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeins castellum in Leidsche Rijn (Utrecht), nu een voorbeeldig archeologisch park. Middelgroot fort met houten gebouwen en een burgerdorp (vicus) buiten de muren. Hier is een compleet Romeins schip gevonden: De Meern 1, een 25 meter lange vrachtboot. Door de natte kleigrond bleef veel organisch materiaal bewaard. Het park toont de reconstructie van het fort - je kunt over de originele fundamenten lopen. Modern museum met interactieve presentatie. Ideale plek om te zien hoe een Romeins fort eruitzag.",watWasHier:"Middelgroot castellum met houten gebouwen. Vicus buiten de muren. Compleet schip gevonden.",watTeZien:"Archeologisch Park Hoge Woerd: reconstructie fort, museum, originele fundamenten.",verwachteVondsten:"Militaria, scheepsonderdelen, aardewerk, munten. Door natte grond ook organisch materiaal.",betekenis:"Best gepresenteerde Romeinse fort in Nederland. Ideaal om fort-layout te begrijpen.",bronnen:["https://www.hogewoerd.nl"]},Lugdunum:{naam:"Lugdunum",latinNaam:"Lugdunum",type:"vlootbasis",periode:"ca. 40 - 270 n.Chr.",beschrijving:`Romeinse vlootbasis en versterkte graanopslagplaats bij de monding van de Rijn, het westelijkste punt van de gehele Limes. Hier stond mogelijk een enorme vuurtoren (ca. 60m hoog) naar model van de Pharos van Ostia - vissers noemden deze "Kalla's toren" (Caligula). Door de vele dakpannen van de Romeinse vloot wordt aangenomen dat dit een vlootbasis was. Het fort is door kustafslag in zee verdwenen. Bij stormen in 1520, 1552 en 1562 waren de runes van de "Brittenburg" zichtbaar op het strand; de laatst gedateerde vondst was 270 n.Chr. Het Rijksmuseum van Oudheden in Leiden toont vondsten. De beroemde kaart van Ortelius toont hoe het eruit zag.`,watWasHier:"Vlootbasis met vuurtoren bij Rijnmonding. Graanopslag voor Britannia.",watTeZien:"Fort verdwenen in zee. RMO Leiden toont vondsten en kaart van Ortelius.",verwachteVondsten:"Na stormen: munten, aardewerk, militaria. Fort zelf onbereikbaar in Noordzee.",betekenis:"Westelijk eindpunt van de Limes. Verbinding met Britannia.",bronnen:["https://www.livius.org/articles/place/lugdunum-katwijk/","https://nl.wikipedia.org/wiki/Lugdunum_(Katwijk)"]},"Vlootbasis Naaldwijk":{naam:"Vlootbasis Naaldwijk",type:"vlootbasis",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Vermoedelijke basis van de Classis Germanica (Germaanse vloot) bij Naaldwijk in het Westland. De Romeinse vloot patrouilleerde langs de Noordzeekust en vervoerde troepen en goederen naar Britannia. Haven met dokken voor oorlogsschepen en transportboten. Mariniers (classiarii) waren hier gestationeerd. Het gebied is nu landbouwgrond, maar bij opgravingen zijn haven-structuren en scheepsgerelateerde vondsten gedaan. Ankers, scheepsonderdelen en specifieke mariniers-uitrusting. Toont het belang van zeemacht voor de Romeinse grensverdediging.",watWasHier:"Haven voor oorlogsschepen. Mariniers gestationeerd. Patrouilles langs Noordzeekust.",watTeZien:"Gebied is landbouwgrond. Vondsten in lokale musea.",verwachteVondsten:"Scheepsonderdelen, ankers, mariniers-uitrusting, importaardewerk.",betekenis:"Toont belang Romeinse vloot voor kustverdediging.",bronnen:[]},"Minifort Ockenburg":{naam:"Minifort Ockenburg",type:"minifort",periode:"ca. 150 - 180 n.Chr.",beschrijving:"Klein Romeins kustfort bij Ockenburg in Den Haag, op een oude strandwal. Bewaakte de kust tegen piraten en Germaanse invallen over zee. Ruimte voor slechts 20-30 soldaten - een wachtpost eerder dan een echt fort. Korte gebruiksperiode van ca. 30 jaar. Toont dat de Romeinen niet alleen de rivieren maar ook de Noordzeekust verdedigden. Het terrein is beschermd rijksmonument maar niet publiek toegankelijk. Vondsten in het Haags Historisch Museum: militaria, aardewerk en munten uit de 2e eeuw.",watWasHier:"Kleine kustwachtpost voor 20-30 soldaten op strandwal.",watTeZien:"Terrein beschermd maar niet toegankelijk. Haags Historisch Museum.",verwachteVondsten:"Kleine hoeveelheden militaria, aardewerk, munten 2e eeuw.",betekenis:"Toont Romeinse kustverdediging naast rivierforten.",bronnen:[]},"Castellum Ceuclum":{naam:"Ceuclum",latinNaam:"Ceuclum",type:"castellum",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Romeins castellum bij Cuijk aan de Maas, waar de belangrijke weg naar het noorden de rivier kruiste. Het fort bewaakte een brug of veerpont. Garnizoen van hulptroepen. De naam Cuijk is afgeleid van Ceuclum. Bij de brug werden ritueel munten geofferd. Het fort lag op een strategisch punt waar de Maasroute de landweg kruiste. Vondsten wijzen op handel en militaire activiteit. Het Maasmuseum in Cuijk toont lokale Romeinse vondsten. Onder het centrum zijn bij bouwwerkzaamheden regelmatig resten gevonden.",watWasHier:"Castellum bij Maasbrug. Belangrijke rivierovergang en kruispunt.",watTeZien:"Maasmuseum Cuijk. Resten gevonden onder centrum.",verwachteVondsten:"Munten (geofferd bij brug), fibulae, aardewerk, bruggerelateerde vondsten.",betekenis:"Belangrijke schakel in wegennet langs de Maas.",bronnen:["https://www.livius.org/articles/place/ceuclum-cuijk/"]},"Castellum Meinerswijk":{naam:"Meinerswijk",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in de uiterwaarden bij Arnhem-Meinerswijk aan de Rijn. Het fort bewaakt een strategisch punt waar de rivier goed te overzien was. Meerdere bouwfasen door overstromingen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan: militaria, aardewerk, munten en scheepsresten. Het gebied is nu natuurgebied Meinerswijk met wisselende waterstanden. Na hoog water kunnen vondsten aan de oppervlakte komen. Museum Arnhem toont Romeinse vondsten uit de regio.",watWasHier:"Castellum in uiterwaarden. Meerdere bouwfasen door overstromingen.",watTeZien:"Natuurgebied Meinerswijk. Museum Arnhem.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},Levefanum:{naam:"Levefanum",latinNaam:"Levefanum",type:"versterking",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeinse versterking bij Wijk bij Duurstede, waar de Rijn splitste in de Lek en Kromme Rijn. Strategisch cruciaal punt voor controle over het scheepvaartverkeer. Waarschijnlijk ook een haven voor overslag van goederen. Op dezelfde plek ontstond later de Karolingische handelsstad Dorestad, een van de belangrijkste havens van vroegmiddeleeuws Europa. De continuteit toont het blijvende belang van deze locatie. Dorestad Museum vertelt het verhaal van Romeinse tijd tot Vikingaanvallen. Vondsten: munten, handelsaardewerk, militaria.",watWasHier:"Versterking bij riviersplitsing. Haven en overslagpunt. Later Dorestad.",watTeZien:"Dorestad Museum. Terrein bebouwd.",verwachteVondsten:"Munten, handelsaardewerk, militaria, scheepsgerelateerde vondsten.",betekenis:"Strategisch controlepunt waterwegen. Later belangrijke handelsstad Dorestad.",bronnen:[]},"Nigrum Pullum":{naam:"Nigrum Pullum",latinNaam:"Nigrum Pullum (Zwarte Poel)",type:"minifort",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Zwammerdam aan de Oude Rijn. Garnizoen van 100-150 soldaten met pakhuizen en haven voor riviertransport. Wereldberoemd door de vondst van 6 Romeinse schepen (1971-1974) in perfecte staat - bewaard door de natte veengrond. De Zwammerdamschepen zijn de best bewaarde Romeinse rivierschepen ter wereld en tonen uniek inzicht in Romeins transport en scheepsbouw. Vondsten: schepen, leren schoeisel, houten voorwerpen, aardewerk, munten, militaria. Te zien in Rijksmuseum van Oudheden, Leiden.",watWasHier:"Klein fort met pakhuizen en haven. Bij opgravingen werden 6 Romeinse schepen gevonden.",watTeZien:"De schepen zijn in het Rijksmuseum van Oudheden in Leiden. Het terrein zelf is niet te bezoeken.",verwachteVondsten:"Scheepsonderdelen, leren schoeisel, houten voorwerpen, aardewerk, munten, en door de natte veengrond organisch materiaal.",betekenis:"Wereldberoemd om de goed bewaarde Romeinse schepen. Toont transport over de Rijn.",bronnen:["https://www.rmo.nl/collectie/themas/zwammerdam"]},"Stenen wachttoren Vleuterweide":{naam:"Wachttoren Vleuterweide",type:"wachttoren",periode:"ca. 150 - 250 n.Chr.",beschrijving:"Bijzondere stenen wachttoren in Vleuterweide bij Utrecht - de meeste Romeinse wachttorens waren van hout. De stenen constructie wijst op permanentie en belang. Onderdeel van het signaleringssysteem langs de Limes: bij gevaar werden vuren aangestoken om forten te waarschuwen. De toren bood uitzicht over de omgeving en de rivier. Mogelijk woonden hier ook families van de soldaten. De fundamenten zijn gemarkeerd in de moderne woonwijk. Vondsten: bouwmateriaal (dakpannen, stenen), aardewerk, persoonlijke bezittingen. Centraal Museum Utrecht.",watWasHier:"Stenen wachttoren (ongebruikelijk). Signaalpost voor waarschuwingssysteem.",watTeZien:"Fundamenten gemarkeerd in wijk. Centraal Museum Utrecht.",verwachteVondsten:"Dakpannen met legioenstempels, aardewerk, persoonlijke bezittingen.",betekenis:"Een van weinige bekende stenen wachttorens. Toont variatie in bouwwijzen.",bronnen:[]},"Wachttoren Bunnik":{naam:"Wachttoren Bunnik",type:"wachttoren",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Houten wachttoren bij Bunnik aan de Rijn, onderdeel van het signaleringssysteem langs de Limes. Elke paar kilometer stond een toren met uitzicht over de rivier. Bij nadering van vijanden werden vuren of rooksignalen gegeven, zodat binnen minuten alle forten gewaarschuwd waren. De torens waren meestal van hout op een aarden verhoging. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend doordat het gebied nu bebouwd is. Vondsten zijn schaars: wat aardewerk en militaria.",watWasHier:"Houten uitkijktoren voor signalering. Kleine bezetting van 4-8 soldaten.",watTeZien:"Exacte locatie onbekend. Gebied bebouwd.",verwachteVondsten:"Kleine hoeveelheden militaria en aardewerk.",betekenis:"Onderdeel signaleringssysteem langs Limes.",bronnen:[]},"Castellum Maastricht":{naam:"Castellum Maastricht",latinNaam:"Mosae Trajectum",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:'Laat-Romeinse versterking in het centrum van Maastricht bij de brug over de Maas. Mosae Trajectum betekent "Maasoversteek". Gebouwd in een periode dat het Rijk onder druk stond van Germaanse invallen. Het fort bewaakte de strategische rivierovergang. Continuteit van bewoning: Maastricht bleef bewoond tot op heden. Onder het Vrijthof en omgeving zijn Romeinse resten gevonden. Typische laat-Romeinse vondsten: gordels, riembeslag, munten 3e-4e eeuw, zwaar versterkte muren. Centre Ceramique vertelt de geschiedenis.',watWasHier:"Laat-Romeinse versterking bij Maasbrug. Verdediging tegen Germaanse invallen.",watTeZien:"Onder Vrijthof zijn resten. Centre Ceramique.",verwachteVondsten:"Laat-Romeinse munten, militaire gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont continuteit - Maastricht ononderbroken bewoond sinds Romeinse tijd.",bronnen:["https://www.centreceramique.nl"]},Roompot:{naam:"Roompot Fort",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de Roompot in Zeeland dat de toegang tot de Oosterschelde bewaakte. Het fort beschermde schepen tegen piraterij en controleerde de vaarroute. Door zeespiegelstijging en kustafslag is het fort in de golven verdwenen. De exacte locatie ligt nu onder water. Soms spoelen na stormen vondsten aan op de stranden van Noord-Beveland en Walcheren: munten, aardewerk, metalen voorwerpen. Toont dat de Romeinen de gehele Zeeuwse delta controleerden, niet alleen de grote rivieren.",watWasHier:"Kustfort dat zeeroute bewaakte. Bescherming tegen piraterij.",watTeZien:"Fort verdwenen in zee. Soms vondsten op strand na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen voorwerpen op Zeeuwse stranden.",betekenis:"Toont Romeinse controle over Zeeuwse wateren.",bronnen:[]},"Castellum Carvium":{naam:"Carvium",latinNaam:"Carvium",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Herwen-Aerdt (bij Lobith) waar Rijn en Waal samenkwamen - een strategisch knooppunt van eerste orde. Het fort controleerde het rivierverkeer op beide grote stromen. Garnizoen van hulptroepen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan. Het gebied is nu natuurgebied de Gelderse Poort met dynamische rivierlandschap. Na hoog water kunnen vondsten aan oppervlakte komen. Museum Het Valkhof in Nijmegen toont vondsten uit de regio. Scheepsresten gevonden.",watWasHier:"Fort bij samenvloeiing Rijn en Waal. Controleerde twee grote rivieren.",watTeZien:"Natuurgebied Gelderse Poort. Museum Het Valkhof Nijmegen.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Controleerde strategisch knooppunt waterwegen.",bronnen:[]},Matilo:{naam:"Matilo",latinNaam:"Matilo",type:"castellum",periode:"ca. 70 - 260 n.Chr.",beschrijving:'Romeins castellum bij Leiden-Roomburg, gebouwd na de Bataafse Opstand (69-70 n.Chr.) op een strategische plek aan de monding van het Kanaal van Corbulo. Het gigantische fort (80x120m) bood plaats aan ca. 500 soldaten en is een van de best bewaarde castella in Nederland. De archeologische resten liggen grotendeels intact onder Archeologisch Park Matilo. In het park staan 6 replica-wachttorens en een aarden wal die de omtrek van het fort visualiseert. Het fort werd tussen 240-260 n.Chr. opgeheven. De locatie Roomburg ("Romeinse burcht") verwijst naar de oorsprong. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Groot castellum (500 soldaten) bij monding Kanaal van Corbulo. Vicus buiten de muren.",watTeZien:"Archeologisch Park Matilo met 6 wachttoren-replica's en aarden wal. Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, grafgiften, crematie-urnen, aardewerk, munten, fibulae.",betekenis:"UNESCO Werelderfgoed. Een van de best bewaarde castella van Nederland.",bronnen:["https://parkmatilo.nl/het-verhaal-van-matilo/","https://www.limeswerelderfgoed.nl/locaties/2016475046/archeologisch-park-matilo","https://www.romeinen.nl/locatie-overzicht/2016475046/archeologisch-park-matilo"]},Corbulo:{naam:"Forum Hadriani",latinNaam:"Forum Hadriani (Municipium Aelium Cananefatium)",type:"versterking",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Forum Hadriani bij Voorburg was de noordelijkste Romeinse stad van het Europese continent en de enige stad met stadsrechten in Nederland. Gesticht rond 70 n.Chr. aan het Kanaal van Corbulo (34 km, verbinding Rijn-Maas). Keizer Hadrianus verleende in 121 n.Chr. marktrechten en gaf de stad zijn naam. Rond 150 n.Chr. kreeg het stadsrechten (Municipium). De stad had ca. 1000 inwoners, een stadsmuur met dubbele gracht, stenen gebouwen en tempels. Park Arentsburgh markeert de locatie. UNESCO Werelderfgoed sinds 2021. De eerste wetenschappelijke opgravingen (1827-1833) waren door Caspar Reuvens, de eerste hoogleraar archeologie ter wereld.",watWasHier:"Enige Romeinse stad met stadsrechten in Nederland. Ca. 1000 inwoners.",watTeZien:"Park Arentsburgh in Voorburg. Kanaal traceerbaar als de Vliet.",verwachteVondsten:"Stedelijke vondsten: bouwmateriaal, aardewerk, munten, inscripties, religieuze voorwerpen.",betekenis:"UNESCO Werelderfgoed. Noordelijkste Romeinse stad van Europa.",bronnen:["https://www.awlv.nl/forum-hadriani/de-stad-forum-hadriani/","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/regio-voorburg","https://kennis.cultureelerfgoed.nl/index.php/Monumenten/508083"]},"Berg - Tomveld":{naam:"Berg-Tomveld",type:"villa",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse villa bij Berg in Zuid-Limburg, mogelijk tijdelijk militair gebruikt. Dit type gebouwen diende als landbouwbedrijf met luxe woondeel voor de eigenaar. De regio Zuid-Limburg was dicht bebouwd met villa's die graan en vee leverden aan het Romeinse leger. Vondsten wijzen op welvaart: mozaekvloeren, beschilderd pleisterwerk, hypocaustum (vloerverwarming). De locatie Tomveld verwijst mogelijk naar Romeinse grafheuvels (tumuli) in de buurt. Thermenmuseum Heerlen toont de villa-cultuur.",watWasHier:"Villa rustica met mogelijk militair gebruik. Landbouw voor legervoorraden.",watTeZien:"Locatie in agrarisch gebied. Thermenmuseum Heerlen.",verwachteVondsten:"Bouwmateriaal, dakpannen, aardewerk, munten, sieraden.",betekenis:"Toont Romeinse landbouweconomie in Zuid-Limburg.",bronnen:[]},"Berg - Trappenberg":{naam:"Berg-Trappenberg",type:"legerkamp",periode:"1e eeuw v.Chr. - 1e eeuw n.Chr.",beschrijving:"Vroeg-Romeins legerkamp bij Berg in Zuid-Limburg dat later werd omgebouwd tot villa of boerderij. Toont de transitie van militaire bezetting naar civiele bewoning. Het kamp dateert uit de veroveringsperiode toen Rome dit gebied inlijfde. Na pacificatie was een fort niet meer nodig en werd het terrein civiel benut. Vondsten: vroege Romeinse militaria naast later agrarisch materiaal. Zuid-Limburg was een grenszone voordat de Limes naar de Rijn verplaatste.",watWasHier:"Eerst legerkamp, later villa/boerderij. Overgang militair naar civiel.",watTeZien:"Locatie in landbouwgebied.",verwachteVondsten:"Vroege militaria, later agrarisch aardewerk, bouwmateriaal.",betekenis:"Toont Romeinse verovering en pacificatie van Zuid-Limburg.",bronnen:[]},"Castellum Blariacum":{naam:"Blariacum",latinNaam:"Blariacum",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van het Romeinse castellum Blariacum bij Blerick (nu deel van Venlo). De naam leeft voort in de plaatsnaam. Het fort zou de Maasovergang hebben bewaakt op de route tussen Xanten en Maastricht. De exacte locatie is nooit definitief vastgesteld ondanks vele opgravingspogingen. Vondsten in de omgeving wijzen wel op Romeinse militaire aanwezigheid: militaria, munten, aardewerk. Het Limburgs Museum in Venlo toont de Romeinse geschiedenis van de regio.",watWasHier:"Vermoedelijk castellum bij Maasovergang. Exacte locatie onzeker.",watTeZien:"Locatie niet vastgesteld. Limburgs Museum Venlo.",verwachteVondsten:"Militaria, munten, aardewerk als aanwijzingen voor fortlocatie.",betekenis:"Plaatsnaam Blerick afgeleid van Blariacum. Schakel in Maasroute.",bronnen:[]},"Fortificatie Bodegraven":{naam:"Wachtpost Bodegraven",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Waarschijnlijke Romeinse wachtpost bij Bodegraven aan de Oude Rijn. Onderdeel van het signaleringssysteem tussen de grotere forten zoals Nigrum Pullum en Laurum. De wachttorens stonden om de paar kilometer en konden met vuur- of rooksignalen waarschuwingen doorgeven. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend. Bij graafwerkzaamheden in Bodegraven zijn wel Romeinse scherven gevonden die op aanwezigheid wijzen.",watWasHier:"Kleine wachtpost voor signalering. 4-8 soldaten.",watTeZien:"Exacte locatie onbekend.",verwachteVondsten:"Aardewerk, kleine hoeveelheden militaria.",betekenis:"Onderdeel communicatiesysteem langs de Limes.",bronnen:[]},Caestert:{naam:"Caestert",type:"versterking",periode:"1e eeuw v.Chr.",beschrijving:"Mogelijk de locatie waar de Eburonen onder leiding van Ambiorix in 54 v.Chr. een Romeins legioen vernietigden - de zwaarste Romeinse nederlaag in de Lage Landen. Het plateau van Caestert bij Kanne (Belgisch Limburg) had een oppidum (versterkte nederzetting). Julius Caesar beschrijft de slag in zijn Gallische Oorlogen. De locatie is omstreden, maar Caestert is een sterke kandidaat. Symbolisch belangrijke plek voor de Belgische geschiedenis. De site is nu natuurgebied met grotten.",watWasHier:"Mogelijk slagveld Ambiorix-opstand 54 v.Chr. Oppidum (versterking).",watTeZien:"Plateau Caestert, natuurgebied met grotten.",verwachteVondsten:"Keltische en vroeg-Romeinse voorwerpen, mogelijk slagveldvondsten.",betekenis:"Mogelijke locatie grootste Romeinse nederlaag in de regio.",bronnen:[]},"Castellum Driel?":{naam:"Castellum Driel",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:'Mogelijke locatie van een Romeins castellum bij Driel in de Betuwe. Het bestaan en de exacte locatie zijn onzeker, vandaar het vraagteken. De Betuwe (Insula Batavorum - "Eiland der Bataven") was kerngebied van de Bataven, bondgenoten van Rome. Zij leverden beroemde hulptroepen aan het Romeinse leger. Een fort hier zou logisch zijn om het gebied te controleren. Vondsten in de omgeving wijzen op Romeinse aanwezigheid. Museum Het Valkhof Nijmegen toont de Bataafse cultuur.',watWasHier:"Mogelijk castellum in Bataafs kerngebied. Bestaan onzeker.",watTeZien:"Geen zichtbare resten. Museum Het Valkhof.",verwachteVondsten:"Romeinse en Bataafse voorwerpen indien locatie juist.",betekenis:"Zou Romeinse controle over Bataafs gebied tonen.",bronnen:[]},"Castellum Duiven - Loowaard":{naam:"Duiven-Loowaard",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Duiven/Loowaard aan de Rijn, in de uiterwaarden tussen Arnhem en Zevenaar. Het fort bewaakte de rivierroute en de overgang naar het Bataafse gebied. De dynamische rivier heeft veel resten weggespoeld of diep begraven. Bij lage waterstanden en na erosie komen soms vondsten aan oppervlakte: munten, militaria, aardewerk. Het gebied is nu natuurgebied met grazende grote grazers. Museum Arnhem en Het Valkhof Nijmegen tonen vondsten uit de regio.",watWasHier:"Castellum aan de Rijn in uiterwaarden. Bewaakte rivierovergang.",watTeZien:"Natuurgebied. Na erosie mogelijk vondsten aan oppervlakte.",verwachteVondsten:"Militaria, munten, aardewerk na erosie of bij laag water.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},"Castellum Grinnes":{naam:"Grinnes",latinNaam:"Grinnes",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Rossum in de gemeente Maasdriel - waarschijnlijk het antieke Grinnes vermeld op de Peutingerkaart. Het fort lag aan de Waal en controleerde de rivierroute. Bij opgravingen zijn resten van het fort gevonden. De omgeving is rijk aan Romeinse vondsten: militaria, munten, aardewerk, bouwmateriaal. Het Museum voor de Bommelerwaard in Ammerzoden toont lokale vondsten. De naam Grinnes leeft niet voort in moderne plaatsnamen.",watWasHier:"Castellum aan de Waal. Vermeld op Peutingerkaart.",watTeZien:"Locatie opgegraven. Museum Bommelerwaard.",verwachteVondsten:"Militaria, munten, aardewerk, bouwmateriaal.",betekenis:"Verbinding antieke bronnen met archeologische locatie.",bronnen:[]},"Wachttoren Heumen":{naam:"Wachttoren Heumen",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren bij Heumen ten zuiden van Nijmegen. Onderdeel van het signaleringssysteem langs de Maas en verbindingswegen. De torens stonden op strategische punten met goed uitzicht. Bij nadering van vijanden werden signalen gegeven naar de grotere forten. Kleine bezetting van 4-8 soldaten die in de toren woonden. De exacte locatie is archeologisch vastgesteld. Vondsten: militaria, aardewerk, persoonlijke bezittingen.",watWasHier:"Signaleertoren met klein garnizoen. Uitzichtpunt.",watTeZien:"Locatie bekend maar geen zichtbare resten.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Onderdeel communicatienetwerk Romeins leger.",bronnen:[]},"Castellum Huissen?":{naam:"Castellum Huissen",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Huissen aan de Rijn. Het bestaan is niet zeker vastgesteld, vandaar het vraagteken. Huissen ligt op een logische plek tussen de bekende forten bij Arnhem en Zevenaar. Vondsten in de omgeving wijzen op Romeinse activiteit. De moderne bebouwing maakt onderzoek lastig. Als er een fort was, bewaakte het de rivierroute en mogelijk een oversteekplaats.",watWasHier:"Mogelijk castellum aan de Rijn. Bestaan onzeker.",watTeZien:"Geen resten zichtbaar. Gebied bebouwd.",verwachteVondsten:"Romeinse vondsten die fortaanwezigheid zouden bevestigen.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Castellum Kessel-Lith":{naam:"Kessel-Lith",type:"castellum",periode:"3e - 4e eeuw n.Chr.",beschrijving:"Laat-Romeins castellum uit de 3e-4e eeuw bij Kessel-Lith aan de Maas. Gebouwd in een periode van Germaanse invallen toen de oude Limes niet meer te handhaven was. Dit type forten was compacter en zwaarder versterkt dan de vroege castella. De locatie bij een rivierovergang bleef strategisch. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Het fort toont de veranderde militaire strategie van het late Romeinse Rijk.",watWasHier:"Laat-Romeins fort, compacter en zwaarder versterkt.",watTeZien:"Locatie bekend, weinig zichtbaar.",verwachteVondsten:"Laat-Romeinse munten, gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont Romeinse aanpassing aan nieuwe dreigingen.",bronnen:[]},Carvo:{naam:"Carvo",latinNaam:"Carvo",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke Romeinse versterking nabij Kesteren in de Betuwe. De naam komt voor op de Peutingerkaart. Kesteren lag in het hart van het Bataafse stamgebied. De Bataven waren belangrijke bondgenoten van Rome en leverden beroemde cavalerie-eenheden. Een versterking hier zou zowel bescherming als controle bieden. De exacte locatie is niet vastgesteld. Vondsten in de regio tonen intensief Romeins-Bataafs contact: import-aardewerk, wapens, paardentuig.",watWasHier:"Vermoedelijke versterking in Bataafs kerngebied.",watTeZien:"Locatie onbekend.",verwachteVondsten:"Gemengd Romeins-Bataafse voorwerpen, paardentuig.",betekenis:"Zou Romeinse aanwezigheid in Bataafs gebied tonen.",bronnen:[]},Mannaricium:{naam:"Mannaricium",latinNaam:"Mannaricium",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Vermoedelijke locatie van het Romeinse castellum Mannaricium bij Maurik aan de Rijn. De naam komt voor op de Peutingerkaart. Het fort zou de rivierroute hebben bewaakt tussen Levefanum (Wijk bij Duurstede) en forten stroomopwaarts. De moderne plaats Maurik zou afgeleid kunnen zijn van Mannaricium. Bij bouwwerkzaamheden zijn Romeinse vondsten gedaan die op een fort wijzen. De exacte contouren zijn niet bekend.",watWasHier:"Vermoedelijk castellum aan de Rijn. Vermeld op Peutingerkaart.",watTeZien:"Geen zichtbare resten. Gebied bebouwd.",verwachteVondsten:"Militaria, aardewerk, munten bij bouwwerkzaamheden.",betekenis:"Mogelijke herkomst plaatsnaam Maurik.",bronnen:[]},Oostvoorne:{naam:"Castellum Oostvoorne",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de monding van de Waal en Maas, nu verdwenen in zee door kustafslag. Het fort bewaakte de zeeroute en beschermde tegen piraterij. De kust lag in de Romeinse tijd kilometers verder westwaarts. Door zeespiegelstijging en erosie is het fort in de golven verdwenen. Na stormen spoelen soms vondsten aan op de stranden van Voorne-Putten: munten, aardewerk, metalen voorwerpen. De Brittenburg bij Katwijk was een soortgelijk lot beschoren.",watWasHier:"Kustfort bij riviermonding. Bewaking zeeroute.",watTeZien:"Fort verdwenen in zee. Soms strandvondsten na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen op strand.",betekenis:"Toont voormalige kustlijn en Romeinse kustverdediging.",bronnen:[]},"Castellum Randwijk":{naam:"Castellum Randwijk",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Randwijk aan de Rijn in de Betuwe. Het bestaan en de exacte locatie zijn onzeker. De rivier heeft veel oude resten weggespoeld. Randwijk ligt tussen bekende fortlocaties wat een fort hier logisch zou maken. In de uiterwaarden zijn bij erosie Romeinse vondsten gedaan. Het dynamische rivierlandschap maakt onderzoek lastig maar kan ook vondsten blootleggen na hoog water.",watWasHier:"Mogelijk castellum. Bestaan en locatie onzeker.",watTeZien:"Geen zichtbare resten. Uiterwaarden.",verwachteVondsten:"Mogelijk vondsten na erosie of hoog water.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Versterking Scheveningseweg":{naam:"Minifort Scheveningseweg",type:"minifort",periode:"2e eeuw n.Chr.",beschrijving:"Vermoede locatie van een klein Romeins kustfort bij de Scheveningseweg in Den Haag, vergelijkbaar met het nabije Minifort Ockenburg. Dit type miniforten bewaakte de kust tegen piraten en Germaanse raids over zee. Ruimte voor 20-30 soldaten. De exacte locatie is niet vastgesteld maar vondsten in de omgeving suggereren Romeinse militaire aanwezigheid. Het zou aantonen dat de gehele Noordzeekust werd bewaakt, niet alleen de riviermonding.",watWasHier:"Vermoedelijk klein kustfort zoals Ockenburg. 20-30 soldaten.",watTeZien:"Locatie niet vastgesteld.",verwachteVondsten:"Militaria, aardewerk 2e eeuw indien locatie gevonden.",betekenis:"Zou Romeinse kustverdediging Den Haag bevestigen.",bronnen:[]},"Tongeren - Sacramentstraat":{naam:"Atuatuca Tungrorum",latinNaam:"Atuatuca Tungrorum / Municipium Tungrorum",type:"legerkamp",periode:"ca. 10 v.Chr. - 400 n.Chr.",beschrijving:"Oudste stad van Belgi, gesticht ca. 10 v.Chr. Hoofdstad van de Civitas Tungrorum - met 150 hectare de grootste civitas van Noordwest-Europa! Strategisch gelegen op de weg Boulogne-Bavay-Keulen. Onder keizer Trajanus (2e eeuw) ommuurd met meer dan 4,5 km muren en tot 3 grachten - waarvan nog 1,5 km staat! Een 1e-eeuwse buste van Julius Caesar is een topstuk. Het Gallo-Romeins Museum (Europees Museum van het Jaar 2011) toont een schat aan vondsten: beelden, steles, sieraden, architectuurelementen. Ook de Romeinse muren, het tempelcomplex, het aquaduct van Beukenberg en tumuli zijn te bezoeken.",watWasHier:"Civitas-hoofdstad Tungri (150 ha). 4,5 km stadsmuur. Politiek en religieus centrum.",watTeZien:"Gallo-Romeins Museum. Romeinse muren (1,5 km). Tempelcomplex. Aquaduct Beukenberg. Tumuli.",verwachteVondsten:"Stadsaardewerk, bouwmateriaal, munten, inscripties, religieuze objecten.",betekenis:"Oudste stad van Belgi. Grootste civitas van Noordwest-Europa.",bronnen:["https://www.galloromeinsmuseum.be","https://www.canonvanvlaanderen.be/en/events/tongeren-a-roman-town/"]},"Valkenburg-Marktveld, mini-castellum":{naam:"Marktveld Valkenburg",type:"minifort",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Klein Romeins castellum met wachttoren bij het Marktveld in Valkenburg (Zuid-Holland), nabij het grotere Praetorium Agrippinae. Dit type miniforten vulde de ruimtes tussen de grote castella op. Wachttoren voor signalering en kleine bezetting voor patrouilles. De combinatie van toren en klein fort was effectief voor grensbewaking. Bij opgravingen zijn de contouren vastgesteld. Vondsten in Archeologisch Steunpunt Valkenburg.",watWasHier:"Klein fort met wachttoren. Aanvulling op Praetorium Agrippinae.",watTeZien:"Archeologisch Steunpunt Valkenburg.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Toont gelaagdheid Romeinse grensverdediging.",bronnen:[]},"Wachttoren a":{naam:"Wachttoren Utrecht-West",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Een van meerdere Romeinse wachttorens in de omgeving van Utrecht, onderdeel van het signaleringssysteem langs de Limes. De torens stonden om de 1-2 kilometer met zicht op elkaar. Bij nadering van vijanden werden vuur- of rooksignalen gegeven. Binnen minuten kon de hele grens gewaarschuwd zijn. Kleine houten constructie op aarden verhoging met bezetting van 4-8 soldaten. Vondsten zijn schaars door de kleine schaal.",watWasHier:"Houten signaleertoren. 4-8 soldaten.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Kleine hoeveelheden aardewerk en militaria.",betekenis:"Onderdeel vroegwaarschuwingssysteem.",bronnen:[]},"Wachttoren b":{naam:"Wachttoren Utrecht-Oost",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren ten oosten van Utrecht, onderdeel van de keten signaleertorens langs de Rijn. Elke toren had zichtlijn naar de volgende. Dit systeem maakte snelle communicatie mogelijk in een tijd zonder telegraaf of telefoon. De soldaten woonden in of bij de toren en hielden permanent wacht. Bij gevaar werden brandende fakkels of rookpotten gebruikt. De locatie is archeologisch vastgesteld maar niet zichtbaar.",watWasHier:"Signaleertoren in torenketen. Permanente wacht.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, militaria, persoonlijke bezittingen.",betekenis:"Onderdeel communicatienetwerk Limes.",bronnen:[]},"Wachttoren c":{naam:"Wachttoren Hoge Woerd",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren nabij Castellum Op de Hoge Woerd, onderdeel van het signaleringssysteem. Torens bij forten dienden als vooruitgeschoven posten en waarschuwingsplaatsen. De combinatie van fort met omringende torens was de standaard Romeinse grensverdediging. Het Archeologisch Park Hoge Woerd geeft een goed beeld van hoe dit systeem functioneerde. De toren zelf is niet gereconstrueerd maar de context is te begrijpen.",watWasHier:"Signaleertoren bij castellum. Vooruitgeschoven post.",watTeZien:"Archeologisch Park Hoge Woerd toont context.",verwachteVondsten:"Aardewerk, militaria.",betekenis:"Toont samenhang fort en torens.",bronnen:[]},"Zwammerdam-Rijksstraatweg":{naam:"Zwammerdam-Rijksstraatweg",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke militaire nederzetting aan de Rijksstraatweg in Zwammerdam, naast het bekende Nigrum Pullum fort. Mogelijk een vicus (burgerdorp) of aparte militaire faciliteit. Bij Zwammerdam werden de beroemde Romeinse schepen gevonden. De hele zone langs de Oude Rijn was dicht bezet met militaire en civiele structuren. Vondsten wijzen op intensieve Romeinse activiteit: aardewerk, munten, militaria en door de natte veenbodem ook organisch materiaal.",watWasHier:"Mogelijk vicus of militaire faciliteit nabij Nigrum Pullum.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, munten, militaria, organisch materiaal.",betekenis:"Toont dichtheid Romeinse bewoning langs Oude Rijn.",bronnen:[]},"Kastell Aachen":{naam:"Aquae Granni",latinNaam:"Aquae Granni",type:"versterking",periode:"1e - 4e eeuw n.Chr.",beschrijving:'Romeinse kuuroord bij de hete bronnen (tot 75C!) gewijd aan Apollo en de Keltische geneesheer Grannos - "aan de wateren van Grannos". In de 1e eeuw uitgebouwd tot kurort voor de legioenen van Neder-Germani. Onder keizer Trajanus bouwden legioenen uit Xanten een aquaduct en thermen onder de huidige Dom. De Mnsterthermen hadden de indeling van een valetudinarium (Romeins hospitaal). Karel de Grote bouwde hier zijn Pfalz (793-813) en maakte Aken tot keizerlijke residentie - bewust als "vernieuwer van het Romeinse Rijk". De Dom (UNESCO 1978, eerste in Duitsland!) staat op Romeinse fundamenten. Karel stierf hier in 814.',watWasHier:"Kurort voor legioenen. Thermen. Later keizerlijke Pfalz van Karel de Grote.",watTeZien:"Dom (UNESCO). Centre Charlemagne. Thermen onder de stad.",verwachteVondsten:"Badhuisresten, inscripties, munten, Romeins en Karolingisch bouwmateriaal.",betekenis:"Ononderbroken bewoning van Romeinse tijd tot Karel de Grote. Eerste UNESCO-site Duitsland.",bronnen:["https://centre-charlemagne.eu/zeitreise/?lang=en","http://www.aquaegranni.de/","https://de.wikipedia.org/wiki/Aquae_Granni"]},Hazerswoude:{naam:"Hazerswoude-Rijndijk",type:"wachttoren",periode:"2e - 3e eeuw n.Chr.",beschrijving:"Bevestigde Romeinse wachtpost langs de Limesweg bij Hazerswoude-Rijndijk. Bij opgravingen in 2021-2023 door Vestigia BV en het Rijksmuseum van Oudheden zijn spectaculaire vondsten gedaan: resten van de houten Limesweg (eiken palen uit 124-125 n.Chr.), een Romeinse dam, en aanwijzingen voor een kleine wachtpost. Bijzondere vondsten: de eerste Romeinse mijlpaal in Nederland (2023), een muntschat met 22 zilveren munten (na 166 n.Chr.), aardewerk, mantelspelden, leren schoenzolen en ca. 40.000-50.000 objecten. De locatie ligt precies tussen Albaniana (Alphen) en Matilo (Leiden).",watWasHier:"Wachtpost langs de Limesweg. Houten wegdek uit 124-125 n.Chr.",watTeZien:"Opgravingen afgerond. Vondsten naar Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, munten, aardewerk. Gebied grotendeels onderzocht.",betekenis:"Eerste Romeinse mijlpaal in Nederland. Bevestigt trac Limesweg.",bronnen:["https://www.rmo.nl/onderzoek/opgravingsprojecten/hazerswoude/","https://www.vestigia.nl/opgraving-hazerswoude-in-samenwerking-met-het-rijksmuseum-van-oudheden-en-de-gemeente-alphen-aan-den-rijn/","https://romeinsalphen.nl/themas/romeinse-weg-hazerswoude-rijndijk"]},Albaniana:{naam:"Albaniana",latinNaam:"Albaniana",type:"castellum",periode:"41 - 275 n.Chr.",beschrijving:"Groot Romeins castellum bij Alphen aan den Rijn, een van de belangrijkste forten aan de Nederlandse Limes. Het fort werd gesticht in 41-42 n.Chr., kort na de dood van keizer Caligula. De locatie is nauwkeurig bekend: bij het Rijnplein en Theater Castellum aan de Castellumstraat. Het fort (80x120m) was beschermd door een omgrachte aarden wal. Bij opgravingen tussen 1950 en 2002 zijn uitgebreide resten gevonden. Door de natte bodem zijn veel houten structuren bewaard gebleven. Een bronzen maquette van het castellum staat op het Rijnplein.",watWasHier:"Castellum met vicus. Locatie bekend: Rijnplein/Castellumstraat.",watTeZien:"Bronzen maquette Rijnplein. Theater Castellum op fortlocatie. Archeon.",verwachteVondsten:"Munten, militaria, aardewerk, dakpannen, fibulae. Veel bij bouwwerkzaamheden.",betekenis:"Een van de hoofdforten aan de Limes. UNESCO Werelderfgoed.",bronnen:["https://www.hierisalphen.nl/home/ontdekken/romeinse-limes","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/alphen-aan-den-rijn","https://archeologiehuiszuidholland.nl/zien-en-doen/het-archeologiehuis/fort-aan-de-rijn"]}},WEt={naam:"Romeins fort",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse militaire versterking langs de Limes, de noordgrens van het Romeinse Rijk. Forten lagen om de 10-15 km langs de Rijn. Garnizoen van hulptroepen (auxilia) die de grens bewaakten tegen Germaanse invallen. Standaard rechthoekige plattegrond met houten of stenen muur, gracht, poorten en binnengebouwen (barakken, commandopost, graanopslagplaats, werkplaatsen). Buiten de muren vaak een vicus (burgerdorp) met handelaren en soldatenfamilies. Vondsten: munten, fibulae (mantelspelden), aardewerk, wapens, gereedschap. Onderdeel van UNESCO Werelderfgoed sinds 2021."},HEt={castellum:"Castellum (legerplaats)",wachttoren:"Wachttoren (signaalpost)",vlootbasis:"Vlootbasis (haven)",legerkamp:"Legerkamp (castra)",minifort:"Minifort (wachtpost)",versterking:"Versterking",villa:"Villa (militair gebruikt)"};ar.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function Boe(t){if(!t)return t;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let n=t;return Object.entries(e).forEach(([r,i])=>{n=n.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),n=n.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),n}async function qEt(t){try{const e=Qn(t),n=ar("EPSG:4326","EPSG:28992",e);if(n[0]<7e3||n[0]>3e5||n[1]<289e3||n[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${n[0]-r},${n[1]-r},${n[0]+r},${n[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,a=await(await fetch(s)).json();if(a.features&&a.features.length>0){const l=a.features[0].properties,c=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(c!=null){const u=typeof c=="number"?c:parseFloat(c);if(!isNaN(u))return u}}}catch(e){console.warn("AHN height query failed:",e)}return null}const KEt={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},YEt={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function Woe(t,e){const n=[],r=t.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?n.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&n.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?n.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?n.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?n.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&n.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?n.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?n.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&n.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?n.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&n.push("Zeekleiafzetting"),n}function XEt(){const t=ji(wt=>wt.map),e=lh(wt=>wt.removeVondst),n=lh(wt=>wt.updateVondst),r=lh(wt=>wt.vondsten),{layers:i,addPoint:s,addLayer:o}=co(),[a,l]=X.useState([]),[c,u]=X.useState(0),[h,f]=X.useState(!1),[g,v]=X.useState(null),[x,b]=X.useState(!1),[T,A]=X.useState(!1),[I,P]=X.useState(null),[M,F]=X.useState(null),[C,N]=X.useState(null),[O,j]=X.useState(null),[V,G]=X.useState(!1),[U,fe]=X.useState(null),[Re,Be]=X.useState(null),[$e,pe]=X.useState(null),[De,Me]=X.useState(!1),[Q,W]=X.useState(""),[ne,ie]=X.useState([]),le=ne[c]||null,[ve,qe]=X.useState(()=>{const wt=localStorage.getItem("popupTextScale");return wt?parseInt(wt):100}),[Ke,Se]=X.useState("half"),we=wt=>{qe(wt),localStorage.setItem("popupTextScale",wt.toString())},Dt=a[c]||"",Ye=a.length>1,sn=wt=>{const Xn=wt.match(/<strong[^>]*>(.*?)<\/strong>/);if(Xn){const hr=Xn[1].replace(/<[^>]+>/g,""),Ft=wt.replace(Xn[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:hr,contentWithoutTitle:Ft}}return{title:"",contentWithoutTitle:wt}},$t=wt=>wt.replace(/class="([^"]*)"/g,(hr,Ft)=>{if(Ft.includes("text-xs")){const Ln=Ft.replace(/\btext-xs\b/g,"").trim();return Ln?`style="font-size:0.857em" class="${Ln}"`:'style="font-size:0.857em"'}if(Ft.includes("text-sm")){const Ln=Ft.replace(/\btext-sm\b/g,"").trim();return Ln?`class="${Ln}"`:""}return hr}).replace(/class=""/g,""),{title:fn,contentWithoutTitle:yn}=sn(Dt),dt=$t(yn),ur=Dt.includes("Landbouwperceel"),jn=Dt.includes("data-vondst-id="),Un=()=>{u(wt=>(wt-1+a.length)%a.length)},Qr=()=>{u(wt=>(wt+1)%a.length)},go=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",g),!t||!g||T){console.log(" STOP - map:",!!t,"coord:",g,"loading:",T);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${g[0]}, ${g[1]}]`),A(!0);try{await e1t(t,g)&&b(!0)}catch(wt){console.error("Failed to load height map:",wt)}finally{A(!1)}},Ar=()=>{t&&(xz(t),b(!1))};X.useEffect(()=>{if(!t)return;const wt=Ft=>{let Ln='<strong class="text-purple-800">AMK Monument</strong>';if(Ft.toponiem&&(Ln+=`<br/><span class="text-sm font-semibold">${Ft.toponiem}</span>`),Ft.kwaliteitswaarde&&(Ln+=`<br/><span class="text-sm text-purple-700">${Ft.kwaliteitswaarde}</span>`),Ft.omschrijving&&(Ln+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Ft.omschrijving}</span>`),Ft.txt_label){const Qt=Ft.txt_label.split(", ").slice(0,3).join(", ");Ln+=`<br/><span class="text-xs text-gray-500 italic">${Qt}${Ft.txt_label.split(", ").length>3?"...":""}</span>`}return Ln},Xn=async(Ft,Ln)=>{const Qt=[],Lo=t.getLayers().getArray().filter(Vi=>Vi instanceof Cm&&Vi.getVisible()?Vi.getSource()instanceof fRe:!1);for(const Vi of Lo){const Ms=Vi.getSource();if(!Ms)continue;const Mn=Vi.get("title")||"";if(Mn.startsWith("Paleokaart"))continue;if(Mn==="Archeo Landschappen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve=ae.landschapsnaam||ae.naam||"Archeologisch Landschap",ee=ae.omschrijving||"";let ge=`<strong class="text-green-800">${Ve}</strong>`;ee&&(ge+=`<br/><span class="text-sm text-gray-600">${ee}</span>`),ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1"><a href="https://www.cultureelerfgoed.nl/onderwerpen/bronnen-en-kaarten/overzicht/landschappenkaart" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Landschappenkaart</a></div>',ge+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Landschapstypen_van_Nederland" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Landschapstypen</a></div>',Qt.push(ge)}}catch(He){console.warn("Archeo Landschappen WMS query failed:",He)}continue}if(Mn==="Essen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let Ve='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(ae.naam||ae.Naam||ae.NAME)&&(Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ae.naam||ae.Naam||ae.NAME}</span>`),(ae.type||ae.Type||ae.TYPE)&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.type||ae.Type||ae.TYPE}</span>`),(ae.omschrijving||ae.Omschrijving)&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.omschrijving||ae.Omschrijving}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is een es?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Een es is een oud akkercomplex op hogere zandgronden. Eeuwenlang werden hier gewassen verbouwd. De bodem werd bemest met plaggen en mest, waardoor de grond donker en vruchtbaar werd.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Munten, gespen, knopen, aardewerk en soms bijzondere voorwerpen die door bemesting op het land terechtkwamen. Essen behoren tot de beste vindplaatsen voor metaaldetectie.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Conservering</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1 italic">De zure zandgrond tast metaal aan. IJzer en koper zijn vaak slecht bewaard. Zilver en brons houden zich beter.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Es_(geografie)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Es (geografie)</a></div>',Qt.push(Ve)}}catch(He){console.warn("Essen WMS query failed:",He)}continue}if(Mn==="FAMKE Steentijd"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/2/query?geometry=${ke[0]},${ke[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ae)).json();if(z.features&&z.features.length>0){const bt=z.features[0].attributes;let Y='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';Y+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=bt.BESCHR||"";ae&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',Y+=`<div class="text-sm text-amber-700 mt-1 font-medium">${ae}</div>`);const Ve=bt.BESCHRTOELICHTING||"";Ve&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=bt.BESCHRLINK||"";ee&&(Y+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>',Qt.push(Y)}}catch(He){console.warn("FAMKE Steentijd query failed:",He)}continue}if(Mn==="FAMKE IJzertijd"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/1/query?geometry=${ke[0]},${ke[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ae)).json();if(z.features&&z.features.length>0){const bt=z.features[0].attributes;let Y='<strong class="text-orange-800">FAMKE IJzertijd-Middeleeuwen</strong>';Y+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=bt.BESCHR||"";ae&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',Y+=`<div class="text-sm text-orange-700 mt-1 font-medium">${ae}</div>`);const Ve=bt.BESCHRTOELICHTING||"";Ve&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=bt.BESCHRLINK||"";ee&&(Y+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de ijzertijd tot en met de middeleeuwen te verwachten zijn.</div>',Qt.push(Y)}}catch(He){console.warn("FAMKE IJzertijd query failed:",He)}continue}if(Mn==="Archeo Onderzoeken"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}&FEATURE_COUNT=20`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0)for(const ae of Y.features){const Ve=ae.properties,ee=Ve.type_onderzoek||"",ge=Ve.projectnaam||Ve.project_naam||Ve.naam||"",Le=ge&&ge!=="-"&&ge.trim()!==""&&!/^\d+$/.test(ge.trim())?ge:"",Je=Ve.gemeente||"",ze=Ve.uitvoerder||"",nt=Ve.onderzoeksmeldingnummer||"",et=Ve.adres||Ve.straat||"";let Mt="Archeologisch Onderzoek";Le?Mt=Le:Je&&et?Mt=`${Je} - ${et}`:Je&&(Mt=`Onderzoek ${Je}`);let zt=`<strong class="text-blue-800">${Mt}</strong>`;if(ee&&(zt+=`<br/><span class="text-sm font-semibold text-blue-700">${ee}</span>`),Je&&!Mt.includes(Je)&&(zt+=`<br/><span class="text-sm text-gray-700">${Je}</span>`),et&&!Mt.includes(et)&&(zt+=`<br/><span class="text-sm text-gray-600">${et}</span>`),nt&&(zt+=`<br/><span class="text-xs text-gray-500 font-mono">OM: ${nt}</span>`),ze&&(zt+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${ze}</span>`),Ve.startdatum||Ve.einddatum){const re=[Ve.startdatum,Ve.einddatum].filter(Boolean).join(" - ");zt+=`<br/><span class="text-xs text-gray-600">Periode: ${re}</span>`}const gn=[];Ve.periode_paleolithicum&&gn.push("Paleolithicum"),Ve.periode_mesolithicum&&gn.push("Mesolithicum"),Ve.periode_neolithicum&&gn.push("Neolithicum"),Ve.periode_bronstijd&&gn.push("Bronstijd"),Ve.periode_ijzertijd&&gn.push("IJzertijd"),Ve.periode_romeins&&gn.push("Romeins"),Ve.periode_middeleeuwen&&gn.push("Middeleeuwen"),Ve.periode_nieuwe_tijd&&gn.push("Nieuwe tijd"),gn.length>0&&(zt+=`<br/><span class="text-sm text-purple-700">Datering: ${gn.join(", ")}</span>`),zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ee.toLowerCase().includes("opgraving")?zt+='<div class="text-sm text-gray-700 mt-1">Hier is een archeologische opgraving gedaan. Professionele archeologen hebben vondsten en sporen gedocumenteerd en geborgen.</div>':ee.toLowerCase().includes("bureauonderzoek")?zt+='<div class="text-sm text-gray-700 mt-1">Een bureauonderzoek naar de archeologische verwachting op basis van historische bronnen en kaarten.</div>':ee.toLowerCase().includes("booronderzoek")?zt+='<div class="text-sm text-gray-700 mt-1">Met boringen is onderzocht wat er in de grond zit. Vaak de eerste stap om te bepalen of er verder onderzoek nodig is.</div>':ee.toLowerCase().includes("proefsleuven")?zt+='<div class="text-sm text-gray-700 mt-1">Proefsleuven zijn gegraven om te kijken of er archeologische sporen in de grond zitten.</div>':ee.toLowerCase().includes("begeleiding")?zt+='<div class="text-sm text-gray-700 mt-1">Archeologische begeleiding bij graafwerk. Een archeoloog was aanwezig om te controleren of er vondsten naar boven kwamen.</div>':ee.toLowerCase().includes("inventariserend")||ee.toLowerCase().includes("karterend")?zt+='<div class="text-sm text-gray-700 mt-1">Verkennend onderzoek om te bepalen of er archeologische resten in de grond kunnen zitten.</div>':zt+='<div class="text-sm text-gray-700 mt-1">Op deze locatie is archeologisch onderzoek uitgevoerd. De resultaten zijn opgeslagen in het landelijke archief.</div>',zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Interessant voor detectie?</span></div>',zt+='<div class="text-sm text-gray-700 mt-1 italic">Onderzoekslocaties kunnen interessant zijn: archeologen vinden vaak niet alles. Maar check altijd eerst of je daar mag zoeken.</div>',zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Rapport opzoeken</span></div>';let q="";if(Le?q=Le:ze&&Je?q=`${ze} ${Je}`:Je&&(q=Je),q){const re=q.length>35?q.substring(0,35)+"...":q;zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archaeology.datastations.nl/dataverse/root?q=${encodeURIComponent(q)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek "${re}" in DANS</a></div>`,zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://scholar.google.nl/scholar?q=${encodeURIComponent(q+" archeologisch rapport")}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek in Google Scholar</a></div>`}nt&&(zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archis.cultureelerfgoed.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek OM ${nt} in ARCHIS</a> <span class="text-xs text-gray-400">(account nodig)</span></div>`),Qt.push(zt)}}catch(He){console.warn("Archeo Onderzoeken WMS query failed:",He)}continue}if(Mn==="IKAW"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=500,z=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve=Math.round(ae.PALETTE_INDEX||ae.palette_index||0),ee=YEt[Ve]||`Trefkans onbekend (${Ve})`;let ge='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';ge+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ge+=`<div class="text-sm text-orange-700 mt-1">${ee}</div>`;const Je={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[Ve];Je&&(ge+=`<div class="text-sm ${Je.kleur} mt-1">${Je.tekst}</div>`,ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${Je.vondsten}</div>`),ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',Qt.push(ge)}}catch(He){console.warn("IKAW WMS query failed:",He)}continue}if(Mn==="Inundatiegebieden"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let Ve='<strong class="text-blue-800">Inundatiegebied</strong>';(ae["linie-naam"]||ae.linie_naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-blue-700">${ae["linie-naam"]||ae.linie_naam}</span>`),ae.naam&&(Ve+=`<br/><span class="text-sm text-gray-700">${ae.naam}</span>`),ae.periode&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.periode}</span>`),ae.lin_period&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.lin_period}</span>`),Qt.push(Ve)}}catch(He){console.warn("Inundatiegebieden WMS query failed:",He)}continue}if(Mn==="Militaire Objecten"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve=ae.obj_soort||"",ee=ae.obj_naam||"",ge=ae.lin_period||"",Le=ae["linie-naam"]||ae.linie_naam||"";let Je=Ve||"Militair Object",ze="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",nt="";const et=Ve.toLowerCase();et.includes("fort")?(ze="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",nt="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):et.includes("schans")?(ze="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",nt="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):et.includes("batterij")||et.includes("battery")?(ze="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",nt="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):et.includes("bunker")||et.includes("kazemat")?(ze="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",nt="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):et.includes("sluis")||et.includes("inlaatwerk")?(ze="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",nt="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):et.includes("toren")||et.includes("wachttoren")?(ze="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",nt="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):et.includes("kazerne")&&(ze="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",nt="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let Mt=`<strong class="text-stone-800">${Je}</strong>`;ee&&(Mt+=`<br/><span class="text-sm font-semibold text-stone-700">${ee}</span>`),Le&&(Mt+=`<br/><span class="text-sm text-blue-600">${Le}</span>`),ge&&(Mt+=`<br/><span class="text-xs text-gray-500">${ge}</span>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,nt&&(Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${nt}</div>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Mt+='<div class="text-sm text-gray-700 mt-1">',Mt+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',Mt+="</div>",Qt.push(Mt)}}catch(He){console.warn("Militaire Objecten WMS query failed:",He)}continue}if(Mn==="Verdedigingslinies"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let Ve='<strong class="text-amber-800">Verdedigingslinie</strong>';const ee={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},ge=ae.naam||ae.lin_naam||"";if(ge){Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ge}</span>`;const Le=Object.entries(ee).find(([Je])=>ge.toLowerCase().includes(Je.toLowerCase())||Je.toLowerCase().includes(ge.toLowerCase()));Le&&(Ve+=`<br/><span class="text-sm text-gray-700">${Le[1]}</span>`)}ae.lin_period&&(Ve+=`<br/><span class="text-xs text-purple-600">${ae.lin_period}</span>`),ae.status&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.status}</span>`),Qt.push(Ve)}}catch(He){console.warn("Verdedigingslinies WMS query failed:",He)}continue}if(Mn==="Rijksmonumenten"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let Ve='<strong class="text-red-800">Rijksmonument</strong>';(ae.cbsNaam||ae.cbs_naam)&&(Ve+=`<br/><span class="text-sm font-semibold">${ae.cbsNaam||ae.cbs_naam}</span>`),ae.hoofdcategorie&&(Ve+=`<br/><span class="text-sm text-red-700">${ae.hoofdcategorie}</span>`),ae.subcategorie&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.subcategorie}</span>`),ae.rijksmonumentnummer&&(Ve+=`<br/><span class="text-xs text-gray-500">Nr: ${ae.rijksmonumentnummer}</span>`),(ae.bouwjaar||ae.oorspronkelijkebouwjaar)&&(Ve+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${ae.bouwjaar||ae.oorspronkelijkebouwjaar}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ae.rijksmonumentnummer&&(Ve+=`<div class="text-sm text-gray-700 mt-1"><a href="https://monumentenregister.cultureelerfgoed.nl/monumenten/${ae.rijksmonumentnummer}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk in Monumentenregister</a></div>`),Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Rijksmonument" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Rijksmonument</a></div>',Qt.push(Ve)}}catch(He){console.warn("Rijksmonumenten WMS query failed:",He)}continue}if(Mn==="Werelderfgoed"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=500,z=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let Ve='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(ae.siteName||ae.naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-cyan-700">${ae.siteName||ae.naam}</span>`),ae.siteDesignation&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.siteDesignation}</span>`),Qt.push(Ve)}}catch(He){console.warn("Werelderfgoed WMS query failed:",He)}continue}if(Mn==="Terpen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=`https://geoportaal.fryslan.nl/arcgis/rest/services/ProvinciaalGeoRegister/PGR2/MapServer/66/query?geometry=${ke[0]},${ke[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=SOORT,SHAPE_Area&returnGeometry=false&f=json`,z=await(await fetch(Ae)).json();if(z.features&&z.features.length>0){const bt=z.features[0].attributes,Y=bt.SOORT||"Terp",ae=bt.SHAPE_Area?Math.round(bt.SHAPE_Area):null;let Ve="",ee="",ge=!1;try{const Mt=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-100},${ke[1]-100},${ke[0]+100},${ke[1]+100}`}`,gn=await(await fetch(Mt)).json();if(gn.features&&gn.features.length>0){const q=gn.features[0].properties;Ve=q.siteName||q.naam||"",ee=q.inspireId||q.monumentnummer||"",ge=!0}}catch{}let Le="";Ve?(Le=`<strong class="text-orange-800">${Ve}</strong>`,Le+=`<br/><span class="text-sm text-orange-600 font-medium">${Y}</span>`):Le=`<strong class="text-orange-800">${Y}</strong>`,Le+='<br/><span class="text-sm text-gray-600">Friese terp (woonheuvel)</span>';const ze={terp:{uitleg:"Een kunstmatige woonheuvel waar mensen woonden om droge voeten te houden.",periode:"IJzertijd tot Middeleeuwen"},"afgegraven terp":{uitleg:"Deze terp is deels of geheel afgegraven voor de vruchtbare grond (terpaarde).",periode:"Oorspronkelijk IJzertijd-Middeleeuwen"},terprestant:{uitleg:"Hier lag ooit een terp, waarvan nu alleen nog resten over zijn.",periode:"IJzertijd tot Middeleeuwen"},"deels afgegraven terp":{uitleg:"Een deel van deze terp is afgegraven, een deel is nog intact.",periode:"IJzertijd tot Middeleeuwen"},"verhoogd kerkhof":{uitleg:"Een verhoogd kerkhof, vaak op een oude terplocatie gebouwd.",periode:"Middeleeuwen"},kerkterp:{uitleg:"Een terp met daarop een kerk, vaak het centrum van een terpdorp.",periode:"IJzertijd tot heden"}}[Y.toLowerCase()]||{uitleg:"Een kunstmatige woonheuvel uit de tijd dat dit gebied vaak overstroomde.",periode:"IJzertijd tot Middeleeuwen"};if(Le+=`<div class="mt-2 text-sm text-gray-700">${ze.uitleg}</div>`,Le+=`<br/><span class="text-sm text-gray-600">Periode: ${ze.periode}</span>`,ae&&ae>100){const nt=(ae/1e4).toFixed(1);Le+=`<br/><span class="text-sm text-gray-500">Oppervlak: ${nt} hectare</span>`}if(ge&&(Le+='<div class="mt-2 p-2 bg-orange-100 rounded text-xs text-orange-800">',Le+="<strong> Rijksmonument</strong> - Deze terp is wettelijk beschermd. Detecteren is niet toegestaan zonder vergunning.",ee&&(Le+=`<br/>Monumentnummer: ${ee}`),Le+="</div>"),Le+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',Le+="<strong>Detectietip:</strong> ",Y.toLowerCase().includes("afgegraven")?Le+="Afgegraven terpen zijn interessant! Bij het afgraven kwam materiaal aan de oppervlakte. Zoek op akkers rond de oude terplocatie.":Le+="Terpen zijn rijk aan vondsten: aardewerk, munten, fibulae, botten, gereedschap. De grond is vaak donker en vruchtbaar door eeuwenlange bewoning.",Le+="</div>",Le+='<div class="mt-3 space-y-1">',Le+='<a href="https://www.terpenonderzoek.nl/" target="_blank" class="block text-blue-600 hover:underline text-sm">Terpenonderzoek.nl - Wetenschappelijk onderzoek</a>',Le+='<a href="https://www.friesmuseum.nl/collectie/archeologie/" target="_blank" class="block text-blue-600 hover:underline text-sm">Fries Museum - Terpvondsten</a>',Le+='<a href="https://nl.wikipedia.org/wiki/Terp" target="_blank" class="block text-blue-600 hover:underline text-sm">Wikipedia - Terpen</a>',Ve){const nt=encodeURIComponent(Ve+" terp friesland");Le+=`<a href="https://www.google.com/search?q=${nt}" target="_blank" class="block text-blue-600 hover:underline text-sm">Zoek meer over ${Ve}</a>`}Le+="</div>",Qt.push(Le)}}catch(He){console.warn("Terpen query failed:",He)}continue}if(Mn==="Religieus Erfgoed"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve=ae.naam||ae.NAAM||ae.name||ae.NAME||"Onbekend",ee=ae.denominatie||ae.DENOMINATIE||ae.religie||"",ge=ae.type||ae.TYPE||ae.functie||"",Le=ae.bouwjaar||ae.BOUWJAAR||ae.jaar||"",Je=ae.gemeente||ae.GEMEENTE||ae.plaats||"";let ze=`<strong class="text-purple-800">${Ve}</strong>`;const nt=ge.toLowerCase();let et="Een religieus gebouw of heilige plek.",Mt="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";nt.includes("kerk")||nt.includes("church")?(et="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",Mt="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):nt.includes("kapel")||nt.includes("chapel")?(et="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",Mt="Devotionalia, munten, kruisjes, rozenkransen"):nt.includes("synagoge")?(et="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",Mt="Munten, knopen, kleine religieuze voorwerpen"):nt.includes("klooster")||nt.includes("monastery")?(et="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",Mt="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):nt.includes("toren")||nt.includes("tower")?(et="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",Mt="Munten, knopen, bouwmateriaal"):(nt.includes("begraafplaats")||nt.includes("cemetery"))&&(et="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",Mt="Detecteren hier niet toegestaan"),ee&&(ze+=`<br/><span class="text-sm text-purple-600">${ee}</span>`),ge&&(ze+=`<br/><span class="text-sm text-gray-600">${ge}</span>`),Le&&(ze+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${Le}</span>`),Je&&(ze+=`<br/><span class="text-xs text-gray-400">${Je}</span>`),ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ze+=`<div class="text-sm text-gray-700 mt-1">${et}</div>`,ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ze+=`<div class="text-sm text-gray-700 mt-1">${Mt}</div>`,ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',nt.includes("begraafplaats")?ze+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':ze+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',Qt.push(ze)}}catch(He){console.warn("Religieus Erfgoed WMS query failed:",He)}continue}if(Mn==="Gewaspercelen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,rn=`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`,z=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${rn}`,bt=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${rn}`,[Y,ae]=await Promise.all([fetch(z),fetch(bt).catch(()=>null)]),Ve=await Y.json();if(Ve.features&&Ve.features.length>0){const ee=Ve.features[0].properties;let ge='<strong class="text-green-800">Landbouwperceel</strong>';if((ee.gewas||ee.gewasnaam)&&(ge+=`<br/><span class="text-sm font-semibold text-green-700">${ee.gewas||ee.gewasnaam}</span>`),(ee.categorie||ee.category)&&(ge+=`<br/><span class="text-xs text-gray-600">${ee.categorie||ee.category}</span>`),ee.oppervlakte&&(ge+=`<br/><span class="text-xs text-gray-500">${ee.oppervlakte} ha</span>`),ae)try{const Le=await ae.json();if(Le.features&&Le.features.length>0){const Je=Le.features[0].properties,ze=Je.first_soilname||Je.soilname||Je.bodemtype,nt=Je.first_soilcode||Je.soilcode||Je.maparea_soilcode;if(ze){ge+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${ze}</span>`;const et=Woe(ze,nt);et.length>0&&(ge+=`<br/><span class="text-xs text-gray-500 italic">${et.join("  ")}</span>`)}}}catch{}Qt.push(ge)}}catch(He){console.warn("BRP Gewaspercelen WMS query failed:",He)}continue}if(Mn==="Kadastrale Grenzen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=20,z=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve=ae.kadastraleGemeenteWaarde||ae.kadastrale_gemeente_waarde||ae.kadastraleGemeente||KEt[String(ae.kadastraleGemeenteCode)]||ae.kadastraleGemeenteCode,ee=ae.sectie||ae.Sectie||"",ge=ae.perceelnummer||ae.perceelNummer||ae.Perceelnummer||"",Le=ae.kadastraleGrootteWaarde||ae.kadastrale_grootte_waarde||ae.kadastraleGrootte||ae.oppervlakte,Je=ae.AKRKadastraleGemeenteCodeWaarde||ae.akrKadastraleGemeenteCodeWaarde||"",ze=[Ve,ee,ge].filter(Boolean).join(" "),nt=Je&&ee&&ge?`${Je}-${ee}-${ge}`:"";let et='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(ze&&(et+=`<br/><span class="text-sm text-indigo-700">${ze}</span>`),nt&&(et+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${nt}</span>`),Le){const Mt=typeof Le=="number"?Le:parseFloat(Le);isNaN(Mt)||(et+=`<br/><span class="text-xs text-gray-600">${Mt.toLocaleString("nl-NL")} m</span>`)}et+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',Qt.push(et)}}catch(He){console.warn("Kadastrale Grenzen WMS query failed:",He)}continue}if(Mn==="Scheepswrakken"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-cyan-800">${ae.naam||ae.NAAM||"Scheepswrak"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historisch scheepswrak in Zuid-Holland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Op deze plek ligt een oud scheepswrak. Dit is een schip dat lang geleden is gezonken. ",ee+="In de bodem kunnen nog resten van het schip en de lading liggen.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-cyan-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.datering||ae.DATERING)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.datering||ae.DATERING}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-cyan-50 rounded text-xs text-cyan-800">',ee+="<strong>Detectietip:</strong> Bij scheepswrakken kun je bijzondere vondsten doen zoals scheepsonderdelen, munten, gereedschap en lading. Let op: vaak is een vergunning nodig.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',Qt.push(ee)}}catch(He){console.warn("Scheepswrakken WMS query failed:",He)}continue}if(Mn==="Woonheuvels ZH"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-orange-800">${ae.naam||ae.NAAM||"Woonheuvel"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische woonheuvel (terp)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een woonheuvel is een door mensen opgeworpen heuvel. Mensen woonden hierop om droge voeten te houden bij hoog water. ",ee+="Deze heuvels werden steeds hoger gemaakt. Je vindt ze vooral in laaggelegen gebieden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-orange-700">Type: ${ae.type||ae.TYPE}</span>`),ee+='<div class="mt-2 p-2 bg-orange-50 rounded text-xs text-orange-800">',ee+="<strong>Detectietip:</strong> Woonheuvels zijn rijk aan vondsten! Denk aan aardewerk, munten, sieraden en huisraad uit de middeleeuwen. De grond bevat vaak veel materiaal.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',Qt.push(ee)}}catch(He){console.warn("Woonheuvels WMS query failed:",He)}continue}if(Mn==="Romeinse Forten"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-red-800">${ae.naam||ae.NAAM||"Romeins Fort"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Romeins militair fort (castellum)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit was een Romeins legerfort. De Romeinen bouwden deze forten langs de Rijn, de grens van hun rijk. ",ee+="Soldaten woonden hier en bewaakten de grens. Deze forten zijn ongeveer 2000 jaar oud.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-red-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-red-50 rounded text-xs text-red-800">',ee+="<strong>Detectietip:</strong> Romeinse forten zijn toplocaties! Je kunt hier Romeinse munten, fibulae (mantelspelden), militaire uitrusting en aardewerk vinden. Vaak beschermd, check de regels!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.limesworld.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over de Romeinse Limes</a></div>',Qt.push(ee)}}catch(He){console.warn("Romeinse Forten WMS query failed:",He)}continue}if(Mn==="Windmolens"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-amber-800">${ae.naam||ae.NAAM||"Windmolen"}</strong>`;if(ee+='<br/><span class="text-sm text-gray-800">Historische windmolen</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Windmolens gebruikten de kracht van de wind. Ze maalden graan tot meel of pompten water weg uit polders. ",ee+="Nederland heeft veel molens omdat we laaggelegen land droog moesten houden.",ee+="</div>",ae.type||ae.TYPE||ae.functie||ae.FUNCTIE){const ge=ae.functie||ae.FUNCTIE||ae.type||ae.TYPE;ee+=`<br/><span class="text-sm text-amber-700">Functie: ${ge}</span>`}(ae.bouwjaar||ae.BOUWJAAR)&&(ee+=`<br/><span class="text-sm text-gray-600">Bouwjaar: ${ae.bouwjaar||ae.BOUWJAAR}</span>`),ee+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',ee+="<strong>Detectietip:</strong> Bij molens vind je vaak voorwerpen van de molenaar en bezoekers: munten, knopen, gereedschap. Ook de grond rond verdwenen molens kan interessant zijn.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.molendatabase.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Nederlandse molens</a></div>',Qt.push(ee)}}catch(He){console.warn("Windmolens WMS query failed:",He)}continue}if(Mn==="Erfgoedlijnen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-purple-800">${ae.naam||ae.NAAM||ae.erfgoedlijn||"Erfgoedlijn"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische lijn in het landschap</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een erfgoedlijn is een route of lijn met veel geschiedenis. Dit kunnen oude dijken, wegen, kanalen of verdedigingslinies zijn. ",ee+="Langs deze lijnen vind je vaak bijzondere plekken.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-purple-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.omschrijving||ae.OMSCHRIJVING)&&(ee+=`<br/><span class="text-sm text-gray-600">${ae.omschrijving||ae.OMSCHRIJVING}</span>`),ee+='<div class="mt-2 p-2 bg-purple-50 rounded text-xs text-purple-800">',ee+="<strong>Detectietip:</strong> Erfgoedlijnen volgen oude routes waar mensen langskwamen. Denk aan munten, knopen, gespen en andere verloren voorwerpen. Dijken en wegen zijn vaak interessant.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.erfgoedlijnen.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Erfgoedlijnen</a></div>',Qt.push(ee)}}catch(He){console.warn("Erfgoedlijnen WMS query failed:",He)}continue}if(Mn==="Oude Kernen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-stone-800">${ae.naam||ae.NAAM||"Historische Kern"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Oude dorps- of stadskern</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit is het oude centrum van een dorp of stad. Hier woonden en werkten mensen al honderden jaren geleden. ",ee+="De grond bevat vaak veel sporen van het verleden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-stone-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-stone-100 rounded text-xs text-stone-800">',ee+="<strong>Detectietip:</strong> Oude kernen zijn rijk aan vondsten! Munten, knopen, sieraden, gereedschap en huisraad. Let op: detecteren is vaak niet toegestaan in beschermde kernen.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',Qt.push(ee)}}catch(He){console.warn("Oude Kernen WMS query failed:",He)}continue}if(Mn==="Relictenkaart Punten"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,Ve={KV:{naam:"Kasteel of Vesting",uitleg:"Een versterkt gebouw uit de middeleeuwen. Vaak zijn er nog resten in de grond."},K:{naam:"Kapel",uitleg:"Een klein kerkgebouw. Rond kapellen worden vaak religieuze voorwerpen gevonden."},KE:{naam:"Kerkhof",uitleg:"Historische begraafplaats. Respecteer deze plek en vraag altijd toestemming."},B:{naam:"Buitenhuis",uitleg:"Een landhuis van welgestelde families. Vaak met tuinen en bijgebouwen."},OB:{naam:"Oud Bebouwingsrelict",uitleg:"Resten van oude bebouwing. Hier stonden ooit huizen of boerderijen."},OV:{naam:"Oude Verkaveling",uitleg:"Historisch patroon van akkers en weilanden uit vroeger tijden."},NR:{naam:"Nijverheidsrelict",uitleg:"Plek waar vroeger ambacht of industrie was, zoals smederijen of molens."},GH:{naam:"Grafheuvel",uitleg:"Prehistorische begraafplaats. Beschermd monument - niet detecteren!"},BP:{naam:"Begraafplaats",uitleg:"Historische begraafplaats. Respecteer deze plek."},HH:{naam:"Havezate",uitleg:"Adellijk huis met landerijen. Interessant voor middeleeuwse vondsten."},RM:{naam:"Rosmolen",uitleg:"Molen aangedreven door paarden. Zeldzaam cultuurhistorisch object."},WM:{naam:"Windmolen",uitleg:"Historische windmolen. Vaak zijn funderingen nog zichtbaar."},PM:{naam:"Poldermolen",uitleg:"Molen voor waterbeheer. Belangrijk voor de waterhuishouding."},EK:{naam:"Eendenkooi",uitleg:"Plek om wilde eenden te vangen. Bijzonder cultuurlandschap."},SH:{naam:"Scholtenhoeve",uitleg:"Boerderij van een welgestelde boer. Vaak eeuwenoud."},SL:{naam:"Slot",uitleg:"Versterkt kasteel of adellijke woning."},MO:{naam:"Motte",uitleg:"Vroegmiddeleeuwse kasteelberg. Zeer interessant voor detectie."},BR:{naam:"Borg",uitleg:"Versterkte adellijke woning, typisch voor het noorden."}},ee=ae.type?.replace(/[0-9]/g,"")||"",ge=Ve[ee]||{naam:ae.type||"Cultuurhistorisch object",uitleg:"Een historisch relict in het Gelderse landschap."};let Le=`<strong class="text-emerald-800">${ge.naam}</strong>`;Le+='<br/><span class="text-sm text-gray-800">Gelders cultuurhistorisch relict</span>',ae.streek&&(Le+=`<br/><span class="text-sm text-gray-600">Streek: ${ae.streek}</span>`),Le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',Le+=`<div class="text-sm text-gray-700 mt-1">${ge.uitleg}</div>`,Le+='<div class="mt-3"><a href="https://www.gelderland.nl/erfgoed" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Meer over Gelders erfgoed</a></div>',Qt.push(Le)}}catch(He){console.warn("Relictenkaart Punten WMS query failed:",He)}continue}if(Mn==="Relictenkaart Lijnen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,ee={1:{naam:"Sprengenbeek",uitleg:"Kunstmatig aangelegde beek voor waterkracht. Vaak bij papiermolens."},2:{naam:"Oude waterloop",uitleg:"Historische beek of rivier. Langs waterlopen vind je vaak oude bewoningssporen."},3:{naam:"Doorgaande weg",uitleg:"Eeuwenoude handelsroute. Langs deze wegen gingen reizigers en handelaren."},4:{naam:"Hessenweg",uitleg:"Historische handelsweg naar Duitsland. Gebruikt door marskramers en kooplieden."},5:{naam:"Oude weg",uitleg:"Historische route door het landschap. Vaak al eeuwen in gebruik."},6:{naam:"Historische grens",uitleg:"Oude eigendoms- of gebiedsgrens. Soms gemarkeerd met grenspalen."},7:{naam:"Trekpad",uitleg:"Pad langs een kanaal waar paarden schepen trokken."},8:{naam:"Jaagpad",uitleg:"Pad langs water voor scheepvaart met paardentractie."}}[ae.klasse]||{naam:"Historisch lijnrelict",uitleg:"Een lijnvormig historisch element in het landschap."};let ge=`<strong class="text-teal-800">${ee.naam}</strong>`;ge+='<br/><span class="text-sm text-gray-800">Gelders lijnrelict</span>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Langs oude wegen en waterlopen worden vaak vondsten gedaan. Mensen verloren er munten en voorwerpen.</div>',Qt.push(ge)}}catch(He){console.warn("Relictenkaart Lijnen WMS query failed:",He)}continue}if(Mn==="Relictenkaart Vlakken"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=100,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties,ee={1:{naam:"Oud agrarisch land",uitleg:"Gebied dat al voor 1850 als landbouwgrond werd gebruikt. Rijk aan geschiedenis."},2:{naam:"Jonge heideontginning",uitleg:"Heide die tussen 1850 en 1950 is ontgonnen voor landbouw."},3:{naam:"Open essencomplex",uitleg:"Historische akkers op hoge grond. Vaak eeuwenoud en rijk aan vondsten."},4:{naam:"Kampenlandschap",uitleg:"Landschap met kleine akkers omringd door houtwallen. Typisch voor Oost-Nederland."},5:{naam:"Heiderelict",uitleg:"Restant van het vroegere uitgestrekte heidelandschap. Vaak prehistorische vondsten."},6:{naam:"Oud bosrelict",uitleg:"Bos dat al in 1850 bestond. Oude bossen bevatten vaak cultuurhistorische resten."},7:{naam:"Stuifzandrelict",uitleg:"Overblijfsel van actief stuifzand. Vaak bij grafheuvels en prehistorische sites."},8:{naam:"Oud bouwland",uitleg:"Historische akkergrond. Boeren hebben hier eeuwenlang gewerkt."},9:{naam:"Historisch grasland",uitleg:"Oud weiland of hooiland. Vaak bij boerderijen en dorpen."},10:{naam:"Beekdal",uitleg:"Laagte langs een beek. Mensen woonden graag bij water."}}[ae.klasse]||{naam:"Historisch landschap",uitleg:"Een waardevol cultuurlandschap in Gelderland."};let ge=`<strong class="text-lime-800">${ee.naam}</strong>`;if(ge+='<br/><span class="text-sm text-gray-800">Gelders landschapsrelict</span>',ae.st_area_shape_){const Le=(ae.st_area_shape_/1e4).toFixed(1);ge+=`<br/><span class="text-sm text-gray-600">${Le} hectare</span>`}ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,Qt.push(ge)}}catch(He){console.warn("Relictenkaart Vlakken WMS query failed:",He)}continue}if(Mn==="Verdronken Dorpen"){try{const He=Qn(Ft),ke=ar("EPSG:4326","EPSG:28992",He),Ae=200,z=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ke[0]-Ae},${ke[1]-Ae},${ke[0]+Ae},${ke[1]+Ae}`}`,Y=await(await fetch(z)).json();if(Y.features&&Y.features.length>0){const ae=Y.features[0].properties;let ee=`<strong class="text-blue-800">${ae.naam||ae.NAAM||"Verdronken dorp"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Verdronken dorp in Zeeland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit dorp is lang geleden door de zee verzwolgen. Bij stormvloeden brak de zeedijk door en liep het land onder water. ",ee+="De mensen vluchtten, maar hun huizen en bezittingen bleven achter. In de bodem liggen nog resten van dit dorp.",ee+="</div>",(ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR)&&(ee+=`<br/><span class="text-sm text-blue-700">Verdronken in: ${ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR}</span>`),(ae.gemeente||ae.GEMEENTE)&&(ee+=`<br/><span class="text-sm text-gray-600">Gemeente: ${ae.gemeente||ae.GEMEENTE}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-800">',ee+="<strong>Detectietip:</strong> Verdronken dorpen bevatten veel vondsten! Aardewerk, munten, sieraden, gereedschap en huisraad. Bij laag water komen soms stukken vrij. Let op getijden en veiligheid!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.verdronkengeschiedenis.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over verdronken dorpen</a></div>',Qt.push(ee)}}catch(He){console.warn("Verdronken Dorpen WMS query failed:",He)}continue}const ki=Ms.getFeatureInfoUrl(Ft,Ln,"EPSG:3857",{INFO_FORMAT:"application/json"});if(ki)try{const ke=await(await fetch(ki)).json();if(ke.features&&ke.features.length>0){const Ae=ke.features[0].properties;if(Mn==="AHN 0.5m"){let Y='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const ae=Ae.value_list??Ae.GRAY_INDEX??Ae.value??Ae.gray_index??Ae.dtm_05m??Ae.DTM_05M??Ae.hoogte??Ae.HOOGTE??Ae.elevation??Ae.ELEVATION;if(ae!=null&&!isNaN(Number(ae))){const Ve=typeof ae=="number"?ae.toFixed(2):Number(ae).toFixed(2);Y+=`<br/><span class="text-sm text-blue-700">Hoogte: ${Ve} m NAP</span>`,Qt.push(Y)}else{let Ve=!1;const ee=["geometry","id","fid","gml_id","bbox"];for(const[ge,Le]of Object.entries(Ae))!ee.includes(ge.toLowerCase())&&Le!==null&&Le!==""&&(Y+=`<br/><span class="text-xs text-gray-600">${ge}: ${Le}</span>`,Ve=!0);Ve&&Qt.push(Y)}continue}if(Mn==="Geomorfologie"){let Y='<strong class="text-green-800">Geomorfologie</strong>',ae=!1;const Ve=Ae.landform_subgroup_description,ee=Ae.relief_klasse,ge=Ae.relief_subklasse,Le=Ae.genese_description,Je=Ae.active_process;if(Ve&&(Y+=`<br/><span class="text-sm text-green-700">${Ve}</span>`,ae=!0),ee){const ze=ge&&ge!==ee?`${ee} (${ge})`:ee;Y+=`<br/><span class="text-xs text-gray-600">Relief: ${ze}</span>`,ae=!0}if(Le&&(Y+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${Le}</span>`,ae=!0),Je&&Je!=="onbekend"&&(Y+=`<br/><span class="text-xs text-gray-500">Actief proces: ${Je}</span>`,ae=!0),!ae){const ze=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[nt,et]of Object.entries(Ae))!ze.includes(nt.toLowerCase())&&et!==null&&et!==""&&!nt.includes("validfrom")&&!nt.includes("validto")&&(Y+=`<br/><span class="text-xs text-gray-600">${nt}: ${et}</span>`)}Y+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',Qt.push(Y);continue}let rn=`<strong>${Mn}</strong>`;const z=Ae.first_soilname||Ae.soilname,bt=Ae.soilcode||Ae.first_soilcode;if(z&&(rn+=`<br/><span class="text-sm text-amber-700">${z}</span>`,Mn==="Bodemkaart")){const Y=Woe(z,bt);Y.length>0&&(rn+=`<br/><span class="text-xs text-gray-500 italic">${Y.join("  ")}</span>`)}if(Ae.soilslope&&Ae.soilslope!=="Niet opgenomen"&&(rn+=`<br/><span class="text-xs text-gray-500">Helling: ${Ae.soilslope}</span>`),!z){const Y=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[ae,Ve]of Object.entries(Ae))!Y.includes(ae)&&Ve&&Ve!=="Niet opgenomen"&&(rn+=`<br/><span class="text-xs text-gray-600">${ae}: ${Ve}</span>`)}Qt.push(rn)}}catch(He){console.warn("WMS GetFeatureInfo failed:",He)}}return Qt},hr=async Ft=>{const Ln=[],Qt=[],Lo=ke=>{if(!ke)return;const Ae=ke.getType(),z=ke.clone().transform("EPSG:3857","EPSG:4326").getCoordinates();return{type:Ae,coordinates:z}},Vi=qEt(Ft.coordinate),Ms=[];t.forEachFeatureAtPixel(Ft.pixel,ke=>{Ms.push(ke)});for(const ke of Ms){const Ae=ke.getProperties(),{geometry:rn,...z}=Ae;if(z.vondst){const ee=z.vondst,ge=`<strong>${ee.objectType}</strong>
            <div data-vondst-id="${ee.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ee.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ee.period}</span>
            ${ee.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ee.depth} cm</span>`:""}
            ${ee.condition&&ee.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ee.condition}</span>`:""}
            ${ee.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ee.weight} gram</span>`:""}
            ${ee.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ee.notes}</span>`:""}
            ${ee.photoUrl?`<br/><a href="${ee.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ee.timestamp).toLocaleDateString("nl-NL")}</span>`;Ln.push(ge),Qt.push(null),P(ee.id);continue}if(z.layerType==="customPoint"&&z.customPoint){const ee=z.customPoint,ge=z.customLayerName||"Mijn Laag",Le=z.customLayerColor||"#f97316";let Je="";if(ee.popupContent?(Je=`<div class="flex items-center gap-2 mb-2 pb-2 border-b border-gray-100">
              <span class="w-3 h-3 rounded-full flex-shrink-0" style="background-color: ${Le}"></span>
              <span class="text-xs font-medium" style="color: ${Le}">${ge}</span>
            </div>`,Je+=ee.popupContent):(Je=`<strong>${ee.name}</strong>`,Je+=`<br/><span class="text-xs text-gray-500">${ge}</span>`,ee.category&&ee.category!=="Overig"&&(Je+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${ee.category}</span>`)),ee.photos&&ee.photos.length>0){Je+='<div class="flex flex-wrap gap-1 my-2">';for(const ze of ee.photos.slice(0,3)){const nt=ze.thumbnailUrl||ze.thumbnailBase64;nt&&(Je+=`<img src="${nt}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}ee.photos.length>3&&(Je+=`<span class="text-xs text-gray-400 self-end">+${ee.photos.length-3} meer</span>`),Je+="</div>"}ee.notes&&!ee.popupContent&&(Je+=`<br/><span class="text-sm text-gray-600 mt-1">${ee.notes}</span>`),ee.url&&(Je+=`<br/><a href="${ee.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),Je+=`<br/><span class="text-xs text-gray-400">${new Date(ee.createdAt).toLocaleDateString("nl-NL")}</span>`,Ln.push(Je),Qt.push(null);continue}if(z.layerType==="importedLayer"){const ee=z.layerName||"Gemporteerde laag",ge=z.layerColor||"#8b5cf6",Le=["layerType","layerId","layerName","layerColor","featureIndex","geometry"],Je=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.description||"Feature";let ze=`<strong style="color: ${ge}">${Je}</strong>`;ze+=`<br/><span class="text-xs text-gray-500">${ee}</span>`;const nt=Object.entries(z).filter(([et])=>!Le.includes(et)&&et!=="name"&&et!=="Name");if(nt.length>0){ze+='<div class="mt-2 space-y-1">';for(const[et,Mt]of nt)if(Mt!=null&&Mt!==""){const zt=et.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,q=>q.toUpperCase());let gn=String(Mt);gn.length>200&&(gn=gn.substring(0,200)+"..."),gn.startsWith("http://")||gn.startsWith("https://")?ze+=`<div class="text-sm"><span class="text-gray-500">${zt}:</span> <a href="${gn}" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Link</a></div>`:ze+=`<div class="text-sm"><span class="text-gray-500">${zt}:</span> <span class="text-gray-700">${gn}</span></div>`}ze+="</div>"}Ln.push(ze),Qt.push({geometry:Lo(rn),properties:z,popupHtml:ze});continue}if(z.kwaliteitswaarde&&z.kwaliteitswaarde.includes("archeologische waarde")){const ee=wt(z);Ln.push(ee),Qt.push({geometry:Lo(rn),properties:z,popupHtml:ee});continue}if(z.layerType==="romeinsFort"||z.layerType==="romeinsFortLijn"){const ee=z.Name||z.name||"";z.description;const ge=BEt[ee]||null,Le=ge||WEt;let Je=`<strong class="text-red-800">${ge?Le.naam:ee||"Romeins Fort"}</strong>`;if(Je+=`<br/><span class="text-sm text-red-700">${HEt[Le.type]||Le.type}</span>`,Je+=`<br/><span class="text-sm text-gray-500">${Le.periode}</span>`,z.layerType==="romeinsFortLijn"&&(Je+='<br/><span class="text-sm text-red-600"> Gereconstrueerde fortomtrek</span>'),Je+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Le.beschrijving}</span>`,ge?.bronnen&&ge.bronnen.length>0){const ze=ge.bronnen[0].replace(/^https?:\/\//,"").split("/")[0];Je+=`<br/><a href="${ge.bronnen[0]}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-xs">${ze}</a>`}Ln.push(Je),Qt.push({geometry:Lo(rn),properties:z,popupHtml:Je});continue}let bt=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.route_name||z.road_name;bt||(z.leisure==="playground"?bt="Speeltuin":z.leisure==="park"?bt="Park":z.leisure==="swimming_area"||z.sport==="swimming"?bt="Zwemplek":z.tourism==="museum"?bt="Museum":z.amenity==="cafe"||z.amenity==="restaurant"?bt=z.amenity==="cafe"?"Caf":"Restaurant":z.historic==="castle"?bt="Kasteel":bt="Info"),(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats")))&&(bt="Bunker"),z.historic==="battlefield"&&(bt="Historisch slagveld");let Y=`<strong>${bt}</strong>`,ae=!1;if(z.category&&(Y+=`<br/><span class="text-sm text-gray-600">Categorie: ${z.category}</span>`),z.from_to&&z.from_to!==bt&&(Y+=`<br/><span class="text-sm text-gray-600">${z.from_to}</span>`),z.route&&z.route!==bt&&(Y+=`<br/><span class="text-sm text-gray-600">${z.route}</span>`),z.TOPONIEM&&(Y+=`<br/><span class="text-sm font-semibold text-gray-800">${z.TOPONIEM}</span>`,z.PLAATS&&(Y+=`<br/><span class="text-xs text-gray-500">${z.PLAATS}</span>`)),(z.AARD_VINDP||z.Aard_vindp)&&(Y+=`<br/><span class="text-sm text-gray-700">Aard: ${z.AARD_VINDP||z.Aard_vindp}</span>`),z.BEGIN_PER&&z.EIND_PER&&(Y+=`<br/><span class="text-sm text-purple-700">Periode: ${z.BEGIN_PER} - ${z.EIND_PER}</span>`),(z.AARD_OPM||z.Aard_opmer)&&(Y+=`<br/><span class="text-xs text-gray-600 italic">${z.AARD_OPM||z.Aard_opmer}</span>`),z.Gemeente&&(Y+=`<br/><span class="text-sm text-gray-600">Gemeente: ${z.Gemeente}</span>`),z.Bron&&(Y+=`<br/><span class="text-xs text-gray-500">Bron: ${z.Bron}</span>`),z.Bron_besch&&(Y+=`<br/><span class="text-xs text-gray-500">${z.Bron_besch}</span>`),z.Dat_st_z&&z.Dat_ei_z&&(Y+=`<br/><span class="text-sm text-purple-700">Datering: ${z.Dat_st_z} - ${z.Dat_ei_z}</span>`),z.Begin&&z.Einde&&(Y+=`<br/><span class="text-sm text-purple-700">Periode: ${z.Begin} - ${z.Einde}</span>`),z.Uiterwaard&&(Y+=`<br/><span class="text-sm font-semibold">${z.Uiterwaard}</span>`),z.rivier&&(Y+=`<br/><span class="text-sm text-blue-600">Rivier: ${z.rivier}</span>`),z.Beschrijvi&&(Y+=`<br/><span class="text-sm text-gray-700">${z.Beschrijvi}</span>`),z.leisure==="park"){ae=!0,Y=`<strong class="text-green-800">${z.name||"Park"}</strong>`,Y+='<br/><span class="text-sm text-gray-800">Park</span>',z.description&&(Y+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.area&&(Y+=`<br/><span class="text-sm text-gray-600">Oppervlakte: ${z.area}</span>`);const ge=[];if(z.dog==="yes"&&ge.push("Honden toegestaan"),z.lit==="yes"&&ge.push("Verlicht"),z.bench==="yes"&&ge.push("Bankjes"),ge.length>0&&(Y+=`<br/><span class="text-sm text-gray-600">${ge.join("  ")}</span>`),z.operator&&(Y+=`<br/><span class="text-xs text-gray-500">Beheer: ${z.operator}</span>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',Y+='<div class="text-sm text-gray-700">Parken zijn populair bij detectoristen. Mensen verliezen hier munten en sieraden. Vraag eerst toestemming aan de gemeente of beheerder.</div>',z.website){const Le=z.website.replace(/^https?:\/\//,"").split("/")[0];Y+=`<div class="mt-2"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">${Le}</a></div>`}}else z.leisure==="playground"&&(ae=!0,Y=`<strong class="text-orange-800">${z.name||"Speeltuin"}</strong>`,Y+='<br/><span class="text-sm text-gray-800">Speeltuin</span>',z.description&&(Y+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`));if(z.tourism==="museum"||z.museum){ae=!0;const ee=z.name||"Museum",ge=z.museum||z["museum:type"]||"",Je=ge&&ge!=="yes"?{art:"Kunstmuseum",history:"Geschiedenismuseum",archaeology:"Archeologisch museum",science:"Wetenschapsmuseum",technology:"Techniekmuseum",nature:"Natuurmuseum",open_air:"Openluchtmuseum",local:"Streekmuseum",military:"Militair museum",railway:"Spoorwegmuseum",maritime:"Maritiem museum",children:"Kindermuseum"}[ge.toLowerCase()]||ge:"Museum";if(Y=`<strong class="text-purple-800">${ee}</strong>`,Y+=`<br/><span class="text-sm text-purple-600">${Je}</span>`,z.description&&(Y+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.fee){const ze=z.fee==="yes"?"Toegangsprijs":z.fee==="no"?"Gratis toegang":z.fee;Y+=`<div class="mt-2"><span class="text-sm text-gray-600">${ze}</span></div>`}if(z.opening_hours){const ze=Boe(String(z.opening_hours));Y+=`<div class="mt-2"><span class="text-xs text-green-600">Open: ${ze}</span></div>`}if(z.website||z.url){const ze=z.website||z.url;Y+=`<div class="mt-1"><a href="${ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Bezoek ${ee}</a></div>`}if(z.wikipedia){const ze=z.wikipedia.split(":")[0]||"nl",nt=z.wikipedia.split(":")[1]||z.wikipedia;Y+=`<div class="text-sm"><a href="https://${ze}.wikipedia.org/wiki/${encodeURIComponent(nt)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Meer info op Wikipedia</a></div>`}if(z["addr:street"]||z["addr:housenumber"]||z["addr:city"]){if(Y+='<div class="mt-2 text-xs text-gray-400">',z["addr:street"]||z["addr:housenumber"]){const ze=[z["addr:street"],z["addr:housenumber"]].filter(Boolean).join(" ");ze&&(Y+=`${ze}<br/>`)}z["addr:city"]&&(Y+=`${z["addr:postcode"]||""} ${z["addr:city"]}`),Y+="</div>"}}if(z.leisure==="swimming_area"||z.sport==="swimming"||z.natural==="beach"){ae=!0,Y=`<strong class="text-cyan-800">${z.name||"Zwemplek"}</strong>`;const ge=z.natural==="beach"?"Strand":z.leisure==="swimming_area"?"Zwemplek":"Zwemwater";Y+=`<br/><span class="text-sm text-gray-800">${ge}</span>`,z.water&&(Y+=`<br/><span class="text-sm text-gray-700">${{lake:"Meer",river:"Rivier",pond:"Vijver",reservoir:"Reservoir",canal:"Kanaal"}[z.water]||z.water}</span>`),z.supervised==="yes"&&(Y+='<br/><span class="text-sm text-green-700">Met toezicht</span>'),z.changing_rooms==="yes"&&(Y+='<br/><span class="text-sm text-gray-600">Kleedruimte aanwezig</span>'),z.description&&(Y+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',Y+='<div class="text-sm text-gray-700">Zwemplekken kunnen interessant zijn voor detectie. Mensen verliezen hier sieraden en munten. Let op: niet overal is detecteren toegestaan.</div>'}if(z.osm_id&&z.address!==void 0&&(Y+='<br/><span class="text-sm text-lime-700">Kringloopwinkel</span>',z.address&&(Y+=`<br/><span class="text-xs text-gray-500">${z.address}</span>`),z.phone&&(Y+=`<br/><span class="text-xs text-gray-600">${z.phone}</span>`)),z.site_type==="tumulus"){ae=!0;const ee=ke.getGeometry()?.getCoordinates();let ge="",Le="";if(ee){const Je=Qn(ee),ze=Je[0],nt=Je[1];ze>5.5&&ze<6.3&&nt>52&&nt<52.5?(ge="Veluwe",Le="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):ze>6.2&&ze<7.1&&nt>52.6&&nt<53.3?(ge="Drenthe",Le="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):ze>4.5&&ze<6&&nt>51.3&&nt<51.9?(ge="Noord-Brabant",Le="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):ze>5.5&&ze<6.3&&nt>50.7&&nt<51.6?(ge="Limburg",Le="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):ze>5&&ze<5.6&&nt>52&&nt<52.4&&(ge="Utrechtse Heuvelrug",Le="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}Y+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',ge&&(Y+=`<br/><span class="text-sm text-gray-500">${ge}</span>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',Le&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Le}</div>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',z.wikidata?(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${z.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',Y+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(z.historic==="castle"||z.castle_type){ae=!0;const ee={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},ge=z.castle_type?ee[z.castle_type]:null,Le=ge?.label||"Kasteel";if(Y+=`<br/><span class="text-sm text-purple-700">${Le}</span>`,z.start_date&&(Y+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.start_date}</span>`),z.heritage&&(Y+='<br/><span class="text-sm text-amber-700">Rijksmonument</span>'),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ge?Y+=`<div class="text-sm text-gray-700 mt-1">${ge.uitleg}</div>`:Y+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge?Y+=`<div class="text-sm text-gray-700 mt-1">${ge.vondsten}</div>`:Y+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',z.wikipedia||z.website){if(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace(/^nl:/,"")}`;Y+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}z.website&&(Y+=`<div class="text-sm text-gray-700 mt-1"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(z.historic==="ruins"){const ee=z.ruins_type||"";let ge="Rune",Le="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",Je="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(ee.toLowerCase().includes("church")||ee.toLowerCase().includes("kerk")?(ge="Kerkrune",Le="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",Je="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):ee.toLowerCase().includes("castle")||ee.toLowerCase().includes("kasteel")?(ge="Kasteelrune",Le="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",Je="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):ee.toLowerCase().includes("mill")||ee.toLowerCase().includes("molen")?(ge="Molenrune",Le="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",Je="Gereedschap, munten, huishoudelijke voorwerpen"):ee.toLowerCase().includes("fort")&&(ge="Fortrune",Le="De overblijfselen van een militair fort of verdedigingswerk.",Je="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),Y+=`<br/><span class="text-sm text-amber-700">${ge}</span>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Le}</div>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Je}</div>`,z.description&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.wikipedia){const ze=z.wikipedia.startsWith("http")?z.wikipedia:`https://${z.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${z.wikipedia.replace(/^[a-z]{2}:/,"")}`;Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats"))){ae=!0;const ee={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},ge=z.name||"",Le=z.bunker_type?ee[z.bunker_type]||z.bunker_type:"";ge&&ge!=="Bunker"&&(Y+=`<br/><span class="text-sm font-semibold text-gray-700">${ge}</span>`),Le&&Le!==ge&&(Y+=`<br/><span class="text-xs text-gray-500">${Le}</span>`);const Je=ke.getGeometry()?.getCoordinates();let ze="",nt="",et="";if(Je){const Mt=Qn(Je),zt=Mt[0],gn=Mt[1],q=zt<4.8||zt<5.2&&gn>51.8&&gn<53.5,re=zt>4.2&&zt<4.4&&gn>52&&gn<52.15,J=zt>4.5&&zt<4.7&&gn>52.4&&gn<52.5,te=zt>4&&zt<4.2&&gn>51.95&&gn<52.05,se=zt<4.2&&gn<51.6,oe=zt>5.2&&zt<5.8&&gn>51.9&&gn<52.3;re?(ze="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",nt="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",et="Atlantikwall Museum Scheveningen"):J?(ze="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",nt="https://www.bunkermuseum.nl/",et="Bunkermuseum IJmuiden"):te?(ze="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",nt="https://www.atlantikwallhoekvanholland.nl/",et="Atlantikwall Hoek van Holland"):se?(ze="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",nt="https://www.bunkermuseumzoutelande.nl/",et="Bunkermuseum Zoutelande"):q?(ze="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="Atlantikwall (Wikipedia)"):oe?(ze="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",nt="https://nl.wikipedia.org/wiki/Grebbelinie",et="Grebbelinie (Wikipedia)"):(ze="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)")}else ze="Een bunker uit de Tweede Wereldoorlog.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)";Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',Y+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">',Y+=`<a href="${nt}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${et}</a>`,z.website?Y+=`<br/><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:Y+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',Y+="</div>"}if(z.historic==="battlefield"){ae=!0;const ee=z.name||"Onbekend slagveld",Le={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[ee];if(ee!=="Onbekend slagveld"&&ee!=="Historisch slagveld"&&(Y+=`<br/><span class="text-sm font-semibold text-red-700">${ee}</span>`),Le)Y+=`<br/><span class="text-xs text-gray-500">${Le.periode}</span>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Le.samenvatting}</div>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Le.uitkomst}</div>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${Le.watZieJe}</div>`,Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">',Y+=`<a href="${Le.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,ee.includes("Arnhem")&&(Y+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),ee.includes("Overloon")&&(Y+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),Y+="</div>";else if(z.date&&(Y+=`<br/><span class="text-xs text-gray-500">${z.date}</span>`),z.description?(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`):(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace("nl:","")}`;Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bron==="Paleobiology Database"){const ee=ze=>{const nt={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[et,Mt]of Object.entries(nt))if(ze.toLowerCase().includes(et.toLowerCase()))return Mt;return""},ge=ze=>{const nt={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[et,Mt]of Object.entries(nt))if(ze.toLowerCase().includes(et.toLowerCase()))return Mt;return""},Le=ze=>{const nt={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let et=ze;for(const[Mt,zt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),zt);return et},Je=ze=>{const nt={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let et=ze;for(const[Mt,zt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),zt);return et};if(z.vindplaats&&(Y+=`<br/><span class="text-xs text-gray-600">${z.vindplaats}</span>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',z.taxonomie&&z.taxonomie!=="Onbekend"){const ze=ee(z.taxonomie);ze?(Y+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,Y+=`<div class="text-xs text-gray-500 italic">(${z.taxonomie})</div>`):Y+=`<div class="text-sm text-gray-700 mt-1">${z.taxonomie}</div>`}if(z.aantal_fossielen){const ze=parseInt(z.aantal_fossielen),nt=ze>100?"Veel fossielen gevonden op deze locatie.":ze>10?"Meerdere fossielen gevonden op deze locatie.":`${z.aantal_fossielen} fossiel${ze>1?"en":""} gevonden op deze locatie.`;Y+=`<div class="text-sm text-gray-600 mt-1">${nt}</div>`}if(z.periode&&z.periode!=="Onbekend"){Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const ze=ge(z.periode);Y+=`<div class="text-sm text-gray-700 mt-1">${z.periode}</div>`,ze&&(Y+=`<div class="text-sm text-gray-600">${ze}</div>`),z.ouderdom&&z.ouderdom!=="Onbekend"&&(Y+=`<div class="text-sm text-gray-600">Ouderdom: ${z.ouderdom}</div>`)}(z.gesteente||z.formatie||z.milieu)&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',z.gesteente&&(Y+=`<div class="text-sm text-gray-700 mt-1">${Le(z.gesteente)}</div>`),z.formatie&&(Y+=`<div class="text-sm text-gray-600">Formatie: ${z.formatie}</div>`,z.lid&&(Y+=`<div class="text-sm text-gray-600 ml-3">Lid: ${z.lid}</div>`)),z.milieu&&(Y+=`<div class="text-sm text-gray-600">Leefomgeving: ${Je(z.milieu)}</div>`))}if(z.layerType==="fossielHotspot"){const ee=[];if(z.type&&ee.push(z.type),z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(Y+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.finds||z.period)&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.finds&&(Y+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.period&&(Y+=`<div class="text-sm text-gray-600 mt-1">Periode: ${z.period}</div>`),z.geology&&(Y+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const Le=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";Y+=`<div class="text-sm ${Le} mt-1">${z.access}</div>`}z.tips&&(Y+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="mineralenHotspot"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(Y+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.minerals&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.minerals}</div>`,z.geology&&(Y+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const Le=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")||z.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";Y+=`<div class="text-sm ${Le} mt-1">${z.access}</div>`}z.tips&&(Y+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="goudrivier"){const ee=[];if(z.river&&ee.push(z.river),z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(Y+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.goldType||z.origin)&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.goldType&&(Y+=`<div class="text-sm text-gray-700 mt-1">${z.goldType}</div>`),z.origin&&(Y+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${z.origin}</div>`)),z.legal||z.tips){if(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',z.legal){const Le=z.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";Y+=`<div class="text-sm ${Le} mt-1">${z.legal}</div>`}z.tips&&(Y+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="wandelroute"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(Y+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.distance||z.duration){const ge=z.distance?`${z.distance} km`:"",Le=z.duration?`${z.duration}`:"",Je=[ge,Le].filter(Boolean).join("  ");Je&&(Y+=`<br/><span class="text-sm text-green-700 font-medium">${Je}</span>`)}(z.description||z.highlights)&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',z.description&&(Y+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.highlights&&(Y+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${z.highlights}</div>`)),z.startAddress&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.startAddress}</div>`),z.url&&(Y+=`<div class="mt-3"><a href="${z.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(z.layerType==="hunebed"){z.period&&(Y+=`<br/><span class="text-sm text-purple-700">Periode: ${z.period}</span>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z.description&&(Y+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`);const ee=[];if(z.stones){const ge=z.stones.toLowerCase(),Le=ge.match(/(\d+)\s*dekst[^\s,]*/i),Je=ge.match(/(\d+)\s*draagst[^\s,]*/i),ze=ge.match(/(\d+)\s*sluitst[^\s,]*/i),nt=ge.match(/(\d+)\s*poortst[^\s,]*/i),et=ge.match(/(\d+)\s*gangdekst[^\s,]*/i),Mt=ge.match(/(\d+)\s*gangzijst[^\s,]*/i);Le&&ee.push(`${Le[1]} deksteen${parseInt(Le[1])>1?"en":""} (de grote steen${parseInt(Le[1])>1?"en":""} bovenop)`),Je&&ee.push(`${Je[1]} draagstenen (de stenen die de dekstenen dragen)`),ze&&ee.push(`${ze[1]} sluitsteen${parseInt(ze[1])>1?"en":""} (afsluiting aan de korte zijden)`),nt&&ee.push(`${nt[1]} poortsteen${parseInt(nt[1])>1?"en":""} (bij de ingang)`),et&&ee.push(`${et[1]} gangdeksteen${parseInt(et[1])>1?"en":""} (boven de toegangsgang)`),Mt&&ee.push(`${Mt[1]} gangzijstenen (langs de toegangsgang)`)}if(z.length&&ee.push(`Een grafkamer van ${z.length} lang`),z.width&&ee.push(`${z.width}`),ee.length>0&&(Y+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',Y+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',ee.forEach(ge=>{Y+=`<li>${ge}</li>`}),Y+="</ul>"),z.notable){const ge=z.notable.toLowerCase();let Le="Wat is hier bijzonder?";ge.includes("grootste")?Le="Waarom is dit het grootste hunebed?":ge.includes("klein")||ge.includes("kindhunebed")?Le="Waarom is dit hunebed zo klein?":ge.includes("cluster")||ge.includes("naast elkaar")?Le="Waarom liggen hier meerdere hunebedden?":(ge.includes("enige")||ge.includes("westelijk")||ge.includes("noordelijk"))&&(Le="Wat maakt deze locatie bijzonder?"),Y+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${Le}</span></div>`,Y+=`<div class="text-sm text-gray-700 mt-1">${z.notable}</div>`}Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',Y+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',z.finds&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.museum&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">${z.museum}</div>`),Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',z.access?Y+=`<div class="text-sm text-gray-700 mt-1">${z.access}</div>`:Y+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',z.wikipedia&&(Y+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Y+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${z.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((z.inventarisnummer||z.locatie_naam)&&(z.locatie_naam&&(Y+=`<br/><span class="text-sm font-semibold">${z.locatie_naam}</span>`),z.inventarisnummer&&(Y+=`<br/><span class="text-xs text-gray-500">CAI: ${z.inventarisnummer}</span>`),z.datering_tekst&&(Y+=`<br/><span class="text-sm text-purple-700">${z.datering_tekst}</span>`)),(z.veensoort||z.dikte)&&(z.veensoort&&(Y+=`<br/><span class="text-sm text-amber-700">${z.veensoort}</span>`),z.dikte&&(Y+=`<br/><span class="text-xs text-gray-600">Dikte: ${z.dikte}</span>`)),z.nature&&z.debut){Y+=`<br/><span class="text-sm text-purple-700">${z.nature}</span>`;const ee=z.debut===z.fin?z.debut:`${z.debut} - ${z.fin}`;ee&&(Y+=`<br/><span class="text-sm text-gray-700">Periode: ${ee}</span>`),z.structure&&(Y+=`<br/><span class="text-xs text-gray-600">${z.structure}</span>`),z.commune&&(Y+=`<br/><span class="text-xs text-gray-500">${z.commune}</span>`),z.decouvert&&(Y+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${z.decouvert}</span>`),z.numero&&(Y+=`<br/><span class="text-xs text-gray-400">${z.numero}</span>`)}if((z.NATURE_OPE||z.CODE_OPERA)&&(z.TITRE&&(Y+=`<br/><span class="text-sm font-semibold">${z.TITRE}</span>`),z.NATURE_OPE&&(Y+=`<br/><span class="text-sm text-amber-700">${z.NATURE_OPE}</span>`),z.AUTEUR&&(Y+=`<br/><span class="text-xs text-gray-600">Auteur: ${z.AUTEUR}</span>`),z.DATE&&(Y+=`<br/><span class="text-xs text-gray-500">Datum: ${z.DATE}</span>`),z.COMMUNE&&(Y+=`<br/><span class="text-xs text-gray-500">${z.COMMUNE}</span>`)),z.type_protection&&(z.n_site||z.t_site)){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";Y+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.n_site&&(Y+=`<br/><span class="text-sm font-semibold">${z.n_site}</span>`),z.t_site&&(Y+=`<br/><span class="text-xs text-gray-600">${z.t_site}</span>`),z.c_site&&(Y+=`<br/><span class="text-xs text-gray-500">Code: ${z.c_site}</span>`),z.d_creation&&(Y+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${z.d_creation}</span>`)}if(z.type_protection&&z.cod_diren){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(Y+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.proced&&(Y+=`<br/><span class="text-xs text-gray-600">${z.proced}</span>`),z.d_proced&&(Y+=`<br/><span class="text-xs text-gray-500">Date: ${z.d_proced}</span>`),z.comment){const ge=String(z.comment).slice(0,150);Y+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.comment).length>150?"...":""}</span>`}}if(z.type_protection&&z.nomsite){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(Y+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.caractere&&(Y+=`<br/><span class="text-xs text-gray-600">${z.caractere}</span>`),z.datedecis&&(Y+=`<br/><span class="text-xs text-gray-500">Date: ${z.datedecis}</span>`),z.descriptio){const ge=String(z.descriptio).slice(0,150);Y+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.descriptio).length>150?"...":""}</span>`}}if(z.secteur&&z.style){if(Y+=`<br/><span class="text-sm text-gray-700">${z.secteur}</span>`,z["sous-secteur"]&&(Y+=`<br/><span class="text-xs text-gray-600">${z["sous-secteur"]}</span>`),z.description){const ee=String(z.description).slice(0,150);Y+=`<br/><span class="text-xs text-gray-600 italic">${ee}${String(z.description).length>150?"...":""}</span>`}z.url&&(Y+=`<br/><a href="${z.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(z.nature_operation||z.synthese){z.nature_operation&&(Y+=`<br/><span class="text-sm text-red-700">${z.nature_operation}</span>`),z.responsable_operation&&(Y+=`<br/><span class="text-xs text-gray-600">Responsable: ${z.responsable_operation}</span>`),z.date_operation&&(Y+=`<br/><span class="text-xs text-gray-500">Datum: ${z.date_operation}</span>`);const ee=[];if(z.prehistoire==="Oui"&&ee.push("Prehistorie"),z.protohistoire==="Oui"&&ee.push("Protohistorie"),z.antiquite==="Oui"&&ee.push("Romeins"),z.moyen_age==="Oui"&&ee.push("Middeleeuwen"),z.temps_modernes==="Oui"&&ee.push("Moderne tijd"),ee.length>0&&(Y+=`<br/><span class="text-sm text-purple-700">${ee.join(", ")}</span>`),z.adresse&&(Y+=`<br/><span class="text-xs text-gray-500">${z.adresse}</span>`),z.synthese){const ge=String(z.synthese).slice(0,200);Y+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.synthese).length>200?"...":""}</span>`}}if(z.operator&&(Y+=`<br/><span class="text-sm text-gray-600">${z.operator}</span>`),!ae){if(z.opening_hours){const ee=Boe(String(z.opening_hours));Y+=`<br/><span class="text-xs text-green-600">Open: ${ee}</span>`}z.website&&(Y+=`<br/><a href="${z.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`)}if(z.addr_street){const ee=[z.addr_street,z.addr_housenumber,z.addr_postcode].filter(Boolean).join(" ");Y+=`<br/><span class="text-xs text-gray-500">${ee}</span>`}const Ve=z.description||z.omschrijving||z.descr||z.info;Ve&&Ve!==bt&&(Y+=`<br/><span class="text-sm text-gray-600">${Ve}</span>`),Ln.push(Y),Qt.push({geometry:Lo(rn),properties:z,popupHtml:Y})}const Mn=t.getView().getResolution()||1,ki=await Xn(Ft.coordinate,Mn);Ln.push(...ki);for(const ke of ki)Qt.push(null);const He=await Vi;if(Ln.length===0&&He!==null){const ke=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
          </div>`;Ln.push(ke),Qt.push(null)}if(Ln.length>0&&He!==null&&(Ln[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
        </div>`),Ln.length>0){l(Ln),ie(Qt),u(0),console.log(` KLIK OPGESLAGEN: [${Ft.coordinate[0].toFixed(0)}, ${Ft.coordinate[1].toFixed(0)}]`),v(Ft.coordinate),b(!1),G(!1),Me(!1),W(""),fe(null);const ke=Qn(Ft.coordinate);Be(ke),N(`https://www.google.com/maps/dir/?api=1&destination=${ke[1]},${ke[0]}`),j(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${ke[1]},${ke[0]}`),f(!0)}};return t.on("click",hr),()=>{t.un("click",hr)}},[t]);const Ti=()=>{f(!1),Se("half"),t&&x&&(xz(t),b(!1))},Cs=(wt,Xn)=>{const hr=Xn.velocity.y,Ft=Xn.offset.y;Ke==="half"?Ft<-50||hr<-500?Se("full"):(Ft>100||hr>500)&&Ti():(Ft>50||hr>300)&&Se("half")};return m.jsx(Jn,{children:h&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ti}),m.jsxs(kt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{fontSize:`${14*ve/100}px`,height:Ke==="full"?"90vh":"auto",maxHeight:Ke==="full"?"90vh":"35vh"},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.3,onDragEnd:Cs,children:[m.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white cursor-grab active:cursor-grabbing rounded-t-xl select-none",onClick:()=>Se(Ke==="half"?"full":"half"),children:[m.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Ye&&m.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[m.jsx("button",{onClick:wt=>{wt.stopPropagation(),Un()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:m.jsx(Nwe,{size:18})}),m.jsxs("span",{className:"text-white/80 font-medium min-w-[32px] text-center",style:{fontSize:"0.75em"},children:[c+1,"/",a.length]}),m.jsx("button",{onClick:wt=>{wt.stopPropagation(),Qr()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:m.jsx(gb,{size:18})})]}),m.jsx("span",{className:"font-medium text-white truncate",style:{fontSize:"0.9em"},children:fn||"Info"})]}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Re&&m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:wt=>{wt.stopPropagation(),G(!V)},className:`p-1 transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20 ${U?"text-green-300":"text-white/80 hover:text-white"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:U?m.jsx(gp,{size:16}):m.jsx(du,{size:16})}),V&&m.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px] max-w-[220px]",children:[m.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),m.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.filter(wt=>!wt.archived).map(wt=>m.jsxs("button",{onClick:()=>{const Xn=le;s(wt.id,{name:fn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Re[0],Re[1]],sourceLayer:fn,geometry:Xn?.geometry,sourceProperties:Xn?.properties,popupContent:Xn?.popupHtml}),G(!1),fe(wt.name),setTimeout(()=>fe(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-blue-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[m.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:wt.color}}),m.jsx("span",{className:"truncate",children:wt.name})]},wt.id))}),m.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:De?m.jsxs("div",{className:"px-2 py-1",children:[m.jsx("input",{type:"text",value:Q,onChange:wt=>W(wt.target.value),placeholder:"Naam nieuwe laag...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:border-orange-400",autoFocus:!0,onKeyDown:wt=>{if(wt.key==="Enter"&&Q.trim()){const Xn=o(Q.trim()),hr=le;s(Xn,{name:fn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Re[0],Re[1]],sourceLayer:fn,geometry:hr?.geometry,sourceProperties:hr?.properties,popupContent:hr?.popupHtml}),G(!1),Me(!1),W(""),fe(Q.trim()),setTimeout(()=>fe(null),2e3)}else wt.key==="Escape"&&(Me(!1),W(""))}}),m.jsxs("div",{className:"flex gap-1 mt-1",children:[m.jsx("button",{onClick:()=>{if(Q.trim()){const wt=o(Q.trim()),Xn=le;s(wt,{name:fn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Re[0],Re[1]],sourceLayer:fn,geometry:Xn?.geometry,sourceProperties:Xn?.properties,popupContent:Xn?.popupHtml}),G(!1),Me(!1),W(""),fe(Q.trim()),setTimeout(()=>fe(null),2e3)}},disabled:!Q.trim(),className:"flex-1 px-2 py-1 text-xs bg-orange-500 text-white rounded disabled:opacity-50",children:"Toevoegen"}),m.jsx("button",{onClick:()=>{Me(!1),W("")},className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700",children:"Annuleer"})]})]}):m.jsxs("button",{onClick:()=>Me(!0),className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[m.jsx(du,{size:14}),m.jsx("span",{children:"Nieuwe laag maken..."})]})})]})]}),O&&m.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-amber-500 hover:text-amber-600 transition-colors flex-shrink-0",title:"Open Street View","aria-label":"Open Street View",children:m.jsx(Gwe,{size:18})}),C&&m.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",onClick:wt=>wt.stopPropagation(),className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 rounded hover:bg-white/20",title:"Navigeer naar locatie","aria-label":"Open in Google Maps",children:m.jsx(bg,{size:16})}),m.jsx($we,{size:18,className:"text-white/60 mx-1"}),m.jsx("button",{onClick:wt=>{wt.stopPropagation(),Ti()},className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20","aria-label":"Sluiten",children:m.jsx(ai,{size:16})})]})]}),m.jsx("div",{className:`px-4 py-3 overflow-y-auto select-text min-h-0 ${Ke==="full"?"flex-1":""}`,style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:dt}}),m.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2 flex-shrink-0",children:[m.jsx(PH,{size:14,className:"text-gray-400 flex-shrink-0"}),m.jsx("input",{type:"range",min:"80",max:"150",value:ve,onChange:wt=>we(parseInt(wt.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),m.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[ve,"%"]})]}),jn&&I&&!M&&m.jsxs("div",{className:"px-4 pb-4 flex gap-2 flex-shrink-0",children:[m.jsxs("button",{onClick:()=>{const wt=r.find(Xn=>Xn.id===I);wt&&F(wt)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none",children:[m.jsx(C2,{size:16}),m.jsx("span",{children:"Bewerken"})]}),m.jsxs("button",{onClick:()=>{e(I),f(!1),P(null)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[m.jsx(zd,{size:16}),m.jsx("span",{children:"Verwijderen"})]})]}),M&&m.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-100 pt-3 flex-shrink-0 overflow-y-auto max-h-[40vh]",children:[m.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Vondst bewerken"}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Objecttype"}),m.jsx("input",{type:"text",value:M.objectType,onChange:wt=>F({...M,objectType:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Materiaal"}),m.jsx("input",{type:"text",value:M.material,onChange:wt=>F({...M,material:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Periode"}),m.jsx("input",{type:"text",value:M.period,onChange:wt=>F({...M,period:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-500",children:"Notities"}),m.jsx("textarea",{value:M.notes,onChange:wt=>F({...M,notes:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50 resize-none h-16"})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>F(null),className:"flex-1 px-3 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none text-sm",children:"Annuleren"}),m.jsx("button",{onClick:()=>{n(M.id,{objectType:M.objectType,material:M.material,period:M.period,notes:M.notes}),F(null),f(!1)},className:"flex-1 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none text-sm",children:"Opslaan"})]})]}),ur&&g&&m.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:x?m.jsxs("button",{onClick:Ar,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[m.jsx(R2,{size:16}),m.jsx("span",{children:"Hoogtekaart verbergen"})]}):m.jsx("button",{onClick:go,disabled:T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${T?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:T?m.jsxs(m.Fragment,{children:[m.jsx(cL,{size:16,className:"animate-spin"}),m.jsx("span",{children:"Laden..."})]}):m.jsxs(m.Fragment,{children:[m.jsx(R2,{size:16}),m.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const Hoe=1e-4;function ZEt(t,e){return t.points.some(n=>{const r=Math.abs(n.coordinates[0]-e[0]),i=Math.abs(n.coordinates[1]-e[1]);return r<Hoe&&i<Hoe})}function JEt(){const t=ji(j=>j.map),e=zr(j=>j.openVondstForm),{openAddPointModal:n,openCreateLayerModal:r,openLayerManagerModal:i}=zr(),s=co(j=>j.layers),[o,a]=X.useState(null),[l,c]=X.useState(!1),[u,h]=X.useState(!1),[f,g]=X.useState(!1),v=X.useRef(null),x=X.useRef(null);X.useEffect(()=>{if(!t){console.log(" LongPressMenu: map not ready");return}const j=t.getViewport();if(!j){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",j);const V=600,G=15,U=Me=>{if(console.log(" Touch start, touches:",Me.touches.length),Me.touches.length!==1)return;const Q=Me.touches[0];x.current={x:Q.clientX,y:Q.clientY},console.log(" Starting long press timer at:",x.current),v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",x.current),!x.current)return;const W=window.__olMap;if(!W){console.log(" Map not available (global)");return}const ne=j.getBoundingClientRect(),ie=[x.current.x-ne.left,x.current.y-ne.top],le=W.getCoordinateFromPixel(ie);if(le){const ve=Qn(le);Me.preventDefault(),a({pixel:[x.current.x,x.current.y],coordinate:ve}),c(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",ve)}},V)},fe=Me=>{if(!v.current||!x.current)return;const Q=Me.touches[0],W=Q.clientX-x.current.x,ne=Q.clientY-x.current.y,ie=Math.sqrt(W*W+ne*ne);ie>G&&(console.log(" Touch moved too much, cancelling. Distance:",ie),clearTimeout(v.current),v.current=null)},Re=()=>{console.log(" Touch end, timer active:",!!v.current),v.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(v.current),v.current=null),x.current=null},Be=Me=>{l&&Me.preventDefault()},$e=Me=>{Me.button===0&&(console.log(" Mouse down"),x.current={x:Me.clientX,y:Me.clientY},v.current&&clearTimeout(v.current),v.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!x.current)return;const Q=window.__olMap;if(console.log(" __olMap:",Q),console.log(" __olMap constructor:",Q?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Q?.getCoordinateAtPixel),!Q){console.log(" Map not available (global)");return}const W=j.getBoundingClientRect(),ne=[x.current.x-W.left,x.current.y-W.top];console.log(" Pixel:",ne);const ie=Q.getCoordinateFromPixel(ne);if(console.log(" Coordinate:",ie),ie){const le=Qn(ie);a({pixel:[x.current.x,x.current.y],coordinate:le}),c(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",le)}},V))},pe=Me=>{if(!v.current||!x.current)return;const Q=Me.clientX-x.current.x,W=Me.clientY-x.current.y;Math.sqrt(Q*Q+W*W)>G&&(console.log(" Mouse moved, cancelling"),clearTimeout(v.current),v.current=null)},De=()=>{console.log(" Mouse up"),v.current&&(clearTimeout(v.current),v.current=null),x.current=null};return j.addEventListener("touchstart",U,{passive:!1}),j.addEventListener("touchmove",fe,{passive:!0}),j.addEventListener("touchend",Re),j.addEventListener("touchcancel",Re),j.addEventListener("contextmenu",Be),j.addEventListener("mousedown",$e),j.addEventListener("mousemove",pe),j.addEventListener("mouseup",De),j.addEventListener("mouseleave",De),()=>{j.removeEventListener("touchstart",U),j.removeEventListener("touchmove",fe),j.removeEventListener("touchend",Re),j.removeEventListener("touchcancel",Re),j.removeEventListener("contextmenu",Be),j.removeEventListener("mousedown",$e),j.removeEventListener("mousemove",pe),j.removeEventListener("mouseup",De),j.removeEventListener("mouseleave",De),v.current&&clearTimeout(v.current)}},[t,l]);const b=()=>{u&&(c(!1),a(null),h(!1),g(!1))},T=()=>{c(!1),a(null),h(!1),g(!1)},A=j=>{if(!o)return;const[V,G]=o.coordinate;n(j,{lat:G,lng:V}),T()},I=()=>{r(),T()},P=()=>{if(!o)return;const[j,V]=o.coordinate;e({lat:V,lng:j}),c(!1),a(null),h(!1)},M=()=>{if(!o)return;const[j,V]=o.coordinate,G=`https://www.google.com/maps?q=${V},${j}`;window.open(G,"_blank"),c(!1),a(null),h(!1)},F=()=>{if(!o)return;const[j,V]=o.coordinate,G=`https://www.google.com/maps?layer=c&cbll=${V},${j}`;window.open(G,"_blank"),T()},C=()=>{if(!o)return;const j=document.createElement("input");j.type="file",j.accept="image/*",j.capture="environment",j.onchange=async V=>{const G=V.target.files?.[0];if(!G)return;const[U,fe]=o.coordinate;e({lat:fe,lng:U},G)},j.click(),T()},N=()=>{i(),T()},O=j=>{const[V,G]=j;return`${G.toFixed(5)}N, ${V.toFixed(5)}E`};return m.jsx(Jn,{children:l&&o&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),m.jsxs(kt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(o.pixel[0],window.innerWidth-220),top:(()=>{const j=f?480:380;return window.innerHeight-o.pixel[1]<j&&o.pixel[1]>j?o.pixel[1]-j+40:Math.min(o.pixel[1],window.innerHeight-j)})()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[m.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:m.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[m.jsx(Sl,{size:16}),m.jsx("span",{className:"text-xs font-mono",children:O(o.coordinate)})]})}),m.jsxs("div",{className:"bg-white",children:[m.jsxs("button",{onClick:P,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(bN,{size:20,className:"text-orange-500"}),m.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),m.jsxs("button",{onClick:C,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-green-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(aL,{size:20,className:"text-green-500"}),m.jsx("span",{className:"font-medium",children:"Foto maken"})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(uc,{size:20,className:"text-purple-500"}),m.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),m.jsx(gb,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),m.jsx(Jn,{children:f&&m.jsx(kt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.length===0?m.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[m.jsx(du,{size:14}),m.jsx("span",{children:"Maak eerst een laag aan"})]}):m.jsxs(m.Fragment,{children:[s.map(j=>{const V=o?ZEt(j,o.coordinate):!1;return m.jsxs("button",{onClick:()=>!V&&A(j.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${V?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:V?"Al toegevoegd aan deze laag":void 0,disabled:V,children:[V&&m.jsx(gp,{size:14,className:"text-green-500 flex-shrink-0"}),m.jsx("span",{className:"truncate",children:j.name}),m.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:V?"al toegevoegd":`(${j.points.length})`})]},j.id)}),m.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[m.jsx(du,{size:14}),m.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),m.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-purple-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(Qct,{size:20,className:"text-purple-500"}),m.jsx("span",{className:"font-medium",children:"Lagen beheren"})]}),m.jsxs("button",{onClick:M,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(bg,{size:20,className:"text-blue-600"}),m.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]}),m.jsxs("button",{onClick:F,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-yellow-50 text-gray-700 bg-white border-0 outline-none",children:[m.jsx(Gwe,{size:20,className:"text-yellow-600"}),m.jsx("span",{className:"font-medium",children:"Street View"})]})]}),m.jsx("div",{className:"bg-white",children:m.jsxs("button",{onClick:T,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[m.jsx(ai,{size:18}),m.jsx("span",{children:"Annuleren"})]})})]})]})})}function QEt(t){return t}function eSt(t){if(t==null)return QEt;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*r+s,h[1]=(n+=a[1])*i+o;c<u;)h[c]=a[c],++c;return h}}function tSt(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function nSt(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return qoe(t,n)})}:qoe(t,e)}function qoe(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=rSt(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function rSt(t,e){var n=eSt(t.transform),r=t.arcs;function i(u,h){h.length&&h.pop();for(var f=r[u<0?~u:u],g=0,v=f.length;g<v;++g)h.push(n(f[g],g));u<0&&tSt(h,v)}function s(u){return n(u)}function o(u){for(var h=[],f=0,g=u.length;f<g;++f)i(u[f],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":f=s(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(s);break;case"LineString":f=o(u.arcs);break;case"MultiLineString":f=u.arcs.map(o);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(e)}async function YOt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json();return console.log(` Loaded GeoJSON from ${t}`),n}catch(e){throw console.error(`Error loading GeoJSON from ${t}:`,e),e}}async function iSt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json(),r=Object.keys(n.objects)[0],i=nSt(n,n.objects[r]);return console.log(` Loaded and converted TopoJSON from ${t}`),i}catch(e){throw console.error(`Error loading TopoJSON from ${t}:`,e),e}}function sSt(t){return new dL({featureProjection:"EPSG:3857"}).readFeatures(t)}const vq={all:{name:"Alle provincies",bounds:[3.37,50.75,7.21,53.47]},groningen:{name:"Groningen",bounds:[6.2,53.1,7.21,53.47]},friesland:{name:"Friesland",bounds:[5.05,52.85,6.25,53.45]},drenthe:{name:"Drenthe",bounds:[6.1,52.65,7.1,53.15]},overijssel:{name:"Overijssel",bounds:[5.85,52.15,6.9,52.7]},flevoland:{name:"Flevoland",bounds:[5.15,52.25,6,52.65]},gelderland:{name:"Gelderland",bounds:[5,51.75,6.4,52.45]},utrecht:{name:"Utrecht",bounds:[4.85,51.9,5.65,52.25]},"noord-holland":{name:"Noord-Holland",bounds:[4.5,52.2,5.25,52.95]},"zuid-holland":{name:"Zuid-Holland",bounds:[3.85,51.8,4.9,52.35]},zeeland:{name:"Zeeland",bounds:[3.37,51.2,4.3,51.75]},"noord-brabant":{name:"Noord-Brabant",bounds:[4.35,51.25,6,51.85]},limburg:{name:"Limburg",bounds:[5.55,50.75,6.25,51.8]}};function oSt(t,e,n){if(n==="all")return!0;const r=vq[n];if(!r)return!0;const[i,s,o,a]=r.bounds;return t>=i&&t<=o&&e>=s&&e<=a}let EC=null;async function _q(){if(EC)return EC;const t=await iSt("/detectorapp-nl/data/amk_monumenten_full.topojson");return EC=sSt(t),EC}function aSt(t,e,n=50){const r=t.toLowerCase(),i=e.toLowerCase(),s=r.indexOf(i);if(s===-1)return t.substring(0,100)+"...";const o=Math.max(0,s-n),a=Math.min(t.length,s+e.length+n);let l="";return o>0&&(l+="..."),l+=t.substring(o,a),a<t.length&&(l+="..."),l}async function lSt(t,e=50,n="all"){if(!t||t.length<2)return[];const r=await _q(),i=[],o=t.toLowerCase().split(/\s+/).filter(a=>a.length>=2);for(const a of r){const l=(a.get("omschrijving")||"").toLowerCase(),c=(a.get("toponiem")||"").toLowerCase(),u=(a.get("txt_label")||"").toLowerCase();if(o.every(f=>l.includes(f)||c.includes(f)||u.includes(f))){const f=a.getGeometry();if(!f)continue;const g=f.getExtent(),v=ch(g),[x,b]=V2(v,"EPSG:3857","EPSG:4326");if(!oSt(x,b,n))continue;const T=a.get("omschrijving")||"";if(i.push({id:a.get("ID")||a.get("monumentnummer"),monumentnummer:a.get("monumentnummer"),toponiem:a.get("toponiem")||"Onbekend",kwaliteitswaarde:a.get("kwaliteitswaarde")||"",periode:a.get("txt_label")||"",omschrijving:T,matchedText:aSt(T,o[0]),coordinates:[x,b],extent:g}),i.length>=e)break}}return i.sort((a,l)=>{const c={"zeer hoge archeologische waarde":3,"hoge archeologische waarde":2,"archeologische waarde":1};return(c[l.kwaliteitswaarde]||0)-(c[a.kwaliteitswaarde]||0)}),i}async function cSt(t){return(await _q()).find(n=>n.get("monumentnummer")===t)||null}async function uSt(t){const e=await _q(),n=new Set(t);return e.filter(r=>n.has(r.get("monumentnummer")))}const REe=po((t,e)=>({keyword:"",province:"all",isActive:!1,totalCount:0,filteredCount:0,setKeyword:n=>t({keyword:n}),setProvince:n=>t({province:n}),setActive:n=>t({isActive:n}),toggleActive:()=>t(n=>({isActive:!n.isActive})),clearFilter:()=>t({keyword:"",province:"all",isActive:!1}),updateCounts:(n,r)=>t({totalCount:n,filteredCount:r})}));function XOt(t,e,n,r,i,s,o){if(s.length>=2){const l=s.toLowerCase().split(/\s+/).filter(g=>g.length>=2),c=t.toLowerCase(),u=e.toLowerCase(),h=n.toLowerCase();if(!l.every(g=>c.includes(g)||u.includes(g)||h.includes(g)))return!1}if(o!=="all"){const a=vq[o]?.bounds;if(a){const[l,c,u,h]=a;if(r<l||r>u||i<c||i>h)return!1}}return!0}const hSt={Compass:Lwe,TreePalm:wut,Mountain:R2,Waves:Mut,Search:aA,Target:gut,Layers:uc,Grid:Dwe},dSt={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},fSt={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},Koe=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","FAMKE IJzertijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Archeo Onderzoeken","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","Hoogtekaart (WebGL)","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Ruiterpaden","Laarzenpaden","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],pSt=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],mSt=[5.2913,52.1326],gSt=8;function ySt(){const t=Vs(G=>G.setLayerVisibility),e=Es(G=>G.stopTracking),n=REe(G=>G.clearFilter),r=ji(G=>G.map),{presetsPanelOpen:i,togglePresetsPanel:s,closeAllPanels:o}=zr(),{presets:a,applyPreset:l,updatePreset:c,createPreset:u,resetToDefaults:h}=_de(),f=Vs(G=>G.visible),g=Pn(G=>G.presetPanelFontScale),v=Pn(G=>G.setPresetPanelFontScale),x=Pn(G=>G.showFontSliders),b=12*g/100,[T,A]=X.useState(null),[I,P]=X.useState(!1),[M,F]=X.useState(""),C=()=>{o(),Koe.forEach(G=>t(G,!1)),pSt.forEach(G=>{t(G,G==="CartoDB (licht)")}),e(),n(),r&&r.getView().animate({center:Ci(mSt),zoom:gSt,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},N=G=>{l(G),o()},O=(G,U,fe)=>{if(G.stopPropagation(),!confirm(`Preset "${fe}" overschrijven met huidige lagen?`))return;const Re=Object.entries(f).filter(([Be,$e])=>$e&&Koe.includes(Be)).map(([Be])=>Be);c(U,{layers:Re}),A(U),setTimeout(()=>A(null),2e3),console.log(" Lagen opgeslagen naar preset")},j=()=>{M.trim()&&(u(M.trim(),"Layers"),F(""),P(!1))},V=()=>{confirm("Presets terugzetten naar standaard?")&&h()};return m.jsxs(m.Fragment,{children:[m.jsx(kt.button,{onClick:C,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:m.jsx(Wwe,{size:20,className:"text-gray-600"})}),m.jsx(kt.button,{onClick:s,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:i?m.jsx(lL,{size:20,className:"text-blue-600"}):m.jsx(uc,{size:20,className:"text-blue-600"})}),m.jsx(Jn,{children:i&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),m.jsxs(kt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[60px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[240px] backdrop-blur-sm z-[801]",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${b}px`},children:[m.jsx("span",{className:"font-medium text-white",children:"Presets"}),x&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:g,onInput:G=>{v(parseInt(G.target.value))},onChange:G=>v(parseInt(G.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${g}%`}),m.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),m.jsx("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:a.map(G=>{const U=hSt[G.icon]||uc,fe=dSt[G.icon]||"text-blue-600",Re=fSt[G.icon]||"hover:bg-blue-50",Be=T===G.id;return m.jsxs("button",{onClick:()=>N(G.id),className:`w-full h-8 flex items-center gap-1.5 px-2 ${Re} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden ${Be?"bg-green-50":""}`,style:{fontSize:`${b}px`},children:[m.jsx(U,{size:14,className:`${fe} flex-shrink-0`}),m.jsx("span",{className:"text-gray-700 truncate flex-1",children:G.name}),Be?m.jsx("span",{className:"p-1 flex-shrink-0",children:m.jsx(gp,{size:14,className:"text-green-500"})}):m.jsx("span",{onClick:$e=>O($e,G.id,G.name),className:"p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:m.jsx(Hwe,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},G.id)})}),m.jsx("div",{className:"border-t border-gray-200 px-2 py-1.5",children:I?m.jsxs("div",{className:"flex gap-1",children:[m.jsx("input",{type:"text",value:M,onChange:G=>F(G.target.value),onKeyDown:G=>{G.key==="Enter"&&j(),G.key==="Escape"&&P(!1)},placeholder:"Naam preset...",autoFocus:!0,className:"flex-1 px-2 py-1 text-sm rounded bg-gray-50 border-0 outline-none focus:ring-1 focus:ring-blue-400",style:{fontSize:`${b}px`}}),m.jsx("button",{onClick:j,disabled:!M.trim(),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm disabled:opacity-50 border-0 outline-none",children:m.jsx(gp,{size:14})})]}):m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("button",{onClick:()=>P(!0),className:"h-8 flex items-center gap-1.5 px-2 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",style:{fontSize:`${b}px`},children:[m.jsx(du,{size:14}),m.jsx("span",{className:"text-gray-600",children:"Voeg preset toe"})]}),m.jsx("button",{onClick:V,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors border-0 outline-none",title:"Herstel standaard",children:m.jsx(Bct,{size:14})})]})})]})]})})]})}function vSt(){const t=ji(o=>o.map),[e,n]=X.useState(0),[r,i]=X.useState(!1);X.useEffect(()=>{if(!t)return;const o=t.getView(),a=()=>{const l=o.getRotation(),c=l*180/Math.PI;n(c),i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[t]);const s=()=>{t&&t.getView().animate({rotation:0,duration:300})};return m.jsx(Jn,{children:r&&m.jsx(kt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:m.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[m.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),m.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),m.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const _St=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"AMK Monumenten",color:"purple",default:.45},{name:"AMK Romeins",color:"red",default:.6},{name:"AMK Steentijd",color:"amber",default:.6},{name:"AMK Vroege ME",color:"green",default:.6},{name:"AMK Late ME",color:"blue",default:.6},{name:"AMK Overig",color:"purple",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],xSt={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function wSt(){const[t,e]=X.useState(!1),[n,r]=X.useState(!1),i=Vs(u=>u.visible),s=Vs(u=>u.opacity),o=Vs(u=>u.setLayerOpacity),a=_St.filter(u=>i[u.name]);if(a.length===0)return null;const l=n?a:a.slice(0,3),c=a.length>3;return m.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[m.jsxs(kt.button,{onClick:()=>e(!t),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:t?"Sluit opacity sliders":"Open opacity sliders",children:[m.jsx(sz,{size:22,strokeWidth:2,className:"text-gray-500"}),a.length>0&&m.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:a.length})]}),m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),m.jsxs(kt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[220px] max-h-[60vh] flex flex-col",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500",children:[m.jsx(sz,{size:14,className:"text-white"}),m.jsx("span",{className:"font-medium text-white text-xs",children:"Transparantie"})]}),m.jsxs("div",{className:"p-3 overflow-y-auto flex-1",children:[m.jsx("div",{className:"space-y-3",children:l.map(u=>{const h=s[u.name]??u.default;return m.jsxs("div",{children:[m.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:u.name,children:u.name}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"range",min:"0",max:"100",value:h*100,onChange:f=>o(u.name,parseInt(f.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${xSt[u.color]}`}),m.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(h*100),"%"]})]})]},u.name)})}),c&&m.jsx("button",{onClick:()=>r(!n),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:n?m.jsxs(m.Fragment,{children:[m.jsx(lL,{size:14}),"Minder tonen"]}):m.jsxs(m.Fragment,{children:[m.jsx(mb,{size:14}),a.length-3," meer..."]})})]})]})]})})]})}function bSt(){const t=ji(M=>M.map),e=Pn(M=>M.showWeatherButton),[n,r]=X.useState(!1),[i,s]=X.useState(""),[o,a]=X.useState([]),[l,c]=X.useState(!1),[u,h]=X.useState(!1),f=X.useRef(null),g=X.useRef(null),v=X.useRef();X.useEffect(()=>{n&&f.current&&f.current.focus()},[n]),X.useEffect(()=>{if(!n)return;const M=F=>{g.current&&!g.current.contains(F.target)&&x()};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[n]),X.useEffect(()=>{if(!n)return;const M=F=>{F.key==="Escape"&&x()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n]),X.useEffect(()=>{if(v.current&&clearTimeout(v.current),i.length<2){a([]);return}return v.current=window.setTimeout(async()=>{h(!0);try{const F=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();F.response?.docs&&a(F.response.docs)}catch(M){console.error("Search error:",M),a([])}finally{h(!1)}},300),()=>{v.current&&clearTimeout(v.current)}},[i]);const x=()=>{r(!1),s(""),a([]),c(!1)},b=async M=>{try{const C=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(M)}`)).json();if(C.response?.docs?.[0]?.centroide_ll){const O=C.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(O)return{lng:parseFloat(O[1]),lat:parseFloat(O[2])}}}catch(F){console.error("Lookup error:",F)}return null},T=async M=>{if(!t)return;const F=await b(M.id);F&&t.getView().animate({center:Ci([F.lng,F.lat]),zoom:16,duration:1e3}),x()},A=async(M,F)=>{F.stopPropagation();const C=await b(M.id);if(C){const N=`https://www.google.com/maps?q=${C.lat},${C.lng}`;window.open(N,"_blank")}x()},I={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};if(!n)return m.jsx(kt.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:I,onClick:()=>r(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:m.jsx(aA,{size:22,className:"text-gray-600"})});const P=e?"220px":"52px";return m.jsxs("div",{ref:g,className:"fixed right-14 z-[850]",style:{...I,left:P},children:[m.jsxs(kt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[m.jsx(aA,{size:18,className:"search-icon"}),m.jsx("input",{ref:f,type:"text",value:i,onChange:M=>{s(M.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),m.jsx("button",{onClick:x,className:"search-clear",title:"Sluiten",children:m.jsx(ai,{size:18})})]}),m.jsx(Jn,{children:l&&o.length>0&&m.jsx(kt.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:o.map(M=>m.jsxs("li",{className:"search-result-item",children:[m.jsx("div",{className:"search-result-content",onClick:()=>T(M),children:m.jsx("span",{className:"search-result-text",children:M.weergavenaam})}),m.jsx("button",{className:"search-navigate-btn",onClick:F=>A(M,F),title:"Open in Google Maps",children:m.jsx(bg,{size:20})})]},M.id))})}),l&&u&&m.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function ESt(){const t=ji(o=>o.map),[e,n]=X.useState(!1);X.useEffect(()=>{if(!t)return;const o=t.getView(),a=()=>{const l=o.getRotation();n(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[t]);const r=()=>{if(!t)return;const o=t.getView(),a=o.getZoom();a!==void 0&&o.animate({zoom:a+1,duration:200})},i=()=>{if(!t)return;const o=t.getView(),a=o.getZoom();a!==void 0&&o.animate({zoom:a-1,duration:200})},s=e?"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 112px)":"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)";return m.jsxs(kt.div,{className:"fixed right-2 z-[800] flex flex-col gap-1",style:{top:s},animate:{top:s},transition:{duration:.2},children:[m.jsx(kt.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:m.jsx(du,{size:18,className:"text-gray-600"})}),m.jsx(kt.button,{className:"w-9 h-9 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:m.jsx(zwe,{size:18,className:"text-gray-600"})})]})}const SSt="detector2024",Tz="detectorapp-auth";function TSt({children:t}){const[e,n]=X.useState(!1),[r,i]=X.useState(""),[s,o]=X.useState(!1),[a,l]=X.useState(""),[c,u]=X.useState(!0);X.useEffect(()=>{localStorage.getItem(Tz)==="authenticated"&&n(!0),u(!1)},[]);const h=f=>{f.preventDefault(),l(""),r===SSt?(localStorage.setItem(Tz,"authenticated"),n(!0)):(l("Onjuist wachtwoord"),i(""))};return c?m.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:m.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?m.jsx(m.Fragment,{children:t}):m.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:m.jsxs(kt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(rz,{size:32,className:"text-blue-600"})}),m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),m.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),m.jsxs("form",{onSubmit:h,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:s?"text":"password",value:r,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?m.jsx(SN,{size:20}):m.jsx(TN,{size:20})})]})]}),a&&m.jsx(kt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:a}),m.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),m.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function kSt(){localStorage.removeItem(Tz),window.location.reload()}function ASt({isOpen:t,onClose:e}){const n=lh(l=>l.vondsten),r={total:n.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:n.slice(-5).reverse()};let i=0,s=0;n.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const o=l=>Object.entries(l).sort((c,u)=>u[1]-c[1]),a=l=>Math.max(...Object.values(l),1);return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Mwe,{size:18}),m.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),m.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:m.jsx(ai,{size:18})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:n.length===0?m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(Sl,{size:48,className:"mx-auto mb-3 opacity-30"}),m.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),m.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsx(Xj,{icon:m.jsx(Sl,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),m.jsx(Xj,{icon:m.jsx(B1,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),m.jsx(Xj,{icon:m.jsx(Yct,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),m.jsx(SC,{title:"Per Type",data:o(r.byType),max:a(r.byType),color:"bg-orange-500"}),m.jsx(SC,{title:"Per Periode",data:o(r.byPeriod),max:a(r.byPeriod),color:"bg-amber-500"}),m.jsx(SC,{title:"Per Materiaal",data:o(r.byMaterial),max:a(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&m.jsx(SC,{title:"Per Conditie",data:o(r.byCondition),max:a(r.byCondition),color:"bg-green-500"}),m.jsxs("div",{children:[m.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[m.jsx(SH,{size:14}),"Recente Vondsten"]}),m.jsx("div",{className:"space-y-2",children:r.recent.map(l=>m.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),m.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),m.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),m.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function Xj({icon:t,value:e,label:n,color:r}){return m.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[m.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:t}),m.jsx("div",{className:"text-xl font-bold",children:e}),m.jsx("div",{className:"text-xs opacity-70",children:n})]})}function SC({title:t,data:e,max:n,color:r}){return e.length===0?null:m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:t}),m.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),m.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:m.jsx(kt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/n*100}%`},transition:{duration:.5,ease:"easeOut"}})}),m.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function ISt(t){const{type:e,coordinates:n}=t,r=a=>Ci(a),i=a=>a.map(r),s=a=>a.map(i),o=a=>a.map(s);switch(e){case"Point":return new ts(r(n));case"LineString":return new Qi(i(n));case"Polygon":return new bl(s(n));case"MultiPoint":return new Zg(i(n));case"MultiLineString":return new uh(s(n));case"MultiPolygon":return new lp(o(n));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function PSt(t,e,n){const r=t.color,i=10,s=5,o=14;let a=i;if(n>50?a=s:n>10?a=Math.max(s,i-(n-10)/10):n<2&&(a=o),e==="Point"||e==="MultiPoint")return new In({image:new uo({radius:a,fill:new sr({color:r}),stroke:new Bn({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new In({stroke:new Bn({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=RSt(r,.3);return new In({fill:new sr({color:l}),stroke:new Bn({color:r,width:2})})}return new In({image:new uo({radius:a,fill:new sr({color:r}),stroke:new Bn({color:"#ffffff",width:2})})})}function RSt(t,e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){const r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return t}function CSt(){const t=ji(r=>r.map),e=QA(r=>r.layers),n=X.useRef(new Map);return X.useEffect(()=>{if(!t)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new fu;i.features.features.forEach((a,l)=>{if(!a.geometry)return;const c=ISt(a.geometry);if(!c)return;const u=new Gr({geometry:c,...a.properties,layerType:"importedLayer",layerId:i.id,layerName:i.name,layerColor:i.color,featureIndex:l});u.setStyle((h,f)=>PSt(i,a.geometry.type,f)),s.addFeature(u)});const o=n.current.get(i.id);if(o)o.setSource(s),o.setVisible(i.visible),o.setOpacity(i.opacity);else{const a=new yh({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});t.addLayer(a),n.current.set(i.id,a)}}),n.current.forEach((i,s)=>{r.has(s)||(t.removeLayer(i),n.current.delete(s))})},[t,e]),X.useEffect(()=>()=>{t&&(n.current.forEach(r=>{t.removeLayer(r)}),n.current.clear())},[t]),null}ar.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Y2e(ar);function MSt(t){if(!t||t.length<2)return"unknown";const[e,n]=t;return e>=7e3&&e<=3e5&&n>=289e3&&n<=629e3?"RD":Math.abs(e)<=180&&Math.abs(n)<=90?"WGS84":"unknown"}function NSt(t){const[e,n]=t;return ar("EPSG:28992","EPSG:4326",[e,n])}function CEe(t,e){return typeof t[0]=="number"?e(t):t.map(n=>CEe(n,e))}function OSt(t){const e=t.coordinates;return!e||Array.isArray(e)&&e.length===0?null:t.type==="Point"?e:t.type==="LineString"||t.type==="MultiPoint"?e[0]:t.type==="Polygon"||t.type==="MultiLineString"?e[0]?.[0]:t.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function LSt(t){const e=[],n=[];try{const r=await t.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((c,u)=>({type:"Feature",geometry:c,properties:{id:u}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&n.push("Geen features gevonden in bestand");let o="unknown",a=!1;if(s.length>0&&s[0].geometry){const c=OSt(s[0].geometry);c&&(o=MSt(c))}o==="RD"&&(n.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),a=!0,s=s.map(c=>{if(!c.geometry)return c;const u=CEe(c.geometry.coordinates,NSt);return{...c,geometry:{...c.geometry,coordinates:u}}}),o="WGS84");const l=[...new Set(s.filter(c=>c.geometry).map(c=>c.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:n,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:o,transformed:a}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function DSt(t){const e=[],n=[];try{const r=await t.text(),s=new T0t({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in KML bestand");const l=new dL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Feature ${h+1}`,v=f.description||f.Description||"";return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:v}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function $St(t){const e=[],n=[];try{const r=await t.text(),s=new Fgt().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in GPX bestand");const l=new dL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Waypoint ${h+1}`,v=f.desc||f.description||"",x=f.time||null,b=f.ele||null;return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:v,time:x,elevation:b}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return c.includes("LineString")&&n.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function xq(t){switch(t.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function jSt(){return".geojson,.json,.kml,.gpx"}function wq(){return"GeoJSON, KML (Google My Maps), GPX"}async function FSt(t){switch(xq(t.name)){case"geojson":return LSt(t);case"kml":return DSt(t);case"gpx":return $St(t);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${t.name}. Ondersteunde formaten: ${wq()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function VSt(t){return t.size>10485760?{valid:!1,error:`Bestand te groot (${(t.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:xq(t.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${wq()}`}:t.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function zSt({isOpen:t,onClose:e}){const n=QA(N=>N.addLayer),r=X.useRef(null),[i,s]=X.useState("idle"),[o,a]=X.useState(null),[l,c]=X.useState(null),[u,h]=X.useState(""),[f,g]=X.useState(null),[v,x]=X.useState(!1),b=X.useCallback(()=>{s("idle"),a(null),c(null),h(""),g(null),r.current&&(r.current.value="")},[]),T=X.useCallback(()=>{b(),e()},[b,e]),A=X.useCallback(async N=>{const O=VSt(N);if(!O.valid){g(O.error||"Ongeldig bestand"),s("error");return}a(N),s("parsing"),g(null);const j=N.name.replace(/\.[^/.]+$/,"");h(j);try{const V=await FSt(N);if(!V.success){g(V.errors.join(`
`)),s("error");return}if(V.features.features.length===0){g("Geen features gevonden in het bestand"),s("error");return}c(V),s("preview")}catch(V){g(V instanceof Error?V.message:"Onbekende fout bij parsen"),s("error")}},[]),I=X.useCallback(N=>{const O=N.target.files?.[0];O&&A(O)},[A]),P=X.useCallback(N=>{N.preventDefault(),x(!0)},[]),M=X.useCallback(N=>{N.preventDefault(),x(!1)},[]),F=X.useCallback(N=>{N.preventDefault(),x(!1);const O=N.dataTransfer.files?.[0];O&&A(O)},[A]),C=X.useCallback(()=>{if(!l||!u.trim())return;const N=o?xq(o.name):"geojson";n({name:u.trim(),type:N==="unsupported"?"geojson":N,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:o?.name||"unknown"}),T()},[l,u,o,n,T]);return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(NI,{size:18}),m.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),m.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:m.jsx(ai,{size:18})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${v?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:P,onDragLeave:M,onDrop:F,children:[m.jsx(kH,{size:40,className:"mx-auto text-gray-400 mb-3"}),m.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),m.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),m.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),m.jsx("input",{ref:r,type:"file",accept:jSt(),onChange:I,className:"hidden"})]}),m.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[m.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),m.jsx("p",{children:wq()})]})]}),i==="parsing"&&m.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[m.jsx(cL,{size:40,className:"text-purple-500 animate-spin mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),m.jsx("p",{className:"text-gray-400 text-sm",children:o?.name})]}),i==="error"&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[m.jsx(Owe,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),m.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:f})]})]}),m.jsx("button",{onClick:b,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[m.jsx(klt,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),m.jsx("p",{className:"text-sm text-green-600",children:o?.name})]})]}),l.warnings.length>0&&m.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[m.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),m.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((N,O)=>m.jsx("li",{children:N},O))})]}),m.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Features:"}),m.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-gray-500",children:"Types:"}),m.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),m.jsx("input",{type:"text",value:u,onChange:N=>h(N.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&m.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[m.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),m.jsx("button",{onClick:C,disabled:!u.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function USt(){const{user:t,loading:e,error:n,signInWithGoogle:r,logout:i,initAuth:s}=nO();return X.useEffect(()=>{s()},[s]),e?m.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[m.jsx(yp,{size:16,className:"animate-pulse"}),m.jsx("span",{className:"text-sm",children:"Laden..."})]}):t?m.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[t.photoURL?m.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:m.jsx(RH,{size:16,className:"text-green-600"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:t.displayName||t.email}),m.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[m.jsx(yp,{size:12}),"Cloud sync actief"]})]}),m.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:m.jsx(IH,{size:16})})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[m.jsx(Nlt,{size:16}),m.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),m.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[m.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),m.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),n&&m.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:n})]})}const GSt="https://forms.gle/R5LCk11Bzu5XrkBj8";function BSt(){const{settingsPanelOpen:t,toggleSettingsPanel:e,vondstDashboardOpen:n,toggleVondstDashboard:r,openLayerManagerModal:i}=zr(),s=Pn(),{presets:o,createPreset:a,deletePreset:l,updatePreset:c}=_de(),u=lh(ne=>ne.vondsten),h=QA(ne=>ne.layers),{layers:f,updateLayer:g}=co(),{devMode:v,setDevMode:x,tier:b}=NG(),[T,A]=X.useState(""),[I,P]=X.useState(!1),[M,F]=X.useState(!1),[C,N]=X.useState(null),[O,j]=X.useState(""),[V,G]=X.useState(null),[U,fe]=X.useState(""),[Re,Be]=X.useState("algemeen"),$e=14*s.fontScale/100,pe=()=>{T.trim()&&(a(T.trim(),"Layers"),A(""),P(!1))},De=(ne,ie)=>{N(ne),j(ie)},Me=ne=>{O.trim()&&(c(ne,{name:O.trim()}),console.log(` Preset hernoemd naar "${O.trim()}"`)),N(null),j("")},Q=()=>{N(null),j("")},W=[{id:"algemeen",label:"Algemeen",icon:m.jsx(out,{size:14})},{id:"lagen",label:"Lagen",icon:m.jsx(uc,{size:14})},{id:"vondsten",label:"Vondsten",icon:m.jsx(Sl,{size:14})}];return m.jsxs(m.Fragment,{children:[m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${$e}px`},children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(iz,{size:18,className:"text-white"}),m.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[s.showFontSliders&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:ne=>{s.setFontScale(parseInt(ne.target.value))},onChange:ne=>s.setFontScale(parseInt(ne.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),m.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),m.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:m.jsx(ai,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),m.jsx("div",{className:"flex border-b border-gray-200",children:W.map(ne=>m.jsxs("button",{onClick:()=>Be(ne.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${Re===ne.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[ne.icon,ne.label]},ne.id))}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${$e}px`},children:[Re==="algemeen"&&m.jsxs(m.Fragment,{children:[m.jsx(zh,{title:"Account",icon:m.jsx(RH,{size:16}),children:m.jsx(USt,{})}),m.jsxs(zh,{title:"Kaart",icon:m.jsx(uL,{size:16}),children:[m.jsx(WSt,{label:"Standaard achtergrond",children:m.jsxs("select",{value:s.defaultBackground,onChange:ne=>s.setDefaultBackground(ne.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[m.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),m.jsx("option",{value:"OpenStreetMap",children:"OSM"}),m.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),m.jsx(z0,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),m.jsxs(zh,{title:"GPS",icon:m.jsx(yb,{size:16}),children:[m.jsx(z0,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),m.jsx(z0,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),m.jsxs(zh,{title:"Feedback",icon:m.jsx(lut,{size:16}),children:[m.jsx(z0,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback}),m.jsx(z0,{label:"Spraakfeedback vondsten",checked:s.voiceFeedbackEnabled,onChange:s.setVoiceFeedbackEnabled}),s.voiceFeedbackEnabled&&m.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:[m.jsx(Rut,{size:12,className:"inline mr-1"}),"Spreekt vondst info uit bij toevoegen"]})]}),m.jsxs(zh,{title:"Weer",icon:m.jsx(yp,{size:16}),children:[m.jsx(z0,{label:"Weerwidget tonen",checked:s.showWeatherButton,onChange:s.setShowWeatherButton}),m.jsx("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:"Actueel weer, voorspelling en buienradar"})]}),m.jsxs(zh,{title:"Development",icon:m.jsx(Flt,{size:16}),children:[m.jsx(z0,{label:"Dev Mode (alles ontgrendeld)",checked:v,onChange:x}),m.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",m.jsx("span",{className:"font-medium text-blue-600",children:b}),v&&m.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),Re==="lagen"&&m.jsxs(m.Fragment,{children:[m.jsx(zh,{title:"Mijn lagen",icon:m.jsx(uc,{size:16}),isOwn:!0,children:m.jsxs("div",{className:"space-y-1",children:[f.filter(ne=>!ne.archived).length===0?m.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):f.filter(ne=>!ne.archived).map(ne=>m.jsx("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:V===ne.id?m.jsx("input",{type:"text",value:U,onChange:ie=>fe(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"?(U.trim()&&g(ne.id,{name:U.trim()}),G(null)):ie.key==="Escape"&&G(null)},onBlur:()=>{U.trim()&&g(ne.id,{name:U.trim()}),G(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:ne.name}),m.jsxs("span",{className:"text-xs text-gray-400",children:[ne.points.length," punten"]}),m.jsx("button",{onClick:()=>{G(ne.id),fe(ne.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:m.jsx(C2,{size:12})})]})},ne.id)),m.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[m.jsx(iz,{size:14}),m.jsx("span",{children:"Lagen beheren"})]})]})}),m.jsx(zh,{title:"Lagen importeren",icon:m.jsx(NI,{size:16}),children:m.jsxs("div",{className:"space-y-1",children:[h.length>0&&m.jsxs(m.Fragment,{children:[h.map(ne=>m.jsx(qwe,{layer:ne},ne.id)),m.jsx("div",{className:"border-t border-gray-100 my-2"})]}),m.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-2 py-1.5 text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[m.jsx(du,{size:14}),m.jsx("span",{children:"Nieuwe laag importeren"})]}),m.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),m.jsx(zh,{title:"Presets",icon:m.jsx(uc,{size:16}),children:m.jsxs("div",{className:"space-y-2",children:[o.map(ne=>m.jsx("div",{className:"flex items-center justify-between py-1",children:C===ne.id?m.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[m.jsx("input",{type:"text",value:O,onChange:ie=>j(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&Me(ne.id),ie.key==="Escape"&&Q()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),m.jsx("button",{onClick:()=>Me(ne.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),m.jsx("button",{onClick:Q,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[ne.name,ne.isBuiltIn&&m.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),m.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",ne.layers.length," lagen)"]})]}),!ne.isBuiltIn&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:()=>De(ne.id,ne.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:m.jsx(C2,{size:14})}),m.jsx("button",{onClick:()=>l(ne.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:m.jsx(zd,{size:14})})]})]})},ne.id)),I?m.jsxs("div",{className:"flex gap-2 mt-2",children:[m.jsx("input",{type:"text",value:T,onChange:ne=>A(ne.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:ne=>ne.key==="Enter"&&pe(),autoFocus:!0}),m.jsx("button",{onClick:pe,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),m.jsx("button",{onClick:()=>P(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):m.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[m.jsx(du,{size:14}),m.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),Re==="vondsten"&&m.jsx(m.Fragment,{children:m.jsxs(zh,{title:"Vondsten",icon:m.jsx(Sl,{size:16}),isOwn:!0,children:[m.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),m.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[m.jsx(Mwe,{size:14}),m.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),m.jsx(HSt,{})]})})]}),m.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${$e}px`},children:[m.jsxs("a",{href:GSt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[m.jsx(Cwe,{size:16}),m.jsx("span",{children:"Meld een bug"})]}),m.jsxs("button",{onClick:kSt,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[m.jsx(IH,{size:16}),m.jsx("span",{children:"Uitloggen"})]}),m.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),m.jsx(ASt,{isOpen:n,onClose:r}),m.jsx(zSt,{isOpen:M,onClose:()=>F(!1)})]})}function zh({title:t,icon:e,children:n,isOwn:r}){return m.jsxs("section",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[m.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),m.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:t})]}),m.jsx("div",{className:"space-y-2",children:n})]})}function WSt({label:t,children:e}){return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),e]})}function z0({label:t,checked:e,onChange:n}){return m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),m.jsx("button",{onClick:()=>n(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function HSt(){const[t,e]=X.useState(!1),{vondsten:n,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:o,exportAsKML:a}=lh(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:o,desc:"GPS apparaten"},{label:"KML",action:a,desc:"Google Earth"}],c=u=>{u(),e(!1)};return n.length===0?m.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[m.jsx(EN,{size:14}),m.jsx("span",{children:"Geen vondsten om te exporteren"})]}):m.jsxs("div",{className:"relative mt-2",children:[m.jsxs("button",{onClick:()=>e(!t),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(EN,{size:14}),m.jsxs("span",{children:["Exporteer vondsten (",n.length,")"]})]}),m.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),t&&m.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((u,h)=>m.jsxs("button",{onClick:()=>c(u.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[m.jsx("span",{className:"text-gray-700",children:u.label}),m.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:u.desc})]},h))})]})}const e5="2.32.31";function qSt({size:t=18}){return m.jsxs("svg",{viewBox:"0 0 24 24",width:t,height:t,children:[m.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),m.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),m.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),m.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function KSt(){const[t,e]=X.useState(!1),{user:n,loading:r,signInWithGoogle:i,logout:s}=nO(),{toggleInfoPanel:o,toggleSettingsPanel:a,toggleMonumentSearch:l}=zr(),c=Pn(U=>U.menuFontScale),u=Pn(U=>U.setMenuFontScale),h=Pn(U=>U.showFontSliders),f=Pn(U=>U.setShowFontSliders),g=Pn(U=>U.showVondstButton),v=Pn(U=>U.setShowVondstButton),x=Pn(U=>U.showRouteRecordButton),b=Pn(U=>U.setShowRouteRecordButton),T=Pn(U=>U.showCustomPointLayers),A=Pn(U=>U.setShowCustomPointLayers),I=Pn(U=>U.showWeatherButton),P=Pn(U=>U.setShowWeatherButton),M={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},F=()=>e(!1),C=()=>{F(),o()},N=()=>{F(),a()},O=()=>{F(),l()},j=()=>{F(),i()},V=()=>{F(),s()},G=13*c/100;return m.jsxs(m.Fragment,{children:[m.jsx(kt.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${t?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:M,onClick:()=>e(!t),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:t?m.jsx(ai,{size:22,className:"text-white"}):m.jsx(Vwe,{size:22,className:"text-gray-600"})}),m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:F}),m.jsxs(kt.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15},className:"fixed right-2 z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)",fontSize:`${G}px`},children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[m.jsx("span",{className:"font-medium text-white",style:{fontSize:`${G}px`},children:"Menu"}),h&&m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:c,onInput:U=>u(parseInt(U.target.value)),onChange:U=>u(parseInt(U.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${c}%`}),m.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),r?m.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:m.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):n?m.jsx("div",{className:"px-3 py-3 border-b border-gray-100",children:m.jsxs("div",{className:"flex items-center gap-3",children:[n.photoURL?m.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:m.jsx(RH,{size:16,className:"text-white"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:n.displayName||"Gebruiker"}),m.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),m.jsx("button",{onClick:V,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:m.jsx(IH,{size:16})})]})}):m.jsxs("button",{onClick:j,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[m.jsx(qSt,{size:18}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),m.jsxs("div",{className:"py-1",children:[m.jsxs("button",{onClick:C,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[m.jsx(AH,{size:18,className:"text-blue-500"}),m.jsx("span",{children:"Info & handleiding"})]}),m.jsxs("button",{onClick:O,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-purple-50",style:{fontSize:"0.95em"},children:[m.jsx(jwe,{size:18,className:"text-purple-500"}),m.jsx("span",{children:"Zoek in monumenten"})]})]}),m.jsxs("div",{className:"py-1 border-t border-gray-100",children:[m.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(Sl,{size:18,className:"text-orange-500"}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Vondst knop"})]}),m.jsx("button",{onClick:()=>v(!g),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${g?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${g?"left-[22px]":"left-0.5"}`})})]}),m.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(kN,{size:18,className:"text-green-500"}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Route knop"})]}),m.jsx("button",{onClick:()=>b(!x),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${x?"bg-gradient-to-r from-green-500 to-green-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${x?"left-[22px]":"left-0.5"}`})})]}),m.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(yp,{size:18,className:"text-cyan-500"}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Weerwidget"})]}),m.jsx("button",{onClick:()=>P(!I),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${I?"bg-gradient-to-r from-cyan-500 to-cyan-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${I?"left-[22px]":"left-0.5"}`})})]}),m.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(uc,{size:18,className:"text-amber-500"}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Mijn lagen"})]}),m.jsx("button",{onClick:()=>A(!T),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${T?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${T?"left-[22px]":"left-0.5"}`})})]}),m.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(PH,{size:18,className:"text-purple-500"}),m.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekstgrootte"})]}),m.jsx("button",{onClick:()=>f(!h),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${h?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gray-300"}`,children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${h?"left-[22px]":"left-0.5"}`})})]})]}),m.jsx("div",{className:"mt-auto border-t border-gray-100",children:m.jsxs("button",{onClick:N,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[m.jsx(iz,{size:18,className:"text-gray-500"}),m.jsx("span",{children:"Instellingen"})]})}),m.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:["DetectorApp NL v",e5]})]})]})})]})}const YSt="https://forms.gle/R5LCk11Bzu5XrkBj8";function XSt(){const{infoPanelOpen:t,toggleInfoPanel:e}=zr(),[n,r]=X.useState("info"),i=[{id:"info",label:"Info",icon:m.jsx(AH,{size:14})},{id:"functies",label:"Functies",icon:m.jsx(kH,{size:14})},{id:"handleiding",label:"Handleiding",icon:m.jsx(Rwe,{size:14})}];return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[m.jsxs("span",{className:"font-medium text-white",children:["DetectorApp NL v",e5]}),m.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:m.jsx(ai,{size:18,className:"text-white",strokeWidth:2.5})})]}),m.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>m.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${n===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[n==="info"&&m.jsx(ZSt,{}),n==="functies"&&m.jsx(JSt,{}),n==="handleiding"&&m.jsx(QSt,{}),m.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[m.jsxs("a",{href:YSt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[m.jsx(Cwe,{size:14}),m.jsx("span",{className:"text-sm",children:"Meld een bug of geef feedback"})]}),m.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["DetectorApp NL v",e5," - Gratis en zonder tracking"]})]})]})]})]})})}function ZSt(){return m.jsxs(m.Fragment,{children:[m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),m.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d gratis kaartapplicatie voor metaaldetectie, fossielen zoeken en archeologische verkenning in Nederland. Met 70+ kaartlagen, GPS tracking met richtingspijl, eigen lagen, cloud sync en uitgebreid vondstenbeheer."})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),m.jsxs("ul",{className:"space-y-2 text-gray-600",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"AMK Monumenten, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen, Archeo Onderzoeken"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN Hoogtekaarten, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen, Gewaspercelen"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Terpen, Parken, Kringloopwinkels, Musea, Speeltuinen, Strandjes"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Itiner-E / Wetenschappelijk"})," (CC BY 4.0)",m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Mindat.org"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Mineralen hotspots en vindplaatsen"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Paleontica / Fossielen data"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Fossiel hotspots en vindplaatsen"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Map5.nl / Kadaster"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Provinciale data"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),m.jsxs("li",{children:[m.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),m.jsx("br",{}),m.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data, Expert advies, Bufferlagen"})]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy & Opslag"}),m.jsxs("div",{className:"text-gray-600 space-y-2",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Volledig anoniem mogelijk:"})," Je kunt deze app gebruiken zonder enige registratie of login. Al je data blijft dan 100% op je eigen apparaat."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Geen tracking:"})," Deze app verzamelt geen analytics, cookies, gebruiksstatistieken of persoonlijke gegevens. Er is geen server die je gedrag registreert."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Locatiegegevens:"})," Je GPS-positie wordt alleen gebruikt om je locatie op de kaart te tonen. Deze wordt niet opgeslagen of gedeeld met derden."]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Google Login - Wat betekent het?"}),m.jsxs("div",{className:"text-gray-600 space-y-2",children:[m.jsx("p",{className:"font-medium text-green-700",children:" Google login is volledig optioneel"}),m.jsx("p",{children:m.jsx("strong",{children:"Wat wordt gesynchroniseerd:"})}),m.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[m.jsx("li",{children:"Je eigen aangemaakte lagen (Mijn Lagen)"}),m.jsx("li",{children:"Je vondsten registraties"}),m.jsx("li",{children:"Je preset-instellingen"})]}),m.jsx("p",{children:m.jsx("strong",{children:"Wat NIET wordt gedeeld:"})}),m.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[m.jsx("li",{children:"Je GPS-locatie wordt niet opgeslagen in de cloud"}),m.jsx("li",{children:"Je zoekgeschiedenis wordt niet bewaard"}),m.jsx("li",{children:"Welke kaartlagen je bekijkt wordt niet geregistreerd"}),m.jsx("li",{children:"Niemand anders kan je data zien - alleen jij"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Waarom inloggen?"})," Alleen voor synchronisatie tussen apparaten (telefoon/tablet/PC) en als backup voor je vondsten."]}),m.jsx("p",{className:"text-xs text-gray-500 italic",children:"Tip: Gebruik de app gerust zonder login als je privacy belangrijker vindt dan synchronisatie. Alle functies werken ook offline."})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zonder login (anoniem)"}),m.jsxs("div",{className:"text-gray-600 space-y-2",children:[m.jsx("p",{className:"font-medium text-blue-700",children:" 95% van de functies werkt zonder login"}),m.jsx("p",{children:m.jsx("strong",{children:"Beschikbaar zonder login:"})}),m.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[m.jsx("li",{children:"Alle 70+ kaartlagen bekijken"}),m.jsx("li",{children:"GPS tracking en navigatie"}),m.jsx("li",{children:"Vondsten registreren (lokaal opgeslagen)"}),m.jsx("li",{children:"Eigen lagen aanmaken (lokaal opgeslagen)"}),m.jsx("li",{children:"Export naar Excel/CSV/GeoJSON/GPX/KML"}),m.jsx("li",{children:"Lagen importeren"}),m.jsx("li",{children:"Alle presets en instellingen"})]}),m.jsx("p",{children:m.jsx("strong",{children:"Alleen met login:"})}),m.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[m.jsx("li",{children:"Synchronisatie tussen apparaten"}),m.jsx("li",{children:"Cloud backup van je vondsten"})]})]})]})]})}function JSt(){return m.jsxs(m.Fragment,{children:[m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(uL,{size:16,className:"text-blue-600"}),"Kaartlagen (70+)"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Archeo Onderzoeken, IKAW, Essen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Romeins:"})," Romeinse wegen, Romeinse Forten met historische info, Limesweg"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Erfgoed:"})," Rijksmonumenten, Kastelen, Runes, Religieus Erfgoed"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Percelen:"})," Gewaspercelen (met bouwplantoelichting), Kadastrale Grenzen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes, Wandelroutes"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"UIKAV:"})," Uiterwaard data, Expert advies, Vlakken, Punten, Bufferlagen"]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(lct,{size:16,className:"text-purple-600"}),"Mineralen & Fossielen"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Mineralen hotspots:"})," Vindplaatsen uit Mindat.org met mineralenlijst"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Goudrivieren:"})," Bekende locaties voor goud zoeken"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Fossiel hotspots:"})," Vindplaatsen met fossieltypen en periodes"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Premium lagen:"})," Gedetailleerde data (beschikbaar met account)"]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(tct,{size:16,className:"text-orange-600"}),"Mijn Lagen"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Eigen lagen:"})," Maak lagen voor vakantie, projecten, etc."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Toevoegen:"})," Tik op + in popup om monument/locatie aan laag toe te voegen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Polygonen:"})," Hele monumentgebieden worden opgeslagen, niet alleen een punt"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Originele info:"})," Popup content blijft behouden"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Kleuren:"})," Elke laag krijgt eigen kleur (aanpasbaar)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Import:"})," Laad GeoJSON, KML of GPX bestanden"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Export:"})," Exporteer lagen als GeoJSON"]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(yp,{size:16,className:"text-green-600"}),"Google Cloud Sync"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Inloggen:"})," Via hamburger menu rechtsboven"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Synchronisatie:"})," Lagen en vondsten automatisch naar cloud"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Meerdere apparaten:"})," Altijd toegang tot je data"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Veilig:"})," Alleen jij hebt toegang tot je gegevens"]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(yb,{size:16,className:"text-green-600"}),"GPS & Navigatie"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),m.jsx("li",{children:"Richtingspijl draait mee met je telefoon"}),m.jsx("li",{children:"Kaart handmatig draaien + kompasknop naar noorden"}),m.jsx("li",{children:"Schaalbalk onderaan (aan/uit in Instellingen)"}),m.jsx("li",{children:"Open locatie in Google Maps vanuit popup"}),m.jsx("li",{children:"Zoekbalk voor adressen en plaatsen"})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(Sl,{size:16,className:"text-orange-600"}),"Vondsten"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsx("li",{children:"Toevoegen via GPS locatie, long-press of handmatig"}),m.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht"}),m.jsx("li",{children:"Foto's toevoegen (link of upload)"}),m.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),m.jsx("li",{children:"Dashboard met statistieken"}),m.jsx("li",{children:"Cloud sync met Google account"})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(uc,{size:16,className:"text-purple-600"}),"Presets"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Standaard:"})," Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen, Mineralen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Aanpasbaar:"})," Overschrijf preset met huidige lagen (diskette-icoon)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Eigen presets:"})," Maak nieuwe via Instellingen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Tekstgrootte:"})," Aanpasbaar per panel via slider"]})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(Rct,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsx("li",{children:"Kadastrale aanduiding (gemeente, sectie, nummer)"}),m.jsx("li",{children:"Oppervlakte in m en hectare"}),m.jsx("li",{children:"Gewas en bouwplan met uitleg"}),m.jsx("li",{children:"Bodemtype met beschrijving"}),m.jsx("li",{children:"AHN hoogte in meters NAP"}),m.jsx("li",{children:"Hoogtekaart per perceel (bergje-icoon)"}),m.jsx("li",{children:"Link naar eigenaar opzoeken (Kadaster)"})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(rut,{size:16,className:"text-red-600"}),"Monumenten & Erfgoed"]}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"AMK:"})," Archeologische Monumenten per periode"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Romeinse Forten:"})," Uitgebreide historische info per fort"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rijksmonumenten:"})," Met bescherming en historie"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Verdedigingswerken:"})," Linies, forten, schansen"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Popup info:"})," Directe uitleg over archeologische waarde"]})]})]})]})}function QSt(){return m.jsxs(m.Fragment,{children:[m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),m.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[m.jsxs("li",{children:["Tik op de ",m.jsx("strong",{children:"GPS knop"})," (rechtsonder, oranje) om je locatie te zien"]}),m.jsxs("li",{children:["Kies een ",m.jsx("strong",{children:"preset"})," (linksonder, laagjes-icoon) voor een snelle start"]}),m.jsxs("li",{children:["Of open ",m.jsx("strong",{children:"Kaartlagen"})," om individuele lagen aan te zetten"]}),m.jsx("li",{children:"Tik op objecten op de kaart voor gedetailleerde informatie"})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Hamburger Menu"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsx("p",{children:"Rechtsboven vind je het menu met:"}),m.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Google Login:"})," Synchroniseer je data naar de cloud"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Vondst toevoegen:"})," Registreer een nieuwe vondst"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Info & Handleiding:"})," Dit scherm"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Instellingen:"})," Presets, export, weergave"]})]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS & Navigatie"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"GPS knop (oranje):"})," Aan/uit toggle voor locatie tracking."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Richtingspijl:"})," Blauwe pijl toont de richting van je telefoon."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Kaart draaien:"})," Met twee vingers of via kompas."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als kaart gedraaid is. Tik om naar noorden te draaien."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Google Maps:"})," Vanuit elke popup kun je direct navigeren."]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Locaties opslaan in Mijn Lagen"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 1:"})," Tik op een object op de kaart (monument, bunker, etc.)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 2:"})," Tik op de ",m.jsx("strong",{children:"oranje +"})," knop in de popup header"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 3:"})," Kies een bestaande laag of maak een nieuwe aan"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Resultaat:"})," De locatie inclusief vorm (polygoon) en info wordt opgeslagen!"]}),m.jsx("p",{className:"text-gray-500 italic",children:"Tip: Maak lagen voor vakantiebestemmingen, projecten of interessante locaties."})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst registreren"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Via GPS:"})," Open menu  Vondst toevoegen. Je locatie wordt automatisch ingevuld."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Via long-press:"}),' Houd je vinger op de kaart  kies "Vondst toevoegen".']}),m.jsxs("p",{children:[m.jsx("strong",{children:"Handmatig:"}),' In het formulier  "Kies op kaart" voor exacte locatie.']}),m.jsxs("p",{children:[m.jsx("strong",{children:"Foto's:"})," Voeg foto-links toe of upload direct."]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Toepassen:"})," Linksonder  preset kiezen."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Aanpassen:"})," Zet gewenste lagen aan  tik diskette-icoon naast preset."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Nieuw maken:"}),' Instellingen  Presets  "Huidige lagen opslaan".']})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Cloud Sync instellen"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 1:"})," Open hamburger menu rechtsboven"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 2:"}),' Tik op "Inloggen met Google"']}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 3:"})," Kies je Google account"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Klaar!"})," Je lagen en vondsten worden automatisch gesynchroniseerd."]}),m.jsx("p",{className:"text-gray-500 italic",children:"Je data is veilig en alleen voor jou toegankelijk."})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Lagen importeren"}),m.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 1:"})," Ga naar Instellingen (hamburger menu)"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 2:"}),' Scroll naar "Lagen importeren"']}),m.jsxs("p",{children:[m.jsx("strong",{children:"Stap 3:"})," Kies een GeoJSON, KML of GPX bestand"]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Resultaat:"})," Nieuwe laag met je geimporteerde data!"]}),m.jsx("p",{className:"text-gray-500 italic",children:"Handig voor routes, waypoints of eigen datasets."})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor detectie"}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[m.jsxs("li",{children:["Gebruik ",m.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),m.jsxs("li",{children:["Combineer ",m.jsx("strong",{children:"AMK"})," met ",m.jsx("strong",{children:"Gewaspercelen"})," voor slimme zoeklocaties"]}),m.jsxs("li",{children:["Check ",m.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),m.jsxs("li",{children:["Gebruik ",m.jsx("strong",{children:"historische kaarten"})," (TMK 1850) om oude structuren te vinden"]}),m.jsxs("li",{children:["Bekijk ",m.jsx("strong",{children:"Archeo Onderzoeken"})," voor eerdere vondsten in het gebied"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bodemkaart"})," toont of grond geschikt is (popup legt uit)"]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor fossielen"}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[m.jsxs("li",{children:["Zet ",m.jsx("strong",{children:"Fossiel hotspots"})," aan voor bekende vindplaatsen"]}),m.jsxs("li",{children:["Bekijk ",m.jsx("strong",{children:"Paleokaarten"})," voor historische kustlijnen"]}),m.jsxs("li",{children:["Check ",m.jsx("strong",{children:"Geomorfologie"})," voor oude zeebodems en rivieren"]}),m.jsx("li",{children:"Popup toont welke fossielen op elke locatie gevonden zijn"})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor mineralen"}),m.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[m.jsxs("li",{children:["Zet ",m.jsx("strong",{children:"Mineralen hotspots"})," aan voor vindplaatsen"]}),m.jsxs("li",{children:["Bekijk ",m.jsx("strong",{children:"Goudrivieren"})," voor goudzoekmogelijkheden"]}),m.jsx("li",{children:"Popup toont welke mineralen op elke locatie voorkomen"}),m.jsx("li",{children:"Links naar Mindat.org voor gedetailleerde info"})]})]}),m.jsxs("section",{children:[m.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[m.jsx(bg,{size:16,className:"text-blue-600"}),"Handige links"]}),m.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[m.jsxs("li",{children:[m.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),m.jsx("br",{}),m.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),m.jsxs("li",{children:[m.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),m.jsx("br",{}),m.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]}),m.jsxs("li",{children:[m.jsx("a",{href:"https://www.mindat.org/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Mindat.org - Mineralen database"}),m.jsx("br",{}),m.jsx("span",{className:"text-gray-500",children:"Wereldwijde mineralen informatie"})]}),m.jsxs("li",{children:[m.jsx("a",{href:"https://www.cultureelerfgoed.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Rijksdienst voor Cultureel Erfgoed"}),m.jsx("br",{}),m.jsx("span",{className:"text-gray-500",children:"Officile monumenten informatie"})]})]})]})]})}function MEe(t,e,n,r){const s=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function Zj(t){let e=0;for(let n=1;n<t.length;n++)e+=MEe(t[n-1].coordinates[0],t[n-1].coordinates[1],t[n].coordinates[0],t[n].coordinates[1]);return e}const ja=po()(vh((t,e)=>({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[],visibleRouteIds:new Set,heatmapEnabled:!1,gridEnabled:!1,gridCenter:null,gridSize:20,gridCount:10,gridColor:"rgba(139, 92, 246, 0.6)",autoPauseEnabled:!1,autoPauseSeconds:120,startRecording:()=>{t({state:"recording",currentPoints:[],startTime:Date.now(),pauseStartTime:null,totalPausedTime:0})},pauseRecording:()=>{const{state:n}=e();n==="recording"&&t({state:"paused",pauseStartTime:Date.now()})},resumeRecording:()=>{const{state:n,pauseStartTime:r,totalPausedTime:i}=e();if(n!=="paused"||!r)return;const s=Date.now()-r;t({state:"recording",pauseStartTime:null,totalPausedTime:i+s})},stopRecording:n=>{const{state:r,currentPoints:i,startTime:s,totalPausedTime:o,pauseStartTime:a}=e();if(r==="idle"||!s||i.length<2)return t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0}),null;const l=Date.now();let c=o;a&&(c+=l-a);const u=l-s-c,h=Zj(i),f={id:crypto.randomUUID(),name:n||`Route ${new Date().toLocaleDateString("nl-NL")} ${new Date().toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,points:i,startTime:s,endTime:l,totalDistance:h,totalDuration:u,pausedDuration:c,createdAt:new Date().toISOString()};return t(g=>{const v=new Set(g.visibleRouteIds);return v.add(f.id),{state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[f,...g.savedRoutes],visibleRouteIds:v}}),f},cancelRecording:()=>{t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0})},addPoint:(n,r,i)=>{const{state:s,currentPoints:o}=e();if(s!=="recording")return;if(o.length>0){const l=o[o.length-1];if(MEe(l.coordinates[0],l.coordinates[1],n,r)<2)return}const a={coordinates:[n,r],timestamp:Date.now(),accuracy:i};t({currentPoints:[...o,a]})},deleteRoute:n=>{t(r=>({savedRoutes:r.savedRoutes.filter(i=>i.id!==n)}))},renameRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,name:r}:s)}))},clearAllRoutes:()=>{t({savedRoutes:[],visibleRouteIds:new Set})},toggleRouteVisibility:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.has(n)?i.delete(n):i.add(n),{visibleRouteIds:i}})},showRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.add(n),{visibleRouteIds:i}})},hideRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.delete(n),{visibleRouteIds:i}})},showAllRoutes:()=>{t(n=>({visibleRouteIds:new Set(n.savedRoutes.map(r=>r.id))}))},hideAllRoutes:()=>{t({visibleRouteIds:new Set})},toggleHeatmap:()=>{t(n=>({heatmapEnabled:!n.heatmapEnabled}))},setHeatmapEnabled:n=>{t({heatmapEnabled:n})},toggleGrid:()=>{t(n=>({gridEnabled:!n.gridEnabled}))},setGridEnabled:n=>{t({gridEnabled:n})},setGridCenter:n=>{t({gridCenter:n})},setGridSize:n=>{t({gridSize:n})},setGridCount:n=>{t({gridCount:n})},setGridColor:n=>{t({gridColor:n})},centerGridOnCurrentLocation:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(n=>{t({gridCenter:[n.coords.longitude,n.coords.latitude],gridEnabled:!0})},n=>{console.error("Could not get location:",n)})},setAutoPauseEnabled:n=>{t({autoPauseEnabled:n})},setAutoPauseSeconds:n=>{t({autoPauseSeconds:n})},importRouteFromGPX:(n,r)=>{try{const s=new DOMParser().parseFromString(n,"application/xml");if(s.querySelector("parsererror"))return{success:!1,error:"Ongeldig XML formaat"};const a=s.querySelectorAll("trkpt");if(a.length<2&&s.querySelectorAll("wpt").length<2)return{success:!1,error:"Geen route punten gevonden in GPX bestand"};const l=[];if((a.length>0?a:s.querySelectorAll("wpt")).forEach(b=>{const T=parseFloat(b.getAttribute("lat")||"0"),A=parseFloat(b.getAttribute("lon")||"0"),I=b.querySelector("time"),P=I?new Date(I.textContent||"").getTime():Date.now();!isNaN(T)&&!isNaN(A)&&l.push({coordinates:[A,T],timestamp:isNaN(P)?Date.now():P})}),l.length<2)return{success:!1,error:"Niet genoeg geldige punten in GPX bestand"};const u=s.querySelector("trk > name")?.textContent||s.querySelector("metadata > name")?.textContent||r||`Import ${new Date().toLocaleDateString("nl-NL")}`,h=Zj(l),f=l[0].timestamp,g=l[l.length-1].timestamp,v=g-f,x={id:crypto.randomUUID(),name:u,points:l,startTime:f,endTime:g,totalDistance:h,totalDuration:v>0?v:0,pausedDuration:0,createdAt:new Date().toISOString()};return t(b=>{const T=new Set(b.visibleRouteIds);return T.add(x.id),{savedRoutes:[x,...b.savedRoutes],visibleRouteIds:T}}),{success:!0,routeId:x.id}}catch(i){return console.error("GPX import error:",i),{success:!1,error:"Fout bij importeren van GPX bestand"}}},updateRouteNotes:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,notes:r}:s)}))},addPhotoToRoute:(n,r)=>{const i={...r,id:crypto.randomUUID(),timestamp:new Date().toISOString()};t(s=>({savedRoutes:s.savedRoutes.map(o=>o.id===n?{...o,photos:[...o.photos||[],i]}:o)}))},removePhotoFromRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,photos:(s.photos||[]).filter(o=>o.id!==r)}:s)}))},getCurrentDistance:()=>{const{currentPoints:n}=e();return Zj(n)},getCurrentDuration:()=>{const{state:n,startTime:r,totalPausedTime:i,pauseStartTime:s}=e();if(!r)return 0;const o=Date.now();let a=i;return n==="paused"&&s&&(a+=o-s),o-r-a},getAverageSpeed:()=>{const n=e().getCurrentDistance(),r=e().getCurrentDuration();return r===0?0:n/1e3/(r/36e5)}}),{name:"detectorapp-route-recording",version:2,partialize:t=>({savedRoutes:t.savedRoutes,visibleRouteIds:Array.from(t.visibleRouteIds),heatmapEnabled:t.heatmapEnabled,gridEnabled:t.gridEnabled,gridCenter:t.gridCenter,gridSize:t.gridSize,gridCount:t.gridCount,gridColor:t.gridColor,autoPauseEnabled:t.autoPauseEnabled,autoPauseSeconds:t.autoPauseSeconds}),merge:(t,e)=>({...e,...t,visibleRouteIds:new Set(t?.visibleRouteIds||[])})}));function NEe(t){const e=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t.name}</name>
    <time>${new Date(t.startTime).toISOString()}</time>
  </metadata>
  <trk>
    <name>${t.name}</name>
    <trkseg>
${t.points.map(s=>`      <trkpt lat="${s.coordinates[1]}" lon="${s.coordinates[0]}">
        <time>${new Date(s.timestamp).toISOString()}</time>
      </trkpt>`).join(`
`)}
    </trkseg>
  </trk>
</gpx>`,n=new Blob([e],{type:"application/gpx+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${t.name.replace(/[^a-zA-Z0-9]/g,"-")}.gpx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}let cg=null,XT=null;function OEe(){if(typeof window>"u"||!("speechSynthesis"in window))return!1;cg=window.speechSynthesis;const t=()=>{const e=cg?.getVoices()||[];XT=e.find(n=>n.lang.startsWith("nl")||n.name.toLowerCase().includes("dutch")||n.name.toLowerCase().includes("nederland"))||null,!XT&&e.length>0&&(XT=e[0])};return t(),cg&&(cg.onvoiceschanged=t),!0}function eTt(t,e){if(!cg&&!OEe()||!cg)return;cg.cancel();const n=new SpeechSynthesisUtterance(t);XT&&(n.voice=XT),n.lang="nl-NL",n.rate=e?.rate,n.pitch=e?.pitch??1,n.volume=e?.volume??1,cg.speak(n)}function tTt(t){const e=[];e.push(`${t.type} toegevoegd`),t.material&&t.material!=="Onbekend"&&e.push(`Materiaal: ${t.material}`),t.period&&t.period!=="Onbekend"&&e.push(`Periode: ${t.period}`),t.layerName&&t.layerName!=="Vondsten"&&e.push(`Opgeslagen in ${t.layerName}`);const n=e.join(". ");eTt(n,{rate:1.1})}OEe();const nTt="detectorapp-photos",rTt=1,t5="photos",iTt=1024,sTt=200,oTt=.8,aTt=.7;function lTt(){return new Promise((t,e)=>{const n=indexedDB.open(nTt,rTt);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(t5)||i.createObjectStore(t5,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}})}async function Yoe(t,e,n){return new Promise((r,i)=>{const s=new Image,o=URL.createObjectURL(t);s.onload=()=>{URL.revokeObjectURL(o);let{width:a,height:l}=s;(a>e||l>e)&&(a>l?(l=Math.round(l*e/a),a=e):(a=Math.round(a*e/l),l=e));const c=document.createElement("canvas");c.width=a,c.height=l;const u=c.getContext("2d");if(!u){i(new Error("Could not get canvas context"));return}u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(s,0,0,a,l),c.toBlob(h=>{h?r({blob:h,width:a,height:l}):i(new Error("Could not create blob"))},"image/jpeg",n)},s.onerror=()=>{URL.revokeObjectURL(o),i(new Error("Could not load image"))},s.src=o})}async function cTt(t,e){const{blob:n,width:r,height:i}=await Yoe(e,iTt,oTt),{blob:s}=await Yoe(e,sTt,aTt),o={id:t,fullImage:n,thumbnail:s,originalName:e.name,mimeType:"image/jpeg",width:r,height:i,size:n.size,createdAt:new Date().toISOString()},a=await lTt();return new Promise((l,c)=>{const u=a.transaction(t5,"readwrite"),f=u.objectStore(t5).put(o);f.onsuccess=()=>l(o),f.onerror=()=>c(f.error),u.oncomplete=()=>a.close()})}function Jj({label:t,value:e,onChange:n,options:r,required:i=!1,placeholder:s="Typ hier..."}){const[o,a]=X.useState(!1),[l,c]=X.useState(!1),[u,h]=X.useState(""),f=e&&!r.includes(e),g=()=>{c(!0),h(f?e:""),a(!1)},v=()=>{u.trim()&&n(u.trim()),c(!1)};return l?m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&m.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),m.jsx("input",{type:"text",value:u,onChange:x=>h(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),v()),x.key==="Escape"&&c(!1)},onBlur:v,placeholder:s,autoFocus:!0,className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}):m.jsxs("div",{className:"relative",children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&m.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),m.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-left",style:{border:"none",outline:"none"},children:[m.jsxs("span",{className:e?"":"text-gray-400",children:[e||"Selecteer...",f&&m.jsx(Ase,{size:12,className:"inline ml-1 text-orange-500"})]}),m.jsx(mb,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&m.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[m.jsxs("button",{type:"button",onClick:g,className:"w-full px-3 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[m.jsx(Ase,{size:12}),"Eigen invoer..."]}),m.jsx("div",{className:"border-t border-gray-100"}),r.map(x=>m.jsx("button",{type:"button",onClick:()=>{n(x),a(!1)},className:`w-full px-3 py-2 text-left text-sm transition-colors ${x===e?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,style:{border:"none",outline:"none"},children:x},x))]})]})}function LEe({onClose:t,initialLocation:e}){const n=Es(Ye=>Ye.position),r=ji(Ye=>Ye.map),i=zr(Ye=>Ye.vondstFormPhoto),s=co(Ye=>Ye.layers),o=co(Ye=>Ye.addPoint);co(Ye=>Ye.addPhotoToPoint);const a=Pn(Ye=>Ye.voiceFeedbackEnabled),l=ja(Ye=>Ye.state),c=ja(Ye=>Ye.startTime);ja(Ye=>Ye.savedRoutes);const u=()=>l==="idle"||!c?null:`Route ${new Date(c).toLocaleDateString("nl-NL")} ${new Date(c).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,h=l==="recording"||l==="paused",f=u(),[g,v]=X.useState(""),[x,b]=X.useState(""),[T,A]=X.useState(""),[I,P]=X.useState(""),[M,F]=X.useState(!1),[C,N]=X.useState(void 0),[O,j]=X.useState(void 0),[V,G]=X.useState(Bc),[U,fe]=X.useState(i),[Re,Be]=X.useState(null);X.useEffect(()=>{if(U){const Ye=URL.createObjectURL(U);return Be(Ye),()=>URL.revokeObjectURL(Ye)}else Be(null)},[U]);const[$e,pe]=X.useState(e?"map-pick":n?"gps":"map-center"),[De,Me]=X.useState(e||null),[Q,W]=X.useState(!1),ne=()=>{if($e==="gps"&&n)return{lat:n.lat,lng:n.lng};if($e==="map-pick"&&De)return De;if(r){const Ye=r.getView().getCenter();if(Ye){const[sn,$t]=Qn(Ye);return{lat:$t,lng:sn}}}return null},ie=ne();X.useEffect(()=>{if(!Q||!r)return;const Ye=sn=>{const[$t,fn]=Qn(sn.coordinate);Me({lat:fn,lng:$t}),pe("map-pick"),W(!1)};return r.on("click",Ye),()=>r.un("click",Ye)},[Q,r]);const le=()=>W(!0),ve=()=>{n&&(pe("gps"),Me(null))},qe=()=>{const Ye=document.createElement("input");Ye.type="file",Ye.accept="image/*",Ye.capture="environment",Ye.onchange=sn=>{const $t=sn.target.files?.[0];$t&&fe($t)},Ye.click()},Ke=()=>fe(null),Se=async Ye=>{Ye.preventDefault();const sn=ne();if(!sn){alert("Geen locatie beschikbaar");return}if(!x){alert("Vul een naam/type in");return}F(!0);try{let $t=g||"";if(V===Bc){const dt=[];T&&dt.push(`Materiaal: ${T}`),I&&dt.push(`Periode: ${I}`),C&&dt.push(`Gewicht: ${C}g`),O&&dt.push(`Lengte: ${O}mm`),dt.length>0&&($t=dt.join(" | ")+(g?` | ${g}`:""))}let fn;if(U){const dt=crypto.randomUUID();try{const ur=await cTt(dt,U),jn=await we(ur.thumbnail);fn={id:dt,thumbnailBase64:jn,createdAt:ur.createdAt}}catch(ur){console.error("Failed to save photo:",ur)}}o(V,{coordinates:[sn.lng,sn.lat],name:x,category:V===Bc?x:"Overig",notes:$t||"",...fn?{photos:[fn]}:{},...h&&c?{routeId:`recording-${c}`,routeName:f||void 0}:{}});const yn=s.find(dt=>dt.id===V)?.name||"Vondsten";a&&tTt({type:x,material:T||void 0,period:I||void 0,layerName:yn}),alert(`Toegevoegd aan ${yn}! ${fn?" (met foto)":""}`),t()}catch($t){alert("Fout bij opslaan: "+$t.message)}finally{F(!1)}},we=Ye=>new Promise((sn,$t)=>{const fn=new FileReader;fn.onloadend=()=>sn(fn.result),fn.onerror=$t,fn.readAsDataURL(Ye)}),Dt=X.useMemo(()=>s.map(Ye=>({id:Ye.id,name:Ye.name,color:Ye.color})),[s]);return Q?m.jsx(kt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:m.jsxs("div",{className:"bg-orange-500 text-white rounded-xl shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(bN,{size:24,className:"animate-pulse"}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),m.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),m.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"})]})}):m.jsx(kt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:m.jsxs(kt.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[m.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-4 flex justify-between items-center flex-shrink-0",children:[m.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),m.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors border-0 outline-none",children:m.jsx(ai,{size:20})})]}),m.jsxs("form",{onSubmit:Se,className:"flex-1 overflow-y-auto",children:[m.jsxs("div",{className:"p-5 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),Re?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:Re,alt:"Vondst",className:"w-full h-40 object-cover rounded-xl"}),m.jsx("button",{type:"button",onClick:Ke,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors border-0 outline-none shadow-lg",children:m.jsx(zd,{size:16})})]}):m.jsxs("button",{type:"button",onClick:qe,className:"w-full h-32 bg-gray-50 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-gray-100 transition-colors text-gray-500 border-2 border-dashed border-gray-200",style:{outline:"none"},children:[m.jsx(aL,{size:32}),m.jsx("span",{className:"text-sm",children:"Maak een foto"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),ie&&m.jsxs("div",{className:"bg-orange-50 rounded-xl px-4 py-3 mb-2",children:[m.jsxs("div",{className:"text-sm text-orange-800 font-mono",children:[ie.lat.toFixed(6),"N, ",ie.lng.toFixed(6),"E"]}),m.jsx("div",{className:"text-xs text-orange-600 mt-1",children:$e==="gps"?" GPS locatie":$e==="map-pick"?" Gekozen op kaart":" Kaart midden"})]}),!ie&&m.jsx("div",{className:"bg-red-50 rounded-xl px-4 py-3 mb-2",children:m.jsx("div",{className:"text-sm text-red-600",children:"Geen locatie beschikbaar"})}),m.jsxs("div",{className:"flex gap-2",children:[n&&$e!=="gps"&&m.jsxs("button",{type:"button",onClick:ve,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors border-0 outline-none",children:[m.jsx(yb,{size:16}),"GPS"]}),m.jsxs("button",{type:"button",onClick:le,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border-0 outline-none",children:[m.jsx(bN,{size:16}),"Kies op kaart"]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opslaan naar"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Dt.map(Ye=>m.jsx("button",{type:"button",onClick:()=>G(Ye.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-0 outline-none ${V===Ye.id?"bg-gray-800 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ye.name},Ye.id))})]}),V===Bc&&m.jsx(Jj,{label:"Type vondst",value:x,onChange:b,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ type vondst..."}),V!==Bc&&m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Naam",m.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),m.jsx("input",{type:"text",value:x,onChange:Ye=>b(Ye.target.value),placeholder:"Naam van het punt...",className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}),V===Bc&&m.jsxs(m.Fragment,{children:[m.jsx(Jj,{label:"Materiaal",value:T,onChange:A,options:["Brons","IJzer","Zilver","Goud","Koper","Lood","Tin","Keramiek","Steen","Glas","Bot","Hout","Leer","Onbekend"],placeholder:"Typ materiaal..."}),m.jsx(Jj,{label:"Periode",value:I,onChange:P,options:["Steentijd","Bronstijd","IJzertijd","Romeins","Middeleeuws","Nieuwetijd","Modern","Onbekend"],placeholder:"Typ periode..."}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gewicht (g)"}),m.jsx("input",{type:"number",value:C??"",onChange:Ye=>N(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Lengte (mm)"}),m.jsx("input",{type:"number",value:O??"",onChange:Ye=>j(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notities"}),m.jsx("textarea",{value:g,onChange:Ye=>v(Ye.target.value),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all resize-none h-20",style:{border:"none",outline:"none"},placeholder:"Beschrijving, context, vindplaats details..."})]}),m.jsx("div",{className:"rounded-xl px-4 py-3 bg-orange-50",children:m.jsx("p",{className:"text-sm text-orange-700",children:' Opgeslagen in "Mijn Lagen" op dit apparaat'})})]}),m.jsxs("div",{className:"p-5 pt-0 flex gap-3",children:[m.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border-0 outline-none",children:"Annuleren"}),m.jsx("button",{type:"submit",disabled:M||!ie||Q||!x,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border-0 outline-none",children:M?"Opslaan...":"Opslaan"})]})]})]})})}function uTt(){const{user:t,setUser:e,setLoading:n}=nO();return X.useEffect(()=>{const s=Fce(Ny,o=>{e(o),n(!1)});return()=>s()},[e,n]),{user:t,loginAnonymous:async()=>{try{await M3e(Ny)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await Vce(Ny)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!t}}function hTt(){const{isAuthenticated:t,loginAnonymous:e}=uTt(),n=Pn(c=>c.vondstenLocalOnly),r=Pn(c=>c.showVondstButton),i=zr(c=>c.vondstFormOpen),s=zr(c=>c.vondstFormLocation),o=zr(c=>c.openVondstForm),a=zr(c=>c.closeVondstForm);if(!r)return null;const l=()=>{if(n){o();return}if(!t){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}o()};return m.jsxs(m.Fragment,{children:[m.jsx(kt.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:m.jsx(Sl,{size:22,strokeWidth:2})}),m.jsx(Jn,{children:i&&m.jsx(LEe,{onClose:a,initialLocation:s||void 0})})]})}function dTt(){const t=Pn(we=>we.showRouteRecordButton),e=Pn(we=>we.showVondstButton),n=zr(we=>we.toggleRouteDashboard),{state:r,startRecording:i,pauseRecording:s,resumeRecording:o,stopRecording:a,cancelRecording:l,addPoint:c,getCurrentDistance:u,getCurrentDuration:h,getAverageSpeed:f,currentPoints:g,savedRoutes:v,autoPauseEnabled:x,autoPauseSeconds:b}=ja(),[T,A]=X.useState(!1),[I,P]=X.useState(""),[M,F]=X.useState(!1),[C,N]=X.useState(!1),O=X.useRef(null),j=X.useRef(null),V=X.useRef(null),G=we=>{const Dt=Math.floor(we/1e3),Ye=Math.floor(Dt/3600),sn=Math.floor(Dt%3600/60),$t=Dt%60;return Ye>0?`${Ye}:${sn.toString().padStart(2,"0")}:${$t.toString().padStart(2,"0")}`:`${sn}:${$t.toString().padStart(2,"0")}`},U=we=>we<1e3?`${Math.round(we)} m`:`${(we/1e3).toFixed(2)} km`,fe=we=>`${we.toFixed(1)} km/h`,Re=(we,Dt,Ye,sn)=>{const fn=(sn-Dt)*Math.PI/180,yn=(Ye-we)*Math.PI/180,dt=Math.sin(fn/2)*Math.sin(fn/2)+Math.cos(Dt*Math.PI/180)*Math.cos(sn*Math.PI/180)*Math.sin(yn/2)*Math.sin(yn/2);return 6371e3*(2*Math.atan2(Math.sqrt(dt),Math.sqrt(1-dt)))};if(X.useEffect(()=>(r==="recording"?(N(!1),"geolocation"in navigator&&O.current===null&&(O.current=navigator.geolocation.watchPosition(we=>{const Dt=we.coords.longitude,Ye=we.coords.latitude,sn=Date.now();c(Dt,Ye,we.coords.accuracy),x&&j.current?Re(j.current.lon,j.current.lat,Dt,Ye)>3?(j.current={lon:Dt,lat:Ye,time:sn},V.current&&(clearTimeout(V.current),V.current=null)):sn-j.current.time>=b*1e3&&(s(),N(!0),j.current=null):j.current={lon:Dt,lat:Ye,time:sn}},we=>{console.error("GPS error:",we)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3}))):(O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),V.current&&(clearTimeout(V.current),V.current=null)),()=>{O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),V.current&&(clearTimeout(V.current),V.current=null)}),[r,c,x,b,s]),!t)return null;const Be=e?"right-[114px]":"right-[60px]",$e=e?"right-[168px]":"right-[114px]",pe=()=>{i(),F(!0)},De=()=>{s()},Me=()=>{o()},Q=()=>{P(`Route ${new Date().toLocaleDateString("nl-NL")}`),A(!0)},W=()=>{const we=a(I);A(!1),F(!1),P(""),we&&confirm(`Route "${we.name}" opgeslagen! (${U(we.totalDistance)})

Direct exporteren als GPX?`)&&NEe(we)},ne=()=>{g.length>2&&!confirm("Weet je zeker dat je de opname wilt annuleren? De route wordt niet opgeslagen.")||(l(),A(!1),F(!1))},ie=u(),le=h(),ve=f(),qe=we=>{switch(we){case"recording":return"bg-red-500 hover:bg-red-600";case"paused":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-green-500 hover:bg-green-600"}},Ke=we=>{switch(we){case"recording":return m.jsx(Uwe,{size:22,strokeWidth:2});case"paused":return m.jsx(Bwe,{size:22,strokeWidth:2});default:return m.jsx(kN,{size:22,strokeWidth:2})}},Se=()=>{switch(r){case"idle":pe();break;case"recording":De();break;case"paused":Me();break}};return m.jsxs(m.Fragment,{children:[m.jsxs(kt.button,{className:`fixed bottom-2 ${Be} z-[1000] w-11 h-11 ${qe(r)} text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Se,title:r==="idle"?"Route opnemen":r==="recording"?"Pauzeren":"Hervatten",children:[Ke(r),r==="recording"&&m.jsx(kt.div,{className:"absolute inset-0 rounded-xl bg-red-400",animate:{opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0}})]}),m.jsx(Jn,{children:r==="idle"&&v.length>0&&m.jsxs(kt.button,{className:`fixed bottom-2 ${$e} z-[1000] w-11 h-11 bg-green-400 hover:bg-green-500 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,title:`Mijn routes (${v.length})`,children:[m.jsx(Fwe,{size:18,strokeWidth:2}),m.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-green-600 text-xs font-bold rounded-full flex items-center justify-center shadow-sm",children:v.length})]})}),m.jsx(Jn,{children:(r==="recording"||r==="paused")&&m.jsx(kt.button,{className:`fixed bottom-2 ${$e} z-[1000] w-11 h-11 bg-gray-700 hover:bg-gray-800 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Q,title:"Stoppen en opslaan",children:m.jsx(uut,{size:18,strokeWidth:2,fill:"currentColor"})})}),m.jsx(Jn,{children:M&&r!=="idle"&&m.jsxs(kt.div,{className:"fixed bottom-16 right-2 z-[999] bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 min-w-[180px]",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:r==="recording"?" Opname":C?" Auto-pauze":" Gepauzeerd"}),m.jsx("button",{onClick:()=>F(!1),className:"p-0.5 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:m.jsx(ai,{size:14})})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(B1,{size:16,className:"text-green-500"}),m.jsx("span",{className:"text-lg font-semibold text-gray-800",children:U(ie)})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(wN,{size:16,className:"text-blue-500"}),m.jsx(fTt,{duration:le,recordingState:r,formatTime:G})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(oct,{size:16,className:"text-green-500"}),m.jsx("span",{className:"text-sm text-gray-600",children:fe(ve)})]}),m.jsxs("div",{className:"text-xs text-gray-400 pt-1 border-t border-gray-100",children:[g.length," punten opgenomen"]})]})]})}),m.jsx(Jn,{children:T&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1500] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1)}),m.jsxs(kt.div,{className:"fixed left-4 right-4 top-1/2 z-[1501] bg-white rounded-xl shadow-2xl p-4 max-w-sm mx-auto",initial:{opacity:0,scale:.9,y:"-40%"},animate:{opacity:1,scale:1,y:"-50%"},exit:{opacity:0,scale:.9,y:"-40%"},children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Route opslaan"}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-gray-500",children:"Afstand:"}),m.jsx("span",{className:"font-medium",children:U(ie)})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-gray-500",children:"Duur:"}),m.jsx("span",{className:"font-medium",children:G(le)})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-gray-500",children:"Gem. snelheid:"}),m.jsx("span",{className:"font-medium",children:fe(ve)})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-gray-500",children:"Punten:"}),m.jsx("span",{className:"font-medium",children:g.length})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de route"}),m.jsx("input",{type:"text",value:I,onChange:we=>P(we.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Route naam...",autoFocus:!0})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"}),m.jsxs("button",{onClick:W,disabled:g.length<2,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[m.jsx(Hwe,{size:16}),"Opslaan"]})]}),g.length<2&&m.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Minimaal 2 punten nodig om op te slaan"})]})]})})]})}function fTt({duration:t,recordingState:e,formatTime:n}){const[r,i]=X.useState(t);return X.useEffect(()=>{if(e!=="recording"){i(t);return}const s=setInterval(()=>{i(o=>o+1e3)},1e3);return()=>clearInterval(s)},[e,t]),X.useEffect(()=>{i(t)},[t]),m.jsx("span",{className:"text-lg font-semibold text-gray-800",children:n(r)})}function pTt(){const t=ji(s=>s.map),{currentPoints:e,state:n}=ja(),r=X.useRef(null),i=X.useRef(null);return X.useEffect(()=>{if(!t)return;const s=new fu;i.current=s;const o=new yh({source:s,zIndex:999,properties:{name:"route-recording-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),X.useEffect(()=>{if(!i.current||(i.current.clear(),n==="idle"||e.length===0))return;const s=e.map(o=>Ci(o.coordinates));if(s.length>=2){const o=new Gr({geometry:new Qi(s)});o.setStyle(new In({stroke:new Bn({color:n==="paused"?"rgba(234, 179, 8, 0.8)":"rgba(168, 85, 247, 0.8)",width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(o)}if(s.length>=1){const o=new Gr({geometry:new ts(s[0])});o.setStyle(new In({image:new uo({radius:8,fill:new sr({color:"rgba(34, 197, 94, 1)"}),stroke:new Bn({color:"white",width:2})})})),i.current.addFeature(o)}if(s.length>=1){const o=new Gr({geometry:new ts(s[s.length-1])});o.setStyle(new In({image:new uo({radius:6,fill:new sr({color:n==="paused"?"rgba(234, 179, 8, 1)":"rgba(168, 85, 247, 1)"}),stroke:new Bn({color:"white",width:2})})})),i.current.addFeature(o)}},[e,n]),null}const Xoe=["#a855f7","#3b82f6","#22c55e","#f97316","#ec4899","#14b8a6","#eab308","#8b5cf6"];function mTt(){const t=ji(s=>s.map),{savedRoutes:e,visibleRouteIds:n}=ja(),r=X.useRef(null),i=X.useRef(null);return X.useEffect(()=>{if(!t)return;const s=new fu;i.current=s;const o=new yh({source:s,zIndex:998,properties:{name:"saved-routes-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),X.useEffect(()=>{if(!i.current)return;i.current.clear(),e.filter(o=>n.has(o.id)).forEach((o,a)=>{const l=Xoe[a%Xoe.length],c=o.points.map(x=>Ci(x.coordinates));if(c.length<2)return;const u=new Gr({geometry:new Qi(c),routeId:o.id,routeName:o.name});u.setStyle(new In({stroke:new Bn({color:l,width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(u);const h=new Gr({geometry:new ts(c[0]),routeId:o.id,type:"start"});h.setStyle(new In({image:new uo({radius:8,fill:new sr({color:"#22c55e"}),stroke:new Bn({color:"white",width:2})}),text:new nu({text:"S",font:"bold 10px sans-serif",fill:new sr({color:"white"}),offsetY:1})})),i.current.addFeature(h);const f=new Gr({geometry:new ts(c[c.length-1]),routeId:o.id,type:"end"});f.setStyle(new In({image:new uo({radius:8,fill:new sr({color:"#ef4444"}),stroke:new Bn({color:"white",width:2})}),text:new nu({text:"E",font:"bold 10px sans-serif",fill:new sr({color:"white"}),offsetY:1})})),i.current.addFeature(f);const g=Math.floor(c.length/2),v=new Gr({geometry:new ts(c[g]),routeId:o.id,type:"label"});v.setStyle(new In({text:new nu({text:o.name,font:"12px sans-serif",fill:new sr({color:"#1f2937"}),stroke:new Bn({color:"white",width:3}),offsetY:-15})})),i.current.addFeature(v)})},[e,n]),null}function gTt(){const t=ji(o=>o.map),{savedRoutes:e,visibleRouteIds:n,heatmapEnabled:r}=ja(),i=X.useRef(null),s=X.useRef(null);return X.useEffect(()=>{if(!t)return;const o=new fu;s.current=o;const a=new IPe({source:o,blur:15,radius:10,weight:()=>1,gradient:["#00f","#0ff","#0f0","#ff0","#f00"],opacity:.6,zIndex:90});return i.current=a,t.addLayer(a),()=>{t&&i.current&&t.removeLayer(i.current)}},[t]),X.useEffect(()=>{if(!s.current||!i.current)return;if(s.current.clear(),!r){i.current.setVisible(!1);return}const o=e.filter(l=>n.has(l.id)),a=[];for(const l of o)for(const c of l.points){const u=new Gr({geometry:new ts(Ci(c.coordinates))});a.push(u)}s.current.addFeatures(a),i.current.setVisible(a.length>0)},[e,n,r]),null}function yTt(t,e,n,r){const i=[],s=e/111e3,o=e/(111e3*Math.cos(t[1]*Math.PI/180)),a=Math.floor(n/2),l=t[0]-a*o,c=t[0]+a*o,u=t[1]-a*s,h=t[1]+a*s;for(let x=-a;x<=a;x++){const b=t[0]+x*o,T=[Ci([b,u]),Ci([b,h])],A=new Gr({geometry:new Qi(T),type:"grid-line"});A.setStyle(new In({stroke:new Bn({color:r,width:x===0?2:1,lineDash:x===0?void 0:[5,5]})})),i.push(A)}for(let x=-a;x<=a;x++){const b=t[1]+x*s,T=[Ci([l,b]),Ci([c,b])],A=new Gr({geometry:new Qi(T),type:"grid-line"});A.setStyle(new In({stroke:new Bn({color:r,width:x===0?2:1,lineDash:x===0?void 0:[5,5]})})),i.push(A)}const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=-a;x<a;x++)for(let b=-a;b<a;b++){const T=t[0]+(b+.5)*o,A=t[1]+(x+.5)*s,I=x+a,P=b+a;if(I>=0&&I<f.length){const M=`${f[I]}${P+1}`,F=new Gr({geometry:new Qi([Ci([T,A]),Ci([T,A])]),type:"grid-label"});F.setStyle(new In({text:new nu({text:M,font:"12px sans-serif",fill:new sr({color:r}),stroke:new Bn({color:"rgba(255,255,255,0.8)",width:3})})})),i.push(F)}}const g=new Gr({geometry:new Qi([Ci([t[0]-o*.2,t[1]]),Ci([t[0]+o*.2,t[1]])]),type:"grid-center"});g.setStyle(new In({stroke:new Bn({color:"#ef4444",width:3})})),i.push(g);const v=new Gr({geometry:new Qi([Ci([t[0],t[1]-s*.2]),Ci([t[0],t[1]+s*.2])]),type:"grid-center"});return v.setStyle(new In({stroke:new Bn({color:"#ef4444",width:3})})),i.push(v),i}function vTt(){const t=ji(l=>l.map),{gridEnabled:e,gridCenter:n,gridSize:r,gridCount:i,gridColor:s}=ja(),o=X.useRef(null),a=X.useRef(null);return X.useEffect(()=>{if(!t)return;const l=new fu;a.current=l;const c=new yh({source:l,zIndex:85,properties:{name:"grid-overlay-layer"}});return o.current=c,t.addLayer(c),()=>{o.current&&t&&t.removeLayer(o.current)}},[t]),X.useEffect(()=>{if(!a.current||!o.current)return;if(a.current.clear(),!e||!n){o.current.setVisible(!1);return}const l=yTt(n,r,i,s);a.current.addFeatures(l),o.current.setVisible(!0)},[e,n,r,i,s]),null}function _Tt(t){const e=[];let n=0;return t.points.forEach((r,i)=>{if(i>0){const a=t.points[i-1],l=6371e3,c=(r.coordinates[1]-a.coordinates[1])*Math.PI/180,u=(r.coordinates[0]-a.coordinates[0])*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.coordinates[1]*Math.PI/180)*Math.cos(r.coordinates[1]*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));n+=l*f}const s=5,o=Math.sin(n/50)*2+Math.sin(n/120)*1.5+Math.sin(n/30+r.coordinates[0]*1e3)*.5;e.push({distance:n,elevation:Math.max(0,s+o)})}),e}function xTt({route:t,onClose:e}){const n=X.useRef(null),[r,i]=X.useState([]),[s,o]=X.useState({min:0,max:0,gain:0,loss:0});X.useEffect(()=>{const l=_Tt(t);if(i(l),l.length>0){const c=l.map(v=>v.elevation),u=Math.min(...c),h=Math.max(...c);let f=0,g=0;for(let v=1;v<l.length;v++){const x=l[v].elevation-l[v-1].elevation;x>0?f+=x:g+=Math.abs(x)}o({min:u,max:h,gain:f,loss:g})}},[t]),X.useEffect(()=>{const l=n.current;if(!l||r.length<2)return;const c=l.getContext("2d");if(!c)return;const u=l.width,h=l.height,f={top:20,right:20,bottom:30,left:40};c.fillStyle="#f9fafb",c.fillRect(0,0,u,h);const g=Math.max(...r.map(M=>M.distance)),v=Math.min(...r.map(M=>M.elevation))-1,x=Math.max(...r.map(M=>M.elevation))+1,b=M=>f.left+M/g*(u-f.left-f.right),T=M=>h-f.bottom-(M-v)/(x-v)*(h-f.top-f.bottom);c.strokeStyle="#e5e7eb",c.lineWidth=1;const A=5;for(let M=0;M<=A;M++){const F=v+(x-v)*(M/A),C=T(F);c.beginPath(),c.moveTo(f.left,C),c.lineTo(u-f.right,C),c.stroke(),c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="right",c.fillText(`${F.toFixed(1)}m`,f.left-5,C+3)}const I=5;for(let M=0;M<=I;M++){const F=g/I*M,C=b(F);c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="center",c.fillText(F<1e3?`${Math.round(F)}m`:`${(F/1e3).toFixed(1)}km`,C,h-10)}c.beginPath(),c.moveTo(b(r[0].distance),h-f.bottom),r.forEach(M=>{c.lineTo(b(M.distance),T(M.elevation))}),c.lineTo(b(r[r.length-1].distance),h-f.bottom),c.closePath();const P=c.createLinearGradient(0,f.top,0,h-f.bottom);P.addColorStop(0,"rgba(139, 92, 246, 0.3)"),P.addColorStop(1,"rgba(139, 92, 246, 0.05)"),c.fillStyle=P,c.fill(),c.strokeStyle="#8b5cf6",c.lineWidth=2,c.lineJoin="round",c.lineCap="round",c.beginPath(),r.forEach((M,F)=>{const C=b(M.distance),N=T(M.elevation);F===0?c.moveTo(C,N):c.lineTo(C,N)}),c.stroke()},[r]);const a=l=>l<1e3?`${Math.round(l)} m`:`${(l/1e3).toFixed(2)} km`;return m.jsxs(kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-4 z-[1700] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[70vh]",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(R2,{size:20}),m.jsx("span",{className:"font-medium",children:"Hoogteprofiel"})]}),m.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:m.jsx(ai,{size:18})})]}),m.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100",children:[m.jsx("h3",{className:"font-medium text-gray-800 truncate",children:t.name}),m.jsx("p",{className:"text-xs text-gray-500",children:a(t.totalDistance)})]}),m.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 border-b border-gray-100",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex items-center justify-center text-blue-500 mb-1",children:m.jsx(zwe,{size:14})}),m.jsx("div",{className:"text-xs text-gray-500",children:"Min"}),m.jsxs("div",{className:"text-sm font-medium",children:[s.min.toFixed(1),"m"]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex items-center justify-center text-purple-500 mb-1",children:m.jsx(R2,{size:14})}),m.jsx("div",{className:"text-xs text-gray-500",children:"Max"}),m.jsxs("div",{className:"text-sm font-medium",children:[s.max.toFixed(1),"m"]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex items-center justify-center text-green-500 mb-1",children:m.jsx(Tut,{size:14})}),m.jsx("div",{className:"text-xs text-gray-500",children:"Stijging"}),m.jsxs("div",{className:"text-sm font-medium",children:[s.gain.toFixed(1),"m"]})]}),m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"flex items-center justify-center text-red-500 mb-1",children:m.jsx(Eut,{size:14})}),m.jsx("div",{className:"text-xs text-gray-500",children:"Daling"}),m.jsxs("div",{className:"text-sm font-medium",children:[s.loss.toFixed(1),"m"]})]})]}),m.jsx("div",{className:"flex-1 p-3",children:m.jsx("canvas",{ref:n,width:350,height:200,className:"w-full h-full"})}),m.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-t border-yellow-100",children:m.jsxs("p",{className:"text-xs text-yellow-700",children:[m.jsx("strong",{children:"Let op:"})," Dit zijn gesimuleerde hoogtewaarden. Koppeling met AHN-data komt binnenkort."]})})]})}const wTt=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,bTt=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Zoe=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});function ETt({route:t,onClose:e}){const{updateRouteNotes:n,addPhotoToRoute:r,removePhotoFromRoute:i}=ja(),[s,o]=X.useState(t.notes||""),[a,l]=X.useState("info"),c=X.useRef(null),u=()=>{n(t.id,s)},h=async v=>{const x=v.target.files?.[0];if(!x)return;const b=URL.createObjectURL(x);r(t.id,{url:b,caption:x.name}),c.current&&(c.current.value="")},f=v=>{confirm("Foto verwijderen?")&&i(t.id,v)},g=ja(v=>v.savedRoutes.find(x=>x.id===t.id))||t;return m.jsxs(kt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[1700] flex items-center justify-center p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),m.jsxs(kt.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"relative bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-md max-h-[85vh] flex flex-col",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-medium truncate",children:g.name}),m.jsx("p",{className:"text-xs text-purple-200",children:Zoe(g.createdAt)})]}),m.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none ml-2",children:m.jsx(ai,{size:18})})]}),m.jsxs("div",{className:"flex border-b border-gray-200",children:[m.jsxs("button",{onClick:()=>l("info"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="info"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[m.jsx(Sl,{size:16,className:"inline mr-1"}),"Info"]}),m.jsxs("button",{onClick:()=>l("photos"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="photos"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[m.jsx(aL,{size:16,className:"inline mr-1"}),"Foto's (",g.photos?.length||0,")"]}),m.jsxs("button",{onClick:()=>l("notes"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="notes"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[m.jsx(kH,{size:16,className:"inline mr-1"}),"Notities"]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="info"&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[m.jsx(B1,{size:16}),m.jsx("span",{className:"text-xs text-gray-500",children:"Afstand"})]}),m.jsx("p",{className:"text-lg font-semibold",children:wTt(g.totalDistance)})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[m.jsx(wN,{size:16}),m.jsx("span",{className:"text-xs text-gray-500",children:"Duur"})]}),m.jsx("p",{className:"text-lg font-semibold",children:bTt(g.totalDuration)})]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[m.jsx(Sl,{size:16}),m.jsx("span",{className:"text-xs text-gray-500",children:"Punten"})]}),m.jsxs("p",{className:"text-lg font-semibold",children:[g.points.length," GPS punten"]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-1",children:[m.jsx(SH,{size:16}),m.jsx("span",{className:"text-xs text-gray-500",children:"Aangemaakt"})]}),m.jsx("p",{className:"text-sm",children:Zoe(g.createdAt)})]})]}),a==="photos"&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:h,className:"hidden"}),m.jsxs("button",{onClick:()=>c.current?.click(),className:"w-full py-8 border-2 border-dashed border-purple-300 rounded-lg text-purple-500 hover:bg-purple-50 transition-colors flex flex-col items-center gap-2",children:[m.jsx(du,{size:24}),m.jsx("span",{className:"text-sm",children:"Foto toevoegen"})]}),g.photos&&g.photos.length>0?m.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.photos.map(v=>m.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100",children:[m.jsx("img",{src:v.url,alt:v.caption||"Route foto",className:"w-full h-full object-cover"}),m.jsx("button",{onClick:()=>f(v.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors border-0 outline-none",children:m.jsx(zd,{size:12})}),v.caption&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 py-1 bg-black/50 text-white text-xs truncate",children:v.caption})]},v.id))}):m.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"Nog geen foto's toegevoegd"})]}),a==="notes"&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("textarea",{value:s,onChange:v=>o(v.target.value),placeholder:"Voeg notities toe over deze route...",className:"w-full h-48 p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"}),m.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none",children:"Notities opslaan"})]})]})]})]})}function STt({route:t,size:e=80}){const n=X.useRef(null);return X.useEffect(()=>{const r=n.current;if(!r||t.points.length<2)return;const i=r.getContext("2d");if(!i)return;i.fillStyle="#f3f4f6",i.fillRect(0,0,e,e);const s=t.points.map(P=>P.coordinates[0]),o=t.points.map(P=>P.coordinates[1]),a=Math.min(...s),l=Math.max(...s),c=Math.min(...o),u=Math.max(...o),h=8,f=e-h*2,g=e-h*2,v=P=>l===a?e/2:h+(P-a)/(l-a)*f,x=P=>u===c?e/2:h+g-(P-c)/(u-c)*g;i.strokeStyle="#a855f7",i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i.beginPath(),t.points.forEach((P,M)=>{const F=v(P.coordinates[0]),C=x(P.coordinates[1]);M===0?i.moveTo(F,C):i.lineTo(F,C)}),i.stroke();const b=v(t.points[0].coordinates[0]),T=x(t.points[0].coordinates[1]);i.fillStyle="#22c55e",i.beginPath(),i.arc(b,T,4,0,Math.PI*2),i.fill();const A=v(t.points[t.points.length-1].coordinates[0]),I=x(t.points[t.points.length-1].coordinates[1]);i.fillStyle="#ef4444",i.beginPath(),i.arc(A,I,4,0,Math.PI*2),i.fill()},[t,e]),t.points.length<2?m.jsx("div",{className:"bg-gray-100 rounded flex items-center justify-center text-gray-400",style:{width:e,height:e},children:m.jsx(Sl,{size:20})}):m.jsx("canvas",{ref:n,width:e,height:e,className:"rounded"})}const Qj=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,e8=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Joe=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"});function TTt({isOpen:t,onClose:e,onViewRoute:n}){const{savedRoutes:r,deleteRoute:i,renameRoute:s,clearAllRoutes:o,visibleRouteIds:a,toggleRouteVisibility:l,showAllRoutes:c,hideAllRoutes:u,heatmapEnabled:h,toggleHeatmap:f,gridEnabled:g,toggleGrid:v,centerGridOnCurrentLocation:x,gridSize:b,setGridSize:T,autoPauseEnabled:A,setAutoPauseEnabled:I,autoPauseSeconds:P,setAutoPauseSeconds:M,importRouteFromGPX:F}=ja(),[C,N]=X.useState(null),[O,j]=X.useState(""),[V,G]=X.useState(!1),[U,fe]=X.useState(!1),[Re,Be]=X.useState(null),[$e,pe]=X.useState(null),De=X.useRef(null),Me=async Se=>{const we=` ${Se.name}

 Afstand: ${Qj(Se.totalDistance)}
 Duur: ${e8(Se.totalDuration)}
 ${Se.points.length} GPS punten
 ${Joe(Se.createdAt)}

Opgenomen met DetectorApp NL`;if(navigator.share)try{await navigator.share({title:Se.name,text:we});return}catch(Dt){Dt.name!=="AbortError"&&console.error("Share failed:",Dt)}try{await navigator.clipboard.writeText(we),alert("Route info gekopieerd naar klembord!")}catch{prompt("Kopieer de route info:",we)}},Q=async Se=>{const we=Se.target.files?.[0];if(we){try{const Dt=await we.text(),Ye=F(Dt,we.name.replace(".gpx",""));Ye.success?alert(`Route gemporteerd: ${we.name}`):alert(`Import mislukt: ${Ye.error}`)}catch{alert("Fout bij lezen van bestand")}De.current&&(De.current.value="")}},W=Se=>{N(Se.id),j(Se.name)},ne=Se=>{O.trim()&&s(Se,O.trim()),N(null),j("")},ie=Se=>{confirm(`Weet je zeker dat je "${Se.name}" wilt verwijderen?`)&&i(Se.id)},le=()=>{r.length!==0&&confirm(`Weet je zeker dat je alle ${r.length} routes wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`)&&o()},ve=Se=>{l(Se);const we=r.find(Dt=>Dt.id===Se);we&&n&&n(we)},qe=r.reduce((Se,we)=>Se+we.totalDistance,0),Ke=r.reduce((Se,we)=>Se+we.totalDuration,0);return m.jsxs(m.Fragment,{children:[m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(kN,{size:20}),m.jsx("span",{className:"font-medium",children:"Mijn Routes"}),m.jsxs("span",{className:"text-purple-200 text-sm",children:["(",r.length,")"]})]}),m.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:m.jsx(ai,{size:18})})]}),r.length>0&&m.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100 flex items-center justify-between text-sm",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[m.jsx(B1,{size:14}),m.jsxs("span",{children:["Totaal: ",Qj(qe)]})]}),m.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[m.jsx(wN,{size:14}),m.jsx("span",{children:e8(Ke)})]})]}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{onClick:()=>fe(!U),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${A?"bg-green-100 text-green-600":"text-purple-600 hover:bg-purple-100"}`,title:A?"Auto-pauze uit":"Auto-pauze aan",children:m.jsx(vut,{size:14})}),m.jsx("button",{onClick:()=>G(!V),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${g?"bg-blue-100 text-blue-600":"text-purple-600 hover:bg-purple-100"}`,title:g?"Grid verbergen":"Grid tonen",children:m.jsx(Dwe,{size:14})}),m.jsx("button",{onClick:f,className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${h?"bg-orange-100 text-orange-600":"text-purple-600 hover:bg-purple-100"}`,title:h?"Heatmap verbergen":"Heatmap tonen",children:m.jsx(Xlt,{size:14})}),m.jsx("button",{onClick:c,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle tonen",children:m.jsx(TN,{size:14})}),m.jsx("button",{onClick:u,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle verbergen",children:m.jsx(SN,{size:14})})]})]}),m.jsx(Jn,{children:V&&m.jsx(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:m.jsxs("div",{className:"px-4 py-3 bg-blue-50 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Grid Assistent"}),m.jsx("button",{onClick:v,className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${g?"bg-blue-500 text-white":"bg-blue-200 text-blue-700"}`,children:g?"Aan":"Uit"})]}),m.jsx("div",{className:"flex items-center gap-2",children:m.jsxs("button",{onClick:x,className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[m.jsx(bN,{size:14}),"Centreer op mijn locatie"]})}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("label",{className:"text-xs text-blue-700",children:["Celgrootte: ",b,"m"]}),m.jsx("input",{type:"range",min:"5",max:"50",step:"5",value:b,onChange:Se=>T(Number(Se.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),m.jsxs("div",{className:"flex justify-between text-xs text-blue-600",children:[m.jsx("span",{children:"5m"}),m.jsx("span",{children:"50m"})]})]}),m.jsx("p",{className:"text-xs text-blue-600",children:"Gebruik het grid om systematisch een veld af te zoeken. Elk vak heeft een label (A1, B2, etc.) voor referentie."})]})})}),m.jsx(Jn,{children:U&&m.jsx(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:m.jsxs("div",{className:"px-4 py-3 bg-green-50 space-y-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium text-green-800",children:"Auto-pauze"}),m.jsx("button",{onClick:()=>I(!A),className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${A?"bg-green-500 text-white":"bg-green-200 text-green-700"}`,children:A?"Aan":"Uit"})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("label",{className:"text-xs text-green-700",children:["Pauze na: ",P<60?`${P}s`:`${Math.floor(P/60)}m ${P%60}s`]}),m.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:P,onChange:Se=>M(Number(Se.target.value)),className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),m.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[m.jsx("span",{children:"30s"}),m.jsx("span",{children:"5min"})]})]}),m.jsxs("p",{className:"text-xs text-green-600",children:["De opname pauzeert automatisch als je langer dan ",P<60?`${P} seconden`:`${Math.floor(P/60)} minuten`," stilstaat. Ideaal voor pauzes tijdens het detecteren."]})]})})}),m.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:r.length===0?m.jsxs("div",{className:"text-center py-12 text-gray-500",children:[m.jsx(kN,{size:48,className:"mx-auto mb-3 text-gray-300"}),m.jsx("p",{className:"font-medium",children:"Nog geen routes"}),m.jsx("p",{className:"text-sm mt-1",children:"Start een opname om je eerste route vast te leggen"})]}):r.map(Se=>m.jsxs(kt.div,{layout:!0,className:"bg-gray-50 rounded-lg p-3 flex gap-3",children:[m.jsx(STt,{route:Se,size:70}),m.jsxs("div",{className:"flex-1 min-w-0",children:[C===Se.id?m.jsx("input",{type:"text",value:O,onChange:we=>j(we.target.value),onKeyDown:we=>{we.key==="Enter"&&ne(Se.id),we.key==="Escape"&&N(null)},onBlur:()=>ne(Se.id),className:"w-full px-2 py-1 text-sm bg-white border border-purple-300 rounded outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0}):m.jsx("h3",{className:"font-medium text-gray-800 truncate",children:Se.name}),m.jsx("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(SH,{size:12}),Joe(Se.createdAt)]})}),m.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-600",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(B1,{size:12}),Qj(Se.totalDistance)]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx(wN,{size:12}),e8(Se.totalDuration)]}),m.jsxs("span",{children:[Se.points.length," punten"]})]})]}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx("button",{onClick:()=>ve(Se.id),className:`p-1.5 rounded transition-colors border-0 outline-none ${a.has(Se.id)?"bg-purple-100 text-purple-600":"text-gray-400 hover:text-purple-600 hover:bg-purple-50"}`,title:a.has(Se.id)?"Verbergen op kaart":"Tonen op kaart",children:a.has(Se.id)?m.jsx(TN,{size:16}):m.jsx(SN,{size:16})}),m.jsx("button",{onClick:()=>W(Se),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:m.jsx(C2,{size:16})}),m.jsx("button",{onClick:()=>pe(Se),className:"p-1.5 text-gray-400 hover:text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none",title:"Details & foto's",children:m.jsx(AH,{size:16})}),m.jsx("button",{onClick:()=>Be(Se),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Hoogteprofiel",children:m.jsx(R2,{size:16})}),m.jsx("button",{onClick:()=>Me(Se),className:"p-1.5 text-gray-400 hover:text-pink-600 hover:bg-pink-50 rounded transition-colors border-0 outline-none",title:"Delen",children:m.jsx(tut,{size:16})}),m.jsx("button",{onClick:()=>NEe(Se),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteer als GPX",children:m.jsx(EN,{size:16})}),m.jsx("button",{onClick:()=>ie(Se),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:m.jsx(zd,{size:16})})]})]},Se.id))}),m.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",children:[m.jsx("input",{ref:De,type:"file",accept:".gpx",onChange:Q,className:"hidden"}),m.jsxs("button",{onClick:()=>De.current?.click(),className:"w-full px-3 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors border-0 outline-none text-sm flex items-center justify-center gap-2",children:[m.jsx(NI,{size:16}),"GPX bestand importeren"]}),r.length>0&&m.jsx("button",{onClick:le,className:"w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none text-sm",children:"Alle routes verwijderen"})]})]})]})}),m.jsx(Jn,{children:Re&&m.jsx(xTt,{route:Re,onClose:()=>Be(null)})}),m.jsx(Jn,{children:$e&&m.jsx(ETt,{route:$e,onClose:()=>pe(null)})})]})}const t8={lat:52.1326,lon:5.2913};function DEe({code:t,size:e=18}){return t===0?m.jsx(dut,{size:e,className:"text-yellow-500"}):t>=1&&t<=3?m.jsx(yp,{size:e,className:"text-gray-400"}):t===45||t===48?m.jsx(Plt,{size:e,className:"text-gray-400"}):t>=51&&t<=67||t>=80&&t<=82?m.jsx(TH,{size:e,className:"text-blue-500"}):t>=71&&t<=77||t>=85&&t<=86?m.jsx(Dlt,{size:e,className:"text-cyan-500"}):t>=95?m.jsx(Clt,{size:e,className:"text-purple-500"}):m.jsx(yp,{size:e,className:"text-gray-400"})}function kTt({degrees:t,size:e=14}){return m.jsx("div",{style:{transform:`rotate(${t+180}deg)`},className:"inline-flex",children:m.jsx(yb,{size:e,className:"text-blue-500"})})}function ATt({data:t}){if(!t||t.length===0)return null;const e=Math.max(...t.map(r=>r.precipitation),.5),n=t.some(r=>r.precipitation>0);return m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{style:{fontSize:"0.83em"},className:"text-gray-500",children:"Neerslag 2 uur"}),!n&&m.jsx("span",{style:{fontSize:"0.83em"},className:"text-green-600 font-medium",children:"Droog"})]}),m.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 flex items-end px-0.5",children:t.map((r,i)=>{const s=r.precipitation/e*100,o=r.precipitation>2?"bg-blue-600":r.precipitation>.5?"bg-blue-500":r.precipitation>0?"bg-blue-400":"bg-transparent";return m.jsx("div",{className:"flex-1 mx-px",children:m.jsx("div",{className:`w-full rounded-t transition-all ${o}`,style:{height:`${Math.max(s,r.precipitation>0?8:0)}%`}})},i)})}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-gray-400",style:{fontSize:"0.67em"},children:[m.jsx("span",{children:"Nu"}),m.jsx("span",{children:"+1u"}),m.jsx("span",{children:"+2u"})]})]})]})}function ITt({pollen:t}){const e=[{name:"Gras",value:t.grass},{name:"Berk",value:t.birch},{name:"Els",value:t.alder},{name:"Bijvoet",value:t.mugwort}].filter(i=>i.value>0).sort((i,s)=>s.value-i.value);if(e.length===0)return m.jsxs("div",{className:"flex items-center gap-1.5 text-green-600",style:{fontSize:"0.83em"},children:[m.jsx(kse,{size:12}),m.jsx("span",{children:"Lage pollenconcentratie"})]});const n=e[0],r=n.value>=4?"text-red-500":n.value>=3?"text-orange-500":n.value>=2?"text-amber-500":"text-green-600";return m.jsxs("div",{className:`flex items-center gap-1.5 ${r}`,style:{fontSize:"0.83em"},children:[m.jsx(kse,{size:12}),m.jsxs("span",{children:[n.name,": ",n.value>=4?"Zeer hoog":n.value>=3?"Hoog":n.value>=2?"Matig":"Laag"]})]})}function PTt({hourly:t}){const e=t.slice(0,6);return e.length===0?null:m.jsxs("div",{className:"space-y-1",children:[m.jsx("div",{className:"text-gray-500",style:{fontSize:"0.83em"},children:"Komende uren"}),m.jsx("div",{className:"flex gap-1",children:e.map((n,r)=>{const i=new Date(n.time),s=r===0;return m.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded-lg flex-1 ${s?"bg-blue-100":"bg-gray-50"}`,children:[m.jsx("span",{className:"text-gray-500",style:{fontSize:"0.75em"},children:s?"Nu":`${i.getHours()}u`}),m.jsx(DEe,{code:n.weatherCode,size:14}),m.jsxs("span",{className:"font-medium",style:{fontSize:"0.83em"},children:[Math.round(n.temperature),""]})]},n.time)})})]})}function RTt(){const t=Pn(x=>x.showWeatherButton),e=Pn(x=>x.showFontSliders),n=Pn(x=>x.weatherFontScale),r=Pn(x=>x.setWeatherFontScale),i=Es(),s=nT(),[o,a]=X.useState(!1),l=12*n/100,c=nT(x=>x.showBuienradar),u=nT(x=>x.setShowBuienradar);if(X.useEffect(()=>{c&&a(!1)},[c]),X.useEffect(()=>{if(!t)return;const x=i.position||t8;(!s.weatherData||Date.now()-s.weatherData.lastUpdated>600*1e3)&&s.fetchWeather(x.lat,x.lon)},[t,i.position?.lat]),X.useEffect(()=>{if(!t)return;const x=setInterval(()=>{const b=i.position||t8;s.fetchWeather(b.lat,b.lon)},600*1e3);return()=>clearInterval(x)},[t,i.position?.lat]),!t)return null;const h=s.weatherData?.current,f=s.weatherData?.hourly||[],g=s.weatherData?.precipitation15min||[],v=s.weatherData?.pollen;return m.jsxs(m.Fragment,{children:[o&&m.jsx("div",{className:"fixed inset-0 z-[1099]",onClick:()=>a(!1)}),m.jsx(kt.div,{className:"fixed left-2 z-[1100] bg-white shadow-lg border border-gray-200 select-none rounded-xl",style:{top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))",width:o?"200px":"auto",maxWidth:"200px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},layout:!0,children:s.isLoading&&!h?m.jsxs("div",{className:"p-3 flex items-center gap-2",style:{fontSize:`${l}px`},children:[m.jsx(zct,{size:16,className:"animate-spin text-blue-500"}),m.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Laden..."})]}):h?m.jsxs("div",{className:"p-2.5",style:{fontSize:`${l}px`},children:[m.jsxs("button",{onClick:()=>a(!o),className:"w-full border-0 outline-none bg-transparent p-0",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(DEe,{code:h.weatherCode,size:24}),m.jsx("div",{className:"flex flex-col leading-tight",children:m.jsxs("span",{className:"font-bold text-gray-800",style:{fontSize:"1.5em"},children:[Math.round(h.temperature),""]})})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Ise,{size:14,className:"text-gray-400"}),m.jsx("span",{className:"text-gray-600",style:{fontSize:"1.17em"},children:Math.round(h.windSpeed)}),m.jsx(kTt,{degrees:h.windDirection,size:12})]}),m.jsx("div",{className:"ml-auto",children:o?m.jsx(lL,{size:16,className:"text-gray-400"}):m.jsx(mb,{size:16,className:"text-gray-400"})})]}),m.jsxs("div",{className:"text-gray-500 text-left mt-1",style:{fontSize:"0.92em"},children:[_De[h.weatherCode]||"Onbekend",m.jsxs("span",{className:"text-gray-400 ml-1",children:[" ",Math.round(h.apparentTemperature),""]})]})]}),m.jsx(Jn,{children:o&&m.jsx(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:m.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200/50 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[m.jsx(Blt,{size:12,className:"text-blue-500"}),m.jsx("span",{children:"Vocht"})]}),m.jsxs("div",{className:"font-bold text-blue-600",style:{fontSize:"1.17em"},children:[h.humidity,"%"]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[m.jsx(Ise,{size:12,className:"text-gray-500"}),m.jsx("span",{children:"Windstoten"})]}),m.jsxs("div",{className:"font-bold text-gray-600",style:{fontSize:"1.17em"},children:[Math.round(h.windGusts)," km/u"]})]}),m.jsxs("div",{className:"bg-cyan-50 rounded-lg p-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[m.jsx(yb,{size:12,className:"text-cyan-500"}),m.jsx("span",{children:"Wind"})]}),m.jsx("div",{className:"font-bold text-cyan-600",style:{fontSize:"1.17em"},children:xDe(h.windDirection)})]}),m.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[m.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[m.jsx(yp,{size:12,className:"text-purple-500"}),m.jsx("span",{children:"Bewolking"})]}),m.jsxs("div",{className:"font-bold text-purple-600",style:{fontSize:"1.17em"},children:[h.cloudCover,"%"]})]})]}),m.jsxs("button",{onClick:()=>u(!c),className:`w-full flex items-center gap-2 p-2 rounded-lg transition-colors border-0 cursor-pointer ${c?"bg-blue-500 hover:bg-blue-600":"bg-blue-50 hover:bg-blue-100"}`,children:[m.jsx(TH,{size:16,className:c?"text-white":"text-blue-500"}),m.jsx("span",{className:`font-medium ${c?"text-white":"text-blue-700"}`,style:{fontSize:"1.17em"},children:"Buienradar"}),m.jsx("span",{className:`ml-auto ${c?"text-blue-100":"text-blue-500"}`,style:{fontSize:"1em"},children:c?"Aan":"Uit"})]}),g.length>0&&m.jsx(ATt,{data:g}),f.length>0&&m.jsx(PTt,{hourly:f}),v&&m.jsx(ITt,{pollen:v}),m.jsxs("div",{className:"text-gray-400 text-center pt-1",style:{fontSize:"0.75em"},children:["Bijgewerkt: ",new Date(s.weatherData.lastUpdated).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})]}),e&&m.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200/50",children:[m.jsx(PH,{size:12,className:"text-gray-400"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:n,onChange:x=>r(parseInt(x.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),m.jsxs("span",{className:"text-gray-400 w-8",style:{fontSize:"0.83em"},children:[n,"%"]})]})]})})})]}):m.jsxs("button",{onClick:()=>{const x=i.position||t8;s.fetchWeather(x.lat,x.lon)},className:"p-3 flex items-center gap-2 border-0 outline-none bg-transparent",style:{fontSize:`${l}px`},children:[m.jsx(yp,{size:18,className:"text-gray-400"}),m.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Weer laden"})]})})]})}function CTt({isVisible:t,onClose:e}){const n=ji(M=>M.map),r=X.useRef(null),i=X.useRef(null),[s,o]=X.useState([]),[a,l]=X.useState(0),[c,u]=X.useState(!0),[h,f]=X.useState(!0),[g,v]=X.useState("normal"),[x,b]=X.useState(70),T=g==="slow"?800:g==="normal"?500:250,A=X.useCallback(async()=>{f(!0);try{const F=await(await fetch("https://api.rainviewer.com/public/weather-maps.json")).json(),C=[];F.radar?.past&&F.radar.past.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),F.radar?.nowcast&&F.radar.nowcast.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),o(C);const N=F.radar?.past?.length?F.radar.past.length-1:0;l(N)}catch(M){console.error("Failed to fetch radar data:",M)}finally{f(!1)}},[]);X.useEffect(()=>{if(t){A();const M=setInterval(A,300*1e3);return()=>clearInterval(M)}},[t,A]),X.useEffect(()=>{if(!n||!t||s.length===0)return;const M=s[a];if(!M)return;const F=`https://tilecache.rainviewer.com${M.path}/256/{z}/{x}/{y}/2/1_1.png`;if(r.current){const C=r.current.getSource();C&&(C.setUrl(F),C.refresh())}else{const C=new gy({url:F,crossOrigin:"anonymous"}),N=new Cm({source:C,opacity:x/100,zIndex:1500,properties:{name:"rain-radar-layer",title:"Buienradar"}});r.current=N,n.addLayer(N)}return()=>{}},[n,t,s,a]),X.useEffect(()=>{r.current&&r.current.setOpacity(x/100)},[x]),X.useEffect(()=>{!t&&r.current&&n&&(n.removeLayer(r.current),r.current=null)},[t,n]),X.useEffect(()=>()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null),i.current&&clearInterval(i.current)},[n]),X.useEffect(()=>{if(!c||s.length===0||!t){i.current&&(clearInterval(i.current),i.current=null);return}return i.current=setInterval(()=>{l(M=>(M+1)%s.length)},T),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[c,s.length,T,t]);const I=X.useCallback(()=>{if(s.length===0||!s[a])return"--:--";const M=s[a].time,F=Date.now(),C=Math.round((M-F)/6e4),O=new Date(M).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});return Math.abs(C)<3?`${O} (nu)`:C<0?`${O} (${C}m)`:`${O} (+${C}m)`},[s,a]),P=M=>{u(!1),l(F=>M==="prev"?F>0?F-1:s.length-1:(F+1)%s.length)};return t?m.jsx(Jn,{children:m.jsxs(kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-2 right-2 z-[1600] bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200",style:{maxWidth:"400px",margin:"0 auto"},children:[m.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-gray-100",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(TH,{size:14,className:"text-blue-500"}),m.jsx("span",{className:"text-xs font-medium text-gray-700",children:h?"Laden...":I()})]}),m.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:m.jsx(ai,{size:14,className:"text-gray-500"})})]}),m.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[m.jsxs("div",{className:"flex items-center gap-0.5",children:[m.jsx("button",{onClick:()=>P("prev"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:m.jsx(Nwe,{size:14,className:"text-gray-600"})}),m.jsx("button",{onClick:()=>u(!c),className:`p-1.5 rounded transition-colors border-0 outline-none ${c?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:c?m.jsx(Uwe,{size:14}):m.jsx(Bwe,{size:14})}),m.jsx("button",{onClick:()=>P("next"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:m.jsx(gb,{size:14,className:"text-gray-600"})})]}),m.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[m.jsx("span",{className:"text-[9px] text-gray-400 w-6",children:"-2u"}),m.jsx("input",{type:"range",min:"0",max:Math.max(0,s.length-1),value:a,onChange:M=>{u(!1),l(parseInt(M.target.value))},className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),m.jsx("span",{className:"text-[9px] text-gray-400 w-8 text-right",children:"+30m"})]}),m.jsx("div",{className:"flex items-center gap-0.5 bg-gray-100 rounded p-0.5",children:["slow","normal","fast"].map(M=>m.jsxs("button",{onClick:()=>v(M),className:`px-1.5 py-0.5 text-[9px] rounded transition-colors border-0 outline-none ${g===M?"bg-white text-blue-600 shadow-sm":"text-gray-500 bg-transparent"}`,children:[M==="slow"?"":M==="normal"?"1":"2",""]},M))})]}),m.jsxs("div",{className:"px-3 py-1.5 flex items-center gap-2 border-t border-gray-100",children:[m.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:"Dekking"}),m.jsx("input",{type:"range",min:"10",max:"100",value:x,onChange:M=>b(parseInt(M.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),m.jsxs("span",{className:"text-[10px] text-gray-500 w-8 text-right",children:[x,"%"]})]}),m.jsxs("div",{className:"px-3 pb-1.5 flex items-center justify-center gap-1.5",children:[m.jsx("span",{className:"text-[8px] text-gray-400",children:"Licht"}),m.jsxs("div",{className:"flex h-1.5 rounded overflow-hidden",children:[m.jsx("div",{className:"w-3",style:{backgroundColor:"#88D0F3"}}),m.jsx("div",{className:"w-3",style:{backgroundColor:"#32B8A4"}}),m.jsx("div",{className:"w-3",style:{backgroundColor:"#F4E61F"}}),m.jsx("div",{className:"w-3",style:{backgroundColor:"#F09D1C"}}),m.jsx("div",{className:"w-3",style:{backgroundColor:"#E12E18"}})]}),m.jsx("span",{className:"text-[8px] text-gray-400",children:"Zwaar"})]})]})}):null}const Qoe={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},MTt={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function NTt(){const t=ji(i=>i.map),e=lh(i=>i.vondsten),n=Pn(i=>i.showLocalVondsten),r=X.useRef(null);return X.useEffect(()=>{if(!t)return;const i=new fu;return e.forEach(s=>{const o=new Gr({geometry:new ts(Ci([s.location.lng,s.location.lat])),vondst:s}),a=Qoe[s.objectType]||Qoe.Anders,l=MTt[s.objectType]||"?";o.setStyle((c,u)=>{let v=12;u>50?v=6:u>10?v=Math.max(6,12-(u-10)/10):u<2&&(v=14);const x=Math.max(8,Math.min(12,v-2));return new In({image:new uo({radius:v,fill:new sr({color:a}),stroke:new Bn({color:"#ffffff",width:v>8?2:1})}),text:v>=8?new nu({text:l,font:`bold ${x}px sans-serif`,fill:new sr({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(o)}),r.current?r.current.setSource(i):(r.current=new yh({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(n),t.addLayer(r.current)),()=>{r.current&&t&&(t.removeLayer(r.current),r.current=null)}},[t,e]),X.useEffect(()=>{r.current&&r.current.setVisible(n)},[n]),null}const OTt={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function LTt(t){const{type:e,coordinates:n}=t,r=s=>typeof s[0]=="number"?Ci(s):s.map(r),i=r(n);switch(e){case"Point":return new ts(i);case"LineString":return new Qi(i);case"Polygon":return new bl(i);case"MultiPoint":return new Zg(i);case"MultiLineString":return new uh(i);case"MultiPolygon":return new lp(i);default:return new ts(Ci(n))}}function DTt(){const t=ji(i=>i.map),e=co(i=>i.layers),n=Pn(i=>i.showCustomPointLayers),r=X.useRef(new Map);return X.useEffect(()=>{if(!t)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,o)=>{i.has(o)||(t.removeLayer(s),r.current.delete(o))}),e.forEach(s=>{const o=new fu;s.points.forEach(l=>{let c;const u=l.geometry&&l.geometry.type!=="Point";l.geometry?c=LTt(l.geometry):c=new ts(Ci(l.coordinates));const h=new Gr({geometry:c,layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),f=OTt[l.category]||l.category.charAt(0).toUpperCase();if(u){const g=l.geometry.type;h.setStyle(()=>g==="Polygon"||g==="MultiPolygon"?new In({fill:new sr({color:s.color+"40"}),stroke:new Bn({color:s.color,width:2})}):g==="LineString"||g==="MultiLineString"?new In({stroke:new Bn({color:s.color,width:3})}):new In({image:new uo({radius:8,fill:new sr({color:s.color}),stroke:new Bn({color:"#ffffff",width:2})})}))}else h.setStyle((g,v)=>{let A=12;v>50?A=6:v>10?A=Math.max(6,12-(v-10)/10):v<2&&(A=14);const I=Math.max(8,Math.min(12,A-2));return new In({image:new uo({radius:A,fill:new sr({color:s.color}),stroke:new Bn({color:"#ffffff",width:A>8?2:1})}),text:A>=8?new nu({text:f,font:`bold ${I}px sans-serif`,fill:new sr({color:"#ffffff"}),offsetY:1}):void 0})});o.addFeature(h)});const a=r.current.get(s.id);if(a)a.setSource(o),a.setVisible(n&&s.visible);else{const l=new yh({source:o,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:n&&s.visible});t.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{t&&t.removeLayer(s)}),r.current.clear()}},[t,e,n]),null}function $Tt(){const{createLayerModalOpen:t,closeCreateLayerModal:e}=zr(),{addLayer:n}=co(),r=Pn(),[i,s]=X.useState(""),[o,a]=X.useState([...$m]),[l,c]=X.useState(""),u=14*r.fontScale/100,h=()=>{const b=l.trim();b&&!o.includes(b)&&(a([...o,b]),c(""))},f=b=>{a(o.filter(T=>T!==b))},g=b=>{o.includes(b)?a(o.filter(T=>T!==b)):a([...o,b])},v=()=>{i.trim()&&(n(i.trim(),o),s(""),a([...$m]),c(""),e())},x=()=>{s(""),a([...$m]),c(""),e()};return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(uc,{size:18}),m.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:b=>r.setFontScale(parseInt(b.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),m.jsx("span",{className:"text-xs opacity-70",children:"T"}),m.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:m.jsx(ai,{size:18})})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${u}px`},children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),m.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:$m.map(b=>m.jsx("button",{onClick:()=>g(b),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${o.includes(b)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:b},b))})]}),o.filter(b=>!$m.includes(b)).length>0&&m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:o.filter(b=>!$m.includes(b)).map(b=>m.jsxs("div",{className:"flex items-center",children:[m.jsx("button",{onClick:()=>g(b),className:"px-3 py-1 rounded-l-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:b}),m.jsx("button",{onClick:()=>f(b),className:"px-2 py-1 rounded-r-full bg-orange-600 text-white hover:bg-orange-700 transition-colors border-0 outline-none",title:"Verwijder categorie",children:m.jsx(zd,{size:12})})]},b))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:b=>b.key==="Enter"&&h()}),m.jsx("button",{onClick:h,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:m.jsx(du,{size:20})})]})]})]}),m.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${u}px`},children:[m.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),m.jsx("button",{onClick:v,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const $Ee=200,jTt=.7;async function FTt(t,e=$Ee){return new Promise((n,r)=>{const i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");i.onload=()=>{let a=i.width,l=i.height;a>l?a>e&&(l=Math.round(l*e/a),a=e):l>e&&(a=Math.round(a*e/l),l=e),s.width=a,s.height=l,o?.drawImage(i,0,0,a,l),s.toBlob(c=>{c?n(c):r(new Error("Failed to create blob from canvas"))},"image/jpeg",jTt)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(t)})}function VTt(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert blob to base64"))},r.onerror=()=>n(new Error("Failed to read blob")),r.readAsDataURL(t)})}async function zTt(t){const e=await FTt(t,$Ee),n=await VTt(e);return{thumbnailBlob:e,thumbnailBase64:n}}function UTt(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const n8=5;function GTt({photos:t,onAddPhoto:e,onRemovePhoto:n,disabled:r}){const i=X.useRef(null),s=X.useRef(null),o=async l=>{const c=l.target.files;if(!c||c.length===0)return;const u=n8-t.length,h=Array.from(c).slice(0,u);for(const f of h)try{const{thumbnailBase64:g}=await zTt(f),v={id:UTt(),thumbnailBase64:g,createdAt:new Date().toISOString(),pendingUpload:!0};e(v)}catch(g){console.error("Failed to process image:",g)}l.target.value=""},a=t.length<n8;return m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",t.length,"/",n8,")"]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(l=>m.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[m.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&m.jsx("button",{type:"button",onClick:()=>n(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:m.jsx(ai,{size:12,className:"text-white"})}),l.pendingUpload&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),a&&!r&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[m.jsx(aL,{size:20,className:"text-gray-400"}),m.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),m.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[m.jsx(pct,{size:20,className:"text-gray-400"}),m.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),m.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:o,className:"hidden"}),m.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"})]})}function BTt(){const{addPointModalOpen:t,addPointModalLayerId:e,addPointModalLocation:n,closeAddPointModal:r}=zr(),{addPoint:i,getLayer:s}=co(),o=Pn(),[a,l]=X.useState(""),[c,u]=X.useState(""),[h,f]=X.useState(""),[g,v]=X.useState([]),x=e?s(e):null,b=14*o.fontScale/100,T=()=>{!a.trim()||!e||!n||(i(e,{name:a.trim(),category:"Overig",notes:c.trim(),url:h.trim()||void 0,coordinates:[n.lng,n.lat],photos:g.length>0?g:void 0}),l(""),u(""),f(""),v([]),r())},A=()=>{l(""),u(""),f(""),v([]),r()};return x?m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Sl,{size:18}),m.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:I=>o.setFontScale(parseInt(I.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),m.jsx("span",{className:"text-xs opacity-70",children:"T"}),m.jsx("button",{onClick:A,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:m.jsx(ai,{size:18})})]})]}),m.jsx("div",{className:"px-4 py-1.5",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:x.color}}),m.jsx("span",{className:"text-sm text-gray-600",children:x.name})]})}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${b}px`},children:[m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),m.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),m.jsx(GTt,{photos:g,onAddPhoto:I=>v([...g,I]),onRemovePhoto:I=>v(g.filter(P=>P.id!==I))}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),m.jsx("textarea",{value:c,onChange:I=>u(I.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),m.jsx("input",{type:"url",value:h,onChange:I=>f(I.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),m.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${b}px`},children:[m.jsx("button",{onClick:A,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),m.jsx("button",{onClick:T,disabled:!a.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function WTt(){const{layerManagerModalOpen:t,closeLayerManagerModal:e,openCreateLayerModal:n,openLayerDashboard:r}=zr(),{layers:i,removeLayer:s,toggleVisibility:o,toggleArchived:a,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:c}=co(),u=Pn(),h=14*u.fontScale/100,[f,g]=X.useState(null),[v,x]=X.useState(null),[b,T]=X.useState(null),[A,I]=X.useState(!1),P=i.filter(U=>!U.archived),M=i.filter(U=>U.archived),F=A?M:P,C=U=>{v===U?(s(U),x(null)):(x(U),setTimeout(()=>x(null),3e3))},N=U=>{l(U)},O=async U=>{const fe=U.target.files?.[0];if(fe){try{const Re=await fe.text(),Be=c(Re);Be.success||(T(Be.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}U.target.value=""}},j=()=>{g(null),x(null),T(null),I(!1),e()},V=U=>{r(U)},G=()=>{j(),n()};return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(uc,{size:18}),m.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:u.fontScale,onChange:U=>u.setFontScale(parseInt(U.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${u.fontScale}%`}),m.jsx("span",{className:"text-xs opacity-70",children:"T"}),m.jsx("button",{onClick:j,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:m.jsx(ai,{size:18})})]})]}),m.jsxs("div",{className:"flex border-b border-gray-100",children:[m.jsxs("button",{onClick:()=>I(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${A?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",P.length,")"]}),m.jsxs("button",{onClick:()=>I(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${A?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[m.jsx(Pwe,{size:14}),"Archief (",M.length,")"]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${h}px`},children:[F.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500",children:A?m.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),m.jsxs("button",{onClick:G,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[m.jsx(du,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):m.jsx("div",{className:"divide-y divide-gray-100",children:F.map(U=>m.jsx(qTt,{layer:U,isExpanded:f===U.id,onToggleExpand:()=>g(f===U.id?null:U.id),onToggleVisibility:()=>o(U.id),onToggleArchived:()=>a(U.id),onOpenDashboard:()=>V(U.id),onExport:()=>N(U.id),onDelete:()=>C(U.id),confirmDelete:v===U.id,onRename:fe=>co.getState().updateLayer(U.id,{name:fe}),onChangeColor:fe=>co.getState().updateLayer(U.id,{color:fe})},U.id))}),b&&m.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:b})]}),m.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[m.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[m.jsx(NI,{size:16}),m.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),m.jsx("input",{type:"file",accept:".geojson,.json",onChange:O,className:"hidden"})]}),m.jsxs("button",{onClick:G,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[m.jsx(du,{size:16}),m.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}const HTt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];function qTt({layer:t,isExpanded:e,onToggleExpand:n,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:o,onDelete:a,confirmDelete:l,onRename:c,onChangeColor:u}){const[h,f]=X.useState(!1),[g,v]=X.useState(t.name),[x,b]=X.useState(!1),T=X.useRef(null);X.useEffect(()=>{h&&T.current&&(T.current.focus(),T.current.select())},[h]);const A=()=>{v(t.name),f(!0)},I=()=>{const N=g.trim();N&&N!==t.name&&c(N),f(!1)},P=()=>{v(t.name),f(!1)},M=N=>{N.key==="Enter"?I():N.key==="Escape"&&P()},F=t.points.filter(N=>N.status==="completed").length,C=t.points.length;return m.jsxs("div",{className:"bg-white",children:[m.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[m.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?m.jsx(mb,{size:16}):m.jsx(gb,{size:16})}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>b(!x),className:"w-5 h-5 rounded-full flex-shrink-0 border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),x&&m.jsx("div",{className:"absolute top-7 left-0 z-50 bg-white rounded-lg shadow-lg p-2 flex flex-wrap gap-1 w-24",children:HTt.map(N=>m.jsx("button",{onClick:()=>{u(N),b(!1)},className:`w-5 h-5 rounded-full border-2 hover:scale-110 transition-transform ${N===t.color?"border-gray-800":"border-white"}`,style:{backgroundColor:N}},N))})]}),h?m.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[m.jsx("input",{ref:T,type:"text",value:g,onChange:N=>v(N.target.value),onKeyDown:M,onBlur:I,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),m.jsx("button",{onClick:I,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:m.jsx(gp,{size:16})})]}):m.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[m.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:t.name}),m.jsx("div",{className:"text-xs text-gray-500",children:C>0?m.jsxs("span",{className:F===C?"text-green-600":"",children:[F,"/",C," voltooid"]}):"Geen punten"})]}),!h&&m.jsx("button",{onClick:A,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:m.jsx(C2,{size:16})}),m.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:m.jsx(Fwe,{size:18})}),!t.archived&&m.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${t.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:t.visible?"Verbergen":"Tonen",children:t.visible?m.jsx(TN,{size:18}):m.jsx(SN,{size:18})}),m.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${t.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:t.archived?"Herstellen":"Archiveren",children:t.archived?m.jsx(ult,{size:18}):m.jsx(Pwe,{size:18})}),m.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:m.jsx(EN,{size:18})}),m.jsx("button",{onClick:a,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:m.jsx(zd,{size:18})})]}),m.jsx(Jn,{children:e&&m.jsx(kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:m.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[t.categories.length>0&&m.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map(N=>m.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:N},N))}),t.points.length>0&&m.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[t.points.slice(0,5).map(N=>m.jsx("div",{className:"flex items-center gap-2",children:m.jsx("span",{className:`font-medium ${N.status==="completed"?"text-green-600 line-through":N.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:N.name})},N.id)),t.points.length>5&&m.jsxs("div",{className:"text-gray-400",children:["...en ",t.points.length-5," meer"]})]}),m.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(t.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function KTt(){const{layerDashboardOpen:t,layerDashboardLayerId:e,closeLayerDashboard:n}=zr(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:o}=co(),a=Pn(),[l,c]=X.useState("all"),[u,h]=X.useState(null),[f,g]=X.useState(""),[v,x]=X.useState(null),b=e?r(e):null,T=14*a.fontScale/100;if(!b)return null;const A=b.points.filter(V=>l==="all"?!0:V.status===l),I=b.points.length,P=b.points.filter(V=>V.status==="completed").length,M=b.points.filter(V=>V.status==="todo").length,F=b.points.filter(V=>V.status==="skipped").length,C=(V,G)=>{i(b.id,V,G)},N=V=>{s(b.id,V,{notes:f}),h(null),g("")},O=V=>{v===V?(o(b.id,V),x(null)):(x(V),setTimeout(()=>x(null),3e3))},j=()=>{h(null),x(null),n()};return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:j}),m.jsxs(kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:b.color}}),m.jsx("span",{className:"font-medium truncate",children:b.name})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),m.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:V=>a.setFontScale(parseInt(V.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),m.jsx("span",{className:"text-xs opacity-70",children:"T"}),m.jsx("button",{onClick:j,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:m.jsx(ai,{size:18})})]})]}),m.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[m.jsxs("span",{className:"text-orange-800 font-medium",children:[P,"/",I," voltooid"]}),m.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[m.jsxs("span",{className:"text-orange-600",children:[M," te doen"]}),F>0&&m.jsxs("span",{className:"text-gray-500",children:[F," overgeslagen"]})]})]}),m.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(V=>m.jsxs("button",{onClick:()=>c(V),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===V?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[V==="all"&&"Alles",V==="todo"&&"Te doen",V==="completed"&&"Voltooid",V==="skipped"&&"Overgeslagen"]},V))}),m.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:A.length===0?m.jsx("div",{className:"p-8 text-center text-gray-500",children:m.jsx("p",{children:"Geen punten gevonden"})}):m.jsx("div",{className:"divide-y divide-gray-100",children:A.map(V=>m.jsx("div",{className:"p-3",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[m.jsx("button",{onClick:()=>C(V.id,V.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${V.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:V.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:m.jsx(gp,{size:14,className:V.status==="completed"?"text-green-600":"text-gray-400"})}),m.jsx("button",{onClick:()=>C(V.id,V.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${V.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:V.status==="skipped"?"Markeer als te doen":"Overslaan",children:m.jsx(flt,{size:14,className:V.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),V.photos&&V.photos.length>0&&m.jsxs("div",{className:"relative flex-shrink-0",children:[m.jsx("img",{src:V.photos[0].thumbnailUrl||V.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),V.photos.length>1&&m.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",V.photos.length-1]})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`font-medium truncate ${V.status==="completed"?"text-green-700 line-through":V.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:V.name}),V.sourceLayer&&m.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",V.sourceLayer]})]}),u===V.id?m.jsxs("div",{className:"mt-2",children:[m.jsx("textarea",{value:f,onChange:G=>g(G.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),m.jsxs("div",{className:"flex gap-2 mt-1",children:[m.jsx("button",{onClick:()=>N(V.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),m.jsx("button",{onClick:()=>{h(null),g("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):V.notes?m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:V.notes}):null,V.url&&m.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[m.jsx(bg,{size:12}),"Link"]})]}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx("button",{onClick:()=>{h(V.id),g(V.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:m.jsx(Lct,{size:14})}),m.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${V.coordinates[1]},${V.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:m.jsx(Sl,{size:14})}),m.jsx("button",{onClick:()=>O(V.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${v===V.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:v===V.id?"Klik nogmaals":"Verwijderen",children:m.jsx(zd,{size:14})})]})]})},V.id))})})]})]})})}function YTt(){const[t,e]=X.useState(navigator.onLine),[n,r]=X.useState(!1);return X.useEffect(()=>{const i=()=>{e(!0),r(!1)},s=()=>{e(!1),r(!1)};return window.addEventListener("online",i),window.addEventListener("offline",s),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),t||n?null:m.jsx(Jn,{children:m.jsx(kt.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"fixed top-0 left-0 right-0 z-[2000] bg-amber-500 text-white px-4 py-2 shadow-lg",children:m.jsxs("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Out,{size:18}),m.jsx("span",{className:"text-sm font-medium",children:"Offline modus - Kaart werkt met gecachede data"})]}),m.jsx("button",{onClick:()=>r(!0),className:"p-1 hover:bg-white/20 rounded transition-colors border-0 outline-none bg-transparent",children:m.jsx(ai,{size:16})})]})})})}const XTt={"zeer hoge archeologische waarde":"bg-purple-600","hoge archeologische waarde":"bg-purple-500","archeologische waarde":"bg-purple-400"},ZTt={"zeer hoge archeologische waarde":"Zeer hoog","hoge archeologische waarde":"Hoog","archeologische waarde":"Waarde"};let Dx=null;function jEe(t){return Dx||(Dx=new yh({source:new fu,style:new In({fill:new sr({color:"rgba(147, 51, 234, 0.5)"}),stroke:new Bn({color:"#9333ea",width:3})}),zIndex:9999}),t.addLayer(Dx)),Dx}function JTt(){Dx&&Dx.getSource()?.clear()}async function QTt(t,e){const n=await cSt(e);if(!n)return;const i=jEe(t).getSource();i?.clear();const s=n.clone();i?.addFeature(s)}function ekt({isOpen:t,onClose:e}){const n=ji(Q=>Q.map),r=Pn(),[i,s]=X.useState(""),[o,a]=X.useState("all"),[l,c]=X.useState([]),[u,h]=X.useState(!1),[f,g]=X.useState(!1),[v,x]=X.useState(null),[b,T]=X.useState(null),[A,I]=X.useState(50),[P,M]=X.useState(!1),[F,C]=X.useState(!1),[N,O]=X.useState(!1),j=X.useRef(null),V=X.useRef(),G=X.useRef(null),U=13*r.fontScale/100;X.useEffect(()=>{t&&j.current&&setTimeout(()=>j.current?.focus(),100)},[t]),X.useEffect(()=>{if(!t)return;const Q=ne=>{G.current&&!G.current.contains(ne.target)&&e()},W=setTimeout(()=>{document.addEventListener("mousedown",Q)},100);return()=>{clearTimeout(W),document.removeEventListener("mousedown",Q)}},[t,e]),X.useEffect(()=>{t||M(!1)},[t]),X.useEffect(()=>{if(V.current&&clearTimeout(V.current),i.length<2){c([]),g(!1);return}return V.current=window.setTimeout(async()=>{h(!0),g(!0);try{const Q=await lSt(i,A,o);c(Q)}catch(Q){console.error("Monument search error:",Q),c([])}finally{h(!1)}},400),()=>{V.current&&clearTimeout(V.current)}},[i,o,A]);const fe=async Q=>{if(!n)return;const W=n.getView();if(v===Q.id){const ne=ld(Q.extent,50);W.fit(ne,{duration:500,maxZoom:18})}else{const ne=ld(Q.extent,200);W.fit(ne,{duration:500,maxZoom:16}),await QTt(n,Q.monumentnummer),x(Q.id),T(Q.id)}},Re=(Q,W)=>{if(W.stopPropagation(),!n)return;const ne=n.getView(),ie=ld(Q.extent,20);ne.fit(ie,{duration:500,maxZoom:18})},Be=(Q,W)=>{W.stopPropagation(),T(b===Q?null:Q)},$e=async()=>{if(!(!n||l.length===0)){O(!0);try{const Q=l.map(Ke=>Ke.monumentnummer),W=await uSt(Q);if(W.length===0)return;const ie=jEe(n).getSource();ie?.clear();let le=Fa();W.forEach(Ke=>{const Se=Ke.clone();ie?.addFeature(Se);const we=Se.getGeometry();we&&(le=Pz(le,we.getExtent()))});const ve=n.getView(),qe=ld(le,500);ve.fit(qe,{duration:500,maxZoom:14}),C(!0),x(null),console.log(` ${W.length} monumenten getoond op kaart`)}catch(Q){console.error("Error showing all monuments:",Q)}finally{O(!1)}}},pe=()=>{e()},De=()=>{JTt(),s(""),a("all"),c([]),g(!1),x(null),T(null),I(50),C(!1),e()},Me=Q=>{if(!i||i.length<2)return Q;const W=i.toLowerCase().split(/\s+/).filter(ie=>ie.length>=2);let ne=Q;return W.forEach(ie=>{const le=ie.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ve=new RegExp(`(${le})`,"gi");ne=ne.replace(ve,'<mark class="bg-yellow-200 px-0.5">$1</mark>')}),ne};return t?m.jsx(Jn,{children:m.jsxs(kt.div,{ref:G,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-[1701] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{height:P?"85vh":"38vh"},children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white cursor-pointer select-none",onClick:()=>M(!P),children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(jwe,{size:16}),m.jsx("span",{className:"font-medium text-sm",children:"Zoek monumenten"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx($we,{size:20,className:"opacity-70"}),m.jsx("button",{onClick:Q=>{Q.stopPropagation(),pe()},className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-2",children:m.jsx(ai,{size:16})})]})]}),m.jsx("div",{className:"p-2 border-b border-gray-100 space-y-2",children:m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(aA,{size:16,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),m.jsx("input",{ref:j,type:"text",value:i,onChange:Q=>{s(Q.target.value),x(null),T(null),C(!1)},placeholder:"bouwvoor, scherven...",className:"w-full pl-8 pr-8 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),i&&m.jsx("button",{onClick:()=>{s(""),x(null),T(null),C(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:m.jsx(ai,{size:14})})]}),m.jsx("select",{value:o,onChange:Q=>{a(Q.target.value),x(null),T(null),C(!1)},className:"py-1.5 px-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-700 w-28",children:Object.entries(vq).map(([Q,{name:W}])=>m.jsx("option",{value:Q,children:W},Q))})]})}),m.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${U}px`},children:[u&&m.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Zoeken..."}),!u&&f&&l.length===0&&m.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Geen resultaten"}),!u&&l.length>0&&m.jsxs("div",{className:"divide-y divide-gray-100",children:[m.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-xs text-gray-500 flex justify-between items-center gap-2",children:[m.jsxs("span",{children:[l.length,l.length>=A?"+":""," gevonden"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[l.length>=A&&m.jsx("button",{onClick:()=>I(A+50),className:"text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent",children:"Meer laden"}),m.jsxs("button",{onClick:$e,disabled:N,className:`flex items-center gap-1 px-2 py-1 rounded text-white border-0 outline-none transition-colors ${F?"bg-green-500 hover:bg-green-600":"bg-purple-500 hover:bg-purple-600"} ${N?"opacity-50 cursor-wait":""}`,children:[N?m.jsx(cL,{size:12,className:"animate-spin"}):m.jsx(uL,{size:12}),m.jsx("span",{children:F?"Getoond":"Toon alle"})]})]})]}),l.map(Q=>m.jsxs("div",{className:`transition-colors ${v===Q.id?"bg-purple-50":"bg-transparent"}`,children:[m.jsx("button",{onClick:()=>fe(Q),className:"w-full text-left px-3 py-2 hover:bg-purple-50 transition-colors border-0 outline-none bg-transparent",children:m.jsxs("div",{className:"flex items-start justify-between gap-2",children:[m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Q.toponiem}),m.jsx("p",{className:"text-xs text-purple-600 mt-0.5",children:Q.periode})]}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[m.jsx("span",{className:`px-1.5 py-0.5 rounded text-white text-[9px] ${XTt[Q.kwaliteitswaarde]||"bg-gray-500"}`,children:ZTt[Q.kwaliteitswaarde]||"AMK"}),v===Q.id&&m.jsx("button",{onClick:W=>Re(Q,W),className:"p-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors border-0 outline-none",title:"Zoom in",children:m.jsx(jut,{size:12})})]})]})}),v===Q.id&&m.jsxs("div",{className:"px-3 pb-2",children:[m.jsxs("button",{onClick:W=>Be(Q.id,W),className:"flex items-center gap-1 text-xs text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent mb-1",children:[b===Q.id?m.jsx(lL,{size:14}):m.jsx(mb,{size:14}),b===Q.id?"Minder":"Omschrijving"]}),b===Q.id&&m.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 rounded p-2 max-h-32 overflow-y-auto whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Me(Q.omschrijving)}})]})]},Q.id))]}),!u&&!f&&m.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Zoek op trefwoorden in 13.000+ AMK monumenten"})]}),(v||i)&&m.jsx("div",{className:"p-2 border-t border-gray-100",children:m.jsx("button",{onClick:De,className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Wis zoekopdracht en highlight"})})]})}):null}const tkt=["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"];function nkt(){const t=X.useRef(null),{keyword:e,isActive:n,totalCount:r,filteredCount:i,setKeyword:s,setActive:o,clearFilter:a}=REe(),l=zr(x=>x.monumentFilterOpen),c=zr(x=>x.toggleMonumentFilter),u=zr(x=>x.closeMonumentFilter),h=Vs(x=>x.visible),f=tkt.some(x=>h[x]);X.useEffect(()=>{l&&t.current&&setTimeout(()=>t.current?.focus(),100)},[l]);const g=()=>{e.length>=2&&o(!n)},v=e.length>=2;return f?m.jsxs("div",{children:[m.jsx(kt.button,{onClick:c,className:`fixed bottom-[116px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-purple-500 text-white":"bg-white/80 hover:bg-white/90 text-purple-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Monument filter",children:m.jsx(nz,{size:20})}),m.jsx(Jn,{children:l&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u}),m.jsxs(kt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[116px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden",children:[m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-500",children:[m.jsx(nz,{size:14,className:"text-white"}),m.jsx("span",{className:"font-medium text-white text-xs",children:"Monument Filter"})]}),m.jsxs("div",{className:"p-2 space-y-1.5",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{ref:t,type:"text",value:e,onChange:x=>s(x.target.value),placeholder:"Filter...",className:"w-24 px-2 py-1.5 text-sm bg-gray-100 rounded border-0 outline-none focus:ring-2 focus:ring-purple-400"}),m.jsx("button",{onClick:g,disabled:!v,className:`relative w-10 h-5 rounded-full transition-colors border-0 outline-none ${n?"bg-purple-500":v?"bg-gray-300":"bg-gray-200 cursor-not-allowed"}`,title:n?"Filter uit":"Filter aan",children:m.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${n?"translate-x-5":"translate-x-0.5"}`})})]}),r>0&&m.jsx("div",{className:"text-xs text-gray-500 text-center",children:n?m.jsxs("span",{className:"text-purple-600 font-medium",children:[i," van ",r]}):m.jsxs("span",{children:[r," monumenten"]})})]})]})]})})]}):null}function rkt({isOpen:t,onClose:e}){const{hideWelcomeModal:n,setHideWelcomeModal:r}=Pn(),[i,s]=X.useState(!1),o=()=>{i&&r(!0),e()},a=()=>{r(!0),e()};return m.jsx(Jn,{children:t&&m.jsxs(m.Fragment,{children:[m.jsx(kt.div,{className:"fixed inset-0 bg-black/40 z-[2000]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:o}),m.jsxs(kt.div,{className:"fixed inset-4 md:inset-auto md:top-1/2 md:left-1/2 md:-translate-x-1/2 md:-translate-y-1/2 z-[2001] bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col md:max-w-2xl md:w-full md:max-h-[85vh]",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},children:[m.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Hoe werkt de app?"}),m.jsx("button",{onClick:o,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors border-0 outline-none",children:m.jsx(ai,{size:20,className:"text-gray-500"})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-6",children:[m.jsxs("section",{children:[m.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-3",children:"Knoppen op de kaart"}),m.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Aan de linker- en rechterkant vind je tools, o.a.:"}),m.jsxs("div",{className:"space-y-3",children:[m.jsx(gm,{icon:m.jsx(uc,{size:18}),title:"Kaartlagen",description:"Selecteer welke lagen je wilt zien op de kaart"}),m.jsx(gm,{icon:m.jsx(aA,{size:18}),title:"Zoeken",description:"Zoek naar een adres of plaatsnaam"}),m.jsx(gm,{icon:m.jsx(Sl,{size:18}),title:"GPS Locatie",description:"Volg je huidige positie op de kaart"}),m.jsx(gm,{icon:m.jsx(Lwe,{size:18}),title:"Presets",description:"Snel wisselen tussen vooraf ingestelde kaartlagen"}),m.jsx(gm,{icon:m.jsx(nz,{size:18}),title:"Monument Filter",description:"Filter archeologische monumenten op periode"}),m.jsx(gm,{icon:m.jsx(sz,{size:18}),title:"Transparantie",description:"Pas de doorzichtigheid van lagen aan"}),m.jsx(gm,{icon:m.jsx(Vwe,{size:18}),title:"Menu",description:"Instellingen, info en meer opties"}),m.jsx(gm,{icon:m.jsx(Wwe,{size:18}),title:"Reset",description:"Zet de kaart terug naar de beginstand"})]})]}),m.jsxs("section",{className:"bg-blue-50 rounded-xl p-4",children:[m.jsx("h3",{className:"text-base font-semibold text-blue-800 mb-2",children:"Kaartlagen gebruiken"}),m.jsx("p",{className:"text-sm text-blue-700",children:"Klik op een locatie op de kaart om informatie te zien over monumenten, rijksmonumenten en andere archeologische gegevens. De informatie verschijnt in een popup."})]}),m.jsxs("section",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-xl",children:[m.jsx(Rwe,{size:20,className:"text-blue-600 flex-shrink-0 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-1",children:"Handleiding"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Bekijk de volledige handleiding voor meer informatie over alle functies."}),m.jsx("a",{href:"https://github.com/user/detectorapp-nl/wiki",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 hover:underline",children:"Naar handleiding "})]})]})]}),m.jsxs("div",{className:"flex items-center justify-end gap-3 px-5 py-4 border-t border-gray-100 bg-gray-50",children:[m.jsx("button",{onClick:a,className:"px-5 py-2.5 text-sm font-medium text-blue-600 bg-white border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors outline-none",children:"Toon niet meer"}),m.jsx("button",{onClick:o,className:"px-5 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Begrepen"})]})]})]})})}function gm({icon:t,title:e,description:n}){return m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"w-9 h-9 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg flex-shrink-0",children:t}),m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-700",children:e}),m.jsx("div",{className:"text-xs text-gray-500",children:n})]})]})}function $x(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function jx(t,e){const n=t.length;let r=Math.floor(e);const i=e-r;r>=n?r-=n:r<0&&(r+=n);let s=r+1;s>=n&&(s-=n);const o=t[r],a=o[0],l=o[1],c=t[s],u=c[0]-a,h=c[1]-l;return[a+u*i,l+h*i]}const TC={index:-1,endIndex:NaN,closestTargetDistance:1/0};function ikt(t,e,n,r){const i=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let v=1/0,x;for(let b=0;b<g.length-1;++b){const T=g[b],A=g[b+1],I=VEe(i,s,T,A);I.squaredDistance<v&&(v=I.squaredDistance,x=b+I.along)}v<o&&(o=v,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?x<f.startIndex&&(x+=g.length):f.endIndex<f.startIndex&&x>f.startIndex&&(x-=g.length)),l=x,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=jx(c.coordinates,l),f=n.getPixelFromCoordinate(h),g=n.getPixelFromCoordinate(e.startCoord);pae(f,g)>r&&(u=!1)}if(u){const h=c.coordinates,f=h.length,g=c.startIndex,v=l;if(g<v){const x=IC(h,g,v);IC(h,g,v-f)<x&&(l-=f)}else{const x=IC(h,g,v);IC(h,g,v+f)<x&&(l+=f)}}return TC.index=a,TC.endIndex=l,TC.closestTargetDistance=o,TC}function skt(t,e){const n=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();FEe(t,s,n)}return n}function FEe(t,e,n){if(e instanceof Qi){kC(t,e.getCoordinates(),!1,n);return}if(e instanceof uh){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)kC(t,r[i],!1,n);return}if(e instanceof bl){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)kC(t,r[i],!0,n);return}if(e instanceof lp){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a)kC(t,o[a],!0,n)}return}if(e instanceof tu){const r=e.getGeometries();for(let i=0;i<r.length;++i)FEe(t,r[i],n);return}}function kC(t,e,n,r){const i=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=VEe(i,s,l,c);if(u.squaredDistance===0){const h=o+u.along;r.push({coordinates:e,ring:n,startIndex:h,endIndex:h});return}}}function AC(t,e){return Yf(t[0],t[1],e[0],e[1])}function IC(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);const s=Math.ceil(r),o=Math.floor(i);if(s>o){const l=jx(t,r),c=jx(t,i);return AC(l,c)}let a=0;if(r<s){const l=jx(t,r),c=$x(t,s);a+=AC(l,c)}if(o<i){const l=$x(t,o),c=jx(t,i);a+=AC(l,c)}for(let l=s;l<o-1;++l){const c=$x(t,l),u=$x(t,l+1);a+=AC(c,u)}return a}const r8={along:0,squaredDistance:0};function VEe(t,e,n,r){const i=n[0],s=n[1],o=r[0],a=r[1],l=o-i,c=a-s;let u=0,h=i,f=s;return(l!==0||c!==0)&&(u=ni(((t-i)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,f+=c*u),r8.along=u,r8.squaredDistance=F2(Yf(t,e,h,f),10),r8}const PC={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class RC extends gh{constructor(e,n){super(e),this.feature=n}}class okt extends U2{constructor(e){const n=e;n.stopDown||(n.stopDown=D2),super(n),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=lkt(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Fw,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=(s,o,a)=>{const l=o||new f5([NaN,NaN]),c=Bu(s[0]),u=fae(c,Bu(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_),l};else{let s;i==="Point"?s=ts:i==="LineString"?s=Qi:i==="Polygon"&&(s=bl),r=(o,a,l)=>(a?i==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new yh({source:new fu({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:akt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:kU,this.freehandCondition_,e.freehand?this.freehandCondition_=LC:this.freehandCondition_=e.freehandCondition?e.freehandCondition:L8,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(N8.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=LC:n=e:n=SRe,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=LC:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:L8}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===An.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===Cr.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Cr.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Cr.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===Cr.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===Cr.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Cr.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Cr.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Af(Cr.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=o8([r,i]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=skt(e.coordinate,o);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push($x(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push($x(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const a=e.map.getPixelFromCoordinate(n.startCoord);if(pae(a,e.pixel)<this.snapTolerance_)return}const r=ikt(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=n.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex;const s=jx(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,i=n[0]-r[0],s=n[1]-r[1],o=i*i+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],n?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(i){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const u=s[l],h=a.getPixelFromCoordinate(u),f=e[0]-h[0],g=e[1]-h[1],v=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(f*f+g*g)<=v,r){this.finishCoordinate_=u;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Gr(new ts(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Gr);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new Qi(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=x3(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Gr(new Qi(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Gr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new RC(PC.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),s=x3(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,n,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Zg([n])):this.type_==="MultiLineString"?e.setGeometry(new uh([n])):this.type_==="MultiPolygon"&&e.setGeometry(new lp([n])),this.dispatchEvent(new RC(PC.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new RC(PC.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Gr(new ts(i)),this.updateSketchFeatures_(),this.dispatchEvent(new RC(PC.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function akt(){const t=hAe();return function(e,n){return t[e.getGeometry().getType()]}}function lkt(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}function ckt(){const t=ji(g=>g.map),[e,n]=X.useState(!1),[r,i]=X.useState(null),[s,o]=X.useState(0),a=X.useRef(null),l=X.useRef(null),c=X.useRef(null),u=X.useRef(null);X.useEffect(()=>{if(!t)return;const g=new fu;l.current=g;const v=new yh({source:g,style:ukt,zIndex:1e3,properties:{name:"measure-layer"}});return a.current=v,t.addLayer(v),()=>{a.current&&t.removeLayer(a.current)}},[t]),X.useEffect(()=>{if(!(!t||!l.current)&&e){const g=new okt({source:l.current,type:"LineString",style:hkt});c.current=g;let v=null;return g.on("drawstart",x=>{v=x.feature,i(null);const b=v.getGeometry();b&&(u.current=b.on("change",()=>{const A=d8(b,{projection:"EPSG:3857"});i(eae(A))}))}),g.on("drawend",x=>{u.current&&(s8(u.current),u.current=null);const b=x.feature.getGeometry(),T=d8(b,{projection:"EPSG:3857"}),A=eae(T);x.feature.set("distance",A),i(A),o(I=>I+1),v=null}),t.addInteraction(g),()=>{c.current&&(t.removeInteraction(c.current),c.current=null),u.current&&(s8(u.current),u.current=null)}}},[t,e]);const h=()=>{n(!e),e&&i(null)},f=()=>{l.current&&(l.current.clear(),o(0),i(null))};return m.jsxs(m.Fragment,{children:[m.jsx(kt.button,{onClick:h,className:`fixed bottom-[172px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${e?"bg-blue-500 text-white":"bg-white/80 hover:bg-white/90 text-gray-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Afstanden meten",children:m.jsx(B1,{size:20})}),m.jsx(Jn,{children:e&&m.jsxs(kt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[172px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[180px]",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(B1,{size:14,className:"text-white"}),m.jsx("span",{className:"font-medium text-white text-xs",children:"Meten"})]}),m.jsx("button",{onClick:h,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:m.jsx(ai,{size:14,className:"text-white"})})]}),m.jsxs("div",{className:"p-3 space-y-2",children:[m.jsx("p",{className:"text-xs text-gray-500",children:"Klik op de kaart om te meten. Dubbelklik om te stoppen."}),r&&m.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[m.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Afstand"}),m.jsx("div",{className:"text-lg font-bold text-blue-700",children:r})]}),s>0&&m.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:[m.jsx(zd,{size:12}),"Wis metingen (",s,")"]})]})]})})]})}function eae(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function ukt(t){const e=t.get("distance");return new In({stroke:new Bn({color:"#3b82f6",width:3,lineDash:[10,10]}),image:new uo({radius:5,fill:new sr({color:"#3b82f6"}),stroke:new Bn({color:"#ffffff",width:2})}),text:e?new nu({text:e,font:"bold 12px sans-serif",fill:new sr({color:"#1e40af"}),stroke:new Bn({color:"#ffffff",width:3}),offsetY:-15,placement:"line",overflow:!0}):void 0})}function hkt(){return new In({stroke:new Bn({color:"#ef4444",width:3,lineDash:[10,10]}),image:new uo({radius:5,fill:new sr({color:"#ef4444"}),stroke:new Bn({color:"#ffffff",width:2})})})}class tae{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const n=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/n)}add(e){if(this.buffer.length>0){const n=this.buffer[this.buffer.length-1];let r=e-n;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalize(this.buffer[0]);let e=0,n=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,n+=s}return this.normalize(e/n)}normalize(e){return(e%360+360)%360}clear(){this.buffer=[]}}function dkt(){const t=Es(c=>c.tracking),e=Es(c=>c.headingSource),n=Es(c=>c.rawGPSHeading),r=Es(c=>c.setSmoothedHeading),i=X.useRef(new tae(6)),s=X.useRef(new tae(10)),o=X.useRef(0),a=X.useRef(null),l=33;X.useEffect(()=>{if(!t||e!=="gps"||n===null||n===a.current)return;a.current=n;const c=performance.now();if(c-o.current<l)return;i.current.add(n);const u=i.current.getSmoothed();u!==null&&(o.current=c,r(u))},[t,e,n,r]),X.useEffect(()=>{if(!t||e!=="compass")return;let c=0;const u=80,h=f=>{const g=performance.now();if(g-c<u||g-o.current<l)return;c=g;let v=null;if(f.webkitCompassHeading!==void 0?v=f.webkitCompassHeading:f.alpha!==null&&(v=(360-f.alpha)%360),v!==null){s.current.add(v);const x=s.current.getSmoothed();x!==null&&(o.current=g,r(x))}};return window.addEventListener("deviceorientationabsolute",h),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientationabsolute",h),window.removeEventListener("deviceorientation",h)}},[t,e,r]),X.useEffect(()=>{t||(i.current.clear(),s.current.clear(),a.current=null)},[t])}function fkt(){const t=ji(i=>i.map),e=Vs(i=>i.setLayerOpacity),n=Vs(i=>i.visible),r=X.useRef(null);X.useEffect(()=>{if(!t)return;const i=()=>{const s=t.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const o=n["AHN 0.5m"],a=n["AHN4 Multi-Hillshade NL"];!o&&!a||(o&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),a&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return t.on("moveend",i),i(),()=>{t.un("moveend",i)}},[t,n,e])}const i8=2e3;async function pkt(){const t=[co,lh,ja];await Promise.all(t.map(e=>e.persist.hasHydrated()?Promise.resolve():new Promise(n=>{const r=e.persist.onFinishHydration(()=>{r(),n()})})))}function mkt(){const t=nO(T=>T.user),{layers:e,clearAll:n}=co(),{vondsten:r,clearAll:i}=lh(),{savedRoutes:s}=ja(),o=X.useRef(null),a=X.useRef(!0),l=X.useRef(""),c=X.useRef(""),u=X.useRef(""),[h,f]=X.useState(!1);X.useEffect(()=>{pkt().then(()=>{f(!0),console.log(" Stores gehydrateerd uit localStorage")})},[]);const g=X.useCallback(async T=>{if(t)try{const A=My(Bf,"users",t.uid);await e$(A,{layers:T,layersUpdatedAt:t$()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren lagen:",A)}},[t]),v=X.useCallback(async T=>{if(t)try{const A=My(Bf,"users",t.uid);await e$(A,{vondsten:T,vondstenUpdatedAt:t$()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren vondsten:",A)}},[t]),x=X.useCallback(async T=>{if(t)try{const A=My(Bf,"users",t.uid);await e$(A,{routes:T,routesUpdatedAt:t$()},{merge:!0}),console.log(" Routes gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren routes:",A)}},[t]),b=X.useCallback(async()=>{if(t)try{const T=My(Bf,"users",t.uid),A=await RLe(T);if(A.exists()){const I=A.data();if(I.layers&&Array.isArray(I.layers)){const P=I.layers,M=co.getState().layers,F=[...P],C=new Set(P.map(N=>N.id));M.forEach(N=>{C.has(N.id)||F.push(N)}),co.setState({layers:F}),l.current=JSON.stringify(F),console.log(` ${P.length} lagen geladen uit cloud`)}if(I.vondsten&&Array.isArray(I.vondsten)){const P=I.vondsten,M=lh.getState().vondsten,F=[...P],C=new Set(P.map(N=>N.id));M.forEach(N=>{C.has(N.id)||F.push(N)}),lh.setState({vondsten:F}),c.current=JSON.stringify(F),console.log(` ${P.length} vondsten geladen uit cloud`)}if(I.routes&&Array.isArray(I.routes)){const P=I.routes,M=ja.getState().savedRoutes,F=[...P],C=new Set(P.map(O=>O.id));M.forEach(O=>{C.has(O.id)||F.push(O)});const N=new Set(F.map(O=>O.id));ja.setState({savedRoutes:F,visibleRouteIds:N}),u.current=JSON.stringify(F),console.log(` ${P.length} routes geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await g(e),await v(r),await x(s);a.current=!1}catch(T){console.error(" Fout bij laden uit cloud:",T),a.current=!1}},[t,e,r,s,g,v,x]);return X.useEffect(()=>{h&&(t?(a.current=!0,b()):(a.current=!0,l.current="",c.current="",u.current=""))},[t?.uid,h]),X.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(e);if(T!==l.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l.current=T,g(e)},i8),()=>{o.current&&clearTimeout(o.current)}},[t,e,g]),X.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(r);if(T!==c.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{c.current=T,v(r)},i8),()=>{o.current&&clearTimeout(o.current)}},[t,r,v]),X.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(s);if(T!==u.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{u.current=T,x(s)},i8),()=>{o.current&&clearTimeout(o.current)}},[t,s,x]),{isLoggedIn:!!t,syncLayersToCloud:g,syncVondstenToCloud:v,syncRoutesToCloud:x}}function gkt(){dkt(),fkt(),mkt();const t=Es(x=>x.fetchPassivePosition);X.useEffect(()=>{t()},[t]);const n=14*Pn(x=>x.fontScale)/100,r=zr(x=>x.vondstFormOpen),i=zr(x=>x.vondstFormLocation),s=zr(x=>x.closeVondstForm),o=zr(x=>x.routeDashboardOpen),a=zr(x=>x.toggleRouteDashboard),l=zr(x=>x.monumentSearchOpen),c=zr(x=>x.closeMonumentSearch),u=nT(x=>x.showBuienradar),h=nT(x=>x.setShowBuienradar),f=Pn(x=>x.hideWelcomeModal),[g,v]=X.useState(!f);return m.jsx(TSt,{children:m.jsxs("div",{style:{fontSize:`${n}px`},children:[m.jsx(YTt,{}),m.jsx(Crt,{}),m.jsx(Gut,{}),m.jsx(NTt,{}),m.jsx(CSt,{}),m.jsx(DTt,{}),m.jsx(pTt,{}),m.jsx(mTt,{}),m.jsx(gTt,{}),m.jsx(vTt,{}),m.jsx(XEt,{}),m.jsx(JEt,{}),m.jsx(bSt,{}),m.jsx(zut,{}),m.jsx(hTt,{}),m.jsx(dTt,{}),m.jsx(ESt,{}),m.jsx(Wut,{}),m.jsx(Qut,{}),m.jsx(wSt,{}),m.jsx(KSt,{}),m.jsx(ySt,{}),m.jsx(ckt,{}),m.jsx(XSt,{}),m.jsx(vSt,{}),m.jsx(RTt,{}),m.jsx(CTt,{isVisible:u,onClose:()=>h(!1)}),m.jsx(BSt,{}),m.jsx($Tt,{}),m.jsx(BTt,{}),m.jsx(WTt,{}),m.jsx(KTt,{}),m.jsx(TTt,{isOpen:o,onClose:a}),m.jsx(Jn,{children:r&&m.jsx(LEe,{onClose:s,initialLocation:i||void 0})}),m.jsx(ekt,{isOpen:l,onClose:c}),m.jsx(nkt,{}),m.jsx(rkt,{isOpen:g,onClose:()=>v(!1)})]})})}const ykt="fef02a7628814a519d5f0eeb2d82656e";function vkt(){tr.apiKey=ykt}vkt();console.log(`%c DetectorApp v${e5}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");iTe.createRoot(document.getElementById("root")).render(m.jsx(gkt,{}));export{Tde as $,es as A,Zr as B,uo as C,rS as D,Bt as E,Gr as F,dL as G,IPe as H,MPe as I,cv as J,qu as K,_5 as L,it as M,b0e as N,ws as O,ts as P,kPt as Q,Jt as R,In as S,Cm as T,kre as U,fu as V,APt as W,$0 as X,j0 as Y,Tt as Z,_e as _,fRe as a,ib as a$,Ade as a0,Ide as a1,ye as a2,jkt as a3,Mkt as a4,SAt as a5,V5t as a6,CDe as a7,Z5t as a8,Rqe as a9,pet as aA,hI as aB,oqe as aC,x2 as aD,Nd as aE,Og as aF,Ot as aG,Kt as aH,U0e as aI,tW as aJ,G0e as aK,z0e as aL,mne as aM,_3t as aN,gze as aO,zMt as aP,ife as aQ,lw as aR,E2 as aS,Uk as aT,ri as aU,uu as aV,qG as aW,fc as aX,kr as aY,rb as aZ,pa as a_,Nye as aa,vMt as ab,_Mt as ac,mMt as ad,Nk as ae,EB as af,ca as ag,nI as ah,ph as ai,Nqe as aj,d4 as ak,V7e as al,QCt as am,Ze as an,Yn as ao,Wl as ap,ka as aq,jf as ar,Yr as as,Vd as at,AIt as au,xg as av,Ukt as aw,Ede as ax,V0e as ay,a5t as az,sRe as b,rd as b$,dh as b0,qRt as b1,WRt as b2,HRt as b3,Md as b4,pO as b5,xi as b6,xl as b7,GB as b8,Q5t as b9,ue as bA,MAt as bB,Zn as bC,Ni as bD,_a as bE,tr as bF,TPt as bG,oAt as bH,e6e as bI,vg as bJ,jr as bK,SQ as bL,SCt as bM,Kn as bN,Sde as bO,eI as bP,Zde as bQ,mVe as bR,O6e as bS,Va as bT,uAt as bU,cT as bV,G_ as bW,lI as bX,tn as bY,ig as bZ,rg as b_,T2 as ba,fve as bb,$de as bc,y8e as bd,SIt as be,dpe as bf,DIt as bg,rs as bh,Dde as bi,Da as bj,KR as bk,zRt as bl,Q1e as bm,gl as bn,Fy as bo,rze as bp,eb as bq,ZAt as br,Uve as bs,oO as bt,cPt as bu,MB as bv,_ as bw,E as bx,lr as by,ba as bz,yh as c,pn as c$,jy as c0,ql as c1,z1 as c2,il as c3,_Ke as c4,tPt as c5,nPt as c6,SPt as c7,SMt as c8,lPt as c9,Lr as cA,Y2 as cB,Ta as cC,tMt as cD,mo as cE,aYe as cF,cW as cG,yO as cH,ICt as cI,s2 as cJ,Uqe as cK,TQ as cL,aB as cM,hKe as cN,Zye as cO,fMt as cP,dMt as cQ,iMt as cR,qk as cS,Hk as cT,ub as cU,YF as cV,cee as cW,fo as cX,_Ge as cY,OAt as cZ,NAt as c_,aPt as ca,MMt as cb,dVe as cc,EMt as cd,Ho as ce,hn as cf,rPt as cg,oPt as ch,sPt as ci,iPt as cj,Cqe as ck,Mqe as cl,DXe as cm,en as cn,qt as co,Xo as cp,Ws as cq,rW as cr,FBe as cs,q8e as ct,Y8e as cu,K8e as cv,X8e as cw,OIt as cx,LIt as cy,hu as cz,Bn as d,m4 as d$,Il as d0,FPt as d1,VPt as d2,GCt as d3,zPt as d4,QRt as d5,Trt as d6,ET as d7,YQe as d8,ANt as d9,_8e as dA,Gt as dB,Hve as dC,CV as dD,Iet as dE,r$ as dF,wI as dG,T7 as dH,GRt as dI,t3t as dJ,w3t as dK,xd as dL,spe as dM,UCt as dN,dn as dO,ma as dP,Xu as dQ,ta as dR,Nfe as dS,bF as dT,net as dU,wde as dV,_i as dW,V9 as dX,jB as dY,bAt as dZ,fa as d_,On as da,PNt as db,db as dc,DB as dd,cpe as de,aI as df,n1 as dg,V1 as dh,D1e as di,uMt as dj,fYe as dk,B7e as dl,Vu as dm,pYe as dn,za as dp,pc as dq,SDe as dr,WPt as ds,$n as dt,mI as du,j_ as dv,Li as dw,ype as dx,xM as dy,rM as dz,ar as e,FAt as e$,wAt as e0,zIt as e1,Tve as e2,n0 as e3,Sve as e4,aJe as e5,BUe as e6,Pkt as e7,Rkt as e8,Mve as e9,R8e as eA,tte as eB,zje as eC,v3t as eD,wRt as eE,iu as eF,Jkt as eG,NPt as eH,Pde as eI,wJe as eJ,fge as eK,Spe as eL,lYe as eM,gMt as eN,nW as eO,L1 as eP,Oqe as eQ,bMt as eR,sc as eS,wMt as eT,Pqe as eU,GPt as eV,Hc as eW,wO as eX,cJe as eY,WCt as eZ,l$e as e_,cb as ea,PJe as eb,TV as ec,lv as ed,mh as ee,_I as ef,zk as eg,qZe as eh,Cve as ei,YZe as ej,Ive as ek,Rve as el,N8e as em,gB as en,yB as eo,M8e as ep,_O as eq,xO as er,Jre as es,ROt as et,kOt as eu,vOt as ev,Ji as ew,gOt as ex,DOt as ey,$Ot as ez,MA as f,SOt as f$,s6e as f0,C1 as f1,WG as f2,RAt as f3,GBe as f4,O0e as f5,gW as f6,BGe as f7,fJe as f8,nBe as f9,_Je as fA,eJe as fB,tJe as fC,SJe as fD,tl as fE,hs as fF,nl as fG,Q2 as fH,fPt as fI,Fg as fJ,HVe as fK,DF as fL,QG as fM,a2 as fN,_l as fO,P6e as fP,wpe as fQ,hpe as fR,ePt as fS,Ao as fT,Ik as fU,Gs as fV,PIt as fW,IIt as fX,A_e as fY,I_e as fZ,_Ot as f_,KZe as fa,Pve as fb,EJe as fc,jPt as fd,iO as fe,sO as ff,rfe as fg,PAt as fh,UVe as fi,gI as fj,AAt as fk,KG as fl,rO as fm,HUe as fn,hBe as fo,TBe as fp,KXe as fq,pVe as fr,YPt as fs,o2 as ft,xMt as fu,pge as fv,uBe as fw,YUe as fx,XUe as fy,ZUe as fz,ch as g,dRt as g$,gVe as g0,l3t as g1,E3t as g2,Ng as g3,fQ as g4,EPt as g5,A4t as g6,$Xe as g7,tp as g8,x6e as g9,Vg as gA,XCt as gB,Qy as gC,sAt as gD,mAt as gE,POt as gF,k6e as gG,A6e as gH,EF as gI,HXe as gJ,tRt as gK,QPt as gL,URt as gM,LUe as gN,lRt as gO,nze as gP,ZF as gQ,Bi as gR,QNt as gS,sM as gT,M9 as gU,mx as gV,bO as gW,BRt as gX,ov as gY,g3t as gZ,i3t as g_,Lk as ga,$i as gb,$ge as gc,ll as gd,eRt as ge,m2 as gf,mRt as gg,M$ as gh,MRt as gi,OO as gj,HB as gk,qB as gl,CRt as gm,VRt as gn,DO as go,Fze as gp,xXe as gq,v0e as gr,TW as gs,vJe as gt,YCt as gu,qCt as gv,xI as gw,js as gx,KCt as gy,Sp as gz,XOt as h,CAt as h$,j3t as h0,$3t as h1,oc as h2,_It as h3,KUe as h4,XPt as h5,Y$e as h6,ed as h7,rl as h8,G3t as h9,bpe as hA,Epe as hB,UPt as hC,YGe as hD,N0e as hE,IKe as hF,sJe as hG,L0e as hH,$It as hI,I8e as hJ,iGe as hK,eBe as hL,rGe as hM,LO as hN,tM as hO,Bkt as hP,mJe as hQ,iJe as hR,c1e as hS,n3t as hT,uW as hU,zXe as hV,bT as hW,$f as hX,Ql as hY,fWe as hZ,jAt as h_,wPt as ha,cje as hb,K3t as hc,U1 as hd,Wk as he,Ckt as hf,cAt as hg,cs as hh,P$ as hi,yze as hj,sv as hk,cte as hl,tb as hm,J2 as hn,Us as ho,xW as hp,FIt as hq,Z8e as hr,j8e as hs,Mpe as ht,pJe as hu,HIt as hv,fUe as hw,BPt as hx,nUe as hy,aee as hz,sr as i,ro as i$,pfe as i0,RGe as i1,fAt as i2,cI as i3,ofe as i4,t0 as i5,jBe as i6,DBe as i7,OBe as i8,R$ as i9,P5t as iA,P4t as iB,Gge as iC,$k as iD,k9 as iE,sUe as iF,Hge as iG,LPt as iH,h5t as iI,TAt as iJ,WAt as iK,Yje as iL,e8e as iM,r8e as iN,fd as iO,j$e as iP,kAt as iQ,Xte as iR,iVe as iS,tI as iT,uIt as iU,Srt as iV,M1 as iW,VG as iX,y6e as iY,uRt as iZ,AGe as i_,k0e as ia,lze as ib,qx as ic,u6e as id,Rd as ie,MOt as ig,YMt as ih,KMt as ii,PKe as ij,Age as ik,jze as il,ite as im,aVe as io,Dk as ip,d2 as iq,_et as ir,N5t as is,Wve as it,F5t as iu,cN as iv,$5t as iw,AT as ix,j5t as iy,qM as iz,YOt as j,BNt as j$,Bge as j0,iUe as j1,tw as j2,Akt as j3,ave as j4,BB as j5,H as j6,D8e as j7,Ed as j8,NXe as j9,ZMt as jA,XMt as jB,Ko as jC,zB as jD,b9 as jE,VB as jF,hRt as jG,bRt as jH,dte as jI,_0e as jJ,LAt as jK,fye as jL,yIt as jM,NOt as jN,Dm as jO,EUe as jP,oCt as jQ,tCt as jR,qh as jS,Hkt as jT,qkt as jU,Wkt as jV,n6e as jW,iv as jX,npe as jY,HNt as jZ,WNt as j_,EW as ja,sze as jb,sRt as jc,E4 as jd,k_e as je,Gtt as jf,Btt as jg,fOt as jh,_nt as ji,pOt as jj,aOt as jk,oOt as jl,wnt as jm,LS as jn,dOt as jo,kUe as jp,qUe as jq,WUe as jr,JZe as js,IJe as jt,RJe as ju,hUe as jv,m0e as jw,P8e as jx,QZe as jy,kve as jz,nu as k,G$e as k$,GNt as k0,KNt as k1,qNt as k2,UNt as k3,zNt as k4,GGe as k5,age as k6,M0e as k7,PPt as k8,AVe as k9,yW as kA,r3t as kB,e3t as kC,fCt as kD,C$e as kE,JAt as kF,_Ze as kG,xZe as kH,Ave as kI,MPt as kJ,vXe as kK,I5t as kL,yFe as kM,SFe as kN,uI as kO,qIt as kP,UIt as kQ,GIt as kR,hAt as kS,p6e as kT,DDe as kU,xIt as kV,tB as kW,sIt as kX,iIt as kY,ZPt as kZ,B$e as k_,IPt as ka,IVe as kb,o1e as kc,oUe as kd,EQ as ke,VNt as kf,xB as kg,xFe as kh,RVe as ki,LG as kj,Kkt as kk,DG as kl,Ykt as km,kI as kn,ew as ko,yXe as kp,$6e as kq,z5t as kr,s1e as ks,l2 as kt,uO as ku,Mf as kv,eMt as kw,gO as kx,LB as ky,Qkt as kz,iSt as l,LF as l$,vRt as l0,pRt as l1,v6e as l2,zde as l3,Ei as l4,kIt as l5,QO as l6,GW as l7,yl as l8,eL as l9,e1 as lA,J5t as lB,Dkt as lC,xze as lD,Tre as lE,cze as lF,aze as lG,lN as lH,Rge as lI,n5t as lJ,e5t as lK,t5t as lL,fet as lM,Stt as lN,Mtt as lO,MDe as lP,aAt as lQ,Vde as lR,lO as lS,pAt as lT,Bk as lU,VYe as lV,l0e as lW,aRt as lX,tj as lY,rI as lZ,DAt as l_,jOt as la,Sd as lb,rIt as lc,V_ as ld,_Pt as le,Yge as lf,Kge as lg,CUe as lh,yM as li,kge as lj,SRt as lk,KB as ll,U_ as lm,mCt as ln,gCt as lo,yCt as lp,$Rt as lq,LRt as lr,RRt as ls,Qze as lt,ORt as lu,PUe as lv,pPt as lw,iRt as lx,pCt as ly,s4t as lz,Ci as m,lAt as m$,MO as m0,hCt as m1,uCt as m2,Dge as m3,Oge as m4,Mze as m5,Oze as m6,TS as m7,Ex as m8,WHe as m9,Rf as mA,Gm as mB,_s as mC,XKe as mD,TZe as mE,Zkt as mF,rBe as mG,kKe as mH,KGe as mI,XGe as mJ,$Nt as mK,fT as mL,nMt as mM,w0e as mN,xge as mO,kde as mP,iAt as mQ,Yde as mR,Tpe as mS,xQ as mT,cfe as mU,dtt as mV,HPt as mW,Wge as mX,DPt as mY,$B as mZ,afe as m_,yMt as ma,B3t as mb,hVe as mc,q3t as md,W3t as me,wg as mf,Vet as mg,Uet as mh,Get as mi,_fe as mj,HCt as mk,rB as ml,Y_ as mm,gZe as mn,JNt as mo,c8e as mp,rpe as mq,Hqe as mr,VO as ms,IM as mt,Yqe as mu,_ge as mv,U3t as mw,zVe as mx,OOt as my,lS as mz,Qi as n,o4t as n$,_9 as n0,iKe as n1,Ikt as n2,xye as n3,S9 as n4,c4t as n5,l4t as n6,_Xe as n7,QMt as n8,JMt as n9,d5t as nA,JCt as nB,H3t as nC,f8e as nD,a1e as nE,w2 as nF,F3t as nG,V3t as nH,z3t as nI,NB as nJ,IAt as nK,zkt as nL,ove as nM,E5t as nN,b5t as nO,LNt as nP,DNt as nQ,vAt as nR,X1e as nS,hve as nT,S2 as nU,nd as nV,WB as nW,Cge as nX,yI as nY,K1e as nZ,AI as n_,GG as na,dBe as nb,cBe as nc,oJe as nd,lBe as ne,NKe as nf,iB as ng,gIt as nh,wB as ni,TIt as nj,m_ as nk,ADe as nl,qF as nm,C5t as nn,htt as no,M5t as np,R5t as nq,Gve as nr,OW as ns,Pa as nt,aUe as nu,LE as nv,RPt as nw,aet as nx,ZCt as ny,w5t as nz,vn as o,oYe as o$,_j as o0,gPt as o1,G4 as o2,bJe as o3,zze as o4,O4 as o5,jIt as o6,Tze as o7,mPt as o8,eo as o9,vPt as oA,VIt as oB,bPt as oC,_At as oD,ZQe as oE,oze as oF,Fkt as oG,Lkt as oH,Nde as oI,NIt as oJ,MIt as oK,KPt as oL,tfe as oM,$Ye as oN,bXe as oO,Y1e as oP,Qve as oQ,Xkt as oR,y5t as oS,v5t as oT,_5t as oU,x5t as oV,i5t as oW,o5t as oX,s5t as oY,zet as oZ,Lg as o_,Qs as oa,S3t as ob,A3t as oc,b3t as od,F$e as oe,EAt as of,Ope as og,gXe as oh,Uze as oi,Gze as oj,gM as ok,oRt as ol,Pze as om,Rze as on,prt as oo,su as op,HO as oq,GZe as or,QAt as os,sve as ot,lve as ou,QXe as ov,C4t as ow,lZe as ox,M4t as oy,$Ge as oz,sSt as p,xRt as p$,r1e as p0,tKe as p1,zQ as p2,b8e as p3,uPt as p4,a4t as p5,CIt as p6,RIt as p7,H8e as p8,Ptt as p9,Fc as pA,f5t as pB,BIt as pC,hje as pD,u5t as pE,c5t as pF,ket as pG,l5t as pH,jNt as pI,FNt as pJ,p5t as pK,m5t as pL,S5t as pM,T5t as pN,YNt as pO,k5t as pP,A5t as pQ,det as pR,get as pS,h_e as pT,u2 as pU,g5t as pV,tet as pW,dAt as pX,lUe as pY,aGe as pZ,qze as p_,V$e as pa,Rtt as pb,Ttt as pc,eCt as pd,ONt as pe,BCt as pf,pKe as pg,pMt as ph,sMt as pi,lMt as pj,oMt as pk,cMt as pl,aMt as pm,hMt as pn,Y5t as po,gQ as pp,rMt as pq,eze as pr,nRt as ps,hze as pt,cRt as pu,I3t as pv,mZe as pw,qc as px,gRt as py,r5t as pz,upe as q,kBe as q$,f4t as q0,vBe as q1,Lge as q2,h0e as q3,$fe as q4,kT as q5,gAt as q6,yBe as q7,_Ct as q8,_Rt as q9,H5t as qA,W5t as qB,jet as qC,Jve as qD,ZNt as qE,XNt as qF,Let as qG,NNt as qH,NRt as qI,Lf as qJ,T9 as qK,ERt as qL,Na as qM,RDe as qN,AJe as qO,$kt as qP,p3t as qQ,m3t as qR,dUe as qS,IBe as qT,ABe as qU,u0e as qV,KHe as qW,QGe as qX,ZGe as qY,JGe as qZ,pBe as q_,QBe as qa,Sre as qb,TDe as qc,Okt as qd,Nkt as qe,AUe as qf,Gqe as qg,cOt as qh,uOt as qi,Jqe as qj,lOt as qk,Kk as ql,Xk as qm,Wqe as qn,eAt as qo,oKe as qp,aKe as qq,pW as qr,yrt as qs,L5t as qt,D5t as qu,OPt as qv,O5t as qw,X5t as qx,q5t as qy,K5t as qz,Y2e as r,tBe as r$,nCt as r0,pXe as r1,sBe as r2,R4t as r3,LOt as r4,I4t as r5,zg as r6,AOt as r7,COt as r8,IOt as r9,$He as rA,kZe as rB,vve as rC,yAt as rD,Ate as rE,VMt as rF,w4t as rG,u3t as rH,WGe as rI,_x as rJ,CKe as rK,CPt as rL,BMt as rM,o3t as rN,$Pt as rO,Dze as rP,RKe as rQ,zpe as rR,Bpe as rS,sCt as rT,d3t as rU,iCt as rV,rCt as rW,yRt as rX,QB as rY,xAt as rZ,f3t as r_,tUe as ra,TRt as rb,IRt as rc,jRt as rd,kRt as re,PRt as rf,FRt as rg,RUe as rh,CGe as ri,rRt as rj,bI as rk,EI as rl,SI as rm,tXe as rn,x4t as ro,x3t as rp,a3t as rq,h3t as rr,c3t as rs,tAt as rt,N3t as ru,M3t as rv,Gkt as rw,s3t as rx,fRt as ry,y3t as rz,Xe as s,AKe as s0,fBe as s1,KRt as s2,XRt as s3,eOt as s4,V2 as t,REe as u,pi as v,xPt as w,Cd as x,iI as y,sfe as z};
//# sourceMappingURL=index-DLChQcXc.js.map
