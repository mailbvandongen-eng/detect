const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/amkOL-DSCwfbLw.js","assets/layerLoaderOL-WQ8W4KVh.js","assets/romeinsOL-DaIjOohB.js","assets/kastelenOL-DzQLu8fL.js","assets/iconStyles-CaxujFUk.js","assets/ruinesOL-B9oYBSUr.js","assets/hunebeddenOL-ChIpMlKN.js","assets/uikavArcheoPuntenOL-CDaijFsK.js","assets/uikavVlakkenOL-CxWTEKDW.js","assets/uikavBufferlaagOL-DWZoUIYT.js","assets/uikavExpertOL-jK0dQI8-.js","assets/uikavUiterwaardenOL-BGokLTcL.js","assets/speeltuinenOL-Cx_Ddl6K.js","assets/museaOL-tIyXOf5C.js","assets/strandjesOL-yfYy6EYL.js","assets/parkenOL-BFpeFzBU.js","assets/kringloopwinkelsOL-DNkufX2w.js","assets/fossielenOL-Dx6mavMg.js","assets/fossielUtils-DwCgjrTu.js","assets/fossielenBelgieOL-DaE4xitj.js","assets/fossielenDuitslandOL-BS03qGq7.js","assets/fossielenFrankrijkOL-BUV7HAAn.js","assets/bunkersOL-DsPy_Klo.js","assets/grafheuvelsOL-CTxZErqF.js","assets/slagveldenOL-DBtfCOnz.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function MI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var o2={exports:{}},Ag={},l2={exports:{}},Jt={};var u4;function KG(){if(u4)return Jt;u4=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;function g(ie){return ie===null||typeof ie!="object"?null:(ie=f&&ie[f]||ie["@@iterator"],typeof ie=="function"?ie:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,x={};function w(ie,V,re){this.props=ie,this.context=V,this.refs=x,this.updater=re||p}w.prototype.isReactComponent={},w.prototype.setState=function(ie,V){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,V,"setState")},w.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function T(){}T.prototype=w.prototype;function R(ie,V,re){this.props=ie,this.context=V,this.refs=x,this.updater=re||p}var k=R.prototype=new T;k.constructor=R,E(k,w.prototype),k.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,B={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function C(ie,V,re){var te,ee={},de=null,Oe=null;if(V!=null)for(te in V.ref!==void 0&&(Oe=V.ref),V.key!==void 0&&(de=""+V.key),V)j.call(V,te)&&!P.hasOwnProperty(te)&&(ee[te]=V[te]);var Se=arguments.length-2;if(Se===1)ee.children=re;else if(1<Se){for(var Fe=Array(Se),je=0;je<Se;je++)Fe[je]=arguments[je+2];ee.children=Fe}if(ie&&ie.defaultProps)for(te in Se=ie.defaultProps,Se)ee[te]===void 0&&(ee[te]=Se[te]);return{$$typeof:n,type:ie,key:de,ref:Oe,props:ee,_owner:B.current}}function M(ie,V){return{$$typeof:n,type:ie.type,key:V,ref:ie.ref,props:ie.props,_owner:ie._owner}}function F(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===n}function O(ie){var V={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(re){return V[re]})}var W=/\/+/g;function D(ie,V){return typeof ie=="object"&&ie!==null&&ie.key!=null?O(""+ie.key):V.toString(36)}function we(ie,V,re,te,ee){var de=typeof ie;(de==="undefined"||de==="boolean")&&(ie=null);var Oe=!1;if(ie===null)Oe=!0;else switch(de){case"string":case"number":Oe=!0;break;case"object":switch(ie.$$typeof){case n:case e:Oe=!0}}if(Oe)return Oe=ie,ee=ee(Oe),ie=te===""?"."+D(Oe,0):te,N(ee)?(re="",ie!=null&&(re=ie.replace(W,"$&/")+"/"),we(ee,V,re,"",function(je){return je})):ee!=null&&(F(ee)&&(ee=M(ee,re+(!ee.key||Oe&&Oe.key===ee.key?"":(""+ee.key).replace(W,"$&/")+"/")+ie)),V.push(ee)),1;if(Oe=0,te=te===""?".":te+":",N(ie))for(var Se=0;Se<ie.length;Se++){de=ie[Se];var Fe=te+D(de,Se);Oe+=we(de,V,re,Fe,ee)}else if(Fe=g(ie),typeof Fe=="function")for(ie=Fe.call(ie),Se=0;!(de=ie.next()).done;)de=de.value,Fe=te+D(de,Se++),Oe+=we(de,V,re,Fe,ee);else if(de==="object")throw V=String(ie),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return Oe}function Ne(ie,V,re){if(ie==null)return ie;var te=[],ee=0;return we(ie,te,"","",function(de){return V.call(re,de,ee++)}),te}function Le(ie){if(ie._status===-1){var V=ie._result;V=V(),V.then(function(re){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=re)},function(re){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=re)}),ie._status===-1&&(ie._status=0,ie._result=V)}if(ie._status===1)return ie._result.default;throw ie._result}var be={current:null},ce={transition:null},Re={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:ce,ReactCurrentOwner:B};function Ae(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:Ne,forEach:function(ie,V,re){Ne(ie,function(){V.apply(this,arguments)},re)},count:function(ie){var V=0;return Ne(ie,function(){V++}),V},toArray:function(ie){return Ne(ie,function(V){return V})||[]},only:function(ie){if(!F(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},Jt.Component=w,Jt.Fragment=t,Jt.Profiler=i,Jt.PureComponent=R,Jt.StrictMode=r,Jt.Suspense=l,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,Jt.act=Ae,Jt.cloneElement=function(ie,V,re){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var te=E({},ie.props),ee=ie.key,de=ie.ref,Oe=ie._owner;if(V!=null){if(V.ref!==void 0&&(de=V.ref,Oe=B.current),V.key!==void 0&&(ee=""+V.key),ie.type&&ie.type.defaultProps)var Se=ie.type.defaultProps;for(Fe in V)j.call(V,Fe)&&!P.hasOwnProperty(Fe)&&(te[Fe]=V[Fe]===void 0&&Se!==void 0?Se[Fe]:V[Fe])}var Fe=arguments.length-2;if(Fe===1)te.children=re;else if(1<Fe){Se=Array(Fe);for(var je=0;je<Fe;je++)Se[je]=arguments[je+2];te.children=Se}return{$$typeof:n,type:ie.type,key:ee,ref:de,props:te,_owner:Oe}},Jt.createContext=function(ie){return ie={$$typeof:a,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:s,_context:ie},ie.Consumer=ie},Jt.createElement=C,Jt.createFactory=function(ie){var V=C.bind(null,ie);return V.type=ie,V},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(ie){return{$$typeof:o,render:ie}},Jt.isValidElement=F,Jt.lazy=function(ie){return{$$typeof:h,_payload:{_status:-1,_result:ie},_init:Le}},Jt.memo=function(ie,V){return{$$typeof:u,type:ie,compare:V===void 0?null:V}},Jt.startTransition=function(ie){var V=ce.transition;ce.transition={};try{ie()}finally{ce.transition=V}},Jt.unstable_act=Ae,Jt.useCallback=function(ie,V){return be.current.useCallback(ie,V)},Jt.useContext=function(ie){return be.current.useContext(ie)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(ie){return be.current.useDeferredValue(ie)},Jt.useEffect=function(ie,V){return be.current.useEffect(ie,V)},Jt.useId=function(){return be.current.useId()},Jt.useImperativeHandle=function(ie,V,re){return be.current.useImperativeHandle(ie,V,re)},Jt.useInsertionEffect=function(ie,V){return be.current.useInsertionEffect(ie,V)},Jt.useLayoutEffect=function(ie,V){return be.current.useLayoutEffect(ie,V)},Jt.useMemo=function(ie,V){return be.current.useMemo(ie,V)},Jt.useReducer=function(ie,V,re){return be.current.useReducer(ie,V,re)},Jt.useRef=function(ie){return be.current.useRef(ie)},Jt.useState=function(ie){return be.current.useState(ie)},Jt.useSyncExternalStore=function(ie,V,re){return be.current.useSyncExternalStore(ie,V,re)},Jt.useTransition=function(){return be.current.useTransition()},Jt.version="18.3.1",Jt}var h4;function kp(){return h4||(h4=1,l2.exports=KG()),l2.exports}var d4;function YG(){if(d4)return Ag;d4=1;var n=kp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,u){var h,f={},g=null,p=null;u!==void 0&&(g=""+u),l.key!==void 0&&(g=""+l.key),l.ref!==void 0&&(p=l.ref);for(h in l)r.call(l,h)&&!s.hasOwnProperty(h)&&(f[h]=l[h]);if(o&&o.defaultProps)for(h in l=o.defaultProps,l)f[h]===void 0&&(f[h]=l[h]);return{$$typeof:e,type:o,key:g,ref:p,props:f,_owner:i.current}}return Ag.Fragment=t,Ag.jsx=a,Ag.jsxs=a,Ag}var f4;function XG(){return f4||(f4=1,o2.exports=YG()),o2.exports}var y=XG(),C_={},c2={exports:{}},us={},u2={exports:{}},h2={};var g4;function qG(){return g4||(g4=1,(function(n){function e(ce,Re){var Ae=ce.length;ce.push(Re);e:for(;0<Ae;){var ie=Ae-1>>>1,V=ce[ie];if(0<i(V,Re))ce[ie]=Re,ce[Ae]=V,Ae=ie;else break e}}function t(ce){return ce.length===0?null:ce[0]}function r(ce){if(ce.length===0)return null;var Re=ce[0],Ae=ce.pop();if(Ae!==Re){ce[0]=Ae;e:for(var ie=0,V=ce.length,re=V>>>1;ie<re;){var te=2*(ie+1)-1,ee=ce[te],de=te+1,Oe=ce[de];if(0>i(ee,Ae))de<V&&0>i(Oe,ee)?(ce[ie]=Oe,ce[de]=Ae,ie=de):(ce[ie]=ee,ce[te]=Ae,ie=te);else if(de<V&&0>i(Oe,Ae))ce[ie]=Oe,ce[de]=Ae,ie=de;else break e}}return Re}function i(ce,Re){var Ae=ce.sortIndex-Re.sortIndex;return Ae!==0?Ae:ce.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,f=null,g=3,p=!1,E=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(ce){for(var Re=t(u);Re!==null;){if(Re.callback===null)r(u);else if(Re.startTime<=ce)r(u),Re.sortIndex=Re.expirationTime,e(l,Re);else break;Re=t(u)}}function N(ce){if(x=!1,k(ce),!E)if(t(l)!==null)E=!0,Le(j);else{var Re=t(u);Re!==null&&be(N,Re.startTime-ce)}}function j(ce,Re){E=!1,x&&(x=!1,T(C),C=-1),p=!0;var Ae=g;try{for(k(Re),f=t(l);f!==null&&(!(f.expirationTime>Re)||ce&&!O());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,g=f.priorityLevel;var V=ie(f.expirationTime<=Re);Re=n.unstable_now(),typeof V=="function"?f.callback=V:f===t(l)&&r(l),k(Re)}else r(l);f=t(l)}if(f!==null)var re=!0;else{var te=t(u);te!==null&&be(N,te.startTime-Re),re=!1}return re}finally{f=null,g=Ae,p=!1}}var B=!1,P=null,C=-1,M=5,F=-1;function O(){return!(n.unstable_now()-F<M)}function W(){if(P!==null){var ce=n.unstable_now();F=ce;var Re=!0;try{Re=P(!0,ce)}finally{Re?D():(B=!1,P=null)}}else B=!1}var D;if(typeof R=="function")D=function(){R(W)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ne=we.port2;we.port1.onmessage=W,D=function(){Ne.postMessage(null)}}else D=function(){w(W,0)};function Le(ce){P=ce,B||(B=!0,D())}function be(ce,Re){C=w(function(){ce(n.unstable_now())},Re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){E||p||(E=!0,Le(j))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(ce){switch(g){case 1:case 2:case 3:var Re=3;break;default:Re=g}var Ae=g;g=Re;try{return ce()}finally{g=Ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,Re){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var Ae=g;g=ce;try{return Re()}finally{g=Ae}},n.unstable_scheduleCallback=function(ce,Re,Ae){var ie=n.unstable_now();switch(typeof Ae=="object"&&Ae!==null?(Ae=Ae.delay,Ae=typeof Ae=="number"&&0<Ae?ie+Ae:ie):Ae=ie,ce){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Ae+V,ce={id:h++,callback:Re,priorityLevel:ce,startTime:Ae,expirationTime:V,sortIndex:-1},Ae>ie?(ce.sortIndex=Ae,e(u,ce),t(l)===null&&ce===t(u)&&(x?(T(C),C=-1):x=!0,be(N,Ae-ie))):(ce.sortIndex=V,e(l,ce),E||p||(E=!0,Le(j))),ce},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(ce){var Re=g;return function(){var Ae=g;g=Re;try{return ce.apply(this,arguments)}finally{g=Ae}}}})(h2)),h2}var m4;function ZG(){return m4||(m4=1,u2.exports=qG()),u2.exports}var p4;function QG(){if(p4)return us;p4=1;var n=kp(),e=ZG();function t(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(c,d){a(c,d),a(c+"Capture",d)}function a(c,d){for(i[c]=d,c=0;c<d.length;c++)r.add(d[c])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},f={};function g(c){return l.call(f,c)?!0:l.call(h,c)?!1:u.test(c)?f[c]=!0:(h[c]=!0,!1)}function p(c,d,m,v){if(m!==null&&m.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return v?!1:m!==null?!m.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function E(c,d,m,v){if(d===null||typeof d>"u"||p(c,d,m,v))return!0;if(v)return!1;if(m!==null)switch(m.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function x(c,d,m,v,S,I,G){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=v,this.attributeNamespace=S,this.mustUseProperty=m,this.propertyName=c,this.type=d,this.sanitizeURL=I,this.removeEmptyString=G}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){w[c]=new x(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];w[d]=new x(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){w[c]=new x(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){w[c]=new x(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){w[c]=new x(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){w[c]=new x(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){w[c]=new x(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){w[c]=new x(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){w[c]=new x(c,5,!1,c.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function R(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(T,R);w[d]=new x(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(T,R);w[d]=new x(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(T,R);w[d]=new x(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!1,!1)}),w.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){w[c]=new x(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,d,m,v){var S=w.hasOwnProperty(d)?w[d]:null;(S!==null?S.type!==0:v||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(E(d,m,S,v)&&(m=null),v||S===null?g(d)&&(m===null?c.removeAttribute(d):c.setAttribute(d,""+m)):S.mustUseProperty?c[S.propertyName]=m===null?S.type===3?!1:"":m:(d=S.attributeName,v=S.attributeNamespace,m===null?c.removeAttribute(d):(S=S.type,m=S===3||S===4&&m===!0?"":""+m,v?c.setAttributeNS(v,d,m):c.setAttribute(d,m))))}var N=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),B=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),O=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),ce=Symbol.iterator;function Re(c){return c===null||typeof c!="object"?null:(c=ce&&c[ce]||c["@@iterator"],typeof c=="function"?c:null)}var Ae=Object.assign,ie;function V(c){if(ie===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ie=d&&d[1]||""}return`
`+ie+c}var re=!1;function te(c,d){if(!c||re)return"";re=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ve){var v=ve}Reflect.construct(c,[],d)}else{try{d.call()}catch(ve){v=ve}c.call(d.prototype)}else{try{throw Error()}catch(ve){v=ve}c()}}catch(ve){if(ve&&v&&typeof ve.stack=="string"){for(var S=ve.stack.split(`
`),I=v.stack.split(`
`),G=S.length-1,J=I.length-1;1<=G&&0<=J&&S[G]!==I[J];)J--;for(;1<=G&&0<=J;G--,J--)if(S[G]!==I[J]){if(G!==1||J!==1)do if(G--,J--,0>J||S[G]!==I[J]){var se=`
`+S[G].replace(" at new "," at ");return c.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",c.displayName)),se}while(1<=G&&0<=J);break}}}finally{re=!1,Error.prepareStackTrace=m}return(c=c?c.displayName||c.name:"")?V(c):""}function ee(c){switch(c.tag){case 5:return V(c.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return c=te(c.type,!1),c;case 11:return c=te(c.type.render,!1),c;case 1:return c=te(c.type,!0),c;default:return""}}function de(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case B:return"Portal";case M:return"Profiler";case C:return"StrictMode";case D:return"Suspense";case we:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case O:return(c.displayName||"Context")+".Consumer";case F:return(c._context.displayName||"Context")+".Provider";case W:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Ne:return d=c.displayName||null,d!==null?d:de(c.type)||"Memo";case Le:d=c._payload,c=c._init;try{return de(c(d))}catch{}}return null}function Oe(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(d);case 8:return d===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Se(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Fe(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function je(c){var d=Fe(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),v=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var S=m.get,I=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return S.call(this)},set:function(G){v=""+G,I.call(this,G)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(G){v=""+G},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Qe(c){c._valueTracker||(c._valueTracker=je(c))}function gt(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),v="";return c&&(v=Fe(c)?c.checked?"true":"false":c.value),c=v,c!==m?(d.setValue(c),!0):!1}function _t(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Lt(c,d){var m=d.checked;return Ae({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??c._wrapperState.initialChecked})}function nn(c,d){var m=d.defaultValue==null?"":d.defaultValue,v=d.checked!=null?d.checked:d.defaultChecked;m=Se(d.value!=null?d.value:m),c._wrapperState={initialChecked:v,initialValue:m,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ut(c,d){d=d.checked,d!=null&&k(c,"checked",d,!1)}function De(c,d){Ut(c,d);var m=Se(d.value),v=d.type;if(m!=null)v==="number"?(m===0&&c.value===""||c.value!=m)&&(c.value=""+m):c.value!==""+m&&(c.value=""+m);else if(v==="submit"||v==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Te(c,d.type,m):d.hasOwnProperty("defaultValue")&&Te(c,d.type,Se(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function Xt(c,d,m){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var v=d.type;if(!(v!=="submit"&&v!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,m||d===c.value||(c.value=d),c.defaultValue=d}m=c.name,m!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,m!==""&&(c.name=m)}function Te(c,d,m){(d!=="number"||_t(c.ownerDocument)!==c)&&(m==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+m&&(c.defaultValue=""+m))}var ge=Array.isArray;function b(c,d,m,v){if(c=c.options,d){d={};for(var S=0;S<m.length;S++)d["$"+m[S]]=!0;for(m=0;m<c.length;m++)S=d.hasOwnProperty("$"+c[m].value),c[m].selected!==S&&(c[m].selected=S),S&&v&&(c[m].defaultSelected=!0)}else{for(m=""+Se(m),d=null,S=0;S<c.length;S++){if(c[S].value===m){c[S].selected=!0,v&&(c[S].defaultSelected=!0);return}d!==null||c[S].disabled||(d=c[S])}d!==null&&(d.selected=!0)}}function Et(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(t(91));return Ae({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function X(c,d){var m=d.value;if(m==null){if(m=d.children,d=d.defaultValue,m!=null){if(d!=null)throw Error(t(92));if(ge(m)){if(1<m.length)throw Error(t(93));m=m[0]}d=m}d==null&&(d=""),m=d}c._wrapperState={initialValue:Se(m)}}function Ot(c,d){var m=Se(d.value),v=Se(d.defaultValue);m!=null&&(m=""+m,m!==c.value&&(c.value=m),d.defaultValue==null&&c.defaultValue!==m&&(c.defaultValue=m)),v!=null&&(c.defaultValue=""+v)}function ne(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function z(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?z(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var $e,Ie=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,m,v,S){MSApp.execUnsafeLocalFunction(function(){return c(d,m,v,S)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for($e=$e||document.createElement("div"),$e.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=$e.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function Ze(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vt=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(c){vt.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),ht[d]=ht[c]})});function wt(c,d,m){return d==null||typeof d=="boolean"||d===""?"":m||typeof d!="number"||d===0||ht.hasOwnProperty(c)&&ht[c]?(""+d).trim():d+"px"}function bt(c,d){c=c.style;for(var m in d)if(d.hasOwnProperty(m)){var v=m.indexOf("--")===0,S=wt(m,d[m],v);m==="float"&&(m="cssFloat"),v?c.setProperty(m,S):c[m]=S}}var en=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dr(c,d){if(d){if(en[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(t(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(t(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(t(61))}if(d.style!=null&&typeof d.style!="object")throw Error(t(62))}}function bs(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zi=null;function $i(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Ir=null,ci=null,Tn=null;function Cs(c){if(c=hg(c)){if(typeof Ir!="function")throw Error(t(280));var d=c.stateNode;d&&(d=$1(d),Ir(c.stateNode,c.type,d))}}function Ps(c){ci?Tn?Tn.push(c):Tn=[c]:ci=c}function nr(){if(ci){var c=ci,d=Tn;if(Tn=ci=null,Cs(c),d)for(c=0;c<d.length;c++)Cs(d[c])}}function rs(c,d){return c(d)}function Fr(){}var rr=!1;function jr(c,d,m){if(rr)return c(d,m);rr=!0;try{return rs(c,d,m)}finally{rr=!1,(ci!==null||Tn!==null)&&(Fr(),nr())}}function Vr(c,d){var m=c.stateNode;if(m===null)return null;var v=$1(m);if(v===null)return null;m=v[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(c=c.type,v=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!v;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(t(231,d,typeof m));return m}var Ar=!1;if(o)try{var on={};Object.defineProperty(on,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Ar=!1}function hr(c,d,m,v,S,I,G,J,se){var ve=Array.prototype.slice.call(arguments,3);try{d.apply(m,ve)}catch(ze){this.onError(ze)}}var xr=!1,is=null,U=!1,q=null,K={onError:function(c){xr=!0,is=c}};function Y(c,d,m,v,S,I,G,J,se){xr=!1,is=null,hr.apply(K,arguments)}function Z(c,d,m,v,S,I,G,J,se){if(Y.apply(this,arguments),xr){if(xr){var ve=is;xr=!1,is=null}else throw Error(t(198));U||(U=!0,q=ve)}}function Q(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function pe(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Pe(c){if(Q(c)!==c)throw Error(t(188))}function me(c){var d=c.alternate;if(!d){if(d=Q(c),d===null)throw Error(t(188));return d!==c?null:c}for(var m=c,v=d;;){var S=m.return;if(S===null)break;var I=S.alternate;if(I===null){if(v=S.return,v!==null){m=v;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===m)return Pe(S),c;if(I===v)return Pe(S),d;I=I.sibling}throw Error(t(188))}if(m.return!==v.return)m=S,v=I;else{for(var G=!1,J=S.child;J;){if(J===m){G=!0,m=S,v=I;break}if(J===v){G=!0,v=S,m=I;break}J=J.sibling}if(!G){for(J=I.child;J;){if(J===m){G=!0,m=I,v=S;break}if(J===v){G=!0,v=I,m=S;break}J=J.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==v)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?c:d}function ye(c){return c=me(c),c!==null?xe(c):null}function xe(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=xe(c);if(d!==null)return d;c=c.sibling}return null}var We=e.unstable_scheduleCallback,et=e.unstable_cancelCallback,ut=e.unstable_shouldYield,He=e.unstable_requestPaint,Ke=e.unstable_now,jt=e.unstable_getCurrentPriorityLevel,In=e.unstable_ImmediatePriority,Pn=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,Aa=e.unstable_LowPriority,ea=e.unstable_IdlePriority,ks=null,vr=null;function Wl(c){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(ks,c,void 0,(c.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:Tu,io=Math.log,ta=Math.LN2;function Tu(c){return c>>>=0,c===0?32:31-(io(c)/ta|0)|0}var so=64,Hl=4194304;function xn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Xo(c,d){var m=c.pendingLanes;if(m===0)return 0;var v=0,S=c.suspendedLanes,I=c.pingedLanes,G=m&268435455;if(G!==0){var J=G&~S;J!==0?v=xn(J):(I&=G,I!==0&&(v=xn(I)))}else G=m&~S,G!==0?v=xn(G):I!==0&&(v=xn(I));if(v===0)return 0;if(d!==0&&d!==v&&(d&S)===0&&(S=v&-v,I=d&-d,S>=I||S===16&&(I&4194240)!==0))return d;if((v&4)!==0&&(v|=m&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=v;0<d;)m=31-ir(d),S=1<<m,v|=c[m],d&=~S;return v}function Iu(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Au(c,d){for(var m=c.suspendedLanes,v=c.pingedLanes,S=c.expirationTimes,I=c.pendingLanes;0<I;){var G=31-ir(I),J=1<<G,se=S[G];se===-1?((J&m)===0||(J&v)!==0)&&(S[G]=Iu(J,d)):se<=d&&(c.expiredLanes|=J),I&=~J}}function $0(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function W0(){var c=so;return so<<=1,(so&4194240)===0&&(so=64),c}function H0(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Ru(c,d,m){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-ir(d),c[d]=m}function VE(c,d){var m=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var v=c.eventTimes;for(c=c.expirationTimes;0<m;){var S=31-ir(m),I=1<<S;d[S]=0,v[S]=-1,c[S]=-1,m&=~I}}function K0(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var v=31-ir(m),S=1<<v;S&d|c[v]&d&&(c[v]|=d),m&=~S}}var ln=0;function ao(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Y0,fd,X0,q0,Z0,oo=!1,gd=[],lo=null,co=null,ui=null,bu=new Map,qo=new Map,Ms=[],b1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(c,d){switch(c){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":bu.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(d.pointerId)}}function Ra(c,d,m,v,S,I){return c===null||c.nativeEvent!==I?(c={blockedOn:d,domEventName:m,eventSystemFlags:v,nativeEvent:I,targetContainers:[S]},d!==null&&(d=hg(d),d!==null&&fd(d)),c):(c.eventSystemFlags|=v,d=c.targetContainers,S!==null&&d.indexOf(S)===-1&&d.push(S),c)}function C1(c,d,m,v,S){switch(d){case"focusin":return lo=Ra(lo,c,d,m,v,S),!0;case"dragenter":return co=Ra(co,c,d,m,v,S),!0;case"mouseover":return ui=Ra(ui,c,d,m,v,S),!0;case"pointerover":var I=S.pointerId;return bu.set(I,Ra(bu.get(I)||null,c,d,m,v,S)),!0;case"gotpointercapture":return I=S.pointerId,qo.set(I,Ra(qo.get(I)||null,c,d,m,v,S)),!0}return!1}function md(c){var d=Mu(c.target);if(d!==null){var m=Q(d);if(m!==null){if(d=m.tag,d===13){if(d=pe(m),d!==null){c.blockedOn=d,Z0(c.priority,function(){X0(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Un(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=pd(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(m===null){m=c.nativeEvent;var v=new m.constructor(m.type,m);zi=v,m.target.dispatchEvent(v),zi=null}else return d=hg(m),d!==null&&fd(d),c.blockedOn=m,!1;d.shift()}return!0}function P1(c,d,m){Un(c)&&m.delete(d)}function GE(){oo=!1,lo!==null&&Un(lo)&&(lo=null),co!==null&&Un(co)&&(co=null),ui!==null&&Un(ui)&&(ui=null),bu.forEach(P1),qo.forEach(P1)}function Yl(c,d){c.blockedOn===d&&(c.blockedOn=null,oo||(oo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,GE)))}function Xl(c){function d(S){return Yl(S,c)}if(0<gd.length){Yl(gd[0],c);for(var m=1;m<gd.length;m++){var v=gd[m];v.blockedOn===c&&(v.blockedOn=null)}}for(lo!==null&&Yl(lo,c),co!==null&&Yl(co,c),ui!==null&&Yl(ui,c),bu.forEach(d),qo.forEach(d),m=0;m<Ms.length;m++)v=Ms[m],v.blockedOn===c&&(v.blockedOn=null);for(;0<Ms.length&&(m=Ms[0],m.blockedOn===null);)md(m),m.blockedOn===null&&Ms.shift()}var Zo=N.ReactCurrentBatchConfig,Qo=!0;function uo(c,d,m,v){var S=ln,I=Zo.transition;Zo.transition=null;try{ln=1,Q0(c,d,m,v)}finally{ln=S,Zo.transition=I}}function k1(c,d,m,v){var S=ln,I=Zo.transition;Zo.transition=null;try{ln=4,Q0(c,d,m,v)}finally{ln=S,Zo.transition=I}}function Q0(c,d,m,v){if(Qo){var S=pd(c,d,m,v);if(S===null)ZE(c,d,v,ho,m),Kl(c,v);else if(C1(S,c,d,m,v))v.stopPropagation();else if(Kl(c,v),d&4&&-1<b1.indexOf(c)){for(;S!==null;){var I=hg(S);if(I!==null&&Y0(I),I=pd(c,d,m,v),I===null&&ZE(c,d,v,ho,m),I===S)break;S=I}S!==null&&v.stopPropagation()}else ZE(c,d,v,null,m)}}var ho=null;function pd(c,d,m,v){if(ho=null,c=$i(v),c=Mu(c),c!==null)if(d=Q(c),d===null)c=null;else if(m=d.tag,m===13){if(c=pe(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return ho=c,null}function _d(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jt()){case In:return 1;case Pn:return 4;case Qn:case Aa:return 16;case ea:return 536870912;default:return 16}default:return 16}}var Ns=null,yd=null,Jo=null;function M1(){if(Jo)return Jo;var c,d=yd,m=d.length,v,S="value"in Ns?Ns.value:Ns.textContent,I=S.length;for(c=0;c<m&&d[c]===S[c];c++);var G=m-c;for(v=1;v<=G&&d[m-v]===S[I-v];v++);return Jo=S.slice(c,1<v?1-v:void 0)}function Cu(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function fo(){return!0}function J0(){return!1}function Ai(c){function d(m,v,S,I,G){this._reactName=m,this._targetInst=S,this.type=v,this.nativeEvent=I,this.target=G,this.currentTarget=null;for(var J in c)c.hasOwnProperty(J)&&(m=c[J],this[J]=m?m(I):I[J]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?fo:J0,this.isPropagationStopped=J0,this}return Ae(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),d}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=Ai(go),ql=Ae({},go,{view:0,detail:0}),xd=Ai(ql),vd,Ed,Ls,ku=Ae({},ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ht,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ls&&(Ls&&c.type==="mousemove"?(vd=c.screenX-Ls.screenX,Ed=c.screenY-Ls.screenY):Ed=vd=0,Ls=c),vd)},movementY:function(c){return"movementY"in c?c.movementY:Ed}}),eg=Ai(ku),N1=Ae({},ku,{dataTransfer:0}),L1=Ai(N1),wd=Ae({},ql,{relatedTarget:0}),hi=Ai(wd),O1=Ae({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),D1=Ai(O1),Zl=Ae({},go,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),_=Ai(Zl),A=Ae({},go,{data:0}),L=Ai(A),H={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rt(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Ee[c])?!!d[c]:!1}function Ht(){return rt}var Er=Ae({},ql,{key:function(c){if(c.key){var d=H[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Cu(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?fe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ht,charCode:function(c){return c.type==="keypress"?Cu(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Cu(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),kn=Ai(Er),Rr=Ae({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=Ai(Rr),el=Ae({},ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ht}),mo=Ai(el),po=Ae({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sd=Ai(po),tg=Ae({},ku,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),BV=Ai(tg),UV=[9,13,27,32],BE=o&&"CompositionEvent"in window,ng=null;o&&"documentMode"in document&&(ng=document.documentMode);var zV=o&&"TextEvent"in window&&!ng,nC=o&&(!BE||ng&&8<ng&&11>=ng),rC=" ",iC=!1;function sC(c,d){switch(c){case"keyup":return UV.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aC(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Td=!1;function $V(c,d){switch(c){case"compositionend":return aC(d);case"keypress":return d.which!==32?null:(iC=!0,rC);case"textInput":return c=d.data,c===rC&&iC?null:c;default:return null}}function WV(c,d){if(Td)return c==="compositionend"||!BE&&sC(c,d)?(c=M1(),Jo=yd=Ns=null,Td=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return nC&&d.locale!=="ko"?null:d.data;default:return null}}var HV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oC(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!HV[c.type]:d==="textarea"}function lC(c,d,m,v){Ps(v),d=B1(d,"onChange"),0<d.length&&(m=new Pu("onChange","change",null,m,v),c.push({event:m,listeners:d}))}var rg=null,ig=null;function KV(c){AC(c,0)}function F1(c){var d=Cd(c);if(gt(d))return c}function YV(c,d){if(c==="change")return d}var cC=!1;if(o){var UE;if(o){var zE="oninput"in document;if(!zE){var uC=document.createElement("div");uC.setAttribute("oninput","return;"),zE=typeof uC.oninput=="function"}UE=zE}else UE=!1;cC=UE&&(!document.documentMode||9<document.documentMode)}function hC(){rg&&(rg.detachEvent("onpropertychange",dC),ig=rg=null)}function dC(c){if(c.propertyName==="value"&&F1(ig)){var d=[];lC(d,ig,c,$i(c)),jr(KV,d)}}function XV(c,d,m){c==="focusin"?(hC(),rg=d,ig=m,rg.attachEvent("onpropertychange",dC)):c==="focusout"&&hC()}function qV(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return F1(ig)}function ZV(c,d){if(c==="click")return F1(d)}function QV(c,d){if(c==="input"||c==="change")return F1(d)}function JV(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var ba=typeof Object.is=="function"?Object.is:JV;function sg(c,d){if(ba(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),v=Object.keys(d);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var S=m[v];if(!l.call(d,S)||!ba(c[S],d[S]))return!1}return!0}function fC(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function gC(c,d){var m=fC(c);c=0;for(var v;m;){if(m.nodeType===3){if(v=c+m.textContent.length,c<=d&&v>=d)return{node:m,offset:d-c};c=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=fC(m)}}function mC(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?mC(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function pC(){for(var c=window,d=_t();d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=_t(c.document)}return d}function $E(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function eG(c){var d=pC(),m=c.focusedElem,v=c.selectionRange;if(d!==m&&m&&m.ownerDocument&&mC(m.ownerDocument.documentElement,m)){if(v!==null&&$E(m)){if(d=v.start,c=v.end,c===void 0&&(c=d),"selectionStart"in m)m.selectionStart=d,m.selectionEnd=Math.min(c,m.value.length);else if(c=(d=m.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var S=m.textContent.length,I=Math.min(v.start,S);v=v.end===void 0?I:Math.min(v.end,S),!c.extend&&I>v&&(S=v,v=I,I=S),S=gC(m,I);var G=gC(m,v);S&&G&&(c.rangeCount!==1||c.anchorNode!==S.node||c.anchorOffset!==S.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(d=d.createRange(),d.setStart(S.node,S.offset),c.removeAllRanges(),I>v?(c.addRange(d),c.extend(G.node,G.offset)):(d.setEnd(G.node,G.offset),c.addRange(d)))}}for(d=[],c=m;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<d.length;m++)c=d[m],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var tG=o&&"documentMode"in document&&11>=document.documentMode,Id=null,WE=null,ag=null,HE=!1;function _C(c,d,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;HE||Id==null||Id!==_t(v)||(v=Id,"selectionStart"in v&&$E(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),ag&&sg(ag,v)||(ag=v,v=B1(WE,"onSelect"),0<v.length&&(d=new Pu("onSelect","select",null,d,m),c.push({event:d,listeners:v}),d.target=Id)))}function j1(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var Ad={animationend:j1("Animation","AnimationEnd"),animationiteration:j1("Animation","AnimationIteration"),animationstart:j1("Animation","AnimationStart"),transitionend:j1("Transition","TransitionEnd")},KE={},yC={};o&&(yC=document.createElement("div").style,"AnimationEvent"in window||(delete Ad.animationend.animation,delete Ad.animationiteration.animation,delete Ad.animationstart.animation),"TransitionEvent"in window||delete Ad.transitionend.transition);function V1(c){if(KE[c])return KE[c];if(!Ad[c])return c;var d=Ad[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in yC)return KE[c]=d[m];return c}var xC=V1("animationend"),vC=V1("animationiteration"),EC=V1("animationstart"),wC=V1("transitionend"),SC=new Map,TC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(c,d){SC.set(c,d),s(d,[c])}for(var YE=0;YE<TC.length;YE++){var XE=TC[YE],nG=XE.toLowerCase(),rG=XE[0].toUpperCase()+XE.slice(1);Ql(nG,"on"+rG)}Ql(xC,"onAnimationEnd"),Ql(vC,"onAnimationIteration"),Ql(EC,"onAnimationStart"),Ql("dblclick","onDoubleClick"),Ql("focusin","onFocus"),Ql("focusout","onBlur"),Ql(wC,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var og="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iG=new Set("cancel close invalid load scroll toggle".split(" ").concat(og));function IC(c,d,m){var v=c.type||"unknown-event";c.currentTarget=m,Z(v,d,void 0,c),c.currentTarget=null}function AC(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var v=c[m],S=v.event;v=v.listeners;e:{var I=void 0;if(d)for(var G=v.length-1;0<=G;G--){var J=v[G],se=J.instance,ve=J.currentTarget;if(J=J.listener,se!==I&&S.isPropagationStopped())break e;IC(S,J,ve),I=se}else for(G=0;G<v.length;G++){if(J=v[G],se=J.instance,ve=J.currentTarget,J=J.listener,se!==I&&S.isPropagationStopped())break e;IC(S,J,ve),I=se}}}if(U)throw c=q,U=!1,q=null,c}function Hn(c,d){var m=d[rw];m===void 0&&(m=d[rw]=new Set);var v=c+"__bubble";m.has(v)||(RC(d,c,2,!1),m.add(v))}function qE(c,d,m){var v=0;d&&(v|=4),RC(m,c,v,d)}var G1="_reactListening"+Math.random().toString(36).slice(2);function lg(c){if(!c[G1]){c[G1]=!0,r.forEach(function(m){m!=="selectionchange"&&(iG.has(m)||qE(m,!1,c),qE(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[G1]||(d[G1]=!0,qE("selectionchange",!1,d))}}function RC(c,d,m,v){switch(_d(d)){case 1:var S=uo;break;case 4:S=k1;break;default:S=Q0}m=S.bind(null,d,m,c),S=void 0,!Ar||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(S=!0),v?S!==void 0?c.addEventListener(d,m,{capture:!0,passive:S}):c.addEventListener(d,m,!0):S!==void 0?c.addEventListener(d,m,{passive:S}):c.addEventListener(d,m,!1)}function ZE(c,d,m,v,S){var I=v;if((d&1)===0&&(d&2)===0&&v!==null)e:for(;;){if(v===null)return;var G=v.tag;if(G===3||G===4){var J=v.stateNode.containerInfo;if(J===S||J.nodeType===8&&J.parentNode===S)break;if(G===4)for(G=v.return;G!==null;){var se=G.tag;if((se===3||se===4)&&(se=G.stateNode.containerInfo,se===S||se.nodeType===8&&se.parentNode===S))return;G=G.return}for(;J!==null;){if(G=Mu(J),G===null)return;if(se=G.tag,se===5||se===6){v=I=G;continue e}J=J.parentNode}}v=v.return}jr(function(){var ve=I,ze=$i(m),Ye=[];e:{var Be=SC.get(c);if(Be!==void 0){var ft=Pu,yt=c;switch(c){case"keypress":if(Cu(m)===0)break e;case"keydown":case"keyup":ft=kn;break;case"focusin":yt="focus",ft=hi;break;case"focusout":yt="blur",ft=hi;break;case"beforeblur":case"afterblur":ft=hi;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=eg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=L1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=mo;break;case xC:case vC:case EC:ft=D1;break;case wC:ft=Sd;break;case"scroll":ft=xd;break;case"wheel":ft=BV;break;case"copy":case"cut":case"paste":ft=_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Os}var St=(d&4)!==0,wr=!St&&c==="scroll",he=St?Be!==null?Be+"Capture":null:Be;St=[];for(var oe=ve,_e;oe!==null;){_e=oe;var Je=_e.stateNode;if(_e.tag===5&&Je!==null&&(_e=Je,he!==null&&(Je=Vr(oe,he),Je!=null&&St.push(cg(oe,Je,_e)))),wr)break;oe=oe.return}0<St.length&&(Be=new ft(Be,yt,null,m,ze),Ye.push({event:Be,listeners:St}))}}if((d&7)===0){e:{if(Be=c==="mouseover"||c==="pointerover",ft=c==="mouseout"||c==="pointerout",Be&&m!==zi&&(yt=m.relatedTarget||m.fromElement)&&(Mu(yt)||yt[tl]))break e;if((ft||Be)&&(Be=ze.window===ze?ze:(Be=ze.ownerDocument)?Be.defaultView||Be.parentWindow:window,ft?(yt=m.relatedTarget||m.toElement,ft=ve,yt=yt?Mu(yt):null,yt!==null&&(wr=Q(yt),yt!==wr||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ft=null,yt=ve),ft!==yt)){if(St=eg,Je="onMouseLeave",he="onMouseEnter",oe="mouse",(c==="pointerout"||c==="pointerover")&&(St=Os,Je="onPointerLeave",he="onPointerEnter",oe="pointer"),wr=ft==null?Be:Cd(ft),_e=yt==null?Be:Cd(yt),Be=new St(Je,oe+"leave",ft,m,ze),Be.target=wr,Be.relatedTarget=_e,Je=null,Mu(ze)===ve&&(St=new St(he,oe+"enter",yt,m,ze),St.target=_e,St.relatedTarget=wr,Je=St),wr=Je,ft&&yt)t:{for(St=ft,he=yt,oe=0,_e=St;_e;_e=Rd(_e))oe++;for(_e=0,Je=he;Je;Je=Rd(Je))_e++;for(;0<oe-_e;)St=Rd(St),oe--;for(;0<_e-oe;)he=Rd(he),_e--;for(;oe--;){if(St===he||he!==null&&St===he.alternate)break t;St=Rd(St),he=Rd(he)}St=null}else St=null;ft!==null&&bC(Ye,Be,ft,St,!1),yt!==null&&wr!==null&&bC(Ye,wr,yt,St,!0)}}e:{if(Be=ve?Cd(ve):window,ft=Be.nodeName&&Be.nodeName.toLowerCase(),ft==="select"||ft==="input"&&Be.type==="file")var It=YV;else if(oC(Be))if(cC)It=QV;else{It=qV;var Mt=XV}else(ft=Be.nodeName)&&ft.toLowerCase()==="input"&&(Be.type==="checkbox"||Be.type==="radio")&&(It=ZV);if(It&&(It=It(c,ve))){lC(Ye,It,m,ze);break e}Mt&&Mt(c,Be,ve),c==="focusout"&&(Mt=Be._wrapperState)&&Mt.controlled&&Be.type==="number"&&Te(Be,"number",Be.value)}switch(Mt=ve?Cd(ve):window,c){case"focusin":(oC(Mt)||Mt.contentEditable==="true")&&(Id=Mt,WE=ve,ag=null);break;case"focusout":ag=WE=Id=null;break;case"mousedown":HE=!0;break;case"contextmenu":case"mouseup":case"dragend":HE=!1,_C(Ye,m,ze);break;case"selectionchange":if(tG)break;case"keydown":case"keyup":_C(Ye,m,ze)}var Nt;if(BE)e:{switch(c){case"compositionstart":var Vt="onCompositionStart";break e;case"compositionend":Vt="onCompositionEnd";break e;case"compositionupdate":Vt="onCompositionUpdate";break e}Vt=void 0}else Td?sC(c,m)&&(Vt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Vt="onCompositionStart");Vt&&(nC&&m.locale!=="ko"&&(Td||Vt!=="onCompositionStart"?Vt==="onCompositionEnd"&&Td&&(Nt=M1()):(Ns=ze,yd="value"in Ns?Ns.value:Ns.textContent,Td=!0)),Mt=B1(ve,Vt),0<Mt.length&&(Vt=new L(Vt,c,null,m,ze),Ye.push({event:Vt,listeners:Mt}),Nt?Vt.data=Nt:(Nt=aC(m),Nt!==null&&(Vt.data=Nt)))),(Nt=zV?$V(c,m):WV(c,m))&&(ve=B1(ve,"onBeforeInput"),0<ve.length&&(ze=new L("onBeforeInput","beforeinput",null,m,ze),Ye.push({event:ze,listeners:ve}),ze.data=Nt))}AC(Ye,d)})}function cg(c,d,m){return{instance:c,listener:d,currentTarget:m}}function B1(c,d){for(var m=d+"Capture",v=[];c!==null;){var S=c,I=S.stateNode;S.tag===5&&I!==null&&(S=I,I=Vr(c,m),I!=null&&v.unshift(cg(c,I,S)),I=Vr(c,d),I!=null&&v.push(cg(c,I,S))),c=c.return}return v}function Rd(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function bC(c,d,m,v,S){for(var I=d._reactName,G=[];m!==null&&m!==v;){var J=m,se=J.alternate,ve=J.stateNode;if(se!==null&&se===v)break;J.tag===5&&ve!==null&&(J=ve,S?(se=Vr(m,I),se!=null&&G.unshift(cg(m,se,J))):S||(se=Vr(m,I),se!=null&&G.push(cg(m,se,J)))),m=m.return}G.length!==0&&c.push({event:d,listeners:G})}var sG=/\r\n?/g,aG=/\u0000|\uFFFD/g;function CC(c){return(typeof c=="string"?c:""+c).replace(sG,`
`).replace(aG,"")}function U1(c,d,m){if(d=CC(d),CC(c)!==d&&m)throw Error(t(425))}function z1(){}var QE=null,JE=null;function ew(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var tw=typeof setTimeout=="function"?setTimeout:void 0,oG=typeof clearTimeout=="function"?clearTimeout:void 0,PC=typeof Promise=="function"?Promise:void 0,lG=typeof queueMicrotask=="function"?queueMicrotask:typeof PC<"u"?function(c){return PC.resolve(null).then(c).catch(cG)}:tw;function cG(c){setTimeout(function(){throw c})}function nw(c,d){var m=d,v=0;do{var S=m.nextSibling;if(c.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"){if(v===0){c.removeChild(S),Xl(d);return}v--}else m!=="$"&&m!=="$?"&&m!=="$!"||v++;m=S}while(m);Xl(d)}function Jl(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function kC(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}var bd=Math.random().toString(36).slice(2),_o="__reactFiber$"+bd,ug="__reactProps$"+bd,tl="__reactContainer$"+bd,rw="__reactEvents$"+bd,uG="__reactListeners$"+bd,hG="__reactHandles$"+bd;function Mu(c){var d=c[_o];if(d)return d;for(var m=c.parentNode;m;){if(d=m[tl]||m[_o]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=kC(c);c!==null;){if(m=c[_o])return m;c=kC(c)}return d}c=m,m=c.parentNode}return null}function hg(c){return c=c[_o]||c[tl],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function Cd(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(t(33))}function $1(c){return c[ug]||null}var iw=[],Pd=-1;function ec(c){return{current:c}}function Kn(c){0>Pd||(c.current=iw[Pd],iw[Pd]=null,Pd--)}function $n(c,d){Pd++,iw[Pd]=c.current,c.current=d}var tc={},Ri=ec(tc),ss=ec(!1),Nu=tc;function kd(c,d){var m=c.type.contextTypes;if(!m)return tc;var v=c.stateNode;if(v&&v.__reactInternalMemoizedUnmaskedChildContext===d)return v.__reactInternalMemoizedMaskedChildContext;var S={},I;for(I in m)S[I]=d[I];return v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=S),S}function as(c){return c=c.childContextTypes,c!=null}function W1(){Kn(ss),Kn(Ri)}function MC(c,d,m){if(Ri.current!==tc)throw Error(t(168));$n(Ri,d),$n(ss,m)}function NC(c,d,m){var v=c.stateNode;if(d=d.childContextTypes,typeof v.getChildContext!="function")return m;v=v.getChildContext();for(var S in v)if(!(S in d))throw Error(t(108,Oe(c)||"Unknown",S));return Ae({},m,v)}function H1(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||tc,Nu=Ri.current,$n(Ri,c),$n(ss,ss.current),!0}function LC(c,d,m){var v=c.stateNode;if(!v)throw Error(t(169));m?(c=NC(c,d,Nu),v.__reactInternalMemoizedMergedChildContext=c,Kn(ss),Kn(Ri),$n(Ri,c)):Kn(ss),$n(ss,m)}var nl=null,K1=!1,sw=!1;function OC(c){nl===null?nl=[c]:nl.push(c)}function dG(c){K1=!0,OC(c)}function nc(){if(!sw&&nl!==null){sw=!0;var c=0,d=ln;try{var m=nl;for(ln=1;c<m.length;c++){var v=m[c];do v=v(!0);while(v!==null)}nl=null,K1=!1}catch(S){throw nl!==null&&(nl=nl.slice(c+1)),We(In,nc),S}finally{ln=d,sw=!1}}return null}var Md=[],Nd=0,Y1=null,X1=0,na=[],ra=0,Lu=null,rl=1,il="";function Ou(c,d){Md[Nd++]=X1,Md[Nd++]=Y1,Y1=c,X1=d}function DC(c,d,m){na[ra++]=rl,na[ra++]=il,na[ra++]=Lu,Lu=c;var v=rl;c=il;var S=32-ir(v)-1;v&=~(1<<S),m+=1;var I=32-ir(d)+S;if(30<I){var G=S-S%5;I=(v&(1<<G)-1).toString(32),v>>=G,S-=G,rl=1<<32-ir(d)+S|m<<S|v,il=I+c}else rl=1<<I|m<<S|v,il=c}function aw(c){c.return!==null&&(Ou(c,1),DC(c,1,0))}function ow(c){for(;c===Y1;)Y1=Md[--Nd],Md[Nd]=null,X1=Md[--Nd],Md[Nd]=null;for(;c===Lu;)Lu=na[--ra],na[ra]=null,il=na[--ra],na[ra]=null,rl=na[--ra],na[ra]=null}var Ds=null,Fs=null,Jn=!1,Ca=null;function FC(c,d){var m=oa(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=c,d=c.deletions,d===null?(c.deletions=[m],c.flags|=16):d.push(m)}function jC(c,d){switch(c.tag){case 5:var m=c.type;return d=d.nodeType!==1||m.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,Ds=c,Fs=Jl(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,Ds=c,Fs=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(m=Lu!==null?{id:rl,overflow:il}:null,c.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=oa(18,null,null,0),m.stateNode=d,m.return=c,c.child=m,Ds=c,Fs=null,!0):!1;default:return!1}}function lw(c){return(c.mode&1)!==0&&(c.flags&128)===0}function cw(c){if(Jn){var d=Fs;if(d){var m=d;if(!jC(c,d)){if(lw(c))throw Error(t(418));d=Jl(m.nextSibling);var v=Ds;d&&jC(c,d)?FC(v,m):(c.flags=c.flags&-4097|2,Jn=!1,Ds=c)}}else{if(lw(c))throw Error(t(418));c.flags=c.flags&-4097|2,Jn=!1,Ds=c}}}function VC(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ds=c}function q1(c){if(c!==Ds)return!1;if(!Jn)return VC(c),Jn=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!ew(c.type,c.memoizedProps)),d&&(d=Fs)){if(lw(c))throw GC(),Error(t(418));for(;d;)FC(c,d),d=Jl(d.nextSibling)}if(VC(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(t(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"){if(d===0){Fs=Jl(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++}c=c.nextSibling}Fs=null}}else Fs=Ds?Jl(c.stateNode.nextSibling):null;return!0}function GC(){for(var c=Fs;c;)c=Jl(c.nextSibling)}function Ld(){Fs=Ds=null,Jn=!1}function uw(c){Ca===null?Ca=[c]:Ca.push(c)}var fG=N.ReactCurrentBatchConfig;function dg(c,d,m){if(c=m.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var v=m.stateNode}if(!v)throw Error(t(147,c));var S=v,I=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===I?d.ref:(d=function(G){var J=S.refs;G===null?delete J[I]:J[I]=G},d._stringRef=I,d)}if(typeof c!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,c))}return c}function Z1(c,d){throw c=Object.prototype.toString.call(d),Error(t(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function BC(c){var d=c._init;return d(c._payload)}function UC(c){function d(he,oe){if(c){var _e=he.deletions;_e===null?(he.deletions=[oe],he.flags|=16):_e.push(oe)}}function m(he,oe){if(!c)return null;for(;oe!==null;)d(he,oe),oe=oe.sibling;return null}function v(he,oe){for(he=new Map;oe!==null;)oe.key!==null?he.set(oe.key,oe):he.set(oe.index,oe),oe=oe.sibling;return he}function S(he,oe){return he=uc(he,oe),he.index=0,he.sibling=null,he}function I(he,oe,_e){return he.index=_e,c?(_e=he.alternate,_e!==null?(_e=_e.index,_e<oe?(he.flags|=2,oe):_e):(he.flags|=2,oe)):(he.flags|=1048576,oe)}function G(he){return c&&he.alternate===null&&(he.flags|=2),he}function J(he,oe,_e,Je){return oe===null||oe.tag!==6?(oe=t2(_e,he.mode,Je),oe.return=he,oe):(oe=S(oe,_e),oe.return=he,oe)}function se(he,oe,_e,Je){var It=_e.type;return It===P?ze(he,oe,_e.props.children,Je,_e.key):oe!==null&&(oe.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Le&&BC(It)===oe.type)?(Je=S(oe,_e.props),Je.ref=dg(he,oe,_e),Je.return=he,Je):(Je=E_(_e.type,_e.key,_e.props,null,he.mode,Je),Je.ref=dg(he,oe,_e),Je.return=he,Je)}function ve(he,oe,_e,Je){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==_e.containerInfo||oe.stateNode.implementation!==_e.implementation?(oe=n2(_e,he.mode,Je),oe.return=he,oe):(oe=S(oe,_e.children||[]),oe.return=he,oe)}function ze(he,oe,_e,Je,It){return oe===null||oe.tag!==7?(oe=zu(_e,he.mode,Je,It),oe.return=he,oe):(oe=S(oe,_e),oe.return=he,oe)}function Ye(he,oe,_e){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=t2(""+oe,he.mode,_e),oe.return=he,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case j:return _e=E_(oe.type,oe.key,oe.props,null,he.mode,_e),_e.ref=dg(he,null,oe),_e.return=he,_e;case B:return oe=n2(oe,he.mode,_e),oe.return=he,oe;case Le:var Je=oe._init;return Ye(he,Je(oe._payload),_e)}if(ge(oe)||Re(oe))return oe=zu(oe,he.mode,_e,null),oe.return=he,oe;Z1(he,oe)}return null}function Be(he,oe,_e,Je){var It=oe!==null?oe.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return It!==null?null:J(he,oe,""+_e,Je);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:return _e.key===It?se(he,oe,_e,Je):null;case B:return _e.key===It?ve(he,oe,_e,Je):null;case Le:return It=_e._init,Be(he,oe,It(_e._payload),Je)}if(ge(_e)||Re(_e))return It!==null?null:ze(he,oe,_e,Je,null);Z1(he,_e)}return null}function ft(he,oe,_e,Je,It){if(typeof Je=="string"&&Je!==""||typeof Je=="number")return he=he.get(_e)||null,J(oe,he,""+Je,It);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case j:return he=he.get(Je.key===null?_e:Je.key)||null,se(oe,he,Je,It);case B:return he=he.get(Je.key===null?_e:Je.key)||null,ve(oe,he,Je,It);case Le:var Mt=Je._init;return ft(he,oe,_e,Mt(Je._payload),It)}if(ge(Je)||Re(Je))return he=he.get(_e)||null,ze(oe,he,Je,It,null);Z1(oe,Je)}return null}function yt(he,oe,_e,Je){for(var It=null,Mt=null,Nt=oe,Vt=oe=0,Zr=null;Nt!==null&&Vt<_e.length;Vt++){Nt.index>Vt?(Zr=Nt,Nt=null):Zr=Nt.sibling;var mn=Be(he,Nt,_e[Vt],Je);if(mn===null){Nt===null&&(Nt=Zr);break}c&&Nt&&mn.alternate===null&&d(he,Nt),oe=I(mn,oe,Vt),Mt===null?It=mn:Mt.sibling=mn,Mt=mn,Nt=Zr}if(Vt===_e.length)return m(he,Nt),Jn&&Ou(he,Vt),It;if(Nt===null){for(;Vt<_e.length;Vt++)Nt=Ye(he,_e[Vt],Je),Nt!==null&&(oe=I(Nt,oe,Vt),Mt===null?It=Nt:Mt.sibling=Nt,Mt=Nt);return Jn&&Ou(he,Vt),It}for(Nt=v(he,Nt);Vt<_e.length;Vt++)Zr=ft(Nt,he,Vt,_e[Vt],Je),Zr!==null&&(c&&Zr.alternate!==null&&Nt.delete(Zr.key===null?Vt:Zr.key),oe=I(Zr,oe,Vt),Mt===null?It=Zr:Mt.sibling=Zr,Mt=Zr);return c&&Nt.forEach(function(hc){return d(he,hc)}),Jn&&Ou(he,Vt),It}function St(he,oe,_e,Je){var It=Re(_e);if(typeof It!="function")throw Error(t(150));if(_e=It.call(_e),_e==null)throw Error(t(151));for(var Mt=It=null,Nt=oe,Vt=oe=0,Zr=null,mn=_e.next();Nt!==null&&!mn.done;Vt++,mn=_e.next()){Nt.index>Vt?(Zr=Nt,Nt=null):Zr=Nt.sibling;var hc=Be(he,Nt,mn.value,Je);if(hc===null){Nt===null&&(Nt=Zr);break}c&&Nt&&hc.alternate===null&&d(he,Nt),oe=I(hc,oe,Vt),Mt===null?It=hc:Mt.sibling=hc,Mt=hc,Nt=Zr}if(mn.done)return m(he,Nt),Jn&&Ou(he,Vt),It;if(Nt===null){for(;!mn.done;Vt++,mn=_e.next())mn=Ye(he,mn.value,Je),mn!==null&&(oe=I(mn,oe,Vt),Mt===null?It=mn:Mt.sibling=mn,Mt=mn);return Jn&&Ou(he,Vt),It}for(Nt=v(he,Nt);!mn.done;Vt++,mn=_e.next())mn=ft(Nt,he,Vt,mn.value,Je),mn!==null&&(c&&mn.alternate!==null&&Nt.delete(mn.key===null?Vt:mn.key),oe=I(mn,oe,Vt),Mt===null?It=mn:Mt.sibling=mn,Mt=mn);return c&&Nt.forEach(function(HG){return d(he,HG)}),Jn&&Ou(he,Vt),It}function wr(he,oe,_e,Je){if(typeof _e=="object"&&_e!==null&&_e.type===P&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case j:e:{for(var It=_e.key,Mt=oe;Mt!==null;){if(Mt.key===It){if(It=_e.type,It===P){if(Mt.tag===7){m(he,Mt.sibling),oe=S(Mt,_e.props.children),oe.return=he,he=oe;break e}}else if(Mt.elementType===It||typeof It=="object"&&It!==null&&It.$$typeof===Le&&BC(It)===Mt.type){m(he,Mt.sibling),oe=S(Mt,_e.props),oe.ref=dg(he,Mt,_e),oe.return=he,he=oe;break e}m(he,Mt);break}else d(he,Mt);Mt=Mt.sibling}_e.type===P?(oe=zu(_e.props.children,he.mode,Je,_e.key),oe.return=he,he=oe):(Je=E_(_e.type,_e.key,_e.props,null,he.mode,Je),Je.ref=dg(he,oe,_e),Je.return=he,he=Je)}return G(he);case B:e:{for(Mt=_e.key;oe!==null;){if(oe.key===Mt)if(oe.tag===4&&oe.stateNode.containerInfo===_e.containerInfo&&oe.stateNode.implementation===_e.implementation){m(he,oe.sibling),oe=S(oe,_e.children||[]),oe.return=he,he=oe;break e}else{m(he,oe);break}else d(he,oe);oe=oe.sibling}oe=n2(_e,he.mode,Je),oe.return=he,he=oe}return G(he);case Le:return Mt=_e._init,wr(he,oe,Mt(_e._payload),Je)}if(ge(_e))return yt(he,oe,_e,Je);if(Re(_e))return St(he,oe,_e,Je);Z1(he,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,oe!==null&&oe.tag===6?(m(he,oe.sibling),oe=S(oe,_e),oe.return=he,he=oe):(m(he,oe),oe=t2(_e,he.mode,Je),oe.return=he,he=oe),G(he)):m(he,oe)}return wr}var Od=UC(!0),zC=UC(!1),Q1=ec(null),J1=null,Dd=null,hw=null;function dw(){hw=Dd=J1=null}function fw(c){var d=Q1.current;Kn(Q1),c._currentValue=d}function gw(c,d,m){for(;c!==null;){var v=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,v!==null&&(v.childLanes|=d)):v!==null&&(v.childLanes&d)!==d&&(v.childLanes|=d),c===m)break;c=c.return}}function Fd(c,d){J1=c,hw=Dd=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(os=!0),c.firstContext=null)}function ia(c){var d=c._currentValue;if(hw!==c)if(c={context:c,memoizedValue:d,next:null},Dd===null){if(J1===null)throw Error(t(308));Dd=c,J1.dependencies={lanes:0,firstContext:c}}else Dd=Dd.next=c;return d}var Du=null;function mw(c){Du===null?Du=[c]:Du.push(c)}function $C(c,d,m,v){var S=d.interleaved;return S===null?(m.next=m,mw(d)):(m.next=S.next,S.next=m),d.interleaved=m,sl(c,v)}function sl(c,d){c.lanes|=d;var m=c.alternate;for(m!==null&&(m.lanes|=d),m=c,c=c.return;c!==null;)c.childLanes|=d,m=c.alternate,m!==null&&(m.childLanes|=d),m=c,c=c.return;return m.tag===3?m.stateNode:null}var rc=!1;function pw(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WC(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function al(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function ic(c,d,m){var v=c.updateQueue;if(v===null)return null;if(v=v.shared,(dn&2)!==0){var S=v.pending;return S===null?d.next=d:(d.next=S.next,S.next=d),v.pending=d,sl(c,m)}return S=v.interleaved,S===null?(d.next=d,mw(v)):(d.next=S.next,S.next=d),v.interleaved=d,sl(c,m)}function e_(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,K0(c,m)}}function HC(c,d){var m=c.updateQueue,v=c.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var S=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};I===null?S=I=G:I=I.next=G,m=m.next}while(m!==null);I===null?S=I=d:I=I.next=d}else S=I=d;m={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:v.shared,effects:v.effects},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}function t_(c,d,m,v){var S=c.updateQueue;rc=!1;var I=S.firstBaseUpdate,G=S.lastBaseUpdate,J=S.shared.pending;if(J!==null){S.shared.pending=null;var se=J,ve=se.next;se.next=null,G===null?I=ve:G.next=ve,G=se;var ze=c.alternate;ze!==null&&(ze=ze.updateQueue,J=ze.lastBaseUpdate,J!==G&&(J===null?ze.firstBaseUpdate=ve:J.next=ve,ze.lastBaseUpdate=se))}if(I!==null){var Ye=S.baseState;G=0,ze=ve=se=null,J=I;do{var Be=J.lane,ft=J.eventTime;if((v&Be)===Be){ze!==null&&(ze=ze.next={eventTime:ft,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var yt=c,St=J;switch(Be=d,ft=m,St.tag){case 1:if(yt=St.payload,typeof yt=="function"){Ye=yt.call(ft,Ye,Be);break e}Ye=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=St.payload,Be=typeof yt=="function"?yt.call(ft,Ye,Be):yt,Be==null)break e;Ye=Ae({},Ye,Be);break e;case 2:rc=!0}}J.callback!==null&&J.lane!==0&&(c.flags|=64,Be=S.effects,Be===null?S.effects=[J]:Be.push(J))}else ft={eventTime:ft,lane:Be,tag:J.tag,payload:J.payload,callback:J.callback,next:null},ze===null?(ve=ze=ft,se=Ye):ze=ze.next=ft,G|=Be;if(J=J.next,J===null){if(J=S.shared.pending,J===null)break;Be=J,J=Be.next,Be.next=null,S.lastBaseUpdate=Be,S.shared.pending=null}}while(!0);if(ze===null&&(se=Ye),S.baseState=se,S.firstBaseUpdate=ve,S.lastBaseUpdate=ze,d=S.shared.interleaved,d!==null){S=d;do G|=S.lane,S=S.next;while(S!==d)}else I===null&&(S.shared.lanes=0);Vu|=G,c.lanes=G,c.memoizedState=Ye}}function KC(c,d,m){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var v=c[d],S=v.callback;if(S!==null){if(v.callback=null,v=m,typeof S!="function")throw Error(t(191,S));S.call(v)}}}var fg={},yo=ec(fg),gg=ec(fg),mg=ec(fg);function Fu(c){if(c===fg)throw Error(t(174));return c}function _w(c,d){switch($n(mg,d),$n(gg,c),$n(yo,fg),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:le(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=le(d,c)}Kn(yo),$n(yo,d)}function jd(){Kn(yo),Kn(gg),Kn(mg)}function YC(c){Fu(mg.current);var d=Fu(yo.current),m=le(d,c.type);d!==m&&($n(gg,c),$n(yo,m))}function yw(c){gg.current===c&&(Kn(yo),Kn(gg))}var sr=ec(0);function n_(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var xw=[];function vw(){for(var c=0;c<xw.length;c++)xw[c]._workInProgressVersionPrimary=null;xw.length=0}var r_=N.ReactCurrentDispatcher,Ew=N.ReactCurrentBatchConfig,ju=0,ar=null,Gr=null,Xr=null,i_=!1,pg=!1,_g=0,gG=0;function bi(){throw Error(t(321))}function ww(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!ba(c[m],d[m]))return!1;return!0}function Sw(c,d,m,v,S,I){if(ju=I,ar=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,r_.current=c===null||c.memoizedState===null?yG:xG,c=m(v,S),pg){I=0;do{if(pg=!1,_g=0,25<=I)throw Error(t(301));I+=1,Xr=Gr=null,d.updateQueue=null,r_.current=vG,c=m(v,S)}while(pg)}if(r_.current=o_,d=Gr!==null&&Gr.next!==null,ju=0,Xr=Gr=ar=null,i_=!1,d)throw Error(t(300));return c}function Tw(){var c=_g!==0;return _g=0,c}function xo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xr===null?ar.memoizedState=Xr=c:Xr=Xr.next=c,Xr}function sa(){if(Gr===null){var c=ar.alternate;c=c!==null?c.memoizedState:null}else c=Gr.next;var d=Xr===null?ar.memoizedState:Xr.next;if(d!==null)Xr=d,Gr=c;else{if(c===null)throw Error(t(310));Gr=c,c={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},Xr===null?ar.memoizedState=Xr=c:Xr=Xr.next=c}return Xr}function yg(c,d){return typeof d=="function"?d(c):d}function Iw(c){var d=sa(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var v=Gr,S=v.baseQueue,I=m.pending;if(I!==null){if(S!==null){var G=S.next;S.next=I.next,I.next=G}v.baseQueue=S=I,m.pending=null}if(S!==null){I=S.next,v=v.baseState;var J=G=null,se=null,ve=I;do{var ze=ve.lane;if((ju&ze)===ze)se!==null&&(se=se.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),v=ve.hasEagerState?ve.eagerState:c(v,ve.action);else{var Ye={lane:ze,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};se===null?(J=se=Ye,G=v):se=se.next=Ye,ar.lanes|=ze,Vu|=ze}ve=ve.next}while(ve!==null&&ve!==I);se===null?G=v:se.next=J,ba(v,d.memoizedState)||(os=!0),d.memoizedState=v,d.baseState=G,d.baseQueue=se,m.lastRenderedState=v}if(c=m.interleaved,c!==null){S=c;do I=S.lane,ar.lanes|=I,Vu|=I,S=S.next;while(S!==c)}else S===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Aw(c){var d=sa(),m=d.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=c;var v=m.dispatch,S=m.pending,I=d.memoizedState;if(S!==null){m.pending=null;var G=S=S.next;do I=c(I,G.action),G=G.next;while(G!==S);ba(I,d.memoizedState)||(os=!0),d.memoizedState=I,d.baseQueue===null&&(d.baseState=I),m.lastRenderedState=I}return[I,v]}function XC(){}function qC(c,d){var m=ar,v=sa(),S=d(),I=!ba(v.memoizedState,S);if(I&&(v.memoizedState=S,os=!0),v=v.queue,Rw(JC.bind(null,m,v,c),[c]),v.getSnapshot!==d||I||Xr!==null&&Xr.memoizedState.tag&1){if(m.flags|=2048,xg(9,QC.bind(null,m,v,S,d),void 0,null),qr===null)throw Error(t(349));(ju&30)!==0||ZC(m,d,S)}return S}function ZC(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function QC(c,d,m,v){d.value=m,d.getSnapshot=v,eP(d)&&tP(c)}function JC(c,d,m){return m(function(){eP(d)&&tP(c)})}function eP(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!ba(c,m)}catch{return!0}}function tP(c){var d=sl(c,1);d!==null&&Na(d,c,1,-1)}function nP(c){var d=xo();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:c},d.queue=c,c=c.dispatch=_G.bind(null,ar,c),[d.memoizedState,c]}function xg(c,d,m,v){return c={tag:c,create:d,destroy:m,deps:v,next:null},d=ar.updateQueue,d===null?(d={lastEffect:null,stores:null},ar.updateQueue=d,d.lastEffect=c.next=c):(m=d.lastEffect,m===null?d.lastEffect=c.next=c:(v=m.next,m.next=c,c.next=v,d.lastEffect=c)),c}function rP(){return sa().memoizedState}function s_(c,d,m,v){var S=xo();ar.flags|=c,S.memoizedState=xg(1|d,m,void 0,v===void 0?null:v)}function a_(c,d,m,v){var S=sa();v=v===void 0?null:v;var I=void 0;if(Gr!==null){var G=Gr.memoizedState;if(I=G.destroy,v!==null&&ww(v,G.deps)){S.memoizedState=xg(d,m,I,v);return}}ar.flags|=c,S.memoizedState=xg(1|d,m,I,v)}function iP(c,d){return s_(8390656,8,c,d)}function Rw(c,d){return a_(2048,8,c,d)}function sP(c,d){return a_(4,2,c,d)}function aP(c,d){return a_(4,4,c,d)}function oP(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function lP(c,d,m){return m=m!=null?m.concat([c]):null,a_(4,4,oP.bind(null,d,c),m)}function bw(){}function cP(c,d){var m=sa();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&ww(d,v[1])?v[0]:(m.memoizedState=[c,d],c)}function uP(c,d){var m=sa();d=d===void 0?null:d;var v=m.memoizedState;return v!==null&&d!==null&&ww(d,v[1])?v[0]:(c=c(),m.memoizedState=[c,d],c)}function hP(c,d,m){return(ju&21)===0?(c.baseState&&(c.baseState=!1,os=!0),c.memoizedState=m):(ba(m,d)||(m=W0(),ar.lanes|=m,Vu|=m,c.baseState=!0),d)}function mG(c,d){var m=ln;ln=m!==0&&4>m?m:4,c(!0);var v=Ew.transition;Ew.transition={};try{c(!1),d()}finally{ln=m,Ew.transition=v}}function dP(){return sa().memoizedState}function pG(c,d,m){var v=lc(c);if(m={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null},fP(c))gP(d,m);else if(m=$C(c,d,m,v),m!==null){var S=Hi();Na(m,c,v,S),mP(m,d,v)}}function _G(c,d,m){var v=lc(c),S={lane:v,action:m,hasEagerState:!1,eagerState:null,next:null};if(fP(c))gP(d,S);else{var I=c.alternate;if(c.lanes===0&&(I===null||I.lanes===0)&&(I=d.lastRenderedReducer,I!==null))try{var G=d.lastRenderedState,J=I(G,m);if(S.hasEagerState=!0,S.eagerState=J,ba(J,G)){var se=d.interleaved;se===null?(S.next=S,mw(d)):(S.next=se.next,se.next=S),d.interleaved=S;return}}catch{}m=$C(c,d,S,v),m!==null&&(S=Hi(),Na(m,c,v,S),mP(m,d,v))}}function fP(c){var d=c.alternate;return c===ar||d!==null&&d===ar}function gP(c,d){pg=i_=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function mP(c,d,m){if((m&4194240)!==0){var v=d.lanes;v&=c.pendingLanes,m|=v,d.lanes=m,K0(c,m)}}var o_={readContext:ia,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},yG={readContext:ia,useCallback:function(c,d){return xo().memoizedState=[c,d===void 0?null:d],c},useContext:ia,useEffect:iP,useImperativeHandle:function(c,d,m){return m=m!=null?m.concat([c]):null,s_(4194308,4,oP.bind(null,d,c),m)},useLayoutEffect:function(c,d){return s_(4194308,4,c,d)},useInsertionEffect:function(c,d){return s_(4,2,c,d)},useMemo:function(c,d){var m=xo();return d=d===void 0?null:d,c=c(),m.memoizedState=[c,d],c},useReducer:function(c,d,m){var v=xo();return d=m!==void 0?m(d):d,v.memoizedState=v.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},v.queue=c,c=c.dispatch=pG.bind(null,ar,c),[v.memoizedState,c]},useRef:function(c){var d=xo();return c={current:c},d.memoizedState=c},useState:nP,useDebugValue:bw,useDeferredValue:function(c){return xo().memoizedState=c},useTransition:function(){var c=nP(!1),d=c[0];return c=mG.bind(null,c[1]),xo().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,m){var v=ar,S=xo();if(Jn){if(m===void 0)throw Error(t(407));m=m()}else{if(m=d(),qr===null)throw Error(t(349));(ju&30)!==0||ZC(v,d,m)}S.memoizedState=m;var I={value:m,getSnapshot:d};return S.queue=I,iP(JC.bind(null,v,I,c),[c]),v.flags|=2048,xg(9,QC.bind(null,v,I,m,d),void 0,null),m},useId:function(){var c=xo(),d=qr.identifierPrefix;if(Jn){var m=il,v=rl;m=(v&~(1<<32-ir(v)-1)).toString(32)+m,d=":"+d+"R"+m,m=_g++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=gG++,d=":"+d+"r"+m.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},xG={readContext:ia,useCallback:cP,useContext:ia,useEffect:Rw,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:aP,useMemo:uP,useReducer:Iw,useRef:rP,useState:function(){return Iw(yg)},useDebugValue:bw,useDeferredValue:function(c){var d=sa();return hP(d,Gr.memoizedState,c)},useTransition:function(){var c=Iw(yg)[0],d=sa().memoizedState;return[c,d]},useMutableSource:XC,useSyncExternalStore:qC,useId:dP,unstable_isNewReconciler:!1},vG={readContext:ia,useCallback:cP,useContext:ia,useEffect:Rw,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:aP,useMemo:uP,useReducer:Aw,useRef:rP,useState:function(){return Aw(yg)},useDebugValue:bw,useDeferredValue:function(c){var d=sa();return Gr===null?d.memoizedState=c:hP(d,Gr.memoizedState,c)},useTransition:function(){var c=Aw(yg)[0],d=sa().memoizedState;return[c,d]},useMutableSource:XC,useSyncExternalStore:qC,useId:dP,unstable_isNewReconciler:!1};function Pa(c,d){if(c&&c.defaultProps){d=Ae({},d),c=c.defaultProps;for(var m in c)d[m]===void 0&&(d[m]=c[m]);return d}return d}function Cw(c,d,m,v){d=c.memoizedState,m=m(v,d),m=m==null?d:Ae({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var l_={isMounted:function(c){return(c=c._reactInternals)?Q(c)===c:!1},enqueueSetState:function(c,d,m){c=c._reactInternals;var v=Hi(),S=lc(c),I=al(v,S);I.payload=d,m!=null&&(I.callback=m),d=ic(c,I,S),d!==null&&(Na(d,c,S,v),e_(d,c,S))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var v=Hi(),S=lc(c),I=al(v,S);I.tag=1,I.payload=d,m!=null&&(I.callback=m),d=ic(c,I,S),d!==null&&(Na(d,c,S,v),e_(d,c,S))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=Hi(),v=lc(c),S=al(m,v);S.tag=2,d!=null&&(S.callback=d),d=ic(c,S,v),d!==null&&(Na(d,c,v,m),e_(d,c,v))}};function pP(c,d,m,v,S,I,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(v,I,G):d.prototype&&d.prototype.isPureReactComponent?!sg(m,v)||!sg(S,I):!0}function _P(c,d,m){var v=!1,S=tc,I=d.contextType;return typeof I=="object"&&I!==null?I=ia(I):(S=as(d)?Nu:Ri.current,v=d.contextTypes,I=(v=v!=null)?kd(c,S):tc),d=new d(m,I),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=l_,c.stateNode=d,d._reactInternals=c,v&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=S,c.__reactInternalMemoizedMaskedChildContext=I),d}function yP(c,d,m,v){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,v),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,v),d.state!==c&&l_.enqueueReplaceState(d,d.state,null)}function Pw(c,d,m,v){var S=c.stateNode;S.props=m,S.state=c.memoizedState,S.refs={},pw(c);var I=d.contextType;typeof I=="object"&&I!==null?S.context=ia(I):(I=as(d)?Nu:Ri.current,S.context=kd(c,I)),S.state=c.memoizedState,I=d.getDerivedStateFromProps,typeof I=="function"&&(Cw(c,d,I,m),S.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(d=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),d!==S.state&&l_.enqueueReplaceState(S,S.state,null),t_(c,m,S,v),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308)}function Vd(c,d){try{var m="",v=d;do m+=ee(v),v=v.return;while(v);var S=m}catch(I){S=`
Error generating stack: `+I.message+`
`+I.stack}return{value:c,source:d,stack:S,digest:null}}function kw(c,d,m){return{value:c,source:null,stack:m??null,digest:d??null}}function Mw(c,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var EG=typeof WeakMap=="function"?WeakMap:Map;function xP(c,d,m){m=al(-1,m),m.tag=3,m.payload={element:null};var v=d.value;return m.callback=function(){m_||(m_=!0,Kw=v),Mw(c,d)},m}function vP(c,d,m){m=al(-1,m),m.tag=3;var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var S=d.value;m.payload=function(){return v(S)},m.callback=function(){Mw(c,d)}}var I=c.stateNode;return I!==null&&typeof I.componentDidCatch=="function"&&(m.callback=function(){Mw(c,d),typeof v!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),m}function EP(c,d,m){var v=c.pingCache;if(v===null){v=c.pingCache=new EG;var S=new Set;v.set(d,S)}else S=v.get(d),S===void 0&&(S=new Set,v.set(d,S));S.has(m)||(S.add(m),c=OG.bind(null,c,d,m),d.then(c,c))}function wP(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function SP(c,d,m,v,S){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=al(-1,1),d.tag=2,ic(m,d,1))),m.lanes|=1),c):(c.flags|=65536,c.lanes=S,c)}var wG=N.ReactCurrentOwner,os=!1;function Wi(c,d,m,v){d.child=c===null?zC(d,null,m,v):Od(d,c.child,m,v)}function TP(c,d,m,v,S){m=m.render;var I=d.ref;return Fd(d,S),v=Sw(c,d,m,v,I,S),m=Tw(),c!==null&&!os?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,ol(c,d,S)):(Jn&&m&&aw(d),d.flags|=1,Wi(c,d,v,S),d.child)}function IP(c,d,m,v,S){if(c===null){var I=m.type;return typeof I=="function"&&!e2(I)&&I.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=I,AP(c,d,I,v,S)):(c=E_(m.type,null,v,d,d.mode,S),c.ref=d.ref,c.return=d,d.child=c)}if(I=c.child,(c.lanes&S)===0){var G=I.memoizedProps;if(m=m.compare,m=m!==null?m:sg,m(G,v)&&c.ref===d.ref)return ol(c,d,S)}return d.flags|=1,c=uc(I,v),c.ref=d.ref,c.return=d,d.child=c}function AP(c,d,m,v,S){if(c!==null){var I=c.memoizedProps;if(sg(I,v)&&c.ref===d.ref)if(os=!1,d.pendingProps=v=I,(c.lanes&S)!==0)(c.flags&131072)!==0&&(os=!0);else return d.lanes=c.lanes,ol(c,d,S)}return Nw(c,d,m,v,S)}function RP(c,d,m){var v=d.pendingProps,S=v.children,I=c!==null?c.memoizedState:null;if(v.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},$n(Bd,js),js|=m;else{if((m&1073741824)===0)return c=I!==null?I.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,$n(Bd,js),js|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},v=I!==null?I.baseLanes:m,$n(Bd,js),js|=v}else I!==null?(v=I.baseLanes|m,d.memoizedState=null):v=m,$n(Bd,js),js|=v;return Wi(c,d,S,m),d.child}function bP(c,d){var m=d.ref;(c===null&&m!==null||c!==null&&c.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Nw(c,d,m,v,S){var I=as(m)?Nu:Ri.current;return I=kd(d,I),Fd(d,S),m=Sw(c,d,m,v,I,S),v=Tw(),c!==null&&!os?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~S,ol(c,d,S)):(Jn&&v&&aw(d),d.flags|=1,Wi(c,d,m,S),d.child)}function CP(c,d,m,v,S){if(as(m)){var I=!0;H1(d)}else I=!1;if(Fd(d,S),d.stateNode===null)u_(c,d),_P(d,m,v),Pw(d,m,v,S),v=!0;else if(c===null){var G=d.stateNode,J=d.memoizedProps;G.props=J;var se=G.context,ve=m.contextType;typeof ve=="object"&&ve!==null?ve=ia(ve):(ve=as(m)?Nu:Ri.current,ve=kd(d,ve));var ze=m.getDerivedStateFromProps,Ye=typeof ze=="function"||typeof G.getSnapshotBeforeUpdate=="function";Ye||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==v||se!==ve)&&yP(d,G,v,ve),rc=!1;var Be=d.memoizedState;G.state=Be,t_(d,v,G,S),se=d.memoizedState,J!==v||Be!==se||ss.current||rc?(typeof ze=="function"&&(Cw(d,m,ze,v),se=d.memoizedState),(J=rc||pP(d,m,J,v,Be,se,ve))?(Ye||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=v,d.memoizedState=se),G.props=v,G.state=se,G.context=ve,v=J):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),v=!1)}else{G=d.stateNode,WC(c,d),J=d.memoizedProps,ve=d.type===d.elementType?J:Pa(d.type,J),G.props=ve,Ye=d.pendingProps,Be=G.context,se=m.contextType,typeof se=="object"&&se!==null?se=ia(se):(se=as(m)?Nu:Ri.current,se=kd(d,se));var ft=m.getDerivedStateFromProps;(ze=typeof ft=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(J!==Ye||Be!==se)&&yP(d,G,v,se),rc=!1,Be=d.memoizedState,G.state=Be,t_(d,v,G,S);var yt=d.memoizedState;J!==Ye||Be!==yt||ss.current||rc?(typeof ft=="function"&&(Cw(d,m,ft,v),yt=d.memoizedState),(ve=rc||pP(d,m,ve,v,Be,yt,se)||!1)?(ze||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(v,yt,se),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(v,yt,se)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&Be===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Be===c.memoizedState||(d.flags|=1024),d.memoizedProps=v,d.memoizedState=yt),G.props=v,G.state=yt,G.context=se,v=ve):(typeof G.componentDidUpdate!="function"||J===c.memoizedProps&&Be===c.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||J===c.memoizedProps&&Be===c.memoizedState||(d.flags|=1024),v=!1)}return Lw(c,d,m,v,I,S)}function Lw(c,d,m,v,S,I){bP(c,d);var G=(d.flags&128)!==0;if(!v&&!G)return S&&LC(d,m,!1),ol(c,d,I);v=d.stateNode,wG.current=d;var J=G&&typeof m.getDerivedStateFromError!="function"?null:v.render();return d.flags|=1,c!==null&&G?(d.child=Od(d,c.child,null,I),d.child=Od(d,null,J,I)):Wi(c,d,J,I),d.memoizedState=v.state,S&&LC(d,m,!0),d.child}function PP(c){var d=c.stateNode;d.pendingContext?MC(c,d.pendingContext,d.pendingContext!==d.context):d.context&&MC(c,d.context,!1),_w(c,d.containerInfo)}function kP(c,d,m,v,S){return Ld(),uw(S),d.flags|=256,Wi(c,d,m,v),d.child}var Ow={dehydrated:null,treeContext:null,retryLane:0};function Dw(c){return{baseLanes:c,cachePool:null,transitions:null}}function MP(c,d,m){var v=d.pendingProps,S=sr.current,I=!1,G=(d.flags&128)!==0,J;if((J=G)||(J=c!==null&&c.memoizedState===null?!1:(S&2)!==0),J?(I=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(S|=1),$n(sr,S&1),c===null)return cw(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(G=v.children,c=v.fallback,I?(v=d.mode,I=d.child,G={mode:"hidden",children:G},(v&1)===0&&I!==null?(I.childLanes=0,I.pendingProps=G):I=w_(G,v,0,null),c=zu(c,v,m,null),I.return=d,c.return=d,I.sibling=c,d.child=I,d.child.memoizedState=Dw(m),d.memoizedState=Ow,c):Fw(d,G));if(S=c.memoizedState,S!==null&&(J=S.dehydrated,J!==null))return SG(c,d,G,v,J,S,m);if(I){I=v.fallback,G=d.mode,S=c.child,J=S.sibling;var se={mode:"hidden",children:v.children};return(G&1)===0&&d.child!==S?(v=d.child,v.childLanes=0,v.pendingProps=se,d.deletions=null):(v=uc(S,se),v.subtreeFlags=S.subtreeFlags&14680064),J!==null?I=uc(J,I):(I=zu(I,G,m,null),I.flags|=2),I.return=d,v.return=d,v.sibling=I,d.child=v,v=I,I=d.child,G=c.child.memoizedState,G=G===null?Dw(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},I.memoizedState=G,I.childLanes=c.childLanes&~m,d.memoizedState=Ow,v}return I=c.child,c=I.sibling,v=uc(I,{mode:"visible",children:v.children}),(d.mode&1)===0&&(v.lanes=m),v.return=d,v.sibling=null,c!==null&&(m=d.deletions,m===null?(d.deletions=[c],d.flags|=16):m.push(c)),d.child=v,d.memoizedState=null,v}function Fw(c,d){return d=w_({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function c_(c,d,m,v){return v!==null&&uw(v),Od(d,c.child,null,m),c=Fw(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function SG(c,d,m,v,S,I,G){if(m)return d.flags&256?(d.flags&=-257,v=kw(Error(t(422))),c_(c,d,G,v)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(I=v.fallback,S=d.mode,v=w_({mode:"visible",children:v.children},S,0,null),I=zu(I,S,G,null),I.flags|=2,v.return=d,I.return=d,v.sibling=I,d.child=v,(d.mode&1)!==0&&Od(d,c.child,null,G),d.child.memoizedState=Dw(G),d.memoizedState=Ow,I);if((d.mode&1)===0)return c_(c,d,G,null);if(S.data==="$!"){if(v=S.nextSibling&&S.nextSibling.dataset,v)var J=v.dgst;return v=J,I=Error(t(419)),v=kw(I,v,void 0),c_(c,d,G,v)}if(J=(G&c.childLanes)!==0,os||J){if(v=qr,v!==null){switch(G&-G){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(v.suspendedLanes|G))!==0?0:S,S!==0&&S!==I.retryLane&&(I.retryLane=S,sl(c,S),Na(v,c,S,-1))}return Jw(),v=kw(Error(t(421))),c_(c,d,G,v)}return S.data==="$?"?(d.flags|=128,d.child=c.child,d=DG.bind(null,c),S._reactRetry=d,null):(c=I.treeContext,Fs=Jl(S.nextSibling),Ds=d,Jn=!0,Ca=null,c!==null&&(na[ra++]=rl,na[ra++]=il,na[ra++]=Lu,rl=c.id,il=c.overflow,Lu=d),d=Fw(d,v.children),d.flags|=4096,d)}function NP(c,d,m){c.lanes|=d;var v=c.alternate;v!==null&&(v.lanes|=d),gw(c.return,d,m)}function jw(c,d,m,v,S){var I=c.memoizedState;I===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:S}:(I.isBackwards=d,I.rendering=null,I.renderingStartTime=0,I.last=v,I.tail=m,I.tailMode=S)}function LP(c,d,m){var v=d.pendingProps,S=v.revealOrder,I=v.tail;if(Wi(c,d,v.children,m),v=sr.current,(v&2)!==0)v=v&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&NP(c,m,d);else if(c.tag===19)NP(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}v&=1}if($n(sr,v),(d.mode&1)===0)d.memoizedState=null;else switch(S){case"forwards":for(m=d.child,S=null;m!==null;)c=m.alternate,c!==null&&n_(c)===null&&(S=m),m=m.sibling;m=S,m===null?(S=d.child,d.child=null):(S=m.sibling,m.sibling=null),jw(d,!1,S,m,I);break;case"backwards":for(m=null,S=d.child,d.child=null;S!==null;){if(c=S.alternate,c!==null&&n_(c)===null){d.child=S;break}c=S.sibling,S.sibling=m,m=S,S=c}jw(d,!0,m,null,I);break;case"together":jw(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function u_(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function ol(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),Vu|=d.lanes,(m&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(t(153));if(d.child!==null){for(c=d.child,m=uc(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=uc(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function TG(c,d,m){switch(d.tag){case 3:PP(d),Ld();break;case 5:YC(d);break;case 1:as(d.type)&&H1(d);break;case 4:_w(d,d.stateNode.containerInfo);break;case 10:var v=d.type._context,S=d.memoizedProps.value;$n(Q1,v._currentValue),v._currentValue=S;break;case 13:if(v=d.memoizedState,v!==null)return v.dehydrated!==null?($n(sr,sr.current&1),d.flags|=128,null):(m&d.child.childLanes)!==0?MP(c,d,m):($n(sr,sr.current&1),c=ol(c,d,m),c!==null?c.sibling:null);$n(sr,sr.current&1);break;case 19:if(v=(m&d.childLanes)!==0,(c.flags&128)!==0){if(v)return LP(c,d,m);d.flags|=128}if(S=d.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),$n(sr,sr.current),v)break;return null;case 22:case 23:return d.lanes=0,RP(c,d,m)}return ol(c,d,m)}var OP,Vw,DP,FP;OP=function(c,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)c.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Vw=function(){},DP=function(c,d,m,v){var S=c.memoizedProps;if(S!==v){c=d.stateNode,Fu(yo.current);var I=null;switch(m){case"input":S=Lt(c,S),v=Lt(c,v),I=[];break;case"select":S=Ae({},S,{value:void 0}),v=Ae({},v,{value:void 0}),I=[];break;case"textarea":S=Et(c,S),v=Et(c,v),I=[];break;default:typeof S.onClick!="function"&&typeof v.onClick=="function"&&(c.onclick=z1)}Dr(m,v);var G;m=null;for(ve in S)if(!v.hasOwnProperty(ve)&&S.hasOwnProperty(ve)&&S[ve]!=null)if(ve==="style"){var J=S[ve];for(G in J)J.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(i.hasOwnProperty(ve)?I||(I=[]):(I=I||[]).push(ve,null));for(ve in v){var se=v[ve];if(J=S?.[ve],v.hasOwnProperty(ve)&&se!==J&&(se!=null||J!=null))if(ve==="style")if(J){for(G in J)!J.hasOwnProperty(G)||se&&se.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in se)se.hasOwnProperty(G)&&J[G]!==se[G]&&(m||(m={}),m[G]=se[G])}else m||(I||(I=[]),I.push(ve,m)),m=se;else ve==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,J=J?J.__html:void 0,se!=null&&J!==se&&(I=I||[]).push(ve,se)):ve==="children"?typeof se!="string"&&typeof se!="number"||(I=I||[]).push(ve,""+se):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(i.hasOwnProperty(ve)?(se!=null&&ve==="onScroll"&&Hn("scroll",c),I||J===se||(I=[])):(I=I||[]).push(ve,se))}m&&(I=I||[]).push("style",m);var ve=I;(d.updateQueue=ve)&&(d.flags|=4)}},FP=function(c,d,m,v){m!==v&&(d.flags|=4)};function vg(c,d){if(!Jn)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:v.sibling=null}}function Ci(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,v=0;if(d)for(var S=c.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags&14680064,v|=S.flags&14680064,S.return=c,S=S.sibling;else for(S=c.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=c,S=S.sibling;return c.subtreeFlags|=v,c.childLanes=m,d}function IG(c,d,m){var v=d.pendingProps;switch(ow(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(d),null;case 1:return as(d.type)&&W1(),Ci(d),null;case 3:return v=d.stateNode,jd(),Kn(ss),Kn(Ri),vw(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(c===null||c.child===null)&&(q1(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ca!==null&&(qw(Ca),Ca=null))),Vw(c,d),Ci(d),null;case 5:yw(d);var S=Fu(mg.current);if(m=d.type,c!==null&&d.stateNode!=null)DP(c,d,m,v,S),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!v){if(d.stateNode===null)throw Error(t(166));return Ci(d),null}if(c=Fu(yo.current),q1(d)){v=d.stateNode,m=d.type;var I=d.memoizedProps;switch(v[_o]=d,v[ug]=I,c=(d.mode&1)!==0,m){case"dialog":Hn("cancel",v),Hn("close",v);break;case"iframe":case"object":case"embed":Hn("load",v);break;case"video":case"audio":for(S=0;S<og.length;S++)Hn(og[S],v);break;case"source":Hn("error",v);break;case"img":case"image":case"link":Hn("error",v),Hn("load",v);break;case"details":Hn("toggle",v);break;case"input":nn(v,I),Hn("invalid",v);break;case"select":v._wrapperState={wasMultiple:!!I.multiple},Hn("invalid",v);break;case"textarea":X(v,I),Hn("invalid",v)}Dr(m,I),S=null;for(var G in I)if(I.hasOwnProperty(G)){var J=I[G];G==="children"?typeof J=="string"?v.textContent!==J&&(I.suppressHydrationWarning!==!0&&U1(v.textContent,J,c),S=["children",J]):typeof J=="number"&&v.textContent!==""+J&&(I.suppressHydrationWarning!==!0&&U1(v.textContent,J,c),S=["children",""+J]):i.hasOwnProperty(G)&&J!=null&&G==="onScroll"&&Hn("scroll",v)}switch(m){case"input":Qe(v),Xt(v,I,!0);break;case"textarea":Qe(v),ne(v);break;case"select":case"option":break;default:typeof I.onClick=="function"&&(v.onclick=z1)}v=S,d.updateQueue=v,v!==null&&(d.flags|=4)}else{G=S.nodeType===9?S:S.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=z(m)),c==="http://www.w3.org/1999/xhtml"?m==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof v.is=="string"?c=G.createElement(m,{is:v.is}):(c=G.createElement(m),m==="select"&&(G=c,v.multiple?G.multiple=!0:v.size&&(G.size=v.size))):c=G.createElementNS(c,m),c[_o]=d,c[ug]=v,OP(c,d,!1,!1),d.stateNode=c;e:{switch(G=bs(m,v),m){case"dialog":Hn("cancel",c),Hn("close",c),S=v;break;case"iframe":case"object":case"embed":Hn("load",c),S=v;break;case"video":case"audio":for(S=0;S<og.length;S++)Hn(og[S],c);S=v;break;case"source":Hn("error",c),S=v;break;case"img":case"image":case"link":Hn("error",c),Hn("load",c),S=v;break;case"details":Hn("toggle",c),S=v;break;case"input":nn(c,v),S=Lt(c,v),Hn("invalid",c);break;case"option":S=v;break;case"select":c._wrapperState={wasMultiple:!!v.multiple},S=Ae({},v,{value:void 0}),Hn("invalid",c);break;case"textarea":X(c,v),S=Et(c,v),Hn("invalid",c);break;default:S=v}Dr(m,S),J=S;for(I in J)if(J.hasOwnProperty(I)){var se=J[I];I==="style"?bt(c,se):I==="dangerouslySetInnerHTML"?(se=se?se.__html:void 0,se!=null&&Ie(c,se)):I==="children"?typeof se=="string"?(m!=="textarea"||se!=="")&&Ze(c,se):typeof se=="number"&&Ze(c,""+se):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(i.hasOwnProperty(I)?se!=null&&I==="onScroll"&&Hn("scroll",c):se!=null&&k(c,I,se,G))}switch(m){case"input":Qe(c),Xt(c,v,!1);break;case"textarea":Qe(c),ne(c);break;case"option":v.value!=null&&c.setAttribute("value",""+Se(v.value));break;case"select":c.multiple=!!v.multiple,I=v.value,I!=null?b(c,!!v.multiple,I,!1):v.defaultValue!=null&&b(c,!!v.multiple,v.defaultValue,!0);break;default:typeof S.onClick=="function"&&(c.onclick=z1)}switch(m){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}}v&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ci(d),null;case 6:if(c&&d.stateNode!=null)FP(c,d,c.memoizedProps,v);else{if(typeof v!="string"&&d.stateNode===null)throw Error(t(166));if(m=Fu(mg.current),Fu(yo.current),q1(d)){if(v=d.stateNode,m=d.memoizedProps,v[_o]=d,(I=v.nodeValue!==m)&&(c=Ds,c!==null))switch(c.tag){case 3:U1(v.nodeValue,m,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&U1(v.nodeValue,m,(c.mode&1)!==0)}I&&(d.flags|=4)}else v=(m.nodeType===9?m:m.ownerDocument).createTextNode(v),v[_o]=d,d.stateNode=v}return Ci(d),null;case 13:if(Kn(sr),v=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Jn&&Fs!==null&&(d.mode&1)!==0&&(d.flags&128)===0)GC(),Ld(),d.flags|=98560,I=!1;else if(I=q1(d),v!==null&&v.dehydrated!==null){if(c===null){if(!I)throw Error(t(318));if(I=d.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(t(317));I[_o]=d}else Ld(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ci(d),I=!1}else Ca!==null&&(qw(Ca),Ca=null),I=!0;if(!I)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=m,d):(v=v!==null,v!==(c!==null&&c.memoizedState!==null)&&v&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(sr.current&1)!==0?Br===0&&(Br=3):Jw())),d.updateQueue!==null&&(d.flags|=4),Ci(d),null);case 4:return jd(),Vw(c,d),c===null&&lg(d.stateNode.containerInfo),Ci(d),null;case 10:return fw(d.type._context),Ci(d),null;case 17:return as(d.type)&&W1(),Ci(d),null;case 19:if(Kn(sr),I=d.memoizedState,I===null)return Ci(d),null;if(v=(d.flags&128)!==0,G=I.rendering,G===null)if(v)vg(I,!1);else{if(Br!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(G=n_(c),G!==null){for(d.flags|=128,vg(I,!1),v=G.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),d.subtreeFlags=0,v=m,m=d.child;m!==null;)I=m,c=v,I.flags&=14680066,G=I.alternate,G===null?(I.childLanes=0,I.lanes=c,I.child=null,I.subtreeFlags=0,I.memoizedProps=null,I.memoizedState=null,I.updateQueue=null,I.dependencies=null,I.stateNode=null):(I.childLanes=G.childLanes,I.lanes=G.lanes,I.child=G.child,I.subtreeFlags=0,I.deletions=null,I.memoizedProps=G.memoizedProps,I.memoizedState=G.memoizedState,I.updateQueue=G.updateQueue,I.type=G.type,c=G.dependencies,I.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),m=m.sibling;return $n(sr,sr.current&1|2),d.child}c=c.sibling}I.tail!==null&&Ke()>Ud&&(d.flags|=128,v=!0,vg(I,!1),d.lanes=4194304)}else{if(!v)if(c=n_(G),c!==null){if(d.flags|=128,v=!0,m=c.updateQueue,m!==null&&(d.updateQueue=m,d.flags|=4),vg(I,!0),I.tail===null&&I.tailMode==="hidden"&&!G.alternate&&!Jn)return Ci(d),null}else 2*Ke()-I.renderingStartTime>Ud&&m!==1073741824&&(d.flags|=128,v=!0,vg(I,!1),d.lanes=4194304);I.isBackwards?(G.sibling=d.child,d.child=G):(m=I.last,m!==null?m.sibling=G:d.child=G,I.last=G)}return I.tail!==null?(d=I.tail,I.rendering=d,I.tail=d.sibling,I.renderingStartTime=Ke(),d.sibling=null,m=sr.current,$n(sr,v?m&1|2:m&1),d):(Ci(d),null);case 22:case 23:return Qw(),v=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==v&&(d.flags|=8192),v&&(d.mode&1)!==0?(js&1073741824)!==0&&(Ci(d),d.subtreeFlags&6&&(d.flags|=8192)):Ci(d),null;case 24:return null;case 25:return null}throw Error(t(156,d.tag))}function AG(c,d){switch(ow(d),d.tag){case 1:return as(d.type)&&W1(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return jd(),Kn(ss),Kn(Ri),vw(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return yw(d),null;case 13:if(Kn(sr),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(t(340));Ld()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Kn(sr),null;case 4:return jd(),null;case 10:return fw(d.type._context),null;case 22:case 23:return Qw(),null;case 24:return null;default:return null}}var h_=!1,Pi=!1,RG=typeof WeakSet=="function"?WeakSet:Set,mt=null;function Gd(c,d){var m=c.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(v){dr(c,d,v)}else m.current=null}function Gw(c,d,m){try{m()}catch(v){dr(c,d,v)}}var jP=!1;function bG(c,d){if(QE=Qo,c=pC(),$E(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var S=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var G=0,J=-1,se=-1,ve=0,ze=0,Ye=c,Be=null;t:for(;;){for(var ft;Ye!==m||S!==0&&Ye.nodeType!==3||(J=G+S),Ye!==I||v!==0&&Ye.nodeType!==3||(se=G+v),Ye.nodeType===3&&(G+=Ye.nodeValue.length),(ft=Ye.firstChild)!==null;)Be=Ye,Ye=ft;for(;;){if(Ye===c)break t;if(Be===m&&++ve===S&&(J=G),Be===I&&++ze===v&&(se=G),(ft=Ye.nextSibling)!==null)break;Ye=Be,Be=Ye.parentNode}Ye=ft}m=J===-1||se===-1?null:{start:J,end:se}}else m=null}m=m||{start:0,end:0}}else m=null;for(JE={focusedElem:c,selectionRange:m},Qo=!1,mt=d;mt!==null;)if(d=mt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,mt=c;else for(;mt!==null;){d=mt;try{var yt=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var St=yt.memoizedProps,wr=yt.memoizedState,he=d.stateNode,oe=he.getSnapshotBeforeUpdate(d.elementType===d.type?St:Pa(d.type,St),wr);he.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var _e=d.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Je){dr(d,d.return,Je)}if(c=d.sibling,c!==null){c.return=d.return,mt=c;break}mt=d.return}return yt=jP,jP=!1,yt}function Eg(c,d,m){var v=d.updateQueue;if(v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&c)===c){var I=S.destroy;S.destroy=void 0,I!==void 0&&Gw(d,m,I)}S=S.next}while(S!==v)}}function d_(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&c)===c){var v=m.create;m.destroy=v()}m=m.next}while(m!==d)}}function Bw(c){var d=c.ref;if(d!==null){var m=c.stateNode;switch(c.tag){case 5:c=m;break;default:c=m}typeof d=="function"?d(c):d.current=c}}function VP(c){var d=c.alternate;d!==null&&(c.alternate=null,VP(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[_o],delete d[ug],delete d[rw],delete d[uG],delete d[hG])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function GP(c){return c.tag===5||c.tag===3||c.tag===4}function BP(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||GP(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Uw(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.nodeType===8?m.parentNode.insertBefore(c,d):m.insertBefore(c,d):(m.nodeType===8?(d=m.parentNode,d.insertBefore(c,m)):(d=m,d.appendChild(c)),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=z1));else if(v!==4&&(c=c.child,c!==null))for(Uw(c,d,m),c=c.sibling;c!==null;)Uw(c,d,m),c=c.sibling}function zw(c,d,m){var v=c.tag;if(v===5||v===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(v!==4&&(c=c.child,c!==null))for(zw(c,d,m),c=c.sibling;c!==null;)zw(c,d,m),c=c.sibling}var di=null,ka=!1;function sc(c,d,m){for(m=m.child;m!==null;)UP(c,d,m),m=m.sibling}function UP(c,d,m){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(ks,m)}catch{}switch(m.tag){case 5:Pi||Gd(m,d);case 6:var v=di,S=ka;di=null,sc(c,d,m),di=v,ka=S,di!==null&&(ka?(c=di,m=m.stateNode,c.nodeType===8?c.parentNode.removeChild(m):c.removeChild(m)):di.removeChild(m.stateNode));break;case 18:di!==null&&(ka?(c=di,m=m.stateNode,c.nodeType===8?nw(c.parentNode,m):c.nodeType===1&&nw(c,m),Xl(c)):nw(di,m.stateNode));break;case 4:v=di,S=ka,di=m.stateNode.containerInfo,ka=!0,sc(c,d,m),di=v,ka=S;break;case 0:case 11:case 14:case 15:if(!Pi&&(v=m.updateQueue,v!==null&&(v=v.lastEffect,v!==null))){S=v=v.next;do{var I=S,G=I.destroy;I=I.tag,G!==void 0&&((I&2)!==0||(I&4)!==0)&&Gw(m,d,G),S=S.next}while(S!==v)}sc(c,d,m);break;case 1:if(!Pi&&(Gd(m,d),v=m.stateNode,typeof v.componentWillUnmount=="function"))try{v.props=m.memoizedProps,v.state=m.memoizedState,v.componentWillUnmount()}catch(J){dr(m,d,J)}sc(c,d,m);break;case 21:sc(c,d,m);break;case 22:m.mode&1?(Pi=(v=Pi)||m.memoizedState!==null,sc(c,d,m),Pi=v):sc(c,d,m);break;default:sc(c,d,m)}}function zP(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var m=c.stateNode;m===null&&(m=c.stateNode=new RG),d.forEach(function(v){var S=FG.bind(null,c,v);m.has(v)||(m.add(v),v.then(S,S))})}}function Ma(c,d){var m=d.deletions;if(m!==null)for(var v=0;v<m.length;v++){var S=m[v];try{var I=c,G=d,J=G;e:for(;J!==null;){switch(J.tag){case 5:di=J.stateNode,ka=!1;break e;case 3:di=J.stateNode.containerInfo,ka=!0;break e;case 4:di=J.stateNode.containerInfo,ka=!0;break e}J=J.return}if(di===null)throw Error(t(160));UP(I,G,S),di=null,ka=!1;var se=S.alternate;se!==null&&(se.return=null),S.return=null}catch(ve){dr(S,d,ve)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)$P(d,c),d=d.sibling}function $P(c,d){var m=c.alternate,v=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ma(d,c),vo(c),v&4){try{Eg(3,c,c.return),d_(3,c)}catch(St){dr(c,c.return,St)}try{Eg(5,c,c.return)}catch(St){dr(c,c.return,St)}}break;case 1:Ma(d,c),vo(c),v&512&&m!==null&&Gd(m,m.return);break;case 5:if(Ma(d,c),vo(c),v&512&&m!==null&&Gd(m,m.return),c.flags&32){var S=c.stateNode;try{Ze(S,"")}catch(St){dr(c,c.return,St)}}if(v&4&&(S=c.stateNode,S!=null)){var I=c.memoizedProps,G=m!==null?m.memoizedProps:I,J=c.type,se=c.updateQueue;if(c.updateQueue=null,se!==null)try{J==="input"&&I.type==="radio"&&I.name!=null&&Ut(S,I),bs(J,G);var ve=bs(J,I);for(G=0;G<se.length;G+=2){var ze=se[G],Ye=se[G+1];ze==="style"?bt(S,Ye):ze==="dangerouslySetInnerHTML"?Ie(S,Ye):ze==="children"?Ze(S,Ye):k(S,ze,Ye,ve)}switch(J){case"input":De(S,I);break;case"textarea":Ot(S,I);break;case"select":var Be=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!I.multiple;var ft=I.value;ft!=null?b(S,!!I.multiple,ft,!1):Be!==!!I.multiple&&(I.defaultValue!=null?b(S,!!I.multiple,I.defaultValue,!0):b(S,!!I.multiple,I.multiple?[]:"",!1))}S[ug]=I}catch(St){dr(c,c.return,St)}}break;case 6:if(Ma(d,c),vo(c),v&4){if(c.stateNode===null)throw Error(t(162));S=c.stateNode,I=c.memoizedProps;try{S.nodeValue=I}catch(St){dr(c,c.return,St)}}break;case 3:if(Ma(d,c),vo(c),v&4&&m!==null&&m.memoizedState.isDehydrated)try{Xl(d.containerInfo)}catch(St){dr(c,c.return,St)}break;case 4:Ma(d,c),vo(c);break;case 13:Ma(d,c),vo(c),S=c.child,S.flags&8192&&(I=S.memoizedState!==null,S.stateNode.isHidden=I,!I||S.alternate!==null&&S.alternate.memoizedState!==null||(Hw=Ke())),v&4&&zP(c);break;case 22:if(ze=m!==null&&m.memoizedState!==null,c.mode&1?(Pi=(ve=Pi)||ze,Ma(d,c),Pi=ve):Ma(d,c),vo(c),v&8192){if(ve=c.memoizedState!==null,(c.stateNode.isHidden=ve)&&!ze&&(c.mode&1)!==0)for(mt=c,ze=c.child;ze!==null;){for(Ye=mt=ze;mt!==null;){switch(Be=mt,ft=Be.child,Be.tag){case 0:case 11:case 14:case 15:Eg(4,Be,Be.return);break;case 1:Gd(Be,Be.return);var yt=Be.stateNode;if(typeof yt.componentWillUnmount=="function"){v=Be,m=Be.return;try{d=v,yt.props=d.memoizedProps,yt.state=d.memoizedState,yt.componentWillUnmount()}catch(St){dr(v,m,St)}}break;case 5:Gd(Be,Be.return);break;case 22:if(Be.memoizedState!==null){KP(Ye);continue}}ft!==null?(ft.return=Be,mt=ft):KP(Ye)}ze=ze.sibling}e:for(ze=null,Ye=c;;){if(Ye.tag===5){if(ze===null){ze=Ye;try{S=Ye.stateNode,ve?(I=S.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none"):(J=Ye.stateNode,se=Ye.memoizedProps.style,G=se!=null&&se.hasOwnProperty("display")?se.display:null,J.style.display=wt("display",G))}catch(St){dr(c,c.return,St)}}}else if(Ye.tag===6){if(ze===null)try{Ye.stateNode.nodeValue=ve?"":Ye.memoizedProps}catch(St){dr(c,c.return,St)}}else if((Ye.tag!==22&&Ye.tag!==23||Ye.memoizedState===null||Ye===c)&&Ye.child!==null){Ye.child.return=Ye,Ye=Ye.child;continue}if(Ye===c)break e;for(;Ye.sibling===null;){if(Ye.return===null||Ye.return===c)break e;ze===Ye&&(ze=null),Ye=Ye.return}ze===Ye&&(ze=null),Ye.sibling.return=Ye.return,Ye=Ye.sibling}}break;case 19:Ma(d,c),vo(c),v&4&&zP(c);break;case 21:break;default:Ma(d,c),vo(c)}}function vo(c){var d=c.flags;if(d&2){try{e:{for(var m=c.return;m!==null;){if(GP(m)){var v=m;break e}m=m.return}throw Error(t(160))}switch(v.tag){case 5:var S=v.stateNode;v.flags&32&&(Ze(S,""),v.flags&=-33);var I=BP(c);zw(c,I,S);break;case 3:case 4:var G=v.stateNode.containerInfo,J=BP(c);Uw(c,J,G);break;default:throw Error(t(161))}}catch(se){dr(c,c.return,se)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function CG(c,d,m){mt=c,WP(c)}function WP(c,d,m){for(var v=(c.mode&1)!==0;mt!==null;){var S=mt,I=S.child;if(S.tag===22&&v){var G=S.memoizedState!==null||h_;if(!G){var J=S.alternate,se=J!==null&&J.memoizedState!==null||Pi;J=h_;var ve=Pi;if(h_=G,(Pi=se)&&!ve)for(mt=S;mt!==null;)G=mt,se=G.child,G.tag===22&&G.memoizedState!==null?YP(S):se!==null?(se.return=G,mt=se):YP(S);for(;I!==null;)mt=I,WP(I),I=I.sibling;mt=S,h_=J,Pi=ve}HP(c)}else(S.subtreeFlags&8772)!==0&&I!==null?(I.return=S,mt=I):HP(c)}}function HP(c){for(;mt!==null;){var d=mt;if((d.flags&8772)!==0){var m=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Pi||d_(5,d);break;case 1:var v=d.stateNode;if(d.flags&4&&!Pi)if(m===null)v.componentDidMount();else{var S=d.elementType===d.type?m.memoizedProps:Pa(d.type,m.memoizedProps);v.componentDidUpdate(S,m.memoizedState,v.__reactInternalSnapshotBeforeUpdate)}var I=d.updateQueue;I!==null&&KC(d,I,v);break;case 3:var G=d.updateQueue;if(G!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=d.child.stateNode;break;case 1:m=d.child.stateNode}KC(d,G,m)}break;case 5:var J=d.stateNode;if(m===null&&d.flags&4){m=J;var se=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":se.autoFocus&&m.focus();break;case"img":se.src&&(m.src=se.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ve=d.alternate;if(ve!==null){var ze=ve.memoizedState;if(ze!==null){var Ye=ze.dehydrated;Ye!==null&&Xl(Ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pi||d.flags&512&&Bw(d)}catch(Be){dr(d,d.return,Be)}}if(d===c){mt=null;break}if(m=d.sibling,m!==null){m.return=d.return,mt=m;break}mt=d.return}}function KP(c){for(;mt!==null;){var d=mt;if(d===c){mt=null;break}var m=d.sibling;if(m!==null){m.return=d.return,mt=m;break}mt=d.return}}function YP(c){for(;mt!==null;){var d=mt;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{d_(4,d)}catch(se){dr(d,m,se)}break;case 1:var v=d.stateNode;if(typeof v.componentDidMount=="function"){var S=d.return;try{v.componentDidMount()}catch(se){dr(d,S,se)}}var I=d.return;try{Bw(d)}catch(se){dr(d,I,se)}break;case 5:var G=d.return;try{Bw(d)}catch(se){dr(d,G,se)}}}catch(se){dr(d,d.return,se)}if(d===c){mt=null;break}var J=d.sibling;if(J!==null){J.return=d.return,mt=J;break}mt=d.return}}var PG=Math.ceil,f_=N.ReactCurrentDispatcher,$w=N.ReactCurrentOwner,aa=N.ReactCurrentBatchConfig,dn=0,qr=null,br=null,fi=0,js=0,Bd=ec(0),Br=0,wg=null,Vu=0,g_=0,Ww=0,Sg=null,ls=null,Hw=0,Ud=1/0,ll=null,m_=!1,Kw=null,ac=null,p_=!1,oc=null,__=0,Tg=0,Yw=null,y_=-1,x_=0;function Hi(){return(dn&6)!==0?Ke():y_!==-1?y_:y_=Ke()}function lc(c){return(c.mode&1)===0?1:(dn&2)!==0&&fi!==0?fi&-fi:fG.transition!==null?(x_===0&&(x_=W0()),x_):(c=ln,c!==0||(c=window.event,c=c===void 0?16:_d(c.type)),c)}function Na(c,d,m,v){if(50<Tg)throw Tg=0,Yw=null,Error(t(185));Ru(c,m,v),((dn&2)===0||c!==qr)&&(c===qr&&((dn&2)===0&&(g_|=m),Br===4&&cc(c,fi)),cs(c,v),m===1&&dn===0&&(d.mode&1)===0&&(Ud=Ke()+500,K1&&nc()))}function cs(c,d){var m=c.callbackNode;Au(c,d);var v=Xo(c,c===qr?fi:0);if(v===0)m!==null&&et(m),c.callbackNode=null,c.callbackPriority=0;else if(d=v&-v,c.callbackPriority!==d){if(m!=null&&et(m),d===1)c.tag===0?dG(qP.bind(null,c)):OC(qP.bind(null,c)),lG(function(){(dn&6)===0&&nc()}),m=null;else{switch(ao(v)){case 1:m=In;break;case 4:m=Pn;break;case 16:m=Qn;break;case 536870912:m=ea;break;default:m=Qn}m=i4(m,XP.bind(null,c))}c.callbackPriority=d,c.callbackNode=m}}function XP(c,d){if(y_=-1,x_=0,(dn&6)!==0)throw Error(t(327));var m=c.callbackNode;if(zd()&&c.callbackNode!==m)return null;var v=Xo(c,c===qr?fi:0);if(v===0)return null;if((v&30)!==0||(v&c.expiredLanes)!==0||d)d=v_(c,v);else{d=v;var S=dn;dn|=2;var I=QP();(qr!==c||fi!==d)&&(ll=null,Ud=Ke()+500,Bu(c,d));do try{NG();break}catch(J){ZP(c,J)}while(!0);dw(),f_.current=I,dn=S,br!==null?d=0:(qr=null,fi=0,d=Br)}if(d!==0){if(d===2&&(S=$0(c),S!==0&&(v=S,d=Xw(c,S))),d===1)throw m=wg,Bu(c,0),cc(c,v),cs(c,Ke()),m;if(d===6)cc(c,v);else{if(S=c.current.alternate,(v&30)===0&&!kG(S)&&(d=v_(c,v),d===2&&(I=$0(c),I!==0&&(v=I,d=Xw(c,I))),d===1))throw m=wg,Bu(c,0),cc(c,v),cs(c,Ke()),m;switch(c.finishedWork=S,c.finishedLanes=v,d){case 0:case 1:throw Error(t(345));case 2:Uu(c,ls,ll);break;case 3:if(cc(c,v),(v&130023424)===v&&(d=Hw+500-Ke(),10<d)){if(Xo(c,0)!==0)break;if(S=c.suspendedLanes,(S&v)!==v){Hi(),c.pingedLanes|=c.suspendedLanes&S;break}c.timeoutHandle=tw(Uu.bind(null,c,ls,ll),d);break}Uu(c,ls,ll);break;case 4:if(cc(c,v),(v&4194240)===v)break;for(d=c.eventTimes,S=-1;0<v;){var G=31-ir(v);I=1<<G,G=d[G],G>S&&(S=G),v&=~I}if(v=S,v=Ke()-v,v=(120>v?120:480>v?480:1080>v?1080:1920>v?1920:3e3>v?3e3:4320>v?4320:1960*PG(v/1960))-v,10<v){c.timeoutHandle=tw(Uu.bind(null,c,ls,ll),v);break}Uu(c,ls,ll);break;case 5:Uu(c,ls,ll);break;default:throw Error(t(329))}}}return cs(c,Ke()),c.callbackNode===m?XP.bind(null,c):null}function Xw(c,d){var m=Sg;return c.current.memoizedState.isDehydrated&&(Bu(c,d).flags|=256),c=v_(c,d),c!==2&&(d=ls,ls=m,d!==null&&qw(d)),c}function qw(c){ls===null?ls=c:ls.push.apply(ls,c)}function kG(c){for(var d=c;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var v=0;v<m.length;v++){var S=m[v],I=S.getSnapshot;S=S.value;try{if(!ba(I(),S))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function cc(c,d){for(d&=~Ww,d&=~g_,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var m=31-ir(d),v=1<<m;c[m]=-1,d&=~v}}function qP(c){if((dn&6)!==0)throw Error(t(327));zd();var d=Xo(c,0);if((d&1)===0)return cs(c,Ke()),null;var m=v_(c,d);if(c.tag!==0&&m===2){var v=$0(c);v!==0&&(d=v,m=Xw(c,v))}if(m===1)throw m=wg,Bu(c,0),cc(c,d),cs(c,Ke()),m;if(m===6)throw Error(t(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Uu(c,ls,ll),cs(c,Ke()),null}function Zw(c,d){var m=dn;dn|=1;try{return c(d)}finally{dn=m,dn===0&&(Ud=Ke()+500,K1&&nc())}}function Gu(c){oc!==null&&oc.tag===0&&(dn&6)===0&&zd();var d=dn;dn|=1;var m=aa.transition,v=ln;try{if(aa.transition=null,ln=1,c)return c()}finally{ln=v,aa.transition=m,dn=d,(dn&6)===0&&nc()}}function Qw(){js=Bd.current,Kn(Bd)}function Bu(c,d){c.finishedWork=null,c.finishedLanes=0;var m=c.timeoutHandle;if(m!==-1&&(c.timeoutHandle=-1,oG(m)),br!==null)for(m=br.return;m!==null;){var v=m;switch(ow(v),v.tag){case 1:v=v.type.childContextTypes,v!=null&&W1();break;case 3:jd(),Kn(ss),Kn(Ri),vw();break;case 5:yw(v);break;case 4:jd();break;case 13:Kn(sr);break;case 19:Kn(sr);break;case 10:fw(v.type._context);break;case 22:case 23:Qw()}m=m.return}if(qr=c,br=c=uc(c.current,null),fi=js=d,Br=0,wg=null,Ww=g_=Vu=0,ls=Sg=null,Du!==null){for(d=0;d<Du.length;d++)if(m=Du[d],v=m.interleaved,v!==null){m.interleaved=null;var S=v.next,I=m.pending;if(I!==null){var G=I.next;I.next=S,v.next=G}m.pending=v}Du=null}return c}function ZP(c,d){do{var m=br;try{if(dw(),r_.current=o_,i_){for(var v=ar.memoizedState;v!==null;){var S=v.queue;S!==null&&(S.pending=null),v=v.next}i_=!1}if(ju=0,Xr=Gr=ar=null,pg=!1,_g=0,$w.current=null,m===null||m.return===null){Br=1,wg=d,br=null;break}e:{var I=c,G=m.return,J=m,se=d;if(d=fi,J.flags|=32768,se!==null&&typeof se=="object"&&typeof se.then=="function"){var ve=se,ze=J,Ye=ze.tag;if((ze.mode&1)===0&&(Ye===0||Ye===11||Ye===15)){var Be=ze.alternate;Be?(ze.updateQueue=Be.updateQueue,ze.memoizedState=Be.memoizedState,ze.lanes=Be.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var ft=wP(G);if(ft!==null){ft.flags&=-257,SP(ft,G,J,I,d),ft.mode&1&&EP(I,ve,d),d=ft,se=ve;var yt=d.updateQueue;if(yt===null){var St=new Set;St.add(se),d.updateQueue=St}else yt.add(se);break e}else{if((d&1)===0){EP(I,ve,d),Jw();break e}se=Error(t(426))}}else if(Jn&&J.mode&1){var wr=wP(G);if(wr!==null){(wr.flags&65536)===0&&(wr.flags|=256),SP(wr,G,J,I,d),uw(Vd(se,J));break e}}I=se=Vd(se,J),Br!==4&&(Br=2),Sg===null?Sg=[I]:Sg.push(I),I=G;do{switch(I.tag){case 3:I.flags|=65536,d&=-d,I.lanes|=d;var he=xP(I,se,d);HC(I,he);break e;case 1:J=se;var oe=I.type,_e=I.stateNode;if((I.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(ac===null||!ac.has(_e)))){I.flags|=65536,d&=-d,I.lanes|=d;var Je=vP(I,J,d);HC(I,Je);break e}}I=I.return}while(I!==null)}e4(m)}catch(It){d=It,br===m&&m!==null&&(br=m=m.return);continue}break}while(!0)}function QP(){var c=f_.current;return f_.current=o_,c===null?o_:c}function Jw(){(Br===0||Br===3||Br===2)&&(Br=4),qr===null||(Vu&268435455)===0&&(g_&268435455)===0||cc(qr,fi)}function v_(c,d){var m=dn;dn|=2;var v=QP();(qr!==c||fi!==d)&&(ll=null,Bu(c,d));do try{MG();break}catch(S){ZP(c,S)}while(!0);if(dw(),dn=m,f_.current=v,br!==null)throw Error(t(261));return qr=null,fi=0,Br}function MG(){for(;br!==null;)JP(br)}function NG(){for(;br!==null&&!ut();)JP(br)}function JP(c){var d=r4(c.alternate,c,js);c.memoizedProps=c.pendingProps,d===null?e4(c):br=d,$w.current=null}function e4(c){var d=c;do{var m=d.alternate;if(c=d.return,(d.flags&32768)===0){if(m=IG(m,d,js),m!==null){br=m;return}}else{if(m=AG(m,d),m!==null){m.flags&=32767,br=m;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Br=6,br=null;return}}if(d=d.sibling,d!==null){br=d;return}br=d=c}while(d!==null);Br===0&&(Br=5)}function Uu(c,d,m){var v=ln,S=aa.transition;try{aa.transition=null,ln=1,LG(c,d,m,v)}finally{aa.transition=S,ln=v}return null}function LG(c,d,m,v){do zd();while(oc!==null);if((dn&6)!==0)throw Error(t(327));m=c.finishedWork;var S=c.finishedLanes;if(m===null)return null;if(c.finishedWork=null,c.finishedLanes=0,m===c.current)throw Error(t(177));c.callbackNode=null,c.callbackPriority=0;var I=m.lanes|m.childLanes;if(VE(c,I),c===qr&&(br=qr=null,fi=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||p_||(p_=!0,i4(Qn,function(){return zd(),null})),I=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||I){I=aa.transition,aa.transition=null;var G=ln;ln=1;var J=dn;dn|=4,$w.current=null,bG(c,m),$P(m,c),eG(JE),Qo=!!QE,JE=QE=null,c.current=m,CG(m),He(),dn=J,ln=G,aa.transition=I}else c.current=m;if(p_&&(p_=!1,oc=c,__=S),I=c.pendingLanes,I===0&&(ac=null),Wl(m.stateNode),cs(c,Ke()),d!==null)for(v=c.onRecoverableError,m=0;m<d.length;m++)S=d[m],v(S.value,{componentStack:S.stack,digest:S.digest});if(m_)throw m_=!1,c=Kw,Kw=null,c;return(__&1)!==0&&c.tag!==0&&zd(),I=c.pendingLanes,(I&1)!==0?c===Yw?Tg++:(Tg=0,Yw=c):Tg=0,nc(),null}function zd(){if(oc!==null){var c=ao(__),d=aa.transition,m=ln;try{if(aa.transition=null,ln=16>c?16:c,oc===null)var v=!1;else{if(c=oc,oc=null,__=0,(dn&6)!==0)throw Error(t(331));var S=dn;for(dn|=4,mt=c.current;mt!==null;){var I=mt,G=I.child;if((mt.flags&16)!==0){var J=I.deletions;if(J!==null){for(var se=0;se<J.length;se++){var ve=J[se];for(mt=ve;mt!==null;){var ze=mt;switch(ze.tag){case 0:case 11:case 15:Eg(8,ze,I)}var Ye=ze.child;if(Ye!==null)Ye.return=ze,mt=Ye;else for(;mt!==null;){ze=mt;var Be=ze.sibling,ft=ze.return;if(VP(ze),ze===ve){mt=null;break}if(Be!==null){Be.return=ft,mt=Be;break}mt=ft}}}var yt=I.alternate;if(yt!==null){var St=yt.child;if(St!==null){yt.child=null;do{var wr=St.sibling;St.sibling=null,St=wr}while(St!==null)}}mt=I}}if((I.subtreeFlags&2064)!==0&&G!==null)G.return=I,mt=G;else e:for(;mt!==null;){if(I=mt,(I.flags&2048)!==0)switch(I.tag){case 0:case 11:case 15:Eg(9,I,I.return)}var he=I.sibling;if(he!==null){he.return=I.return,mt=he;break e}mt=I.return}}var oe=c.current;for(mt=oe;mt!==null;){G=mt;var _e=G.child;if((G.subtreeFlags&2064)!==0&&_e!==null)_e.return=G,mt=_e;else e:for(G=oe;mt!==null;){if(J=mt,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:d_(9,J)}}catch(It){dr(J,J.return,It)}if(J===G){mt=null;break e}var Je=J.sibling;if(Je!==null){Je.return=J.return,mt=Je;break e}mt=J.return}}if(dn=S,nc(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(ks,c)}catch{}v=!0}return v}finally{ln=m,aa.transition=d}}return!1}function t4(c,d,m){d=Vd(m,d),d=xP(c,d,1),c=ic(c,d,1),d=Hi(),c!==null&&(Ru(c,1,d),cs(c,d))}function dr(c,d,m){if(c.tag===3)t4(c,c,m);else for(;d!==null;){if(d.tag===3){t4(d,c,m);break}else if(d.tag===1){var v=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ac===null||!ac.has(v))){c=Vd(m,c),c=vP(d,c,1),d=ic(d,c,1),c=Hi(),d!==null&&(Ru(d,1,c),cs(d,c));break}}d=d.return}}function OG(c,d,m){var v=c.pingCache;v!==null&&v.delete(d),d=Hi(),c.pingedLanes|=c.suspendedLanes&m,qr===c&&(fi&m)===m&&(Br===4||Br===3&&(fi&130023424)===fi&&500>Ke()-Hw?Bu(c,0):Ww|=m),cs(c,d)}function n4(c,d){d===0&&((c.mode&1)===0?d=1:(d=Hl,Hl<<=1,(Hl&130023424)===0&&(Hl=4194304)));var m=Hi();c=sl(c,d),c!==null&&(Ru(c,d,m),cs(c,m))}function DG(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),n4(c,m)}function FG(c,d){var m=0;switch(c.tag){case 13:var v=c.stateNode,S=c.memoizedState;S!==null&&(m=S.retryLane);break;case 19:v=c.stateNode;break;default:throw Error(t(314))}v!==null&&v.delete(d),n4(c,m)}var r4;r4=function(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps||ss.current)os=!0;else{if((c.lanes&m)===0&&(d.flags&128)===0)return os=!1,TG(c,d,m);os=(c.flags&131072)!==0}else os=!1,Jn&&(d.flags&1048576)!==0&&DC(d,X1,d.index);switch(d.lanes=0,d.tag){case 2:var v=d.type;u_(c,d),c=d.pendingProps;var S=kd(d,Ri.current);Fd(d,m),S=Sw(null,d,v,c,S,m);var I=Tw();return d.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,as(v)?(I=!0,H1(d)):I=!1,d.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,pw(d),S.updater=l_,d.stateNode=S,S._reactInternals=d,Pw(d,v,c,m),d=Lw(null,d,v,!0,I,m)):(d.tag=0,Jn&&I&&aw(d),Wi(null,d,S,m),d=d.child),d;case 16:v=d.elementType;e:{switch(u_(c,d),c=d.pendingProps,S=v._init,v=S(v._payload),d.type=v,S=d.tag=VG(v),c=Pa(v,c),S){case 0:d=Nw(null,d,v,c,m);break e;case 1:d=CP(null,d,v,c,m);break e;case 11:d=TP(null,d,v,c,m);break e;case 14:d=IP(null,d,v,Pa(v.type,c),m);break e}throw Error(t(306,v,""))}return d;case 0:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Pa(v,S),Nw(c,d,v,S,m);case 1:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Pa(v,S),CP(c,d,v,S,m);case 3:e:{if(PP(d),c===null)throw Error(t(387));v=d.pendingProps,I=d.memoizedState,S=I.element,WC(c,d),t_(d,v,null,m);var G=d.memoizedState;if(v=G.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},d.updateQueue.baseState=I,d.memoizedState=I,d.flags&256){S=Vd(Error(t(423)),d),d=kP(c,d,v,m,S);break e}else if(v!==S){S=Vd(Error(t(424)),d),d=kP(c,d,v,m,S);break e}else for(Fs=Jl(d.stateNode.containerInfo.firstChild),Ds=d,Jn=!0,Ca=null,m=zC(d,null,v,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(Ld(),v===S){d=ol(c,d,m);break e}Wi(c,d,v,m)}d=d.child}return d;case 5:return YC(d),c===null&&cw(d),v=d.type,S=d.pendingProps,I=c!==null?c.memoizedProps:null,G=S.children,ew(v,S)?G=null:I!==null&&ew(v,I)&&(d.flags|=32),bP(c,d),Wi(c,d,G,m),d.child;case 6:return c===null&&cw(d),null;case 13:return MP(c,d,m);case 4:return _w(d,d.stateNode.containerInfo),v=d.pendingProps,c===null?d.child=Od(d,null,v,m):Wi(c,d,v,m),d.child;case 11:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Pa(v,S),TP(c,d,v,S,m);case 7:return Wi(c,d,d.pendingProps,m),d.child;case 8:return Wi(c,d,d.pendingProps.children,m),d.child;case 12:return Wi(c,d,d.pendingProps.children,m),d.child;case 10:e:{if(v=d.type._context,S=d.pendingProps,I=d.memoizedProps,G=S.value,$n(Q1,v._currentValue),v._currentValue=G,I!==null)if(ba(I.value,G)){if(I.children===S.children&&!ss.current){d=ol(c,d,m);break e}}else for(I=d.child,I!==null&&(I.return=d);I!==null;){var J=I.dependencies;if(J!==null){G=I.child;for(var se=J.firstContext;se!==null;){if(se.context===v){if(I.tag===1){se=al(-1,m&-m),se.tag=2;var ve=I.updateQueue;if(ve!==null){ve=ve.shared;var ze=ve.pending;ze===null?se.next=se:(se.next=ze.next,ze.next=se),ve.pending=se}}I.lanes|=m,se=I.alternate,se!==null&&(se.lanes|=m),gw(I.return,m,d),J.lanes|=m;break}se=se.next}}else if(I.tag===10)G=I.type===d.type?null:I.child;else if(I.tag===18){if(G=I.return,G===null)throw Error(t(341));G.lanes|=m,J=G.alternate,J!==null&&(J.lanes|=m),gw(G,m,d),G=I.sibling}else G=I.child;if(G!==null)G.return=I;else for(G=I;G!==null;){if(G===d){G=null;break}if(I=G.sibling,I!==null){I.return=G.return,G=I;break}G=G.return}I=G}Wi(c,d,S.children,m),d=d.child}return d;case 9:return S=d.type,v=d.pendingProps.children,Fd(d,m),S=ia(S),v=v(S),d.flags|=1,Wi(c,d,v,m),d.child;case 14:return v=d.type,S=Pa(v,d.pendingProps),S=Pa(v.type,S),IP(c,d,v,S,m);case 15:return AP(c,d,d.type,d.pendingProps,m);case 17:return v=d.type,S=d.pendingProps,S=d.elementType===v?S:Pa(v,S),u_(c,d),d.tag=1,as(v)?(c=!0,H1(d)):c=!1,Fd(d,m),_P(d,v,S),Pw(d,v,S,m),Lw(null,d,v,!0,c,m);case 19:return LP(c,d,m);case 22:return RP(c,d,m)}throw Error(t(156,d.tag))};function i4(c,d){return We(c,d)}function jG(c,d,m,v){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(c,d,m,v){return new jG(c,d,m,v)}function e2(c){return c=c.prototype,!(!c||!c.isReactComponent)}function VG(c){if(typeof c=="function")return e2(c)?1:0;if(c!=null){if(c=c.$$typeof,c===W)return 11;if(c===Ne)return 14}return 2}function uc(c,d){var m=c.alternate;return m===null?(m=oa(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&14680064,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m}function E_(c,d,m,v,S,I){var G=2;if(v=c,typeof c=="function")e2(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case P:return zu(m.children,S,I,d);case C:G=8,S|=8;break;case M:return c=oa(12,m,d,S|2),c.elementType=M,c.lanes=I,c;case D:return c=oa(13,m,d,S),c.elementType=D,c.lanes=I,c;case we:return c=oa(19,m,d,S),c.elementType=we,c.lanes=I,c;case be:return w_(m,S,I,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case F:G=10;break e;case O:G=9;break e;case W:G=11;break e;case Ne:G=14;break e;case Le:G=16,v=null;break e}throw Error(t(130,c==null?c:typeof c,""))}return d=oa(G,m,d,S),d.elementType=c,d.type=v,d.lanes=I,d}function zu(c,d,m,v){return c=oa(7,c,v,d),c.lanes=m,c}function w_(c,d,m,v){return c=oa(22,c,v,d),c.elementType=be,c.lanes=m,c.stateNode={isHidden:!1},c}function t2(c,d,m){return c=oa(6,c,null,d),c.lanes=m,c}function n2(c,d,m){return d=oa(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function GG(c,d,m,v,S){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=H0(0),this.expirationTimes=H0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H0(0),this.identifierPrefix=v,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function r2(c,d,m,v,S,I,G,J,se){return c=new GG(c,d,m,J,se),d===1?(d=1,I===!0&&(d|=8)):d=0,I=oa(3,null,null,d),c.current=I,I.stateNode=c,I.memoizedState={element:v,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},pw(I),c}function BG(c,d,m){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:v==null?null:""+v,children:c,containerInfo:d,implementation:m}}function s4(c){if(!c)return tc;c=c._reactInternals;e:{if(Q(c)!==c||c.tag!==1)throw Error(t(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(as(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(t(171))}if(c.tag===1){var m=c.type;if(as(m))return NC(c,m,d)}return d}function a4(c,d,m,v,S,I,G,J,se){return c=r2(m,v,!0,c,S,I,G,J,se),c.context=s4(null),m=c.current,v=Hi(),S=lc(m),I=al(v,S),I.callback=d??null,ic(m,I,S),c.current.lanes=S,Ru(c,S,v),cs(c,v),c}function S_(c,d,m,v){var S=d.current,I=Hi(),G=lc(S);return m=s4(m),d.context===null?d.context=m:d.pendingContext=m,d=al(I,G),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=ic(S,d,G),c!==null&&(Na(c,S,G,I),e_(c,S,G)),G}function T_(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function o4(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function i2(c,d){o4(c,d),(c=c.alternate)&&o4(c,d)}function UG(){return null}var l4=typeof reportError=="function"?reportError:function(c){console.error(c)};function s2(c){this._internalRoot=c}I_.prototype.render=s2.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(t(409));S_(c,d,null,null)},I_.prototype.unmount=s2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;Gu(function(){S_(null,c,null,null)}),d[tl]=null}};function I_(c){this._internalRoot=c}I_.prototype.unstable_scheduleHydration=function(c){if(c){var d=q0();c={blockedOn:null,target:c,priority:d};for(var m=0;m<Ms.length&&d!==0&&d<Ms[m].priority;m++);Ms.splice(m,0,c),m===0&&md(c)}};function a2(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function A_(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function c4(){}function zG(c,d,m,v,S){if(S){if(typeof v=="function"){var I=v;v=function(){var ve=T_(G);I.call(ve)}}var G=a4(d,v,c,0,null,!1,!1,"",c4);return c._reactRootContainer=G,c[tl]=G.current,lg(c.nodeType===8?c.parentNode:c),Gu(),G}for(;S=c.lastChild;)c.removeChild(S);if(typeof v=="function"){var J=v;v=function(){var ve=T_(se);J.call(ve)}}var se=r2(c,0,!1,null,null,!1,!1,"",c4);return c._reactRootContainer=se,c[tl]=se.current,lg(c.nodeType===8?c.parentNode:c),Gu(function(){S_(d,se,m,v)}),se}function R_(c,d,m,v,S){var I=m._reactRootContainer;if(I){var G=I;if(typeof S=="function"){var J=S;S=function(){var se=T_(G);J.call(se)}}S_(d,G,c,S)}else G=zG(m,d,c,S,v);return T_(G)}Y0=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var m=xn(d.pendingLanes);m!==0&&(K0(d,m|1),cs(d,Ke()),(dn&6)===0&&(Ud=Ke()+500,nc()))}break;case 13:Gu(function(){var v=sl(c,1);if(v!==null){var S=Hi();Na(v,c,1,S)}}),i2(c,1)}},fd=function(c){if(c.tag===13){var d=sl(c,134217728);if(d!==null){var m=Hi();Na(d,c,134217728,m)}i2(c,134217728)}},X0=function(c){if(c.tag===13){var d=lc(c),m=sl(c,d);if(m!==null){var v=Hi();Na(m,c,d,v)}i2(c,d)}},q0=function(){return ln},Z0=function(c,d){var m=ln;try{return ln=c,d()}finally{ln=m}},Ir=function(c,d,m){switch(d){case"input":if(De(c,m),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<m.length;d++){var v=m[d];if(v!==c&&v.form===c.form){var S=$1(v);if(!S)throw Error(t(90));gt(v),De(v,S)}}}break;case"textarea":Ot(c,m);break;case"select":d=m.value,d!=null&&b(c,!!m.multiple,d,!1)}},rs=Zw,Fr=Gu;var $G={usingClientEntryPoint:!1,Events:[hg,Cd,$1,Ps,nr,Zw]},Ig={findFiberByHostInstance:Mu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WG={bundleType:Ig.bundleType,version:Ig.version,rendererPackageName:Ig.rendererPackageName,rendererConfig:Ig.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ye(c),c===null?null:c.stateNode},findFiberByHostInstance:Ig.findFiberByHostInstance||UG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b_.isDisabled&&b_.supportsFiber)try{ks=b_.inject(WG),vr=b_}catch{}}return us.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$G,us.createPortal=function(c,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(d))throw Error(t(200));return BG(c,d,null,m)},us.createRoot=function(c,d){if(!a2(c))throw Error(t(299));var m=!1,v="",S=l4;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onRecoverableError!==void 0&&(S=d.onRecoverableError)),d=r2(c,1,!1,null,null,m,!1,v,S),c[tl]=d.current,lg(c.nodeType===8?c.parentNode:c),new s2(d)},us.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(t(188)):(c=Object.keys(c).join(","),Error(t(268,c)));return c=ye(d),c=c===null?null:c.stateNode,c},us.flushSync=function(c){return Gu(c)},us.hydrate=function(c,d,m){if(!A_(d))throw Error(t(200));return R_(null,c,d,!0,m)},us.hydrateRoot=function(c,d,m){if(!a2(c))throw Error(t(405));var v=m!=null&&m.hydratedSources||null,S=!1,I="",G=l4;if(m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(I=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),d=a4(d,null,c,1,m??null,S,!1,I,G),c[tl]=d.current,lg(c),v)for(c=0;c<v.length;c++)m=v[c],S=m._getVersion,S=S(m._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[m,S]:d.mutableSourceEagerHydrationData.push(m,S);return new I_(d)},us.render=function(c,d,m){if(!A_(d))throw Error(t(200));return R_(null,c,d,!1,m)},us.unmountComponentAtNode=function(c){if(!A_(c))throw Error(t(40));return c._reactRootContainer?(Gu(function(){R_(null,null,c,!1,function(){c._reactRootContainer=null,c[tl]=null})}),!0):!1},us.unstable_batchedUpdates=Zw,us.unstable_renderSubtreeIntoContainer=function(c,d,m,v){if(!A_(m))throw Error(t(200));if(c==null||c._reactInternals===void 0)throw Error(t(38));return R_(c,d,m,!1,v)},us.version="18.3.1-next-f1338f8080-20240426",us}var _4;function JG(){if(_4)return c2.exports;_4=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),c2.exports=QG(),c2.exports}var y4;function eB(){if(y4)return C_;y4=1;var n=JG();return C_.createRoot=n.createRoot,C_.hydrateRoot=n.hydrateRoot,C_}var tB=eB();const nB=MI(tB);var ae=kp();const rB=MI(ae),fs={ADD:"add",REMOVE:"remove"},qf={PROPERTYCHANGE:"propertychange"},zt={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class vv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function iB(n,e,t){let r,i;t=t||yl;let s=0,a=n.length,o=!1;for(;s<a;)r=s+(a-s>>1),i=+t(n[r],e),i<0?s=r+1:(a=r,o=!i);return o?s:~s}function yl(n,e){return n>e?1:n<e?-1:0}function sB(n,e){return n<e?1:n>e?-1:0}function Ev(n,e,t){if(n[0]<=e)return 0;const r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){const s=n[i];if(s===e)return i;if(s<e)return t(e,n[i-1],s)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function aB(n,e,t){for(;e<t;){const r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function An(n,e){const t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function pu(n,e){const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function oB(n,e,t){const r=e||yl;return n.every(function(i,s){if(s===0)return!0;const a=r(n[s-1],i);return!(a>0||a===0)})}function Fm(){return!0}function wv(){return!1}function jm(){}function wO(n){let e,t,r;return function(){const i=Array.prototype.slice.call(arguments);return(!t||this!==r||!pu(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function SO(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Mp(n){for(const e in n)delete n[e]}function Ih(n){let e;for(e in n)return!1;return!e}class Wo{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let Np=class extends vv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){const t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=t?new Wo(e):e;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});r in a||(a[r]=0,o[r]=0),++a[r];let l;for(let u=0,h=i.length;u<h;++u)if("handleEvent"in i[u]?l=i[u].handleEvent(s):l=i[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--a[r]===0){let u=o[r];for(delete o[r];u--;)this.removeEventListener(r,jm);delete a[r]}return l}disposeInternal(){this.listeners_&&Mp(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=jm,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function hn(n,e,t,r,i){if(i){const a=t;t=function(o){return n.removeEventListener(e,t),a.call(r??this,o)}}else r&&r!==n&&(t=t.bind(r));const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Wy(n,e,t,r){return hn(n,e,t,r,!0)}function Wn(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Mp(n))}class Lp extends Np{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(zt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=hn(this,e[s],t);return i}return hn(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=Wy(this,e[s],t)}else r=Wy(this,e,t);return t.ol_key=r,r}unInternal(e,t){const r=t.ol_key;if(r)lB(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}}Lp.prototype.on;Lp.prototype.once;Lp.prototype.un;function lB(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Wn(n[e]);else Wn(n)}function Ft(){throw new Error("Unimplemented abstract method.")}let cB=0;function yn(n){return n.ol_uid||(n.ol_uid=String(++cB))}class x4 extends Wo{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}}class Ho extends Lp{constructor(e){super(),this.on,this.once,this.un,yn(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new x4(r,e,t)),r=qf.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new x4(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){const i=this.values_||(this.values_={});if(r)i[e]=t;else{const s=i[e];i[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],Ih(this.values_)&&(this.values_=null),t||this.notify(e,r)}}}const v4={LENGTH:"length"};class P_ extends Wo{constructor(e,t,r){super(e),this.element=t,this.index=r}}class pa extends Ho{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(v4.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new P_(fs.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new P_(fs.REMOVE,t,e)),t}setAt(e,t){const r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new P_(fs.REMOVE,i,e)),this.dispatchEvent(new P_(fs.ADD,t,e))}updateLength_(){this.set(v4.LENGTH,this.array_.length)}assertUnique_(e,t){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function Cn(n,e){if(!n)throw new Error(e)}let Za=class TO extends Ho{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new TO(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Wn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=hn(e,zt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?uB(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function uB(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Cn(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const Jr={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function E4(n){const e=Xs();for(let t=0,r=n.length;t<r;++t)am(e,n[t]);return e}function Vm(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function IO(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function qh(n,e,t){let r,i;return e<n[0]?r=n[0]-e:n[2]<e?r=e-n[2]:r=0,t<n[1]?i=n[1]-t:n[3]<t?i=t-n[3]:i=0,r*r+i*i}function Ah(n,e){return NI(n,e[0],e[1])}function Nc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function NI(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function VS(n,e){const t=n[0],r=n[1],i=n[2],s=n[3],a=e[0],o=e[1];let l=Jr.UNKNOWN;return a<t?l=l|Jr.LEFT:a>i&&(l=l|Jr.RIGHT),o<r?l=l|Jr.BELOW:o>s&&(l=l|Jr.ABOVE),l===Jr.UNKNOWN&&(l=Jr.INTERSECTING),l}function Xs(){return[1/0,1/0,-1/0,-1/0]}function Qc(n,e,t,r,i){return i?(i[0]=n,i[1]=e,i[2]=t,i[3]=r,i):[n,e,t,r]}function Op(n){return Qc(1/0,1/0,-1/0,-1/0,n)}function AO(n,e){const t=n[0],r=n[1];return Qc(t,r,t,r,e)}function LI(n,e,t,r,i){const s=Op(i);return bO(s,n,e,t,r)}function Zf(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function RO(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function am(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function bO(n,e,t,r,i){for(;t<r;t+=i)hB(n,e[t],e[t+1]);return n}function hB(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function CO(n,e){let t;return t=e(Sv(n)),t||(t=e(Tv(n)),t)||(t=e(Iv(n)),t)||(t=e(Zh(n)),t)?t:!1}function GS(n){let e=0;return S0(n)||(e=tn(n)*kr(n)),e}function Sv(n){return[n[0],n[1]]}function Tv(n){return[n[2],n[1]]}function jo(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function dB(n,e){let t;if(e==="bottom-left")t=Sv(n);else if(e==="bottom-right")t=Tv(n);else if(e==="top-left")t=Zh(n);else if(e==="top-right")t=Iv(n);else throw new Error("Invalid corner");return t}function Hy(n,e,t,r,i){const[s,a,o,l,u,h,f,g]=PO(n,e,t,r);return Qc(Math.min(s,o,u,f),Math.min(a,l,h,g),Math.max(s,o,u,f),Math.max(a,l,h,g),i)}function PO(n,e,t,r){const i=e*r[0]/2,s=e*r[1]/2,a=Math.cos(t),o=Math.sin(t),l=i*a,u=i*o,h=s*a,f=s*o,g=n[0],p=n[1];return[g-l+f,p-u-h,g-l-f,p-u+h,g+l-f,p+u+h,g+l+f,p+u-h,g-l+f,p-u-h]}function kr(n){return n[3]-n[1]}function xl(n,e,t){const r=t||Xs();return Zi(n,e)?(n[0]>e[0]?r[0]=n[0]:r[0]=e[0],n[1]>e[1]?r[1]=n[1]:r[1]=e[1],n[2]<e[2]?r[2]=n[2]:r[2]=e[2],n[3]<e[3]?r[3]=n[3]:r[3]=e[3]):Op(r),r}function Zh(n){return[n[0],n[3]]}function Iv(n){return[n[2],n[3]]}function tn(n){return n[2]-n[0]}function Zi(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function S0(n){return n[2]<n[0]||n[3]<n[1]}function fB(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function gB(n,e,t){let r=!1;const i=VS(n,e),s=VS(n,t);if(i===Jr.INTERSECTING||s===Jr.INTERSECTING)r=!0;else{const a=n[0],o=n[1],l=n[2],u=n[3],h=e[0],f=e[1],g=t[0],p=t[1],E=(p-f)/(g-h);let x,w;s&Jr.ABOVE&&!(i&Jr.ABOVE)&&(x=g-(p-u)/E,r=x>=a&&x<=l),!r&&s&Jr.RIGHT&&!(i&Jr.RIGHT)&&(w=p-(g-l)*E,r=w>=o&&w<=u),!r&&s&Jr.BELOW&&!(i&Jr.BELOW)&&(x=g-(p-o)/E,r=x>=a&&x<=l),!r&&s&Jr.LEFT&&!(i&Jr.LEFT)&&(w=p-(g-a)*E,r=w>=o&&w<=u)}return r}function kO(n,e){const t=e.getExtent(),r=jo(n);if(e.canWrapX()&&(r[0]<t[0]||r[0]>=t[2])){const i=tn(t),a=Math.floor((r[0]-t[0])/i)*i;n[0]-=a,n[2]-=a}return n}function MO(n,e,t){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[r[0],n[1],r[2],n[3]]];kO(n,e);const i=tn(r);if(tn(n)>i&&!t)return[[r[0],n[1],r[2],n[3]]];if(n[0]<r[0])return[[n[0]+i,n[1],r[2],n[3]],[r[0],n[1],n[2],n[3]]];if(n[2]>r[2])return[[n[0],n[1],r[2],n[3]],[r[0],n[1],n[2]-i,n[3]]]}return[n]}function Yn(n,e,t){return Math.min(Math.max(n,e),t)}function mB(n,e,t,r,i,s){const a=i-t,o=s-r;if(a!==0||o!==0){const l=((n-t)*a+(e-r)*o)/(a*a+o*o);l>1?(t=i,r=s):l>0&&(t+=a*l,r+=o*l)}return yh(n,e,t,r)}function yh(n,e,t,r){const i=t-n,s=r-e;return i*i+s*s}function pB(n){const e=n.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(n[r][r]);for(let o=r+1;o<e;o++){const l=Math.abs(n[o][r]);l>s&&(s=l,i=o)}if(s===0)return null;const a=n[i];n[i]=n[r],n[r]=a;for(let o=r+1;o<e;o++){const l=-n[o][r]/n[r][r];for(let u=r;u<e+1;u++)r==u?n[o][u]=0:n[o][u]+=l*n[r][u]}}const t=new Array(e);for(let r=e-1;r>=0;r--){t[r]=n[r][e]/n[r][r];for(let i=r-1;i>=0;i--)n[i][e]-=n[i][r]*t[r]}return t}function w4(n){return n*180/Math.PI}function vl(n){return n*Math.PI/180}function zc(n,e){const t=n%e;return t*e<0?t+e:t}function Us(n,e,t){return n+t*(e-n)}function Dp(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Ky(n,e){return Math.round(Dp(n,e))}function k_(n,e){return Math.floor(Dp(n,e))}function Lc(n,e){return Math.ceil(Dp(n,e))}function BS(n,e,t){if(n>=e&&n<t)return n;const r=t-e;return((n-e)%r+r)%r+e}function Rg(n,e,t){const r=""+n;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function NO(n,e){const t=(""+n).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(t.length,r.length);i++){const s=parseInt(t[i]||"0",10),a=parseInt(r[i]||"0",10);if(s>a)return 1;if(a>s)return-1}return 0}function _B(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Yy(n,e){let t=!0;for(let r=n.length-1;r>=0;--r)if(n[r]!=e[r]){t=!1;break}return t}function OI(n,e){const t=Math.cos(e),r=Math.sin(e),i=n[0]*t-n[1]*r,s=n[1]*t+n[0]*r;return n[0]=i,n[1]=s,n}function yB(n,e){return n[0]*=e,n[1]*=e,n}function LO(n,e){if(e.canWrapX()){const t=tn(e.getExtent()),r=OO(n,e,t);r&&(n[0]-=r*t)}return n}function OO(n,e,t){const r=e.getExtent();let i=0;return e.canWrapX()&&(n[0]<r[0]||n[0]>r[2])&&(t=t||tn(r),i=Math.floor((n[0]-r[0])/t)),i}function DO(...n){console.warn(...n)}const Qf={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Av=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Qf[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Fp=6378137,Ef=Math.PI*Fp,xB=[-Ef,-Ef,Ef,Ef],vB=[-180,-85,180,85],M_=Fp*Math.log(Math.tan(Math.PI/2));class $d extends Av{constructor(e){super({code:e,units:"m",extent:xB,global:!0,worldExtent:vB,getPointResolution:function(t,r){return t/Math.cosh(r[1]/Fp)}})}}const S4=[new $d("EPSG:3857"),new $d("EPSG:102100"),new $d("EPSG:102113"),new $d("EPSG:900913"),new $d("http://www.opengis.net/def/crs/EPSG/0/3857"),new $d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function EB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=Ef*n[s]/180;let a=Fp*Math.log(Math.tan(Math.PI*(+n[s+1]+90)/360));a>M_?a=M_:a<-M_&&(a=-M_),e[s+1]=a}return e}function wB(n,e,t,r){const i=n.length;t=t>1?t:2,r=r??t,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*n[s]/Ef,e[s+1]=360*Math.atan(Math.exp(n[s+1]/Fp))/Math.PI-90;return e}const SB=6378137,T4=[-180,-90,180,90],TB=Math.PI*SB/180;class $u extends Av{constructor(e,t){super({code:e,units:"degrees",extent:T4,axisOrientation:t,global:!0,metersPerUnit:TB,worldExtent:T4})}}const I4=[new $u("CRS:84"),new $u("EPSG:4326","neu"),new $u("urn:ogc:def:crs:OGC:1.3:CRS84"),new $u("urn:ogc:def:crs:OGC:2:84"),new $u("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $u("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $u("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let US={};function _y(n){return US[n]||US[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function IB(n,e){US[n]=e}let Nf={};function Rh(n,e,t){const r=n.getCode(),i=e.getCode();r in Nf||(Nf[r]={}),Nf[r][i]=t}function yy(n,e){return n in Nf&&e in Nf[n]?Nf[n][e]:null}const Xy=.9996,va=.00669438,Rv=va*va,bv=Rv*va,uh=va/(1-va),A4=Math.sqrt(1-va),Jf=(1-A4)/(1+A4),FO=Jf*Jf,DI=FO*Jf,FI=DI*Jf,jO=FI*Jf,VO=1-va/4-3*Rv/64-5*bv/256,AB=3*va/8+3*Rv/32+45*bv/1024,RB=15*Rv/256+45*bv/1024,bB=35*bv/3072,CB=3/2*Jf-27/32*DI+269/512*jO,PB=21/16*FO-55/32*FI,kB=151/96*DI-417/128*jO,MB=1097/512*FI,qy=6378137;function NB(n,e,t){const r=n-5e5,a=(t.north?e:e-1e7)/Xy/(qy*VO),o=a+CB*Math.sin(2*a)+PB*Math.sin(4*a)+kB*Math.sin(6*a)+MB*Math.sin(8*a),l=Math.sin(o),u=l*l,h=Math.cos(o),f=l/h,g=f*f,p=g*g,E=1-va*u,x=Math.sqrt(1-va*u),w=qy/x,T=(1-va)/E,R=uh*h**2,k=R*R,N=r/(w*Xy),j=N*N,B=j*N,P=B*N,C=P*N,M=C*N,F=o-f/T*(j/2-P/24*(5+3*g+10*R-4*k-9*uh))+M/720*(61+90*g+298*R+45*p-252*uh-3*k);let O=(N-B/6*(1+2*g+R)+C/120*(5-2*R+28*g-3*k+8*uh+24*p))/h;return O=BS(O+vl(GO(t.number)),-Math.PI,Math.PI),[w4(O),w4(F)]}const R4=-80,b4=84,LB=-180,OB=180;function DB(n,e,t){n=BS(n,LB,OB),e<R4?e=R4:e>b4&&(e=b4);const r=vl(e),i=Math.sin(r),s=Math.cos(r),a=i/s,o=a*a,l=o*o,u=vl(n),h=GO(t.number),f=vl(h),g=qy/Math.sqrt(1-va*i**2),p=uh*s**2,E=s*BS(u-f,-Math.PI,Math.PI),x=E*E,w=x*E,T=w*E,R=T*E,k=R*E,N=qy*(VO*r-AB*Math.sin(2*r)+RB*Math.sin(4*r)-bB*Math.sin(6*r)),j=Xy*g*(E+w/6*(1-o+p)+R/120*(5-18*o+l+72*p-58*uh))+5e5;let B=Xy*(N+g*a*(x/2+T/24*(5-o+9*p+4*p**2)+k/720*(61-58*o+l+600*p-330*uh)));return t.north||(B+=1e7),[j,B]}function GO(n){return(n-1)*6-180+3}const FB=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function BO(n){let e=0;for(const i of FB){const s=n.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,r=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(r=!0,t=e-32600),t?{number:t,north:r}:null}function C4(n,e){return function(t,r,i,s){const a=t.length;i=i>1?i:2,s=s??i,r||(i>2?r=t.slice():r=new Array(a));for(let o=0;o<a;o+=s){const l=t[o],u=t[o+1],h=n(l,u,e);r[o]=h[0],r[o+1]=h[1]}return r}}function jB(n){return BO(n)?new Av({code:n,units:"m"}):null}function VB(n){const e=BO(n.getCode());return e?{forward:C4(DB,e),inverse:C4(NB,e)}:null}const GB=63710088e-1;function P4(n,e,t){t=t||GB;const r=vl(n[1]),i=vl(e[1]),s=(i-r)/2,a=vl(e[0]-n[0])/2,o=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(r)*Math.cos(i);return 2*t*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))}const BB=[VB],UB=[jB];let zS=!0;function UO(n){zS=!1}function jI(n,e){if(e!==void 0){for(let t=0,r=n.length;t<r;++t)e[t]=n[t];e=e}else e=n.slice();return e}function Zy(n){IB(n.getCode(),n),Rh(n,n,jI)}function zB(n){n.forEach(Zy)}function Bn(n){if(typeof n!="string")return n;const e=_y(n);if(e)return e;for(const t of UB){const r=t(n);if(r)return r}return null}function Qy(n,e,t,r){n=Bn(n);let i;const s=n.getPointResolutionFunc();if(s){if(i=s(e,t),r&&r!==n.getUnits()){const a=n.getMetersPerUnit();a&&(i=i*a/Qf[r])}}else{const a=n.getUnits();if(a=="degrees"&&!r||r=="degrees")i=e;else{const o=GI(n,Bn("EPSG:4326"));if(!o&&a!=="degrees")i=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=o(u,u,2);const h=P4(u.slice(0,2),u.slice(2,4)),f=P4(u.slice(4,6),u.slice(6,8));i=(h+f)/2}const l=r?Qf[r]:n.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function $S(n){zB(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Rh(e,t,jI)})})}function $B(n,e,t,r){n.forEach(function(i){e.forEach(function(s){Rh(i,s,t),Rh(s,i,r)})})}function VI(n,e){return n?typeof n=="string"?Bn(n):n:Bn(e)}function WS(n){return(function(e,t,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,t=t!==void 0?t:new Array(s);for(let a=0;a<s;a+=i){const o=n(e.slice(a,a+r)),l=o.length;for(let u=0,h=i;u<h;++u)t[a+u]=u>=l?e[a+u]:o[u]}return t})}function WB(n,e,t,r){const i=Bn(n),s=Bn(e);Rh(i,s,WS(t)),Rh(s,i,WS(r))}function bh(n,e){return UO(),jp(n,"EPSG:4326","EPSG:3857")}function fn(n,e){const t=jp(n,"EPSG:3857","EPSG:4326"),r=t[0];return(r<-180||r>180)&&(t[0]=zc(r+180,360)-180),t}function xh(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||GI(n,e)===jI)&&t}function GI(n,e){const t=n.getCode(),r=e.getCode();let i=yy(t,r);if(i)return i;let s=null,a=null;for(const l of BB)s||(s=l(n)),a||(a=l(e));if(!s&&!a)return null;const o="EPSG:4326";if(a)if(s)i=d2(s.inverse,a.forward);else{const l=yy(t,o);l&&(i=d2(l,a.forward))}else{const l=yy(o,r);l&&(i=d2(s.inverse,l))}return i&&(Zy(n),Zy(e),Rh(n,e,i)),i}function d2(n,e){return function(t,r,i,s){return r=n(t,r,i,s),e(r,r,i,s)}}function Gm(n,e){const t=Bn(n),r=Bn(e);return GI(t,r)}function jp(n,e,t){const r=Gm(e,t);if(!r){const i=Bn(e).getCode(),s=Bn(t).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(n,void 0,n.length)}function HS(n,e){return n}function hl(n,e){return zS&&!Yy(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(zS=!1,DO("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function zO(n,e){return n}function Ao(n,e){return n}function k4(n,e,t){return function(r){let i,s;if(n.canWrapX()){const a=n.getExtent(),o=tn(a);r=r.slice(0),s=OO(r,n,o),s&&(r[0]=r[0]-s*o),r[0]=Yn(r[0],a[0],a[2]),r[1]=Yn(r[1],a[1],a[3]),i=t(r)}else i=t(r);return s&&e.canWrapX()&&(i[0]+=s*tn(e.getExtent())),i}}function HB(){$S(S4),$S(I4),$B(I4,S4,EB,wB)}HB();new Array(6);function Ka(){return[1,0,0,1,0,0]}function KB(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function $r(n,e){const t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function Vo(n,e,t,r,i,s,a,o){const l=Math.sin(s),u=Math.cos(s);return n[0]=r*u,n[1]=i*l,n[2]=-r*l,n[3]=i*u,n[4]=a*r*u-o*r*l+e,n[5]=a*i*l+o*i*u+t,n}function $O(n,e){const t=YB(e);Cn(t!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],a=e[3],o=e[4],l=e[5];return n[0]=a/t,n[1]=-i/t,n[2]=-s/t,n[3]=r/t,n[4]=(s*l-a*o)/t,n[5]=-(r*l-i*o)/t,n}function YB(n){return n[0]*n[3]-n[1]*n[2]}const XB=[1e5,1e5,1e5,1e5,2,2];function qB(n){return"matrix("+n.join(", ")+")"}function KS(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function ZB(n,e){const t=KS(n),r=KS(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*XB[i])!==0)return!1;return!0}function $c(n,e,t,r,i,s,a){s=s||[],a=a||2;let o=0;for(let l=e;l<t;l+=r){const u=n[l],h=n[l+1];s[o++]=i[0]*u+i[2]*h+i[4],s[o++]=i[1]*u+i[3]*h+i[5];for(let f=2;f<a;f++)s[o++]=n[l+f]}return s&&s.length!=o&&(s.length=o),s}function WO(n,e,t,r,i,s,a){a=a||[];const o=Math.cos(i),l=Math.sin(i),u=s[0],h=s[1];let f=0;for(let g=e;g<t;g+=r){const p=n[g]-u,E=n[g+1]-h;a[f++]=u+p*o-E*l,a[f++]=h+p*l+E*o;for(let x=g+2;x<g+r;++x)a[f++]=n[x]}return a&&a.length!=f&&(a.length=f),a}function QB(n,e,t,r,i,s,a,o){o=o||[];const l=a[0],u=a[1];let h=0;for(let f=e;f<t;f+=r){const g=n[f]-l,p=n[f+1]-u;o[h++]=l+i*g,o[h++]=u+s*p;for(let E=f+2;E<f+r;++E)o[h++]=n[E]}return o&&o.length!=h&&(o.length=h),o}function JB(n,e,t,r,i,s,a){a=a||[];let o=0;for(let l=e;l<t;l+=r){a[o++]=n[l]+i,a[o++]=n[l+1]+s;for(let u=l+2;u<l+r;++u)a[o++]=n[u]}return a&&a.length!=o&&(a.length=o),a}const M4=Ka(),eU=[NaN,NaN];class HO extends Ho{constructor(){super(),this.extent_=Xs(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=wO((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ft()}closestPointXY(e,t,r,i){return Ft()}containsXY(e,t){return this.closestPointXY(e,t,eU,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ft()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Op(t),this.extentRevision_=this.getRevision()}return fB(this.extent_,e)}rotate(e,t){Ft()}scale(e,t,r){Ft()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ft()}getType(){return Ft()}applyTransform(e){Ft()}intersectsExtent(e){return Ft()}translate(e,t){Ft()}transform(e,t){const r=Bn(e),i=r.getUnits()=="tile-pixels"?function(s,a,o){const l=r.getExtent(),u=r.getWorldExtent(),h=kr(u)/kr(l);Vo(M4,u[0],u[3],h,-h,0,0,0);const f=$c(s,0,s.length,o,M4,a),g=Gm(r,t);return g?g(f,f,o):f}:Gm(r,t);return this.applyTransform(i),this}}class Qh extends HO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return LI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ft()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=N4(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ft()}setLayout(e,t,r){let i;if(e)i=N4(e);else{for(let s=0;s<r;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=Jh(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();WO(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=jo(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();QB(i,0,i.length,s,e,t,r,i),this.changed()}}translate(e,t){const r=this.getFlatCoordinates();if(r){const i=this.getStride();JB(r,0,r.length,i,e,t,r),this.changed()}}}function Jh(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function N4(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function tU(n,e,t){const r=n.getFlatCoordinates();if(!r)return null;const i=n.getStride();return $c(r,0,r.length,i,e,t)}function L4(n,e,t,r,i,s,a){const o=n[e],l=n[e+1],u=n[t]-o,h=n[t+1]-l;let f;if(u===0&&h===0)f=e;else{const g=((i-o)*u+(s-l)*h)/(u*u+h*h);if(g>1)f=t;else if(g>0){for(let p=0;p<r;++p)a[p]=Us(n[e+p],n[t+p],g);a.length=r;return}else f=e}for(let g=0;g<r;++g)a[g]=n[f+g];a.length=r}function BI(n,e,t,r,i){let s=n[e],a=n[e+1];for(e+=r;e<t;e+=r){const o=n[e],l=n[e+1],u=yh(s,a,o,l);u>i&&(i=u),s=o,a=l}return i}function UI(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=BI(n,e,o,r,i),e=o}return i}function nU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];i=UI(n,e,o,r,i),e=o[o.length-1]}return i}function zI(n,e,t,r,i,s,a,o,l,u,h){if(e==t)return u;let f,g;if(i===0){if(g=yh(a,o,n[e],n[e+1]),g<u){for(f=0;f<r;++f)l[f]=n[e+f];return l.length=r,g}return u}h=h||[NaN,NaN];let p=e+r;for(;p<t;)if(L4(n,p-r,p,r,a,o,h),g=yh(a,o,h[0],h[1]),g<u){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(g)-Math.sqrt(u))/i|0,1);if(s&&(L4(n,t-r,e,r,a,o,h),g=yh(a,o,h[0],h[1]),g<u)){for(u=g,f=0;f<r;++f)l[f]=h[f];l.length=r}return u}function $I(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const p=t[f];u=zI(n,e,p,r,i,s,a,o,l,u,h),e=p}return u}function rU(n,e,t,r,i,s,a,o,l,u,h){h=h||[NaN,NaN];for(let f=0,g=t.length;f<g;++f){const p=t[f];u=$I(n,e,p,r,i,s,a,o,l,u,h),e=p[p.length-1]}return u}function iU(n,e,t,r){for(let i=0,s=t.length;i<s;++i)n[e++]=t[i];return e}function Cv(n,e,t,r){for(let i=0,s=t.length;i<s;++i){const a=t[i];for(let o=0;o<r;++o)n[e++]=a[o]}return e}function Vp(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Cv(n,e,t[a],r);i[s++]=l,e=l}return i.length=s,i}function KO(n,e,t,r,i){i=i||[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=Vp(n,e,t[a],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function Oc(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=e;a<t;a+=r)i[s++]=n.slice(a,a+r);return i.length=s,i}function Bm(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=Oc(n,e,l,r,i[s]),e=l}return i.length=s,i}function YS(n,e,t,r,i){i=i!==void 0?i:[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a];i[s++]=l.length===1&&l[0]===e?[]:Bm(n,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function Jy(n,e,t,r,i,s,a){let o,l;const u=(t-e)/r;if(u===1)o=e;else if(u===2)o=e,l=i;else if(u!==0){let h=n[e],f=n[e+1],g=0;const p=[0];for(let w=e+r;w<t;w+=r){const T=n[w],R=n[w+1];g+=Math.sqrt((T-h)*(T-h)+(R-f)*(R-f)),p.push(g),h=T,f=R}const E=i*g,x=iB(p,E);x<0?(l=(E-p[-x-2])/(p[-x-1]-p[-x-2]),o=e+(-x-2)*r):o=e+x*r}a=a>1?a:2,s=s||new Array(a);for(let h=0;h<a;++h)s[h]=o===void 0?NaN:l===void 0?n[o+h]:Us(n[o+h],n[o+r+h],l);return s}function XS(n,e,t,r,i,s){if(t==e)return null;let a;if(i<n[e+r-1])return s?(a=n.slice(e,e+r),a[r-1]=i,a):null;if(n[t-1]<i)return s?(a=n.slice(t-r,t),a[r-1]=i,a):null;if(i==n[e+r-1])return n.slice(e,e+r);let o=e/r,l=t/r;for(;o<l;){const g=o+l>>1;i<n[(g+1)*r-1]?l=g:o=g+1}const u=n[o*r-1];if(i==u)return n.slice((o-1)*r,(o-1)*r+r);const h=n[(o+1)*r-1],f=(i-u)/(h-u);a=[];for(let g=0;g<r-1;++g)a.push(Us(n[(o-1)*r+g],n[o*r+g],f));return a.push(i),a}function sU(n,e,t,r,i,s,a){if(a)return XS(n,e,t[t.length-1],r,i,s);let o;if(i<n[r-1])return s?(o=n.slice(0,r),o[r-1]=i,o):null;if(n[n.length-1]<i)return s?(o=n.slice(n.length-r),o[r-1]=i,o):null;for(let l=0,u=t.length;l<u;++l){const h=t[l];if(e!=h){if(i<n[e+r-1])return null;if(i<=n[h-1])return XS(n,e,h,r,i,!1);e=h}}return null}function aU(n,e,t,r,i){return!CO(i,function(a){return!hh(n,e,t,r,a[0],a[1])})}function hh(n,e,t,r,i,s){let a=0,o=n[t-r],l=n[t-r+1];for(;e<t;e+=r){const u=n[e],h=n[e+1];l<=s?h>s&&(u-o)*(s-l)-(i-o)*(h-l)>0&&a++:h<=s&&(u-o)*(s-l)-(i-o)*(h-l)<0&&a--,o=u,l=h}return a!==0}function WI(n,e,t,r,i,s){if(t.length===0||!hh(n,e,t[0],r,i,s))return!1;for(let a=1,o=t.length;a<o;++a)if(hh(n,t[a-1],t[a],r,i,s))return!1;return!0}function oU(n,e,t,r,i,s){if(t.length===0)return!1;for(let a=0,o=t.length;a<o;++a){const l=t[a];if(WI(n,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function YO(n,e,t,r,i){let s;for(e+=r;e<t;e+=r)if(s=i(n.slice(e-r,e),n.slice(e,e+r)),s)return s;return!1}function Pv(n,e,t,r,i,s){return s=s??bO(Xs(),n,e,t,r),Zi(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:YO(n,e,t,r,function(a,o){return gB(i,a,o)}):!1}function lU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){if(Pv(n,e,t[s],r,i))return!0;e=t[s]}return!1}function XO(n,e,t,r,i){return!!(Pv(n,e,t,r,i)||hh(n,e,t,r,i[0],i[1])||hh(n,e,t,r,i[0],i[3])||hh(n,e,t,r,i[2],i[1])||hh(n,e,t,r,i[2],i[3]))}function qO(n,e,t,r,i){if(!XO(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let s=1,a=t.length;s<a;++s)if(aU(n,t[s-1],t[s],r,i)&&!Pv(n,t[s-1],t[s],r,i))return!1;return!0}function cU(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(qO(n,e,o,r,i))return!0;e=o[o.length-1]}return!1}function HI(n,e,t,r){let i=n[e],s=n[e+1],a=0;for(let o=e+r;o<t;o+=r){const l=n[o],u=n[o+1];a+=Math.sqrt((l-i)*(l-i)+(u-s)*(u-s)),i=l,s=u}return a}function kv(n,e,t,r,i,s,a){const o=(t-e)/r;if(o<3){for(;e<t;e+=r)s[a++]=n[e],s[a++]=n[e+1];return a}const l=new Array(o);l[0]=1,l[o-1]=1;const u=[e,t-r];let h=0;for(;u.length>0;){const f=u.pop(),g=u.pop();let p=0;const E=n[g],x=n[g+1],w=n[f],T=n[f+1];for(let R=g+r;R<f;R+=r){const k=n[R],N=n[R+1],j=mB(k,N,E,x,w,T);j>p&&(h=R,p=j)}p>i&&(l[(h-e)/r]=1,g+r<h&&u.push(g,h),h+r<f&&u.push(h,f))}for(let f=0;f<o;++f)l[f]&&(s[a++]=n[e+f*r],s[a++]=n[e+f*r+1]);return a}function ZO(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=kv(n,e,h,r,i,s,a),o.push(a),e=h}return a}function Xu(n,e){return e*Math.round(n/e)}function uU(n,e,t,r,i,s,a){if(e==t)return a;let o=Xu(n[e],i),l=Xu(n[e+1],i);e+=r,s[a++]=o,s[a++]=l;let u,h;do if(u=Xu(n[e],i),h=Xu(n[e+1],i),e+=r,e==t)return s[a++]=u,s[a++]=h,a;while(u==o&&h==l);for(;e<t;){const f=Xu(n[e],i),g=Xu(n[e+1],i);if(e+=r,f==u&&g==h)continue;const p=u-o,E=h-l,x=f-o,w=g-l;if(p*w==E*x&&(p<0&&x<p||p==x||p>0&&x>p)&&(E<0&&w<E||E==w||E>0&&w>E)){u=f,h=g;continue}s[a++]=u,s[a++]=h,o=u,l=h,u=f,h=g}return s[a++]=u,s[a++]=h,a}function KI(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l];a=uU(n,e,h,r,i,s,a),o.push(a),e=h}return a}function hU(n,e,t,r,i,s,a,o){for(let l=0,u=t.length;l<u;++l){const h=t[l],f=[];a=KI(n,e,h,r,i,s,a,f),o.push(f),e=h[h.length-1]}return a}class Go extends Qh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){An(this.flatCoordinates,e),this.changed()}clone(){const e=new Go(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return YO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,XS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Jy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return HI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=kv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Go(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Pv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cv(this.flatCoordinates,0,e,this.stride),this.changed()}}let Qa=class QO extends Qh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new QO(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){const s=this.flatCoordinates,a=yh(e,t,s[0],s[1]);if(a<i){const o=this.stride;for(let l=0;l<o;++l)r[l]=s[l];return r.length=o,a}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return AO(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return NI(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=iU(this.flatCoordinates,0,e,this.stride),this.changed()}};const _a={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ch=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",dU=Ch.includes("safari")&&!Ch.includes("chrom");dU&&(Ch.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ch));const fU=Ch.includes("webkit")&&!Ch.includes("edge"),JO=Ch.includes("macintosh"),gU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Hs=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,YI=typeof Image<"u"&&Image.prototype.decode,eD=typeof createImageBitmap=="function",tD=(function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})(),pt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Hr(n,e,t,r){let i;return t&&t.length?i=t.shift():Hs?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}let f2;function ex(){return f2||(f2=Hr(1,1)),f2}function Mv(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function O4(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function mU(n){for(;n.lastChild;)n.lastChild.remove()}function pU(n,e){const t=n.childNodes;for(let r=0;;++r){const i=t[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){n.appendChild(s);continue}if(!s){n.removeChild(i),--r;continue}n.insertBefore(s,i)}}}function nD(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){const r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Dc(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}const XI=[NaN,NaN,NaN,0];let g2;function _U(){return g2||(g2=Hr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),g2}const yU=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,xU=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,vU=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,EU=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function N_(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function om(n){throw new Error('failed to parse "'+n+'" as color')}function rD(n){if(n.toLowerCase().startsWith("rgb")){const s=n.match(xU)||n.match(yU)||n.match(vU);if(s){const a=s[4],o=100/255;return[Yn(N_(s[1],o)+.5|0,0,255),Yn(N_(s[2],o)+.5|0,0,255),Yn(N_(s[3],o)+.5|0,0,255),a!==void 0?Yn(N_(a,100),0,1):1]}om(n)}if(n.startsWith("#")){if(EU.test(n)){const s=n.substring(1),a=s.length<=4?1:2,o=[0,0,0,255];for(let l=0,u=s.length;l<u;l+=a){let h=parseInt(s.substring(l,l+a),16);a===1&&(h+=h<<4),o[l/a]=h}return o[3]=o[3]/255,o}om(n)}const e=_U();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&om(n));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return rD(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=Dp(i[3]/255,3),i}function wU(n){return typeof n=="string"?n:ZI(n)}const SU=1024,bg={};let m2=0;function TU(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function p2(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function _2(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function y2(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function x2(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function D4(n){const e=y2(n[0]),t=y2(n[1]),r=y2(n[2]),i=x2(e*.222488403+t*.716873169+r*.06060791),s=500*(x2(e*.452247074+t*.399439023+r*.148375274)-i),a=200*(i-x2(e*.016863605+t*.117638439+r*.865350722)),o=Math.atan2(a,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+a*a),o<0?o+360:o,n[3]]}function IU(n){const e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=_2(e),s=_2(e+t/500*Math.cos(r)),a=_2(e-t/200*Math.sin(r)),o=p2(s*3.021973625-i*1.617392459-a*.404875592),l=p2(s*-.943766287+i*1.916279586+a*.027607165),u=p2(s*.069407491-i*.22898585+a*1.159737864);return[Yn(o+.5|0,0,255),Yn(l+.5|0,0,255),Yn(u+.5|0,0,255),n[3]]}function qI(n){if(n==="none")return XI;if(bg.hasOwnProperty(n))return bg[n];if(m2>=SU){let t=0;for(const r in bg)(t++&3)===0&&(delete bg[r],--m2)}const e=rD(n);e.length!==4&&om(n);for(const t of e)isNaN(t)&&om(n);return bg[n]=e,++m2,e}function Ph(n){return Array.isArray(n)?n:qI(n)}function ZI(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);const i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}class iD extends Np{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?pt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(zt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==pt.IDLE&&this.loader){this.state=pt.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;SO(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||eD&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=pt.LOADED}).catch(r=>{this.state=pt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function AU(n,e,t){const r=n;let i=!0,s=!1,a=!1;const o=[Wy(r,zt.LOAD,function(){a=!0,s||e()})];return r.src&&YI?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(a?e():t())})):o.push(Wy(r,zt.ERROR,t)),function(){i=!1,o.forEach(Wn)}}function RU(n,e){return new Promise((t,r)=>{function i(){a(),t(n)}function s(){a(),r(new Error("Image load error"))}function a(){n.removeEventListener("load",i),n.removeEventListener("error",s)}n.addEventListener("load",i),n.addEventListener("error",s)})}function sD(n,e){return e&&(n.src=e),n.src&&YI?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):RU(n)}function aD(n,e){return e&&(n.src=e),n.src&&YI&&eD?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):sD(n)}class bU{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){const i=v2(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){const i=v2(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,s){const a=v2(e,t,r),o=a in this.cache_;this.cache_[a]=i,s&&(i.getImageState()===pt.IDLE&&i.load(),i.getImageState()===pt.LOADING?i.ready().then(()=>{this.patternCache_[a]=ex().createPattern(i.getImage(1),"repeat")}):this.patternCache_[a]=ex().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function v2(n,e,t){const r=t?Ph(t):"null";return e+":"+n+":"+r}const ya=new bU;let Cg=null;class oD extends Np{constructor(e,t,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?pt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===pt.LOADED){Cg||(Cg=Hr(1,1,void 0,{willReadFrequently:!0})),Cg.drawImage(this.image_,0,0);try{Cg.getImageData(0,0,1,1),this.tainted_=!1}catch{Cg=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(zt.CHANGE)}handleImageError_(){this.imageState_=pt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=pt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],r=Hr(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===pt.IDLE){this.image_||this.initializeImage_(),this.imageState_=pt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&sD(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==pt.LOADED)return;const t=this.image_,r=Hr(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=wU(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===pt.LOADED||this.imageState_===pt.ERROR)e();else{const t=()=>{(this.imageState_===pt.LOADED||this.imageState_===pt.ERROR)&&(this.removeEventListener(zt.CHANGE,t),e())};this.addEventListener(zt.CHANGE,t)}})),this.ready_}}function tx(n,e,t,r,i,s){let a=e===void 0?void 0:ya.get(e,t,i);return a||(a=new oD(n,n&&"src"in n?n.src||void 0:e,t,r,i),ya.set(e,t,i,a,s)),s&&a&&!ya.getPattern(e,t,i)&&ya.set(e,t,i,a,s),a}function Ro(n){return n?Array.isArray(n)?ZI(n):typeof n=="object"&&"src"in n?CU(n):n:null}function CU(n){if(!n.offset||!n.size)return ya.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ya.getPattern(e,void 0,n.color);if(t)return t;const r=ya.get(n.src,"anonymous",null);if(r.getImageState()!==pt.LOADED)return null;const i=Hr(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),tx(i.canvas,e,void 0,pt.LOADED,n.color,!0),ya.getPattern(e,void 0,n.color)}class lD{drawCustom(e,t,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const L_="ol-hidden",Gp="ol-unselectable",QI="ol-control",F4="ol-collapsed",PU=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),j4=["style","variant","weight","size","lineHeight","family"],qS={normal:400,bold:700},ZS=function(n){const e=n.match(PU);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=j4.length;r<i;++r){const s=e[r+1];s!==void 0&&(t[j4[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(t.weight))&&t.weight in qS&&(t.weight=qS[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t},cD="10px sans-serif",gs="#000",e0="round",El=[],wl=0,t0="round",Um=10,zm="#000",$m="center",nx="middle",dh=[0,0,0,0],Wm=1,lf=new Ho;let Pg=null,V4;const QS={},kU=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function MU(n,e,t){return`${n} ${e} 16px "${t}"`}const NU=(function(){let e,t;async function r(s){await t.ready;const a=await t.load(s);if(a.length===0)return!1;const o=ZS(s),l=o.families[0].toLowerCase(),u=o.weight;return a.some(h=>{const f=h.family.replace(/^['"]|['"]$/g,"").toLowerCase(),g=qS[h.weight]||h.weight;return f===l&&h.style===o.style&&g==u})}async function i(){await t.ready;let s=!0;const a=lf.getProperties(),o=Object.keys(a).filter(l=>a[l]<100);for(let l=o.length-1;l>=0;--l){const u=o[l];let h=a[u];h<100&&(await r(u)?(Mp(QS),lf.set(u,100)):(h+=10,lf.set(u,h,!0),h<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){t||(t=Hs?self.fonts:document.fonts);const a=ZS(s);if(!a)return;const o=a.families;let l=!1;for(const u of o){if(kU.has(u))continue;const h=MU(a.style,a.weight,u);lf.get(h)===void 0&&(lf.set(h,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),LU=(function(){let n;return function(e){let t=QS[e];if(t==null){if(Hs){const r=ZS(e),i=uD(e,"g");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);QS[e]=t}return t}})();function uD(n,e){return Pg||(Pg=Hr(1,1)),n!=V4&&(Pg.font=n,V4=Pg.font),Pg.measureText(e)}function hD(n,e){return uD(n,e).width}function G4(n,e,t){if(e in t)return t[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,hD(n,s)),0);return t[e]=r,r}function OU(n,e){const t=[],r=[],i=[];let s=0,a=0,o=0,l=0;for(let u=0,h=e.length;u<=h;u+=2){const f=e[u];if(f===`
`||u===h){s=Math.max(s,a),i.push(a),a=0,o+=l,l=0;continue}const g=e[u+1]||n.font,p=hD(g,f);t.push(p),a+=p;const E=LU(g);r.push(E),l=Math.max(l,E)}return{width:s,height:o,widths:t,heights:r,lineWidths:i}}function DU(n,e,t,r,i,s,a,o,l,u,h){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=f=>f.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,u),n.scale(h[0],h[1]),FU(r,n)):h[0]<0||h[1]<0?(n.translate(l,u),n.scale(h[0],h[1]),n.drawImage(r,i,s,a,o,0,0,a,o)):n.drawImage(r,i,s,a,o,l,u,a*h[0],o*h[1]),n.restore()}function FU(n,e){const t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}class jU extends lD{constructor(e,t,r,i,s,a,o){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?Dp(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=a,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ka()}drawImages_(e,t,r,i){if(!this.image_)return;const s=$c(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_,o=this.tmpLocalTransform_,l=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let h=0,f=s.length;h<f;h+=2){const g=s[h]-this.imageAnchorX_,p=s[h+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=g+this.imageAnchorX_,x=p+this.imageAnchorY_;Vo(o,E,x,1,1,u,-E,-x),a.save(),a.transform.apply(a,o),a.translate(E,x),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.restore()}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,g,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=$c(e,t,r,i,this.transform_,this.pixelCoordinates_),a=this.context_;let o=this.textRotation_;for(this.transformRotation_===0&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);t<r;t+=i){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.save(),a.translate(l-this.textOffsetX_,u-this.textOffsetY_),a.rotate(o),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.restore()):(this.textStrokeState_&&a.strokeText(this.text_,l,u),this.textFillState_&&a.fillText(this.text_,l,u))}}moveToLineTo_(e,t,r,i,s){const a=this.context_,o=$c(e,t,r,i,this.transform_,this.pixelCoordinates_);a.moveTo(o[0],o[1]);let l=o.length;s&&(l-=2);for(let u=2;u<l;u+=2)a.lineTo(o[u],o[u+1]);return s&&a.closePath(),r}drawRings_(e,t,r,i){for(let s=0,a=r.length;s<a;++s)t=this.moveToLineTo_(e,t,r[s],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=tU(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],s=Math.sqrt(r*r+i*i),a=this.context_;a.beginPath(),a.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Zi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const a=e.getEnds(),o=e.getStride();r.beginPath();for(let l=0,u=a.length;l<u;++l)s=this.moveToLineTo_(i,s,a[l],o,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Zi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),a=e.getStride();t.beginPath();for(let o=0,l=s.length;o<l;++o){const u=s[o];i=this.drawRings_(r,i,u,a)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),pu(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:$m;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:Ro(r||gs)}}if(!t)this.strokeState_=null;else{const r=t.getColor(),i=t.getLineCap(),s=t.getLineDash(),a=t.getLineDashOffset(),o=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),h=s||El;this.strokeState_={lineCap:i!==void 0?i:e0,lineDash:this.pixelRatio_===1?h:h.map(f=>f*this.pixelRatio_),lineDashOffset:(a||wl)*this.pixelRatio_,lineJoin:o!==void 0?o:t0,lineWidth:(l!==void 0?l:Wm)*this.pixelRatio_,miterLimit:u!==void 0?u:Um,strokeStyle:Ro(r||zm)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const a=e.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/r,a[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const p=t.getColor();this.textFillState_={fillStyle:Ro(p||gs)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const p=r.getColor(),E=r.getLineCap(),x=r.getLineDash(),w=r.getLineDashOffset(),T=r.getLineJoin(),R=r.getWidth(),k=r.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:e0,lineDash:x||El,lineDashOffset:w||wl,lineJoin:T!==void 0?T:t0,lineWidth:R!==void 0?R:Wm,miterLimit:k!==void 0?k:Um,strokeStyle:Ro(p||zm)}}const i=e.getFont(),s=e.getOffsetX(),a=e.getOffsetY(),o=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),h=e.getText(),f=e.getTextAlign(),g=e.getTextBaseline();this.textState_={font:i!==void 0?i:cD,textAlign:f!==void 0?f:$m,textBaseline:g!==void 0?g:nx},this.text_=h!==void 0?Array.isArray(h)?h.reduce((p,E,x)=>p+=x%2?" ":E,""):h:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=o!==void 0?o:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const VU=.5,dD={Point:KU,LineString:$U,Polygon:XU,MultiPoint:YU,MultiLineString:WU,MultiPolygon:HU,GeometryCollection:zU,Circle:BU};function GU(n,e){return parseInt(yn(n),10)-parseInt(yn(e),10)}function B4(n,e){const t=fD(n,e);return t*t}function fD(n,e){return VU*n/e}function BU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,a),l.drawCircle(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r)}}function U4(n,e,t,r,i,s,a,o){const l=[],u=t.getImage();if(u){let g=!0;const p=u.getImageState();p==pt.LOADED||p==pt.ERROR?g=!1:p==pt.IDLE&&u.load(),g&&l.push(u.ready())}const h=t.getFill();h&&h.loading()&&l.push(h.ready());const f=l.length>0;return f&&Promise.all(l).then(()=>i(null)),UU(n,e,t,r,s,a,o),f}function UU(n,e,t,r,i,s,a){const o=t.getGeometryFunction()(e);if(!o)return;const l=o.simplifyTransformed(r,i);if(t.getRenderer())gD(n,l,t,e,a);else{const h=dD[l.getType()];h(n,l,t,e,a,s)}}function gD(n,e,t,r,i){if(e.getType()=="GeometryCollection"){const a=e.getGeometries();for(let o=0,l=a.length;o<l;++o)gD(n,a[o],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function zU(n,e,t,r,i,s){const a=e.getGeometriesArray();let o,l;for(o=0,l=a.length;o<l;++o){const u=dD[a[o].getType()];u(n,a[o],t,r,i,s)}}function $U(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function WU(n,e,t,r,i){const s=t.getStroke();if(s){const o=n.getBuilder(t.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,r,i)}const a=t.getText();if(a&&a.getText()){const o=n.getBuilder(t.getZIndex(),"Text");o.setTextStyle(a),o.drawText(e,r,i)}}function HU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(a||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawMultiPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}function KU(n,e,t,r,i,s){const a=t.getImage(),o=t.getText(),l=o&&o.getText(),u=s&&a&&l?{}:void 0;if(a){if(a.getImageState()!=pt.LOADED)return;const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(a,u),h.drawPoint(e,r,i)}if(l){const h=n.getBuilder(t.getZIndex(),"Text");h.setTextStyle(o,u),h.drawText(e,r,i)}}function YU(n,e,t,r,i,s){const a=t.getImage(),o=a&&a.getOpacity()!==0,l=t.getText(),u=l&&l.getText(),h=s&&o&&u?{}:void 0;if(o){if(a.getImageState()!=pt.LOADED)return;const f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(a,h),f.drawMultiPoint(e,r,i)}if(u){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(l,h),f.drawText(e,r,i)}}function XU(n,e,t,r,i){const s=t.getFill(),a=t.getStroke();if(s||a){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,a),l.drawPolygon(e,r,i)}const o=t.getText();if(o&&o.getText()){const l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(o),l.drawText(e,r,i)}}let qU=!1;function ZU(n,e,t,r,i,s,a){const o=new XMLHttpRequest;o.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(o.responseType="arraybuffer"),o.withCredentials=qU,o.onload=function(l){if(!o.status||o.status>=200&&o.status<300){const u=e.getType();try{let h;u=="text"||u=="json"?h=o.responseText:u=="xml"?h=o.responseXML||o.responseText:u=="arraybuffer"&&(h=o.response),h?s(e.readFeatures(h,{extent:t,featureProjection:i}),e.readProjection(h)):a()}catch{a()}}else a()},o.onerror=a,o.send()}function z4(n,e){return function(t,r,i,s,a){ZU(n,e,t,r,i,(o,l)=>{this.addFeatures(o),s!==void 0&&s(o)},()=>{this.changed(),a!==void 0&&a()})}}function QU(n,e){return[[-1/0,-1/0,1/0,1/0]]}function mD(n,e,t,r){const i=[];let s=Xs();for(let a=0,o=t.length;a<o;++a){const l=t[a];s=LI(n,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function JI(n,e,t,r,i,s,a){let o,l,u,h,f,g,p;const E=i[s+1],x=[];for(let R=0,k=t.length;R<k;++R){const N=t[R];for(h=n[N-r],g=n[N-r+1],o=e;o<N;o+=r)f=n[o],p=n[o+1],(E<=g&&p<=E||g<=E&&E<=p)&&(u=(E-g)/(p-g)*(f-h)+h,x.push(u)),h=f,g=p}let w=NaN,T=-1/0;for(x.sort(yl),h=x[0],o=1,l=x.length;o<l;++o){f=x[o];const R=Math.abs(f-h);R>T&&(u=(h+f)/2,WI(n,e,t,r,u,E)&&(w=u,T=R)),h=f}return isNaN(w)&&(w=i[s]),a?(a.push(w,E,T),a):[w,E,T]}function pD(n,e,t,r,i){let s=[];for(let a=0,o=t.length;a<o;++a){const l=t[a];s=JI(n,e,l,r,i,2*a,s),e=l[l.length-1]}return s}function JU(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){const s=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=s}e+=r,t-=r}}function eA(n,e,t,r){let i=0,s=n[t-r],a=n[t-r+1];for(;e<t;e+=r){const o=n[e],l=n[e+1];i+=(o-s)*(l+a),s=o,a=l}return i===0?void 0:i>0}function tA(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=eA(n,e,o,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=o}return!0}function _D(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s){const o=t[s];if(!tA(n,e,o,r,i))return!1;o.length&&(e=o[o.length-1])}return!0}function rx(n,e,t,r,i){i=i!==void 0?i:!1;for(let s=0,a=t.length;s<a;++s){const o=t[s],l=eA(n,e,o,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&JU(n,e,o,r),e=o}return e}function JS(n,e,t,r,i){for(let s=0,a=t.length;s<a;++s)e=rx(n,e,t[s],r,i);return e}function ez(n,e){const t=[];let r=0,i=0,s;for(let a=0,o=e.length;a<o;++a){const l=e[a],u=eA(n,r,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(i,a+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=a+1,r=l}return t}class Ya extends HO{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Wn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(hn(e[t],zt.CHANGE,this.changed,this))}clone(){const e=new Ya(E2(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qh(this.getExtent(),e,t))return i;const s=this.geometries_;for(let a=0,o=s.length;a<o;++a)i=s[a].closestPointXY(e,t,r,i);return i}containsXY(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){Op(e);const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)RO(e,t[r].getExtent());return e}getGeometries(){return E2(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],r=this.geometries_;let i=!1;for(let s=0,a=r.length;s<a;++s){const o=r[s],l=o.getSimplifiedGeometry(e);t.push(l),l!==o&&(i=!0)}return i?new Ya(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=jo(this.getExtent()));const i=this.geometries_;for(let s=0,a=i.length;s<a;++s)i[s].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(E2(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function E2(n){return n.map(e=>e.clone())}function yD(n,e,t,r){let i=0;const s=n[t-r],a=n[t-r+1];let o=0,l=0;for(;e<t;e+=r){const u=n[e]-s,h=n[e+1]-a;i+=l*u-o*h,o=u,l=h}return i/2}function xD(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=yD(n,e,o,r),e=o}return i}function tz(n,e,t,r){let i=0;for(let s=0,a=t.length;s<a;++s){const o=t[s];i+=xD(n,e,o,r),e=o[o.length-1]}return i}class Hm extends Qh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Hm(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<qh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(BI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zI(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return yD(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=kv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Hm(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Jc extends Qh{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{const i=e,s=[],a=[];for(let l=0,u=i.length;l<u;++l){const h=i[l];An(s,h.getFlatCoordinates()),a.push(s.length)}const o=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(o,s),this.ends_=a}}appendLineString(e){An(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Jc(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$I(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,sU(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return Bm(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Go(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[];let s=0;for(let a=0,o=t.length;a<o;++a){const l=t[a],u=new Go(e.slice(s,l),r);i.push(u),s=l}return i}getLength(){const e=this.ends_;let t=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=HI(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let a=0,o=i.length;a<o;++a){const l=i[a],u=Jy(t,r,l,s,.5);An(e,u),r=l}return e}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=ZO(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new Jc(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return lU(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Vp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class T0 extends Qh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){An(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new T0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<qh(this.getExtent(),e,t))return i;const s=this.flatCoordinates,a=this.stride;for(let o=0,l=s.length;o<l;o+=a){const u=yh(e,t,s[o],s[o+1]);if(u<i){i=u;for(let h=0;h<a;++h)r[h]=s[o+h];r.length=a}}return i}getCoordinates(){return Oc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Qa(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let s=0,a=e.length;s<a;s+=r){const o=new Qa(e.slice(s,s+r),t);i.push(o)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,r=this.stride;for(let i=0,s=t.length;i<s;i+=r){const a=t[i],o=t[i+1];if(NI(e,a,o))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cv(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ja extends Qh{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?An(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Ja(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<qh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(UI(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$I(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return WI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return xD(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),rx(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Bm(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=jo(this.getExtent());this.flatInteriorPoint_=JI(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Qa(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Hm(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a],u=new Hm(t.slice(s,l),e);i.push(u),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;tA(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=rx(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=KI(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new Ja(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return qO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=Vp(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function $4(n){if(S0(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],r=n[2],i=n[3],s=[e,t,e,i,r,i,r,t,e,t];return new Ja(s,"XY",[s.length])}class n0 extends Qh{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],a=[];for(let o=0,l=i.length;o<l;++o){const u=i[o],h=s.length,f=u.getEnds();for(let g=0,p=f.length;g<p;++g)f[g]+=h;An(s,u.getFlatCoordinates()),a.push(f)}t=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=a}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;An(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,s=t.length;i<s;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();const r=new n0(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<qh(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nU(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return oU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return tz(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),JS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,YS(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=mD(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=pD(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new T0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;_D(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=JS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],r=[];return t.length=hU(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new n0(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let s=0,a=r.length;s<a;++s)r[s]-=t;return new Ja(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){const e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let a=0,o=r.length;a<o;++a){const l=r[a].slice(),u=l[l.length-1];if(s!==0)for(let f=0,g=l.length;f<g;++f)l[f]-=s;const h=new Ja(t.slice(s,u),e,l);i.push(h),s=u}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return cU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=KO(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const W4=Ka();class zs{constructor(e,t,r,i,s,a){this.styleFunction,this.extent_,this.id_=a,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?AO(this.flatCoordinates_):LI(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=jo(this.getExtent());this.flatInteriorPoints_=JI(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=ez(this.flatCoordinates_,this.ends_),t=mD(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=pD(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Jy(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const a=r[i],o=Jy(e,t,a,2,.5);An(this.flatMidpoints_,o),t=a}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Bn(e);const t=e.getExtent(),r=e.getWorldExtent();if(t&&r){const i=kr(r)/kr(t);Vo(W4,r[0],r[3],i,-i,0,0,0),$c(this.flatCoordinates_,0,this.flatCoordinates_.length,2,W4,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new zs(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=wO((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=kv(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=ZO(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=KI(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new zs(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}zs.prototype.getFlatCoordinates=zs.prototype.getOrientedFlatCoordinates;function vD(n,e,t=0,r=n.length-1,i=nz){for(;r>t;){if(r-t>600){const l=r-t+1,u=e-t+1,h=Math.log(l),f=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*f*(l-f)/l)*(u-l/2<0?-1:1),p=Math.max(t,Math.floor(e-u*f/l+g)),E=Math.min(r,Math.floor(e+(l-u)*f/l+g));vD(n,e,p,E,i)}const s=n[e];let a=t,o=r;for(kg(n,t,e),i(n[r],s)>0&&kg(n,t,r);a<o;){for(kg(n,a,o),a++,o--;i(n[a],s)<0;)a++;for(;i(n[o],s)>0;)o--}i(n[t],s)===0?kg(n,t,o):(o++,kg(n,o,r)),o<=e&&(t=o+1),e<=o&&(r=o-1)}}function kg(n,e,t){const r=n[e];n[e]=n[t],n[t]=r}function nz(n,e){return n<e?-1:n>e?1:0}let ED=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const r=[];if(!D_(e,t))return r;const i=this.toBBox,s=[];for(;t;){for(let a=0;a<t.children.length;a++){const o=t.children[a],l=t.leaf?i(o):o;D_(e,l)&&(t.leaf?r.push(o):S2(e,l)?this._all(o,r):s.push(o))}t=s.pop()}return r}collides(e){let t=this.data;if(!D_(e,t))return!1;const r=[];for(;t;){for(let i=0;i<t.children.length;i++){const s=t.children[i],a=t.leaf?this.toBBox(s):s;if(D_(e,a)){if(t.leaf||S2(e,a))return!0;r.push(s)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=cf([]),this}remove(e,t){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],a=[];let o,l,u;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],o=a.pop(),u=!0),r.leaf){const h=rz(e,r.children,t);if(h!==-1)return r.children.splice(h,1),s.push(r),this._condense(s),this}!u&&!r.leaf&&S2(r,i)?(s.push(r),a.push(o),o=0,l=r,r=r.children[0]):l?(o++,r=l.children[o],u=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){const s=r-t+1;let a=this._maxEntries,o;if(s<=a)return o=cf(e.slice(t,r+1)),Wd(o,this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),o=cf([]),o.leaf=!1,o.height=i;const l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));H4(e,t,r,u,this.compareMinX);for(let h=t;h<=r;h+=u){const f=Math.min(h+u-1,r);H4(e,h,f,l,this.compareMinY);for(let g=h;g<=f;g+=l){const p=Math.min(g+l-1,f);o.children.push(this._build(e,g,p,i-1))}}return Wd(o,this.toBBox),o}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let s=1/0,a=1/0,o;for(let l=0;l<t.children.length;l++){const u=t.children[l],h=w2(u),f=az(e,u)-h;f<a?(a=f,s=h<s?h:s,o=u):f===a&&h<s&&(s=h,o=u)}t=o||t.children[0]}return t}_insert(e,t,r){const i=r?e:this.toBBox(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),zg(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)}_split(e,t){const r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const a=this._chooseSplitIndex(r,s,i),o=cf(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,Wd(r,this.toBBox),Wd(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=cf([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Wd(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,s=1/0,a=1/0;for(let o=t;o<=r-t;o++){const l=Ug(e,0,o,this.toBBox),u=Ug(e,o,r,this.toBBox),h=oz(l,u),f=w2(l)+w2(u);h<s?(s=h,i=o,a=f<a?f:a):h===s&&f<a&&(a=f,i=o)}return i||r-t}_chooseSplitAxis(e,t,r){const i=e.leaf?this.compareMinX:iz,s=e.leaf?this.compareMinY:sz,a=this._allDistMargin(e,t,r,i),o=this._allDistMargin(e,t,r,s);a<o&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);const s=this.toBBox,a=Ug(e,0,t,s),o=Ug(e,r-t,r,s);let l=O_(a)+O_(o);for(let u=t;u<r-t;u++){const h=e.children[u];zg(a,e.leaf?s(h):h),l+=O_(a)}for(let u=r-t-1;u>=t;u--){const h=e.children[u];zg(o,e.leaf?s(h):h),l+=O_(o)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)zg(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():Wd(e[t],this.toBBox)}};function rz(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function Wd(n,e){Ug(n,0,n.children.length,e,n)}function Ug(n,e,t,r,i){i||(i=cf(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<t;s++){const a=n.children[s];zg(i,n.leaf?r(a):a)}return i}function zg(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function iz(n,e){return n.minX-e.minX}function sz(n,e){return n.minY-e.minY}function w2(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function O_(n){return n.maxX-n.minX+(n.maxY-n.minY)}function az(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function oz(n,e){const t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,s-r)}function S2(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function D_(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function cf(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function H4(n,e,t,r,i){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=r)continue;const a=e+Math.ceil((t-e)/r/2)*r;vD(n,a,e,t,i),s.push(e,a,a,t)}}class K4{constructor(e){this.rbush_=new ED(e),this.items_={}}insert(e,t){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[yn(t)]=r}load(e,t){const r=new Array(t.length);for(let i=0,s=t.length;i<s;i++){const a=e[i],o=t[i],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:o};r[i]=l,this.items_[yn(o)]=l}this.rbush_.load(r)}remove(e){const t=yn(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){const r=this.items_[yn(t)],i=[r.minX,r.minY,r.maxX,r.maxY];Zf(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,s=e.length;i<s;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return Ih(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qc(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class nA extends Ho{constructor(e){super(),this.projection=Bn(e.projection),this.attributions_=Y4(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Y4(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Y4(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}const la={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class dc extends Wo{constructor(e,t,r){super(e),this.feature=t,this.features=r}}class Bp extends nA{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=jm,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Cn(this.format_,"`format` must be set when `url` is set"),this.loader_=z4(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:QU;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new K4:null,this.loadedExtentsRtree_=new K4,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new pa(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=yn(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new dc(la.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof zs||(this.featureChangeKeys_[e]=[hn(t,zt.CHANGE,this.handleFeatureChange_,this),hn(t,qf.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){const i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof zs){const s=this.idIndex_[i];s instanceof zs?Array.isArray(s)?s.push(t):this.idIndex_[i]=[s,t]:r=!1}else r=!1}return r&&(Cn(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],r=[],i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s],l=yn(o);this.addToIndex_(l,o)&&r.push(o)}for(let s=0,a=r.length;s<a;s++){const o=r[s],l=yn(o);this.setupChangeEvents_(l,o);const u=o.getGeometry();if(u){const h=u.getExtent();t.push(h),i.push(o)}else this.nullGeometryFeatures_[l]=o}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(la.ADDFEATURE))for(let s=0,a=r.length;s<a;s++)this.dispatchEvent(new dc(la.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(la.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(la.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(fs.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(fs.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(Wn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new dc(la.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof zs||s.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof zs||i.intersectsExtent(e)){const s=t(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ih(this.nullGeometryFeatures_)||An(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=MO(e,t);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const r=e[0],i=e[1];let s=null;const a=[NaN,NaN];let o=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Fm,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const h=u.getGeometry(),f=o;if(o=h instanceof zs?0:h.closestPointXY(r,i,a,o),o<f){s=u;const g=Math.sqrt(o);l[0]=r-g,l[1]=i-g,l[2]=r+g,l[3]=i+g}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,r=yn(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{const a=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(a,t)):this.featuresRtree_&&this.featuresRtree_.update(a,t)}const s=t.getId();if(s!==void 0){const a=s.toString();this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new dc(la.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:yn(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ih(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,t,r);for(let a=0,o=s.length;a<o;++a){const l=s[a];i.forEachInExtent(l,function(h){return Nc(h.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new dc(la.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,h=>{--this.loadingExtentsCount_,this.dispatchEvent(new dc(la.FEATURESLOADEND,void 0,h))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new dc(la.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(Zf(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=yn(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(Wn),delete this.featureChangeKeys_[t];const i=e.getId();if(i!==void 0){const s=i.toString(),a=this.idIndex_[s];a===e?delete this.idIndex_[s]:Array.isArray(a)&&(a.splice(a.indexOf(e),1),a.length===1&&(this.idIndex_[s]=a[0]))}return delete this.uidIndex_[t],this.hasListener(la.REMOVEFEATURE)&&this.dispatchEvent(new dc(la.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){Cn(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(z4(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class ai{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new ai({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=tx(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===pt.IDLE&&t.load(),t.getImageState()===pt.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?yn(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ph(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class ys{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new ys({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function X4(n){return n[0]>0&&n[1]>0}function lz(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function xs(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}class Nv{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=xs(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Nv({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ft()}getImage(e){return Ft()}getHitDetectionImage(){return Ft()}getPixelRatio(e){return 1}getImageState(){return Ft()}getImageSize(){return Ft()}getOrigin(){return Ft()}getSize(){return Ft()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xs(e)}listenImageChange(e){Ft()}load(){Ft()}unlistenImageChange(e){Ft()}ready(){return Promise.resolve()}}class Lv extends Nv{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?pt.LOADING:pt.LOADED,this.imageState_===pt.LOADING&&this.ready().then(()=>this.imageState_=pt.LOADED),this.render()}clone(){const e=this.getScale(),t=new Lv({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let i=ya.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,a=Math.ceil(s.size*e),o=Hr(a,a);this.draw_(s,o,e),i=o.canvas,ya.set(r,null,null,new oD(i,void 0,null,pt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const B=i;i=s,s=B}const a=this.radius2_===void 0?this.points_:this.points_*2,o=2*Math.PI/a,l=s*Math.sin(o),u=Math.sqrt(s*s-l*l),h=i-u,f=Math.sqrt(l*l+h*h),g=f/l;if(e==="miter"&&g<=r)return g*t;const p=t/2/g,E=t/2*(h/f),w=Math.sqrt((i+p)*(i+p)+E*E)-i;if(this.radius2_===void 0||e==="bevel")return w*2;const T=i*Math.sin(o),R=Math.sqrt(i*i-T*T),k=s-R,j=Math.sqrt(T*T+k*k)/T;if(j<=r){const B=j*t/2-s-i;return 2*Math.max(w,B)}return w*2}createRenderOptions(){let e=e0,t=t0,r=0,i=null,s=0,a,o=0;this.stroke_&&(a=Ro(this.stroke_.getColor()??zm),o=this.stroke_.getWidth()??Wm,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??t0,e=this.stroke_.getLineCap()??e0,r=this.stroke_.getMiterLimit()??Um);const l=this.calculateLineJoinSize_(t,o,r),u=Math.max(this.radius,this.radius2_||0),h=Math.ceil(2*u+l);return{strokeStyle:a,strokeWidth:o,size:h,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=gs),t.fillStyle=Ro(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Ph(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Hr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,a=2*Math.PI/t;for(let o=0;o<t;o++){const l=s+o*a,u=o%2===0?r:i;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=gs,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Cl extends Lv{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Cl({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class ur{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=q4,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new ur({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=q4,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function cz(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Cn(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let T2=null;function wD(n,e){if(!T2){const t=new ai({color:"rgba(255,255,255,0.4)"}),r=new ys({color:"#3399CC",width:1.25});T2=[new ur({image:new Cl({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return T2}function q4(n){return n.getGeometry()}const uz="#333";class ed{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=xs(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new ai({color:uz}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ed({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof ai?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=xs(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const ti={ANIMATING:0,INTERACTING:1},Pt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},F_=[Pt.FILL],Fc=[Pt.STROKE],fh=[Pt.BEGIN_PATH],Z4=[Pt.CLOSE_PATH];class Up extends lD{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let a=s.length;for(let o=0,l=e.length;o<l;o+=t)i[0]=e[o],i[1]=e[o+1],Ah(r,i)&&(s[a++]=i[0],s[a++]=i[1]);return a}appendFlatLineCoordinates(e,t,r,i,s,a){const o=this.coordinates;let l=o.length;const u=this.getBufferedMaxExtent();a&&(t+=i);let h=e[t],f=e[t+1];const g=this.tmpCoordinate_;let p=!0,E,x,w;for(E=t+i;E<r;E+=i)g[0]=e[E],g[1]=e[E+1],w=VS(u,g),w!==x?(p&&(o[l++]=h,o[l++]=f,p=!1),o[l++]=g[0],o[l++]=g[1]):w===Jr.INTERSECTING?(o[l++]=g[0],o[l++]=g[1],p=!1):p=!0,h=g[0],f=g[1],x=w;return(s&&p||E===t+i)&&(o[l++]=h,o[l++]=f),l}drawCustomCoordinates_(e,t,r,i,s){for(let a=0,o=r.length;a<o;++a){const l=r[a],u=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,r,i,s){this.beginGeometry(e,t,s);const a=e.getType(),o=e.getStride(),l=this.coordinates.length;let u,h,f,g,p;switch(a){case"MultiPolygon":u=e.getOrientedFlatCoordinates(),g=[];const E=e.getEndss();p=0;for(let x=0,w=E.length;x<w;++x){const T=[];p=this.drawCustomCoordinates_(u,p,E[x],o,T),g.push(T)}this.instructions.push([Pt.CUSTOM,l,g,e,r,YS,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,g,e,i||r,YS,s]);break;case"Polygon":case"MultiLineString":f=[],u=a=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(u,0,e.getEnds(),o,f),this.instructions.push([Pt.CUSTOM,l,f,e,r,Bm,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,f,e,i||r,Bm,s]);break;case"LineString":case"Circle":u=e.getFlatCoordinates(),h=this.appendFlatLineCoordinates(u,0,u.length,o,!1,!1),this.instructions.push([Pt.CUSTOM,l,h,e,r,Oc,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,Oc,s]);break;case"MultiPoint":u=e.getFlatCoordinates(),h=this.appendFlatPointCoordinates(u,o),h>l&&(this.instructions.push([Pt.CUSTOM,l,h,e,r,Oc,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,Oc,s]));break;case"Point":u=e.getFlatCoordinates(),this.coordinates.push(u[0],u[1]),h=this.coordinates.length,this.instructions.push([Pt.CUSTOM,l,h,e,r,void 0,s]),this.hitDetectionInstructions.push([Pt.CUSTOM,l,h,e,i||r,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Pt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Pt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const r=e.length;let i,s,a=-1;for(t=0;t<r;++t)i=e[t],s=i[0],s==Pt.END_GEOMETRY?a=t:s==Pt.BEGIN_GEOMETRY&&(i[2]=t,aB(this.hitDetectionInstructions,a,t),a=-1)}fillStyleToState(e,t={}){if(e){const r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Ro(r||gs)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const r=e.getColor();t.strokeStyle=Ro(r||zm);const i=e.getLineCap();t.lineCap=i!==void 0?i:e0;const s=e.getLineDash();t.lineDash=s?s.slice():El;const a=e.getLineDashOffset();t.lineDashOffset=a||wl;const o=e.getLineJoin();t.lineJoin=o!==void 0?o:t0;const l=e.getWidth();t.lineWidth=l!==void 0?l:Wm;const u=e.getMiterLimit();t.miterLimit=u!==void 0?u:Um,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){const t=e.fillStyle,r=[Pt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Pt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,a=e.lineDashOffset,o=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!pu(e.currentLineDash,s)||e.currentLineDashOffset!=a||e.currentLineJoin!=o||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=a,e.currentLineJoin=o,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Pt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=IO(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Vm(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class hz extends Up{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ah(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=e.getStride(),a=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Pt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,u=i.length;l<u;l+=e.getStride())(!this.maxExtent||Ah(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const a=this.coordinates.length,o=this.appendFlatPointCoordinates(s,2);this.instructions.push([Pt.DRAW_IMAGE,a,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,a,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class dz extends Up{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){const s=this.coordinates.length,a=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),o=[Pt.MOVE_TO_LINE_TO,s,a];return this.instructions.push(o),this.hitDetectionInstructions.push(o),r}drawLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,El,wl],fh);const o=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(Fc),this.endGeometry(t)}drawMultiLineString(e,t,r){const i=this.state,s=i.strokeStyle,a=i.lineWidth;if(s===void 0||a===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,El,wl],fh);const o=e.getEnds(),l=e.getFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinates_(l,h,o[f],u);this.hitDetectionInstructions.push(Fc),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Fc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Fc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(fh)}}class Q4 extends Up{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){const s=this.state,a=s.fillStyle!==void 0,o=s.strokeStyle!==void 0,l=r.length;this.instructions.push(fh),this.hitDetectionInstructions.push(fh);for(let u=0;u<l;++u){const h=r[u],f=this.coordinates.length,g=this.appendFlatLineCoordinates(e,t,h,i,!0,!o),p=[Pt.MOVE_TO_LINE_TO,f,g];this.instructions.push(p),this.hitDetectionInstructions.push(p),o&&(this.instructions.push(Z4),this.hitDetectionInstructions.push(Z4)),t=h}return a&&(this.instructions.push(F_),this.hitDetectionInstructions.push(F_)),o&&(this.instructions.push(Fc),this.hitDetectionInstructions.push(Fc)),t}drawCircle(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,gs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,El,wl]);const o=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const h=[Pt.CIRCLE,u];this.instructions.push(fh,h),this.hitDetectionInstructions.push(fh,h),i.fillStyle!==void 0&&(this.instructions.push(F_),this.hitDetectionInstructions.push(F_)),i.strokeStyle!==void 0&&(this.instructions.push(Fc),this.hitDetectionInstructions.push(Fc)),this.endGeometry(t)}drawPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,gs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,El,wl]);const o=e.getEnds(),l=e.getOrientedFlatCoordinates(),u=e.getStride();this.drawFlatCoordinatess_(l,0,o,u),this.endGeometry(t)}drawMultiPolygon(e,t,r){const i=this.state,s=i.fillStyle,a=i.strokeStyle;if(s===void 0&&a===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_FILL_STYLE,gs]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Pt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,El,wl]);const o=e.getEndss(),l=e.getOrientedFlatCoordinates(),u=e.getStride();let h=0;for(let f=0,g=o.length;f<g;++f)h=this.drawFlatCoordinatess_(l,h,o[f],u);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Xu(t[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function fz(n,e,t,r,i){const s=[];let a=t,o=0,l=e.slice(t,2);for(;o<n&&a+i<r;){const[u,h]=l.slice(-2),f=e[a+i],g=e[a+i+1],p=Math.sqrt((f-u)*(f-u)+(g-h)*(g-h));if(o+=p,o>=n){const E=(n-o+p)/p,x=Us(u,f,E),w=Us(h,g,E);l.push(x,w),s.push(l),l=[x,w],o==n&&(a+=i),o=0}else if(o<n)l.push(e[a+i],e[a+i+1]),a+=i;else{const E=p-o,x=Us(u,f,E/p),w=Us(h,g,E/p);l.push(x,w),s.push(l),l=[x,w],o=0,a+=i}}return o>0&&s.push(l),s}function gz(n,e,t,r,i){let s=t,a=t,o=0,l=0,u=t,h,f,g,p,E,x,w,T,R,k;for(f=t;f<r;f+=i){const N=e[f],j=e[f+1];E!==void 0&&(R=N-E,k=j-x,p=Math.sqrt(R*R+k*k),w!==void 0&&(l+=g,h=Math.acos((w*R+T*k)/(g*p)),h>n&&(l>o&&(o=l,s=u,a=f),l=0,u=f-i)),g=p,w=R,T=k),E=N,x=j}return l+=p,l>o?[u,f]:[s,a]}const ix={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class mz extends Up{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[gs]={fillStyle:gs},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){const i=this.textFillState_,s=this.textStrokeState_,a=this.textState_;if(this.text_===""||!a||!i&&!s)return;const o=this.coordinates;let l=o.length;const u=e.getType();let h=null,f=e.getStride();if(a.placement==="line"&&(u=="LineString"||u=="MultiLineString"||u=="Polygon"||u=="MultiPolygon")){if(!Zi(this.maxExtent,e.getExtent()))return;let g;if(h=e.getFlatCoordinates(),u=="LineString")g=[h.length];else if(u=="MultiLineString")g=e.getEnds();else if(u=="Polygon")g=e.getEnds().slice(0,1);else if(u=="MultiPolygon"){const w=e.getEndss();g=[];for(let T=0,R=w.length;T<R;++T)g.push(w[T][0])}this.beginGeometry(e,t,r);const p=a.repeat,E=p?void 0:a.textAlign;let x=0;for(let w=0,T=g.length;w<T;++w){let R;p?R=fz(p*this.resolution,h,x,g[w],f):R=[h.slice(x,g[w])];for(let k=0,N=R.length;k<N;++k){const j=R[k];let B=0,P=j.length;if(E==null){const M=gz(a.maxAngle,j,0,j.length,2);B=M[0],P=M[1]}for(let M=B;M<P;M+=f)o.push(j[M],j[M+1]);const C=o.length;x=g[w],this.drawChars_(l,C),l=C}}this.endGeometry(t)}else{let g=a.overflow?null:[];switch(u){case"Point":case"MultiPoint":h=e.getFlatCoordinates();break;case"LineString":h=e.getFlatMidpoint();break;case"Circle":h=e.getCenter();break;case"MultiLineString":h=e.getFlatMidpoints(),f=2;break;case"Polygon":h=e.getFlatInteriorPoint(),a.overflow||g.push(h[2]/this.resolution),f=3;break;case"MultiPolygon":const N=e.getFlatInteriorPoints();h=[];for(let j=0,B=N.length;j<B;j+=3)a.overflow||g.push(N[j+2]/this.resolution),h.push(N[j],N[j+1]);if(h.length===0)return;f=2;break}const p=this.appendFlatPointCoordinates(h,f);if(p===l)return;if(g&&(p-l)/2!==h.length/f){let N=l/2;g=g.filter((j,B)=>{const P=o[(N+B)*2]===h[B*f]&&o[(N+B)*2+1]===h[B*f+1];return P||--N,P})}this.saveTextStates_();const E=a.backgroundFill?this.createFill(this.fillStyleToState(a.backgroundFill)):null,x=a.backgroundStroke?this.createStroke(this.strokeStyleToState(a.backgroundStroke)):null;this.beginGeometry(e,t,r);let w=a.padding;if(w!=dh&&(a.scale[0]<0||a.scale[1]<0)){let N=a.padding[0],j=a.padding[1],B=a.padding[2],P=a.padding[3];a.scale[0]<0&&(j=-j,P=-P),a.scale[1]<0&&(N=-N,B=-B),w=[N,j,B,P]}const T=this.pixelRatio;this.instructions.push([Pt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,w==dh?dh:w.map(function(N){return N*T}),E,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]);const R=1/T,k=E?E.slice(0):null;k&&(k[1]=gs),this.hitDetectionInstructions.push([Pt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,this.declutterMode_,this.declutterImageWithText_,w,k,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?gs:this.fillKey_,this.textOffsetX_,this.textOffsetY_,g]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||$m,justify:t.justify,textBaseline:t.textBaseline||nx,scale:t.scale});const a=this.fillKey_;r&&(a in this.fillStates||(this.fillStates[a]={fillStyle:r.fillStyle}))}drawChars_(e,t){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=ix[i.textBaseline],h=this.textOffsetY_*l,f=this.text_,g=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Pt.DRAW_CHARS,e,t,u,i.overflow,o,i.maxAngle,l,h,s,g*l,f,a,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Pt.DRAW_CHARS,e,t,u,i.overflow,o&&gs,i.maxAngle,l,h,s,g*l,f,a,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,s;if(!e)this.text_="";else{const a=e.getFill();a?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Ro(a.getColor()||gs)):(i=null,this.textFillState_=i);const o=e.getStroke();if(!o)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const x=o.getLineDash(),w=o.getLineDashOffset(),T=o.getWidth(),R=o.getMiterLimit();s.lineCap=o.getLineCap()||e0,s.lineDash=x?x.slice():El,s.lineDashOffset=w===void 0?wl:w,s.lineJoin=o.getLineJoin()||t0,s.lineWidth=T===void 0?Wm:T,s.miterLimit=R===void 0?Um:R,s.strokeStyle=Ro(o.getColor()||zm)}r=this.textState_;const l=e.getFont()||cD;NU(l);const u=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||nx,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||dh,r.scale=u===void 0?[1,1]:u;const h=e.getOffsetX(),f=e.getOffsetY(),g=e.getRotateWithView(),p=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=h===void 0?0:h,this.textOffsetY_=f===void 0?0:f,this.textRotateWithView_=g===void 0?!1:g,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=E===void 0?0:E,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:yn(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+yn(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const pz={Circle:Q4,Default:Up,Image:hz,LineString:dz,Polygon:Q4,Text:mz};class _z{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const r=this.buildersByZIndex_[t];for(const i in r){const s=r[i].finish();e[t][i]=s}}return e}getBuilder(e,t){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[t];if(s===void 0){const a=pz[t];s=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=s}return s}}function yz(n,e,t,r,i,s,a,o,l,u,h,f,g=!0){let p=n[e],E=n[e+1],x=0,w=0,T=0,R=0;function k(){x=p,w=E,e+=r,p=n[e],E=n[e+1],R+=T,T=Math.sqrt((p-x)*(p-x)+(E-w)*(E-w))}do k();while(e<t-r&&R+T<s);let N=T===0?0:(s-R)/T;const j=Us(x,p,N),B=Us(w,E,N),P=e-r,C=R,M=s+o*l(u,i,h);for(;e<t-r&&R+T<M;)k();N=T===0?0:(M-R)/T;const F=Us(x,p,N),O=Us(w,E,N);let W=!1;if(g)if(f){const be=[j,B,F,O];WO(be,0,4,2,f,be,be),W=be[0]>be[2]}else W=j>F;const D=Math.PI,we=[],Ne=P+r===e;e=P,T=0,R=C,p=n[e],E=n[e+1];let Le;if(Ne){k(),Le=Math.atan2(E-w,p-x),W&&(Le+=Le>0?-D:D);const be=(F+j)/2,ce=(O+B)/2;return we[0]=[be,ce,(M-s)/2,Le,i],we}i=i.replace(/\n/g," ");for(let be=0,ce=i.length;be<ce;){k();let Re=Math.atan2(E-w,p-x);if(W&&(Re+=Re>0?-D:D),Le!==void 0){let ee=Re-Le;if(ee+=ee>D?-2*D:ee<-D?2*D:0,Math.abs(ee)>a)return null}Le=Re;const Ae=be;let ie=0;for(;be<ce;++be){const ee=W?ce-be-1:be,de=o*l(u,i[ee],h);if(e+r<t&&R+T<s+ie+de/2)break;ie+=de}if(be===Ae)continue;const V=W?i.substring(ce-Ae,ce-be):i.substring(Ae,be);N=T===0?0:(s+ie/2-R)/T;const re=Us(x,p,N),te=Us(w,E,N);we.push([re,te,ie/2,Re,V]),s+=ie}return we}class SD{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ex(),{get:(e,t)=>{if(typeof ex()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){const t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){const s=t[r];if(typeof s=="function"){s(e);continue}const a=t[++r];if(typeof e[s]=="function")e[s](...a);else{if(typeof a=="function"){e[s]=a(e);continue}e[s]=a}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Hd=Xs(),fc=[],cl=[],ul=[],gc=[];function J4(n){return n[3].declutterBox}const ek=new RegExp("[-----]");function I2(n,e){return e==="start"?e=ek.test(n)?"right":"left":e==="end"&&(e=ek.test(n)?"left":"right"),ix[e]}function xz(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function vz(n,e,t){return t%2===0&&(n+=e),n}class Ez{constructor(e,t,r,i,s){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ka(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new SD:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){const s=e+t+r+i;if(this.labels_[s])return this.labels_[s];const a=i?this.strokeStates[i]:null,o=r?this.fillStates[r]:null,l=this.textStates[t],u=this.pixelRatio,h=[l.scale[0]*u,l.scale[1]*u],f=l.justify?ix[l.justify]:I2(Array.isArray(e)?e[0]:e,l.textAlign||$m),g=i&&a.lineWidth?a.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(xz,[]),{width:E,height:x,widths:w,heights:T,lineWidths:R}=OU(l,p),k=E+g,N=[],j=(k+2)*h[0],B=(x+g)*h[1],P={width:j<0?Math.floor(j):Math.ceil(j),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:N};(h[0]!=1||h[1]!=1)&&N.push("scale",h),i&&(N.push("strokeStyle",a.strokeStyle),N.push("lineWidth",g),N.push("lineCap",a.lineCap),N.push("lineJoin",a.lineJoin),N.push("miterLimit",a.miterLimit),N.push("setLineDash",[a.lineDash]),N.push("lineDashOffset",a.lineDashOffset)),r&&N.push("fillStyle",o.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");const C=.5-f;let M=f*k+C*g;const F=[],O=[];let W=0,D=0,we=0,Ne=0,Le;for(let be=0,ce=p.length;be<ce;be+=2){const Re=p[be];if(Re===`
`){D+=W,W=0,M=f*k+C*g,++Ne;continue}const Ae=p[be+1]||l.font;Ae!==Le&&(i&&F.push("font",Ae),r&&O.push("font",Ae),Le=Ae),W=Math.max(W,T[we]);const ie=[Re,M+C*w[we]+f*(w[we]-R[Ne]),.5*(g+W)+D];M+=w[we],i&&F.push("strokeText",ie),r&&O.push("fillText",ie),++we}return Array.prototype.push.apply(N,F),Array.prototype.push.apply(N,O),this.labels_[s]=P,P}replayTextBackground_(e,t,r,i,s,a,o){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,t),a&&(this.alignAndScaleFill_=a[2],e.fillStyle=a[1],this.fill_(e)),o&&(this.setStrokeStyle_(e,o),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,s,a,o,l,u,h,f,g,p,E,x,w){o*=g[0],l*=g[1];let T=r-o,R=i-l;const k=s+u>e?e-u:s,N=a+h>t?t-h:a,j=E[3]+k*g[0]+E[1],B=E[0]+N*g[1]+E[2],P=T-E[3],C=R-E[0];(x||f!==0)&&(fc[0]=P,gc[0]=P,fc[1]=C,cl[1]=C,cl[0]=P+j,ul[0]=cl[0],ul[1]=C+B,gc[1]=ul[1]);let M;return f!==0?(M=Vo(Ka(),r,i,1,1,f,-r,-i),$r(M,fc),$r(M,cl),$r(M,ul),$r(M,gc),Qc(Math.min(fc[0],cl[0],ul[0],gc[0]),Math.min(fc[1],cl[1],ul[1],gc[1]),Math.max(fc[0],cl[0],ul[0],gc[0]),Math.max(fc[1],cl[1],ul[1],gc[1]),Hd)):Qc(Math.min(P,P+j),Math.min(C,C+B),Math.max(P,P+j),Math.max(C,C+B),Hd),p&&(T=Math.round(T),R=Math.round(R)),{drawImageX:T,drawImageY:R,drawImageW:k,drawImageH:N,originX:u,originY:h,declutterBox:{minX:Hd[0],minY:Hd[1],maxX:Hd[2],maxY:Hd[3],value:w},canvasTransform:M,scale:g}}replayImageOrLabel_(e,t,r,i,s,a,o){const l=!!(a||o),u=i.declutterBox,h=o?o[2]*i.scale[0]/2:0;return u.minX-h<=t[0]&&u.maxX+h>=0&&u.minY-h<=t[1]&&u.maxY+h>=0&&(l&&this.replayTextBackground_(e,fc,cl,ul,gc,a,o),DU(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const r=$r(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){const s=this.textStates[t],a=this.createLabel(e,t,i,r),o=this.strokeStates[r],l=this.pixelRatio,u=I2(Array.isArray(e)?e[0]:e,s.textAlign||$m),h=ix[s.textBaseline||nx],f=o&&o.lineWidth?o.lineWidth:0,g=a.width/l-2*s.scale[0],p=u*g+2*(.5-u)*f,E=h*a.height/l+2*(.5-h)*f;return{label:a,anchorX:p,anchorY:E}}execute_(e,t,r,i,s,a,o,l){const u=this.zIndexContext_;let h;this.pixelCoordinates_&&pu(r,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=$c(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),KB(this.renderedTransform_,r));let f=0;const g=i.length;let p=0,E,x,w,T,R,k,N,j,B,P,C,M,F,O=0,W=0;const D=this.coordinateCache_,we=this.viewRotation_,Ne=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Le={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:we},be=this.instructions!=i||this.overlaps?0:200;let ce,Re,Ae,ie;for(;f<g;){const V=i[f];switch(V[0]){case Pt.BEGIN_GEOMETRY:ce=V[1],ie=V[3],ce.getGeometry()?o!==void 0&&!Zi(o,ie.getExtent())?f=V[2]+1:++f:f=V[2],u&&(u.zIndex=V[4]);break;case Pt.BEGIN_PATH:O>be&&(this.fill_(e),O=0),W>be&&(e.stroke(),W=0),!O&&!W&&(e.beginPath(),R=NaN,k=NaN),++f;break;case Pt.CIRCLE:p=V[1];const te=h[p],ee=h[p+1],de=h[p+2],Oe=h[p+3],Se=de-te,Fe=Oe-ee,je=Math.sqrt(Se*Se+Fe*Fe);e.moveTo(te+je,ee),e.arc(te,ee,je,0,2*Math.PI,!0),++f;break;case Pt.CLOSE_PATH:e.closePath(),++f;break;case Pt.CUSTOM:p=V[1],E=V[2];const Qe=V[3],gt=V[4],_t=V[5];Le.geometry=Qe,Le.feature=ce,f in D||(D[f]=[]);const Lt=D[f];_t?_t(h,p,E,2,Lt):(Lt[0]=h[p],Lt[1]=h[p+1],Lt.length=2),u&&(u.zIndex=V[6]),gt(Lt,Le),++f;break;case Pt.DRAW_IMAGE:p=V[1],E=V[2],B=V[3],x=V[4],w=V[5];let nn=V[6];const Ut=V[7],De=V[8],Xt=V[9],Te=V[10];let ge=V[11];const b=V[12];let Et=V[13];T=V[14]||"declutter";const X=V[15];if(!B&&V.length>=20){P=V[19],C=V[20],M=V[21],F=V[22];const nr=this.drawLabelWithPointPlacement_(P,C,M,F);B=nr.label,V[3]=B;const rs=V[23];x=(nr.anchorX-rs)*this.pixelRatio,V[4]=x;const Fr=V[24];w=(nr.anchorY-Fr)*this.pixelRatio,V[5]=w,nn=B.height,V[6]=nn,Et=B.width,V[13]=Et}let Ot;V.length>25&&(Ot=V[25]);let ne,z,le;V.length>17?(ne=V[16],z=V[17],le=V[18]):(ne=dh,z=null,le=null),Te&&Ne?ge+=we:!Te&&!Ne&&(ge-=we);let $e=0;for(;p<E;p+=2){if(Ot&&Ot[$e++]<Et/this.pixelRatio)continue;const nr=this.calculateImageOrLabelDimensions_(B.width,B.height,h[p],h[p+1],Et,nn,x,w,De,Xt,ge,b,s,ne,!!z||!!le,ce),rs=[e,t,B,nr,Ut,z,le];if(l){let Fr,rr,jr;if(X){const on=E-p;if(!X[on]){X[on]={args:rs,declutterMode:T};continue}const hr=X[on];Fr=hr.args,rr=hr.declutterMode,delete X[on],jr=J4(Fr)}let Vr,Ar;if(Fr&&(rr!=="declutter"||!l.collides(jr))&&(Vr=!0),(T!=="declutter"||!l.collides(nr.declutterBox))&&(Ar=!0),rr==="declutter"&&T==="declutter"){const on=Vr&&Ar;Vr=on,Ar=on}Vr&&(rr!=="none"&&l.insert(jr),this.replayImageOrLabel_.apply(this,Fr)),Ar&&(T!=="none"&&l.insert(nr.declutterBox),this.replayImageOrLabel_.apply(this,rs))}else this.replayImageOrLabel_.apply(this,rs)}++f;break;case Pt.DRAW_CHARS:const Ie=V[1],Ze=V[2],ht=V[3],vt=V[4];F=V[5];const wt=V[6],bt=V[7],en=V[8];M=V[9];const Dr=V[10];P=V[11],Array.isArray(P)&&(P=P.reduce(vz,"")),C=V[12];const bs=[V[13],V[13]];T=V[14]||"declutter";const zi=V[15],$i=this.textStates[C],Ir=$i.font,ci=[$i.scale[0]*bt,$i.scale[1]*bt];let Tn;Ir in this.widths_?Tn=this.widths_[Ir]:(Tn={},this.widths_[Ir]=Tn);const Cs=HI(h,Ie,Ze,2),Ps=Math.abs(ci[0])*G4(Ir,P,Tn);if(vt||Ps<=Cs){const nr=this.textStates[C].textAlign,rs=(Cs-Ps)*I2(P,nr),Fr=yz(h,Ie,Ze,2,P,rs,wt,Math.abs(ci[0]),G4,Ir,Tn,Ne?0:this.viewRotation_,zi);e:if(Fr){const rr=[];let jr,Vr,Ar,on,hr;if(M)for(jr=0,Vr=Fr.length;jr<Vr;++jr){hr=Fr[jr],Ar=hr[4],on=this.createLabel(Ar,C,"",M),x=hr[2]+(ci[0]<0?-Dr:Dr),w=ht*on.height+(.5-ht)*2*Dr*ci[1]/ci[0]-en;const xr=this.calculateImageOrLabelDimensions_(on.width,on.height,hr[0],hr[1],on.width,on.height,x,w,0,0,hr[3],bs,!1,dh,!1,ce);if(l&&T==="declutter"&&l.collides(xr.declutterBox))break e;rr.push([e,t,on,xr,1,null,null])}if(F)for(jr=0,Vr=Fr.length;jr<Vr;++jr){hr=Fr[jr],Ar=hr[4],on=this.createLabel(Ar,C,F,""),x=hr[2],w=ht*on.height-en;const xr=this.calculateImageOrLabelDimensions_(on.width,on.height,hr[0],hr[1],on.width,on.height,x,w,0,0,hr[3],bs,!1,dh,!1,ce);if(l&&T==="declutter"&&l.collides(xr.declutterBox))break e;rr.push([e,t,on,xr,1,null,null])}l&&T!=="none"&&l.load(rr.map(J4));for(let xr=0,is=rr.length;xr<is;++xr)this.replayImageOrLabel_.apply(this,rr[xr])}}++f;break;case Pt.END_GEOMETRY:if(a!==void 0){ce=V[1];const nr=a(ce,ie,T);if(nr)return nr}++f;break;case Pt.FILL:be?O++:this.fill_(e),++f;break;case Pt.MOVE_TO_LINE_TO:for(p=V[1],E=V[2],Re=h[p],Ae=h[p+1],e.moveTo(Re,Ae),R=Re+.5|0,k=Ae+.5|0,p+=2;p<E;p+=2)Re=h[p],Ae=h[p+1],N=Re+.5|0,j=Ae+.5|0,(p==E-2||N!==R||j!==k)&&(e.lineTo(Re,Ae),R=N,k=j);++f;break;case Pt.SET_FILL_STYLE:this.alignAndScaleFill_=V[2],O&&(this.fill_(e),O=0,W&&(e.stroke(),W=0)),e.fillStyle=V[1],++f;break;case Pt.SET_STROKE_STYLE:W&&(e.stroke(),W=0),this.setStrokeStyle_(e,V),++f;break;case Pt.STROKE:be?W++:e.stroke(),++f;break;default:++f;break}}O&&this.fill_(e),W&&e.stroke()}execute(e,t,r,i,s,a){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,s,void 0,void 0,a)}executeHitDetection(e,t,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,s)}}const ih=["Polygon","Circle","LineString","Image","Text","Default"],TD=["Image","Text"],wz=ih.filter(n=>!TD.includes(n));class Sz{constructor(e,t,r,i,s,a,o){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ka(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,o)}clip(e,t){const r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const a in s){const o=s[a];i[a]=new Ez(this.resolution_,this.pixelRatio_,this.overlaps_,o,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const r=this.executorsByZIndex_[t];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,s,a){i=Math.round(i);const o=i*2+1,l=Vo(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Hr(o,o));const h=this.hitDetectionContext_;h.canvas.width!==o||h.canvas.height!==o?(h.canvas.width=o,h.canvas.height=o):u||h.clearRect(0,0,o,o);let f;this.renderBuffer_!==void 0&&(f=Xs(),am(f,e),Vm(f,t*(this.renderBuffer_+i),f));const g=Tz(i);let p;function E(j,B,P){const C=h.getImageData(0,0,o,o).data;for(let M=0,F=g.length;M<F;M++)if(C[g[M]]>0){if(!a||P==="none"||p!=="Image"&&p!=="Text"||a.includes(j)){const O=(g[M]-3)/4,W=i-O%o,D=i-(O/o|0),we=s(j,B,W*W+D*D);if(we)return we}h.clearRect(0,0,o,o);break}}const x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(yl);let w,T,R,k,N;for(w=x.length-1;w>=0;--w){const j=x[w].toString();for(R=this.executorsByZIndex_[j],T=ih.length-1;T>=0;--T)if(p=ih[T],k=R[p],k!==void 0&&(N=k.executeHitDetection(h,l,r,E,f),N))return N}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const r=t[0],i=t[1],s=t[2],a=t[3],o=[r,i,r,a,s,a,s,i];return $c(o,0,8,2,e,o),o}isEmpty(){return Ih(this.executorsByZIndex_)}execute(e,t,r,i,s,a,o){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(o?sB:yl),a=a||ih;const u=ih.length;for(let h=0,f=l.length;h<f;++h){const g=l[h].toString(),p=this.executorsByZIndex_[g];for(let E=0,x=a.length;E<x;++E){const w=a[E],T=p[w];if(T!==void 0){const R=o===null?void 0:T.getZIndexContext(),k=R?R.getContext():e,N=this.maxExtent_&&w!=="Image"&&w!=="Text";if(N&&(k.save(),this.clip(k,r)),!R||w==="Text"||w==="Image"?T.execute(k,t,r,i,s,o):R.pushFunction(j=>T.execute(j,t,r,i,s,o)),N&&k.restore(),R){R.offset();const j=l[h]*u+ih.indexOf(w);this.deferredZIndexContexts_[j]||(this.deferredZIndexContexts_[j]=[]),this.deferredZIndexContexts_[j].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(yl);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[r]].length=0}}const A2={};function Tz(n){if(A2[n]!==void 0)return A2[n];const e=n*2+1,t=n*n,r=new Array(t+1);for(let s=0;s<=n;++s)for(let a=0;a<=n;++a){const o=s*s+a*a;if(o>t)break;let l=r[o];l||(l=[],r[o]=l),l.push(((n+s)*e+(n+a))*4+3),s>0&&l.push(((n-s)*e+(n+a))*4+3),a>0&&(l.push(((n+s)*e+(n-a))*4+3),s>0&&l.push(((n-s)*e+(n-a))*4+3))}const i=[];for(let s=0,a=r.length;s<a;++s)r[s]&&i.push(...r[s]);return A2[n]=i,i}function tk(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}let zp=class ID extends Nv{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const a=e.img!==void 0?e.img:null;let o=e.src;Cn(!(o!==void 0&&a),"`image` and `src` cannot be provided at the same time"),(o===void 0||o.length===0)&&a&&(o=a.src||yn(a)),Cn(o!==void 0&&o.length>0,"A defined and non-empty `src` or `image` must be provided"),Cn(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=pt.IDLE:a!==void 0&&("complete"in a?a.complete?l=a.src?pt.LOADED:pt.IDLE:l=pt.LOADING:l=pt.LOADED),this.color_=e.color!==void 0?Ph(e.color):null,this.iconImage_=tx(a,o,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let u,h;if(e.size)[u,h]=e.size;else{const f=this.getImage(1);if(f.width&&f.height)u=f.width,h=f.height;else if(f instanceof HTMLImageElement){this.initialOptions_=e;const g=()=>{if(this.unlistenImageChange(g),!this.initialOptions_)return;const p=this.iconImage_.getSize();this.setScale(tk(p[0],p[1],e.width,e.height))};this.listenImageChange(g);return}}u!==void 0&&this.setScale(tk(u,h,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new ID({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=tx(null,e,this.crossOrigin_,pt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==pt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==pt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(zt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(zt.CHANGE,e)}ready(){return this.iconImage_.ready()}};const To=.5;function Iz(n,e,t,r,i,s,a,o,l){const u=i,h=n[0]*To,f=n[1]*To,g=Hr(h,f);g.imageSmoothingEnabled=!1;const p=g.canvas,E=new jU(g,To,i,null,a,o,null),x=t.length,w=Math.floor((256*256*256-1)/x),T={};for(let k=1;k<=x;++k){const N=t[k-1],j=N.getStyleFunction()||r;if(!j)continue;let B=j(N,s);if(!B)continue;Array.isArray(B)||(B=[B]);const C=(k*w).toString(16).padStart(7,"#00000");for(let M=0,F=B.length;M<F;++M){const O=B[M],W=O.getGeometryFunction()(N);if(!W||!Zi(u,W.getExtent()))continue;const D=O.clone(),we=D.getFill();we&&we.setColor(C);const Ne=D.getStroke();Ne&&(Ne.setColor(C),Ne.setLineDash(null)),D.setText(void 0);const Le=O.getImage();if(Le){const Ae=Le.getImageSize();if(!Ae)continue;const ie=Hr(Ae[0],Ae[1],void 0,{alpha:!1}),V=ie.canvas;ie.fillStyle=C,ie.fillRect(0,0,V.width,V.height),D.setImage(new zp({img:V,anchor:Le.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Le.getOrigin(),opacity:1,size:Le.getSize(),scale:Le.getScale(),rotation:Le.getRotation(),rotateWithView:Le.getRotateWithView()}))}const be=D.getZIndex()||0;let ce=T[be];ce||(ce={},T[be]=ce,ce.Polygon=[],ce.Circle=[],ce.LineString=[],ce.Point=[]);const Re=W.getType();if(Re==="GeometryCollection"){const Ae=W.getGeometriesArrayRecursive();for(let ie=0,V=Ae.length;ie<V;++ie){const re=Ae[ie];ce[re.getType().replace("Multi","")].push(re,D)}}else ce[Re.replace("Multi","")].push(W,D)}}const R=Object.keys(T).map(Number).sort(yl);for(let k=0,N=R.length;k<N;++k){const j=T[R[k]];for(const B in j){const P=j[B];for(let C=0,M=P.length;C<M;C+=2){E.setStyle(P[C+1]);for(let F=0,O=e.length;F<O;++F)E.setTransform(e[F]),E.drawGeometry(P[C])}}}return g.getImageData(0,0,p.width,p.height)}function Az(n,e,t){const r=[];if(t){const i=Math.floor(Math.round(n[0])*To),s=Math.floor(Math.round(n[1])*To),a=(Yn(i,0,t.width-1)+Yn(s,0,t.height-1)*t.width)*4,o=t.data[a],l=t.data[a+1],h=t.data[a+2]+256*(l+256*o),f=Math.floor((256*256*256-1)/e.length);h&&h%f===0&&r.push(e[h/f-1])}return r}class AD extends Wo{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}}const Rz=5;class bz extends Lp{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Rz}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ft()}getData(e){return null}prepareFrame(e){return Ft()}renderFrame(e,t){return Ft()}forEachFeatureAtCoordinate(e,t,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===pt.LOADED||t.getState()===pt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=pt.LOADED&&t!=pt.ERROR&&e.addEventListener(zt.CHANGE,this.boundHandleImageChange_),t==pt.IDLE&&(e.load(),t=e.getState()),t==pt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const nk=[];let uf=null;function Cz(){uf=Hr(1,1,void 0,{willReadFrequently:!0})}class rA extends bz{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ka(),this.pixelTransform=Ka(),this.inversePixelTransform=Ka(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){uf||Cz(),uf.clearRect(0,0,1,1);let i;try{uf.drawImage(e,t,r,1,1,0,0,1,1),i=uf.getImageData(0,0,1,1).data}catch{return uf=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){const i=this.getLayer().getClassName();let s,a;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&pu(Ph(e.style.backgroundColor),Ph(r)))){const o=e.firstElementChild;Dc(o)&&(a=o.getContext("2d"))}if(a&&ZB(a.canvas.style.transform,t)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=Hs?nD():document.createElement("div"),s.className=i;let o=s.style;o.position="absolute",o.width="100%",o.height="100%",a=Hr();const l=a.canvas;s.appendChild(l),o=l.style,o.position="absolute",o.left="0",o.transformOrigin="top left",this.container=s,this.context=a}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){const i=Zh(r),s=Iv(r),a=Tv(r),o=Sv(r);$r(t.coordinateToPixelTransform,i),$r(t.coordinateToPixelTransform,s),$r(t.coordinateToPixelTransform,a),$r(t.coordinateToPixelTransform,o);const l=this.inversePixelTransform;$r(l,i),$r(l,s),$r(l,a),$r(l,o),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.clip()}prepareContainer(e,t){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,a=e.pixelRatio,o=Math.round(tn(r)/i*a),l=Math.round(kr(r)/i*a);Vo(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/a,1/a,s,-o/2,-l/2),$O(this.inversePixelTransform,this.pixelTransform);const u=qB(this.pixelTransform);if(this.useContainer(t,u,this.getBackground(e)),!this.containerReused){const h=this.context.canvas;h.width!=o||h.height!=l?(h.width=o,h.height=l):this.context.clearRect(0,0,o,l),u!==h.style.transform&&(h.style.transform=u)}}dispatchRenderEvent_(e,t,r){const i=this.getLayer();if(i.hasListener(e)){const s=new AD(e,this.inversePixelTransform,r,t);i.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(_a.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(_a.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new SD),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(_a.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(_a.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,s,a,o){const l=s/2,u=a/2,h=i/t,f=-h,g=-e[0]+o,p=-e[1];return Vo(this.tempTransform,l,u,h,f,-r,g,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class Pz extends rA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Xs(),this.wrappedRenderedExtent_=Xs(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){const i=t.extent,s=t.viewState,a=s.center,o=s.resolution,l=s.projection,u=s.rotation,h=l.getExtent(),f=this.getLayer().getSource(),g=this.getLayer().getDeclutter(),p=t.pixelRatio,E=t.viewHints,x=!(E[ti.ANIMATING]||E[ti.INTERACTING]),w=this.context,T=Math.round(tn(i)/o*p),R=Math.round(kr(i)/o*p),k=f.getWrapX()&&l.canWrapX(),N=k?tn(h):null,j=k?Math.ceil((i[2]-h[2])/N)+1:1;let B=k?Math.floor((i[0]-h[0])/N):0;do{let P=this.getRenderTransform(a,o,0,p,T,R,B*N);t.declutter&&(P=P.slice(0)),e.execute(w,[w.canvas.width,w.canvas.height],P,u,x,r===void 0?ih:r?TD:wz,r?g&&t.declutter[g]:void 0)}while(++B<j)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Hr(this.context.canvas.width,this.context.canvas.height,nk))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Mv(this.context),nk.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,t);const s=this.context,a=this.replayGroup_;let o=a&&!a.isEmpty();if(!o&&!(this.getLayer().hasListener(_a.PRERENDER)||this.getLayer().hasListener(_a.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,o&&r.extent&&this.clipping){const l=Ao(r.extent);o=Zi(l,e.extent),this.clipped_=o&&!Nc(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return o&&this.renderWorlds(a,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,a=this.renderedRotation_,o=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),h=[],f=r[0]*To,g=r[1]*To;h.push(this.getRenderTransform(i,s,a,To,f,g,0).slice());const p=u.getSource(),E=o.getExtent();if(p.getWrapX()&&o.canWrapX()&&!Nc(E,l)){let x=l[0];const w=tn(E);let T=0,R;for(;x<E[0];)--T,R=w*T,h.push(this.getRenderTransform(i,s,a,To,f,g,R).slice()),x+=w;for(T=0,x=l[2];x>E[2];)++T,R=w*T,h.push(this.getRenderTransform(i,s,a,To,f,g,R).slice()),x-=w}this.hitDetectionImageData_=Iz(r,h,this.renderedFeatures_,u.getStyleFunction(),l,s,a,B4(s,this.renderedPixelRatio_))}t(Az(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,s){if(!this.replayGroup_)return;const a=t.viewState.resolution,o=t.viewState.rotation,l=this.getLayer(),u={},h=function(g,p,E){const x=yn(g),w=u[x];if(w){if(w!==!0&&E<w.distanceSq){if(E===0)return u[x]=!0,s.splice(s.lastIndexOf(w),1),i(g,l,p);w.geometry=p,w.distanceSq=E}}else{if(E===0)return u[x]=!0,i(g,l,p);s.push(u[x]={feature:g,layer:l,geometry:p,distanceSq:E,callback:i})}},f=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,a,o,r,h,f?t.declutter?.[f]?.all().map(g=>g.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),r=t.getSource();if(!r)return!1;const i=e.viewHints[ti.ANIMATING],s=e.viewHints[ti.INTERACTING],a=t.getUpdateWhileAnimating(),o=t.getUpdateWhileInteracting();if(this.ready&&!a&&i||!o&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,h=u.projection,f=u.resolution,g=e.pixelRatio,p=t.getRevision(),E=t.getRenderBuffer();let x=t.getRenderOrder();x===void 0&&(x=GU);const w=u.center.slice(),T=Vm(l,E*f),R=T.slice(),k=[T.slice()],N=h.getExtent();if(r.getWrapX()&&h.canWrapX()&&!Nc(N,e.extent)){const we=tn(N),Ne=Math.max(tn(T)/2,we);T[0]=N[0]-Ne,T[2]=N[2]+Ne,LO(w,h);const Le=kO(k[0],h);Le[0]<N[0]&&Le[2]<N[2]?k.push([Le[0]+we,Le[1],Le[2]+we,Le[3]]):Le[0]>N[0]&&Le[2]>N[2]&&k.push([Le[0]-we,Le[1],Le[2]-we,Le[3]])}if(this.ready&&this.renderedResolution_==f&&this.renderedRevision_==p&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&Nc(this.wrappedRenderedExtent_,T))return pu(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const j=new _z(fD(f,g),T,f,g);let B;for(let we=0,Ne=k.length;we<Ne;++we)r.loadFeatures(k[we],f,h);const P=B4(f,g);let C=!0;const M=(we,Ne)=>{let Le;const be=we.getStyleFunction()||t.getStyleFunction();if(be&&(Le=be(we,f)),Le){const ce=this.renderFeature(we,P,Le,j,B,this.getLayer().getDeclutter(),Ne);C=C&&!ce}},F=zO(T),O=r.getFeaturesInExtent(F);x&&O.sort(x);for(let we=0,Ne=O.length;we<Ne;++we)M(O[we],we);this.renderedFeatures_=O,this.ready=C;const W=j.finish(),D=new Sz(T,f,g,r.getOverlaps(),W,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=f,this.renderedRevision_=p,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=T,this.renderedCenter_=w,this.renderedProjection_=h,this.renderedPixelRatio_=g,this.replayGroup_=D,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,s,a,o){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let u=0,h=r.length;u<h;++u)l=U4(i,e,r[u],t,this.boundHandleStyleImageChange_,s,a,o)||l;else l=U4(i,e,r,t,this.boundHandleStyleImageChange_,s,a,o);return l}}let td=0;const qi=1<<td++,cn=1<<td++,ms=1<<td++,Ga=1<<td++,kh=1<<td++,$g=1<<td++,j_=Math.pow(2,td)-1,iA={[qi]:"boolean",[cn]:"number",[ms]:"string",[Ga]:"color",[kh]:"number[]",[$g]:"size"},kz=Object.keys(iA).map(Number).sort(yl);function Mz(n){return n in iA}function Wg(n){const e=[];for(const t of kz)Hg(n,t)&&e.push(iA[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Hg(n,e){return(n&e)===e}function mc(n,e){return n===e}class zr{constructor(e,t){if(!Mz(e))throw new Error(`literal expressions must have a specific type, got ${Wg(e)}`);this.type=e,this.value=t}}class Nz{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}}function RD(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function wi(n,e,t){switch(typeof n){case"boolean":{if(mc(e,ms))return new zr(ms,n?"true":"false");if(!Hg(e,qi))throw new Error(`got a boolean, but expected ${Wg(e)}`);return new zr(qi,n)}case"number":{if(mc(e,$g))return new zr($g,xs(n));if(mc(e,qi))return new zr(qi,!!n);if(mc(e,ms))return new zr(ms,n.toString());if(!Hg(e,cn))throw new Error(`got a number, but expected ${Wg(e)}`);return new zr(cn,n)}case"string":{if(mc(e,Ga))return new zr(Ga,qI(n));if(mc(e,qi))return new zr(qi,!!n);if(!Hg(e,ms))throw new Error(`got a string, but expected ${Wg(e)}`);return new zr(ms,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return $z(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(mc(e,$g)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new zr($g,n)}if(mc(e,Ga)){if(n.length===3)return new zr(Ga,[...n,1]);if(n.length===4)return new zr(Ga,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Hg(e,kh))throw new Error(`got an array of numbers, but expected ${Wg(e)}`);return new zr(kh,n)}const Me={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Lz={[Me.Get]:Gt(Yt(1,1/0),rk),[Me.Var]:Gt(Yt(1,1),Oz),[Me.Has]:Gt(Yt(1,1/0),rk),[Me.Id]:Gt(Dz,Kd),[Me.Concat]:Gt(Yt(2,1/0),vn(ms)),[Me.GeometryType]:Gt(Fz,Kd),[Me.LineMetric]:Gt(Kd),[Me.Resolution]:Gt(R2,Kd),[Me.Zoom]:Gt(R2,Kd),[Me.Time]:Gt(R2,Kd),[Me.Any]:Gt(Yt(2,1/0),vn(qi)),[Me.All]:Gt(Yt(2,1/0),vn(qi)),[Me.Not]:Gt(Yt(1,1),vn(qi)),[Me.Equal]:Gt(Yt(2,2),vn(j_)),[Me.NotEqual]:Gt(Yt(2,2),vn(j_)),[Me.GreaterThan]:Gt(Yt(2,2),vn(cn)),[Me.GreaterThanOrEqualTo]:Gt(Yt(2,2),vn(cn)),[Me.LessThan]:Gt(Yt(2,2),vn(cn)),[Me.LessThanOrEqualTo]:Gt(Yt(2,2),vn(cn)),[Me.Multiply]:Gt(Yt(2,1/0),ik),[Me.Coalesce]:Gt(Yt(2,1/0),ik),[Me.Divide]:Gt(Yt(2,2),vn(cn)),[Me.Add]:Gt(Yt(2,1/0),vn(cn)),[Me.Subtract]:Gt(Yt(2,2),vn(cn)),[Me.Clamp]:Gt(Yt(3,3),vn(cn)),[Me.Mod]:Gt(Yt(2,2),vn(cn)),[Me.Pow]:Gt(Yt(2,2),vn(cn)),[Me.Abs]:Gt(Yt(1,1),vn(cn)),[Me.Floor]:Gt(Yt(1,1),vn(cn)),[Me.Ceil]:Gt(Yt(1,1),vn(cn)),[Me.Round]:Gt(Yt(1,1),vn(cn)),[Me.Sin]:Gt(Yt(1,1),vn(cn)),[Me.Cos]:Gt(Yt(1,1),vn(cn)),[Me.Atan]:Gt(Yt(1,2),vn(cn)),[Me.Sqrt]:Gt(Yt(1,1),vn(cn)),[Me.Match]:Gt(Yt(4,1/0),sk,Vz),[Me.Between]:Gt(Yt(3,3),vn(cn)),[Me.Interpolate]:Gt(Yt(6,1/0),sk,Gz),[Me.Case]:Gt(Yt(3,1/0),jz,Bz),[Me.In]:Gt(Yt(2,2),Uz),[Me.Number]:Gt(Yt(1,1/0),vn(j_)),[Me.String]:Gt(Yt(1,1/0),vn(j_)),[Me.Array]:Gt(Yt(1,1/0),vn(cn)),[Me.Color]:Gt(Yt(1,4),vn(cn)),[Me.Band]:Gt(Yt(1,3),vn(cn)),[Me.Palette]:Gt(Yt(2,2),zz),[Me.ToString]:Gt(Yt(1,1),vn(qi|cn|ms|Ga))};function rk(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=n[s+1];switch(typeof a){case"number":{i[s]=new zr(cn,a);break}case"string":{i[s]=new zr(ms,a);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${a}`)}s===0&&t.properties.add(String(a))}return i}function Oz(n,e,t){const r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new zr(ms,r)]}function Dz(n,e,t){t.featureId=!0}function Fz(n,e,t){t.geometryType=!0}function R2(n,e,t){t.mapState=!0}function Kd(n,e,t){const r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function Yt(n,e){return function(t,r,i){const s=t[0],a=t.length-1;if(n===e){if(a!==n){const o=n===1?"":"s";throw new Error(`expected ${n} argument${o} for ${s}, got ${a}`)}}else if(a<n||a>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${o} arguments for ${s}, got ${a}`)}}}function ik(n,e,t){const r=n.length-1,i=new Array(r);for(let s=0;s<r;++s){const a=wi(n[s+1],e,t);i[s]=a}return i}function vn(n){return function(e,t,r){const i=e.length-1,s=new Array(i);for(let a=0;a<i;++a){const o=wi(e[a+1],n,r);s[a]=o}return s}}function jz(n,e,t){const r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function sk(n,e,t){const r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Vz(n,e,t){const r=n.length-1,i=ms|cn|qi,s=wi(n[1],i,t),a=wi(n[n.length-1],e,t),o=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const u=wi(n[l+2],s.type,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of match expression: ${u.message}`)}try{const u=wi(n[l+3],a.type,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+2} of match expression: ${u.message}`)}}return[s,...o,a]}function Gz(n,e,t){const r=n[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new zr(cn,i);let a;try{a=wi(n[2],cn,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const o=new Array(n.length-3);for(let l=0;l<o.length;l+=2){try{const u=wi(n[l+3],cn,t);o[l]=u}catch(u){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${u.message}`)}try{const u=wi(n[l+4],e,t);o[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${u.message}`)}}return[s,a,...o]}function Bz(n,e,t){const r=wi(n[n.length-1],e,t),i=new Array(n.length-1);for(let s=0;s<i.length-1;s+=2){try{const a=wi(n[s+1],qi,t);i[s]=a}catch(a){throw new Error(`failed to parse argument ${s} of case expression: ${a.message}`)}try{const a=wi(n[s+2],r.type,t);i[s+1]=a}catch(a){throw new Error(`failed to parse argument ${s+1} of case expression: ${a.message}`)}}return i[i.length-1]=r,i}function Uz(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=ms}else i=cn;const s=new Array(r.length);for(let o=0;o<s.length;o++)try{const l=wi(r[o],i,t);s[o]=l}catch(l){throw new Error(`failed to parse haystack item ${o} for "in" expression: ${l.message}`)}return[wi(n[1],i,t),...s]}function zz(n,e,t){let r;try{r=wi(n[1],cn,t)}catch(a){throw new Error(`failed to parse first argument in palette expression: ${a.message}`)}const i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let a=0;a<s.length;a++){let o;try{o=wi(i[a],Ga,t)}catch(l){throw new Error(`failed to parse color at index ${a} in palette expression: ${l.message}`)}if(!(o instanceof zr))throw new Error(`the palette color at index ${a} must be a literal value`);s[a]=o}return[r,...s]}function Gt(...n){return function(e,t,r){const i=e[0];let s;for(let a=0;a<n.length;a++){const o=n[a](e,t,r);if(a==n.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new Nz(t,i,...s)}}function $z(n,e,t){const r=n[0],i=Lz[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function bD(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return bD(n.getGeometries()[0]);default:return""}}function CD(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Vl(n,e,t){const r=wi(n,e,t);return eo(r)}function eo(n,e){if(n instanceof zr){if(n.type===Ga&&typeof n.value=="string"){const r=qI(n.value);return function(){return r}}return function(){return n.value}}const t=n.operator;switch(t){case Me.Number:case Me.String:case Me.Coalesce:return Wz(n);case Me.Get:case Me.Var:case Me.Has:return Hz(n);case Me.Id:return r=>r.featureId;case Me.GeometryType:return r=>r.geometryType;case Me.Concat:{const r=n.args.map(i=>eo(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Me.Resolution:return r=>r.resolution;case Me.Any:case Me.All:case Me.Between:case Me.In:case Me.Not:return Yz(n);case Me.Equal:case Me.NotEqual:case Me.LessThan:case Me.LessThanOrEqualTo:case Me.GreaterThan:case Me.GreaterThanOrEqualTo:return Kz(n);case Me.Multiply:case Me.Divide:case Me.Add:case Me.Subtract:case Me.Clamp:case Me.Mod:case Me.Pow:case Me.Abs:case Me.Floor:case Me.Ceil:case Me.Round:case Me.Sin:case Me.Cos:case Me.Atan:case Me.Sqrt:return Xz(n);case Me.Case:return qz(n);case Me.Match:return Zz(n);case Me.Interpolate:return Qz(n);case Me.ToString:return Jz(n);default:throw new Error(`Unsupported operator ${t}`)}}function Wz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=eo(n.args[s]);switch(t){case Me.Coalesce:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o<"u"&&o!==null)return o}throw new Error("Expected one of the values to be non-null")};case Me.Number:case Me.String:return s=>{for(let a=0;a<r;++a){const o=i[a](s);if(typeof o===t)return o}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Hz(n,e){const r=n.args[0].value;switch(n.operator){case Me.Get:return i=>{const s=n.args;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;a=a[h]}return a};case Me.Var:return i=>i.variables[r];case Me.Has:return i=>{const s=n.args;if(!(r in i.properties))return!1;let a=i.properties[r];for(let o=1,l=s.length;o<l;++o){const h=s[o].value;if(!a||!Object.hasOwn(a,h))return!1;a=a[h]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Kz(n,e){const t=n.operator,r=eo(n.args[0]),i=eo(n.args[1]);switch(t){case Me.Equal:return s=>r(s)===i(s);case Me.NotEqual:return s=>r(s)!==i(s);case Me.LessThan:return s=>r(s)<i(s);case Me.LessThanOrEqualTo:return s=>r(s)<=i(s);case Me.GreaterThan:return s=>r(s)>i(s);case Me.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Yz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=eo(n.args[s]);switch(t){case Me.Any:return s=>{for(let a=0;a<r;++a)if(i[a](s))return!0;return!1};case Me.All:return s=>{for(let a=0;a<r;++a)if(!i[a](s))return!1;return!0};case Me.Between:return s=>{const a=i[0](s),o=i[1](s),l=i[2](s);return a>=o&&a<=l};case Me.In:return s=>{const a=i[0](s);for(let o=1;o<r;++o)if(a===i[o](s))return!0;return!1};case Me.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Xz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=eo(n.args[s]);switch(t){case Me.Multiply:return s=>{let a=1;for(let o=0;o<r;++o)a*=i[o](s);return a};case Me.Divide:return s=>i[0](s)/i[1](s);case Me.Add:return s=>{let a=0;for(let o=0;o<r;++o)a+=i[o](s);return a};case Me.Subtract:return s=>i[0](s)-i[1](s);case Me.Clamp:return s=>{const a=i[0](s),o=i[1](s);if(a<o)return o;const l=i[2](s);return a>l?l:a};case Me.Mod:return s=>i[0](s)%i[1](s);case Me.Pow:return s=>Math.pow(i[0](s),i[1](s));case Me.Abs:return s=>Math.abs(i[0](s));case Me.Floor:return s=>Math.floor(i[0](s));case Me.Ceil:return s=>Math.ceil(i[0](s));case Me.Round:return s=>Math.round(i[0](s));case Me.Sin:return s=>Math.sin(i[0](s));case Me.Cos:return s=>Math.cos(i[0](s));case Me.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Me.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function qz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=eo(n.args[i]);return i=>{for(let s=0;s<t-1;s+=2)if(r[s](i))return r[s+1](i);return r[t-1](i)}}function Zz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=eo(n.args[i]);return i=>{const s=r[0](i);for(let a=1;a<t-1;a+=2)if(s===r[a](i))return r[a+1](i);return r[t-1](i)}}function Qz(n,e){const t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=eo(n.args[i]);return i=>{const s=r[0](i),a=r[1](i);let o,l;for(let u=2;u<t;u+=2){const h=r[u](i);let f=r[u+1](i);const g=Array.isArray(f);if(g&&(f=TU(f)),h>=a)return u===2?f:g?e$(s,a,o,l,h,f):Kg(s,a,o,l,h,f);o=h,l=f}return l}}function Jz(n,e){const t=n.operator,r=n.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=eo(n.args[s]);switch(t){case Me.ToString:return s=>{const a=i[0](s);return n.args[0].type===Ga?ZI(a):a.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Kg(n,e,t,r,i,s){const a=i-t;if(a===0)return r;const o=e-t,l=n===1?o/a:(Math.pow(n,o)-1)/(Math.pow(n,a)-1);return r+l*(s-r)}function e$(n,e,t,r,i,s){if(i-t===0)return r;const o=D4(r),l=D4(s);let u=l[2]-o[2];u>180?u-=360:u<-180&&(u+=360);const h=[Kg(n,e,t,o[0],i,l[0]),Kg(n,e,t,o[1],i,l[1]),o[2]+Kg(n,e,t,0,i,u),Kg(n,e,t,r[3],i,s[3])];return IU(h)}function t$(n){return!0}function n$(n){const e=RD(),t=r$(n,e),r=CD();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const a=i.getId();a!==void 0?r.featureId=a:r.featureId=null}return e.geometryType&&(r.geometryType=bD(i.getGeometry())),t(r)}}function ak(n){const e=RD(),t=n.length,r=new Array(t);for(let a=0;a<t;++a)r[a]=eT(n[a],e);const i=CD(),s=new Array(t);return function(a,o){if(i.properties=a.getPropertiesInternal(),i.resolution=o,e.featureId){const u=a.getId();u!==void 0?i.featureId=u:i.featureId=null}let l=0;for(let u=0;u<t;++u){const h=r[u](i);h&&(s[l]=h,l+=1)}return s.length=l,s}}function r$(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i){const s=n[i],a="filter"in s?Vl(s.filter,qi,e):t$;let o;if(Array.isArray(s.style)){const l=s.style.length;o=new Array(l);for(let u=0;u<l;++u)o[u]=eT(s.style[u],e)}else o=[eT(s.style,e)];r[i]={filter:a,styles:o}}return function(i){const s=[];let a=!1;for(let o=0;o<t;++o){const l=r[o].filter;if(l(i)&&!(n[o].else&&a)){a=!0;for(const u of r[o].styles){const h=u(i);h&&s.push(h)}}}return s}}function eT(n,e){const t=Km(n,"",e),r=Ym(n,"",e),i=i$(n,e),s=s$(n,e),a=ps(n,"z-index",e);if(!t&&!r&&!i&&!s&&!Ih(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const o=new ur;return function(l){let u=!0;if(t){const h=t(l);h&&(u=!1),o.setFill(h)}if(r){const h=r(l);h&&(u=!1),o.setStroke(h)}if(i){const h=i(l);h&&(u=!1),o.setText(h)}if(s){const h=s(l);h&&(u=!1),o.setImage(h)}return a&&o.setZIndex(a(l)),u?null:o}}function Km(n,e,t){let r;if(e+"fill-pattern-src"in n)r=c$(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return s=>null;r=sA(n,e+"fill-color",t)}if(!r)return null;const i=new ai;return function(s){const a=r(s);return a===XI?null:(i.setColor(a),i)}}function Ym(n,e,t){const r=ps(n,e+"stroke-width",t),i=sA(n,e+"stroke-color",t);if(!r&&!i)return null;const s=dl(n,e+"stroke-line-cap",t),a=dl(n,e+"stroke-line-join",t),o=PD(n,e+"stroke-line-dash",t),l=ps(n,e+"stroke-line-dash-offset",t),u=ps(n,e+"stroke-miter-limit",t),h=new ys;return function(f){if(i){const g=i(f);if(g===XI)return null;h.setColor(g)}if(r&&h.setWidth(r(f)),s){const g=s(f);if(g!=="butt"&&g!=="round"&&g!=="square")throw new Error("Expected butt, round, or square line cap");h.setLineCap(g)}if(a){const g=a(f);if(g!=="bevel"&&g!=="round"&&g!=="miter")throw new Error("Expected bevel, round, or miter line join");h.setLineJoin(g)}return o&&h.setLineDash(o(f)),l&&h.setLineDashOffset(l(f)),u&&h.setMiterLimit(u(f)),h}}function i$(n,e){const t="text-",r=dl(n,t+"value",e);if(!r)return null;const i=Km(n,t,e),s=Km(n,t+"background-",e),a=Ym(n,t,e),o=Ym(n,t+"background-",e),l=dl(n,t+"font",e),u=ps(n,t+"max-angle",e),h=ps(n,t+"offset-x",e),f=ps(n,t+"offset-y",e),g=Lf(n,t+"overflow",e),p=dl(n,t+"placement",e),E=ps(n,t+"repeat",e),x=Ov(n,t+"scale",e),w=Lf(n,t+"rotate-with-view",e),T=ps(n,t+"rotation",e),R=dl(n,t+"align",e),k=dl(n,t+"justify",e),N=dl(n,t+"baseline",e),j=Lf(n,t+"keep-upright",e),B=PD(n,t+"padding",e),P=Dv(n,t+"declutter-mode"),C=new ed({declutterMode:P});return function(M){if(C.setText(r(M)),i&&C.setFill(i(M)),s&&C.setBackgroundFill(s(M)),a&&C.setStroke(a(M)),o&&C.setBackgroundStroke(o(M)),l&&C.setFont(l(M)),u&&C.setMaxAngle(u(M)),h&&C.setOffsetX(h(M)),f&&C.setOffsetY(f(M)),g&&C.setOverflow(g(M)),p){const F=p(M);if(F!=="point"&&F!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(F)}if(E&&C.setRepeat(E(M)),x&&C.setScale(x(M)),w&&C.setRotateWithView(w(M)),T&&C.setRotation(T(M)),R){const F=R(M);if(F!=="left"&&F!=="center"&&F!=="right"&&F!=="end"&&F!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(F)}if(k){const F=k(M);if(F!=="left"&&F!=="right"&&F!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(F)}if(N){const F=N(M);if(F!=="bottom"&&F!=="top"&&F!=="middle"&&F!=="alphabetic"&&F!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(F)}return B&&C.setPadding(B(M)),j&&C.setKeepUpright(j(M)),C}}function s$(n,e){return"icon-src"in n?a$(n,e):"shape-points"in n?o$(n,e):"circle-radius"in n?l$(n,e):null}function a$(n,e){const t="icon-",r=t+"src",i=kD(n[r],r),s=sx(n,t+"anchor",e),a=Ov(n,t+"scale",e),o=ps(n,t+"opacity",e),l=sx(n,t+"displacement",e),u=ps(n,t+"rotation",e),h=Lf(n,t+"rotate-with-view",e),f=lk(n,t+"anchor-origin"),g=ck(n,t+"anchor-x-units"),p=ck(n,t+"anchor-y-units"),E=f$(n,t+"color"),x=h$(n,t+"cross-origin"),w=d$(n,t+"offset"),T=lk(n,t+"offset-origin"),R=ax(n,t+"width"),k=ax(n,t+"height"),N=u$(n,t+"size"),j=Dv(n,t+"declutter-mode"),B=new zp({src:i,anchorOrigin:f,anchorXUnits:g,anchorYUnits:p,color:E,crossOrigin:x,offset:w,offsetOrigin:T,height:k,width:R,size:N,declutterMode:j});return function(P){return o&&B.setOpacity(o(P)),l&&B.setDisplacement(l(P)),u&&B.setRotation(u(P)),h&&B.setRotateWithView(h(P)),a&&B.setScale(a(P)),s&&B.setAnchor(s(P)),B}}function o$(n,e){const t="shape-",r=t+"points",i=t+"radius",s=tT(n[r],r),a=tT(n[i],i),o=Km(n,t,e),l=Ym(n,t,e),u=Ov(n,t+"scale",e),h=sx(n,t+"displacement",e),f=ps(n,t+"rotation",e),g=Lf(n,t+"rotate-with-view",e),p=ax(n,t+"radius2"),E=ax(n,t+"angle"),x=Dv(n,t+"declutter-mode"),w=new Lv({points:s,radius:a,radius2:p,angle:E,declutterMode:x});return function(T){return o&&w.setFill(o(T)),l&&w.setStroke(l(T)),h&&w.setDisplacement(h(T)),f&&w.setRotation(f(T)),g&&w.setRotateWithView(g(T)),u&&w.setScale(u(T)),w}}function l$(n,e){const t="circle-",r=Km(n,t,e),i=Ym(n,t,e),s=ps(n,t+"radius",e),a=Ov(n,t+"scale",e),o=sx(n,t+"displacement",e),l=ps(n,t+"rotation",e),u=Lf(n,t+"rotate-with-view",e),h=Dv(n,t+"declutter-mode"),f=new Cl({radius:5,declutterMode:h});return function(g){return s&&f.setRadius(s(g)),r&&f.setFill(r(g)),i&&f.setStroke(i(g)),o&&f.setDisplacement(o(g)),l&&f.setRotation(l(g)),u&&f.setRotateWithView(u(g)),a&&f.setScale(a(g)),f}}function ps(n,e,t){if(!(e in n))return;const r=Vl(n[e],cn,t);return function(i){return tT(r(i),e)}}function dl(n,e,t){if(!(e in n))return null;const r=Vl(n[e],ms,t);return function(i){return kD(r(i),e)}}function c$(n,e,t){const r=dl(n,e+"pattern-src",t),i=ok(n,e+"pattern-offset",t),s=ok(n,e+"pattern-size",t),a=sA(n,e+"color",t);return function(o){return{src:r(o),offset:i&&i(o),size:s&&s(o),color:a&&a(o)}}}function Lf(n,e,t){if(!(e in n))return null;const r=Vl(n[e],qi,t);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function sA(n,e,t){if(!(e in n))return null;const r=Vl(n[e],Ga,t);return function(i){return MD(r(i),e)}}function PD(n,e,t){if(!(e in n))return null;const r=Vl(n[e],kh,t);return function(i){return $p(r(i),e)}}function sx(n,e,t){if(!(e in n))return null;const r=Vl(n[e],kh,t);return function(i){const s=$p(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function ok(n,e,t){if(!(e in n))return null;const r=Vl(n[e],kh,t);return function(i){return ND(r(i),e)}}function Ov(n,e,t){if(!(e in n))return null;const r=Vl(n[e],kh|cn,t);return function(i){return g$(r(i),e)}}function ax(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function u$(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return xs(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function h$(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function lk(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function ck(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function d$(n,e){const t=n[e];if(t!==void 0)return $p(t,e)}function Dv(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function f$(n,e){const t=n[e];if(t!==void 0)return MD(t,e)}function $p(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function kD(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function tT(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function MD(n,e){if(typeof n=="string")return n;const t=$p(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function ND(n,e){const t=$p(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function g$(n,e){return typeof n=="number"?n:ND(n,e)}const La={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function uk(n,e,t){return(function(r,i,s,a,o){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,u=e?0:s[1]*i,h=o?o[0]:0,f=o?o[1]:0;let g=n[0]+l/2+h,p=n[2]-l/2+h,E=n[1]+u/2+f,x=n[3]-u/2+f;g>p&&(g=(p+g)/2,p=g),E>x&&(E=(x+E)/2,x=E);let w=Yn(r[0],g,p),T=Yn(r[1],E,x);if(a&&t&&i){const R=30*i;w+=-R*Math.log(1+Math.max(0,g-r[0])/R)+R*Math.log(1+Math.max(0,r[0]-p)/R),T+=-R*Math.log(1+Math.max(0,E-r[1])/R)+R*Math.log(1+Math.max(0,r[1]-x)/R)}return[w,T]})}function m$(n){return n}function LD(n){return Math.pow(n,3)}function I0(n){return 1-LD(1-n)}function p$(n){return 3*n*n-2*n*n*n}function _$(n){return n}function aA(n,e,t,r){const i=tn(e)/t[0],s=kr(e)/t[1];return r?Math.min(n,Math.max(i,s)):Math.min(n,Math.min(i,s))}function oA(n,e,t){let r=Math.min(n,e);const i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Yn(r,t/2,e*2)}function y$(n,e,t,r){return e=e!==void 0?e:!0,(function(i,s,a,o){if(i!==void 0){const l=n[0],u=n[n.length-1],h=t?aA(l,t,a,r):l;if(o)return e?oA(i,h,u):Yn(i,u,h);const f=Math.min(h,i),g=Math.floor(Ev(n,f,s));return n[g]>h&&g<n.length-1?n[g+1]:n[g]}})}function x$(n,e,t,r,i,s){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(a,o,l,u){if(a!==void 0){const h=i?aA(e,i,l,s):e;if(u)return r?oA(a,h,t):Yn(a,t,h);const f=1e-9,g=Math.ceil(Math.log(e/h)/Math.log(n)-f),p=-o*(.5-f)+.5,E=Math.min(h,a),x=Math.floor(Math.log(e/E)/Math.log(n)+p),w=Math.max(g,x),T=e/Math.pow(n,w);return Yn(T,t,h)}})}function hk(n,e,t,r,i){return t=t!==void 0?t:!0,(function(s,a,o,l){if(s!==void 0){const u=r?aA(n,r,o,i):n;return!t||!l?Yn(s,e,u):oA(s,u,e)}})}function lA(n){if(n!==void 0)return 0}function dk(n){if(n!==void 0)return n}function v$(n){const e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function E$(n){const e=vl(5);return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}const w$=42,cA=256,b2=0;class Io extends Ho{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=VI(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&UO(),e.center&&(e.center=hl(e.center,this.projection_)),e.extent&&(e.extent=Ao(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const o in La)delete t[o];this.setProperties(t,!0);const r=T$(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=S$(e),s=r.constraint,a=I$(e);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),a=s/2*(i[3]-t[3]+t[1]-i[1]),o=s/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+a,r[1]-o])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=hl(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=hl(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){const h=arguments[i];h.center&&this.setCenterInternal(h.center),h.zoom!==void 0?this.setZoom(h.zoom):h.resolution&&this.setResolution(h.resolution),h.rotation!==void 0&&this.setRotation(h.rotation)}if(i===t){r&&V_(r,!0);return}let s=Date.now(),a=this.targetCenter_.slice(),o=this.targetResolution_,l=this.targetRotation_;const u=[];for(;i<t;++i){const h=arguments[i],f={start:s,complete:!1,anchor:h.anchor,duration:h.duration!==void 0?h.duration:1e3,easing:h.easing||p$,callback:r};if(h.center&&(f.sourceCenter=a,f.targetCenter=h.center.slice(),a=f.targetCenter),h.zoom!==void 0?(f.sourceResolution=o,f.targetResolution=this.getResolutionForZoom(h.zoom),o=f.targetResolution):h.resolution&&(f.sourceResolution=o,f.targetResolution=h.resolution,o=f.targetResolution),h.rotation!==void 0){f.sourceRotation=l;const g=zc(h.rotation-l+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=l+g,l=f.targetRotation}A$(f)?f.complete=!0:s+=f.duration,u.push(f)}this.animations_.push(u),this.setHint(ti.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ti.ANIMATING]>0}getInteracting(){return this.hints_[ti.INTERACTING]>0}cancelAnimations(){this.setHint(ti.ANIMATING,-this.hints_[ti.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){const i=this.animations_[t];if(i[0].callback&&V_(i[0].callback,!1),!e)for(let s=0,a=i.length;s<a;++s){const o=i[s];if(!o.complete){e=o.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let a=0,o=i.length;a<o;++a){const l=i[a];if(l.complete)continue;const u=e-l.start;let h=l.duration>0?u/l.duration:1;h>=1?(l.complete=!0,h=1):s=!1;const f=l.easing(h);if(l.sourceCenter){const g=l.sourceCenter[0],p=l.sourceCenter[1],E=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;const w=g+f*(E-g),T=p+f*(x-p);this.targetCenter_=[w,T]}if(l.sourceResolution&&l.targetResolution){const g=f===1?l.targetResolution:l.sourceResolution+f*(l.targetResolution-l.sourceResolution);if(l.anchor){const p=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(g,0,p,!0);this.targetCenter_=this.calculateCenterZoom(E,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=g,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const g=f===1?zc(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+f*(l.targetRotation-l.sourceRotation);if(l.anchor){const p=this.constraints_.rotation(g,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=g}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(ti.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=i[0].callback;a&&V_(a,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],OI(r,e-this.getRotation()),_B(r,t)),r}calculateCenterZoom(e,t){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const a=t[0]-e*(t[0]-i[0])/s,o=t[1]-e*(t[1]-i[1])/s;r=[a,o]}return r}getViewportSize_(e){const t=this.viewportSize_;if(e){const r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&HS(e,this.getProjection())}getCenterInternal(){return this.get(La.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return zO(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Cn(t,"The view center is not defined");const r=this.getResolution();Cn(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return Cn(i!==void 0,"The view rotation is not defined"),Hy(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(La.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ao(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const r=tn(e)/t[0],i=kr(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(s){return t/Math.pow(e,s*i)})}getRotation(){return this.get(La.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/t;return(function(a){return Math.log(r/a)/t/s})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const a=this.getViewportSizeMinusPadding_();i=C2(i,this.getViewportSize_(),[a[0]/2+s[3],a[1]/2+s[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){const s=Ev(this.resolutions_,e,1);t=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Yn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Yn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(Cn(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Cn(!S0(e),"Cannot fit empty extent provided as `geometry`");const i=Ao(e,this.getProjection());r=$4(i)}else if(e.getType()==="Circle"){const i=Ao(e.getExtent(),this.getProjection());r=$4(i),r.rotate(this.getRotation(),jo(i))}else r=e;this.fitInternal(r,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),s=e.getFlatCoordinates(),a=e.getStride();let o=1/0,l=1/0,u=-1/0,h=-1/0;for(let f=0,g=s.length;f<g;f+=a){const p=s[f]*r-s[f+1]*i,E=s[f]*i+s[f+1]*r;o=Math.min(o,p),l=Math.min(l,E),u=Math.max(u,p),h=Math.max(h,E)}return[o,l,u,h]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());const i=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let a;t.minResolution!==void 0?a=t.minResolution:t.maxZoom!==void 0?a=this.getResolutionForZoom(t.maxZoom):a=0;const o=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(o,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?a:Math.max(l,a),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),h=Math.sin(u),f=Math.cos(u),g=jo(o);g[0]+=(i[1]-i[3])/2*l,g[1]+=(i[0]-i[2])/2*l;const p=g[0]*f-g[1]*h,E=g[1]*f+g[0]*h,x=this.getConstrainedCenter([p,E],l),w=t.callback?t.callback:jm;t.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:t.duration,easing:t.easing},w):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),V_(w,!0))}centerOn(e,t,r){this.centerOnInternal(hl(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(C2(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let s;const a=this.padding_;if(a&&e){const o=this.getViewportSizeMinusPadding_(-r),l=C2(e,i,[o[0]/2+a[3],o[1]/2+a[0]],t,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=HS(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&hl(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=hl(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&hl(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),a=this.constraints_.resolution(this.targetResolution_,0,s,r),o=this.constraints_.center(this.targetCenter_,a,s,r,this.calculateCenterShift(this.targetCenter_,a,i,s));this.get(La.ROTATION)!==i&&this.set(La.ROTATION,i),this.get(La.RESOLUTION)!==a&&(this.set(La.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!o||!this.get(La.CENTER)||!Yy(this.get(La.CENTER),o))&&this.set(La.CENTER,o),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;const i=t||0,s=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,i,a),l=this.constraints_.center(this.targetCenter_,o,a,!1,this.calculateCenterShift(this.targetCenter_,o,s,a));if(e===0&&!this.cancelAnchor_){this.targetResolution_=o,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==o||this.getRotation()!==s||!this.getCenterInternal()||!Yy(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:o,duration:e,easing:I0,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ti.INTERACTING,1)}endInteraction(e,t,r){r=r&&hl(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(ti.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}}function V_(n,e){setTimeout(function(){n(e)},0)}function S$(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return uk(n.extent,n.constrainOnlyCenter,t)}const e=VI(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,uk(t,!1,!1)}return m$}function T$(n){let e,t,r,a=n.minZoom!==void 0?n.minZoom:b2,o=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,h=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,f=n.showFullExtent!==void 0?n.showFullExtent:!1,g=VI(n.projection,"EPSG:3857"),p=g.getExtent();let E=n.constrainOnlyCenter,x=n.extent;if(!u&&!x&&g.isGlobal()&&(E=!1,x=p),n.resolutions!==void 0){const w=n.resolutions;t=w[a],r=w[o]!==void 0?w[o]:w[w.length-1],n.constrainResolution?e=y$(w,h,!E&&x,f):e=hk(t,r,h,!E&&x,f)}else{const T=(p?Math.max(tn(p),kr(p)):360*Qf.degrees/g.getMetersPerUnit())/cA/Math.pow(2,b2),R=T/Math.pow(2,28-b2);t=n.maxResolution,t!==void 0?a=0:t=T/Math.pow(l,a),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,o):r=T/Math.pow(l,o):r=R),o=a+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,o-a),n.constrainResolution?e=x$(l,t,r,h,!E&&x,f):e=hk(t,r,h,!E&&x,f)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:a,zoomFactor:l}}function I$(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?E$():t===!1?dk:typeof t=="number"?v$(t):dk}return lA}function A$(n){return!(n.sourceCenter&&n.targetCenter&&!Yy(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function C2(n,e,t,r,i){const s=Math.cos(-i);let a=Math.sin(-i),o=n[0]*s-n[1]*a,l=n[1]*s+n[0]*a;o+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,a=-a;const u=o*s-l*a,h=l*s+o*a;return[u,h]}const Mn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class OD extends Ho{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Mn.OPACITY]=e.opacity!==void 0?e.opacity:1,Cn(typeof t[Mn.OPACITY]=="number","Layer opacity must be a number"),t[Mn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Mn.Z_INDEX]=e.zIndex,t[Mn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Mn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Mn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Mn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Yn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ft()}getLayerStatesArray(e){return Ft()}getExtent(){return this.get(Mn.EXTENT)}getMaxResolution(){return this.get(Mn.MAX_RESOLUTION)}getMinResolution(){return this.get(Mn.MIN_RESOLUTION)}getMinZoom(){return this.get(Mn.MIN_ZOOM)}getMaxZoom(){return this.get(Mn.MAX_ZOOM)}getOpacity(){return this.get(Mn.OPACITY)}getSourceState(){return Ft()}getVisible(){return this.get(Mn.VISIBLE)}getZIndex(){return this.get(Mn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Mn.EXTENT,e)}setMaxResolution(e){this.set(Mn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Mn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Mn.MAX_ZOOM,e)}setMinZoom(e){this.set(Mn.MIN_ZOOM,e)}setOpacity(e){Cn(typeof e=="number","Layer opacity must be a number"),this.set(Mn.OPACITY,e)}setVisible(e){this.set(Mn.VISIBLE,e)}setZIndex(e){this.set(Mn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Wp extends OD{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Mn.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Mn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Wn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=hn(e,zt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Io?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(a=>a.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return uA(i,t.viewState)&&(!s||Zi(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const r=e instanceof Io?e.getViewStateAndExtent():e;let i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Mn.MAP,e)}getMapInternal(){return this.get(Mn.MAP)}setMap(e){this.mapPrecomposeKey_&&(Wn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Wn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=hn(e,_a.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=hn(this,zt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,r=this.getLayerState(!1);Cn(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(Mn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function uA(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}const fk={RENDER_ORDER:"renderOrder"};class DD extends Wp{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(fk.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new ED(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(fk.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?wD:e;const t=R$(e);this.styleFunction_=e===null?void 0:cz(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function R$(n){if(n===void 0)return wD;if(!n)return null;if(typeof n=="function"||n instanceof ur)return n;if(!Array.isArray(n))return ak([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof ur){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!(a instanceof ur))throw new Error("Expected a list of style instances");i[s]=a}return i}if("style"in t){const i=new Array(e);for(let s=0;s<e;++s){const a=n[s];if(!("style"in a))throw new Error("Expected a list of rules with a style property");i[s]=a}return n$(i)}return ak(n)}class Hp extends DD{constructor(e){super(e)}createRenderer(){return new Pz(this)}}const pc={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class Ac extends Wo{constructor(e,t){super(e),this.layer=t}}const P2={LAYERS:"layers"};let Fv=class FD extends OD{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(P2.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new pa(r.slice(),{unique:!0}):Cn(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new pa(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Wn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(hn(e,fs.ADD,this.handleLayersAdd_,this),hn(e,fs.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(Wn);Mp(this.listenerKeys_);const t=e.getArray();for(let r=0,i=t.length;r<i;r++){const s=t[r];this.registerLayerListeners_(s),this.dispatchEvent(new Ac(pc.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const t=[hn(e,qf.PROPERTYCHANGE,this.handleLayerChange_,this),hn(e,zt.CHANGE,this.handleLayerChange_,this)];e instanceof FD&&t.push(hn(e,pc.ADDLAYER,this.handleLayerGroupAdd_,this),hn(e,pc.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[yn(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Ac(pc.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Ac(pc.REMOVELAYER,e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Ac(pc.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){const t=e.element,r=yn(t);this.listenerKeys_[r].forEach(Wn),delete this.listenerKeys_[r],this.dispatchEvent(new Ac(pc.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(P2.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const r=t.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new Ac(pc.REMOVELAYER,r[i]))}this.set(P2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(t)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let a=r,o=t.length;a<o;a++){const l=t[a];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=xl(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}};const kt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class hA extends Np{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(zt.CHANGE)}release(){this.setState(kt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==kt.EMPTY){if(this.state!==kt.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Ft()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=t-r+1e3/60;return i>=this.transition_?1:LD(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function nT(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}const b$=new Error("disposed"),C$=[256,256];class gk extends hA{constructor(e){const t=kt.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=nT(this.data_);return e?[e.width,e.height]:C$}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==kt.IDLE&&this.state!==kt.ERROR)return;this.state=kt.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=kt.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=kt.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(b$),this.controller_=null),super.disposeInternal()}}class jD extends hA{constructor(e,t,r,i,s,a){super(e,t,a),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Hs?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=kt.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=kt.ERROR,this.unlistenImage_(),this.image_=P$(),this.changed()}handleImageLoad_(){if(Hs)this.state=kt.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=kt.LOADED:this.state=kt.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==kt.ERROR&&(this.state=kt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==kt.IDLE&&(this.state=kt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=AU(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function P$(){const n=Hr(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let k2;const Of=[];function mk(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function M2(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function k$(){if(k2===void 0){const n=Hr(6,6,Of);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",mk(n,4,5,4,0),mk(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;k2=M2(e,0)||M2(e,4)||M2(e,8),Mv(n),Of.push(n.canvas)}return k2}function ox(n,e,t,r){const i=jp(t,e,n);let s=Qy(e,r,t);const a=e.getMetersPerUnit();a!==void 0&&(s*=a);const o=n.getMetersPerUnit();o!==void 0&&(s/=o);const l=n.getExtent();if(!l||Ah(l,i)){const u=Qy(n,s,i)/s;isFinite(u)&&u>0&&(s/=u)}return s}function M$(n,e,t,r){const i=jo(t);let s=ox(n,e,i,r);return(!isFinite(s)||s<=0)&&CO(t,function(a){return s=ox(n,e,a,r),isFinite(s)&&s>0}),s}function VD(n,e,t,r,i,s,a,o,l,u,h,f,g,p){const E=Hr(Math.round(t*n),Math.round(t*e),Of);if(f||(E.imageSmoothingEnabled=!1),l.length===0)return E.canvas;E.scale(t,t);function x(j){return Math.round(j*t)/t}E.globalCompositeOperation="lighter";const w=Xs();l.forEach(function(j,B,P){RO(w,j.extent)});let T;const R=t/r,k=(f?1:1+Math.pow(2,-24))/R;(!g||l.length!==1||u!==0)&&(T=Hr(Math.round(tn(w)*R),Math.round(kr(w)*R),Of),f||(T.imageSmoothingEnabled=!1),l.forEach(function(j,B,P){if(j.image.width>0&&j.image.height>0){if(j.clipExtent){T.save();const W=(j.clipExtent[0]-w[0])*R,D=-(j.clipExtent[3]-w[3])*R,we=tn(j.clipExtent)*R,Ne=kr(j.clipExtent)*R;T.rect(f?W:Math.round(W),f?D:Math.round(D),f?we:Math.round(W+we)-Math.round(W),f?Ne:Math.round(D+Ne)-Math.round(D)),T.clip()}const C=(j.extent[0]-w[0])*R,M=-(j.extent[3]-w[3])*R,F=tn(j.extent)*R,O=kr(j.extent)*R;T.drawImage(j.image,u,u,j.image.width-2*u,j.image.height-2*u,f?C:Math.round(C),f?M:Math.round(M),f?F:Math.round(C+F)-Math.round(C),f?O:Math.round(M+O)-Math.round(M)),j.clipExtent&&T.restore()}}));const N=Zh(a);return o.getTriangles().forEach(function(j,B,P){const C=j.source,M=j.target;let F=C[0][0],O=C[0][1],W=C[1][0],D=C[1][1],we=C[2][0],Ne=C[2][1];const Le=x((M[0][0]-N[0])/s),be=x(-(M[0][1]-N[1])/s),ce=x((M[1][0]-N[0])/s),Re=x(-(M[1][1]-N[1])/s),Ae=x((M[2][0]-N[0])/s),ie=x(-(M[2][1]-N[1])/s),V=F,re=O;F=0,O=0,W-=V,D-=re,we-=V,Ne-=re;const te=[[W,D,0,0,ce-Le],[we,Ne,0,0,Ae-Le],[0,0,W,D,Re-be],[0,0,we,Ne,ie-be]],ee=pB(te);if(!ee)return;if(E.save(),E.beginPath(),k$()||!f){E.moveTo(ce,Re);const Oe=4,Se=Le-ce,Fe=be-Re;for(let je=0;je<Oe;je++)E.lineTo(ce+x((je+1)*Se/Oe),Re+x(je*Fe/(Oe-1))),je!=Oe-1&&E.lineTo(ce+x((je+1)*Se/Oe),Re+x((je+1)*Fe/(Oe-1)));E.lineTo(Ae,ie)}else E.moveTo(ce,Re),E.lineTo(Le,be),E.lineTo(Ae,ie);E.clip(),E.transform(ee[0],ee[2],ee[1],ee[3],Le,be),E.translate(w[0]-V,w[3]-re);let de;if(T)de=T.canvas,E.scale(k,-k);else{const Oe=l[0],Se=Oe.extent;de=Oe.image,E.scale(tn(Se)/de.width,-kr(Se)/de.height)}E.drawImage(de,0,0),E.restore()}),T&&(Mv(T),Of.push(T.canvas)),h&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,o.getTriangles().forEach(function(j,B,P){const C=j.target,M=(C[0][0]-N[0])/s,F=-(C[0][1]-N[1])/s,O=(C[1][0]-N[0])/s,W=-(C[1][1]-N[1])/s,D=(C[2][0]-N[0])/s,we=-(C[2][1]-N[1])/s;E.beginPath(),E.moveTo(O,W),E.lineTo(M,F),E.lineTo(D,we),E.closePath(),E.stroke()}),E.restore()),E.canvas}const N$=10,pk=.25;class GD{constructor(e,t,r,i,s,a,o){this.sourceProj_=e,this.targetProj_=t;let l={};const u=o?WS(k=>$r(o,jp(k,this.targetProj_,this.sourceProj_))):Gm(this.targetProj_,this.sourceProj_);this.transformInv_=function(k){const N=k[0]+"/"+k[1];return l[N]||(l[N]=u(k)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&tn(i)>=tn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?tn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?tn(this.targetProj_.getExtent()):null;const h=Zh(r),f=Iv(r),g=Tv(r),p=Sv(r),E=this.transformInv_(h),x=this.transformInv_(f),w=this.transformInv_(g),T=this.transformInv_(p),R=N$+(a?Math.max(0,Math.ceil(Math.log2(GS(r)/(a*a*256*256)))):0);if(this.addQuad_(h,f,g,p,E,x,w,T,R),this.wrapsXInSource_){let k=1/0;this.triangles_.forEach(function(N,j,B){k=Math.min(k,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-k>this.sourceWorldWidth_/2){const j=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];j[0][0]-k>this.sourceWorldWidth_/2&&(j[0][0]-=this.sourceWorldWidth_),j[1][0]-k>this.sourceWorldWidth_/2&&(j[1][0]-=this.sourceWorldWidth_),j[2][0]-k>this.sourceWorldWidth_/2&&(j[2][0]-=this.sourceWorldWidth_);const B=Math.min(j[0][0],j[1][0],j[2][0]);Math.max(j[0][0],j[1][0],j[2][0])-B<this.sourceWorldWidth_/2&&(N.source=j)}})}l={}}addTriangle_(e,t,r,i,s,a){this.triangles_.push({source:[i,s,a],target:[e,t,r]})}addQuad_(e,t,r,i,s,a,o,l,u){const h=E4([s,a,o,l]),f=this.sourceWorldWidth_?tn(h)/this.sourceWorldWidth_:null,g=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&f>.5&&f<1;let E=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const w=E4([e,t,r,i]);E=tn(w)/this.targetWorldWidth_>pk||E}!p&&this.sourceProj_.isGlobal()&&f&&(E=f>pk||E)}if(!E&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Zi(h,this.maxSourceExtent_))return;let x=0;if(!E&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)E=!0;else if(x=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(o[0])||!isFinite(o[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(u>0){if(!E){const w=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(w);let R;p?R=(zc(s[0],g)+zc(o[0],g))/2-zc(T[0],g):R=(s[0]+o[0])/2-T[0];const k=(s[1]+o[1])/2-T[1];E=R*R+k*k>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const w=[(t[0]+r[0])/2,(t[1]+r[1])/2],T=this.transformInv_(w),R=[(i[0]+e[0])/2,(i[1]+e[1])/2],k=this.transformInv_(R);this.addQuad_(e,t,w,R,s,a,T,k,u-1),this.addQuad_(R,w,r,i,k,T,o,l,u-1)}else{const w=[(e[0]+t[0])/2,(e[1]+t[1])/2],T=this.transformInv_(w),R=[(r[0]+i[0])/2,(r[1]+i[1])/2],k=this.transformInv_(R);this.addQuad_(e,w,R,i,s,T,k,l,u-1),this.addQuad_(w,t,r,R,T,a,o,k,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,s,o,l),(x&14)==0&&this.addTriangle_(e,r,t,s,o,a),x&&((x&13)==0&&this.addTriangle_(t,i,e,a,l,s),(x&7)==0&&this.addTriangle_(t,i,r,a,l,o))}calculateSourceExtent(){const e=Xs();return this.triangles_.forEach(function(t,r,i){const s=t.source;am(e,s[0]),am(e,s[1]),am(e,s[2])}),e}getTriangles(){return this.triangles_}}const BD=.5;class UD extends hA{constructor(e,t,r,i,s,a,o,l,u,h,f,g){super(s,kt.IDLE,g),this.renderEdges_=f!==void 0?f:!1,this.pixelRatio_=o,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=a||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const p=i.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const w=E?xl(p,E):p;if(GS(w)===0){this.state=kt.EMPTY;return}const T=e.getExtent();T&&(x?x=xl(x,T):x=T);const R=i.getResolution(this.wrappedTileCoord_[0]),k=M$(e,r,w,R);if(!isFinite(k)||k<=0){this.state=kt.EMPTY;return}const N=h!==void 0?h:BD;if(this.triangulation_=new GD(e,r,w,x,k*N,R),this.triangulation_.getTriangles().length===0){this.state=kt.EMPTY;return}this.sourceZ_=t.getZForResolution(k);let j=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(j[1]=Yn(j[1],x[1],x[3]),j[3]=Yn(j[3],x[1],x[3])):j=xl(j,x)),!GS(j))this.state=kt.EMPTY;else{let B=0,P=0;e.canWrapX()&&(B=tn(T),P=Math.floor((j[0]-T[0])/B)),MO(j.slice(),e,!0).forEach(M=>{const F=t.getTileRangeForExtentAndZ(M,this.sourceZ_);for(let O=F.minX;O<=F.maxX;O++)for(let W=F.minY;W<=F.maxY;W++){const D=u(this.sourceZ_,O,W,o);if(D){const we=P*B;this.sourceTiles_.push({tile:D,offset:we})}}++P}),this.sourceTiles_.length===0&&(this.state=kt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const r=t.tile;if(r&&r.getState()==kt.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=t.offset,s[2]+=t.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=kt.ERROR;else{const t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],a=this.targetTileGrid_.getResolution(t),o=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=VD(i,s,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),a,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=kt.LOADED}this.changed()}load(){if(this.state==kt.IDLE){this.state=kt.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const r=t.getState();if(r==kt.IDLE||r==kt.LOADING){e++;const i=hn(t,zt.CHANGE,s=>{const a=t.getState();(a==kt.LOADED||a==kt.ERROR||a==kt.EMPTY)&&(Wn(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==kt.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Wn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Mv(this.canvas_.getContext("2d")),Of.push(this.canvas_),this.canvas_=null),super.release()}}class dA{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Yd(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new dA(n,e,t,r)}class _k{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof vv&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const r=this.entries_[e];return Cn(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const t=this.entries_[e];return Cn(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){const e=new Array(this.count_);let t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Cn(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function lx(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function L$(n,e,t){return n+"/"+e+"/"+t}function xy(n,e,t,r,i){return`${yn(n)},${e},${L$(t,r,i)}`}function zD(n){return O$(n[0],n[1],n[2])}function O$(n,e,t){return(e<<n)+t}function D$(n,e){const t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(r,i):!0}class F$ extends rA{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,a=this.getLayer().getSource(),o=e.viewHints;let l=e.extent;if(t.extent!==void 0&&(l=xl(l,Ao(t.extent,i.projection))),!o[ti.ANIMATING]&&!o[ti.INTERACTING]&&!S0(l))if(a){const u=i.projection,h=a.getImage(l,s,r,u);h&&(this.loadImage(h)?this.image=h:h.getState()===pt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=$r(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ah(s,i))return null;const a=this.image.getExtent(),o=this.image.getImage(),l=tn(a),u=Math.floor(o.width*((i[0]-a[0])/l));if(u<0||u>=o.width)return null;const h=kr(a),f=Math.floor(o.height*((a[3]-i[1])/h));return f<0||f>=o.height?null:this.getImageData(o,u,f)}renderFrame(e,t){const r=this.image,i=r.getExtent(),s=r.getResolution(),[a,o]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],h=e.pixelRatio,f=e.viewState,g=f.center,p=f.resolution,E=h*a/(p*l),x=h*o/(p*l);this.prepareContainer(e,t);const w=this.context.canvas.width,T=this.context.canvas.height,R=this.getRenderContext(e);let k=!1,N=!0;if(u.extent){const M=Ao(u.extent,f.projection);N=Zi(M,e.extent),k=N&&!Nc(M,e.extent),k&&this.clipUnrotated(R,e,M)}const j=r.getImage(),B=Vo(this.tempTransform,w/2,T/2,E,x,0,l*(i[0]-g[0])/a,l*(g[1]-i[3])/o);this.renderedResolution=o*h/l;const P=j.width*B[0],C=j.height*B[3];if(this.getLayer().getSource().getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),N&&P>=.5&&C>=.5){const M=B[4],F=B[5],O=u.opacity;O!==1&&(R.save(),R.globalAlpha=O),R.drawImage(j,0,0,+j.width,+j.height,M,F,P,C),O!==1&&R.restore()}return this.postRender(this.context,e),k&&R.restore(),R.imageSmoothingEnabled=!0,this.container}}class j$ extends Wp{constructor(e){e=e||{},super(e)}}class V$ extends j${constructor(e){super(e)}createRenderer(){return new F$(this)}getData(e){return super.getData(e)}}function N2(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const r=n[t],i=r.has(e);return i||r.add(e),!i}function G$(n,e,t){const r=n[t];return r?r.delete(e):!1}function yk(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=xl(e,Ao(t.extent,n.viewState.projection)));const r=t.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=xl(e,i))}return e}class B$ extends rA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Xs(),this.tempTileRange_=new dA(0,0,0,0),this.tempTileCoord_=lx(0,0,0);const r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new _k(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new _k(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){const s=this.tileCache_,o=this.getLayer().getSource(),l=xy(o,o.getKey(),e,t,r);let u;if(s.containsKey(l))u=s.get(l);else{const h=i.viewState.projection,f=o.getProjection();if(u=o.getTile(e,t,r,i.pixelRatio,h,!f||xh(f,h)?void 0:this.getSourceTileCache()),!u)return null;s.set(l,u)}return u}getTile(e,t,r,i){const s=this.getOrCreateTile(e,t,r,i);return s||null}getData(e){const t=this.frameState;if(!t)return null;const r=this.getLayer(),i=$r(t.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!Ah(s,i))return null;const a=t.viewState,o=r.getRenderSource(),l=o.getTileGridForProjection(a.projection),u=o.getTilePixelRatio(t.pixelRatio);for(let h=l.getZForResolution(a.resolution);h>=l.getMinZoom();--h){const f=l.getTileCoordForCoordAndZ(i,h),g=this.getTile(h,f[1],f[2],t);if(!g||g.getState()!==kt.LOADED)continue;const p=l.getOrigin(h),E=xs(l.getTileSize(h)),x=l.getResolution(h);let w;if(g instanceof jD||g instanceof UD)w=g.getImage();else if(g instanceof gk){if(w=nT(g.getData()),!w)continue}else continue;const T=Math.floor(u*((i[0]-p[0])/x-f[1]*E[0])),R=Math.floor(u*((p[1]-i[1])/x-f[2]*E[1])),k=Math.round(u*o.getGutterForProjection(a.projection));return this.getImageData(w,T+k,R+k)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,s){const a=e.viewState,o=this.getLayer(),l=o.getRenderSource(),u=l.getTileGridForProjection(a.projection),h=yn(l);h in e.wantedTiles||(e.wantedTiles[h]={});const f=e.wantedTiles[h],g=o.getMapInternal(),p=Math.max(r-s,u.getMinZoom(),u.getZForResolution(Math.min(o.getMaxResolution(),g?g.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):u.getResolution(0)),l.zDirection)),E=a.rotation,x=E?PO(a.center,a.resolution,E,e.size):void 0;for(let w=r;w>=p;--w){const T=u.getTileRangeForExtentAndZ(t,w,this.tempTileRange_),R=u.getResolution(w);for(let k=T.minX;k<=T.maxX;++k)for(let N=T.minY;N<=T.maxY;++N){if(E&&!u.tileCoordIntersectsViewport([w,k,N],x))continue;const j=this.getTile(w,k,N,e);if(!j||!N2(i,j,w))continue;const P=j.getKey();if(f[P]=!0,j.getState()===kt.IDLE&&!e.tileQueue.isKeyQueued(P)){const C=lx(w,k,N,this.tempTileCoord_);e.tileQueue.enqueue([j,h,u.getTileCoordCenter(C),R])}}}}findStaleTile_(e,t){const r=this.tileCache_,i=e[0],s=e[1],a=e[2],o=this.getStaleKeys();for(let l=0;l<o.length;++l){const u=xy(this.getLayer().getSource(),o[l],i,s,a);if(r.containsKey(u)){const h=r.peek(u);if(h.getState()===kt.LOADED)return h.endTransition(yn(this)),N2(t,h,i),!0}}return!1}findAltTiles_(e,t,r,i){const s=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!s)return!1;let a=!0;const o=this.tileCache_,l=this.getLayer().getRenderSource(),u=l.getKey();for(let h=s.minX;h<=s.maxX;++h)for(let f=s.minY;f<=s.maxY;++f){const g=xy(l,u,r,h,f);let p=!1;if(o.containsKey(g)){const E=o.peek(g);E.getState()===kt.LOADED&&(N2(i,E,r),p=!0)}p||(a=!1)}return a}renderFrame(e,t){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,a=i.resolution,o=i.center,l=e.pixelRatio,u=this.getLayer(),h=u.getSource(),f=h.getTileGridForProjection(s),g=f.getZForResolution(a,h.zDirection),p=f.getResolution(g),E=h.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==E&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=E):this.renderedSourceKey_=E;let x=e.extent;const w=h.getTilePixelRatio(l);this.prepareContainer(e,t);const T=this.context.canvas.width,R=this.context.canvas.height,k=r.extent&&Ao(r.extent);k&&(x=xl(x,Ao(r.extent)));const N=p*T/2/w,j=p*R/2/w,B=[o[0]-N,o[1]-j,o[0]+N,o[1]+j],P={};this.renderedTiles.length=0;const C=u.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const ce=f.getZForResolution(i.nextResolution,h.zDirection),Re=yk(e,e.nextExtent);this.enqueueTiles(e,Re,ce,P,C)}const M=yk(e,x);if(this.enqueueTiles(e,M,g,P,0),C>0&&setTimeout(()=>{this.enqueueTiles(e,M,g-1,P,C-1)},0),!(g in P))return this.container;const F=yn(this),O=e.time;for(const ce of P[g]){const Re=ce.getState();if(Re===kt.EMPTY)continue;const Ae=ce.tileCoord;if(Re===kt.LOADED&&ce.getAlpha(F,O)===1){ce.endTransition(F);continue}if(Re!==kt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ae,P)){G$(P,ce,g),e.animate=!0;continue}if(this.findAltTiles_(f,Ae,g+1,P))continue;const re=f.getMinZoom();for(let te=g-1;te>=re&&!this.findAltTiles_(f,Ae,te,P);--te);}const W=p/a*l/w,D=this.getRenderContext(e);Vo(this.tempTransform,T/2,R/2,W,W,0,-T/2,-R/2),r.extent&&this.clipUnrotated(D,e,k),h.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,e);const we=Object.keys(P).map(Number);we.sort(yl);let Ne;const Le=[],be=[];for(let ce=we.length-1;ce>=0;--ce){const Re=we[ce],Ae=h.getTilePixelSize(Re,l,s),V=f.getResolution(Re)/p,re=Ae[0]*V*W,te=Ae[1]*V*W,ee=f.getTileCoordForCoordAndZ(Zh(B),Re),de=f.getTileCoordExtent(ee),Oe=$r(this.tempTransform,[w*(de[0]-B[0])/p,w*(B[3]-de[3])/p]),Se=w*h.getGutterForProjection(s);for(const Fe of P[Re]){if(Fe.getState()!==kt.LOADED)continue;const je=Fe.tileCoord,Qe=ee[1]-je[1],gt=Math.round(Oe[0]-(Qe-1)*re),_t=ee[2]-je[2],Lt=Math.round(Oe[1]-(_t-1)*te),nn=Math.round(Oe[0]-Qe*re),Ut=Math.round(Oe[1]-_t*te),De=gt-nn,Xt=Lt-Ut,Te=we.length===1;let ge=!1;Ne=[nn,Ut,nn+De,Ut,nn+De,Ut+Xt,nn,Ut+Xt];for(let b=0,Et=Le.length;b<Et;++b)if(!Te&&Re<be[b]){const X=Le[b];Zi([nn,Ut,nn+De,Ut+Xt],[X[0],X[3],X[4],X[7]])&&(ge||(D.save(),ge=!0),D.beginPath(),D.moveTo(Ne[0],Ne[1]),D.lineTo(Ne[2],Ne[3]),D.lineTo(Ne[4],Ne[5]),D.lineTo(Ne[6],Ne[7]),D.moveTo(X[6],X[7]),D.lineTo(X[4],X[5]),D.lineTo(X[2],X[3]),D.lineTo(X[0],X[1]),D.clip())}Le.push(Ne),be.push(Re),this.drawTile(Fe,e,nn,Ut,De,Xt,Se,Te),ge&&D.restore(),this.renderedTiles.unshift(Fe),this.updateUsedTiles(e.usedTiles,h,Fe)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Zf(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&D.restore(),D.imageSmoothingEnabled=!0,this.renderComplete){const ce=(Re,Ae)=>{const ie=yn(h),V=Ae.wantedTiles[ie],re=V?Object.keys(V).length:0;this.updateCacheSize(re),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(ce)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,s,a,o,l){let u;if(e instanceof gk){if(u=nT(e.getData()),!u)throw new Error("Rendering array data is not yet supported")}else u=this.getTileImage(e);if(!u)return;const h=this.getRenderContext(t),f=yn(this),g=t.layerStatesArray[t.layerIndex],p=g.opacity*(l?e.getAlpha(f,t.time):1),E=p!==h.globalAlpha;E&&(h.save(),h.globalAlpha=p),h.drawImage(u,o,o,u.width-2*o,u.height-2*o,r,i,s,a),E&&h.restore(),p!==g.opacity?t.animate=!0:l&&e.endTransition(f)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){const i=yn(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const G_={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class U$ extends Wp{constructor(e){e=e||{};const t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(G_.PRELOAD)}setPreload(e){this.set(G_.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(G_.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(G_.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class qu extends U${constructor(e){super(e)}createRenderer(){return new B$(this,{cacheSize:this.getCacheSize()})}}function rT(n){return Array.isArray(n)?Math.min(...n):n}const Xd=[0,0,0],_c=5;class $D{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Cn(oB(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Cn(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Zh(r)),Cn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Cn(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:cA,Cn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const a=new dA(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const o=this.getTileRangeForExtentAndZ(r,s);a.minX=Math.max(o.minX,a.minX),a.maxX=Math.min(o.maxX,a.maxX),a.minY=Math.max(o.minY,a.minY),a.maxY=Math.min(o.maxY,a.maxY)}return a}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){const i=this.getTileRangeForExtentAndZ(e,t);for(let s=i.minX,a=i.maxX;s<=a;++s)for(let o=i.minY,l=i.maxY;o<=l;++o)r([t,s,o])}forEachTileCoordParentTileRange(e,t,r,i){let s,a,o,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],o=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&o!==void 0?(a=Math.floor(a/2),o=Math.floor(o/2),s=Yd(a,a,o,o,r)):s=this.getTileRangeForExtentAndZ(l,u,r),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,a=e[2]*2;return Yd(s,s+1,a,a+1,t)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;const i=e[0],s=e[1],a=e[2];if(t===i)return Yd(s,a,s,a,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(s*l),h=Math.floor(a*l);if(t<i)return Yd(u,u,h,h,r);const f=Math.floor(l*(s+1))-1,g=Math.floor(l*(a+1))-1;return Yd(u,f,h,g,r)}const o=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Xd);const i=Xd[1],s=Xd[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Xd);const a=Xd[1],o=Xd[2];return Yd(i,a,s,o,r)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=xs(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=xs(this.getTileSize(e[0]),this.tmpSize_),a=r[0]+e[1]*s[0]*i,o=r[1]-(e[2]+1)*s[1]*i,l=a+s[0]*i,u=o+s[1]*i;return Qc(a,o,l,u,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,s){const a=this.getZForResolution(r),o=r/this.getResolution(a),l=this.getOrigin(a),u=xs(this.getTileSize(a),this.tmpSize_);let h=o*(e-l[0])/r/u[0],f=o*(l[1]-t)/r/u[1];return i?(h=Lc(h,_c)-1,f=Lc(f,_c)-1):(h=k_(h,_c),f=k_(f,_c)),lx(a,h,f,s)}getTileCoordForXYAndZ_(e,t,r,i,s){const a=this.getOrigin(r),o=this.getResolution(r),l=xs(this.getTileSize(r),this.tmpSize_);let u=(e-a[0])/o/l[0],h=(a[1]-t)/o/l[1];return i?(u=Lc(u,_c)-1,h=Lc(h,_c)-1):(u=k_(u,_c),h=k_(h,_c)),lx(r,u,h,s)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const r=Ev(this.resolutions_,e,t||0);return Yn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return XO(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function WD(n){let e=n.getDefaultTileGrid();return e||(e=H$(n),n.setDefaultTileGrid(e)),e}function z$(n,e,t){const r=e[0],i=n.getTileCoordCenter(e),s=fA(t);if(!Ah(s,i)){const a=tn(s),o=Math.ceil((s[0]-i[0])/a);return i[0]+=a*o,n.getTileCoordForCoordAndZ(i,r)}return e}function $$(n,e,t,r){r=r!==void 0?r:"top-left";const i=HD(n,e,t);return new $D({extent:n,origin:dB(n,r),resolutions:i,tileSize:t})}function W$(n){const e=n||{},t=e.extent||Bn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:HD(t,e.maxZoom,e.tileSize,e.maxResolution)};return new $D(r)}function HD(n,e,t,r){e=e!==void 0?e:w$,t=xs(t!==void 0?t:cA);const i=kr(n),s=tn(n);r=r>0?r:Math.max(s/t[0],i/t[1]);const a=e+1,o=new Array(a);for(let l=0;l<a;++l)o[l]=r/Math.pow(2,l);return o}function H$(n,e,t,r){const i=fA(n);return $$(i,e,t,r)}function fA(n){n=Bn(n);let e=n.getExtent();if(!e){const t=180*Qf.degrees/n.getMetersPerUnit();e=Qc(-t,-t,t,t)}return e}function gA(n,e){const t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});const r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}const K$=/\{z\}/g,Y$=/\{x\}/g,X$=/\{y\}/g,q$=/\{-y\}/g;function Z$(n,e,t,r,i){return n.replace(K$,e.toString()).replace(Y$,t.toString()).replace(X$,r.toString()).replace(q$,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function Q$(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const r=t[1].charCodeAt(0),i=t[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function J$(n,e){return(function(t,r,i){if(!t)return;let s;const a=t[0];if(e){const o=e.getFullTileRange(a);o&&(s=o.getHeight()-1)}return Z$(n,a,t[1],t[2],s)})}function eW(n,e){const t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=J$(n[i],e);return tW(r)}function tW(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;const i=zD(e),s=zc(i,n.length);return n[s](e,t,r)})}class nW extends nA{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&xs(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||yn(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,s,a){return Ft()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:WD(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(t),a=xs(i.getTileSize(e),this.tmpSize);return s==1?a:lz(a,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=z$(i,e,r)),D$(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class rW extends Wo{constructor(e,t){super(e),this.tile=t}}const L2={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class mA extends nW{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===mA.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,r=yn(t),i=t.getState();let s;i==kt.LOADING?(this.tileLoadingKeys_[r]=!0,s=L2.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==kt.ERROR?L2.TILELOADERROR:i==kt.LOADED?L2.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new rW(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Q$(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(eW(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}}class KD extends mA{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:YD,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:jD,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!xh(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||xh(t,e)))return this.tileGrid;const r=yn(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=WD(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,s,a){const o=[e,t,r],l=this.getTileCoordForTileUrlFunction(o,s),u=l?this.tileUrlFunction(l,i,s):void 0,h=new this.tileClass(o,u!==void 0?kt.IDLE:kt.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(zt.CHANGE,this.handleTileChange.bind(this)),h}getTile(e,t,r,i,s,a){const o=this.getProjection();if(!o||!s||xh(o,s))return this.getTileInternal(e,t,r,i,o||s);const l=[e,t,r],u=this.getKey(),h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new UD(o,h,s,f,l,g,this.getTilePixelRatio(i),this.getGutter(),(E,x,w,T)=>this.getTileInternal(E,x,w,T,o,a),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=u,p}getTileInternal(e,t,r,i,s,a){const o=this.getKey(),l=xy(this,o,e,t,r);if(a&&a.containsKey(l))return a.get(l);const u=this.createTile_(e,t,r,i,s,o);return a?.set(l,u),u}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const r=Bn(e);if(r){const i=yn(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}}function YD(n,e){if(Hs){const t=n.getCrossOrigin();let r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const a=n.getImage();a.width=s.width,a.height=s.height,a.getContext("2d").drawImage(s,0,0),s.close?.(),a.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}class hf extends KD{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:W$({extent:fA(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const iW="modulepreload",sW=function(n){return"/detectorapp-nl/"+n},xk={},dt=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=a?.nonce||a?.getAttribute("nonce");i=l(t.map(u=>{if(u=sW(u),u in xk)return;xk[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":iW,h||(g.as="script"),g.crossOrigin="",g.href=u,o&&g.setAttribute("nonce",o),document.head.appendChild(g),h)return new Promise((p,E)=>{g.addEventListener("load",p),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};class aW extends iD{constructor(e,t,r,i,s,a,o){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let u=t.getExtent();u&&t.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const h=u?xl(r,u):r,f=jo(h),g=ox(e,t,f,i),p=BD,E=new GD(e,t,h,l,g*p,i),x=E.calculateSourceExtent(),w=S0(x)?null:a(x,g,s),T=w?pt.IDLE:pt.EMPTY,R=w?w.getPixelRatio():1;super(r,i,R,T),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=E,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=w,this.sourcePixelRatio_=R,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==pt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==pt.LOADED){const t=tn(this.targetExtent_)/this.targetResolution_,r=kr(this.targetExtent_)/this.targetResolution_;this.canvas_=VD(t,r,this.sourcePixelRatio_,rT(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==pt.IDLE){this.state=pt.LOADING,this.changed();const e=this.sourceImage_.getState();e==pt.LOADED||e==pt.ERROR?this.reproject_():(this.sourceListenerKey_=hn(this.sourceImage_,zt.CHANGE,t=>{const r=this.sourceImage_.getState();(r==pt.LOADED||r==pt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){Wn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const jc=4,O2={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class oW extends Wo{constructor(e,t){super(e),this.image=t}}class lW extends nA{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const r=Ev(t,e,0);e=t[r]}return e}getImage(e,t,r,i){const s=this.getProjection();if(!s||!i||xh(s,i))return s&&(i=s),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&xh(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&Zf(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new aW(s,i,e,t,r,(a,o,l)=>this.getImageInternal(a,o,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){const s=XD(e,t,r,1),a=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Nc(this.wantedExtent_,s)||Nc(this.image.getExtent(),s))&&(this.wantedResolution_&&rT(this.wantedResolution_)===a||rT(this.image.getResolution())===a)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=a,this.image=new iD(s,a,r,this.loader),this.image.addEventListener(zt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let r;switch(t.getState()){case pt.LOADING:this.loading=!0,r=O2.IMAGELOADSTART;break;case pt.LOADED:this.loading=!1,r=O2.IMAGELOADEND;break;case pt.ERROR:this.loading=!1,r=O2.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new oW(r,t))}}function cW(n,e){n.getImage().src=e}function XD(n,e,t,r){const i=e/t,s=jo(n),a=Lc(tn(n)/i,jc),o=Lc(kr(n)/i,jc),l=Lc((r-1)*a/2,jc),u=a+2*l,h=Lc((r-1)*o/2,jc),f=o+2*h;return Hy(s,i,0,[u,f])}function uW(n,e,t,r,i,s){const a=i.getCode().split(/:(?=\d+$)/).pop(),o=t/r,l=[Ky(tn(e)/o,jc),Ky(kr(e)/o,jc)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=a,s.IMAGESR=a,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const u=n.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return gA(u,s)}function hW(n){const e=n.load?n.load:aD,t=Bn(n.projection||"EPSG:3857"),r=n.ratio??1.5,i=n.crossOrigin??null;return function(s,a,o){o=n.hidpi?o:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,n.params),s=XD(s,a,o,r);const u=uW(n.url,s,a,o,t,l),h=new Image;return h.crossOrigin=i,e(h,u).then(f=>{const g=tn(s)/f.width*o;return{image:f,extent:s,resolution:g,pixelRatio:o}})}}class dW extends lW{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:cW,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,t,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=hW({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,a)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,a),aD(s))})),super.getImageInternal(e,t,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const iT="1.3.0";function fW(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];const s=r.getAxisOrientation(),a=NO(i.VERSION,"1.3")>=0;i[a?"CRS":"SRS"]=r.getCode();const o=a&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=o.join(","),gA(n,i)}function gW(n,e,t,r,i,s,a){s=Object.assign({REQUEST:"GetMap"},s);const o=e/t,l=[Ky(tn(n)/o,jc),Ky(kr(n)/o,jc)];if(t!=1)switch(a){case"geoserver":const h=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+h:s.FORMAT_OPTIONS="dpi:"+h;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return fW(i,n,l,r,s)}function vk(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:iT,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}const mW='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class pW extends hf{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[mW];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,a)=>{const o=s.getImage();!Hs&&o instanceof HTMLImageElement&&(o.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||YD)(s,a)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const cx=1/0;class _W{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Mp(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){Cn(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=cx?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,r=this.priorities_,i=t.length,s=t[e],a=r[e],o=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),h=u<i&&r[u]<r[l]?u:l;t[e]=t[h],r[e]=r[h],e=h}t[e]=s,r[e]=a,this.siftDown_(o,e)}siftDown_(e,t){const r=this.elements_,i=this.priorities_,s=r[t],a=i[t];for(;t>e;){const o=this.getParentIndex_(t);if(i[o]>a)r[t]=r[o],i[t]=i[o],t=o;else break}r[t]=s,i[t]=a}reprioritize(){const e=this.priorityFunction_,t=this.elements_,r=this.priorities_;let i=0;const s=t.length;let a,o,l;for(o=0;o<s;++o)a=t[o],l=e(a),l==cx?delete this.queuedElements_[this.keyFunction_(a)]:(r[i]=l,t[i++]=a);t.length=i,r.length=i,this.heapify_()}}class yW extends _W{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(zt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,r=t.getState();if(r===kt.LOADED||r===kt.ERROR||r===kt.EMPTY){r!==kt.ERROR&&t.removeEventListener(zt.CHANGE,this.boundHandleTileChange_);const i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===kt.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function xW(n,e,t,r,i){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return cx;const s=n.viewState.center,a=r[0]-s[0],o=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(a*a+o*o)/i}class vW extends KD{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Xs(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){const s=Bn(r),a=this.getProjection()||s;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(a));const l=jp(e,s,a),u=ox(a,s,e,t),h=o.getZForResolution(u,this.zDirection),f=o.getResolution(h),g=o.getTileCoordForCoordAndZ(l,h);if(o.getResolutions().length<=g[0])return;let p=o.getTileCoordExtent(g,this.tmpExtent_);const E=this.gutter_;E!==0&&(p=Vm(p,f*E,p));const x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,vk(this.params_,"GetFeatureInfo"),i);const w=Math.floor((l[0]-p[0])/f),T=Math.floor((p[3]-l[1])/f);return x[this.v13_?"I":"X"]=w,x[this.v13_?"J":"Y"]=T,this.getRequestUrl_(g,p,1,a||s,x)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:iT,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,t),gA(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,s){const a=this.urls;if(!a)return;let o;if(a.length==1)o=a[0];else{const l=zc(zD(e),a.length);o=a[l]}return gW(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,o,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||iT;this.v13_=NO(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=i.getResolution(e[0]);let a=i.getTileCoordExtent(e,this.tmpExtent_);const o=this.gutter_;o!==0&&(a=Vm(a,s*o,a));const l=Object.assign({},vk(this.params_,"GetMap"));return this.getRequestUrl_(e,a,t,r,l)}}class df extends Wo{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}}class Sc extends df{constructor(e,t,r,i,s,a){super(e,t,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const fr={SINGLECLICK:"singleclick",CLICK:zt.CLICK,DBLCLICK:zt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},sT={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class EW extends Np{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=hn(r,sT.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=hn(r,sT.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(zt.TOUCHMOVE,this.boundHandleTouchMove_,tD?{passive:!1}:!1)}emulateClick_(e){let t=new Sc(fr.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Sc(fr.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Sc(fr.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const t=e,r=t.pointerId;if(t.type==fr.POINTERUP||t.type==fr.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==fr.POINTERDOWN||t.type==fr.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Sc(fr.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Wn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Sc(fr.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(hn(r,fr.POINTERMOVE,this.handlePointerMove_,this),hn(r,fr.POINTERUP,this.handlePointerUp_,this),hn(this.element_,fr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(hn(this.element_.getRootNode(),fr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Sc(fr.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Sc(fr.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Wn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(zt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Wn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Wn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Tc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Mi={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class jv extends Ho{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)Wn(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==jm&&this.listenerKeys.push(hn(e,Tc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class wW extends jv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",a=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const o=e.label!==void 0?e.label:"i";typeof o=="string"?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(zt.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+Gp+" "+QI+(this.collapsed_&&this.collapsible_?" "+F4:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!t.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(i=>SO(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!pu(t,this.renderedAttributions_)){mU(this.ulElement_);for(let i=0,s=t.length;i<s;++i){const a=document.createElement("li");a.innerHTML=t[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(F4),this.collapsed_?O4(this.collapseLabel_,this.label_):O4(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class SW extends jv{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",a=document.createElement("button");a.className=t+"-reset",a.setAttribute("type","button"),a.title=s,a.appendChild(this.label_),a.addEventListener(zt.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+Gp+" "+QI,l=this.element;l.className=o,l.appendChild(a),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(L_)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:I0}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const r=t.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(L_);!s&&r===0?this.element.classList.add(L_):s&&r!==0&&this.element.classList.remove(L_)}this.label_.style.transform=i}this.rotation_=r}}class TW extends jv{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",a=e.zoomInLabel!==void 0?e.zoomInLabel:"+",o=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=i,h.setAttribute("type","button"),h.title=l,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(zt.CLICK,this.handleClick_.bind(this,r),!1);const f=document.createElement("button");f.className=s,f.setAttribute("type","button"),f.title=u,f.appendChild(typeof o=="string"?document.createTextNode(o):o),f.addEventListener(zt.CLICK,this.handleClick_.bind(this,-r),!1);const g=t+" "+Gp+" "+QI,p=this.element;p.className=g,p.appendChild(h),p.appendChild(f),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:I0})):r.setZoom(s)}}}function IW(n){n=n||{};const e=new pa;return(n.zoom===void 0||n.zoom)&&e.push(new TW(n.zoomOptions)),(n.rotate===void 0||n.rotate)&&e.push(new SW(n.rotateOptions)),(n.attribution===void 0||n.attribution)&&e.push(new wW(n.attributionOptions)),e}class AW{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[t]-this.points_[r],a=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(a,s),this.initialVelocity_=Math.sqrt(s*s+a*a)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Ek={ACTIVE:"active"};class Kp extends Ho{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ek.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Ek.ACTIVE,e)}setMap(e){this.map_=e}}function RW(n,e,t){const r=n.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:_$,center:n.getConstrainedCenter(i)})}}function pA(n,e,t,r){const i=n.getZoom();if(i===void 0)return;const s=n.getConstrainedZoom(i+e),a=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:a,anchor:t,duration:r!==void 0?r:250,easing:I0})}class bW extends Kp{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==fr.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,a=r.shiftKey?-this.delta_:this.delta_,o=i.getView();pA(o,a,s,this.duration_),r.preventDefault(),t=!0}return!t}}function aT(n){const e=arguments;return function(t){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](t),!!r);++i);return r}}const CW=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},PW=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},qD=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?PW(n):!0},kW=Fm,ZD=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(fU&&JO&&e.ctrlKey)},QD=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},MW=function(n){const e=n.originalEvent;return JO?e.metaKey:e.ctrlKey},NW=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},JD=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},D2=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},LW=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Yp extends Kp{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==fr.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==fr.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==fr.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==fr.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function _A(n){const e=n.length;let t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}class OW extends Yp{constructor(e){super({stopDown:wv}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:aT(QD,LW);this.condition_=e.onFocusOnly?aT(qD,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const r=this.targetPointers,i=t.getEventPixel(_A(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],o=e.map.getView();yB(s,o.getResolution()),OI(s,o.getRotation()),o.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),a=r.getCenterInternal(),o=t.getPixelFromCoordinateInternal(a),l=t.getCoordinateFromPixelInternal([o[0]-i*Math.cos(s),o[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:I0})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DW extends Yp{constructor(e){e=e||{},super({stopDown:wv}),this.condition_=e.condition?e.condition:CW,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!D2(e))return;const t=e.map,r=t.getView();if(r.getConstraints().rotation===lA)return;const i=t.getSize(),s=e.pixel,a=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const o=a-this.lastAngle_;r.adjustRotationInternal(-o)}this.lastAngle_=a}handleUpEvent(e){return D2(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return D2(e)&&ZD(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class FW extends vv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ja([i])}getGeometry(){return this.geometry_}}const qd={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Mg extends Wo{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}}class jW extends Yp{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new FW(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??ZD,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){const i=r[0]-t[0],s=r[1]-t[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Mg(qd.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Mg(t?qd.BOXEND:qd.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Mg(qd.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Mg(qd.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Mg(qd.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class VW extends jW{constructor(e){e=e||{};const t=e.condition?e.condition:NW;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),a=r.getResolutionForExtentInternal(s),o=r.getResolution()/a;i=i.clone(),i.scale(o*o)}r.fitInternal(i,{duration:this.duration_,easing:I0})}}const Wu={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class GW extends Kp{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return QD(t)&&JD(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==zt.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Wu.DOWN||i==Wu.LEFT||i==Wu.RIGHT||i==Wu.UP)){const a=e.map.getView(),o=a.getResolution()*this.pixelDelta_;let l=0,u=0;i==Wu.DOWN?u=-o:i==Wu.LEFT?l=-o:i==Wu.RIGHT?l=o:u=o;const h=[l,u];OI(h,a.getRotation()),RW(a,h,this.duration_),r.preventDefault(),t=!0}}return!t}}class BW extends Kp{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!MW(t)&&JD(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==zt.KEYDOWN||e.type==zt.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,a=i==="+"?this.delta_:-this.delta_,o=s.getView();pA(o,a,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}}const UW=40,zW=300;class $W extends Kp{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:kW;this.condition_=e.onFocusOnly?aT(qD,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==zt.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=UW;break;case WheelEvent.DOM_DELTA_PAGE:s*=zW;break}if(s===0)return!1;this.lastDelta_=s;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const o=r.getView();if(this.mode_==="trackpad"&&!(o.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=a,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Yn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),pA(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class WW extends Yp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wv),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const a=e.map,o=a.getView();o.getConstraints().rotation!==lA&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(_A(this.targetPointers))),this.rotating_&&(a.render(),o.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class HW extends Yp{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wv),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,a=r.clientY-i.clientY,o=Math.sqrt(s*s+a*a);this.lastDistance_!==void 0&&(t=this.lastDistance_/o),this.lastDistance_=o;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(_A(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function KW(n){n=n||{};const e=new pa,t=new AW(-.005,.05,100);return(n.altShiftDragRotate===void 0||n.altShiftDragRotate)&&e.push(new DW),(n.doubleClickZoom===void 0||n.doubleClickZoom)&&e.push(new bW({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan===void 0||n.dragPan)&&e.push(new OW({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate===void 0||n.pinchRotate)&&e.push(new WW),(n.pinchZoom===void 0||n.pinchZoom)&&e.push(new HW({duration:n.zoomDuration})),(n.keyboard===void 0||n.keyboard)&&(e.push(new GW),e.push(new BW({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom===void 0||n.mouseWheelZoom)&&e.push(new $W({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom===void 0||n.shiftDragZoom)&&e.push(new VW({duration:n.zoomDuration})),e}class YW extends vv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ft()}calculateMatrices2D(e){const t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Vo(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),$O(i,r)}forEachFeatureAtCoordinate(e,t,r,i,s,a,o,l){let u;const h=t.viewState;function f(N,j,B,P){return s.call(a,j,N?B:null,P)}const g=h.projection,p=LO(e.slice(),g),E=[[0,0]];if(g.canWrapX()&&i){const N=g.getExtent(),j=tn(N);E.push([-j,0],[j,0])}const x=t.layerStatesArray,w=x.length,T=[],R=[];for(let N=0;N<E.length;N++)for(let j=w-1;j>=0;--j){const B=x[j],P=B.layer;if(P.hasRenderer()&&uA(B,h)&&o.call(l,P)){const C=P.getRenderer(),M=P.getSource();if(C&&M){const F=M.getWrapX()?p:e,O=f.bind(null,B.managed);R[0]=F[0]+E[N][0],R[1]=F[1]+E[N][1],u=C.forEachFeatureAtCoordinate(R,t,r,O,T)}if(u)return u}}if(T.length===0)return;const k=1/T.length;return T.forEach((N,j)=>N.distanceSq+=j*k),T.sort((N,j)=>N.distanceSq-j.distanceSq),T.some(N=>u=N.callback(N.feature,N.layer,N.geometry)),u}hasFeatureAtCoordinate(e,t,r,i,s,a){return this.forEachFeatureAtCoordinate(e,t,r,i,Fm,this,s,a)!==void 0}getMap(){return this.map_}renderFrame(e){Ft()}scheduleExpireIconCache(e){ya.canExpireCache()&&e.postRenderFunctions.push(XW)}}function XW(n,e){ya.expire()}class qW extends YW{constructor(e){super(e),this.fontChangeListenerKey_=hn(lf,qf.PROPERTYCHANGE,e.redrawText,e),this.element_=Hs?nD():document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Gp+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const r=this.getMap();if(r.hasListener(e)){const i=new AD(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){Wn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(_a.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,h)=>u.zIndex-h.zIndex);t.some(u=>u.layer instanceof DD&&u.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let a=null;for(let u=0,h=t.length;u<h;++u){const f=t[u];e.layerIndex=u;const g=f.layer,p=g.getSourceState();if(!uA(f,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const E=g.render(e,a);E&&(E!==a&&(this.children_.push(E),a=E),s.push(f))}this.declutter(e,s),pU(this.element_,this.children_);const l=this.getMap().getTargetElement();if(Dc(l)){const u=l.getContext("2d");for(const h of this.children_){const f=h.firstElementChild||h,g=h.style.backgroundColor;if(g&&(!Dc(f)||f.width>0)&&(u.fillStyle=g,u.fillRect(0,0,l.width,l.height)),Dc(f)&&f.width>0){const p=h.style.opacity||f.style.opacity;u.globalAlpha=p===""?1:Number(p);const E=f.style.transform;if(E)u.setTransform(...KS(E));else{const x=parseFloat(f.style.width)/f.width,w=parseFloat(f.style.height)/f.height;u.setTransform(x,0,0,w,0,0)}u.drawImage(f,0,0)}}u.globalAlpha=1,u.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(_a.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){const i=t[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}}function e5(n){if(n instanceof Wp){n.setMapInternal(null);return}n instanceof Fv&&n.getLayers().forEach(e5)}function t5(n,e){if(n instanceof Wp){n.setMapInternal(e);return}if(n instanceof Fv){const t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)t5(t[r],e)}}let ZW=class extends Ho{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=QW(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:gU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ka(),this.pixelToCoordinateTransform_=Ka(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Hs||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Hs||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Hs?new pa:IW()),this.interactions=t.interactions||(Hs?new pa:KW({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new yW(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Mi.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Mi.VIEW,this.handleViewChanged_),this.addChangeListener(Mi.SIZE,this.handleSizeChanged_),this.addChangeListener(Mi.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const r=this;e.view&&!(e.view instanceof Io)&&e.view.then(function(i){r.setView(new Io(i))}),this.controls.addEventListener(fs.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(fs.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(fs.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(fs.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(fs.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(fs.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){t5(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,a=r.layerFilter!==void 0?r.layerFilter:Fm,o=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,o,t,null,a,null)}getFeaturesAtPixel(e,t){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){const e=[];function t(r){r.forEach(function(i){i instanceof Fv?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const i=t.layerFilter!==void 0?t.layerFilter:Fm,s=t.hitTolerance!==void 0?t.hitTolerance:0,a=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,a,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],a=r.height/i[1],o="changedTouches"in e?e.changedTouches[0]:e;return[(o.clientX-r.left)/s,(o.clientY-r.top)/a]}getTarget(){return this.get(Mi.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return HS(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?$r(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Mi.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof pa){t.setLayers(e);return}const r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){const i=e[t];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const a=i.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(e){const t=hl(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?$r(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Mi.SIZE)}getView(){return this.get(Mi.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return xW(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;const r=new Sc(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,r=t.type;if(r===sT.POINTERDOWN||r===zt.WHEEL||r===zt.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,a=t.target,o=s instanceof ShadowRoot?s.host===a?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(a)||!o.contains(a))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const a=i[s];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const a=e.viewHints;if(a[ti.ANIMATING]||a[ti.INTERACTING]){const o=Date.now()-e.time>8;i=o?0:8,s=o?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(_a.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(_a.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new df(Tc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new df(Tc.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)Wn(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(zt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(zt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Dc(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Dc(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new qW(this)),!Dc(t)){this.mapBrowserEventHandler_=new EW(this,this.moveTolerance_);for(const i in fr)this.mapBrowserEventHandler_.addEventListener(fr[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(zt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(zt.WHEEL,this.boundHandleBrowserEvent_,tD?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[hn(r,zt.KEYDOWN,this.handleBrowserEvent,this),hn(r,zt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){const i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Wn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Wn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=hn(e,qf.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=hn(e,zt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Wn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Ac("addlayer",e)),this.layerGroupPropertyListenerKeys_=[hn(e,qf.PROPERTYCHANGE,this.render,this),hn(e,zt.CHANGE,this.render,this),hn(e,"addlayer",this.handleLayerAdd_,this),hn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){const i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){e5(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(t!==void 0&&X4(t)&&r&&r.isDef()){const a=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Hy(o.center,o.resolution,o.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:o,viewHints:a,wantedTiles:{},mapId:yn(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const l=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=Hy(o.nextCenter,o.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!S0(this.previousExtent_)&&!Zf(s.extent,this.previousExtent_))&&(this.dispatchEvent(new df(Tc.MOVESTART,this,i)),this.previousExtent_=Op(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ti.ANIMATING]&&!s.viewHints[ti.INTERACTING]&&!Zf(s.extent,this.previousExtent_)&&(this.dispatchEvent(new df(Tc.MOVEEND,this,s)),IO(s.extent,this.previousExtent_))),this.dispatchEvent(new df(Tc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Tc.LOADSTART)||this.hasListener(Tc.LOADEND)||this.hasListener(_a.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Ac("removelayer",t)),this.set(Mi.LAYERGROUP,e)}setSize(e){this.set(Mi.SIZE,e)}setTarget(e){this.set(Mi.TARGET,e)}setView(e){if(!e||e instanceof Io){this.set(Mi.VIEW,e);return}this.set(Mi.VIEW,new Io);const t=this;e.then(function(r){t.setView(new Io(r))})}updateSize(){const e=this.getTargetElement();let t;if(e){let i,s;if(Dc(e))i=e.width,s=e.height;else{const a=getComputedStyle(e);i=e.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),s=e.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(t=[Math.max(0,i),Math.max(0,s)],!X4(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&DO("No map visible because the map container's width or height are 0."))}const r=this.getSize();t&&(!r||!pu(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function QW(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Fv({layers:n.layers});t[Mi.LAYERGROUP]=r,t[Mi.TARGET]=n.target,t[Mi.VIEW]=n.view instanceof Io?n.view:new Io;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new pa(n.controls.slice()):(Cn(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new pa(n.interactions.slice()):(Cn(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let a;return n.overlays!==void 0?Array.isArray(n.overlays)?a=new pa(n.overlays.slice()):(Cn(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),a=n.overlays):a=new pa,{controls:i,interactions:s,keyboardEventTarget:e,overlays:a,values:t}}const F2="units",JW=[1,2,5],Ng=25.4/.28;class eH extends jv{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+Gp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(F2,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(F2)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(F2,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let a=Qy(r,e.resolution,t,s);const o=this.minWidth_*(this.dpi_||Ng)/Ng,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Ng)/Ng:void 0;let u=o*a,h="";if(i=="degrees"){const k=Qf.degrees;u*=k,u<k/60?(h="",a*=3600):u<k?(h="",a*=60):h=""}else if(i=="imperial")u<.9144?(h="in",a/=.0254):u<1609.344?(h="ft",a/=.3048):(h="mi",a/=1609.344);else if(i=="nautical")a/=1852,h="NM";else if(i=="metric")u<1e-6?(h="nm",a*=1e9):u<.001?(h="m",a*=1e6):u<1?(h="mm",a*=1e3):u<1e3?h="m":(h="km",a/=1e3);else if(i=="us")u<.9144?(h="in",a*=39.37):u<1609.344?(h="ft",a/=.30480061):(h="mi",a/=1609.3472);else throw new Error("Invalid units");let f=3*Math.floor(Math.log(o*a)/Math.log(10)),g,p,E,x=0,w,T;for(;;){E=Math.floor(f/3);const k=Math.pow(10,E);if(g=JW[(f%3+3)%3]*k,p=Math.round(g/a),isNaN(p)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&p>=l){g=x,p=w,E=T;break}else if(p>=o)break;x=g,w=p,T=E,++f}const R=this.scaleBar_?this.createScaleBar(p,g,h):g.toFixed(E<0?-E:0)+" "+h;this.renderedHTML_!=R&&(this.innerElement_.innerHTML=R,this.renderedHTML_=R),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),a=this.scaleBarSteps_,o=e/a,l=[this.createMarker("absolute")];for(let h=0;h<a;++h){const f=h%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${f}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(h%2===0||a===2?this.createStepText(h,e,!1,t,r):"")+"</div>")}return l.push(this.createStepText(a,e,!0,t,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,r,i,s){const o=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${r?t+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const e=Qy(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Ng,r=1e3/25.4;return e*r*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const tH={},wk=n=>{let e;const t=new Set,r=(h,f)=>{const g=typeof h=="function"?h(e):h;if(!Object.is(g,e)){const p=e;e=f??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(E=>E(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h)),destroy:()=>{(tH?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(r,i,l);return l},nH=n=>n?wk(n):wk;var j2={exports:{}},V2={},G2={exports:{}},B2={};var Sk;function rH(){if(Sk)return B2;Sk=1;var n=kp();function e(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,i=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function o(f,g){var p=g(),E=r({inst:{value:p,getSnapshot:g}}),x=E[0].inst,w=E[1];return s(function(){x.value=p,x.getSnapshot=g,l(x)&&w({inst:x})},[f,p,g]),i(function(){return l(x)&&w({inst:x}),f(function(){l(x)&&w({inst:x})})},[f]),a(p),p}function l(f){var g=f.getSnapshot;f=f.value;try{var p=g();return!t(f,p)}catch{return!0}}function u(f,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return B2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:h,B2}var Tk;function iH(){return Tk||(Tk=1,G2.exports=rH()),G2.exports}var Ik;function sH(){if(Ik)return V2;Ik=1;var n=kp(),e=iH();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,o=n.useMemo,l=n.useDebugValue;return V2.useSyncExternalStoreWithSelector=function(u,h,f,g,p){var E=s(null);if(E.current===null){var x={hasValue:!1,value:null};E.current=x}else x=E.current;E=o(function(){function T(B){if(!R){if(R=!0,k=B,B=g(B),p!==void 0&&x.hasValue){var P=x.value;if(p(P,B))return N=P}return N=B}if(P=N,r(k,B))return P;var C=g(B);return p!==void 0&&p(P,C)?(k=B,P):(k=B,N=C)}var R=!1,k,N,j=f===void 0?null:f;return[function(){return T(h())},j===null?void 0:function(){return T(j())}]},[h,f,g,p]);var w=i(u,E[0],E[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),l(w),w},V2}var Ak;function aH(){return Ak||(Ak=1,j2.exports=sH()),j2.exports}var oH=aH();const lH=MI(oH),n5={},{useDebugValue:cH}=rB,{useSyncExternalStoreWithSelector:uH}=lH;let Rk=!1;const hH=n=>n;function dH(n,e=hH,t){(n5?"production":void 0)!=="production"&&t&&!Rk&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Rk=!0);const r=uH(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return cH(r),r}const fH=n=>{(n5?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?nH(n):n,t=(r,i)=>dH(e,r,i);return Object.assign(t,e),t},Sa=n=>fH;var r5=Symbol.for("immer-nothing"),bk=Symbol.for("immer-draftable"),qs=Symbol.for("immer-state");function Ba(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Xm=Object.getPrototypeOf;function r0(n){return!!n&&!!n[qs]}function Mh(n){return n?i5(n)||Array.isArray(n)||!!n[bk]||!!n.constructor?.[bk]||Xp(n)||Gv(n):!1}var gH=Object.prototype.constructor.toString(),Ck=new WeakMap;function i5(n){if(!n||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);if(e===null||e===Object.prototype)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(t===Object)return!0;if(typeof t!="function")return!1;let r=Ck.get(t);return r===void 0&&(r=Function.toString.call(t),Ck.set(t,r)),r===gH}function ux(n,e,t=!0){Vv(n)===0?(t?Reflect.ownKeys(n):Object.keys(n)).forEach(i=>{e(i,n[i],n)}):n.forEach((r,i)=>e(i,r,n))}function Vv(n){const e=n[qs];return e?e.type_:Array.isArray(n)?1:Xp(n)?2:Gv(n)?3:0}function oT(n,e){return Vv(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function s5(n,e,t){const r=Vv(n);r===2?n.set(e,t):r===3?n.add(t):n[e]=t}function mH(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Xp(n){return n instanceof Map}function Gv(n){return n instanceof Set}function Zu(n){return n.copy_||n.base_}function lT(n,e){if(Xp(n))return new Map(n);if(Gv(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=i5(n);if(e===!0||e==="class_only"&&!t){const r=Object.getOwnPropertyDescriptors(n);delete r[qs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],o=r[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[a]})}return Object.create(Xm(n),r)}else{const r=Xm(n);if(r!==null&&t)return{...n};const i=Object.create(r);return Object.assign(i,n)}}function yA(n,e=!1){return Bv(n)||r0(n)||!Mh(n)||(Vv(n)>1&&Object.defineProperties(n,{set:B_,add:B_,clear:B_,delete:B_}),Object.freeze(n),e&&Object.values(n).forEach(t=>yA(t,!0))),n}function pH(){Ba(2)}var B_={value:pH};function Bv(n){return n===null||typeof n!="object"?!0:Object.isFrozen(n)}var _H={};function Nh(n){const e=_H[n];return e||Ba(0,n),e}var qm;function a5(){return qm}function yH(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Pk(n,e){e&&(Nh("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function cT(n){uT(n),n.drafts_.forEach(xH),n.drafts_=null}function uT(n){n===qm&&(qm=n.parent_)}function kk(n){return qm=yH(qm,n)}function xH(n){const e=n[qs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Mk(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[qs].modified_&&(cT(e),Ba(4)),Mh(n)&&(n=hx(e,n),e.parent_||dx(e,n)),e.patches_&&Nh("Patches").generateReplacementPatches_(t[qs].base_,n,e.patches_,e.inversePatches_)):n=hx(e,t,[]),cT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==r5?n:void 0}function hx(n,e,t){if(Bv(e))return e;const r=n.immer_.shouldUseStrictIteration(),i=e[qs];if(!i)return ux(e,(s,a)=>Nk(n,i,e,s,a,t),r),e;if(i.scope_!==n)return e;if(!i.modified_)return dx(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,o=!1;i.type_===3&&(a=new Set(s),s.clear(),o=!0),ux(a,(l,u)=>Nk(n,i,s,l,u,t,o),r),dx(n,s,!1),t&&n.patches_&&Nh("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function Nk(n,e,t,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const o=Bv(i);if(!(o&&!a)){if(r0(i)){const l=s&&e&&e.type_!==3&&!oT(e.assigned_,r)?s.concat(r):void 0,u=hx(n,i,l);if(s5(t,r,u),r0(u))n.canAutoFreeze_=!1;else return}else a&&t.add(i);if(Mh(i)&&!o){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;hx(n,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Xp(t)?t.has(r):Object.prototype.propertyIsEnumerable.call(t,r))&&dx(n,i)}}}function dx(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yA(e,t)}function vH(n,e){const t=Array.isArray(n),r={type_:t?1:0,scope_:e?e.scope_:a5(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=xA;t&&(i=[r],s=Zm);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}var xA={get(n,e){if(e===qs)return n;const t=Zu(n);if(!oT(t,e))return EH(n,t,e);const r=t[e];return n.finalized_||!Mh(r)?r:r===U2(n.base_,e)?(z2(n),n.copy_[e]=dT(r,n)):r},has(n,e){return e in Zu(n)},ownKeys(n){return Reflect.ownKeys(Zu(n))},set(n,e,t){const r=o5(Zu(n),e);if(r?.set)return r.set.call(n.draft_,t),!0;if(!n.modified_){const i=U2(Zu(n),e),s=i?.[qs];if(s&&s.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(mH(t,i)&&(t!==void 0||oT(n.base_,e)))return!0;z2(n),hT(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return U2(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,z2(n),hT(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Zu(n),r=Reflect.getOwnPropertyDescriptor(t,e);return r&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:r.enumerable,value:t[e]}},defineProperty(){Ba(11)},getPrototypeOf(n){return Xm(n.base_)},setPrototypeOf(){Ba(12)}},Zm={};ux(xA,(n,e)=>{Zm[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Zm.deleteProperty=function(n,e){return Zm.set.call(this,n,e,void 0)};Zm.set=function(n,e,t){return xA.set.call(this,n[0],e,t,n[0])};function U2(n,e){const t=n[qs];return(t?Zu(t):n)[e]}function EH(n,e,t){const r=o5(e,t);return r?"value"in r?r.value:r.get?.call(n.draft_):void 0}function o5(n,e){if(!(e in n))return;let t=Xm(n);for(;t;){const r=Object.getOwnPropertyDescriptor(t,e);if(r)return r;t=Xm(t)}}function hT(n){n.modified_||(n.modified_=!0,n.parent_&&hT(n.parent_))}function z2(n){n.copy_||(n.copy_=lT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var wH=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){const s=t;t=e;const a=this;return function(l=s,...u){return a.produce(l,h=>t.call(this,h,...u))}}typeof t!="function"&&Ba(6),r!==void 0&&typeof r!="function"&&Ba(7);let i;if(Mh(e)){const s=kk(this),a=dT(e,void 0);let o=!0;try{i=t(a),o=!1}finally{o?cT(s):uT(s)}return Pk(s,r),Mk(i,s)}else if(!e||typeof e!="object"){if(i=t(e),i===void 0&&(i=e),i===r5&&(i=void 0),this.autoFreeze_&&yA(i,!0),r){const s=[],a=[];Nh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else Ba(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let r,i;return[this.produce(e,t,(a,o)=>{r=a,i=o}),r,i]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),typeof n?.useStrictIteration=="boolean"&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){Mh(n)||Ba(8),r0(n)&&(n=SH(n));const e=kk(this),t=dT(n,void 0);return t[qs].isManual_=!0,uT(e),t}finishDraft(n,e){const t=n&&n[qs];(!t||!t.isManual_)&&Ba(9);const{scope_:r}=t;return Pk(r,e),Mk(void 0,r)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const i=e[t];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}t>-1&&(e=e.slice(t+1));const r=Nh("Patches").applyPatches_;return r0(n)?r(n,e):this.produce(n,i=>r(i,e))}};function dT(n,e){const t=Xp(n)?Nh("MapSet").proxyMap_(n,e):Gv(n)?Nh("MapSet").proxySet_(n,e):vH(n,e);return(e?e.scope_:a5()).drafts_.push(t),t}function SH(n){return r0(n)||Ba(10,n),l5(n)}function l5(n){if(!Mh(n)||Bv(n))return n;const e=n[qs];let t,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=lT(n,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else t=lT(n,!0);return ux(t,(i,s)=>{s5(t,i,l5(s))},r),e&&(e.finalized_=!1),t}var TH=new wH,IH=TH.produce;const AH=n=>(e,t,r)=>(r.setState=(i,s,...a)=>{const o=typeof i=="function"?IH(i):i;return e(o,s,...a)},n(r.setState,t,r)),A0=AH,Xi=Sa()(A0((n,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,config:{smoothingFactor:.2,minRotationSpeed:8,centerOnUser:!0,animationDuration:100},startTracking:()=>{n(t=>{t.tracking=!0})},stopTracking:()=>{n(t=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),t.tracking=!1,t.speed=null,t.headingSource=null,t.watchId=null})},updatePosition:t=>{n(r=>{r.position={lat:t.coords.latitude,lng:t.coords.longitude},r.accuracy=t.coords.accuracy,r.speed=t.coords.speed;const i=15,s=.5;if(!(t.coords.accuracy!==null&&t.coords.accuracy<i)){r.headingSource=null;return}if(t.coords.heading!==null&&t.coords.speed!==null&&t.coords.speed>s){r.headingSource="gps";const o=t.coords.heading;e().updateHeading(o,"gps")}else r.headingSource="compass"})},updateHeading:(t,r="compass")=>{n(i=>{const{smoothHeading:s,config:a}=e();if(s===null){i.smoothHeading=t,i.heading=t;return}let o=t-s;o>180&&(o-=360),o<-180&&(o+=360);const l=r==="compass"?5:3;if(Math.abs(o)<l)return;const h=s+o*(r==="gps"?.5:.35);i.smoothHeading=(h+360)%360,i.heading=t})},setSmoothedHeading:t=>{n(r=>{r.smoothHeading=t,r.heading=t})},setWatchId:t=>{n(r=>{r.watchId=t})},resetFirstFix:()=>{n(t=>{t.firstFix=!1})}}))),vA={"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:n}=await dt(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createAHNLayerOL:e}},[]);return n()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:n}=await dt(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createGeomorfologieLayerOL:e}},[]);return n()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:n}=await dt(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createBodemkaartLayerOL:e}},[]);return n()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:n}=await dt(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createIKAWLayerOL:e}},[]);return n()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:n}=await dt(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createFAMKESteentijdLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Landschappen":{name:"Archeo Landschappen",factory:async()=>{const{createArcheoLandschappenLayerOL:n}=await dt(async()=>{const{createArcheoLandschappenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createArcheoLandschappenLayerOL:e}},[]);return n()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:n}=await dt(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createEssenLayerOL:e}},[]);return n()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:n}=await dt(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createRijksmonumentenLayerOL:e}},[]);return n()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:n}=await dt(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return n()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:n}=await dt(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createWerelderfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:n}=await dt(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-Y9yK-WkX.js");return{createTerpenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:n}=await dt(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-CGKHSGxT.js");return{createLiniesLayerOL:e}},[]);return n()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:n}=await dt(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-CGKHSGxT.js");return{createInundatiesLayerOL:e}},[]);return n()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:n}=await dt(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-CGKHSGxT.js");return{createMilitaireObjectenLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:n}=await dt(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo800ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:n}=await dt(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo100ncLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:n}=await dt(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:n}=await dt(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo1500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:n}=await dt(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo2750vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:n}=await dt(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo5500vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:n}=await dt(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-C-TY6Oof.js");return{createPaleo9000vcLayerOL:e}},[]);return n()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:n}=await dt(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-SL5bXs6_.js");return{createReligieusErfgoedLayerOL:e}},[]);return n()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:n}=await dt(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-DjUUHHUs.js");return{createAHN4ColorElevationLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:n}=await dt(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-DjUUHHUs.js");return{createAHN4HillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:n}=await dt(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-DjUUHHUs.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:n}=await dt(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createGewaspercelenLayerOL:e}},[]);return n()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:n}=await dt(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createKadastraleKaartLayerOL:e}},[]);return n()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:n}=await dt(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createScheepswrakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:n}=await dt(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createWoonheuvelsLayerOL:e}},[]);return n()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:n}=await dt(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createRomeinseFortenLayerOL:e}},[]);return n()},immediateLoad:!0},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:n}=await dt(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createWindmolensLayerOL:e}},[]);return n()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:n}=await dt(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createErfgoedlijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:n}=await dt(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createOudeKernenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenkaartPuntenLayerOL:n}=await dt(async()=>{const{createRelictenkaartPuntenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createRelictenkaartPuntenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:n}=await dt(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return n()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:n}=await dt(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return n()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:n}=await dt(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-CUo-Hl06.js");return{createVerdronkenDorpenLayerOL:e}},[]);return n()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:n}=await dt(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:n}=await dt(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKRomeinsLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:n}=await dt(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKSteentijdLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:n}=await dt(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKVroegeMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:n}=await dt(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKLateMELayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:n}=await dt(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-DSCwfbLw.js");return{createAMKOverigLayerOL:e}},__vite__mapDeps([0,1]));return n()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:n}=await dt(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-DaIjOohB.js");return{createRomeinseWegenLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:n}=await dt(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-DaIjOohB.js");return{createRomeinseWegenWereldLayerOL:e}},__vite__mapDeps([2,1]));return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:n}=await dt(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-DzQLu8fL.js");return{createKastelenLayerOL:e}},__vite__mapDeps([3,4]));return n()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:n}=await dt(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-B9oYBSUr.js");return{createRuinesLayerOL:e}},__vite__mapDeps([5,4]));return n()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:n}=await dt(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-BbNX6bZU.js");return{createVeengebiedenLayerOL:e}},[]);return n()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:n}=await dt(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-ChIpMlKN.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([6,4]));return n()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:n}=await dt(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-CDaijFsK.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([7,1,4]));return n()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:n}=await dt(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-CxWTEKDW.js");return{createUIKAVVlakkenLayerOL:e}},__vite__mapDeps([8,1]));return n()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:n}=await dt(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-DWZoUIYT.js");return{createUIKAVBufferlaagLayerOL:e}},__vite__mapDeps([9,1]));return n()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:n}=await dt(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-jK0dQI8-.js");return{createUIKAVExpertLayerOL:e}},__vite__mapDeps([10,1]));return n()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:n}=await dt(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-BGokLTcL.js");return{createUIKAVUiterwaardenLayerOL:e}},__vite__mapDeps([11,1]));return n()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:n}=await dt(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-Cx_Ddl6K.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([12,1,4]));return n()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:n}=await dt(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-tIyXOf5C.js");return{createMuseaLayerOL:e}},__vite__mapDeps([13,1,4]));return n()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:n}=await dt(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-yfYy6EYL.js");return{createStrandjesLayerOL:e}},__vite__mapDeps([14,1]));return n()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:n}=await dt(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-BFpeFzBU.js");return{createParkenLayerOL:e}},__vite__mapDeps([15,1]));return n()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:n}=await dt(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-DNkufX2w.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([16,4]));return n()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:n}=await dt(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-Dx6mavMg.js");return{createFossielenLayerOL:e}},__vite__mapDeps([17,18,4]));return n()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:n}=await dt(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-DaE4xitj.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([19,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:n}=await dt(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-BS03qGq7.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([20,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:n}=await dt(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-BUV7HAAn.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([21,18,4]));return n()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:n}=await dt(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-Cp2ME4CC.js");return{createFossielHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:n}=await dt(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-jI9jrS8x.js");return{createMineralenHotspotsLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:n}=await dt(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-yWlhVYF6.js");return{createGoudrivierenLayerOL:e}},[]);return n()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Wandelroutes:{name:"Wandelroutes",factory:async()=>{const{createWandelroutesLayer:n}=await dt(async()=>{const{createWandelroutesLayer:e}=await import("./wandelroutesOL-8YZFRWdR.js");return{createWandelroutesLayer:e}},[]);return n()},immediateLoad:!1,tier:"free",regions:["nl","be"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:n}=await dt(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-DsPy_Klo.js");return{createBunkersLayerOL:e}},__vite__mapDeps([22,4]));return n()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:n}=await dt(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-CTxZErqF.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([23,4]));return n()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:n}=await dt(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-DBtfCOnz.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([24,4]));return n()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:n}=await dt(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-CvB-SEYz.js");return{createVliegveldenLayerOL:e}},[]);return n()},immediateLoad:!1}};function RH(){return Object.values(vA).filter(n=>n.immediateLoad)}const As=Sa()(A0((n,e)=>({map:null,rotation:0,rotationEnabled:!0,setMap:t=>{n(r=>{r.map=t})},setRotation:t=>{n(r=>{if(r.rotation=t,r.map&&r.rotationEnabled){const i=t*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{n(t=>{t.rotationEnabled=!0})},disableRotation:()=>{n(t=>{t.rotationEnabled=!1,t.rotation=0,t.map&&t.map.getView().animate({rotation:0,duration:500})})}}))),ri=Sa()(A0((n,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,"Archeo Landschappen":!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"Archeo Landschappen":.5,Essen:.6,Terpen:.7,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},toggleLayer:t=>{const r=e(),i=!r.visible[t];n(s=>{s.visible[t]=i}),i&&!r.layers[t]?e().loadLayer(t):r.layers[t]&&r.layers[t].setVisible(i)},setLayerVisibility:(t,r)=>{const i=e();n(s=>{s.visible[t]=r;const a=s.layers[t];a&&a.setVisible(r)}),r&&!i.layers[t]&&e().loadLayer(t)},setLayerOpacity:(t,r)=>{n(i=>{i.opacity[t]=r;const s=i.layers[t];s&&s.setOpacity(r)})},registerLayer:(t,r)=>{n(i=>{i.layers[t]=r,i.loadingState[t]="loaded",i.visible[t]!==void 0&&r.setVisible(i.visible[t]),i.opacity[t]!==void 0&&r.setOpacity(i.opacity[t])})},unregisterLayer:t=>{n(r=>{delete r.layers[t],delete r.loadingState[t]})},loadLayer:async t=>{const r=e();if(r.loadingState[t]==="loading"||r.layers[t])return;const i=vA[t];if(!i){console.warn(` Layer "${t}" not found in registry`);return}const s=As.getState().map;if(!s){console.warn(` Cannot load layer "${t}": map not initialized`);return}n(a=>{a.loadingState[t]="loading"}),console.log(` Loading layer: ${t}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const o=e();a.setVisible(o.visible[t]??!1),o.opacity[t]!==void 0&&a.setOpacity(o.opacity[t]),s.addLayer(a),n(l=>{l.layers[t]=a,l.loadingState[t]="loaded"}),console.log(` Layer loaded: ${t}`)}catch(a){console.error(` Failed to load layer "${t}":`,a),n(o=>{o.loadingState[t]="error"})}}}))),Fi=Sa()(A0((n,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,collapsedCategories:new Set,closeAllPanels:()=>{n(t=>{t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1})},toggleLayerControl:()=>{n(t=>{t.layerControlOpen=!t.layerControlOpen})},toggleLegend:()=>{n(t=>{t.legendOpen=!t.legendOpen})},toggleBackgroundsPanel:()=>{n(t=>{const r=t.backgroundsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{n(t=>{const r=t.themesPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{n(t=>{const r=t.settingsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{n(t=>{const r=t.infoPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.infoPanelOpen=!0)})},togglePresetsPanel:()=>{n(t=>{const r=t.presetsPanelOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,r||(t.presetsPanelOpen=!0)})},toggleCategory:t=>{n(r=>{r.collapsedCategories.has(t)?r.collapsedCategories.delete(t):r.collapsedCategories.add(t)})},setLayerControlOpen:t=>{n(r=>{r.layerControlOpen=t})},setLegendOpen:t=>{n(r=>{r.legendOpen=t})},openVondstForm:t=>{n(r=>{r.backgroundsPanelOpen=!1,r.themesPanelOpen=!1,r.settingsPanelOpen=!1,r.infoPanelOpen=!1,r.presetsPanelOpen=!1,r.vondstFormOpen=!0,r.vondstFormLocation=t||null})},closeVondstForm:()=>{n(t=>{t.vondstFormOpen=!1,t.vondstFormLocation=null})},toggleVondstDashboard:()=>{n(t=>{const r=t.vondstDashboardOpen;t.backgroundsPanelOpen=!1,t.themesPanelOpen=!1,t.settingsPanelOpen=!1,t.infoPanelOpen=!1,t.presetsPanelOpen=!1,t.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{n(t=>{t.createLayerModalOpen=!1})},openAddPointModal:(t,r)=>{n(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=t,i.addPointModalLocation=r})},closeAddPointModal:()=>{n(t=>{t.addPointModalOpen=!1,t.addPointModalLayerId=null,t.addPointModalLocation=null})},openLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{n(t=>{t.layerManagerModalOpen=!1})},openLayerDashboard:t=>{n(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=t,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{n(t=>{t.layerDashboardOpen=!1,t.layerDashboardLayerId=null})}}))),c5=Sa()(A0(n=>({user:null,loading:!0,error:null,setUser:e=>{n(t=>{t.user=e,t.loading=!1})},setLoading:e=>{n(t=>{t.loading=e})},setError:e=>{n(t=>{t.error=e})}}))),bH=()=>{};var Lk={};const u5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},CH=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},h5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=s>>2,f=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;l||(p=64,a||(g=64)),r.push(t[h],t[f],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(u5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):CH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const f=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new PH;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),f!==64){const E=u<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kH=function(n){const e=u5(n);return h5.encodeByteArray(e,!0)},fx=function(n){return kH(n).replace(/\./g,"")},d5=function(n){try{return h5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const MH=()=>f5().__FIREBASE_DEFAULTS__,NH=()=>{if(typeof process>"u"||typeof Lk>"u")return;const n=Lk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},LH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d5(n[1]);return e&&JSON.parse(e)},Uv=()=>{try{return bH()||MH()||NH()||LH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},g5=n=>Uv()?.emulatorHosts?.[n],m5=n=>{const e=g5(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},p5=()=>Uv()?.config,_5=n=>Uv()?.[`_${n}`];class OH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function nd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EA(n){return(await fetch(n,{credentials:"include"})).ok}function y5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[fx(JSON.stringify(t)),fx(JSON.stringify(a)),""].join(".")}const lm={};function DH(){const n={prod:[],emulator:[]};for(const e of Object.keys(lm))lm[e]?n.emulator.push(e):n.prod.push(e);return n}function FH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ok=!1;function wA(n,e){if(typeof window>"u"||typeof document>"u"||!nd(window.location.host)||lm[n]===e||lm[n]||Ok)return;lm[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=DH().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function o(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,p){g.setAttribute("width","24"),g.setAttribute("id",p),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ok=!0,a()},g}function h(g,p){g.setAttribute("id",p),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=FH(r),p=t("text"),E=document.getElementById(p)||document.createElement("span"),x=t("learnmore"),w=document.getElementById(x)||document.createElement("a"),T=t("preprendIcon"),R=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const k=g.element;o(k),h(w,x);const N=u();l(R,T),k.append(R,E,w,N),document.body.appendChild(k)}s?(E.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function Kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kr())}function x5(){const n=Uv()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GH(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function BH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UH(){const n=Kr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function v5(){return!x5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E5(){return!x5()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function w5(){try{return typeof indexedDB=="object"}catch{return!1}}function zH(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const $H="FirebaseError";class Ko extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=$H,Object.setPrototypeOf(this,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qp.prototype.create)}}class qp{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?WH(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Ko(i,o,r)}}function WH(n,e){return n.replace(HH,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const HH=/\{\$([^}]+)}/g;function KH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Dk(s)&&Dk(a)){if(!Lh(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Dk(n){return n!==null&&typeof n=="object"}function Zp(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function YH(n,e){const t=new XH(n,e);return t.subscribe.bind(t)}class XH{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");qH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=$2),i.error===void 0&&(i.error=$2),i.complete===void 0&&(i.complete=$2);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qH(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $2(){}function oi(n){return n&&n._delegate?n._delegate:n}class eu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Qu="[DEFAULT]";class ZH{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new OH;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JH(e))try{this.getOrInitializeService({instanceIdentifier:Qu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Qu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qu){return this.instances.has(e)}getOptions(e=Qu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qu){return this.component?this.component.multipleInstances?e:Qu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QH(n){return n===Qu?void 0:n}function JH(n){return n.instantiationMode==="EAGER"}class eK{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZH(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var rn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rn||(rn={}));const tK={debug:rn.DEBUG,verbose:rn.VERBOSE,info:rn.INFO,warn:rn.WARN,error:rn.ERROR,silent:rn.SILENT},nK=rn.INFO,rK={[rn.DEBUG]:"log",[rn.VERBOSE]:"log",[rn.INFO]:"info",[rn.WARN]:"warn",[rn.ERROR]:"error"},iK=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=rK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class SA{constructor(e){this.name=e,this._logLevel=nK,this._logHandler=iK,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rn.DEBUG,...e),this._logHandler(this,rn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rn.VERBOSE,...e),this._logHandler(this,rn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rn.INFO,...e),this._logHandler(this,rn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rn.WARN,...e),this._logHandler(this,rn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rn.ERROR,...e),this._logHandler(this,rn.ERROR,...e)}}const sK=(n,e)=>e.some(t=>n instanceof t);let Fk,jk;function aK(){return Fk||(Fk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oK(){return jk||(jk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S5=new WeakMap,fT=new WeakMap,T5=new WeakMap,W2=new WeakMap,TA=new WeakMap;function lK(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Wc(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&S5.set(t,n)}).catch(()=>{}),TA.set(e,n),e}function cK(n){if(fT.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});fT.set(n,e)}let gT={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return fT.get(n);if(e==="objectStoreNames")return n.objectStoreNames||T5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uK(n){gT=n(gT)}function hK(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(H2(this),e,...t);return T5.set(r,e.sort?e.sort():[e]),Wc(r)}:oK().includes(n)?function(...e){return n.apply(H2(this),e),Wc(S5.get(this))}:function(...e){return Wc(n.apply(H2(this),e))}}function dK(n){return typeof n=="function"?hK(n):(n instanceof IDBTransaction&&cK(n),sK(n,aK())?new Proxy(n,gT):n)}function Wc(n){if(n instanceof IDBRequest)return lK(n);if(W2.has(n))return W2.get(n);const e=dK(n);return e!==n&&(W2.set(n,e),TA.set(e,n)),e}const H2=n=>TA.get(n);function fK(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Wc(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Wc(a.result),l.oldVersion,l.newVersion,Wc(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const gK=["get","getKey","getAll","getAllKeys","count"],mK=["put","add","delete","clear"],K2=new Map;function Vk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(K2.get(e))return K2.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=mK.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gK.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&l.done]))[0]};return K2.set(e,s),s}uK(n=>({...n,get:(e,t,r)=>Vk(e,t)||n.get(e,t,r),has:(e,t)=>!!Vk(e,t)||n.has(e,t)}));class pK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_K(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function _K(n){return n.getComponent()?.type==="VERSION"}const mT="@firebase/app",Gk="0.14.6";const Pl=new SA("@firebase/app"),yK="@firebase/app-compat",xK="@firebase/analytics-compat",vK="@firebase/analytics",EK="@firebase/app-check-compat",wK="@firebase/app-check",SK="@firebase/auth",TK="@firebase/auth-compat",IK="@firebase/database",AK="@firebase/data-connect",RK="@firebase/database-compat",bK="@firebase/functions",CK="@firebase/functions-compat",PK="@firebase/installations",kK="@firebase/installations-compat",MK="@firebase/messaging",NK="@firebase/messaging-compat",LK="@firebase/performance",OK="@firebase/performance-compat",DK="@firebase/remote-config",FK="@firebase/remote-config-compat",jK="@firebase/storage",VK="@firebase/storage-compat",GK="@firebase/firestore",BK="@firebase/ai",UK="@firebase/firestore-compat",zK="firebase",$K="12.6.0";const pT="[DEFAULT]",WK={[mT]:"fire-core",[yK]:"fire-core-compat",[vK]:"fire-analytics",[xK]:"fire-analytics-compat",[wK]:"fire-app-check",[EK]:"fire-app-check-compat",[SK]:"fire-auth",[TK]:"fire-auth-compat",[IK]:"fire-rtdb",[AK]:"fire-data-connect",[RK]:"fire-rtdb-compat",[bK]:"fire-fn",[CK]:"fire-fn-compat",[PK]:"fire-iid",[kK]:"fire-iid-compat",[MK]:"fire-fcm",[NK]:"fire-fcm-compat",[LK]:"fire-perf",[OK]:"fire-perf-compat",[DK]:"fire-rc",[FK]:"fire-rc-compat",[jK]:"fire-gcs",[VK]:"fire-gcs-compat",[GK]:"fire-fst",[UK]:"fire-fst-compat",[BK]:"fire-vertex","fire-js":"fire-js",[zK]:"fire-js-all"};const gx=new Map,HK=new Map,_T=new Map;function Bk(n,e){try{n.container.addComponent(e)}catch(t){Pl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Oh(n){const e=n.name;if(_T.has(e))return Pl.debug(`There were multiple attempts to register component ${e}.`),!1;_T.set(e,n);for(const t of gx.values())Bk(t,n);for(const t of HK.values())Bk(t,n);return!0}function zv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ga(n){return n==null?!1:n.settings!==void 0}const KK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hc=new qp("app","Firebase",KK);class YK{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hc.create("app-deleted",{appName:this._name})}}const rd=$K;function I5(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:pT,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Hc.create("bad-app-name",{appName:String(i)});if(t||(t=p5()),!t)throw Hc.create("no-options");const s=gx.get(i);if(s){if(Lh(t,s.options)&&Lh(r,s.config))return s;throw Hc.create("duplicate-app",{appName:i})}const a=new eK(i);for(const l of _T.values())a.addComponent(l);const o=new YK(t,r,a);return gx.set(i,o),o}function IA(n=pT){const e=gx.get(n);if(!e&&n===pT&&p5())return I5();if(!e)throw Hc.create("no-app",{appName:n});return e}function Po(n,e,t){let r=WK[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pl.warn(a.join(" "));return}Oh(new eu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const XK="firebase-heartbeat-database",qK=1,Qm="firebase-heartbeat-store";let Y2=null;function A5(){return Y2||(Y2=fK(XK,qK,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qm)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hc.create("idb-open",{originalErrorMessage:n.message})})),Y2}async function ZK(n){try{const t=(await A5()).transaction(Qm),r=await t.objectStore(Qm).get(R5(n));return await t.done,r}catch(e){if(e instanceof Ko)Pl.warn(e.message);else{const t=Hc.create("idb-get",{originalErrorMessage:e?.message});Pl.warn(t.message)}}}async function Uk(n,e){try{const r=(await A5()).transaction(Qm,"readwrite");await r.objectStore(Qm).put(e,R5(n)),await r.done}catch(t){if(t instanceof Ko)Pl.warn(t.message);else{const r=Hc.create("idb-set",{originalErrorMessage:t?.message});Pl.warn(r.message)}}}function R5(n){return`${n.name}!${n.options.appId}`}const QK=1024,JK=30;class eY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nY(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=zk();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>JK){const i=rY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zk(),{heartbeatsToSend:t,unsentEntries:r}=tY(this._heartbeatsCache.heartbeats),i=fx(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Pl.warn(e),""}}}function zk(){return new Date().toISOString().substring(0,10)}function tY(n,e=QK){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),$k(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),$k(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class nY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w5()?zH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ZK(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $k(n){return fx(JSON.stringify({version:2,heartbeats:n})).length}function rY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function iY(n){Oh(new eu("platform-logger",e=>new pK(e),"PRIVATE")),Oh(new eu("heartbeat",e=>new eY(e),"PRIVATE")),Po(mT,Gk,n),Po(mT,Gk,"esm2020"),Po("fire-js","")}iY("");var Wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kc,b5;(function(){var n;function e(P,C){function M(){}M.prototype=C.prototype,P.F=C.prototype,P.prototype=new M,P.prototype.constructor=P,P.D=function(F,O,W){for(var D=Array(arguments.length-2),we=2;we<arguments.length;we++)D[we-2]=arguments[we];return C.prototype[O].apply(F,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,C,M){M||(M=0);const F=Array(16);if(typeof C=="string")for(var O=0;O<16;++O)F[O]=C.charCodeAt(M++)|C.charCodeAt(M++)<<8|C.charCodeAt(M++)<<16|C.charCodeAt(M++)<<24;else for(O=0;O<16;++O)F[O]=C[M++]|C[M++]<<8|C[M++]<<16|C[M++]<<24;C=P.g[0],M=P.g[1],O=P.g[2];let W=P.g[3],D;D=C+(W^M&(O^W))+F[0]+3614090360&4294967295,C=M+(D<<7&4294967295|D>>>25),D=W+(O^C&(M^O))+F[1]+3905402710&4294967295,W=C+(D<<12&4294967295|D>>>20),D=O+(M^W&(C^M))+F[2]+606105819&4294967295,O=W+(D<<17&4294967295|D>>>15),D=M+(C^O&(W^C))+F[3]+3250441966&4294967295,M=O+(D<<22&4294967295|D>>>10),D=C+(W^M&(O^W))+F[4]+4118548399&4294967295,C=M+(D<<7&4294967295|D>>>25),D=W+(O^C&(M^O))+F[5]+1200080426&4294967295,W=C+(D<<12&4294967295|D>>>20),D=O+(M^W&(C^M))+F[6]+2821735955&4294967295,O=W+(D<<17&4294967295|D>>>15),D=M+(C^O&(W^C))+F[7]+4249261313&4294967295,M=O+(D<<22&4294967295|D>>>10),D=C+(W^M&(O^W))+F[8]+1770035416&4294967295,C=M+(D<<7&4294967295|D>>>25),D=W+(O^C&(M^O))+F[9]+2336552879&4294967295,W=C+(D<<12&4294967295|D>>>20),D=O+(M^W&(C^M))+F[10]+4294925233&4294967295,O=W+(D<<17&4294967295|D>>>15),D=M+(C^O&(W^C))+F[11]+2304563134&4294967295,M=O+(D<<22&4294967295|D>>>10),D=C+(W^M&(O^W))+F[12]+1804603682&4294967295,C=M+(D<<7&4294967295|D>>>25),D=W+(O^C&(M^O))+F[13]+4254626195&4294967295,W=C+(D<<12&4294967295|D>>>20),D=O+(M^W&(C^M))+F[14]+2792965006&4294967295,O=W+(D<<17&4294967295|D>>>15),D=M+(C^O&(W^C))+F[15]+1236535329&4294967295,M=O+(D<<22&4294967295|D>>>10),D=C+(O^W&(M^O))+F[1]+4129170786&4294967295,C=M+(D<<5&4294967295|D>>>27),D=W+(M^O&(C^M))+F[6]+3225465664&4294967295,W=C+(D<<9&4294967295|D>>>23),D=O+(C^M&(W^C))+F[11]+643717713&4294967295,O=W+(D<<14&4294967295|D>>>18),D=M+(W^C&(O^W))+F[0]+3921069994&4294967295,M=O+(D<<20&4294967295|D>>>12),D=C+(O^W&(M^O))+F[5]+3593408605&4294967295,C=M+(D<<5&4294967295|D>>>27),D=W+(M^O&(C^M))+F[10]+38016083&4294967295,W=C+(D<<9&4294967295|D>>>23),D=O+(C^M&(W^C))+F[15]+3634488961&4294967295,O=W+(D<<14&4294967295|D>>>18),D=M+(W^C&(O^W))+F[4]+3889429448&4294967295,M=O+(D<<20&4294967295|D>>>12),D=C+(O^W&(M^O))+F[9]+568446438&4294967295,C=M+(D<<5&4294967295|D>>>27),D=W+(M^O&(C^M))+F[14]+3275163606&4294967295,W=C+(D<<9&4294967295|D>>>23),D=O+(C^M&(W^C))+F[3]+4107603335&4294967295,O=W+(D<<14&4294967295|D>>>18),D=M+(W^C&(O^W))+F[8]+1163531501&4294967295,M=O+(D<<20&4294967295|D>>>12),D=C+(O^W&(M^O))+F[13]+2850285829&4294967295,C=M+(D<<5&4294967295|D>>>27),D=W+(M^O&(C^M))+F[2]+4243563512&4294967295,W=C+(D<<9&4294967295|D>>>23),D=O+(C^M&(W^C))+F[7]+1735328473&4294967295,O=W+(D<<14&4294967295|D>>>18),D=M+(W^C&(O^W))+F[12]+2368359562&4294967295,M=O+(D<<20&4294967295|D>>>12),D=C+(M^O^W)+F[5]+4294588738&4294967295,C=M+(D<<4&4294967295|D>>>28),D=W+(C^M^O)+F[8]+2272392833&4294967295,W=C+(D<<11&4294967295|D>>>21),D=O+(W^C^M)+F[11]+1839030562&4294967295,O=W+(D<<16&4294967295|D>>>16),D=M+(O^W^C)+F[14]+4259657740&4294967295,M=O+(D<<23&4294967295|D>>>9),D=C+(M^O^W)+F[1]+2763975236&4294967295,C=M+(D<<4&4294967295|D>>>28),D=W+(C^M^O)+F[4]+1272893353&4294967295,W=C+(D<<11&4294967295|D>>>21),D=O+(W^C^M)+F[7]+4139469664&4294967295,O=W+(D<<16&4294967295|D>>>16),D=M+(O^W^C)+F[10]+3200236656&4294967295,M=O+(D<<23&4294967295|D>>>9),D=C+(M^O^W)+F[13]+681279174&4294967295,C=M+(D<<4&4294967295|D>>>28),D=W+(C^M^O)+F[0]+3936430074&4294967295,W=C+(D<<11&4294967295|D>>>21),D=O+(W^C^M)+F[3]+3572445317&4294967295,O=W+(D<<16&4294967295|D>>>16),D=M+(O^W^C)+F[6]+76029189&4294967295,M=O+(D<<23&4294967295|D>>>9),D=C+(M^O^W)+F[9]+3654602809&4294967295,C=M+(D<<4&4294967295|D>>>28),D=W+(C^M^O)+F[12]+3873151461&4294967295,W=C+(D<<11&4294967295|D>>>21),D=O+(W^C^M)+F[15]+530742520&4294967295,O=W+(D<<16&4294967295|D>>>16),D=M+(O^W^C)+F[2]+3299628645&4294967295,M=O+(D<<23&4294967295|D>>>9),D=C+(O^(M|~W))+F[0]+4096336452&4294967295,C=M+(D<<6&4294967295|D>>>26),D=W+(M^(C|~O))+F[7]+1126891415&4294967295,W=C+(D<<10&4294967295|D>>>22),D=O+(C^(W|~M))+F[14]+2878612391&4294967295,O=W+(D<<15&4294967295|D>>>17),D=M+(W^(O|~C))+F[5]+4237533241&4294967295,M=O+(D<<21&4294967295|D>>>11),D=C+(O^(M|~W))+F[12]+1700485571&4294967295,C=M+(D<<6&4294967295|D>>>26),D=W+(M^(C|~O))+F[3]+2399980690&4294967295,W=C+(D<<10&4294967295|D>>>22),D=O+(C^(W|~M))+F[10]+4293915773&4294967295,O=W+(D<<15&4294967295|D>>>17),D=M+(W^(O|~C))+F[1]+2240044497&4294967295,M=O+(D<<21&4294967295|D>>>11),D=C+(O^(M|~W))+F[8]+1873313359&4294967295,C=M+(D<<6&4294967295|D>>>26),D=W+(M^(C|~O))+F[15]+4264355552&4294967295,W=C+(D<<10&4294967295|D>>>22),D=O+(C^(W|~M))+F[6]+2734768916&4294967295,O=W+(D<<15&4294967295|D>>>17),D=M+(W^(O|~C))+F[13]+1309151649&4294967295,M=O+(D<<21&4294967295|D>>>11),D=C+(O^(M|~W))+F[4]+4149444226&4294967295,C=M+(D<<6&4294967295|D>>>26),D=W+(M^(C|~O))+F[11]+3174756917&4294967295,W=C+(D<<10&4294967295|D>>>22),D=O+(C^(W|~M))+F[2]+718787259&4294967295,O=W+(D<<15&4294967295|D>>>17),D=M+(W^(O|~C))+F[9]+3951481745&4294967295,P.g[0]=P.g[0]+C&4294967295,P.g[1]=P.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+O&4294967295,P.g[3]=P.g[3]+W&4294967295}r.prototype.v=function(P,C){C===void 0&&(C=P.length);const M=C-this.blockSize,F=this.C;let O=this.h,W=0;for(;W<C;){if(O==0)for(;W<=M;)i(this,P,W),W+=this.blockSize;if(typeof P=="string"){for(;W<C;)if(F[O++]=P.charCodeAt(W++),O==this.blockSize){i(this,F),O=0;break}}else for(;W<C;)if(F[O++]=P[W++],O==this.blockSize){i(this,F),O=0;break}}this.h=O,this.o+=C},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var C=1;C<P.length-8;++C)P[C]=0;C=this.o*8;for(var M=P.length-8;M<P.length;++M)P[M]=C&255,C/=256;for(this.v(P),P=Array(16),C=0,M=0;M<4;++M)for(let F=0;F<32;F+=8)P[C++]=this.g[M]>>>F&255;return P};function s(P,C){var M=o;return Object.prototype.hasOwnProperty.call(M,P)?M[P]:M[P]=C(P)}function a(P,C){this.h=C;const M=[];let F=!0;for(let O=P.length-1;O>=0;O--){const W=P[O]|0;F&&W==C||(M[O]=W,F=!1)}this.g=M}var o={};function l(P){return-128<=P&&P<128?s(P,function(C){return new a([C|0],C<0?-1:0)}):new a([P|0],P<0?-1:0)}function u(P){if(isNaN(P)||!isFinite(P))return f;if(P<0)return w(u(-P));const C=[];let M=1;for(let F=0;P>=M;F++)C[F]=P/M|0,M*=4294967296;return new a(C,0)}function h(P,C){if(P.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(P.charAt(0)=="-")return w(h(P.substring(1),C));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=u(Math.pow(C,8));let F=f;for(let W=0;W<P.length;W+=8){var O=Math.min(8,P.length-W);const D=parseInt(P.substring(W,W+O),C);O<8?(O=u(Math.pow(C,O)),F=F.j(O).add(u(D))):(F=F.j(M),F=F.add(u(D)))}return F}var f=l(0),g=l(1),p=l(16777216);n=a.prototype,n.m=function(){if(x(this))return-w(this).m();let P=0,C=1;for(let M=0;M<this.g.length;M++){const F=this.i(M);P+=(F>=0?F:4294967296+F)*C,C*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(x(this))return"-"+w(this).toString(P);const C=u(Math.pow(P,6));var M=this;let F="";for(;;){const O=N(M,C).g;M=T(M,O.j(C));let W=((M.g.length>0?M.g[0]:M.h)>>>0).toString(P);if(M=O,E(M))return W+F;for(;W.length<6;)W="0"+W;F=W+F}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(let C=0;C<P.g.length;C++)if(P.g[C]!=0)return!1;return!0}function x(P){return P.h==-1}n.l=function(P){return P=T(this,P),x(P)?-1:E(P)?0:1};function w(P){const C=P.g.length,M=[];for(let F=0;F<C;F++)M[F]=~P.g[F];return new a(M,~P.h).add(g)}n.abs=function(){return x(this)?w(this):this},n.add=function(P){const C=Math.max(this.g.length,P.g.length),M=[];let F=0;for(let O=0;O<=C;O++){let W=F+(this.i(O)&65535)+(P.i(O)&65535),D=(W>>>16)+(this.i(O)>>>16)+(P.i(O)>>>16);F=D>>>16,W&=65535,D&=65535,M[O]=D<<16|W}return new a(M,M[M.length-1]&-2147483648?-1:0)};function T(P,C){return P.add(w(C))}n.j=function(P){if(E(this)||E(P))return f;if(x(this))return x(P)?w(this).j(w(P)):w(w(this).j(P));if(x(P))return w(this.j(w(P)));if(this.l(p)<0&&P.l(p)<0)return u(this.m()*P.m());const C=this.g.length+P.g.length,M=[];for(var F=0;F<2*C;F++)M[F]=0;for(F=0;F<this.g.length;F++)for(let O=0;O<P.g.length;O++){const W=this.i(F)>>>16,D=this.i(F)&65535,we=P.i(O)>>>16,Ne=P.i(O)&65535;M[2*F+2*O]+=D*Ne,R(M,2*F+2*O),M[2*F+2*O+1]+=W*Ne,R(M,2*F+2*O+1),M[2*F+2*O+1]+=D*we,R(M,2*F+2*O+1),M[2*F+2*O+2]+=W*we,R(M,2*F+2*O+2)}for(P=0;P<C;P++)M[P]=M[2*P+1]<<16|M[2*P];for(P=C;P<2*C;P++)M[P]=0;return new a(M,0)};function R(P,C){for(;(P[C]&65535)!=P[C];)P[C+1]+=P[C]>>>16,P[C]&=65535,C++}function k(P,C){this.g=P,this.h=C}function N(P,C){if(E(C))throw Error("division by zero");if(E(P))return new k(f,f);if(x(P))return C=N(w(P),C),new k(w(C.g),w(C.h));if(x(C))return C=N(P,w(C)),new k(w(C.g),C.h);if(P.g.length>30){if(x(P)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var M=g,F=C;F.l(P)<=0;)M=j(M),F=j(F);var O=B(M,1),W=B(F,1);for(F=B(F,2),M=B(M,2);!E(F);){var D=W.add(F);D.l(P)<=0&&(O=O.add(M),W=D),F=B(F,1),M=B(M,1)}return C=T(P,O.j(C)),new k(O,C)}for(O=f;P.l(C)>=0;){for(M=Math.max(1,Math.floor(P.m()/C.m())),F=Math.ceil(Math.log(M)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),W=u(M),D=W.j(C);x(D)||D.l(P)>0;)M-=F,W=u(M),D=W.j(C);E(W)&&(W=g),O=O.add(W),P=T(P,D)}return new k(O,P)}n.B=function(P){return N(this,P).h},n.and=function(P){const C=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<C;F++)M[F]=this.i(F)&P.i(F);return new a(M,this.h&P.h)},n.or=function(P){const C=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<C;F++)M[F]=this.i(F)|P.i(F);return new a(M,this.h|P.h)},n.xor=function(P){const C=Math.max(this.g.length,P.g.length),M=[];for(let F=0;F<C;F++)M[F]=this.i(F)^P.i(F);return new a(M,this.h^P.h)};function j(P){const C=P.g.length+1,M=[];for(let F=0;F<C;F++)M[F]=P.i(F)<<1|P.i(F-1)>>>31;return new a(M,P.h)}function B(P,C){const M=C>>5;C%=32;const F=P.g.length-M,O=[];for(let W=0;W<F;W++)O[W]=C>0?P.i(W+M)>>>C|P.i(W+M+1)<<32-C:P.i(W+M);return new a(O,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,b5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Kc=a}).apply(typeof Wk<"u"?Wk:typeof self<"u"?self:typeof window<"u"?window:{});var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var C5,Yg,P5,vy,yT,k5,M5,N5;(function(){var n,e=Object.defineProperty;function t(_){_=[typeof globalThis=="object"&&globalThis,_,typeof window=="object"&&window,typeof self=="object"&&self,typeof U_=="object"&&U_];for(var A=0;A<_.length;++A){var L=_[A];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=t(this);function i(_,A){if(A)e:{var L=r;_=_.split(".");for(var H=0;H<_.length-1;H++){var fe=_[H];if(!(fe in L))break e;L=L[fe]}_=_[_.length-1],H=L[_],A=A(H),A!=H&&A!=null&&e(L,_,{configurable:!0,writable:!0,value:A})}}i("Symbol.dispose",function(_){return _||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(_){return _||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(_){return _||function(A){var L=[],H;for(H in A)Object.prototype.hasOwnProperty.call(A,H)&&L.push([H,A[H]]);return L}});var s=s||{},a=this||self;function o(_){var A=typeof _;return A=="object"&&_!=null||A=="function"}function l(_,A,L){return _.call.apply(_.bind,arguments)}function u(_,A,L){return u=l,u.apply(null,arguments)}function h(_,A){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),_.apply(this,H)}}function f(_,A){function L(){}L.prototype=A.prototype,_.Z=A.prototype,_.prototype=new L,_.prototype.constructor=_,_.Ob=function(H,fe,Ee){for(var rt=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)rt[Ht-2]=arguments[Ht];return A.prototype[fe].apply(H,rt)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?_=>_&&AsyncContext.Snapshot.wrap(_):_=>_;function p(_){const A=_.length;if(A>0){const L=Array(A);for(let H=0;H<A;H++)L[H]=_[H];return L}return[]}function E(_,A){for(let H=1;H<arguments.length;H++){const fe=arguments[H];var L=typeof fe;if(L=L!="object"?L:fe?Array.isArray(fe)?"array":L:"null",L=="array"||L=="object"&&typeof fe.length=="number"){L=_.length||0;const Ee=fe.length||0;_.length=L+Ee;for(let rt=0;rt<Ee;rt++)_[L+rt]=fe[rt]}else _.push(fe)}}class x{constructor(A,L){this.i=A,this.j=L,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function w(_){a.setTimeout(()=>{throw _},0)}function T(){var _=P;let A=null;return _.g&&(A=_.g,_.g=_.g.next,_.g||(_.h=null),A.next=null),A}class R{constructor(){this.h=this.g=null}add(A,L){const H=k.get();H.set(A,L),this.h?this.h.next=H:this.g=H,this.h=H}}var k=new x(()=>new N,_=>_.reset());class N{constructor(){this.next=this.g=this.h=null}set(A,L){this.h=A,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let j,B=!1,P=new R,C=()=>{const _=Promise.resolve(void 0);j=()=>{_.then(M)}};function M(){for(var _;_=T();){try{_.h.call(_.g)}catch(L){w(L)}var A=k;A.j(_),A.h<100&&(A.h++,_.next=A.g,A.g=_)}B=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(_,A){this.type=_,this.g=this.target=A,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var W=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var _=!1,A=Object.defineProperty({},"passive",{get:function(){_=!0}});try{const L=()=>{};a.addEventListener("test",L,A),a.removeEventListener("test",L,A)}catch{}return _})();function D(_){return/^[\s\xa0]*$/.test(_)}function we(_,A){O.call(this,_?_.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,_&&this.init(_,A)}f(we,O),we.prototype.init=function(_,A){const L=this.type=_.type,H=_.changedTouches&&_.changedTouches.length?_.changedTouches[0]:null;this.target=_.target||_.srcElement,this.g=A,A=_.relatedTarget,A||(L=="mouseover"?A=_.fromElement:L=="mouseout"&&(A=_.toElement)),this.relatedTarget=A,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0),this.button=_.button,this.key=_.key||"",this.ctrlKey=_.ctrlKey,this.altKey=_.altKey,this.shiftKey=_.shiftKey,this.metaKey=_.metaKey,this.pointerId=_.pointerId||0,this.pointerType=_.pointerType,this.state=_.state,this.i=_,_.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const _=this.i;_.preventDefault?_.preventDefault():_.returnValue=!1};var Ne="closure_listenable_"+(Math.random()*1e6|0),Le=0;function be(_,A,L,H,fe){this.listener=_,this.proxy=null,this.src=A,this.type=L,this.capture=!!H,this.ha=fe,this.key=++Le,this.da=this.fa=!1}function ce(_){_.da=!0,_.listener=null,_.proxy=null,_.src=null,_.ha=null}function Re(_,A,L){for(const H in _)A.call(L,_[H],H,_)}function Ae(_,A){for(const L in _)A.call(void 0,_[L],L,_)}function ie(_){const A={};for(const L in _)A[L]=_[L];return A}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(_,A){let L,H;for(let fe=1;fe<arguments.length;fe++){H=arguments[fe];for(L in H)_[L]=H[L];for(let Ee=0;Ee<V.length;Ee++)L=V[Ee],Object.prototype.hasOwnProperty.call(H,L)&&(_[L]=H[L])}}function te(_){this.src=_,this.g={},this.h=0}te.prototype.add=function(_,A,L,H,fe){const Ee=_.toString();_=this.g[Ee],_||(_=this.g[Ee]=[],this.h++);const rt=de(_,A,H,fe);return rt>-1?(A=_[rt],L||(A.fa=!1)):(A=new be(A,this.src,Ee,!!H,fe),A.fa=L,_.push(A)),A};function ee(_,A){const L=A.type;if(L in _.g){var H=_.g[L],fe=Array.prototype.indexOf.call(H,A,void 0),Ee;(Ee=fe>=0)&&Array.prototype.splice.call(H,fe,1),Ee&&(ce(A),_.g[L].length==0&&(delete _.g[L],_.h--))}}function de(_,A,L,H){for(let fe=0;fe<_.length;++fe){const Ee=_[fe];if(!Ee.da&&Ee.listener==A&&Ee.capture==!!L&&Ee.ha==H)return fe}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),Se={};function Fe(_,A,L,H,fe){if(Array.isArray(A)){for(let Ee=0;Ee<A.length;Ee++)Fe(_,A[Ee],L,H,fe);return null}return L=Xt(L),_&&_[Ne]?_.J(A,L,o(H)?!!H.capture:!1,fe):je(_,A,L,!1,H,fe)}function je(_,A,L,H,fe,Ee){if(!A)throw Error("Invalid event type");const rt=o(fe)?!!fe.capture:!!fe;let Ht=Ut(_);if(Ht||(_[Oe]=Ht=new te(_)),L=Ht.add(A,L,H,rt,Ee),L.proxy)return L;if(H=Qe(),L.proxy=H,H.src=_,H.listener=L,_.addEventListener)W||(fe=rt),fe===void 0&&(fe=!1),_.addEventListener(A.toString(),H,fe);else if(_.attachEvent)_.attachEvent(Lt(A.toString()),H);else if(_.addListener&&_.removeListener)_.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Qe(){function _(L){return A.call(_.src,_.listener,L)}const A=nn;return _}function gt(_,A,L,H,fe){if(Array.isArray(A))for(var Ee=0;Ee<A.length;Ee++)gt(_,A[Ee],L,H,fe);else H=o(H)?!!H.capture:!!H,L=Xt(L),_&&_[Ne]?(_=_.i,Ee=String(A).toString(),Ee in _.g&&(A=_.g[Ee],L=de(A,L,H,fe),L>-1&&(ce(A[L]),Array.prototype.splice.call(A,L,1),A.length==0&&(delete _.g[Ee],_.h--)))):_&&(_=Ut(_))&&(A=_.g[A.toString()],_=-1,A&&(_=de(A,L,H,fe)),(L=_>-1?A[_]:null)&&_t(L))}function _t(_){if(typeof _!="number"&&_&&!_.da){var A=_.src;if(A&&A[Ne])ee(A.i,_);else{var L=_.type,H=_.proxy;A.removeEventListener?A.removeEventListener(L,H,_.capture):A.detachEvent?A.detachEvent(Lt(L),H):A.addListener&&A.removeListener&&A.removeListener(H),(L=Ut(A))?(ee(L,_),L.h==0&&(L.src=null,A[Oe]=null)):ce(_)}}}function Lt(_){return _ in Se?Se[_]:Se[_]="on"+_}function nn(_,A){if(_.da)_=!0;else{A=new we(A,this);const L=_.listener,H=_.ha||_.src;_.fa&&_t(_),_=L.call(H,A)}return _}function Ut(_){return _=_[Oe],_ instanceof te?_:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xt(_){return typeof _=="function"?_:(_[De]||(_[De]=function(A){return _.handleEvent(A)}),_[De])}function Te(){F.call(this),this.i=new te(this),this.M=this,this.G=null}f(Te,F),Te.prototype[Ne]=!0,Te.prototype.removeEventListener=function(_,A,L,H){gt(this,_,A,L,H)};function ge(_,A){var L,H=_.G;if(H)for(L=[];H;H=H.G)L.push(H);if(_=_.M,H=A.type||A,typeof A=="string")A=new O(A,_);else if(A instanceof O)A.target=A.target||_;else{var fe=A;A=new O(H,_),re(A,fe)}fe=!0;let Ee,rt;if(L)for(rt=L.length-1;rt>=0;rt--)Ee=A.g=L[rt],fe=b(Ee,H,!0,A)&&fe;if(Ee=A.g=_,fe=b(Ee,H,!0,A)&&fe,fe=b(Ee,H,!1,A)&&fe,L)for(rt=0;rt<L.length;rt++)Ee=A.g=L[rt],fe=b(Ee,H,!1,A)&&fe}Te.prototype.N=function(){if(Te.Z.N.call(this),this.i){var _=this.i;for(const A in _.g){const L=_.g[A];for(let H=0;H<L.length;H++)ce(L[H]);delete _.g[A],_.h--}}this.G=null},Te.prototype.J=function(_,A,L,H){return this.i.add(String(_),A,!1,L,H)},Te.prototype.K=function(_,A,L,H){return this.i.add(String(_),A,!0,L,H)};function b(_,A,L,H){if(A=_.i.g[String(A)],!A)return!0;A=A.concat();let fe=!0;for(let Ee=0;Ee<A.length;++Ee){const rt=A[Ee];if(rt&&!rt.da&&rt.capture==L){const Ht=rt.listener,Er=rt.ha||rt.src;rt.fa&&ee(_.i,rt),fe=Ht.call(Er,H)!==!1&&fe}}return fe&&!H.defaultPrevented}function Et(_,A){if(typeof _!="function")if(_&&typeof _.handleEvent=="function")_=u(_.handleEvent,_);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:a.setTimeout(_,A||0)}function X(_){_.g=Et(()=>{_.g=null,_.i&&(_.i=!1,X(_))},_.l);const A=_.h;_.h=null,_.m.apply(null,A)}class Ot extends F{constructor(A,L){super(),this.m=A,this.l=L,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:X(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(_){F.call(this),this.h=_,this.g={}}f(ne,F);var z=[];function le(_){Re(_.g,function(A,L){this.g.hasOwnProperty(L)&&_t(A)},_),_.g={}}ne.prototype.N=function(){ne.Z.N.call(this),le(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=a.JSON.stringify,Ie=a.JSON.parse,Ze=class{stringify(_){return a.JSON.stringify(_,void 0)}parse(_){return a.JSON.parse(_,void 0)}};function ht(){}function vt(){}var wt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){O.call(this,"d")}f(bt,O);function en(){O.call(this,"c")}f(en,O);var Dr={},bs=null;function zi(){return bs=bs||new Te}Dr.Ia="serverreachability";function $i(_){O.call(this,Dr.Ia,_)}f($i,O);function Ir(_){const A=zi();ge(A,new $i(A))}Dr.STAT_EVENT="statevent";function ci(_,A){O.call(this,Dr.STAT_EVENT,_),this.stat=A}f(ci,O);function Tn(_){const A=zi();ge(A,new ci(A,_))}Dr.Ja="timingevent";function Cs(_,A){O.call(this,Dr.Ja,_),this.size=A}f(Cs,O);function Ps(_,A){if(typeof _!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){_()},A)}function nr(){this.g=!0}nr.prototype.ua=function(){this.g=!1};function rs(_,A,L,H,fe,Ee){_.info(function(){if(_.g)if(Ee){var rt="",Ht=Ee.split("&");for(let kn=0;kn<Ht.length;kn++){var Er=Ht[kn].split("=");if(Er.length>1){const Rr=Er[0];Er=Er[1];const Os=Rr.split("_");rt=Os.length>=2&&Os[1]=="type"?rt+(Rr+"="+Er+"&"):rt+(Rr+"=redacted&")}}}else rt=null;else rt=Ee;return"XMLHTTP REQ ("+H+") [attempt "+fe+"]: "+A+`
`+L+`
`+rt})}function Fr(_,A,L,H,fe,Ee,rt){_.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+fe+"]: "+A+`
`+L+`
`+Ee+" "+rt})}function rr(_,A,L,H){_.info(function(){return"XMLHTTP TEXT ("+A+"): "+Vr(_,L)+(H?" "+H:"")})}function jr(_,A){_.info(function(){return"TIMEOUT: "+A})}nr.prototype.info=function(){};function Vr(_,A){if(!_.g)return A;if(!A)return null;try{const Ee=JSON.parse(A);if(Ee){for(_=0;_<Ee.length;_++)if(Array.isArray(Ee[_])){var L=Ee[_];if(!(L.length<2)){var H=L[1];if(Array.isArray(H)&&!(H.length<1)){var fe=H[0];if(fe!="noop"&&fe!="stop"&&fe!="close")for(let rt=1;rt<H.length;rt++)H[rt]=""}}}}return $e(Ee)}catch{return A}}var Ar={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},on={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hr;function xr(){}f(xr,ht),xr.prototype.g=function(){return new XMLHttpRequest},hr=new xr;function is(_){return encodeURIComponent(String(_))}function U(_){var A=1;_=_.split(":");const L=[];for(;A>0&&_.length;)L.push(_.shift()),A--;return _.length&&L.push(_.join(":")),L}function q(_,A,L,H){this.j=_,this.i=A,this.l=L,this.S=H||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new K}function K(){this.i=null,this.g="",this.h=!1}var Y={},Z={};function Q(_,A,L){_.M=1,_.A=Xo(ta(A)),_.u=L,_.R=!0,pe(_,null)}function pe(_,A){_.F=Date.now(),xe(_),_.B=ta(_.A);var L=_.B,H=_.S;Array.isArray(H)||(H=[String(H)]),q0(L.i,"t",H),_.C=0,L=_.j.L,_.h=new K,_.g=N1(_.j,L?A:null,!_.u),_.P>0&&(_.O=new Ot(u(_.Y,_,_.g),_.P)),A=_.V,L=_.g,H=_.ba;var fe="readystatechange";Array.isArray(fe)||(fe&&(z[0]=fe.toString()),fe=z);for(let Ee=0;Ee<fe.length;Ee++){const rt=Fe(L,fe[Ee],H||A.handleEvent,!1,A.h||A);if(!rt)break;A.g[rt.key]=rt}A=_.J?ie(_.J):{},_.u?(_.v||(_.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",_.g.ea(_.B,_.v,_.u,A)):(_.v="GET",_.g.ea(_.B,_.v,null,A)),Ir(),rs(_.i,_.v,_.B,_.l,_.S,_.u)}q.prototype.ba=function(_){_=_.target;const A=this.O;A&&uo(_)==3?A.j():this.Y(_)},q.prototype.Y=function(_){try{if(_==this.g)e:{const Ht=uo(this.g),Er=this.g.ya(),kn=this.g.ca();if(!(Ht<3)&&(Ht!=3||this.g&&(this.h.h||this.g.la()||k1(this.g)))){this.K||Ht!=4||Er==7||(Er==8||kn<=0?Ir(3):Ir(2)),et(this);var A=this.g.ca();this.X=A;var L=Pe(this);if(this.o=A==200,Fr(this.i,this.v,this.B,this.l,this.S,Ht,A),this.o){if(this.U&&!this.L){t:{if(this.g){var H,fe=this.g;if((H=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(H)){var Ee=H;break t}}Ee=null}if(_=Ee)rr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,_);else{this.o=!1,this.m=3,Tn(12),He(this),ut(this);break e}}if(this.R){_=!0;let Rr;for(;!this.K&&this.C<L.length;)if(Rr=ye(this,L),Rr==Z){Ht==4&&(this.m=4,Tn(14),_=!1),rr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Y){this.m=4,Tn(15),rr(this.i,this.l,L,"[Invalid Chunk]"),_=!1;break}else rr(this.i,this.l,Rr,null),Ke(this,Rr);if(me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||L.length!=0||this.h.h||(this.m=1,Tn(16),_=!1),this.o=this.o&&_,!_)rr(this.i,this.l,L,"[Invalid Chunked Response]"),He(this),ut(this);else if(L.length>0&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.aa&&!rt.P&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),Pu(rt),rt.P=!0,Tn(11))}}else rr(this.i,this.l,L,null),Ke(this,L);Ht==4&&He(this),this.o&&!this.K&&(Ht==4?vd(this.j,this):(this.o=!1,xe(this)))}else Q0(this.g),A==400&&L.indexOf("Unknown SID")>0?(this.m=3,Tn(12)):(this.m=0,Tn(13)),He(this),ut(this)}}}catch{}};function Pe(_){if(!me(_))return _.g.la();const A=k1(_.g);if(A==="")return"";let L="";const H=A.length,fe=uo(_.g)==4;if(!_.h.i){if(typeof TextDecoder>"u")return He(_),ut(_),"";_.h.i=new a.TextDecoder}for(let Ee=0;Ee<H;Ee++)_.h.h=!0,L+=_.h.i.decode(A[Ee],{stream:!(fe&&Ee==H-1)});return A.length=0,_.h.g+=L,_.C=0,_.h.g}function me(_){return _.g?_.v=="GET"&&_.M!=2&&_.j.Aa:!1}function ye(_,A){var L=_.C,H=A.indexOf(`
`,L);return H==-1?Z:(L=Number(A.substring(L,H)),isNaN(L)?Y:(H+=1,H+L>A.length?Z:(A=A.slice(H,H+L),_.C=H+L,A)))}q.prototype.cancel=function(){this.K=!0,He(this)};function xe(_){_.T=Date.now()+_.H,We(_,_.H)}function We(_,A){if(_.D!=null)throw Error("WatchDog timer not null");_.D=Ps(u(_.aa,_),A)}function et(_){_.D&&(a.clearTimeout(_.D),_.D=null)}q.prototype.aa=function(){this.D=null;const _=Date.now();_-this.T>=0?(jr(this.i,this.B),this.M!=2&&(Ir(),Tn(17)),He(this),this.m=2,ut(this)):We(this,this.T-_)};function ut(_){_.j.I==0||_.K||vd(_.j,_)}function He(_){et(_);var A=_.O;A&&typeof A.dispose=="function"&&A.dispose(),_.O=null,le(_.V),_.g&&(A=_.g,_.g=null,A.abort(),A.dispose())}function Ke(_,A){try{var L=_.j;if(L.I!=0&&(L.g==_||Aa(L.h,_))){if(!_.L&&Aa(L.h,_)&&L.I==3){try{var H=L.Ba.g.parse(A)}catch{H=null}if(Array.isArray(H)&&H.length==3){var fe=H;if(fe[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<_.F)xd(L),Ns(L);else break e;go(L),Tn(18)}}else L.xa=fe[1],0<L.xa-L.K&&fe[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=Ps(u(L.Va,L),6e3));Qn(L.h)<=1&&L.ta&&(L.ta=void 0)}else Ls(L,11)}else if((_.L||L.g==_)&&xd(L),!D(A))for(fe=L.Ba.g.parse(A),A=0;A<fe.length;A++){let kn=fe[A];const Rr=kn[0];if(!(Rr<=L.K))if(L.K=Rr,kn=kn[1],L.I==2)if(kn[0]=="c"){L.M=kn[1],L.ba=kn[2];const Os=kn[3];Os!=null&&(L.ka=Os,L.j.info("VER="+L.ka));const el=kn[4];el!=null&&(L.za=el,L.j.info("SVER="+L.za));const mo=kn[5];mo!=null&&typeof mo=="number"&&mo>0&&(H=1.5*mo,L.O=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const po=_.g;if(po){const Sd=po.g?po.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sd){var Ee=H.h;Ee.g||Sd.indexOf("spdy")==-1&&Sd.indexOf("quic")==-1&&Sd.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(ea(Ee,Ee.h),Ee.h=null))}if(H.G){const tg=po.g?po.g.getResponseHeader("X-HTTP-Session-Id"):null;tg&&(H.wa=tg,xn(H.J,H.G,tg))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-_.F,L.j.info("Handshake RTT: "+L.T+"ms")),H=L;var rt=_;if(H.na=eg(H,H.L?H.ba:null,H.W),rt.L){ks(H.h,rt);var Ht=rt,Er=H.O;Er&&(Ht.H=Er),Ht.D&&(et(Ht),xe(Ht)),H.g=rt}else Ai(H);L.i.length>0&&Jo(L)}else kn[0]!="stop"&&kn[0]!="close"||Ls(L,7);else L.I==3&&(kn[0]=="stop"||kn[0]=="close"?kn[0]=="stop"?Ls(L,7):_d(L):kn[0]!="noop"&&L.l&&L.l.qa(kn),L.A=0)}}Ir(4)}catch{}}var jt=class{constructor(_,A){this.g=_,this.map=A}};function In(_){this.l=_||10,a.PerformanceNavigationTiming?(_=a.performance.getEntriesByType("navigation"),_=_.length>0&&(_[0].nextHopProtocol=="hq"||_[0].nextHopProtocol=="h2")):_=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=_?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Pn(_){return _.h?!0:_.g?_.g.size>=_.j:!1}function Qn(_){return _.h?1:_.g?_.g.size:0}function Aa(_,A){return _.h?_.h==A:_.g?_.g.has(A):!1}function ea(_,A){_.g?_.g.add(A):_.h=A}function ks(_,A){_.h&&_.h==A?_.h=null:_.g&&_.g.has(A)&&_.g.delete(A)}In.prototype.cancel=function(){if(this.i=vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const _ of this.g.values())_.cancel();this.g.clear()}};function vr(_){if(_.h!=null)return _.i.concat(_.h.G);if(_.g!=null&&_.g.size!==0){let A=_.i;for(const L of _.g.values())A=A.concat(L.G);return A}return p(_.i)}var Wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(_,A){if(_){_=_.split("&");for(let L=0;L<_.length;L++){const H=_[L].indexOf("=");let fe,Ee=null;H>=0?(fe=_[L].substring(0,H),Ee=_[L].substring(H+1)):fe=_[L],A(fe,Ee?decodeURIComponent(Ee.replace(/\+/g," ")):"")}}}function io(_){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;_ instanceof io?(this.l=_.l,Tu(this,_.j),this.o=_.o,this.g=_.g,so(this,_.u),this.h=_.h,Hl(this,Z0(_.i)),this.m=_.m):_&&(A=String(_).match(Wl))?(this.l=!1,Tu(this,A[1]||"",!0),this.o=Iu(A[2]||""),this.g=Iu(A[3]||"",!0),so(this,A[4]),this.h=Iu(A[5]||"",!0),Hl(this,A[6]||"",!0),this.m=Iu(A[7]||"")):(this.l=!1,this.i=new ln(null,this.l))}io.prototype.toString=function(){const _=[];var A=this.j;A&&_.push(Au(A,W0,!0),":");var L=this.g;return(L||A=="file")&&(_.push("//"),(A=this.o)&&_.push(Au(A,W0,!0),"@"),_.push(is(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&_.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&_.push("/"),_.push(Au(L,L.charAt(0)=="/"?Ru:H0,!0))),(L=this.i.toString())&&_.push("?",L),(L=this.m)&&_.push("#",Au(L,K0)),_.join("")},io.prototype.resolve=function(_){const A=ta(this);let L=!!_.j;L?Tu(A,_.j):L=!!_.o,L?A.o=_.o:L=!!_.g,L?A.g=_.g:L=_.u!=null;var H=_.h;if(L)so(A,_.u);else if(L=!!_.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var fe=A.h.lastIndexOf("/");fe!=-1&&(H=A.h.slice(0,fe+1)+H)}if(fe=H,fe==".."||fe==".")H="";else if(fe.indexOf("./")!=-1||fe.indexOf("/.")!=-1){H=fe.lastIndexOf("/",0)==0,fe=fe.split("/");const Ee=[];for(let rt=0;rt<fe.length;){const Ht=fe[rt++];Ht=="."?H&&rt==fe.length&&Ee.push(""):Ht==".."?((Ee.length>1||Ee.length==1&&Ee[0]!="")&&Ee.pop(),H&&rt==fe.length&&Ee.push("")):(Ee.push(Ht),H=!0)}H=Ee.join("/")}else H=fe}return L?A.h=H:L=_.i.toString()!=="",L?Hl(A,Z0(_.i)):L=!!_.m,L&&(A.m=_.m),A};function ta(_){return new io(_)}function Tu(_,A,L){_.j=L?Iu(A,!0):A,_.j&&(_.j=_.j.replace(/:$/,""))}function so(_,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);_.u=A}else _.u=null}function Hl(_,A,L){A instanceof ln?(_.i=A,gd(_.i,_.l)):(L||(A=Au(A,VE)),_.i=new ln(A,_.l))}function xn(_,A,L){_.i.set(A,L)}function Xo(_){return xn(_,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),_}function Iu(_,A){return _?A?decodeURI(_.replace(/%25/g,"%2525")):decodeURIComponent(_):""}function Au(_,A,L){return typeof _=="string"?(_=encodeURI(_).replace(A,$0),L&&(_=_.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_):null}function $0(_){return _=_.charCodeAt(0),"%"+(_>>4&15).toString(16)+(_&15).toString(16)}var W0=/[#\/\?@]/g,H0=/[#\?:]/g,Ru=/[#\?]/g,VE=/[#\?@]/g,K0=/#/g;function ln(_,A){this.h=this.g=null,this.i=_||null,this.j=!!A}function ao(_){_.g||(_.g=new Map,_.h=0,_.i&&ir(_.i,function(A,L){_.add(decodeURIComponent(A.replace(/\+/g," ")),L)}))}n=ln.prototype,n.add=function(_,A){ao(this),this.i=null,_=oo(this,_);let L=this.g.get(_);return L||this.g.set(_,L=[]),L.push(A),this.h+=1,this};function Y0(_,A){ao(_),A=oo(_,A),_.g.has(A)&&(_.i=null,_.h-=_.g.get(A).length,_.g.delete(A))}function fd(_,A){return ao(_),A=oo(_,A),_.g.has(A)}n.forEach=function(_,A){ao(this),this.g.forEach(function(L,H){L.forEach(function(fe){_.call(A,fe,H,this)},this)},this)};function X0(_,A){ao(_);let L=[];if(typeof A=="string")fd(_,A)&&(L=L.concat(_.g.get(oo(_,A))));else for(_=Array.from(_.g.values()),A=0;A<_.length;A++)L=L.concat(_[A]);return L}n.set=function(_,A){return ao(this),this.i=null,_=oo(this,_),fd(this,_)&&(this.h-=this.g.get(_).length),this.g.set(_,[A]),this.h+=1,this},n.get=function(_,A){return _?(_=X0(this,_),_.length>0?String(_[0]):A):A};function q0(_,A,L){Y0(_,A),L.length>0&&(_.i=null,_.g.set(oo(_,A),p(L)),_.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const _=[],A=Array.from(this.g.keys());for(let H=0;H<A.length;H++){var L=A[H];const fe=is(L);L=X0(this,L);for(let Ee=0;Ee<L.length;Ee++){let rt=fe;L[Ee]!==""&&(rt+="="+is(L[Ee])),_.push(rt)}}return this.i=_.join("&")};function Z0(_){const A=new ln;return A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),A}function oo(_,A){return A=String(A),_.j&&(A=A.toLowerCase()),A}function gd(_,A){A&&!_.j&&(ao(_),_.i=null,_.g.forEach(function(L,H){const fe=H.toLowerCase();H!=fe&&(Y0(this,H),q0(this,fe,L))},_)),_.j=A}function lo(_,A){const L=new nr;if(a.Image){const H=new Image;H.onload=h(ui,L,"TestLoadImage: loaded",!0,A,H),H.onerror=h(ui,L,"TestLoadImage: error",!1,A,H),H.onabort=h(ui,L,"TestLoadImage: abort",!1,A,H),H.ontimeout=h(ui,L,"TestLoadImage: timeout",!1,A,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=_}else A(!1)}function co(_,A){const L=new nr,H=new AbortController,fe=setTimeout(()=>{H.abort(),ui(L,"TestPingServer: timeout",!1,A)},1e4);fetch(_,{signal:H.signal}).then(Ee=>{clearTimeout(fe),Ee.ok?ui(L,"TestPingServer: ok",!0,A):ui(L,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(fe),ui(L,"TestPingServer: error",!1,A)})}function ui(_,A,L,H,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),H(L)}catch{}}function bu(){this.g=new Ze}function qo(_){this.i=_.Sb||null,this.h=_.ab||!1}f(qo,ht),qo.prototype.g=function(){return new Ms(this.i,this.h)};function Ms(_,A){Te.call(this),this.H=_,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Ms,Te),n=Ms.prototype,n.open=function(_,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=_,this.D=A,this.readyState=1,Ra(this)},n.send=function(_){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};_&&(A.body=_),(this.H||a).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kl(this)),this.readyState=0},n.Pa=function(_){if(this.g&&(this.l=_,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=_.headers,this.readyState=2,Ra(this)),this.g&&(this.readyState=3,Ra(this),this.g)))if(this.responseType==="arraybuffer")_.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in _){if(this.j=_.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;b1(this)}else _.text().then(this.Oa.bind(this),this.ga.bind(this))};function b1(_){_.j.read().then(_.Ma.bind(_)).catch(_.ga.bind(_))}n.Ma=function(_){if(this.g){if(this.o&&_.value)this.response.push(_.value);else if(!this.o){var A=_.value?_.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!_.done}))&&(this.response=this.responseText+=A)}_.done?Kl(this):Ra(this),this.readyState==3&&b1(this)}},n.Oa=function(_){this.g&&(this.response=this.responseText=_,Kl(this))},n.Na=function(_){this.g&&(this.response=_,Kl(this))},n.ga=function(){this.g&&Kl(this)};function Kl(_){_.readyState=4,_.l=null,_.j=null,_.B=null,Ra(_)}n.setRequestHeader=function(_,A){this.A.append(_,A)},n.getResponseHeader=function(_){return this.h&&this.h.get(_.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const _=[],A=this.h.entries();for(var L=A.next();!L.done;)L=L.value,_.push(L[0]+": "+L[1]),L=A.next();return _.join(`\r
`)};function Ra(_){_.onreadystatechange&&_.onreadystatechange.call(_)}Object.defineProperty(Ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(_){this.m=_?"include":"same-origin"}});function C1(_){let A="";return Re(_,function(L,H){A+=H,A+=":",A+=L,A+=`\r
`}),A}function md(_,A,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=C1(L),typeof _=="string"?L!=null&&is(L):xn(_,A,L))}function Un(_){Te.call(this),this.headers=new Map,this.L=_||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Un,Te);var P1=/^https?$/i,GE=["POST","PUT"];n=Un.prototype,n.Fa=function(_){this.H=_},n.ea=function(_,A,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+_);A=A?A.toUpperCase():"GET",this.D=_,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hr.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(A,String(_),!0),this.B=!1}catch(Ee){Yl(this,Ee);return}if(_=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var fe in H)L.set(fe,H[fe]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const Ee of H.keys())L.set(Ee,H.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),fe=a.FormData&&_ instanceof a.FormData,!(Array.prototype.indexOf.call(GE,A,void 0)>=0)||H||fe||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,rt]of L)this.g.setRequestHeader(Ee,rt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(_),this.v=!1}catch(Ee){Yl(this,Ee)}};function Yl(_,A){_.h=!1,_.g&&(_.j=!0,_.g.abort(),_.j=!1),_.l=A,_.o=5,Xl(_),Qo(_)}function Xl(_){_.A||(_.A=!0,ge(_,"complete"),ge(_,"error"))}n.abort=function(_){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=_||7,ge(this,"complete"),ge(this,"abort"),Qo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qo(this,!0)),Un.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zo(this):this.Xa())},n.Xa=function(){Zo(this)};function Zo(_){if(_.h&&typeof s<"u"){if(_.v&&uo(_)==4)setTimeout(_.Ca.bind(_),0);else if(ge(_,"readystatechange"),uo(_)==4){_.h=!1;try{const Ee=_.ca();e:switch(Ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var L;if(!(L=A)){var H;if(H=Ee===0){let rt=String(_.D).match(Wl)[1]||null;!rt&&a.self&&a.self.location&&(rt=a.self.location.protocol.slice(0,-1)),H=!P1.test(rt?rt.toLowerCase():"")}L=H}if(L)ge(_,"complete"),ge(_,"success");else{_.o=6;try{var fe=uo(_)>2?_.g.statusText:""}catch{fe=""}_.l=fe+" ["+_.ca()+"]",Xl(_)}}finally{Qo(_)}}}}function Qo(_,A){if(_.g){_.m&&(clearTimeout(_.m),_.m=null);const L=_.g;_.g=null,A||ge(_,"ready");try{L.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function uo(_){return _.g?_.g.readyState:0}n.ca=function(){try{return uo(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(_){if(this.g){var A=this.g.responseText;return _&&A.indexOf(_)==0&&(A=A.substring(_.length)),Ie(A)}};function k1(_){try{if(!_.g)return null;if("response"in _.g)return _.g.response;switch(_.F){case"":case"text":return _.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in _.g)return _.g.mozResponseArrayBuffer}return null}catch{return null}}function Q0(_){const A={};_=(_.g&&uo(_)>=2&&_.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<_.length;H++){if(D(_[H]))continue;var L=U(_[H]);const fe=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const Ee=A[fe]||[];A[fe]=Ee,Ee.push(L)}Ae(A,function(H){return H.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ho(_,A,L){return L&&L.internalChannelParams&&L.internalChannelParams[_]||A}function pd(_){this.za=0,this.i=[],this.j=new nr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ho("failFast",!1,_),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ho("baseRetryDelayMs",5e3,_),this.Za=ho("retryDelaySeedMs",1e4,_),this.Ta=ho("forwardChannelMaxRetries",2,_),this.va=ho("forwardChannelRequestTimeoutMs",2e4,_),this.ma=_&&_.xmlHttpFactory||void 0,this.Ua=_&&_.Rb||void 0,this.Aa=_&&_.useFetchStreams||!1,this.O=void 0,this.L=_&&_.supportsCrossDomainXhr||!1,this.M="",this.h=new In(_&&_.concurrentRequestLimit),this.Ba=new bu,this.S=_&&_.fastHandshake||!1,this.R=_&&_.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=_&&_.Pb||!1,_&&_.ua&&this.j.ua(),_&&_.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&_&&_.detectBufferingProxy||!1,this.ia=void 0,_&&_.longPollingTimeout&&_.longPollingTimeout>0&&(this.ia=_.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=pd.prototype,n.ka=8,n.I=1,n.connect=function(_,A,L,H){Tn(0),this.W=_,this.H=A||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.J=eg(this,null,this.W),Jo(this)};function _d(_){if(yd(_),_.I==3){var A=_.V++,L=ta(_.J);if(xn(L,"SID",_.M),xn(L,"RID",A),xn(L,"TYPE","terminate"),fo(_,L),A=new q(_,_.j,A),A.M=2,A.A=Xo(ta(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(A.A.toString(),"")}catch{}!L&&a.Image&&(new Image().src=A.A,L=!0),L||(A.g=N1(A.j,null),A.g.ea(A.A)),A.F=Date.now(),xe(A)}ku(_)}function Ns(_){_.g&&(Pu(_),_.g.cancel(),_.g=null)}function yd(_){Ns(_),_.v&&(a.clearTimeout(_.v),_.v=null),xd(_),_.h.cancel(),_.m&&(typeof _.m=="number"&&a.clearTimeout(_.m),_.m=null)}function Jo(_){if(!Pn(_.h)&&!_.m){_.m=!0;var A=_.Ea;j||C(),B||(j(),B=!0),P.add(A,_),_.D=0}}function M1(_,A){return Qn(_.h)>=_.h.j-(_.m?1:0)?!1:_.m?(_.i=A.G.concat(_.i),!0):_.I==1||_.I==2||_.D>=(_.Sa?0:_.Ta)?!1:(_.m=Ps(u(_.Ea,_,A),Ed(_,_.D)),_.D++,!0)}n.Ea=function(_){if(this.m)if(this.m=null,this.I==1){if(!_){this.V=Math.floor(Math.random()*1e5),_=this.V++;const fe=new q(this,this.j,_);let Ee=this.o;if(this.U&&(Ee?(Ee=ie(Ee),re(Ee,this.U)):Ee=this.U),this.u!==null||this.R||(fe.J=Ee,Ee=null),this.S)e:{for(var A=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(A+=H,A>4096){A=L;break e}if(A===4096||L===this.i.length-1){A=L+1;break e}}A=1e3}else A=1e3;A=J0(this,fe,A),L=ta(this.J),xn(L,"RID",_),xn(L,"CVER",22),this.G&&xn(L,"X-HTTP-Session-Id",this.G),fo(this,L),Ee&&(this.R?A="headers="+is(C1(Ee))+"&"+A:this.u&&md(L,this.u,Ee)),ea(this.h,fe),this.Ra&&xn(L,"TYPE","init"),this.S?(xn(L,"$req",A),xn(L,"SID","null"),fe.U=!0,Q(fe,L,null)):Q(fe,L,A),this.I=2}}else this.I==3&&(_?Cu(this,_):this.i.length==0||Pn(this.h)||Cu(this))};function Cu(_,A){var L;A?L=A.l:L=_.V++;const H=ta(_.J);xn(H,"SID",_.M),xn(H,"RID",L),xn(H,"AID",_.K),fo(_,H),_.u&&_.o&&md(H,_.u,_.o),L=new q(_,_.j,L,_.D+1),_.u===null&&(L.J=_.o),A&&(_.i=A.G.concat(_.i)),A=J0(_,L,1e3),L.H=Math.round(_.va*.5)+Math.round(_.va*.5*Math.random()),ea(_.h,L),Q(L,H,A)}function fo(_,A){_.H&&Re(_.H,function(L,H){xn(A,H,L)}),_.l&&Re({},function(L,H){xn(A,H,L)})}function J0(_,A,L){L=Math.min(_.i.length,L);const H=_.l?u(_.l.Ka,_.l,_):null;e:{var fe=_.i;let Ht=-1;for(;;){const Er=["count="+L];Ht==-1?L>0?(Ht=fe[0].g,Er.push("ofs="+Ht)):Ht=0:Er.push("ofs="+Ht);let kn=!0;for(let Rr=0;Rr<L;Rr++){var Ee=fe[Rr].g;const Os=fe[Rr].map;if(Ee-=Ht,Ee<0)Ht=Math.max(0,fe[Rr].g-100),kn=!1;else try{Ee="req"+Ee+"_"||"";try{var rt=Os instanceof Map?Os:Object.entries(Os);for(const[el,mo]of rt){let po=mo;o(mo)&&(po=$e(mo)),Er.push(Ee+el+"="+encodeURIComponent(po))}}catch(el){throw Er.push(Ee+"type="+encodeURIComponent("_badmap")),el}}catch{H&&H(Os)}}if(kn){rt=Er.join("&");break e}}rt=void 0}return _=_.i.splice(0,L),A.G=_,rt}function Ai(_){if(!_.g&&!_.v){_.Y=1;var A=_.Da;j||C(),B||(j(),B=!0),P.add(A,_),_.A=0}}function go(_){return _.g||_.v||_.A>=3?!1:(_.Y++,_.v=Ps(u(_.Da,_),Ed(_,_.A)),_.A++,!0)}n.Da=function(){if(this.v=null,ql(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var _=4*this.T;this.j.info("BP detection timer enabled: "+_),this.B=Ps(u(this.Wa,this),_)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tn(10),Ns(this),ql(this))};function Pu(_){_.B!=null&&(a.clearTimeout(_.B),_.B=null)}function ql(_){_.g=new q(_,_.j,"rpc",_.Y),_.u===null&&(_.g.J=_.o),_.g.P=0;var A=ta(_.na);xn(A,"RID","rpc"),xn(A,"SID",_.M),xn(A,"AID",_.K),xn(A,"CI",_.F?"0":"1"),!_.F&&_.ia&&xn(A,"TO",_.ia),xn(A,"TYPE","xmlhttp"),fo(_,A),_.u&&_.o&&md(A,_.u,_.o),_.O&&(_.g.H=_.O);var L=_.g;_=_.ba,L.M=1,L.A=Xo(ta(A)),L.u=null,L.R=!0,pe(L,_)}n.Va=function(){this.C!=null&&(this.C=null,Ns(this),go(this),Tn(19))};function xd(_){_.C!=null&&(a.clearTimeout(_.C),_.C=null)}function vd(_,A){var L=null;if(_.g==A){xd(_),Pu(_),_.g=null;var H=2}else if(Aa(_.h,A))L=A.G,ks(_.h,A),H=1;else return;if(_.I!=0){if(A.o)if(H==1){L=A.u?A.u.length:0,A=Date.now()-A.F;var fe=_.D;H=zi(),ge(H,new Cs(H,L)),Jo(_)}else Ai(_);else if(fe=A.m,fe==3||fe==0&&A.X>0||!(H==1&&M1(_,A)||H==2&&go(_)))switch(L&&L.length>0&&(A=_.h,A.i=A.i.concat(L)),fe){case 1:Ls(_,5);break;case 4:Ls(_,10);break;case 3:Ls(_,6);break;default:Ls(_,2)}}}function Ed(_,A){let L=_.Qa+Math.floor(Math.random()*_.Za);return _.isActive()||(L*=2),L*A}function Ls(_,A){if(_.j.info("Error code "+A),A==2){var L=u(_.bb,_),H=_.Ua;const fe=!H;H=new io(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tu(H,"https"),Xo(H),fe?lo(H.toString(),L):co(H.toString(),L)}else Tn(2);_.I=0,_.l&&_.l.pa(A),ku(_),yd(_)}n.bb=function(_){_?(this.j.info("Successfully pinged google.com"),Tn(2)):(this.j.info("Failed to ping google.com"),Tn(1))};function ku(_){if(_.I=0,_.ja=[],_.l){const A=vr(_.h);(A.length!=0||_.i.length!=0)&&(E(_.ja,A),E(_.ja,_.i),_.h.i.length=0,p(_.i),_.i.length=0),_.l.oa()}}function eg(_,A,L){var H=L instanceof io?ta(L):new io(L);if(H.g!="")A&&(H.g=A+"."+H.g),so(H,H.u);else{var fe=a.location;H=fe.protocol,A=A?A+"."+fe.hostname:fe.hostname,fe=+fe.port;const Ee=new io(null);H&&Tu(Ee,H),A&&(Ee.g=A),fe&&so(Ee,fe),L&&(Ee.h=L),H=Ee}return L=_.G,A=_.wa,L&&A&&xn(H,L,A),xn(H,"VER",_.ka),fo(_,H),H}function N1(_,A,L){if(A&&!_.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=_.Aa&&!_.ma?new Un(new qo({ab:L})):new Un(_.ma),A.Fa(_.L),A}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function L1(){}n=L1.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function wd(){}wd.prototype.g=function(_,A){return new hi(_,A)};function hi(_,A){Te.call(this),this.g=new pd(A),this.l=_,this.h=A&&A.messageUrlParams||null,_=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(_?_["X-Client-Protocol"]="webchannel":_={"X-Client-Protocol":"webchannel"}),this.g.o=_,_=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(_?_["X-WebChannel-Content-Type"]=A.messageContentType:_={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(_?_["X-WebChannel-Client-Profile"]=A.sa:_={"X-WebChannel-Client-Profile":A.sa}),this.g.U=_,(_=A&&A.Qb)&&!D(_)&&(this.g.u=_),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!D(A)&&(this.g.G=A,_=this.h,_!==null&&A in _&&(_=this.h,A in _&&delete _[A])),this.j=new Zl(this)}f(hi,Te),hi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hi.prototype.close=function(){_d(this.g)},hi.prototype.o=function(_){var A=this.g;if(typeof _=="string"){var L={};L.__data__=_,_=L}else this.v&&(L={},L.__data__=$e(_),_=L);A.i.push(new jt(A.Ya++,_)),A.I==3&&Jo(A)},hi.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,hi.Z.N.call(this)};function O1(_){bt.call(this),_.__headers__&&(this.headers=_.__headers__,this.statusCode=_.__status__,delete _.__headers__,delete _.__status__);var A=_.__sm__;if(A){e:{for(const L in A){_=L;break e}_=void 0}(this.i=_)&&(_=this.i,A=A!==null&&_ in A?A[_]:void 0),this.data=A}else this.data=_}f(O1,bt);function D1(){en.call(this),this.status=1}f(D1,en);function Zl(_){this.g=_}f(Zl,L1),Zl.prototype.ra=function(){ge(this.g,"a")},Zl.prototype.qa=function(_){ge(this.g,new O1(_))},Zl.prototype.pa=function(_){ge(this.g,new D1)},Zl.prototype.oa=function(){ge(this.g,"b")},wd.prototype.createWebChannel=wd.prototype.g,hi.prototype.send=hi.prototype.o,hi.prototype.open=hi.prototype.m,hi.prototype.close=hi.prototype.close,N5=function(){return new wd},M5=function(){return zi()},k5=Dr,yT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ar.NO_ERROR=0,Ar.TIMEOUT=8,Ar.HTTP_ERROR=6,vy=Ar,on.COMPLETE="complete",P5=on,vt.EventType=wt,wt.OPEN="a",wt.CLOSE="b",wt.ERROR="c",wt.MESSAGE="d",Te.prototype.listen=Te.prototype.J,Yg=vt,Un.prototype.listenOnce=Un.prototype.K,Un.prototype.getLastError=Un.prototype.Ha,Un.prototype.getLastErrorCode=Un.prototype.ya,Un.prototype.getStatus=Un.prototype.ca,Un.prototype.getResponseJson=Un.prototype.La,Un.prototype.getResponseText=Un.prototype.la,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Fa,C5=Un}).apply(typeof U_<"u"?U_:typeof self<"u"?self:typeof window<"u"?window:{});const Hk="@firebase/firestore",Kk="4.9.3";class yi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yi.UNAUTHENTICATED=new yi(null),yi.GOOGLE_CREDENTIALS=new yi("google-credentials-uid"),yi.FIRST_PARTY=new yi("first-party-uid"),yi.MOCK_USER=new yi("mock-user");let R0="12.7.0";const Dh=new SA("@firebase/firestore");function ff(){return Dh.logLevel}function Xe(n,...e){if(Dh.logLevel<=rn.DEBUG){const t=e.map(AA);Dh.debug(`Firestore (${R0}): ${n}`,...t)}}function Qi(n,...e){if(Dh.logLevel<=rn.ERROR){const t=e.map(AA);Dh.error(`Firestore (${R0}): ${n}`,...t)}}function Fh(n,...e){if(Dh.logLevel<=rn.WARN){const t=e.map(AA);Dh.warn(`Firestore (${R0}): ${n}`,...t)}}function AA(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function xt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,L5(n,r,t)}function L5(n,e,t){let r=`FIRESTORE (${R0}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Qi(r),new Error(r)}function At(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||L5(e,i,r)}function Wt(n,e){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends Ko{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Sl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class O5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yi.UNAUTHENTICATED)))}shutdown(){}}class aY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oY{constructor(e){this.t=e,this.currentUser=yi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new Sl;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sl,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},o=l=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((l=>o(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sl)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At(typeof r.accessToken=="string",31837,{l:r}),new O5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new yi(e)}}class lY{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=yi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cY{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new lY(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Yk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uY{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ga(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);const r=s=>{s.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Yk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Yk(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function hY(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class RA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=hY(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function xT(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return X2(i)===X2(s)?$t(i,s):X2(i)?1:-1}return $t(n.length,e.length)}const dY=55296,fY=57343;function X2(n){const e=n.charCodeAt(0);return e>=dY&&e<=fY}function i0(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function D5(n){return n+"\0"}const Xk="__name__";class So{constructor(e,t,r){t===void 0?t=0:t>e.length&&xt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return So.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof So?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=So.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return $t(e.length,t.length)}static compareSegments(e,t){const r=So.isNumericId(e),i=So.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?So.extractNumericId(e).compare(So.extractNumericId(t)):xT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kc.fromString(e.substring(4,e.length-2))}}class Sn extends So{construct(e,t,r){return new Sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Sn(t)}static emptyPath(){return new Sn([])}}const gY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends So{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return gY.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xk}static keyField(){return new lr([Xk])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new st(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new st(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class ot{constructor(e){this.path=e}static fromPath(e){return new ot(Sn.fromString(e))}static fromName(e){return new ot(Sn.fromString(e).popFirst(5))}static empty(){return new ot(Sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new Sn(e.slice()))}}function F5(n,e,t){if(!t)throw new st(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mY(n,e,t,r){if(e===!0&&r===!0)throw new st(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qk(n){if(!ot.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Zk(n){if(ot.isDocumentKey(n))throw new st(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function j5(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function $v(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xt(12329,{type:typeof n})}function tu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new st(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$v(n);throw new st(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Mr(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qp(n,e){if(!j5(n))throw new st(ke.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new st(ke.INVALID_ARGUMENT,t);return!0}const Qk=-62135596800,Jk=1e6;class On{static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jk);return new On(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new st(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qk)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jk}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:On._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qp(e,On._jsonSchema))return new On(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Qk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}On._jsonSchemaVersion="firestore/timestamp/1.0",On._jsonSchema={type:Mr("string",On._jsonSchemaVersion),seconds:Mr("number"),nanoseconds:Mr("number")};class Ct{static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new On(0,0))}static max(){return new Ct(new On(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Jm=-1;class mx{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function vT(n){return n.fields.find((e=>e.kind===2))}function Ju(n){return n.fields.filter((e=>e.kind!==2))}mx.UNKNOWN_ID=-1;class Ey{constructor(e,t){this.fieldPath=e,this.kind=t}}class ep{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ep(0,Zs.min())}}function pY(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(r===1e9?new On(t+1,0):new On(t,r));return new Zs(i,ot.empty(),e)}function V5(n){return new Zs(n.readTime,n.key,Jm)}class Zs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zs(Ct.min(),ot.empty(),Jm)}static max(){return new Zs(Ct.max(),ot.empty(),Jm)}}function bA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ot.comparator(n.documentKey,e.documentKey),t!==0?t:$t(n.largestBatchId,e.largestBatchId))}const G5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function id(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==G5)throw n;Xe("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(l=>r(l)))})),a=!0,s===i&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((i=>i?ue.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let l=0;l<s;l++){const u=l;t(e[u]).next((h=>{a[u]=h,++o,o===s&&r(a)}),(h=>i(h)))}}))}static doWhile(e,t){return new ue(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}const Gs="SimpleDb";class Wv{static open(e,t,r,i){try{return new Wv(t,e.transaction(i,r))}catch(s){throw new cm(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Sl,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new cm(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=CA(r.target.error);this.S.reject(new cm(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Xe(Gs,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yY(t)}}class Yc{static delete(e){return Xe(Gs,"Removing database:",e),sh(f5().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!w5())return!1;if(Yc.F())return!0;const e=Kr(),t=Yc.M(e),r=0<t&&t<10,i=U5(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Yc.M(Kr())===12.2&&Qi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Xe(Gs,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new cm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new st(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new st(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new cm(e,a))},i.onupgradeneeded=s=>{Xe(Gs,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Xe(Gs,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Wv.open(this.db,e,s?"readonly":"readwrite",r),l=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),ue.reject(u)))).toPromise();return l.catch((()=>{})),await o.D,l}catch(o){const l=o,u=l.name!=="FirebaseError"&&a<3;if(Xe(Gs,"Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function U5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class _Y{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return sh(this.U.delete())}}class cm extends st{constructor(e,t){super(ke.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _u(n){return n.name==="IndexedDbTransactionError"}class yY{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Xe(Gs,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Xe(Gs,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),sh(r)}add(e){return Xe(Gs,"ADD",this.store.name,e,e),sh(this.store.add(e))}get(e){return sh(this.store.get(e)).next((t=>(t===void 0&&(t=null),Xe(Gs,"GET",this.store.name,e,t),t)))}delete(e){return Xe(Gs,"DELETE",this.store.name,e),sh(this.store.delete(e))}count(){return Xe(Gs,"COUNT",this.store.name),sh(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new ue(((a,o)=>{s.onerror=l=>{o(l.target.error)},s.onsuccess=l=>{a(l.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,l)=>{a.push(l)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new ue(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Xe(Gs,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new ue(((r,i)=>{t.onerror=s=>{const a=CA(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new ue(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const l=new _Y(o),u=t(o.primaryKey,o.value,l);if(u instanceof ue){const h=u.catch((f=>(l.done(),ue.reject(f))));r.push(h)}l.isDone?i():l.G===null?o.continue():o.continue(l.G)}})).next((()=>ue.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function sh(n){return new ue(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=CA(r.target.error);t(i)}}))}let eM=!1;function CA(n){const e=Yc.M(Kr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new st("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eM||(eM=!0,setTimeout((()=>{throw r}),0)),r}}return n}const um="IndexBackfiller";class xY{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Xe(um,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Xe(um,`Documents written: ${t}`)}catch(t){_u(t)?Xe(um,"Ignoring IndexedDB error during index backfill: ",t):await id(t)}await this.re(6e4)}))}}class vY{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return ue.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return Xe(um,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Xe(um,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=V5(s);bA(a,r)>0&&(r=a)})),new Zs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class xa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xa.ce=-1;const vh=-1;function Hv(n){return n==null}function tp(n){return n===0&&1/n==-1/0}function EY(n){return typeof n=="number"&&Number.isInteger(n)&&!tp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const px="";function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=tM(e)),e=wY(n.get(t),e);return tM(e)}function wY(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case px:t+="";break;default:t+=s}}return t}function tM(n){return n+px+""}function bo(n){const e=n.length;if(At(e>=2,64408,{path:n}),e===2)return At(n.charAt(0)===px&&n.charAt(1)==="",56145,{path:n}),Sn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(px,s);switch((a<0||a>t)&&xt(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let l;i.length===0?l=o:(i+=o,l=i,i=""),r.push(l);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:xt(61167,{path:n})}s=a+2}return new Sn(r)}const eh="remoteDocuments",Jp="owner",Zd="owner",np="mutationQueues",SY="userId",Va="mutations",nM="batchId",gh="userMutationsIndex",rM=["userId","batchId"];function wy(n,e){return[n,Vi(e)]}function z5(n,e,t){return[n,Vi(e),t]}const TY={},s0="documentMutations",_x="remoteDocumentsV14",IY=["prefixPath","collectionGroup","readTime","documentId"],Sy="documentKeyIndex",AY=["prefixPath","collectionGroup","documentId"],$5="collectionGroupIndex",RY=["collectionGroup","readTime","prefixPath","documentId"],rp="remoteDocumentGlobal",ET="remoteDocumentGlobalKey",a0="targets",W5="queryTargetsIndex",bY=["canonicalId","targetId"],o0="targetDocuments",CY=["targetId","path"],PA="documentTargetsIndex",PY=["path","targetId"],yx="targetGlobalKey",Eh="targetGlobal",ip="collectionParents",kY=["collectionId","parent"],l0="clientMetadata",MY="clientId",Kv="bundles",NY="bundleId",Yv="namedQueries",LY="name",kA="indexConfiguration",OY="indexId",wT="collectionGroupIndex",DY="collectionGroup",hm="indexState",FY=["indexId","uid"],H5="sequenceNumberIndex",jY=["uid","sequenceNumber"],dm="indexEntries",VY=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],K5="documentKeyIndex",GY=["indexId","uid","orderedDocumentKey"],Xv="documentOverlays",BY=["userId","collectionPath","documentId"],ST="collectionPathOverlayIndex",UY=["userId","collectionPath","largestBatchId"],Y5="collectionGroupOverlayIndex",zY=["userId","collectionGroup","largestBatchId"],MA="globals",$Y="name",X5=[np,Va,s0,eh,a0,Jp,Eh,o0,l0,rp,ip,Kv,Yv],WY=[...X5,Xv],q5=[np,Va,s0,_x,a0,Jp,Eh,o0,l0,rp,ip,Kv,Yv,Xv],Z5=q5,NA=[...Z5,kA,hm,dm],HY=NA,Q5=[...NA,MA],KY=Q5;class TT extends B5{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Wt(n);return Yc.O(t.le,e)}function iM(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function yu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function J5(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tr{constructor(e,t){this.comparator=e,this.root=t||xi.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xi.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new z_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new z_(this.root,e,this.comparator,!1)}getReverseIterator(){return new z_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new z_(this.root,e,this.comparator,!0)}}class z_{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??xi.RED,this.left=i??xi.EMPTY,this.right=s??xi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new xi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return xi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xt(27949);return e+(this.isRed()?0:1)}}xi.EMPTY=null,xi.RED=!0,xi.BLACK=!1;xi.EMPTY=new class{constructor(){this.size=0}get key(){throw xt(57766)}get value(){throw xt(16141)}get color(){throw xt(16727)}get left(){throw xt(29726)}get right(){throw xt(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new xi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sM(this.data.getIterator())}getIteratorFrom(e){return new sM(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class sM{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qd(n){return n.hasNext()?n.getNext():void 0}class vs{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new vs([])}unionWith(e){let t=new jn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new vs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return i0(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class e6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new e6("Invalid base64 string: "+s):s}})(e);return new Lr(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const YY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kl(n){if(At(!!n,39018),typeof n=="string"){let e=0;const t=YY.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:er(n.seconds),nanos:er(n.nanos)}}function er(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ml(n){return typeof n=="string"?Lr.fromBase64String(n):Lr.fromUint8Array(n)}const t6="server_timestamp",n6="__type__",r6="__previous_value__",i6="__local_write_time__";function LA(n){return(n?.mapValue?.fields||{})[n6]?.stringValue===t6}function qv(n){const e=n.mapValue.fields[r6];return LA(e)?qv(e):e}function sp(n){const e=kl(n.mapValue.fields[i6].timestampValue);return new On(e.seconds,e.nanos)}class XY{constructor(e,t,r,i,s,a,o,l,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const xx="(default)";class jh{constructor(e,t){this.projectId=e,this.database=t||xx}static empty(){return new jh("","")}get isDefaultDatabase(){return this.database===xx}isEqual(e){return e instanceof jh&&e.projectId===this.projectId&&e.database===this.database}}const OA="__type__",s6="__max__",Vc={mapValue:{fields:{__type__:{stringValue:s6}}}},DA="__vector__",c0="value",Ty={nullValue:"NULL_VALUE"};function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LA(n)?4:a6(n)?9007199254740991:Zv(n)?10:11:xt(28295,{value:n})}function Bo(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sp(n).isEqual(sp(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=kl(i.timestampValue),o=kl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ml(i.bytesValue).isEqual(Ml(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return er(i.geoPointValue.latitude)===er(s.geoPointValue.latitude)&&er(i.geoPointValue.longitude)===er(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return er(i.integerValue)===er(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=er(i.doubleValue),o=er(s.doubleValue);return a===o?tp(a)===tp(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return i0(n.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(iM(a)!==iM(o))return!1;for(const l in a)if(a.hasOwnProperty(l)&&(o[l]===void 0||!Bo(a[l],o[l])))return!1;return!0})(n,e);default:return xt(52216,{left:n})}}function ap(n,e){return(n.values||[]).find((t=>Bo(t,e)))!==void 0}function ru(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=er(s.integerValue||s.doubleValue),l=er(a.integerValue||a.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1})(n,e);case 3:return aM(n.timestampValue,e.timestampValue);case 4:return aM(sp(n),sp(e));case 5:return xT(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=Ml(s),l=Ml(a);return o.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),l=a.split("/");for(let u=0;u<o.length&&u<l.length;u++){const h=$t(o[u],l[u]);if(h!==0)return h}return $t(o.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=$t(er(s.latitude),er(a.latitude));return o!==0?o:$t(er(s.longitude),er(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return oM(n.arrayValue,e.arrayValue);case 10:return(function(s,a){const o=s.fields||{},l=a.fields||{},u=o[c0]?.arrayValue,h=l[c0]?.arrayValue,f=$t(u?.values?.length||0,h?.values?.length||0);return f!==0?f:oM(u,h)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Vc.mapValue&&a===Vc.mapValue)return 0;if(s===Vc.mapValue)return 1;if(a===Vc.mapValue)return-1;const o=s.fields||{},l=Object.keys(o),u=a.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const g=xT(l[f],h[f]);if(g!==0)return g;const p=ru(o[l[f]],u[h[f]]);if(p!==0)return p}return $t(l.length,h.length)})(n.mapValue,e.mapValue);default:throw xt(23264,{he:t})}}function aM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return $t(n,e);const t=kl(n),r=kl(e),i=$t(t.seconds,r.seconds);return i!==0?i:$t(t.nanos,r.nanos)}function oM(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ru(t[i],r[i]);if(s)return s}return $t(t.length,r.length)}function u0(n){return IT(n)}function IT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=kl(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ml(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ot.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=IT(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${IT(t.fields[a])}`;return i+"}"})(n.mapValue):xt(61005,{value:n})}function Iy(n){switch(nu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qv(n);return e?16+Iy(e):16;case 5:return 2*n.stringValue.length;case 6:return Ml(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+Iy(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return yu(r.fields,((s,a)=>{i+=s.length+Iy(a)})),i})(n.mapValue);default:throw xt(13486,{value:n})}}function op(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function AT(n){return!!n&&"integerValue"in n}function lp(n){return!!n&&"arrayValue"in n}function lM(n){return!!n&&"nullValue"in n}function cM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ay(n){return!!n&&"mapValue"in n}function Zv(n){return(n?.mapValue?.fields||{})[OA]?.stringValue===DA}function fm(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return yu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=fm(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fm(n.arrayValue.values[t]);return e}return{...n}}function a6(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===s6}const o6={mapValue:{fields:{[OA]:{stringValue:DA},[c0]:{arrayValue:{}}}}};function qY(n){return"nullValue"in n?Ty:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?op(jh.empty(),ot.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Zv(n)?o6:{mapValue:{}}:xt(35942,{value:n})}function ZY(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?op(jh.empty(),ot.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?o6:"mapValue"in n?Zv(n)?{mapValue:{}}:Vc:xt(61959,{value:n})}function uM(n,e){const t=ru(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hM(n,e){const t=ru(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fm(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=fm(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ay(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){yu(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Di(fm(this.value))}}function l6(n){const e=[];return yu(n.fields,((t,r)=>{const i=new lr([t]);if(Ay(r)){const s=l6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new vs(e)}class _r{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new _r(e,0,Ct.min(),Ct.min(),Ct.min(),Di.empty(),0)}static newFoundDocument(e,t,r,i){return new _r(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new _r(e,2,t,Ct.min(),Ct.min(),Di.empty(),0)}static newUnknownDocument(e,t){return new _r(e,3,t,Ct.min(),Ct.min(),Di.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class h0{constructor(e,t){this.position=e,this.inclusive=t}}function dM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ot.comparator(ot.fromName(a.referenceValue),t.key):r=ru(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function fM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bo(n.position[t],e.position[t]))return!1;return!0}class vx{constructor(e,t="asc"){this.field=e,this.dir=t}}function QY(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class c6{}class sn extends c6{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new JY(e,t,r):t==="array-contains"?new nX(e,r):t==="in"?new m6(e,r):t==="not-in"?new rX(e,r):t==="array-contains-any"?new iX(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eX(e,r):new tX(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ru(t,this.value)):t!==null&&nu(this.value)===nu(t)&&this.matchesComparison(ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends c6{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Dn(e,t)}matches(e){return d0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d0(n){return n.op==="and"}function RT(n){return n.op==="or"}function FA(n){return u6(n)&&d0(n)}function u6(n){for(const e of n.filters)if(e instanceof Dn)return!1;return!0}function bT(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+u0(n.value);if(FA(n))return n.filters.map((e=>bT(e))).join(",");{const e=n.filters.map((t=>bT(t))).join(",");return`${n.op}(${e})`}}function h6(n,e){return n instanceof sn?(function(r,i){return i instanceof sn&&r.op===i.op&&r.field.isEqual(i.field)&&Bo(r.value,i.value)})(n,e):n instanceof Dn?(function(r,i){return i instanceof Dn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&h6(a,i.filters[o])),!0):!1})(n,e):void xt(19439)}function d6(n,e){const t=n.filters.concat(e);return Dn.create(t,n.op)}function f6(n){return n instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${u0(t.value)}`})(n):n instanceof Dn?(function(t){return t.op.toString()+" {"+t.getFilters().map(f6).join(" ,")+"}"})(n):"Filter"}class JY extends sn{constructor(e,t,r){super(e,t,r),this.key=ot.fromName(r.referenceValue)}matches(e){const t=ot.comparator(e.key,this.key);return this.matchesComparison(t)}}class eX extends sn{constructor(e,t){super(e,"in",t),this.keys=g6("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tX extends sn{constructor(e,t){super(e,"not-in",t),this.keys=g6("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function g6(n,e){return(e.arrayValue?.values||[]).map((t=>ot.fromName(t.referenceValue)))}class nX extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lp(t)&&ap(t.arrayValue,this.value)}}class m6 extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ap(this.value.arrayValue,t)}}class rX extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ap(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ap(this.value.arrayValue,t)}}class iX extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ap(this.value.arrayValue,r)))}}class sX{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function CT(n,e=null,t=[],r=[],i=null,s=null,a=null){return new sX(n,e,t,r,i,s,a)}function Vh(n){const e=Wt(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bT(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Hv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>u0(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>u0(r))).join(",")),e.Te=t}return e.Te}function e1(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QY(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!h6(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fM(n.startAt,e.startAt)&&fM(n.endAt,e.endAt)}function Ex(n){return ot.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function wx(n,e){return n.filters.filter((t=>t instanceof sn&&t.field.isEqual(e)))}function gM(n,e,t){let r=Ty,i=!0;for(const s of wx(n,e)){let a=Ty,o=!0;switch(s.op){case"<":case"<=":a=qY(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=Ty}uM({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];uM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function mM(n,e,t){let r=Vc,i=!0;for(const s of wx(n,e)){let a=Vc,o=!0;switch(s.op){case">=":case">":a=ZY(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Vc}hM({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];hM({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}class t1{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aX(n,e,t,r,i,s,a,o){return new t1(n,e,t,r,i,s,a,o)}function jA(n){return new t1(n)}function pM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function p6(n){return n.collectionGroup!==null}function gm(n){const e=Wt(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new jn(lr.comparator);return a.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new vx(s,r))})),t.has(lr.keyField().canonicalString())||e.Ie.push(new vx(lr.keyField(),r))}return e.Ie}function Ea(n){const e=Wt(n);return e.Ee||(e.Ee=oX(e,gm(n))),e.Ee}function oX(n,e){if(n.limitType==="F")return CT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new vx(i.field,s)}));const t=n.endAt?new h0(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new h0(n.startAt.position,n.startAt.inclusive):null;return CT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function PT(n,e){const t=n.filters.concat([e]);return new t1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kT(n,e,t){return new t1(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qv(n,e){return e1(Ea(n),Ea(e))&&n.limitType===e.limitType}function _6(n){return`${Vh(Ea(n))}|lt:${n.limitType}`}function gf(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>f6(i))).join(", ")}]`),Hv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>u0(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>u0(i))).join(",")),`Target(${r})`})(Ea(n))}; limitType=${n.limitType})`}function n1(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ot.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of gm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,l){const u=dM(a,o,l);return a.inclusive?u<=0:u<0})(r.startAt,gm(r),i)||r.endAt&&!(function(a,o,l){const u=dM(a,o,l);return a.inclusive?u>=0:u>0})(r.endAt,gm(r),i))})(n,e)}function lX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function y6(n){return(e,t)=>{let r=!1;for(const i of gm(n)){const s=cX(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cX(n,e,t){const r=n.field.isKeyField()?ot.comparator(e.key,t.key):(function(s,a,o){const l=a.data.field(s),u=o.data.field(s);return l!==null&&u!==null?ru(l,u):xt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xt(19790,{direction:n.dir})}}class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yu(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return J5(this.inner)}size(){return this.innerSize}}const uX=new tr(ot.comparator);function Ks(){return uX}const x6=new tr(ot.comparator);function Xg(...n){let e=x6;for(const t of n)e=e.insert(t.key,t);return e}function v6(n){let e=x6;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Co(){return mm()}function E6(){return mm()}function mm(){return new Gl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const hX=new tr(ot.comparator),dX=new jn(ot.comparator);function Qt(...n){let e=dX;for(const t of n)e=e.add(t);return e}const fX=new jn($t);function gX(){return fX}function VA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tp(e)?"-0":e}}function w6(n){return{integerValue:""+n}}function mX(n,e){return EY(e)?w6(e):VA(n,e)}class Jv{constructor(){this._=void 0}}function pX(n,e,t){return n instanceof cp?(function(i,s){const a={fields:{[n6]:{stringValue:t6},[i6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&LA(s)&&(s=qv(s)),s&&(a.fields[r6]=s),{mapValue:a}})(t,e):n instanceof f0?T6(n,e):n instanceof g0?I6(n,e):(function(i,s){const a=S6(i,s),o=_M(a)+_M(i.Ae);return AT(a)&&AT(i.Ae)?w6(o):VA(i.serializer,o)})(n,e)}function _X(n,e,t){return n instanceof f0?T6(n,e):n instanceof g0?I6(n,e):t}function S6(n,e){return n instanceof up?(function(r){return AT(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class cp extends Jv{}class f0 extends Jv{constructor(e){super(),this.elements=e}}function T6(n,e){const t=A6(e);for(const r of n.elements)t.some((i=>Bo(i,r)))||t.push(r);return{arrayValue:{values:t}}}class g0 extends Jv{constructor(e){super(),this.elements=e}}function I6(n,e){let t=A6(e);for(const r of n.elements)t=t.filter((i=>!Bo(i,r)));return{arrayValue:{values:t}}}class up extends Jv{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function _M(n){return er(n.integerValue||n.doubleValue)}function A6(n){return lp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yX{constructor(e,t){this.field=e,this.transform=t}}function xX(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof f0&&i instanceof f0||r instanceof g0&&i instanceof g0?i0(r.elements,i.elements,Bo):r instanceof up&&i instanceof up?Bo(r.Ae,i.Ae):r instanceof cp&&i instanceof cp})(n.transform,e.transform)}class vX{constructor(e,t){this.version=e,this.transformResults=t}}class Ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ry(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class eE{}function R6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tE(n.key,Ji.none()):new b0(n.key,n.data,Ji.none());{const t=n.data,r=Di.empty();let i=new jn(lr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Bl(n.key,r,new vs(i.toArray()),Ji.none())}}function EX(n,e,t){n instanceof b0?(function(i,s,a){const o=i.value.clone(),l=xM(i.fieldTransforms,s,a.transformResults);o.setAll(l),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Bl?(function(i,s,a){if(!Ry(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=xM(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(b6(i)),l.setAll(o),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function pm(n,e,t,r){return n instanceof b0?(function(s,a,o,l){if(!Ry(s.precondition,a))return o;const u=s.value.clone(),h=vM(s.fieldTransforms,l,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bl?(function(s,a,o,l){if(!Ry(s.precondition,a))return o;const u=vM(s.fieldTransforms,l,a),h=a.data;return h.setAll(b6(s)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((f=>f.field)))})(n,e,t,r):(function(s,a,o){return Ry(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function wX(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=S6(r.transform,i||null);s!=null&&(t===null&&(t=Di.empty()),t.set(r.field,s))}return t||null}function yM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&i0(r,i,((s,a)=>xX(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class b0 extends eE{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bl extends eE{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function b6(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function xM(n,e,t){const r=new Map;At(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,_X(a,o,t[i]))}return r}function vM(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,pX(s,a,e))}return r}class tE extends eE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class C6 extends eE{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&EX(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=E6();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const l=R6(a,o);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Ct.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qt())}isEqual(e){return this.batchId===e.batchId&&i0(this.mutations,e.mutations,((t,r)=>yM(t,r)))&&i0(this.baseMutations,e.baseMutations,((t,r)=>yM(t,r)))}}class BA{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){At(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return hX})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new BA(e,t,r,i)}}class UA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SX{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pr,un;function TX(n){switch(n){case ke.OK:return xt(64938);case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0;default:return xt(15467,{code:n})}}function P6(n){if(n===void 0)return Qi("GRPC error has no .code"),ke.UNKNOWN;switch(n){case Pr.OK:return ke.OK;case Pr.CANCELLED:return ke.CANCELLED;case Pr.UNKNOWN:return ke.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ke.INTERNAL;case Pr.UNAVAILABLE:return ke.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ke.NOT_FOUND;case Pr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Pr.ABORTED:return ke.ABORTED;case Pr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Pr.DATA_LOSS:return ke.DATA_LOSS;default:return xt(39323,{code:n})}}(un=Pr||(Pr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";function IX(){return new TextEncoder}const AX=new Kc([4294967295,4294967295],0);function EM(n){const e=IX().encode(n),t=new b5;return t.update(e),new Uint8Array(t.digest())}function wM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Kc([t,r],0),new Kc([i,s],0)]}class zA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qg(`Invalid padding: ${t}`);if(r<0)throw new qg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qg(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qg(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Kc.fromNumber(r)));return i.compare(AX)===1&&(i=new Kc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=EM(e),[r,i]=wM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new zA(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=EM(e),[r,i]=wM(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class qg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,r1.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nE(Ct.min(),i,new tr($t),Ks(),Qt())}}class r1{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new r1(r,t,Qt(),Qt(),Qt())}}class by{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class k6{constructor(e,t){this.targetId=e,this.Ce=t}}class M6{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class SM{constructor(){this.ve=0,this.Fe=TM(),this.Me=Lr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qt(),t=Qt(),r=Qt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xt(38017,{changeType:s})}})),new r1(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=TM()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RX{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ks(),this.Je=$_(),this.He=$_(),this.Ye=new tr($t)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Ex(s))if(r===0){const a=new ot(s.path);this.et(t,a,_r.newNoDocument(a,Ct.min()))}else At(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),l=o?this.ct(o,e,a):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=Ml(r).toUint8Array()}catch(l){if(l instanceof e6)return Fh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new zA(a,i,s)}catch(l){return Fh(l instanceof qg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Ex(o.target)){const l=new ot(o.target.path);this.It(l).has(a)||this.Et(a,l)||this.et(a,l,_r.newNoDocument(l,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=Qt();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new nE(e,t,this.Ye,this.je,r);return this.je=Ks(),this.Je=$_(),this.He=$_(),this.Ye=new tr($t),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new SM,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jn($t),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jn($t),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new SM),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function $_(){return new tr(ot.comparator)}function TM(){return new tr(ot.comparator)}const bX={asc:"ASCENDING",desc:"DESCENDING"},CX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PX={and:"AND",or:"OR"};class kX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function MT(n,e){return n.useProto3Json||Hv(e)?e:{value:e}}function m0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function MX(n,e){return m0(n,e.toTimestamp())}function ts(n){return At(!!n,49232),Ct.fromTimestamp((function(t){const r=kl(t);return new On(r.seconds,r.nanos)})(n))}function $A(n,e){return NT(n,e).canonicalString()}function NT(n,e){const t=(function(i){return new Sn(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function L6(n){const e=Sn.fromString(n);return At(z6(e),10190,{key:e.toString()}),e}function Sx(n,e){return $A(n.databaseId,e.path)}function wh(n,e){const t=L6(e);if(t.get(1)!==n.databaseId.projectId)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new st(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ot(F6(t))}function O6(n,e){return $A(n.databaseId,e)}function D6(n){const e=L6(n);return e.length===4?Sn.emptyPath():F6(e)}function LT(n){return new Sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F6(n){return At(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function IM(n,e,t){return{name:Sx(n,e),fields:t.value.mapValue.fields}}function NX(n,e,t){const r=wh(n,e.name),i=ts(e.updateTime),s=e.createTime?ts(e.createTime):Ct.min(),a=new Di({mapValue:{fields:e.fields}}),o=_r.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function LX(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,h){return u.useProto3Json?(At(h===void 0||typeof h=="string",58123),Lr.fromBase64String(h||"")):(At(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Lr.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const h=u.code===void 0?ke.UNKNOWN:P6(u.code);return new st(h,u.message||"")})(a);t=new M6(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=wh(n,r.document.name),s=ts(r.document.updateTime),a=r.document.createTime?ts(r.document.createTime):Ct.min(),o=new Di({mapValue:{fields:r.document.fields}}),l=_r.newFoundDocument(i,s,a,o),u=r.targetIds||[],h=r.removedTargetIds||[];t=new by(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=wh(n,r.document),s=r.readTime?ts(r.readTime):Ct.min(),a=_r.newNoDocument(i,s),o=r.removedTargetIds||[];t=new by([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=wh(n,r.document),s=r.removedTargetIds||[];t=new by([],s,i,null)}else{if(!("filter"in e))return xt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new SX(i,s),o=r.targetId;t=new k6(o,a)}}return t}function Tx(n,e){let t;if(e instanceof b0)t={update:IM(n,e.key,e.value)};else if(e instanceof tE)t={delete:Sx(n,e.key)};else if(e instanceof Bl)t={update:IM(n,e.key,e.data),updateMask:GX(e.fieldMask)};else{if(!(e instanceof C6))return xt(16599,{Vt:e.type});t={verify:Sx(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof cp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof f0)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof g0)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof up)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw xt(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:MX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt(27497)})(n,e.precondition)),t}function OT(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Ji.updateTime(ts(s.updateTime)):s.exists!==void 0?Ji.exists(s.exists):Ji.none()})(e.currentDocument):Ji.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let l=null;if("setToServerValue"in o)At(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),l=new cp;else if("appendMissingElements"in o){const h=o.appendMissingElements.values||[];l=new f0(h)}else if("removeAllFromArray"in o){const h=o.removeAllFromArray.values||[];l=new g0(h)}else"increment"in o?l=new up(a,o.increment):xt(16584,{proto:o});const u=lr.fromServerFormat(o.fieldPath);return new yX(u,l)})(n,i))):[];if(e.update){e.update.name;const i=wh(n,e.update.name),s=new Di({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(l){const u=l.fieldPaths||[];return new vs(u.map((h=>lr.fromServerFormat(h))))})(e.updateMask);return new Bl(i,s,a,t,r)}return new b0(i,s,t,r)}if(e.delete){const i=wh(n,e.delete);return new tE(i,t)}if(e.verify){const i=wh(n,e.verify);return new C6(i,t)}return xt(1463,{proto:e})}function OX(n,e){return n&&n.length>0?(At(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?ts(i.updateTime):ts(s);return a.isEqual(Ct.min())&&(a=ts(s)),new vX(a,i.transformResults||[])})(t,e)))):[]}function j6(n,e){return{documents:[O6(n,e.path)]}}function V6(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=O6(n,i);const s=(function(u){if(u.length!==0)return U6(Dn.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((h=>(function(g){return{field:mf(g.field),direction:FX(g.dir)}})(h)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=MT(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function G6(n){let e=D6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){At(r===1,65062);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(f){const g=B6(f);return g instanceof Dn&&FA(g)?g.getFilters():[g]})(t.where));let a=[];t.orderBy&&(a=(function(f){return f.map((g=>(function(E){return new vx(pf(E.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(g)))})(t.orderBy));let o=null;t.limit&&(o=(function(f){let g;return g=typeof f=="object"?f.value:f,Hv(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(f){const g=!!f.before,p=f.values||[];return new h0(p,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(f){const g=!f.before,p=f.values||[];return new h0(p,g)})(t.endAt)),aX(e,i,a,s,o,"F",l,u)}function DX(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function B6(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=pf(t.unaryFilter.field);return sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=pf(t.unaryFilter.field);return sn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=pf(t.unaryFilter.field);return sn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=pf(t.unaryFilter.field);return sn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xt(61313);default:return xt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return sn.create(pf(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xt(58110);default:return xt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Dn.create(t.compositeFilter.filters.map((r=>B6(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt(1026)}})(t.compositeFilter.op))})(n):xt(30097,{filter:n})}function FX(n){return bX[n]}function jX(n){return CX[n]}function VX(n){return PX[n]}function mf(n){return{fieldPath:n.canonicalString()}}function pf(n){return lr.fromServerFormat(n.fieldPath)}function U6(n){return n instanceof sn?(function(t){if(t.op==="=="){if(cM(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NAN"}};if(lM(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cM(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NOT_NAN"}};if(lM(t.value))return{unaryFilter:{field:mf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mf(t.field),op:jX(t.op),value:t.value}}})(n):n instanceof Dn?(function(t){const r=t.getFilters().map((i=>U6(i)));return r.length===1?r[0]:{compositeFilter:{op:VX(t.op),filters:r}}})(n):xt(54877,{filter:n})}function GX(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class fl{constructor(e,t,r,i,s=Ct.min(),a=Ct.min(),o=Lr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new fl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $6{constructor(e){this.yt=e}}function BX(n,e){let t;if(e.document)t=NX(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ot.fromSegments(e.noDocument.path),i=Bh(e.noDocument.readTime);t=_r.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt(56709);{const r=ot.fromSegments(e.unknownDocument.path),i=Bh(e.unknownDocument.version);t=_r.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new On(i[0],i[1]);return Ct.fromTimestamp(s)})(e.readTime)),t}function AM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ix(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:Sx(s,a.key),fields:a.data.value.mapValue.fields,updateTime:m0(s,a.version.toTimestamp()),createTime:m0(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gh(e.version)};else{if(!e.isUnknownDocument())return xt(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Gh(e.version)}}return r}function Ix(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bh(n){const e=new On(n.seconds,n.nanoseconds);return Ct.fromTimestamp(e)}function ah(n,e){const t=(e.baseMutations||[]).map((s=>OT(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>OT(n.yt,s))),i=On.fromMillis(e.localWriteTimeMs);return new GA(e.batchId,i,t,r)}function Zg(n){const e=Bh(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bh(n.lastLimboFreeSnapshotVersion):Ct.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return At(a===1,1966,{count:a}),Ea(jA(D6(s.documents[0])))})(n.query):(function(s){return Ea(G6(s))})(n.query),new fl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function W6(n,e){const t=Gh(e.snapshotVersion),r=Gh(e.lastLimboFreeSnapshotVersion);let i;i=Ex(e.target)?j6(n.yt,e.target):V6(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vh(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function H6(n){const e=G6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kT(e,e.limit,"L"):e}function q2(n,e){return new UA(e.largestBatchId,OT(n.yt,e.overlayMutation))}function RM(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function bM(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Gh(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class UX{getBundleMetadata(e,t){return CM(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:Bh(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return CM(e).put((function(i){return{bundleId:i.id,createTime:Gh(ts(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return PM(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:H6(s.bundledQuery),readTime:Bh(s.readTime)}})(r)}))}saveNamedQuery(e,t){return PM(e).put((function(i){return{name:i.name,readTime:Gh(ts(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function CM(n){return Yr(n,Kv)}function PM(n){return Yr(n,Yv)}class rE{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new rE(e,r)}getOverlay(e,t){return Lg(e).get(RM(this.userId,t)).next((r=>r?q2(this.serializer,r):null))}getOverlays(e,t){const r=Co();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new UA(t,a);i.push(this.St(e,o))})),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(Vi(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Lg(e).Z(ST,o))})),ue.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Co(),s=Vi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Lg(e).J(ST,a).next((o=>{for(const l of o){const u=q2(this.serializer,l);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Co();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lg(e).ee({index:Y5,range:o},((l,u,h)=>{const f=q2(this.serializer,u);s.size()<i||f.largestBatchId===a?(s.set(f.getKey(),f),a=f.largestBatchId):h.done()})).next((()=>s))}St(e,t){return Lg(e).put((function(i,s,a){const[o,l,u]=RM(s,a.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Tx(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Lg(n){return Yr(n,Xv)}class zX{bt(e){return Yr(e,MA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Lr.fromUint8Array(r):Lr.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class oh{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(er(e.integerValue));else if("doubleValue"in e){const r=er(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),tp(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=kl(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ml(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?a6(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zv(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const i=c0,s=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(er(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),ot.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}oh.Kt=new oh;const Jd=255;function $X(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function kM(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=$X(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class WX{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=kM(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=kM(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Jd),this.sn(255)}_n(){this.an(Jd),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Jd?(this.sn(Jd),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Jd?(this.an(Jd),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HX{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class KX{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Og{constructor(){this.cn=new WX,this.ln=new HX(this.cn),this.hn=new KX(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class lh{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new lh(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:Cy(this.En),directionalValue:Cy(this.dn),orderedDocumentKey:Cy(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function yc(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=MM(n.En,e.En),t!==0?t:(t=MM(n.dn,e.dn),t!==0?t:ot.comparator(n.In,e.In)))}function MM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Cy(n){return E5()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function NM(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class LM{constructor(e){this.mn=new jn(((t,r)=>lr.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(At(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=vT(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ju(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const l=r[s];if(!this.Sn(o,l)||!this.bn(this.fn[a++],l))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new jn(lr.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ey(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ey(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ey(r.field,r.dir==="asc"?0:1)));return new mx(mx.UNKNOWN_ID,this.collectionId,t,ep.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}function K6(n){if(At(n instanceof sn||n instanceof Dn,20012),n instanceof sn){if(n instanceof m6){const t=n.value.arrayValue?.values?.map((r=>sn.create(n.field,"==",r)))||[];return Dn.create(t,"or")}return n}const e=n.filters.map((t=>K6(t)));return Dn.create(e,n.op)}function YX(n){if(n.getFilters().length===0)return[];const e=jT(K6(n));return At(Y6(e),7391),DT(e)||FT(e)?[e]:e.getFilters()}function DT(n){return n instanceof sn}function FT(n){return n instanceof Dn&&FA(n)}function Y6(n){return DT(n)||FT(n)||(function(t){if(t instanceof Dn&&RT(t)){for(const r of t.getFilters())if(!DT(r)&&!FT(r))return!1;return!0}return!1})(n)}function jT(n){if(At(n instanceof sn||n instanceof Dn,34018),n instanceof sn)return n;if(n.filters.length===1)return jT(n.filters[0]);const e=n.filters.map((r=>jT(r)));let t=Dn.create(e,n.op);return t=Ax(t),Y6(t)?t:(At(t instanceof Dn,64498),At(d0(t),40251),At(t.filters.length>1,57927),t.filters.reduce(((r,i)=>WA(r,i))))}function WA(n,e){let t;return At(n instanceof sn||n instanceof Dn,38388),At(e instanceof sn||e instanceof Dn,25473),t=n instanceof sn?e instanceof sn?(function(i,s){return Dn.create([i,s],"and")})(n,e):OM(n,e):e instanceof sn?OM(e,n):(function(i,s){if(At(i.filters.length>0&&s.filters.length>0,48005),d0(i)&&d0(s))return d6(i,s.getFilters());const a=RT(i)?i:s,o=RT(i)?s:i,l=a.filters.map((u=>WA(u,o)));return Dn.create(l,"or")})(n,e),Ax(t)}function OM(n,e){if(d0(e))return d6(e,n.getFilters());{const t=e.filters.map((r=>WA(n,r)));return Dn.create(t,"or")}}function Ax(n){if(At(n instanceof sn||n instanceof Dn,11850),n instanceof sn)return n;const e=n.getFilters();if(e.length===1)return Ax(e[0]);if(u6(n))return n;const t=e.map((i=>Ax(i))),r=[];return t.forEach((i=>{i instanceof sn?r.push(i):i instanceof Dn&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Dn.create(r,n.op)}class XX{constructor(){this.Cn=new HA}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Zs.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class HA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(Sn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(Sn.comparator)).toArray()}}const DM="IndexedDbIndexManager",W_=new Uint8Array(0);class qX{constructor(e,t){this.databaseId=t,this.vn=new HA,this.Fn=new Gl((r=>Vh(r)),((r,i)=>e1(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:Vi(i)};return FM(e).put(s)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[D5(t),""],!1,!0);return FM(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(bo(a.parent))}return r}))}addFieldIndex(e,t){const r=Dg(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=tf(e);return s.next((o=>{a.put(bM(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=Dg(e),i=tf(e),s=ef(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Dg(e),r=ef(e),i=tf(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return ue.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new LM(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=ef(e);let i=!0;const s=new Map;return ue.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=Qt();const o=[];return ue.forEach(s,((l,u)=>{Xe(DM,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((N=>`${N.fieldPath}:${N.kind}`)).join(",")}`})(l)} to execute ${Vh(t)}`);const h=(function(k,N){const j=vT(N);if(j===void 0)return null;for(const B of wx(k,j.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null})(u,l),f=(function(k,N){const j=new Map;for(const B of Ju(N))for(const P of wx(k,B.fieldPath))switch(P.op){case"==":case"in":j.set(B.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return j.set(B.fieldPath.canonicalString(),P.value),Array.from(j.values())}return null})(u,l),g=(function(k,N){const j=[];let B=!0;for(const P of Ju(N)){const C=P.kind===0?gM(k,P.fieldPath,k.startAt):mM(k,P.fieldPath,k.startAt);j.push(C.value),B&&(B=C.inclusive)}return new h0(j,B)})(u,l),p=(function(k,N){const j=[];let B=!0;for(const P of Ju(N)){const C=P.kind===0?mM(k,P.fieldPath,k.endAt):gM(k,P.fieldPath,k.endAt);j.push(C.value),B&&(B=C.inclusive)}return new h0(j,B)})(u,l),E=this.On(l,u,g),x=this.On(l,u,p),w=this.Nn(l,u,f),T=this.Bn(l.indexId,h,E,g.inclusive,x,p.inclusive,w);return ue.forEach(T,(R=>r.Y(R,t.limit).next((k=>{k.forEach((N=>{const j=ot.fromSegments(N.documentKey);a.has(j)||(a=a.add(j),o.push(j))}))}))))})).next((()=>o))}return ue.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=YX(Dn.create(e.filters,"and")).map((r=>CT(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const l=(t!=null?t.length:1)*Math.max(r.length,s.length),u=l/(t!=null?t.length:1),h=[];for(let f=0;f<l;++f){const g=t?this.Ln(t[f/u]):W_,p=this.kn(e,g,r[f%u],i),E=this.qn(e,g,s[f%u],a),x=o.map((w=>this.kn(e,g,w,!0)));h.push(...this.createRange(p,E,x))}return h}kn(e,t,r,i){const s=new lh(e,ot.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new lh(e,ot.empty(),t,r);return i?s.An():s}xn(e,t){const r=new LM(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return ue.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(l){let u=new jn(lr.comparator),h=!1;for(const f of l.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?h=!0:u=u.add(g.field));for(const f of l.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(h?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Og;for(const i of Ju(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);oh.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Og;return oh.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Og;return oh.Kt.Dt(op(this.databaseId,t),r.Pn((function(s){const a=Ju(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Og);let s=0;for(const a of Ju(e)){const o=r[s++];for(const l of i)if(this.Un(t,a.fieldPath)&&lp(o))i=this.Kn(i,a,o);else{const u=l.Pn(a.kind);oh.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const l=new Og;l.seed(o.un()),oh.Kt.Dt(a,l.Pn(t.kind)),s.push(l)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof sn&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Dg(e),i=tf(e);return(t?r.J(wT,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return ue.forEach(s,(o=>i.get([o.indexId,this.uid]).next((l=>{a.push((function(h,f){const g=f?new ep(f.sequenceNumber,new Zs(Bh(f.readTime),new ot(bo(f.documentKey)),f.largestBatchId)):ep.empty(),p=h.fields.map((([E,x])=>new Ey(lr.fromServerFormat(E),x)));return new mx(h.indexId,h.collectionGroup,p,g)})(o,l))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:$t(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Dg(e),s=tf(e);return this.Gn(e).next((a=>i.J(wT,IDBKeyRange.bound(t,t)).next((o=>ue.forEach(o,(l=>s.put(bM(l.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?ue.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),ue.forEach(o,(l=>this.zn(e,i,l).next((u=>{const h=this.jn(s,l);return u.isEqual(h)?ue.resolve():this.Jn(e,s,l,u,h)})))))))}))}Hn(e,t,r,i){return ef(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return ef(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=ef(e);let s=new jn(yc);return i.ee({index:K5,range:IDBKeyRange.only([r.indexId,this.uid,Cy(this.$n(r,t))])},((a,o)=>{s=s.add(new lh(r.indexId,t,NM(o.arrayValue),NM(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new jn(yc);const i=this.Qn(t,e);if(i==null)return r;const s=vT(t);if(s!=null){const a=e.data.field(s.fieldPath);if(lp(a))for(const o of a.arrayValue.values||[])r=r.add(new lh(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new lh(t.indexId,e.key,W_,i));return r}Jn(e,t,r,i,s){Xe(DM,"Updating index entries for document '%s'",t.key);const a=[];return(function(l,u,h,f,g){const p=l.getIterator(),E=u.getIterator();let x=Qd(p),w=Qd(E);for(;x||w;){let T=!1,R=!1;if(x&&w){const k=h(x,w);k<0?R=!0:k>0&&(T=!0)}else x!=null?R=!0:T=!0;T?(f(w),w=Qd(E)):R?(g(x),x=Qd(p)):(x=Qd(p),w=Qd(E))}})(i,s,yc,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),ue.waitFor(a)}Gn(e){let t=1;return tf(e).ee({index:H5,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>yc(a,o))).filter(((a,o,l)=>!o||yc(a,l[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=yc(a,e),l=yc(a,t);if(o===0)i[0]=e.An();else if(o>0&&l<0)i.push(a),i.push(a.An());else if(l>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,W_,ot.empty()),l=i[a+1].Vn(this.uid,W_,ot.empty());s.push(IDBKeyRange.bound(o,l))}return s}Zn(e,t){return yc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jM)}getMinOffset(e,t){return ue.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||xt(44426))))).next(jM)}}function FM(n){return Yr(n,ip)}function ef(n){return Yr(n,dm)}function Dg(n){return Yr(n,kA)}function tf(n){return Yr(n,hm)}function jM(n){At(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;bA(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zs(e.readTime,e.documentKey,t)}const VM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X6=41943040;class Li{static withCacheSize(e){return new Li(e,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function q6(n,e,t){const r=n.store(Va),i=n.store(s0),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const l=r.ee({range:a},((h,f,g)=>(o++,g.delete())));s.push(l.next((()=>{At(o===1,47070,{batchId:t.batchId})})));const u=[];for(const h of t.mutations){const f=z5(e,h.key.path,t.batchId);s.push(i.delete(f)),u.push(h.key)}return ue.waitFor(s).next((()=>u))}function Rx(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xt(14731);e=n.noDocument}return JSON.stringify(e).length}Li.DEFAULT_COLLECTION_PERCENTILE=10,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Li.DEFAULT=new Li(X6,Li.DEFAULT_COLLECTION_PERCENTILE,Li.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Li.DISABLED=new Li(-1,0,0);class iE{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){At(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new iE(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).ee({index:gh,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=_f(e),a=xc(e);return a.add({}).next((o=>{At(typeof o=="number",49019);const l=new GA(o,t,r,i),u=(function(p,E,x){const w=x.baseMutations.map((R=>Tx(p.yt,R))),T=x.mutations.map((R=>Tx(p.yt,R)));return{userId:E,batchId:x.batchId,localWriteTimeMs:x.localWriteTime.toMillis(),baseMutations:w,mutations:T}})(this.serializer,this.userId,l),h=[];let f=new jn(((g,p)=>$t(g.canonicalString(),p.canonicalString())));for(const g of i){const p=z5(this.userId,g.key.path,o);f=f.add(g.key.path.popLast()),h.push(a.put(u)),h.push(s.put(p,TY))}return f.forEach((g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))})),e.addOnCommittedListener((()=>{this.Xn[o]=l.keys()})),ue.waitFor(h).next((()=>l))}))}lookupMutationBatch(e,t){return xc(e).get(t).next((r=>r?(At(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ah(this.serializer,r)):null))}er(e,t){return this.Xn[t]?ue.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return xc(e).ee({index:gh,range:i},((a,o,l)=>{o.userId===this.userId&&(At(o.batchId>=r,47524,{tr:r}),s=ah(this.serializer,o)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=vh;return xc(e).ee({index:gh,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,vh],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).J(gh,t).next((r=>r.map((i=>ah(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=wy(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return _f(e).ee({range:i},((a,o,l)=>{const[u,h,f]=a,g=bo(h);if(u===this.userId&&t.path.isEqual(g))return xc(e).get(f).next((p=>{if(!p)throw xt(61480,{nr:a,batchId:f});At(p.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:p.userId,batchId:f}),s.push(ah(this.serializer,p))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn($t);const i=[];return t.forEach((s=>{const a=wy(this.userId,s.path),o=IDBKeyRange.lowerBound(a),l=_f(e).ee({range:o},((u,h,f)=>{const[g,p,E]=u,x=bo(p);g===this.userId&&s.path.isEqual(x)?r=r.add(E):f.done()}));i.push(l)})),ue.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=wy(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new jn($t);return _f(e).ee({range:a},((l,u,h)=>{const[f,g,p]=l,E=bo(g);f===this.userId&&r.isPrefixOf(E)?E.length===i&&(o=o.add(p)):h.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(xc(e).get(s).next((a=>{if(a===null)throw xt(35274,{batchId:s});At(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(ah(this.serializer,a))})))})),ue.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return q6(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),ue.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return _f(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const l=bo(s[1]);i.push(l)}else o.done()})).next((()=>{At(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return Z6(e,this.userId,t)}_r(e){return Q6(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:vh,lastStreamToken:""}))}}function Z6(n,e,t){const r=wy(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return _f(n).ee({range:s,X:!0},((o,l,u)=>{const[h,f,g]=o;h===e&&f===i&&(a=!0),u.done()})).next((()=>a))}function xc(n){return Yr(n,Va)}function _f(n){return Yr(n,s0)}function Q6(n){return Yr(n,np)}class Uh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uh(0)}static cr(){return new Uh(-1)}}class ZX{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Uh(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ct.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>nf(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(At(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return nf(e).ee(((a,o)=>{const l=Zg(o);l.sequenceNumber<=t&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>ue.waitFor(s))).next((()=>i))}forEachTarget(e,t){return nf(e).ee(((r,i)=>{const s=Zg(i);t(s)}))}lr(e){return GM(e).get(yx).next((t=>(At(t!==null,2888),t)))}hr(e,t){return GM(e).put(yx,t)}Pr(e,t){return nf(e).put(W6(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=Vh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return nf(e).ee({range:i,index:W5},((a,o,l)=>{const u=Zg(o);e1(t,u.target)&&(s=u,l.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=bc(e);return t.forEach((a=>{const o=Vi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=bc(e);return ue.forEach(t,(s=>{const a=Vi(s.path);return ue.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=bc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bc(e);let s=Qt();return i.ee({range:r,X:!0},((a,o,l)=>{const u=bo(a[1]),h=new ot(u);s=s.add(h)})).next((()=>s))}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[D5(r)],!1,!0);let s=0;return bc(e).ee({index:PA,X:!0,range:i},(([a,o],l,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return nf(e).get(t).next((r=>r?Zg(r):null))}}function nf(n){return Yr(n,a0)}function GM(n){return Yr(n,Eh)}function bc(n){return Yr(n,o0)}const BM="LruGarbageCollector",QX=1048576;function UM([n,e],[t,r]){const i=$t(n,t);return i===0?$t(e,r):i}class JX{constructor(e){this.Ir=e,this.buffer=new jn(UM),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();UM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class J6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Xe(BM,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){_u(t)?Xe(BM,"Ignoring IndexedDB error during garbage collection: ",t):await id(t)}await this.Vr(3e5)}))}}class eq{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(xa.ce);const r=new JX(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Xe("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(VM)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VM):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i)))).next((f=>(r=f,o=Date.now(),this.removeTargets(e,r,t)))).next((f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),ff()<=rn.DEBUG&&Xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(l-o)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f}))))}}function eF(n,e){return new eq(n,e)}class tq{constructor(e,t){this.db=e,this.garbageCollector=eF(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return H_(e,r)}removeReference(e,t,r){return H_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return H_(e,t)}br(e,t){return(function(i,s){let a=!1;return Q6(i).te((o=>Z6(i,o,s).next((l=>(l&&(a=!0),ue.resolve(!l)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const l=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,Ct.min()),bc(e).delete((function(f){return[0,Vi(f.path)]})(a)))))}));i.push(l)}})).next((()=>ue.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return H_(e,t)}Sr(e,t){const r=bc(e);let i,s=xa.ce;return r.ee({index:PA},(([a,o],{path:l,sequenceNumber:u})=>{a===0?(s!==xa.ce&&t(new ot(bo(i)),s),s=u,i=l):s=xa.ce})).next((()=>{s!==xa.ce&&t(new ot(bo(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function H_(n,e){return bc(n).put((function(r,i){return{targetId:0,path:Vi(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}class tF{constructor(){this.changes=new Gl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Hu(e).put(r)}removeEntry(e,t,r){return Hu(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Ix(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=_r.newInvalidDocument(t);return Hu(e).ee({index:Sy,range:IDBKeyRange.only(Fg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:_r.newInvalidDocument(t)};return Hu(e).ee({index:Sy,range:IDBKeyRange.only(Fg(t))},((i,s)=>{r={document:this.Cr(t,s),size:Rx(s)}})).next((()=>r))}getEntries(e,t){let r=Ks();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=Ks(),i=new tr(ot.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,Rx(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return ue.resolve();let i=new jn(WM);t.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(Fg(i.first()),Fg(i.last())),a=i.getIterator();let o=a.getNext();return Hu(e).ee({index:Sy,range:s},((l,u,h)=>{const f=ot.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&WM(o,f)<0;)r(o,null),o=a.getNext();o&&o.isEqual(f)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?h.j(Fg(o)):h.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Ix(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(e).J(IDBKeyRange.bound(o,l,!0)).next((u=>{s?.incrementDocumentReadCount(u.length);let h=Ks();for(const f of u){const g=this.Cr(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(n1(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h}))}getAllFromCollectionGroup(e,t,r,i){let s=Ks();const a=$M(t,r),o=$M(t,Zs.max());return Hu(e).ee({index:$5,range:IDBKeyRange.bound(a,o,!0)},((l,u,h)=>{const f=this.Cr(ot.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&h.done()})).next((()=>s))}newChangeBuffer(e){return new rq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return zM(e).get(ET).next((t=>(At(!!t,20021),t)))}Dr(e,t){return zM(e).put(ET,t)}Cr(e,t){if(t){const r=BX(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ct.min())))return r}return _r.newInvalidDocument(e)}}function nF(n){return new nq(n)}class rq extends tF{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Gl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new jn(((s,a)=>$t(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const l=AM(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=Rx(l);r+=u-o.size,t.push(this.Nr.addEntry(e,s,l))}else if(r-=o.size,this.trackRemovals){const l=AM(this.Nr.serializer,a.convertToNoDocument(Ct.min()));t.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function zM(n){return Yr(n,rp)}function Hu(n){return Yr(n,_x)}function Fg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $M(n,e){const t=e.documentKey.path.toArray();return[n,Ix(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function WM(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=$t(t[s],r[s]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class iq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&pm(r.mutation,i,vs.empty(),On.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Qt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Qt()){const i=Co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=Xg();return s.forEach(((o,l)=>{a=a.insert(o,l.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Qt())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=Ks();const a=mm(),o=(function(){return mm()})();return t.forEach(((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof Bl)?s=s.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),pm(h.mutation,u,h.mutation.getFieldMask(),On.now())):a.set(u.key,vs.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((u,h)=>a.set(u,h))),t.forEach(((u,h)=>o.set(u,new iq(h,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=mm();let i=new tr(((a,o)=>a-o)),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let h=r.get(l)||vs.empty();h=o.applyToLocalView(u,h),r.set(l,h);const f=(i.get(o.batchId)||Qt()).add(l);i=i.insert(o.batchId,f)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,h=l.value,f=E6();h.forEach((g=>{if(!s.has(g)){const p=R6(t.get(g),r.get(g));p!==null&&f.set(g,p),s=s.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ue.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return ot.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):p6(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ue.resolve(Co());let o=Jm,l=s;return a.next((u=>ue.forEach(u,((h,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(h)?ue.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{l=l.insert(h,g)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,l,u,Qt()))).next((h=>({batchId:o,changes:v6(h)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ot(t)).next((r=>{let i=Xg();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=Xg();return this.indexManager.getCollectionParents(e,s).next((o=>ue.forEach(o,(l=>{const u=(function(f,g){return new t1(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((h=>{h.forEach(((f,g)=>{a=a.insert(f,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((l,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,_r.newInvalidDocument(h)))}));let o=Xg();return a.forEach(((l,u)=>{const h=s.get(l);h!==void 0&&pm(h.mutation,u,vs.empty(),On.now()),n1(t,u)&&(o=o.insert(l,u))})),o}))}}class sq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ts(i.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:H6(i.bundledQuery),readTime:ts(i.readTime)}})(t)),ue.resolve()}}class aq{constructor(){this.overlays=new tr(ot.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return ue.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Co(),s=t.length+1,a=new ot(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tr(((u,h)=>u-h));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=s.get(u.largestBatchId);h===null&&(h=Co(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const o=Co(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,h)=>o.set(u,h))),!(o.size()>=i)););return ue.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new UA(t,r));let s=this.qr.get(t);s===void 0&&(s=Qt(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}class oq{constructor(){this.sessionToken=Lr.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}class KA{constructor(){this.Qr=new jn(ei.$r),this.Ur=new jn(ei.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new ei(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new ei(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new ot(new Sn([])),r=new ei(t,e),i=new ei(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ot(new Sn([])),r=new ei(t,e),i=new ei(t,e+1);let s=Qt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new ei(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class ei{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ot.comparator(e.key,t.key)||$t(e.Yr,t.Yr)}static Kr(e,t){return $t(e.Yr,t.Yr)||ot.comparator(e.key,t.key)}}class lq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jn(ei.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new GA(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new ei(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return ue.resolve(a)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?vh:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ei(t,0),i=new ei(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn($t);return t.forEach((i=>{const s=new ei(i,0),a=new ei(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ot.isDocumentKey(s)||(s=s.child(""));const a=new ei(new ot(s),0);let o=new jn($t);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)}),a),ue.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){At(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(i=>{const s=new ei(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new ei(t,0),i=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cq{constructor(e){this.ri=e,this.docs=(function(){return new tr(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(t))}getEntries(e,t){let r=Ks();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ks();const a=t.path,o=new ot(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||bA(V5(h),r)<=0||(i.has(h.key)||n1(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return ue.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xt(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new uq(this)}getSize(e){return ue.resolve(this.size)}}class uq extends tF{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class hq{constructor(e){this.persistence=e,this.si=new Gl((t=>Vh(t)),e1),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.oi=0,this._i=new KA,this.targetCount=0,this.ai=Uh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Uh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ue.waitFor(s).next((()=>i))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}class YA{constructor(e,t){this.ui={},this.overlays={},this.ci=new xa(0),this.li=!1,this.li=!0,this.hi=new oq,this.referenceDelegate=e(this),this.Pi=new hq(this),this.indexManager=new XX,this.remoteDocumentCache=(function(i){return new cq(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $6(t),this.Ii=new sq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new lq(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe("MemoryPersistence","Starting transaction:",e);const i=new dq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class dq extends B5{constructor(e){super(),this.currentSequenceNumber=e}}class sE{constructor(e){this.persistence=e,this.Ri=new KA,this.Vi=null}static mi(e){return new sE(e)}get fi(){if(this.Vi)return this.Vi;throw xt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const i=ot.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ct.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bx{constructor(e,t){this.persistence=e,this.pi=new Gl((r=>Vi(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=eF(this,t)}static mi(e,t){return new bx(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?ue.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,Ct.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Iy(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class fq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Wv("createOrUpgrade",t);r<1&&i>=1&&((function(l){l.createObjectStore(Jp)})(e),(function(l){l.createObjectStore(np,{keyPath:SY}),l.createObjectStore(Va,{keyPath:nM,autoIncrement:!0}).createIndex(gh,rM,{unique:!0}),l.createObjectStore(s0)})(e),HM(e),(function(l){l.createObjectStore(eh)})(e));let a=ue.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(o0),l.deleteObjectStore(a0),l.deleteObjectStore(Eh)})(e),HM(e)),a=a.next((()=>(function(l){const u=l.store(Eh),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ct.min().toTimestamp(),targetCount:0};return u.put(yx,h)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(l,u){return u.store(Va).J().next((f=>{l.deleteObjectStore(Va),l.createObjectStore(Va,{keyPath:nM,autoIncrement:!0}).createIndex(gh,rM,{unique:!0});const g=u.store(Va),p=f.map((E=>g.put(E)));return ue.waitFor(p)}))})(e,s)))),a=a.next((()=>{(function(l){l.createObjectStore(l0,{keyPath:MY})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(l){l.createObjectStore(rp)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(l){l.createObjectStore(Kv,{keyPath:NY})})(e),(function(l){l.createObjectStore(Yv,{keyPath:LY})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(l){const u=l.createObjectStore(Xv,{keyPath:BY});u.createIndex(ST,UY,{unique:!1}),u.createIndex(Y5,zY,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(l){const u=l.createObjectStore(_x,{keyPath:IY});u.createIndex(Sy,AY),u.createIndex($5,RY)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(eh)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(l){l.createObjectStore(kA,{keyPath:OY,autoIncrement:!0}).createIndex(wT,DY,{unique:!1}),l.createObjectStore(hm,{keyPath:FY}).createIndex(H5,jY,{unique:!1}),l.createObjectStore(dm,{keyPath:VY}).createIndex(K5,GY,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(hm).clear()})).next((()=>{t.objectStore(dm).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(l){l.createObjectStore(MA,{keyPath:$Y})})(e)}))),r<18&&i>=18&&E5()&&(a=a.next((()=>{t.objectStore(hm).clear()})).next((()=>{t.objectStore(dm).clear()}))),a}wi(e){let t=0;return e.store(eh).ee(((r,i)=>{t+=Rx(i)})).next((()=>{const r={byteSize:t};return e.store(rp).put(ET,r)}))}yi(e){const t=e.store(np),r=e.store(Va);return t.J().next((i=>ue.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,vh],[s.userId,s.lastAcknowledgedBatchId]);return r.J(gh,a).next((o=>ue.forEach(o,(l=>{At(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const u=ah(this.serializer,l);return q6(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(o0),r=e.store(eh);return e.store(Eh).get(yx).next((i=>{const s=[];return r.ee(((a,o)=>{const l=new Sn(a),u=(function(f){return[0,Vi(f)]})(l);s.push(t.get(u).next((h=>h?ue.resolve():(f=>t.put({targetId:0,path:Vi(f),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>ue.waitFor(s)))}))}bi(e,t){e.createObjectStore(ip,{keyPath:kY});const r=t.store(ip),i=new HA,s=a=>{if(i.add(a)){const o=a.lastSegment(),l=a.popLast();return r.put({collectionId:o,parent:Vi(l)})}};return t.store(eh).ee({X:!0},((a,o)=>{const l=new Sn(a);return s(l.popLast())})).next((()=>t.store(s0).ee({X:!0},(([a,o,l],u)=>{const h=bo(o);return s(h.popLast())}))))}Di(e){const t=e.store(a0);return t.ee(((r,i)=>{const s=Zg(i),a=W6(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(eh),i=[];return r.ee(((s,a)=>{const o=t.store(_x),l=(function(f){return f.document?new ot(Sn.fromString(f.document.name).popFirst(5)):f.noDocument?ot.fromSegments(f.noDocument.path):f.unknownDocument?ot.fromSegments(f.unknownDocument.path):xt(36783)})(a).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>ue.waitFor(i)))}Fi(e,t){const r=t.store(Va),i=nF(this.serializer),s=new YA(sE.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((l=>{let u=o.get(l.userId)??Qt();ah(this.serializer,l).keys().forEach((h=>u=u.add(h))),o.set(l.userId,u)})),ue.forEach(o,((l,u)=>{const h=new yi(u),f=rE.wt(this.serializer,h),g=s.getIndexManager(h),p=iE.wt(h,this.serializer,g,s.referenceDelegate);return new rF(i,p,f,g).recalculateAndSaveOverlaysForDocumentKeys(new TT(t,xa.ce),l).next()}))}))}}function HM(n){n.createObjectStore(o0,{keyPath:CY}).createIndex(PA,PY,{unique:!0}),n.createObjectStore(a0,{keyPath:"targetId"}).createIndex(W5,bY,{unique:!0}),n.createObjectStore(Eh)}const vc="IndexedDbPersistence",Z2=18e5,Q2=5e3,J2="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gq="main";class XA{constructor(e,t,r,i,s,a,o,l,u,h,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=h,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=g=>Promise.resolve(),!XA.v())throw new st(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tq(this,i),this.$i=t+gq,this.serializer=new $6(l),this.Ui=new Yc(this.$i,this.Ni,new fq(this.serializer)),this.hi=new zX,this.Pi=new ZX(this.referenceDelegate,this.serializer),this.remoteDocumentCache=nF(this.serializer),this.Ii=new UX,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,h===!1&&Qi(vc,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,J2);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new xa(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>K_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(_u(e))return Xe(vc,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Xe(vc,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return jg(e).get(Zd).next((t=>ue.resolve(this.es(t))))}ts(e){return K_(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Z2)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Yr(t,l0);return r.J().next((i=>{const s=this.ss(i,Z2),a=i.filter((o=>s.indexOf(o)===-1));return ue.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?ue.resolve(!0):jg(e).get(Zd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Q2)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new st(ke.FAILED_PRECONDITION,J2);return!1}}return!(!this.networkEnabled||!this.inForeground)||K_(e).J().next((r=>this.ss(r,Q2).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Xe(vc,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Jp,l0],(e=>{const t=new TT(e,xa.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>K_(e).J().next((t=>this.ss(t,Z2).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return iE.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qX(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return rE.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Xe(vc,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?KY:l===17?Q5:l===16?HY:l===15?NA:l===14?Z5:l===13?q5:l===12?WY:l===11?X5:void xt(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new TT(o,this.ci?this.ci.next():xa.ce),t==="readwrite-primary"?this.Hi(a).next((l=>!!l||this.Yi(a))).next((l=>{if(!l)throw Qi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new st(ke.FAILED_PRECONDITION,G5);return r(a)})).next((l=>this.Xi(a).next((()=>l)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return jg(e).get(Zd).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Q2)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new st(ke.FAILED_PRECONDITION,J2)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jg(e).put(Zd,t)}static v(){return Yc.v()}Zi(e){const t=jg(e);return t.get(Zd).next((r=>this.es(r)?(Xe(vc,"Releasing primary lease."),t.delete(Zd)):ue.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Qi(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;v5()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return Xe(vc,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Qi(vc,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Qi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jg(n){return Yr(n,Jp)}function K_(n){return Yr(n,l0)}function mq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class qA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Qt(),i=Qt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new qA(e,t.fromCache,r,i)}}class pq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class iF{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return v5()?8:U5(Kr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new pq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ff()<=rn.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",gf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(ff()<=rn.DEBUG&&Xe("QueryEngine","Query:",gf(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ff()<=rn.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",gf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ea(t))):ue.resolve())}ys(e,t){if(pM(t))return ue.resolve(null);let r=Ea(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=kT(t,null,"F"),r=Ea(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Qt(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(t,o);return this.Cs(t,u,a,l.readTime)?this.ys(e,kT(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,r,i){return pM(t)||i.isEqual(Ct.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?ue.resolve(null):(ff()<=rn.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gf(t)),this.vs(e,a,t,pY(i,Jm)).next((o=>o)))}))}Ds(e,t){let r=new jn(y6(e));return t.forEach(((i,s)=>{n1(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return ff()<=rn.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",gf(t)),this.ps.getDocumentsMatchingQuery(e,t,Zs.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const ZA="LocalStore",_q=3e8;class yq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new tr($t),this.xs=new Gl((s=>Vh(s)),e1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rF(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sF(n,e,t,r){return new yq(n,e,t,r)}async function aF(n,e){const t=Wt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let l=Qt();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function xq(n,e){const t=Wt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,l,u,h){const f=u.batch,g=f.keys();let p=ue.resolve();return g.forEach((E=>{p=p.next((()=>h.getEntry(l,E))).next((x=>{const w=u.docVersions.get(E);At(w!==null,48541),x.version.compareTo(w)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))}))})),p.next((()=>o.mutationQueue.removeMutationBatch(l,f)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let l=Qt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function oF(n){const e=Wt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function vq(n,e){const t=Wt(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((h,f)=>{const g=i.get(f);if(!g)return;o.push(t.Pi.removeMatchingKeys(s,h.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(s,h.addedDocuments,f))));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Lr.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,r)),i=i.insert(f,p),(function(x,w,T){return x.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=_q?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(g,p,h)&&o.push(t.Pi.updateTargetData(s,p))}));let l=Ks(),u=Qt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))})),o.push(Eq(s,a,e.documentUpdates).next((h=>{l=h.ks,u=h.qs}))),!r.isEqual(Ct.min())){const h=t.Pi.getLastRemoteSnapshotVersion(s).next((f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(h)}return ue.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(t.Ms=i,s)))}function Eq(n,e,t){let r=Qt(),i=Qt();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=Ks();return t.forEach(((o,l)=>{const u=s.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(Ct.min())?(e.removeEntry(o,l.readTime),a=a.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),a=a.insert(o,l)):Xe(ZA,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)})),{ks:a,qs:i}}))}function wq(n,e){const t=Wt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=vh),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Sq(n,e){const t=Wt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,ue.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new fl(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function VT(n,e,t){const r=Wt(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!_u(a))throw a;Xe(ZA,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function KM(n,e,t){const r=Wt(n);let i=Ct.min(),s=Qt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(l,u,h){const f=Wt(l),g=f.xs.get(h);return g!==void 0?ue.resolve(f.Ms.get(g)):f.Pi.getTargetData(u,h)})(r,a,Ea(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:Ct.min(),t?s:Qt()))).next((o=>(Tq(r,lX(e),o),{documents:o,Qs:s})))))}function Tq(n,e,t){let r=n.Os.get(e)||Ct.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}class YM{constructor(){this.activeTargetIds=gX()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lF{constructor(){this.Mo=new YM,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new YM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Iq{Oo(e){}shutdown(){}}const XM="ConnectivityMonitor";class qM{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Xe(XM,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Xe(XM,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Y_=null;function GT(){return Y_===null?Y_=(function(){return 268435456+Math.round(2147483648*Math.random())})():Y_++,"0x"+Y_.toString(16)}const eS="RestConnection",Aq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===xx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=GT(),o=this.zo(e,t.toUriEncodedString());Xe(eS,`Sending RPC '${e}' ${a}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(o),h=nd(u);return this.Jo(e,o,l,r,h).then((f=>(Xe(eS,`Received RPC '${e}' ${a}: `,f),f)),(f=>{throw Fh(eS,`RPC '${e}' ${a} failed with error: `,f,"url: ",o,"request:",r),f}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+R0})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=Aq[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class bq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ki="WebChannelConnection";class Cq extends Rq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=GT();return new Promise(((o,l)=>{const u=new C5;u.setWithCredentials(!0),u.listenOnce(P5.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case vy.NO_ERROR:const f=u.getResponseJson();Xe(ki,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),o(f);break;case vy.TIMEOUT:Xe(ki,`RPC '${e}' ${a} timed out`),l(new st(ke.DEADLINE_EXCEEDED,"Request time out"));break;case vy.HTTP_ERROR:const g=u.getStatus();if(Xe(ki,`RPC '${e}' ${a} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p?.error;if(E&&E.status&&E.message){const x=(function(T){const R=T.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(R)>=0?R:ke.UNKNOWN})(E.status);l(new st(x,E.message))}else l(new st(ke.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new st(ke.UNAVAILABLE,"Connection failed."));break;default:xt(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Xe(ki,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Xe(ki,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",h,r,15)}))}T_(e,t,r){const i=GT(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=N5(),o=M5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");Xe(ki,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=a.createWebChannel(h,l);this.I_(f);let g=!1,p=!1;const E=new bq({Yo:w=>{p?Xe(ki,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(g||(Xe(ki,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),Xe(ki,`RPC '${e}' stream ${i} sending:`,w),f.send(w))},Zo:()=>f.close()}),x=(w,T,R)=>{w.listen(T,(k=>{try{R(k)}catch(N){setTimeout((()=>{throw N}),0)}}))};return x(f,Yg.EventType.OPEN,(()=>{p||(Xe(ki,`RPC '${e}' stream ${i} transport opened.`),E.o_())})),x(f,Yg.EventType.CLOSE,(()=>{p||(p=!0,Xe(ki,`RPC '${e}' stream ${i} transport closed`),E.a_(),this.E_(f))})),x(f,Yg.EventType.ERROR,(w=>{p||(p=!0,Fh(ki,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),E.a_(new st(ke.UNAVAILABLE,"The operation could not be completed")))})),x(f,Yg.EventType.MESSAGE,(w=>{if(!p){const T=w.data[0];At(!!T,16349);const R=T,k=R?.error||R[0]?.error;if(k){Xe(ki,`RPC '${e}' stream ${i} received error:`,k);const N=k.status;let j=(function(C){const M=Pr[C];if(M!==void 0)return P6(M)})(N),B=k.message;j===void 0&&(j=ke.INTERNAL,B="Unknown error status: "+N+" with message "+k.message),p=!0,E.a_(new st(j,B)),f.close()}else Xe(ki,`RPC '${e}' stream ${i} received:`,T),E.u_(T)}})),x(o,k5.STAT_EVENT,(w=>{w.stat===yT.PROXY?Xe(ki,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===yT.NOPROXY&&Xe(ki,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Pq(){return typeof window<"u"?window:null}function Py(){return typeof document<"u"?document:null}function aE(n){return new kX(n,!0)}class cF{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ZM="PersistentStream";class uF{constructor(e,t,r,i,s,a,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cF(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ke.RESOURCE_EXHAUSTED?(Qi(t.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new st(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Xe(ZM,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Xe(ZM,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kq extends uF{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=LX(this.serializer,e),r=(function(s){if(!("targetChange"in s))return Ct.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ct.min():a.readTime?ts(a.readTime):Ct.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=LT(this.serializer),t.addTarget=(function(s,a){let o;const l=a.target;if(o=Ex(l)?{documents:j6(s,l)}:{query:V6(s,l).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=N6(s,a.resumeToken);const u=MT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ct.min())>0){o.readTime=m0(s,a.snapshotVersion.toTimestamp());const u=MT(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=DX(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=LT(this.serializer),t.removeTarget=e,this.q_(t)}}class Mq extends uF{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=OX(e.writeResults,e.commitTime),r=ts(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=LT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Tx(this.serializer,r)))};this.q_(t)}}class Nq{}class Lq extends Nq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,NT(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new st(ke.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,NT(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new st(ke.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Oq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qi(t),this.aa=!1):Xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const zh="RemoteStore";class Dq{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{sd(this)&&(Xe(zh,"Restarting streams for network reachability change."),await(async function(l){const u=Wt(l);u.Ea.add(4),await i1(u),u.Ra.set("Unknown"),u.Ea.delete(4),await oE(u)})(this))}))})),this.Ra=new Oq(r,i)}}async function oE(n){if(sd(n))for(const e of n.da)await e(!0)}async function i1(n){for(const e of n.da)await e(!1)}function hF(n,e){const t=Wt(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tR(t)?eR(t):C0(t).O_()&&JA(t,e))}function QA(n,e){const t=Wt(n),r=C0(t);t.Ia.delete(e),r.O_()&&dF(t,e),t.Ia.size===0&&(r.O_()?r.L_():sd(t)&&t.Ra.set("Unknown"))}function JA(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}C0(n).Y_(e)}function dF(n,e){n.Va.Ue(e),C0(n).Z_(e)}function eR(n){n.Va=new RX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),C0(n).start(),n.Ra.ua()}function tR(n){return sd(n)&&!C0(n).x_()&&n.Ia.size>0}function sd(n){return Wt(n).Ea.size===0}function fF(n){n.Va=void 0}async function Fq(n){n.Ra.set("Online")}async function jq(n){n.Ia.forEach(((e,t)=>{JA(n,e)}))}async function Vq(n,e){fF(n),tR(n)?(n.Ra.ha(e),eR(n)):n.Ra.set("Unknown")}async function Gq(n,e,t){if(n.Ra.set("Online"),e instanceof M6&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){Xe(zh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Cx(n,r)}else if(e instanceof by?n.Va.Ze(e):e instanceof k6?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ct.min()))try{const r=await oF(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(u);h&&s.Ia.set(u,h.withResumeToken(l.resumeToken,a))}})),o.targetMismatches.forEach(((l,u)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Lr.EMPTY_BYTE_STRING,h.snapshotVersion)),dF(s,l);const f=new fl(h.target,l,u,h.sequenceNumber);JA(s,f)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Xe(zh,"Failed to raise snapshot:",r),await Cx(n,r)}}async function Cx(n,e,t){if(!_u(e))throw e;n.Ea.add(1),await i1(n),n.Ra.set("Offline"),t||(t=()=>oF(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Xe(zh,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await oE(n)}))}function gF(n,e){return e().catch((t=>Cx(n,t,e)))}async function s1(n){const e=Wt(n),t=iu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vh;for(;Bq(e);)try{const i=await wq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Uq(e,i)}catch(i){await Cx(e,i)}mF(e)&&pF(e)}function Bq(n){return sd(n)&&n.Ta.length<10}function Uq(n,e){n.Ta.push(e);const t=iu(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mF(n){return sd(n)&&!iu(n).x_()&&n.Ta.length>0}function pF(n){iu(n).start()}async function zq(n){iu(n).ra()}async function $q(n){const e=iu(n);for(const t of n.Ta)e.ea(t.mutations)}async function Wq(n,e,t){const r=n.Ta.shift(),i=BA.from(r,e,t);await gF(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await s1(n)}async function Hq(n,e){e&&iu(n).X_&&await(async function(r,i){if((function(a){return TX(a)&&a!==ke.ABORTED})(i.code)){const s=r.Ta.shift();iu(r).B_(),await gF(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await s1(r)}})(n,e),mF(n)&&pF(n)}async function QM(n,e){const t=Wt(n);t.asyncQueue.verifyOperationInProgress(),Xe(zh,"RemoteStore received new credentials");const r=sd(t);t.Ea.add(3),await i1(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await oE(t)}async function Kq(n,e){const t=Wt(n);e?(t.Ea.delete(2),await oE(t)):e||(t.Ea.add(2),await i1(t),t.Ra.set("Unknown"))}function C0(n){return n.ma||(n.ma=(function(t,r,i){const s=Wt(t);return s.sa(),new kq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Fq.bind(null,n),t_:jq.bind(null,n),r_:Vq.bind(null,n),H_:Gq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),tR(n)?eR(n):n.Ra.set("Unknown")):(await n.ma.stop(),fF(n))}))),n.ma}function iu(n){return n.fa||(n.fa=(function(t,r,i){const s=Wt(t);return s.sa(),new Mq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:zq.bind(null,n),r_:Hq.bind(null,n),ta:$q.bind(null,n),na:Wq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await s1(n)):(await n.fa.stop(),n.Ta.length>0&&(Xe(zh,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class nR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Sl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new nR(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rR(n,e){if(Qi("AsyncQueue",`${e}: ${n}`),_u(n))return new st(ke.UNAVAILABLE,`${e}: ${n}`);throw n}class Df{static emptySet(e){return new Df(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ot.comparator(t.key,r.key):(t,r)=>ot.comparator(t.key,r.key),this.keyedMap=Xg(),this.sortedSet=new tr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Df)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Df;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class JM{constructor(){this.ga=new tr(ot.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class p0{constructor(e,t,r,i,s,a,o,l,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new p0(e,t,Df.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Yq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Xq{constructor(){this.queries=eN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Wt(t),s=i.queries;i.queries=eN(),s.forEach(((a,o)=>{for(const l of o.Sa)l.onError(r)}))})(this,new st(ke.ABORTED,"Firestore shutting down"))}}function eN(){return new Gl((n=>_6(n)),Qv)}async function qq(n,e){const t=Wt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Yq,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=rR(a,`Initialization of query '${gf(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&iR(t)}async function Zq(n,e){const t=Wt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Qq(n,e){const t=Wt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&iR(t)}function Jq(n,e,t){const r=Wt(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function iR(n){n.Ca.forEach((e=>{e.next()}))}var BT,tN;(tN=BT||(BT={})).Ma="default",tN.Cache="cache";class eZ{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new p0(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=p0.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==BT.Cache}}class _F{constructor(e){this.key=e}}class yF{constructor(e){this.key=e}}class tZ{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qt(),this.mutatedKeys=Qt(),this.eu=y6(e),this.tu=new Df(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new JM,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,f)=>{const g=i.get(h),p=n1(this.query,f)?f:null,E=!!g&&this.mutatedKeys.has(g.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;g&&p?g.data.isEqual(p.data)?E!==x&&(r.track({type:3,doc:p}),w=!0):this.su(g,p)||(r.track({type:2,doc:p}),w=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),w=!0):g&&!p&&(r.track({type:1,doc:g}),w=!0,(l||u)&&(o=!0)),w&&(p?(a=a.add(p),s=x?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,f)=>(function(p,E){const x=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt(20277,{Rt:w})}};return x(p)-x(E)})(h.type,f.type)||this.eu(h.doc,f.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,a.length!==0||u?{snapshot:new p0(this.query,e.tu,s,a,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new JM,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new yF(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new _F(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Qt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return p0.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sR="SyncEngine";class nZ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rZ{constructor(e){this.key=e,this.hu=!1}}class iZ{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Gl((o=>_6(o)),Qv),this.Iu=new Map,this.Eu=new Set,this.du=new tr(ot.comparator),this.Au=new Map,this.Ru=new KA,this.Vu={},this.mu=new Map,this.fu=Uh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sZ(n,e,t=!0){const r=TF(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await xF(r,e,t,!0),i}async function aZ(n,e){const t=TF(n);await xF(t,e,!0,!1)}async function xF(n,e,t,r){const i=await Sq(n.localStore,Ea(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await oZ(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&hF(n.remoteStore,i),o}async function oZ(n,e,t,r,i){n.pu=(f,g,p)=>(async function(x,w,T,R){let k=w.view.ru(T);k.Cs&&(k=await KM(x.localStore,w.query,!1).then((({documents:P})=>w.view.ru(P,k))));const N=R&&R.targetChanges.get(w.targetId),j=R&&R.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(k,x.isPrimaryClient,N,j);return rN(x,w.targetId,B.au),B.snapshot})(n,f,g,p);const s=await KM(n.localStore,e,!0),a=new tZ(e,s.Qs),o=a.ru(s.documents),l=r1.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,l);rN(n,t,u.au);const h=new nZ(e,t,a);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function lZ(n,e,t){const r=Wt(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Qv(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await VT(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&QA(r.remoteStore,i.targetId),UT(r,i.targetId)})).catch(id)):(UT(r,i.targetId),await VT(r.localStore,i.targetId,!0))}async function cZ(n,e){const t=Wt(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),QA(t.remoteStore,r.targetId))}async function uZ(n,e,t){const r=IF(n);try{const i=await(function(a,o){const l=Wt(a),u=On.now(),h=o.reduce(((p,E)=>p.add(E.key)),Qt());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let E=Ks(),x=Qt();return l.Ns.getEntries(p,h).next((w=>{E=w,E.forEach(((T,R)=>{R.isValidDocument()||(x=x.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(p,E))).next((w=>{f=w;const T=[];for(const R of o){const k=wX(R,f.get(R.key).overlayedDocument);k!=null&&T.push(new Bl(R.key,k,l6(k.value.mapValue),Ji.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,T,o)})).next((w=>{g=w;const T=w.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(p,w.batchId,T)}))})).then((()=>({batchId:g.batchId,changes:v6(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,l){let u=a.Vu[a.currentUser.toKey()];u||(u=new tr($t)),u=u.insert(o,l),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await a1(r,i.changes),await s1(r.remoteStore)}catch(i){const s=rR(i,"Failed to persist write");t.reject(s)}}async function vF(n,e){const t=Wt(n);try{const r=await vq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(At(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?At(a.hu,14607):i.removedDocuments.size>0&&(At(a.hu,42227),a.hu=!1))})),await a1(t,r,e)}catch(r){await id(r)}}function nN(n,e,t){const r=Wt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const l=Wt(a);l.onlineState=o;let u=!1;l.queries.forEach(((h,f)=>{for(const g of f.Sa)g.va(o)&&(u=!0)})),u&&iR(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hZ(n,e,t){const r=Wt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new tr(ot.comparator);a=a.insert(s,_r.newNoDocument(s,Ct.min()));const o=Qt().add(s),l=new nE(Ct.min(),new Map,new tr($t),a,o);await vF(r,l),r.du=r.du.remove(s),r.Au.delete(e),aR(r)}else await VT(r.localStore,e,!1).then((()=>UT(r,e,t))).catch(id)}async function dZ(n,e){const t=Wt(n),r=e.batch.batchId;try{const i=await xq(t.localStore,e);wF(t,r,null),EF(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await a1(t,i)}catch(i){await id(i)}}async function fZ(n,e,t){const r=Wt(n);try{const i=await(function(a,o){const l=Wt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return l.mutationQueue.lookupMutationBatch(u,o).next((f=>(At(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,o))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>l.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);wF(r,e,t),EF(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await a1(r,i)}catch(i){await id(i)}}function EF(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function wF(n,e,t){const r=Wt(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function UT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||SF(n,r)}))}function SF(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(QA(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),aR(n))}function rN(n,e,t){for(const r of t)r instanceof _F?(n.Ru.addReference(r.key,e),gZ(n,r)):r instanceof yF?(Xe(sR,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||SF(n,r.key)):xt(19791,{wu:r})}function gZ(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Xe(sR,"New document in limbo: "+t),n.Eu.add(r),aR(n))}function aR(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ot(Sn.fromString(e)),r=n.fu.next();n.Au.set(r,new rZ(t)),n.du=n.du.insert(t,r),hF(n.remoteStore,new fl(Ea(jA(t.path)),r,"TargetPurposeLimboResolution",xa.ce))}}async function a1(n,e,t){const r=Wt(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,l)=>{a.push(r.pu(l,e,t).then((u=>{if((u||t)&&r.isPrimaryClient){const h=u?!u.fromCache:t?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=qA.As(l.targetId,u);s.push(h)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(l,u){const h=Wt(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>ue.forEach(u,(g=>ue.forEach(g.Es,(p=>h.persistence.referenceDelegate.addReference(f,g.targetId,p))).next((()=>ue.forEach(g.ds,(p=>h.persistence.referenceDelegate.removeReference(f,g.targetId,p)))))))))}catch(f){if(!_u(f))throw f;Xe(ZA,"Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const p=h.Ms.get(g),E=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(g,x)}}})(r.localStore,s))}async function mZ(n,e){const t=Wt(n);if(!t.currentUser.isEqual(e)){Xe(sR,"User change. New user:",e.toKey());const r=await aF(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((l=>{l.reject(new st(ke.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await a1(t,r.Ls)}}function pZ(n,e){const t=Wt(n),r=t.Au.get(e);if(r&&r.hu)return Qt().add(r.key);{let i=Qt();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}function TF(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hZ.bind(null,e),e.Pu.H_=Qq.bind(null,e.eventManager),e.Pu.yu=Jq.bind(null,e.eventManager),e}function IF(n){const e=Wt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fZ.bind(null,e),e}class hp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=aE(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sF(this.persistence,new iF,e.initialUser,this.serializer)}Cu(e){return new YA(sE.mi,this.serializer)}Du(e){return new lF}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hp.provider={build:()=>new hp};class _Z extends hp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){At(this.persistence.referenceDelegate instanceof bx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J6(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new YA((r=>bx.mi(r,t)),this.serializer)}}class yZ extends hp{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await IF(this.xu.syncEngine),await s1(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return sF(this.persistence,new iF,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new J6(r,e.asyncQueue,t)}Mu(e,t){const r=new vY(t,this.persistence);return new xY(e.asyncQueue,r)}Cu(e){const t=mq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Li.withCacheSize(this.cacheSizeBytes):Li.DEFAULT;return new XA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Pq(),Py(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new lF}}class Px{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mZ.bind(null,this.syncEngine),await Kq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xq})()}createDatastore(e){const t=aE(e.databaseInfo.databaseId),r=(function(s){return new Cq(s)})(e.databaseInfo);return(function(s,a,o,l){return new Lq(s,a,o,l)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new Dq(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>nN(this.syncEngine,t,0)),(function(){return qM.v()?new qM:new Iq})())}createSyncEngine(e,t){return(function(i,s,a,o,l,u,h){const f=new iZ(i,s,a,o,l,u);return h&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Wt(t);Xe(zh,"RemoteStore shutting down."),r.Ea.add(5),await i1(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Px.provider={build:()=>new Px};class xZ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const su="FirestoreClient";class vZ{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yi.UNAUTHENTICATED,this.clientId=RA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Xe(su,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Xe(su,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=rR(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function tS(n,e){n.asyncQueue.verifyOperationInProgress(),Xe(su,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await aF(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function iN(n,e){n.asyncQueue.verifyOperationInProgress();const t=await EZ(n);Xe(su,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>QM(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>QM(e.remoteStore,i))),n._onlineComponents=e}async function EZ(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Xe(su,"Using user provided OfflineComponentProvider");try{await tS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Fh("Error using user provided cache. Falling back to memory cache: "+t),await tS(n,new hp)}}else Xe(su,"Using default OfflineComponentProvider"),await tS(n,new _Z(void 0));return n._offlineComponents}async function AF(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Xe(su,"Using user provided OnlineComponentProvider"),await iN(n,n._uninitializedComponentsProvider._online)):(Xe(su,"Using default OnlineComponentProvider"),await iN(n,new Px))),n._onlineComponents}function wZ(n){return AF(n).then((e=>e.syncEngine))}async function SZ(n){const e=await AF(n),t=e.eventManager;return t.onListen=sZ.bind(null,e.syncEngine),t.onUnlisten=lZ.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aZ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cZ.bind(null,e.syncEngine),t}function TZ(n,e,t={}){const r=new Sl;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,l,u){const h=new xZ({next:g=>{h.Nu(),a.enqueueAndForget((()=>Zq(s,f))),g.fromCache&&l.source==="server"?u.reject(new st(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new eZ(o,h,{includeMetadataChanges:!0,qa:!0});return qq(s,f)})(await SZ(n),n.asyncQueue,e,t,r))),r.promise}function RF(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const sN=new Map;const bF="firestore.googleapis.com",aN=!0;class oN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bF,this.ssl=aN}else this.host=e.host,this.ssl=e.ssl??aN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QX)throw new st(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RF(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new sY;switch(r.type){case"firstParty":return new cY(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=sN.get(t);r&&(Xe("ComponentProvider","Removing Datastore"),sN.delete(t),r.terminate())})(this),Promise.resolve()}}function IZ(n,e,t,r={}){n=tu(n,lE);const i=nd(e),s=n._getSettings(),a={...s,emulatorOptions:n._getEmulatorOptions()},o=`${e}:${t}`;i&&(EA(`https://${o}`),wA("Firestore",!0)),s.host!==bF&&s.host!==o&&Fh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:o,ssl:i,emulatorOptions:r};if(!Lh(l,a)&&(n._setSettings(l),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=yi.MOCK_USER;else{u=y5(r.mockUserToken,n._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new st(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new yi(f)}n._authCredentials=new aY(new O5(u,h))}}class P0{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new P0(this.firestore,e,this._query)}}class Wr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wr(this.firestore,e,this._key)}toJSON(){return{type:Wr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qp(t,Wr._jsonSchema))return new Wr(e,r||null,new ot(Sn.fromString(t.referencePath)))}}Wr._jsonSchemaVersion="firestore/documentReference/1.0",Wr._jsonSchema={type:Mr("string",Wr._jsonSchemaVersion),referencePath:Mr("string")};class Xc extends P0{constructor(e,t,r){super(e,t,jA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wr(this.firestore,null,new ot(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function lN(n,e,...t){if(n=oi(n),F5("collection","path",e),n instanceof lE){const r=Sn.fromString(e,...t);return Zk(r),new Xc(n,null,r)}{if(!(n instanceof Wr||n instanceof Xc))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return Zk(r),new Xc(n.firestore,null,r)}}function zT(n,e,...t){if(n=oi(n),arguments.length===1&&(e=RA.newId()),F5("doc","path",e),n instanceof lE){const r=Sn.fromString(e,...t);return qk(r),new Wr(n,null,new ot(r))}{if(!(n instanceof Wr||n instanceof Xc))throw new st(ke.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sn.fromString(e,...t));return qk(r),new Wr(n.firestore,n instanceof Xc?n.converter:null,new ot(r))}}const cN="AsyncQueue";class uN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cF(this,"async_queue_retry"),this._c=()=>{const r=Py();r&&Xe(cN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Py();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Py();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Sl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_u(e))throw e;Xe(cN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Qi("INTERNAL UNHANDLED ERROR: ",hN(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=nR.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&xt(47125,{Pc:hN(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class k0 extends lE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uN,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uN(e),this._firestoreClient=void 0,await e}}}function AZ(n,e){const t=typeof n=="object"?n:IA(),r=typeof n=="string"?n:xx,i=zv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=m5("firestore");s&&IZ(i,...s)}return i}function CF(n){if(n._terminated)throw new st(ke.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||PF(n),n._firestoreClient}function PF(n){const e=n._freezeSettings(),t=(function(i,s,a,o){return new XY(i,s,a,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,RF(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new vZ(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(n._componentsProvider))}function RZ(n,e){Fh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return bZ(n,Px.provider,{build:r=>new yZ(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function bZ(n,e,t){if((n=tu(n,k0))._firestoreClient||n._terminated)throw new st(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new st(ke.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},PF(n)}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Lr.fromBase64String(e))}catch(t){throw new st(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ma._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qp(e,ma._jsonSchema))return ma.fromBase64String(e.bytes)}}ma._jsonSchemaVersion="firestore/bytes/1.0",ma._jsonSchema={type:Mr("string",ma._jsonSchemaVersion),bytes:Mr("string")};class cE{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new st(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class oR{constructor(e){this._methodName=e}}class ko{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new st(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new st(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ko._jsonSchemaVersion}}static fromJSON(e){if(Qp(e,ko._jsonSchema))return new ko(e.latitude,e.longitude)}}ko._jsonSchemaVersion="firestore/geoPoint/1.0",ko._jsonSchema={type:Mr("string",ko._jsonSchemaVersion),latitude:Mr("number"),longitude:Mr("number")};class Mo{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Mo._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qp(e,Mo._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Mo(e.vectorValues);throw new st(ke.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mo._jsonSchemaVersion="firestore/vectorValue/1.0",Mo._jsonSchema={type:Mr("string",Mo._jsonSchemaVersion),vectorValues:Mr("object")};const CZ=/^__.*__$/;class PZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms):new b0(e,this.data,t,this.fieldTransforms)}}class kF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MF(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt(40011,{Ac:n})}}class lR{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new lR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(MF(this.Ac)&&CZ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||aE(e)}Cc(e,t,r,i=!1){return new lR({Ac:e,methodName:t,Dc:r,path:lr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cR(n){const e=n._freezeSettings(),t=aE(n._databaseId);return new kZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MZ(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);uR("Data must be an object, but it was:",a,r);const o=NF(r,a);let l,u;if(s.merge)l=new vs(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const g=$T(e,f,t);if(!a.contains(g))throw new st(ke.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);OF(h,g)||h.push(g)}l=new vs(h),u=a.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,u=a.fieldTransforms;return new PZ(new Di(o),l,u)}class uE extends oR{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uE}}function NZ(n,e,t,r){const i=n.Cc(1,e,t);uR("Data must be an object, but it was:",i,r);const s=[],a=Di.empty();yu(r,((l,u)=>{const h=hR(e,l,t);u=oi(u);const f=i.yc(h);if(u instanceof uE)s.push(h);else{const g=o1(u,f);g!=null&&(s.push(h),a.set(h,g))}}));const o=new vs(s);return new kF(a,o,i.fieldTransforms)}function LZ(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[$T(e,r,t)],l=[i];if(s.length%2!=0)throw new st(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push($T(e,s[g])),l.push(s[g+1]);const u=[],h=Di.empty();for(let g=o.length-1;g>=0;--g)if(!OF(u,o[g])){const p=o[g];let E=l[g];E=oi(E);const x=a.yc(p);if(E instanceof uE)u.push(p);else{const w=o1(E,x);w!=null&&(u.push(p),h.set(p,w))}}const f=new vs(u);return new kF(h,f,a.fieldTransforms)}function OZ(n,e,t,r=!1){return o1(t,n.Cc(r?4:3,e))}function o1(n,e){if(LF(n=oi(n)))return uR("Unsupported field value:",e,n),NF(n,e);if(n instanceof oR)return(function(r,i){if(!MF(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let l=o1(o,i.wc(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=oi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=On.fromDate(r);return{timestampValue:m0(i.serializer,s)}}if(r instanceof On){const s=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:m0(i.serializer,s)}}if(r instanceof ko)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ma)return{bytesValue:N6(i.serializer,r._byteString)};if(r instanceof Wr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$A(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mo)return(function(a,o){return{mapValue:{fields:{[OA]:{stringValue:DA},[c0]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return VA(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${$v(r)}`)})(n,e)}function NF(n,e){const t={};return J5(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yu(n,((r,i)=>{const s=o1(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function LF(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof On||n instanceof ko||n instanceof ma||n instanceof Wr||n instanceof oR||n instanceof Mo)}function uR(n,e,t){if(!LF(t)||!j5(t)){const r=$v(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function $T(n,e,t){if((e=oi(e))instanceof cE)return e._internalPath;if(typeof e=="string")return hR(n,e);throw kx("Field path arguments must be of type string or ",n,!1,void 0,t)}const DZ=new RegExp("[~\\*/\\[\\]]");function hR(n,e,t){if(e.search(DZ)>=0)throw kx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cE(...e.split("."))._internalPath}catch{throw kx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kx(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new st(ke.INVALID_ARGUMENT,o+n+l)}function OF(n,e){return n.some((t=>t.isEqual(e)))}class DF{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dR("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class FZ extends DF{data(){return super.data()}}function dR(n,e){return typeof e=="string"?hR(n,e):e instanceof cE?e._internalPath:e._delegate._internalPath}function jZ(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new st(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fR{}class VZ extends fR{}function GZ(n,e,...t){let r=[];e instanceof fR&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((l=>l instanceof gR)).length,o=s.filter((l=>l instanceof hE)).length;if(a>1||a>0&&o>0)throw new st(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class hE extends VZ{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new hE(e,t,r)}_apply(e){const t=this._parse(e);return FF(e._query,t),new P0(e.firestore,e.converter,PT(e._query,t))}_parse(e){const t=cR(e.firestore);return(function(s,a,o,l,u,h,f){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new st(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fN(f,h);const E=[];for(const x of f)E.push(dN(l,s,x));g={arrayValue:{values:E}}}else g=dN(l,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fN(f,h),g=OZ(o,a,f,h==="in"||h==="not-in");return sn.create(u,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function BZ(n,e,t){const r=e,i=dR("where",n);return hE._create(i,r,t)}class gR extends fR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gR(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const l of o)FF(a,l),a=PT(a,l)})(e._query,t),new P0(e.firestore,e.converter,PT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dN(n,e,t){if(typeof(t=oi(t))=="string"){if(t==="")throw new st(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p6(e)&&t.indexOf("/")!==-1)throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Sn.fromString(t));if(!ot.isDocumentKey(r))throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return op(n,new ot(r))}if(t instanceof Wr)return op(n,t._key);throw new st(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$v(t)}.`)}function fN(n,e){if(!Array.isArray(n)||n.length===0)throw new st(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FF(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UZ{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return yu(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){const t=e.fields?.[c0].arrayValue?.values?.map((r=>er(r.doubleValue)));return new Mo(t)}convertGeoPoint(e){return new ko(er(e.latitude),er(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const t=kl(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sn.fromString(e);At(z6(r),9688,{name:e});const i=new jh(r.get(1),r.get(3)),s=new ot(r.popFirst(5));return i.isEqual(t)||Qi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function zZ(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class X_{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ff extends DF{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(dR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ff._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ff._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ff._jsonSchema={type:Mr("string",Ff._jsonSchemaVersion),bundleSource:Mr("string","DocumentSnapshot"),bundleName:Mr("string"),bundle:Mr("string")};class ky extends Ff{data(e={}){return super.data(e)}}class jf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new X_(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ky(this._firestore,this._userDataWriter,r.key,r,new X_(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new st(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const l=new ky(i._firestore,i._userDataWriter,o.doc.key,o.doc,new X_(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const l=new ky(i._firestore,i._userDataWriter,o.doc.key,o.doc,new X_(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),h=a.indexOf(o.doc.key)),{type:$Z(o.type),doc:l,oldIndex:u,newIndex:h}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(ke.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=RA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $Z(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt(61501,{type:n})}}jf._jsonSchemaVersion="firestore/querySnapshot/1.0",jf._jsonSchema={type:Mr("string",jf._jsonSchemaVersion),bundleSource:Mr("string","QuerySnapshot"),bundleName:Mr("string"),bundle:Mr("string")};class WZ extends UZ{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wr(this.firestore,null,t)}}function HZ(n){n=tu(n,P0);const e=tu(n.firestore,k0),t=CF(e),r=new WZ(e);return jZ(n._query),TZ(t,n._query).then((i=>new jf(e,r,n,i)))}function KZ(n,e,t,...r){n=tu(n,Wr);const i=tu(n.firestore,k0),s=cR(i);let a;return a=typeof(e=oi(e))=="string"||e instanceof cE?LZ(s,"updateDoc",n._key,e,t,r):NZ(s,"updateDoc",n._key,e),mR(i,[a.toMutation(n._key,Ji.exists(!0))])}function YZ(n){return mR(tu(n.firestore,k0),[new tE(n._key,Ji.none())])}function XZ(n,e){const t=tu(n.firestore,k0),r=zT(n),i=zZ(n.converter,e);return mR(t,[MZ(cR(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ji.exists(!1))]).then((()=>r))}function mR(n,e){return(function(r,i){const s=new Sl;return r.asyncQueue.enqueueAndForget((async()=>uZ(await wZ(r),i,s))),s.promise})(CF(n),e)}(function(e,t=!0){(function(i){R0=i})(rd),Oh(new eu("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new k0(new oY(r.getProvider("auth-internal")),new uY(a,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jh(u.options.projectId,h)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),Po(Hk,Kk,e),Po(Hk,Kk,"esm2020")})();var qZ="firebase",ZZ="12.7.0";Po(qZ,ZZ,"app");function jF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QZ=jF,VF=new qp("auth","Firebase",jF());const Mx=new SA("@firebase/auth");function JZ(n,...e){Mx.logLevel<=rn.WARN&&Mx.warn(`Auth (${rd}): ${n}`,...e)}function My(n,...e){Mx.logLevel<=rn.ERROR&&Mx.error(`Auth (${rd}): ${n}`,...e)}function Nl(n,...e){throw pR(n,...e)}function No(n,...e){return pR(n,...e)}function GF(n,e,t){const r={...QZ(),[e]:t};return new qp("auth","Firebase",r).create(e,{appName:n.name})}function qc(n){return GF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pR(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VF.create(n,...e)}function Bt(n,e,...t){if(!n)throw pR(e,...t)}function gl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw My(e),new Error(e)}function Ll(n,e){n||gl(e)}function WT(){return typeof self<"u"&&self.location?.href||""}function eQ(){return gN()==="http:"||gN()==="https:"}function gN(){return typeof self<"u"&&self.location?.protocol||null}function tQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eQ()||GH()||"connection"in navigator)?navigator.onLine:!0}function nQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class l1{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ll(t>e,"Short delay should be less than long delay!"),this.isMobile=jH()||BH()}get(){return tQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _R(n,e){Ll(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class BF{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const iQ=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],sQ=new l1(3e4,6e4);function dE(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function M0(n,e,t,r,i={}){return UF(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Zp({key:n.config.apiKey,...a}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...s};return VH()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&nd(n.emulatorConfig.host)&&(u.credentials="include"),BF.fetch()(await $F(n,n.config.apiHost,t,o),u)})}async function UF(n,e,t){n._canInitEmulator=!1;const r={...rQ,...e};try{const i=new aQ(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw q_(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw q_(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw q_(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw q_(n,"user-disabled",a);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw GF(n,h,u);Nl(n,h)}}catch(i){if(i instanceof Ko)throw i;Nl(n,"network-request-failed",{message:String(i)})}}async function zF(n,e,t,r,i={}){const s=await M0(n,e,t,r,i);return"mfaPendingCredential"in s&&Nl(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function $F(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?_R(n.config,i):`${n.config.apiScheme}://${i}`;return iQ.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class aQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(No(this.auth,"network-request-failed")),sQ.get())})}}function q_(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=No(n,e,r);return i.customData._tokenResponse=t,i}async function oQ(n,e){return M0(n,"POST","/v1/accounts:delete",e)}async function Nx(n,e){return M0(n,"POST","/v1/accounts:lookup",e)}function _m(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lQ(n,e=!1){const t=oi(n),r=await t.getIdToken(e),i=yR(r);Bt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:_m(nS(i.auth_time)),issuedAtTime:_m(nS(i.iat)),expirationTime:_m(nS(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function nS(n){return Number(n)*1e3}function yR(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return My("JWT malformed, contained fewer than 3 sections"),null;try{const i=d5(t);return i?JSON.parse(i):(My("Failed to decode base64 JWT payload"),null)}catch(i){return My("Caught error parsing JWT payload as JSON",i?.toString()),null}}function mN(n){const e=yR(n);return Bt(e,"internal-error"),Bt(typeof e.exp<"u","internal-error"),Bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function dp(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ko&&cQ(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function cQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class uQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class HT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_m(this.lastLoginAt),this.creationTime=_m(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Lx(n){const e=n.auth,t=await n.getIdToken(),r=await dp(n,Nx(e,{idToken:t}));Bt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=i.providerUserInfo?.length?WF(i.providerUserInfo):[],a=dQ(n.providerData,s),o=n.isAnonymous,l=!(n.email&&i.passwordHash)&&!a?.length,u=o?l:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new HT(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)}async function hQ(n){const e=oi(n);await Lx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WF(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function fQ(n,e){const t=await UF(n,{},async()=>{const r=Zp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await $F(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return n.emulatorConfig&&nd(n.emulatorConfig.host)&&(l.credentials="include"),BF.fetch()(a,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function gQ(n,e){return M0(n,"POST","/v2/accounts:revokeToken",dE(n,e))}class Vf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt(typeof e.idToken<"u","internal-error"),Bt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Bt(e.length!==0,"internal-error");const t=mN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await fQ(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Vf;return r&&(Bt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Bt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Bt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vf,this.toJSON())}_performRefresh(){return gl("not implemented")}}function Ec(n,e){Bt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $a{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new uQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new HT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dp(this,this.stsTokenManager.getToken(this.auth,e));return Bt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return lQ(this,e)}reload(){return hQ(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $a({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Lx(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ga(this.auth.app))return Promise.reject(qc(this.auth));const e=await this.getIdToken();return await dp(this,oQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:p,providerData:E,stsTokenManager:x}=t;Bt(f&&x,e,"internal-error");const w=Vf.fromJSON(this.name,x);Bt(typeof f=="string",e,"internal-error"),Ec(r,e.name),Ec(i,e.name),Bt(typeof g=="boolean",e,"internal-error"),Bt(typeof p=="boolean",e,"internal-error"),Ec(s,e.name),Ec(a,e.name),Ec(o,e.name),Ec(l,e.name),Ec(u,e.name),Ec(h,e.name);const T=new $a({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:p,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:w,createdAt:u,lastLoginAt:h});return E&&Array.isArray(E)&&(T.providerData=E.map(R=>({...R}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Vf;i.updateFromServerResponse(t);const s=new $a({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lx(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Bt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?WF(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,o=new Vf;o.updateFromIdToken(r);const l=new $a({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new HT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const pN=new Map;function ml(n){Ll(n instanceof Function,"Expected a class definition");let e=pN.get(n);return e?(Ll(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,pN.set(n,e),e)}class HF{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HF.type="NONE";const _N=HF;function Ny(n,e,t){return`firebase:${n}:${e}:${t}`}class Gf{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ny(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ny("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Nx(this.auth,{idToken:e}).catch(()=>{});return t?$a._fromGetAccountInfoResponse(this.auth,t,e):null}return $a._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Gf(ml(_N),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ml(_N);const a=Ny(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const g=await Nx(e,{idToken:h}).catch(()=>{});if(!g)break;f=await $a._fromGetAccountInfoResponse(e,g,h)}else f=$a._fromJSON(e,h);u!==s&&(o=f),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Gf(s,e,r):(s=l[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Gf(s,e,r))}}function yN(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QF(e))return"Blackberry";if(JF(e))return"Webos";if(YF(e))return"Safari";if((e.includes("chrome/")||XF(e))&&!e.includes("edge/"))return"Chrome";if(ZF(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KF(n=Kr()){return/firefox\//i.test(n)}function YF(n=Kr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XF(n=Kr()){return/crios\//i.test(n)}function qF(n=Kr()){return/iemobile/i.test(n)}function ZF(n=Kr()){return/android/i.test(n)}function QF(n=Kr()){return/blackberry/i.test(n)}function JF(n=Kr()){return/webos/i.test(n)}function xR(n=Kr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mQ(n=Kr()){return xR(n)&&!!window.navigator?.standalone}function pQ(){return UH()&&document.documentMode===10}function e8(n=Kr()){return xR(n)||ZF(n)||JF(n)||QF(n)||/windows phone/i.test(n)||qF(n)}function t8(n,e=[]){let t;switch(n){case"Browser":t=yN(Kr());break;case"Worker":t=`${yN(Kr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rd}/${r}`}class _Q{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const l=e(s);a(l)}catch(l){o(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function yQ(n,e={}){return M0(n,"GET","/v2/passwordPolicy",dE(n,e))}const xQ=6;class vQ{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xQ,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class EQ{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xN(this),this.idTokenSubscription=new xN(this),this.beforeStateQueue=new _Q(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ml(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Gf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Nx(this,{idToken:e}),r=await $a._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ga(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=r?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lx(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ga(this.app))return Promise.reject(qc(this));const t=e?oi(e):null;return t&&Bt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ga(this.app)?Promise.reject(qc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ga(this.app)?Promise.reject(qc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ml(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yQ(this),t=new vQ(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qp("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await gQ(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ml(e)||this._popupRedirectResolver;Bt(t,this,"argument-error"),this.redirectPersistenceManager=await Gf.create(this,[ml(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{const l=e.addObserver(t);return()=>{a=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=t8(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ga(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&JZ(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fE(n){return oi(n)}class xN{constructor(e){this.auth=e,this.observer=null,this.addObserver=YH(t=>this.observer=t)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let vR={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wQ(n){vR=n}function SQ(n){return vR.loadJS(n)}function TQ(){return vR.gapiScript}function IQ(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function AQ(n,e){const t=zv(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Lh(s,e??{}))return i;Nl(i,"already-initialized")}return t.initialize({options:e})}function RQ(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ml);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function bQ(n,e,t){const r=fE(n);Bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=n8(e),{host:a,port:o}=CQ(e),l=o===null?"":`:${o}`,u={url:`${s}//${a}${l}/`},h=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Bt(Lh(u,r.config.emulator)&&Lh(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,nd(a)?(EA(`${s}//${a}${l}`),wA("Auth",!0)):PQ()}function n8(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function CQ(n){const e=n8(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:vN(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:vN(a)}}}function vN(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function PQ(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class r8{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gl("not implemented")}_getIdTokenResponse(e){return gl("not implemented")}_linkToIdToken(e,t){return gl("not implemented")}_getReauthenticationResolver(e){return gl("not implemented")}}async function Bf(n,e){return zF(n,"POST","/v1/accounts:signInWithIdp",dE(n,e))}const kQ="http://localhost";class $h extends r8{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $h(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nl("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new $h(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Bf(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bf(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bf(e,t)}buildRequest(){const e={requestUri:kQ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zp(t)}return e}}class i8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class c1 extends i8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cc extends c1{constructor(){super("facebook.com")}static credential(e){return $h._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cc.credential(e.oauthAccessToken)}catch{return null}}}Cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cc.PROVIDER_ID="facebook.com";class Pc extends c1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $h._fromParams({providerId:Pc.PROVIDER_ID,signInMethod:Pc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pc.credentialFromTaggedObject(e)}static credentialFromError(e){return Pc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Pc.credential(t,r)}catch{return null}}}Pc.GOOGLE_SIGN_IN_METHOD="google.com";Pc.PROVIDER_ID="google.com";class kc extends c1{constructor(){super("github.com")}static credential(e){return $h._fromParams({providerId:kc.PROVIDER_ID,signInMethod:kc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kc.credentialFromTaggedObject(e)}static credentialFromError(e){return kc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kc.credential(e.oauthAccessToken)}catch{return null}}}kc.GITHUB_SIGN_IN_METHOD="github.com";kc.PROVIDER_ID="github.com";class Mc extends c1{constructor(){super("twitter.com")}static credential(e,t){return $h._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Mc.credential(t,r)}catch{return null}}}Mc.TWITTER_SIGN_IN_METHOD="twitter.com";Mc.PROVIDER_ID="twitter.com";async function MQ(n,e){return zF(n,"POST","/v1/accounts:signUp",dE(n,e))}class au{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await $a._fromIdTokenResponse(e,r,i),a=EN(r);return new au({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=EN(r);return new au({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function EN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function NQ(n){if(ga(n.app))return Promise.reject(qc(n));const e=fE(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new au({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await MQ(e,{returnSecureToken:!0}),r=await au._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}class Ox extends Ko{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ox.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ox(e,t,r,i)}}function s8(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ox._fromErrorAndOperation(n,s,e,r):s})}async function LQ(n,e,t=!1){const r=await dp(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return au._forOperation(n,"link",r)}async function OQ(n,e,t=!1){const{auth:r}=n;if(ga(r.app))return Promise.reject(qc(r));const i="reauthenticate";try{const s=await dp(n,s8(r,i,e,n),t);Bt(s.idToken,r,"internal-error");const a=yR(s.idToken);Bt(a,r,"internal-error");const{sub:o}=a;return Bt(n.uid===o,r,"user-mismatch"),au._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nl(r,"user-mismatch"),s}}async function DQ(n,e,t=!1){if(ga(n.app))return Promise.reject(qc(n));const r="signIn",i=await s8(n,r,e),s=await au._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}function FQ(n,e,t,r){return oi(n).onIdTokenChanged(e,t,r)}function jQ(n,e,t){return oi(n).beforeAuthStateChanged(e,t)}function VQ(n,e,t,r){return oi(n).onAuthStateChanged(e,t,r)}function GQ(n){return oi(n).signOut()}const Dx="__sak";class a8{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dx,"1"),this.storage.removeItem(Dx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const BQ=1e3,UQ=10;class o8 extends a8{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=e8(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,l)=>{this.notifyListeners(a,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);pQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,UQ):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},BQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o8.type="LOCAL";const zQ=o8;class l8 extends a8{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}l8.type="SESSION";const c8=l8;function $Q(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class gE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new gE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),l=await $Q(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gE.receivers=[];function ER(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class WQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,l)=>{const u=ER("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Lo(){return window}function HQ(n){Lo().location.href=n}function u8(){return typeof Lo().WorkerGlobalScope<"u"&&typeof Lo().importScripts=="function"}async function KQ(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YQ(){return navigator?.serviceWorker?.controller||null}function XQ(){return u8()?self:null}const h8="firebaseLocalStorageDb",qQ=1,Fx="firebaseLocalStorage",d8="fbase_key";class u1{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mE(n,e){return n.transaction([Fx],e?"readwrite":"readonly").objectStore(Fx)}function ZQ(){const n=indexedDB.deleteDatabase(h8);return new u1(n).toPromise()}function KT(){const n=indexedDB.open(h8,qQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Fx,{keyPath:d8})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Fx)?e(r):(r.close(),await ZQ(),e(await KT()))})})}async function wN(n,e,t){const r=mE(n,!0).put({[d8]:e,value:t});return new u1(r).toPromise()}async function QQ(n,e){const t=mE(n,!1).get(e),r=await new u1(t).toPromise();return r===void 0?null:r.value}function SN(n,e){const t=mE(n,!0).delete(e);return new u1(t).toPromise()}const JQ=800,eJ=3;class f8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await KT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>eJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gE._getInstance(XQ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await KQ(),!this.activeServiceWorker)return;this.sender=new WQ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KT();return await wN(e,Dx,"1"),await SN(e,Dx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>wN(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>QQ(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>SN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=mE(i,!1).getAll();return new u1(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}f8.type="LOCAL";const tJ=f8;new l1(3e4,6e4);function nJ(n,e){return e?ml(e):(Bt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class wR extends r8{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rJ(n){return DQ(n.auth,new wR(n),n.bypassAuthState)}function iJ(n){const{auth:e,user:t}=n;return Bt(t,e,"internal-error"),OQ(t,new wR(n),n.bypassAuthState)}async function sJ(n){const{auth:e,user:t}=n;return Bt(t,e,"internal-error"),LQ(t,new wR(n),n.bypassAuthState)}class g8{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rJ;case"linkViaPopup":case"linkViaRedirect":return sJ;case"reauthViaPopup":case"reauthViaRedirect":return iJ;default:Nl(this.auth,"internal-error")}}resolve(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ll(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const aJ=new l1(2e3,1e4);class wf extends g8{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,wf.currentPopupAction&&wf.currentPopupAction.cancel(),wf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){Ll(this.filter.length===1,"Popup operations only handle one event");const e=ER();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(No(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(No(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wf.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(No(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aJ.get())};e()}}wf.currentPopupAction=null;const oJ="pendingRedirect",Ly=new Map;class lJ extends g8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ly.get(this.auth._key());if(!e){try{const r=await cJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ly.set(this.auth._key(),e)}return this.bypassAuthState||Ly.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cJ(n,e){const t=dJ(e),r=hJ(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function uJ(n,e){Ly.set(n._key(),e)}function hJ(n){return ml(n._redirectPersistence)}function dJ(n){return Ny(oJ,n.config.apiKey,n.name)}async function fJ(n,e,t=!1){if(ga(n.app))return Promise.reject(qc(n));const r=fE(n),i=nJ(r,e),a=await new lJ(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}const gJ=600*1e3;class mJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pJ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!m8(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(No(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(TN(e))}saveEventToCache(e){this.cachedEventUids.add(TN(e)),this.lastProcessedEventTime=Date.now()}}function TN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function m8({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function pJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m8(n);default:return!1}}async function _J(n,e={}){return M0(n,"GET","/v1/projects",e)}const yJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xJ=/^https?/;async function vJ(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _J(n);for(const t of e)try{if(EJ(t))return}catch{}Nl(n,"unauthorized-domain")}function EJ(n){const e=WT(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!xJ.test(t))return!1;if(yJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const wJ=new l1(3e4,6e4);function IN(){const n=Lo().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function SJ(n){return new Promise((e,t)=>{function r(){IN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{IN(),t(No(n,"network-request-failed"))},timeout:wJ.get()})}if(Lo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lo().gapi?.load)r();else{const i=IQ("iframefcb");return Lo()[i]=()=>{gapi.load?r():t(No(n,"network-request-failed"))},SQ(`${TQ()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Oy=null,e})}let Oy=null;function TJ(n){return Oy=Oy||SJ(n),Oy}const IJ=new l1(5e3,15e3),AJ="__/auth/iframe",RJ="emulator/auth/iframe",bJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PJ(n){const e=n.config;Bt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_R(e,RJ):`https://${n.config.authDomain}/${AJ}`,r={apiKey:e.apiKey,appName:n.name,v:rd},i=CJ.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Zp(r).slice(1)}`}async function kJ(n){const e=await TJ(n),t=Lo().gapi;return Bt(t,n,"internal-error"),e.open({where:document.body,url:PJ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bJ,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=No(n,"network-request-failed"),o=Lo().setTimeout(()=>{s(a)},IJ.get());function l(){Lo().clearTimeout(o),i(r)}r.ping(l).then(l,()=>{s(a)})}))}const MJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NJ=500,LJ=600,OJ="_blank",DJ="http://localhost";class AN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FJ(n,e,t,r=NJ,i=LJ){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l={...MJ,width:r.toString(),height:i.toString(),top:s,left:a},u=Kr().toLowerCase();t&&(o=XF(u)?OJ:t),KF(u)&&(e=e||DJ,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[p,E])=>`${g}${p}=${E},`,"");if(mQ(u)&&o!=="_self")return jJ(e||"",o),new AN(null);const f=window.open(e||"",o,h);Bt(f,n,"popup-blocked");try{f.focus()}catch{}return new AN(f)}function jJ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const VJ="__/auth/handler",GJ="emulator/auth/handler",BJ=encodeURIComponent("fac");async function RN(n,e,t,r,i,s){Bt(n.config.authDomain,n,"auth-domain-config-required"),Bt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:rd,eventId:i};if(e instanceof i8){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",KH(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof c1){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const h of Object.keys(o))o[h]===void 0&&delete o[h];const l=await n._getAppCheckToken(),u=l?`#${BJ}=${encodeURIComponent(l)}`:"";return`${UJ(n)}?${Zp(o).slice(1)}${u}`}function UJ({config:n}){return n.emulator?_R(n,GJ):`https://${n.authDomain}/${VJ}`}const rS="webStorageSupport";class zJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c8,this._completeRedirectFn=fJ,this._overrideRedirectResult=uJ}async _openPopup(e,t,r,i){Ll(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await RN(e,t,r,WT(),i);return FJ(e,s,ER())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await RN(e,t,r,WT(),i);return HQ(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ll(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await kJ(e),r=new mJ(e);return t.register("authEvent",i=>(Bt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rS,{type:rS},i=>{const s=i?.[0]?.[rS];s!==void 0&&t(!!s),Nl(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vJ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return e8()||YF()||xR()}}const $J=zJ;var bN="@firebase/auth",CN="1.12.0";class WJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function HJ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KJ(n){Oh(new eu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Bt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:t8(n)},u=new EQ(r,i,s,l);return RQ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Oh(new eu("auth-internal",e=>{const t=fE(e.getProvider("auth").getImmediate());return(r=>new WJ(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Po(bN,CN,HJ(n)),Po(bN,CN,"esm2020")}const YJ=300,XJ=_5("authIdTokenMaxAge")||YJ;let PN=null;const qJ=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>XJ)return;const i=t?.token;PN!==i&&(PN=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ZJ(n=IA()){const e=zv(n,"auth");if(e.isInitialized())return e.getImmediate();const t=AQ(n,{popupRedirectResolver:$J,persistence:[tJ,zQ,c8]}),r=_5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=qJ(s.toString());jQ(t,a,()=>a(t.currentUser)),FQ(t,o=>a(o))}}const i=g5("auth");return i&&bQ(t,`http://${i}`),t}function QJ(){return document.getElementsByTagName("head")?.[0]??document}wQ({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=No("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",QJ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KJ("Browser");const p8="firebasestorage.googleapis.com",JJ="storageBucket",eee=120*1e3,tee=600*1e3;class Yo extends Ko{constructor(e,t,r=0){super(iS(e),`Firebase Storage: ${t} (${iS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return iS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Uo;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Uo||(Uo={}));function iS(n){return"storage/"+n}function nee(){const n="An unknown error occurred, please check the error payload for server response.";return new Yo(Uo.UNKNOWN,n)}function ree(){return new Yo(Uo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iee(){return new Yo(Uo.CANCELED,"User canceled the upload/download.")}function see(n){return new Yo(Uo.INVALID_URL,"Invalid URL '"+n+"'.")}function aee(n){return new Yo(Uo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function kN(n){return new Yo(Uo.INVALID_ARGUMENT,n)}function _8(){return new Yo(Uo.APP_DELETED,"The Firebase app was deleted.")}function oee(n){return new Yo(Uo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Wa{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Wa.makeFromUrl(e,t)}catch{return new Wa(e,"")}if(r.path==="")return r;throw aee(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${h}/b/${i}/o${g}`,"i"),E={bucket:1,path:3},x=t===p8?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",T=new RegExp(`^https?://${x}/${i}/${w}`,"i"),k=[{regex:o,indices:l,postModify:s},{regex:p,indices:E,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<k.length;N++){const j=k[N],B=j.regex.exec(e);if(B){const P=B[j.indices.bucket];let C=B[j.indices.path];C||(C=""),r=new Wa(P,C),j.postModify(r);break}}if(r==null)throw see(e);return r}}class lee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function cee(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function l(){return o===2}let u=!1;function h(...w){u||(u=!0,e.apply(null,w))}function f(w){i=setTimeout(()=>{i=null,n(p,l())},w)}function g(){s&&clearTimeout(s)}function p(w,...T){if(u){g();return}if(w){g(),h.call(null,w,...T);return}if(l()||a){g(),h.call(null,w,...T);return}r<64&&(r*=2);let k;o===1?(o=2,k=0):k=(r+Math.random())*1e3,f(k)}let E=!1;function x(w){E||(E=!0,g(),!u&&(i!==null?(w||(o=2),clearTimeout(i),f(0)):w||(o=1)))}return f(0),s=setTimeout(()=>{a=!0,x(!0)},t),x}function uee(n){n(!1)}function hee(n){return n!==void 0}function MN(n,e,t,r){if(r<e)throw kN(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw kN(`Invalid value for '${n}'. Expected ${t} or less.`)}function dee(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var jx;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(jx||(jx={}));function fee(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}class gee{constructor(e,t,r,i,s,a,o,l,u,h,f,g=!0,p=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=g,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,x)=>{this.resolve_=E,this.reject_=x,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Z_(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const l=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===jx.NO_ERROR,l=s.getStatus();if(!o||fee(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===jx.ABORT;r(!1,new Z_(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Z_(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(o,o.getResponse());hee(l)?s(l):s()}catch(l){a(l)}else if(o!==null){const l=nee();l.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,l)):a(l)}else if(i.canceled){const l=this.appDelete_?_8():iee();a(l)}else{const l=ree();a(l)}};this.canceled_?t(!1,new Z_(!1,null,!0)):this.backoffId_=cee(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uee(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Z_{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mee(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function pee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _ee(n,e){e&&(n["X-Firebase-GMPID"]=e)}function yee(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function xee(n,e,t,r,i,s,a=!0,o=!1){const l=dee(n.urlParams),u=n.url+l,h=Object.assign({},n.headers);return _ee(h,e),mee(h,t),pee(h,s),yee(h,r),new gee(u,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}function vee(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Eee(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}class Vx{constructor(e,t){this._service=e,t instanceof Wa?this._location=t:this._location=Wa.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vx(e,t)}get root(){const e=new Wa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Eee(this._location.path)}get storage(){return this._service}get parent(){const e=vee(this._location.path);if(e===null)return null;const t=new Wa(this._location.bucket,e);return new Vx(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oee(e)}}function NN(n,e){const t=e?.[JJ];return t==null?null:Wa.makeFromBucketSpec(t,n)}function wee(n,e,t,r={}){n.host=`${e}:${t}`;const i=nd(e);i&&(EA(`https://${n.host}/b`),wA("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:y5(s,n.app.options.projectId))}class See{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=p8,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eee,this._maxUploadRetryTime=tee,this._requests=new Set,i!=null?this._bucket=Wa.makeFromBucketSpec(i,this._host):this._bucket=NN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wa.makeFromBucketSpec(this._url,e):this._bucket=NN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ga(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vx(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new lee(_8());{const a=xee(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const LN="@firebase/storage",ON="0.14.0";const y8="storage";function Tee(n=IA(),e){n=oi(n);const r=zv(n,y8).getImmediate({identifier:e}),i=m5("storage");return i&&Iee(r,...i),r}function Iee(n,e,t,r={}){wee(n,e,t,r)}function Aee(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new See(t,r,i,e,rd)}function Ree(){Oh(new eu(y8,Aee,"PUBLIC").setMultipleInstances(!0)),Po(LN,ON,""),Po(LN,ON,"esm2020")}Ree();const bee={apiKey:"REPLACE_WITH_YOUR_API_KEY",authDomain:"your-project.firebaseapp.com",projectId:"your-project-id",storageBucket:"your-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"},SR=I5(bee),sS=ZJ(SR),Qg=AZ(SR);Tee(SR);RZ(Qg).catch(n=>{n.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const Cee=Sa()(A0((n,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async t=>{n(r=>{r.loading=!0});try{const r=GZ(lN(Qg,"vondsten"),BZ("userId","==",t)),s=(await HZ(r)).docs.map(a=>({id:a.id,...a.data()}));n(a=>{a.vondsten=s,a.loading=!1})}catch(r){n(i=>{i.error=r.message,i.loading=!1})}},addVondst:async t=>{const r=new Date().toISOString(),i={...t,createdAt:r,updatedAt:r},s=await XZ(lN(Qg,"vondsten"),i);return n(a=>{a.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(t,r)=>{const i=zT(Qg,"vondsten",t);await KZ(i,{...r,updatedAt:new Date().toISOString()}),n(s=>{const a=s.vondsten.findIndex(o=>o.id===t);a!==-1&&(s.vondsten[a]={...s.vondsten[a],...r})})},deleteVondst:async t=>{await YZ(zT(Qg,"vondsten",t)),n(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==t)})}}))),Pee={};function kee(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var s;const a=l=>l===null?null:JSON.parse(l,void 0),o=(s=t.getItem(i))!=null?s:null;return o instanceof Promise?o.then(a):a(o)},setItem:(i,s)=>t.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>t.removeItem(i)}}const fp=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return fp(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return fp(r)(t)}}}},Mee=(n,e)=>(t,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,T)=>({...T,...w}),...e},a=!1;const o=new Set,l=new Set;let u;try{u=s.getStorage()}catch{}if(!u)return n((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...w)},r,i);const h=fp(s.serialize),f=()=>{const w=s.partialize({...r()});let T;const R=h({state:w,version:s.version}).then(k=>u.setItem(s.name,k)).catch(k=>{T=k});if(T)throw T;return R},g=i.setState;i.setState=(w,T)=>{g(w,T),f()};const p=n((...w)=>{t(...w),f()},r,i);let E;const x=()=>{var w;if(!u)return;a=!1,o.forEach(R=>R(r()));const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return fp(u.getItem.bind(u))(s.name).then(R=>{if(R)return s.deserialize(R)}).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return s.migrate(R.state,R.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return R.state}).then(R=>{var k;return E=s.merge(R,(k=r())!=null?k:p),t(E,!0),f()}).then(()=>{T?.(E,void 0),a=!0,l.forEach(R=>R(E))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>x(),hasHydrated:()=>a,onHydrate:w=>(o.add(w),()=>{o.delete(w)}),onFinishHydration:w=>(l.add(w),()=>{l.delete(w)})},x(),E||p},Nee=(n,e)=>(t,r,i)=>{let s={storage:kee(()=>localStorage),partialize:x=>x,version:0,merge:(x,w)=>({...w,...x}),...e},a=!1;const o=new Set,l=new Set;let u=s.storage;if(!u)return n((...x)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),t(...x)},r,i);const h=()=>{const x=s.partialize({...r()});return u.setItem(s.name,{state:x,version:s.version})},f=i.setState;i.setState=(x,w)=>{f(x,w),h()};const g=n((...x)=>{t(...x),h()},r,i);i.getInitialState=()=>g;let p;const E=()=>{var x,w;if(!u)return;a=!1,o.forEach(R=>{var k;return R((k=r())!=null?k:g)});const T=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(x=r())!=null?x:g))||void 0;return fp(u.getItem.bind(u))(s.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==s.version){if(s.migrate)return[!0,s.migrate(R.state,R.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var k;const[N,j]=R;if(p=s.merge(j,(k=r())!=null?k:g),t(p,!0),N)return h()}).then(()=>{T?.(p,void 0),p=r(),a=!0,l.forEach(R=>R(p))}).catch(R=>{T?.(void 0,R)})};return i.persist={setOptions:x=>{s={...s,...x},x.storage&&(u=x.storage)},clearStorage:()=>{u?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>E(),hasHydrated:()=>a,onHydrate:x=>(o.add(x),()=>{o.delete(x)}),onFinishHydration:x=>(l.add(x),()=>{l.delete(x)})},s.skipHydration||E(),p||g},Lee=(n,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Pee?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Mee(n,e)):Nee(n,e),N0=Lee,Ti=Sa()(N0(n=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,setDefaultBackground:e=>n({defaultBackground:e}),setShowScaleBar:e=>n({showScaleBar:e}),setGpsAutoStart:e=>n({gpsAutoStart:e}),setShowAccuracyCircle:e=>n({showAccuracyCircle:e}),setHapticFeedback:e=>n({hapticFeedback:e}),setVondstenLocalOnly:e=>n({vondstenLocalOnly:e}),setShowVondstButton:e=>n({showVondstButton:e}),setFontScale:e=>n({fontScale:e}),setLayerPanelFontScale:e=>n({layerPanelFontScale:e}),setPresetPanelFontScale:e=>n({presetPanelFontScale:e})}),{name:"detectorapp-settings",version:2,migrate:(n,e)=>e<2?{...n,showScaleBar:!0}:n})),aS=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","IKAW"],baseLayer:"CartoDB (licht)",isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Vroege ME",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Late ME - Nieuw",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","Archeo Landschappen","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],DN=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],x8=Sa()(N0((n,e)=>({presets:[...aS],applyPreset:t=>{const r=e().presets.find(s=>s.id===t);if(!r)return;const i=ri.getState();DN.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(a=>{i.setLayerVisibility(a,a===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(t,r)=>{const i=ri.getState(),s=Object.entries(i.visible).filter(([o,l])=>l&&DN.includes(o)).map(([o])=>o),a={id:`custom-${Date.now()}`,name:t,icon:r,layers:s,isBuiltIn:!1};n(o=>({presets:[...o.presets,a]})),console.log(` Preset aangemaakt: ${t} met ${s.length} lagen`)},updatePreset:(t,r)=>{n(i=>({presets:i.presets.map(s=>s.id===t?{...s,...r}:s)}))},deletePreset:t=>{n(r=>({presets:r.presets.filter(i=>i.id!==t||i.isBuiltIn)}))},resetToDefaults:()=>{n({presets:[...aS]})}}),{name:"detectorapp-presets",version:7,migrate:(n,e)=>e<7?{presets:[...aS]}:n})),FN=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],pE=Sa()(N0((n,e)=>({layers:[],addLayer:t=>{const r=crypto.randomUUID(),i=e().layers.length,s=FN[i%FN.length];return n(a=>({layers:[...a.layers,{...t,id:r,createdAt:new Date().toISOString(),color:t.color||s,visible:t.visible??!0,opacity:t.opacity??1}]})),r},removeLayer:t=>n(r=>({layers:r.layers.filter(i=>i.id!==t)})),updateLayer:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)})),toggleVisibility:t=>n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)})),setOpacity:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,opacity:r}:s)})),setColor:(t,r)=>n(i=>({layers:i.layers.map(s=>s.id===t?{...s,color:r}:s)})),clearAll:()=>n({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),Oee=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],v8=Sa()(N0((n,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:t=>n({tier:t}),unlockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.includes(t)?r.unlockedRegions:[...r.unlockedRegions,t]})),lockRegion:t=>n(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==t)})),setDevMode:t=>n({devMode:t}),isRegionUnlocked:t=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(t)},isLayerUnlocked:(t,r="free",i=["nl"])=>{const s=e();return s.devMode||Oee.includes(t)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(a=>s.unlockedRegions.includes(a)):!1},canAccessPremiumFeatures:()=>{const t=e();return t.devMode||t.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));function Dee({target:n,viewOptions:e}){const t=ae.useRef(null),r=ae.useRef(null),i=As(a=>a.setMap),s=Ti(a=>a.showScaleBar);return ae.useEffect(()=>{if(!t.current){const a={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},o=new ZW({target:n,controls:[],view:new Io({center:bh(a.center),zoom:a.zoom,rotation:a.rotation,minZoom:a.minZoom,maxZoom:a.maxZoom})});t.current=o,i(o),window.__olMap=o}return()=>{t.current&&(t.current.setTarget(void 0),i(null),window.__olMap=null)}},[n,e,i]),ae.useEffect(()=>{const a=t.current;a&&(s?r.current||(r.current=new eH({units:"metric",bar:!1,text:!0,minWidth:80}),a.addControl(r.current)):r.current&&(a.removeControl(r.current),r.current=null))},[s]),t.current}const jN=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function Fee(){const n=ae.useRef(null),e=ae.useRef(!1);Dee({target:"map"});const t=As(f=>f.map),r=ri(f=>f.registerLayer),i=ri(f=>f.setLayerVisibility),s=Ti(f=>f.defaultBackground);ae.useEffect(()=>{if(!t){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const f=new qu({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new pW}),g=new qu({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new hf({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),p=new qu({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new hf({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),E=new qu({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new hf({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),x=new qu({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new hf({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),w=new qu({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new hf({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});t.addLayer(f),t.addLayer(g),t.addLayer(p),t.addLayer(E),t.addLayer(x),t.addLayer(w),console.log(" Base layers added:",{osm:f.getVisible(),cartodb:g.getVisible(),satellite:p.getVisible()}),r("OpenStreetMap",f),r("CartoDB (licht)",g),r("Luchtfoto",p),r("Labels Overlay",E),r("TMK 1850",x),r("Bonnebladen 1900",w),t.updateSize(),console.log(" Map size:",t.getSize()),console.log(" Map center:",t.getView().getCenter()),console.log(" Map zoom:",t.getView().getZoom()),a()},[t,r]);async function a(){if(!t){console.error(" Cannot load layers: map is null");return}const f=RH();console.log(` Loading ${f.length} immediate-load layers (WMS/Tile)...`);const g=await Promise.allSettled(f.map(async E=>{try{const x=await E.factory();return x?{name:E.name,layer:x}:null}catch(x){return console.warn(` Failed to create ${E.name}:`,x),null}}));let p=0;g.forEach(E=>{if(E.status==="fulfilled"&&E.value){const{name:x,layer:w}=E.value;t.addLayer(w),r(x,w),p++,console.log(`   ${x}`)}}),console.log(` Immediate layers loaded: ${p}/${f.length}`),console.log(` Total layers on map: ${t.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}ae.useEffect(()=>{if(!t||e.current)return;const f=setTimeout(()=>{const g=s||"CartoDB (licht)";jN.forEach(p=>{i(p,!1)}),jN.includes(g)?i(g,!0):i("CartoDB (licht)",!0),e.current=!0,console.log(` Default background: ${g}`)},100);return()=>clearTimeout(f)},[t,s,i]);const o=Ti(f=>f.gpsAutoStart),l=Xi(f=>f.startTracking),u=ae.useRef(!1);ae.useEffect(()=>{if(!(!t||u.current)&&o){const f=setTimeout(()=>{l(),u.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(f)}},[t,o,l]);const h={width:"100%",height:"100vh"};return y.jsx("div",{id:"map",ref:n,style:h})}const TR=ae.createContext({});function IR(n){const e=ae.useRef(null);return e.current===null&&(e.current=n()),e.current}const _E=ae.createContext(null),AR=ae.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class jee extends ae.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Vee({children:n,isPresent:e}){const t=ae.useId(),r=ae.useRef(null),i=ae.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=ae.useContext(AR);return ae.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=t;const h=document.createElement("style");return s&&(h.nonce=s),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[e]),y.jsx(jee,{isPresent:e,childRef:r,sizeRef:i,children:ae.cloneElement(n,{ref:r})})}const Gee=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=IR(Bee),l=ae.useId(),u=ae.useCallback(f=>{o.set(f,!0);for(const g of o.values())if(!g)return;r&&r()},[o,r]),h=ae.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),s?[Math.random(),u]:[t,u]);return ae.useMemo(()=>{o.forEach((f,g)=>o.set(g,!1))},[t]),ae.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=y.jsx(Vee,{isPresent:t,children:n})),y.jsx(_E.Provider,{value:h,children:n})};function Bee(){return new Map}function E8(n=!0){const e=ae.useContext(_E);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,s=ae.useId();ae.useEffect(()=>{n&&i(s)},[n]);const a=ae.useCallback(()=>n&&r&&r(s),[s,r,n]);return!t&&r?[!1,a]:[!0]}const Q_=n=>n.key||"";function VN(n){const e=[];return ae.Children.forEach(n,t=>{ae.isValidElement(t)&&e.push(t)}),e}const RR=typeof window<"u",w8=RR?ae.useLayoutEffect:ae.useEffect,li=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,l]=E8(a),u=ae.useMemo(()=>VN(n),[n]),h=a&&!o?[]:u.map(Q_),f=ae.useRef(!0),g=ae.useRef(u),p=IR(()=>new Map),[E,x]=ae.useState(u),[w,T]=ae.useState(u);w8(()=>{f.current=!1,g.current=u;for(let N=0;N<w.length;N++){const j=Q_(w[N]);h.includes(j)?p.delete(j):p.get(j)!==!0&&p.set(j,!1)}},[w,h.length,h.join("-")]);const R=[];if(u!==E){let N=[...u];for(let j=0;j<w.length;j++){const B=w[j],P=Q_(B);h.includes(P)||(N.splice(j,0,B),R.push(B))}s==="wait"&&R.length&&(N=R),T(VN(N)),x(u);return}const{forceRender:k}=ae.useContext(TR);return y.jsx(y.Fragment,{children:w.map(N=>{const j=Q_(N),B=a&&!o?!1:u===w||h.includes(j),P=()=>{if(p.has(j))p.set(j,!0);else return;let C=!0;p.forEach(M=>{M||(C=!1)}),C&&(k?.(),T(g.current),a&&l?.(),r&&r())};return y.jsx(Gee,{isPresent:B,initial:!f.current||t?void 0:!1,custom:B?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:B?void 0:P,children:N},j)})})},Ys=n=>n;let S8=Ys;function bR(n){let e;return()=>(e===void 0&&(e=n()),e)}const _0=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},Tl=n=>n*1e3,Il=n=>n/1e3,Uee={useManualTiming:!1};function zee(n){let e=new Set,t=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),n()),u(a)}const l={schedule:(u,h=!1,f=!1)=>{const p=f&&r?e:t;return h&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{t.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,t]=[t,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const J_=["read","resolveKeyframes","update","preRender","render","postRender"],$ee=40;function T8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=J_.reduce((T,R)=>(T[R]=zee(s),T),{}),{read:o,resolveKeyframes:l,update:u,preRender:h,render:f,postRender:g}=a,p=()=>{const T=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,$ee),1),i.timestamp=T,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),h.process(i),f.process(i),g.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(p))},E=()=>{t=!0,r=!0,i.isProcessing||n(p)};return{schedule:J_.reduce((T,R)=>{const k=a[R];return T[R]=(N,j=!1,B=!1)=>(t||E(),k.schedule(N,j,B)),T},{}),cancel:T=>{for(let R=0;R<J_.length;R++)a[J_[R]].cancel(T)},state:i,steps:a}}const{schedule:qn,cancel:ou,state:pi,steps:oS}=T8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ys,!0),I8=ae.createContext({strict:!1}),GN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},y0={};for(const n in GN)y0[n]={isEnabled:e=>GN[n].some(t=>!!e[t])};function Wee(n){for(const e in n)y0[e]={...y0[e],...n[e]}}const Hee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Gx(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Hee.has(n)}let A8=n=>!Gx(n);function Kee(n){n&&(A8=e=>e.startsWith("on")?!Gx(e):n(e))}try{Kee(require("@emotion/is-prop-valid").default)}catch{}function Yee(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(A8(i)||t===!0&&Gx(i)||!e&&!Gx(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function Xee(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,i)=>i==="create"?n:(e.has(i)||e.set(i,n(i)),e.get(i))})}const yE=ae.createContext({});function gp(n){return typeof n=="string"||Array.isArray(n)}function xE(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const CR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],PR=["initial",...CR];function vE(n){return xE(n.animate)||PR.some(e=>gp(n[e]))}function R8(n){return!!(vE(n)||n.variants)}function qee(n,e){if(vE(n)){const{initial:t,animate:r}=n;return{initial:t===!1||gp(t)?t:void 0,animate:gp(r)?r:void 0}}return n.inherit!==!1?e:{}}function Zee(n){const{initial:e,animate:t}=qee(n,ae.useContext(yE));return ae.useMemo(()=>({initial:e,animate:t}),[BN(e),BN(t)])}function BN(n){return Array.isArray(n)?n.join(" "):n}const Qee=Symbol.for("motionComponentSymbol");function Sf(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Jee(n,e,t){return ae.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Sf(t)&&(t.current=r))},[e])}const kR=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ete="framerAppearId",b8="data-"+kR(ete),{schedule:MR}=T8(queueMicrotask,!1),C8=ae.createContext({});function tte(n,e,t,r,i){var s,a;const{visualElement:o}=ae.useContext(yE),l=ae.useContext(I8),u=ae.useContext(_E),h=ae.useContext(AR).reducedMotion,f=ae.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(n,{visualState:e,parent:o,props:t,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const g=f.current,p=ae.useContext(C8);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&nte(f.current,t,i,p);const E=ae.useRef(!1);ae.useInsertionEffect(()=>{g&&E.current&&g.update(t,u)});const x=t[b8],w=ae.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,x)));return w8(()=>{g&&(E.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),MR.render(g.render),w.current&&g.animationState&&g.animationState.animateChanges())}),ae.useEffect(()=>{g&&(!w.current&&g.animationState&&g.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,x)}),w.current=!1))}),g}function nte(n,e,t,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:P8(n.parent)),n.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Sf(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function P8(n){if(n)return n.options.allowProjection!==!1?n.projection:P8(n.parent)}function rte({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){var s,a;n&&Wee(n);function o(u,h){let f;const g={...ae.useContext(AR),...u,layoutId:ite(u)},{isStatic:p}=g,E=Zee(u),x=r(u,p);if(!p&&RR){ste();const w=ate(g);f=w.MeasureLayout,E.visualElement=tte(i,x,g,e,w.ProjectionNode)}return y.jsxs(yE.Provider,{value:E,children:[f&&E.visualElement?y.jsx(f,{visualElement:E.visualElement,...g}):null,t(i,u,Jee(x,E.visualElement,h),x,p,E.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const l=ae.forwardRef(o);return l[Qee]=i,l}function ite({layoutId:n}){const e=ae.useContext(TR).id;return e&&n!==void 0?e+"-"+n:n}function ste(n,e){ae.useContext(I8).strict}function ate(n){const{drag:e,layout:t}=y0;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ote=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NR(n){return typeof n!="string"||n.includes("-")?!1:!!(ote.indexOf(n)>-1||/[A-Z]/u.test(n))}function UN(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function LR(n,e,t,r){if(typeof e=="function"){const[i,s]=UN(r);e=e(t!==void 0?t:n.custom,i,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,s]=UN(r);e=e(t!==void 0?t:n.custom,i,s)}return e}const YT=n=>Array.isArray(n),lte=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),cte=n=>YT(n)?n[n.length-1]||0:n,ji=n=>!!(n&&n.getVelocity);function Dy(n){const e=ji(n)?n.get():n;return lte(e)?e.toValue():e}function ute({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,i,s){const a={latestValues:hte(r,i,s,n),renderState:e()};return t&&(a.onMount=o=>t({props:r,current:o,...a}),a.onUpdate=o=>t(o)),a}const k8=n=>(e,t)=>{const r=ae.useContext(yE),i=ae.useContext(_E),s=()=>ute(n,e,r,i);return t?s():IR(s)};function hte(n,e,t,r){const i={},s=r(n,{});for(const g in s)i[g]=Dy(s[g]);let{initial:a,animate:o}=n;const l=vE(n),u=R8(n);e&&u&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=t?t.initial===!1:!1;h=h||a===!1;const f=h?o:a;if(f&&typeof f!="boolean"&&!xE(f)){const g=Array.isArray(f)?f:[f];for(let p=0;p<g.length;p++){const E=LR(n,g[p]);if(E){const{transitionEnd:x,transition:w,...T}=E;for(const R in T){let k=T[R];if(Array.isArray(k)){const N=h?k.length-1:0;k=k[N]}k!==null&&(i[R]=k)}for(const R in x)i[R]=x[R]}}}return i}const L0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ad=new Set(L0),M8=n=>e=>typeof e=="string"&&e.startsWith(n),N8=M8("--"),dte=M8("var(--"),OR=n=>dte(n)?fte.test(n.split("/*")[0].trim()):!1,fte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,L8=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ol=(n,e,t)=>t>e?e:t<n?n:t,O0={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},mp={...O0,transform:n=>Ol(0,1,n)},ey={...O0,default:1},h1=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Ic=h1("deg"),Oo=h1("%"),Dt=h1("px"),gte=h1("vh"),mte=h1("vw"),zN={...Oo,parse:n=>Oo.parse(n)/100,transform:n=>Oo.transform(n*100)},pte={borderWidth:Dt,borderTopWidth:Dt,borderRightWidth:Dt,borderBottomWidth:Dt,borderLeftWidth:Dt,borderRadius:Dt,radius:Dt,borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomRightRadius:Dt,borderBottomLeftRadius:Dt,width:Dt,maxWidth:Dt,height:Dt,maxHeight:Dt,top:Dt,right:Dt,bottom:Dt,left:Dt,padding:Dt,paddingTop:Dt,paddingRight:Dt,paddingBottom:Dt,paddingLeft:Dt,margin:Dt,marginTop:Dt,marginRight:Dt,marginBottom:Dt,marginLeft:Dt,backgroundPositionX:Dt,backgroundPositionY:Dt},_te={rotate:Ic,rotateX:Ic,rotateY:Ic,rotateZ:Ic,scale:ey,scaleX:ey,scaleY:ey,scaleZ:ey,skew:Ic,skewX:Ic,skewY:Ic,distance:Dt,translateX:Dt,translateY:Dt,translateZ:Dt,x:Dt,y:Dt,z:Dt,perspective:Dt,transformPerspective:Dt,opacity:mp,originX:zN,originY:zN,originZ:Dt},$N={...O0,transform:Math.round},DR={...pte,..._te,zIndex:$N,size:Dt,fillOpacity:mp,strokeOpacity:mp,numOctaves:$N},yte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xte=L0.length;function vte(n,e,t){let r="",i=!0;for(let s=0;s<xte;s++){const a=L0[s],o=n[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||t){const u=L8(o,DR[a]);if(!l){i=!1;const h=yte[a]||a;r+=`${h}(${u}) `}t&&(e[a]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function FR(n,e,t){const{style:r,vars:i,transformOrigin:s}=n;let a=!1,o=!1;for(const l in e){const u=e[l];if(ad.has(l)){a=!0;continue}else if(N8(l)){i[l]=u;continue}else{const h=L8(u,DR[l]);l.startsWith("origin")?(o=!0,s[l]=h):r[l]=h}}if(e.transform||(a||t?r.transform=vte(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${u} ${h}`}}const Ete={offset:"stroke-dashoffset",array:"stroke-dasharray"},wte={offset:"strokeDashoffset",array:"strokeDasharray"};function Ste(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?Ete:wte;n[s.offset]=Dt.transform(-r);const a=Dt.transform(e),o=Dt.transform(t);n[s.array]=`${a} ${o}`}function WN(n,e,t){return typeof n=="string"?n:Dt.transform(e+t*n)}function Tte(n,e,t){const r=WN(e,n.x,n.width),i=WN(t,n.y,n.height);return`${r} ${i}`}function jR(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},h,f){if(FR(n,u,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:g,style:p,dimensions:E}=n;g.transform&&(E&&(p.transform=g.transform),delete g.transform),E&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=Tte(E,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),r!==void 0&&(g.scale=r),a!==void 0&&Ste(g,a,o,l,!1)}const VR=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),O8=()=>({...VR(),attrs:{}}),GR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function D8(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const F8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function j8(n,e,t,r){D8(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(F8.has(i)?i:kR(i),e.attrs[i])}const Bx={};function Ite(n){Object.assign(Bx,n)}function V8(n,{layout:e,layoutId:t}){return ad.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bx[n]||n==="opacity")}function BR(n,e,t){var r;const{style:i}=n,s={};for(const a in i)(ji(i[a])||e.style&&ji(e.style[a])||V8(a,n)||((r=t?.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function G8(n,e,t){const r=BR(n,e,t);for(const i in n)if(ji(n[i])||ji(e[i])){const s=L0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=n[i]}return r}function Ate(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const HN=["x","y","width","height","cx","cy","r"],Rte={useVisualState:k8({scrapeMotionValuesFromProps:G8,createRenderState:O8,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:i})=>{if(!t)return;let s=!!n.drag;if(!s){for(const o in i)if(ad.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<HN.length;o++){const l=HN[o];n[l]!==e[l]&&(a=!0)}a&&qn.read(()=>{Ate(t,r),qn.render(()=>{jR(r,i,GR(t.tagName),n.transformTemplate),j8(t,r)})})}})},bte={useVisualState:k8({scrapeMotionValuesFromProps:BR,createRenderState:VR})};function B8(n,e,t){for(const r in e)!ji(e[r])&&!V8(r,t)&&(n[r]=e[r])}function Cte({transformTemplate:n},e){return ae.useMemo(()=>{const t=VR();return FR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Pte(n,e){const t=n.style||{},r={};return B8(r,t,n),Object.assign(r,Cte(n,e)),r}function kte(n,e){const t={},r=Pte(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}function Mte(n,e,t,r){const i=ae.useMemo(()=>{const s=O8();return jR(s,e,GR(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};B8(s,n.style,n),i.style={...s,...i.style}}return i}function Nte(n=!1){return(t,r,i,{latestValues:s},a)=>{const l=(NR(t)?Mte:kte)(r,s,a,t),u=Yee(r,typeof t=="string",n),h=t!==ae.Fragment?{...u,...l,ref:i}:{},{children:f}=r,g=ae.useMemo(()=>ji(f)?f.get():f,[f]);return ae.createElement(t,{...h,children:g})}}function Lte(n,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...NR(r)?Rte:bte,preloadedFeatures:n,useRender:Nte(i),createVisualElement:e,Component:r};return rte(a)}}function U8(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function EE(n,e,t){const r=n.getProps();return LR(r,e,t!==void 0?t:r.custom,n)}const Ote=bR(()=>window.ScrollTimeline!==void 0);class Dte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(i=>{if(Ote()&&i.attachTimeline)return i.attachTimeline(e);if(typeof t=="function")return t(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Fte extends Dte{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function UR(n,e){return n?n[e]||n.default||n:void 0}const XT=2e4;function z8(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<XT;)e+=t,r=n.next(e);return e>=XT?1/0:e}function zR(n){return typeof n=="function"}function KN(n,e){n.timeline=e,n.onfinish=null}const $R=n=>Array.isArray(n)&&typeof n[0]=="number",jte={linearEasing:void 0};function Vte(n,e){const t=bR(n);return()=>{var r;return(r=jte[e])!==null&&r!==void 0?r:t()}}const Ux=Vte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$8=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let s=0;s<i;s++)r+=n(_0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function W8(n){return!!(typeof n=="function"&&Ux()||!n||typeof n=="string"&&(n in qT||Ux())||$R(n)||Array.isArray(n)&&n.every(W8))}const Jg=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,qT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jg([0,.65,.55,1]),circOut:Jg([.55,0,1,.45]),backIn:Jg([.31,.01,.66,-.59]),backOut:Jg([.33,1.53,.69,.99])};function H8(n,e){if(n)return typeof n=="function"&&Ux()?$8(n,e):$R(n)?Jg(n):Array.isArray(n)?n.map(t=>H8(t,e)||qT.easeOut):qT[n]}const Fa={x:!1,y:!1};function K8(){return Fa.x||Fa.y}function Gte(n,e,t){var r;if(n instanceof Element)return[n];if(typeof n=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function Y8(n,e){const t=Gte(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function YN(n){return e=>{e.pointerType==="touch"||K8()||n(e)}}function Bte(n,e,t={}){const[r,i,s]=Y8(n,t),a=YN(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const h=YN(f=>{u(f),l.removeEventListener("pointerleave",h)});l.addEventListener("pointerleave",h,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const X8=(n,e)=>e?n===e?!0:X8(n,e.parentElement):!1,WR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Ute=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zte(n){return Ute.has(n.tagName)||n.tabIndex!==-1}const em=new WeakSet;function XN(n){return e=>{e.key==="Enter"&&n(e)}}function lS(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const $te=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=XN(()=>{if(em.has(t))return;lS(t,"down");const i=XN(()=>{lS(t,"up")}),s=()=>lS(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function qN(n){return WR(n)&&!K8()}function Wte(n,e,t={}){const[r,i,s]=Y8(n,t),a=o=>{const l=o.currentTarget;if(!qN(o)||em.has(l))return;em.add(l);const u=e(o),h=(p,E)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",g),!(!qN(p)||!em.has(l))&&(em.delete(l),typeof u=="function"&&u(p,{success:E}))},f=p=>{h(p,t.useGlobalTarget||X8(l,p.target))},g=p=>{h(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",g,i)};return r.forEach(o=>{!zte(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>$te(u,i),i)}),s}function Hte(n){return n==="x"||n==="y"?Fa[n]?null:(Fa[n]=!0,()=>{Fa[n]=!1}):Fa.x||Fa.y?null:(Fa.x=Fa.y=!0,()=>{Fa.x=Fa.y=!1})}const q8=new Set(["width","height","top","left","right","bottom",...L0]);let Fy;function Kte(){Fy=void 0}const Do={now:()=>(Fy===void 0&&Do.set(pi.isProcessing||Uee.useManualTiming?pi.timestamp:performance.now()),Fy),set:n=>{Fy=n,queueMicrotask(Kte)}};function HR(n,e){n.indexOf(e)===-1&&n.push(e)}function KR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class YR{constructor(){this.subscriptions=[]}add(e){return HR(this.subscriptions,e),()=>KR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Z8(n,e){return e?n*(1e3/e):0}const ZN=30,Yte=n=>!isNaN(parseFloat(n));class Xte{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Do.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Do.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Yte(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new YR);const r=this.events[e].add(t);return e==="change"?()=>{r(),qn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Do.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ZN)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ZN);return Z8(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pp(n,e){return new Xte(n,e)}function qte(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,pp(t))}function Zte(n,e){const t=EE(n,e);let{transitionEnd:r={},transition:i={},...s}=t||{};s={...s,...r};for(const a in s){const o=cte(s[a]);qte(n,a,o)}}function Qte(n){return!!(ji(n)&&n.add)}function ZT(n,e){const t=n.getValue("willChange");if(Qte(t))return t.add(e)}function Q8(n){return n.props[b8]}const J8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Jte=1e-7,ene=12;function tne(n,e,t,r,i){let s,a,o=0;do a=e+(t-e)/2,s=J8(a,r,i)-n,s>0?t=a:e=a;while(Math.abs(s)>Jte&&++o<ene);return a}function d1(n,e,t,r){if(n===e&&t===r)return Ys;const i=s=>tne(s,0,1,n,t);return s=>s===0||s===1?s:J8(i(s),e,r)}const e9=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,t9=n=>e=>1-n(1-e),n9=d1(.33,1.53,.69,.99),XR=t9(n9),r9=e9(XR),i9=n=>(n*=2)<1?.5*XR(n):.5*(2-Math.pow(2,-10*(n-1))),qR=n=>1-Math.sin(Math.acos(n)),s9=t9(qR),a9=e9(qR),o9=n=>/^0[^.\s]+$/u.test(n);function nne(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||o9(n):!0}const ym=n=>Math.round(n*1e5)/1e5,ZR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rne(n){return n==null}const ine=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,QR=(n,e)=>t=>!!(typeof t=="string"&&ine.test(t)&&t.startsWith(n)||e&&!rne(t)&&Object.prototype.hasOwnProperty.call(t,e)),l9=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(ZR);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},sne=n=>Ol(0,255,n),cS={...O0,transform:n=>Math.round(sne(n))},mh={test:QR("rgb","red"),parse:l9("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+cS.transform(n)+", "+cS.transform(e)+", "+cS.transform(t)+", "+ym(mp.transform(r))+")"};function ane(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const QT={test:QR("#"),parse:ane,transform:mh.transform},Tf={test:QR("hsl","hue"),parse:l9("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Oo.transform(ym(e))+", "+Oo.transform(ym(t))+", "+ym(mp.transform(r))+")"},Ni={test:n=>mh.test(n)||QT.test(n)||Tf.test(n),parse:n=>mh.test(n)?mh.parse(n):Tf.test(n)?Tf.parse(n):QT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?mh.transform(n):Tf.transform(n)},one=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function lne(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(ZR))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(one))===null||t===void 0?void 0:t.length)||0)>0}const c9="number",u9="color",cne="var",une="var(",QN="${}",hne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _p(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(hne,l=>(Ni.test(l)?(r.color.push(s),i.push(u9),t.push(Ni.parse(l))):l.startsWith(une)?(r.var.push(s),i.push(cne),t.push(l)):(r.number.push(s),i.push(c9),t.push(parseFloat(l))),++s,QN)).split(QN);return{values:t,split:o,indexes:r,types:i}}function h9(n){return _p(n).values}function d9(n){const{split:e,types:t}=_p(n),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=t[a];o===c9?s+=ym(i[a]):o===u9?s+=Ni.transform(i[a]):s+=i[a]}return s}}const dne=n=>typeof n=="number"?0:n;function fne(n){const e=h9(n);return d9(n)(e.map(dne))}const lu={test:lne,parse:h9,createTransformer:d9,getAnimatableNone:fne},gne=new Set(["brightness","contrast","saturate","opacity"]);function mne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ZR)||[];if(!r)return n;const i=t.replace(r,"");let s=gne.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const pne=/\b([a-z-]*)\(.*?\)/gu,JT={...lu,getAnimatableNone:n=>{const e=n.match(pne);return e?e.map(mne).join(" "):n}},_ne={...DR,color:Ni,backgroundColor:Ni,outlineColor:Ni,fill:Ni,stroke:Ni,borderColor:Ni,borderTopColor:Ni,borderRightColor:Ni,borderBottomColor:Ni,borderLeftColor:Ni,filter:JT,WebkitFilter:JT},JR=n=>_ne[n];function f9(n,e){let t=JR(n);return t!==JT&&(t=lu),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const yne=new Set(["auto","none","0"]);function xne(n,e,t){let r=0,i;for(;r<n.length&&!i;){const s=n[r];typeof s=="string"&&!yne.has(s)&&_p(s).values.length&&(i=n[r]),r++}if(i&&t)for(const s of e)n[s]=f9(t,i)}const JN=n=>n===O0||n===Dt,e3=(n,e)=>parseFloat(n.split(", ")[e]),t3=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return e3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?e3(s[1],n):0}},vne=new Set(["x","y","z"]),Ene=L0.filter(n=>!vne.has(n));function wne(n){const e=[];return Ene.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const x0={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:t3(4,13),y:t3(5,14)};x0.translateX=x0.x;x0.translateY=x0.y;const Sh=new Set;let eI=!1,tI=!1;function g9(){if(tI){const n=Array.from(Sh).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=wne(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tI=!1,eI=!1,Sh.forEach(n=>n.complete()),Sh.clear()}function m9(){Sh.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(tI=!0)})}function Sne(){m9(),g9()}class eb{constructor(e,t,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sh.add(this),eI||(eI=!0,qn.read(m9),qn.resolveKeyframes(g9))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const l=r.readValue(t,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const p9=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),Tne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ine(n){const e=Tne.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function _9(n,e,t=1){const[r,i]=Ine(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return p9(a)?parseFloat(a):a}return OR(i)?_9(i,e,t+1):i}const y9=n=>e=>e.test(n),Ane={test:n=>n==="auto",parse:n=>n},x9=[O0,Dt,Oo,Ic,mte,gte,Ane],n3=n=>x9.find(y9(n));class v9 extends eb{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),OR(u))){const h=_9(u,t.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!q8.has(r)||e.length!==2)return;const[i,s]=e,a=n3(i),o=n3(s);if(a!==o)if(JN(a)&&JN(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)nne(e[i])&&r.push(i);r.length&&xne(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=x0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=x0[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const r3=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(lu.test(n)||n==="0")&&!n.startsWith("url("));function Rne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function bne(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=r3(i,e),o=r3(s,e);return!a||!o?!1:Rne(n)||(t==="spring"||zR(t))&&r}const Cne=n=>n!==null;function wE(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(Cne),s=e&&t!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Pne=40;class E9{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Do.now(),this.options={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Pne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Sne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Do.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!bne(e,r,i,s))if(a)this.options.duration=0;else{l&&l(wE(e,this.options,t)),o&&o(),this.resolveFinishedPromise();return}const h=this.initPlayback(e,t);h!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...h},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const cr=(n,e,t)=>n+(e-n)*t;function uS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function kne({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,a=0;if(!e)i=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=uS(l,o,n+1/3),s=uS(l,o,n),a=uS(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function zx(n,e){return t=>t>0?e:n}const hS=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Mne=[QT,mh,Tf],Nne=n=>Mne.find(e=>e.test(n));function i3(n){const e=Nne(n);if(!e)return!1;let t=e.parse(n);return e===Tf&&(t=kne(t)),t}const s3=(n,e)=>{const t=i3(n),r=i3(e);if(!t||!r)return zx(n,e);const i={...t};return s=>(i.red=hS(t.red,r.red,s),i.green=hS(t.green,r.green,s),i.blue=hS(t.blue,r.blue,s),i.alpha=cr(t.alpha,r.alpha,s),mh.transform(i))},Lne=(n,e)=>t=>e(n(t)),f1=(...n)=>n.reduce(Lne),nI=new Set(["none","hidden"]);function One(n,e){return nI.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Dne(n,e){return t=>cr(n,e,t)}function tb(n){return typeof n=="number"?Dne:typeof n=="string"?OR(n)?zx:Ni.test(n)?s3:Vne:Array.isArray(n)?w9:typeof n=="object"?Ni.test(n)?s3:Fne:zx}function w9(n,e){const t=[...n],r=t.length,i=n.map((s,a)=>tb(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)t[a]=i[a](s);return t}}function Fne(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=tb(n[i])(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}}function jne(n,e){var t;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=n.indexes[a][i[a]],l=(t=n.values[o])!==null&&t!==void 0?t:0;r[s]=l,i[a]++}return r}const Vne=(n,e)=>{const t=lu.createTransformer(e),r=_p(n),i=_p(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nI.has(n)&&!i.values.length||nI.has(e)&&!r.values.length?One(n,e):f1(w9(jne(r,i),i.values),t):zx(n,e)};function S9(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?cr(n,e,t):tb(n)(n,e)}const Gne=5;function T9(n,e,t){const r=Math.max(e-Gne,0);return Z8(t-n(r),e-r)}const mr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dS=.001;function Bne({duration:n=mr.duration,bounce:e=mr.bounce,velocity:t=mr.velocity,mass:r=mr.mass}){let i,s,a=1-e;a=Ol(mr.minDamping,mr.maxDamping,a),n=Ol(mr.minDuration,mr.maxDuration,Il(n)),a<1?(i=u=>{const h=u*a,f=h*n,g=h-t,p=rI(u,a),E=Math.exp(-f);return dS-g/p*E},s=u=>{const f=u*a*n,g=f*t+t,p=Math.pow(a,2)*Math.pow(u,2)*n,E=Math.exp(-f),x=rI(Math.pow(u,2),a);return(-i(u)+dS>0?-1:1)*((g-p)*E)/x}):(i=u=>{const h=Math.exp(-u*n),f=(u-t)*n+1;return-dS+h*f},s=u=>{const h=Math.exp(-u*n),f=(t-u)*(n*n);return h*f});const o=5/n,l=zne(i,s,o);if(n=Tl(n),isNaN(l))return{stiffness:mr.stiffness,damping:mr.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:n}}}const Une=12;function zne(n,e,t){let r=t;for(let i=1;i<Une;i++)r=r-n(r)/e(r);return r}function rI(n,e){return n*Math.sqrt(1-e*e)}const $ne=["duration","bounce"],Wne=["stiffness","damping","mass"];function a3(n,e){return e.some(t=>n[t]!==void 0)}function Hne(n){let e={velocity:mr.velocity,stiffness:mr.stiffness,damping:mr.damping,mass:mr.mass,isResolvedFromDuration:!1,...n};if(!a3(n,Wne)&&a3(n,$ne))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,s=2*Ol(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:mr.mass,stiffness:i,damping:s}}else{const t=Bne(n);e={...e,...t,mass:mr.mass},e.isResolvedFromDuration=!0}return e}function I9(n=mr.visualDuration,e=mr.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:f,velocity:g,isResolvedFromDuration:p}=Hne({...t,velocity:-Il(t.velocity||0)}),E=g||0,x=u/(2*Math.sqrt(l*h)),w=a-s,T=Il(Math.sqrt(l/h)),R=Math.abs(w)<5;r||(r=R?mr.restSpeed.granular:mr.restSpeed.default),i||(i=R?mr.restDelta.granular:mr.restDelta.default);let k;if(x<1){const j=rI(T,x);k=B=>{const P=Math.exp(-x*T*B);return a-P*((E+x*T*w)/j*Math.sin(j*B)+w*Math.cos(j*B))}}else if(x===1)k=j=>a-Math.exp(-T*j)*(w+(E+T*w)*j);else{const j=T*Math.sqrt(x*x-1);k=B=>{const P=Math.exp(-x*T*B),C=Math.min(j*B,300);return a-P*((E+x*T*w)*Math.sinh(C)+j*w*Math.cosh(C))/j}}const N={calculatedDuration:p&&f||null,next:j=>{const B=k(j);if(p)o.done=j>=f;else{let P=0;x<1&&(P=j===0?Tl(E):T9(k,j,B));const C=Math.abs(P)<=r,M=Math.abs(a-B)<=i;o.done=C&&M}return o.value=o.done?a:B,o},toString:()=>{const j=Math.min(z8(N),XT),B=$8(P=>N.next(j*P).value,j,30);return j+"ms "+B}};return N}function o3({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){const f=n[0],g={done:!1,value:f},p=C=>o!==void 0&&C<o||l!==void 0&&C>l,E=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let x=t*e;const w=f+x,T=a===void 0?w:a(w);T!==w&&(x=T-f);const R=C=>-x*Math.exp(-C/r),k=C=>T+R(C),N=C=>{const M=R(C),F=k(C);g.done=Math.abs(M)<=u,g.value=g.done?T:F};let j,B;const P=C=>{p(g.value)&&(j=C,B=I9({keyframes:[g.value,E(g.value)],velocity:T9(k,C,g.value),damping:i,stiffness:s,restDelta:u,restSpeed:h}))};return P(0),{calculatedDuration:null,next:C=>{let M=!1;return!B&&j===void 0&&(M=!0,N(C),P(C)),j!==void 0&&C>=j?B.next(C-j):(!M&&N(C),g)}}}const Kne=d1(.42,0,1,1),Yne=d1(0,0,.58,1),A9=d1(.42,0,.58,1),Xne=n=>Array.isArray(n)&&typeof n[0]!="number",qne={linear:Ys,easeIn:Kne,easeInOut:A9,easeOut:Yne,circIn:qR,circInOut:a9,circOut:s9,backIn:XR,backInOut:r9,backOut:n9,anticipate:i9},l3=n=>{if($R(n)){S8(n.length===4);const[e,t,r,i]=n;return d1(e,t,r,i)}else if(typeof n=="string")return qne[n];return n};function Zne(n,e,t){const r=[],i=t||S9,s=n.length-1;for(let a=0;a<s;a++){let o=i(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Ys:e;o=f1(l,o)}r.push(o)}return r}function Qne(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(S8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=Zne(e,r,i),l=o.length,u=h=>{if(a&&h<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(h<n[f+1]);f++);const g=_0(n[f],n[f+1],h);return o[f](g)};return t?h=>u(Ol(n[0],n[s-1],h)):u}function Jne(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=_0(0,e,r);n.push(cr(t,1,i))}}function ere(n){const e=[0];return Jne(e,n.length-1),e}function tre(n,e){return n.map(t=>t*e)}function nre(n,e){return n.map(()=>e||A9).splice(0,n.length-1)}function $x({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=Xne(r)?r.map(l3):l3(r),s={done:!1,value:e[0]},a=tre(t&&t.length===e.length?t:ere(e),n),o=Qne(a,e,{ease:Array.isArray(i)?i:nre(e,i)});return{calculatedDuration:n,next:l=>(s.value=o(l),s.done=l>=n,s)}}const rre=n=>{const e=({timestamp:t})=>n(t);return{start:()=>qn.update(e,!0),stop:()=>ou(e),now:()=>pi.isProcessing?pi.timestamp:Do.now()}},ire={decay:o3,inertia:o3,tween:$x,keyframes:$x,spring:I9},sre=n=>n/100;class nb extends E9{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:r,element:i,keyframes:s}=this.options,a=i?.KeyframeResolver||eb,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,t,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=zR(t)?t:ire[t]||$x;let l,u;o!==$x&&typeof e[0]!="number"&&(l=f1(sre,S9(e[0],e[1])),e=[0,100]);const h=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),h.calculatedDuration===null&&(h.calculatedDuration=z8(h));const{calculatedDuration:f}=h,g=f+i,p=g*(r+1)-i;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:g,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:h,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:g,repeat:p,repeatType:E,repeatDelay:x,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-h/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-g*(this.speed>=0?1:-1),R=this.speed>=0?T<0:T>h;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let k=this.currentTime,N=s;if(p){const C=Math.min(this.currentTime,h)/f;let M=Math.floor(C),F=C%1;!F&&C>=1&&(F=1),F===1&&M--,M=Math.min(M,p+1),M%2&&(E==="reverse"?(F=1-F,x&&(F-=x/f)):E==="mirror"&&(N=a)),k=Ol(0,1,F)*f}const j=R?{done:!1,value:l[0]}:N.next(k);o&&(j.value=o(j.value));let{done:B}=j;!R&&u!==null&&(B=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return P&&i!==void 0&&(j.value=wE(l,this.options,i)),w&&w(j.value),P&&this.finish(),j}get duration(){const{resolved:e}=this;return e?Il(e.calculatedDuration):0}get time(){return Il(this.currentTime)}set time(e){e=Tl(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Il(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=rre,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const are=new Set(["opacity","clipPath","filter","transform"]);function ore(n,e,t,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const u={[e]:t};l&&(u.offset=l);const h=H8(o,i);return Array.isArray(h)&&(u.easing=h),n.animate(u,{delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const lre=bR(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wx=10,cre=2e4;function ure(n){return zR(n.type)||n.type==="spring"||!W8(n.ease)}function hre(n,e){const t=new nb({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const i=[];let s=0;for(;!r.done&&s<cre;)r=t.sample(s),i.push(r.value),s+=Wx;return{times:void 0,keyframes:i,duration:s-Wx,ease:"linear"}}const R9={anticipate:i9,backInOut:r9,circInOut:a9};function dre(n){return n in R9}class c3 extends E9{constructor(e){super(e);const{name:t,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new v9(s,(a,o)=>this.onKeyframesResolved(a,o),t,r,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&Ux()&&dre(s)&&(s=R9[s]),ure(this.options)){const{onComplete:f,onUpdate:g,motionValue:p,element:E,...x}=this.options,w=hre(e,x);e=w.keyframes,e.length===1&&(e[1]=e[0]),r=w.duration,i=w.times,s=w.ease,a="keyframes"}const h=ore(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(KN(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;o.set(wE(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Il(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Il(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=Tl(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Ys;const{animation:r}=t;KN(r,e)}return Ys}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:f,element:g,...p}=this.options,E=new nb({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),x=Tl(this.time);u.setWithVelocity(E.sample(x-Wx).value,E.sample(x).value,Wx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return lre()&&r&&are.has(r)&&!l&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const fre={type:"spring",stiffness:500,damping:25,restSpeed:10},gre=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),mre={type:"keyframes",duration:.8},pre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},_re=(n,{keyframes:e})=>e.length>2?mre:ad.has(n)?n.startsWith("scale")?gre(e[1]):fre:pre;function yre({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const rb=(n,e,t,r={},i,s)=>a=>{const o=UR(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Tl(l);let h={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:g=>{e.set(g),o.onUpdate&&o.onUpdate(g)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:i};yre(o)||(h={...h,..._re(n,h)}),h.duration&&(h.duration=Tl(h.duration)),h.repeatDelay&&(h.repeatDelay=Tl(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const g=wE(h.keyframes,o);if(g!==void 0)return qn.update(()=>{h.onUpdate(g),h.onComplete()}),new Fte([])}return!s&&c3.supports(h)?new c3(h):new nb(h)};function xre({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function b9(n,e,{delay:t=0,transitionOverride:r,type:i}={}){var s;let{transition:a=n.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const u=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in l){const g=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),p=l[f];if(p===void 0||h&&xre(h,f))continue;const E={delay:t,...UR(a||{},f)};let x=!1;if(window.MotionHandoffAnimation){const T=Q8(n);if(T){const R=window.MotionHandoffAnimation(T,f,qn);R!==null&&(E.startTime=R,x=!0)}}ZT(n,f),g.start(rb(f,g,p,n.shouldReduceMotion&&q8.has(f)?{type:!1}:E,n,x));const w=g.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{qn.update(()=>{o&&Zte(n,o)})}),u}function iI(n,e,t={}){var r;const i=EE(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(s=t.transitionOverride);const a=i?()=>Promise.all(b9(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:g}=s;return vre(n,e,h+u,f,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(t.delay)])}function vre(n,e,t=0,r=0,i=1,s){const a=[],o=(n.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(n.variantChildren).sort(Ere).forEach((u,h)=>{u.notify("AnimationStart",e),a.push(iI(u,e,{...s,delay:t+l(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Ere(n,e){return n.sortNodePosition(e)}function wre(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>iI(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=iI(n,e,t);else{const i=typeof e=="function"?EE(n,e,t.custom):e;r=Promise.all(b9(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const Sre=PR.length;function C9(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?C9(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Sre;t++){const r=PR[t],i=n.props[r];(gp(i)||i===!1)&&(e[r]=i)}return e}const Tre=[...CR].reverse(),Ire=CR.length;function Are(n){return e=>Promise.all(e.map(({animation:t,options:r})=>wre(n,t,r)))}function Rre(n){let e=Are(n),t=u3(),r=!0;const i=l=>(u,h)=>{var f;const g=EE(n,h,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(g){const{transition:p,transitionEnd:E,...x}=g;u={...u,...x,...E}}return u};function s(l){e=l(n)}function a(l){const{props:u}=n,h=C9(n.parent)||{},f=[],g=new Set;let p={},E=1/0;for(let w=0;w<Ire;w++){const T=Tre[w],R=t[T],k=u[T]!==void 0?u[T]:h[T],N=gp(k),j=T===l?R.isActive:null;j===!1&&(E=w);let B=k===h[T]&&k!==u[T]&&N;if(B&&r&&n.manuallyAnimateOnMount&&(B=!1),R.protectedKeys={...p},!R.isActive&&j===null||!k&&!R.prevProp||xE(k)||typeof k=="boolean")continue;const P=bre(R.prevProp,k);let C=P||T===l&&R.isActive&&!B&&N||w>E&&N,M=!1;const F=Array.isArray(k)?k:[k];let O=F.reduce(i(T),{});j===!1&&(O={});const{prevResolvedValues:W={}}=R,D={...W,...O},we=be=>{C=!0,g.has(be)&&(M=!0,g.delete(be)),R.needsAnimating[be]=!0;const ce=n.getValue(be);ce&&(ce.liveStyle=!1)};for(const be in D){const ce=O[be],Re=W[be];if(p.hasOwnProperty(be))continue;let Ae=!1;YT(ce)&&YT(Re)?Ae=!U8(ce,Re):Ae=ce!==Re,Ae?ce!=null?we(be):g.add(be):ce!==void 0&&g.has(be)?we(be):R.protectedKeys[be]=!0}R.prevProp=k,R.prevResolvedValues=O,R.isActive&&(p={...p,...O}),r&&n.blockInitialAnimation&&(C=!1),C&&(!(B&&P)||M)&&f.push(...F.map(be=>({animation:be,options:{type:T}})))}if(g.size){const w={};g.forEach(T=>{const R=n.getBaseTarget(T),k=n.getValue(T);k&&(k.liveStyle=!0),w[T]=R??null}),f.push({animation:w})}let x=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(g=>{var p;return(p=g.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),t[l].isActive=u;const f=a(l);for(const g in t)t[g].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=u3(),r=!0}}}function bre(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!U8(e,n):!1}function Ku(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function u3(){return{animate:Ku(!0),whileInView:Ku(),whileHover:Ku(),whileTap:Ku(),whileDrag:Ku(),whileFocus:Ku(),exit:Ku()}}class xu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Cre extends xu{constructor(e){super(e),e.animationState||(e.animationState=Rre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xE(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Pre=0;class kre extends xu{constructor(){super(...arguments),this.id=Pre++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Mre={animation:{Feature:Cre},exit:{Feature:kre}};function yp(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function g1(n){return{point:{x:n.pageX,y:n.pageY}}}const Nre=n=>e=>WR(e)&&n(e,g1(e));function xm(n,e,t,r){return yp(n,e,Nre(t),r)}const h3=(n,e)=>Math.abs(n-e);function Lre(n,e){const t=h3(n.x,e.x),r=h3(n.y,e.y);return Math.sqrt(t**2+r**2)}class P9{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=gS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=Lre(f.offset,{x:0,y:0})>=3;if(!g&&!p)return;const{point:E}=f,{timestamp:x}=pi;this.history.push({...E,timestamp:x});const{onStart:w,onMove:T}=this.handlers;g||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=fS(g,this.transformPagePoint),qn.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:p,onSessionEnd:E,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=gS(f.type==="pointercancel"?this.lastMoveEventInfo:fS(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,w),E&&E(f,w)},!WR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const a=g1(e),o=fS(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=pi;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=t;h&&h(e,gS(o,this.history)),this.removeListeners=f1(xm(this.contextWindow,"pointermove",this.handlePointerMove),xm(this.contextWindow,"pointerup",this.handlePointerUp),xm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ou(this.updatePoint)}}function fS(n,e){return e?{point:e(n.point)}:n}function d3(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gS({point:n},e){return{point:n,delta:d3(n,k9(e)),offset:d3(n,Ore(e)),velocity:Dre(e,.1)}}function Ore(n){return n[0]}function k9(n){return n[n.length-1]}function Dre(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=k9(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Tl(e)));)t--;if(!r)return{x:0,y:0};const s=Il(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const M9=1e-4,Fre=1-M9,jre=1+M9,N9=.01,Vre=0-N9,Gre=0+N9;function Qs(n){return n.max-n.min}function Bre(n,e,t){return Math.abs(n-e)<=t}function f3(n,e,t,r=.5){n.origin=r,n.originPoint=cr(e.min,e.max,n.origin),n.scale=Qs(t)/Qs(e),n.translate=cr(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Fre&&n.scale<=jre||isNaN(n.scale))&&(n.scale=1),(n.translate>=Vre&&n.translate<=Gre||isNaN(n.translate))&&(n.translate=0)}function vm(n,e,t,r){f3(n.x,e.x,t.x,r?r.originX:void 0),f3(n.y,e.y,t.y,r?r.originY:void 0)}function g3(n,e,t){n.min=t.min+e.min,n.max=n.min+Qs(e)}function Ure(n,e,t){g3(n.x,e.x,t.x),g3(n.y,e.y,t.y)}function m3(n,e,t){n.min=e.min-t.min,n.max=n.min+Qs(e)}function Em(n,e,t){m3(n.x,e.x,t.x),m3(n.y,e.y,t.y)}function zre(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?cr(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?cr(t,n,r.max):Math.min(n,t)),n}function p3(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $re(n,{top:e,left:t,bottom:r,right:i}){return{x:p3(n.x,t,i),y:p3(n.y,e,r)}}function _3(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function Wre(n,e){return{x:_3(n.x,e.x),y:_3(n.y,e.y)}}function Hre(n,e){let t=.5;const r=Qs(n),i=Qs(e);return i>r?t=_0(e.min,e.max-r,n.min):r>i&&(t=_0(n.min,n.max-i,e.min)),Ol(0,1,t)}function Kre(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sI=.35;function Yre(n=sI){return n===!1?n=0:n===!0&&(n=sI),{x:y3(n,"left","right"),y:y3(n,"top","bottom")}}function y3(n,e,t){return{min:x3(n,e),max:x3(n,t)}}function x3(n,e){return typeof n=="number"?n:n[e]||0}const v3=()=>({translate:0,scale:1,origin:0,originPoint:0}),If=()=>({x:v3(),y:v3()}),E3=()=>({min:0,max:0}),Sr=()=>({x:E3(),y:E3()});function ha(n){return[n("x"),n("y")]}function L9({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function Xre({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qre(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function mS(n){return n===void 0||n===1}function aI({scale:n,scaleX:e,scaleY:t}){return!mS(n)||!mS(e)||!mS(t)}function th(n){return aI(n)||O9(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function O9(n){return w3(n.x)||w3(n.y)}function w3(n){return n&&n!=="0%"}function Hx(n,e,t){const r=n-t,i=e*r;return t+i}function S3(n,e,t,r,i){return i!==void 0&&(n=Hx(n,i,r)),Hx(n,t,r)+e}function oI(n,e=0,t=1,r,i){n.min=S3(n.min,e,t,r,i),n.max=S3(n.max,e,t,r,i)}function D9(n,{x:e,y:t}){oI(n.x,e.translate,e.scale,e.originPoint),oI(n.y,t.translate,t.scale,t.originPoint)}const T3=.999999999999,I3=1.0000000000001;function Zre(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=t[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rf(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,D9(n,a)),r&&th(s.latestValues)&&Rf(n,s.latestValues))}e.x<I3&&e.x>T3&&(e.x=1),e.y<I3&&e.y>T3&&(e.y=1)}function Af(n,e){n.min=n.min+e,n.max=n.max+e}function A3(n,e,t,r,i=.5){const s=cr(n.min,n.max,i);oI(n,e,t,s,r)}function Rf(n,e){A3(n.x,e.x,e.scaleX,e.scale,e.originX),A3(n.y,e.y,e.scaleY,e.scale,e.originY)}function F9(n,e){return L9(qre(n.getBoundingClientRect(),e))}function Qre(n,e,t){const r=F9(n,t),{scroll:i}=e;return i&&(Af(r.x,i.offset.x),Af(r.y,i.offset.y)),r}const j9=({current:n})=>n?n.ownerDocument.defaultView:null,Jre=new WeakMap;class eie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Sr(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(g1(h).point)},s=(h,f)=>{const{drag:g,dragPropagation:p,onDragStart:E}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Hte(g),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ha(w=>{let T=this.getAxisMotionValue(w).get()||0;if(Oo.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const k=R.layout.layoutBox[w];k&&(T=Qs(k)*(parseFloat(T)/100))}}this.originPoint[w]=T}),E&&qn.postRender(()=>E(h,f)),ZT(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:E,onDrag:x}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:w}=f;if(p&&this.currentDirection===null){this.currentDirection=tie(w),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),x&&x(h,f)},o=(h,f)=>this.stop(h,f),l=()=>ha(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new P9(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:j9(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&qn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!ty(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=zre(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Sf(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=$re(i.layoutBox,t):this.constraints=!1,this.elastic=Yre(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ha(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Kre(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Sf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Qre(r,i.root,this.visualElement.getTransformPagePoint());let a=Wre(i.layout.layoutBox,s);if(t){const o=t(Xre(a));this.hasMutatedConstraints=!!o,o&&(a=L9(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ha(h=>{if(!ty(h,t,this.currentDirection))return;let f=l&&l[h]||{};a&&(f={min:0,max:0});const g=i?200:1e6,p=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:g,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,E)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ZT(this.visualElement,e),r.start(rb(e,r,0,t,this.visualElement,!1))}stopAnimation(){ha(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ha(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ha(t=>{const{drag:r}=this.getProps();if(!ty(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[t];s.set(e[t]-cr(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Sf(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ha(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=Hre({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ha(a=>{if(!ty(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(cr(l,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;Jre.set(this.visualElement,this);const e=this.visualElement.current,t=xm(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Sf(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),qn.read(r);const a=yp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ha(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=sI,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function ty(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function tie(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class nie extends xu{constructor(e){super(e),this.removeGroupControls=Ys,this.removeListeners=Ys,this.controls=new eie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ys}unmount(){this.removeGroupControls(),this.removeListeners()}}const R3=n=>(e,t)=>{n&&qn.postRender(()=>n(e,t))};class rie extends xu{constructor(){super(...arguments),this.removePointerDownListener=Ys}onPointerDown(e){this.session=new P9(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:j9(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:R3(e),onStart:R3(t),onMove:r,onEnd:(s,a)=>{delete this.session,i&&qn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=xm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jy={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function b3(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Vg={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Dt.test(n))n=parseFloat(n);else return n;const t=b3(n,e.target.x),r=b3(n,e.target.y);return`${t}% ${r}%`}},iie={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=lu.parse(n);if(i.length>5)return r;const s=lu.createTransformer(n),a=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const u=cr(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class sie extends ae.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Ite(aie),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),jy.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||qn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),MR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function V9(n){const[e,t]=E8(),r=ae.useContext(TR);return y.jsx(sie,{...n,layoutGroup:r,switchLayoutGroup:ae.useContext(C8),isPresent:e,safeToRemove:t})}const aie={borderRadius:{...Vg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vg,borderTopRightRadius:Vg,borderBottomLeftRadius:Vg,borderBottomRightRadius:Vg,boxShadow:iie};function oie(n,e,t){const r=ji(n)?n:pp(n);return r.start(rb("",r,e,t)),r.animation}function lie(n){return n instanceof SVGElement&&n.tagName!=="svg"}const cie=(n,e)=>n.depth-e.depth;class uie{constructor(){this.children=[],this.isDirty=!1}add(e){HR(this.children,e),this.isDirty=!0}remove(e){KR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cie),this.isDirty=!1,this.children.forEach(e)}}function hie(n,e){const t=Do.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(ou(r),n(s-e))};return qn.read(r,!0),()=>ou(r)}const G9=["TopLeft","TopRight","BottomLeft","BottomRight"],die=G9.length,C3=n=>typeof n=="string"?parseFloat(n):n,P3=n=>typeof n=="number"||Dt.test(n);function fie(n,e,t,r,i,s){i?(n.opacity=cr(0,t.opacity!==void 0?t.opacity:1,gie(r)),n.opacityExit=cr(e.opacity!==void 0?e.opacity:1,0,mie(r))):s&&(n.opacity=cr(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<die;a++){const o=`border${G9[a]}Radius`;let l=k3(e,o),u=k3(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||P3(l)===P3(u)?(n[o]=Math.max(cr(C3(l),C3(u),r),0),(Oo.test(u)||Oo.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=cr(e.rotate||0,t.rotate||0,r))}function k3(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const gie=B9(0,.5,s9),mie=B9(.5,.95,Ys);function B9(n,e,t){return r=>r<n?0:r>e?1:t(_0(n,e,r))}function M3(n,e){n.min=e.min,n.max=e.max}function ca(n,e){M3(n.x,e.x),M3(n.y,e.y)}function N3(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function L3(n,e,t,r,i){return n-=e,n=Hx(n,1/t,r),i!==void 0&&(n=Hx(n,1/i,r)),n}function pie(n,e=0,t=1,r=.5,i,s=n,a=n){if(Oo.test(e)&&(e=parseFloat(e),e=cr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=cr(s.min,s.max,r);n===s&&(o-=e),n.min=L3(n.min,e,t,o,i),n.max=L3(n.max,e,t,o,i)}function O3(n,e,[t,r,i],s,a){pie(n,e[t],e[r],e[i],e.scale,s,a)}const _ie=["x","scaleX","originX"],yie=["y","scaleY","originY"];function D3(n,e,t,r){O3(n.x,e,_ie,t?t.x:void 0,r?r.x:void 0),O3(n.y,e,yie,t?t.y:void 0,r?r.y:void 0)}function F3(n){return n.translate===0&&n.scale===1}function U9(n){return F3(n.x)&&F3(n.y)}function j3(n,e){return n.min===e.min&&n.max===e.max}function xie(n,e){return j3(n.x,e.x)&&j3(n.y,e.y)}function V3(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function z9(n,e){return V3(n.x,e.x)&&V3(n.y,e.y)}function G3(n){return Qs(n.x)/Qs(n.y)}function B3(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class vie{constructor(){this.members=[]}add(e){HR(this.members,e),e.scheduleRender()}remove(e){if(KR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Eie(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:h,rotateX:f,rotateY:g,skewX:p,skewY:E}=t;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),g&&(r+=`rotateY(${g}deg) `),p&&(r+=`skewX(${p}deg) `),E&&(r+=`skewY(${E}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const nh={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},tm=typeof window<"u"&&window.MotionDebug!==void 0,pS=["","X","Y","Z"],wie={visibility:"hidden"},U3=1e3;let Sie=0;function _S(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function $9(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Q8(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",qn,!(i||s))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&$9(r)}function W9({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e?.()){this.id=Sie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tm&&(nh.totalNodes=nh.resolvedTargetDeltas=nh.recalculatedProjection=0),this.nodes.forEach(Aie),this.nodes.forEach(kie),this.nodes.forEach(Mie),this.nodes.forEach(Rie),tm&&window.MotionDebug.record(nh)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new uie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new YR),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=lie(a),this.instance=a;const{layoutId:l,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),n){let f;const g=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=hie(g,250),jy.hasAnimatedSinceResize&&(jy.hasAnimatedSinceResize=!1,this.nodes.forEach($3))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g,hasRelativeTargetChanged:p,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||Fie,{onLayoutAnimationStart:w,onLayoutAnimationComplete:T}=h.getProps(),R=!this.targetLayout||!z9(this.targetLayout,E)||p,k=!g&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||g&&(R||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,k);const N={...UR(x,"layout"),onPlay:w,onComplete:T};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else g||$3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ou(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Nie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$9(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(z3);return}this.isUpdating||this.nodes.forEach(Cie),this.isUpdating=!1,this.nodes.forEach(Pie),this.nodes.forEach(Tie),this.nodes.forEach(Iie),this.clearAllSnapshots();const o=Do.now();pi.delta=Ol(0,1e3/60,o-pi.timestamp),pi.timestamp=o,pi.isProcessing=!0,oS.update.process(pi),oS.preRender.process(pi),oS.render.process(pi),pi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,MR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(bie),this.sharedNodes.forEach(Lie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Sr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!U9(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&(o||th(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),jie(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Sr();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Vie))){const{scroll:h}=this.root;h&&(Af(l.x,h.offset.x),Af(l.y,h.offset.y))}return l}removeElementScroll(a){var o;const l=Sr();if(ca(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:f,options:g}=h;h!==this.root&&f&&g.layoutScroll&&(f.wasRoot&&ca(l,a),Af(l.x,f.offset.x),Af(l.y,f.offset.y))}return l}applyTransform(a,o=!1){const l=Sr();ca(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Rf(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),th(h.latestValues)&&Rf(l,h.latestValues)}return th(this.latestValues)&&Rf(l,this.latestValues),l}removeTransform(a){const o=Sr();ca(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!th(u.latestValues))continue;aI(u.latestValues)&&u.updateSnapshot();const h=Sr(),f=u.measurePageBox();ca(h,f),D3(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return th(this.latestValues)&&D3(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:g}=this.options;if(!(!this.layout||!(f||g))){if(this.resolvedRelativeTargetAt=pi.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sr(),this.relativeTargetOrigin=Sr(),Em(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Sr(),this.targetWithTransforms=Sr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ure(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ca(this.target,this.layout.layoutBox),D9(this.target,this.targetDelta)):ca(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Sr(),this.relativeTargetOrigin=Sr(),Em(this.relativeTargetOrigin,this.target,p.target),ca(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tm&&nh.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||aI(this.parent.latestValues)||O9(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===pi.timestamp&&(u=!1),u)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;ca(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,p=this.treeScale.y;Zre(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Sr());const{target:E}=o;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(N3(this.prevProjectionDelta.x,this.projectionDelta.x),N3(this.prevProjectionDelta.y,this.projectionDelta.y)),vm(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==p||!B3(this.projectionDelta.x,this.prevProjectionDelta.x)||!B3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),tm&&nh.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=If(),this.projectionDelta=If(),this.projectionDeltaWithTransform=If()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},f=If();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const g=Sr(),p=l?l.source:void 0,E=this.layout?this.layout.source:void 0,x=p!==E,w=this.getStack(),T=!w||w.members.length<=1,R=!!(x&&!T&&this.options.crossfade===!0&&!this.path.some(Die));this.animationProgress=0;let k;this.mixTargetDelta=N=>{const j=N/1e3;W3(f.x,a.x,j),W3(f.y,a.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Em(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Oie(this.relativeTarget,this.relativeTargetOrigin,g,j),k&&xie(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Sr()),ca(k,this.relativeTarget)),x&&(this.animationValues=h,fie(h,u,this.latestValues,j,R,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ou(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qn.update(()=>{jy.hasAnimatedSinceResize=!0,this.currentAnimation=oie(0,U3,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(U3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&H9(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Sr();const f=Qs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const g=Qs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+g}ca(o,l),Rf(o,h),vm(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new vie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&_S("z",a,u,this.animationValues);for(let h=0;h<pS.length;h++)_S(`rotate${pS[h]}`,a,u,this.animationValues),_S(`skew${pS[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wie;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Dy(a?.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Dy(a?.pointerEvents)||""),this.hasProjected&&!th(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const g=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Eie(this.projectionDeltaWithTransform,this.treeScale,g),h&&(u.transform=h(g,u.transform));const{x:p,y:E}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${E.origin*100}% 0`,f.animationValues?u.opacity=f===this?(l=(o=g.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=f===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const x in Bx){if(g[x]===void 0)continue;const{correct:w,applyTo:T}=Bx[x],R=u.transform==="none"?g[x]:w(g[x],f);if(T){const k=T.length;for(let N=0;N<k;N++)u[T[N]]=R}else u[x]=R}return this.options.layoutId&&(u.pointerEvents=f===this?Dy(a?.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(z3),this.root.sharedNodes.clear()}}}function Tie(n){n.updateLayout()}function Iie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,a=t.source!==n.layout.source;s==="size"?ha(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],p=Qs(g);g.min=r[f].min,g.max=g.min+p}):H9(s,t.layoutBox,r)&&ha(f=>{const g=a?t.measuredBox[f]:t.layoutBox[f],p=Qs(r[f]);g.max=g.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+p)});const o=If();vm(o,r,t.layoutBox);const l=If();a?vm(l,n.applyTransform(i,!0),t.measuredBox):vm(l,r,t.layoutBox);const u=!U9(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:g,layout:p}=f;if(g&&p){const E=Sr();Em(E,t.layoutBox,g.layoutBox);const x=Sr();Em(x,r,p.layoutBox),z9(E,x)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=E,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Aie(n){tm&&nh.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Rie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function bie(n){n.clearSnapshot()}function z3(n){n.clearMeasurements()}function Cie(n){n.isLayoutDirty=!1}function Pie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function $3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function kie(n){n.resolveTargetDelta()}function Mie(n){n.calcProjection()}function Nie(n){n.resetSkewAndRotation()}function Lie(n){n.removeLeadSnapshot()}function W3(n,e,t){n.translate=cr(e.translate,0,t),n.scale=cr(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function H3(n,e,t,r){n.min=cr(e.min,t.min,r),n.max=cr(e.max,t.max,r)}function Oie(n,e,t,r){H3(n.x,e.x,t.x,r),H3(n.y,e.y,t.y,r)}function Die(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Fie={duration:.45,ease:[.4,0,.1,1]},K3=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Y3=K3("applewebkit/")&&!K3("chrome/")?Math.round:Ys;function X3(n){n.min=Y3(n.min),n.max=Y3(n.max)}function jie(n){X3(n.x),X3(n.y)}function H9(n,e,t){return n==="position"||n==="preserve-aspect"&&!Bre(G3(e),G3(t),.2)}function Vie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Gie=W9({attachResizeListener:(n,e)=>yp(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yS={current:void 0},K9=W9({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yS.current){const n=new Gie({});n.mount(window),n.setOptions({layoutScroll:!0}),yS.current=n}return yS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Bie={pan:{Feature:rie},drag:{Feature:nie,ProjectionNode:K9,MeasureLayout:V9}};function q3(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,s=r[i];s&&qn.postRender(()=>s(e,g1(e)))}class Uie extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=Bte(e,t=>(q3(this.node,t,"Start"),r=>q3(this.node,r,"End"))))}unmount(){}}class zie extends xu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f1(yp(this.node.current,"focus",()=>this.onFocus()),yp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Z3(n,e,t){const{props:r}=n;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),s=r[i];s&&qn.postRender(()=>s(e,g1(e)))}class $ie extends xu{mount(){const{current:e}=this.node;e&&(this.unmount=Wte(e,t=>(Z3(this.node,t,"Start"),(r,{success:i})=>Z3(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lI=new WeakMap,xS=new WeakMap,Wie=n=>{const e=lI.get(n.target);e&&e(n)},Hie=n=>{n.forEach(Wie)};function Kie({root:n,...e}){const t=n||document;xS.has(t)||xS.set(t,{});const r=xS.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Hie,{root:n,...e})),r[i]}function Yie(n,e,t){const r=Kie(e);return lI.set(n,t),r.observe(n),()=>{lI.delete(n),r.unobserve(n)}}const Xie={some:0,all:1};class qie extends xu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Xie[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),g=u?h:f;g&&g(l)};return Yie(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Zie(e,t))&&this.startObserver()}unmount(){}}function Zie({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Qie={inView:{Feature:qie},tap:{Feature:$ie},focus:{Feature:zie},hover:{Feature:Uie}},Jie={layout:{ProjectionNode:K9,MeasureLayout:V9}},cI={current:null},Y9={current:!1};function ese(){if(Y9.current=!0,!!RR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>cI.current=n.matches;n.addListener(e),e()}else cI.current=!1}const tse=[...x9,Ni,lu],nse=n=>tse.find(y9(n)),Q3=new WeakMap;function rse(n,e,t){for(const r in e){const i=e[r],s=t[r];if(ji(i))n.addValue(r,i);else if(ji(s))n.addValue(r,pp(i,{owner:n}));else if(s!==i)if(n.hasValue(r)){const a=n.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,pp(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const J3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ise{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=eb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Do.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,qn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:h}=a;this.onUpdate=h,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=vE(t),this.isVariantNode=R8(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const p in g){const E=g[p];l[p]!==void 0&&ji(E)&&E.set(l[p],!1)}}mount(e){this.current=e,Q3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Y9.current||ese(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cI.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Q3.delete(this.current),this.projection&&this.projection.unmount(),ou(this.notifyUpdate),ou(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ad.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&qn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in y0){const t=y0[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Sr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<J3.length;r++){const i=J3[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=rse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=pp(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(p9(i)||o9(i))?i=parseFloat(i):!nse(i)&&lu.test(t)&&(i=f9(e,t)),this.setBaseTarget(e,ji(i)?i.get():i)),ji(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=LR(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ji(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new YR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class X9 extends ise{constructor(){super(...arguments),this.KeyframeResolver=v9}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ji(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function sse(n){return window.getComputedStyle(n)}class ase extends X9{constructor(){super(...arguments),this.type="html",this.renderInstance=D8}readValueFromInstance(e,t){if(ad.has(t)){const r=JR(t);return r&&r.default||0}else{const r=sse(e),i=(N8(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return F9(e,t)}build(e,t,r){FR(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return BR(e,t,r)}}class ose extends X9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Sr}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ad.has(t)){const r=JR(t);return r&&r.default||0}return t=F8.has(t)?t:kR(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return G8(e,t,r)}build(e,t,r){jR(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,i){j8(e,t,r,i)}mount(e){this.isSVGTag=GR(e.tagName),super.mount(e)}}const lse=(n,e)=>NR(n)?new ose(e):new ase(e,{allowProjection:n!==ae.Fragment}),cse=Lte({...Mre,...Qie,...Bie,...Jie},lse),Kt=Xee(cse);const use=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hse=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),eL=n=>{const e=hse(n);return e.charAt(0).toUpperCase()+e.slice(1)},q9=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),dse=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var fse={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gse=ae.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},l)=>ae.createElement("svg",{ref:l,...fse,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:q9("lucide",i),...!s&&!dse(o)&&{"aria-hidden":"true"},...o},[...a.map(([u,h])=>ae.createElement(u,h)),...Array.isArray(s)?s:[s]]));const Rt=(n,e)=>{const t=ae.forwardRef(({className:r,...i},s)=>ae.createElement(gse,{ref:s,iconNode:e,className:q9(`lucide-${use(eL(n))}`,`lucide-${n}`,r),...i}));return t.displayName=eL(n),t};const mse=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],pse=Rt("archive-restore",mse);const _se=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Z9=Rt("archive",_se);const yse=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xse=Rt("ban",yse);const vse=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ese=Rt("book-open",vse);const wse=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Q9=Rt("bug",wse);const Sse=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tse=Rt("calendar",Sse);const Ise=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],J9=Rt("chart-column",Ise);const Ase=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],SE=Rt("check",Ase);const Rse=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ib=Rt("chevron-down",Rse);const bse=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cse=Rt("chevron-left",bse);const Pse=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],TE=Rt("chevron-right",Pse);const kse=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ej=Rt("chevron-up",kse);const Mse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tj=Rt("circle-alert",Mse);const Nse=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Lse=Rt("circle-check-big",Nse);const Ose=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Dse=Rt("code",Ose);const Fse=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jse=Rt("compass",Fse);const Vse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],tL=Rt("crosshair",Vse);const Gse=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uI=Rt("download",Gse);const Bse=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],m1=Rt("external-link",Bse);const Use=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sb=Rt("eye-off",Use);const zse=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ab=Rt("eye",zse);const $se=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ob=Rt("file-text",$se);const Wse=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Hse=Rt("folder-open",Wse);const Kse=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Yse=Rt("folder",Kse);const Xse=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],qse=Rt("grid-3x3",Xse);const Zse=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nL=Rt("info",Zse);const Qse=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Dl=Rt("layers",Qse);const Jse=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],eae=Rt("link",Jse);const tae=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],nae=Rt("list",tae);const rae=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],lb=Rt("loader-circle",rae);const iae=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sae=Rt("locate-fixed",iae);const aae=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hI=Rt("lock",aae);const oae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lae=Rt("log-out",oae);const cae=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],cu=Rt("map-pin",cae);const uae=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],cb=Rt("map",uae);const hae=[["path",{d:"M5 12h14",key:"1ays0h"}]],dae=Rt("minus",hae);const fae=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],dI=Rt("mountain",fae);const gae=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],mae=Rt("mouse-pointer",gae);const pae=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],ub=Rt("navigation",pae);const _ae=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rL=Rt("pen-line",_ae);const yae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],xae=Rt("pen",yae);const vae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Eae=Rt("pencil",vae);const wae=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fo=Rt("plus",wae);const Sae=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Tae=Rt("rotate-ccw",Sae);const Iae=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Aae=Rt("ruler",Iae);const Rae=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bae=Rt("save",Rae);const Cae=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Pae=Rt("scale",Cae);const kae=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nj=Rt("search",kae);const Mae=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rj=Rt("settings",Mae);const Nae=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Lae=Rt("sliders-horizontal",Nae);const Oae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Dae=Rt("smartphone",Oae);const Fae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jae=Rt("target",Fae);const Vae=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],D0=Rt("trash-2",Vae);const Gae=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Bae=Rt("tree-palm",Gae);const Uae=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],zae=Rt("type",Uae);const $ae=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hb=Rt("upload",$ae);const Wae=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Hae=Rt("waves",Wae);const Kae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ta=Rt("x",Kae);function Yae(){const{tracking:n,startTracking:e,stopTracking:t,updatePosition:r,setWatchId:i,resetFirstFix:s}=Xi(),a=ae.useCallback(l=>{r(l)},[r]),o=ae.useCallback(l=>{console.error("GPS error:",l),alert(`GPS fout: ${l.message}`),t()},[t]);return ae.useEffect(()=>{if(!n)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),t();return}const l=navigator.geolocation.watchPosition(a,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(l),()=>{navigator.geolocation.clearWatch(l)}},[n,a,o,i,t]),{tracking:n,start:e,stop:t,toggle:()=>n?t():e()}}function Xae(){const{tracking:n,toggle:e}=Yae();return y.jsx(Kt.button,{className:`
        fixed bottom-2 right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},animate:n?{scale:[1,1.02,1]}:{},transition:n?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":n?"GPS tracking actief":"GPS tracking starten",title:n?"GPS tracking actief":"GPS tracking starten",children:y.jsx(sae,{size:22,strokeWidth:2})})}const qae="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`);function Zae(){const n=As(p=>p.map),e=Xi(p=>p.position),t=Xi(p=>p.accuracy),r=Xi(p=>p.tracking),i=Xi(p=>p.smoothHeading),s=Ti(p=>p.showAccuracyCircle),a=Xi(p=>p.firstFix),o=Xi(p=>p.resetFirstFix),l=Xi(p=>p.config.centerOnUser),u=ae.useRef(null),h=ae.useRef(null),f=ae.useRef(null),g=ae.useMemo(()=>p=>new ur({image:new zp({src:qae,scale:.9,rotation:p,rotateWithView:!1,anchor:[.5,.5]})}),[]);return ae.useEffect(()=>{if(!n||!r&&!e)return;const p=bh([5.1214,52.0907]);return u.current=new Za({geometry:new Qa(p)}),u.current.setStyle(g(0)),h.current=new Za({geometry:new Qa(p)}),f.current=new Hp({source:new Bp({features:[h.current,u.current]}),zIndex:1e3}),n.addLayer(f.current),()=>{f.current&&n&&n.removeLayer(f.current)}},[n,r,e,g]),ae.useEffect(()=>{if(!n||!e||!u.current||!h.current)return;const p=bh([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(p),h.current.getGeometry()?.setCoordinates(p),s&&t){const E=n.getView().getResolution()||1,x=Math.min(t/E,80);h.current.setStyle(new ur({image:new Cl({radius:x,fill:new ai({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new ur({}));if(a&&r){n.getView().setCenter(p),n.getView().setZoom(17),o();return}r&&l&&!a&&n.getView().animate({center:p,duration:150})},[n,r,e,t,a,o,l,s]),ae.useEffect(()=>{if(!u.current)return;const p=i!==null?i*Math.PI/180:0;u.current.setStyle(g(p))},[i,g]),null}function Qae(){const n=Fi(t=>t.themesPanelOpen),e=Fi(t=>t.toggleThemesPanel);return y.jsx(Kt.button,{className:`
        fixed bottom-[60px] right-2 z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${n?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":n?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:y.jsx(cb,{size:22,strokeWidth:2})})}function Jae(){return y.jsx(Qae,{})}const ny=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Rc=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],vu=Sa()(N0((n,e)=>({layers:[],colorIndex:0,addLayer:(t,r=Rc)=>{const i=crypto.randomUUID(),s=ny[e().colorIndex%ny.length];return n(a=>({layers:[...a.layers,{id:i,name:t,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:a.colorIndex+1})),i},removeLayer:t=>{n(r=>({layers:r.layers.filter(i=>i.id!==t)}))},updateLayer:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,...r}:s)}))},toggleVisibility:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,visible:!i.visible}:i)}))},toggleArchived:t=>{n(r=>({layers:r.layers.map(i=>i.id===t?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(t,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:[...a.points,i]}:a)}))},removePoint:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,points:s.points.filter(a=>a.id!==r)}:s)}))},updatePoint:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,...i}:o)}:a)}))},setPointStatus:(t,r,i)=>{n(s=>({layers:s.layers.map(a=>a.id===t?{...a,points:a.points.map(o=>o.id===r?{...o,status:i}:o)}:a)}))},addCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(t,r)=>{n(i=>({layers:i.layers.map(s=>s.id===t?{...s,categories:s.categories.filter(a=>a!==r)}:s)}))},exportLayerAsGeoJSON:t=>{const r=e().layers.find(l=>l.id===t);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},importLayerFromGeoJSON:t=>{try{const r=JSON.parse(t);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,a=i.categories||Rc,o=i.color||ny[e().colorIndex%ny.length],l=(r.features||[]).filter(h=>h.geometry?.type==="Point").map(h=>({id:h.properties?.id||crypto.randomUUID(),name:h.properties?.name||"Naamloos",category:h.properties?.category||"Overig",notes:h.properties?.notes||"",url:h.properties?.url,status:h.properties?.status||"todo",sourceLayer:h.properties?.sourceLayer,sourceId:h.properties?.sourceId,coordinates:h.geometry.coordinates,createdAt:h.properties?.createdAt||new Date().toISOString()})),u=crypto.randomUUID();return n(h=>({layers:[...h.layers,{id:u,name:s,color:o,categories:a,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:h.colorIndex+1})),{success:!0,layerId:u}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:t=>e().layers.find(r=>r.id===t),getActiveLayerCount:()=>e().layers.filter(t=>!t.archived).length,getArchivedLayerCount:()=>e().layers.filter(t=>t.archived).length,clearAll:()=>{n({layers:[],colorIndex:0})}}),{name:"detectorapp-custom-point-layers"}));function Qr({title:n,children:e,defaultExpanded:t=!0,layerNames:r}){const[i,s]=ae.useState(t),a=ri(p=>p.visible),o=ri(p=>p.setLayerVisibility),l=r?.filter(p=>a[p]).length||0,u=r?.length||0,h=u>0&&l===u,f=l>0&&l<u,g=p=>{if(p.stopPropagation(),!r)return;const E=!h;r.forEach(x=>{o(x,E)})};return y.jsxs("div",{className:"mb-0.5",children:[y.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[y.jsxs("button",{onClick:p=>{p.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[y.jsx(Kt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:y.jsx(TE,{size:14})}),i?y.jsx(Hse,{size:16,className:"text-blue-500"}):y.jsx(Yse,{size:16,className:"text-blue-500"}),y.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:n}),l>0&&y.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:l})]}),r&&r.length>0&&y.jsx("button",{onClick:g,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:h?"#3b82f6":f?"#93c5fd":"white",border:h?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(h||f)&&y.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:y.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),y.jsx(li,{initial:!1,children:i&&y.jsx(Kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function at({name:n,type:e}){const t=ri(w=>w.visible[n]),r=ri(w=>w.loadingState[n]),i=ri(w=>w.toggleLayer),s=ri(w=>w.setLayerVisibility),a=v8(w=>w.isLayerUnlocked),o=r==="loading",l=r==="error",u=vA[n],h=u?.tier??"free",f=u?.regions??["nl"],p=!a(n,h,f),E=w=>{w.stopPropagation(),!(o||p)&&(e==="overlay"?i(n):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(R=>{s(R,R===n)}))},x=t??!1;return y.jsxs("button",{onClick:E,disabled:o||p,className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${p?"opacity-50 cursor-not-allowed bg-gray-50":o?"opacity-70 cursor-wait bg-transparent":x?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:p?"Premium laag - upgrade om te ontgrendelen":void 0,children:[y.jsxs("span",{className:`flex items-center gap-1 ${l?"text-red-500":p?"text-gray-400":"text-gray-600"}`,children:[n,l&&y.jsx(tj,{size:12,className:"text-red-500"}),p&&y.jsx(hI,{size:12,className:"text-amber-500"})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:p?"#e5e7eb":o?"#93c5fd":x?"#3b82f6":"white",border:p?"2px solid #d1d5db":o?"2px solid #93c5fd":x?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:p?y.jsx(hI,{size:10,strokeWidth:3,className:"text-gray-400"}):o?y.jsx(lb,{size:10,strokeWidth:3,className:"animate-spin"}):x?y.jsx(SE,{size:12,strokeWidth:3}):null})]})}function eoe(){const{themesPanelOpen:n,toggleThemesPanel:e}=Fi(),{layers:t,toggleVisibility:r}=vu(),i=ae.useRef(null),s=Ti(l=>l.layerPanelFontScale),a=Ti(l=>l.setLayerPanelFontScale),o=13*s/100;return ae.useEffect(()=>{if(!n)return;const l=h=>{i.current&&!i.current.contains(h.target)&&e()},u=setTimeout(()=>{document.addEventListener("click",l)},100);return()=>{clearTimeout(u),document.removeEventListener("click",l)}},[n,e]),y.jsx(li,{children:n&&y.jsxs(Kt.div,{ref:i,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[y.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:14}),y.jsx("span",{className:"font-medium text-sm",children:"Kaartlagen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:s,onInput:l=>{a(parseInt(l.target.value))},onChange:l=>a(parseInt(l.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none hover:bg-white/20 transition-colors ml-1",children:y.jsx(Ta,{size:16})})]})]}),y.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${o}px`},children:[y.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:y.jsx(at,{name:"Mijn Vondsten",type:"overlay"})}),t.length>0&&y.jsx("div",{className:"mb-2 pb-1 border-b border-gray-100",children:t.map(l=>y.jsxs("button",{onClick:()=>r(l.id),className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${l.visible?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},children:[y.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:l.color}}),l.name,y.jsxs("span",{className:"text-xs text-gray-400",children:["(",l.points.length,")"]})]}),y.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:l.visible?"#3b82f6":"white",border:l.visible?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:l.visible&&y.jsx(SE,{size:12,strokeWidth:3})})]},l.id))}),y.jsxs(Qr,{title:"Achtergronden",defaultExpanded:!0,children:[y.jsx(at,{name:"CartoDB (licht)",type:"base"}),y.jsx(at,{name:"OpenStreetMap",type:"base"}),y.jsx(at,{name:"Luchtfoto",type:"base"}),y.jsx(at,{name:"Labels Overlay",type:"overlay"}),y.jsx(at,{name:"TMK 1850",type:"base"}),y.jsx(at,{name:"Bonnebladen 1900",type:"base"})]}),y.jsxs(Qr,{title:"Thema's",defaultExpanded:!0,children:[y.jsxs(Qr,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(at,{name:"Hunebedden",type:"overlay"}),y.jsx(at,{name:"FAMKE Steentijd",type:"overlay"}),y.jsx(at,{name:"Grafheuvels",type:"overlay"}),y.jsx(at,{name:"Terpen",type:"overlay"}),y.jsxs(Qr,{title:"Paleokaarten (tijdreizen)",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[y.jsx(at,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),y.jsx(at,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]})]}),y.jsxs(Qr,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","IKAW","Archeo Landschappen","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(at,{name:"AMK Monumenten",type:"overlay"}),y.jsxs(Qr,{title:"AMK per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[y.jsx(at,{name:"AMK Romeins",type:"overlay"}),y.jsx(at,{name:"AMK Steentijd",type:"overlay"}),y.jsx(at,{name:"AMK Vroege ME",type:"overlay"}),y.jsx(at,{name:"AMK Late ME",type:"overlay"}),y.jsx(at,{name:"AMK Overig",type:"overlay"})]}),y.jsx(at,{name:"Romeinse wegen (regio)",type:"overlay"}),y.jsx(at,{name:"Romeinse wegen (Wereld)",type:"overlay"}),y.jsx(at,{name:"IKAW",type:"overlay"}),y.jsx(at,{name:"Archeo Landschappen",type:"overlay"}),y.jsxs(Qr,{title:"Verwachtingen uiterwaarden",defaultExpanded:!1,layerNames:["UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[y.jsx(at,{name:"UIKAV Punten",type:"overlay"}),y.jsx(at,{name:"UIKAV Vlakken",type:"overlay"}),y.jsx(at,{name:"UIKAV Expert",type:"overlay"}),y.jsx(at,{name:"UIKAV Buffer",type:"overlay"}),y.jsx(at,{name:"UIKAV Indeling",type:"overlay"})]})]}),y.jsxs(Qr,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[y.jsx(at,{name:"Rijksmonumenten",type:"overlay"}),y.jsx(at,{name:"Werelderfgoed",type:"overlay"}),y.jsx(at,{name:"Religieus Erfgoed",type:"overlay"}),y.jsx(at,{name:"Kastelen",type:"overlay"}),y.jsx(at,{name:"Runes",type:"overlay"})]}),y.jsxs(Qr,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[y.jsx(at,{name:"WWII Bunkers",type:"overlay"}),y.jsx(at,{name:"Slagvelden",type:"overlay"}),y.jsx(at,{name:"Militaire Vliegvelden",type:"overlay"}),y.jsx(at,{name:"Verdedigingslinies",type:"overlay"}),y.jsx(at,{name:"Militaire Objecten",type:"overlay"}),y.jsx(at,{name:"Inundatiegebieden",type:"overlay"})]}),y.jsxs(Qr,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m"],children:[y.jsx(at,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),y.jsx(at,{name:"AHN4 Hillshade NL",type:"overlay"}),y.jsx(at,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),y.jsx(at,{name:"AHN 0.5m",type:"overlay"})]}),y.jsxs(Qr,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Veengebieden","Geomorfologie","Bodemkaart","Essen"],children:[y.jsx(at,{name:"Veengebieden",type:"overlay"}),y.jsx(at,{name:"Geomorfologie",type:"overlay"}),y.jsx(at,{name:"Bodemkaart",type:"overlay"}),y.jsx(at,{name:"Essen",type:"overlay"})]}),y.jsxs(Qr,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[y.jsx(at,{name:"Gewaspercelen",type:"overlay"}),y.jsx(at,{name:"Kadastrale Grenzen",type:"overlay"})]}),y.jsxs(Qr,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[y.jsxs(Qr,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[y.jsx(at,{name:"Scheepswrakken",type:"overlay"}),y.jsx(at,{name:"Woonheuvels ZH",type:"overlay"}),y.jsx(at,{name:"Romeinse Forten",type:"overlay"}),y.jsx(at,{name:"Windmolens",type:"overlay"}),y.jsx(at,{name:"Erfgoedlijnen",type:"overlay"}),y.jsx(at,{name:"Oude Kernen",type:"overlay"})]}),y.jsxs(Qr,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[y.jsx(at,{name:"Relictenkaart Punten",type:"overlay"}),y.jsx(at,{name:"Relictenkaart Lijnen",type:"overlay"}),y.jsx(at,{name:"Relictenkaart Vlakken",type:"overlay"})]}),y.jsx(Qr,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:y.jsx(at,{name:"Verdronken Dorpen",type:"overlay"})})]}),y.jsxs(Qr,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[y.jsx(at,{name:"Fossiel Hotspots",type:"overlay"}),y.jsx(at,{name:"Mineralen Hotspots",type:"overlay"}),y.jsx(at,{name:"Goudrivieren",type:"overlay"}),y.jsx(at,{name:"Fossielen Nederland",type:"overlay"}),y.jsx(at,{name:"Fossielen Belgi",type:"overlay"}),y.jsx(at,{name:"Fossielen Duitsland",type:"overlay"}),y.jsx(at,{name:"Fossielen Frankrijk",type:"overlay"})]}),y.jsxs(Qr,{title:"Recreatie",defaultExpanded:!1,layerNames:["Wandelroutes","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[y.jsx(at,{name:"Wandelroutes",type:"overlay"}),y.jsx(at,{name:"Parken",type:"overlay"}),y.jsx(at,{name:"Speeltuinen",type:"overlay"}),y.jsx(at,{name:"Musea",type:"overlay"}),y.jsx(at,{name:"Strandjes",type:"overlay"}),y.jsx(at,{name:"Kringloopwinkels",type:"overlay"})]})]})]})]})})}function toe(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var Wh=1,Hh=2,Uf=3,noe=4,fI=5,iL=6378137,roe=6356752314e-3,sL=.0066943799901413165,wm=484813681109536e-20,Ue=Math.PI/2,ioe=.16666666666666666,soe=.04722222222222222,aoe=.022156084656084655,it=1e-10,gr=.017453292519943295,Es=57.29577951308232,Rn=Math.PI/4,xp=Math.PI*2,Tr=3.14159265359,Rs={};Rs.greenwich=0;Rs.lisbon=-9.131906111111;Rs.paris=2.337229166667;Rs.bogota=-74.080916666667;Rs.madrid=-3.687938888889;Rs.rome=12.452333333333;Rs.bern=7.439583333333;Rs.jakarta=106.807719444444;Rs.ferro=-17.666666666667;Rs.brussels=4.367975;Rs.stockholm=18.058277777778;Rs.athens=23.7163375;Rs.oslo=10.722916666667;const ooe={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var aL=/[\s_\-\/\(\)]/g;function uu(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(aL,""),i=-1,s,a;++i<t.length;)if(s=t[i],a=s.toLowerCase().replace(aL,""),a===r)return n[s]}function gI(n){var e={},t=n.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var u=l.split("=");return u.push(!0),o[u[0].toLowerCase()]=u[1],o},{}),r,i,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*gr},lat_1:function(o){e.lat1=o*gr},lat_2:function(o){e.lat2=o*gr},lat_ts:function(o){e.lat_ts=o*gr},lon_0:function(o){e.long0=o*gr},lon_1:function(o){e.long1=o*gr},lon_2:function(o){e.long2=o*gr},alpha:function(o){e.alpha=parseFloat(o)*gr},gamma:function(o){e.rectified_grid_angle=parseFloat(o)*gr},lonc:function(o){e.longc=o*gr},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=uu(ooe,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*gr},pm:function(o){var l=uu(Rs,o);e.from_greenwich=(l||parseFloat(o))*gr},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in a?(s=a[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}class ij{static getId(e){const t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(o=>Array.isArray(o)&&o[0]==="ID"),a=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:a}}static convertAxis(e){const t=e[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const u=i[1].toUpperCase();if(u==="E")r="east";else if(u==="N")r="north";else if(u==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${u}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(u=>Array.isArray(u)&&u[0]==="ORDER"),a=s?parseInt(s[1],10):null,o=e.find(u=>Array.isArray(u)&&(u[0]==="LENGTHUNIT"||u[0]==="ANGLEUNIT"||u[0]==="SCALEUNIT")),l=this.convertUnit(o);return{name:t,direction:r,unit:l,order:a}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="BASEGEOGCRS")):null,t.conversion=e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="CONVERSION")):null;const r=e.find(g=>Array.isArray(g)&&g[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT");if(i){const g=this.convertUnit(i);t.coordinate_system.unit=g}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];const s=e.find(g=>Array.isArray(g)&&(g[0]==="DATUM"||g[0]==="ENSEMBLE"));if(s){const g=this.convert(s);s[0]==="ENSEMBLE"?t.datum_ensemble=g:t.datum=g;const p=e.find(E=>Array.isArray(E)&&E[0]==="PRIMEM");p&&p[1]!=="Greenwich"&&(g.prime_meridian={name:p[1],longitude:parseFloat(p[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(g=>Array.isArray(g)&&g[0]==="MEMBER").map(g=>({type:"DatumEnsembleMember",name:g[1],id:this.getId(g)}));const a=e.find(g=>Array.isArray(g)&&g[0]==="ENSEMBLEACCURACY");a&&(t.accuracy=parseFloat(a[1]));const o=e.find(g=>Array.isArray(g)&&g[0]==="ELLIPSOID");o&&(t.ellipsoid=this.convert(o)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]),e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT")&&this.convert(e.find(g=>Array.isArray(g)&&g[0]==="LENGTHUNIT"),t);break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&g[0]==="PARAMETER").map(g=>this.convert(g));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(g=>Array.isArray(g)&&(g[0]==="LENGTHUNIT"||g[0]==="ANGLEUNIT"||g[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";const l=e.find(g=>Array.isArray(g)&&g[0]==="SOURCECRS");if(l){const g=l.find(p=>Array.isArray(p));t.source_crs=g?this.convert(g):null}const u=e.find(g=>Array.isArray(g)&&g[0]==="TARGETCRS");if(u){const g=u.find(p=>Array.isArray(p));t.target_crs=g?this.convert(g):null}const h=e.find(g=>Array.isArray(g)&&g[0]==="ABRIDGEDTRANSFORMATION");h?t.transformation=this.convert(h):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(g=>Array.isArray(g)&&g[0]==="METHOD")?this.convert(e.find(g=>Array.isArray(g)&&g[0]==="METHOD")):null,t.parameters=e.filter(g=>Array.isArray(g)&&(g[0]==="PARAMETER"||g[0]==="PARAMETERFILE")).map(g=>{if(g[0]==="PARAMETER")return this.convert(g);if(g[0]==="PARAMETERFILE")return{name:g[1],value:g[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){const g=t.parameters[6];g.name==="Scale difference"&&(g.value=Math.round((g.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const f=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(g=>{g.unit||(g.unit=f)}),f.conversion_factor&&f.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:f});break;default:t.keyword=e[0];break}return t}}class loe extends ij{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}}class coe extends ij{static convert(e,t={}){super.convert(e,t);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),a=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),o=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},s&&(t.usage.scope=s[1]),a&&(t.usage.area=a[1]),o&&(t.usage.bbox=o.slice(1))}return t}}function uoe(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function hoe(n){return(uoe(n)==="2019"?coe:loe).convert(n)}function doe(n){const e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var vp=1,sj=2,aj=3,Kx=4,oj=5,db=-1,foe=/\s/,goe=/[A-Za-z]/,moe=/[A-Za-z84_]/,IE=/[,\]]/,lj=/[\d\.E\-\+]/;function Ul(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=vp}Ul.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==Kx)for(;foe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case vp:return this.neutral(n);case sj:return this.keyword(n);case Kx:return this.quoted(n);case oj:return this.afterquote(n);case aj:return this.number(n);case db:return}};Ul.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=Kx;return}if(IE.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};Ul.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=vp;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=vp,this.currentObject=this.stack.pop(),this.currentObject||(this.state=db);return}};Ul.prototype.number=function(n){if(lj.test(n)){this.word+=n;return}if(IE.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};Ul.prototype.quoted=function(n){if(n==='"'){this.state=oj;return}this.word+=n};Ul.prototype.keyword=function(n){if(moe.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=vp;return}if(IE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};Ul.prototype.neutral=function(n){if(goe.test(n)){this.word=n,this.state=sj;return}if(n==='"'){this.word="",this.state=Kx;return}if(lj.test(n)){this.word=n,this.state=aj;return}if(IE.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};Ul.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===db)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function poe(n){var e=new Ul(n);return e.output()}function vS(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(s,a){return bf(a,s),s},r);e&&(n[e]=i)}function bf(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},bf(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&bf(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&bf(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],vS(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],vS(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return bf(n,e[t]);return vS(e,t,n)}}var _oe=.017453292519943295;function ja(n){return n*_oe}function cj(n){const e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=ja(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=ja(n.lat0>0?90:-90),delete n.lat1)}function oL(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function lL(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function cL(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=lL(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-lL(n.ellipsoid.semi_minor_axis))))}function Yx(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(Yx(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{const r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,cL(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,cL(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=oL(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=oL(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),a=i.value;i.unit&&i.unit.conversion_factor?e[s]=a*i.unit.conversion_factor:i.unit==="degree"?e[s]=a*Math.PI/180:e[s]=a});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":Yx(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),cj(e),e)}var yoe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function xoe(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function uj(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];yoe.indexOf(i)!==-1&&voe(n[i]),typeof n[i]=="object"&&uj(n[i])}}function voe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var s=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var a=n.GEOGCS;n.type==="GEOGCS"&&(a=n),a&&(a.DATUM?n.datumCode=a.DATUM.name.toLowerCase():n.datumCode=a.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(n.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=a.DATUM.SPHEROID.a,n.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(n.datum_params=a.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=ja(n.rectified_grid_angle));function o(h){var f=n.to_meter||1;return h*f}var l=function(h){return xoe(n,h)},u=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",ja],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",ja],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",ja],["lat0","latitude_of_origin",ja],["lat0","standard_parallel_1",ja],["lat1","standard_parallel_1",ja],["lat2","standard_parallel_2",ja],["azimuth","Azimuth"],["alpha","azimuth",ja],["srsCode","name"]];u.forEach(l),cj(n)}function Xx(n){if(typeof n=="object")return Yx(n);const e=doe(n);var t=poe(n);if(e==="WKT2"){const s=hoe(t);return Yx(s)}var r=t[0],i={};return bf(t,i),uj(i),i[r]}function mi(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?mi[n]=gI(arguments[1]):mi[n]=Xx(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?mi[n]=Xx(arguments[1]):(mi[n]=t,t||delete mi[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?mi.apply(e,r):mi(r)});if(typeof n=="string"){if(n in mi)return mi[n]}else"EPSG"in n?mi["EPSG:"+n.EPSG]=n:"ESRI"in n?mi["ESRI:"+n.ESRI]=n:"IAU2000"in n?mi["IAU2000:"+n.IAU2000]=n:console.log(n);return}}toe(mi);function Eoe(n){return typeof n=="string"}function woe(n){return n in mi}function Soe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var Toe=["3857","900913","3785","102113"];function Ioe(n){var e=uu(n,"authority");if(e){var t=uu(e,"epsg");return t&&Toe.indexOf(t)>-1}}function Aoe(n){var e=uu(n,"extension");if(e)return uu(e,"proj4")}function Roe(n){return n[0]==="+"}function boe(n){if(Eoe(n)){if(woe(n))return mi[n];if(Soe(n)){var e=Xx(n);if(Ioe(e))return mi["EPSG:3857"];var t=Aoe(e);return t?gI(t):e}if(Roe(n))return gI(n)}else return"projName"in n?n:Xx(n)}function uL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function zo(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function p1(n){return n<0?-1:1}function ct(n,e){return e||Math.abs(n)<=Tr?n:n-p1(n)*xp}function Xa(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ue-e))/r}function Ep(n,e){for(var t=.5*n,r,i,s=Ue-2*Math.atan(e),a=0;a<=15;a++)if(r=n*Math.sin(s),i=Ue-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Coe(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=zo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Poe(n){var e=n.x,t=n.y;if(t*Es>90&&t*Es<-90&&e*Es>180&&e*Es<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ue)<=it)return null;if(this.sphere)r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Rn+.5*t));else{var s=Math.sin(t),a=Xa(this.e,t,s);r=this.x0+this.a*this.k0*ct(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(a)}return n.x=r,n.y=i,n}function koe(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ue-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(i=Ep(this.e,s),i===-9999)return null}return r=ct(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var Moe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Noe={init:Coe,forward:Poe,inverse:koe,names:Moe};function Loe(){}function hL(n){return n}var hj=["longlat","identity"];const Ooe={init:Loe,forward:hL,inverse:hL,names:hj};var Doe=[Noe,Ooe],rh={},Cf=[];function dj(n,e){var t=Cf.length;return n.names?(Cf[t]=n,n.names.forEach(function(r){rh[r.toLowerCase()]=t}),this):(console.log(e),!0)}function fj(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Foe(n){if(!n)return!1;var e=n.toLowerCase();if(typeof rh[e]<"u"&&Cf[rh[e]]||(e=fj(e),e in rh&&Cf[rh[e]]))return Cf[rh[e]]}function joe(){Doe.forEach(dj)}const Voe={start:joe,add:dj,get:Foe};var gj={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Goe=gj.WGS84;function Boe(n,e,t,r){var i=n*n,s=e*e,a=(i-s)/i,o=0;r?(n*=1-a*(ioe+a*(soe+a*aoe)),i=n*n,a=0):o=Math.sqrt(a);var l=(i-s)/s;return{es:a,e:o,ep2:l}}function Uoe(n,e,t,r,i){if(!n){var s=uu(gj,r);s||(s=Goe),n=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<it)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var Vy={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var zoe in Vy){var ES=Vy[zoe];ES.datumName&&(Vy[ES.datumName]=ES)}function $oe(n,e,t,r,i,s,a){var o={};return n===void 0||n==="none"?o.datum_type=fI:o.datum_type=noe,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Wh),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Hh,o.datum_params[3]*=wm,o.datum_params[4]*=wm,o.datum_params[5]*=wm,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=Uf,o.grids=a),o.a=t,o.b=r,o.es=i,o.ep2=s,o}var fb={};function Woe(n,e,t){return e instanceof ArrayBuffer?Hoe(n,e,t):{ready:Koe(n,e)}}function Hoe(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=qoe(i),a=Zoe(i,s),o=Qoe(i,a,s,r),l={header:a,subgrids:o};return fb[n]=l,l}async function Koe(n,e){for(var t=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),a=await s.readRasters(),o=a,l=[s.getWidth(),s.getHeight()],u=s.getBoundingBox().map(dL),h=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(dL),f=u[0]+(l[0]-1)*h[0],g=u[3]-(l[1]-1)*h[1],p=o[0],E=o[1],x=[];for(let R=l[1]-1;R>=0;R--)for(let k=l[0]-1;k>=0;k--){var w=R*l[0]+k;x.push([-Gc(E[w]),Gc(p[w])])}t.push({del:h,lim:l,ll:[-f,g],cvs:x})}var T={header:{nSubgrids:r},subgrids:t};return fb[n]=T,T}function Yoe(n){if(n===void 0)return null;var e=n.split(",");return e.map(Xoe)}function Xoe(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:fb[n]||null,isNull:!1}}function dL(n){return n*Math.PI/180}function Gc(n){return n/3600*Math.PI/180}function qoe(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Zoe(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:mI(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function mI(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Qoe(n,e,t,r){for(var i=176,s=[],a=0;a<e.nSubgrids;a++){var o=ele(n,i,t),l=tle(n,i,o,t,r),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[Gc(o.lowerLongitude),Gc(o.lowerLatitude)],del:[Gc(o.longitudeInterval),Gc(o.latitudeInterval)],lim:[u,h],count:o.gridNodeCount,cvs:Joe(l)});var f=16;r===!1&&(f=8),i+=176+o.gridNodeCount*f}return s}function Joe(n){return n.map(function(e){return[Gc(e.longitudeShift),Gc(e.latitudeShift)]})}function ele(n,e,t){return{name:mI(n,e+8,e+16).trim(),parent:mI(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function tle(n,e,t,r,i){var s=e+176,a=16;i===!1&&(a=8);for(var o=[],l=0;l<t.gridNodeCount;l++){var u={latitudeShift:n.getFloat32(s+l*a,r),longitudeShift:n.getFloat32(s+l*a+4,r)};i!==!1&&(u.latitudeAccuracy=n.getFloat32(s+l*a+8,r),u.longitudeAccuracy=n.getFloat32(s+l*a+12,r)),o.push(u)}return o}function wa(n,e){if(!(this instanceof wa))return new wa(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(u){if(u)throw u};var t=boe(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=wa.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=uu(Vy,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=Uoe(t.a,t.b,t.rf,t.ellps,t.sphere),a=Boe(s.a,s.b,s.rf,t.R_A),o=Yoe(t.nadgrids),l=t.datum||$oe(t.datumCode,t.datum_params,s.a,s.b,a.es,a.ep2,o);uL(this,t),uL(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}wa.projections=Voe;wa.projections.start();function nle(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===Wh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Hh?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function mj(n,e,t){var r=n.x,i=n.y,s=n.z?n.z:0,a,o,l,u;if(i<-Ue&&i>-1.001*Ue)i=-Ue;else if(i>Ue&&i<1.001*Ue)i=Ue;else{if(i<-Ue)return{x:-1/0,y:-1/0,z:n.z};if(i>Ue)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),o=Math.sin(i),u=Math.cos(i),l=o*o,a=t/Math.sqrt(1-e*l),{x:(a+s)*u*Math.cos(r),y:(a+s)*u*Math.sin(r),z:(a*(1-e)+s)*o}}function pj(n,e,t,r){var i=1e-12,s=i*i,a=30,o,l,u,h,f,g,p,E,x,w,T,R,k,N=n.x,j=n.y,B=n.z?n.z:0,P,C,M;if(o=Math.sqrt(N*N+j*j),l=Math.sqrt(N*N+j*j+B*B),o/t<i){if(P=0,l/t<i)return C=Ue,M=-r,{x:n.x,y:n.y,z:n.z}}else P=Math.atan2(j,N);u=B/l,h=o/l,f=1/Math.sqrt(1-e*(2-e)*h*h),E=h*(1-e)*f,x=u*f,k=0;do k++,p=t/Math.sqrt(1-e*x*x),M=o*E+B*x-p*(1-e*x*x),g=e*p/(p+M),f=1/Math.sqrt(1-g*(2-g)*h*h),w=h*(1-g)*f,T=u*f,R=T*E-w*x,E=w,x=T;while(R*R>s&&k<a);return C=Math.atan(T/Math.abs(w)),{x:P,y:C,z:M}}function rle(n,e,t){if(e===Wh)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Hh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6];return{x:u*(n.x-l*n.y+o*n.z)+r,y:u*(l*n.x+n.y-a*n.z)+i,z:u*(-o*n.x+a*n.y+n.z)+s}}}function ile(n,e,t){if(e===Wh)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Hh){var r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],h=(n.x-r)/u,f=(n.y-i)/u,g=(n.z-s)/u;return{x:h+l*f-o*g,y:-l*h+f+a*g,z:o*h-a*f+g}}}function ry(n){return n===Wh||n===Hh}function sle(n,e,t){if(nle(n,e)||n.datum_type===fI||e.datum_type===fI)return t;var r=n.a,i=n.es;if(n.datum_type===Uf){var s=fL(n,!1,t);if(s!==0)return;r=iL,i=sL}var a=e.a,o=e.b,l=e.es;if(e.datum_type===Uf&&(a=iL,o=roe,l=sL),i===l&&r===a&&!ry(n.datum_type)&&!ry(e.datum_type))return t;if(t=mj(t,i,r),ry(n.datum_type)&&(t=rle(t,n.datum_type,n.datum_params)),ry(e.datum_type)&&(t=ile(t,e.datum_type,e.datum_params)),t=pj(t,l,a,o),e.datum_type===Uf){var u=fL(e,!0,t);if(u!==0)return}return t}function fL(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var a=0;a<n.grids.length;a++){var o=n.grids[a];if(s.push(o.name),o.isNull){i=r;break}if(o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,u=0,h=l.length;u<h;u++){var f=l[u],g=(Math.abs(f.del[1])+Math.abs(f.del[0]))/1e4,p=f.ll[0]-g,E=f.ll[1]-g,x=f.ll[0]+(f.lim[0]-1)*f.del[0]+g,w=f.ll[1]+(f.lim[1]-1)*f.del[1]+g;if(!(E>r.y||p>r.x||w<r.y||x<r.x)&&(i=ale(r,e,f),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Es+" "+r.y*Es+" tried: '"+s+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function ale(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=ct(i.x-Math.PI)+Math.PI;var s=gL(i,t);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var a=9,o=1e-12,l,u;do{if(u=gL(s,t),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(u.x+s.x),y:i.y-(u.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=ct(s.x+t.ll[0]),r.y=s.y+t.ll[1]}else isNaN(s.x)||(r.x=n.x+s.x,r.y=n.y+s.y);return r}function gL(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},s={x:Number.NaN,y:Number.NaN},a;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;a=r.y*e.lim[0]+r.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var u={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var h={x:e.cvs[a][0],y:e.cvs[a][1]},f=i.x*i.y,g=i.x*(1-i.y),p=(1-i.x)*(1-i.y),E=(1-i.x)*i.y;return s.x=p*o.x+g*l.x+E*h.x+f*u.x,s.y=p*o.y+g*l.y+E*h.y+f*u.y,s}function mL(n,e,t){var r=t.x,i=t.y,s=t.z||0,a,o,l,u={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(a=r,"ew".indexOf(n.axis[l])!==-1?o="x":o="y"):l===1?(a=i,"ns".indexOf(n.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),n.axis[l]){case"e":u[o]=a;break;case"w":u[o]=-a;break;case"n":u[o]=a;break;case"s":u[o]=-a;break;case"u":t[o]!==void 0&&(u.z=a);break;case"d":t[o]!==void 0&&(u.z=-a);break;default:return null}return u}function _j(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function ole(n){pL(n.x),pL(n.y)}function pL(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function lle(n,e){return(n.datum.datum_type===Wh||n.datum.datum_type===Hh||n.datum.datum_type===Uf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Wh||e.datum.datum_type===Hh||e.datum.datum_type===Uf)&&n.datumCode!=="WGS84"}function qx(n,e,t,r){var i;Array.isArray(t)?t=_j(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(ole(t),n.datum&&e.datum&&lle(n,e)&&(i=new wa("WGS84"),t=qx(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=mL(n,!1,t)),n.projName==="longlat")t={x:t.x*gr,y:t.y*gr,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=sle(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Es,y:t.y*Es,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?mL(e,!0,t):(t&&!s&&delete t.z,t)}var _L=wa("WGS84");function wS(n,e,t,r){var i,s,a;return Array.isArray(t)?(i=qx(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(s=qx(n,e,t,r),a=Object.keys(t),a.length===2||a.forEach(function(o){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=t[o]}),s)}function iy(n){return n instanceof wa?n:typeof n=="object"&&"oProj"in n?n.oProj:wa(n)}function cle(n,e,t){var r,i,s=!1,a;return typeof e>"u"?(i=iy(n),r=_L,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=iy(n),r=_L,s=!0),r||(r=iy(n)),i||(i=iy(e)),t?wS(r,i,t):(a={forward:function(o,l){return wS(r,i,o,l)},inverse:function(o,l){return wS(i,r,o,l)}},s&&(a.oProj=i),a)}var yL=6,yj="AJSAJS",xj="AFAFAF",Pf=65,hs=73,da=79,nm=86,rm=90;const ule={forward:vj,inverse:hle,toPoint:Ej};function vj(n,e){return e=e||5,gle(dle({lat:n[1],lon:n[0]}),e)}function hle(n){var e=gb(Sj(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Ej(n){var e=gb(Sj(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function SS(n){return n*(Math.PI/180)}function xL(n){return 180*(n/Math.PI)}function dle(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,s=.9996,a,o,l,u,h,f,g,p=SS(e),E=SS(t),x,w;w=Math.floor((t+180)/6)+1,t===180&&(w=60),e>=56&&e<64&&t>=3&&t<12&&(w=32),e>=72&&e<84&&(t>=0&&t<9?w=31:t>=9&&t<21?w=33:t>=21&&t<33?w=35:t>=33&&t<42&&(w=37)),a=(w-1)*6-180+3,x=SS(a),o=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),u=Math.tan(p)*Math.tan(p),h=o*Math.cos(p)*Math.cos(p),f=Math.cos(p)*(E-x),g=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var T=s*l*(f+(1-u+h)*f*f*f/6+(5-18*u+u*u+72*h-58*o)*f*f*f*f*f/120)+5e5,R=s*(g+l*Math.tan(p)*(f*f/2+(5-u+9*h+4*h*h)*f*f*f*f/24+(61-58*u+u*u+600*h-330*o)*f*f*f*f*f*f/720));return e<0&&(R+=1e7),{northing:Math.round(R),easting:Math.round(T),zoneNumber:w,zoneLetter:fle(e)}}function gb(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var s=.9996,a=6378137,o=.00669438,l,u=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),h,f,g,p,E,x,w,T,R,k=t-5e5,N=e;r<"N"&&(N-=1e7),w=(i-1)*6-180+3,l=o/(1-o),x=N/s,T=x/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),R=T+(3*u/2-27*u*u*u/32)*Math.sin(2*T)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*T)+151*u*u*u/96*Math.sin(6*T),h=a/Math.sqrt(1-o*Math.sin(R)*Math.sin(R)),f=Math.tan(R)*Math.tan(R),g=l*Math.cos(R)*Math.cos(R),p=a*(1-o)/Math.pow(1-o*Math.sin(R)*Math.sin(R),1.5),E=k/(h*s);var j=R-h*Math.tan(R)/p*(E*E/2-(5+3*f+10*g-4*g*g-9*l)*E*E*E*E/24+(61+90*f+298*g+45*f*f-252*l-3*g*g)*E*E*E*E*E*E/720);j=xL(j);var B=(E-(1+2*f+g)*E*E*E/6+(5-2*g+28*f-3*g*g+8*l+24*f*f)*E*E*E*E*E/120)/Math.cos(R);B=w+xL(B);var P;if(n.accuracy){var C=gb({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});P={top:C.lat,right:C.lon,bottom:j,left:B}}else P={lat:j,lon:B};return P}function fle(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function gle(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+mle(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function mle(n,e,t){var r=wj(t),i=Math.floor(n/1e5),s=Math.floor(e/1e5)%20;return ple(i,s,r)}function wj(n){var e=n%yL;return e===0&&(e=yL),e}function ple(n,e,t){var r=t-1,i=yj.charCodeAt(r),s=xj.charCodeAt(r),a=i+n-1,o=s+e,l=!1;a>rm&&(a=a-rm+Pf-1,l=!0),(a===hs||i<hs&&a>hs||(a>hs||i<hs)&&l)&&a++,(a===da||i<da&&a>da||(a>da||i<da)&&l)&&(a++,a===hs&&a++),a>rm&&(a=a-rm+Pf-1),o>nm?(o=o-nm+Pf-1,l=!0):l=!1,(o===hs||s<hs&&o>hs||(o>hs||s<hs)&&l)&&o++,(o===da||s<da&&o>da||(o>da||s<da)&&l)&&(o++,o===hs&&o++),o>nm&&(o=o-nm+Pf-1);var u=String.fromCharCode(a)+String.fromCharCode(o);return u}function Sj(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,s=0;!/[A-Z]/.test(i=n.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,s++}var a=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+n;var o=n.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+n;t=n.substring(s,s+=2);for(var l=wj(a),u=_le(t.charAt(0),l),h=yle(t.charAt(1),l);h<xle(o);)h+=2e6;var f=e-s;if(f%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var g=f/2,p=0,E=0,x,w,T,R,k;return g>0&&(x=1e5/Math.pow(10,g),w=n.substring(s,s+g),p=parseFloat(w)*x,T=n.substring(s+g),E=parseFloat(T)*x),R=p+u,k=E+h,{easting:R,northing:k,zoneLetter:o,zoneNumber:a,accuracy:x}}function _le(n,e){for(var t=yj.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===hs&&t++,t===da&&t++,t>rm){if(i)throw"Bad character: "+n;t=Pf,i=!0}r+=1e5}return r}function yle(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=xj.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===hs&&t++,t===da&&t++,t>nm){if(i)throw"Bad character: "+n;t=Pf,i=!0}r+=1e5}return r}function xle(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function v0(n,e,t){if(!(this instanceof v0))return new v0(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}v0.fromMGRS=function(n){return new v0(Ej(n))};v0.prototype.toMGRS=function(n){return vj([this.x,this.y],n)};var vle=1,Ele=.25,vL=.046875,EL=.01953125,wL=.01068115234375,wle=.75,Sle=.46875,Tle=.013020833333333334,Ile=.007120768229166667,Ale=.3645833333333333,Rle=.005696614583333333,ble=.3076171875;function mb(n){var e=[];e[0]=vle-n*(Ele+n*(vL+n*(EL+n*wL))),e[1]=n*(wle-n*(vL+n*(EL+n*wL)));var t=n*n;return e[2]=t*(Sle-n*(Tle+n*Ile)),t*=n,e[3]=t*(Ale-n*Rle),e[4]=t*n*ble,e}function F0(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var Cle=20;function pb(n,e,t){for(var r=1/(1-e),i=n,s=Cle;s;--s){var a=Math.sin(i),o=1-e*a*a;if(o=(F0(i,a,Math.cos(i),t)-n)*(o*Math.sqrt(o))*r,i-=o,Math.abs(o)<it)return i}return i}function Ple(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=mb(this.es),this.ml0=F0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function kle(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s,a,o=Math.sin(t),l=Math.cos(t);if(this.es){var h=l*r,f=Math.pow(h,2),g=this.ep2*Math.pow(l,2),p=Math.pow(g,2),E=Math.abs(l)>it?Math.tan(t):0,x=Math.pow(E,2),w=Math.pow(x,2);i=1-this.es*Math.pow(o,2),h=h/Math.sqrt(i);var T=F0(t,o,l,this.en);s=this.a*(this.k0*h*(1+f/6*(1-x+g+f/20*(5-18*x+w+14*g-58*x*g+f/42*(61+179*w-w*x-479*x)))))+this.x0,a=this.a*(this.k0*(T-this.ml0+o*r*h/2*(1+f/12*(5-x+9*g+4*p+f/30*(61+w-58*x+270*g-330*x*g+f/56*(1385+543*w-w*x-3111*x))))))+this.y0}else{var u=l*Math.sin(r);if(Math.abs(Math.abs(u)-1)<it)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(a),u>=1){if(u-1>it)return 93;a=0}else a=Math.acos(a);t<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return n.x=s,n.y=a,n}function Mle(n){var e,t,r,i,s=(n.x-this.x0)*(1/this.a),a=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,t=pb(e,this.es,this.en),Math.abs(t)<Ue){var f=Math.sin(t),g=Math.cos(t),p=Math.abs(g)>it?Math.tan(t):0,E=this.ep2*Math.pow(g,2),x=Math.pow(E,2),w=Math.pow(p,2),T=Math.pow(w,2);e=1-this.es*Math.pow(f,2);var R=s*Math.sqrt(e)/this.k0,k=Math.pow(R,2);e=e*p,r=t-e*k/(1-this.es)*.5*(1-k/12*(5+3*w-9*E*w+E-4*x-k/30*(61+90*w-252*E*w+45*T+46*E-k/56*(1385+3633*w+4095*T+1574*T*w)))),i=ct(this.long0+R*(1-k/6*(1+2*w+E-k/20*(5+28*w+24*T+8*E*w+6*E-k/42*(61+662*w+1320*T+720*T*w))))/g,this.over)}else r=Ue*p1(a),i=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),u=this.lat0+a/this.k0,h=Math.cos(u);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),r=Math.asin(e),a<0&&(r=-r),l===0&&h===0?i=0:i=ct(Math.atan2(l,h)+this.long0,this.over)}return n.x=i,n.y=r,n}var Nle=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Gy={init:Ple,forward:kle,inverse:Mle,names:Nle};function Tj(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function _s(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function Lle(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function Ole(n){var e=Math.abs(n);return e=Lle(e*(1+e/(_s(1,e)+1))),n<0?-e:e}function _b(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return e+a*Math.sin(2*e)}function Dle(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],s=0,a;--r>=0;)a=-s+t*i+n[r],s=i,i=a;return Math.sin(e)*a}function Fle(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Ij(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),s=Tj(t),a=Fle(t),o=2*i*a,l=-2*r*s,u=n.length-1,h=n[u],f=0,g=0,p=0,E,x;--u>=0;)E=g,x=f,g=h,f=p,h=-E+o*g-l*f+n[u],p=-x+l*g+o*f;return o=r*a,l=i*s,[o*h-l*p,o*p+l*h]}function jle(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Gy.init.apply(this),this.forward=Gy.forward,this.inverse=Gy.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=_b(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Dle(this.gtu,2*r))}function Vle(n){var e=ct(n.x-this.long0,this.over),t=n.y;t=_b(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),s=Math.sin(e),a=Math.cos(e);t=Math.atan2(r,a*i),e=Math.atan2(s*i,_s(r,i*a)),e=Ole(Math.tan(e));var o=Ij(this.gtu,2*t,2*e);t=t+o[0],e=e+o[1];var l,u;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,u=1/0),n.x=l,n.y=u,n}function Gle(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=Ij(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(Tj(e));var a=Math.sin(t),o=Math.cos(t),l=Math.sin(e),u=Math.cos(e);t=Math.atan2(a*u,_s(l,u*o)),e=Math.atan2(l,u*o),r=ct(e+this.long0,this.over),i=_b(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Ble=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const By={init:jle,forward:Vle,inverse:Gle,names:Ble};function Ule(n,e){if(n===void 0){if(n=Math.floor((ct(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var zle="etmerc";function $le(){var n=Ule(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*gr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,By.init.apply(this),this.forward=By.forward,this.inverse=By.inverse}var Wle=["Universal Transverse Mercator System","utm"];const Hle={init:$le,names:Wle,dependsOn:zle};function yb(n,e){return Math.pow((1-n)/(1+n),e)}var Kle=20;function Yle(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Rn)/(Math.pow(Math.tan(.5*this.lat0+Rn),this.C)*yb(this.e*n,this.ratexp))}function Xle(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Rn),this.C)*yb(this.e*Math.sin(t),this.ratexp))-Ue,n.x=this.C*e,n}function qle(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+Rn)/this.K,1/this.C),s=Kle;s>0&&(r=2*Math.atan(i*yb(this.e*Math.sin(n.y),-.5*this.e))-Ue,!(Math.abs(r-n.y)<e));--s)n.y=r;return s?(n.x=t,n.y=r,n):null}const xb={init:Yle,forward:Xle,inverse:qle};function Zle(){xb.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Qle(n){var e,t,r,i;return n.x=ct(n.x-this.long0,this.over),xb.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Jle(n){var e,t,r,i,s;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,s=_s(n.x,n.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),t=Math.cos(a),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/s),r=Math.atan2(n.x*e,s*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,xb.inverse.apply(this,[n]),n.x=ct(n.x+this.long0,this.over),n}var ece=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const tce={init:Zle,forward:Qle,inverse:Jle,names:ece};function vb(n,e,t){return e*=t,Math.tan(.5*(Ue+n))*Math.pow((1-e)/(1+e),.5*t)}function nce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&(this.k0=.5*(1+p1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=it&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=it&&Math.abs(Math.cos(this.lat_ts))>it&&(this.k0=.5*this.cons*zo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Xa(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=zo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(vb(this.lat0,this.sinlat0,this.e))-Ue,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function rce(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),s,a,o,l,u,h,f=ct(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=it&&Math.abs(t+this.lat0)<=it?(n.x=NaN,n.y=NaN,n):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(f)),n.x=this.a*s*i*Math.sin(f)+this.x0,n.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(f))+this.y0,n):(a=2*Math.atan(vb(t,r,this.e))-Ue,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=it?(u=Xa(this.e,t*this.con,this.con*r),h=2*this.a*this.k0*u/this.cons,n.x=this.x0+h*Math.sin(e-this.long0),n.y=this.y0-this.con*h*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<it?(s=2*this.a*this.k0/(1+l*Math.cos(f)),n.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(f))),n.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(f))+this.y0),n.x=s*l*Math.sin(f)+this.x0,n))}function ice(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,t=this.lat0,a<=it?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(o)*this.sinlat0+n.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<it?this.lat0>0?e=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=ct(this.long0+Math.atan2(n.x,n.y),this.over):e=ct(this.long0+Math.atan2(n.x*Math.sin(o),a*this.coslat0*Math.cos(o)-n.y*this.sinlat0*Math.sin(o)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=it){if(a<=it)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=a*this.cons/(2*this.a*this.k0),t=this.con*Ep(this.e,r),e=this.con*ct(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=it?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/a),e=ct(this.long0+Math.atan2(n.x*Math.sin(i),a*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*Ep(this.e,Math.tan(.5*(Ue+s)));return n.x=e,n.y=t,n}var sce=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const ace={init:nce,forward:rce,inverse:ice,names:sce,ssfn_:vb};function oce(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),a=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*u}function lce(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(n.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return n.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,n.x=this.R*a+this.x0,n}function cce(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),o=this.lambda0+a/this.alpha,l=0,u=s,h=-1e3,f=0;Math.abs(u-h)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=o,n.y=u,n}var uce=["somerc"];const hce={init:oce,forward:lce,inverse:cce,names:uce};var yf=1e-7;function dce(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(fj(t))!==-1}function fce(){var n,e,t,r,i,s,a,o,l,u,h=0,f,g=0,p=0,E=0,x=0,w=0,T=0;this.no_off=dce(this),this.no_rot="no_rot"in this;var R=!1;"alpha"in this&&(R=!0);var k=!1;if("rectified_grid_angle"in this&&(k=!0),R&&(T=this.alpha),k&&(h=this.rectified_grid_angle),R||k)g=this.longc;else if(p=this.long1,x=this.lat1,E=this.long2,w=this.lat2,Math.abs(x-w)<=yf||(n=Math.abs(x))<=yf||Math.abs(n-Ue)<=yf||Math.abs(Math.abs(this.lat0)-Ue)<=yf||Math.abs(Math.abs(w)-Ue)<=yf)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>it?(o=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*o*o,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Xa(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),R||k?(R?(f=Math.asin(Math.sin(T)/r),k||(h=T)):(f=h,T=Math.asin(r*Math.sin(f))),this.lam0=g-Math.asin(.5*(i-1/i)*Math.tan(f))/this.B):(s=Math.pow(Xa(this.e,x,Math.sin(x)),this.B),a=Math.pow(Xa(this.e,w,Math.sin(w)),this.B),i=this.E/s,l=(a-s)/(a+s),u=this.E*this.E,u=(u-a*s)/(u+a*s),n=p-E,n<-Math.PI?E-=xp:n>Math.PI&&(E+=xp),this.lam0=ct(.5*(p+E)-Math.atan(u*Math.tan(.5*this.B*(p-E))/l)/this.B,this.over),f=Math.atan(2*Math.sin(this.B*ct(p-this.lam0,this.over))/(i-1/i)),h=T=Math.asin(r*Math.sin(f))),this.singam=Math.sin(f),this.cosgam=Math.cos(f),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*f,this.v_pole_n=this.ArB*Math.log(Math.tan(Rn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Rn+i))}function gce(n){var e={},t,r,i,s,a,o,l,u;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ue)>it){if(a=this.E/Math.pow(Xa(this.e,n.y,Math.sin(n.y)),this.B),o=1/a,t=.5*(a-o),r=.5*(a+o),s=Math.sin(this.B*n.x),i=(t*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<it)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*n.x),Math.abs(o)<yf?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,o)}else u=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=u):(l-=this.u_0,e.x=u*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-u*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function mce(n){var e,t,r,i,s,a,o,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),s=.5*(r+1/r),a=Math.sin(this.BrA*e),o=(a*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(o)-1)<it)l.x=0,l.y=o<0?-Ue:Ue;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=Ep(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var pce=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const _ce={init:fce,forward:gce,inverse:mce,names:pce};function yce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<it)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=zo(this.e,e,t),i=Xa(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=zo(this.e,s,a),l=Xa(this.e,this.lat2,s),u=Math.abs(Math.abs(this.lat0)-Ue)<it?0:Xa(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>it?this.ns=Math.log(r/o)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xce(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=it&&(t=p1(t)*(Ue-2*it));var r=Math.abs(Math.abs(t)-Ue),i,s;if(r>it)i=Xa(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;s=0}var a=this.ns*ct(e-this.long0,this.over);return n.x=this.k0*(s*Math.sin(a))+this.x0,n.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,n}function vce(n){var e,t,r,i,s,a=(n.x-this.x0)/this.k0,o=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),t=1):(e=-Math.sqrt(a*a+o*o),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*a,t*o)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=Ep(this.e,r),i===-9999)return null}else i=-Ue;return s=ct(l/this.ns+this.long0,this.over),n.x=s,n.y=i,n}var Ece=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const wce={init:yce,forward:xce,inverse:vce,names:Ece};function Sce(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Tce(n){var e,t,r,i,s,a,o,l=n.x,u=n.y,h=ct(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),s=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=o*Math.cos(a)/1,n.x=o*Math.sin(a)/1,this.czech||(n.y*=-1,n.x*=-1),n}function Ice(n){var e,t,r,i,s,a,o,l,u=n.x;n.x=n.y,n.y=u,this.czech||(n.y*=-1,n.x*=-1),a=Math.sqrt(n.x*n.x+n.y*n.y),s=Math.atan2(n.y,n.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,o=e,l=0;var h=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-n.y)<1e-10&&(l=1),o=n.y,h+=1;while(l===0&&h<15);return h>=15?null:n}var Ace=["Krovak","krovak"];const Rce={init:Sce,forward:Tce,inverse:Ice,names:Ace};function es(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function _1(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function y1(n){return .375*n*(1+.25*n*(1+.46875*n))}function x1(n){return .05859375*n*n*(1+.75*n)}function v1(n){return n*n*n*(35/3072)}function Eb(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function Eu(n){return Math.abs(n)<Ue?n:n-p1(n)*Math.PI}function Zx(n,e,t,r,i){var s,a;s=n/e;for(var o=0;o<15;o++)if(a=(n-(e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function bce(){this.sphere||(this.e0=_1(this.es),this.e1=y1(this.es),this.e2=x1(this.es),this.e3=v1(this.es),this.ml0=this.a*es(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Cce(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),a=Math.cos(i),o=Eb(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),h=u*u,f=this.es*a*a/(1-this.es),g=this.a*es(this.e0,this.e1,this.e2,this.e3,i);e=o*u*(1-h*l*(1/6-(8-l+8*f)*h/120)),t=g-this.ml0+o*s/a*h*(.5+(5-l+6*f)*h/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function Pce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var s=t+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+t,o=Zx(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Ue)<=it)return n.x=this.long0,n.y=Ue,t<0&&(n.y*=-1),n;var l=Eb(this.a,this.e,Math.sin(o)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),f=e*this.a/l,g=f*f;r=o-l*Math.tan(o)/u*f*f*(.5-(1+3*h)*f*f/24),i=f*(1-g*(h/3+(1+3*h)*h*g/15))/Math.cos(o)}return n.x=ct(i+this.long0,this.over),n.y=Eu(r),n}var kce=["Cassini","Cassini_Soldner","cass"];const Mce={init:bce,forward:Cce,inverse:Pce,names:kce};function Zc(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var pI=1,_I=2,yI=3,Uy=4;function Nce(){var n=Math.abs(this.lat0);if(Math.abs(n-Ue)<it?this.mode=this.lat0<0?pI:_I:Math.abs(n)<it?this.mode=yI:this.mode=Uy,this.es>0){var e;switch(this.qp=Zc(this.e,1),this.mmf=.5/(1-this.es),this.apa=Uce(this.es),this.mode){case _I:this.dd=1;break;case pI:this.dd=1;break;case yI:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Uy:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Zc(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Uy&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Lce(n){var e,t,r,i,s,a,o,l,u,h,f=n.x,g=n.y;if(f=ct(f-this.long0,this.over),this.sphere){if(s=Math.sin(g),h=Math.cos(g),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+h*r:1+this.sinph0*s+this.cosph0*h*r,t<=it)return null;t=Math.sqrt(2/t),e=t*h*Math.sin(f),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(g+this.lat0)<it)return null;t=Rn-g*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(f),t*=r}}else{switch(o=0,l=0,u=0,r=Math.cos(f),i=Math.sin(f),s=Math.sin(g),a=Zc(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:u=1+this.sinb1*o+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=Ue+g,a=this.qp-a;break;case this.S_POLE:u=g-Ue,a=this.qp+a;break}if(Math.abs(u)<it)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?t=this.ymf*u*(this.cosb1*o-this.sinb1*l*r):t=(u=Math.sqrt(2/(1+l*r)))*o*this.ymf,e=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*i,t=r*(this.mode===this.S_POLE?u:-u)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function Oce(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,s,a,o,l,u;if(this.sphere){var h=0,f,g=0;if(f=Math.sqrt(e*e+t*t),i=f*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(f)<=it?0:Math.asin(t*g/f),e*=g,t=h*f;break;case this.OBLIQ:i=Math.abs(f)<=it?this.lat0:Math.asin(h*this.sinph0+t*g*this.cosph0/f),e*=g*this.cosph0,t=(h-Math.sin(i)*this.sinph0)*f;break;case this.N_POLE:t=-t,i=Ue-i;break;case this.S_POLE:i-=Ue;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<it)return n.x=this.long0,n.y=this.lat0,n;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(u=s*this.sinb1+t*a*this.cosb1/l,o=this.qp*u,t=l*this.cosb1*s-t*this.sinb1*a):(u=t*a/l,o=this.qp*u,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),o=e*e+t*t,!o)return n.x=this.long0,n.y=this.lat0,n;u=1-o/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(e,t),i=zce(Math.asin(u),this.apa)}return n.x=ct(this.long0+r,this.over),n.y=i,n}var Dce=.3333333333333333,Fce=.17222222222222222,jce=.10257936507936508,Vce=.06388888888888888,Gce=.0664021164021164,Bce=.016415012942191543;function Uce(n){var e,t=[];return t[0]=n*Dce,e=n*n,t[0]+=e*Fce,t[1]=e*Vce,e*=n,t[0]+=e*jce,t[1]+=e*Gce,t[2]=e*Bce,t}function zce(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var $ce=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Wce={init:Nce,forward:Lce,inverse:Oce,names:$ce,S_POLE:pI,N_POLE:_I,EQUIT:yI,OBLIQ:Uy};function hu(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function Hce(){Math.abs(this.lat1+this.lat2)<it||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=zo(this.e3,this.sin_po,this.cos_po),this.qs1=Zc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=zo(this.e3,this.sin_po,this.cos_po),this.qs2=Zc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Zc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>it?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Kce(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Zc(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*ct(e-this.long0,this.over),a=i*Math.sin(s)+this.x0,o=this.rh-i*Math.cos(s)+this.y0;return n.x=a,n.y=o,n}function Yce(n){var e,t,r,i,s,a;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,t)),s=ct(i/this.ns0+this.long0,this.over),n.x=s,n.y=a,n}function Xce(n,e){var t,r,i,s,a,o=hu(.5*e);if(n<it)return o;for(var l=n*n,u=1;u<=25;u++)if(t=Math.sin(o),r=Math.cos(o),i=n*t,s=1-i*i,a=.5*s*s/r*(e/(1-l)-t/s+.5/n*Math.log((1-i)/(1+i))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var qce=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Zce={init:Hce,forward:Kce,inverse:Yce,names:qce,phi1z:Xce};function Qce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Jce(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,a>0||Math.abs(a)<=it?(o=this.x0+this.a*s*t*Math.sin(r)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)/a):(o=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function eue(n){var e,t,r,i,s,a;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),a=hu(r*this.sin_p14+n.y*t*this.cos_p14/e),s=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),s=ct(this.long0+s,this.over)):(a=this.phic0,s=0),n.x=s,n.y=a,n}var tue=["gnom"];const nue={init:Qce,forward:Jce,inverse:eue,names:tue};function rue(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ue:Ue;for(var r=Math.asin(.5*e),i,s,a,o,l=0;l<30;l++)if(s=Math.sin(r),a=Math.cos(r),o=n*s,i=Math.pow(1-o*o,2)/(2*a)*(e/(1-n*n)-s/(1-o*o)+.5/n*Math.log((1-o)/(1+o))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function iue(){this.sphere||(this.k0=zo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function sue(n){var e=n.x,t=n.y,r,i,s=ct(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var a=Zc(this.e,Math.sin(t));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*a*.5/this.k0}return n.x=r,n.y=i,n}function aue(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=ct(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=rue(this.e,2*n.y*this.k0/this.a),e=ct(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var oue=["cea"];const lue={init:iue,forward:sue,inverse:aue,names:oue};function cue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function uue(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=Eu(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function hue(n){var e=n.x,t=n.y;return n.x=ct(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=Eu(this.lat0+(t-this.y0)/this.a),n}var due=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const fue={init:cue,forward:uue,inverse:hue,names:due};var SL=20;function gue(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_1(this.es),this.e1=y1(this.es),this.e2=x1(this.es),this.e3=v1(this.es),this.ml0=this.a*es(this.e0,this.e1,this.e2,this.e3,this.lat0)}function mue(n){var e=n.x,t=n.y,r,i,s,a=ct(e-this.long0,this.over);if(s=a*Math.sin(t),this.sphere)Math.abs(t)<=it?(r=this.a*a,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(t),i=this.a*(Eu(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=it)r=this.a*a,i=-1*this.ml0;else{var o=Eb(this.a,this.e,Math.sin(t))/Math.tan(t);r=o*Math.sin(s),i=this.a*es(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+o*(1-Math.cos(s))}return n.x=r+this.x0,n.y=i+this.y0,n}function pue(n){var e,t,r,i,s,a,o,l,u;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=it)e=ct(r/this.a+this.long0,this.over),t=0;else{a=this.lat0+i/this.a,o=r*r/this.a/this.a+a*a,l=a;var h;for(s=SL;s;--s)if(h=Math.tan(l),u=-1*(a*(l*h+1)-l-.5*(l*l+o)*h)/((l-a)/h-1),l+=u,Math.abs(u)<=it){t=l;break}e=ct(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=it)t=0,e=ct(this.long0+r/this.a,this.over);else{a=(this.ml0+i)/this.a,o=r*r/this.a/this.a+a*a,l=a;var f,g,p,E,x;for(s=SL;s;--s)if(x=this.e*Math.sin(l),f=Math.sqrt(1-x*x)*Math.tan(l),g=this.a*es(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),E=g/this.a,u=(a*(f*E+1)-E-.5*f*(E*E+o))/(this.es*Math.sin(2*l)*(E*E+o-2*a*E)/(4*f)+(a-E)*(f*p-2/Math.sin(2*l))-p),l-=u,Math.abs(u)<=it){t=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=ct(this.long0+Math.asin(r*f/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var _ue=["Polyconic","American_Polyconic","poly"];const yue={init:gue,forward:mue,inverse:pue,names:_ue};function xue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function vue(n){var e,t=n.x,r=n.y,i=r-this.lat0,s=t-this.long0,a=i/wm*1e-5,o=s,l=1,u=0;for(e=1;e<=10;e++)l=l*a,u=u+this.A[e]*l;var h=u,f=o,g=1,p=0,E,x,w=0,T=0;for(e=1;e<=6;e++)E=g*h-p*f,x=p*h+g*f,g=E,p=x,w=w+this.B_re[e]*g-this.B_im[e]*p,T=T+this.B_im[e]*g+this.B_re[e]*p;return n.x=T*this.a+this.x0,n.y=w*this.a+this.y0,n}function Eue(n){var e,t=n.x,r=n.y,i=t-this.x0,s=r-this.y0,a=s/this.a,o=i/this.a,l=1,u=0,h,f,g=0,p=0;for(e=1;e<=6;e++)h=l*a-u*o,f=u*a+l*o,l=h,u=f,g=g+this.C_re[e]*l-this.C_im[e]*u,p=p+this.C_im[e]*l+this.C_re[e]*u;for(var E=0;E<this.iterations;E++){var x=g,w=p,T,R,k=a,N=o;for(e=2;e<=6;e++)T=x*g-w*p,R=w*g+x*p,x=T,w=R,k=k+(e-1)*(this.B_re[e]*x-this.B_im[e]*w),N=N+(e-1)*(this.B_im[e]*x+this.B_re[e]*w);x=1,w=0;var j=this.B_re[1],B=this.B_im[1];for(e=2;e<=6;e++)T=x*g-w*p,R=w*g+x*p,x=T,w=R,j=j+e*(this.B_re[e]*x-this.B_im[e]*w),B=B+e*(this.B_im[e]*x+this.B_re[e]*w);var P=j*j+B*B;g=(k*j+N*B)/P,p=(N*j-k*B)/P}var C=g,M=p,F=1,O=0;for(e=1;e<=9;e++)F=F*C,O=O+this.D[e]*F;var W=this.lat0+O*wm*1e5,D=this.long0+M;return n.x=D,n.y=W,n}var wue=["New_Zealand_Map_Grid","nzmg"];const Sue={init:xue,forward:vue,inverse:Eue,names:wue};function Tue(){}function Iue(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=s,n}function Aue(n){n.x-=this.x0,n.y-=this.y0;var e=ct(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var Rue=["Miller_Cylindrical","mill"];const bue={init:Tue,forward:Iue,inverse:Aue,names:Rue};var Cue=20;function Pue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=mb(this.es)}function kue(n){var e,t,r=n.x,i=n.y;if(r=ct(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),a=Cue;a;--a){var o=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=o,Math.abs(o)<it)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);t=this.a*F0(i,l,u,this.en),e=this.a*r*u/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function Mue(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=hu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=hu(Math.sin(e)/this.n)),r=ct(r+this.long0,this.over),e=Eu(e)):(e=pb(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ue?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=ct(t,this.over)):i-it<Ue&&(r=this.long0)),n.x=r,n.y=e,n}var Nue=["Sinusoidal","sinu"];const Lue={init:Pue,forward:kue,inverse:Mue,names:Nue};function Oue(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Due(n){for(var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i=t,s=Math.PI*Math.sin(t);;){var a=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=a,Math.abs(a)<it)break}i/=2,Math.PI/2-Math.abs(t)<it&&(r=0);var o=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=o,n.y=l,n}function Fue(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=ct(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var jue=["Mollweide","moll"];const Vue={init:Oue,forward:Due,inverse:Fue,names:jue};function Gue(){Math.abs(this.lat1+this.lat2)<it||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_1(this.es),this.e1=y1(this.es),this.e2=x1(this.es),this.e3=v1(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=zo(this.e,this.sin_phi,this.cos_phi),this.ml1=es(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<it?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=zo(this.e,this.sin_phi,this.cos_phi),this.ml2=es(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=es(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Bue(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=es(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var s=this.ns*ct(e-this.long0,this.over),a=this.x0+r*Math.sin(s),o=this.y0+this.rh-r*Math.cos(s);return n.x=a,n.y=o,n}function Uue(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=ct(this.long0+s/this.ns,this.over),r=Eu(this.g-t/this.a),n.x=i,n.y=r,n;var a=this.g-t/this.a;return r=Zx(a,this.e0,this.e1,this.e2,this.e3),i=ct(this.long0+s/this.ns,this.over),n.x=i,n.y=r,n}var zue=["Equidistant_Conic","eqdc"];const $ue={init:Gue,forward:Bue,inverse:Uue,names:zue};function Wue(){this.R=this.a}function Hue(n){var e=n.x,t=n.y,r=ct(e-this.long0,this.over),i,s;Math.abs(t)<=it&&(i=this.x0+this.R*r,s=this.y0);var a=hu(2*Math.abs(t/Math.PI));(Math.abs(r)<=it||Math.abs(Math.abs(t)-Ue)<=it)&&(i=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/r-r/Math.PI),l=o*o,u=Math.sin(a),h=Math.cos(a),f=h/(u+h-1),g=f*f,p=f*(2/u-1),E=p*p,x=Math.PI*this.R*(o*(f-E)+Math.sqrt(l*(f-E)*(f-E)-(E+l)*(g-E)))/(E+l);r<0&&(x=-x),i=this.x0+x;var w=l+f;return x=Math.PI*this.R*(p*w-o*Math.sqrt((E+l)*(l+1)-w*w))/(E+l),t>=0?s=this.y0+x:s=this.y0-x,n.x=i,n.y=s,n}function Kue(n){var e,t,r,i,s,a,o,l,u,h,f,g,p;return n.x-=this.x0,n.y-=this.y0,f=Math.PI*this.R,r=n.x/f,i=n.y/f,s=r*r+i*i,a=-Math.abs(i)*(1+s),o=a-2*i*i+r*r,l=-2*a+1+2*i*i+s*s,p=i*i/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,u=(a-o*o/3/l)/l,h=2*Math.sqrt(-u/3),f=3*p/u/h,Math.abs(f)>1&&(f>=0?f=1:f=-1),g=Math.acos(f)/3,n.y>=0?t=(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI:t=-(-h*Math.cos(g+Math.PI/3)-o/3/l)*Math.PI,Math.abs(r)<it?e=this.long0:e=ct(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),n.x=e,n.y=t,n}var Yue=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const Xue={init:Wue,forward:Hue,inverse:Kue,names:Yue};function que(n,e,t,r,i,s){const a=r-e,o=Math.atan((1-s)*Math.tan(n)),l=Math.atan((1-s)*Math.tan(t)),u=Math.sin(o),h=Math.cos(o),f=Math.sin(l),g=Math.cos(l);let p=a,E,x=100,w,T,R,k,N,j,B,P,C,M,F,O,W,D;do{if(w=Math.sin(p),T=Math.cos(p),R=Math.sqrt(g*w*(g*w)+(h*f-u*g*T)*(h*f-u*g*T)),R===0)return{azi1:0,s12:0};k=u*f+h*g*T,N=Math.atan2(R,k),j=h*g*w/R,B=1-j*j,P=B!==0?k-2*u*f/B:0,C=s/16*B*(4+s*(4-3*B)),E=p,p=a+(1-C)*s*j*(N+C*R*(P+C*k*(-1+2*P*P)))}while(Math.abs(p-E)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:(M=B*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),F=1+M/16384*(4096+M*(-768+M*(320-175*M))),O=M/1024*(256+M*(-128+M*(74-47*M))),W=O*R*(P+O/4*(k*(-1+2*P*P)-O/6*P*(-3+4*R*R)*(-3+4*P*P))),D=i*(1-s)*F*(N-W),{azi1:Math.atan2(g*w,h*f-u*g*T),s12:D})}function Zue(n,e,t,r,i,s){const a=Math.atan((1-s)*Math.tan(n)),o=Math.sin(a),l=Math.cos(a),u=Math.sin(t),h=Math.cos(t),f=Math.atan2(o,l*h),g=l*u,p=1-g*g,E=p*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),x=1+E/16384*(4096+E*(-768+E*(320-175*E))),w=E/1024*(256+E*(-128+E*(74-47*E)));let T=r/(i*(1-s)*x),R,k=100,N,j,B,P;do N=Math.cos(2*f+T),j=Math.sin(T),B=Math.cos(T),P=w*j*(N+w/4*(B*(-1+2*N*N)-w/6*N*(-3+4*j*j)*(-3+4*N*N))),R=T,T=r/(i*(1-s)*x)+P;while(Math.abs(T-R)>1e-12&&--k>0);if(k===0)return{lat2:NaN,lon2:NaN};const C=o*j-l*B*h,M=Math.atan2(o*B+l*j*h,(1-s)*Math.sqrt(g*g+C*C)),F=Math.atan2(j*u,l*B-o*j*h),O=s/16*p*(4+s*(4-3*p)),W=F-(1-O)*s*g*(T+O*j*(N+O*B*(-1+2*N*N))),D=e+W;return{lat2:M,lon2:D}}function Que(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function Jue(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),s=ct(e-this.long0,this.over),a,o,l,u,h,f,g,p,E,x,w;return this.sphere?Math.abs(this.sin_p12-1)<=it?(n.x=this.x0+this.a*(Ue-t)*Math.sin(s),n.y=this.y0-this.a*(Ue-t)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(n.x=this.x0+this.a*(Ue+t)*Math.sin(s),n.y=this.y0+this.a*(Ue+t)*Math.cos(s),n):(E=this.sin_p12*r+this.cos_p12*i*Math.cos(s),g=Math.acos(E),p=g?g/Math.sin(g):1,n.x=this.x0+this.a*p*i*Math.sin(s),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),n):(a=_1(this.es),o=y1(this.es),l=x1(this.es),u=v1(this.es),Math.abs(this.sin_p12-1)<=it?(h=this.a*es(a,o,l,u,Ue),f=this.a*es(a,o,l,u,t),n.x=this.x0+(h-f)*Math.sin(s),n.y=this.y0-(h-f)*Math.cos(s),n):Math.abs(this.sin_p12+1)<=it?(h=this.a*es(a,o,l,u,Ue),f=this.a*es(a,o,l,u,t),n.x=this.x0+(h+f)*Math.sin(s),n.y=this.y0+(h+f)*Math.cos(s),n):Math.abs(e)<it&&Math.abs(t-this.lat0)<it?(n.x=n.y=0,n):(x=que(this.lat0,this.long0,t,e,this.a,this.f),w=x.azi1,n.x=x.s12*Math.sin(w),n.y=x.s12*Math.cos(w),n))}function ehe(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,s,a,o,l,u,h,f,g,p,E,x,w;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ue*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=it?a=this.lat0:(a=hu(i*this.sin_p12+n.y*r*this.cos_p12/e),o=Math.abs(this.lat0)-Ue,Math.abs(o)<=it?this.lat0>=0?s=ct(this.long0+Math.atan2(n.x,-n.y),this.over):s=ct(this.long0-Math.atan2(-n.x,n.y),this.over):s=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=s,n.y=a,n)):(l=_1(this.es),u=y1(this.es),h=x1(this.es),f=v1(this.es),Math.abs(this.sin_p12-1)<=it?(g=this.a*es(l,u,h,f,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),p=g-e,a=Zx(p/this.a,l,u,h,f),s=ct(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=s,n.y=a,n):Math.abs(this.sin_p12+1)<=it?(g=this.a*es(l,u,h,f,Ue),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-g,a=Zx(p/this.a,l,u,h,f),s=ct(this.long0+Math.atan2(n.x,n.y),this.over),n.x=s,n.y=a,n):(E=Math.atan2(n.x,n.y),x=Math.sqrt(n.x*n.x+n.y*n.y),w=Zue(this.lat0,this.long0,E,x,this.a,this.f),n.x=w.lon2,n.y=w.lat2,n))}var the=["Azimuthal_Equidistant","aeqd"];const nhe={init:Que,forward:Jue,inverse:ehe,names:the};function rhe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ihe(n){var e,t,r,i,s,a,o,l,u=n.x,h=n.y;return r=ct(u-this.long0,this.over),e=Math.sin(h),t=Math.cos(h),i=Math.cos(r),a=this.sin_p14*e+this.cos_p14*t*i,s=1,(a>0||Math.abs(a)<=it)&&(o=this.a*s*t*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*i)),n.x=o,n.y=l,n}function she(n){var e,t,r,i,s,a,o;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=hu(e/this.a),r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(e)<=it?(o=this.lat0,n.x=a,n.y=o,n):(o=hu(i*this.sin_p14+n.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-Ue,Math.abs(s)<=it?(this.lat0>=0?a=ct(this.long0+Math.atan2(n.x,-n.y),this.over):a=ct(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=a,n.y=o,n):(a=ct(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=a,n.y=o,n))}var ahe=["ortho"];const ohe={init:rhe,forward:ihe,inverse:she,names:ahe};var or={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},bn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function lhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ue-Rn/2?this.face=or.TOP:this.lat0<=-(Ue-Rn/2)?this.face=or.BOTTOM:Math.abs(this.long0)<=Rn?this.face=or.FRONT:Math.abs(this.long0)<=Ue+Rn?this.face=this.long0>0?or.RIGHT:or.LEFT:this.face=or.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function che(n){var e={x:0,y:0},t,r,i,s,a,o,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===or.TOP)s=Ue-t,r>=Rn&&r<=Ue+Rn?(l.value=bn.AREA_0,i=r-Ue):r>Ue+Rn||r<=-(Ue+Rn)?(l.value=bn.AREA_1,i=r>0?r-Tr:r+Tr):r>-(Ue+Rn)&&r<=-Rn?(l.value=bn.AREA_2,i=r+Ue):(l.value=bn.AREA_3,i=r);else if(this.face===or.BOTTOM)s=Ue+t,r>=Rn&&r<=Ue+Rn?(l.value=bn.AREA_0,i=-r+Ue):r<Rn&&r>=-Rn?(l.value=bn.AREA_1,i=-r):r<-Rn&&r>=-(Ue+Rn)?(l.value=bn.AREA_2,i=-r-Ue):(l.value=bn.AREA_3,i=r>0?-r+Tr:-r-Tr);else{var u,h,f,g,p,E,x;this.face===or.RIGHT?r=zf(r,+Ue):this.face===or.BACK?r=zf(r,+Tr):this.face===or.LEFT&&(r=zf(r,-Ue)),g=Math.sin(t),p=Math.cos(t),E=Math.sin(r),x=Math.cos(r),u=p*x,h=p*E,f=g,this.face===or.FRONT?(s=Math.acos(u),i=sy(s,f,h,l)):this.face===or.RIGHT?(s=Math.acos(h),i=sy(s,f,-u,l)):this.face===or.BACK?(s=Math.acos(-u),i=sy(s,f,-h,l)):this.face===or.LEFT?(s=Math.acos(-h),i=sy(s,f,u,l)):(s=i=0,l.value=bn.AREA_0)}return o=Math.atan(12/Tr*(i+Math.acos(Math.sin(i)*Math.cos(Rn))-Ue)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===bn.AREA_1?o+=Ue:l.value===bn.AREA_2?o+=Tr:l.value===bn.AREA_3&&(o+=1.5*Tr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function uhe(n){var e={lam:0,phi:0},t,r,i,s,a,o,l,u,h,f={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?f.value=bn.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(f.value=bn.AREA_1,t-=Ue):n.x<0&&-n.x>=Math.abs(n.y)?(f.value=bn.AREA_2,t=t<0?t+Tr:t-Tr):(f.value=bn.AREA_3,t+=Ue),h=Tr/12*Math.tan(t),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(a),i=Math.cos(t),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===or.TOP)u=Math.acos(l),e.phi=Ue-u,f.value===bn.AREA_0?e.lam=o+Ue:f.value===bn.AREA_1?e.lam=o<0?o+Tr:o-Tr:f.value===bn.AREA_2?e.lam=o-Ue:e.lam=o;else if(this.face===or.BOTTOM)u=Math.acos(l),e.phi=u-Ue,f.value===bn.AREA_0?e.lam=-o+Ue:f.value===bn.AREA_1?e.lam=-o:f.value===bn.AREA_2?e.lam=-o-Ue:e.lam=o<0?-o-Tr:-o+Tr;else{var g,p,E;g=l,h=g*g,h>=1?E=0:E=Math.sqrt(1-h)*Math.sin(o),h+=E*E,h>=1?p=0:p=Math.sqrt(1-h),f.value===bn.AREA_1?(h=p,p=-E,E=h):f.value===bn.AREA_2?(p=-p,E=-E):f.value===bn.AREA_3&&(h=p,p=E,E=-h),this.face===or.RIGHT?(h=g,g=-p,p=h):this.face===or.BACK?(g=-g,p=-p):this.face===or.LEFT&&(h=g,g=p,p=-h),e.phi=Math.acos(-E)-Ue,e.lam=Math.atan2(p,g),this.face===or.RIGHT?e.lam=zf(e.lam,-Ue):this.face===or.BACK?e.lam=zf(e.lam,-Tr):this.face===or.LEFT&&(e.lam=zf(e.lam,+Ue))}if(this.es!==0){var x,w,T;x=e.phi<0?1:0,w=Math.tan(e.phi),T=this.b/Math.sqrt(w*w+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function sy(n,e,t,r){var i;return n<it?(r.value=bn.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=Rn?r.value=bn.AREA_0:i>Rn&&i<=Ue+Rn?(r.value=bn.AREA_1,i-=Ue):i>Ue+Rn||i<=-(Ue+Rn)?(r.value=bn.AREA_2,i=i>=0?i-Tr:i+Tr):(r.value=bn.AREA_3,i+=Ue)),i}function zf(n,e){var t=n+e;return t<-Tr?t+=xp:t>+Tr&&(t-=xp),t}var hhe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const dhe={init:lhe,forward:che,inverse:uhe,names:hhe};var xI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],im=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Aj=.8487,Rj=1.3523,bj=Es/5,fhe=1/bj,kf=18,Qx=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},ghe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function mhe(n,e,t,r){for(var i=e;r;--r){var s=n(i);if(i-=s,Math.abs(s)<t)break}return i}function phe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function _he(n){var e=ct(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*bj);r<0?r=0:r>=kf&&(r=kf-1),t=Es*(t-fhe*r);var i={x:Qx(xI[r],t)*e,y:Qx(im[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*Aj+this.x0,i.y=i.y*this.a*Rj+this.y0,i}function yhe(n){var e={x:(n.x-this.x0)/(this.a*Aj),y:Math.abs(n.y-this.y0)/(this.a*Rj)};if(e.y>=1)e.x/=xI[kf][0],e.y=n.y<0?-Ue:Ue;else{var t=Math.floor(e.y*kf);for(t<0?t=0:t>=kf&&(t=kf-1);;)if(im[t][0]>e.y)--t;else if(im[t+1][0]<=e.y)++t;else break;var r=im[t],i=5*(e.y-r[0])/(im[t+1][0]-r[0]);i=mhe(function(s){return(Qx(r,s)-e.y)/ghe(r,s)},i,it,100),e.x/=Qx(xI[t],i),e.y=(5*t+i)*gr,n.y<0&&(e.y=-e.y)}return e.x=ct(e.x+this.long0,this.over),e}var xhe=["Robinson","robin"];const vhe={init:phe,forward:_he,inverse:yhe,names:xhe};function Ehe(){this.name="geocent"}function whe(n){var e=mj(n,this.es,this.a);return e}function She(n){var e=pj(n,this.es,this.a,this.b);return e}var The=["Geocentric","geocentric","geocent","Geocent"];const Ihe={init:Ehe,forward:whe,inverse:She,names:The};var Oi={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Gg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ahe(){if(Object.keys(Gg).forEach((function(t){if(typeof this[t]>"u")this[t]=Gg[t].def;else{if(Gg[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Gg[t].num&&(this[t]=parseFloat(this[t]))}Gg[t].degrees&&(this[t]=this[t]*gr)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ue)<it?this.mode=this.lat0<0?Oi.S_POLE:Oi.N_POLE:Math.abs(this.lat0)<it?this.mode=Oi.EQUIT:(this.mode=Oi.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Rhe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,s;switch(this.mode){case Oi.OBLIQ:s=this.sinph0*e+this.cosph0*t*r;break;case Oi.EQUIT:s=t*r;break;case Oi.S_POLE:s=-e;break;case Oi.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*t*Math.sin(n.x),this.mode){case Oi.OBLIQ:s*=this.cosph0*e-this.sinph0*t*r;break;case Oi.EQUIT:s*=e;break;case Oi.N_POLE:s*=-(t*r);break;case Oi.S_POLE:s*=t*r;break}var a,o;return a=s*this.cg+i*this.sg,o=1/(a*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*o,s=a*o,n.x=i*this.a,n.y=s*this.a,n}function bhe(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var s=_s(n.x,n.y);if(Math.abs(s)<it)e.x=0,e.y=n.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case Oi.OBLIQ:e.y=Math.asin(a*this.sinph0+n.y*o*this.cosph0/s),n.y=(a-this.sinph0*Math.sin(e.y))*s,n.x*=o*this.cosph0;break;case Oi.EQUIT:e.y=Math.asin(n.y*o/s),n.y=a*s,n.x*=o;break;case Oi.N_POLE:e.y=Math.asin(a),n.y=-n.y;break;case Oi.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var Che=["Tilted_Perspective","tpers"];const Phe={init:Ahe,forward:Rhe,inverse:bhe,names:Che};function khe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Mhe(n){var e=n.x,t=n.y,r,i,s,a;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var o=this.radius_p/_s(this.radius_p*Math.cos(t),Math.sin(t));if(i=o*Math.cos(e)*Math.cos(t),s=o*Math.sin(e)*Math.cos(t),a=o*Math.sin(t),(this.radius_g-i)*i-s*s-a*a*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/_s(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/_s(s,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,s=Math.sin(e)*r,a=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(s/_s(a,r)),n.y=this.radius_g_1*Math.atan(a/r)):(n.x=this.radius_g_1*Math.atan(s/r),n.y=this.radius_g_1*Math.atan(a/_s(s,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Nhe(n){var e=-1,t=0,r=0,i,s,a,o;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*_s(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*_s(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,s=2*this.radius_g*e,a=s*s-4*i*this.C,a<0)return n.x=Number.NaN,n.y=Number.NaN,n;o=(-s-Math.sqrt(a))/(2*i),e=this.radius_g+o*e,t*=o,r*=o,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var Lhe=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Ohe={init:khe,forward:Mhe,inverse:Nhe,names:Lhe};var Sm=1.340264,Tm=-.081106,Im=893e-6,Am=.003796,Jx=Math.sqrt(3)/2;function Dhe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function Fhe(n){var e=ct(n.x-this.long0,this.over),t=n.y,r=Math.asin(Jx*Math.sin(t)),i=r*r,s=i*i*i;return n.x=e*Math.cos(r)/(Jx*(Sm+3*Tm*i+s*(7*Im+9*Am*i))),n.y=r*(Sm+Tm*i+s*(Im+Am*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function jhe(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,s,a,o,l,u;for(u=0;u<t&&(i=r*r,s=i*i*i,a=r*(Sm+Tm*i+s*(Im+Am*i))-n.y,o=Sm+3*Tm*i+s*(7*Im+9*Am*i),r-=l=a/o,!(Math.abs(l)<e));++u);return i=r*r,s=i*i*i,n.x=Jx*n.x*(Sm+3*Tm*i+s*(7*Im+9*Am*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/Jx),n.x=ct(n.x+this.long0,this.over),n}var Vhe=["eqearth","Equal Earth","Equal_Earth"];const Ghe={init:Dhe,forward:Fhe,inverse:jhe,names:Vhe};var wp=1e-10;function Bhe(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<wp)throw new Error;this.es?(this.en=mb(this.es),this.m1=F0(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=zhe,this.forward=Uhe):(Math.abs(this.phi1)+wp>=Ue?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Whe,this.forward=$he)}function Uhe(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i,s;return r=this.am1+this.m1-F0(t,i=Math.sin(t),s=Math.cos(t),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function zhe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=_s(n.x,n.y=this.am1-n.y),i=pb(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ue)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ue)<=wp)r=0;else throw new Error;return n.x=ct(r+(this.long0||0),this.over),n.y=Eu(i),n}function $he(n){var e=ct(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>wp?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Whe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=_s(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ue)throw new Error;return Math.abs(Math.abs(t)-Ue)<=wp?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=ct(e+(this.long0||0),this.over),n.y=Eu(t),n}var Hhe=["bonne","Bonne (Werner lat_1=90)"];const Khe={init:Bhe,names:Hhe},TL={OBLIQUE:{forward:Qhe,inverse:ede},TRANSVERSE:{forward:Jhe,inverse:tde}},ev={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Yhe(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=hj.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=wa(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t;const r=Object.keys(ev),i=o=>{if(typeof this[o]>"u")return;const l=parseFloat(this[o])*gr;if(isNaN(l))throw new Error("Invalid value for "+o+": "+this[o]);return l};for(let o=0;o<r.length;o++){const l=r[o],u=ev[l],h=Object.entries(u);if(h.some(([g])=>typeof this[g]<"u")){t=u;for(let g=0;g<h.length;g++){const[p,E]=h[g],x=i(p);if(typeof x>"u")throw new Error("Missing parameter: "+p+".");this[E]=x}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:a}=Zhe(this,t);this.lamp=s,Math.abs(a)>it?(this.cphip=Math.cos(a),this.sphip=Math.sin(a),this.projectionType=TL.OBLIQUE):this.projectionType=TL.TRANSVERSE}function Xhe(n){return this.projectionType.forward(this,n)}function qhe(n){return this.projectionType.inverse(this,n)}function Zhe(n,e){let t,r;if(e===ev.ROTATE){let i=n.oLongC,s=n.oLatC,a=n.oAlpha;if(Math.abs(Math.abs(s)-Ue)<=it)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(a),-1*Math.sin(a)*Math.sin(s)),t=Math.asin(Math.cos(s)*Math.sin(a))}else if(e===ev.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,s=n.oLat1,a=n.oLong2,o=n.oLat2,l=Math.abs(s);if(Math.abs(s)>Ue-it)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90");if(Math.abs(o)>Ue-it)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90");if(Math.abs(s-o)<it)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<it)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(o)*Math.cos(i)-Math.sin(s)*Math.cos(o)*Math.cos(a),Math.sin(s)*Math.cos(o)*Math.sin(a)-Math.cos(s)*Math.sin(o)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:t}}function Qhe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(t),s=Math.sin(r),a=Math.cos(r);e.x=ct(Math.atan2(a*Math.sin(t),n.sphip*a*i+n.cphip*s)+n.lamp),e.y=Math.asin(n.sphip*s-n.cphip*a*i);const o=n.obliqueProjection.forward(e);return n.isIdentity&&(o.x*=Es,o.y*=Es),o}function Jhe(n,e){let{x:t,y:r}=e;t+=n.long0;const i=Math.cos(r),s=Math.cos(t);e.x=ct(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*s);const a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=Es,a.y*=Es),a}function ede(n,e){n.isIdentity&&(e.x*=gr,e.y*=gr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;const s=Math.cos(r),a=Math.sin(i),o=Math.cos(i);e.x=Math.atan2(o*Math.sin(r),n.sphip*o*s-n.cphip*a),e.y=Math.asin(n.sphip*a+n.cphip*o*s)}return e.x=ct(e.x+n.long0),e}function tde(n,e){n.isIdentity&&(e.x*=gr,e.y*=gr);const t=n.obliqueProjection.inverse(e);let{x:r,y:i}=t;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=n.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=ct(e.x+n.long0),e}var nde=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const rde={init:Yhe,forward:Xhe,inverse:qhe,names:nde};function ide(n){n.Proj.projections.add(Gy),n.Proj.projections.add(By),n.Proj.projections.add(Hle),n.Proj.projections.add(tce),n.Proj.projections.add(ace),n.Proj.projections.add(hce),n.Proj.projections.add(_ce),n.Proj.projections.add(wce),n.Proj.projections.add(Rce),n.Proj.projections.add(Mce),n.Proj.projections.add(Wce),n.Proj.projections.add(Zce),n.Proj.projections.add(nue),n.Proj.projections.add(lue),n.Proj.projections.add(fue),n.Proj.projections.add(yue),n.Proj.projections.add(Sue),n.Proj.projections.add(bue),n.Proj.projections.add(Lue),n.Proj.projections.add(Vue),n.Proj.projections.add($ue),n.Proj.projections.add(Xue),n.Proj.projections.add(nhe),n.Proj.projections.add(ohe),n.Proj.projections.add(dhe),n.Proj.projections.add(vhe),n.Proj.projections.add(Ihe),n.Proj.projections.add(Phe),n.Proj.projections.add(Ohe),n.Proj.projections.add(Ghe),n.Proj.projections.add(Khe),n.Proj.projections.add(rde)}const gn=Object.assign(cle,{defaultDatum:"WGS84",Proj:wa,WGS84:new wa("WGS84"),Point:v0,toPoint:_j,defs:mi,nadgrid:Woe,transform:qx,mgrs:ule,version:"__VERSION__"});ide(gn);class Cj{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Za,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?Bn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Bn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Ft()}readFeature(e,t){return Ft()}readFeatures(e,t){return Ft()}readGeometry(e,t){return Ft()}readProjection(e){return Ft()}writeFeature(e,t){return Ft()}writeFeatures(e,t){return Ft()}writeGeometry(e,t){return Ft()}}function to(n,e,t){const r=t?Bn(t.featureProjection):null,i=t?Bn(t.dataProjection):null;let s=n;if(r&&i&&!xh(r,i)){e&&(s=n.clone());const a=e?r:i,o=e?i:r;a.getUnits()==="tile-pixels"?s.transform(a,o):s.applyTransform(Gm(a,o))}if(e&&t&&t.decimals!==void 0){const a=Math.pow(10,t.decimals),o=function(l){for(let u=0,h=l.length;u<h;++u)l[u]=Math.round(l[u]*a)/a;return l};s===n&&(s=n.clone()),s.applyTransform(o)}return s}const sde={Point:Qa,LineString:Go,Polygon:Ja,MultiPoint:T0,MultiLineString:Jc,MultiPolygon:n0};function ade(n,e,t){return Array.isArray(e[0])?(_D(n,0,e,t)||(n=n.slice(),JS(n,0,e,t)),n):(tA(n,0,e,t)||(n=n.slice(),rx(n,0,e,t)),n)}function Pj(n,e){const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(s=>Pj({...n,geometry:s})).flat();const r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=t.layout.length;return to(new zs(r,r==="Polygon"?ade(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function wb(n,e){if(!n)return null;if(Array.isArray(n)){const r=n.map(i=>wb(i,e));return new Ya(r)}const t=sde[n.type];return to(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}class ode extends Cj{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(ay(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(ay(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Ft()}readFeaturesFromObject(e,t){return Ft()}readGeometry(e,t){return this.readGeometryFromObject(ay(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Ft()}readProjection(e){return this.readProjectionFromObject(ay(e))}readProjectionFromObject(e){return Ft()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Ft()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Ft()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Ft()}}function ay(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Sb extends ode{constructor(e){e=e||{},super(),this.dataProjection=Bn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Bn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=Tb(r.geometry);if(this.featureClass===zs)return Pj({geometry:i,id:r.id,properties:r.properties},t);const s=new Za;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(wb(i,t)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,t){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const a=s.features;for(let o=0,l=a.length;o<l;++o){const u=this.readFeatureFromObject(a[o],t);u&&i.push(u)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return lde(e,t)}readProjectionFromObject(e){const t=e.crs;let r;if(t)if(t.type=="name")r=Bn(t.properties.name);else if(t.type==="EPSG")r=Bn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),a=e.getGeometry();return a&&(r.geometry=vI(a,t),delete s[e.getGeometryName()]),Ih(s)||(r.properties=s),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return vI(e,this.adaptOptions(t))}}function Tb(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=ude(n);break}case"LineString":{t=hde(n);break}case"Polygon":{t=mde(n);break}case"MultiPoint":{t=fde(n);break}case"MultiLineString":{t=dde(n);break}case"MultiPolygon":{t=gde(n);break}case"GeometryCollection":{t=cde(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function lde(n,e){const t=Tb(n);return wb(t,e)}function cde(n,e){return n.geometries.map(function(r){return Tb(r)})}function ude(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:Jh(e.length)}}function hde(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Jh(e[0]?.length||2)}}function dde(n){const e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Vp(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:Jh(t)}}function fde(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Jh(e[0]?.length||2)}}function gde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=KO(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:Jh(r)}}function mde(n){const e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Vp(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:Jh(r)}}function vI(n,e){n=to(n,!0,e);const t=n.getType();let r;switch(t){case"Point":{r=Ede(n);break}case"LineString":{r=_de(n);break}case"Polygon":{r=wde(n,e);break}case"MultiPoint":{r=xde(n);break}case"MultiLineString":{r=yde(n);break}case"MultiPolygon":{r=vde(n,e);break}case"GeometryCollection":{r=pde(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function pde(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return vI(r,e)})}}function _de(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function yde(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function xde(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function vde(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Ede(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function wde(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const tv="http://www.w3.org/2001/XMLSchema-instance";function od(n,e){return j0().createElementNS(n,e)}function no(n,e){return kj(n,e,[]).join("")}function kj(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)kj(r,e,t)}return t}function pl(n){return"documentElement"in n}function _l(n){return new DOMParser().parseFromString(n,"application/xml")}function IL(n,e){return(function(t,r){const i=n.call(e??this,t,r);if(i!==void 0){const s=r[r.length-1];An(s,i)}})}function Ua(n,e){return(function(t,r){const i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function Ib(n,e){return(function(t,r){const i=n.call(this,t,r);i!==void 0&&(r[r.length-1]=i)})}function Ve(n,e,t){return(function(r,i){const s=n.call(this,r,i);if(s!==void 0){const a=i[i.length-1],o=e!==void 0?e:r.localName;a[o]=s}})}function qe(n,e){return(function(t,r,i){n.call(this,t,r,i),i[i.length-1].node.appendChild(t)})}function Mj(n,e){let t,r;return function(i,s,a){if(t===void 0){t={};const o={};o[i.localName]=n,t[i.namespaceURI]=o,r=ro(i.localName)}Nj(t,r,s,a)}}function ro(n,e){return(function(t,r,i){const a=r[r.length-1].node;let o=n;o===void 0&&(o=i);const l=a.namespaceURI;return od(l,o)})}const Gi=ro();function Ss(n,e){const t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function lt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function wu(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=n[i.namespaceURI];if(s!==void 0){const a=s[i.localName];a!==void 0&&a.call(r,i,t)}}}function an(n,e,t,r,i){return r.push(n),wu(e,t,r,i),r.pop()}function Nj(n,e,t,r,i,s){const a=(i!==void 0?i:t).length;let o,l;for(let u=0;u<a;++u)o=t[u],o!==void 0&&(l=e.call(s,o,r,i!==void 0?i[u]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(s,l,o,r))}function zn(n,e,t,r,i,s,a){return i.push(n),Nj(e,t,r,i,s,a),i.pop()}let TS;function Sde(){return TS===void 0&&typeof XMLSerializer<"u"&&(TS=new XMLSerializer),TS}let IS;function j0(){return IS===void 0&&typeof document<"u"&&(IS=document.implementation.createDocument("","",null)),IS}class Lj extends Cj{constructor(){super(),this.xmlSerializer_=Sde()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const r=_l(e);return this.readFeatureFromDocument(r,t)}return pl(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const r=_l(e);return this.readFeaturesFromDocument(r,t)}return pl(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&An(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return Ft()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const r=_l(e);return this.readGeometryFromDocument(r,t)}return pl(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=_l(e);return this.readProjectionFromDocument(t)}return pl(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}}function du(n){const e=no(n,!1);return Tde(e)}function Tde(n){const e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function AE(n){const e=no(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function _n(n){const e=no(n,!1);return Ide(e)}function Ide(n){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function Sp(n){const e=no(n,!1);return Ade(e)}function Ade(n){const e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Zt(n){return no(n,!1).trim()}function E0(n,e){wn(n,e?"1":"0")}function Rde(n,e){n.appendChild(j0().createCDATASection(e))}function bde(n,e){const t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Rg(t.getUTCMonth()+1,2)+"-"+Rg(t.getUTCDate(),2)+"T"+Rg(t.getUTCHours(),2)+":"+Rg(t.getUTCMinutes(),2)+":"+Rg(t.getUTCSeconds(),2)+"Z";n.appendChild(j0().createTextNode(r))}function ds(n,e){const t=e.toPrecision();n.appendChild(j0().createTextNode(t))}function nv(n,e){const t=e.toString();n.appendChild(j0().createTextNode(t))}const Cde=/^\s/,Pde=/\s$/,kde=/(\n|\t|\r|<|&| {2})/;function wn(n,e){typeof e=="string"&&(Cde.test(e)||Pde.test(e)||kde.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),Rde(n,t)}):n.appendChild(j0().createTextNode(e))}const Xn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Mde="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Nde={rte:Oj,trk:Dj,wpt:Fj},Lde=lt(Xn,{rte:Ua(Oj),trk:Ua(Dj),wpt:Ua(Fj)}),Ode=lt(Xn,{text:Ve(Zt,"linkText"),type:Ve(Zt,"linkType")}),Dde=lt(Xn,{name:Ve(Zt),email:cfe,link:E1}),Fde=lt(Xn,{name:Ve(Zt),desc:Ve(Zt),author:Ve(afe),copyright:Ve(ofe),link:E1,time:Ve(AE),keywords:Ve(Zt),bounds:lfe,extensions:RE}),jde=lt(Xn,{year:Ve(Sp),license:Ve(Zt)}),Vde=lt(Xn,{rte:qe(ffe),trk:qe(gfe),wpt:qe(pfe)});class Gde extends Lj{constructor(e){super(),e=e||{},this.dataProjection=Bn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){const i=e[t];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(_l(e)):pl(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Xn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Xn.includes(t.namespaceURI)&&t.localName==="metadata")return an({},Fde,t,[]);return null}readFeatureFromNode(e,t){if(!Xn.includes(e.namespaceURI))return null;const r=Nde[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Xn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=an([],Lde,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=od("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",tv),r.setAttributeNS(tv,"xsi:schemaLocation",Mde),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),zn({node:r},Vde,sfe,e,[t]),r}}const Bde=lt(Xn,{name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:E1,number:Ve(Sp),extensions:RE,type:Ve(Zt),rtept:ufe}),Ude=lt(Xn,{ele:Ve(_n),time:Ve(AE)}),zde=lt(Xn,{name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:E1,number:Ve(Sp),type:Ve(Zt),extensions:RE,trkseg:dfe}),$de=lt(Xn,{trkpt:hfe}),Wde=lt(Xn,{ele:Ve(_n),time:Ve(AE)}),Hde=lt(Xn,{ele:Ve(_n),time:Ve(AE),magvar:Ve(_n),geoidheight:Ve(_n),name:Ve(Zt),cmt:Ve(Zt),desc:Ve(Zt),src:Ve(Zt),link:E1,sym:Ve(Zt),type:Ve(Zt),fix:Ve(Zt),sat:Ve(Sp),hdop:Ve(_n),vdop:Ve(_n),pdop:Ve(_n),ageofdgpsdata:Ve(_n),dgpsid:Ve(Sp),extensions:RE}),Kde=["text","type"],Yde=lt(Xn,{text:qe(wn),type:qe(wn)}),Xde=lt(Xn,["name","cmt","desc","src","link","number","type","rtept"]),qde=lt(Xn,{name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(bb),number:qe(nv),type:qe(wn),rtept:Mj(qe(Cb))}),Zde=lt(Xn,["ele","time"]),Qde=lt(Xn,["name","cmt","desc","src","link","number","type","trkseg"]),Jde=lt(Xn,{name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(bb),number:qe(nv),type:qe(wn),trkseg:Mj(qe(mfe))}),efe=ro("trkpt"),tfe=lt(Xn,{trkpt:qe(Cb)}),nfe=lt(Xn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),rfe=lt(Xn,{ele:qe(ds),time:qe(bde),magvar:qe(ds),geoidheight:qe(ds),name:qe(wn),cmt:qe(wn),desc:qe(wn),src:qe(wn),link:qe(bb),sym:qe(wn),type:qe(wn),fix:qe(wn),sat:qe(nv),hdop:qe(ds),vdop:qe(ds),pdop:qe(ds),ageofdgpsdata:qe(ds),dgpsid:qe(nv)}),ife={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function sfe(n,e,t){const r=n.getGeometry();if(r){const i=ife[r.getType()];if(i){const s=e[e.length-1].node;return od(s.namespaceURI,i)}}}function Ab(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function Rb(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let s=0,a=e.length/4;s<a;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],n.hasZ&&(e[s*i+2]=e[s*4+2]),n.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,t)for(let s=0,a=t.length;s<a;s++)t[s]=t[s]/4*i}return r}function afe(n,e){const t=an({},Dde,n,e);if(t)return t}function ofe(n,e){const t=an({},jde,n,e);if(t){const r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function lfe(n,e){const t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),s=n.getAttribute("maxlat"),a=n.getAttribute("maxlon");i!==null&&r!==null&&a!==null&&s!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(a),parseFloat(s)]])}function cfe(n,e){const t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function E1(n,e){const t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),wu(Ode,n,e)}function RE(n,e){const t=e[e.length-1];t.extensionsNode_=n}function ufe(n,e){const t=an({},Ude,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;Ab(i,s,n,t)}}function hfe(n,e){const t=an({},Wde,n,e);if(t){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;Ab(i,s,n,t)}}function dfe(n,e){const t=e[e.length-1];wu($de,n,e);const r=t.flatCoordinates;t.ends.push(r.length)}function Oj(n,e){const t=e[0],r=an({flatCoordinates:[],layoutOptions:{}},Bde,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const a=Rb(s,i),o=new Go(i,a);to(o,!1,t);const l=new Za(o);return l.setProperties(r,!0),l}function Dj(n,e){const t=e[0],r=an({flatCoordinates:[],ends:[],layoutOptions:{}},zde,n,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const a=r.layoutOptions;delete r.layoutOptions;const o=Rb(a,i,s),l=new Jc(i,o,s);to(l,!1,t);const u=new Za(l);return u.setProperties(r,!0),u}function Fj(n,e){const t=e[0],r=an({},Hde,n,e);if(!r)return;const i={},s=Ab([],i,n,r),a=Rb(i,s),o=new Qa(s,a);to(o,!1,t);const l=new Za(o);return l.setProperties(r,!0),l}function bb(n,e,t){n.setAttribute("href",e);const i=t[t.length-1].properties,s=[i.linkText,i.linkType];zn({node:n},Yde,Gi,s,t,Kde)}function Cb(n,e,t){const r=t[t.length-1],s=r.node.namespaceURI,a=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(a.time=e[3]);case"XYZ":e[2]!==0&&(a.ele=e[2]);break;case"XYM":e[2]!==0&&(a.time=e[2]);break}const l=n.nodeName=="rtept"?Zde[s]:nfe[s],u=Ss(a,l);zn({node:n,properties:a},rfe,Gi,u,t,l)}function ffe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="LineString"){const h=to(a,!0,r);s.geometryLayout=h.getLayout(),i.rtept=h.getCoordinates()}const o=t[t.length-1].node,l=Xde[o.namespaceURI],u=Ss(i,l);zn(s,qde,Gi,u,t,l)}function gfe(n,e,t){const r=t[0],i=e.getProperties(),s={node:n};s.properties=i;const a=e.getGeometry();if(a.getType()=="MultiLineString"){const h=to(a,!0,r);i.trkseg=h.getLineStrings()}const o=t[t.length-1].node,l=Qde[o.namespaceURI],u=Ss(i,l);zn(s,Jde,Gi,u,t,l)}function mfe(n,e,t){const r={node:n};r.geometryLayout=e.getLayout(),r.properties={},zn(r,tfe,efe,e.getCoordinates(),t)}function pfe(n,e,t){const r=t[0],i=t[t.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const a=to(s,!0,r);i.geometryLayout=a.getLayout(),Cb(n,a.getCoordinates(),t)}}const zl=["http://www.google.com/kml/ext/2.2"],Tt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],_fe="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",AL={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},yfe=lt(Tt,{ExtendedData:Qj,Region:Jj,MultiGeometry:Ve(Xj,"geometry"),LineString:Ve(Kj,"geometry"),LinearRing:Ve(Yj,"geometry"),Point:Ve(qj,"geometry"),Polygon:Ve(Zj,"geometry"),Style:Ve(Mb),StyleMap:t0e,address:Ve(Zt),description:Ve(Zt),name:Ve(Zt),open:Ve(du),phoneNumber:Ve(Zt),styleUrl:Ve(Uj),visibility:Ve(du)},lt(zl,{MultiTrack:Ve(Ufe,"geometry"),Track:Ve(Hj,"geometry")})),xfe=lt(Tt,{ExtendedData:Qj,Region:Jj,Link:f0e,address:Ve(Zt),description:Ve(Zt),name:Ve(Zt),open:Ve(du),phoneNumber:Ve(Zt),visibility:Ve(du)}),vfe=lt(Tt,{href:Ve(Bj)}),Efe=lt(Tt,{Altitude:Ve(_n),Longitude:Ve(_n),Latitude:Ve(_n),Tilt:Ve(_n),AltitudeMode:Ve(Zt),Heading:Ve(_n),Roll:Ve(_n)}),jj=lt(Tt,{LatLonAltBox:a0e,Lod:l0e}),wfe=lt(Tt,["Document","Placemark"]),Sfe=lt(Tt,{Document:qe(E0e),Placemark:qe(n7)});let $f,zy=null,EI,Rm,bm,Cm,rv,wI=null,Pb,SI=null,TI,ph=null,RL=null,II=null;function iv(n){return 32/Math.min(n[0],n[1])}function Tfe(){$f=[255,255,255,1],zy=new ai({color:$f}),EI=[20,2],Rm="pixels",bm="pixels",Cm=[64,64],rv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",wI=new zp({anchor:EI,anchorOrigin:"bottom-left",anchorXUnits:Rm,anchorYUnits:bm,crossOrigin:"anonymous",rotation:0,scale:iv(Cm),size:Cm,src:rv}),Pb="NO_IMAGE",SI=new ys({color:$f,width:1}),TI=new ys({color:[51,51,51,1],width:2}),ph=new ed({font:"bold 16px Helvetica",fill:zy,stroke:TI,scale:.8}),RL=new ur({fill:zy,image:wI,text:ph,stroke:SI,zIndex:0}),II=[RL]}let oy;function Ife(n){return n}class Afe extends Lj{constructor(e){super(),e=e||{},II||Tfe(),this.dataProjection=Bn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:II,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Ife,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const r=lt(Tt,{Document:IL(this.readDocumentOrFolder_,this),Folder:IL(this.readDocumentOrFolder_,this),Placemark:Ua(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=an([],r,e,t,this);if(i)return i}readPlacemark_(e,t){const r=an({geometry:null},yfe,e,t,this);if(!r)return;const i=new Za,s=e.getAttribute("id");s!==null&&i.setId(s);const a=t[0],o=r.geometry;if(o&&to(o,!1,a),i.setGeometry(o),delete r.geometry,this.extractStyles_){const l=r.Style,u=r.styleUrl,h=bfe(l,u,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(h)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){const r=e.getAttribute("id");if(r!==null){const i=Mb.call(this,e,t);if(i){let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,t){const r=e.getAttribute("id");if(r===null)return;const i=$j.call(this,e,t);if(!i)return;let s,a=e.baseURI;(!a||a=="about:blank")&&(a=window.location.href),a?s=new URL("#"+r,a).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,t){if(!Tt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!Tt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const a=this.readFeaturesFromNode(s,t);a&&An(r,a)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const t=_l(e);return this.readNameFromDocument(t)}return pl(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Tt.includes(t.namespaceURI)&&t.localName=="name")return Zt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const r=t.localName;if(Tt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const r=_l(e);An(t,this.readNetworkLinksFromDocument(r))}else pl(e)?An(t,this.readNetworkLinksFromDocument(e)):An(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&An(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=an({},xfe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&An(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){const t=[];if(typeof e=="string"){const r=_l(e);An(t,this.readRegionFromDocument(r))}else pl(e)?An(t,this.readRegionFromDocument(e)):An(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&An(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName=="Region"){const i=an({},jj,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&An(t,this.readRegionFromNode(r))}return t}readCamera(e){const t=[];if(typeof e=="string"){const r=_l(e);An(t,this.readCameraFromDocument(r))}else pl(e)?An(t,this.readCameraFromDocument(e)):An(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&An(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){const t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Tt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=an({},Efe,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Tt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&An(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const r=od(Tt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",zl[0]),r.setAttributeNS(i,"xmlns:xsi",tv),r.setAttributeNS(tv,"xsi:schemaLocation",_fe);const s={node:r},a={};e.length>1?a.Document=e:e.length==1&&(a.Placemark=e[0]);const o=wfe[r.namespaceURI],l=Ss(a,o);return zn(s,Sfe,Gi,l,[t],o,this),r}}function Rfe(n,e){const t=[0,0];let r="start";const i=n.getImage();if(i){const o=i.getSize();if(o&&o.length==2){const l=i.getScaleArray(),u=i.getAnchor();t[0]=l[0]*(o[0]-u[0]),t[1]=l[1]*(o[1]/2-u[1]),r="left"}}let s=n.getText();return s?(s=s.clone(),s.setFont(s.getFont()||ph.getFont()),s.setScale(s.getScale()||ph.getScale()),s.setFill(s.getFill()||ph.getFill()),s.setStroke(s.getStroke()||TI)):s=ph.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(r),new ur({image:i,text:s})}function bfe(n,e,t,r,i){return(function(s,a){let o=i,l="",u=[];if(o){const f=s.getGeometry();if(f)if(f instanceof Ya)u=f.getGeometriesArrayRecursive().filter(function(g){const p=g.getType();return p==="Point"||p==="MultiPoint"}),o=u.length>0;else{const g=f.getType();o=g==="Point"||g==="MultiPoint"}}o&&(l=s.get("name"),o=o&&!!l,o&&/&[^&]+;/.test(l)&&(oy||(oy=document.createElement("textarea")),oy.innerHTML=l,l=oy.value));let h=t;if(n?h=n:e&&(h=Vj(e,t,r)),o){const f=Rfe(h[0],l);if(u.length>0){f.setGeometry(new Ya(u));const g=new ur({geometry:h[0].getGeometry(),image:null,fill:h[0].getFill(),stroke:h[0].getStroke(),text:null});return[f,g].concat(h.slice(1))}return f}return h})}function Vj(n,e,t){return Array.isArray(n)?n:typeof n=="string"?Vj(t[n],e,t):e}function bE(n){const e=no(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function Gj(n){let e=no(n,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),a=parseFloat(i[2]),o=i[3]?parseFloat(i[3]):0;t.push(s,a,o),e=e.substr(i[0].length)}if(e==="")return t}function Bj(n){const e=no(n,!1).trim();let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Uj(n){const e=no(n,!1).trim().replace(/^(?!.*#)/,"#");let t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Cfe(n){const e=n.getAttribute("xunits"),t=n.getAttribute("yunits");let r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:AL[e],y:parseFloat(n.getAttribute("y")),yunits:AL[t],origin:r}}function zj(n){return _n(n)}const Pfe=lt(Tt,{Pair:e0e});function $j(n,e){return an(void 0,Pfe,n,e,this)}const kfe=lt(Tt,{Icon:Ve(Wfe),color:Ve(bE),heading:Ve(_n),hotSpot:Ve(Cfe),scale:Ve(zj)});function Mfe(n,e){const t=an({},kfe,n,e);if(!t)return;const r=e[e.length-1],i="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(i).length>0;let a;const o=i.href;o?a=o:s&&(a=rv);let l,u,h,f="bottom-left";const g=t.hotSpot;g?(l=[g.x,g.y],u=g.xunits,h=g.yunits,f=g.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(l=EI,u=Rm,h=bm):a.includes("arrow-reverse")?(l=[54,42],u=Rm,h=bm):a.includes("paddle")&&(l=[32,1],u=Rm,h=bm));let p;const E=i.x,x=i.y;E!==void 0&&x!==void 0&&(p=[E,x]);let w;const T=i.w,R=i.h;T!==void 0&&R!==void 0&&(w=[T,R]);let k;const N=t.heading;N!==void 0&&(k=vl(N));const j=t.scale,B=t.color;if(s){a==rv&&(w=Cm);const P=new zp({anchor:l,anchorOrigin:f,anchorXUnits:u,anchorYUnits:h,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:k,scale:j,size:w,src:this.iconUrlFunction_(a),color:B}),C=P.getScaleArray()[0],M=P.getSize();if(M===null){const F=P.getImageState();if(F===pt.IDLE||F===pt.LOADING){const O=function(){const W=P.getImageState();if(!(W===pt.IDLE||W===pt.LOADING)){const D=P.getSize();if(D&&D.length==2){const we=iv(D);P.setScale(C*we)}P.unlistenImageChange(O)}};P.listenImageChange(O),F===pt.IDLE&&P.load()}}else if(M.length==2){const F=iv(M);P.setScale(C*F)}r.imageStyle=P}else r.imageStyle=Pb}const Nfe=lt(Tt,{color:Ve(bE),scale:Ve(zj)});function Lfe(n,e){const t=an({},Nfe,n,e);if(!t)return;const r=e[e.length-1],i=new ed({fill:new ai({color:"color"in t?t.color:$f}),scale:t.scale});r.textStyle=i}const Ofe=lt(Tt,{color:Ve(bE),width:Ve(_n)});function Dfe(n,e){const t=an({},Ofe,n,e);if(!t)return;const r=e[e.length-1],i=new ys({color:"color"in t?t.color:$f,width:"width"in t?t.width:1});r.strokeStyle=i}const Ffe=lt(Tt,{color:Ve(bE),fill:Ve(du),outline:Ve(du)});function jfe(n,e){const t=an({},Ffe,n,e);if(!t)return;const r=e[e.length-1],i=new ai({color:"color"in t?t.color:$f});r.fillStyle=i;const s=t.fill;s!==void 0&&(r.fill=s);const a=t.outline;a!==void 0&&(r.outline=a)}const Vfe=lt(Tt,{coordinates:Ib(Gj)});function Wj(n,e){return an(null,Vfe,n,e)}function Gfe(n,e){const r=e[e.length-1].coordinates,i=no(n,!1),a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(a){const o=parseFloat(a[1]),l=parseFloat(a[2]),u=parseFloat(a[3]);r.push([o,l,u])}else r.push([])}const Bfe=lt(zl,{Track:Ua(Hj)});function Ufe(n,e){const t=an([],Bfe,n,e);if(t)return new Jc(t)}const zfe=lt(Tt,{when:g0e},lt(zl,{coord:Gfe}));function Hj(n,e){const t=an({coordinates:[],whens:[]},zfe,n,e);if(!t)return;const r=[],i=t.coordinates,s=t.whens;for(let a=0,o=Math.min(i.length,s.length);a<o;++a)i[a].length==3&&r.push(i[a][0],i[a][1],i[a][2],s[a]);return new Go(r,"XYZM")}const $fe=lt(Tt,{href:Ve(Bj)},lt(zl,{x:Ve(_n),y:Ve(_n),w:Ve(_n),h:Ve(_n)}));function Wfe(n,e){const t=an({},$fe,n,e);return t||null}const Hfe=lt(Tt,{coordinates:Ib(Gj)});function kb(n,e){return an(null,Hfe,n,e)}const CE=lt(Tt,{extrude:Ve(du),tessellate:Ve(du),altitudeMode:Ve(Zt)});function Kj(n,e){const t=an({},CE,n,e),r=kb(n,e);if(r){const i=new Go(r,"XYZ");return i.setProperties(t,!0),i}}function Yj(n,e){const t=an({},CE,n,e),r=kb(n,e);if(r){const i=new Ja(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}const Kfe=lt(Tt,{LineString:Ua(Kj),LinearRing:Ua(Yj),MultiGeometry:Ua(Xj),Point:Ua(qj),Polygon:Ua(Zj)});function Xj(n,e){const t=an([],Kfe,n,e);if(!t)return null;if(t.length===0)return new Ya(t);let r,i=!0;const s=t[0].getType();let a;for(let o=1,l=t.length;o<l;++o)if(a=t[o],a.getType()!=s){i=!1;break}if(i){let o,l;if(s=="Point"){const u=t[0];o=u.getLayout(),l=u.getFlatCoordinates();for(let h=1,f=t.length;h<f;++h)a=t[h],An(l,a.getFlatCoordinates());r=new T0(l,o),AS(r,t)}else if(s=="LineString")r=new Jc(t),AS(r,t);else if(s=="Polygon")r=new n0(t),AS(r,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new Ya(t);else throw new Error("Unknown geometry type found")}else r=new Ya(t);return r}function qj(n,e){const t=an({},CE,n,e),r=kb(n,e);if(r){const i=new Qa(r,"XYZ");return i.setProperties(t,!0),i}}const Yfe=lt(Tt,{innerBoundaryIs:u0e,outerBoundaryIs:d0e});function Zj(n,e){const t=an({},CE,n,e),r=an([null],Yfe,n,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let o=1,l=r.length;o<l;++o)An(i,r[o]),s.push(i.length);const a=new Ja(i,"XYZ",s);return a.setProperties(t,!0),a}}const Xfe=lt(Tt,{IconStyle:Mfe,LabelStyle:Lfe,LineStyle:Dfe,PolyStyle:jfe});function Mb(n,e){const t=an({},Xfe,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:zy;const i=t.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in t?t.imageStyle!=Pb&&(s=t.imageStyle):s=wI;const a="textStyle"in t?t.textStyle:ph,o="strokeStyle"in t?t.strokeStyle:SI,l=t.outline;return l!==void 0&&!l?[new ur({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new Ya(g.getGeometriesArrayRecursive().filter(function(p){const E=p.getType();return E!=="Polygon"&&E!=="MultiPolygon"}))}if(f!=="Polygon"&&f!=="MultiPolygon")return h},fill:r,image:s,stroke:o,text:a,zIndex:void 0}),new ur({geometry:function(u){const h=u.getGeometry(),f=h.getType();if(f==="GeometryCollection"){const g=h;return new Ya(g.getGeometriesArrayRecursive().filter(function(p){const E=p.getType();return E==="Polygon"||E==="MultiPolygon"}))}if(f==="Polygon"||f==="MultiPolygon")return h},fill:r,stroke:null,zIndex:void 0})]:[new ur({fill:r,image:s,stroke:o,text:a,zIndex:void 0})]}function AS(n,e){const t=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let a,o,l;a=!1,o=!1,l=!1;for(let u=0;u<t;++u){const h=e[u];r[u]=h.get("extrude"),i[u]=h.get("tessellate"),s[u]=h.get("altitudeMode"),a=a||r[u]!==void 0,o=o||i[u]!==void 0,l=l||s[u]}a&&n.set("extrude",r),o&&n.set("tessellate",i),l&&n.set("altitudeMode",s)}const qfe=lt(Tt,{displayName:Ve(Zt),value:Ve(Zt)});function Zfe(n,e){const t=n.getAttribute("name");wu(qfe,n,e);const r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Qfe=lt(Tt,{Data:Zfe,SchemaData:r0e});function Qj(n,e){wu(Qfe,n,e)}function Jj(n,e){wu(jj,n,e)}const Jfe=lt(Tt,{Style:Ve(Mb),key:Ve(Zt),styleUrl:Ve(Uj)});function e0e(n,e){const t=an({},Jfe,n,e,this);if(!t)return;const r=t.key;if(r&&r=="normal"){const i=t.styleUrl;i&&(e[e.length-1]=i);const s=t.Style;s&&(e[e.length-1]=s)}}function t0e(n,e){const t=$j.call(this,n,e);if(!t)return;const r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const n0e=lt(Tt,{SimpleData:i0e});function r0e(n,e){wu(n0e,n,e)}function i0e(n,e){const t=n.getAttribute("name");if(t!==null){const r=Zt(n),i=e[e.length-1];i[t]=r}}const s0e=lt(Tt,{altitudeMode:Ve(Zt),minAltitude:Ve(_n),maxAltitude:Ve(_n),north:Ve(_n),south:Ve(_n),east:Ve(_n),west:Ve(_n)});function a0e(n,e){const t=an({},s0e,n,e);if(!t)return;const r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}const o0e=lt(Tt,{minLodPixels:Ve(_n),maxLodPixels:Ve(_n),minFadeExtent:Ve(_n),maxFadeExtent:Ve(_n)});function l0e(n,e){const t=an({},o0e,n,e);if(!t)return;const r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}const c0e=lt(Tt,{LinearRing:Ua(Wj)});function u0e(n,e){const t=an([],c0e,n,e);t.length>0&&e[e.length-1].push(...t)}const h0e=lt(Tt,{LinearRing:Ib(Wj)});function d0e(n,e){const t=an(void 0,h0e,n,e);if(t){const r=e[e.length-1];r[0]=t}}function f0e(n,e){wu(vfe,n,e)}function g0e(n,e){const r=e[e.length-1].whens,i=no(n,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function PE(n,e){const t=Ph(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const a=Math.floor(i[s]).toString(16);i[s]=a.length==1?"0"+a:a}wn(n,i.join(""))}function m0e(n,e,t){const r=t[t.length-1],i=r.layout,s=r.stride;let a;if(i=="XY"||i=="XYM")a=2;else if(i=="XYZ"||i=="XYZM")a=3;else throw new Error("Invalid geometry layout");const o=e.length;let l="";if(o>0){l+=e[0];for(let u=1;u<a;++u)l+=","+e[u];for(let u=s;u<o;u+=s){l+=" "+e[u];for(let h=1;h<a;++h)l+=","+e[u+h]}}wn(n,l)}const $y=lt(Tt,{Data:qe(p0e),value:qe(y0e),displayName:qe(_0e)});function p0e(n,e,t){n.setAttribute("name",e.name);const r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&zn(r,$y,Gi,[i.displayName],t,["displayName"]),i!==null&&i.value&&zn(r,$y,Gi,[i.value],t,["value"])):zn(r,$y,Gi,[i],t,["value"])}function _0e(n,e){wn(n,e)}function y0e(n,e){wn(n,e)}const x0e=lt(Tt,{Placemark:qe(n7)}),v0e=function(n,e,t){const r=e[e.length-1].node;return od(r.namespaceURI,"Placemark")};function E0e(n,e,t){zn({node:n},x0e,v0e,e,t,void 0,this)}const w0e=ro("Data");function S0e(n,e,t){const r={node:n},i=e.names,s=e.values,a=i.length;for(let o=0;o<a;o++)zn(r,$y,w0e,[{name:i[o],value:s[o]}],t)}const bL=lt(Tt,["href"],lt(zl,["x","y","w","h"])),CL=lt(Tt,{href:qe(wn)},lt(zl,{x:qe(ds),y:qe(ds),w:qe(ds),h:qe(ds)})),T0e=function(n,e,t){return od(zl[0],"gx:"+t)};function I0e(n,e,t){const r={node:n},i=t[t.length-1].node;let s=bL[i.namespaceURI],a=Ss(e,s);zn(r,CL,Gi,a,t,s),s=bL[zl[0]],a=Ss(e,s),zn(r,CL,T0e,a,t,s)}const A0e=lt(Tt,["scale","heading","Icon","color","hotSpot"]),R0e=lt(Tt,{Icon:qe(I0e),color:qe(PE),heading:qe(ds),hotSpot:qe(ege),scale:qe(i7)});function b0e(n,e,t){const r={node:n},i={},s=e.getSrc(),a=e.getSize(),o=e.getImageSize(),l={href:s};if(a){l.w=a[0],l.h=a[1];const w=e.getAnchor(),T=e.getOrigin();if(T&&o&&T[0]!==0&&T[1]!==a[1]&&(l.x=T[0],l.y=o[1]-(T[1]+a[1])),w&&(w[0]!==a[0]/2||w[1]!==a[1]/2)){const R={x:w[0],xunits:"pixels",y:a[1]-w[1],yunits:"pixels"};i.hotSpot=R}}i.Icon=l;let u=e.getScaleArray()[0],h=a;if(h===null&&(h=Cm),h.length==2){const w=iv(h);u=u/w}u!==1&&(i.scale=u);const f=e.getRotation();f!==0&&(i.heading=f);const g=e.getColor();g&&(i.color=g);const p=t[t.length-1].node,E=A0e[p.namespaceURI],x=Ss(i,E);zn(r,R0e,Gi,x,t,E)}const C0e=lt(Tt,["color","scale"]),P0e=lt(Tt,{color:qe(PE),scale:qe(i7)});function k0e(n,e,t){const r={node:n},i={},s=e.getFill();s&&(i.color=s.getColor());const a=e.getScale();a&&a!==1&&(i.scale=a);const o=t[t.length-1].node,l=C0e[o.namespaceURI],u=Ss(i,l);zn(r,P0e,Gi,u,t,l)}const M0e=lt(Tt,["color","width"]),N0e=lt(Tt,{color:qe(PE),width:qe(ds)});function L0e(n,e,t){const r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,a=M0e[s.namespaceURI],o=Ss(i,a);zn(r,N0e,Gi,o,t,a)}const O0e={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},e7=function(n,e,t){if(n){const r=e[e.length-1].node;return od(r.namespaceURI,O0e[n.getType()])}},D0e=ro("Point"),F0e=ro("LineString"),j0e=ro("LinearRing"),V0e=ro("Polygon"),G0e=lt(Tt,{LineString:qe(Wf),Point:qe(Wf),Polygon:qe(r7),GeometryCollection:qe(t7)});function t7(n,e,t){const r={node:n},i=e.getType();let s=[],a;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(o){const l=o.getType();if(l==="MultiPoint")s=s.concat(o.getPoints());else if(l==="MultiLineString")s=s.concat(o.getLineStrings());else if(l==="MultiPolygon")s=s.concat(o.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(o);else throw new Error("Unknown geometry type")}),a=e7;else if(i==="MultiPoint")s=e.getPoints(),a=D0e;else if(i==="MultiLineString")s=e.getLineStrings(),a=F0e;else if(i==="MultiPolygon")s=e.getPolygons(),a=V0e;else throw new Error("Unknown geometry type");zn(r,G0e,a,s,t)}const B0e=lt(Tt,{LinearRing:qe(Wf)});function PL(n,e,t){zn({node:n},B0e,j0e,[e],t)}const RS=lt(Tt,{ExtendedData:qe(S0e),MultiGeometry:qe(t7),LineString:qe(Wf),LinearRing:qe(Wf),Point:qe(Wf),Polygon:qe(r7),Style:qe(J0e),address:qe(wn),description:qe(wn),name:qe(wn),open:qe(E0),phoneNumber:qe(wn),styleUrl:qe(wn),visibility:qe(E0)}),U0e=lt(Tt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),z0e=ro("ExtendedData");function n7(n,e,t){const r={node:n};e.getId()&&n.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const a=Object.keys(i||{}).sort().filter(function(p){return!s[p]}),o=e.getStyleFunction();if(o){const p=o(e,0);if(p){const E=Array.isArray(p)?p:[p];let x=E;if(e.getGeometry()&&(x=E.filter(function(w){const T=w.getGeometryFunction()(e);if(T){const R=T.getType();return R==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(k){const N=k.getType();return N==="Point"||N==="MultiPoint"}).length:R==="Point"||R==="MultiPoint"}})),this.writeStyles_){let w=E,T=E;e.getGeometry()&&(w=E.filter(function(R){const k=R.getGeometryFunction()(e);if(k){const N=k.getType();return N==="GeometryCollection"?k.getGeometriesArrayRecursive().filter(function(j){const B=j.getType();return B==="LineString"||B==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),T=E.filter(function(R){const k=R.getGeometryFunction()(e);if(k){const N=k.getType();return N==="GeometryCollection"?k.getGeometriesArrayRecursive().filter(function(j){const B=j.getType();return B==="Polygon"||B==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:w,polyStyles:T}}if(x.length&&i.name===void 0){const w=x[0].getText();w&&(i.name=w.getText())}}}const l=t[t.length-1].node,u=U0e[l.namespaceURI],h=Ss(i,u);if(zn(r,RS,Gi,h,t,u),a.length>0){const p=Ss(i,a);zn(r,RS,z0e,[{names:a,values:p}],t)}const f=t[0];let g=e.getGeometry();g&&(g=to(g,!0,f)),zn(r,RS,e7,[g],t)}const $0e=lt(Tt,["extrude","tessellate","altitudeMode","coordinates"]),W0e=lt(Tt,{extrude:qe(E0),tessellate:qe(E0),altitudeMode:qe(wn),coordinates:qe(m0e)});function Wf(n,e,t){const r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const a=t[t.length-1].node,o=$0e[a.namespaceURI],l=Ss(s,o);zn(i,W0e,Gi,l,t,o)}const H0e=lt(Tt,["color","fill","outline"]),kL=lt(Tt,{outerBoundaryIs:qe(PL),innerBoundaryIs:qe(PL)}),K0e=ro("innerBoundaryIs"),Y0e=ro("outerBoundaryIs");function r7(n,e,t){const r=e.getLinearRings(),i=r.shift(),s={node:n};zn(s,kL,K0e,r,t),zn(s,kL,Y0e,[i],t)}const X0e=lt(Tt,{color:qe(PE),fill:qe(E0),outline:qe(E0)});function q0e(n,e,t){const r={node:n},i=e.getFill(),s=e.getStroke(),a={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},o=t[t.length-1].node,l=H0e[o.namespaceURI],u=Ss(a,l);zn(r,X0e,Gi,u,t,l)}function i7(n,e){ds(n,Math.round(e*1e6)/1e6)}const Z0e=lt(Tt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Q0e=lt(Tt,{IconStyle:qe(b0e),LabelStyle:qe(k0e),LineStyle:qe(L0e),PolyStyle:qe(q0e)});function J0e(n,e,t){const r={node:n},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const u=e.pointStyles[0].getImage();u&&typeof u.getSrc=="function"&&(i.IconStyle=u)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,a=Z0e[s.namespaceURI],o=Ss(i,a);zn(r,Q0e,Gi,o,t,a)}function ege(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}function s7(n){const e=Object.keys(n.defs),t=e.length;let r,i;for(r=0;r<t;++r){const s=e[r];if(!_y(s)){const a=n.defs(s);let o=a.units;!o&&a.projName==="longlat"&&(o="degrees"),Zy(new Av({code:s,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:o}))}}for(r=0;r<t;++r){const s=e[r],a=_y(s);for(i=0;i<t;++i){const o=e[i],l=_y(o);if(!yy(s,o))if(n.defs[s]===n.defs[o])$S([a,l]);else{const u=n(s,o);WB(a,l,k4(a,l,u.forward),k4(l,a,u.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");s7(gn);let _h=null,Pm=null,xf=null;function AI(n){_h&&(n.removeLayer(_h),_h=null),Pm&&(n.removeLayer(Pm),Pm=null),xf=null}async function tge(n,e){try{const t=fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${t[0].toFixed(5)}, ${t[1].toFixed(5)}`);const r=gn("EPSG:4326","EPSG:28992",t);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;AI(n);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,a=Date.now(),o=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${a}`;console.log(" WFS URL:",o);const l=new AbortController,u=setTimeout(()=>l.abort(),1e4),h=await fetch(o,{signal:l.signal});if(clearTimeout(u),!h.ok)return console.error("WFS request failed:",h.status),!1;const f=await h.json();if(console.log(" WFS RESPONSE:",JSON.stringify(f).substring(0,500)),!f.features||f.features.length===0)return console.log("No parcel found at location"),!1;const g=f.features[0];console.log(" PARCEL ID:",g.id||g.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(g.bbox||"geen bbox"));const E=new Sb().readFeature(g,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),x=E.getGeometry();if(!x)return console.log("No geometry in parcel feature"),!1;const w=g.properties||{};console.log(` Parcel: ${w.category||"unknown"} - ${w.gewasnaam||w.gewas||"geen gewas"}`),console.log(` Geometry type: ${x.getType()}, extent: ${x.getExtent().map(M=>M.toFixed(0)).join(", ")}`);const T=x.getExtent(),R=T[2]-T[0],k=T[3]-T[1],N=Math.max(R,k)*.05,j=[T[0]-N,T[1]-N,T[2]+N,T[3]+N],B=Math.max(R,k)*.3,P=[T[0]-B,T[1]-B,T[2]+B,T[3]+B];xf=x,_h=new V$({source:new dW({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:j,zIndex:998}),_h.on("prerender",M=>{if(!xf)return;const F=M.context;if(!F)return;const O=M.frameState;if(!O)return;F.save(),F.beginPath(),(xf.getType()==="Polygon"?xf.getCoordinates()[0]:xf.getCoordinates()[0][0]).forEach((D,we)=>{const Ne=n.getPixelFromCoordinate(D);if(!Ne)return;const Le=O.pixelRatio,be=Ne[0]*Le,ce=Ne[1]*Le;we===0?F.moveTo(be,ce):F.lineTo(be,ce)}),F.closePath(),F.clip()}),_h.on("postrender",M=>{const F=M.context;F&&F.restore()}),n.addLayer(_h);const C=new Bp({features:[E]});return Pm=new Hp({source:C,style:new ur({fill:new ai({color:"rgba(0, 0, 0, 0)"}),stroke:new ys({color:"#dc2626",width:3})}),zIndex:999}),n.addLayer(Pm),console.log(" Parcel height map displayed"),!0}catch(t){return console.error("Failed to show parcel height map:",t),!1}}var sv={};sv.version="0.18.5";var a7=1252,nge=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],o7=function(n){nge.indexOf(n)!=-1&&(a7=n)};function rge(){o7(1252)}var Tp=function(n){o7(n)};function ige(){Tp(1200),rge()}var ly=function(e){return String.fromCharCode(e)},ML=function(e){return String.fromCharCode(e)},av,Bc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ip(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,l=i&63,isNaN(r)?o=l=64:isNaN(i)&&(l=64),e+=Bc.charAt(s)+Bc.charAt(a)+Bc.charAt(o)+Bc.charAt(l);return e}function Fl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,l=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Bc.indexOf(n.charAt(u++)),a=Bc.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Bc.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),l=Bc.indexOf(n.charAt(u++)),i=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var En=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),$l=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function Kh(n){return En?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function NL(n){return En?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var za=function(e){return En?$l(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function kE(n){if(typeof ArrayBuffer>"u")return za(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function w1(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function sge(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var vi=En?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:$l(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function age(n){for(var e=[],t=0,r=n.length+250,i=Kh(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Kh(65535),r=65530)}return e.push(i.slice(0,t)),vi(e)}var km=/\u0000/g,cy=/[\u0001-\u0006]/g;function Hf(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Ha(n,e){var t=""+n;return t.length>=e?t:pr("0",e-t.length)+t}function Nb(n,e){var t=""+n;return t.length>=e?t:pr(" ",e-t.length)+t}function ov(n,e){var t=""+n;return t.length>=e?t:t+pr(" ",e-t.length)}function oge(n,e){var t=""+Math.round(n);return t.length>=e?t:pr("0",e-t.length)+t}function lge(n,e){var t=""+n;return t.length>=e?t:pr("0",e-t.length)+t}var LL=Math.pow(2,32);function rf(n,e){if(n>LL||n<-LL)return oge(n,e);var t=Math.round(n);return lge(t,e)}function lv(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var OL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],bS=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function cge(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},DL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},uge={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function cv(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,l=1,u=0,h=0,f=Math.floor(i);u<e&&(f=Math.floor(i),o=f*a+s,h=f*u+l,!(i-f<5e-8));)i=1/(i-f),s=a,a=o,l=u,u=h;if(h>e&&(u>e?(h=l,o=s):(h=u,o=a)),!t)return[0,r*o,h];var g=Math.floor(r*o/h);return[g,r*o-g*h,h]}function uy(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),t&&(s=_ge(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var l7=new Date(1899,11,31,0,0,0),hge=l7.getTime(),dge=new Date(1900,2,1,0,0,0);function c7(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=dge&&(t+=1440*60*1e3),(t-(hge+(n.getTimezoneOffset()-l7.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Lb(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function fge(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function gge(n){var e=n<0?12:11,t=Lb(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function mge(n){var e=Lb(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function pge(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=gge(n):e===10?t=n.toFixed(10).substr(0,12):t=mge(n),Lb(fge(t.toUpperCase()))}function RI(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):pge(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return fu(14,c7(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function _ge(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function yge(n,e,t,r){var i="",s=0,a=0,o=t.y,l,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=t.m,u=e.length;break;case 3:return bS[t.m-1][1];case 5:return bS[t.m-1][0];default:return bS[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=t.d,u=e.length;break;case 3:return OL[t.q][0];default:return OL[t.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ha(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ha(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=t.D*24+t.H;break;case"[m]":case"[mm]":l=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":l=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var h=u>0?Ha(l,u):"";return h}function Uc(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var u7=/%/g;function xge(n,e,t){var r=e.replace(u7,""),i=e.length-r.length;return Al(n,r,t*Math.pow(10,2*i))+pr("%",i)}function vge(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Al(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function h7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+h7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var d7=/# (\?+)( ?)\/( ?)(\d+)/;function Ege(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?pr(" ",n[1].length+1+n[4].length):Nb(a,n[1].length)+n[2]+"/"+n[3]+Ha(o,n[4].length))}function wge(n,e,t){return t+(e===0?"":""+e)+pr(" ",n[1].length+2+n[4].length)}var f7=/^#*0*\.([0#]+)/,g7=/\).*[0#]/,m7=/\(###\) ###\\?-####/;function Ki(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function FL(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function jL(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Sge(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function Tge(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function ua(n,e,t){if(n.charCodeAt(0)===40&&!e.match(g7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ua("n",r,t):"("+ua("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return vge(n,e,t);if(e.indexOf("%")!==-1)return xge(n,e,t);if(e.indexOf("E")!==-1)return h7(e,t);if(e.charCodeAt(0)===36)return"$"+ua(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+rf(l,e.length);if(e.match(/^[#?]+$/))return i=rf(t,0),i==="0"&&(i=""),i.length>e.length?i:Ki(e.substr(0,e.length-i.length))+i;if(s=e.match(d7))return Ege(s,l,u);if(e.match(/^#+0+$/))return u+rf(l,e.length-e.indexOf("0"));if(s=e.match(f7))return i=FL(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Ki(s[1])).replace(/\.$/,"."+Ki(s[1])).replace(/\.(\d*)$/,function(E,x){return"."+x+pr("0",Ki(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+FL(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Uc(rf(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ua(n,e,-t):Uc(""+(Math.floor(t)+Sge(t,s[1].length)))+"."+Ha(jL(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return ua(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hf(ua(n,e.replace(/[\\-]/g,""),t)),a=0,Hf(Hf(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return a<i.length?i.charAt(a++):E==="0"?"0":""}));if(e.match(m7))return i=ua(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=cv(l,Math.pow(10,a)-1,!1),i=""+u,h=Al("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=ov(o[2],a),h.length<s[4].length&&(h=Ki(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=cv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Nb(o[1],a)+s[2]+"/"+s[3]+ov(o[2],a):pr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=rf(t,0),e.length<=i.length?i:Ki(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Ki(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=jL(t,s[1].length),t<0?"-"+ua(n,e,-t):Uc(Tge(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Ha(0,3-E.length):"")+E})+"."+Ha(a,s[1].length);switch(e){case"###,##0.00":return ua(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Uc(rf(l,0));return p!=="0"?u+p:"";case"###,###.00":return ua(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return ua(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Ige(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Al(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function Age(n,e,t){var r=e.replace(u7,""),i=e.length-r.length;return Al(n,r,t*Math.pow(10,2*i))+pr("%",i)}function p7(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+p7(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,h){return l+u+h.substr(0,(i+s)%i)+"."+h.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function Eo(n,e,t){if(n.charCodeAt(0)===40&&!e.match(g7)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Eo("n",r,t):"("+Eo("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Ige(n,e,t);if(e.indexOf("%")!==-1)return Age(n,e,t);if(e.indexOf("E")!==-1)return p7(e,t);if(e.charCodeAt(0)===36)return"$"+Eo(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,l=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Ha(l,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Ki(e.substr(0,e.length-i.length))+i;if(s=e.match(d7))return wge(s,l,u);if(e.match(/^#+0+$/))return u+Ha(l,e.length-e.indexOf("0"));if(s=e.match(f7))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Ki(s[1])).replace(/\.$/,"."+Ki(s[1])),i=i.replace(/\.(\d*)$/,function(E,x){return"."+x+pr("0",Ki(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Uc(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Eo(n,e,-t):Uc(""+t)+"."+pr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Eo(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Hf(Eo(n,e.replace(/[\\-]/g,""),t)),a=0,Hf(Hf(e.replace(/\\/g,"")).replace(/[0#]/g,function(E){return a<i.length?i.charAt(a++):E==="0"?"0":""}));if(e.match(m7))return i=Eo(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var h="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=cv(l,Math.pow(10,a)-1,!1),i=""+u,h=Al("n",s[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),i+=h+s[2]+"/"+s[3],h=ov(o[2],a),h.length<s[4].length&&(h=Ki(s[4].substr(s[4].length-h.length))+h),i+=h,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=cv(l,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Nb(o[1],a)+s[2]+"/"+s[3]+ov(o[2],a):pr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Ki(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var f=e.indexOf(".")-a,g=e.length-i.length-f;return Ki(e.substr(0,f)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+Eo(n,e,-t):Uc(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(E){return"00,"+(E.length<3?Ha(0,3-E.length):"")+E})+"."+Ha(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Uc(""+l);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return Eo(n,e.slice(0,e.lastIndexOf(".")),t)+Ki(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Al(n,e,t){return(t|0)===t?Eo(n,e,t):ua(n,e,t)}function Rge(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var _7=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function y7(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":lv(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(_7))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function bge(n,e,t,r){for(var i=[],s="",a=0,o="",l="t",u,h,f,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!lv(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(f=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(f);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),E=p==="("||p===")"?p:"t";i[i.length]={t:E,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=uy(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=uy(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},l=o;break;case"A":case"a":case"":var x={t:o,v:o};if(u==null&&(u=uy(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",a+=5,g="h"):(x.t="t",++a),u==null&&x.t==="T")return"";i[i.length]=x,l=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(_7)){if(u==null&&(u=uy(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",y7(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},l=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var w=0,T=0,R;for(a=i.length-1,l="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,l="h",w<1&&(w=1);break;case"s":(R=i[a].v.match(/\.0+$/))&&(T=Math.max(T,R[0].length-1)),w<3&&(w=3);case"d":case"y":case"M":case"e":l=i[a].t;break;case"m":l==="s"&&(i[a].t="M",w<2&&(w=2));break;case"X":break;case"Z":w<1&&i[a].v.match(/[Hh]/)&&(w=1),w<2&&i[a].v.match(/[Mm]/)&&(w=2),w<3&&i[a].v.match(/[Ss]/)&&(w=3)}switch(w){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var k="",N;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=yge(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(N=a+1;i[N]!=null&&((o=i[N].t)==="?"||o==="D"||(o===" "||o==="t")&&i[N+1]!=null&&(i[N+1].t==="?"||i[N+1].t==="t"&&i[N+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[N].v==="/"||i[N].v===" "&&i[N+1]!=null&&i[N+1].t=="?"));)i[a].v+=i[N].v,i[N]={v:"",t:";"},++N;k+=i[a].v,a=N-1;break;case"G":i[a].t="t",i[a].v=RI(e,t);break}var j="",B,P;if(k.length>0){k.charCodeAt(0)==40?(B=e<0&&k.charCodeAt(0)===45?-e:e,P=Al("n",k,B)):(B=e<0&&r>1?-e:e,P=Al("n",k,B),B<0&&i[0]&&i[0].t=="t"&&(P=P.substr(1),i[0].v="-"+i[0].v)),N=P.length-1;var C=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){C=a;break}var M=i.length;if(C===i.length&&P.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(N>=i[a].v.length-1?(N-=i[a].v.length,i[a].v=P.substr(N+1,i[a].v.length)):N<0?i[a].v="":(i[a].v=P.substr(0,N+1),N=-1),i[a].t="t",M=a);N>=0&&M<i.length&&(i[M].v=P.substr(0,N+1)+i[M].v)}else if(C!==i.length&&P.indexOf("E")===-1){for(N=P.indexOf(".")-1,a=C;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")-1:i[a].v.length-1,j=i[a].v.substr(h+1);h>=0;--h)N>=0&&(i[a].v.charAt(h)==="0"||i[a].v.charAt(h)==="#")&&(j=P.charAt(N--)+j);i[a].v=j,i[a].t="t",M=a}for(N>=0&&M<i.length&&(i[M].v=P.substr(0,N+1)+i[M].v),N=P.indexOf(".")+1,a=C;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==C)){for(h=i[a].v.indexOf(".")>-1&&a===C?i[a].v.indexOf(".")+1:0,j=i[a].v.substr(0,h);h<i[a].v.length;++h)N<P.length&&(j+=P.charAt(N++));i[a].v=j,i[a].t="t",M=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(B=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Al(i[a].t,i[a].v,B),i[a].t="t");var F="";for(a=0;a!==i.length;++a)i[a]!=null&&(F+=i[a].v);return F}var VL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function GL(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function Cge(n,e){var t=Rge(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(VL),o=t[1].match(VL);return GL(e,a)?[r,t[0]]:GL(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function fu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:yr)[n],r==null&&(r=t.table&&t.table[DL[n]]||yr[DL[n]]),r==null&&(r=uge[n]||"General");break}if(lv(r,0))return RI(e,t);e instanceof Date&&(e=c7(e,t.date1904));var i=Cge(r,e);if(lv(i[1]))return RI(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return bge(i[1],e,t,i[0])}function x7(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(yr[t]==null){e<0&&(e=t);continue}if(yr[t]==n){e=t;break}}e<0&&(e=391)}return yr[e]=n,e}function ME(n){for(var e=0;e!=392;++e)n[e]!==void 0&&x7(n[e],e)}function NE(){yr=cge()}var v7=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Pge(n){var e=typeof n=="number"?yr[n]:n;return e=e.replace(v7,"(\\d+)"),new RegExp("^"+e+"$")}function kge(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,l=-1;(e.match(v7)||[]).forEach(function(f,g){var p=parseInt(t[g+1],10);switch(f.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:i=p;break}}),l>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?u:r==-1&&i==-1&&s==-1?h:u+"T"+h}var Mge=(function(){var n={};n.version="1.2.0";function e(){for(var P=0,C=new Array(256),M=0;M!=256;++M)P=M,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,P=P&1?-306674912^P>>>1:P>>>1,C[M]=P;return typeof Int32Array<"u"?new Int32Array(C):C}var t=e();function r(P){var C=0,M=0,F=0,O=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)O[F]=P[F];for(F=0;F!=256;++F)for(M=P[F],C=256+F;C<4096;C+=256)M=O[C]=M>>>8^P[M&255];var W=[];for(F=1;F!=16;++F)W[F-1]=typeof Int32Array<"u"?O.subarray(F*256,F*256+256):O.slice(F*256,F*256+256);return W}var i=r(t),s=i[0],a=i[1],o=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],p=i[8],E=i[9],x=i[10],w=i[11],T=i[12],R=i[13],k=i[14];function N(P,C){for(var M=C^-1,F=0,O=P.length;F<O;)M=M>>>8^t[(M^P.charCodeAt(F++))&255];return~M}function j(P,C){for(var M=C^-1,F=P.length-15,O=0;O<F;)M=k[P[O++]^M&255]^R[P[O++]^M>>8&255]^T[P[O++]^M>>16&255]^w[P[O++]^M>>>24]^x[P[O++]]^E[P[O++]]^p[P[O++]]^g[P[O++]]^f[P[O++]]^h[P[O++]]^u[P[O++]]^l[P[O++]]^o[P[O++]]^a[P[O++]]^s[P[O++]]^t[P[O++]];for(F+=15;O<F;)M=M>>>8^t[(M^P[O++])&255];return~M}function B(P,C){for(var M=C^-1,F=0,O=P.length,W=0,D=0;F<O;)W=P.charCodeAt(F++),W<128?M=M>>>8^t[(M^W)&255]:W<2048?(M=M>>>8^t[(M^(192|W>>6&31))&255],M=M>>>8^t[(M^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,D=P.charCodeAt(F++)&1023,M=M>>>8^t[(M^(240|W>>8&7))&255],M=M>>>8^t[(M^(128|W>>2&63))&255],M=M>>>8^t[(M^(128|D>>6&15|(W&3)<<4))&255],M=M>>>8^t[(M^(128|D&63))&255]):(M=M>>>8^t[(M^(224|W>>12&15))&255],M=M>>>8^t[(M^(128|W>>6&63))&255],M=M>>>8^t[(M^(128|W&63))&255]);return~M}return n.table=t,n.bstr=N,n.buf=j,n.str=B,n})(),Gn=(function(){var e={};e.version="1.2.1";function t(U,q){for(var K=U.split("/"),Y=q.split("/"),Z=0,Q=0,pe=Math.min(K.length,Y.length);Z<pe;++Z){if(Q=K[Z].length-Y[Z].length)return Q;if(K[Z]!=Y[Z])return K[Z]<Y[Z]?-1:1}return K.length-Y.length}function r(U){if(U.charAt(U.length-1)=="/")return U.slice(0,-1).indexOf("/")===-1?U:r(U.slice(0,-1));var q=U.lastIndexOf("/");return q===-1?U:U.slice(0,q+1)}function i(U){if(U.charAt(U.length-1)=="/")return i(U.slice(0,-1));var q=U.lastIndexOf("/");return q===-1?U:U.slice(q+1)}function s(U,q){typeof q=="string"&&(q=new Date(q));var K=q.getHours();K=K<<6|q.getMinutes(),K=K<<5|q.getSeconds()>>>1,U.write_shift(2,K);var Y=q.getFullYear()-1980;Y=Y<<4|q.getMonth()+1,Y=Y<<5|q.getDate(),U.write_shift(2,Y)}function a(U){var q=U.read_shift(2)&65535,K=U.read_shift(2)&65535,Y=new Date,Z=K&31;K>>>=5;var Q=K&15;K>>>=4,Y.setMilliseconds(0),Y.setFullYear(K+1980),Y.setMonth(Q-1),Y.setDate(Z);var pe=q&31;q>>>=5;var Pe=q&63;return q>>>=6,Y.setHours(q),Y.setMinutes(Pe),Y.setSeconds(pe<<1),Y}function o(U){Bs(U,0);for(var q={},K=0;U.l<=U.length-4;){var Y=U.read_shift(2),Z=U.read_shift(2),Q=U.l+Z,pe={};switch(Y){case 21589:K=U.read_shift(1),K&1&&(pe.mtime=U.read_shift(4)),Z>5&&(K&2&&(pe.atime=U.read_shift(4)),K&4&&(pe.ctime=U.read_shift(4))),pe.mtime&&(pe.mt=new Date(pe.mtime*1e3));break}U.l=Q,q[Y]=pe}return q}var l;function u(){return l||(l={})}function h(U,q){if(U[0]==80&&U[1]==75)return Ir(U,q);if((U[0]|32)==109&&(U[1]|32)==105)return jr(U,q);if(U.length<512)throw new Error("CFB file size "+U.length+" < 512");var K=3,Y=512,Z=0,Q=0,pe=0,Pe=0,me=0,ye=[],xe=U.slice(0,512);Bs(xe,0);var We=f(xe);switch(K=We[0],K){case 3:Y=512;break;case 4:Y=4096;break;case 0:if(We[1]==0)return Ir(U,q);default:throw new Error("Major Version: Expected 3 or 4 saw "+K)}Y!==512&&(xe=U.slice(0,Y),Bs(xe,28));var et=U.slice(0,Y);g(xe,K);var ut=xe.read_shift(4,"i");if(K===3&&ut!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ut);xe.l+=4,pe=xe.read_shift(4,"i"),xe.l+=4,xe.chk("00100000","Mini Stream Cutoff Size: "),Pe=xe.read_shift(4,"i"),Z=xe.read_shift(4,"i"),me=xe.read_shift(4,"i"),Q=xe.read_shift(4,"i");for(var He=-1,Ke=0;Ke<109&&(He=xe.read_shift(4,"i"),!(He<0));++Ke)ye[Ke]=He;var jt=p(U,Y);w(me,Q,jt,Y,ye);var In=R(jt,pe,ye,Y);In[pe].name="!Directory",Z>0&&Pe!==D&&(In[Pe].name="!MiniFAT"),In[ye[0]].name="!FAT",In.fat_addrs=ye,In.ssz=Y;var Pn={},Qn=[],Aa=[],ea=[];k(pe,In,jt,Qn,Z,Pn,Aa,Pe),E(Aa,ea,Qn),Qn.shift();var ks={FileIndex:Aa,FullPaths:ea};return q&&q.raw&&(ks.raw={header:et,sectors:jt}),ks}function f(U){if(U[U.l]==80&&U[U.l+1]==75)return[0,0];U.chk(we,"Header Signature: "),U.l+=16;var q=U.read_shift(2,"u");return[U.read_shift(2,"u"),q]}function g(U,q){var K=9;switch(U.l+=2,K=U.read_shift(2)){case 9:if(q!=3)throw new Error("Sector Shift: Expected 9 saw "+K);break;case 12:if(q!=4)throw new Error("Sector Shift: Expected 12 saw "+K);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+K)}U.chk("0600","Mini Sector Shift: "),U.chk("000000000000","Reserved: ")}function p(U,q){for(var K=Math.ceil(U.length/q)-1,Y=[],Z=1;Z<K;++Z)Y[Z-1]=U.slice(Z*q,(Z+1)*q);return Y[K-1]=U.slice(K*q),Y}function E(U,q,K){for(var Y=0,Z=0,Q=0,pe=0,Pe=0,me=K.length,ye=[],xe=[];Y<me;++Y)ye[Y]=xe[Y]=Y,q[Y]=K[Y];for(;Pe<xe.length;++Pe)Y=xe[Pe],Z=U[Y].L,Q=U[Y].R,pe=U[Y].C,ye[Y]===Y&&(Z!==-1&&ye[Z]!==Z&&(ye[Y]=ye[Z]),Q!==-1&&ye[Q]!==Q&&(ye[Y]=ye[Q])),pe!==-1&&(ye[pe]=Y),Z!==-1&&Y!=ye[Y]&&(ye[Z]=ye[Y],xe.lastIndexOf(Z)<Pe&&xe.push(Z)),Q!==-1&&Y!=ye[Y]&&(ye[Q]=ye[Y],xe.lastIndexOf(Q)<Pe&&xe.push(Q));for(Y=1;Y<me;++Y)ye[Y]===Y&&(Q!==-1&&ye[Q]!==Q?ye[Y]=ye[Q]:Z!==-1&&ye[Z]!==Z&&(ye[Y]=ye[Z]));for(Y=1;Y<me;++Y)if(U[Y].type!==0){if(Pe=Y,Pe!=ye[Pe])do Pe=ye[Pe],q[Y]=q[Pe]+"/"+q[Y];while(Pe!==0&&ye[Pe]!==-1&&Pe!=ye[Pe]);ye[Y]=-1}for(q[0]+="/",Y=1;Y<me;++Y)U[Y].type!==2&&(q[Y]+="/")}function x(U,q,K){for(var Y=U.start,Z=U.size,Q=[],pe=Y;K&&Z>0&&pe>=0;)Q.push(q.slice(pe*W,pe*W+W)),Z-=W,pe=ch(K,pe*4);return Q.length===0?Ce(0):vi(Q).slice(0,U.size)}function w(U,q,K,Y,Z){var Q=D;if(U===D){if(q!==0)throw new Error("DIFAT chain shorter than expected")}else if(U!==-1){var pe=K[U],Pe=(Y>>>2)-1;if(!pe)return;for(var me=0;me<Pe&&(Q=ch(pe,me*4))!==D;++me)Z.push(Q);w(ch(pe,Y-4),q-1,K,Y,Z)}}function T(U,q,K,Y,Z){var Q=[],pe=[];Z||(Z=[]);var Pe=Y-1,me=0,ye=0;for(me=q;me>=0;){Z[me]=!0,Q[Q.length]=me,pe.push(U[me]);var xe=K[Math.floor(me*4/Y)];if(ye=me*4&Pe,Y<4+ye)throw new Error("FAT boundary crossed: "+me+" 4 "+Y);if(!U[xe])break;me=ch(U[xe],ye)}return{nodes:Q,data:YL([pe])}}function R(U,q,K,Y){var Z=U.length,Q=[],pe=[],Pe=[],me=[],ye=Y-1,xe=0,We=0,et=0,ut=0;for(xe=0;xe<Z;++xe)if(Pe=[],et=xe+q,et>=Z&&(et-=Z),!pe[et]){me=[];var He=[];for(We=et;We>=0;){He[We]=!0,pe[We]=!0,Pe[Pe.length]=We,me.push(U[We]);var Ke=K[Math.floor(We*4/Y)];if(ut=We*4&ye,Y<4+ut)throw new Error("FAT boundary crossed: "+We+" 4 "+Y);if(!U[Ke]||(We=ch(U[Ke],ut),He[We]))break}Q[et]={nodes:Pe,data:YL([me])}}return Q}function k(U,q,K,Y,Z,Q,pe,Pe){for(var me=0,ye=Y.length?2:0,xe=q[U].data,We=0,et=0,ut;We<xe.length;We+=128){var He=xe.slice(We,We+128);Bs(He,64),et=He.read_shift(2),ut=Vb(He,0,et-ye),Y.push(ut);var Ke={name:ut,type:He.read_shift(1),color:He.read_shift(1),L:He.read_shift(4,"i"),R:He.read_shift(4,"i"),C:He.read_shift(4,"i"),clsid:He.read_shift(16),state:He.read_shift(4,"i"),start:0,size:0},jt=He.read_shift(2)+He.read_shift(2)+He.read_shift(2)+He.read_shift(2);jt!==0&&(Ke.ct=N(He,He.l-8));var In=He.read_shift(2)+He.read_shift(2)+He.read_shift(2)+He.read_shift(2);In!==0&&(Ke.mt=N(He,He.l-8)),Ke.start=He.read_shift(4,"i"),Ke.size=He.read_shift(4,"i"),Ke.size<0&&Ke.start<0&&(Ke.size=Ke.type=0,Ke.start=D,Ke.name=""),Ke.type===5?(me=Ke.start,Z>0&&me!==D&&(q[me].name="!StreamData")):Ke.size>=4096?(Ke.storage="fat",q[Ke.start]===void 0&&(q[Ke.start]=T(K,Ke.start,q.fat_addrs,q.ssz)),q[Ke.start].name=Ke.name,Ke.content=q[Ke.start].data.slice(0,Ke.size)):(Ke.storage="minifat",Ke.size<0?Ke.size=0:me!==D&&Ke.start!==D&&q[me]&&(Ke.content=x(Ke,q[me].data,(q[Pe]||{}).data))),Ke.content&&Bs(Ke.content,0),Q[ut]=Ke,pe.push(Ke)}}function N(U,q){return new Date((Ws(U,q+4)/1e7*Math.pow(2,32)+Ws(U,q)/1e7-11644473600)*1e3)}function j(U,q){return u(),h(l.readFileSync(U),q)}function B(U,q){var K=q&&q.type;switch(K||En&&Buffer.isBuffer(U)&&(K="buffer"),K||"base64"){case"file":return j(U,q);case"base64":return h(za(Fl(U)),q);case"binary":return h(za(U),q)}return h(U,q)}function P(U,q){var K=q||{},Y=K.root||"Root Entry";if(U.FullPaths||(U.FullPaths=[]),U.FileIndex||(U.FileIndex=[]),U.FullPaths.length!==U.FileIndex.length)throw new Error("inconsistent CFB structure");U.FullPaths.length===0&&(U.FullPaths[0]=Y+"/",U.FileIndex[0]={name:Y,type:5}),K.CLSID&&(U.FileIndex[0].clsid=K.CLSID),C(U)}function C(U){var q="Sh33tJ5";if(!Gn.find(U,"/"+q)){var K=Ce(4);K[0]=55,K[1]=K[3]=50,K[2]=54,U.FileIndex.push({name:q,type:2,content:K,size:4,L:69,R:69,C:69}),U.FullPaths.push(U.FullPaths[0]+q),M(U)}}function M(U,q){P(U);for(var K=!1,Y=!1,Z=U.FullPaths.length-1;Z>=0;--Z){var Q=U.FileIndex[Z];switch(Q.type){case 0:Y?K=!0:(U.FileIndex.pop(),U.FullPaths.pop());break;case 1:case 2:case 5:Y=!0,isNaN(Q.R*Q.L*Q.C)&&(K=!0),Q.R>-1&&Q.L>-1&&Q.R==Q.L&&(K=!0);break;default:K=!0;break}}if(!(!K&&!q)){var pe=new Date(1987,1,19),Pe=0,me=Object.create?Object.create(null):{},ye=[];for(Z=0;Z<U.FullPaths.length;++Z)me[U.FullPaths[Z]]=!0,U.FileIndex[Z].type!==0&&ye.push([U.FullPaths[Z],U.FileIndex[Z]]);for(Z=0;Z<ye.length;++Z){var xe=r(ye[Z][0]);Y=me[xe],Y||(ye.push([xe,{name:i(xe).replace("/",""),type:1,clsid:Le,ct:pe,mt:pe,content:null}]),me[xe]=!0)}for(ye.sort(function(ut,He){return t(ut[0],He[0])}),U.FullPaths=[],U.FileIndex=[],Z=0;Z<ye.length;++Z)U.FullPaths[Z]=ye[Z][0],U.FileIndex[Z]=ye[Z][1];for(Z=0;Z<ye.length;++Z){var We=U.FileIndex[Z],et=U.FullPaths[Z];if(We.name=i(et).replace("/",""),We.L=We.R=We.C=-(We.color=1),We.size=We.content?We.content.length:0,We.start=0,We.clsid=We.clsid||Le,Z===0)We.C=ye.length>1?1:-1,We.size=0,We.type=5;else if(et.slice(-1)=="/"){for(Pe=Z+1;Pe<ye.length&&r(U.FullPaths[Pe])!=et;++Pe);for(We.C=Pe>=ye.length?-1:Pe,Pe=Z+1;Pe<ye.length&&r(U.FullPaths[Pe])!=r(et);++Pe);We.R=Pe>=ye.length?-1:Pe,We.type=1}else r(U.FullPaths[Z+1]||"")==r(et)&&(We.R=Z+1),We.type=2}}}function F(U,q){var K=q||{};if(K.fileType=="mad")return Vr(U,K);switch(M(U),K.fileType){case"zip":return Tn(U,K)}var Y=(function(ut){for(var He=0,Ke=0,jt=0;jt<ut.FileIndex.length;++jt){var In=ut.FileIndex[jt];if(In.content){var Pn=In.content.length;Pn>0&&(Pn<4096?He+=Pn+63>>6:Ke+=Pn+511>>9)}}for(var Qn=ut.FullPaths.length+3>>2,Aa=He+7>>3,ea=He+127>>7,ks=Aa+Ke+Qn+ea,vr=ks+127>>7,Wl=vr<=109?0:Math.ceil((vr-109)/127);ks+vr+Wl+127>>7>vr;)Wl=++vr<=109?0:Math.ceil((vr-109)/127);var ir=[1,Wl,vr,ea,Qn,Ke,He,0];return ut.FileIndex[0].size=He<<6,ir[7]=(ut.FileIndex[0].start=ir[0]+ir[1]+ir[2]+ir[3]+ir[4]+ir[5])+(ir[6]+7>>3),ir})(U),Z=Ce(Y[7]<<9),Q=0,pe=0;{for(Q=0;Q<8;++Q)Z.write_shift(1,Ne[Q]);for(Q=0;Q<8;++Q)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),Q=0;Q<3;++Q)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,Y[2]),Z.write_shift(4,Y[0]+Y[1]+Y[2]+Y[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,Y[3]?Y[0]+Y[1]+Y[2]-1:D),Z.write_shift(4,Y[3]),Z.write_shift(-4,Y[1]?Y[0]-1:D),Z.write_shift(4,Y[1]),Q=0;Q<109;++Q)Z.write_shift(-4,Q<Y[2]?Y[1]+Q:-1)}if(Y[1])for(pe=0;pe<Y[1];++pe){for(;Q<236+pe*127;++Q)Z.write_shift(-4,Q<Y[2]?Y[1]+Q:-1);Z.write_shift(-4,pe===Y[1]-1?D:pe+1)}var Pe=function(ut){for(pe+=ut;Q<pe-1;++Q)Z.write_shift(-4,Q+1);ut&&(++Q,Z.write_shift(-4,D))};for(pe=Q=0,pe+=Y[1];Q<pe;++Q)Z.write_shift(-4,be.DIFSECT);for(pe+=Y[2];Q<pe;++Q)Z.write_shift(-4,be.FATSECT);Pe(Y[3]),Pe(Y[4]);for(var me=0,ye=0,xe=U.FileIndex[0];me<U.FileIndex.length;++me)xe=U.FileIndex[me],xe.content&&(ye=xe.content.length,!(ye<4096)&&(xe.start=pe,Pe(ye+511>>9)));for(Pe(Y[6]+7>>3);Z.l&511;)Z.write_shift(-4,be.ENDOFCHAIN);for(pe=Q=0,me=0;me<U.FileIndex.length;++me)xe=U.FileIndex[me],xe.content&&(ye=xe.content.length,!(!ye||ye>=4096)&&(xe.start=pe,Pe(ye+63>>6)));for(;Z.l&511;)Z.write_shift(-4,be.ENDOFCHAIN);for(Q=0;Q<Y[4]<<2;++Q){var We=U.FullPaths[Q];if(!We||We.length===0){for(me=0;me<17;++me)Z.write_shift(4,0);for(me=0;me<3;++me)Z.write_shift(4,-1);for(me=0;me<12;++me)Z.write_shift(4,0);continue}xe=U.FileIndex[Q],Q===0&&(xe.start=xe.size?xe.start-1:D);var et=Q===0&&K.root||xe.name;if(ye=2*(et.length+1),Z.write_shift(64,et,"utf16le"),Z.write_shift(2,ye),Z.write_shift(1,xe.type),Z.write_shift(1,xe.color),Z.write_shift(-4,xe.L),Z.write_shift(-4,xe.R),Z.write_shift(-4,xe.C),xe.clsid)Z.write_shift(16,xe.clsid,"hex");else for(me=0;me<4;++me)Z.write_shift(4,0);Z.write_shift(4,xe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,xe.start),Z.write_shift(4,xe.size),Z.write_shift(4,0)}for(Q=1;Q<U.FileIndex.length;++Q)if(xe=U.FileIndex[Q],xe.size>=4096)if(Z.l=xe.start+1<<9,En&&Buffer.isBuffer(xe.content))xe.content.copy(Z,Z.l,0,xe.size),Z.l+=xe.size+511&-512;else{for(me=0;me<xe.size;++me)Z.write_shift(1,xe.content[me]);for(;me&511;++me)Z.write_shift(1,0)}for(Q=1;Q<U.FileIndex.length;++Q)if(xe=U.FileIndex[Q],xe.size>0&&xe.size<4096)if(En&&Buffer.isBuffer(xe.content))xe.content.copy(Z,Z.l,0,xe.size),Z.l+=xe.size+63&-64;else{for(me=0;me<xe.size;++me)Z.write_shift(1,xe.content[me]);for(;me&63;++me)Z.write_shift(1,0)}if(En)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function O(U,q){var K=U.FullPaths.map(function(me){return me.toUpperCase()}),Y=K.map(function(me){var ye=me.split("/");return ye[ye.length-(me.slice(-1)=="/"?2:1)]}),Z=!1;q.charCodeAt(0)===47?(Z=!0,q=K[0].slice(0,-1)+q):Z=q.indexOf("/")!==-1;var Q=q.toUpperCase(),pe=Z===!0?K.indexOf(Q):Y.indexOf(Q);if(pe!==-1)return U.FileIndex[pe];var Pe=!Q.match(cy);for(Q=Q.replace(km,""),Pe&&(Q=Q.replace(cy,"!")),pe=0;pe<K.length;++pe)if((Pe?K[pe].replace(cy,"!"):K[pe]).replace(km,"")==Q||(Pe?Y[pe].replace(cy,"!"):Y[pe]).replace(km,"")==Q)return U.FileIndex[pe];return null}var W=64,D=-2,we="d0cf11e0a1b11ae1",Ne=[208,207,17,224,161,177,26,225],Le="00000000000000000000000000000000",be={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:D,FREESECT:-1,HEADER_SIGNATURE:we,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Le,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(U,q,K){u();var Y=F(U,K);l.writeFileSync(q,Y)}function Re(U){for(var q=new Array(U.length),K=0;K<U.length;++K)q[K]=String.fromCharCode(U[K]);return q.join("")}function Ae(U,q){var K=F(U,q);switch(q&&q.type||"buffer"){case"file":return u(),l.writeFileSync(q.filename,K),K;case"binary":return typeof K=="string"?K:Re(K);case"base64":return Ip(typeof K=="string"?K:Re(K));case"buffer":if(En)return Buffer.isBuffer(K)?K:$l(K);case"array":return typeof K=="string"?za(K):K}return K}var ie;function V(U){try{var q=U.InflateRaw,K=new q;if(K._processChunk(new Uint8Array([3,0]),K._finishFlushFlag),K.bytesRead)ie=U;else throw new Error("zlib does not expose bytesRead")}catch(Y){console.error("cannot use native zlib: "+(Y.message||Y))}}function re(U,q){if(!ie)return zi(U,q);var K=ie.InflateRaw,Y=new K,Z=Y._processChunk(U.slice(U.l),Y._finishFlushFlag);return U.l+=Y.bytesRead,Z}function te(U){return ie?ie.deflateRawSync(U):Ze(U)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],de=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Se(U){var q=(U<<1|U<<11)&139536|(U<<5|U<<15)&558144;return(q>>16|q>>8|q)&255}for(var Fe=typeof Uint8Array<"u",je=Fe?new Uint8Array(256):[],Qe=0;Qe<256;++Qe)je[Qe]=Se(Qe);function gt(U,q){var K=je[U&255];return q<=8?K>>>8-q:(K=K<<8|je[U>>8&255],q<=16?K>>>16-q:(K=K<<8|je[U>>16&255],K>>>24-q))}function _t(U,q){var K=q&7,Y=q>>>3;return(U[Y]|(K<=6?0:U[Y+1]<<8))>>>K&3}function Lt(U,q){var K=q&7,Y=q>>>3;return(U[Y]|(K<=5?0:U[Y+1]<<8))>>>K&7}function nn(U,q){var K=q&7,Y=q>>>3;return(U[Y]|(K<=4?0:U[Y+1]<<8))>>>K&15}function Ut(U,q){var K=q&7,Y=q>>>3;return(U[Y]|(K<=3?0:U[Y+1]<<8))>>>K&31}function De(U,q){var K=q&7,Y=q>>>3;return(U[Y]|(K<=1?0:U[Y+1]<<8))>>>K&127}function Xt(U,q,K){var Y=q&7,Z=q>>>3,Q=(1<<K)-1,pe=U[Z]>>>Y;return K<8-Y||(pe|=U[Z+1]<<8-Y,K<16-Y)||(pe|=U[Z+2]<<16-Y,K<24-Y)||(pe|=U[Z+3]<<24-Y),pe&Q}function Te(U,q,K){var Y=q&7,Z=q>>>3;return Y<=5?U[Z]|=(K&7)<<Y:(U[Z]|=K<<Y&255,U[Z+1]=(K&7)>>8-Y),q+3}function ge(U,q,K){var Y=q&7,Z=q>>>3;return K=(K&1)<<Y,U[Z]|=K,q+1}function b(U,q,K){var Y=q&7,Z=q>>>3;return K<<=Y,U[Z]|=K&255,K>>>=8,U[Z+1]=K,q+8}function Et(U,q,K){var Y=q&7,Z=q>>>3;return K<<=Y,U[Z]|=K&255,K>>>=8,U[Z+1]=K&255,U[Z+2]=K>>>8,q+16}function X(U,q){var K=U.length,Y=2*K>q?2*K:q+5,Z=0;if(K>=q)return U;if(En){var Q=NL(Y);if(U.copy)U.copy(Q);else for(;Z<U.length;++Z)Q[Z]=U[Z];return Q}else if(Fe){var pe=new Uint8Array(Y);if(pe.set)pe.set(U);else for(;Z<K;++Z)pe[Z]=U[Z];return pe}return U.length=Y,U}function Ot(U){for(var q=new Array(U),K=0;K<U;++K)q[K]=0;return q}function ne(U,q,K){var Y=1,Z=0,Q=0,pe=0,Pe=0,me=U.length,ye=Fe?new Uint16Array(32):Ot(32);for(Q=0;Q<32;++Q)ye[Q]=0;for(Q=me;Q<K;++Q)U[Q]=0;me=U.length;var xe=Fe?new Uint16Array(me):Ot(me);for(Q=0;Q<me;++Q)ye[Z=U[Q]]++,Y<Z&&(Y=Z),xe[Q]=0;for(ye[0]=0,Q=1;Q<=Y;++Q)ye[Q+16]=Pe=Pe+ye[Q-1]<<1;for(Q=0;Q<me;++Q)Pe=U[Q],Pe!=0&&(xe[Q]=ye[Pe+16]++);var We=0;for(Q=0;Q<me;++Q)if(We=U[Q],We!=0)for(Pe=gt(xe[Q],Y)>>Y-We,pe=(1<<Y+4-We)-1;pe>=0;--pe)q[Pe|pe<<We]=We&15|Q<<4;return Y}var z=Fe?new Uint16Array(512):Ot(512),le=Fe?new Uint16Array(32):Ot(32);if(!Fe){for(var $e=0;$e<512;++$e)z[$e]=0;for($e=0;$e<32;++$e)le[$e]=0}(function(){for(var U=[],q=0;q<32;q++)U.push(5);ne(U,le,32);var K=[];for(q=0;q<=143;q++)K.push(8);for(;q<=255;q++)K.push(9);for(;q<=279;q++)K.push(7);for(;q<=287;q++)K.push(8);ne(K,z,288)})();var Ie=(function(){for(var q=Fe?new Uint8Array(32768):[],K=0,Y=0;K<Oe.length-1;++K)for(;Y<Oe[K+1];++Y)q[Y]=K;for(;Y<32768;++Y)q[Y]=29;var Z=Fe?new Uint8Array(259):[];for(K=0,Y=0;K<de.length-1;++K)for(;Y<de[K+1];++Y)Z[Y]=K;function Q(Pe,me){for(var ye=0;ye<Pe.length;){var xe=Math.min(65535,Pe.length-ye),We=ye+xe==Pe.length;for(me.write_shift(1,+We),me.write_shift(2,xe),me.write_shift(2,~xe&65535);xe-- >0;)me[me.l++]=Pe[ye++]}return me.l}function pe(Pe,me){for(var ye=0,xe=0,We=Fe?new Uint16Array(32768):[];xe<Pe.length;){var et=Math.min(65535,Pe.length-xe);if(et<10){for(ye=Te(me,ye,+(xe+et==Pe.length)),ye&7&&(ye+=8-(ye&7)),me.l=ye/8|0,me.write_shift(2,et),me.write_shift(2,~et&65535);et-- >0;)me[me.l++]=Pe[xe++];ye=me.l*8;continue}ye=Te(me,ye,+(xe+et==Pe.length)+2);for(var ut=0;et-- >0;){var He=Pe[xe];ut=(ut<<5^He)&32767;var Ke=-1,jt=0;if((Ke=We[ut])&&(Ke|=xe&-32768,Ke>xe&&(Ke-=32768),Ke<xe))for(;Pe[Ke+jt]==Pe[xe+jt]&&jt<250;)++jt;if(jt>2){He=Z[jt],He<=22?ye=b(me,ye,je[He+1]>>1)-1:(b(me,ye,3),ye+=5,b(me,ye,je[He-23]>>5),ye+=3);var In=He<8?0:He-4>>2;In>0&&(Et(me,ye,jt-de[He]),ye+=In),He=q[xe-Ke],ye=b(me,ye,je[He]>>3),ye-=3;var Pn=He<4?0:He-2>>1;Pn>0&&(Et(me,ye,xe-Ke-Oe[He]),ye+=Pn);for(var Qn=0;Qn<jt;++Qn)We[ut]=xe&32767,ut=(ut<<5^Pe[xe])&32767,++xe;et-=jt-1}else He<=143?He=He+48:ye=ge(me,ye,1),ye=b(me,ye,je[He]),We[ut]=xe&32767,++xe}ye=b(me,ye,0)-1}return me.l=(ye+7)/8|0,me.l}return function(me,ye){return me.length<8?Q(me,ye):pe(me,ye)}})();function Ze(U){var q=Ce(50+Math.floor(U.length*1.1)),K=Ie(U,q);return q.slice(0,K)}var ht=Fe?new Uint16Array(32768):Ot(32768),vt=Fe?new Uint16Array(32768):Ot(32768),wt=Fe?new Uint16Array(128):Ot(128),bt=1,en=1;function Dr(U,q){var K=Ut(U,q)+257;q+=5;var Y=Ut(U,q)+1;q+=5;var Z=nn(U,q)+4;q+=4;for(var Q=0,pe=Fe?new Uint8Array(19):Ot(19),Pe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],me=1,ye=Fe?new Uint8Array(8):Ot(8),xe=Fe?new Uint8Array(8):Ot(8),We=pe.length,et=0;et<Z;++et)pe[ee[et]]=Q=Lt(U,q),me<Q&&(me=Q),ye[Q]++,q+=3;var ut=0;for(ye[0]=0,et=1;et<=me;++et)xe[et]=ut=ut+ye[et-1]<<1;for(et=0;et<We;++et)(ut=pe[et])!=0&&(Pe[et]=xe[ut]++);var He=0;for(et=0;et<We;++et)if(He=pe[et],He!=0){ut=je[Pe[et]]>>8-He;for(var Ke=(1<<7-He)-1;Ke>=0;--Ke)wt[ut|Ke<<He]=He&7|et<<3}var jt=[];for(me=1;jt.length<K+Y;)switch(ut=wt[De(U,q)],q+=ut&7,ut>>>=3){case 16:for(Q=3+_t(U,q),q+=2,ut=jt[jt.length-1];Q-- >0;)jt.push(ut);break;case 17:for(Q=3+Lt(U,q),q+=3;Q-- >0;)jt.push(0);break;case 18:for(Q=11+De(U,q),q+=7;Q-- >0;)jt.push(0);break;default:jt.push(ut),me<ut&&(me=ut);break}var In=jt.slice(0,K),Pn=jt.slice(K);for(et=K;et<286;++et)In[et]=0;for(et=Y;et<30;++et)Pn[et]=0;return bt=ne(In,ht,286),en=ne(Pn,vt,30),q}function bs(U,q){if(U[0]==3&&!(U[1]&3))return[Kh(q),2];for(var K=0,Y=0,Z=NL(q||1<<18),Q=0,pe=Z.length>>>0,Pe=0,me=0;(Y&1)==0;){if(Y=Lt(U,K),K+=3,Y>>>1)Y>>1==1?(Pe=9,me=5):(K=Dr(U,K),Pe=bt,me=en);else{K&7&&(K+=8-(K&7));var ye=U[K>>>3]|U[(K>>>3)+1]<<8;if(K+=32,ye>0)for(!q&&pe<Q+ye&&(Z=X(Z,Q+ye),pe=Z.length);ye-- >0;)Z[Q++]=U[K>>>3],K+=8;continue}for(;;){!q&&pe<Q+32767&&(Z=X(Z,Q+32767),pe=Z.length);var xe=Xt(U,K,Pe),We=Y>>>1==1?z[xe]:ht[xe];if(K+=We&15,We>>>=4,(We>>>8&255)===0)Z[Q++]=We;else{if(We==256)break;We-=257;var et=We<8?0:We-4>>2;et>5&&(et=0);var ut=Q+de[We];et>0&&(ut+=Xt(U,K,et),K+=et),xe=Xt(U,K,me),We=Y>>>1==1?le[xe]:vt[xe],K+=We&15,We>>>=4;var He=We<4?0:We-2>>1,Ke=Oe[We];for(He>0&&(Ke+=Xt(U,K,He),K+=He),!q&&pe<ut&&(Z=X(Z,ut+100),pe=Z.length);Q<ut;)Z[Q]=Z[Q-Ke],++Q}}}return q?[Z,K+7>>>3]:[Z.slice(0,Q),K+7>>>3]}function zi(U,q){var K=U.slice(U.l||0),Y=bs(K,q);return U.l+=Y[1],Y[0]}function $i(U,q){if(U)typeof console<"u"&&console.error(q);else throw new Error(q)}function Ir(U,q){var K=U;Bs(K,0);var Y=[],Z=[],Q={FileIndex:Y,FullPaths:Z};P(Q,{root:q.root});for(var pe=K.length-4;(K[pe]!=80||K[pe+1]!=75||K[pe+2]!=5||K[pe+3]!=6)&&pe>=0;)--pe;K.l=pe+4,K.l+=4;var Pe=K.read_shift(2);K.l+=6;var me=K.read_shift(4);for(K.l=me,pe=0;pe<Pe;++pe){K.l+=20;var ye=K.read_shift(4),xe=K.read_shift(4),We=K.read_shift(2),et=K.read_shift(2),ut=K.read_shift(2);K.l+=8;var He=K.read_shift(4),Ke=o(K.slice(K.l+We,K.l+We+et));K.l+=We+et+ut;var jt=K.l;K.l=He+4,ci(K,ye,xe,Q,Ke),K.l=jt}return Q}function ci(U,q,K,Y,Z){U.l+=2;var Q=U.read_shift(2),pe=U.read_shift(2),Pe=a(U);if(Q&8257)throw new Error("Unsupported ZIP encryption");for(var me=U.read_shift(4),ye=U.read_shift(4),xe=U.read_shift(4),We=U.read_shift(2),et=U.read_shift(2),ut="",He=0;He<We;++He)ut+=String.fromCharCode(U[U.l++]);if(et){var Ke=o(U.slice(U.l,U.l+et));(Ke[21589]||{}).mt&&(Pe=Ke[21589].mt),((Z||{})[21589]||{}).mt&&(Pe=Z[21589].mt)}U.l+=et;var jt=U.slice(U.l,U.l+ye);switch(pe){case 8:jt=re(U,xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+pe)}var In=!1;Q&8&&(me=U.read_shift(4),me==134695760&&(me=U.read_shift(4),In=!0),ye=U.read_shift(4),xe=U.read_shift(4)),ye!=q&&$i(In,"Bad compressed size: "+q+" != "+ye),xe!=K&&$i(In,"Bad uncompressed size: "+K+" != "+xe),on(Y,ut,jt,{unsafe:!0,mt:Pe})}function Tn(U,q){var K=q||{},Y=[],Z=[],Q=Ce(1),pe=K.compression?8:0,Pe=0,me=0,ye=0,xe=0,We=0,et=U.FullPaths[0],ut=et,He=U.FileIndex[0],Ke=[],jt=0;for(me=1;me<U.FullPaths.length;++me)if(ut=U.FullPaths[me].slice(et.length),He=U.FileIndex[me],!(!He.size||!He.content||ut=="Sh33tJ5")){var In=xe,Pn=Ce(ut.length);for(ye=0;ye<ut.length;++ye)Pn.write_shift(1,ut.charCodeAt(ye)&127);Pn=Pn.slice(0,Pn.l),Ke[We]=Mge.buf(He.content,0);var Qn=He.content;pe==8&&(Qn=te(Qn)),Q=Ce(30),Q.write_shift(4,67324752),Q.write_shift(2,20),Q.write_shift(2,Pe),Q.write_shift(2,pe),He.mt?s(Q,He.mt):Q.write_shift(4,0),Q.write_shift(-4,Ke[We]),Q.write_shift(4,Qn.length),Q.write_shift(4,He.content.length),Q.write_shift(2,Pn.length),Q.write_shift(2,0),xe+=Q.length,Y.push(Q),xe+=Pn.length,Y.push(Pn),xe+=Qn.length,Y.push(Qn),Q=Ce(46),Q.write_shift(4,33639248),Q.write_shift(2,0),Q.write_shift(2,20),Q.write_shift(2,Pe),Q.write_shift(2,pe),Q.write_shift(4,0),Q.write_shift(-4,Ke[We]),Q.write_shift(4,Qn.length),Q.write_shift(4,He.content.length),Q.write_shift(2,Pn.length),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(4,0),Q.write_shift(4,In),jt+=Q.l,Z.push(Q),jt+=Pn.length,Z.push(Pn),++We}return Q=Ce(22),Q.write_shift(4,101010256),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(2,We),Q.write_shift(2,We),Q.write_shift(4,jt),Q.write_shift(4,xe),Q.write_shift(2,0),vi([vi(Y),vi(Z),Q])}var Cs={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ps(U,q){if(U.ctype)return U.ctype;var K=U.name||"",Y=K.match(/\.([^\.]+)$/);return Y&&Cs[Y[1]]||q&&(Y=(K=q).match(/[\.\\]([^\.\\])+$/),Y&&Cs[Y[1]])?Cs[Y[1]]:"application/octet-stream"}function nr(U){for(var q=Ip(U),K=[],Y=0;Y<q.length;Y+=76)K.push(q.slice(Y,Y+76));return K.join(`\r
`)+`\r
`}function rs(U){var q=U.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ye){var xe=ye.charCodeAt(0).toString(16).toUpperCase();return"="+(xe.length==1?"0"+xe:xe)});q=q.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),q.charAt(0)==`
`&&(q="=0D"+q.slice(1)),q=q.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var K=[],Y=q.split(`\r
`),Z=0;Z<Y.length;++Z){var Q=Y[Z];if(Q.length==0){K.push("");continue}for(var pe=0;pe<Q.length;){var Pe=76,me=Q.slice(pe,pe+Pe);me.charAt(Pe-1)=="="?Pe--:me.charAt(Pe-2)=="="?Pe-=2:me.charAt(Pe-3)=="="&&(Pe-=3),me=Q.slice(pe,pe+Pe),pe+=Pe,pe<Q.length&&(me+="="),K.push(me)}}return K.join(`\r
`)}function Fr(U){for(var q=[],K=0;K<U.length;++K){for(var Y=U[K];K<=U.length&&Y.charAt(Y.length-1)=="=";)Y=Y.slice(0,Y.length-1)+U[++K];q.push(Y)}for(var Z=0;Z<q.length;++Z)q[Z]=q[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(Q){return String.fromCharCode(parseInt(Q.slice(1),16))});return za(q.join(`\r
`))}function rr(U,q,K){for(var Y="",Z="",Q="",pe,Pe=0;Pe<10;++Pe){var me=q[Pe];if(!me||me.match(/^\s*$/))break;var ye=me.match(/^(.*?):\s*([^\s].*)$/);if(ye)switch(ye[1].toLowerCase()){case"content-location":Y=ye[2].trim();break;case"content-type":Q=ye[2].trim();break;case"content-transfer-encoding":Z=ye[2].trim();break}}switch(++Pe,Z.toLowerCase()){case"base64":pe=za(Fl(q.slice(Pe).join("")));break;case"quoted-printable":pe=Fr(q.slice(Pe));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var xe=on(U,Y.slice(K.length),pe,{unsafe:!0});Q&&(xe.ctype=Q)}function jr(U,q){if(Re(U.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var K=q&&q.root||"",Y=(En&&Buffer.isBuffer(U)?U.toString("binary"):Re(U)).split(`\r
`),Z=0,Q="";for(Z=0;Z<Y.length;++Z)if(Q=Y[Z],!!/^Content-Location:/i.test(Q)&&(Q=Q.slice(Q.indexOf("file")),K||(K=Q.slice(0,Q.lastIndexOf("/")+1)),Q.slice(0,K.length)!=K))for(;K.length>0&&(K=K.slice(0,K.length-1),K=K.slice(0,K.lastIndexOf("/")+1),Q.slice(0,K.length)!=K););var pe=(Y[1]||"").match(/boundary="(.*?)"/);if(!pe)throw new Error("MAD cannot find boundary");var Pe="--"+(pe[1]||""),me=[],ye=[],xe={FileIndex:me,FullPaths:ye};P(xe);var We,et=0;for(Z=0;Z<Y.length;++Z){var ut=Y[Z];ut!==Pe&&ut!==Pe+"--"||(et++&&rr(xe,Y.slice(We,Z),K),We=Z)}return xe}function Vr(U,q){var K=q||{},Y=K.boundary||"SheetJS";Y="------="+Y;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Y.slice(2)+'"',"","",""],Q=U.FullPaths[0],pe=Q,Pe=U.FileIndex[0],me=1;me<U.FullPaths.length;++me)if(pe=U.FullPaths[me].slice(Q.length),Pe=U.FileIndex[me],!(!Pe.size||!Pe.content||pe=="Sh33tJ5")){pe=pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(jt){return"_x"+jt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(jt){return"_u"+jt.charCodeAt(0).toString(16)+"_"});for(var ye=Pe.content,xe=En&&Buffer.isBuffer(ye)?ye.toString("binary"):Re(ye),We=0,et=Math.min(1024,xe.length),ut=0,He=0;He<=et;++He)(ut=xe.charCodeAt(He))>=32&&ut<128&&++We;var Ke=We>=et*4/5;Z.push(Y),Z.push("Content-Location: "+(K.root||"file:///C:/SheetJS/")+pe),Z.push("Content-Transfer-Encoding: "+(Ke?"quoted-printable":"base64")),Z.push("Content-Type: "+Ps(Pe,pe)),Z.push(""),Z.push(Ke?rs(xe):nr(xe))}return Z.push(Y+`--\r
`),Z.join(`\r
`)}function Ar(U){var q={};return P(q,U),q}function on(U,q,K,Y){var Z=Y&&Y.unsafe;Z||P(U);var Q=!Z&&Gn.find(U,q);if(!Q){var pe=U.FullPaths[0];q.slice(0,pe.length)==pe?pe=q:(pe.slice(-1)!="/"&&(pe+="/"),pe=(pe+q).replace("//","/")),Q={name:i(q),type:2},U.FileIndex.push(Q),U.FullPaths.push(pe),Z||Gn.utils.cfb_gc(U)}return Q.content=K,Q.size=K?K.length:0,Y&&(Y.CLSID&&(Q.clsid=Y.CLSID),Y.mt&&(Q.mt=Y.mt),Y.ct&&(Q.ct=Y.ct)),Q}function hr(U,q){P(U);var K=Gn.find(U,q);if(K){for(var Y=0;Y<U.FileIndex.length;++Y)if(U.FileIndex[Y]==K)return U.FileIndex.splice(Y,1),U.FullPaths.splice(Y,1),!0}return!1}function xr(U,q,K){P(U);var Y=Gn.find(U,q);if(Y){for(var Z=0;Z<U.FileIndex.length;++Z)if(U.FileIndex[Z]==Y)return U.FileIndex[Z].name=i(K),U.FullPaths[Z]=K,!0}return!1}function is(U){M(U,!0)}return e.find=O,e.read=B,e.parse=h,e.write=Ae,e.writeFile=ce,e.utils={cfb_new:Ar,cfb_add:on,cfb_del:hr,cfb_mov:xr,cfb_gc:is,ReadShift:Nm,CheckField:j7,prep_blob:Bs,bconcat:vi,use_zlib:V,_deflateRaw:Ze,_inflateRaw:zi,consts:be},e})();function Nge(n){return typeof n=="string"?kE(n):Array.isArray(n)?sge(n):n}function S1(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=kE(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Rp(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([Nge(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=w1(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+n)}function Ii(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function BL(n,e){for(var t=[],r=Ii(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function Ob(n){for(var e=[],t=Ii(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function LE(n){for(var e=[],t=Ii(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function Lge(n){for(var e=[],t=Ii(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var uv=new Date(1899,11,30,0,0,0);function Ts(n,e){var t=n.getTime(),r=uv.getTime()+(n.getTimezoneOffset()-uv.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var E7=new Date,Oge=uv.getTime()+(E7.getTimezoneOffset()-uv.getTimezoneOffset())*6e4,UL=E7.getTimezoneOffset();function w7(n){var e=new Date;return e.setTime(n*24*60*60*1e3+Oge),e.getTimezoneOffset()!==UL&&e.setTime(e.getTime()+(e.getTimezoneOffset()-UL)*6e4),e}var zL=new Date("2017-02-19T19:06:09.000Z"),S7=isNaN(zL.getFullYear())?new Date("2/19/17"):zL,Dge=S7.getFullYear()==2017;function ns(n,e){var t=new Date(n);if(Dge)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(S7.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function OE(n,e){if(En&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function Is(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=Is(n[t]));return e}function pr(n,e){for(var t="";t.length<e;)t+=n;return t}function Rl(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var Fge=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ap(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&Fge.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function qt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return En?r=$l(t):r=age(t),Gn.utils.cfb_add(n,e,r)}Gn.utils.cfb_add(n,e,t)}else n.file(e,t)}function Db(){return Gn.utils.cfb_new()}var Or=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,jge={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Fb=Ob(jge),jb=/[&<>'"]/g,Vge=/[\u0000-\u0008\u000b-\u001f]/g;function Fn(n){var e=n+"";return e.replace(jb,function(t){return Fb[t]}).replace(Vge,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function $L(n){return Fn(n).replace(/ /g,"_x0020_")}var T7=/[\u0000-\u001f]/g;function Gge(n){var e=n+"";return e.replace(jb,function(t){return Fb[t]}).replace(/\n/g,"<br/>").replace(T7,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function Bge(n){var e=n+"";return e.replace(jb,function(t){return Fb[t]}).replace(T7,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Uge(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function zge(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function CS(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function WL(n){var e=Kh(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function HL(n){return $l(n,"binary").toString("utf8")}var hy="foo bar baz",Mm=En&&(HL(hy)==CS(hy)&&HL||WL(hy)==CS(hy)&&WL)||CS,Rp=En?function(n){return $l(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},$ge=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),I7=/(^\s|\s$|\n)/;function Ei(n,e){return"<"+n+(e.match(I7)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function bp(n){return Ii(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function tt(n,e,t){return"<"+n+(t!=null?bp(t):"")+(e!=null?(e.match(I7)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function bI(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Wge(n,e){switch(typeof n){case"string":var t=tt("vt:lpwstr",Fn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return tt((n|0)==n?"vt:i4":"vt:r8",Fn(String(n)));case"boolean":return tt("vt:bool",n?"true":"false")}if(n instanceof Date)return tt("vt:filetime",bI(n));throw new Error("Unable to serialize "+n)}var ni={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},V0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],$s={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Hge(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function Kge(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var KL=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},YL=En?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:$l(e)})):KL(n)}:KL,XL=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(sm(n,i)));return r.join("").replace(km,"")},Vb=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(km,""):XL(n,e,t)}:XL,qL=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},A7=En?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):qL(n,e,t)}:qL,ZL=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(vf(n,i)));return r.join("")},T1=En?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):ZL(e,t,r)}:ZL,R7=function(n,e){var t=Ws(n,e);return t>0?T1(n,e+4,e+4+t-1):""},b7=R7,C7=function(n,e){var t=Ws(n,e);return t>0?T1(n,e+4,e+4+t-1):""},P7=C7,k7=function(n,e){var t=2*Ws(n,e);return t>0?T1(n,e+4,e+4+t-1):""},M7=k7,N7=function(e,t){var r=Ws(e,t);return r>0?Vb(e,t+4,t+4+r):""},L7=N7,O7=function(n,e){var t=Ws(n,e);return t>0?T1(n,e+4,e+4+t):""},D7=O7,F7=function(n,e){return Hge(n,e)},hv=F7,Gb=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};En&&(b7=function(e,t){if(!Buffer.isBuffer(e))return R7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},P7=function(e,t){if(!Buffer.isBuffer(e))return C7(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},M7=function(e,t){if(!Buffer.isBuffer(e))return k7(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},L7=function(e,t){if(!Buffer.isBuffer(e))return N7(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},D7=function(e,t){if(!Buffer.isBuffer(e))return O7(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},hv=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):F7(e,t)},Gb=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var vf=function(n,e){return n[e]},sm=function(n,e){return n[e+1]*256+n[e]},Yge=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},Ws=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},ch=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},Xge=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Nm(n,e){var t="",r,i,s=[],a,o,l,u;switch(e){case"dbcs":if(u=this.l,En&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(l=0;l<n;++l)t+=String.fromCharCode(sm(this,u)),u+=2;n*=2;break;case"utf8":t=T1(this,this.l,this.l+n);break;case"utf16le":n*=2,t=Vb(this,this.l,this.l+n);break;case"wstr":return Nm.call(this,n,"dbcs");case"lpstr-ansi":t=b7(this,this.l),n=4+Ws(this,this.l);break;case"lpstr-cp":t=P7(this,this.l),n=4+Ws(this,this.l);break;case"lpwstr":t=M7(this,this.l),n=4+2*Ws(this,this.l);break;case"lpp4":n=4+Ws(this,this.l),t=L7(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+Ws(this,this.l),t=D7(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=vf(this,this.l+n++))!==0;)s.push(ly(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=sm(this,this.l+n))!==0;)s.push(ly(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,l=0;l<n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=vf(this,u),this.l=u+1,o=Nm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ly(sm(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,l=0;l!=n;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return a=vf(this,u),this.l=u+1,o=Nm.call(this,n-l,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(ly(vf(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=vf(this,this.l),this.l++,r;case 2:return r=(e==="i"?Yge:sm)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?ch:Xge)(this,this.l),this.l+=4,r):(i=Ws(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=hv(this,this.l):i=hv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=A7(this,this.l,n);break}}return this.l+=n,t}var qge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},Zge=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},Qge=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function Jge(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)Qge(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,qge(this,e,this.l);break;case 8:if(r=8,t==="f"){Kge(this,e,this.l);break}case 16:break;case-4:r=4,Zge(this,e,this.l);break}return this.l+=r,this}function j7(n,e){var t=A7(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Bs(n,e){n.l=e,n.read_shift=Nm,n.chk=j7,n.write_shift=Jge}function $o(n,e){n.l+=e}function Ce(n){var e=Kh(n);return Bs(e,0),e}function ws(){var n=[],e=En?256:2048,t=function(u){var h=Ce(u);return Bs(h,0),h},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),vi(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Ge(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Hxe[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&Gb(t)&&n.push(t)}}function Lm(n,e,t){var r=Is(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function QL(n,e,t){var r=Is(n);return r.s=Lm(r.s,e.s,t),r.e=Lm(r.e,e.s,t),r}function Om(n,e){if(n.cRel&&n.c<0)for(n=Is(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=Is(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Vn(n);return!n.cRel&&n.cRel!=null&&(t=nme(t)),!n.rRel&&n.rRel!=null&&(t=eme(t)),t}function PS(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Bi(n.s.c)+":"+(n.e.cRel?"":"$")+Bi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+Si(n.s.r)+":"+(n.e.rRel?"":"$")+Si(n.e.r):Om(n.s,e.biff)+":"+Om(n.e,e.biff)}function Bb(n){return parseInt(tme(n),10)-1}function Si(n){return""+(n+1)}function eme(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function tme(n){return n.replace(/\$(\d+)$/,"$1")}function Ub(n){for(var e=rme(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Bi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function nme(n){return n.replace(/^([A-Z])/,"$$$1")}function rme(n){return n.replace(/^\$([A-Z])/,"$1")}function ime(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ii(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function Vn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Js(n){var e=n.indexOf(":");return e==-1?{s:ii(n),e:ii(n)}:{s:ii(n.slice(0,e)),e:ii(n.slice(e+1))}}function Nr(n,e){return typeof e>"u"||typeof e=="number"?Nr(n.s,n.e):(typeof n!="string"&&(n=Vn(n)),typeof e!="string"&&(e=Vn(e)),n==e?n:n+":"+e)}function Zn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function JL(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=fu(n.z,t?Ts(e):e)}catch{}try{return n.w=fu((n.XF||{}).numFmtId||(t?14:0),t?Ts(e):e)}catch{return""+e}}function jl(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?I1[n.v]||n.v:e==null?JL(n,n.v):JL(n,e))}function ld(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function V7(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?ii(r.origin):r.origin;a=l.r,o=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var h=Zn(s["!ref"]);u.s.c=h.s.c,u.s.r=h.s.r,u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),a==-1&&(u.e.r=a=h.e.r+1)}for(var f=0;f!=e.length;++f)if(e[f]){if(!Array.isArray(e[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[f].length;++g)if(!(typeof e[f][g]>"u")){var p={v:e[f][g]},E=a+f,x=o+g;if(u.s.r>E&&(u.s.r=E),u.s.c>x&&(u.s.c=x),u.e.r<E&&(u.e.r=E),u.e.c<x&&(u.e.c=x),e[f][g]&&typeof e[f][g]=="object"&&!Array.isArray(e[f][g])&&!(e[f][g]instanceof Date))p=e[f][g];else if(Array.isArray(p.v)&&(p.f=e[f][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||yr[14],r.cellDates?(p.t="d",p.w=fu(p.z,Ts(p.v))):(p.t="n",p.v=Ts(p.v),p.w=fu(p.z,p.v))):p.t="s";if(i)s[E]||(s[E]=[]),s[E][x]&&s[E][x].z&&(p.z=s[E][x].z),s[E][x]=p;else{var w=Vn({c:x,r:E});s[w]&&s[w].z&&(p.z=s[w].z),s[w]=p}}}return u.s.c<1e7&&(s["!ref"]=Nr(u)),s}function G0(n,e){return V7(null,n,e)}function sme(n){return n.read_shift(4,"i")}function qa(n,e){return e||(e=Ce(4)),e.write_shift(4,n),e}function Ui(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function si(n,e){var t=!1;return e==null&&(t=!0,e=Ce(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function ame(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function ome(n,e){return e||(e=Ce(4)),e.write_shift(2,0),e.write_shift(2,0),e}function zb(n,e){var t=n.l,r=n.read_shift(1),i=Ui(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),l=0;l!=o;++l)s.push(ame(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function lme(n,e){var t=!1;return e==null&&(t=!0,e=Ce(15+4*n.t.length)),e.write_shift(1,0),si(n.t,e),t?e.slice(0,e.l):e}var cme=zb;function ume(n,e){var t=!1;return e==null&&(t=!0,e=Ce(23+4*n.t.length)),e.write_shift(1,1),si(n.t,e),e.write_shift(4,1),ome({},e),t?e.slice(0,e.l):e}function Ia(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function cd(n,e){return e==null&&(e=Ce(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function ud(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function hd(n,e){return e==null&&(e=Ce(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var hme=Ui,G7=si;function $b(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function dv(n,e){var t=!1;return e==null&&(t=!0,e=Ce(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var dme=Ui,CI=$b,Wb=dv;function B7(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?hv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):ch(e,0)>>2;return t?i/100:i}function U7(n,e){e==null&&(e=Ce(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function z7(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function fme(n,e){return e||(e=Ce(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var dd=z7,B0=fme;function U0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Yh(n,e){return(e||Ce(8)).write_shift(8,n,"f")}function gme(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),l=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=Sme[i];u&&(e.rgb=uO(u));break;case 2:e.rgb=uO([a,o,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function fv(n,e){if(e||(e=Ce(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function mme(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function pme(n,e){e||(e=Ce(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var $7=2,Vs=3,dy=11,gv=19,fy=64,_me=65,yme=71,xme=4108,vme=4126,_i=80,eO={1:{n:"CodePage",t:$7},2:{n:"Category",t:_i},3:{n:"PresentationFormat",t:_i},4:{n:"ByteCount",t:Vs},5:{n:"LineCount",t:Vs},6:{n:"ParagraphCount",t:Vs},7:{n:"SlideCount",t:Vs},8:{n:"NoteCount",t:Vs},9:{n:"HiddenCount",t:Vs},10:{n:"MultimediaClipCount",t:Vs},11:{n:"ScaleCrop",t:dy},12:{n:"HeadingPairs",t:xme},13:{n:"TitlesOfParts",t:vme},14:{n:"Manager",t:_i},15:{n:"Company",t:_i},16:{n:"LinksUpToDate",t:dy},17:{n:"CharacterCount",t:Vs},19:{n:"SharedDoc",t:dy},22:{n:"HyperlinksChanged",t:dy},23:{n:"AppVersion",t:Vs,p:"version"},24:{n:"DigSig",t:_me},26:{n:"ContentType",t:_i},27:{n:"ContentStatus",t:_i},28:{n:"Language",t:_i},29:{n:"Version",t:_i},255:{},2147483648:{n:"Locale",t:gv},2147483651:{n:"Behavior",t:gv},1919054434:{}},tO={1:{n:"CodePage",t:$7},2:{n:"Title",t:_i},3:{n:"Subject",t:_i},4:{n:"Author",t:_i},5:{n:"Keywords",t:_i},6:{n:"Comments",t:_i},7:{n:"Template",t:_i},8:{n:"LastAuthor",t:_i},9:{n:"RevNumber",t:_i},10:{n:"EditTime",t:fy},11:{n:"LastPrinted",t:fy},12:{n:"CreatedDate",t:fy},13:{n:"ModifiedDate",t:fy},14:{n:"PageCount",t:Vs},15:{n:"WordCount",t:Vs},16:{n:"CharCount",t:Vs},17:{n:"Thumbnail",t:yme},18:{n:"Application",t:_i},19:{n:"DocSecurity",t:Vs},255:{},2147483648:{n:"Locale",t:gv},2147483651:{n:"Behavior",t:gv},1919054434:{}};function Eme(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var wme=Eme([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Sme=Is(wme),I1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Tme={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},gy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function W7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function H7(n,e){var t=Lge(Tme),r=[],i;r[r.length]=Or,r[r.length]=tt("Types",null,{xmlns:ni.CT,"xmlns:xsd":ni.xsd,"xmlns:xsi":ni.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return tt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){n[l]&&n[l].length>0&&(i=n[l][0],r[r.length]=tt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:gy[l][e.bookType]||gy[l].xlsx}))},a=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:gy[l][e.bookType]||gy[l].xlsx})})},o=function(l){(n[l]||[]).forEach(function(u){r[r.length]=tt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[l][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var pn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function K7(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Kf(n){var e=[Or,tt("Relationships",null,{xmlns:ni.RELS})];return Ii(n["!id"]).forEach(function(t){e[e.length]=tt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Ln(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[pn.HLINK,pn.XPATH,pn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function Ime(n){var e=[Or];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function nO(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Ame(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Rme(n){var e=[Or];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(nO(n[t][0],n[t][1])),e.push(Ame("",n[t][0]));return e.push(nO("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Y7(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+sv.version+"</meta:generator></office:meta></office:document-meta>"}var Th=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function kS(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Fn(e),r[r.length]=t?tt(n,e,t):Ei(n,e))}function X7(n,e){var t=e||{},r=[Or,tt("cp:coreProperties",null,{"xmlns:cp":ni.CORE_PROPS,"xmlns:dc":ni.dc,"xmlns:dcterms":ni.dcterms,"xmlns:dcmitype":ni.dcmitype,"xmlns:xsi":ni.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&kS("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:bI(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&kS("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:bI(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Th.length;++s){var a=Th[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&kS(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Yf=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],q7=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Z7(n){var e=[],t=tt;return n||(n={}),n.Application="SheetJS",e[e.length]=Or,e[e.length]=tt("Properties",null,{xmlns:ni.EXT_PROPS,"xmlns:vt":ni.vt}),Yf.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Fn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Fn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function Q7(n){var e=[Or,tt("Properties",null,{xmlns:ni.CUST_PROPS,"xmlns:vt":ni.vt})];if(!n)return e.join("");var t=1;return Ii(n).forEach(function(i){++t,e[e.length]=tt("property",Wge(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Fn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var rO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function bme(n,e){var t=[];return Ii(rO).map(function(r){for(var i=0;i<Th.length;++i)if(Th[i][1]==r)return Th[i];for(i=0;i<Yf.length;++i)if(Yf[i][1]==r)return Yf[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Ei(rO[r[1]]||r[1],i))}}),tt("DocumentProperties",t.join(""),{xmlns:$s.o})}function Cme(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&Ii(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Th.length;++a)if(s==Th[a][1])return;for(a=0;a<Yf.length;++a)if(s==Yf[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),i.push(tt($L(s),o,{"dt:dt":l}))}}),e&&Ii(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(tt($L(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+$s.o+'">'+i.join("")+"</"+r+">"}function Pme(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Ce(8);return a.write_shift(4,r),a.write_shift(4,i),a}function iO(n,e){var t=Ce(4),r=Ce(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Ce(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Pme(e);break;case 31:case 80:for(r=Ce(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return vi([t,r])}var J7=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function kme(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function sO(n,e,t){var r=Ce(8),i=[],s=[],a=8,o=0,l=Ce(8),u=Ce(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),s.push(l),i.push(u),a+=8+l.length,!e){u=Ce(8),u.write_shift(4,0),i.unshift(u);var h=[Ce(4)];for(h[0].write_shift(4,n.length),o=0;o<n.length;++o){var f=n[o][0];for(l=Ce(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=vi(h),s.unshift(l),a+=8+l.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(J7.indexOf(n[o][0])>-1||q7.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var E=t[p];if(E.p=="version"&&typeof g=="string"){var x=g.split(".");g=(+x[0]<<16)+(+x[1]||0)}l=iO(E.t,g)}else{var w=kme(g);w==-1&&(w=31,g=String(g)),l=iO(w,g)}s.push(l),u=Ce(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+l.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),vi([r].concat(i).concat(s))}function aO(n,e,t,r,i,s){var a=Ce(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Gn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var l=sO(n,t,r);if(o.push(l),i){var u=sO(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+l.length),o.push(u)}return vi(o)}function Mme(n,e){e||(e=Ce(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function Nme(n,e){return n.read_shift(e)===1}function Yi(n,e){return e||(e=Ce(2)),e.write_shift(2,+!!n),e}function eV(n){return n.read_shift(2,"u")}function fa(n,e){return e||(e=Ce(2)),e.write_shift(2,n),e}function tV(n,e,t){return t||(t=Ce(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function nV(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function Lme(n){var e=n.t||"",t=Ce(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Ce(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return vi(i)}function Ome(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function Dme(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):Ome(n,r,t)}function Fme(n,e,t){if(t.biff>5)return Dme(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function rV(n,e,t){return t||(t=Ce(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function oO(n,e){e||(e=Ce(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function jme(n){var e=Ce(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),oO(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&oO(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),t=0;t<r.length-3*l;++t)e.write_shift(1,r.charCodeAt(t+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Xh(n,e,t,r){return r||(r=Ce(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function Vme(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function Gme(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function iV(n,e){return e||(e=Ce(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function Hb(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ce(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Bme(n,e){var t=!e||e.biff==8,r=Ce(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Ume(n,e){var t=!e||e.biff>=8?2:1,r=Ce(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function zme(n,e){var t=Ce(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=Lme(n[i]);var s=vi([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function $me(){var n=Ce(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Wme(n){var e=Ce(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Hme(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Ce(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function Kme(n,e,t,r){var i=Ce(10);return Xh(n,e,r,i),i.write_shift(4,t),i}function Yme(n,e,t,r,i){var s=!i||i.biff==8,a=Ce(8+ +s+(1+s)*t.length);return Xh(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function Xme(n,e,t,r){var i=t&&t.biff==5;r||(r=Ce(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function qme(n,e){var t=e.biff==8||!e.biff?4:2,r=Ce(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function lO(n,e,t,r){var i=t&&t.biff==5;r||(r=Ce(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Zme(n){var e=Ce(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Qme(n,e,t,r,i,s){var a=Ce(8);return Xh(n,e,r,a),tV(t,s,a),a}function Jme(n,e,t,r){var i=Ce(14);return Xh(n,e,r,i),Yh(t,i),i}function epe(n,e,t){if(t.biff<8)return tpe(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(Vme(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function tpe(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=nV(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function npe(n){var e=Ce(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)iV(n[t],e);return e}function rpe(n){var e=Ce(24),t=ii(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return vi([e,jme(n[1])])}function ipe(n){var e=n[1].Tooltip,t=Ce(10+2*(e.length+1));t.write_shift(2,2048);var r=ii(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function spe(n){return n||(n=Ce(4)),n.write_shift(2,1),n.write_shift(2,1),n}function ape(n,e,t){if(!t.cellStyles)return $o(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),l=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:l};return(t.biff>=5||!t.biff)&&(u.level=l>>8&7),u}function ope(n,e){var t=Ce(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function lpe(n){for(var e=Ce(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function cpe(n,e,t){var r=Ce(15);return R1(r,n,e),r.write_shift(8,t,"f"),r}function upe(n,e,t){var r=Ce(9);return R1(r,n,e),r.write_shift(2,t),r}var hpe=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Ob({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,l){var u=[],h=Kh(1);switch(l.type){case"base64":h=za(Fl(o));break;case"binary":h=za(o);break;case"buffer":case"array":h=o;break}Bs(h,0);var f=h.read_shift(1),g=!!(f&136),p=!1,E=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:E=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,w=521;f==2&&(x=h.read_shift(2)),h.l+=3,f!=2&&(x=h.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(w=h.read_shift(2));var T=h.read_shift(2),R=l.codepage||1252;f!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(R=n[h[h.l]]),h.l+=1,h.l+=2),E&&(h.l+=36);for(var k=[],N={},j=Math.min(h.length,f==2?521:w-10-(p?264:0)),B=E?32:11;h.l<j&&h[h.l]!=13;)switch(N={},N.name=av.utils.decode(R,h.slice(h.l,h.l+B)).replace(/[\u0000\r\n].*$/g,""),h.l+=B,N.type=String.fromCharCode(h.read_shift(1)),f!=2&&!E&&(N.offset=h.read_shift(4)),N.len=h.read_shift(1),f==2&&(N.offset=h.read_shift(2)),N.dec=h.read_shift(1),N.name.length&&k.push(N),f!=2&&(h.l+=E?13:14),N.type){case"B":(!p||N.len!=8)&&l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(h[h.l]!==13&&(h.l=w-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=w;var P=0,C=0;for(u[0]=[],C=0;C!=k.length;++C)u[0][C]=k[C].name;for(;x-- >0;){if(h[h.l]===42){h.l+=T;continue}for(++h.l,u[++P]=[],C=0,C=0;C!=k.length;++C){var M=h.slice(h.l,h.l+k[C].len);h.l+=k[C].len,Bs(M,0);var F=av.utils.decode(R,M);switch(k[C].type){case"C":F.trim().length&&(u[P][C]=F.replace(/\s+$/,""));break;case"D":F.length===8?u[P][C]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):u[P][C]=F;break;case"F":u[P][C]=parseFloat(F.trim());break;case"+":case"I":u[P][C]=E?M.read_shift(-4,"i")^2147483648:M.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":u[P][C]=!0;break;case"N":case"F":u[P][C]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[P][C]="##MEMO##"+(E?parseInt(F.trim(),10):M.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(u[P][C]=+F||0);break;case"@":u[P][C]=new Date(M.read_shift(-8,"f")-621356832e5);break;case"T":u[P][C]=new Date((M.read_shift(4)-2440588)*864e5+M.read_shift(4));break;case"Y":u[P][C]=M.read_shift(4,"i")/1e4+M.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[P][C]=-M.read_shift(-8,"f");break;case"B":if(p&&k[C].len==8){u[P][C]=M.read_shift(8,"f");break}case"G":case"P":M.l+=k[C].len;break;case"0":if(k[C].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[C].type)}}}if(f!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=k,u}function r(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var h=G0(t(o,u),u);return h["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,h}function i(o,l){try{return ld(r(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var u=l||{};if(+u.codepage>=0&&Tp(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var h=ws(),f=xv(o,{header:1,raw:!0,cellDates:!0}),g=f[0],p=f.slice(1),E=o["!cols"]||[],x=0,w=0,T=0,R=1;for(x=0;x<g.length;++x){if(((E[x]||{}).DBF||{}).name){g[x]=E[x].DBF.name,++T;continue}if(g[x]!=null){if(++T,typeof g[x]=="number"&&(g[x]=g[x].toString(10)),typeof g[x]!="string")throw new Error("DBF Invalid column name "+g[x]+" |"+typeof g[x]+"|");if(g.indexOf(g[x])!==x){for(w=0;w<1024;++w)if(g.indexOf(g[x]+"_"+w)==-1){g[x]+="_"+w;break}}}}var k=Zn(o["!ref"]),N=[],j=[],B=[];for(x=0;x<=k.e.c-k.s.c;++x){var P="",C="",M=0,F=[];for(w=0;w<p.length;++w)p[w][x]!=null&&F.push(p[w][x]);if(F.length==0||g[x]==null){N[x]="?";continue}for(w=0;w<F.length;++w){switch(typeof F[w]){case"number":C="B";break;case"string":C="C";break;case"boolean":C="L";break;case"object":C=F[w]instanceof Date?"D":"C";break;default:C="C"}M=Math.max(M,String(F[w]).length),P=P&&P!=C?"C":C}M>250&&(M=250),C=((E[x]||{}).DBF||{}).type,C=="C"&&E[x].DBF.len>M&&(M=E[x].DBF.len),P=="B"&&C=="N"&&(P="N",B[x]=E[x].DBF.dec,M=E[x].DBF.len),j[x]=P=="C"||C=="N"?M:s[P]||0,R+=j[x],N[x]=P}var O=h.next(32);for(O.write_shift(4,318902576),O.write_shift(4,p.length),O.write_shift(2,296+32*T),O.write_shift(2,R),x=0;x<4;++x)O.write_shift(4,0);for(O.write_shift(4,0|(+e[a7]||3)<<8),x=0,w=0;x<g.length;++x)if(g[x]!=null){var W=h.next(32),D=(g[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);W.write_shift(1,D,"sbcs"),W.write_shift(1,N[x]=="?"?"C":N[x],"sbcs"),W.write_shift(4,w),W.write_shift(1,j[x]||s[N[x]]||0),W.write_shift(1,B[x]||0),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(1,0),W.write_shift(4,0),W.write_shift(4,0),w+=j[x]||s[N[x]]||0}var we=h.next(264);for(we.write_shift(4,13),x=0;x<65;++x)we.write_shift(4,0);for(x=0;x<p.length;++x){var Ne=h.next(R);for(Ne.write_shift(1,0),w=0;w<g.length;++w)if(g[w]!=null)switch(N[w]){case"L":Ne.write_shift(1,p[x][w]==null?63:p[x][w]?84:70);break;case"B":Ne.write_shift(8,p[x][w]||0,"f");break;case"N":var Le="0";for(typeof p[x][w]=="number"&&(Le=p[x][w].toFixed(B[w]||0)),T=0;T<j[w]-Le.length;++T)Ne.write_shift(1,32);Ne.write_shift(1,Le,"sbcs");break;case"D":p[x][w]?(Ne.write_shift(4,("0000"+p[x][w].getFullYear()).slice(-4),"sbcs"),Ne.write_shift(2,("00"+(p[x][w].getMonth()+1)).slice(-2),"sbcs"),Ne.write_shift(2,("00"+p[x][w].getDate()).slice(-2),"sbcs")):Ne.write_shift(8,"00000000","sbcs");break;case"C":var be=String(p[x][w]!=null?p[x][w]:"").slice(0,j[w]);for(Ne.write_shift(1,be,"sbcs"),T=0;T<j[w]-be.length;++T)Ne.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),dpe=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Ii(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var E=n[p];return typeof E=="number"?ML(E):E},r=function(g,p,E){var x=p.charCodeAt(0)-32<<4|E.charCodeAt(0)-48;return x==59?g:ML(x)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(Fl(g),p);case"binary":return s(g,p);case"buffer":return s(En&&Buffer.isBuffer(g)?g.toString("binary"):w1(g),p);case"array":return s(OE(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var E=g.split(/[\n\r]+/),x=-1,w=-1,T=0,R=0,k=[],N=[],j=null,B={},P=[],C=[],M=[],F=0,O;for(+p.codepage>=0&&Tp(+p.codepage);T!==E.length;++T){F=0;var W=E[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),D=W.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),we=D[0],Ne;if(W.length>0)switch(we){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":D[1].charAt(0)=="P"&&N.push(W.slice(3).replace(/;;/g,";"));break;case"C":var Le=!1,be=!1,ce=!1,Re=!1,Ae=-1,ie=-1;for(R=1;R<D.length;++R)switch(D[R].charAt(0)){case"A":break;case"X":w=parseInt(D[R].slice(1))-1,be=!0;break;case"Y":for(x=parseInt(D[R].slice(1))-1,be||(w=0),O=k.length;O<=x;++O)k[O]=[];break;case"K":Ne=D[R].slice(1),Ne.charAt(0)==='"'?Ne=Ne.slice(1,Ne.length-1):Ne==="TRUE"?Ne=!0:Ne==="FALSE"?Ne=!1:isNaN(Rl(Ne))?isNaN(Ap(Ne).getDate())||(Ne=ns(Ne)):(Ne=Rl(Ne),j!==null&&y7(j)&&(Ne=w7(Ne))),Le=!0;break;case"E":Re=!0;var V=u1e(D[R].slice(1),{r:x,c:w});k[x][w]=[k[x][w],V];break;case"S":ce=!0,k[x][w]=[k[x][w],"S5S"];break;case"G":break;case"R":Ae=parseInt(D[R].slice(1))-1;break;case"C":ie=parseInt(D[R].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}if(Le&&(k[x][w]&&k[x][w].length==2?k[x][w][0]=Ne:k[x][w]=Ne,j=null),ce){if(Re)throw new Error("SYLK shared formula cannot have own formula");var re=Ae>-1&&k[Ae][ie];if(!re||!re[1])throw new Error("SYLK shared formula cannot find base");k[x][w][1]=h1e(re[1],{r:x-Ae,c:w-ie})}break;case"F":var te=0;for(R=1;R<D.length;++R)switch(D[R].charAt(0)){case"X":w=parseInt(D[R].slice(1))-1,++te;break;case"Y":for(x=parseInt(D[R].slice(1))-1,O=k.length;O<=x;++O)k[O]=[];break;case"M":F=parseInt(D[R].slice(1))/20;break;case"F":break;case"G":break;case"P":j=N[parseInt(D[R].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(M=D[R].slice(1).split(" "),O=parseInt(M[0],10);O<=parseInt(M[1],10);++O)F=parseInt(M[2],10),C[O-1]=F===0?{hidden:!0}:{wch:F},Kb(C[O-1]);break;case"C":w=parseInt(D[R].slice(1))-1,C[w]||(C[w]={});break;case"R":x=parseInt(D[R].slice(1))-1,P[x]||(P[x]={}),F>0?(P[x].hpt=F,P[x].hpx=cV(F)):F===0&&(P[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}te<1&&(j=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+W)}}return P.length>0&&(B["!rows"]=P),C.length>0&&(B["!cols"]=C),p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),[k,B]}function a(g,p){var E=i(g,p),x=E[0],w=E[1],T=G0(x,p);return Ii(w).forEach(function(R){T[R]=w[R]}),T}function o(g,p){return ld(a(g,p),p)}function l(g,p,E,x){var w="C;Y"+(E+1)+";X"+(x+1)+";K";switch(g.t){case"n":w+=g.v||0,g.f&&!g.F&&(w+=";E"+Xb(g.f,{r:E,c:x}));break;case"b":w+=g.v?"TRUE":"FALSE";break;case"e":w+=g.w||g.v;break;case"d":w+='"'+(g.w||g.v)+'"';break;case"s":w+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return w}function u(g,p){p.forEach(function(E,x){var w="F;W"+(x+1)+" "+(x+1)+" ";E.hidden?w+="0":(typeof E.width=="number"&&!E.wpx&&(E.wpx=mv(E.width)),typeof E.wpx=="number"&&!E.wch&&(E.wch=pv(E.wpx)),typeof E.wch=="number"&&(w+=Math.round(E.wch))),w.charAt(w.length-1)!=" "&&g.push(w)})}function h(g,p){p.forEach(function(E,x){var w="F;";E.hidden?w+="M0;":E.hpt?w+="M"+20*E.hpt+";":E.hpx&&(w+="M"+20*_v(E.hpx)+";"),w.length>2&&g.push(w+"R"+(x+1))})}function f(g,p){var E=["ID;PWXL;N;E"],x=[],w=Zn(g["!ref"]),T,R=Array.isArray(g),k=`\r
`;E.push("P;PGeneral"),E.push("F;P0;DG0G8;M255"),g["!cols"]&&u(E,g["!cols"]),g["!rows"]&&h(E,g["!rows"]),E.push("B;Y"+(w.e.r-w.s.r+1)+";X"+(w.e.c-w.s.c+1)+";D"+[w.s.c,w.s.r,w.e.c,w.e.r].join(" "));for(var N=w.s.r;N<=w.e.r;++N)for(var j=w.s.c;j<=w.e.c;++j){var B=Vn({r:N,c:j});T=R?(g[N]||[])[j]:g[B],!(!T||T.v==null&&(!T.f||T.F))&&x.push(l(T,g,N,j))}return E.join(k)+k+x.join(k)+k+"E"+k}return{to_workbook:o,to_sheet:a,from_sheet:f}})(),fpe=(function(){function n(s,a){switch(a.type){case"base64":return e(Fl(s),a);case"binary":return e(s,a);case"buffer":return e(En&&Buffer.isBuffer(s)?s.toString("binary"):w1(s),a);case"array":return e(OE(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),l=-1,u=-1,h=0,f=[];h!==o.length;++h){if(o[h].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var g=o[h].trim().split(","),p=g[0],E=g[1];++h;for(var x=o[h]||"";(x.match(/["]/g)||[]).length&1&&h<o.length-1;)x+=`
`+o[++h];switch(x=x.trim(),+p){case-1:if(x==="BOT"){f[++l]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[l][u]=!0:x==="FALSE"?f[l][u]=!1:isNaN(Rl(E))?isNaN(Ap(E).getDate())?f[l][u]=E:f[l][u]=ns(E):f[l][u]=Rl(E),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[l][u++]=x!==""?x:null;break}if(x==="EOD")break}}return a&&a.sheetRows&&(f=f.slice(0,a.sheetRows)),f}function t(s,a){return G0(n(s,a),a)}function r(s,a){return ld(t(s,a),a)}var i=(function(){var s=function(l,u,h,f,g){l.push(u),l.push(h+","+f),l.push('"'+g.replace(/"/g,'""')+'"')},a=function(l,u,h,f){l.push(u+","+h),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],h=Zn(l["!ref"]),f,g=Array.isArray(l);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,h.e.r-h.s.r+1,""),s(u,"TUPLES",0,h.e.c-h.s.c+1,""),s(u,"DATA",0,0,"");for(var p=h.s.r;p<=h.e.r;++p){a(u,-1,0,"BOT");for(var E=h.s.c;E<=h.e.c;++E){var x=Vn({r:p,c:E});if(f=g?(l[p]||[])[E]:l[x],!f){a(u,1,0,"");continue}switch(f.t){case"n":var w=f.w;!w&&f.v!=null&&(w=f.v),w==null?f.f&&!f.F?a(u,1,0,"="+f.f):a(u,1,0,""):a(u,0,w,"V");break;case"b":a(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=fu(f.z||yr[14],Ts(ns(f.v)))),a(u,0,f.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,R=u.join(T);return R}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),sV=(function(){function n(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(f,g){for(var p=f.split(`
`),E=-1,x=-1,w=0,T=[];w!==p.length;++w){var R=p[w].trim().split(":");if(R[0]==="cell"){var k=ii(R[1]);if(T.length<=k.r)for(E=T.length;E<=k.r;++E)T[E]||(T[E]=[]);switch(E=k.r,x=k.c,R[2]){case"t":T[E][x]=n(R[3]);break;case"v":T[E][x]=+R[3];break;case"vtf":var N=R[R.length-1];case"vtc":switch(R[3]){case"nl":T[E][x]=!!+R[4];break;default:T[E][x]=+R[4];break}R[2]=="vtf"&&(T[E][x]=[T[E][x],N])}}}return g&&g.sheetRows&&(T=T.slice(0,g.sheetRows)),T}function r(f,g){return G0(t(f,g),g)}function i(f,g){return ld(r(f,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var g=[],p=[],E,x="",w=Js(f["!ref"]),T=Array.isArray(f),R=w.s.r;R<=w.e.r;++R)for(var k=w.s.c;k<=w.e.c;++k)if(x=Vn({r:R,c:k}),E=T?(f[R]||[])[k]:f[x],!(!E||E.v==null||E.t==="z")){switch(p=["cell",x,"t"],E.t){case"s":case"str":p.push(e(E.v));break;case"n":E.f?(p[2]="vtf",p[3]="n",p[4]=E.v,p[5]=e(E.f)):(p[2]="v",p[3]=E.v);break;case"b":p[2]="vt"+(E.f?"f":"c"),p[3]="nl",p[4]=E.v?"1":"0",p[5]=e(E.f||(E.v?"TRUE":"FALSE"));break;case"d":var N=Ts(ns(E.v));p[2]="vtc",p[3]="nd",p[4]=""+N,p[5]=E.w||fu(E.z||yr[14],N);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(w.e.c-w.s.c+1)+":r:"+(w.e.r-w.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function h(f){return[s,a,o,a,u(f),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:h}})(),gpe=(function(){function n(h,f,g,p,E){E.raw?f[g][p]=h:h===""||(h==="TRUE"?f[g][p]=!0:h==="FALSE"?f[g][p]=!1:isNaN(Rl(h))?isNaN(Ap(h).getDate())?f[g][p]=h:f[g][p]=ns(h):f[g][p]=Rl(h))}function e(h,f){var g=f||{},p=[];if(!h||h.length===0)return p;for(var E=h.split(/[\r\n]/),x=E.length-1;x>=0&&E[x].length===0;)--x;for(var w=10,T=0,R=0;R<=x;++R)T=E[R].indexOf(" "),T==-1?T=E[R].length:T++,w=Math.max(w,T);for(R=0;R<=x;++R){p[R]=[];var k=0;for(n(E[R].slice(0,w).trim(),p,R,k,g),k=1;k<=(E[R].length-w)/10+1;++k)n(E[R].slice(w+(k-1)*10,w+k*10).trim(),p,R,k,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(h){for(var f={},g=!1,p=0,E=0;p<h.length;++p)(E=h.charCodeAt(p))==34?g=!g:!g&&E in t&&(f[E]=(f[E]||0)+1);E=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&E.push([f[p],p]);if(!E.length){f=r;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&E.push([f[p],p])}return E.sort(function(x,w){return x[0]-w[0]||r[x[1]]-r[w[1]]}),t[E.pop()[1]]||44}function s(h,f){var g=f||{},p="",E=g.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(p=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(p=h.charAt(4),h=h.slice(6)):p=i(h.slice(0,1024)):g&&g.FS?p=g.FS:p=i(h.slice(0,1024));var w=0,T=0,R=0,k=0,N=0,j=p.charCodeAt(0),B=!1,P=0,C=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var M=g.dateNF!=null?Pge(g.dateNF):null;function F(){var O=h.slice(k,N),W={};if(O.charAt(0)=='"'&&O.charAt(O.length-1)=='"'&&(O=O.slice(1,-1).replace(/""/g,'"')),O.length===0)W.t="z";else if(g.raw)W.t="s",W.v=O;else if(O.trim().length===0)W.t="s",W.v=O;else if(O.charCodeAt(0)==61)O.charCodeAt(1)==34&&O.charCodeAt(O.length-1)==34?(W.t="s",W.v=O.slice(2,-1).replace(/""/g,'"')):d1e(O)?(W.t="n",W.f=O.slice(1)):(W.t="s",W.v=O);else if(O=="TRUE")W.t="b",W.v=!0;else if(O=="FALSE")W.t="b",W.v=!1;else if(!isNaN(R=Rl(O)))W.t="n",g.cellText!==!1&&(W.w=O),W.v=R;else if(!isNaN(Ap(O).getDate())||M&&O.match(M)){W.z=g.dateNF||yr[14];var D=0;M&&O.match(M)&&(O=kge(O,g.dateNF,O.match(M)||[]),D=1),g.cellDates?(W.t="d",W.v=ns(O,D)):(W.t="n",W.v=Ts(ns(O,D))),g.cellText!==!1&&(W.w=fu(W.z,W.v instanceof Date?Ts(W.v):W.v)),g.cellNF||delete W.z}else W.t="s",W.v=O;if(W.t=="z"||(g.dense?(E[w]||(E[w]=[]),E[w][T]=W):E[Vn({c:T,r:w})]=W),k=N+1,C=h.charCodeAt(k),x.e.c<T&&(x.e.c=T),x.e.r<w&&(x.e.r=w),P==j)++T;else if(T=0,++w,g.sheetRows&&g.sheetRows<=w)return!0}e:for(;N<h.length;++N)switch(P=h.charCodeAt(N)){case 34:C===34&&(B=!B);break;case j:case 10:case 13:if(!B&&F())break e;break}return N-k>0&&F(),E["!ref"]=Nr(x),E}function a(h,f){return!(f&&f.PRN)||f.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?s(h,f):G0(e(h,f),f)}function o(h,f){var g="",p=f.type=="string"?[0,0,0,0]:Ave(h,f);switch(f.type){case"base64":g=Fl(h);break;case"binary":g=h;break;case"buffer":f.codepage==65001?g=h.toString("utf8"):f.codepage&&typeof av<"u"||(g=En&&Buffer.isBuffer(h)?h.toString("binary"):w1(h));break;case"array":g=OE(h);break;case"string":g=h;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Mm(g.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?g=Mm(g):f.type=="binary"&&typeof av<"u",g.slice(0,19)=="socialcalc:version:"?sV.to_sheet(f.type=="string"?g:Mm(g),f):a(g,f)}function l(h,f){return ld(o(h,f),f)}function u(h){for(var f=[],g=Zn(h["!ref"]),p,E=Array.isArray(h),x=g.s.r;x<=g.e.r;++x){for(var w=[],T=g.s.c;T<=g.e.c;++T){var R=Vn({r:x,c:T});if(p=E?(h[x]||[])[T]:h[R],!p||p.v==null){w.push("          ");continue}for(var k=(p.w||(jl(p),p.w)||"").slice(0,10);k.length<10;)k+=" ";w.push(k+(T===0?" ":""))}f.push(w.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})(),cO=(function(){function n(V,re,te){if(V){Bs(V,V.l||0);for(var ee=te.Enum||Ae;V.l<V.length;){var de=V.read_shift(2),Oe=ee[de]||ee[65535],Se=V.read_shift(2),Fe=V.l+Se,je=Oe.f&&Oe.f(V,Se,te);if(V.l=Fe,re(je,Oe,de))return}}}function e(V,re){switch(re.type){case"base64":return t(za(Fl(V)),re);case"binary":return t(za(V),re);case"buffer":case"array":return t(V,re)}throw"Unsupported type "+re.type}function t(V,re){if(!V)return V;var te=re||{},ee=te.dense?[]:{},de="Sheet1",Oe="",Se=0,Fe={},je=[],Qe=[],gt={s:{r:0,c:0},e:{r:0,c:0}},_t=te.sheetRows||0;if(V[2]==0&&(V[3]==8||V[3]==9)&&V.length>=16&&V[14]==5&&V[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(V[2]==2)te.Enum=Ae,n(V,function(De,Xt,Te){switch(Te){case 0:te.vers=De,De>=4096&&(te.qpro=!0);break;case 6:gt=De;break;case 204:De&&(Oe=De);break;case 222:Oe=De;break;case 15:case 51:te.qpro||(De[1].v=De[1].v.slice(1));case 13:case 14:case 16:Te==14&&(De[2]&112)==112&&(De[2]&15)>1&&(De[2]&15)<15&&(De[1].z=te.dateNF||yr[14],te.cellDates&&(De[1].t="d",De[1].v=w7(De[1].v))),te.qpro&&De[3]>Se&&(ee["!ref"]=Nr(gt),Fe[de]=ee,je.push(de),ee=te.dense?[]:{},gt={s:{r:0,c:0},e:{r:0,c:0}},Se=De[3],de=Oe||"Sheet"+(Se+1),Oe="");var ge=te.dense?(ee[De[0].r]||[])[De[0].c]:ee[Vn(De[0])];if(ge){ge.t=De[1].t,ge.v=De[1].v,De[1].z!=null&&(ge.z=De[1].z),De[1].f!=null&&(ge.f=De[1].f);break}te.dense?(ee[De[0].r]||(ee[De[0].r]=[]),ee[De[0].r][De[0].c]=De[1]):ee[Vn(De[0])]=De[1];break}},te);else if(V[2]==26||V[2]==14)te.Enum=ie,V[2]==14&&(te.qpro=!0,V.l=0),n(V,function(De,Xt,Te){switch(Te){case 204:de=De;break;case 22:De[1].v=De[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(De[3]>Se&&(ee["!ref"]=Nr(gt),Fe[de]=ee,je.push(de),ee=te.dense?[]:{},gt={s:{r:0,c:0},e:{r:0,c:0}},Se=De[3],de="Sheet"+(Se+1)),_t>0&&De[0].r>=_t)break;te.dense?(ee[De[0].r]||(ee[De[0].r]=[]),ee[De[0].r][De[0].c]=De[1]):ee[Vn(De[0])]=De[1],gt.e.c<De[0].c&&(gt.e.c=De[0].c),gt.e.r<De[0].r&&(gt.e.r=De[0].r);break;case 27:De[14e3]&&(Qe[De[14e3][0]]=De[14e3][1]);break;case 1537:Qe[De[0]]=De[1],De[0]==Se&&(de=De[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+V[2]);if(ee["!ref"]=Nr(gt),Fe[Oe||de]=ee,je.push(Oe||de),!Qe.length)return{SheetNames:je,Sheets:Fe};for(var Lt={},nn=[],Ut=0;Ut<Qe.length;++Ut)Fe[je[Ut]]?(nn.push(Qe[Ut]||je[Ut]),Lt[Qe[Ut]]=Fe[Qe[Ut]]||Fe[je[Ut]]):(nn.push(Qe[Ut]),Lt[Qe[Ut]]={"!ref":"A1"});return{SheetNames:nn,Sheets:Lt}}function r(V,re){var te=re||{};if(+te.codepage>=0&&Tp(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=ws(),de=Zn(V["!ref"]),Oe=Array.isArray(V),Se=[];nt(ee,0,s(1030)),nt(ee,6,l(de));for(var Fe=Math.min(de.e.r,8191),je=de.s.r;je<=Fe;++je)for(var Qe=Si(je),gt=de.s.c;gt<=de.e.c;++gt){je===de.s.r&&(Se[gt]=Bi(gt));var _t=Se[gt]+Qe,Lt=Oe?(V[je]||[])[gt]:V[_t];if(!(!Lt||Lt.t=="z"))if(Lt.t=="n")(Lt.v|0)==Lt.v&&Lt.v>=-32768&&Lt.v<=32767?nt(ee,13,p(je,gt,Lt.v)):nt(ee,14,x(je,gt,Lt.v));else{var nn=jl(Lt);nt(ee,15,f(je,gt,nn.slice(0,239)))}}return nt(ee,1),ee.end()}function i(V,re){var te=re||{};if(+te.codepage>=0&&Tp(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=ws();nt(ee,0,a(V));for(var de=0,Oe=0;de<V.SheetNames.length;++de)(V.Sheets[V.SheetNames[de]]||{})["!ref"]&&nt(ee,27,Re(V.SheetNames[de],Oe++));var Se=0;for(de=0;de<V.SheetNames.length;++de){var Fe=V.Sheets[V.SheetNames[de]];if(!(!Fe||!Fe["!ref"])){for(var je=Zn(Fe["!ref"]),Qe=Array.isArray(Fe),gt=[],_t=Math.min(je.e.r,8191),Lt=je.s.r;Lt<=_t;++Lt)for(var nn=Si(Lt),Ut=je.s.c;Ut<=je.e.c;++Ut){Lt===je.s.r&&(gt[Ut]=Bi(Ut));var De=gt[Ut]+nn,Xt=Qe?(Fe[Lt]||[])[Ut]:Fe[De];if(!(!Xt||Xt.t=="z"))if(Xt.t=="n")nt(ee,23,F(Lt,Ut,Se,Xt.v));else{var Te=jl(Xt);nt(ee,22,P(Lt,Ut,Se,Te.slice(0,239)))}}++Se}}return nt(ee,1),ee.end()}function s(V){var re=Ce(2);return re.write_shift(2,V),re}function a(V){var re=Ce(26);re.write_shift(2,4096),re.write_shift(2,4),re.write_shift(4,0);for(var te=0,ee=0,de=0,Oe=0;Oe<V.SheetNames.length;++Oe){var Se=V.SheetNames[Oe],Fe=V.Sheets[Se];if(!(!Fe||!Fe["!ref"])){++de;var je=Js(Fe["!ref"]);te<je.e.r&&(te=je.e.r),ee<je.e.c&&(ee=je.e.c)}}return te>8191&&(te=8191),re.write_shift(2,te),re.write_shift(1,de),re.write_shift(1,ee),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(1,1),re.write_shift(1,2),re.write_shift(4,0),re.write_shift(4,0),re}function o(V,re,te){var ee={s:{c:0,r:0},e:{c:0,r:0}};return re==8&&te.qpro?(ee.s.c=V.read_shift(1),V.l++,ee.s.r=V.read_shift(2),ee.e.c=V.read_shift(1),V.l++,ee.e.r=V.read_shift(2),ee):(ee.s.c=V.read_shift(2),ee.s.r=V.read_shift(2),re==12&&te.qpro&&(V.l+=2),ee.e.c=V.read_shift(2),ee.e.r=V.read_shift(2),re==12&&te.qpro&&(V.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function l(V){var re=Ce(8);return re.write_shift(2,V.s.c),re.write_shift(2,V.s.r),re.write_shift(2,V.e.c),re.write_shift(2,V.e.r),re}function u(V,re,te){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(ee[0].c=V.read_shift(1),ee[3]=V.read_shift(1),ee[0].r=V.read_shift(2),V.l+=2):(ee[2]=V.read_shift(1),ee[0].c=V.read_shift(2),ee[0].r=V.read_shift(2)),ee}function h(V,re,te){var ee=V.l+re,de=u(V,re,te);if(de[1].t="s",te.vers==20768){V.l++;var Oe=V.read_shift(1);return de[1].v=V.read_shift(Oe,"utf8"),de}return te.qpro&&V.l++,de[1].v=V.read_shift(ee-V.l,"cstr"),de}function f(V,re,te){var ee=Ce(7+te.length);ee.write_shift(1,255),ee.write_shift(2,re),ee.write_shift(2,V),ee.write_shift(1,39);for(var de=0;de<ee.length;++de){var Oe=te.charCodeAt(de);ee.write_shift(1,Oe>=128?95:Oe)}return ee.write_shift(1,0),ee}function g(V,re,te){var ee=u(V,re,te);return ee[1].v=V.read_shift(2,"i"),ee}function p(V,re,te){var ee=Ce(7);return ee.write_shift(1,255),ee.write_shift(2,re),ee.write_shift(2,V),ee.write_shift(2,te,"i"),ee}function E(V,re,te){var ee=u(V,re,te);return ee[1].v=V.read_shift(8,"f"),ee}function x(V,re,te){var ee=Ce(13);return ee.write_shift(1,255),ee.write_shift(2,re),ee.write_shift(2,V),ee.write_shift(8,te,"f"),ee}function w(V,re,te){var ee=V.l+re,de=u(V,re,te);if(de[1].v=V.read_shift(8,"f"),te.qpro)V.l=ee;else{var Oe=V.read_shift(2);N(V.slice(V.l,V.l+Oe),de),V.l+=Oe}return de}function T(V,re,te){var ee=re&32768;return re&=-32769,re=(ee?V:0)+(re>=8192?re-16384:re),(ee?"":"$")+(te?Bi(re):Si(re))}var R={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(V,re){Bs(V,0);for(var te=[],ee=0,de="",Oe="",Se="",Fe="";V.l<V.length;){var je=V[V.l++];switch(je){case 0:te.push(V.read_shift(8,"f"));break;case 1:Oe=T(re[0].c,V.read_shift(2),!0),de=T(re[0].r,V.read_shift(2),!1),te.push(Oe+de);break;case 2:{var Qe=T(re[0].c,V.read_shift(2),!0),gt=T(re[0].r,V.read_shift(2),!1);Oe=T(re[0].c,V.read_shift(2),!0),de=T(re[0].r,V.read_shift(2),!1),te.push(Qe+gt+":"+Oe+de)}break;case 3:if(V.l<V.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(V.read_shift(2));break;case 6:{for(var _t="";je=V[V.l++];)_t+=String.fromCharCode(je);te.push('"'+_t.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:Fe=te.pop(),Se=te.pop(),te.push(["AND","OR"][je-20]+"("+Se+","+Fe+")");break;default:if(je<32&&k[je])Fe=te.pop(),Se=te.pop(),te.push(Se+k[je]+Fe);else if(R[je]){if(ee=R[je][1],ee==69&&(ee=V[V.l++]),ee>te.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+te.join("|")+"|");return}var Lt=te.slice(-ee);te.length-=ee,te.push(R[je][0]+"("+Lt.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}te.length==1?re[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function j(V){var re=[{c:0,r:0},{t:"n",v:0},0];return re[0].r=V.read_shift(2),re[3]=V[V.l++],re[0].c=V[V.l++],re}function B(V,re){var te=j(V);return te[1].t="s",te[1].v=V.read_shift(re-4,"cstr"),te}function P(V,re,te,ee){var de=Ce(6+ee.length);de.write_shift(2,V),de.write_shift(1,te),de.write_shift(1,re),de.write_shift(1,39);for(var Oe=0;Oe<ee.length;++Oe){var Se=ee.charCodeAt(Oe);de.write_shift(1,Se>=128?95:Se)}return de.write_shift(1,0),de}function C(V,re){var te=j(V);te[1].v=V.read_shift(2);var ee=te[1].v>>1;if(te[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return te[1].v=ee,te}function M(V,re){var te=j(V),ee=V.read_shift(4),de=V.read_shift(4),Oe=V.read_shift(2);if(Oe==65535)return ee===0&&de===3221225472?(te[1].t="e",te[1].v=15):ee===0&&de===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var Se=Oe&32768;return Oe=(Oe&32767)-16446,te[1].v=(1-Se*2)*(de*Math.pow(2,Oe+32)+ee*Math.pow(2,Oe)),te}function F(V,re,te,ee){var de=Ce(14);if(de.write_shift(2,V),de.write_shift(1,te),de.write_shift(1,re),ee==0)return de.write_shift(4,0),de.write_shift(4,0),de.write_shift(2,65535),de;var Oe=0,Se=0,Fe=0,je=0;return ee<0&&(Oe=1,ee=-ee),Se=Math.log2(ee)|0,ee/=Math.pow(2,Se-31),je=ee>>>0,(je&2147483648)==0&&(ee/=2,++Se,je=ee>>>0),ee-=je,je|=2147483648,je>>>=0,ee*=Math.pow(2,32),Fe=ee>>>0,de.write_shift(4,Fe),de.write_shift(4,je),Se+=16383+(Oe?32768:0),de.write_shift(2,Se),de}function O(V,re){var te=M(V);return V.l+=re-14,te}function W(V,re){var te=j(V),ee=V.read_shift(4);return te[1].v=ee>>6,te}function D(V,re){var te=j(V),ee=V.read_shift(8,"f");return te[1].v=ee,te}function we(V,re){var te=D(V);return V.l+=re-10,te}function Ne(V,re){return V[V.l+re-1]==0?V.read_shift(re,"cstr"):""}function Le(V,re){var te=V[V.l++];te>re-1&&(te=re-1);for(var ee="";ee.length<te;)ee+=String.fromCharCode(V[V.l++]);return ee}function be(V,re,te){if(!(!te.qpro||re<21)){var ee=V.read_shift(1);V.l+=17,V.l+=1,V.l+=2;var de=V.read_shift(re-21,"cstr");return[ee,de]}}function ce(V,re){for(var te={},ee=V.l+re;V.l<ee;){var de=V.read_shift(2);if(de==14e3){for(te[de]=[0,""],te[de][0]=V.read_shift(2);V[V.l];)te[de][1]+=String.fromCharCode(V[V.l]),V.l++;V.l++}}return te}function Re(V,re){var te=Ce(5+V.length);te.write_shift(2,14e3),te.write_shift(2,re);for(var ee=0;ee<V.length;++ee){var de=V.charCodeAt(ee);te[te.l++]=de>127?95:de}return te[te.l++]=0,te}var Ae={0:{n:"BOF",f:eV},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:E},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:w},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ne},222:{n:"SHEETNAMELP",f:Le},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:M},24:{n:"NUMBER18",f:C},25:{n:"FORMULA19",f:O},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:W},38:{n:"??"},39:{n:"NUMBER27",f:D},40:{n:"FORMULA28",f:we},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:be},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),mpe=/^\s|\s$|[\t\n\r]/;function aV(n,e){if(!e.bookSST)return"";var t=[Or];t[t.length]=tt("sst",null,{xmlns:V0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(mpe)&&(s+=' xml:space="preserve"'),s+=">"+Fn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function ppe(n){return[n.read_shift(4),n.read_shift(4)]}function _pe(n,e){return e||(e=Ce(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var ype=lme;function xpe(n){var e=ws();Ge(e,159,_pe(n));for(var t=0;t<n.length;++t)Ge(e,19,ype(n[t]));return Ge(e,160),e.end()}function vpe(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function oV(n){var e=0,t,r=vpe(n),i=r.length+1,s,a,o,l,u;for(t=Kh(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^a;return e^52811}var Epe=(function(){function n(i,s){switch(s.type){case"base64":return e(Fl(i),s);case"binary":return e(i,s);case"buffer":return e(En&&Buffer.isBuffer(i)?i.toString("binary"):w1(i),s);case"array":return e(OE(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,f){Array.isArray(o)&&(o[f]=[]);for(var g=/\\\w+\b/g,p=0,E,x=-1;E=g.exec(h);){switch(E[0]){case"\\cell":var w=h.slice(p,g.lastIndex-E[0].length);if(w[0]==" "&&(w=w.slice(1)),++x,w.length){var T={v:w,t:"s"};Array.isArray(o)?o[f][x]=T:o[Vn({r:f,c:x})]=T}break}p=g.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=Nr(u),o}function t(i,s){return ld(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Zn(i["!ref"]),o,l=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)s.push("\\cellx"+(h+1));for(s.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var f=Vn({r:u,c:h});o=l?(i[u]||[])[h]:i[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(jl(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function uO(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var wpe=6,bl=wpe;function mv(n){return Math.floor((n+Math.round(128/bl)/256)*bl)}function pv(n){return Math.floor((n-5)/bl*100+.5)/100}function PI(n){return Math.round((n*bl+5)/bl*256)/256}function Kb(n){n.width?(n.wpx=mv(n.width),n.wch=pv(n.wpx),n.MDW=bl):n.wpx?(n.wch=pv(n.wpx),n.width=PI(n.wch),n.MDW=bl):typeof n.wch=="number"&&(n.width=PI(n.wch),n.wpx=mv(n.width),n.MDW=bl),n.customWidth&&delete n.customWidth}var Spe=96,lV=Spe;function _v(n){return n*96/lV}function cV(n){return n*lV/96}function Tpe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=tt("numFmt",null,{numFmtId:r,formatCode:Fn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=tt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Ipe(n){var e=[];return e[e.length]=tt("cellXfs",null),n.forEach(function(t){e[e.length]=tt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=tt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function uV(n,e){var t=[Or,tt("styleSheet",null,{xmlns:V0[0],"xmlns:vt":ni.vt})],r;return n.SSF&&(r=Tpe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Ipe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function Ape(n,e){var t=n.read_shift(2),r=Ui(n);return[t,r]}function Rpe(n,e,t){t||(t=Ce(6+4*e.length)),t.write_shift(2,n),si(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function bpe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=mme(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var l=n.read_shift(1);switch(l>0&&(r.charset=l),n.l++,r.color=gme(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Ui(n),r}function Cpe(n,e){e||(e=Ce(153)),e.write_shift(2,n.sz*20),pme(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),fv(n.color,e);var r=0;return r=2,e.write_shift(1,r),si(n.name,e),e.length>e.l?e.slice(0,e.l):e}var Ppe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],MS,kpe=$o;function hO(n,e){e||(e=Ce(84)),MS||(MS=Ob(Ppe));var t=MS[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(fv({auto:1},e),fv({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Mpe(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function hV(n,e,t){t||(t=Ce(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Bg(n,e){return e||(e=Ce(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Npe=$o;function Lpe(n,e){return e||(e=Ce(51)),e.write_shift(1,0),Bg(null,e),Bg(null,e),Bg(null,e),Bg(null,e),Bg(null,e),e.length>e.l?e.slice(0,e.l):e}function Ope(n,e){return e||(e=Ce(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),dv(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Dpe(n,e,t){var r=Ce(2052);return r.write_shift(4,n),dv(e,r),dv(t,r),r.length>r.l?r.slice(0,r.l):r}function Fpe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Ge(n,615,qa(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ge(n,44,Rpe(i,e[i]))}),Ge(n,616))}}function jpe(n){var e=1;Ge(n,611,qa(e)),Ge(n,43,Cpe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ge(n,612)}function Vpe(n){var e=2;Ge(n,603,qa(e)),Ge(n,45,hO({patternType:"none"})),Ge(n,45,hO({patternType:"gray125"})),Ge(n,604)}function Gpe(n){var e=1;Ge(n,613,qa(e)),Ge(n,46,Lpe()),Ge(n,614)}function Bpe(n){var e=1;Ge(n,626,qa(e)),Ge(n,47,hV({numFmtId:0},65535)),Ge(n,627)}function Upe(n,e){Ge(n,617,qa(e.length)),e.forEach(function(t){Ge(n,47,hV(t,0))}),Ge(n,618)}function zpe(n){var e=1;Ge(n,619,qa(e)),Ge(n,48,Ope({xfId:0,name:"Normal"})),Ge(n,620)}function $pe(n){var e=0;Ge(n,505,qa(e)),Ge(n,506)}function Wpe(n){var e=0;Ge(n,508,Dpe(e,"TableStyleMedium9","PivotStyleMedium4")),Ge(n,509)}function Hpe(n,e){var t=ws();return Ge(t,278),Fpe(t,n.SSF),jpe(t),Vpe(t),Gpe(t),Bpe(t),Upe(t,e.cellXfs),zpe(t),$pe(t),Wpe(t),Ge(t,279),t.end()}function dV(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Or];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Kpe(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Ui(n)}}function Ype(n){var e=Ce(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),si(n.name,e),e.slice(0,e.l)}function Xpe(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function qpe(n){var e=Ce(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function Zpe(n,e){var t=Ce(8+2*e.length);return t.write_shift(4,n),si(e,t),t.slice(0,t.l)}function Qpe(n){return n.l+=4,n.read_shift(4)!=0}function Jpe(n,e){var t=Ce(8);return t.write_shift(4,n),t.write_shift(4,1),t}function e1e(){var n=ws();return Ge(n,332),Ge(n,334,qa(1)),Ge(n,335,Ype({name:"XLDAPR",version:12e4,flags:3496657072})),Ge(n,336),Ge(n,339,Zpe(1,"XLDAPR")),Ge(n,52),Ge(n,35,qa(514)),Ge(n,4096,qa(0)),Ge(n,4097,fa(1)),Ge(n,36),Ge(n,53),Ge(n,340),Ge(n,337,Jpe(1)),Ge(n,51,qpe([[1,0]])),Ge(n,338),Ge(n,333),n.end()}function fV(){var n=[Or];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function t1e(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Vn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Mf=1024;function gV(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[tt("xml",null,{"xmlns:v":$s.v,"xmlns:o":$s.o,"xmlns:x":$s.x,"xmlns:mv":$s.mv}).replace(/\/>/,">"),tt("o:shapelayout",tt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),tt("v:shapetype",[tt("v:stroke",null,{joinstyle:"miter"}),tt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Mf<n*1e3;)Mf+=1e3;return e.forEach(function(s){var a=ii(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?tt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=tt("v:fill",l,o),h={on:"t",obscured:"t"};++Mf,i=i.concat(["<v:shape"+bp({id:"_x0000_s"+Mf,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,tt("v:shadow",null,h),tt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ei("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Ei("x:AutoFill","False"),Ei("x:Row",String(a.r)),Ei("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function mV(n){var e=[Or,tt("comments",null,{xmlns:V0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Fn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=t.indexOf(Fn(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Ei("t",Fn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Ei("t",Fn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function n1e(n,e,t){var r=[Or,tt("ThreadedComments",null,{xmlns:ni.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=l.id:l.parentId=s,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(tt("threadedComment",Ei("text",a.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function r1e(n){var e=[Or,tt("personList",null,{xmlns:ni.TCMNT,"xmlns:x":V0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(tt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function i1e(n){var e={};e.iauthor=n.read_shift(4);var t=dd(n);return e.rfx=t.s,e.ref=Vn(t.s),n.l+=16,e}function s1e(n,e){return e==null&&(e=Ce(36)),e.write_shift(4,n[1].iauthor),B0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var a1e=Ui;function o1e(n){return si(n.slice(0,54))}function l1e(n){var e=ws(),t=[];return Ge(e,628),Ge(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Ge(e,632,o1e(i.a)))})}),Ge(e,631),Ge(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:ii(r[0]),e:ii(r[0])};Ge(e,635,s1e([s,i])),i.t&&i.t.length>0&&Ge(e,637,ume(i)),Ge(e,636),delete i.iauthor})}),Ge(e,634),Ge(e,629),e.end()}function c1e(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Gn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var pV=["xlsb","xlsm","xlam","biff8","xla"],u1e=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?u+=e.r:--u,i+(o?"":"$")+Bi(h)+(l?"":"$")+Si(u)}return function(i,s){return e=s,i.replace(n,t)}})(),Yb=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Xb=(function(){return function(e,t){return e.replace(Yb,function(r,i,s,a,o,l){var u=Ub(a)-(s?0:t.c),h=Bb(l)-(o?0:t.r),f=h==0?"":o?h+1:"["+h+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+f+"C"+g})}})();function h1e(n,e){return n.replace(Yb,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Bi(Ub(s)+e.c))+(a=="$"?a+o:Si(Bb(o)+e.r))})}function d1e(n){return n.length!=1}function Cr(n){n.l+=1}function gu(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function _V(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return yV(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=gu(n),o=gu(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function yV(n){var e=gu(n),t=gu(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function f1e(n,e,t){if(t.biff<8)return yV(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=gu(n),a=gu(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function xV(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return g1e(n);var r=n.read_shift(t&&t.biff==12?4:2),i=gu(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function g1e(n){var e=gu(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function m1e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function p1e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return _1e(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function _1e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function y1e(n,e,t){var r=(n[n.l++]&96)>>5,i=_V(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function x1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=_V(n,s,t);return[r,i,a]}function v1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function E1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function w1e(n,e,t){var r=(n[n.l++]&96)>>5,i=f1e(n,e-1,t);return[r,i]}function S1e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function dO(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function T1e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function I1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function A1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function R1e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function b1e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function vV(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function C1e(n){return n.read_shift(2),vV(n)}function P1e(n){return n.read_shift(2),vV(n)}function k1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=xV(n,0,t);return[r,i]}function M1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=p1e(n,0,t);return[r,i]}function N1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=xV(n,0,t);return[r,i,s]}function L1e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[L_e[i],SV[i],r]}function O1e(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:D1e(n);return[i,(s[0]===0?SV:N_e)[s[1]]]}function D1e(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function F1e(n,e,t){n.l+=t&&t.biff==2?3:4}function j1e(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function V1e(n){return n.l++,I1[n.read_shift(1)]}function G1e(n){return n.l++,n.read_shift(2)}function B1e(n){return n.l++,n.read_shift(1)!==0}function U1e(n){return n.l++,U0(n)}function z1e(n,e,t){return n.l++,nV(n,e-1,t)}function $1e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Nme(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=I1[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=U0(n);break;case 2:t[1]=Fme(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function W1e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?dd:Gme)(n));return i}function H1e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=$1e(n,t.biff);return a}function K1e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function Y1e(n,e,t){if(t.biff==5)return X1e(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function X1e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function q1e(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Z1e(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Q1e(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function J1e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var e_e=$o,t_e=$o,n_e=$o;function A1(n,e,t){return n.l+=2,[m1e(n)]}function qb(n){return n.l+=6,[]}var r_e=A1,i_e=qb,s_e=qb,a_e=A1;function EV(n){return n.l+=2,[eV(n),n.read_shift(2)&1]}var o_e=A1,l_e=EV,c_e=qb,u_e=A1,h_e=A1,d_e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function f_e(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=d_e[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function g_e(n){return n.l+=2,[n.read_shift(4)]}function m_e(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function p_e(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function __e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function y_e(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function x_e(n){return n.l+=4,[0,0]}var fO={1:{n:"PtgExp",f:j1e},2:{n:"PtgTbl",f:n_e},3:{n:"PtgAdd",f:Cr},4:{n:"PtgSub",f:Cr},5:{n:"PtgMul",f:Cr},6:{n:"PtgDiv",f:Cr},7:{n:"PtgPower",f:Cr},8:{n:"PtgConcat",f:Cr},9:{n:"PtgLt",f:Cr},10:{n:"PtgLe",f:Cr},11:{n:"PtgEq",f:Cr},12:{n:"PtgGe",f:Cr},13:{n:"PtgGt",f:Cr},14:{n:"PtgNe",f:Cr},15:{n:"PtgIsect",f:Cr},16:{n:"PtgUnion",f:Cr},17:{n:"PtgRange",f:Cr},18:{n:"PtgUplus",f:Cr},19:{n:"PtgUminus",f:Cr},20:{n:"PtgPercent",f:Cr},21:{n:"PtgParen",f:Cr},22:{n:"PtgMissArg",f:Cr},23:{n:"PtgStr",f:z1e},26:{n:"PtgSheet",f:m_e},27:{n:"PtgEndSheet",f:p_e},28:{n:"PtgErr",f:V1e},29:{n:"PtgBool",f:B1e},30:{n:"PtgInt",f:G1e},31:{n:"PtgNum",f:U1e},32:{n:"PtgArray",f:S1e},33:{n:"PtgFunc",f:L1e},34:{n:"PtgFuncVar",f:O1e},35:{n:"PtgName",f:K1e},36:{n:"PtgRef",f:k1e},37:{n:"PtgArea",f:y1e},38:{n:"PtgMemArea",f:q1e},39:{n:"PtgMemErr",f:e_e},40:{n:"PtgMemNoMem",f:t_e},41:{n:"PtgMemFunc",f:Z1e},42:{n:"PtgRefErr",f:Q1e},43:{n:"PtgAreaErr",f:v1e},44:{n:"PtgRefN",f:M1e},45:{n:"PtgAreaN",f:w1e},46:{n:"PtgMemAreaN",f:__e},47:{n:"PtgMemNoMemN",f:y_e},57:{n:"PtgNameX",f:Y1e},58:{n:"PtgRef3d",f:N1e},59:{n:"PtgArea3d",f:x1e},60:{n:"PtgRefErr3d",f:J1e},61:{n:"PtgAreaErr3d",f:E1e},255:{}},v_e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},E_e={1:{n:"PtgElfLel",f:EV},2:{n:"PtgElfRw",f:u_e},3:{n:"PtgElfCol",f:r_e},6:{n:"PtgElfRwV",f:h_e},7:{n:"PtgElfColV",f:a_e},10:{n:"PtgElfRadical",f:o_e},11:{n:"PtgElfRadicalS",f:c_e},13:{n:"PtgElfColS",f:i_e},15:{n:"PtgElfColSV",f:s_e},16:{n:"PtgElfRadicalLel",f:l_e},25:{n:"PtgList",f:f_e},29:{n:"PtgSxName",f:g_e},255:{}},w_e={0:{n:"PtgAttrNoop",f:x_e},1:{n:"PtgAttrSemi",f:b1e},2:{n:"PtgAttrIf",f:A1e},4:{n:"PtgAttrChoose",f:T1e},8:{n:"PtgAttrGoto",f:I1e},16:{n:"PtgAttrSum",f:F1e},32:{n:"PtgAttrBaxcel",f:dO},33:{n:"PtgAttrBaxcel",f:dO},64:{n:"PtgAttrSpace",f:C1e},65:{n:"PtgAttrSpaceSemi",f:P1e},128:{n:"PtgAttrIfError",f:R1e},255:{}};function S_e(n,e,t,r){if(r.biff<8)return $o(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=H1e(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=W1e(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push($o(n,e)),s}function T_e(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=fO[s]||fO[v_e[s]],(s===24||s===25)&&(i=(s===24?E_e:w_e)[n[n.l+1]]),!i||!i.f?$o(n,e):a.push([i.n,i.f(n,e,t)]);return a}function I_e(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var A_e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function R_e(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function wV(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function gO(n,e,t){var r=wV(n,e,t);return r=="#REF"?r:R_e(r,t)}function w0(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],l,u,h,f=0,g=0,p,E="";if(!n[0]||!n[0][0])return"";for(var x=-1,w="",T=0,R=n[0].length;T<R;++T){var k=n[0][T];switch(k[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),x>=0){switch(n[0][x][1][0]){case 0:w=pr(" ",n[0][x][1][1]);break;case 1:w=pr("\r",n[0][x][1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}u=u+w,x=-1}o.push(u+A_e[k[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=Lm(k[1][1],a,i),o.push(Om(h,s));break;case"PtgRefN":h=t?Lm(k[1][1],t,i):k[1][1],o.push(Om(h,s));break;case"PtgRef3d":f=k[1][1],h=Lm(k[1][2],a,i),E=gO(r,f,i),o.push(E+"!"+Om(h,s));break;case"PtgFunc":case"PtgFuncVar":var N=k[1][0],j=k[1][1];N||(N=0),N&=127;var B=N==0?[]:o.slice(-N);o.length-=N,j==="User"&&(j=B.shift()),o.push(j+"("+B.join(",")+")");break;case"PtgBool":o.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(k[1]);break;case"PtgNum":o.push(String(k[1]));break;case"PtgStr":o.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(k[1]);break;case"PtgAreaN":p=QL(k[1][1],t?{s:t}:a,i),o.push(PS(p,i));break;case"PtgArea":p=QL(k[1][1],a,i),o.push(PS(p,i));break;case"PtgArea3d":f=k[1][1],p=k[1][2],E=gO(r,f,i),o.push(E+"!"+PS(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=k[1][2];var P=(r.names||[])[g-1]||(r[0]||[])[g],C=P?P.Name:"SH33TJSNAME"+String(g);C&&C.slice(0,6)=="_xlfn."&&!i.xlfn&&(C=C.slice(6)),o.push(C);break;case"PtgNameX":var M=k[1][1];g=k[1][2];var F;if(i.biff<=5)M<0&&(M=-M),r[M]&&(F=r[M][g]);else{var O="";if(((r[M]||[])[0]||[])[0]==14849||(((r[M]||[])[0]||[])[0]==1025?r[M][g]&&r[M][g].itab>0&&(O=r.SheetNames[r[M][g].itab-1]+"!"):O=r.SheetNames[g-1]+"!"),r[M]&&r[M][g])O+=r[M][g].Name;else if(r[0]&&r[0][g])O+=r[0][g].Name;else{var W=(wV(r,M,i)||"").split(";;");W[g-1]?O=W[g-1]:O+="SH33TJSERRX"}o.push(O);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var D="(",we=")";if(x>=0){switch(w="",n[0][x][1][0]){case 2:D=pr(" ",n[0][x][1][1])+D;break;case 3:D=pr("\r",n[0][x][1][1])+D;break;case 4:we=pr(" ",n[0][x][1][1])+we;break;case 5:we=pr("\r",n[0][x][1][1])+we;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][x][1][0])}x=-1}o.push(D+o.pop()+we);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:k[1][1],r:k[1][0]};var Ne={c:t.c,r:t.r};if(r.sharedf[Vn(h)]){var Le=r.sharedf[Vn(h)];o.push(w0(Le,a,Ne,r,i))}else{var be=!1;for(l=0;l!=r.arrayf.length;++l)if(u=r.arrayf[l],!(h.c<u[0].s.c||h.c>u[0].e.c)&&!(h.r<u[0].s.r||h.r>u[0].e.r)){o.push(w0(u[1],a,Ne,r,i)),be=!0;break}be||o.push(k[1])}break;case"PtgArray":o.push("{"+I_e(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&ce.indexOf(n[0][T][0])==-1){k=n[0][x];var Re=!0;switch(k[1][0]){case 4:Re=!1;case 0:w=pr(" ",k[1][1]);break;case 5:Re=!1;case 1:w=pr("\r",k[1][1]);break;default:if(w="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}o.push((Re?w:"")+o.pop()+(Re?"":w)),x=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function b_e(n){if(n==null){var e=Ce(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Yh(n);return Yh(0)}function C_e(n,e,t,r,i){var s=Xh(e,t,i),a=b_e(n.v),o=Ce(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Ce(n.bf.length),h=0;h<n.bf.length;++h)u[h]=n.bf[h];var f=vi([s,a,o,u]);return f}function DE(n,e,t){var r=n.read_shift(4),i=T_e(n,r,t),s=n.read_shift(4),a=s>0?S_e(n,s,i,t):null;return[i,a]}var P_e=DE,FE=DE,k_e=DE,M_e=DE,N_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},SV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},L_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function O_e(n){var e="of:="+n.replace(Yb,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function D_e(n){return n.replace(/\./,"!")}var Dm=typeof Map<"u";function Zb(n,e,t){var r=0,i=n.length;if(t){if(Dm?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Dm?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Dm?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function jE(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(bl=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=pv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=PI(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function TV(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Su(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){x7(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function F_e(n,e,t){if(n&&n["!ref"]){var r=Zn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function j_e(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Nr(n[t])+'"/>';return e+"</mergeCells>"}function V_e(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[t];try{e.Workbook&&(l=e.Workbook.Sheets[t].CodeName||l)}catch{}s=!0,a.codeName=Rp(Fn(l))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+tt("outlinePr",null,u)}!s&&!o||(i[i.length]=tt("sheetPr",o,a))}var G_e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],B_e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function U_e(n){var e={sheet:1};return G_e.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),B_e.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=oV(n.password).toString(16).toUpperCase()),tt("sheetProtection",null,e)}function z_e(n){return TV(n),tt("pageMargins",null,n)}function $_e(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=tt("col",null,jE(i,r)));return t[t.length]="</cols>",t.join("")}function W_e(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Nr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=Js(i);a.s.r==a.e.r&&(a.e.r=Js(e["!ref"]).e.r,i=Nr(a));for(var o=0;o<s.length;++o){var l=s[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),tt("autoFilter",null,{ref:i})}function H_e(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),tt("sheetViews",tt("sheetView",null,i),{})}function K_e(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=I1[n.v];break;case"d":r&&r.cellDates?i=ns(n.v,-1).toISOString():(n=Is(n),n.t="n",i=""+(n.v=Ts(ns(n.v)))),typeof n.z>"u"&&(n.z=yr[14]);break;default:i=n.v;break}var o=Ei("v",Fn(i)),l={r:e},u=Su(r.cellXfs,n,r);switch(u!==0&&(l.s=u),n.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Ei("v",""+Zb(r.Strings,n.v,r.revStrings)),l.t="s";break}l.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var h=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=tt("f",Fn(n.f),h)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(l.cm=1),tt("c",o,l)}function Y_e(n,e,t,r){var i=[],s=[],a=Zn(n["!ref"]),o="",l,u="",h=[],f=0,g=0,p=n["!rows"],E=Array.isArray(n),x={r:u},w,T=-1;for(g=a.s.c;g<=a.e.c;++g)h[g]=Bi(g);for(f=a.s.r;f<=a.e.r;++f){for(s=[],u=Si(f),g=a.s.c;g<=a.e.c;++g){l=h[g]+u;var R=E?(n[f]||[])[g]:n[l];R!==void 0&&(o=K_e(R,l,n,e))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(x={r:u},p&&p[f]&&(w=p[f],w.hidden&&(x.hidden=1),T=-1,w.hpx?T=_v(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(x.ht=T,x.customHeight=1),w.level&&(x.outlineLevel=w.level)),i[i.length]=tt("row",s.join(""),x))}if(p)for(;f<p.length;++f)p&&p[f]&&(x={r:f+1},w=p[f],w.hidden&&(x.hidden=1),T=-1,w.hpx?T=_v(w.hpx):w.hpt&&(T=w.hpt),T>-1&&(x.ht=T,x.customHeight=1),w.level&&(x.outlineLevel=w.level),i[i.length]=tt("row","",x));return i.join("")}function IV(n,e,t,r){var i=[Or,tt("worksheet",null,{xmlns:V0[0],"xmlns:r":ni.r})],s=t.SheetNames[n],a=0,o="",l=t.Sheets[s];l==null&&(l={});var u=l["!ref"]||"A1",h=Zn(u);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),u=Nr(h)}r||(r={}),l["!comments"]=[];var f=[];V_e(l,t,n,e,i),i[i.length]=tt("dimension",null,{ref:u}),i[i.length]=H_e(l,e,n,t),e.sheetFormat&&(i[i.length]=tt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=$_e(l,l["!cols"])),i[a=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=Y_e(l,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),l["!protect"]&&(i[i.length]=U_e(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=W_e(l["!autofilter"],l,t,n)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=j_e(l["!merges"]));var g=-1,p,E=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(E=Ln(r,-1,Fn(x[1].Target).replace(/#.*$/,""),pn.HLINK),p["r:id"]="rId"+E),(g=x[1].Target.indexOf("#"))>-1&&(p.location=Fn(x[1].Target.slice(g+1))),x[1].Tooltip&&(p.tooltip=Fn(x[1].Tooltip)),i[i.length]=tt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=z_e(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Ei("ignoredErrors",tt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(E=Ln(r,-1,"../drawings/drawing"+(n+1)+".xml",pn.DRAW),i[i.length]=tt("drawing",null,{"r:id":"rId"+E}),l["!drawing"]=f),l["!comments"].length>0&&(E=Ln(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",pn.VML),i[i.length]=tt("legacyDrawing",null,{"r:id":"rId"+E}),l["!legacy"]=E),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function X_e(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function q_e(n,e,t){var r=Ce(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=_v(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,l=r.l;r.l+=4;for(var u={r:n,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var f=-1,g=-1,p=h<<10;p<h+1<<10;++p){u.c=p;var E=Array.isArray(t)?(t[u.r]||[])[u.c]:t[Vn(u)];E&&(f<0&&(f=p),g=p)}f<0||(++o,r.write_shift(4,f),r.write_shift(4,g))}var x=r.l;return r.l=l,r.write_shift(4,o),r.l=x,r.length>r.l?r.slice(0,r.l):r}function Z_e(n,e,t,r){var i=q_e(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Ge(n,0,i)}var Q_e=dd,J_e=B0;function eye(){}function tye(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=hme(n),t}function nye(n,e,t){t==null&&(t=Ce(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return fv({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),G7(n,t),t.slice(0,t.l)}function rye(n){var e=Ia(n);return[e]}function iye(n,e,t){return t==null&&(t=Ce(8)),cd(e,t)}function sye(n){var e=ud(n);return[e]}function aye(n,e,t){return t==null&&(t=Ce(4)),hd(e,t)}function oye(n){var e=Ia(n),t=n.read_shift(1);return[e,t,"b"]}function lye(n,e,t){return t==null&&(t=Ce(9)),cd(e,t),t.write_shift(1,n.v?1:0),t}function cye(n){var e=ud(n),t=n.read_shift(1);return[e,t,"b"]}function uye(n,e,t){return t==null&&(t=Ce(5)),hd(e,t),t.write_shift(1,n.v?1:0),t}function hye(n){var e=Ia(n),t=n.read_shift(1);return[e,t,"e"]}function dye(n,e,t){return t==null&&(t=Ce(9)),cd(e,t),t.write_shift(1,n.v),t}function fye(n){var e=ud(n),t=n.read_shift(1);return[e,t,"e"]}function gye(n,e,t){return t==null&&(t=Ce(8)),hd(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function mye(n){var e=Ia(n),t=n.read_shift(4);return[e,t,"s"]}function pye(n,e,t){return t==null&&(t=Ce(12)),cd(e,t),t.write_shift(4,e.v),t}function _ye(n){var e=ud(n),t=n.read_shift(4);return[e,t,"s"]}function yye(n,e,t){return t==null&&(t=Ce(8)),hd(e,t),t.write_shift(4,e.v),t}function xye(n){var e=Ia(n),t=U0(n);return[e,t,"n"]}function vye(n,e,t){return t==null&&(t=Ce(16)),cd(e,t),Yh(n.v,t),t}function Eye(n){var e=ud(n),t=U0(n);return[e,t,"n"]}function wye(n,e,t){return t==null&&(t=Ce(12)),hd(e,t),Yh(n.v,t),t}function Sye(n){var e=Ia(n),t=B7(n);return[e,t,"n"]}function Tye(n,e,t){return t==null&&(t=Ce(12)),cd(e,t),U7(n.v,t),t}function Iye(n){var e=ud(n),t=B7(n);return[e,t,"n"]}function Aye(n,e,t){return t==null&&(t=Ce(8)),hd(e,t),U7(n.v,t),t}function Rye(n){var e=Ia(n),t=zb(n);return[e,t,"is"]}function bye(n){var e=Ia(n),t=Ui(n);return[e,t,"str"]}function Cye(n,e,t){return t==null&&(t=Ce(12+4*n.v.length)),cd(e,t),si(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Pye(n){var e=ud(n),t=Ui(n);return[e,t,"str"]}function kye(n,e,t){return t==null&&(t=Ce(8+4*n.v.length)),hd(e,t),si(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Mye(n,e,t){var r=n.l+e,i=Ia(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Nye(n,e,t){var r=n.l+e,i=Ia(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Lye(n,e,t){var r=n.l+e,i=Ia(n);i.r=t["!row"];var s=U0(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}function Oye(n,e,t){var r=n.l+e,i=Ia(n);i.r=t["!row"];var s=Ui(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=FE(n,r-n.l,t);a[3]=w0(o,null,i,t.supbooks,t)}else n.l=r;return a}var Dye=dd,Fye=B0;function jye(n,e){return e==null&&(e=Ce(4)),e.write_shift(4,n),e}function Vye(n,e){var t=n.l+e,r=dd(n),i=$b(n),s=Ui(n),a=Ui(n),o=Ui(n);n.l=t;var l={rfx:r,relId:i,loc:s,display:o};return a&&(l.Tooltip=a),l}function Gye(n,e){var t=Ce(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));B0({s:ii(n[0]),e:ii(n[0])},t),Wb("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return si(i||"",t),si(n[1].Tooltip||"",t),si("",t),t.slice(0,t.l)}function Bye(){}function Uye(n,e,t){var r=n.l+e,i=z7(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=P_e(n,r-n.l,t);a[1]=o}else n.l=r;return a}function zye(n,e,t){var r=n.l+e,i=dd(n),s=[i];if(t.cellFormula){var a=M_e(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function $ye(n,e,t){t==null&&(t=Ce(18));var r=jE(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var AV=["left","right","top","bottom","header","footer"];function Wye(n){var e={};return AV.forEach(function(t){e[t]=U0(n)}),e}function Hye(n,e){return e==null&&(e=Ce(48)),TV(n),AV.forEach(function(t){Yh(n[t],e)}),e}function Kye(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function Yye(n,e,t){t==null&&(t=Ce(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Xye(n){var e=Ce(24);return e.write_shift(4,4),e.write_shift(4,1),B0(n,e),e}function qye(n,e){return e==null&&(e=Ce(66)),e.write_shift(2,n.password?oV(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function Zye(){}function Qye(){}function Jye(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Is(e),e.z=e.z||yr[14],e.v=Ts(ns(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r:t,c:r};switch(l.s=Su(i.cellXfs,e,i),e.l&&s["!links"].push([Vn(l),e.l]),e.c&&s["!comments"].push([Vn(l),e.c]),e.t){case"s":case"str":return i.bookSST?(o=Zb(i.Strings,e.v,i.revStrings),l.t="s",l.v=o,a?Ge(n,18,yye(e,l)):Ge(n,7,pye(e,l))):(l.t="str",a?Ge(n,17,kye(e,l)):Ge(n,6,Cye(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Ge(n,13,Aye(e,l)):Ge(n,2,Tye(e,l)):a?Ge(n,16,wye(e,l)):Ge(n,5,vye(e,l)),!0;case"b":return l.t="b",a?Ge(n,15,uye(e,l)):Ge(n,4,lye(e,l)),!0;case"e":return l.t="e",a?Ge(n,14,gye(e,l)):Ge(n,3,dye(e,l)),!0}return a?Ge(n,12,aye(e,l)):Ge(n,1,iye(e,l)),!0}function exe(n,e,t,r){var i=Zn(e["!ref"]||"A1"),s,a="",o=[];Ge(n,145);var l=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var h=i.s.r;h<=u;++h){a=Si(h),Z_e(n,e,i,h);var f=!1;if(h<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){h===i.s.r&&(o[g]=Bi(g)),s=o[g]+a;var p=l?(e[h]||[])[g]:e[s];if(!p){f=!1;continue}f=Jye(n,p,h,g,r,e,f)}}Ge(n,146)}function txe(n,e){!e||!e["!merges"]||(Ge(n,177,jye(e["!merges"].length)),e["!merges"].forEach(function(t){Ge(n,176,Fye(t))}),Ge(n,178))}function nxe(n,e){!e||!e["!cols"]||(Ge(n,390),e["!cols"].forEach(function(t,r){t&&Ge(n,60,$ye(r,t))}),Ge(n,391))}function rxe(n,e){!e||!e["!ref"]||(Ge(n,648),Ge(n,649,Xye(Zn(e["!ref"]))),Ge(n,650))}function ixe(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=Ln(t,-1,r[1].Target.replace(/#.*$/,""),pn.HLINK);Ge(n,494,Gye(r,i))}}),delete e["!links"]}function sxe(n,e,t,r){if(e["!comments"].length>0){var i=Ln(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",pn.VML);Ge(n,551,Wb("rId"+i)),e["!legacy"]=i}}function axe(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Nr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=Js(s);o.s.r==o.e.r&&(o.e.r=Js(e["!ref"]).e.r,s=Nr(o));for(var l=0;l<a.length;++l){var u=a[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Ge(n,161,B0(Zn(s))),Ge(n,162)}}function oxe(n,e,t){Ge(n,133),Ge(n,137,Yye(e,t)),Ge(n,138),Ge(n,134)}function lxe(n,e){e["!protect"]&&Ge(n,535,qye(e["!protect"]))}function cxe(n,e,t,r){var i=ws(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var l=Zn(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Ge(i,129),(t.vbaraw||a["!outline"])&&Ge(i,147,nye(o,a["!outline"])),Ge(i,148,J_e(l)),oxe(i,a,t.Workbook),nxe(i,a),exe(i,a,n,e),lxe(i,a),axe(i,a,t,n),txe(i,a),ixe(i,a,r),a["!margins"]&&Ge(i,476,Hye(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&rxe(i,a),sxe(i,a,n,r),Ge(i,130),i.end()}function uxe(n,e){n.l+=10;var t=Ui(n);return{name:t}}var hxe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function dxe(n){return!n.Workbook||!n.Workbook.WBProps?"false":zge(n.Workbook.WBProps.date1904)?"true":"false"}var fxe="][*?/\\".split("");function RV(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return fxe.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function gxe(n,e,t){n.forEach(function(r,i){RV(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function mxe(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];gxe(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)F_e(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function bV(n){var e=[Or];e[e.length]=tt("workbook",null,{xmlns:V0[0],"xmlns:r":ni.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(hxe.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=tt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Fn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=tt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=tt("definedName",Fn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function pxe(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=CI(n),t.name=Ui(n),t}function _xe(n,e){return e||(e=Ce(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),Wb(n.strRelID,e),si(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function yxe(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Ui(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function xxe(n,e){e||(e=Ce(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),G7(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function vxe(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=dme(n),a=k_e(n,0,t),o=$b(n);n.l=r;var l={Name:s,Ptg:a};return i<268435455&&(l.Sheet=i),o&&(l.Comment=o),l}function Exe(n,e){Ge(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ge(n,156,_xe(i))}Ge(n,144)}function wxe(n,e){e||(e=Ce(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return si("SheetJS",e),si(sv.version,e),si(sv.version,e),si("7262",e),e.length>e.l?e.slice(0,e.l):e}function Sxe(n,e){e||(e=Ce(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function Txe(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Ge(n,135),Ge(n,158,Sxe(i)),Ge(n,136))}}function Ixe(n,e){var t=ws();return Ge(t,131),Ge(t,128,wxe()),Ge(t,153,xxe(n.Workbook&&n.Workbook.WBProps||null)),Txe(t,n),Exe(t,n),Ge(t,132),t.end()}function Axe(n,e,t){return(e.slice(-4)===".bin"?Ixe:bV)(n)}function Rxe(n,e,t,r,i){return(e.slice(-4)===".bin"?cxe:IV)(n,t,r,i)}function bxe(n,e,t){return(e.slice(-4)===".bin"?Hpe:uV)(n,t)}function Cxe(n,e,t){return(e.slice(-4)===".bin"?xpe:aV)(n,t)}function Pxe(n,e,t){return(e.slice(-4)===".bin"?l1e:mV)(n)}function kxe(n){return(n.slice(-4)===".bin"?e1e:fV)()}function Mxe(n,e){var t=[];return n.Props&&t.push(bme(n.Props,e)),n.Custprops&&t.push(Cme(n.Props,n.Custprops)),t.join("")}function Nxe(){return""}function Lxe(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(tt("NumberFormat",null,{"ss:Format":Fn(yr[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(tt("Style",s.join(""),a))}),tt("Styles",t.join(""))}function CV(n){return tt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+Xb(n.Ref,{r:0,c:0})})}function Oxe(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(CV(i)))}return tt("Names",t.join(""))}function Dxe(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(CV(o)))}return s.join("")}function Fxe(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(tt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(tt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(tt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(tt("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(Ei("ProtectContents","True")),n["!protect"].objects&&i.push(Ei("ProtectObjects","True")),n["!protect"].scenarios&&i.push(Ei("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(Ei("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(Ei("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":tt("WorksheetOptions",i.join(""),{xmlns:$s.x})}function jxe(n){return n.map(function(e){var t=Uge(e.t||""),r=tt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return tt("Comment",r,{"ss:Author":e.a})}).join("")}function Vxe(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Fn(Xb(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var l=ii(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Fn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Fn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],h=0;h!=u.length;++h)u[h].s.c!=a.c||u[h].s.r!=a.r||(u[h].e.c>u[h].s.c&&(o["ss:MergeAcross"]=u[h].e.c-u[h].s.c),u[h].e.r>u[h].s.r&&(o["ss:MergeDown"]=u[h].e.r-u[h].s.r));var f="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":f="Number",g=String(n.v);break;case"b":f="Boolean",g=n.v?"1":"0";break;case"e":f="Error",g=I1[n.v];break;case"d":f="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||yr[14]);break;case"s":f="String",g=Bge(n.v||"");break}var p=Su(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var E=n.v!=null?g:"",x=n.t=="z"?"":'<Data ss:Type="'+f+'">'+E+"</Data>";return(n.c||[]).length>0&&(x+=jxe(n.c)),tt("Cell",x,o)}function Gxe(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=cV(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Bxe(n,e,t,r){if(!n["!ref"])return"";var i=Zn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(w,T){Kb(w);var R=!!w.width,k=jE(T,w),N={"ss:Index":T+1};R&&(N["ss:Width"]=mv(k.width)),w.hidden&&(N["ss:Hidden"]="1"),o.push(tt("Column",null,N))});for(var l=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var h=[Gxe(u,(n["!rows"]||[])[u])],f=i.s.c;f<=i.e.c;++f){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>f)&&!(s[a].s.r>u)&&!(s[a].e.c<f)&&!(s[a].e.r<u)){(s[a].s.c!=f||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:f},E=Vn(p),x=l?(n[u]||[])[f]:n[E];h.push(Vxe(x,E,n,e,t,r,p))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function Uxe(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Dxe(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Bxe(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Fxe(s,e,n,t)),r.join("")}function zxe(n,e){e||(e={}),n.SSF||(n.SSF=Is(yr)),n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Su(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Mxe(n,e)),t.push(Nxe()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(tt("Worksheet",Uxe(r,e,n),{"ss:Name":Fn(n.SheetNames[r])}));return t[2]=Lxe(n,e),t[3]=Oxe(n),Or+tt("Workbook",t.join(""),{xmlns:$s.ss,"xmlns:o":$s.o,"xmlns:x":$s.x,"xmlns:ss":$s.ss,"xmlns:dt":$s.dt,"xmlns:html":$s.html})}var NS={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function $xe(n,e){var t=[],r=[],i=[],s=0,a,o=BL(eO,"n"),l=BL(tO,"n");if(n.Props)for(a=Ii(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=Ii(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(l,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)J7.indexOf(i[s][0])>-1||q7.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Gn.utils.cfb_add(e,"/SummaryInformation",aO(r,NS.SI,l,tO)),(t.length||u.length)&&Gn.utils.cfb_add(e,"/DocumentSummaryInformation",aO(t,NS.DSI,o,eO,u.length?u:null,NS.UDI))}function Wxe(n,e){var t=e||{},r=Gn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Gn.utils.cfb_add(r,i,PV(n,t)),t.biff==8&&(n.Props||n.Custprops)&&$xe(n,r),t.biff==8&&n.vbaraw&&c1e(r,Gn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Hxe={0:{f:X_e},1:{f:rye},2:{f:Sye},3:{f:hye},4:{f:oye},5:{f:xye},6:{f:bye},7:{f:mye},8:{f:Oye},9:{f:Lye},10:{f:Mye},11:{f:Nye},12:{f:sye},13:{f:Iye},14:{f:fye},15:{f:cye},16:{f:Eye},17:{f:Pye},18:{f:_ye},19:{f:zb},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:vxe},40:{},42:{},43:{f:bpe},44:{f:Ape},45:{f:kpe},46:{f:Npe},47:{f:Mpe},48:{},49:{f:sme},50:{},51:{f:Xpe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:ape},62:{f:Rye},63:{f:t1e},64:{f:Zye},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:$o,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Kye},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:tye},148:{f:Q_e,p:16},151:{f:Bye},152:{},153:{f:yxe},154:{},155:{},156:{f:pxe},157:{},158:{},159:{T:1,f:ppe},160:{T:-1},161:{T:1,f:dd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Dye},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Kpe},336:{T:-1},337:{f:Qpe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:CI},357:{},358:{},359:{},360:{T:1},361:{},362:{f:epe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Uye},427:{f:zye},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Wye},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:eye},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Vye},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:CI},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:a1e},633:{T:1},634:{T:-1},635:{T:1,f:i1e},636:{T:-1},637:{f:cme},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:uxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Qye},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function nt(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Gb(t)&&n.push(t)}}function Kxe(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return nt(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,l=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var h=n.next(4);for(h.write_shift(2,s),h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u;l<i;){for(h=n.next(4),h.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;h.write_shift(2,u),n.push(t.slice(l,l+u)),l+=u}}}function R1(n,e,t){return n||(n=Ce(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Yxe(n,e,t,r){var i=Ce(9);return R1(i,n,e),tV(t,r||"b",i),i}function Xxe(n,e,t){var r=Ce(8+2*t.length);return R1(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function qxe(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ts(ns(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?nt(n,2,upe(t,r,i)):nt(n,3,cpe(t,r,i));return;case"b":case"e":nt(n,5,Yxe(t,r,e.v,e.t));return;case"s":case"str":nt(n,4,Xxe(t,r,(e.v||"").slice(0,255)));return}nt(n,1,R1(null,t,r))}function Zxe(n,e,t,r){var i=Array.isArray(e),s=Zn(e["!ref"]||"A1"),a,o="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Nr(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Si(u);for(var h=s.s.c;h<=s.e.c;++h){u===s.s.r&&(l[h]=Bi(h)),a=l[h]+o;var f=i?(e[u]||[])[h]:e[a];f&&qxe(n,f,u,h)}}}function Qxe(n,e){for(var t=e||{},r=ws(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return nt(r,t.biff==4?1033:t.biff==3?521:9,Hb(n,16,t)),Zxe(r,n.Sheets[n.SheetNames[i]],i,t),nt(r,10),r.end()}function Jxe(n,e,t){nt(n,49,Hme({sz:12,name:"Arial"},t))}function eve(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&nt(n,1054,Xme(i,e[i],t))})}function tve(n,e){var t=Ce(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),nt(n,2151,t),t=Ce(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),iV(Zn(e["!ref"]||"A1"),t),t.write_shift(4,4),nt(n,2152,t)}function nve(n,e){for(var t=0;t<16;++t)nt(n,224,lO({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){nt(n,224,lO(r,0,e))})}function rve(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];nt(n,440,rpe(r)),r[1].Tooltip&&nt(n,2048,ipe(r))}delete e["!links"]}function ive(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&nt(n,125,ope(jE(i,r),i))})}}function sve(n,e,t,r,i){var s=16+Su(i.cellXfs,e,i);if(e.v==null&&!e.bf){nt(n,513,Xh(t,r,s));return}if(e.bf)nt(n,6,C_e(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Ts(ns(e.v)):e.v;nt(n,515,Jme(t,r,a,s));break;case"b":case"e":nt(n,517,Qme(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=Zb(i.Strings,e.v,i.revStrings);nt(n,253,Kme(t,r,o,s))}else nt(n,516,Yme(t,r,(e.v||"").slice(0,255),s,i));break;default:nt(n,513,Xh(t,r,s))}}function ave(n,e,t){var r=ws(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},l=Array.isArray(s),u=e.biff==8,h,f="",g=[],p=Zn(s["!ref"]||"A1"),E=u?65536:16384;if(p.e.c>255||p.e.r>=E){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,E-1)}nt(r,2057,Hb(t,16,e)),nt(r,13,fa(1)),nt(r,12,fa(100)),nt(r,15,Yi(!0)),nt(r,17,Yi(!1)),nt(r,16,Yh(.001)),nt(r,95,Yi(!0)),nt(r,42,Yi(!1)),nt(r,43,Yi(!1)),nt(r,130,fa(1)),nt(r,128,Zme()),nt(r,131,Yi(!1)),nt(r,132,Yi(!1)),u&&ive(r,s["!cols"]),nt(r,512,qme(p,e)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){f=Si(x);for(var w=p.s.c;w<=p.e.c;++w){x===p.s.r&&(g[w]=Bi(w)),h=g[w]+f;var T=l?(s[x]||[])[w]:s[h];T&&(sve(r,T,x,w,e),u&&T.l&&s["!links"].push([h,T.l]))}}var R=o.CodeName||o.name||i;return u&&nt(r,574,Wme((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&nt(r,229,npe(s["!merges"])),u&&rve(r,s),nt(r,442,rV(R)),u&&tve(r,s),nt(r,10),r.end()}function ove(n,e,t){var r=ws(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,l=t.biff==5;if(nt(r,2057,Hb(n,5,t)),t.bookType=="xla"&&nt(r,135),nt(r,225,o?fa(1200):null),nt(r,193,Mme(2)),l&&nt(r,191),l&&nt(r,192),nt(r,226),nt(r,92,Bme("SheetJS",t)),nt(r,66,fa(o?1200:1252)),o&&nt(r,353,fa(0)),o&&nt(r,448),nt(r,317,lpe(n.SheetNames.length)),o&&n.vbaraw&&nt(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";nt(r,442,rV(u))}nt(r,156,fa(17)),nt(r,25,Yi(!1)),nt(r,18,Yi(!1)),nt(r,19,fa(0)),o&&nt(r,431,Yi(!1)),o&&nt(r,444,fa(0)),nt(r,61,$me()),nt(r,64,Yi(!1)),nt(r,141,fa(0)),nt(r,34,Yi(dxe(n)=="true")),nt(r,14,Yi(!0)),o&&nt(r,439,Yi(!1)),nt(r,218,fa(0)),Jxe(r,n,t),eve(r,n.SSF,t),nve(r,t),o&&nt(r,352,Yi(!1));var h=r.end(),f=ws();o&&nt(f,140,spe()),o&&t.Strings&&Kxe(f,252,zme(t.Strings)),nt(f,10);var g=f.end(),p=ws(),E=0,x=0;for(x=0;x<n.SheetNames.length;++x)E+=(o?12:11)+(o?2:1)*n.SheetNames[x].length;var w=h.length+E+g.length;for(x=0;x<n.SheetNames.length;++x){var T=s[x]||{};nt(p,133,Ume({pos:w,hs:T.Hidden||0,dt:0,name:n.SheetNames[x]},t)),w+=e[x].length}var R=p.end();if(E!=R.length)throw new Error("BS8 "+E+" != "+R.length);var k=[];return h.length&&k.push(h),R.length&&k.push(R),g.length&&k.push(g),vi(k)}function lve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=Is(yr)),n&&n.SSF&&(NE(),ME(n.SSF),t.revssf=LE(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Qb(t),t.cellXfs=[],Su(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=ave(i,t,n);return r.unshift(ove(n,r,t)),vi(r)}function PV(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Js(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return lve(n,e);case 4:case 3:case 2:return Qxe(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function cve(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,l=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var h=Vn({r:t,c:a}),f=r.dense?(n[t]||[])[a]:n[h],g=f&&f.v!=null&&(f.h||Gge(f.w||(jl(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),r.editable?g='<span contenteditable="true">'+g+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+f.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+h,s.push(tt("td",g,p))}}var E="<tr>";return E+s.join("")+"</tr>"}var uve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',hve="</body></html>";function dve(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function kV(n,e){var t=e||{},r=t.header!=null?t.header:uve,i=t.footer!=null?t.footer:hve,s=[r],a=Js(n["!ref"]);t.dense=Array.isArray(n),s.push(dve(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(cve(n,a,o,t));return s.push("</table>"+i),s.join("")}function MV(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?ii(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var h=Js(n["!ref"]);u.s.r=Math.min(u.s.r,h.s.r),u.s.c=Math.min(u.s.c,h.s.c),u.e.r=Math.max(u.e.r,h.e.r),u.e.c=Math.max(u.e.c,h.e.c),i==-1&&(u.e.r=i=h.e.r+1)}var f=[],g=0,p=n["!rows"]||(n["!rows"]=[]),E=0,x=0,w=0,T=0,R=0,k=0;for(n["!cols"]||(n["!cols"]=[]);E<o.length&&x<l;++E){var N=o[E];if(mO(N)){if(r.display)continue;p[x]={hidden:!0}}var j=N.children;for(w=T=0;w<j.length;++w){var B=j[w];if(!(r.display&&mO(B))){var P=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):$ge(B.innerHTML),C=B.getAttribute("data-z")||B.getAttribute("z");for(g=0;g<f.length;++g){var M=f[g];M.s.c==T+s&&M.s.r<x+i&&x+i<=M.e.r&&(T=M.e.c+1-s,g=-1)}k=+B.getAttribute("colspan")||1,((R=+B.getAttribute("rowspan")||1)>1||k>1)&&f.push({s:{r:x+i,c:T+s},e:{r:x+i+(R||1)-1,c:T+s+(k||1)-1}});var F={t:"s",v:P},O=B.getAttribute("data-t")||B.getAttribute("t")||"";P!=null&&(P.length==0?F.t=O||"z":r.raw||P.trim().length==0||O=="s"||(P==="TRUE"?F={t:"b",v:!0}:P==="FALSE"?F={t:"b",v:!1}:isNaN(Rl(P))?isNaN(Ap(P).getDate())||(F={t:"d",v:ns(P)},r.cellDates||(F={t:"n",v:Ts(F.v)}),F.z=r.dateNF||yr[14]):F={t:"n",v:Rl(P)})),F.z===void 0&&C!=null&&(F.z=C);var W="",D=B.getElementsByTagName("A");if(D&&D.length)for(var we=0;we<D.length&&!(D[we].hasAttribute("href")&&(W=D[we].getAttribute("href"),W.charAt(0)!="#"));++we);W&&W.charAt(0)!="#"&&(F.l={Target:W}),r.dense?(n[x+i]||(n[x+i]=[]),n[x+i][T+s]=F):n[Vn({c:T+s,r:x+i})]=F,u.e.c<T+s&&(u.e.c=T+s),T+=k}}++x}return f.length&&(n["!merges"]=(n["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+i),n["!ref"]=Nr(u),x>=l&&(n["!fullref"]=Nr((u.e.r=o.length-E+x-1+i,u))),n}function NV(n,e){var t=e||{},r=t.dense?[]:{};return MV(r,n,e)}function fve(n,e){return ld(NV(n,e),e)}function mO(n){var e="",t=gve(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function gve(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var mve=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+bp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Or+e}})(),pO=(function(){var n=function(s){return Fn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var l=[];l.push('      <table:table table:name="'+Fn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,h=0,f=Js(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,E=Array.isArray(s);if(s["!cols"])for(h=0;h<=f.e.c;++h)l.push("        <table:table-column"+(s["!cols"][h]?' table:style-name="co'+s["!cols"][h].ods+'"':"")+`></table:table-column>
`);var x="",w=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=w[u]?' table:style-name="ro'+w[u].ods+'"':"",l.push("        <table:table-row"+x+`>
`),h=0;h<f.s.c;++h)l.push(e);for(;h<=f.e.c;++h){var T=!1,R={},k="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>h)&&!(g[p].s.r>u)&&!(g[p].e.c<h)&&!(g[p].e.r<u)){(g[p].s.c!=h||g[p].s.r!=u)&&(T=!0),R["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,R["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(T){l.push(t);continue}var N=Vn({r:u,c:h}),j=E?(s[u]||[])[h]:s[N];if(j&&j.f&&(R["table:formula"]=Fn(O_e(j.f)),j.F&&j.F.slice(0,N.length)==N)){var B=Js(j.F);R["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,R["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!j){l.push(e);continue}switch(j.t){case"b":k=j.v?"TRUE":"FALSE",R["office:value-type"]="boolean",R["office:boolean-value"]=j.v?"true":"false";break;case"n":k=j.w||String(j.v||0),R["office:value-type"]="float",R["office:value"]=j.v||0;break;case"s":case"str":k=j.v==null?"":j.v,R["office:value-type"]="string";break;case"d":k=j.w||ns(j.v).toISOString(),R["office:value-type"]="date",R["office:date-value"]=ns(j.v).toISOString(),R["table:style-name"]="ce1";break;default:l.push(e);continue}var P=n(k);if(j.l&&j.l.Target){var C=j.l.Target;C=C.charAt(0)=="#"?"#"+D_e(C.slice(1)):C,C.charAt(0)!="#"&&!C.match(/^\w+:/)&&(C="../"+C),P=tt("text:a",P,{"xlink:href":C.replace(/&/g,"&amp;")})}l.push("          "+tt("table:table-cell",tt("text:p",P,{}),R)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var h=0;h<u["!cols"].length;++h)if(u["!cols"][h]){var f=u["!cols"][h];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Kb(f),f.ods=o;var g=u["!cols"][h].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var h=0;h<u["!rows"].length;++h)if(u["!rows"][h]){u["!rows"][h].ods=l;var f=u["!rows"][h].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Or],u=bp({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=bp({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+h+`>
`),l.push(Y7().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),i(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=a.SheetNames.length;++f)l.push(r(a.Sheets[a.SheetNames[f]],a,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function LV(n,e){if(e.bookType=="fods")return pO(n,e);var t=Db(),r="",i=[],s=[];return r="mimetype",qt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",qt(t,r,pO(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",qt(t,r,mve(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",qt(t,r,Or+Y7()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",qt(t,r,Rme(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",qt(t,r,Ime(i)),t}function yv(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function pve(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):za(Rp(n))}function _ve(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function mu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function yve(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Cp(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Nn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Xf(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Ur(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Cp(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var l=t[0];n[t[0]++]>=128;);o=n.slice(l,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Cp(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function gi(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(Nn(r*8+i.type)),i.type==2&&e.push(Nn(i.data.length)),e.push(i.data))})}),mu(e)}function Oa(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Cp(n,r),s=Ur(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Xf(s[1][0].data),messages:[]};s[2].forEach(function(o){var l=Ur(o.data),u=Xf(l[3][0].data);a.messages.push({meta:l,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Xf(s[3][0].data)>>>0>0),t.push(a)}return t}function sf(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Nn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Nn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Nn(a.data.length)}],r[2].push({data:gi(a.meta),type:2})});var s=gi(r);e.push(Nn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),mu(e)}function xve(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Cp(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var l=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,l=(e[t[0]++]&224)<<3,l|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(l=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(l=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[mu(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(i.push(i[0].slice(-l)),u-=l;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-l,-l+u))}}var h=mu(i);if(h.length!=r)throw new Error("Unexpected length: ".concat(h.length," != ").concat(r));return h}function Da(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(xve(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return mu(e)}function af(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=Nn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return mu(e)}function LS(n,e){var t=new Uint8Array(32),r=yv(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,yve(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function OS(n,e){var t=new Uint8Array(32),r=yv(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function wc(n){var e=Ur(n);return Cp(e[1][0].data)}function vve(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Xf(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=yv(n[7][0].data),h=0,f=[],g=yv(n[4][0].data),p=0,E=[],x=0;x<e.length;++x){if(e[x]==null){u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535);continue}u.setUint16(x*2,h,!0),g.setUint16(x*2,p,!0);var w,T;switch(typeof e[x]){case"string":w=LS({t:"s",v:e[x]},t),T=OS({t:"s",v:e[x]},t);break;case"number":w=LS({t:"n",v:e[x]},t),T=OS({t:"n",v:e[x]},t);break;case"boolean":w=LS({t:"b",v:e[x]},t),T=OS({t:"b",v:e[x]},t);break;default:throw new Error("Unsupported value "+e[x])}f.push(w),h+=w.length,E.push(T),p+=T.length,++l}for(n[2][0].data=Nn(l);x<n[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),g.setUint16(x*2,65535,!0);return n[6][0].data=mu(f),n[3][0].data=mu(E),l}function Eve(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Js(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Nr(r)));var s=xv(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(re){return re.forEach(function(te){typeof te=="string"&&a.push(te)})});var o={},l=[],u=Gn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(re,te){return[re,u.FullPaths[te]]}).forEach(function(re){var te=re[0],ee=re[1];if(te.type==2&&te.name.match(/\.iwa/)){var de=te.content,Oe=Da(de),Se=Oa(Oe);Se.forEach(function(Fe){l.push(Fe.id),o[Fe.id]={deps:[],location:ee,type:Xf(Fe.messages[0].meta[1][0].data)}})}}),l.sort(function(re,te){return re-te});var h=l.filter(function(re){return re>1}).map(function(re){return[re,Nn(re)]});u.FileIndex.map(function(re,te){return[re,u.FullPaths[te]]}).forEach(function(re){var te=re[0];if(re[1],!!te.name.match(/\.iwa/)){var ee=Oa(Da(te.content));ee.forEach(function(de){de.messages.forEach(function(Oe){h.forEach(function(Se){de.messages.some(function(Fe){return Xf(Fe.meta[1][0].data)!=11006&&_ve(Fe.data,Se[1])})&&o[Se[0]].deps.push(de.id)})})})}});for(var f=Gn.find(u,o[1].location),g=Oa(Da(f.content)),p,E=0;E<g.length;++E){var x=g[E];x.id==1&&(p=x)}var w=wc(Ur(p.messages[0].data)[1][0].data);for(f=Gn.find(u,o[w].location),g=Oa(Da(f.content)),E=0;E<g.length;++E)x=g[E],x.id==w&&(p=x);for(w=wc(Ur(p.messages[0].data)[2][0].data),f=Gn.find(u,o[w].location),g=Oa(Da(f.content)),E=0;E<g.length;++E)x=g[E],x.id==w&&(p=x);for(w=wc(Ur(p.messages[0].data)[2][0].data),f=Gn.find(u,o[w].location),g=Oa(Da(f.content)),E=0;E<g.length;++E)x=g[E],x.id==w&&(p=x);var T=Ur(p.messages[0].data);{T[6][0].data=Nn(r.e.r+1),T[7][0].data=Nn(r.e.c+1);var R=wc(T[46][0].data),k=Gn.find(u,o[R].location),N=Oa(Da(k.content));{for(var j=0;j<N.length&&N[j].id!=R;++j);if(N[j].id!=R)throw"Bad ColumnRowUIDMapArchive";var B=Ur(N[j].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var P=0;P<=r.e.c;++P){var C=[];C[1]=C[2]=[{type:0,data:Nn(P+420690)}],B[1].push({type:2,data:gi(C)}),B[2].push({type:0,data:Nn(P)}),B[3].push({type:0,data:Nn(P)})}B[4]=[],B[5]=[],B[6]=[];for(var M=0;M<=r.e.r;++M)C=[],C[1]=C[2]=[{type:0,data:Nn(M+726270)}],B[4].push({type:2,data:gi(C)}),B[5].push({type:0,data:Nn(M)}),B[6].push({type:0,data:Nn(M)});N[j].messages[0].data=gi(B)}k.content=af(sf(N)),k.size=k.content.length,delete T[46];var F=Ur(T[4][0].data);{F[7][0].data=Nn(r.e.r+1);var O=Ur(F[1][0].data),W=wc(O[2][0].data);k=Gn.find(u,o[W].location),N=Oa(Da(k.content));{if(N[0].id!=W)throw"Bad HeaderStorageBucket";var D=Ur(N[0].messages[0].data);for(M=0;M<s.length;++M){var we=Ur(D[2][0].data);we[1][0].data=Nn(M),we[4][0].data=Nn(s[M].length),D[2][M]={type:D[2][0].type,data:gi(we)}}N[0].messages[0].data=gi(D)}k.content=af(sf(N)),k.size=k.content.length;var Ne=wc(F[2][0].data);k=Gn.find(u,o[Ne].location),N=Oa(Da(k.content));{if(N[0].id!=Ne)throw"Bad HeaderStorageBucket";for(D=Ur(N[0].messages[0].data),P=0;P<=r.e.c;++P)we=Ur(D[2][0].data),we[1][0].data=Nn(P),we[4][0].data=Nn(r.e.r+1),D[2][P]={type:D[2][0].type,data:gi(we)};N[0].messages[0].data=gi(D)}k.content=af(sf(N)),k.size=k.content.length;var Le=wc(F[4][0].data);(function(){for(var re=Gn.find(u,o[Le].location),te=Oa(Da(re.content)),ee,de=0;de<te.length;++de){var Oe=te[de];Oe.id==Le&&(ee=Oe)}var Se=Ur(ee.messages[0].data);{Se[3]=[];var Fe=[];a.forEach(function(gt,_t){Fe[1]=[{type:0,data:Nn(_t)}],Fe[2]=[{type:0,data:Nn(1)}],Fe[3]=[{type:2,data:pve(gt)}],Se[3].push({type:2,data:gi(Fe)})})}ee.messages[0].data=gi(Se);var je=sf(te),Qe=af(je);re.content=Qe,re.size=re.content.length})();var be=Ur(F[3][0].data);{var ce=be[1][0];delete be[2];var Re=Ur(ce.data);{var Ae=wc(Re[2][0].data);(function(){for(var re=Gn.find(u,o[Ae].location),te=Oa(Da(re.content)),ee,de=0;de<te.length;++de){var Oe=te[de];Oe.id==Ae&&(ee=Oe)}var Se=Ur(ee.messages[0].data);{delete Se[6],delete be[7];var Fe=new Uint8Array(Se[5][0].data);Se[5]=[];for(var je=0,Qe=0;Qe<=r.e.r;++Qe){var gt=Ur(Fe);je+=vve(gt,s[Qe],a),gt[1][0].data=Nn(Qe),Se[5].push({data:gi(gt),type:2})}Se[1]=[{type:0,data:Nn(r.e.c+1)}],Se[2]=[{type:0,data:Nn(r.e.r+1)}],Se[3]=[{type:0,data:Nn(je)}],Se[4]=[{type:0,data:Nn(r.e.r+1)}]}ee.messages[0].data=gi(Se);var _t=sf(te),Lt=af(_t);re.content=Lt,re.size=re.content.length})()}ce.data=gi(Re)}F[3][0].data=gi(be)}T[4][0].data=gi(F)}p.messages[0].data=gi(T);var ie=sf(g),V=af(ie);return f.content=V,f.size=f.content.length,u}function wve(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function Qb(n){wve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Sve(n,e){return e.bookType=="ods"?LV(n,e):e.bookType=="numbers"?Eve(n,e):e.bookType=="xlsb"?Tve(n,e):Ive(n,e)}function Tve(n,e){Mf=1024,n&&!n.SSF&&(n.SSF=Is(yr)),n&&n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Dm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=pV.indexOf(e.bookType)>-1,i=W7();Qb(e=e||{});var s=Db(),a="",o=0;if(e.cellXfs=[],Su(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",qt(s,a,X7(n.Props,e)),i.coreprops.push(a),Ln(e.rels,2,a,pn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}for(n.Props.Worksheets=n.Props.SheetNames.length,qt(s,a,Z7(n.Props)),i.extprops.push(a),Ln(e.rels,3,a,pn.EXT_PROPS),n.Custprops!==n.Props&&Ii(n.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(s,a,Q7(n.Custprops)),i.custprops.push(a),Ln(e.rels,4,a,pn.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var h={"!id":{}},f=n.Sheets[n.SheetNames[o-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,qt(s,a,Rxe(o-1,a,e,n,h)),i.sheets.push(a),Ln(e.wbrels,-1,"worksheets/sheet"+o+"."+t,pn.WS[0])}if(f){var p=f["!comments"],E=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+t,qt(s,x,Pxe(p,x)),i.comments.push(x),Ln(h,-1,"../comments"+o+"."+t,pn.CMNT),E=!0),f["!legacy"]&&E&&qt(s,"xl/drawings/vmlDrawing"+o+".vml",gV(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&qt(s,K7(a),Kf(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(s,a,Cxe(e.Strings,a,e)),i.strs.push(a),Ln(e.wbrels,-1,"sharedStrings."+t,pn.SST)),a="xl/workbook."+t,qt(s,a,Axe(n,a)),i.workbooks.push(a),Ln(e.rels,1,a,pn.WB),a="xl/theme/theme1.xml",qt(s,a,dV(n.Themes,e)),i.themes.push(a),Ln(e.wbrels,-1,"theme/theme1.xml",pn.THEME),a="xl/styles."+t,qt(s,a,bxe(n,a,e)),i.styles.push(a),Ln(e.wbrels,-1,"styles."+t,pn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",qt(s,a,n.vbaraw),i.vba.push(a),Ln(e.wbrels,-1,"vbaProject.bin",pn.VBA)),a="xl/metadata."+t,qt(s,a,kxe(a)),i.metadata.push(a),Ln(e.wbrels,-1,"metadata."+t,pn.XLMETA),qt(s,"[Content_Types].xml",H7(i,e)),qt(s,"_rels/.rels",Kf(e.rels)),qt(s,"xl/_rels/workbook."+t+".rels",Kf(e.wbrels)),delete e.revssf,delete e.ssf,s}function Ive(n,e){Mf=1024,n&&!n.SSF&&(n.SSF=Is(yr)),n&&n.SSF&&(NE(),ME(n.SSF),e.revssf=LE(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Dm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=pV.indexOf(e.bookType)>-1,i=W7();Qb(e=e||{});var s=Db(),a="",o=0;if(e.cellXfs=[],Su(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",qt(s,a,X7(n.Props,e)),i.coreprops.push(a),Ln(e.rels,2,a,pn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var l=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(n.SheetNames[u]);n.Props.SheetNames=l}n.Props.Worksheets=n.Props.SheetNames.length,qt(s,a,Z7(n.Props)),i.extprops.push(a),Ln(e.rels,3,a,pn.EXT_PROPS),n.Custprops!==n.Props&&Ii(n.Custprops||{}).length>0&&(a="docProps/custom.xml",qt(s,a,Q7(n.Custprops)),i.custprops.push(a),Ln(e.rels,4,a,pn.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var f={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,qt(s,a,IV(o-1,e,n,f)),i.sheets.push(a),Ln(e.wbrels,-1,"worksheets/sheet"+o+"."+t,pn.WS[0])}if(g){var E=g["!comments"],x=!1,w="";if(E&&E.length>0){var T=!1;E.forEach(function(R){R[1].forEach(function(k){k.T==!0&&(T=!0)})}),T&&(w="xl/threadedComments/threadedComment"+o+"."+t,qt(s,w,n1e(E,h,e)),i.threadedcomments.push(w),Ln(f,-1,"../threadedComments/threadedComment"+o+"."+t,pn.TCMNT)),w="xl/comments"+o+"."+t,qt(s,w,mV(E)),i.comments.push(w),Ln(f,-1,"../comments"+o+"."+t,pn.CMNT),x=!0}g["!legacy"]&&x&&qt(s,"xl/drawings/vmlDrawing"+o+".vml",gV(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}f["!id"].rId1&&qt(s,K7(a),Kf(f))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,qt(s,a,aV(e.Strings,e)),i.strs.push(a),Ln(e.wbrels,-1,"sharedStrings."+t,pn.SST)),a="xl/workbook."+t,qt(s,a,bV(n)),i.workbooks.push(a),Ln(e.rels,1,a,pn.WB),a="xl/theme/theme1.xml",qt(s,a,dV(n.Themes,e)),i.themes.push(a),Ln(e.wbrels,-1,"theme/theme1.xml",pn.THEME),a="xl/styles."+t,qt(s,a,uV(n,e)),i.styles.push(a),Ln(e.wbrels,-1,"styles."+t,pn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",qt(s,a,n.vbaraw),i.vba.push(a),Ln(e.wbrels,-1,"vbaProject.bin",pn.VBA)),a="xl/metadata."+t,qt(s,a,fV()),i.metadata.push(a),Ln(e.wbrels,-1,"metadata."+t,pn.XLMETA),h.length>1&&(a="xl/persons/person.xml",qt(s,a,r1e(h)),i.people.push(a),Ln(e.wbrels,-1,"persons/person.xml",pn.PEOPLE)),qt(s,"[Content_Types].xml",H7(i,e)),qt(s,"_rels/.rels",Kf(e.rels)),qt(s,"xl/_rels/workbook."+t+".rels",Kf(e.wbrels)),delete e.revssf,delete e.ssf,s}function Ave(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Fl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function OV(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return S1(e.file,Gn.write(n,{type:En?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Gn.write(n,e)}function Rve(n,e){var t=Is(e||{}),r=Sve(n,t);return bve(r,t)}function bve(n,e){var t={},r=En?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Gn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(kE(i))}return e.password&&typeof encrypt_agile<"u"?OV(encrypt_agile(i,e.password),e):e.type==="file"?S1(e.file,i):e.type=="string"?Mm(i):i}function Cve(n,e){var t=e||{},r=Wxe(n,t);return OV(r,t)}function wo(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Ip(Rp(r));case"binary":return Rp(r);case"string":return n;case"file":return S1(e.file,r,"utf8");case"buffer":return En?$l(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):wo(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Pve(n,e){switch(e.type){case"base64":return Ip(n);case"binary":return n;case"string":return n;case"file":return S1(e.file,n,"binary");case"buffer":return En?$l(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function my(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Ip(t):e.type=="string"?Mm(t):t;case"file":return S1(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function DV(n,e){ige(),mxe(n);var t=Is(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=DV(n,t);return t.type="array",kE(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return wo(zxe(n,t),t);case"slk":case"sylk":return wo(dpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return wo(kV(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Pve(FV(n.Sheets[n.SheetNames[i]],t),t);case"csv":return wo(Jb(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return wo(fpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return my(hpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return wo(gpe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return wo(Epe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return wo(sV.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return wo(LV(n,t),t);case"wk1":return my(cO.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return my(cO.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),my(PV(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),Cve(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Rve(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function kve(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Mve(n,e,t){var r={};return r.type="file",r.file=e,kve(r),DV(n,r)}function Nve(n,e,t,r,i,s,a,o){var l=Si(t),u=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var E=a?n[t][p]:n[r[p]+l];if(E===void 0||E.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var x=E.v;switch(E.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+E.t)}if(s[p]!=null){if(x==null)if(E.t=="e"&&x===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(h&&x===null)g[s[p]]=null;else continue;else g[s[p]]=h&&(E.t!=="n"||E.t==="n"&&o.rawNumbers!==!1)?x:jl(E,x,o);x!=null&&(f=!1)}}return{row:g,isempty:f}}function xv(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},h=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof h){case"string":l=Zn(h);break;case"number":l=Zn(n["!ref"]),l.s.r=h;break;default:l=h}r>0&&(i=0);var f=Si(l.s.r),g=[],p=[],E=0,x=0,w=Array.isArray(n),T=l.s.r,R=0,k={};w&&!n[T]&&(n[T]=[]);var N=u.skipHidden&&n["!cols"]||[],j=u.skipHidden&&n["!rows"]||[];for(R=l.s.c;R<=l.e.c;++R)if(!(N[R]||{}).hidden)switch(g[R]=Bi(R),t=w?n[T][R]:n[g[R]+f],r){case 1:s[R]=R-l.s.c;break;case 2:s[R]=g[R];break;case 3:s[R]=u.header[R-l.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=jl(t,null,u),x=k[a]||0,!x)k[a]=1;else{do o=a+"_"+x++;while(k[o]);k[a]=x,k[o]=1}s[R]=o}for(T=l.s.r+i;T<=l.e.r;++T)if(!(j[T]||{}).hidden){var B=Nve(n,l,T,g,r,s,w,u);(B.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[E++]=B.row)}return p.length=E,p}var _O=/"/g;function Lve(n,e,t,r,i,s,a,o){for(var l=!0,u=[],h="",f=Si(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+f];if(p==null)h="";else if(p.v!=null){l=!1,h=""+(o.rawNumbers&&p.t=="n"?p.v:jl(p,null,o));for(var E=0,x=0;E!==h.length;++E)if((x=h.charCodeAt(E))===i||x===s||x===34||o.forceQuotes){h='"'+h.replace(_O,'""')+'"';break}h=="ID"&&(h='"ID"')}else p.f!=null&&!p.F?(l=!1,h="="+p.f,h.indexOf(",")>=0&&(h='"'+h.replace(_O,'""')+'"')):h="";u.push(h)}return o.blankrows===!1&&l?null:u.join(a)}function Jb(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Zn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,l=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),h="",f=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],E=i.s.c;E<=i.e.c;++E)(g[E]||{}).hidden||(f[E]=Bi(E));for(var x=0,w=i.s.r;w<=i.e.r;++w)(p[w]||{}).hidden||(h=Lve(n,i,w,f,a,l,s,r),h!=null&&(r.strip&&(h=h.replace(u,"")),(h||r.blankrows!==!1)&&t.push((x++?o:"")+h)));return delete r.dense,t.join("")}function FV(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Jb(n,e);return t}function Ove(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Zn(n["!ref"]),s="",a=[],o,l=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Bi(o);for(var h=i.s.r;h<=i.e.r;++h)for(s=Si(h),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[h]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}l[l.length]=e+"="+r}return l}function jV(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var l=typeof r.origin=="string"?ii(r.origin):r.origin;a=l.r,o=l.c}var u,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var f=Zn(s["!ref"]);h.e.c=Math.max(h.e.c,f.e.c),h.e.r=Math.max(h.e.r,f.e.r),a==-1&&(a=f.e.r+1,h.e.r=a+e.length-1+i)}else a==-1&&(a=0,h.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(x,w){Ii(x).forEach(function(T){(p=g.indexOf(T))==-1&&(g[p=g.length]=T);var R=x[T],k="z",N="",j=Vn({c:o+p,r:a+w+i});u=Pp(s,j),R&&typeof R=="object"&&!(R instanceof Date)?s[j]=R:(typeof R=="number"?k="n":typeof R=="boolean"?k="b":typeof R=="string"?k="s":R instanceof Date?(k="d",r.cellDates||(k="n",R=Ts(R)),N=r.dateNF||yr[14]):R===null&&r.nullError&&(k="e",R=0),u?(u.t=k,u.v=R,delete u.w,delete u.R,N&&(u.z=N)):s[j]=u={t:k,v:R},N&&(u.z=N))})}),h.e.c=Math.max(h.e.c,o+g.length-1);var E=Si(a);if(i)for(p=0;p<g.length;++p)s[Bi(p+o)+E]={t:"s",v:g[p]};return s["!ref"]=Nr(h),s}function Dve(n,e){return jV(null,n,e)}function Pp(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=ii(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Pp(n,Vn(e)):Pp(n,Vn({r:e,c:t||0}))}function Fve(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function jve(){return{SheetNames:[],Sheets:{}}}function Vve(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(RV(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Gve(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Fve(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Bve(n,e){return n.z=e,n}function VV(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Uve(n,e,t){return VV(n,"#"+e,t)}function zve(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function $ve(n,e,t,r){for(var i=typeof e!="string"?e:Zn(e),s=typeof e=="string"?e:Nr(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var l=Pp(n,a,o);l.t="n",l.F=s,delete l.v,a==i.s.r&&o==i.s.c&&(l.f=t,r&&(l.D=!0))}return n}var DS={encode_col:Bi,encode_row:Si,encode_cell:Vn,encode_range:Nr,decode_col:Ub,decode_row:Bb,split_cell:ime,decode_cell:ii,decode_range:Js,format_cell:jl,sheet_add_aoa:V7,sheet_add_json:jV,sheet_add_dom:MV,aoa_to_sheet:G0,json_to_sheet:Dve,table_to_sheet:NV,table_to_book:fve,sheet_to_csv:Jb,sheet_to_txt:FV,sheet_to_json:xv,sheet_to_html:kV,sheet_to_formulae:Ove,sheet_to_row_object_array:xv,sheet_get_cell:Pp,book_new:jve,book_append_sheet:Vve,book_set_sheet_visibility:Gve,cell_set_number_format:Bve,cell_set_hyperlink:VV,cell_set_internal_link:Uve,cell_add_comment:zve,sheet_set_array_formula:$ve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const z0=Sa()(N0((n,e)=>({vondsten:[],addVondst:t=>n(r=>({vondsten:[...r.vondsten,{...t,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:t=>n(r=>({vondsten:r.vondsten.filter(i=>i.id!==t)})),updateVondst:(t,r)=>n(i=>({vondsten:i.vondsten.map(s=>s.id===t?{...s,...r}:s)})),clearAll:()=>n({vondsten:[]}),exportAsGeoJSON:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:t.map(o=>({type:"Feature",geometry:{type:"Point",coordinates:[o.location.lng,o.location.lat]},properties:{id:o.id,objectType:o.objectType,material:o.material,period:o.period,depth:o.depth,notes:o.notes,timestamp:o.timestamp,photoUrl:o.photoUrl,condition:o.condition,weight:o.weight,length:o.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),a=document.createElement("a");a.href=s,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},exportAsCSV:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=t.map(u=>{const h=new Date(u.timestamp).toLocaleDateString("nl-NL"),f=u.notes?`"${u.notes.replace(/"/g,'""')}"`:"";return`${u.id},${u.location.lat},${u.location.lng},${h},${u.objectType},${u.material},${u.period},${u.depth||""},${u.condition||""},${u.weight||""},${u.length||""},${f},${u.photoUrl||""}`}).join(`
`),s=r+i,a=new Blob([s],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)},exportAsExcel:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(o=>({ID:o.id,Latitude:o.location.lat,Longitude:o.location.lng,Datum:new Date(o.timestamp).toLocaleDateString("nl-NL"),Type:o.objectType,Materiaal:o.material,Periode:o.period,"Diepte (cm)":o.depth||"",Conditie:o.condition||"","Gewicht (g)":o.weight||"","Lengte (mm)":o.length||"",Notities:o.notes||"","Foto URL":o.photoUrl||""})),i=DS.json_to_sheet(r),s=DS.book_new();DS.book_append_sheet(s,i,"Vondsten");const a=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=a,Mve(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const r=t.map(l=>{const u=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${u}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},exportAsKML:()=>{const t=e().vondsten;if(t.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${t.map(l=>{const u=new Date(l.timestamp).toLocaleDateString("nl-NL"),h=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${u}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${h}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}}),{name:"detectorapp-local-vondsten"}));gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function Wve(n){if(!n)return n;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let t=n;return Object.entries(e).forEach(([r,i])=>{t=t.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),t=t.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),t}async function Hve(n){try{const e=fn(n),t=gn("EPSG:4326","EPSG:28992",e);if(t[0]<7e3||t[0]>3e5||t[1]<289e3||t[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${t[0]-r},${t[1]-r},${t[0]+r},${t[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,o=await(await fetch(s)).json();if(o.features&&o.features.length>0){const l=o.features[0].properties,u=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(u!=null){const h=typeof u=="number"?u:parseFloat(u);if(!isNaN(h))return h}}}catch(e){console.warn("AHN height query failed:",e)}return null}const Kve={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},Yve={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function yO(n,e){const t=[],r=n.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?t.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&t.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?t.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?t.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?t.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&t.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?t.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?t.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&t.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?t.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&t.push("Zeekleiafzetting"),t}function Xve(){const n=As(Se=>Se.map),e=z0(Se=>Se.removeVondst),{layers:t,addPoint:r}=vu(),[i,s]=ae.useState([]),[a,o]=ae.useState(0),[l,u]=ae.useState(!1),[h,f]=ae.useState(null),[g,p]=ae.useState(!1),[E,x]=ae.useState(!1),[w,T]=ae.useState(null),[R,k]=ae.useState(null),[N,j]=ae.useState(!1),[B,P]=ae.useState(null),[C,M]=ae.useState(null),[F,O]=ae.useState(()=>{const Se=localStorage.getItem("popupTextScale");return Se?parseInt(Se):100}),W=Se=>{O(Se),localStorage.setItem("popupTextScale",Se.toString())},D=i[a]||"",we=i.length>1,Ne=Se=>{const Fe=Se.match(/<strong[^>]*>(.*?)<\/strong>/);if(Fe){const je=Fe[1].replace(/<[^>]+>/g,""),Qe=Se.replace(Fe[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:je,contentWithoutTitle:Qe}}return{title:"",contentWithoutTitle:Se}},Le=Se=>Se.replace(/class="([^"]*)"/g,(je,Qe)=>{if(Qe.includes("text-xs")){const gt=Qe.replace(/\btext-xs\b/g,"").trim();return gt?`style="font-size:0.857em" class="${gt}"`:'style="font-size:0.857em"'}if(Qe.includes("text-sm")){const gt=Qe.replace(/\btext-sm\b/g,"").trim();return gt?`class="${gt}"`:""}return je}).replace(/class=""/g,""),{title:be,contentWithoutTitle:ce}=Ne(D),Re=Le(ce),Ae=D.includes("Landbouwperceel"),ie=D.includes("data-vondst-id="),V=()=>{o(Se=>(Se-1+i.length)%i.length)},re=()=>{o(Se=>(Se+1)%i.length)},te=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",h),!n||!h||E){console.log(" STOP - map:",!!n,"coord:",h,"loading:",E);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${h[0]}, ${h[1]}]`),x(!0);try{await tge(n,h)&&p(!0)}catch(Se){console.error("Failed to load height map:",Se)}finally{x(!1)}},ee=()=>{n&&(AI(n),p(!1))};ae.useEffect(()=>{if(!n)return;const Se=Qe=>{let gt='<strong class="text-purple-800">AMK Monument</strong>';if(Qe.toponiem&&(gt+=`<br/><span class="text-sm font-semibold">${Qe.toponiem}</span>`),Qe.kwaliteitswaarde&&(gt+=`<br/><span class="text-sm text-purple-700">${Qe.kwaliteitswaarde}</span>`),Qe.omschrijving&&(gt+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Qe.omschrijving}</span>`),Qe.txt_label){const _t=Qe.txt_label.split(", ").slice(0,3).join(", ");gt+=`<br/><span class="text-xs text-gray-500 italic">${_t}${Qe.txt_label.split(", ").length>3?"...":""}</span>`}return gt},Fe=async(Qe,gt)=>{const _t=[],Lt=n.getLayers().getArray().filter(nn=>nn instanceof qu&&nn.getVisible()?nn.getSource()instanceof vW:!1);for(const nn of Lt){const Ut=nn.getSource();if(!Ut)continue;const De=nn.get("title")||"";if(De==="Archeo Landschappen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=z.landschapsnaam||z.naam||"Archeologisch Landschap",$e=z.omschrijving||"";let Ie=`<strong class="text-green-800">${le}</strong>`;$e&&(Ie+=`<br/><span class="text-sm text-gray-600">${$e}</span>`),Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Bekijk de Rijksdienst voor het Cultureel Erfgoed (RCE) voor meer informatie over archeologische landschappen.</div>',_t.push(Ie)}}catch(Te){console.warn("Archeo Landschappen WMS query failed:",Te)}continue}if(De==="Essen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(z.naam||z.Naam||z.NAME)&&(le+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.Naam||z.NAME}</span>`),(z.type||z.Type||z.TYPE)&&(le+=`<br/><span class="text-xs text-gray-600">${z.type||z.Type||z.TYPE}</span>`),(z.omschrijving||z.Omschrijving)&&(le+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.Omschrijving}</span>`),_t.push(le)}}catch(Te){console.warn("Essen WMS query failed:",Te)}continue}if(De==="FAMKE Steentijd"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=FAMKE_Advies_steentijd-bronstijd3339&QUERY_LAYERS=FAMKE_Advies_steentijd-bronstijd3339&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';le+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart voor oude vondsten</span>';const $e=z.advies||z.Advies||"";if($e){le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',le+=`<div class="text-sm text-amber-700 mt-1">${$e}</div>`;const Ie=$e.toLowerCase();let Ze="",ht="text-gray-600",vt="";Ie.includes("karterend")?(Ze="Op deze plek verwachten archeologen vondsten uit de steentijd of bronstijd. Bij graafwerk moet er eerst onderzoek komen.",vt="Goede kans op oude vondsten (vuursteen, bijlen, aardewerk)",ht="text-amber-600"):Ie.includes("waarderend")?(Ze="Hier zijn mogelijk belangrijke vindplaatsen. Proefsleuven zijn nodig om te kijken wat er precies zit.",vt="Mogelijk interessante vondsten uit de prehistorie",ht="text-orange-600"):Ie.includes("geen")?(Ze="De kans op prehistorische vondsten is hier klein. De grond is waarschijnlijk te jong of te veel verstoord.",vt="Weinig kans op steentijd-vondsten",ht="text-green-600"):Ie.includes("quickscan")&&(Ze="Hier is eerst bureau-onderzoek nodig. Er kunnen vondsten zitten, maar dat is nog niet zeker.",vt="Onbekend, nader onderzoek nodig",ht="text-blue-600"),Ze&&(le+=`<div class="text-sm ${ht} mt-1">${Ze}</div>`),vt&&(le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',le+=`<div class="text-sm text-gray-700 mt-1">${vt}</div>`),le+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',le+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>'}_t.push(le)}}catch(Te){console.warn("FAMKE WMS query failed:",Te)}continue}if(De==="Archeo Onderzoeken"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-blue-800">Archeologisch Onderzoek</strong>';if(z.type_onderzoek&&(le+=`<br/><span class="text-sm font-semibold">${z.type_onderzoek}</span>`),z.onderzoeksmeldingnummer&&(le+=`<br/><span class="text-xs text-gray-500">Melding: ${z.onderzoeksmeldingnummer}</span>`),z.uitvoerder&&(le+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${z.uitvoerder}</span>`),z.startdatum||z.einddatum){const $e=[z.startdatum,z.einddatum].filter(Boolean).join(" - ");le+=`<br/><span class="text-xs text-gray-600">Periode: ${$e}</span>`}if(z.gemeente&&(le+=`<br/><span class="text-xs text-gray-500">${z.gemeente}</span>`),z.type_uri){const $e=z.type_uri.replace("type_uri:","").trim();$e.startsWith("http")&&(le+=`<br/><a href="${$e}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">Meer informatie</a>`)}for(const[$e,Ie]of Object.entries(z))if($e.toLowerCase().includes("uri")&&typeof Ie=="string"&&$e!=="type_uri"){const Ze=Ie.replace(/^[a-z_]+:/i,"").trim();Ze.startsWith("http")&&(le+=`<br/><a href="${Ze}" target="_blank" rel="noopener noreferrer" class="text-xs text-blue-600 hover:underline">${$e.replace("_uri","")}</a>`)}_t.push(le)}}catch(Te){console.warn("Archeo Onderzoeken WMS query failed:",Te)}continue}if(De==="IKAW"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=500,X=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=Math.round(z.PALETTE_INDEX||z.palette_index||0),$e=Yve[le]||`Trefkans onbekend (${le})`;let Ie='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';Ie+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',Ie+=`<div class="text-sm text-orange-700 mt-1">${$e}</div>`;const ht={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[le];ht&&(Ie+=`<div class="text-sm ${ht.kleur} mt-1">${ht.tekst}</div>`,Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ie+=`<div class="text-sm text-gray-700 mt-1">${ht.vondsten}</div>`),Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',_t.push(Ie)}}catch(Te){console.warn("IKAW WMS query failed:",Te)}continue}if(De==="Inundatiegebieden"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-blue-800">Inundatiegebied</strong>';(z["linie-naam"]||z.linie_naam)&&(le+=`<br/><span class="text-sm font-semibold text-blue-700">${z["linie-naam"]||z.linie_naam}</span>`),z.naam&&(le+=`<br/><span class="text-sm text-gray-700">${z.naam}</span>`),z.periode&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode}</span>`),z.lin_period&&(le+=`<br/><span class="text-xs text-gray-400">${z.lin_period}</span>`),_t.push(le)}}catch(Te){console.warn("Inundatiegebieden WMS query failed:",Te)}continue}if(De==="Militaire Objecten"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=z.obj_soort||"",$e=z.obj_naam||"",Ie=z.lin_period||"",Ze=z["linie-naam"]||z.linie_naam||"";let ht=le||"Militair Object",vt="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",wt="";const bt=le.toLowerCase();bt.includes("fort")?(vt="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",wt="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):bt.includes("schans")?(vt="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",wt="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):bt.includes("batterij")||bt.includes("battery")?(vt="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",wt="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):bt.includes("bunker")||bt.includes("kazemat")?(vt="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",wt="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):bt.includes("sluis")||bt.includes("inlaatwerk")?(vt="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",wt="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):bt.includes("toren")||bt.includes("wachttoren")?(vt="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",wt="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):bt.includes("kazerne")&&(vt="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",wt="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let en=`<strong class="text-stone-800">${ht}</strong>`;$e&&(en+=`<br/><span class="text-sm font-semibold text-stone-700">${$e}</span>`),Ze&&(en+=`<br/><span class="text-sm text-blue-600">${Ze}</span>`),Ie&&(en+=`<br/><span class="text-xs text-gray-500">${Ie}</span>`),en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',en+=`<div class="text-sm text-gray-700 mt-1">${vt}</div>`,wt&&(en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',en+=`<div class="text-sm text-gray-700 mt-1">${wt}</div>`),en+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',en+='<div class="text-sm text-gray-700 mt-1">',en+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',en+="</div>",_t.push(en)}}catch(Te){console.warn("Militaire Objecten WMS query failed:",Te)}continue}if(De==="Verdedigingslinies"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-amber-800">Verdedigingslinie</strong>';const $e={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},Ie=z.naam||z.lin_naam||"";if(Ie){le+=`<br/><span class="text-sm font-semibold text-amber-700">${Ie}</span>`;const Ze=Object.entries($e).find(([ht])=>Ie.toLowerCase().includes(ht.toLowerCase())||ht.toLowerCase().includes(Ie.toLowerCase()));Ze&&(le+=`<br/><span class="text-sm text-gray-700">${Ze[1]}</span>`)}z.lin_period&&(le+=`<br/><span class="text-xs text-purple-600">${z.lin_period}</span>`),z.status&&(le+=`<br/><span class="text-xs text-gray-400">${z.status}</span>`),_t.push(le)}}catch(Te){console.warn("Verdedigingslinies WMS query failed:",Te)}continue}if(De==="Rijksmonumenten"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-red-800">Rijksmonument</strong>';(z.cbsNaam||z.cbs_naam)&&(le+=`<br/><span class="text-sm font-semibold">${z.cbsNaam||z.cbs_naam}</span>`),z.hoofdcategorie&&(le+=`<br/><span class="text-sm text-red-700">${z.hoofdcategorie}</span>`),z.subcategorie&&(le+=`<br/><span class="text-xs text-gray-600">${z.subcategorie}</span>`),z.rijksmonumentnummer&&(le+=`<br/><span class="text-xs text-gray-500">Nr: ${z.rijksmonumentnummer}</span>`),(z.bouwjaar||z.oorspronkelijkebouwjaar)&&(le+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.oorspronkelijkebouwjaar}</span>`),_t.push(le)}}catch(Te){console.warn("Rijksmonumenten WMS query failed:",Te)}continue}if(De==="Werelderfgoed"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=500,X=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(z.siteName||z.naam)&&(le+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.siteName||z.naam}</span>`),z.siteDesignation&&(le+=`<br/><span class="text-xs text-gray-600">${z.siteDesignation}</span>`),_t.push(le)}}catch(Te){console.warn("Werelderfgoed WMS query failed:",Te)}continue}if(De==="Terpen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://geoportaal.fryslan.nl/arcgis/services/Themas/cultuurhistorie/MapServer/WMSServer?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=terpen3335&QUERY_LAYERS=terpen3335&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=z.naam||z.NAAM||z.Naam||"Terp",$e=z.plaats||z.PLAATS||z.Plaats||"";let Ie=`<strong class="text-orange-800">${le}</strong>`;$e&&(Ie+=`<br/><span class="text-sm text-gray-500">${$e}</span>`),Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Een terp is een kunstmatige heuvel. Mensen bouwden deze heuvels om droog te wonen in het vlakke, natte land. Terpen zijn vaak meer dan 2000 jaar oud.</div>',Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Op en rond terpen worden vaak vondsten gedaan:</div>',Ie+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',Ie+="<li>Middeleeuws aardewerk en botten</li>",Ie+="<li>Munten uit verschillende periodes</li>",Ie+="<li>Metalen voorwerpen (gespen, fibulae, sieraden)</li>",Ie+="<li>Soms Romeinse of zelfs prehistorische vondsten</li>",Ie+="</ul>",Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waarom zijn terpen interessant?</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Terpen waren vaak dorpskernen waar mensen eeuwenlang woonden. Door de ophoging bleven veel voorwerpen goed bewaard. Let op: sommige terpen zijn beschermd monument!</div>',Ie+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',Ie+='<div class="text-sm text-gray-700 mt-1">Veel terpen zijn nog zichtbaar in het landschap. Vraag altijd toestemming aan de grondeigenaar voordat je gaat detecteren.</div>',_t.push(Ie)}}catch(Te){console.warn("Terpen WMS query failed:",Te)}continue}if(De==="Religieus Erfgoed"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=z.naam||z.NAAM||z.name||z.NAME||"Onbekend",$e=z.denominatie||z.DENOMINATIE||z.religie||"",Ie=z.type||z.TYPE||z.functie||"",Ze=z.bouwjaar||z.BOUWJAAR||z.jaar||"",ht=z.gemeente||z.GEMEENTE||z.plaats||"";let vt=`<strong class="text-purple-800">${le}</strong>`;const wt=Ie.toLowerCase();let bt="Een religieus gebouw of heilige plek.",en="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";wt.includes("kerk")||wt.includes("church")?(bt="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",en="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):wt.includes("kapel")||wt.includes("chapel")?(bt="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",en="Devotionalia, munten, kruisjes, rozenkransen"):wt.includes("synagoge")?(bt="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",en="Munten, knopen, kleine religieuze voorwerpen"):wt.includes("klooster")||wt.includes("monastery")?(bt="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",en="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):wt.includes("toren")||wt.includes("tower")?(bt="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",en="Munten, knopen, bouwmateriaal"):(wt.includes("begraafplaats")||wt.includes("cemetery"))&&(bt="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",en="Detecteren hier niet toegestaan"),$e&&(vt+=`<br/><span class="text-sm text-purple-600">${$e}</span>`),Ie&&(vt+=`<br/><span class="text-sm text-gray-600">${Ie}</span>`),Ze&&(vt+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${Ze}</span>`),ht&&(vt+=`<br/><span class="text-xs text-gray-400">${ht}</span>`),vt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',vt+=`<div class="text-sm text-gray-700 mt-1">${bt}</div>`,vt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',vt+=`<div class="text-sm text-gray-700 mt-1">${en}</div>`,vt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',wt.includes("begraafplaats")?vt+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':vt+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',_t.push(vt)}}catch(Te){console.warn("Religieus Erfgoed WMS query failed:",Te)}continue}if(De==="Gewaspercelen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,Et=`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`,X=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Et}`,Ot=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${Et}`,[ne,z]=await Promise.all([fetch(X),fetch(Ot).catch(()=>null)]),le=await ne.json();if(le.features&&le.features.length>0){const $e=le.features[0].properties;let Ie='<strong class="text-green-800">Landbouwperceel</strong>';if(($e.gewas||$e.gewasnaam)&&(Ie+=`<br/><span class="text-sm font-semibold text-green-700">${$e.gewas||$e.gewasnaam}</span>`),($e.categorie||$e.category)&&(Ie+=`<br/><span class="text-xs text-gray-600">${$e.categorie||$e.category}</span>`),$e.oppervlakte&&(Ie+=`<br/><span class="text-xs text-gray-500">${$e.oppervlakte} ha</span>`),z)try{const Ze=await z.json();if(Ze.features&&Ze.features.length>0){const ht=Ze.features[0].properties,vt=ht.first_soilname||ht.soilname||ht.bodemtype,wt=ht.first_soilcode||ht.soilcode||ht.maparea_soilcode;if(vt){Ie+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${vt}</span>`;const bt=yO(vt,wt);bt.length>0&&(Ie+=`<br/><span class="text-xs text-gray-500 italic">${bt.join("  ")}</span>`)}}}catch{}_t.push(Ie)}}catch(Te){console.warn("BRP Gewaspercelen WMS query failed:",Te)}continue}if(De==="Kadastrale Grenzen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=20,X=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le=z.kadastraleGemeenteWaarde||z.kadastrale_gemeente_waarde||z.kadastraleGemeente||Kve[String(z.kadastraleGemeenteCode)]||z.kadastraleGemeenteCode,$e=z.sectie||z.Sectie||"",Ie=z.perceelnummer||z.perceelNummer||z.Perceelnummer||"",Ze=z.kadastraleGrootteWaarde||z.kadastrale_grootte_waarde||z.kadastraleGrootte||z.oppervlakte,ht=z.AKRKadastraleGemeenteCodeWaarde||z.akrKadastraleGemeenteCodeWaarde||"",vt=[le,$e,Ie].filter(Boolean).join(" "),wt=ht&&$e&&Ie?`${ht}-${$e}-${Ie}`:"";let bt='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(vt&&(bt+=`<br/><span class="text-sm text-indigo-700">${vt}</span>`),wt&&(bt+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${wt}</span>`),Ze){const en=typeof Ze=="number"?Ze:parseFloat(Ze);isNaN(en)||(bt+=`<br/><span class="text-xs text-gray-600">${en.toLocaleString("nl-NL")} m</span>`)}bt+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',_t.push(bt)}}catch(Te){console.warn("Kadastrale Grenzen WMS query failed:",Te)}continue}if(De==="Scheepswrakken"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-cyan-800">Scheepswrak</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-cyan-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.datering||z.DATERING)&&(le+=`<br/><span class="text-xs text-gray-500">Datering: ${z.datering||z.DATERING}</span>`),(z.bron||z.BRON)&&(le+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),_t.push(le)}}catch(Te){console.warn("Scheepswrakken WMS query failed:",Te)}continue}if(De==="Woonheuvels ZH"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-orange-800">Woonheuvel</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-orange-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),_t.push(le)}}catch(Te){console.warn("Woonheuvels WMS query failed:",Te)}continue}if(De==="Romeinse Forten"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=200,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-red-800">Romeins Fort</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-red-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),_t.push(le)}}catch(Te){console.warn("Romeinse Forten WMS query failed:",Te)}continue}if(De==="Windmolens"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-amber-800">Windmolen</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-amber-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE||z.functie||z.FUNCTIE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE||z.functie||z.FUNCTIE}</span>`),(z.bouwjaar||z.BOUWJAAR)&&(le+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.bouwjaar||z.BOUWJAAR}</span>`),_t.push(le)}}catch(Te){console.warn("Windmolens WMS query failed:",Te)}continue}if(De==="Erfgoedlijnen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=200,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-purple-800">Erfgoedlijn</strong>';(z.naam||z.NAAM||z.erfgoedlijn)&&(le+=`<br/><span class="text-sm font-semibold text-purple-700">${z.naam||z.NAAM||z.erfgoedlijn}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.omschrijving||z.OMSCHRIJVING)&&(le+=`<br/><span class="text-xs text-gray-500">${z.omschrijving||z.OMSCHRIJVING}</span>`),_t.push(le)}}catch(Te){console.warn("Erfgoedlijnen WMS query failed:",Te)}continue}if(De==="Oude Kernen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=200,X=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-stone-800">Historische Kern</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-stone-700">${z.naam||z.NAAM}</span>`),(z.type||z.TYPE)&&(le+=`<br/><span class="text-sm text-gray-700">${z.type||z.TYPE}</span>`),(z.periode||z.PERIODE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.periode||z.PERIODE}</span>`),_t.push(le)}}catch(Te){console.warn("Oude Kernen WMS query failed:",Te)}continue}if(De==="Relictenkaart Punten"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,le={KV:"Kasteel/Vesting",K:"Kapel",KE:"Kerkhof",B:"Buitenhuis",OB:"Oud Bebouwingsrelict",OV:"Oude Verkaveling",NR:"Nijverheidsrelict",GH:"Grafheuvel",BP:"Begraafplaats",HH:"Havezate",RM:"Rosmolen",WM:"Windmolen",PM:"Poldermolen",EK:"Eendenkooi",SH:"Scholtenhoeve"},$e=z.type?.replace(/[0-9]/g,"")||"",Ie=le[$e]||z.type||"Cultuurhistorisch object";let Ze='<strong class="text-emerald-800">Relict</strong>';Ze+=`<br/><span class="text-sm font-semibold text-emerald-700">${Ie}</span>`,z.type&&$e!==z.type&&(Ze+=`<br/><span class="text-xs text-gray-500">Code: ${z.type}</span>`),z.streek&&(Ze+=`<br/><span class="text-xs text-gray-400">Streek: ${z.streek}</span>`),_t.push(Ze)}}catch(Te){console.warn("Relictenkaart Punten WMS query failed:",Te)}continue}if(De==="Relictenkaart Lijnen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=50,X=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,$e={1:"Sprengenbeek",2:"Oude waterloop",3:"Doorgaande weg",4:"Hessenweg",5:"Oude weg",6:"Historische grens",7:"Trekpad",8:"Jaagpad"}[z.klasse]||`Historisch lijnrelict (${z.klasse})`;let Ie='<strong class="text-teal-800">Lijnrelict</strong>';Ie+=`<br/><span class="text-sm font-semibold text-teal-700">${$e}</span>`,_t.push(Ie)}}catch(Te){console.warn("Relictenkaart Lijnen WMS query failed:",Te)}continue}if(De==="Relictenkaart Vlakken"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=100,X=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties,$e={1:"Onveranderd agrarisch (voor 1850)",2:"Jonge heideontginning (1850-1950)",3:"Open essencomplex",4:"Kampenlandschap",5:"Heiderelict (1850)",6:"Bosrelict (1850)",7:"Stuifzandrelict",8:"Oud bouwland",9:"Historisch grasland",10:"Beekdal"}[z.klasse]||`Historisch landschap (${z.klasse})`;let Ie='<strong class="text-lime-800">Landschapsrelict</strong>';if(Ie+=`<br/><span class="text-sm font-semibold text-lime-700">${$e}</span>`,z.st_area_shape_){const Ze=(z.st_area_shape_/1e4).toFixed(1);Ie+=`<br/><span class="text-xs text-gray-500">${Ze} ha</span>`}_t.push(Ie)}}catch(Te){console.warn("Relictenkaart Vlakken WMS query failed:",Te)}continue}if(De==="Verdronken Dorpen"){try{const Te=fn(Qe),ge=gn("EPSG:4326","EPSG:28992",Te),b=200,X=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${ge[0]-b},${ge[1]-b},${ge[0]+b},${ge[1]+b}`}`,ne=await(await fetch(X)).json();if(ne.features&&ne.features.length>0){const z=ne.features[0].properties;let le='<strong class="text-blue-800">Verdronken Dorp</strong>';(z.naam||z.NAAM)&&(le+=`<br/><span class="text-sm font-semibold text-blue-700">${z.naam||z.NAAM}</span>`),(z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR)&&(le+=`<br/><span class="text-xs text-gray-600">Verdronken: ${z.verdronken||z.VERDRONKEN||z.jaar||z.JAAR}</span>`),(z.gemeente||z.GEMEENTE)&&(le+=`<br/><span class="text-xs text-gray-500">${z.gemeente||z.GEMEENTE}</span>`),(z.bron||z.BRON)&&(le+=`<br/><span class="text-xs text-gray-400">${z.bron||z.BRON}</span>`),_t.push(le)}}catch(Te){console.warn("Verdronken Dorpen WMS query failed:",Te)}continue}const Xt=Ut.getFeatureInfoUrl(Qe,gt,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Xt)try{const ge=await(await fetch(Xt)).json();if(ge.features&&ge.features.length>0){const b=ge.features[0].properties;if(De==="AHN 0.5m"){let ne='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const z=b.value_list??b.GRAY_INDEX??b.value??b.gray_index??b.dtm_05m??b.DTM_05M??b.hoogte??b.HOOGTE??b.elevation??b.ELEVATION;if(z!=null&&!isNaN(Number(z))){const le=typeof z=="number"?z.toFixed(2):Number(z).toFixed(2);ne+=`<br/><span class="text-sm text-blue-700">Hoogte: ${le} m NAP</span>`,_t.push(ne)}else{let le=!1;const $e=["geometry","id","fid","gml_id","bbox"];for(const[Ie,Ze]of Object.entries(b))!$e.includes(Ie.toLowerCase())&&Ze!==null&&Ze!==""&&(ne+=`<br/><span class="text-xs text-gray-600">${Ie}: ${Ze}</span>`,le=!0);le&&_t.push(ne)}continue}if(De==="Geomorfologie"){let ne='<strong class="text-green-800">Geomorfologie</strong>',z=!1;const le=b.landform_subgroup_description,$e=b.relief_klasse,Ie=b.relief_subklasse,Ze=b.genese_description,ht=b.active_process;if(le&&(ne+=`<br/><span class="text-sm text-green-700">${le}</span>`,z=!0),$e){const vt=Ie&&Ie!==$e?`${$e} (${Ie})`:$e;ne+=`<br/><span class="text-xs text-gray-600">Relief: ${vt}</span>`,z=!0}if(Ze&&(ne+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${Ze}</span>`,z=!0),ht&&ht!=="onbekend"&&(ne+=`<br/><span class="text-xs text-gray-500">Actief proces: ${ht}</span>`,z=!0),!z){const vt=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[wt,bt]of Object.entries(b))!vt.includes(wt.toLowerCase())&&bt!==null&&bt!==""&&!wt.includes("validfrom")&&!wt.includes("validto")&&(ne+=`<br/><span class="text-xs text-gray-600">${wt}: ${bt}</span>`)}ne+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',_t.push(ne);continue}let Et=`<strong>${De}</strong>`;const X=b.first_soilname||b.soilname,Ot=b.soilcode||b.first_soilcode;if(X&&(Et+=`<br/><span class="text-sm text-amber-700">${X}</span>`,De==="Bodemkaart")){const ne=yO(X,Ot);ne.length>0&&(Et+=`<br/><span class="text-xs text-gray-500 italic">${ne.join("  ")}</span>`)}if(b.soilslope&&b.soilslope!=="Niet opgenomen"&&(Et+=`<br/><span class="text-xs text-gray-500">Helling: ${b.soilslope}</span>`),!X){const ne=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[z,le]of Object.entries(b))!ne.includes(z)&&le&&le!=="Niet opgenomen"&&(Et+=`<br/><span class="text-xs text-gray-600">${z}: ${le}</span>`)}_t.push(Et)}}catch(Te){console.warn("WMS GetFeatureInfo failed:",Te)}}return _t},je=async Qe=>{const gt=[],_t=Hve(Qe.coordinate),Lt=[];n.forEachFeatureAtPixel(Qe.pixel,Xt=>{Lt.push(Xt)});for(const Xt of Lt){const Te=Xt.getProperties(),{geometry:ge,...b}=Te;if(b.vondst){const ne=b.vondst,z=`<strong>${ne.objectType}</strong>
            <div data-vondst-id="${ne.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ne.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ne.period}</span>
            ${ne.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ne.depth} cm</span>`:""}
            ${ne.condition&&ne.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ne.condition}</span>`:""}
            ${ne.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ne.weight} gram</span>`:""}
            ${ne.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ne.notes}</span>`:""}
            ${ne.photoUrl?`<br/><a href="${ne.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ne.timestamp).toLocaleDateString("nl-NL")}</span>`;gt.push(z),T(ne.id);continue}if(b.layerType==="customPoint"&&b.customPoint){const ne=b.customPoint,z=b.customLayerName||"Mijn Laag";let le=`<strong>${ne.name}</strong>`;le+=`<br/><span class="text-xs text-gray-500">${z}</span>`,ne.category&&(le+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${ne.category}</span>`),ne.notes&&(le+=`<br/><span class="text-sm text-gray-600 mt-1">${ne.notes}</span>`),ne.url&&(le+=`<br/><a href="${ne.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),le+=`<br/><span class="text-xs text-gray-400">${new Date(ne.createdAt).toLocaleDateString("nl-NL")}</span>`,gt.push(le);continue}if(b.kwaliteitswaarde&&b.kwaliteitswaarde.includes("archeologische waarde")){const ne=Se(b);gt.push(ne);continue}let Et=b.name||b.naam||b.title||b.NAAM||b.NAME||b.label||b.route_name||b.road_name;Et||(b.leisure==="playground"?Et="Speeltuin":b.leisure==="park"?Et="Park":b.leisure==="swimming_area"||b.sport==="swimming"?Et="Zwemplek":b.tourism==="museum"?Et="Museum":b.amenity==="cafe"||b.amenity==="restaurant"?Et=b.amenity==="cafe"?"Caf":"Restaurant":b.historic==="castle"?Et="Kasteel":Et="Info"),(b.bunker_type||b.name&&(b.name.toLowerCase().includes("bunker")||b.name.toLowerCase().includes("kazemat")||b.name.toLowerCase().includes("schuilplaats")))&&(Et="Bunker"),b.historic==="battlefield"&&(Et="Historisch slagveld");let X=`<strong>${Et}</strong>`;if(b.category&&(X+=`<br/><span class="text-sm text-gray-600">Categorie: ${b.category}</span>`),b.from_to&&b.from_to!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${b.from_to}</span>`),b.route&&b.route!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${b.route}</span>`),b.TOPONIEM&&(X+=`<br/><span class="text-sm font-semibold text-gray-800">${b.TOPONIEM}</span>`,b.PLAATS&&(X+=`<br/><span class="text-xs text-gray-500">${b.PLAATS}</span>`)),(b.AARD_VINDP||b.Aard_vindp)&&(X+=`<br/><span class="text-sm text-gray-700">Aard: ${b.AARD_VINDP||b.Aard_vindp}</span>`),b.BEGIN_PER&&b.EIND_PER&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${b.BEGIN_PER} - ${b.EIND_PER}</span>`),(b.AARD_OPM||b.Aard_opmer)&&(X+=`<br/><span class="text-xs text-gray-600 italic">${b.AARD_OPM||b.Aard_opmer}</span>`),b.Gemeente&&(X+=`<br/><span class="text-sm text-gray-600">Gemeente: ${b.Gemeente}</span>`),b.Bron&&(X+=`<br/><span class="text-xs text-gray-500">Bron: ${b.Bron}</span>`),b.Bron_besch&&(X+=`<br/><span class="text-xs text-gray-500">${b.Bron_besch}</span>`),b.Dat_st_z&&b.Dat_ei_z&&(X+=`<br/><span class="text-sm text-purple-700">Datering: ${b.Dat_st_z} - ${b.Dat_ei_z}</span>`),b.Begin&&b.Einde&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${b.Begin} - ${b.Einde}</span>`),b.Uiterwaard&&(X+=`<br/><span class="text-sm font-semibold">${b.Uiterwaard}</span>`),b.rivier&&(X+=`<br/><span class="text-sm text-blue-600">Rivier: ${b.rivier}</span>`),b.Beschrijvi&&(X+=`<br/><span class="text-sm text-gray-700">${b.Beschrijvi}</span>`),b.leisure&&b.name){const ne=b.leisure==="playground"?"Speeltuin":b.leisure==="park"?"Park":b.leisure==="swimming_area"?"Zwemplek":null;ne&&(X+=`<br/><span class="text-xs text-green-600">${ne}</span>`)}if((b.tourism==="museum"||b.museum)&&b.name&&(X+='<br/><span class="text-xs text-purple-600">Museum</span>'),(b.leisure==="swimming_area"||b.sport==="swimming")&&b.name&&(X+='<br/><span class="text-xs text-cyan-600">Zwemplek</span>'),b.osm_id&&b.address!==void 0&&(X+='<br/><span class="text-xs text-lime-600">Kringloopwinkel</span>',b.address&&(X+=`<br/><span class="text-xs text-gray-500">${b.address}</span>`),b.phone&&(X+=`<br/><span class="text-xs text-gray-600">${b.phone}</span>`)),b.site_type==="tumulus"){const ne=Xt.getGeometry()?.getCoordinates();let z="",le="";if(ne){const $e=fn(ne),Ie=$e[0],Ze=$e[1];Ie>5.5&&Ie<6.3&&Ze>52&&Ze<52.5?(z="Veluwe",le="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):Ie>6.2&&Ie<7.1&&Ze>52.6&&Ze<53.3?(z="Drenthe",le="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):Ie>4.5&&Ie<6&&Ze>51.3&&Ze<51.9?(z="Noord-Brabant",le="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):Ie>5.5&&Ie<6.3&&Ze>50.7&&Ze<51.6?(z="Limburg",le="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):Ie>5&&Ie<5.6&&Ze>52&&Ze<52.4&&(z="Utrechtse Heuvelrug",le="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}X+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',z&&(X+=`<br/><span class="text-sm text-gray-500">${z}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',le&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${le}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',b.wikidata?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${b.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(b.historic==="castle"||b.castle_type){const ne={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},z=b.castle_type?ne[b.castle_type]:null,le=z?.label||"Kasteel";if(X+=`<br/><span class="text-sm text-purple-600">${le}</span>`,b.start_date&&(X+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${b.start_date}</span>`),b.heritage&&(X+='<br/><span class="text-sm text-amber-600">Rijksmonument</span>'),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z?X+=`<div class="text-sm text-gray-700 mt-1">${z.uitleg}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',z?X+=`<div class="text-sm text-gray-700 mt-1">${z.vondsten}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',b.wikipedia||b.website){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',b.wikipedia){const $e=b.wikipedia.startsWith("http")?b.wikipedia:`https://nl.wikipedia.org/wiki/${b.wikipedia.replace(/^nl:/,"")}`;X+=`<div class="text-sm text-gray-700 mt-1"><a href="${$e}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}b.website&&(X+=`<div class="text-sm text-gray-700 mt-1"><a href="${b.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(b.historic==="ruins"){const ne=b.ruins_type||"";let z="Rune",le="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",$e="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(ne.toLowerCase().includes("church")||ne.toLowerCase().includes("kerk")?(z="Kerkrune",le="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",$e="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):ne.toLowerCase().includes("castle")||ne.toLowerCase().includes("kasteel")?(z="Kasteelrune",le="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",$e="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):ne.toLowerCase().includes("mill")||ne.toLowerCase().includes("molen")?(z="Molenrune",le="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",$e="Gereedschap, munten, huishoudelijke voorwerpen"):ne.toLowerCase().includes("fort")&&(z="Fortrune",le="De overblijfselen van een militair fort of verdedigingswerk.",$e="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),X+=`<br/><span class="text-sm text-gray-600">${z}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${le}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${$e}</div>`,b.description&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.description}</div>`),b.wikipedia){const Ie=b.wikipedia.startsWith("http")?b.wikipedia:`https://${b.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${b.wikipedia.replace(/^[a-z]{2}:/,"")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${Ie}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(b.bunker_type||b.name&&(b.name.toLowerCase().includes("bunker")||b.name.toLowerCase().includes("kazemat")||b.name.toLowerCase().includes("schuilplaats"))){const ne={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},z=b.name||"",le=b.bunker_type?ne[b.bunker_type]||b.bunker_type:"";z&&z!=="Bunker"&&(X+=`<br/><span class="text-sm font-semibold text-gray-700">${z}</span>`),le&&le!==z&&(X+=`<br/><span class="text-xs text-gray-500">${le}</span>`);const $e=Xt.getGeometry()?.getCoordinates();let Ie="",Ze="",ht="";if($e){const vt=fn($e),wt=vt[0],bt=vt[1],en=wt<4.8||wt<5.2&&bt>51.8&&bt<53.5,Dr=wt>4.2&&wt<4.4&&bt>52&&bt<52.15,bs=wt>4.5&&wt<4.7&&bt>52.4&&bt<52.5,zi=wt>4&&wt<4.2&&bt>51.95&&bt<52.05,$i=wt<4.2&&bt<51.6,Ir=wt>5.2&&wt<5.8&&bt>51.9&&bt<52.3;Dr?(Ie="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",ht="Atlantikwall Museum Scheveningen"):bs?(Ie="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",Ze="https://www.bunkermuseum.nl/",ht="Bunkermuseum IJmuiden"):zi?(Ie="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",Ze="https://www.atlantikwallhoekvanholland.nl/",ht="Atlantikwall Hoek van Holland"):$i?(Ie="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",Ze="https://www.bunkermuseumzoutelande.nl/",ht="Bunkermuseum Zoutelande"):en?(Ie="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="Atlantikwall (Wikipedia)"):Ir?(Ie="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",Ze="https://nl.wikipedia.org/wiki/Grebbelinie",ht="Grebbelinie (Wikipedia)"):(Ie="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="WOII bunkers (Wikipedia)")}else Ie="Een bunker uit de Tweede Wereldoorlog.",Ze="https://nl.wikipedia.org/wiki/Atlantikwall",ht="WOII bunkers (Wikipedia)";X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ie}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',X+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${Ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${ht}</a>`,b.website?X+=`<br/><a href="${b.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:X+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',X+="</div>"}if(b.historic==="battlefield"){const ne=b.name||"Onbekend slagveld",le={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[ne];if(ne!=="Onbekend slagveld"&&ne!=="Historisch slagveld"&&(X+=`<br/><span class="text-sm font-semibold text-red-700">${ne}</span>`),le)X+=`<br/><span class="text-xs text-gray-500">${le.periode}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${le.samenvatting}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${le.uitkomst}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${le.watZieJe}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${le.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,ne.includes("Arnhem")&&(X+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),ne.includes("Overloon")&&(X+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),X+="</div>";else if(b.date&&(X+=`<br/><span class="text-xs text-gray-500">${b.date}</span>`),b.description?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.description}</div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),b.wikipedia){const $e=b.wikipedia.startsWith("http")?b.wikipedia:`https://nl.wikipedia.org/wiki/${b.wikipedia.replace("nl:","")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="${$e}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(b.bron==="Paleobiology Database"){const ne=Ie=>{const Ze={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[ht,vt]of Object.entries(Ze))if(Ie.toLowerCase().includes(ht.toLowerCase()))return vt;return""},z=Ie=>{const Ze={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[ht,vt]of Object.entries(Ze))if(Ie.toLowerCase().includes(ht.toLowerCase()))return vt;return""},le=Ie=>{const Ze={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let ht=Ie;for(const[vt,wt]of Object.entries(Ze))ht=ht.replace(new RegExp(vt,"gi"),wt);return ht},$e=Ie=>{const Ze={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let ht=Ie;for(const[vt,wt]of Object.entries(Ze))ht=ht.replace(new RegExp(vt,"gi"),wt);return ht};if(b.vindplaats&&(X+=`<br/><span class="text-xs text-gray-600">${b.vindplaats}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',b.taxonomie&&b.taxonomie!=="Onbekend"){const Ie=ne(b.taxonomie);Ie?(X+=`<div class="text-sm text-gray-700 mt-1">${Ie}</div>`,X+=`<div class="text-xs text-gray-500 italic">(${b.taxonomie})</div>`):X+=`<div class="text-sm text-gray-700 mt-1">${b.taxonomie}</div>`}if(b.aantal_fossielen){const Ie=parseInt(b.aantal_fossielen),Ze=Ie>100?"Veel fossielen gevonden op deze locatie.":Ie>10?"Meerdere fossielen gevonden op deze locatie.":`${b.aantal_fossielen} fossiel${Ie>1?"en":""} gevonden op deze locatie.`;X+=`<div class="text-sm text-gray-600 mt-1">${Ze}</div>`}if(b.periode&&b.periode!=="Onbekend"){X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const Ie=z(b.periode);X+=`<div class="text-sm text-gray-700 mt-1">${b.periode}</div>`,Ie&&(X+=`<div class="text-sm text-gray-600">${Ie}</div>`),b.ouderdom&&b.ouderdom!=="Onbekend"&&(X+=`<div class="text-sm text-gray-600">Ouderdom: ${b.ouderdom}</div>`)}(b.gesteente||b.formatie||b.milieu)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',b.gesteente&&(X+=`<div class="text-sm text-gray-700 mt-1">${le(b.gesteente)}</div>`),b.formatie&&(X+=`<div class="text-sm text-gray-600">Formatie: ${b.formatie}</div>`,b.lid&&(X+=`<div class="text-sm text-gray-600 ml-3">Lid: ${b.lid}</div>`)),b.milieu&&(X+=`<div class="text-sm text-gray-600">Leefomgeving: ${$e(b.milieu)}</div>`))}if(b.layerType==="fossielHotspot"){const ne=[];if(b.type&&ne.push(b.type),b.region&&ne.push(b.region),b.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ne.push(z[b.country]||b.country)}if(ne.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ne.join("  ")}</span>`),(b.finds||b.period)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',b.finds&&(X+=`<div class="text-sm text-gray-700 mt-1">${b.finds}</div>`),b.period&&(X+=`<div class="text-sm text-gray-600 mt-1">Periode: ${b.period}</div>`),b.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${b.geology}</div>`)),b.access||b.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',b.access){const le=b.access.toLowerCase().includes("verboden")||b.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${le} mt-1">${b.access}</div>`}b.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${b.tips}</div>`)}}if(b.layerType==="mineralenHotspot"){const ne=[];if(b.region&&ne.push(b.region),b.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ne.push(z[b.country]||b.country)}if(ne.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ne.join("  ")}</span>`),b.minerals&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.minerals}</div>`,b.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${b.geology}</div>`)),b.access||b.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',b.access){const le=b.access.toLowerCase().includes("verboden")||b.access.toLowerCase().includes("niet toegankelijk")||b.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${le} mt-1">${b.access}</div>`}b.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${b.tips}</div>`)}}if(b.layerType==="goudrivier"){const ne=[];if(b.river&&ne.push(b.river),b.region&&ne.push(b.region),b.country){const z={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ne.push(z[b.country]||b.country)}if(ne.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ne.join("  ")}</span>`),(b.goldType||b.origin)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',b.goldType&&(X+=`<div class="text-sm text-gray-700 mt-1">${b.goldType}</div>`),b.origin&&(X+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${b.origin}</div>`)),b.legal||b.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',b.legal){const le=b.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";X+=`<div class="text-sm ${le} mt-1">${b.legal}</div>`}b.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${b.tips}</div>`)}}if(b.layerType==="wandelroute"){const ne=[];if(b.region&&ne.push(b.region),b.country){const z={NL:"Nederland",BE:"Belgi"};ne.push(z[b.country]||b.country)}if(ne.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ne.join("  ")}</span>`),b.distance||b.duration){const z=b.distance?`${b.distance} km`:"",le=b.duration?`${b.duration}`:"",$e=[z,le].filter(Boolean).join("  ");$e&&(X+=`<br/><span class="text-sm text-green-700 font-medium">${$e}</span>`)}(b.description||b.highlights)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',b.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${b.description}</div>`),b.highlights&&(X+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${b.highlights}</div>`)),b.startAddress&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.startAddress}</div>`),b.url&&(X+=`<div class="mt-3"><a href="${b.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(b.layerType==="hunebed"){b.period&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${b.period}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',b.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${b.description}</div>`);const ne=[];if(b.stones){const z=b.stones.toLowerCase(),le=z.match(/(\d+)\s*dekst[^\s,]*/i),$e=z.match(/(\d+)\s*draagst[^\s,]*/i),Ie=z.match(/(\d+)\s*sluitst[^\s,]*/i),Ze=z.match(/(\d+)\s*poortst[^\s,]*/i),ht=z.match(/(\d+)\s*gangdekst[^\s,]*/i),vt=z.match(/(\d+)\s*gangzijst[^\s,]*/i);le&&ne.push(`${le[1]} deksteen${parseInt(le[1])>1?"en":""} (de grote steen${parseInt(le[1])>1?"en":""} bovenop)`),$e&&ne.push(`${$e[1]} draagstenen (de stenen die de dekstenen dragen)`),Ie&&ne.push(`${Ie[1]} sluitsteen${parseInt(Ie[1])>1?"en":""} (afsluiting aan de korte zijden)`),Ze&&ne.push(`${Ze[1]} poortsteen${parseInt(Ze[1])>1?"en":""} (bij de ingang)`),ht&&ne.push(`${ht[1]} gangdeksteen${parseInt(ht[1])>1?"en":""} (boven de toegangsgang)`),vt&&ne.push(`${vt[1]} gangzijstenen (langs de toegangsgang)`)}if(b.length&&ne.push(`Een grafkamer van ${b.length} lang`),b.width&&ne.push(`${b.width}`),ne.length>0&&(X+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',X+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',ne.forEach(z=>{X+=`<li>${z}</li>`}),X+="</ul>"),b.notable){const z=b.notable.toLowerCase();let le="Wat is hier bijzonder?";z.includes("grootste")?le="Waarom is dit het grootste hunebed?":z.includes("klein")||z.includes("kindhunebed")?le="Waarom is dit hunebed zo klein?":z.includes("cluster")||z.includes("naast elkaar")?le="Waarom liggen hier meerdere hunebedden?":(z.includes("enige")||z.includes("westelijk")||z.includes("noordelijk"))&&(le="Wat maakt deze locatie bijzonder?"),X+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${le}</span></div>`,X+=`<div class="text-sm text-gray-700 mt-1">${b.notable}</div>`}X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',b.finds&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.finds}</div>`),b.museum&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${b.museum}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',b.access?X+=`<div class="text-sm text-gray-700 mt-1">${b.access}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',b.wikipedia&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${b.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((b.inventarisnummer||b.locatie_naam)&&(b.locatie_naam&&(X+=`<br/><span class="text-sm font-semibold">${b.locatie_naam}</span>`),b.inventarisnummer&&(X+=`<br/><span class="text-xs text-gray-500">CAI: ${b.inventarisnummer}</span>`),b.datering_tekst&&(X+=`<br/><span class="text-sm text-purple-700">${b.datering_tekst}</span>`)),(b.veensoort||b.dikte)&&(b.veensoort&&(X+=`<br/><span class="text-sm text-amber-700">${b.veensoort}</span>`),b.dikte&&(X+=`<br/><span class="text-xs text-gray-600">Dikte: ${b.dikte}</span>`)),b.nature&&b.debut){X+=`<br/><span class="text-sm text-purple-700">${b.nature}</span>`;const ne=b.debut===b.fin?b.debut:`${b.debut} - ${b.fin}`;ne&&(X+=`<br/><span class="text-sm text-gray-700">Periode: ${ne}</span>`),b.structure&&(X+=`<br/><span class="text-xs text-gray-600">${b.structure}</span>`),b.commune&&(X+=`<br/><span class="text-xs text-gray-500">${b.commune}</span>`),b.decouvert&&(X+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${b.decouvert}</span>`),b.numero&&(X+=`<br/><span class="text-xs text-gray-400">${b.numero}</span>`)}if((b.NATURE_OPE||b.CODE_OPERA)&&(b.TITRE&&(X+=`<br/><span class="text-sm font-semibold">${b.TITRE}</span>`),b.NATURE_OPE&&(X+=`<br/><span class="text-sm text-amber-700">${b.NATURE_OPE}</span>`),b.AUTEUR&&(X+=`<br/><span class="text-xs text-gray-600">Auteur: ${b.AUTEUR}</span>`),b.DATE&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${b.DATE}</span>`),b.COMMUNE&&(X+=`<br/><span class="text-xs text-gray-500">${b.COMMUNE}</span>`)),b.type_protection&&(b.n_site||b.t_site)){const ne=b.type_protection==="Classe"?"text-red-700":"text-amber-700";X+=`<br/><span class="text-sm ${ne}">${b.type_protection}</span>`,b.n_site&&(X+=`<br/><span class="text-sm font-semibold">${b.n_site}</span>`),b.t_site&&(X+=`<br/><span class="text-xs text-gray-600">${b.t_site}</span>`),b.c_site&&(X+=`<br/><span class="text-xs text-gray-500">Code: ${b.c_site}</span>`),b.d_creation&&(X+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${b.d_creation}</span>`)}if(b.type_protection&&b.cod_diren){const ne=b.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ne}">${b.type_protection}</span>`,b.proced&&(X+=`<br/><span class="text-xs text-gray-600">${b.proced}</span>`),b.d_proced&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${b.d_proced}</span>`),b.comment){const z=String(b.comment).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(b.comment).length>150?"...":""}</span>`}}if(b.type_protection&&b.nomsite){const ne=b.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ne}">${b.type_protection}</span>`,b.caractere&&(X+=`<br/><span class="text-xs text-gray-600">${b.caractere}</span>`),b.datedecis&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${b.datedecis}</span>`),b.descriptio){const z=String(b.descriptio).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(b.descriptio).length>150?"...":""}</span>`}}if(b.secteur&&b.style){if(X+=`<br/><span class="text-sm text-gray-700">${b.secteur}</span>`,b["sous-secteur"]&&(X+=`<br/><span class="text-xs text-gray-600">${b["sous-secteur"]}</span>`),b.description){const ne=String(b.description).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ne}${String(b.description).length>150?"...":""}</span>`}b.url&&(X+=`<br/><a href="${b.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(b.nature_operation||b.synthese){b.nature_operation&&(X+=`<br/><span class="text-sm text-red-700">${b.nature_operation}</span>`),b.responsable_operation&&(X+=`<br/><span class="text-xs text-gray-600">Responsable: ${b.responsable_operation}</span>`),b.date_operation&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${b.date_operation}</span>`);const ne=[];if(b.prehistoire==="Oui"&&ne.push("Prehistorie"),b.protohistoire==="Oui"&&ne.push("Protohistorie"),b.antiquite==="Oui"&&ne.push("Romeins"),b.moyen_age==="Oui"&&ne.push("Middeleeuwen"),b.temps_modernes==="Oui"&&ne.push("Moderne tijd"),ne.length>0&&(X+=`<br/><span class="text-sm text-purple-700">${ne.join(", ")}</span>`),b.adresse&&(X+=`<br/><span class="text-xs text-gray-500">${b.adresse}</span>`),b.synthese){const z=String(b.synthese).slice(0,200);X+=`<br/><span class="text-xs text-gray-600 italic">${z}${String(b.synthese).length>200?"...":""}</span>`}}if(b.operator&&(X+=`<br/><span class="text-sm text-gray-600">${b.operator}</span>`),b.opening_hours){const ne=Wve(String(b.opening_hours));X+=`<br/><span class="text-xs text-green-600">Open: ${ne}</span>`}if(b.website&&(X+=`<br/><a href="${b.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`),b.addr_street){const ne=[b.addr_street,b.addr_housenumber,b.addr_postcode].filter(Boolean).join(" ");X+=`<br/><span class="text-xs text-gray-500">${ne}</span>`}const Ot=b.description||b.omschrijving||b.descr||b.info;Ot&&Ot!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${Ot}</span>`),gt.push(X)}const nn=n.getView().getResolution()||1,Ut=await Fe(Qe.coordinate,nn);gt.push(...Ut);const De=await _t;if(gt.length===0&&De!==null){const Xt=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${De.toFixed(2)} m NAP</span>
          </div>`;gt.push(Xt)}if(gt.length>0&&De!==null&&(gt[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${De.toFixed(2)} m NAP</span>
        </div>`),gt.length>0){s(gt),o(0),console.log(` KLIK OPGESLAGEN: [${Qe.coordinate[0].toFixed(0)}, ${Qe.coordinate[1].toFixed(0)}]`),f(Qe.coordinate),p(!1),j(!1),P(null);const Xt=fn(Qe.coordinate);M(Xt),k(`https://www.google.com/maps/dir/?api=1&destination=${Xt[1]},${Xt[0]}`),u(!0)}};return n.on("click",je),()=>{n.un("click",je)}},[n]);const de=()=>{u(!1),n&&g&&(AI(n),p(!1))},Oe=(Se,Fe)=>{Fe.offset.y>100&&de()};return y.jsx(li,{children:l&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:de}),y.jsxs(Kt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl",style:{fontSize:`${14*F/100}px`},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0},dragElastic:.2,onDragEnd:Oe,children:[y.jsx("div",{className:"flex justify-center pt-2 pb-1",children:y.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),y.jsxs("div",{className:"flex items-center gap-2 px-3 pb-2 border-b border-gray-100",children:[we&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx("button",{onClick:V,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Vorige laag",children:y.jsx(Cse,{size:18})}),y.jsxs("span",{className:"text-gray-500 font-medium min-w-[32px] text-center",style:{fontSize:"0.857em"},children:[a+1,"/",i.length]}),y.jsx("button",{onClick:re,className:"w-7 h-7 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-full transition-colors border-0 outline-none","aria-label":"Volgende laag",children:y.jsx(TE,{size:18})})]}),y.jsx("span",{className:"flex-1 font-semibold text-gray-800 truncate",style:{fontSize:"1em"},children:be||"Info"}),C&&t.filter(Se=>!Se.archived).length>0&&y.jsxs("div",{className:"relative",children:[y.jsx("button",{onClick:()=>j(!N),className:`w-7 h-7 flex items-center justify-center rounded-full transition-colors flex-shrink-0 ${B?"text-green-500 bg-green-50":"text-orange-500 hover:text-orange-700 hover:bg-orange-50"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:B?y.jsx(SE,{size:16}):y.jsx(Fo,{size:16})}),N&&y.jsxs("div",{className:"absolute right-0 top-8 z-50 bg-white rounded-lg shadow-lg border border-gray-100 py-1 min-w-[180px]",children:[y.jsx("div",{className:"px-3 py-1.5 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),t.filter(Se=>!Se.archived).map(Se=>y.jsxs("button",{onClick:()=>{r(Se.id,{name:be||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[C[0],C[1]],sourceLayer:be}),j(!1),P(Se.name),setTimeout(()=>P(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center gap-2",children:[y.jsx("div",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:Se.color}}),y.jsx("span",{className:"truncate",children:Se.name})]},Se.id))]})]}),R&&y.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"w-7 h-7 flex items-center justify-center text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-full transition-colors flex-shrink-0",title:"Open in Google Maps","aria-label":"Open in Google Maps",children:y.jsx(m1,{size:16})}),y.jsx("button",{onClick:de,className:"w-7 h-7 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors flex-shrink-0","aria-label":"Sluiten",children:y.jsx(Ta,{size:18})})]}),y.jsx("div",{className:"px-4 py-3 max-h-[45vh] overflow-y-auto select-text",style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:Re}}),y.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2",children:[y.jsx(zae,{size:14,className:"text-gray-400 flex-shrink-0"}),y.jsx("input",{type:"range",min:"80",max:"150",value:F,onChange:Se=>W(parseInt(Se.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),y.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[F,"%"]})]}),ie&&w&&y.jsx("div",{className:"px-4 pb-4",children:y.jsxs("button",{onClick:()=>{e(w),u(!1),T(null)},className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(D0,{size:16}),y.jsx("span",{children:"Vondst verwijderen"})]})}),Ae&&h&&y.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:g?y.jsxs("button",{onClick:ee,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[y.jsx(dI,{size:16}),y.jsx("span",{children:"Hoogtekaart verbergen"})]}):y.jsx("button",{onClick:te,disabled:E,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${E?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:E?y.jsxs(y.Fragment,{children:[y.jsx(lb,{size:16,className:"animate-spin"}),y.jsx("span",{children:"Laden..."})]}):y.jsxs(y.Fragment,{children:[y.jsx(dI,{size:16}),y.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}function qve(){const n=As(B=>B.map),e=Fi(B=>B.openVondstForm),{openAddPointModal:t,openCreateLayerModal:r}=Fi(),i=vu(B=>B.layers),[s,a]=ae.useState(null),[o,l]=ae.useState(!1),[u,h]=ae.useState(!1),[f,g]=ae.useState(!1),p=ae.useRef(null),E=ae.useRef(null);ae.useEffect(()=>{if(!n){console.log(" LongPressMenu: map not ready");return}const B=n.getViewport();if(!B){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",B);const P=600,C=15,M=Le=>{if(console.log(" Touch start, touches:",Le.touches.length),Le.touches.length!==1)return;const be=Le.touches[0];E.current={x:be.clientX,y:be.clientY},console.log(" Starting long press timer at:",E.current),p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",E.current),!E.current)return;const ce=window.__olMap;if(!ce){console.log(" Map not available (global)");return}const Re=B.getBoundingClientRect(),Ae=[E.current.x-Re.left,E.current.y-Re.top],ie=ce.getCoordinateFromPixel(Ae);if(ie){const V=fn(ie);Le.preventDefault(),a({pixel:[E.current.x,E.current.y],coordinate:V}),l(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",V)}},P)},F=Le=>{if(!p.current||!E.current)return;const be=Le.touches[0],ce=be.clientX-E.current.x,Re=be.clientY-E.current.y,Ae=Math.sqrt(ce*ce+Re*Re);Ae>C&&(console.log(" Touch moved too much, cancelling. Distance:",Ae),clearTimeout(p.current),p.current=null)},O=()=>{console.log(" Touch end, timer active:",!!p.current),p.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(p.current),p.current=null),E.current=null},W=Le=>{o&&Le.preventDefault()},D=Le=>{Le.button===0&&(console.log(" Mouse down"),E.current={x:Le.clientX,y:Le.clientY},p.current&&clearTimeout(p.current),p.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!E.current)return;const be=window.__olMap;if(console.log(" __olMap:",be),console.log(" __olMap constructor:",be?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof be?.getCoordinateAtPixel),!be){console.log(" Map not available (global)");return}const ce=B.getBoundingClientRect(),Re=[E.current.x-ce.left,E.current.y-ce.top];console.log(" Pixel:",Re);const Ae=be.getCoordinateFromPixel(Re);if(console.log(" Coordinate:",Ae),Ae){const ie=fn(Ae);a({pixel:[E.current.x,E.current.y],coordinate:ie}),l(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",ie)}},P))},we=Le=>{if(!p.current||!E.current)return;const be=Le.clientX-E.current.x,ce=Le.clientY-E.current.y;Math.sqrt(be*be+ce*ce)>C&&(console.log(" Mouse moved, cancelling"),clearTimeout(p.current),p.current=null)},Ne=()=>{console.log(" Mouse up"),p.current&&(clearTimeout(p.current),p.current=null),E.current=null};return B.addEventListener("touchstart",M,{passive:!1}),B.addEventListener("touchmove",F,{passive:!0}),B.addEventListener("touchend",O),B.addEventListener("touchcancel",O),B.addEventListener("contextmenu",W),B.addEventListener("mousedown",D),B.addEventListener("mousemove",we),B.addEventListener("mouseup",Ne),B.addEventListener("mouseleave",Ne),()=>{B.removeEventListener("touchstart",M),B.removeEventListener("touchmove",F),B.removeEventListener("touchend",O),B.removeEventListener("touchcancel",O),B.removeEventListener("contextmenu",W),B.removeEventListener("mousedown",D),B.removeEventListener("mousemove",we),B.removeEventListener("mouseup",Ne),B.removeEventListener("mouseleave",Ne),p.current&&clearTimeout(p.current)}},[n,o]);const x=()=>{u&&(l(!1),a(null),h(!1),g(!1))},w=()=>{l(!1),a(null),h(!1),g(!1)},T=B=>{if(!s)return;const[P,C]=s.coordinate;t(B,{lat:C,lng:P}),w()},R=()=>{r(),w()},k=()=>{if(!s)return;const[B,P]=s.coordinate;e({lat:P,lng:B}),l(!1),a(null),h(!1)},N=()=>{if(!s)return;const[B,P]=s.coordinate,C=`https://www.google.com/maps?q=${P},${B}`;window.open(C,"_blank"),l(!1),a(null),h(!1)},j=B=>{const[P,C]=B;return`${C.toFixed(5)}N, ${P.toFixed(5)}E`};return y.jsx(li,{children:o&&s&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),y.jsxs(Kt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(s.pixel[0],window.innerWidth-220),top:Math.min(s.pixel[1],window.innerHeight-240)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[y.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600",children:y.jsxs("div",{className:"flex items-center gap-2 text-white",children:[y.jsx(cu,{size:16}),y.jsx("span",{className:"text-xs font-mono",children:j(s.coordinate)})]})}),y.jsxs("div",{className:"bg-white",children:[y.jsxs("button",{onClick:k,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Fo,{size:20,className:"text-blue-500"}),y.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),y.jsxs("div",{className:"relative",children:[y.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(Dl,{size:20,className:"text-purple-500"}),y.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),y.jsx(TE,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),y.jsx(li,{children:f&&y.jsx(Kt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:i.length===0?y.jsxs("button",{onClick:R,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[y.jsx(Fo,{size:14}),y.jsx("span",{children:"Maak eerst een laag aan"})]}):y.jsxs(y.Fragment,{children:[i.map(B=>y.jsxs("button",{onClick:()=>T(B.id),className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-gray-700 hover:bg-gray-100 bg-transparent border-0 outline-none",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:B.color}}),y.jsx("span",{className:"truncate",children:B.name}),y.jsxs("span",{className:"text-xs text-gray-400 ml-auto",children:["(",B.points.length,")"]})]},B.id)),y.jsxs("button",{onClick:R,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[y.jsx(Fo,{size:14}),y.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),y.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[y.jsx(m1,{size:20,className:"text-blue-600"}),y.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]})]}),y.jsx("div",{className:"bg-white",children:y.jsxs("button",{onClick:w,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[y.jsx(Ta,{size:18}),y.jsx("span",{children:"Annuleren"})]})})]})]})})}function Zve(){return y.jsx("div",{className:"fixed bottom-2 left-[60px] z-[800] h-6 flex items-center px-1.5 bg-white/70 backdrop-blur-sm rounded shadow-sm text-[10px] font-mono text-gray-500",children:"v2.20.2"})}const Qve={Compass:jse,TreePalm:Bae,Mountain:dI,Waves:Hae,Search:nj,Target:jae,Layers:Dl,Grid:qse},Jve={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},eEe={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},xO=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Kastelen","IKAW","Archeo Landschappen","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Romeinse Forten","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],tEe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function nEe(){const n=ri(w=>w.setLayerVisibility),e=Xi(w=>w.stopTracking),{presetsPanelOpen:t,togglePresetsPanel:r,toggleSettingsPanel:i,closeAllPanels:s}=Fi(),{presets:a,applyPreset:o,updatePreset:l}=x8(),u=ri(w=>w.visible),h=Ti(w=>w.presetPanelFontScale),f=Ti(w=>w.setPresetPanelFontScale),g=12*h/100,p=()=>{s(),xO.forEach(w=>n(w,!1)),tEe.forEach(w=>{n(w,w==="CartoDB (licht)")}),e(),console.log(" Reset: CartoDB (licht), alle lagen uit, GPS uit")},E=w=>{o(w),s()},x=(w,T)=>{w.stopPropagation();const R=Object.entries(u).filter(([k,N])=>N&&xO.includes(k)).map(([k])=>k);l(T,{layers:R}),console.log(" Lagen opgeslagen naar preset")};return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:i,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Instellingen",children:y.jsx(rj,{size:22,className:"text-gray-600"})}),y.jsx("button",{onClick:p,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Reset - CartoDB, alle lagen uit, GPS uit",children:y.jsx(Tae,{size:22,className:"text-gray-600"})}),y.jsx("button",{onClick:r,className:"fixed bottom-[112px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Presets",children:t?y.jsx(ej,{size:22,className:"text-blue-600"}):y.jsx(Dl,{size:22,className:"text-blue-600"})}),y.jsx(li,{children:t&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r}),y.jsxs(Kt.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:"fixed bottom-[112px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[220px] backdrop-blur-sm z-[801]",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsx("span",{className:"text-xs font-medium",children:"Presets"}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"text-[9px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:h,onInput:w=>{f(parseInt(w.target.value))},onChange:w=>f(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${h}%`}),y.jsx("span",{className:"text-[11px] opacity-70",children:"T"})]})]}),y.jsx("div",{className:"p-2",children:a.map(w=>{const T=Qve[w.icon]||Dl,R=Jve[w.icon]||"text-blue-600",k=eEe[w.icon]||"hover:bg-blue-50";return y.jsxs("button",{onClick:()=>E(w.id),className:`w-full h-8 flex items-center gap-2 px-2 ${k} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden`,style:{fontSize:`${g}px`},children:[y.jsx(T,{size:14,className:`${R} flex-shrink-0`}),y.jsx("span",{className:"text-gray-700 truncate",children:w.name}),y.jsx("span",{onClick:N=>x(N,w.id),className:"ml-auto p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:y.jsx(bae,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},w.id)})})]})]})})]})}const rEe="https://forms.gle/R5LCk11Bzu5XrkBj8";function iEe(){const{infoPanelOpen:n,toggleInfoPanel:e}=Fi(),[t,r]=ae.useState("info"),i=[{id:"info",label:"Info",icon:y.jsx(nL,{size:14})},{id:"functies",label:"Functies",icon:y.jsx(ob,{size:14})},{id:"handleiding",label:"Handleiding",icon:y.jsx(Ese,{size:14})}];return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:e,className:"fixed top-2 right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Info & Help",children:y.jsx(nL,{size:22,className:"text-gray-600"})}),y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsx("span",{className:"font-medium",children:"DetectorApp NL"}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(Ta,{size:18})})]}),y.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>y.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${t===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[t==="info"&&y.jsx(sEe,{}),t==="functies"&&y.jsx(aEe,{}),t==="handleiding"&&y.jsx(oEe,{}),y.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[y.jsxs("a",{href:rEe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[y.jsx(Q9,{size:14}),y.jsx("span",{className:"text-sm",children:"Meld een bug"})]}),y.jsx("p",{className:"text-xs text-gray-400 text-center",children:"DetectorApp NL v2.20.2"})]})]})]})]})})]})}function sEe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),y.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d kaartapplicatie voor metaaldetectie en archeologische verkenning in Nederland. Met 60+ kaartlagen, GPS tracking met richtingspijl en vondstenbeheer."})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),y.jsxs("ul",{className:"space-y-2 text-gray-600",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"AMK, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Parken, Kringloopwinkels, Musea"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Itiner-E"})," (CC BY 4.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"CARTO"})," (CC BY 3.0)",y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"CartoDB basiskaart"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Map5.nl / Kadaster"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciale data"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),y.jsxs("li",{children:[y.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),y.jsx("br",{}),y.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data"})]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy"}),y.jsxs("div",{className:"text-gray-600 space-y-2",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Locatiegegevens:"})," Alleen voor navigatie, niet opgeslagen of gedeeld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Geen tracking:"})," Geen analytics of gebruiksstatistieken."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lokale opslag:"})," Alle data blijft op je apparaat."]})]})]})]})}function aEe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(cb,{size:16,className:"text-blue-600"}),"Kaartlagen (60+)"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Romeinse wegen, Kastelen, IKAW"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Percelen:"})," Gewaspercelen, Kadastrale Grenzen"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(ub,{size:16,className:"text-green-600"}),"GPS Tracking"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),y.jsx("li",{children:"Richtingspijl draait mee met je telefoon (zoals Google Maps)"}),y.jsx("li",{children:"Kaart handmatig draaien + kompasknop om terug te draaien naar noorden"}),y.jsx("li",{children:"Schaalbalk onderaan (instelbaar in Instellingen)"}),y.jsx("li",{children:'Open locatie in Google Maps (long-press  "Open in Google Maps")'})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(cu,{size:16,className:"text-orange-600"}),"Vondsten"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Toevoegen via GPS, long-press of handmatig"}),y.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht, foto-link"}),y.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),y.jsx("li",{children:"Dashboard met statistieken"}),y.jsx("li",{children:"Lokale opslag (geen account nodig)"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(Dl,{size:16,className:"text-purple-600"}),"Presets"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:"Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen"}),y.jsx("li",{children:"Alle presets zijn aanpasbaar - klik op het diskette-icoon om huidige lagen op te slaan"}),y.jsx("li",{children:"Eigen presets aanmaken via Instellingen"}),y.jsx("li",{children:"Tekstgrootte per panel instelbaar via slider in header"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(mae,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[y.jsx("li",{children:'Zet "Kadastrale Grenzen" aan en tik op een perceel'}),y.jsx("li",{children:"Toont: kadastrale aanduiding (gemeente, sectie, nummer) + oppervlakte"}),y.jsx("li",{children:"Link naar eigenaar opzoeken (betaalde dienst)"}),y.jsx("li",{children:"Hoogtekaart per perceel (AHN4)"})]})]})]})}function oEe(){return y.jsxs(y.Fragment,{children:[y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),y.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"GPS knop"})," (rechtsonder) om je locatie te zien"]}),y.jsxs("li",{children:["Kies een ",y.jsx("strong",{children:"preset"})," (links, laagjes-icoon) of selecteer kaartlagen handmatig"]}),y.jsxs("li",{children:["Tik op de ",y.jsx("strong",{children:"Kaartlagen knop"})," voor alle beschikbare lagen"]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS knop"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Uit (grijs icoon):"})," GPS tracking uit, geen locatie zichtbaar."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Aan (blauw icoon):"})," GPS tracking aan, je locatie en richting worden getoond."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Richtingspijl:"})," De blauwe pijl draait vloeiend mee met de richting van je telefoon."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als de kaart gedraaid is. Tik om terug naar noorden te draaien."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst toevoegen"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 1 - GPS:"})," Tik op de oranje + knop rechtsonder. Je huidige locatie wordt automatisch ingevuld."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 2 - Long-press:"}),' Houd je vinger lang op de kaart. Kies "Vondst toevoegen" in het menu.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Methode 3 - Handmatig:"}),' In het vondstenformulier, tik "Kies op kaart" en selecteer de exacte locatie.']})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Toepassen:"})," Tik op het laagjes-icoon links en kies een preset."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Snel opslaan:"})," Zet de gewenste lagen aan en tik op het diskette-icoon naast een preset om die te overschrijven."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Nieuw aanmaken:"}),' Ga naar Instellingen  Presets  "Huidige lagen als preset opslaan".']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Tekstgrootte:"})," Gebruik de slider in de header van het Presets/Kaartlagen panel."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zoeken & Navigatie"}),y.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Zoeken:"})," Gebruik de zoekbalk bovenaan om een adres te vinden."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Google Maps:"}),' Long-press op een locatie en kies "Open in Google Maps" om te navigeren.']}),y.jsxs("p",{children:[y.jsx("strong",{children:"Schaalbalk:"})," Onderaan de kaart - aan/uit in Instellingen."]})]})]}),y.jsxs("section",{children:[y.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor in het veld"}),y.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),y.jsxs("li",{children:["Combineer ",y.jsx("strong",{children:"AMK"})," met ",y.jsx("strong",{children:"Gewaspercelen"})," voor detectie"]}),y.jsxs("li",{children:["Check de ",y.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),y.jsxs("li",{children:["Gebruik ",y.jsx("strong",{children:"historische kaarten"})," om oude structuren te vinden"]}),y.jsxs("li",{children:["Zet ",y.jsx("strong",{children:"GPS tracking"})," aan om je route te volgen"]}),y.jsx("li",{children:"Tik op objecten (bunkers, musea, etc.) voor openingstijden en info"})]})]}),y.jsxs("section",{children:[y.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[y.jsx(m1,{size:16,className:"text-blue-600"}),"Meer informatie"]}),y.jsx("p",{className:"text-gray-600 text-xs mb-2",children:"Uitleg over grondsoorten wordt direct in de popup getoond bij Bodemkaart en Gewaspercelen."}),y.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[y.jsxs("li",{children:[y.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),y.jsxs("li",{children:[y.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),y.jsx("br",{}),y.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]})]})]})]})}function lEe(){const n=As(a=>a.map),[e,t]=ae.useState(0),[r,i]=ae.useState(!1);ae.useEffect(()=>{if(!n)return;const a=n.getView(),o=()=>{const l=a.getRotation(),u=l*180/Math.PI;t(u),i(Math.abs(l)>.087)};return o(),a.on("change:rotation",o),()=>{a.un("change:rotation",o)}},[n]);const s=()=>{n&&n.getView().animate({rotation:0,duration:300})};return y.jsx(li,{children:r&&y.jsx(Kt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:y.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[y.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),y.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),y.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const cEe=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Kadastrale Grenzen",color:"purple",default:.7},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],uEe={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function hEe(){const[n,e]=ae.useState(!1),[t,r]=ae.useState(!1),i=ri(h=>h.visible),s=ri(h=>h.opacity),a=ri(h=>h.setLayerOpacity),o=cEe.filter(h=>i[h.name]);if(o.length===0)return null;const l=t?o:o.slice(0,3),u=o.length>3;return y.jsxs("div",{className:"fixed bottom-[112px] right-2 z-[900]",children:[y.jsxs(Kt.button,{onClick:()=>e(!n),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:n?"Sluit opacity sliders":"Open opacity sliders",children:[y.jsx(Lae,{size:22,strokeWidth:2,className:"text-gray-500"}),o.length>0&&y.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:o.length})]}),y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),y.jsxs(Kt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-lg shadow-lg p-3 min-w-[220px] max-h-[60vh] overflow-y-auto",children:[y.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide",children:"Transparantie"}),y.jsx("div",{className:"space-y-3",children:l.map(h=>{const f=s[h.name]??h.default;return y.jsxs("div",{children:[y.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:h.name,children:h.name}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{type:"range",min:"0",max:"100",value:f*100,onChange:g=>a(h.name,parseInt(g.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${uEe[h.color]}`}),y.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(f*100),"%"]})]})]},h.name)})}),u&&y.jsx("button",{onClick:()=>r(!t),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:t?y.jsxs(y.Fragment,{children:[y.jsx(ej,{size:14}),"Minder tonen"]}):y.jsxs(y.Fragment,{children:[y.jsx(ib,{size:14}),o.length-3," meer..."]})})]})]})})]})}function dEe(){const n=As(x=>x.map),[e,t]=ae.useState(""),[r,i]=ae.useState([]),[s,a]=ae.useState(!1),[o,l]=ae.useState(!1),u=ae.useRef(null),h=ae.useRef();ae.useEffect(()=>{if(h.current&&clearTimeout(h.current),e.length<2){i([]);return}return h.current=window.setTimeout(async()=>{l(!0);try{const w=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(e)}&rows=7`)).json();w.response?.docs&&i(w.response.docs)}catch(x){console.error("Search error:",x),i([])}finally{l(!1)}},300),()=>{h.current&&clearTimeout(h.current)}},[e]);const f=async x=>{try{const T=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(x)}`)).json();if(T.response?.docs?.[0]?.centroide_ll){const k=T.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(k)return{lng:parseFloat(k[1]),lat:parseFloat(k[2])}}}catch(w){console.error("Lookup error:",w)}return null},g=async x=>{if(!n)return;const w=await f(x.id);w&&n.getView().animate({center:bh([w.lng,w.lat]),zoom:16,duration:1e3}),t(""),i([]),a(!1)},p=async(x,w)=>{w.stopPropagation();const T=await f(x.id);if(T){const R=`https://www.google.com/maps?q=${T.lat},${T.lng}`;window.open(R,"_blank")}t(""),i([]),a(!1)},E=()=>{t(""),i([]),u.current?.focus()};return y.jsxs("div",{className:"search-box",children:[y.jsxs("div",{className:"search-input-wrapper",children:[y.jsx(nj,{size:18,className:"search-icon"}),y.jsx("input",{ref:u,type:"text",value:e,onChange:x=>{t(x.target.value),a(!0)},onFocus:()=>a(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),e&&y.jsx("button",{onClick:E,className:"search-clear",children:y.jsx(Ta,{size:16})})]}),s&&r.length>0&&y.jsx("ul",{className:"search-results",children:r.map(x=>y.jsxs("li",{className:"search-result-item",children:[y.jsx("div",{className:"search-result-content",onClick:()=>g(x),children:y.jsx("span",{className:"search-result-text",children:x.weergavenaam})}),y.jsx("button",{className:"search-navigate-btn",onClick:w=>p(x,w),title:"Open in Google Maps",children:y.jsx(m1,{size:20})})]},x.id))}),s&&o&&y.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function fEe(){const n=As(r=>r.map),e=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},t=()=>{if(!n)return;const r=n.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return y.jsxs("div",{className:"fixed top-2 left-2 z-[800] flex flex-col gap-1",children:[y.jsx(Kt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:y.jsx(Fo,{size:22,className:"text-gray-600"})}),y.jsx(Kt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:y.jsx(dae,{size:22,className:"text-gray-600"})})]})}const gEe="detector2024",kI="detectorapp-auth";function mEe({children:n}){const[e,t]=ae.useState(!1),[r,i]=ae.useState(""),[s,a]=ae.useState(!1),[o,l]=ae.useState(""),[u,h]=ae.useState(!0);ae.useEffect(()=>{localStorage.getItem(kI)==="authenticated"&&t(!0),h(!1)},[]);const f=g=>{g.preventDefault(),l(""),r===gEe?(localStorage.setItem(kI,"authenticated"),t(!0)):(l("Onjuist wachtwoord"),i(""))};return u?y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:y.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?y.jsx(y.Fragment,{children:n}):y.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:y.jsxs(Kt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[y.jsxs("div",{className:"text-center mb-6",children:[y.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:y.jsx(hI,{size:32,className:"text-blue-600"})}),y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),y.jsxs("form",{onSubmit:f,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:s?"text":"password",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),y.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?y.jsx(sb,{size:20}):y.jsx(ab,{size:20})})]})]}),o&&y.jsx(Kt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:o}),y.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),y.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function pEe(){localStorage.removeItem(kI),window.location.reload()}function _Ee({isOpen:n,onClose:e}){const t=z0(l=>l.vondsten),r={total:t.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:t.slice(-5).reverse()};let i=0,s=0;t.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const a=l=>Object.entries(l).sort((u,h)=>h[1]-u[1]),o=l=>Math.max(...Object.values(l),1);return y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(J9,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(Ta,{size:18})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:t.length===0?y.jsxs("div",{className:"text-center py-8 text-gray-500",children:[y.jsx(cu,{size:48,className:"mx-auto mb-3 opacity-30"}),y.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),y.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[y.jsx(FS,{icon:y.jsx(cu,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),y.jsx(FS,{icon:y.jsx(Aae,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),y.jsx(FS,{icon:y.jsx(Pae,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),y.jsx(py,{title:"Per Type",data:a(r.byType),max:o(r.byType),color:"bg-orange-500"}),y.jsx(py,{title:"Per Periode",data:a(r.byPeriod),max:o(r.byPeriod),color:"bg-amber-500"}),y.jsx(py,{title:"Per Materiaal",data:a(r.byMaterial),max:o(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&y.jsx(py,{title:"Per Conditie",data:a(r.byCondition),max:o(r.byCondition),color:"bg-green-500"}),y.jsxs("div",{children:[y.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[y.jsx(Tse,{size:14}),"Recente Vondsten"]}),y.jsx("div",{className:"space-y-2",children:r.recent.map(l=>y.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),y.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),y.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),y.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function FS({icon:n,value:e,label:t,color:r}){return y.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[y.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:n}),y.jsx("div",{className:"text-xl font-bold",children:e}),y.jsx("div",{className:"text-xs opacity-70",children:t})]})}function py({title:n,data:e,max:t,color:r}){return e.length===0?null:y.jsxs("div",{children:[y.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:n}),y.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),y.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:y.jsx(Kt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/t*100}%`},transition:{duration:.5,ease:"easeOut"}})}),y.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function yEe(n){const{type:e,coordinates:t}=n,r=o=>bh(o),i=o=>o.map(r),s=o=>o.map(i),a=o=>o.map(s);switch(e){case"Point":return new Qa(r(t));case"LineString":return new Go(i(t));case"Polygon":return new Ja(s(t));case"MultiPoint":return new T0(i(t));case"MultiLineString":return new Jc(s(t));case"MultiPolygon":return new n0(a(t));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function xEe(n,e,t){const r=n.color,i=10,s=5,a=14;let o=i;if(t>50?o=s:t>10?o=Math.max(s,i-(t-10)/10):t<2&&(o=a),e==="Point"||e==="MultiPoint")return new ur({image:new Cl({radius:o,fill:new ai({color:r}),stroke:new ys({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new ur({stroke:new ys({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=vEe(r,.3);return new ur({fill:new ai({color:l}),stroke:new ys({color:r,width:2})})}return new ur({image:new Cl({radius:o,fill:new ai({color:r}),stroke:new ys({color:"#ffffff",width:2})})})}function vEe(n,e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(t){const r=parseInt(t[1],16),i=parseInt(t[2],16),s=parseInt(t[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return n}function EEe(){const n=As(r=>r.map),e=pE(r=>r.layers),t=ae.useRef(new Map);return ae.useEffect(()=>{if(!n)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Bp;i.features.features.forEach((o,l)=>{if(!o.geometry)return;const u=yEe(o.geometry);if(!u)return;const h=new Za({geometry:u,properties:o.properties,layerId:i.id,featureIndex:l});h.setStyle((f,g)=>xEe(i,o.geometry.type,g)),s.addFeature(h)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible),a.setOpacity(i.opacity);else{const o=new Hp({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});n.addLayer(o),t.current.set(i.id,o)}}),t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))})},[n,e]),ae.useEffect(()=>()=>{n&&(t.current.forEach(r=>{n.removeLayer(r)}),t.current.clear())},[n]),null}gn.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");s7(gn);function wEe(n){if(!n||n.length<2)return"unknown";const[e,t]=n;return e>=7e3&&e<=3e5&&t>=289e3&&t<=629e3?"RD":Math.abs(e)<=180&&Math.abs(t)<=90?"WGS84":"unknown"}function SEe(n){const[e,t]=n;return gn("EPSG:28992","EPSG:4326",[e,t])}function GV(n,e){return typeof n[0]=="number"?e(n):n.map(t=>GV(t,e))}function TEe(n){const e=n.coordinates;return!e||Array.isArray(e)&&e.length===0?null:n.type==="Point"?e:n.type==="LineString"||n.type==="MultiPoint"?e[0]:n.type==="Polygon"||n.type==="MultiLineString"?e[0]?.[0]:n.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function IEe(n){const e=[],t=[];try{const r=await n.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((u,h)=>({type:"Feature",geometry:u,properties:{id:h}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&t.push("Geen features gevonden in bestand");let a="unknown",o=!1;if(s.length>0&&s[0].geometry){const u=TEe(s[0].geometry);u&&(a=wEe(u))}a==="RD"&&(t.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),o=!0,s=s.map(u=>{if(!u.geometry)return u;const h=GV(u.geometry.coordinates,SEe);return{...u,geometry:{...u.geometry,coordinates:h}}}),a="WGS84");const l=[...new Set(s.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:t,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:a,transformed:o}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function AEe(n){const e=[],t=[];try{const r=await n.text(),s=new Afe({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in KML bestand");const l=new Sb().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},p=g.name||g.Name||`Feature ${f+1}`,E=g.description||g.Description||"";return{type:"Feature",geometry:h.geometry,properties:{...g,name:p,description:E}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function REe(n){const e=[],t=[];try{const r=await n.text(),s=new Gde().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&t.push("Geen features gevonden in GPX bestand");const l=new Sb().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((h,f)=>{const g={...h.properties},p=g.name||g.Name||`Waypoint ${f+1}`,E=g.desc||g.description||"",x=g.time||null,w=g.ele||null;return{type:"Feature",geometry:h.geometry,properties:{...g,name:p,description:E,time:x,elevation:w}}}),u=[...new Set(l.filter(h=>h.geometry).map(h=>h.geometry.type))];return u.includes("LineString")&&t.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:t,metadata:{featureCount:l.length,geometryTypes:u,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:t,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function eC(n){switch(n.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function bEe(){return".geojson,.json,.kml,.gpx"}function tC(){return"GeoJSON, KML (Google My Maps), GPX"}async function CEe(n){switch(eC(n.name)){case"geojson":return IEe(n);case"kml":return AEe(n);case"gpx":return REe(n);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${n.name}. Ondersteunde formaten: ${tC()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function PEe(n){return n.size>10485760?{valid:!1,error:`Bestand te groot (${(n.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:eC(n.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${tC()}`}:n.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function kEe({isOpen:n,onClose:e}){const t=pE(C=>C.addLayer),r=ae.useRef(null),[i,s]=ae.useState("idle"),[a,o]=ae.useState(null),[l,u]=ae.useState(null),[h,f]=ae.useState(""),[g,p]=ae.useState(null),[E,x]=ae.useState(!1),w=ae.useCallback(()=>{s("idle"),o(null),u(null),f(""),p(null),r.current&&(r.current.value="")},[]),T=ae.useCallback(()=>{w(),e()},[w,e]),R=ae.useCallback(async C=>{const M=PEe(C);if(!M.valid){p(M.error||"Ongeldig bestand"),s("error");return}o(C),s("parsing"),p(null);const F=C.name.replace(/\.[^/.]+$/,"");f(F);try{const O=await CEe(C);if(!O.success){p(O.errors.join(`
`)),s("error");return}if(O.features.features.length===0){p("Geen features gevonden in het bestand"),s("error");return}u(O),s("preview")}catch(O){p(O instanceof Error?O.message:"Onbekende fout bij parsen"),s("error")}},[]),k=ae.useCallback(C=>{const M=C.target.files?.[0];M&&R(M)},[R]),N=ae.useCallback(C=>{C.preventDefault(),x(!0)},[]),j=ae.useCallback(C=>{C.preventDefault(),x(!1)},[]),B=ae.useCallback(C=>{C.preventDefault(),x(!1);const M=C.dataTransfer.files?.[0];M&&R(M)},[R]),P=ae.useCallback(()=>{if(!l||!h.trim())return;const C=a?eC(a.name):"geojson";t({name:h.trim(),type:C==="unsupported"?"geojson":C,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:a?.name||"unknown"}),T()},[l,h,a,t,T]);return y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(hb,{size:18}),y.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),y.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:y.jsx(Ta,{size:18})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${E?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:N,onDragLeave:j,onDrop:B,children:[y.jsx(ob,{size:40,className:"mx-auto text-gray-400 mb-3"}),y.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),y.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),y.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),y.jsx("input",{ref:r,type:"file",accept:bEe(),onChange:k,className:"hidden"})]}),y.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[y.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),y.jsx("p",{children:tC()})]})]}),i==="parsing"&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[y.jsx(lb,{size:40,className:"text-purple-500 animate-spin mb-4"}),y.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),y.jsx("p",{className:"text-gray-400 text-sm",children:a?.name})]}),i==="error"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[y.jsx(tj,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),y.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:g})]})]}),y.jsx("button",{onClick:w,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[y.jsx(Lse,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),y.jsx("p",{className:"text-sm text-green-600",children:a?.name})]})]}),l.warnings.length>0&&y.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[y.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),y.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((C,M)=>y.jsx("li",{children:C},M))})]}),y.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Features:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500",children:"Types:"}),y.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),y.jsx("input",{type:"text",value:h,onChange:C=>f(C.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[y.jsx("button",{onClick:w,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),y.jsx("button",{onClick:P,disabled:!h.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function MEe({layer:n}){const{toggleVisibility:e,removeLayer:t}=pE(),[r,i]=ae.useState(!1),s=n.features.features.length,a=[...new Set(n.features.features.map(l=>l.geometry?.type).filter(Boolean))],o=()=>{r?t(n.id):(i(!0),setTimeout(()=>i(!1),3e3))};return y.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[y.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[y.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("div",{className:"flex items-center gap-1",children:y.jsx("span",{className:"text-sm text-gray-700 truncate",children:n.name})}),y.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[y.jsx(ob,{size:10}),y.jsxs("span",{children:[s," ",s===1?"feature":"features"]}),a.length>0&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"mx-0.5",children:""}),y.jsx("span",{children:a.join(", ")})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>e(n.id),className:`p-1 rounded transition-colors border-0 outline-none ${n.visible?"text-purple-500 hover:bg-purple-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(ab,{size:14}):y.jsx(sb,{size:14})}),y.jsx("button",{onClick:o,className:`p-1 rounded transition-colors border-0 outline-none ${r?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:r?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(D0,{size:14})})]})]})}const NEe="https://forms.gle/R5LCk11Bzu5XrkBj8";function LEe(){const{settingsPanelOpen:n,toggleSettingsPanel:e,vondstDashboardOpen:t,toggleVondstDashboard:r}=Fi(),i=Ti(),{presets:s,createPreset:a,deletePreset:o,updatePreset:l}=x8(),u=z0(D=>D.vondsten),h=pE(D=>D.layers),{devMode:f,setDevMode:g,tier:p}=v8(),[E,x]=ae.useState(""),[w,T]=ae.useState(!1),[R,k]=ae.useState(!1),[N,j]=ae.useState(null),[B,P]=ae.useState(""),C=14*i.fontScale/100,M=()=>{E.trim()&&(a(E.trim(),"Layers"),x(""),T(!1))},F=(D,we)=>{j(D),P(we)},O=D=>{B.trim()&&(l(D,{name:B.trim()}),console.log(` Preset hernoemd naar "${B.trim()}"`)),j(null),P("")},W=()=>{j(null),P("")};return y.jsxs(y.Fragment,{children:[y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(rj,{size:18}),y.jsx("span",{className:"font-medium",children:"Instellingen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:i.fontScale,onInput:D=>{i.setFontScale(parseInt(D.target.value))},onChange:D=>i.setFontScale(parseInt(D.target.value)),className:"header-slider w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${i.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(Ta,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${C}px`},children:[y.jsxs(Yu,{title:"Kaart",icon:y.jsx(cb,{size:16}),children:[y.jsx(OEe,{label:"Standaard achtergrond",children:y.jsxs("select",{value:i.defaultBackground,onChange:D=>i.setDefaultBackground(D.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),y.jsx("option",{value:"OpenStreetMap",children:"OSM"}),y.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),y.jsx(of,{label:"Schaalbalk tonen",checked:i.showScaleBar,onChange:i.setShowScaleBar})]}),y.jsxs(Yu,{title:"GPS",icon:y.jsx(ub,{size:16}),children:[y.jsx(of,{label:"GPS aan bij start",checked:i.gpsAutoStart,onChange:i.setGpsAutoStart}),y.jsx(of,{label:"Nauwkeurigheidscirkel",checked:i.showAccuracyCircle,onChange:i.setShowAccuracyCircle})]}),y.jsx(Yu,{title:"Feedback",icon:y.jsx(Dae,{size:16}),children:y.jsx(of,{label:"Trillen bij acties",checked:i.hapticFeedback,onChange:i.setHapticFeedback})}),y.jsxs(Yu,{title:"Vondsten",icon:y.jsx(cu,{size:16}),children:[y.jsx(of,{label:"Vondsten knop tonen",checked:i.showVondstButton,onChange:i.setShowVondstButton}),y.jsx("p",{className:"text-gray-500 mt-1 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),y.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(J9,{size:14}),y.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),y.jsx(DEe,{})]}),y.jsx(Yu,{title:"Eigen Lagen",icon:y.jsx(hb,{size:16}),children:y.jsxs("div",{className:"space-y-1",children:[h.length===0?y.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen gemporteerd."}):h.map(D=>y.jsx(MEe,{layer:D},D.id)),y.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-purple-600 hover:bg-purple-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Fo,{size:14}),y.jsx("span",{children:"Laag importeren"})]}),y.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),y.jsx(Yu,{title:"Presets",icon:y.jsx(Dl,{size:16}),children:y.jsxs("div",{className:"space-y-2",children:[s.map(D=>y.jsx("div",{className:"flex items-center justify-between py-1",children:N===D.id?y.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[y.jsx("input",{type:"text",value:B,onChange:we=>P(we.target.value),onKeyDown:we=>{we.key==="Enter"&&O(D.id),we.key==="Escape"&&W()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),y.jsx("button",{onClick:()=>O(D.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),y.jsx("button",{onClick:W,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[D.name,D.isBuiltIn&&y.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),y.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",D.layers.length," lagen)"]})]}),!D.isBuiltIn&&y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:()=>F(D.id,D.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:y.jsx(Eae,{size:14})}),y.jsx("button",{onClick:()=>o(D.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:y.jsx(D0,{size:14})})]})]})},D.id)),w?y.jsxs("div",{className:"flex gap-2 mt-2",children:[y.jsx("input",{type:"text",value:E,onChange:D=>x(D.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:D=>D.key==="Enter"&&M(),autoFocus:!0}),y.jsx("button",{onClick:M,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),y.jsx("button",{onClick:()=>T(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):y.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsx(Fo,{size:14}),y.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})}),y.jsxs(Yu,{title:"Development",icon:y.jsx(Dse,{size:16}),children:[y.jsx(of,{label:"Dev Mode (alles ontgrendeld)",checked:f,onChange:g}),y.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",y.jsx("span",{className:"font-medium text-blue-600",children:p}),f&&y.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),y.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${C}px`},children:[y.jsxs("a",{href:NEe,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(Q9,{size:16}),y.jsx("span",{children:"Meld een bug"})]}),y.jsxs("button",{onClick:pEe,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[y.jsx(lae,{size:16}),y.jsx("span",{children:"Uitloggen"})]}),y.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),y.jsx(_Ee,{isOpen:t,onClose:r}),y.jsx(kEe,{isOpen:R,onClose:()=>k(!1)})]})}function Yu({title:n,icon:e,children:t}){return y.jsxs("section",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[y.jsx("span",{className:"text-blue-600",children:e}),y.jsx("span",{className:"font-medium text-gray-800",style:{fontSize:"1em"},children:n})]}),y.jsx("div",{className:"space-y-2",children:t})]})}function OEe({label:n,children:e}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),e]})}function of({label:n,checked:e,onChange:t}){return y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:n}),y.jsx("button",{onClick:()=>t(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:y.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function DEe(){const[n,e]=ae.useState(!1),{vondsten:t,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:a,exportAsKML:o}=z0(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:a,desc:"GPS apparaten"},{label:"KML",action:o,desc:"Google Earth"}],u=h=>{h(),e(!1)};return t.length===0?y.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[y.jsx(uI,{size:14}),y.jsx("span",{children:"Geen vondsten om te exporteren"})]}):y.jsxs("div",{className:"relative mt-2",children:[y.jsxs("button",{onClick:()=>e(!n),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(uI,{size:14}),y.jsxs("span",{children:["Exporteer vondsten (",t.length,")"]})]}),y.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),n&&y.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((h,f)=>y.jsxs("button",{onClick:()=>u(h.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[y.jsx("span",{className:"text-gray-700",children:h.label}),y.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:h.desc})]},f))})]})}function jS({value:n,onChange:e,options:t,label:r,required:i=!1,placeholder:s="Typ hier..."}){const[a,o]=ae.useState(!1),[l,u]=ae.useState(!1),[h,f]=ae.useState(""),g=ae.useRef(null),p=ae.useRef(null),E=n&&n!=="-maak een keuze-"&&!t.includes(n);ae.useEffect(()=>{if(!a)return;const k=N=>{g.current&&!g.current.contains(N.target)&&o(!1)};return document.addEventListener("click",k),()=>document.removeEventListener("click",k)},[a]),ae.useEffect(()=>{l&&p.current&&p.current.focus()},[l]);const x=()=>{u(!0),f(E?n:""),o(!1)},w=()=>{h.trim()&&e(h.trim()),u(!1)},T=k=>{k.key==="Enter"?(k.preventDefault(),w()):k.key==="Escape"&&u(!1)},R=!n||n==="-maak een keuze-"?"-maak een keuze-":n;return l?y.jsxs("div",{ref:g,children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[r,i&&" *"]}),y.jsx("div",{className:"flex gap-2",children:y.jsx("input",{ref:p,type:"text",value:h,onChange:k=>f(k.target.value),onKeyDown:T,onBlur:w,placeholder:s,className:"flex-1 px-3 py-1.5 bg-white rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none",outline:"none"}})})]}):y.jsxs("div",{ref:g,className:"relative",children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1",children:[r,i&&" *"]}),y.jsxs("button",{type:"button",onClick:()=>o(!a),className:"w-full flex items-center justify-between px-3 py-1.5 bg-white rounded text-sm text-gray-600 hover:bg-blue-50 transition-colors text-left",style:{border:"none",outline:"none"},children:[y.jsxs("span",{className:R==="-maak een keuze-"?"text-gray-400":"",children:[R,E&&y.jsx(rL,{size:12,className:"inline ml-1 text-orange-500"})]}),y.jsx(ib,{size:14,className:`text-gray-400 transition-transform ${a?"rotate-180":""}`})]}),a&&y.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded shadow-lg max-h-48 overflow-y-auto",children:[y.jsx("button",{type:"button",onClick:()=>{e("-maak een keuze-"),o(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${!n||n==="-maak een keuze-"?"bg-blue-50 text-blue-600":"text-gray-400 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:"-maak een keuze-"}),y.jsxs("button",{type:"button",onClick:x,className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[y.jsx(rL,{size:12}),"Vrije invoer"]}),y.jsx("div",{className:"border-t border-gray-100 my-1"}),t.map(k=>y.jsx("button",{type:"button",onClick:()=>{e(k),o(!1)},className:`w-full px-3 py-1.5 text-left text-sm transition-colors ${k===n?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-blue-50"}`,style:{border:"none",outline:"none"},children:k},k))]})]})}function FEe({onClose:n,initialLocation:e}){const t=c5(re=>re.user),r=Xi(re=>re.position),i=As(re=>re.map),s=Cee(re=>re.addVondst),a=z0(re=>re.addVondst),o=Ti(re=>re.vondstenLocalOnly),[l,u]=ae.useState(""),[h,f]=ae.useState(""),[g,p]=ae.useState(""),[E,x]=ae.useState(""),[w,T]=ae.useState(!0),[R,k]=ae.useState(!1),[N,j]=ae.useState(""),[B,P]=ae.useState(void 0),[C,M]=ae.useState(void 0),[F,O]=ae.useState(e?"map-pick":r?"gps":"map-center"),[W,D]=ae.useState(e||null),[we,Ne]=ae.useState(!1),Le=()=>{if(F==="gps"&&r)return{lat:r.lat,lng:r.lng};if(F==="map-pick"&&W)return W;if(i){const re=i.getView().getCenter();if(re){const[te,ee]=fn(re);return{lat:ee,lng:te}}}return null},be=Le();ae.useEffect(()=>{if(!we||!i)return;const re=te=>{const[ee,de]=fn(te.coordinate);D({lat:de,lng:ee}),O("map-pick"),Ne(!1)};return i.on("click",re),()=>i.un("click",re)},[we,i]);const ce=()=>{Ne(!0)},Re=()=>{r&&(O("gps"),D(null))},Ae=h&&h!=="-maak een keuze-",ie=re=>!re||re==="-maak een keuze-"?"":re,V=async re=>{re.preventDefault();const te=Le();if(!te){alert("Geen locatie beschikbaar");return}if(!Ae){alert("Kies een objecttype");return}if(!o&&!t){alert("Log in om vondsten in de cloud op te slaan");return}k(!0);try{if(o)a({location:{lat:te.lat,lng:te.lng},notes:l,objectType:ie(h),material:ie(g),period:ie(E),photoUrl:N||void 0,weight:B,length:C}),alert("Vondst lokaal opgeslagen! ");else{const ee=ie(h),de=ie(g),Oe=ie(E);await s({userId:t.uid,location:{lat:te.lat,lng:te.lng,accuracy:F==="gps"?5:50},timestamp:new Date().toISOString(),photos:[],notes:l,objectType:ee,material:de,period:Oe,tags:[Oe.toLowerCase(),ee.toLowerCase()].filter(Boolean),private:w}),alert("Vondst opgeslagen in cloud! ")}n()}catch(ee){alert("Fout bij opslaan: "+ee.message)}finally{k(!1)}};return we?y.jsx(Kt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:y.jsxs("div",{className:"bg-orange-500 text-white rounded-lg shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx(tL,{size:24,className:"animate-pulse"}),y.jsxs("div",{children:[y.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),y.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),y.jsx("button",{onClick:()=>Ne(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:"Annuleren"})]})}):y.jsx(Kt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:y.jsxs(Kt.div,{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[y.jsxs("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 flex justify-between items-center",children:[y.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),y.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:""})]}),y.jsxs("form",{onSubmit:V,className:"p-4 space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Locatie"}),y.jsxs("div",{className:"flex gap-2",children:[r&&F!=="gps"&&y.jsxs("button",{type:"button",onClick:Re,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs bg-white text-green-700 rounded hover:bg-blue-50 transition-colors border-0 outline-none",children:[y.jsx(ub,{size:14}),y.jsx("span",{children:"GPS gebruiken"})]}),y.jsxs("button",{type:"button",onClick:ce,className:"flex-1 flex items-center justify-center gap-1 px-3 py-1.5 text-xs text-blue-700 rounded hover:bg-blue-50 transition-colors bg-white outline-none border-0",children:[y.jsx(tL,{size:14}),y.jsx("span",{children:"Kies op kaart"})]})]})]}),y.jsx(jS,{label:"Objecttype",value:h,onChange:f,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ objecttype..."}),y.jsx(jS,{label:"Materiaal",value:g,onChange:p,options:["Brons","IJzer","Zilver","Goud","Keramiek","Steen","Glas","Onbekend"],placeholder:"Typ materiaal..."}),y.jsx(jS,{label:"Periode",value:E,onChange:x,options:["Romeins (12 v.Chr.-450 n.Chr.)","IJzertijd","Middeleeuws (450-1500)","Nieuwetijd (1500-1800)","Modern (1800+)","Onbekend"],placeholder:"Typ periode..."}),y.jsxs("div",{className:"flex gap-3",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Gewicht (g)"}),y.jsx("input",{type:"number",value:B??"",onChange:re=>P(re.target.value?parseFloat(re.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1"})]}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Lengte (mm)"}),y.jsx("input",{type:"number",value:C??"",onChange:re=>M(re.target.value?parseFloat(re.target.value):void 0),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},min:"0",step:"0.1"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm text-gray-600 mb-1 flex items-center gap-1",children:[y.jsx(eae,{size:12,className:"text-blue-500"}),"Foto link"]}),y.jsx("input",{type:"url",value:N,onChange:re=>j(re.target.value),className:"w-full rounded px-3 py-1.5 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors",style:{border:"none"},placeholder:"Bijvoorbeeld https://photos.google.com/..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Notities"}),y.jsx("textarea",{value:l,onChange:re=>u(re.target.value),className:"w-full rounded px-3 py-1.5 h-16 bg-white outline-none text-sm text-gray-600 hover:bg-blue-50 transition-colors resize-none",style:{border:"none"},placeholder:"Beschrijving..."})]}),y.jsx("p",{className:"text-xs text-gray-400",children:"Vondsten worden lokaal opgeslagen op dit apparaat."}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-1.5 rounded hover:bg-blue-50 transition-colors bg-white outline-none text-sm text-gray-600",style:{border:"none"},children:"Annuleren"}),y.jsx("button",{type:"submit",disabled:R||!be||we||!Ae,className:"flex-1 px-4 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 outline-none text-sm",style:{border:"none"},children:R?"Opslaan...":"Opslaan"})]})]})]})})}function jEe(){const{user:n,setUser:e,setLoading:t}=c5();return ae.useEffect(()=>{const s=VQ(sS,a=>{e(a),t(!1)});return()=>s()},[e,t]),{user:n,loginAnonymous:async()=>{try{await NQ(sS)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await GQ(sS)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!n}}function VEe(){const{isAuthenticated:n,loginAnonymous:e}=jEe(),t=Ti(u=>u.vondstenLocalOnly),r=Ti(u=>u.showVondstButton),i=Fi(u=>u.vondstFormOpen),s=Fi(u=>u.vondstFormLocation),a=Fi(u=>u.openVondstForm),o=Fi(u=>u.closeVondstForm);if(!r)return null;const l=()=>{if(t){a();return}if(!n){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}a()};return y.jsxs(y.Fragment,{children:[y.jsx(Kt.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:y.jsx(cu,{size:22,strokeWidth:2})}),y.jsx(li,{children:i&&y.jsx(FEe,{onClose:o,initialLocation:s||void 0})})]})}const vO={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},GEe={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function BEe(){const n=As(i=>i.map),e=z0(i=>i.vondsten),t=ri(i=>i.visible["Mijn Vondsten"]),r=ae.useRef(null);return ae.useEffect(()=>{if(!n)return;const i=new Bp;return e.forEach(s=>{const a=new Za({geometry:new Qa(bh([s.location.lng,s.location.lat])),vondst:s}),o=vO[s.objectType]||vO.Anders,l=GEe[s.objectType]||"?";a.setStyle((u,h)=>{let E=12;h>50?E=6:h>10?E=Math.max(6,12-(h-10)/10):h<2&&(E=14);const x=Math.max(8,Math.min(12,E-2));return new ur({image:new Cl({radius:E,fill:new ai({color:o}),stroke:new ys({color:"#ffffff",width:E>8?2:1})}),text:E>=8?new ed({text:l,font:`bold ${x}px sans-serif`,fill:new ai({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(a)}),r.current?r.current.setSource(i):(r.current=new Hp({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(t),n.addLayer(r.current)),()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null)}},[n,e]),ae.useEffect(()=>{r.current&&r.current.setVisible(t)},[t]),null}const UEe={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function zEe(){const n=As(r=>r.map),e=vu(r=>r.layers),t=ae.useRef(new Map);return ae.useEffect(()=>{if(!n)return;const r=new Set(e.map(i=>i.id));return t.current.forEach((i,s)=>{r.has(s)||(n.removeLayer(i),t.current.delete(s))}),e.forEach(i=>{const s=new Bp;i.points.forEach(o=>{const l=new Za({geometry:new Qa(bh(o.coordinates)),layerType:"customPoint",customPoint:o,customLayerId:i.id,customLayerName:i.name,customLayerColor:i.color}),u=UEe[o.category]||o.category.charAt(0).toUpperCase();l.setStyle((h,f)=>{let x=12;f>50?x=6:f>10?x=Math.max(6,12-(f-10)/10):f<2&&(x=14);const w=Math.max(8,Math.min(12,x-2));return new ur({image:new Cl({radius:x,fill:new ai({color:i.color}),stroke:new ys({color:"#ffffff",width:x>8?2:1})}),text:x>=8?new ed({text:u,font:`bold ${w}px sans-serif`,fill:new ai({color:"#ffffff"}),offsetY:1}):void 0})}),s.addFeature(l)});const a=t.current.get(i.id);if(a)a.setSource(s),a.setVisible(i.visible);else{const o=new Hp({source:s,zIndex:950,properties:{title:i.name,customPointLayerId:i.id},visible:i.visible});n.addLayer(o),t.current.set(i.id,o)}}),()=>{t.current.forEach(i=>{n&&n.removeLayer(i)}),t.current.clear()}},[n,e]),null}function $Ee(){const{createLayerModalOpen:n,closeCreateLayerModal:e}=Fi(),{addLayer:t}=vu(),r=Ti(),[i,s]=ae.useState(""),[a,o]=ae.useState([...Rc]),[l,u]=ae.useState(""),h=14*r.fontScale/100,f=()=>{const w=l.trim();w&&!a.includes(w)&&(o([...a,w]),u(""))},g=w=>{o(a.filter(T=>T!==w))},p=w=>{a.includes(w)?o(a.filter(T=>T!==w)):o([...a,w])},E=()=>{i.trim()&&(t(i.trim(),a),s(""),o([...Rc]),u(""),e())},x=()=>{s(""),o([...Rc]),u(""),e()};return y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:18}),y.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:w=>r.setFontScale(parseInt(w.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:x,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(Ta,{size:18})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${h}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),y.jsx("input",{type:"text",value:i,onChange:w=>s(w.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:Rc.map(w=>y.jsx("button",{onClick:()=>p(w),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${a.includes(w)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:w},w))})]}),a.filter(w=>!Rc.includes(w)).length>0&&y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:a.filter(w=>!Rc.includes(w)).map(w=>y.jsxs("button",{onClick:()=>g(w),className:"flex items-center gap-1 px-3 py-1 rounded-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[w,y.jsx(D0,{size:12})]},w))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:w=>w.key==="Enter"&&f()}),y.jsx("button",{onClick:f,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:y.jsx(Fo,{size:20})})]})]})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[y.jsx("button",{onClick:x,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:E,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}function WEe(){const{addPointModalOpen:n,addPointModalLayerId:e,addPointModalLocation:t,closeAddPointModal:r}=Fi(),{addPoint:i,getLayer:s}=vu(),a=Ti(),[o,l]=ae.useState(""),[u,h]=ae.useState(""),[f,g]=ae.useState(""),p=e?s(e):null,E=14*a.fontScale/100,x=()=>{!o.trim()||!e||!t||(i(e,{name:o.trim(),category:"Overig",notes:u.trim(),url:f.trim()||void 0,coordinates:[t.lng,t.lat]}),l(""),h(""),g(""),r())},w=()=>{l(""),h(""),g(""),r()};return p?y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(cu,{size:18}),y.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:T=>a.setFontScale(parseInt(T.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:w,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(Ta,{size:18})})]})]}),y.jsx("div",{className:"px-4 py-1.5",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),y.jsx("span",{className:"text-sm text-gray-600",children:p.name})]})}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${E}px`},children:[y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),y.jsx("input",{type:"text",value:o,onChange:T=>l(T.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),y.jsx("textarea",{value:u,onChange:T=>h(T.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),y.jsx("input",{type:"url",value:f,onChange:T=>g(T.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),y.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${E}px`},children:[y.jsx("button",{onClick:w,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),y.jsx("button",{onClick:x,disabled:!o.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function HEe(){const{layerManagerModalOpen:n,closeLayerManagerModal:e,openCreateLayerModal:t,openLayerDashboard:r}=Fi(),{layers:i,removeLayer:s,toggleVisibility:a,toggleArchived:o,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:u}=vu(),h=Ti(),f=14*h.fontScale/100,[g,p]=ae.useState(null),[E,x]=ae.useState(null),[w,T]=ae.useState(null),[R,k]=ae.useState(!1),N=i.filter(D=>!D.archived),j=i.filter(D=>D.archived),B=R?j:N,P=D=>{E===D?(s(D),x(null)):(x(D),setTimeout(()=>x(null),3e3))},C=D=>{l(D)},M=async D=>{const we=D.target.files?.[0];if(we){try{const Ne=await we.text(),Le=u(Ne);Le.success||(T(Le.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}D.target.value=""}},F=()=>{p(null),x(null),T(null),k(!1),e()},O=D=>{r(D)},W=()=>{F(),t()};return y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:F}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Dl,{size:18}),y.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:h.fontScale,onChange:D=>h.setFontScale(parseInt(D.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${h.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:F,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(Ta,{size:18})})]})]}),y.jsxs("div",{className:"flex border-b border-gray-100",children:[y.jsxs("button",{onClick:()=>k(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${R?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",N.length,")"]}),y.jsxs("button",{onClick:()=>k(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${R?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[y.jsx(Z9,{size:14}),"Archief (",j.length,")"]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${f}px`},children:[B.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500",children:R?y.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),y.jsxs("button",{onClick:W,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[y.jsx(Fo,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):y.jsx("div",{className:"divide-y divide-gray-100",children:B.map(D=>y.jsx(KEe,{layer:D,isExpanded:g===D.id,onToggleExpand:()=>p(g===D.id?null:D.id),onToggleVisibility:()=>a(D.id),onToggleArchived:()=>o(D.id),onOpenDashboard:()=>O(D.id),onExport:()=>C(D.id),onDelete:()=>P(D.id),confirmDelete:E===D.id},D.id))}),w&&y.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:w})]}),y.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${f}px`},children:[y.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[y.jsx(hb,{size:16}),y.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),y.jsx("input",{type:"file",accept:".geojson,.json",onChange:M,className:"hidden"})]}),y.jsxs("button",{onClick:W,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[y.jsx(Fo,{size:16}),y.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}function KEe({layer:n,isExpanded:e,onToggleExpand:t,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:a,onDelete:o,confirmDelete:l}){const u=n.points.filter(f=>f.status==="completed").length,h=n.points.length;return y.jsxs("div",{className:"bg-white",children:[y.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[y.jsx("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?y.jsx(ib,{size:16}):y.jsx(TE,{size:16})}),y.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0",style:{backgroundColor:n.color}}),y.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[y.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:n.name}),y.jsx("div",{className:"text-xs text-gray-500",children:h>0?y.jsxs("span",{className:u===h?"text-green-600":"",children:[u,"/",h," voltooid"]}):"Geen punten"})]}),y.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:y.jsx(nae,{size:18})}),!n.archived&&y.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${n.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:n.visible?"Verbergen":"Tonen",children:n.visible?y.jsx(ab,{size:18}):y.jsx(sb,{size:18})}),y.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${n.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:n.archived?"Herstellen":"Archiveren",children:n.archived?y.jsx(pse,{size:18}):y.jsx(Z9,{size:18})}),y.jsx("button",{onClick:a,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:y.jsx(uI,{size:18})}),y.jsx("button",{onClick:o,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:y.jsx(D0,{size:18})})]}),y.jsx(li,{children:e&&y.jsx(Kt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:y.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[n.categories.length>0&&y.jsx("div",{className:"flex flex-wrap gap-1",children:n.categories.map(f=>y.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:f},f))}),n.points.length>0&&y.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[n.points.slice(0,5).map(f=>y.jsx("div",{className:"flex items-center gap-2",children:y.jsx("span",{className:`font-medium ${f.status==="completed"?"text-green-600 line-through":f.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:f.name})},f.id)),n.points.length>5&&y.jsxs("div",{className:"text-gray-400",children:["...en ",n.points.length-5," meer"]})]}),y.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(n.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function YEe(){const{layerDashboardOpen:n,layerDashboardLayerId:e,closeLayerDashboard:t}=Fi(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:a}=vu(),o=Ti(),[l,u]=ae.useState("all"),[h,f]=ae.useState(null),[g,p]=ae.useState(""),[E,x]=ae.useState(null),w=e?r(e):null,T=14*o.fontScale/100;if(!w)return null;const R=w.points.filter(O=>l==="all"?!0:O.status===l),k=w.points.length,N=w.points.filter(O=>O.status==="completed").length,j=w.points.filter(O=>O.status==="todo").length,B=w.points.filter(O=>O.status==="skipped").length,P=(O,W)=>{i(w.id,O,W)},C=O=>{s(w.id,O,{notes:g}),f(null),p("")},M=O=>{E===O?(a(w.id,O),x(null)):(x(O),setTimeout(()=>x(null),3e3))},F=()=>{f(null),x(null),t()};return y.jsx(li,{children:n&&y.jsxs(y.Fragment,{children:[y.jsx(Kt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:F}),y.jsxs(Kt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[y.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:w.color}}),y.jsx("span",{className:"font-medium truncate",children:w.name})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),y.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:O=>o.setFontScale(parseInt(O.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),y.jsx("span",{className:"text-xs opacity-70",children:"T"}),y.jsx("button",{onClick:F,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:y.jsx(Ta,{size:18})})]})]}),y.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[y.jsxs("span",{className:"text-orange-800 font-medium",children:[N,"/",k," voltooid"]}),y.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[y.jsxs("span",{className:"text-orange-600",children:[j," te doen"]}),B>0&&y.jsxs("span",{className:"text-gray-500",children:[B," overgeslagen"]})]})]}),y.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(O=>y.jsxs("button",{onClick:()=>u(O),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===O?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[O==="all"&&"Alles",O==="todo"&&"Te doen",O==="completed"&&"Voltooid",O==="skipped"&&"Overgeslagen"]},O))}),y.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:R.length===0?y.jsx("div",{className:"p-8 text-center text-gray-500",children:y.jsx("p",{children:"Geen punten gevonden"})}):y.jsx("div",{className:"divide-y divide-gray-100",children:R.map(O=>y.jsx("div",{className:"p-3",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[y.jsx("button",{onClick:()=>P(O.id,O.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:O.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:y.jsx(SE,{size:14,className:O.status==="completed"?"text-green-600":"text-gray-400"})}),y.jsx("button",{onClick:()=>P(O.id,O.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${O.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:O.status==="skipped"?"Markeer als te doen":"Overslaan",children:y.jsx(xse,{size:14,className:O.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:`font-medium truncate ${O.status==="completed"?"text-green-700 line-through":O.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:O.name}),O.sourceLayer&&y.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",O.sourceLayer]})]}),h===O.id?y.jsxs("div",{className:"mt-2",children:[y.jsx("textarea",{value:g,onChange:W=>p(W.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),y.jsxs("div",{className:"flex gap-2 mt-1",children:[y.jsx("button",{onClick:()=>C(O.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),y.jsx("button",{onClick:()=>{f(null),p("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):O.notes?y.jsx("p",{className:"text-sm text-gray-600 mt-1",children:O.notes}):null,O.url&&y.jsxs("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[y.jsx(m1,{size:12}),"Link"]})]}),y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsx("button",{onClick:()=>{f(O.id),p(O.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:y.jsx(xae,{size:14})}),y.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${O.coordinates[1]},${O.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:y.jsx(cu,{size:14})}),y.jsx("button",{onClick:()=>M(O.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${E===O.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:E===O.id?"Klik nogmaals":"Verwijderen",children:y.jsx(D0,{size:14})})]})]})},O.id))})})]})]})})}class EO{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const t=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/t)}add(e){if(this.buffer.length>0){const t=this.buffer[this.buffer.length-1];let r=e-t;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalizeHeading(this.buffer[0]);let e=0,t=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,t+=s}return this.normalizeHeading(e/t)}normalizeHeading(e){return(e%360+360)%360}clear(){this.buffer=[]}}function XEe(){const n=Xi(u=>u.tracking),e=Xi(u=>u.headingSource);Xi(u=>u.speed);const t=Xi(u=>u.setSmoothedHeading),r=ae.useRef(new EO(6)),i=ae.useRef(new EO(10)),s=ae.useRef(0),a=ae.useRef(null),o=33,l=ae.useCallback((u,h)=>{const f=performance.now();if(f-s.current<o)return;const g=h==="gps"?r.current:i.current;g.add(u);const p=g.getSmoothed();p!==null&&(s.current=f,t(p))},[t]);ae.useEffect(()=>{if(!n)return;const u=f=>{f.coords.heading!==null&&f.coords.speed!==null&&f.coords.speed>.8&&f.coords.accuracy<20&&l(f.coords.heading,"gps")},h=navigator.geolocation.watchPosition(u,()=>{},{enableHighAccuracy:!0,maximumAge:500,timeout:1e4});return()=>navigator.geolocation.clearWatch(h)},[n,l]),ae.useEffect(()=>{if(!n||e!=="compass")return;let u=0;const h=50,f=p=>{const E=performance.now();if(!(E-u<h)&&(u=E,p.alpha!==null)){const x=(360-p.alpha)%360;l(x,"compass")}},g=p=>{const E=performance.now();E-u<h||(u=E,p.webkitCompassHeading!==void 0&&l(p.webkitCompassHeading,"compass"))};return window.addEventListener("deviceorientationabsolute",f),window.addEventListener("deviceorientation",g),()=>{window.removeEventListener("deviceorientationabsolute",f),window.removeEventListener("deviceorientation",g)}},[n,e,l]),ae.useEffect(()=>{n||(r.current.clear(),i.current.clear())},[n]),ae.useEffect(()=>()=>{a.current&&cancelAnimationFrame(a.current)},[])}function qEe(){const n=As(i=>i.map),e=ri(i=>i.setLayerOpacity),t=ri(i=>i.visible),r=ae.useRef(null);ae.useEffect(()=>{if(!n)return;const i=()=>{const s=n.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const a=t["AHN 0.5m"],o=t["AHN4 Multi-Hillshade NL"];!a&&!o||(a&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),o&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return n.on("moveend",i),i(),()=>{n.un("moveend",i)}},[n,t,e])}function ZEe(){XEe(),qEe();const e=14*Ti(t=>t.fontScale)/100;return y.jsx(mEe,{children:y.jsxs("div",{style:{fontSize:`${e}px`},children:[y.jsx(Fee,{}),y.jsx(Zae,{}),y.jsx(BEe,{}),y.jsx(EEe,{}),y.jsx(zEe,{}),y.jsx(Xve,{}),y.jsx(qve,{}),y.jsx(dEe,{}),y.jsx(Xae,{}),y.jsx(fEe,{}),y.jsx(Jae,{}),y.jsx(eoe,{}),y.jsx(hEe,{}),y.jsx(Zve,{}),y.jsx(nEe,{}),y.jsx(VEe,{}),y.jsx(iEe,{}),y.jsx(lEe,{}),y.jsx(LEe,{}),y.jsx($Ee,{}),y.jsx(WEe,{}),y.jsx(HEe,{}),y.jsx(YEe,{})]})})}const QEe="2.21.0";console.log(`%c DetectorApp v${QEe}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");nB.createRoot(document.getElementById("root")).render(y.jsx(ZEe,{}));export{Cl as C,ai as F,Sb as G,V$ as I,Go as L,Qa as P,ur as S,qu as T,Hp as V,vW as a,dW as b,ys as c,Bp as d,ed as e,Za as f,bh as g,zp as h,gn as p,s7 as r};
//# sourceMappingURL=index-C1jQZAAc.js.map
