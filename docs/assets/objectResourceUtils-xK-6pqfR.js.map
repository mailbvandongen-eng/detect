{"version":3,"mappings":"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","names":["s","a","r","n","e","l","f","t","c","m","u","o","i","w","x","h","b","U","v","A","j","M","k","p","E","P","g","T","q","O","I","y","C","d","z","K","D","V","__vitePreload","L","re","$","J","H","X","Y","ee","W","N","Q","S","_","Z","F","R","B","G"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/@arcgis/core/views/3d/glTF/internal/TextureTransformUtils.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/ProcessedObjectResource.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","../../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{fromValues as t,create as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{ZEROS as r,ONES as l}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{multiply as i}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";function s(s){if(null==s)return null;const a=null!=s.offset?s.offset:r,n=null!=s.rotation?s.rotation:0,e=null!=s.scale?s.scale:l,f=t(1,0,0,0,1,0,a[0],a[1],1),c=t(Math.cos(n),-Math.sin(n),0,Math.sin(n),Math.cos(n),0,0,0,1),m=t(e[0],0,0,0,e[1],0,0,0,1),u=o();return i(u,c,m),i(u,f,u),u}export{s as getTransformMatrix};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nclass s{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class t{constructor(t,e,r){this.name=t,this.lodThreshold=e,this.pivotOffset=r,this.stageResources=new s,this.numberOfVertices=0}}export{t as ProcessedObjectResource,s as ProcessedObjectStageResources};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{estimateNestedObjectMemory as s}from\"../../../../core/memoryEstimations.js\";import{NestedMap as o}from\"../../../../core/NestedMap.js\";import{throwIfAbortError as a}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{fromArray as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as u,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{getContinuousIndexArray as m}from\"../../../../geometry/support/Indices.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Attribute as f}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as d}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as g}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as y}from\"../../webgl-engine/materials/DefaultMaterial.js\";const w=()=>n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");class x{constructor(e,t,r){this.resource=e,this.textures=t,this.usedMemory=r}}async function h(e,t){const r=await b(e,t),n=await U(r.textureDefinitions??{},t);let o=0;for(const s in n)if(n.hasOwnProperty(s)){const e=n[s];o+=e?.image?e.image.width*e.image.height*4:0}return new x(r,n,o+s(r))}async function b(r,n){const s=n?.streamDataRequester;if(s)return v(r,s,n);const o=await t(e(r,n));if(!0===o.ok)return o.value.data;a(o.error),A(o.error)}async function v(e,r,n){const s=await t(r.request(e,0,n));if(!0===s.ok)return s.value;a(s.error),A(s.error.details.url)}function A(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function j(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(w().warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t?.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(w().warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(w().warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(w().warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else w().warn(\"Indexed geometries must specify faces\"),n=!1;break}default:w().warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(w().warn(\"Geometry requires material\"),n=!1);const s=e.params.vertexAttributes;for(const o in s){s[o].values||(w().warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function M(e,t){const r=new Array,n=new Array,s=new Array,a=new o,u=e.resource,c=i.parse(u.version||\"1.0\",\"wosr\");k.validate(c);const p=u.model.name,w=u.model.geometries,x=u.materialDefinitions??{},h=e.textures;let b=0;const v=new Map;for(let o=0;o<w.length;o++){const e=w[o];if(!j(e))continue;const i=E(e),u=e.params.vertexAttributes,c=[],p=t=>{if(\"PerAttributeArray\"===e.params.topology)return null;const r=e.params.faces;for(const e in r)if(e===t)return r[e].values;return null},A=u.position,M=A.values.length/A.valuesPerElement;for(const t in u){const e=u[t],r=e.values,n=p(t)??m(M);c.push([t,new f(r,n,e.valuesPerElement,!0)])}const P=i.texture,U=h&&h[P];if(U&&!v.has(P)){const{image:e,parameters:t}=U,r=new g(e,t);n.push(r),v.set(P,r)}const k=v.get(P),T=k?k.id:void 0,q=i.material;let O=a.get(q,P);if(null==O){const e=x[q.slice(q.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=U?I(U.alphaChannelUsage):void 0,n={ambient:l(e.diffuse),diffuse:l(e.diffuse),opacity:1-(e.transparency||0),textureAlphaMode:r,textureAlphaCutoff:.33,textureId:T,doubleSided:!0,cullFace:0,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:U?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(n,t.materialParameters),O=new y(n,t),a.set(q,P,O)}s.push(O);const C=new d(O,c);b+=c.find(e=>\"position\"===e[0])?.[1]?.indices.length??0,r.push(C)}return{engineResources:[{name:p,stageResources:{textures:n,materials:s,geometries:r},pivotOffset:u.model.pivotOffset,numberOfVertices:b,lodThreshold:null}],referenceBoundingBox:P(r)}}function P(e){const t=u();return e.forEach(e=>{const r=e.boundingInfo;null!=r&&(c(t,r.bbMin),c(t,r.bbMax))}),t}async function U(e,t){const r=new Array;for(const o in e){const n=e[o],s=n.images[0].data;if(!s){w().warn(\"Externally referenced texture data is not yet supported\");continue}const a=n.encoding+\";base64,\"+s,i=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",u={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:1!==I(l)},c=t?.disableTextures?Promise.resolve(null):p(a,t);r.push(c.then(e=>({refId:i,image:e,parameters:u,alphaChannelUsage:l})))}const n=await Promise.all(r),s={};for(const o of n)s[o.refId]=o;return s}function I(e){switch(e){case\"mask\":return 2;case\"maskAndTransparency\":return 3;case\"none\":return 1;default:return 0}}function E(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const k=new i(1,2,\"wosr\");export{x as LoaderResultWOSR,U as createTextureResources,h as load,M as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{colorGamma as e,delinearize as r}from\"../../../../colorUtils.js\";import{adjustStaticAGOUrl as t}from\"../../../../core/devEnvironmentUtils.js\";import{hasScaling as o}from\"../../../../core/mathUtils.js\";import{normalFromMat4 as s,fromMat4 as i}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as l}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{ONES as u}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as c,e as m,D as f,b as d,n as p,l as g}from\"../../../../chunks/vec32.js\";import{create as x}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as T,expandWithVec3 as b}from\"../../../../geometry/support/aaBoundingBox.js\";import{newFloatArray as h}from\"../../../../geometry/support/FloatArray.js\";import{BufferViewVec3f as y,BufferViewVec4f as w,BufferViewVec4u8 as v,BufferViewVec4u16 as R,BufferViewVec3u8 as B,BufferViewVec3u16 as j}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as S,b as M,n as F,f as A}from\"../../../../chunks/vec3.js\";import{t as E,b as C}from\"../../../../chunks/vec4.js\";import{a as I}from\"../../../../chunks/vec2.js\";import{DefaultLoadingContext as L}from\"../../glTF/DefaultLoadingContext.js\";import{convertPrimitiveToTriangles as P}from\"../../glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as U}from\"../../glTF/internal/resourceUtils.js\";import{getTransformMatrix as O}from\"../../glTF/internal/TextureTransformUtils.js\";import{ProcessedObjectResource as k}from\"./ProcessedObjectResource.js\";import{load as D,processLoadResult as V}from\"./wosrLoader.js\";import{Attribute as _}from\"../../webgl-engine/lib/Attribute.js\";import{Geometry as G}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as W}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as H}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{useSchematicPBR as N,schematicMRRFactors as Q,esriSymbologyMRRFactors as $,advancedMRRFactors as q}from\"../../webgl-engine/materials/pbrUtils.js\";async function z(e,r){const o=K(t(e));if(\"wosr\"===o.fileType){const e=await(r.cache?r.cache.loadWOSR(o.url,r):D(o.url,r)),{engineResources:t,referenceBoundingBox:s}=V(e,r);return{lods:t,referenceBoundingBox:s,isEsriSymbolResource:!1,isWosr:!0}}let s;if(r.cache)s=await r.cache.loadGLTF(o.url,r,!!r.usePBR);else{const{loadGLTF:e}=await import(\"../../glTF/loader.js\");s=await e(new L(r.streamDataRequester),o.url,r,r.usePBR)}const i=s.model.meta?.ESRI_proxyEllipsoid,n=s.meta.isEsriSymbolResource&&null!=i&&\"EsriRealisticTreesStyle\"===s.meta.ESRI_webstyle;n&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,re(s,i));const l=!!r.usePBR,a=s.meta.isEsriSymbolResource?{usePBR:l,isSchematic:!1,treeRendering:n,mrrFactors:$}:{usePBR:l,isSchematic:!1,treeRendering:!1,mrrFactors:q},u={...r.materialParameters,treeRendering:n},{engineResources:c,referenceBoundingBox:m}=J(s,a,u,r,o.specifiedLodIndex,n);return{lods:c,referenceBoundingBox:m,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function K(e){const r=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(r)return{fileType:\"gltf\",url:r[1],specifiedLodIndex:null!=r[4]?Number(r[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function J(e,r,t,o,s,i){const n=e.model,l=new Array,a=new Map,u=new Map,c=n.lods.length,m=T();return n.lods.forEach((e,f)=>{const d=!0===o.skipHighLods&&(c>1&&0===f||c>3&&1===f)||!1===o.skipHighLods&&null!=s&&f!==s;if(d&&0!==f)return;const p=new k(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach(e=>{const s=d?new H({},o):X(n,e,p,r,t,a,u,o,i),{geometry:l,vertexCount:c}=Y(e,s??new H({},o)),g=l.boundingInfo;null!=g&&0===f&&(b(m,g.bbMin),b(m,g.bbMax)),null!=s&&(p.stageResources.geometries.push(l),p.numberOfVertices+=c)}),d||l.push(p)}),{engineResources:l,referenceBoundingBox:m}}function X(e,t,o,s,i,n,l,a,c){const m=e.materials.get(t.material);if(null==m)return null;const{normal:f,color:d,texCoord0:p,tangent:g}=t.attributes,x=t.material+(f?\"_normal\":\"\")+(d?\"_color\":\"\")+(p?\"_texCoord0\":\"\")+(g?\"_tangent\":\"\"),T=null!=t.attributes.texCoord0,b=null!=t.attributes.normal,h=ee(m.alphaMode);if(!n.has(x)){if(T){const r=(r,t=!1,o=!1)=>{if(null!=r&&!l.has(r)){const s=e.textures.get(r);if(s){const e=s.data,i=t&&!U(e)?a.compressionOptions:void 0;l.set(r,new W(U(e)?e.data:e,{...s.parameters,preMultiplyAlpha:!U(e)&&o,encoding:U(e)?e.encoding:void 0,compressionOptions:i}))}}},t=1!==h&&!c;r(m.colorTexture,t,1!==h),r(m.normalTexture),r(m.occlusionTexture,!0),r(m.emissiveTexture),r(m.metallicRoughnessTexture,!0)}const o=r(m.color[0]),f=r(m.color[1]),d=r(m.color[2]),p=null!=m.colorTexture&&T?l.get(m.colorTexture):null,g=N(m),y=null!=m.normalTextureTransform?.scale?m.normalTextureTransform?.scale:u;n.set(x,new H({...s,customDepthTest:1,textureAlphaMode:h,textureAlphaCutoff:m.alphaCutoff,diffuse:[o,f,d],ambient:[o,f,d],opacity:\"OPAQUE\"===m.alphaMode?1:m.opacity,doubleSided:m.doubleSided,doubleSidedType:\"winding-order\",cullFace:m.doubleSided?0:2,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:b?0:2,castShadows:!0,receiveShadows:m.receiveShadows,receiveAmbientOcclusion:m.receiveAmbientOcclusion,textureId:null!=p?p.id:void 0,colorMixMode:m.colorMixMode,normalTextureId:null!=m.normalTexture&&T?l.get(m.normalTexture).id:void 0,textureAlphaPremultiplied:null!=p&&!!p.parameters.preMultiplyAlpha,occlusionTextureId:null!=m.occlusionTexture&&T?l.get(m.occlusionTexture).id:void 0,emissiveTextureId:null!=m.emissiveTexture&&T?l.get(m.emissiveTexture).id:void 0,metallicRoughnessTextureId:null!=m.metallicRoughnessTexture&&T?l.get(m.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[m.emissiveFactor[0],m.emissiveFactor[1],m.emissiveFactor[2]],mrrFactors:g?Q:[m.metallicFactor,m.roughnessFactor,s.mrrFactors[2]],isSchematic:g,colorTextureTransformMatrix:O(m.colorTextureTransform),normalTextureTransformMatrix:O(m.normalTextureTransform),scale:[y[0],y[1]],occlusionTextureTransformMatrix:O(m.occlusionTextureTransform),emissiveTextureTransformMatrix:O(m.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:O(m.metallicRoughnessTextureTransform),...i},a))}const y=n.get(x);if(o.stageResources.materials.push(y),T){const e=e=>{null!=e&&o.stageResources.textures.push(l.get(e))};e(m.colorTexture),e(m.normalTexture),e(m.occlusionTexture),e(m.emissiveTexture),e(m.metallicRoughnessTexture)}return y}function Y(e,r){const t=e.attributes.position.count,n=P(e.indices||t,e.primitiveType),l=h(3*t),{typedBuffer:a,typedBufferStride:u}=e.attributes.position;S(l,a,e.transform,3,u);const c=[[\"position\",new _(l,n,3,!0)]];if(null!=e.attributes.normal){const r=h(3*t),{typedBuffer:i,typedBufferStride:l}=e.attributes.normal;s(Z,e.transform),M(r,i,Z,3,l),o(Z)&&F(r,r),c.push([\"normal\",new _(r,n,3,!0)])}if(null!=e.attributes.tangent){const r=h(4*t),{typedBuffer:s,typedBufferStride:l}=e.attributes.tangent;i(Z,e.transform),E(r,s,Z,4,l),o(Z)&&F(r,r,4),c.push([\"tangent\",new _(r,n,4,!0)])}if(null!=e.attributes.texCoord0){const r=h(2*t),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;I(r,o,2,s),c.push([\"uv0\",new _(r,n,2,!0)])}const m=e.attributes.color;if(null!=m){const r=new Uint8Array(4*t);4===m.elementCount?m instanceof w?C(r,m,1,255):(m instanceof v||m instanceof R)&&C(r,m,1/255,255):(r.fill(255),m instanceof y?A(r,m.typedBuffer,1,255,4,m.typedBufferStride):(e.attributes.color instanceof B||e.attributes.color instanceof j)&&A(r,m.typedBuffer,1/255,255,4,e.attributes.color.typedBufferStride)),c.push([\"color\",new _(r,n,4,!0)])}return{geometry:new G(r,c),vertexCount:t}}const Z=n();function ee(e){switch(e){case\"BLEND\":return 0;case\"MASK\":return 2;case\"OPAQUE\":case null:case void 0:return 1}}function re(r,t){for(let o=0;o<r.model.lods.length;++o){const s=r.model.lods[o];for(const i of s.parts){const s=i.attributes.normal;if(null==s)return;const n=i.attributes.position,u=n.count,T=x(),b=x(),h=x(),v=new Float32Array(4*u),R=new Float32Array(3*u),B=l(a(),i.transform);let j=0,S=0;for(let l=0;l<u;l++){n.getVec(l,b),s.getVec(l,T),c(b,b,i.transform),m(h,b,t.center),f(h,h,t.radius);const a=h[2],u=d(h),x=Math.min(.45+.55*u*u,1)**e;f(h,h,t.radius),null!==B&&c(h,h,B),p(h,h),o+1!==r.model.lods.length&&r.model.lods.length>1&&g(h,h,T,a>-1?.2:Math.min(-4*a-3.8,1)),R[j]=h[0],R[j+1]=h[1],R[j+2]=h[2],j+=3,v[S]=x,v[S+1]=x,v[S+2]=x,v[S+3]=1,S+=4}i.attributes.normal=new y(R.buffer),i.attributes.color=new w(v.buffer)}}}export{z as fetch,K as parseUrl};\n"],"file":"objectResourceUtils-xK-6pqfR.js"}