{"version":3,"file":"hillshadeLayers-BLu-K4_Y.js","sources":["../../src/layers/hillshadeLayers.ts"],"sourcesContent":["import TileLayer from 'ol/layer/Tile'\r\nimport ImageLayer from 'ol/layer/Image'\r\nimport LayerGroup from 'ol/layer/Group'\r\nimport TileWMS from 'ol/source/TileWMS'\r\nimport XYZ from 'ol/source/XYZ'\r\nimport ImageArcGISRest from 'ol/source/ImageArcGISRest'\r\n\r\n// AHN4 Hoogtekaart Kleur - 50cm resolutie met dynamische kleuren\r\n// Toont hoogteverschillen in kleur (blauw=laag → groen → oranje/bruin=hoog)\r\n// Dynamische color ramp past zich aan aan lokale hoogteverschillen\r\nexport function createAHN4ColorElevationLayerOL() {\r\n  const layer = new ImageLayer({\r\n    properties: { title: 'AHN4 Hoogtekaart Kleur', type: 'arcgis' },\r\n    visible: false,\r\n    opacity: 1.0,  // Volle dekking voor beste kleuren\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Color Ramp D'  // Dynamisch! blauw→groen→geel→bruin\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous',\r\n      attributions: '© Esri Nederland, AHN4 50cm'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// AHN4 Hillshade Kleur - Combineert kleur + hillshade in één GroupLayer\r\n// Bron: Esri Nederland Hoogteviewer (apps.arcgisonline.nl/hoogteviewer)\r\n// Geeft 3D-effect door hillshade over de kleurlaag te leggen met multiply blend\r\nexport function createAHN4ShadedReliefLayerOL() {\r\n  // Onderlaag: Kleur gebaseerd op hoogte\r\n  const colorLayer = new ImageLayer({\r\n    properties: { title: 'Color Base' },\r\n    opacity: 1.0,\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Color Ramp D'\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous',\r\n      attributions: '© Esri Nederland, AHN4 50cm'\r\n    })\r\n  })\r\n\r\n  // Bovenlaag: Hillshade met multiply blend\r\n  const hillshadeLayer = new ImageLayer({\r\n    properties: { title: 'Hillshade Overlay' },\r\n    opacity: 0.7,\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Hillshade'\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  // Canvas blend mode voor multiply effect (3D schaduwwerking)\r\n  hillshadeLayer.on('prerender', (evt) => {\r\n    if (evt.context) {\r\n      const ctx = evt.context as CanvasRenderingContext2D\r\n      ctx.globalCompositeOperation = 'multiply'\r\n    }\r\n  })\r\n  hillshadeLayer.on('postrender', (evt) => {\r\n    if (evt.context) {\r\n      const ctx = evt.context as CanvasRenderingContext2D\r\n      ctx.globalCompositeOperation = 'source-over'\r\n    }\r\n  })\r\n\r\n  // Groepeer beide lagen\r\n  const group = new LayerGroup({\r\n    properties: { title: 'AHN4 Hillshade Kleur', type: 'group' },\r\n    visible: false,\r\n    layers: [colorLayer, hillshadeLayer]\r\n  })\r\n\r\n  return group\r\n}\r\n\r\n// AHN4 Hillshade Netherlands - Esri Nederland ImageServer\r\n// Uses dynamic hillshade rendering from AHN4 DTM data\r\nexport function createAHN4HillshadeLayerOL() {\r\n  const layer = new ImageLayer({\r\n    properties: { title: 'AHN4 Hillshade NL', type: 'arcgis' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Hillshade'\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous',\r\n      attributions: '© Esri Nederland, AHN'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// AHN4 Multidirectional Hillshade - Better for subtle relief\r\nexport function createAHN4MultiHillshadeLayerOL() {\r\n  const layer = new ImageLayer({\r\n    properties: { title: 'AHN4 Multi-Hillshade NL', type: 'arcgis' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Hillshade (Multidirectionaal)'\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous',\r\n      attributions: '© Esri Nederland, AHN'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// AHN4 Slope visualization - Shows steepness\r\nexport function createAHN4SlopeLayerOL() {\r\n  const layer = new ImageLayer({\r\n    properties: { title: 'AHN4 Helling NL', type: 'arcgis' },\r\n    visible: false,\r\n    opacity: 0.6,\r\n    source: new ImageArcGISRest({\r\n      url: 'https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_5m/ImageServer',\r\n      params: {\r\n        renderingRule: JSON.stringify({\r\n          rasterFunction: 'AHN - Slope'\r\n        })\r\n      },\r\n      crossOrigin: 'anonymous',\r\n      attributions: '© Esri Nederland, AHN'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// Esri World Hillshade - Global coverage, good base layer\r\n// minZoom 8 prevents \"Map data not yet available\" at low zoom levels\r\nexport function createWorldHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'World Hillshade', type: 'overlay' },\r\n    visible: false,\r\n    opacity: 0.6,\r\n    minZoom: 8,  // Voorkomt \"Map data not yet available\" foutmelding\r\n    source: new XYZ({\r\n      url: 'https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}',\r\n      attributions: '© Esri',\r\n      crossOrigin: 'anonymous',\r\n      maxZoom: 23\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// Flanders DHMV II - Multidirectional hillshade 25cm resolution\r\n// Extremely detailed! Derived from 8 light directions, 35° sun height\r\nexport function createDHMVHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hillshade Vlaanderen 25cm', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\r\n      params: {\r\n        'LAYERS': 'DHMV_II_HILL_25cm',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      serverType: 'geoserver',\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// Flanders DHMV II - Skyview Factor 25cm\r\n// Excellent for detecting archaeological features in flat terrain\r\nexport function createDHMVSkyviewLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Skyview Vlaanderen 25cm', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\r\n      params: {\r\n        'LAYERS': 'DHMV_II_SVF_25cm',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      serverType: 'geoserver',\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// Flanders DHMV II - Digital Terrain Model 1m\r\nexport function createDHMVDTMLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'DTM Vlaanderen 1m', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.6,\r\n    source: new TileWMS({\r\n      url: 'https://geo.api.vlaanderen.be/DHMV/wms',\r\n      params: {\r\n        'LAYERS': 'DHMVII_DTM_1m',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      serverType: 'geoserver',\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// NRW Germany - DGM Schummerung (Hillshade) 25cm resolution\r\n// Grayscale hillshade with NW light source\r\nexport function createNRWHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hillshade NRW 25cm', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung',\r\n      params: {\r\n        'LAYERS': 'nw_dgm-schummerung_pan',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// NRW Germany - DGM Schummerung Color\r\n// Colored hillshade with NW light source\r\nexport function createNRWHillshadeColorLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hillshade NRW Kleur', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://www.wms.nrw.de/geobasis/wms_nw_dgm-schummerung',\r\n      params: {\r\n        'LAYERS': 'nw_dgm-schummerung_col',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// France IGN - Hillshade from BD Alti (25m resolution)\r\n// Two light sources: NE at 45° elevation + zenith\r\nexport function createFranceHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hillshade Frankrijk', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://data.geopf.fr/wms-r/wms',\r\n      params: {\r\n        'LAYERS': 'ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW',\r\n        'STYLES': 'estompage_grayscale',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// France IGN - LiDAR HD MNT Hillshade (high resolution!)\r\n// Available for areas with LiDAR HD coverage\r\nexport function createFranceLidarHDHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'LiDAR HD Frankrijk', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://data.geopf.fr/wms-r/wms',\r\n      params: {\r\n        'LAYERS': 'IGNF_LIDAR-HD_MNT_ELEVATION.ELEVATIONGRIDCOVERAGE.SHADOW',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// France IGN - RGE Alti High Resolution (1m DEM)\r\nexport function createFranceRGEAltiLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'RGE Alti Frankrijk 1m', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.6,\r\n    source: new TileWMS({\r\n      url: 'https://data.geopf.fr/wms-r/wms',\r\n      params: {\r\n        'LAYERS': 'ELEVATION.ELEVATIONGRIDCOVERAGE.HIGHRES',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// France IGN - Contour lines\r\nexport function createFranceContourLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hoogtelijn Frankrijk', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.8,\r\n    source: new TileWMS({\r\n      url: 'https://data.geopf.fr/wms-r/wms',\r\n      params: {\r\n        'LAYERS': 'ELEVATION.CONTOUR.LINE',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n\r\n// Wallonia Belgium - Hillshade MNT 2021-2022 (0.5m resolution)\r\n// Derived from LiDAR acquisition 2021-2022\r\nexport function createWallonieHillshadeLayerOL() {\r\n  const layer = new TileLayer({\r\n    properties: { title: 'Hillshade Wallonië', type: 'wms' },\r\n    visible: false,\r\n    opacity: 0.7,\r\n    source: new TileWMS({\r\n      url: 'https://geoservices.wallonie.be/arcgis/services/RELIEF/WALLONIE_MNT_2021_2022_HILLSHADE/MapServer/WMSServer',\r\n      params: {\r\n        'LAYERS': '0',\r\n        'STYLES': '',\r\n        'TILED': true,\r\n        'FORMAT': 'image/png'\r\n      },\r\n      crossOrigin: 'anonymous'\r\n    })\r\n  })\r\n\r\n  return layer\r\n}\r\n"],"names":["createAHN4ColorElevationLayerOL","ImageLayer","ImageArcGISRest","createAHN4ShadedReliefLayerOL","colorLayer","hillshadeLayer","evt","ctx","LayerGroup","createAHN4HillshadeLayerOL","createAHN4MultiHillshadeLayerOL"],"mappings":"sDAUO,SAASA,GAAkC,CAiBhD,OAhBc,IAAIC,EAAW,CAC3B,WAAY,CAAE,MAAO,yBAA0B,KAAM,QAAA,EACrD,QAAS,GACT,QAAS,EACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,oBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,6BAAA,CACf,CAAA,CACF,CAGH,CAKO,SAASC,GAAgC,CAE9C,MAAMC,EAAa,IAAIH,EAAW,CAChC,WAAY,CAAE,MAAO,YAAA,EACrB,QAAS,EACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,oBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,6BAAA,CACf,CAAA,CACF,EAGKG,EAAiB,IAAIJ,EAAW,CACpC,WAAY,CAAE,MAAO,mBAAA,EACrB,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,2FACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,iBAAA,CACjB,CAAA,EAEH,YAAa,WAAA,CACd,CAAA,CACF,EAGD,OAAAG,EAAe,GAAG,YAAcC,GAAQ,CACtC,GAAIA,EAAI,QAAS,CACf,MAAMC,EAAMD,EAAI,QAChBC,EAAI,yBAA2B,UACjC,CACF,CAAC,EACDF,EAAe,GAAG,aAAeC,GAAQ,CACvC,GAAIA,EAAI,QAAS,CACf,MAAMC,EAAMD,EAAI,QAChBC,EAAI,yBAA2B,aACjC,CACF,CAAC,EAGa,IAAIC,EAAW,CAC3B,WAAY,CAAE,MAAO,uBAAwB,KAAM,OAAA,EACnD,QAAS,GACT,OAAQ,CAACJ,EAAYC,CAAc,CAAA,CACpC,CAGH,CAIO,SAASI,GAA6B,CAiB3C,OAhBc,IAAIR,EAAW,CAC3B,WAAY,CAAE,MAAO,oBAAqB,KAAM,QAAA,EAChD,QAAS,GACT,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,yFACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,iBAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,uBAAA,CACf,CAAA,CACF,CAGH,CAGO,SAASQ,GAAkC,CAiBhD,OAhBc,IAAIT,EAAW,CAC3B,WAAY,CAAE,MAAO,0BAA2B,KAAM,QAAA,EACtD,QAAS,GACT,QAAS,GACT,OAAQ,IAAIC,EAAgB,CAC1B,IAAK,yFACL,OAAQ,CACN,cAAe,KAAK,UAAU,CAC5B,eAAgB,qCAAA,CACjB,CAAA,EAEH,YAAa,YACb,aAAc,uBAAA,CACf,CAAA,CACF,CAGH"}