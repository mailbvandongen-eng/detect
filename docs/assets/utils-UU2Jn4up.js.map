{"version":3,"file":"utils-UU2Jn4up.js","sources":["../../node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{Milliseconds as t}from\"../../../../../core/time.js\";import{getRandomValue as e}from\"../grouping.js\";function r(e){return t(e.frameDurations.reduce((t,e)=>t+e,0))}function i(t){const{width:e,height:r}=t,i=t.frameDurations.reverse(),a=e=>{const r=t.frameDurations.length-1-e;return t.getFrame(r)};return{frameCount:t.frameCount,duration:t.duration,frameDurations:i,getFrame:a,width:e,height:r}}function a(e,r){const{width:i,height:a,getFrame:n}=e,s=r/e.duration,o=e.frameDurations.map(e=>t(e*s));return{frameCount:e.frameCount,duration:e.duration,frameDurations:o,getFrame:n,width:i,height:a}}function n(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.shift();return s.unshift(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}function s(e,r){const{width:i,height:a,getFrame:n}=e,s=e.frameDurations.slice(),o=s.pop();return s.push(t(o+r)),{frameCount:e.frameCount,duration:e.duration+r,frameDurations:s,getFrame:n,width:i,height:a}}class o{constructor(e,r,i,a){this._animation=e,this._repeatType=i,this._onFrameData=a,this._direction=1,this._currentFrame=0,this._lastUpdated=t(0),this.timeInFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let n=0;for(;r>n;)n+=this.timeToFrame,this.nextFrame();const s=this._animation.getFrame(this._currentFrame);this._onFrameData(s)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=0;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case\"None\":this._currentFrame-=this._direction;break;case\"Loop\":this._currentFrame=this._animation.frameDurations.length-1;break;case\"Oscillate\":this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame],this.timeInFrame=0;const t=this._animation.getFrame(this._currentFrame);this._onFrameData(t)}update(e){const r=t(e-this._lastUpdated);this._lastUpdated=e,this._advance(r)}_advance(t){this.timeInFrame+=t,this.timeInFrame>this.timeToFrame&&this.nextFrame()}}function m(e,r){e.animationsEnabled&&r?.update(t(e.time))}function h(m,h,u,c){let d,{repeatType:f}=h;if(null==f&&(f=\"Loop\"),!0===h.reverseAnimation&&(m=i(m)),null!=h.duration&&(m=a(m,t(1e3*h.duration))),null!=h.repeatDelay){const e=1e3*h.repeatDelay;\"Loop\"===f?m=s(m,t(e)):\"Oscillate\"===f&&(m=n(s(m,t(e/2)),t(e/2)))}if(null!=h.startTimeOffset)d=t(1e3*h.startTimeOffset);else if(null!=h.randomizeStartTime){const i=82749913,a=null!=h.randomizeStartSeed?h.randomizeStartSeed:i,n=e(u,a);d=t(n*r(m))}else d=t(0);return new o(m,d,f,c)}export{o as Player,a as adjustDuration,s as appendDelay,h as createPlayer,r as getDuration,n as prependDelay,i as reverse,m as updateIfNeeded};\n"],"names":["r","e","t","i","a","n","s","o","m","h","u","c","d","f"],"mappings":"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","x_google_ignoreList":[0]}