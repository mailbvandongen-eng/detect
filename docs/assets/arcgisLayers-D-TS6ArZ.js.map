{"version":3,"mappings":"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","names":["f","p","r","a","t","s","v","l","o","n","c","i","u","y","__vitePreload","__vite_default__","w","m","e","d","L","S","g","h","P","b","I"],"ignoreList":[0],"sources":["../../node_modules/@arcgis/core/layers/support/arcgisLayers.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{urlToObject as r,getFilename as a}from\"../../core/urlUtils.js\";import{parse as t,parseNonStandardSublayerUrl as s}from\"./arcgisLayerUrl.js\";import{findAssociatedFeatureService as l}from\"./associatedFeatureServiceUtils.js\";import{getLayerModuleType as o,fetchFeatureService as n}from\"./fetchService.js\";import{getPreferredUrl as c,sceneServiceLayerTypeToClassName as i}from\"./layerUtils.js\";import{layerLookupMap as u}from\"./lazyLayerLoader.js\";import{fetchArcGISServiceJSON as y}from\"../../support/requestPresets.js\";const f={FeatureLayer:!0,SceneLayer:!0,VideoLayer:!0};async function p(e){const{properties:r,url:a}=e,t={...r,url:a},s=await v(a,r?.customParameters),{Constructor:l,layerId:o,sourceJSON:n,parsedUrl:c,layers:i,tables:u}=s;if(i.length+u.length===0)return null!=o&&(t.layerId=o),null!=n&&(t.sourceJSON=n),new l(t);const y=new(0,(await import(\"../GroupLayer.js\")).default)({title:c.title});return await w(y,s,t),y}function m(e,r){return e?e.find(({id:e})=>e===r):null}function d(e,r,a,t,s){const l={...s,layerId:r};return null!=e&&(l.url=e),null!=a&&(l.sourceJSON=a),\"sublayerTitleMode\"in t.prototype&&(l.sublayerTitleMode=\"service-name\"),new t(l)}async function w(e,r,a){const t=r.sublayerConstructorProvider;for(const{id:s,serverUrl:l}of r.layers){const o=m(r.sublayerInfos,s),n=d(l,s,o,(o&&t?.(o))??r.Constructor,a);e.add(n)}if(r.tables.length){const t=await L(\"FeatureLayer\");r.tables.forEach(({id:s,serverUrl:l})=>{const o=d(l,s,m(r.tableInfos,s),t,a);e.tables.add(o)})}}async function v(r,a){let s=t(r);if(null==s&&(s=await S(r,a)),null==s)throw new e(\"arcgis-layers:url-mismatch\",\"The url '${url}' is not a valid arcgis resource\",{url:r});const{serverType:l,sublayer:n}=s;let u;const p={FeatureServer:\"FeatureLayer\",KnowledgeGraphServer:\"KnowledgeGraphLayer\",StreamServer:\"StreamLayer\",VectorTileServer:\"VectorTileLayer\",VideoServer:\"VideoLayer\"},m=\"FeatureServer\"===l,d=\"SceneServer\"===l,w={parsedUrl:s,Constructor:null,layerId:m||d?n??void 0:void 0,layers:[],tables:[]};switch(l){case\"MapServer\":if(null!=n){const{type:t}=await y(r,{customParameters:a});switch(u=\"FeatureLayer\",t){case\"Catalog Layer\":u=\"CatalogLayer\";break;case\"Catalog Dynamic Group Layer\":throw new e(\"arcgis-layers:unsupported\",`fromUrl() not supported for \"${t}\" layers`)}}else{u=await g(r,a)?\"TileLayer\":\"MapImageLayer\"}break;case\"ImageServer\":{const e=await y(r,{customParameters:a}),{tileInfo:t,cacheType:s}=e;u=t?\"LERC\"!==t?.format?.toUpperCase()||s&&\"elevation\"!==s.toLowerCase()?\"ImageryTileLayer\":\"ElevationLayer\":\"ImageryLayer\";break}case\"SceneServer\":{const e=await y(s.url.path,{customParameters:a});if(u=\"SceneLayer\",e){const r=e?.layers;if(\"Voxel\"===e?.layerType)u=\"VoxelLayer\";else if(r?.length){const e=r[0]?.layerType;null!=e&&null!=i[e]&&(u=i[e])}}break}case\"3DTilesServer\":throw new e(\"arcgis-layers:unsupported\",\"fromUrl() not supported for 3DTiles layers\");case\"FeatureServer\":if(u=\"FeatureLayer\",null!=n){const e=await y(r,{customParameters:a});w.sourceJSON=e,w.preferredUrl=c(),u=o(e.type)}break;default:u=p[l]}if(f[u]&&null==n){const e=await h(r,l,a);m&&(w.preferredUrl=e.preferredUrl,w.sublayerInfos=e.layerInfos,w.tableInfos=e.tableInfos);if(1!==e.layers.length+e.tables.length)w.layers=e.layers,w.tables=e.tables,m&&e.layerInfos?.length&&(w.sublayerConstructorProvider=await P(e.layerInfos));else if(m||d){const r=e.layerInfos?.[0]??e.tableInfos?.[0];if(w.layerId=e.layers[0]?.id??e.tables[0]?.id,w.sourceJSON=r,m){const e=r?.type;u=o(e)}}}return w.Constructor=await L(u),w}async function S(e,t){const l=await y(e,{customParameters:t});let o=null,n=null;const c=l.type;if(\"Feature Layer\"===c||\"Table\"===c?(o=\"FeatureServer\",n=l.id??null):\"indexedVector\"===c?o=\"VectorTileServer\":l.hasOwnProperty(\"mapName\")?o=\"MapServer\":l.hasOwnProperty(\"bandCount\")&&l.hasOwnProperty(\"pixelSizeX\")?o=\"ImageServer\":l.hasOwnProperty(\"maxRecordCount\")&&l.hasOwnProperty(\"allowGeometryUpdates\")?o=\"FeatureServer\":l.hasOwnProperty(\"streamUrls\")?o=\"StreamServer\":b(l)?(o=\"SceneServer\",n=l.id):l.hasOwnProperty(\"layers\")&&b(l.layers?.[0])&&(o=\"SceneServer\"),!o)return null;const i=null!=n?s(e):null;return{title:null!=i&&l.name||a(e),serverType:o,sublayer:n,url:{path:null!=i?i.serviceUrl:r(e).path}}}function b(e){return null!=e&&e.hasOwnProperty(\"store\")&&e.hasOwnProperty(\"id\")&&\"number\"==typeof e.id}async function h(e,r,a){let t,s,l,o=!1;switch(r){case\"FeatureServer\":{const r=await n(e,{customParameters:a});l=c(e,{preferredHost:r.preferredHost}),o=!!r.layersJSON,t=r.layersJSON||r.serviceJSON;break}case\"SceneServer\":{const r=await I(e,a);t=r.serviceInfo,s=r.tableServerUrl;break}default:t=await y(e,{customParameters:a})}const i=t?.layers,u=t?.tables;return{preferredUrl:l,layers:i?.map(e=>({id:e.id})).reverse()||[],tables:u?.map(e=>({serverUrl:s,id:e.id})).reverse()||[],layerInfos:o?i:[],tableInfos:o?u:[]}}async function I(e,r){const a=await y(e,{customParameters:r}),t=a.layers?.[0];if(!t)return{serviceInfo:a};try{const{serverUrl:t}=await l(e),s=await y(t,{customParameters:r}).catch(()=>null);return s&&(a.tables=s.tables),{serviceInfo:a,tableServerUrl:t}}catch{return{serviceInfo:a}}}async function L(e){return(0,u[e])()}async function g(e,r){return(await y(e,{customParameters:r})).tileInfo}async function P(e){if(!e.length)return;const r=new Set,a=[];for(const{type:l}of e)r.has(l)||(r.add(l),a.push(L(o(l))));const t=await Promise.all(a),s=new Map;return Array.from(r).forEach((e,r)=>{s.set(e,t[r])}),e=>s.get(e.type)}export{p as fromUrl};\n"],"file":"arcgisLayers-D-TS6ArZ.js"}