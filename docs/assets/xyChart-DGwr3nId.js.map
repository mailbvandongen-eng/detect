{"version":3,"file":"xyChart-DGwr3nId.js","sources":["../../node_modules/d3-shape/src/array.js","../../node_modules/d3-shape/src/curve/linear.js","../../node_modules/d3-shape/src/point.js","../../node_modules/d3-shape/src/line.js","../../node_modules/d3-shape/src/area.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChartDefaultTheme.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYChart.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Grid.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/XYCursor.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/XYSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/BaseColumnSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/Axis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/ValueAxis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/CategoryAxis.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisLabel.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisTick.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRenderer.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRendererX.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/axes/AxisRendererY.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/ColumnSeries.js","../../node_modules/@amcharts/amcharts5/.internal/charts/xy/series/LineSeries.js"],"sourcesContent":["export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","import { Theme } from \"../../core/Theme\";\r\nimport { percent, p50, p100 } from \"../../core/util/Percent\";\r\nimport { Color } from \"../../core/util/Color\";\r\nimport { ColorSet } from \"../../core/util/ColorSet\";\r\nimport { setColor } from \"../../themes/DefaultTheme\";\r\nimport * as $time from \"../../core/util/Time\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $array from \"../../core/util/Array\";\r\n/**\r\n * @ignore\r\n */\r\nexport class XYChartDefaultTheme extends Theme {\r\n    setupDefaultRules() {\r\n        super.setupDefaultRules();\r\n        const ic = this._root.interfaceColors;\r\n        const language = this._root.language;\r\n        const r = this.rule.bind(this);\r\n        /**\r\n         * ========================================================================\r\n         * charts/xy\r\n         * ========================================================================\r\n         */\r\n        r(\"XYChart\").setAll({\r\n            colors: ColorSet.new(this._root, {}),\r\n            paddingLeft: 20,\r\n            paddingRight: 20,\r\n            paddingTop: 16,\r\n            paddingBottom: 16,\r\n            panX: false,\r\n            panY: false,\r\n            wheelStep: 0.25,\r\n            arrangeTooltips: true,\r\n            pinchZoomX: false,\r\n            pinchZoomY: false\r\n        });\r\n        r(\"XYSeries\").setAll({\r\n            legendLabelText: \"{name}\"\r\n        });\r\n        r(\"Rectangle\", [\"plotbackground\", \"xy\", \"background\"]).setAll({\r\n            fill: Color.fromHex(0x000000),\r\n            fillOpacity: 0\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: XYChartScrollbar\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYChart\", [\"scrollbar\", \"chart\"]).setAll({\r\n            paddingBottom: 0,\r\n            paddingLeft: 0,\r\n            paddingTop: 0,\r\n            paddingRight: 0,\r\n            colors: ColorSet.new(this._root, {\r\n                saturation: 0\r\n            })\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"scrollbar\", \"overlay\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.5\r\n            });\r\n            setColor(rule, \"fill\", ic, \"background\");\r\n        }\r\n        // Class: RoundedRectangle\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).setAll({\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusBL: 0,\r\n            fillOpacity: 0,\r\n            focusable: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"thumb\"]).states.create(\"hover\", { fillOpacity: 0.4 });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\"]).setAll({\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTR: 0,\r\n            cornerRadiusBR: 0\r\n        });\r\n        r(\"RoundedRectangle\", [\"xy\", \"scrollbar\", \"chart\", \"background\", \"resize\", \"button\"]).setAll({\r\n            cornerRadiusBL: 40,\r\n            cornerRadiusBR: 40,\r\n            cornerRadiusTL: 40,\r\n            cornerRadiusTR: 40\r\n        });\r\n        r(\"AxisRendererX\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true\r\n        });\r\n        r(\"AxisRendererY\", [\"xy\", \"chart\", \"scrollbar\"]).setAll({\r\n            strokeOpacity: 0,\r\n            inside: true,\r\n            minGridDistance: 5\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5,\r\n            centerY: p100,\r\n            minPosition: 0.01,\r\n            maxPosition: 0.99,\r\n            fontSize: \"0.8em\"\r\n        });\r\n        r(\"AxisLabel\", [\"category\"]).setAll({\r\n            text: \"{category}\",\r\n            populateText: true\r\n        });\r\n        r(\"AxisLabel\", [\"x\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"inside\", \"opposite\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"AxisLabel\", [\"x\", \"opposite\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"inside\", \"opposite\"]).setAll({\r\n            centerX: p100\r\n        });\r\n        r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n            centerX: 0\r\n        });\r\n        r(\"AxisLabel\", [\"minor\"]).setAll({\r\n            fontSize: \"0.6em\"\r\n        });\r\n        r(\"AxisLabel\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"y\"]).setAll({\r\n            visible: false\r\n        });\r\n        // Class: Grid\r\n        r(\"Grid\", [\"xy\", \"scrollbar\", \"x\"]).setAll({\r\n            opacity: 0.5\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Cursor\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYCursor\").setAll({\r\n            behavior: \"none\",\r\n            layer: 30,\r\n            exportable: false,\r\n            snapToSeriesBy: \"xy\",\r\n            moveThreshold: 1\r\n        });\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"x\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use left and right arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"cursor\", \"y\"]);\r\n            rule.setAll({\r\n                forceInactive: true,\r\n                strokeOpacity: 0.8,\r\n                strokeDasharray: [2, 2],\r\n                role: \"slider\",\r\n                ariaLabel: language.translate(\"Use up and down arrows to move selection\")\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"alternativeBackground\");\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"cursor\", \"selection\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0.15,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Axes\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"Axis\").setAll({\r\n            zoomOut: true,\r\n            start: 0,\r\n            end: 1,\r\n            minZoomCount: 1,\r\n            maxZoomCount: Infinity,\r\n            maxZoomFactor: 1000,\r\n            maxDeviation: 0.1,\r\n            snapTooltip: true,\r\n            tooltipLocation: 0.5,\r\n            panX: true,\r\n            panY: true,\r\n            zoomX: true,\r\n            zoomY: true,\r\n            fixAxisSize: true\r\n        });\r\n        r(\"AxisLabel\").setAll({\r\n            location: 0.5,\r\n            multiLocation: 0,\r\n            centerX: p50,\r\n            centerY: p50,\r\n            paddingTop: 3,\r\n            paddingBottom: 3,\r\n            paddingLeft: 5,\r\n            paddingRight: 5\r\n        });\r\n        // The following is deprecated following text measuring updates in 5.0.5\r\n        // r(\"AxisLabel\", [\"y\"]).setAll({\r\n        // \ttextAlign: \"right\"\r\n        // });\r\n        // r(\"AxisLabel\", [\"y\", \"opposite\"]).setAll({\r\n        // \ttextAlign: \"left\"\r\n        // });\r\n        r(\"Container\", [\"axis\", \"header\"]).setAll({\r\n            layer: 30\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"header\", \"background\"]).setAll({\r\n            crisp: true\r\n        });\r\n        {\r\n            const rule = r(\"AxisRenderer\");\r\n            rule.setAll({\r\n                crisp: true,\r\n                strokeOpacity: 0\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"AxisRendererX\").setAll({\r\n            minGridDistance: 120,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            width: p100\r\n        });\r\n        r(\"AxisRendererY\").setAll({\r\n            minGridDistance: 40,\r\n            opposite: false,\r\n            inversed: false,\r\n            cellStartLocation: 0,\r\n            cellEndLocation: 1,\r\n            height: p100\r\n        });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"axis\", \"thumb\", \"zoomgrip\"]);\r\n            rule.setAll({\r\n                fillOpacity: 0\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n            rule.states.create(\"hover\", { fillOpacity: 0.1 });\r\n        }\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"x\", \"zoomgrip\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\"\r\n        });\r\n        r(\"Rectangle\", [\"axis\", \"thumb\", \"y\", \"zoomgrip\"]).setAll({\r\n            cursorOverStyle: \"ns-resize\"\r\n        });\r\n        {\r\n            const rule = r(\"Grid\");\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.15,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        {\r\n            const rule = r(\"Grid\", [\"minor\"]);\r\n            rule.setAll({\r\n                location: 0,\r\n                strokeOpacity: 0.07,\r\n                crisp: true\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"Grid\", [\"base\"]).setAll({\r\n            strokeOpacity: 0.3\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"axis\", \"fill\"]);\r\n            rule.setAll({\r\n                visible: false,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                fillOpacity: 0.05,\r\n            });\r\n            setColor(rule, \"fill\", ic, \"alternativeBackground\");\r\n        }\r\n        r(\"Graphics\", [\"axis\", \"fill\", \"range\"]).setAll({\r\n            isMeasured: true\r\n        });\r\n        // hides all elements of series axis range\r\n        r(\"Graphics\", [\"series\", \"fill\", \"range\"]).setAll({\r\n            visible: false,\r\n            isMeasured: true\r\n        });\r\n        r(\"Grid\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisTick\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        r(\"AxisLabel\", [\"series\", \"range\"]).setAll({\r\n            visible: false\r\n        });\r\n        {\r\n            const rule = r(\"AxisTick\");\r\n            rule.setAll({\r\n                location: 0.5,\r\n                multiLocation: 0,\r\n                strokeOpacity: 1,\r\n                isMeasured: false,\r\n                position: \"absolute\",\r\n                visible: false\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"grid\");\r\n        }\r\n        r(\"CategoryAxis\").setAll({\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            fillRule: (dataItem, index) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        axisFill.setPrivate(\"visible\", true);\r\n                    }\r\n                    else {\r\n                        axisFill.setPrivate(\"visible\", false);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const gridIntervals = [\r\n            { timeUnit: \"millisecond\", count: 1 },\r\n            { timeUnit: \"millisecond\", count: 5 },\r\n            { timeUnit: \"millisecond\", count: 10 },\r\n            { timeUnit: \"millisecond\", count: 50 },\r\n            { timeUnit: \"millisecond\", count: 100 },\r\n            { timeUnit: \"millisecond\", count: 500 },\r\n            { timeUnit: \"second\", count: 1 },\r\n            { timeUnit: \"second\", count: 5 },\r\n            { timeUnit: \"second\", count: 10 },\r\n            { timeUnit: \"second\", count: 30 },\r\n            { timeUnit: \"minute\", count: 1 },\r\n            { timeUnit: \"minute\", count: 5 },\r\n            { timeUnit: \"minute\", count: 10 },\r\n            { timeUnit: \"minute\", count: 15 },\r\n            { timeUnit: \"minute\", count: 30 },\r\n            { timeUnit: \"hour\", count: 1 },\r\n            { timeUnit: \"hour\", count: 3 },\r\n            { timeUnit: \"hour\", count: 6 },\r\n            { timeUnit: \"hour\", count: 12 },\r\n            { timeUnit: \"day\", count: 1 },\r\n            { timeUnit: \"day\", count: 2 },\r\n            { timeUnit: \"day\", count: 3 },\r\n            { timeUnit: \"day\", count: 4 },\r\n            { timeUnit: \"day\", count: 5 },\r\n            { timeUnit: \"week\", count: 1 },\r\n            { timeUnit: \"month\", count: 1 },\r\n            { timeUnit: \"month\", count: 2 },\r\n            { timeUnit: \"month\", count: 3 },\r\n            { timeUnit: \"month\", count: 6 },\r\n            { timeUnit: \"year\", count: 1 },\r\n            { timeUnit: \"year\", count: 2 },\r\n            { timeUnit: \"year\", count: 5 },\r\n            { timeUnit: \"year\", count: 10 },\r\n            { timeUnit: \"year\", count: 50 },\r\n            { timeUnit: \"year\", count: 100 },\r\n            { timeUnit: \"year\", count: 200 },\r\n            { timeUnit: \"year\", count: 500 },\r\n            { timeUnit: \"year\", count: 1000 },\r\n            { timeUnit: \"year\", count: 2000 },\r\n            { timeUnit: \"year\", count: 5000 },\r\n            { timeUnit: \"year\", count: 10000 },\r\n            { timeUnit: \"year\", count: 100000 }\r\n        ];\r\n        const dateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_hour\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const periodChangeDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond\"),\r\n            \"second\": language.translate(\"_date_second\"),\r\n            \"minute\": language.translate(\"_date_minute\"),\r\n            \"hour\": language.translate(\"_date_day\"),\r\n            \"day\": language.translate(\"_date_day\"),\r\n            \"week\": language.translate(\"_date_day\"),\r\n            \"month\": language.translate(\"_date_month\") + \" \" + language.translate(\"_date_year\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        const tooltipDateFormats = {\r\n            \"millisecond\": language.translate(\"_date_millisecond_full\"),\r\n            \"second\": language.translate(\"_date_second_full\"),\r\n            \"minute\": language.translate(\"_date_minute_full\"),\r\n            \"hour\": language.translate(\"_date_hour_full\"),\r\n            \"day\": language.translate(\"_date_day_full\"),\r\n            \"week\": language.translate(\"_date_week_full\"),\r\n            \"month\": language.translate(\"_date_month_full\"),\r\n            \"year\": language.translate(\"_date_year\")\r\n        };\r\n        r(\"CategoryDateAxis\").setAll({\r\n            markUnitChange: true,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats)\r\n        });\r\n        r(\"DateAxis\").setAll({\r\n            maxZoomFactor: null,\r\n            strictMinMax: true,\r\n            startLocation: 0,\r\n            endLocation: 1,\r\n            markUnitChange: true,\r\n            groupData: false,\r\n            groupCount: 500,\r\n            skipFirstMinor: true,\r\n            weekLabelLocation: 0,\r\n            gridIntervals: $array.copy(gridIntervals),\r\n            dateFormats: $object.copy(dateFormats),\r\n            periodChangeDateFormats: $object.copy(periodChangeDateFormats),\r\n            tooltipDateFormats: tooltipDateFormats,\r\n            groupIntervals: [\r\n                { timeUnit: \"millisecond\", count: 1 },\r\n                { timeUnit: \"millisecond\", count: 10 },\r\n                { timeUnit: \"millisecond\", count: 100 },\r\n                { timeUnit: \"second\", count: 1 },\r\n                { timeUnit: \"second\", count: 10 },\r\n                { timeUnit: \"minute\", count: 1 },\r\n                { timeUnit: \"minute\", count: 10 },\r\n                { timeUnit: \"hour\", count: 1 },\r\n                { timeUnit: \"day\", count: 1 },\r\n                { timeUnit: \"week\", count: 1 },\r\n                { timeUnit: \"month\", count: 1 },\r\n                { timeUnit: \"year\", count: 1 }\r\n            ],\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const endValue = dataItem.get(\"endValue\");\r\n                    const intervalDuration = axis.intervalDuration();\r\n                    const baseInterval = axis.getPrivate(\"baseInterval\");\r\n                    const gridInterval = axis.getPrivate(\"gridInterval\", baseInterval);\r\n                    let min = axis.getPrivate(\"min\", 0);\r\n                    min = $time.round(new Date(min), gridInterval.timeUnit, gridInterval.count, this._root.locale.firstDayOfWeek, this._root.utc, undefined, this._root.timezone).getTime();\r\n                    if (value != null && endValue != null) {\r\n                        const val = Math.round(Math.round((value - min) / intervalDuration)) / 2;\r\n                        if (val == Math.round(val)) {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"GaplessDateAxis\").setAll({\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const index = dataItem.get(\"index\");\r\n                    let visible = false;\r\n                    if (!$type.isNumber(index) || index % 2 == 0) {\r\n                        visible = true;\r\n                    }\r\n                    axisFill.setPrivate(\"visible\", visible);\r\n                }\r\n            }\r\n        });\r\n        r(\"ValueAxis\").setAll({\r\n            baseValue: 0,\r\n            logarithmic: false,\r\n            strictMinMax: false,\r\n            autoZoom: true,\r\n            fillRule: (dataItem) => {\r\n                const axisFill = dataItem.get(\"axisFill\");\r\n                if (axisFill) {\r\n                    const axis = dataItem.component;\r\n                    const value = dataItem.get(\"value\");\r\n                    const step = axis.getPrivate(\"step\");\r\n                    if ($type.isNumber(value) && $type.isNumber(step)) {\r\n                        if ($math.round(value / step / 2, 5) == Math.round(value / step / 2)) {\r\n                            axisFill.setPrivate(\"visible\", false);\r\n                        }\r\n                        else {\r\n                            axisFill.setPrivate(\"visible\", true);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        r(\"DurationAxis\").setAll({\r\n            baseUnit: \"second\"\r\n        });\r\n        /**\r\n         * ------------------------------------------------------------------------\r\n         * charts/xy: Series\r\n         * ------------------------------------------------------------------------\r\n         */\r\n        r(\"XYSeries\").setAll({\r\n            maskBullets: true,\r\n            stackToNegative: true,\r\n            locationX: 0.5,\r\n            locationY: 0.5,\r\n            snapTooltip: false,\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\",\r\n            seriesTooltipTarget: \"series\"\r\n        });\r\n        r(\"BaseColumnSeries\").setAll({\r\n            adjustBulletPosition: true\r\n        });\r\n        r(\"ColumnSeries\").setAll({\r\n            clustered: true\r\n        });\r\n        r(\"RoundedRectangle\", [\"series\", \"column\"]).setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(70),\r\n            height: percent(70),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"LineSeries\").setAll({\r\n            connect: true,\r\n            autoGapCount: 1.1,\r\n            stackToNegative: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"stroke\"]).setAll({\r\n            position: \"absolute\",\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"series\", \"fill\"]).setAll({\r\n            visible: false,\r\n            fillOpacity: 0,\r\n            position: \"absolute\",\r\n            strokeWidth: 0,\r\n            strokeOpacity: 0,\r\n            isMeasured: false\r\n        });\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, h / 2);\r\n                    display.lineTo(w, h / 2);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).setAll({\r\n            draw: (display, sprite) => {\r\n                const parent = sprite.parent;\r\n                if (parent) {\r\n                    const h = parent.height();\r\n                    const w = parent.width();\r\n                    display.moveTo(0, 0);\r\n                    display.lineTo(w, 0);\r\n                    display.lineTo(w, h);\r\n                    display.lineTo(0, h);\r\n                    display.lineTo(0, 0);\r\n                }\r\n            }\r\n        });\r\n        {\r\n            const rule = r(\"Graphics\", [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]).states.create(\"disabled\", {});\r\n            setColor(rule, \"stroke\", ic, \"disabled\");\r\n        }\r\n        r(\"SmoothedXYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedXLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"SmoothedYLineSeries\").setAll({\r\n            tension: 0.5\r\n        });\r\n        r(\"Candlestick\").setAll({\r\n            position: \"absolute\",\r\n            isMeasured: false,\r\n            width: percent(50),\r\n            height: percent(50),\r\n            strokeWidth: 1,\r\n            strokeOpacity: 1,\r\n            cornerRadiusBL: 0,\r\n            cornerRadiusTL: 0,\r\n            cornerRadiusBR: 0,\r\n            cornerRadiusTR: 0,\r\n            fillOpacity: 1,\r\n            role: \"figure\"\r\n        });\r\n        r(\"OHLC\").setAll({\r\n            width: percent(80),\r\n            height: percent(80)\r\n        });\r\n        r(\"CandlestickSeries\").setAll({\r\n            lowValueXGrouped: \"low\",\r\n            lowValueYGrouped: \"low\",\r\n            highValueXGrouped: \"high\",\r\n            highValueYGrouped: \"high\",\r\n            openValueXGrouped: \"open\",\r\n            openValueYGrouped: \"open\",\r\n            valueXGrouped: \"close\",\r\n            valueYGrouped: \"close\"\r\n        });\r\n        // These rules can be used for regular columns, too\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"riseFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\"]).states.create(\"dropFromOpen\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // Hollow\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromOpen\", { fillOpacity: 0 });\r\n        r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromOpen\", { fillOpacity: 1 });\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"riseFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"positive\");\r\n            setColor(rule, \"stroke\", ic, \"positive\");\r\n        }\r\n        {\r\n            const rule = r(\"Rectangle\", [\"column\", \"autocolor\", \"pro\"]).states.create(\"dropFromPrevious\", {});\r\n            setColor(rule, \"fill\", ic, \"negative\");\r\n            setColor(rule, \"stroke\", ic, \"negative\");\r\n        }\r\n        // AXIS RANGE GRIP\r\n        {\r\n            const rule = r(\"RoundedRectangle\", [\"rangegrip\"]);\r\n            rule.setAll({\r\n                strokeOpacity: 0,\r\n                fillOpacity: 0,\r\n                strokeWidth: 1,\r\n                width: 12,\r\n                height: 12\r\n            });\r\n        }\r\n        {\r\n            const rule = r(\"Graphics\", [\"rangegrip\", \"button\", \"icon\"]);\r\n            rule.setAll({\r\n                interactive: false,\r\n                crisp: true,\r\n                strokeOpacity: 0.5,\r\n                draw: (display) => {\r\n                    display.moveTo(0, 0.5);\r\n                    display.lineTo(0, 12.5);\r\n                    display.moveTo(2, 0.5);\r\n                    display.lineTo(2, 12.5);\r\n                    display.moveTo(4, 0.5);\r\n                    display.lineTo(4, 12.5);\r\n                }\r\n            });\r\n            setColor(rule, \"stroke\", ic, \"secondaryButtonText\");\r\n        }\r\n        r(\"Button\", [\"rangegrip\"]).setAll({\r\n            draggable: true,\r\n            paddingTop: 0,\r\n            paddingBottom: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\"]).setAll({\r\n            rotation: 90,\r\n            cursorOverStyle: \"ns-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\"]).setAll({\r\n            cursorOverStyle: \"ew-resize\",\r\n            centerX: p50\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"left\"]).setAll({\r\n            centerY: p100\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"vertical\", \"right\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"top\"]).setAll({\r\n            centerY: 0\r\n        });\r\n        r(\"Button\", [\"rangegrip\", \"horizontal\", \"bottom\"]).setAll({\r\n            centerY: p100\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=XYChartDefaultTheme.js.map",";\r\nimport { XYChartDefaultTheme } from \"./XYChartDefaultTheme\";\r\nimport { Container } from \"../../core/render/Container\";\r\nimport { Rectangle } from \"../../core/render/Rectangle\";\r\nimport { SerialChart } from \"../../core/render/SerialChart\";\r\nimport { ListAutoDispose } from \"../../core/util/List\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Button } from \"../../core/render/Button\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Percent } from \"../../core/util/Percent\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $order from \"../../core/util/Order\";\r\nimport * as $object from \"../../core/util/Object\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\n/**\r\n * Creates an XY chart.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/} for more info\r\n * @important\r\n */\r\nexport class XYChart extends SerialChart {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A list of horizontal axes.\r\n         */\r\n        Object.defineProperty(this, \"xAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A list of vertical axes.\r\n         */\r\n        Object.defineProperty(this, \"yAxes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new ListAutoDispose()\r\n        });\r\n        /**\r\n         * A [[Container]] located on top of the chart, used to store top horizontal\r\n         * axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle the chart, used to store vertical axes\r\n         * and plot area container.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"yAxesAndPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on bottom of the chart, used to store bottom\r\n         * horizontal axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"bottomAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.chartContainer.children.push(Container.new(this._root, { width: p100, layout: this._root.verticalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located on left of the chart, used to store left-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"leftAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store plotContainer and topPlotContainer\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { width: p100, height: p100, maskContent: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] located in the middle of the chart, used to store actual\r\n         * plots (series).\r\n         *\r\n         * NOTE: `plotContainer` will automatically have its `background` preset. If\r\n         * you need to modify background or outline for chart's plot area, you can\r\n         * use `plotContainer.get(\"background\")` for that.*\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"plotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] used for any elements that need to be displayed over\r\n         * regular `plotContainer`.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topPlotContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotsContainer.children.push(Container.new(this._root, { width: p100, height: p100 }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, { width: p100, height: p100, isMeasured: false }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis background grid elements are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100, isMeasured: false })\r\n        });\r\n        /**\r\n         * A [[Container]] located on right of the chart, used to store right-hand\r\n         * vertical axes.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/xy-chart-containers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"rightAxesContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.yAxesAndPlotContainer.children.push(Container.new(this._root, { height: p100, layout: this._root.horizontalLayout }))\r\n        });\r\n        /**\r\n         * A [[Container]] axis headers are stored in.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"axisHeadersContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.plotContainer.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A button that is shown when chart is not fully zoomed out.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/zoom-and-pan/#Zoom_out_button} for more info\r\n         * @default Button.new()\r\n         */\r\n        Object.defineProperty(this, \"zoomOutButton\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.topPlotContainer.children.push(Button.new(this._root, {\r\n                themeTags: [\"zoom\"],\r\n                icon: Graphics.new(this._root, {\r\n                    themeTags: [\"button\", \"icon\"]\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_movePoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_wheelDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_otherCharts\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_movePoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_downStartX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStartY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEndY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._defaultThemes.push(XYChartDefaultTheme.new(this._root));\r\n        super._afterNew();\r\n        this._disposers.push(this.xAxes);\r\n        this._disposers.push(this.yAxes);\r\n        const root = this._root;\r\n        let verticalLayout = this._root.verticalLayout;\r\n        const zoomOutButton = this.zoomOutButton;\r\n        zoomOutButton.events.on(\"click\", () => {\r\n            this.zoomOut();\r\n        });\r\n        zoomOutButton.hide(0);\r\n        zoomOutButton.states.lookup(\"default\").set(\"opacity\", 1);\r\n        this.chartContainer.set(\"layout\", verticalLayout);\r\n        const plotContainer = this.plotContainer;\r\n        plotContainer.children.push(this.seriesContainer);\r\n        this._disposers.push(this._processAxis(this.xAxes, this.bottomAxesContainer));\r\n        this._disposers.push(this._processAxis(this.yAxes, this.leftAxesContainer));\r\n        plotContainer.children.push(this.topGridContainer);\r\n        plotContainer.children.push(this.bulletsContainer);\r\n        // Setting trasnparent background so that full body of the plot container\r\n        // is interactive\r\n        plotContainer.set(\"interactive\", true);\r\n        plotContainer.set(\"interactiveChildren\", false);\r\n        plotContainer.set(\"background\", Rectangle.new(root, {\r\n            themeTags: [\"plotbackground\", \"xy\", \"background\"]\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\r\n            this._handlePlotDown(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\r\n            this._handlePlotUp(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\r\n            this._handlePlotMove(event);\r\n        }));\r\n        this._maskGrid();\r\n        this._setUpTouch();\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"pinchZoomX\") || this.isDirty(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) {\r\n            this._setUpTouch();\r\n        }\r\n    }\r\n    _setUpTouch() {\r\n        if (!this.plotContainer._display.cancelTouch) {\r\n            this.plotContainer._display.cancelTouch = (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\") || this.get(\"panX\") || this.get(\"panY\")) ? true : false;\r\n        }\r\n    }\r\n    _maskGrid() {\r\n        this.gridContainer.set(\"maskContent\", true);\r\n        this.topGridContainer.set(\"maskContent\", true);\r\n    }\r\n    _removeSeries(series) {\r\n        series._unstack();\r\n        if (series._posXDp) {\r\n            series._posXDp.dispose();\r\n        }\r\n        if (series._posYDp) {\r\n            series._posYDp.dispose();\r\n        }\r\n        series.set(\"baseAxis\", undefined);\r\n        const xAxis = series.get(\"xAxis\");\r\n        if (xAxis) {\r\n            $array.remove(xAxis.series, series);\r\n            xAxis.markDirtyExtremes();\r\n        }\r\n        const yAxis = series.get(\"yAxis\");\r\n        if (yAxis) {\r\n            $array.remove(yAxis.series, series);\r\n            yAxis.markDirtyExtremes();\r\n        }\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (snapToSeries) {\r\n                $array.remove(snapToSeries, series);\r\n            }\r\n        }\r\n        super._removeSeries(series);\r\n    }\r\n    /**\r\n     * This method is invoked when mouse wheel is used over chart's plot\r\n     * container, and handles zooming/pan.\r\n     *\r\n     * You can invoke this method manually, if you need to mimic chart's wheel\r\n     * behavior over other elements of the chart.\r\n     */\r\n    handleWheel(event) {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        const wheelEvent = event.originalEvent;\r\n        // Ignore wheel event if it is happening on a non-chart element, e.g. if\r\n        // some page element is over the chart.\r\n        let prevent = false;\r\n        if ($utils.isLocalEvent(wheelEvent, this)) {\r\n            prevent = true;\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n        const plotPoint = plotContainer.toLocal(event.point);\r\n        const wheelStep = this.get(\"wheelStep\", 0.2);\r\n        const shiftY = wheelEvent.deltaY / 100;\r\n        const shiftX = wheelEvent.deltaX / 100;\r\n        const wheelZoomPositionX = this.get(\"wheelZoomPositionX\");\r\n        const wheelZoomPositionY = this.get(\"wheelZoomPositionY\");\r\n        if ((wheelX === \"zoomX\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomX\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.x / plotContainer.width());\r\n                    if (wheelZoomPositionX != null) {\r\n                        position = wheelZoomPositionX;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"zoomY\" || wheelX === \"zoomXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftX * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftX * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"zoomY\" || wheelY === \"zoomXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let position = axis.fixPosition(plotPoint.y / plotContainer.height());\r\n                    if (wheelZoomPositionY != null) {\r\n                        position = wheelZoomPositionY;\r\n                    }\r\n                    let maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                    let newStart = Math.min(1 + maxDeviation, Math.max(-maxDeviation, start - wheelStep * (end - start) * shiftY * position));\r\n                    let newEnd = Math.max(-maxDeviation, Math.min(1 + maxDeviation, end + wheelStep * (end - start) * shiftY * (1 - position)));\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    if (1 / (newEnd - newStart) < axis.getPrivate(\"maxZoomFactor\", Infinity) / axis.get(\"minZoomCount\", 1)) {\r\n                        this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                    }\r\n                    else {\r\n                        prevent = false;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panX\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panX\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"panX\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelX === \"panY\" || wheelX === \"panXY\") && shiftX != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftX;\r\n                    let newStart = start + delta;\r\n                    let newEnd = end + delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if ((wheelY === \"panY\" || wheelY === \"panXY\") && shiftY != 0) {\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"panY\")) {\r\n                    let start = axis.get(\"start\");\r\n                    let end = axis.get(\"end\");\r\n                    let delta = this._getWheelSign(axis) * wheelStep * (end - start) * shiftY;\r\n                    let newStart = start - delta;\r\n                    let newEnd = end - delta;\r\n                    let se = this._fixWheel(newStart, newEnd);\r\n                    newStart = se[0];\r\n                    newEnd = se[1];\r\n                    if (newStart == start && newEnd == end) {\r\n                        prevent = false;\r\n                    }\r\n                    this._handleWheelAnimation(axis.zoom(newStart, newEnd));\r\n                }\r\n            });\r\n        }\r\n        if (prevent) {\r\n            wheelEvent.preventDefault();\r\n        }\r\n    }\r\n    _handleSetWheel() {\r\n        const wheelX = this.get(\"wheelX\");\r\n        const wheelY = this.get(\"wheelY\");\r\n        const plotContainer = this.plotContainer;\r\n        if (wheelX !== \"none\" || wheelY !== \"none\") {\r\n            this._wheelDp = plotContainer.events.on(\"wheel\", (event) => {\r\n                const wheelEvent = event.originalEvent;\r\n                if ((wheelX !== \"none\" && Math.abs(wheelEvent.deltaX) != 0) || (wheelY !== \"none\" && Math.abs(wheelEvent.deltaY) != 0)) {\r\n                    this.handleWheel(event);\r\n                }\r\n            });\r\n            this._disposers.push(this._wheelDp);\r\n        }\r\n        else {\r\n            if (this._wheelDp) {\r\n                this._wheelDp.dispose();\r\n            }\r\n        }\r\n    }\r\n    _getWheelSign(axis) {\r\n        let sign = 1;\r\n        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n            sign = -1;\r\n        }\r\n        return sign;\r\n    }\r\n    _fixWheel(start, end) {\r\n        const diff = end - start;\r\n        if (start < 0) {\r\n            start = 0;\r\n            end = start + diff;\r\n        }\r\n        if (end > 1) {\r\n            end = 1;\r\n            start = end - diff;\r\n        }\r\n        return [start, end];\r\n    }\r\n    _handlePlotDown(event) {\r\n        const originalEvent = event.originalEvent;\r\n        if (originalEvent.button == 2) {\r\n            return;\r\n        }\r\n        const plotContainer = this.plotContainer;\r\n        let local = plotContainer.toLocal(event.point);\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const pointerId = originalEvent.pointerId;\r\n            if (pointerId) {\r\n                if ($object.keys(plotContainer._downPoints).length > 0) {\r\n                    const xAxis = this.xAxes.getIndex(0);\r\n                    const yAxis = this.yAxes.getIndex(0);\r\n                    if (xAxis) {\r\n                        this._downStartX = xAxis.get(\"start\", 0);\r\n                        this._downEndX = xAxis.get(\"end\", 1);\r\n                    }\r\n                    if (yAxis) {\r\n                        this._downStartY = yAxis.get(\"start\", 0);\r\n                        this._downEndY = yAxis.get(\"end\", 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.get(\"panX\") || this.get(\"panY\")) {\r\n            if (local.x >= 0 && local.y >= 0 && local.x <= plotContainer.width() && local.y <= this.height()) {\r\n                //this._downPoint = local;\r\n                this._downPoint = { x: originalEvent.clientX, y: originalEvent.clientY };\r\n                const panX = this.get(\"panX\");\r\n                const panY = this.get(\"panY\");\r\n                if (panX) {\r\n                    this.xAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                if (panY) {\r\n                    this.yAxes.each((axis) => {\r\n                        axis._panStart = axis.get(\"start\");\r\n                        axis._panEnd = axis.get(\"end\");\r\n                    });\r\n                }\r\n                const eventType = \"panstarted\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleWheelAnimation(animation) {\r\n        if (animation) {\r\n            animation.events.on(\"stopped\", () => {\r\n                this._dispatchWheelAnimation();\r\n            });\r\n        }\r\n        else {\r\n            this._dispatchWheelAnimation();\r\n        }\r\n    }\r\n    _dispatchWheelAnimation() {\r\n        const eventType = \"wheelended\";\r\n        if (this.events.isEnabled(eventType)) {\r\n            this.events.dispatch(eventType, { type: eventType, target: this });\r\n        }\r\n    }\r\n    _handlePlotUp(event) {\r\n        const downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            if (this.get(\"panX\") || this.get(\"panY\")) {\r\n                if (event.originalEvent.clientX == downPoint.x && event.originalEvent.clientY == downPoint.y) {\r\n                    const eventType = \"pancancelled\";\r\n                    if (this.events.isEnabled(eventType)) {\r\n                        this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                    }\r\n                }\r\n                const eventType = \"panended\";\r\n                if (this.events.isEnabled(eventType)) {\r\n                    this.events.dispatch(eventType, { type: eventType, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n        }\r\n        // TODO: handle multitouch\r\n        this._downPoint = undefined;\r\n        this.xAxes.each((xAxis) => {\r\n            xAxis._isPanning = false;\r\n        });\r\n        this.yAxes.each((yAxis) => {\r\n            yAxis._isPanning = false;\r\n        });\r\n    }\r\n    _handlePlotMove(event) {\r\n        const plotContainer = this.plotContainer;\r\n        if (this.get(\"pinchZoomX\") || this.get(\"pinchZoomY\")) {\r\n            const touchEvent = event.originalEvent;\r\n            const pointerId = touchEvent.pointerId;\r\n            if (pointerId) {\r\n                this._movePoints[pointerId] = event.point;\r\n                if ($object.keys(plotContainer._downPoints).length > 1) {\r\n                    this._handlePinch();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        let downPoint = this._downPoint;\r\n        if (downPoint) {\r\n            downPoint = plotContainer.toLocal(this._root.documentPointToRoot(downPoint));\r\n            let local = plotContainer.toLocal(event.point);\r\n            const panX = this.get(\"panX\");\r\n            const panY = this.get(\"panY\");\r\n            if (panX) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.disableType(\"rangechanged\");\r\n                }\r\n                this.xAxes.each((axis) => {\r\n                    if (axis.get(\"panX\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaX = difference * (downPoint.x - local.x) / plotContainer.width();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaX *= -1;\r\n                        }\r\n                        let start = panStart + deltaX;\r\n                        let end = panEnd + deltaX;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarX) {\r\n                    scrollbarX.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n            if (panY) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.disableType(\"rangechanged\");\r\n                }\r\n                this.yAxes.each((axis) => {\r\n                    if (axis.get(\"panY\")) {\r\n                        axis._isPanning = true;\r\n                        //const maxDeviation = axis.get(\"maxDeviation\", 0);\r\n                        let panStart = axis._panStart;\r\n                        let panEnd = axis._panEnd;\r\n                        let difference = (panEnd - panStart);\r\n                        let deltaY = difference * (downPoint.y - local.y) / plotContainer.height();\r\n                        if (axis.get(\"renderer\").get(\"inversed\")) {\r\n                            deltaY *= -1;\r\n                        }\r\n                        let start = panStart - deltaY;\r\n                        let end = panEnd - deltaY;\r\n                        if (end - start < 1 + axis.get(\"maxDeviation\", 1) * 2) {\r\n                            axis.set(\"start\", start);\r\n                            axis.set(\"end\", end);\r\n                        }\r\n                    }\r\n                });\r\n                if (scrollbarY) {\r\n                    scrollbarY.events.enableType(\"rangechanged\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handlePinch() {\r\n        const plotContainer = this.plotContainer;\r\n        let i = 0;\r\n        let downPoints = [];\r\n        let movePoints = [];\r\n        $object.each(plotContainer._downPoints, (k, point) => {\r\n            downPoints[i] = point;\r\n            let movePoint = this._movePoints[k];\r\n            if (movePoint) {\r\n                movePoints[i] = movePoint;\r\n            }\r\n            i++;\r\n        });\r\n        if (downPoints.length > 1 && movePoints.length > 1) {\r\n            const w = plotContainer.width();\r\n            const h = plotContainer.height();\r\n            let downPoint0 = downPoints[0];\r\n            let downPoint1 = downPoints[1];\r\n            let movePoint0 = movePoints[0];\r\n            let movePoint1 = movePoints[1];\r\n            if (downPoint0 && downPoint1 && movePoint0 && movePoint1) {\r\n                movePoint0 = plotContainer.toLocal(movePoint0);\r\n                movePoint1 = plotContainer.toLocal(movePoint1);\r\n                downPoint0 = plotContainer.toLocal(downPoint0);\r\n                downPoint1 = plotContainer.toLocal(downPoint1);\r\n                if (this.get(\"pinchZoomX\")) {\r\n                    const downStartX = this._downStartX;\r\n                    const downEndX = this._downEndX;\r\n                    if (downStartX != null && downEndX != null) {\r\n                        if (downPoint0.x > downPoint1.x) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartX + (downPoint0.x / w) * (downEndX - downStartX);\r\n                        let downPos1 = downStartX + (downPoint1.x / w) * (downEndX - downStartX);\r\n                        let movePos0 = downStartX + (movePoint0.x / w) * (downEndX - downStartX);\r\n                        let movePos1 = downStartX + (movePoint1.x / w) * (downEndX - downStartX);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartX * d + downPos0 - movePos0 * d;\r\n                        let e = downEndX * d + downPos1 - movePos1 * d;\r\n                        this.xAxes.each((xAxis) => {\r\n                            let sa = xAxis.fixPosition(s);\r\n                            let ea = xAxis.fixPosition(e);\r\n                            xAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n                if (this.get(\"pinchZoomY\")) {\r\n                    const downStartY = this._downStartY;\r\n                    const downEndY = this._downEndY;\r\n                    if (downStartY != null && downEndY != null) {\r\n                        if (downPoint0.y < downPoint1.y) {\r\n                            [downPoint0, downPoint1] = [downPoint1, downPoint0];\r\n                            [movePoint0, movePoint1] = [movePoint1, movePoint0];\r\n                        }\r\n                        let downPos0 = downStartY + (1 - downPoint0.y / h) * (downEndY - downStartY);\r\n                        let downPos1 = downStartY + (1 - downPoint1.y / h) * (downEndY - downStartY);\r\n                        let movePos0 = downStartY + (1 - movePoint0.y / h) * (downEndY - downStartY);\r\n                        let movePos1 = downStartY + (1 - movePoint1.y / h) * (downEndY - downStartY);\r\n                        let initialDistance = Math.max(0.001, downPos1 - downPos0);\r\n                        let currentDistance = Math.max(0.001, movePos1 - movePos0);\r\n                        let d = initialDistance / currentDistance;\r\n                        let s = downStartY * d + downPos0 - movePos0 * d;\r\n                        let e = downEndY * d + downPos1 - movePos1 * d;\r\n                        this.yAxes.each((yAxis) => {\r\n                            let sa = yAxis.fixPosition(s);\r\n                            let ea = yAxis.fixPosition(e);\r\n                            yAxis.zoom(sa, ea, 0);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleCursorPosition() {\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            const cursorPoint = cursor.getPrivate(\"point\");\r\n            let snapToSeries = cursor.get(\"snapToSeries\");\r\n            if (cursor._downPoint) {\r\n                snapToSeries = undefined;\r\n            }\r\n            if (snapToSeries && cursorPoint) {\r\n                const snapToSeriesBy = cursor.get(\"snapToSeriesBy\");\r\n                const dataItems = [];\r\n                $array.each(snapToSeries, (series) => {\r\n                    if (!series.isHidden() && !series.isHiding()) {\r\n                        if (snapToSeriesBy != \"x!\" && snapToSeriesBy != \"y!\") {\r\n                            const startIndex = series.startIndex();\r\n                            const endIndex = series.endIndex();\r\n                            for (let i = startIndex; i < endIndex; i++) {\r\n                                const dataItem = series.dataItems[i];\r\n                                if (dataItem && !dataItem.isHidden()) {\r\n                                    dataItems.push(dataItem);\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            const tooltipDataItem = series.get(\"tooltipDataItem\");\r\n                            if (tooltipDataItem) {\r\n                                dataItems.push(tooltipDataItem);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                let minDistance = Infinity;\r\n                let closestItem;\r\n                $array.each(dataItems, (dataItem) => {\r\n                    const point = dataItem.get(\"point\");\r\n                    if (point) {\r\n                        let distance = 0;\r\n                        if (snapToSeriesBy == \"x\" || snapToSeriesBy == \"x!\") {\r\n                            distance = Math.abs(cursorPoint.x - point.x);\r\n                        }\r\n                        else if (snapToSeriesBy == \"y\" || snapToSeriesBy == \"y!\") {\r\n                            distance = Math.abs(cursorPoint.y - point.y);\r\n                        }\r\n                        else {\r\n                            distance = Math.hypot(cursorPoint.x - point.x, cursorPoint.y - point.y);\r\n                        }\r\n                        if (distance < minDistance) {\r\n                            minDistance = distance;\r\n                            closestItem = dataItem;\r\n                        }\r\n                    }\r\n                });\r\n                $array.each(snapToSeries, (series) => {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        tooltip._setDataItem(undefined);\r\n                    }\r\n                });\r\n                if (closestItem) {\r\n                    let series = closestItem.component;\r\n                    series.showDataItemTooltip(closestItem);\r\n                    series.setRaw(\"tooltipDataItem\", closestItem);\r\n                    const point = closestItem.get(\"point\");\r\n                    if (point) {\r\n                        // removing x and y to solve #72225\r\n                        cursor.handleMove(series.toGlobal({ x: point.x - series.x(), y: point.y - series.y() }), true);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateCursor() {\r\n        let cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.updateCursor();\r\n        }\r\n    }\r\n    _addCursor(cursor) {\r\n        this.plotContainer.children.push(cursor);\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this.series.each((series) => {\r\n            this._colorize(series);\r\n        });\r\n        if (this.isDirty(\"wheelX\") || this.isDirty(\"wheelY\")) {\r\n            this._handleSetWheel();\r\n        }\r\n        if (this.isDirty(\"cursor\")) {\r\n            const previous = this._prevSettings.cursor;\r\n            const cursor = this.get(\"cursor\");\r\n            if (cursor !== previous) {\r\n                this._disposeProperty(\"cursor\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (cursor) {\r\n                    cursor._setChart(this);\r\n                    this._addCursor(cursor);\r\n                    this._pushPropertyDisposer(\"cursor\", cursor.events.on(\"selectended\", () => {\r\n                        this._handleCursorSelectEnd();\r\n                    }));\r\n                }\r\n                //this.setRaw(\"cursor\", cursor) // to reset previous value\r\n                this._prevSettings.cursor = cursor;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarX\")) {\r\n            const previous = this._prevSettings.scrollbarX;\r\n            const scrollbarX = this.get(\"scrollbarX\");\r\n            if (scrollbarX !== previous) {\r\n                this._disposeProperty(\"scrollbarX\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarX) {\r\n                    if (!scrollbarX.parent) {\r\n                        this.topAxesContainer.children.push(scrollbarX);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.xAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarX\", scrollbarX.events.on(\"released\", () => {\r\n                        this.xAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarX.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.xAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarX = scrollbarX;\r\n            }\r\n        }\r\n        if (this.isDirty(\"scrollbarY\")) {\r\n            const previous = this._prevSettings.scrollbarY;\r\n            const scrollbarY = this.get(\"scrollbarY\");\r\n            if (scrollbarY !== previous) {\r\n                this._disposeProperty(\"scrollbarY\");\r\n                if (previous) {\r\n                    previous.dispose();\r\n                }\r\n                if (scrollbarY) {\r\n                    if (!scrollbarY.parent) {\r\n                        this.rightAxesContainer.children.push(scrollbarY);\r\n                    }\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"rangechanged\", (e) => {\r\n                        this._handleScrollbar(this.yAxes, e.start, e.end, e.grip);\r\n                    }));\r\n                    this._pushPropertyDisposer(\"scrollbarY\", scrollbarY.events.on(\"released\", () => {\r\n                        this.yAxes.each((axis) => {\r\n                            if (axis.get(\"zoomable\")) {\r\n                                this._handleAxisSelection(axis);\r\n                            }\r\n                        });\r\n                    }));\r\n                    // Used to populate `ariaLabel` with meaningful values\r\n                    scrollbarY.setPrivate(\"positionTextFunction\", (position) => {\r\n                        const axis = this.yAxes.getIndex(0);\r\n                        return axis ? axis.getTooltipText(position, false) || \"\" : \"\";\r\n                    });\r\n                }\r\n                this._prevSettings.scrollbarY = scrollbarY;\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _processSeries(series) {\r\n        super._processSeries(series);\r\n        const xAxis = series.get(\"xAxis\");\r\n        const yAxis = series.get(\"yAxis\");\r\n        $array.move(xAxis.series, series);\r\n        $array.move(yAxis.series, series);\r\n        series._posXDp = series.addDisposer(xAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        series._posXDp = series.addDisposer(yAxis.events.on(\"positionchanged\", () => {\r\n            series._fixPosition();\r\n        }));\r\n        if (!series.get(\"baseAxis\")) {\r\n            if (yAxis.isType(\"CategoryAxis\") || yAxis.isType(\"DateAxis\")) {\r\n                series.set(\"baseAxis\", yAxis);\r\n            }\r\n            else {\r\n                series.set(\"baseAxis\", xAxis);\r\n            }\r\n        }\r\n        if (series.get(\"stacked\")) {\r\n            series._markDirtyKey(\"stacked\");\r\n            $array.each(series.dataItems, (dataItem) => {\r\n                dataItem.set(\"stackToItemY\", undefined);\r\n                dataItem.set(\"stackToItemX\", undefined);\r\n            });\r\n        }\r\n        series._markDirtyAxes();\r\n        yAxis.markDirtyExtremes();\r\n        xAxis.markDirtyExtremes();\r\n        xAxis._seriesAdded = true;\r\n        yAxis._seriesAdded = true;\r\n        this._colorize(series);\r\n    }\r\n    _colorize(series) {\r\n        const colorSet = this.get(\"colors\");\r\n        if (colorSet) {\r\n            if (series.get(\"fill\") == null) {\r\n                const color = colorSet.next();\r\n                series._setSoft(\"stroke\", color);\r\n                series._setSoft(\"fill\", color);\r\n            }\r\n        }\r\n        const patternSet = this.get(\"patterns\");\r\n        if (patternSet) {\r\n            if (series.get(\"fillPattern\") == null) {\r\n                const pattern = patternSet.next();\r\n                series._setSoft(\"fillPattern\", pattern);\r\n            }\r\n        }\r\n    }\r\n    _handleCursorSelectEnd() {\r\n        const cursor = this.get(\"cursor\");\r\n        const behavior = cursor.get(\"behavior\");\r\n        const downPositionX = cursor.getPrivate(\"downPositionX\", 0);\r\n        const downPositionY = cursor.getPrivate(\"downPositionY\", 0);\r\n        const positionX = Math.min(1, Math.max(0, cursor.getPrivate(\"positionX\", 0.5)));\r\n        const positionY = Math.min(1, Math.max(0, cursor.getPrivate(\"positionY\", 0.5)));\r\n        this.xAxes.each((axis) => {\r\n            if (behavior === \"zoomX\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionX);\r\n                let position1 = axis.toAxisPosition(positionX);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            if (behavior === \"zoomY\" || behavior === \"zoomXY\") {\r\n                let position0 = axis.toAxisPosition(downPositionY);\r\n                let position1 = axis.toAxisPosition(positionY);\r\n                axis.zoom(position0, position1);\r\n            }\r\n            axis.setPrivate(\"updateScrollbar\", true);\r\n        });\r\n    }\r\n    _handleScrollbar(axes, start, end, priority) {\r\n        axes.each((axis) => {\r\n            let axisStart = axis.fixPosition(start);\r\n            let axisEnd = axis.fixPosition(end);\r\n            let zoomAnimation = axis.zoom(axisStart, axisEnd, undefined, priority);\r\n            const updateScrollbar = \"updateScrollbar\";\r\n            axis.setPrivateRaw(updateScrollbar, false);\r\n            if (zoomAnimation) {\r\n                zoomAnimation.events.on(\"stopped\", () => {\r\n                    axis.setPrivateRaw(updateScrollbar, true);\r\n                });\r\n            }\r\n            else {\r\n                axis.setPrivateRaw(updateScrollbar, true);\r\n            }\r\n        });\r\n    }\r\n    _processAxis(axes, container) {\r\n        return axes.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (axis) => {\r\n                    this._removeAxis(axis);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                container.children.push(change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                container.children.setIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                container.children.insertIndex(change.index, change.newValue);\r\n                change.newValue.processChart(this);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeAxis(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                container.children.moveValue(change.value, change.newIndex);\r\n                change.value.processChart(this);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IListEvent type\");\r\n            }\r\n        });\r\n    }\r\n    _removeAxis(axis) {\r\n        if (!axis.isDisposed()) {\r\n            const axisParent = axis.parent;\r\n            if (axisParent) {\r\n                axisParent.children.removeValue(axis);\r\n            }\r\n            const gridContainer = axis.gridContainer;\r\n            const gridParent = gridContainer.parent;\r\n            if (gridParent) {\r\n                gridParent.children.removeValue(gridContainer);\r\n            }\r\n            const topGridContainer = axis.topGridContainer;\r\n            const topGridParent = topGridContainer.parent;\r\n            if (topGridParent) {\r\n                topGridParent.children.removeValue(topGridContainer);\r\n            }\r\n        }\r\n    }\r\n    _updateChartLayout() {\r\n        const left = this.leftAxesContainer.width();\r\n        const right = this.rightAxesContainer.width();\r\n        const bottomAxesContainer = this.bottomAxesContainer;\r\n        bottomAxesContainer.set(\"paddingLeft\", left);\r\n        bottomAxesContainer.set(\"paddingRight\", right);\r\n        const topAxesContainer = this.topAxesContainer;\r\n        topAxesContainer.set(\"paddingLeft\", left);\r\n        topAxesContainer.set(\"paddingRight\", right);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis(axis) {\r\n        var cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            this.addDisposer(axis.on(\"start\", () => {\r\n                this._updateCursor();\r\n            }));\r\n            this.addDisposer(axis.on(\"end\", () => {\r\n                this._updateCursor();\r\n            }));\r\n        }\r\n    }\r\n    _handleAxisSelection(axis, force) {\r\n        let start = axis.fixPosition(axis.get(\"start\", 0));\r\n        let end = axis.fixPosition(axis.get(\"end\", 1));\r\n        if (start > end) {\r\n            [start, end] = [end, start];\r\n        }\r\n        if (this.xAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarX = this.get(\"scrollbarX\");\r\n                if (scrollbarX && (!scrollbarX.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarX.setRaw(\"start\", start);\r\n                    scrollbarX.setRaw(\"end\", end);\r\n                    scrollbarX.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        else if (this.yAxes.indexOf(axis) != -1) {\r\n            if (force || axis.getPrivate(\"updateScrollbar\")) {\r\n                let scrollbarY = this.get(\"scrollbarY\");\r\n                if (scrollbarY && (!scrollbarY.getPrivate(\"isBusy\") || force)) {\r\n                    scrollbarY.setRaw(\"start\", start);\r\n                    scrollbarY.setRaw(\"end\", end);\r\n                    scrollbarY.updateGrips();\r\n                }\r\n            }\r\n        }\r\n        this._handleZoomOut();\r\n    }\r\n    _handleZoomOut() {\r\n        let zoomOutButton = this.zoomOutButton;\r\n        if (zoomOutButton && zoomOutButton.parent) {\r\n            let visible = false;\r\n            this.xAxes.each((axis) => {\r\n                if (axis.get(\"zoomOut\", true)) {\r\n                    if ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\r\n                        visible = true;\r\n                    }\r\n                }\r\n            });\r\n            this.yAxes.each((axis) => {\r\n                if (axis.get(\"zoomOut\", true)) {\r\n                    if ($math.round(axis.get(\"start\", 0), 5) != 0 || $math.round(axis.get(\"end\", 1), 5) != 1) {\r\n                        visible = true;\r\n                    }\r\n                }\r\n            });\r\n            if (visible) {\r\n                if (zoomOutButton.isHidden()) {\r\n                    zoomOutButton.show();\r\n                }\r\n            }\r\n            else {\r\n                zoomOutButton.hide();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks if point is within plot area.\r\n     *\r\n     * @param   point  Reference point\r\n     * @return         Is within plot area?\r\n     */\r\n    inPlot(point) {\r\n        const plotContainer = this.plotContainer;\r\n        const otherCharts = this.getPrivate(\"otherCharts\", this._otherCharts);\r\n        const global = plotContainer.toGlobal(point);\r\n        if (point.x >= -0.5 && point.y >= -0.5 && point.x <= plotContainer.width() + 0.5 && point.y <= plotContainer.height() + 0.5) {\r\n            return true;\r\n        }\r\n        if (otherCharts) {\r\n            for (let i = otherCharts.length - 1; i >= 0; i--) {\r\n                const chart = otherCharts[i];\r\n                if (chart != this) {\r\n                    const chartPlotContainer = chart.plotContainer;\r\n                    const documentPoint = this._root.rootPointToDocument(global);\r\n                    const chartRoot = chart._root.documentPointToRoot(documentPoint);\r\n                    const local = chartPlotContainer.toLocal(chartRoot);\r\n                    if (local.x >= -0.1 && local.y >= -0.1 && local.x <= chartPlotContainer.width() + 0.1 && local.y <= chartPlotContainer.height() + 0.1) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    arrangeTooltips() {\r\n        const plotContainer = this.plotContainer;\r\n        const w = plotContainer.width();\r\n        const h = plotContainer.height();\r\n        let hh = this.height();\r\n        const bounds = this._root.tooltipContainer.get(\"layerMargin\");\r\n        if (bounds) {\r\n            if (bounds.bottom > hh) {\r\n                hh = bounds.bottom;\r\n            }\r\n        }\r\n        let plotT = plotContainer._display.toGlobal({ x: 0, y: 0 });\r\n        let plotB = plotContainer._display.toGlobal({ x: w, y: h });\r\n        const tooltips = [];\r\n        let sum = 0;\r\n        let minDistance = Infinity;\r\n        let movePoint = this._movePoint;\r\n        let maxTooltipDistance = this.get(\"maxTooltipDistance\");\r\n        let maxTooltipDistanceBy = this.get(\"maxTooltipDistanceBy\", \"xy\");\r\n        let closest;\r\n        let closestPoint;\r\n        if ($type.isNumber(maxTooltipDistance)) {\r\n            this.series.each((series) => {\r\n                if (!series.isHidden()) {\r\n                    const tooltip = series.get(\"tooltip\");\r\n                    if (tooltip) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point) {\r\n                            let distance = Math.hypot(movePoint.x - point.x, movePoint.y - point.y);\r\n                            if (maxTooltipDistanceBy == \"x\") {\r\n                                distance = Math.abs(movePoint.x - point.x);\r\n                            }\r\n                            else if (maxTooltipDistanceBy == \"y\") {\r\n                                distance = Math.abs(movePoint.y - point.y);\r\n                            }\r\n                            if (distance < minDistance) {\r\n                                minDistance = distance;\r\n                                closest = series;\r\n                                closestPoint = point;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        const tooltipSeries = [];\r\n        this.series.each((series) => {\r\n            const tooltip = series.get(\"tooltip\");\r\n            if (tooltip && !tooltip.get(\"forceHidden\")) {\r\n                let hidden = false;\r\n                let point = tooltip.get(\"pointTo\");\r\n                if (point) {\r\n                    if (maxTooltipDistance >= 0) {\r\n                        let point = tooltip.get(\"pointTo\");\r\n                        if (point && closestPoint) {\r\n                            if (series != closest) {\r\n                                let distance = Math.hypot(closestPoint.x - point.x, closestPoint.y - point.y);\r\n                                if (maxTooltipDistanceBy == \"x\") {\r\n                                    distance = Math.abs(closestPoint.x - point.x);\r\n                                }\r\n                                else if (maxTooltipDistanceBy == \"y\") {\r\n                                    distance = Math.abs(closestPoint.y - point.y);\r\n                                }\r\n                                if (distance > maxTooltipDistance) {\r\n                                    hidden = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (maxTooltipDistance == -1) {\r\n                        if (series != closest) {\r\n                            hidden = true;\r\n                        }\r\n                    }\r\n                    if (!this.inPlot(this._tooltipToLocal(point)) || !tooltip.dataItem) {\r\n                        hidden = true;\r\n                    }\r\n                    else {\r\n                        if (!hidden) {\r\n                            sum += point.y;\r\n                        }\r\n                    }\r\n                    if (hidden || series.isHidden() || series.isHiding()) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show();\r\n                        tooltips.push(tooltip);\r\n                        tooltipSeries.push(series);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.setPrivate(\"tooltipSeries\", tooltipSeries);\r\n        if (this.get(\"arrangeTooltips\")) {\r\n            let totalTooltipH = 0;\r\n            let tooltipCount = 0;\r\n            const tooltipContainer = this._root.tooltipContainer;\r\n            const count = tooltips.length;\r\n            const average = sum / count;\r\n            if (average > h / 2 + plotT.y) {\r\n                tooltips.sort((a, b) => $order.compareNumber(b.get(\"pointTo\").y, a.get(\"pointTo\").y));\r\n                let prevY = plotB.y;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    let height = tooltip.height();\r\n                    tooltipCount++;\r\n                    totalTooltipH += height;\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    tooltip.setPrivate(\"customData\", { left: plotT.x, top: plotT.y, right: plotB.x, bottom: prevY });\r\n                    prevY = Math.min(prevY - height, tooltip._fy - height);\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                });\r\n                if (prevY < 0) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = prevY;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        tooltipCount++;\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - prevY;\r\n                            let bottom = bounds.bottom - prevY;\r\n                            if (top < prevBottom) {\r\n                                top = prevBottom;\r\n                                bottom = top + tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bounds.bottom - prevY + tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                tooltips.reverse();\r\n                tooltips.sort((a, b) => $order.compareNumber(a.get(\"pointTo\").y, b.get(\"pointTo\").y));\r\n                let prevY = 0;\r\n                $array.each(tooltips, (tooltip) => {\r\n                    tooltipCount++;\r\n                    let height = tooltip.height();\r\n                    totalTooltipH += height;\r\n                    let centerY = tooltip.get(\"centerY\");\r\n                    if (centerY instanceof Percent) {\r\n                        height *= centerY.value;\r\n                    }\r\n                    height += tooltip.get(\"marginBottom\", 0);\r\n                    tooltip.set(\"bounds\", { left: plotT.x, top: prevY, right: plotB.x, bottom: Math.max(plotT.y + hh, prevY + height) });\r\n                    if (tooltip.parent == tooltipContainer) {\r\n                        tooltipContainer.children.moveValue(tooltip, 0);\r\n                    }\r\n                    prevY = Math.max(prevY + height, tooltip._fy + height);\r\n                });\r\n                if (prevY > hh) {\r\n                    tooltips.reverse();\r\n                    let prevBottom = hh;\r\n                    $array.each(tooltips, (tooltip) => {\r\n                        tooltipCount++;\r\n                        let bounds = tooltip.get(\"bounds\");\r\n                        if (bounds) {\r\n                            let top = bounds.top - (hh - prevY);\r\n                            let bottom = bounds.bottom - (hh - prevY);\r\n                            if (bottom > prevBottom) {\r\n                                bottom = prevBottom;\r\n                                top = bottom - tooltip.height();\r\n                            }\r\n                            tooltip.set(\"bounds\", { left: bounds.left, top: top, right: bounds.right, bottom: bottom });\r\n                            prevBottom = bottom - tooltip.height() - tooltip.get(\"marginBottom\", 0);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (totalTooltipH == 0 && tooltipCount > 0) {\r\n                this._disposers.push(this.root.events.once(\"frameended\", () => {\r\n                    this.arrangeTooltips();\r\n                }));\r\n            }\r\n        }\r\n    }\r\n    _tooltipToLocal(point) {\r\n        return this.plotContainer.toLocal(point);\r\n    }\r\n    /**\r\n     * Fully zooms out the chart.\r\n     */\r\n    zoomOut() {\r\n        this.xAxes.each((axis) => {\r\n            if (axis.get(\"zoomOut\", true)) {\r\n                axis.setPrivate(\"updateScrollbar\", true);\r\n                axis.zoom(0, 1);\r\n            }\r\n        });\r\n        this.yAxes.each((axis) => {\r\n            if (axis.get(\"zoomOut\", true)) {\r\n                axis.setPrivate(\"updateScrollbar\", true);\r\n                axis.zoom(0, 1);\r\n            }\r\n        });\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        // Explicitly disposing cursor to avoid memory leak of cursor adding\r\n        // keyboard events after parent chart has been disposed\r\n        const cursor = this.get(\"cursor\");\r\n        if (cursor) {\r\n            cursor.dispose();\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(XYChart, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYChart\"\r\n});\r\nObject.defineProperty(XYChart, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: SerialChart.classNames.concat([XYChart.className])\r\n});\r\n//# sourceMappingURL=XYChart.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\n/**\r\n * Creates an axis grid line.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Grid} for more info\r\n * @important\r\n */\r\nexport class Grid extends Graphics {\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\")) {\r\n            this._clear = true;\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(Grid, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Grid\"\r\n});\r\nObject.defineProperty(Grid, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([Grid.className])\r\n});\r\n//# sourceMappingURL=Grid.js.map","import { Container } from \"../../core/render/Container\";\r\nimport { p100 } from \"../../core/util/Percent\";\r\nimport { Graphics } from \"../../core/render/Graphics\";\r\nimport { Grid } from \"./axes/Grid\";\r\n//import { Animations } from \"../core/util/Animation\";\r\nimport * as $type from \"../../core/util/Type\";\r\nimport * as $utils from \"../../core/util/Utils\";\r\nimport * as $math from \"../../core/util/Math\";\r\nimport * as $array from \"../../core/util/Array\";\r\nimport * as $object from \"../../core/util/Object\";\r\n/**\r\n * Creates a chart cursor for an [[XYChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/} for more info\r\n * @important\r\n */\r\nexport class XYCursor extends Container {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_alwaysShow\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n         *\r\n         * @default Grid.new()\r\n         */\r\n        Object.defineProperty(this, \"lineX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Grid.new(this._root, {\r\n                themeTags: [\"x\"]\r\n            }))\r\n        });\r\n        /**\r\n         * A [[Grid]] elment that used for horizontal line of the cursor crosshair.\r\n         *\r\n         * @default Grid.new()\r\n         */\r\n        Object.defineProperty(this, \"lineY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Grid.new(this._root, {\r\n                themeTags: [\"y\"]\r\n            }))\r\n        });\r\n        /**\r\n         * An element that represents current selection.\r\n         *\r\n         * @default Graphics.new()\r\n         */\r\n        Object.defineProperty(this, \"selection\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, {\r\n                themeTags: [\"selection\", \"cursor\"], layer: 30\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_movePoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_lastPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_lastPoint2\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: { x: 0, y: 0 }\r\n        });\r\n        Object.defineProperty(this, \"_tooltipX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_tooltipY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A chart cursor is attached to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_toX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_toY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"xy\", \"cursor\"]);\r\n        super._afterNew();\r\n        this.setAll({ \"width\": p100, height: p100, isMeasured: true, position: \"absolute\" });\r\n        this.states.create(\"hidden\", { visible: true, opacity: 0 });\r\n        this._drawLines();\r\n        this.setPrivateRaw(\"visible\", false);\r\n        this._disposers.push(this.setTimeout(() => {\r\n            this.setPrivate(\"visible\", true);\r\n        }, 500));\r\n        this._disposers.push(this.lineX.events.on(\"positionchanged\", () => {\r\n            this._handleXLine();\r\n        }));\r\n        this._disposers.push(this.lineY.events.on(\"positionchanged\", () => {\r\n            this._handleYLine();\r\n        }));\r\n        this._disposers.push(this.lineX.events.on(\"focus\", () => this._handleLineFocus()));\r\n        this._disposers.push(this.lineX.events.on(\"blur\", () => this._handleLineBlur()));\r\n        this._disposers.push(this.lineY.events.on(\"focus\", () => this._handleLineFocus()));\r\n        this._disposers.push(this.lineY.events.on(\"blur\", () => this._handleLineBlur()));\r\n        if ($utils.supports(\"keyboardevents\")) {\r\n            this._disposers.push($utils.addEventListener(document, \"keydown\", (ev) => {\r\n                this._handleLineMove($utils.getEventKey(ev), ev.ctrlKey);\r\n            }));\r\n        }\r\n    }\r\n    _setUpTouch() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart.plotContainer._display.cancelTouch = this.get(\"behavior\") != \"none\" ? true : false;\r\n        }\r\n    }\r\n    _handleXLine() {\r\n        let x = this.lineX.x();\r\n        let visible = true;\r\n        if (x < 0 || x > this.width()) {\r\n            visible = false;\r\n        }\r\n        this.lineX.setPrivate(\"visible\", visible);\r\n    }\r\n    _handleYLine() {\r\n        let y = this.lineY.y();\r\n        let visible = true;\r\n        if (y < 0 || y > this.height()) {\r\n            visible = false;\r\n        }\r\n        this.lineY.setPrivate(\"visible\", visible);\r\n    }\r\n    _handleLineMove(key, ctrlKey) {\r\n        let dir = \"\";\r\n        const chart = this.chart;\r\n        let axis;\r\n        if (chart && chart.xAxes.length) {\r\n            if (this._root.focused(this.lineX)) {\r\n                dir = \"positionX\";\r\n                axis = chart.xAxes.getIndex(0);\r\n            }\r\n            else if (this._root.focused(this.lineY)) {\r\n                axis = chart.yAxes.getIndex(0);\r\n                dir = \"positionY\";\r\n            }\r\n            let m = 1;\r\n            if (ctrlKey) {\r\n                m = 5;\r\n            }\r\n            if (axis) {\r\n                let inversed = axis.get(\"renderer\").get(\"inversed\", false);\r\n                let step;\r\n                if (key == \"ArrowRight\" || key == \"ArrowDown\") {\r\n                    step = 1;\r\n                }\r\n                else if (key == \"ArrowLeft\" || key == \"ArrowUp\") {\r\n                    step = -1;\r\n                }\r\n                else if (key == \"Tab\") {\r\n                    step = 0;\r\n                }\r\n                if (step != null) {\r\n                    if (inversed) {\r\n                        step *= -1;\r\n                    }\r\n                    this.set(dir, axis.nextPosition(step * m));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleLineFocus() {\r\n        this._alwaysShow = this.get(\"alwaysShow\", false);\r\n        this.setAll({\r\n            positionX: this.getPrivate(\"positionX\", 0),\r\n            positionY: this.getPrivate(\"positionY\", 0),\r\n            alwaysShow: true\r\n        });\r\n        this._handleLineMove(\"Tab\");\r\n    }\r\n    _handleLineBlur() {\r\n        if (this.lineX.isFocus() || this.lineY.isFocus()) {\r\n            this.setAll({\r\n                positionX: undefined,\r\n                positionY: undefined,\r\n                alwaysShow: this._alwaysShow\r\n            });\r\n        }\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"xAxis\")) {\r\n            this._tooltipX = false;\r\n            const xAxis = this.get(\"xAxis\");\r\n            if (xAxis) {\r\n                const tooltip = xAxis.get(\"tooltip\");\r\n                if (tooltip) {\r\n                    this._tooltipX = true;\r\n                    this._disposers.push(tooltip.on(\"pointTo\", () => {\r\n                        this._updateXLine(tooltip);\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n        if (this.isDirty(\"yAxis\")) {\r\n            this._tooltipY = false;\r\n            const yAxis = this.get(\"yAxis\");\r\n            if (yAxis) {\r\n                const tooltip = yAxis.get(\"tooltip\");\r\n                if (tooltip) {\r\n                    this._tooltipY = true;\r\n                    this._disposers.push(tooltip.on(\"pointTo\", () => {\r\n                        this._updateYLine(tooltip);\r\n                    }));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleSyncWith() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            const syncWith = this.get(\"syncWith\");\r\n            const otherCharts = [];\r\n            if (syncWith) {\r\n                $array.each(syncWith, (cursor) => {\r\n                    const chart = cursor.chart;\r\n                    if (chart) {\r\n                        otherCharts.push(chart);\r\n                    }\r\n                });\r\n            }\r\n            chart._otherCharts = otherCharts;\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        this._handleSyncWith();\r\n        if (this.isDirty(\"positionX\") || this.isDirty(\"positionY\")) {\r\n            const positionX = this.get(\"positionX\");\r\n            const positionY = this.get(\"positionY\");\r\n            if (positionX == null && positionY == null) {\r\n                this.hide(0);\r\n            }\r\n            else {\r\n                this._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\r\n                this.handleMove();\r\n            }\r\n        }\r\n    }\r\n    _updateXLine(tooltip) {\r\n        let x = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).x, 3);\r\n        if (this._toX != x) {\r\n            this.lineX.animate({ key: \"x\", to: x, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\r\n            this._toX = x;\r\n        }\r\n    }\r\n    _updateYLine(tooltip) {\r\n        let y = $math.round(this._display.toLocal(tooltip.get(\"pointTo\", { x: 0, y: 0 })).y, 3);\r\n        if (this._toY != y) {\r\n            this.lineY.animate({ key: \"y\", to: y, duration: tooltip.get(\"animationDuration\", 0), easing: tooltip.get(\"animationEasing\") });\r\n            this._toY = y;\r\n        }\r\n    }\r\n    _drawLines() {\r\n        this.lineX.set(\"draw\", (display) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, this.height());\r\n        });\r\n        this.lineY.set(\"draw\", (display) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(this.width(), 0);\r\n        });\r\n    }\r\n    updateCursor() {\r\n        if (this.get(\"alwaysShow\")) {\r\n            this._movePoint = this.toGlobal(this._getPoint(this.get(\"positionX\", 0), this.get(\"positionY\", 0)));\r\n        }\r\n        this.handleMove();\r\n    }\r\n    _setChart(chart) {\r\n        this.chart = chart;\r\n        this._handleSyncWith();\r\n        const plotContainer = chart.plotContainer;\r\n        this.events.on(\"boundschanged\", () => {\r\n            this._disposers.push(this.setTimeout(() => {\r\n                this.updateCursor();\r\n            }, 50));\r\n        });\r\n        //this._display.interactive = true;\r\n        if ($utils.supports(\"touchevents\")) {\r\n            this._disposers.push(plotContainer.events.on(\"click\", (event) => {\r\n                if ($utils.isTouchEvent(event.originalEvent)) {\r\n                    this._handleMove(event);\r\n                }\r\n            }));\r\n            this._setUpTouch();\r\n        }\r\n        this._disposers.push(plotContainer.events.on(\"pointerdown\", (event) => {\r\n            this._handleCursorDown(event);\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointerup\", (event) => {\r\n            this._handleCursorUp(event);\r\n            if (!event.native && !this.isHidden()) {\r\n                this._handleMove(event);\r\n            }\r\n        }));\r\n        this._disposers.push(plotContainer.events.on(\"globalpointermove\", (event) => {\r\n            if (!this.get(\"syncWith\")) {\r\n                if ($object.keys(plotContainer._downPoints).length == 0 && !event.native && this.isHidden()) {\r\n                    // Ignore mouse movement if it originates on outside element and\r\n                    // we're not dragging.\r\n                    return;\r\n                }\r\n            }\r\n            this._handleMove(event);\r\n            if (Math.hypot(this._lastPoint2.x - event.point.x, this._lastPoint2.y - event.point.y) > 1) {\r\n                this._handleLineBlur();\r\n                this._lastPoint2 = event.point;\r\n            }\r\n        }));\r\n        const parent = this.parent;\r\n        if (parent) {\r\n            parent.children.moveValue(this.selection);\r\n        }\r\n    }\r\n    _inPlot(point) {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            return chart.inPlot(point);\r\n        }\r\n        return false;\r\n    }\r\n    _handleCursorDown(event) {\r\n        if (event.originalEvent.button == 2) {\r\n            return;\r\n        }\r\n        const rootPoint = event.point;\r\n        let local = this._display.toLocal(rootPoint);\r\n        const chart = this.chart;\r\n        this.selection.set(\"draw\", () => { });\r\n        if (chart && this._inPlot(local)) {\r\n            this._downPoint = local;\r\n            if (this.get(\"behavior\") != \"none\") {\r\n                this.selection.show();\r\n                const type = \"selectstarted\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                }\r\n            }\r\n            let positionX = this._getPosition(local).x;\r\n            let positionY = this._getPosition(local).y;\r\n            this.setPrivate(\"downPositionX\", positionX);\r\n            this.setPrivate(\"downPositionY\", positionY);\r\n        }\r\n    }\r\n    _handleCursorUp(event) {\r\n        // TODO: handle multitouch\r\n        if (this._downPoint) {\r\n            const behavior = this.get(\"behavior\", \"none\");\r\n            if (behavior != \"none\") {\r\n                if (behavior.charAt(0) === \"z\") {\r\n                    this.selection.hide();\r\n                }\r\n                const rootPoint = event.point;\r\n                let local = this._display.toLocal(rootPoint);\r\n                const downPoint = this._downPoint;\r\n                const moveThreshold = this.get(\"moveThreshold\", 1);\r\n                if (local && downPoint) {\r\n                    let dispatch = false;\r\n                    if (behavior === \"zoomX\" || behavior === \"zoomXY\" || behavior === \"selectX\" || behavior === \"selectXY\") {\r\n                        if (Math.abs(local.x - downPoint.x) > moveThreshold) {\r\n                            dispatch = true;\r\n                        }\r\n                    }\r\n                    if (behavior === \"zoomY\" || behavior === \"zoomXY\" || behavior === \"selectY\" || behavior === \"selectXY\") {\r\n                        if (Math.abs(local.y - downPoint.y) > moveThreshold) {\r\n                            dispatch = true;\r\n                        }\r\n                    }\r\n                    if (dispatch) {\r\n                        const type = \"selectended\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                        }\r\n                    }\r\n                    else {\r\n                        const type = \"selectcancelled\";\r\n                        if (this.events.isEnabled(type)) {\r\n                            this.events.dispatch(type, { type: type, target: this, originalEvent: event.originalEvent });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._downPoint = undefined;\r\n    }\r\n    _handleMove(event) {\r\n        if (this.getPrivate(\"visible\")) {\r\n            const chart = this.chart;\r\n            if (chart && $object.keys(chart.plotContainer._downPoints).length > 1) {\r\n                this.set(\"forceHidden\", true);\r\n                return;\r\n            }\r\n            else {\r\n                this.set(\"forceHidden\", false);\r\n            }\r\n            // TODO: handle multitouch\r\n            const rootPoint = event.point;\r\n            const lastPoint = this._lastPoint;\r\n            if (Math.round(lastPoint.x) === Math.round(rootPoint.x) && Math.round(lastPoint.y) === Math.round(rootPoint.y)) {\r\n                return;\r\n            }\r\n            this._lastPoint = rootPoint;\r\n            this.setPrivate(\"lastPoint\", rootPoint);\r\n            this.handleMove({ x: rootPoint.x, y: rootPoint.y }, false, event.originalEvent);\r\n        }\r\n    }\r\n    _getPosition(point) {\r\n        return { x: point.x / this.width(), y: point.y / this.height() };\r\n    }\r\n    /**\r\n     * Moves the cursor to X/Y coordinates within chart container (`point`).\r\n     *\r\n     * If `skipEvent` parameter is set to `true`, the move will not invoke\r\n     * the `\"cursormoved\"` event.\r\n     *\r\n     * @param  point      X/Y to move cursor to\r\n     * @param  skipEvent  Do not fire \"cursormoved\" event\r\n     */\r\n    handleMove(point, skipEvent, originalEvent) {\r\n        if (!point) {\r\n            point = this._movePoint;\r\n        }\r\n        const alwaysShow = this.get(\"alwaysShow\");\r\n        if (!point) {\r\n            this.hide(0);\r\n            return;\r\n        }\r\n        this._movePoint = point;\r\n        let local = this._display.toLocal(point);\r\n        let chart = this.chart;\r\n        if (chart && (this._inPlot(local) || this._downPoint)) {\r\n            chart._movePoint = point;\r\n            if (this.isHidden()) {\r\n                this.show();\r\n                const behavior = this.get(\"behavior\", \"\");\r\n                if (behavior.charAt(0) == \"z\") {\r\n                    this.selection.set(\"draw\", () => { });\r\n                }\r\n            }\r\n            let x = local.x;\r\n            let y = local.y;\r\n            let xyPos = this._getPosition(local);\r\n            this.setPrivate(\"point\", local);\r\n            let snapToSeries = this.get(\"snapToSeries\");\r\n            if (this._downPoint) {\r\n                snapToSeries = undefined;\r\n            }\r\n            let userPositionX = this.get(\"positionX\");\r\n            let positionX = xyPos.x;\r\n            if ($type.isNumber(userPositionX)) {\r\n                positionX = userPositionX;\r\n            }\r\n            let userPositionY = this.get(\"positionY\");\r\n            let positionY = xyPos.y;\r\n            if ($type.isNumber(userPositionY)) {\r\n                positionY = userPositionY;\r\n            }\r\n            this.setPrivate(\"positionX\", positionX);\r\n            this.setPrivate(\"positionY\", positionY);\r\n            const xy = this._getPoint(positionX, positionY);\r\n            x = xy.x;\r\n            y = xy.y;\r\n            chart.xAxes.each((axis) => {\r\n                axis._handleCursorPosition(positionX, snapToSeries);\r\n                if (alwaysShow) {\r\n                    axis.handleCursorShow();\r\n                }\r\n            });\r\n            chart.yAxes.each((axis) => {\r\n                axis._handleCursorPosition(positionY, snapToSeries);\r\n                if (alwaysShow) {\r\n                    axis.handleCursorShow();\r\n                }\r\n            });\r\n            if (!skipEvent) {\r\n                chart._handleCursorPosition();\r\n                const type = \"cursormoved\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this, point: point, originalEvent: originalEvent });\r\n                }\r\n            }\r\n            this._updateLines(x, y);\r\n            chart.arrangeTooltips();\r\n        }\r\n        else if (!this._downPoint) {\r\n            if (!alwaysShow) {\r\n                this.hide(0);\r\n                const type = \"cursorhidden\";\r\n                if (this.events.isEnabled(type)) {\r\n                    this.events.dispatch(type, { type: type, target: this });\r\n                }\r\n            }\r\n        }\r\n        if (this._downPoint && this.get(\"behavior\") != \"none\") {\r\n            this._updateSelection(local);\r\n        }\r\n    }\r\n    _getPoint(positionX, positionY) {\r\n        return { x: this.width() * positionX, y: this.height() * positionY };\r\n    }\r\n    _updateLines(x, y) {\r\n        if (!this._tooltipX) {\r\n            this.lineX.set(\"x\", x);\r\n        }\r\n        if (!this._tooltipY) {\r\n            this.lineY.set(\"y\", y);\r\n        }\r\n        this._drawLines();\r\n    }\r\n    _updateSelection(point) {\r\n        const selection = this.selection;\r\n        const behavior = this.get(\"behavior\");\r\n        const w = this.width();\r\n        const h = this.height();\r\n        if (point.x < 0) {\r\n            point.x = 0;\r\n        }\r\n        if (point.x > w) {\r\n            point.x = w;\r\n        }\r\n        if (point.y < 0) {\r\n            point.y = 0;\r\n        }\r\n        if (point.y > h) {\r\n            point.y = h;\r\n        }\r\n        selection.set(\"draw\", (display) => {\r\n            const downPoint = this._downPoint;\r\n            if (downPoint) {\r\n                if (behavior === \"zoomXY\" || behavior === \"selectXY\") {\r\n                    display.moveTo(downPoint.x, downPoint.y);\r\n                    display.lineTo(downPoint.x, point.y);\r\n                    display.lineTo(point.x, point.y);\r\n                    display.lineTo(point.x, downPoint.y);\r\n                    display.lineTo(downPoint.x, downPoint.y);\r\n                }\r\n                else if (behavior === \"zoomX\" || behavior === \"selectX\") {\r\n                    display.moveTo(downPoint.x, 0);\r\n                    display.lineTo(downPoint.x, h);\r\n                    display.lineTo(point.x, h);\r\n                    display.lineTo(point.x, 0);\r\n                    display.lineTo(downPoint.x, 0);\r\n                }\r\n                else if (behavior === \"zoomY\" || behavior === \"selectY\") {\r\n                    display.moveTo(0, downPoint.y);\r\n                    display.lineTo(w, downPoint.y);\r\n                    display.lineTo(w, point.y);\r\n                    display.lineTo(0, point.y);\r\n                    display.lineTo(0, downPoint.y);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    _onHide() {\r\n        if (this.isHidden()) {\r\n            let chart = this.chart;\r\n            if (chart) {\r\n                chart.xAxes.each((axis) => {\r\n                    axis.handleCursorHide();\r\n                });\r\n                chart.yAxes.each((axis) => {\r\n                    axis.handleCursorHide();\r\n                });\r\n                chart.series.each((series) => {\r\n                    series.handleCursorHide();\r\n                });\r\n            }\r\n        }\r\n        super._onHide();\r\n    }\r\n    _onShow() {\r\n        if (!this.isHidden()) {\r\n            let chart = this.chart;\r\n            if (chart) {\r\n                chart.xAxes.each((axis) => {\r\n                    axis.handleCursorShow();\r\n                });\r\n                chart.yAxes.each((axis) => {\r\n                    axis.handleCursorShow();\r\n                });\r\n            }\r\n        }\r\n        super._onShow();\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this.selection.dispose();\r\n    }\r\n}\r\nObject.defineProperty(XYCursor, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYCursor\"\r\n});\r\nObject.defineProperty(XYCursor, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Container.classNames.concat([XYCursor.className])\r\n});\r\n//# sourceMappingURL=XYCursor.js.map","import { __awaiter } from \"tslib\";\r\nimport { DataItem } from \"../../../core/render/Component\";\r\nimport { Series } from \"../../../core/render/Series\";\r\nimport { List } from \"../../../core/util/List\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $object from \"../../../core/util/Object\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * @ignore\r\n */\r\nfunction min(left, right) {\r\n    if (left == null)\r\n        return right;\r\n    if (right == null)\r\n        return left;\r\n    return (right < left) ? right : left;\r\n}\r\n/**\r\n * @ignore\r\n */\r\nfunction max(left, right) {\r\n    if (left == null)\r\n        return right;\r\n    if (right == null)\r\n        return left;\r\n    return (left > right) ? left : right;\r\n}\r\n/**\r\n * A base class for all XY chart series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/} for more info\r\n */\r\nexport class XYSeries extends Series {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_xField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xOpenField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yOpenField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xLowField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_xHighField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yLowField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_yHighField\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_axesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_stackDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_selectionProcessed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dataSets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_mainContainerMask\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_x\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_y\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        /**\r\n         * A [[Container]] that us used to put series' elements in.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"mainContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A list of axis ranges that affect the series.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n         */\r\n        Object.defineProperty(this, \"axisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        Object.defineProperty(this, \"_skipped\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_couldStackTo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_reallyStackedTo\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_stackedSeries\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n        Object.defineProperty(this, \"_aLocationX0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_aLocationX1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_aLocationY0\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_aLocationY1\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_showBullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: true\r\n        });\r\n        Object.defineProperty(this, \"valueXFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"valueX\",\r\n                \"openValueX\",\r\n                \"lowValueX\",\r\n                \"highValueX\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"valueYFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [\r\n                \"valueY\",\r\n                \"openValueY\",\r\n                \"lowValueY\",\r\n                \"highValueY\"\r\n            ]\r\n        });\r\n        Object.defineProperty(this, \"_valueXFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueYFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // used for full min/max\r\n        Object.defineProperty(this, \"_valueXShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_valueYShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        // used for selection (uses working)\r\n        Object.defineProperty(this, \"__valueXShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"__valueYShowFields\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_emptyDataItem\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new DataItem(this, undefined, {})\r\n        });\r\n        Object.defineProperty(this, \"_dataSetId\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipFieldX\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_tooltipFieldY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_posXDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_posYDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this.fields.push(\"categoryX\", \"categoryY\", \"openCategoryX\", \"openCategoryY\");\r\n        this.valueFields.push(\"valueX\", \"valueY\", \"openValueX\", \"openValueY\", \"lowValueX\", \"lowValueY\", \"highValueX\", \"highValueY\");\r\n        this._setRawDefault(\"vcx\", 1);\r\n        this._setRawDefault(\"vcy\", 1);\r\n        // this can't go to themes, as data might be parsed before theme\r\n        this._setRawDefault(\"valueXShow\", \"valueXWorking\");\r\n        this._setRawDefault(\"valueYShow\", \"valueYWorking\");\r\n        this._setRawDefault(\"openValueXShow\", \"openValueXWorking\");\r\n        this._setRawDefault(\"openValueYShow\", \"openValueYWorking\");\r\n        this._setRawDefault(\"lowValueXShow\", \"lowValueXWorking\");\r\n        this._setRawDefault(\"lowValueYShow\", \"lowValueYWorking\");\r\n        this._setRawDefault(\"highValueXShow\", \"highValueXWorking\");\r\n        this._setRawDefault(\"highValueYShow\", \"highValueYWorking\");\r\n        this._setRawDefault(\"lowValueXGrouped\", \"low\");\r\n        this._setRawDefault(\"lowValueYGrouped\", \"low\");\r\n        this._setRawDefault(\"highValueXGrouped\", \"high\");\r\n        this._setRawDefault(\"highValueYGrouped\", \"high\");\r\n        super._afterNew();\r\n        this.set(\"maskContent\", true);\r\n        this._disposers.push(this.axisRanges.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (axisRange) => {\r\n                    this._removeAxisRange(axisRange);\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._processAxisRange(change.newValue);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this._removeAxisRange(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._processAxisRange(change.value);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n        }));\r\n        this.states.create(\"hidden\", { opacity: 1, visible: false });\r\n        this.onPrivate(\"startIndex\", () => {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.updateLegendValue();\r\n            });\r\n        });\r\n        this.onPrivate(\"endIndex\", () => {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.updateLegendValue();\r\n            });\r\n        });\r\n        this._makeFieldNames();\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        const container = Container.new(this._root, {});\r\n        axisRange.container = container;\r\n        this.children.push(container);\r\n        axisRange.series = this;\r\n        const axisDataItem = axisRange.axisDataItem;\r\n        axisDataItem.setRaw(\"isRange\", true);\r\n        const axis = axisDataItem.component;\r\n        if (axis) {\r\n            axis._processAxisRange(axisDataItem, [\"range\", \"series\"]);\r\n            const bullet = axisDataItem.get(\"bullet\");\r\n            if (bullet) {\r\n                const sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    sprite.setPrivate(\"visible\", false);\r\n                }\r\n            }\r\n            const axisFill = axisDataItem.get(\"axisFill\");\r\n            if (axisFill) {\r\n                container.set(\"mask\", axisFill);\r\n            }\r\n            axis._seriesAxisRanges.push(axisDataItem);\r\n        }\r\n    }\r\n    _onDataClear() {\r\n        super._onDataClear();\r\n        $object.each(this._dataSets, (_key, dataItems) => {\r\n            $array.each(dataItems, (dataItem) => {\r\n                dataItem.dispose();\r\n            });\r\n            dataItems.length = 0;\r\n        });\r\n    }\r\n    _removeAxisRange(axisRange) {\r\n        const axisDataItem = axisRange.axisDataItem;\r\n        const axis = axisDataItem.component;\r\n        axisDataItem.dispose();\r\n        $array.remove(axis._seriesAxisRanges, axisDataItem);\r\n        const container = axisRange.container;\r\n        if (container) {\r\n            container.dispose();\r\n        }\r\n    }\r\n    _updateFields() {\r\n        super._updateFields();\r\n        this._valueXFields = [];\r\n        this._valueYFields = [];\r\n        this._valueXShowFields = [];\r\n        this._valueYShowFields = [];\r\n        this.__valueXShowFields = [];\r\n        this.__valueYShowFields = [];\r\n        if (this.valueXFields) {\r\n            $array.each(this.valueXFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueXFields.push(key);\r\n                    let field = this.get((key + \"Show\"));\r\n                    this.__valueXShowFields.push(field);\r\n                    if (field.indexOf(\"Working\") != -1) {\r\n                        this._valueXShowFields.push(field.split(\"Working\")[0]);\r\n                    }\r\n                    else {\r\n                        this._valueXShowFields.push(field);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (this.valueYFields) {\r\n            $array.each(this.valueYFields, (key) => {\r\n                const field = this.get((key + \"Field\"));\r\n                if (field) {\r\n                    this._valueYFields.push(key);\r\n                    let field = this.get((key + \"Show\"));\r\n                    this.__valueYShowFields.push(field);\r\n                    if (field.indexOf(\"Working\") != -1) {\r\n                        this._valueYShowFields.push(field.split(\"Working\")[0]);\r\n                    }\r\n                    else {\r\n                        this._valueYShowFields.push(field);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _dispose() {\r\n        super._dispose();\r\n        this._bullets = {};\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart.series.removeValue(this);\r\n        }\r\n        $array.removeFirst(this.get(\"xAxis\").series, this);\r\n        $array.removeFirst(this.get(\"yAxis\").series, this);\r\n    }\r\n    // TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\r\n    _min(key, value) {\r\n        let newValue = min(this.getPrivate(key), value);\r\n        this.setPrivate(key, newValue);\r\n    }\r\n    // TODO use  SelectKeys<this[\"_privateSettings\"], number | undefined>\r\n    _max(key, value) {\r\n        let newValue = max(this.getPrivate(key), value);\r\n        this.setPrivate(key, newValue);\r\n    }\r\n    _shouldMakeBullet(dataItem) {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        if (!xAxis.inited || !yAxis.inited) {\r\n            return false;\r\n        }\r\n        const minBulletDistance = this.get(\"minBulletDistance\", 0);\r\n        if (minBulletDistance > 0) {\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            let count = endIndex - startIndex;\r\n            if (xAxis == baseAxis) {\r\n                if (xAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\r\n                    return false;\r\n                }\r\n            }\r\n            else if (yAxis == baseAxis) {\r\n                if (yAxis.get(\"renderer\").axisLength() / count < minBulletDistance / 5) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        if (dataItem.get(this._xField) != null && dataItem.get(this._yField) != null) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    _makeFieldNames() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const xName = xAxis.getPrivate(\"name\");\r\n        const xCapName = $utils.capitalizeFirst(xName);\r\n        const yName = yAxis.getPrivate(\"name\");\r\n        const yCapName = $utils.capitalizeFirst(yName);\r\n        const xLetter = xAxis.get(\"renderer\").getPrivate(\"letter\");\r\n        const yLetter = yAxis.get(\"renderer\").getPrivate(\"letter\");\r\n        const open = \"open\";\r\n        const low = \"low\";\r\n        const high = \"high\";\r\n        const show = \"Show\";\r\n        if (xAxis.className === \"ValueAxis\") {\r\n            this._xField = this.get((xName + xLetter + show));\r\n            this._xOpenField = this.get((open + xCapName + xLetter + show));\r\n            this._xLowField = this.get((low + xCapName + xLetter + show));\r\n            this._xHighField = this.get((high + xCapName + xLetter + show));\r\n        }\r\n        else {\r\n            this._xField = (xName + xLetter);\r\n            this._xOpenField = (open + xCapName + xLetter);\r\n            this._xLowField = (low + xCapName + xLetter);\r\n            this._xHighField = (high + xCapName + xLetter);\r\n        }\r\n        if (yAxis.className === \"ValueAxis\") {\r\n            this._yField = this.get((yName + yLetter + show));\r\n            this._yOpenField = this.get((open + yCapName + yLetter + show));\r\n            this._yLowField = this.get((low + yCapName + yLetter + show));\r\n            this._yHighField = this.get((high + yCapName + yLetter + show));\r\n        }\r\n        else {\r\n            this._yField = (yName + yLetter);\r\n            this._yOpenField = (open + yCapName + yLetter);\r\n            this._yLowField = (low + yCapName + yLetter);\r\n            this._yHighField = (high + yCapName + yLetter);\r\n        }\r\n    }\r\n    _fixVC() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const hiddenState = this.states.lookup(\"hidden\");\r\n        const sequencedInterpolation = this.get(\"sequencedInterpolation\");\r\n        if (hiddenState) {\r\n            let value = 0;\r\n            if (sequencedInterpolation) {\r\n                value = 0.999999999999; // makes animate, good for stacked\r\n            }\r\n            if (xAxis === baseAxis) {\r\n                hiddenState.set(\"vcy\", value);\r\n            }\r\n            else if (yAxis === baseAxis) {\r\n                hiddenState.set(\"vcx\", value);\r\n            }\r\n            else {\r\n                hiddenState.set(\"vcy\", value);\r\n                hiddenState.set(\"vcx\", value);\r\n            }\r\n        }\r\n    }\r\n    _handleMaskBullets() {\r\n        if (this.isDirty(\"maskBullets\")) {\r\n            this.bulletsContainer.set(\"maskContent\", this.get(\"maskBullets\"));\r\n        }\r\n    }\r\n    _fixPosition() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        this.set(\"x\", xAxis.x() - $utils.relativeToValue(xAxis.get(\"centerX\", 0), xAxis.width()) - xAxis.parent.get(\"paddingLeft\", 0));\r\n        this.set(\"y\", yAxis.y() - $utils.relativeToValue(yAxis.get(\"centerY\", 0), yAxis.height()) - yAxis.parent.get(\"paddingTop\", 0));\r\n        this.bulletsContainer.set(\"y\", this.y());\r\n        this.bulletsContainer.set(\"x\", this.x());\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        this._bullets = {};\r\n        if (this.isDirty(\"valueYShow\") || this.isDirty(\"valueXShow\") || this.isDirty(\"openValueYShow\") || this.isDirty(\"openValueXShow\") || this.isDirty(\"lowValueYShow\") || this.isDirty(\"lowValueXShow\") || this.isDirty(\"highValueYShow\") || this.isDirty(\"highValueXShow\")) {\r\n            this._updateFields();\r\n            this._makeFieldNames();\r\n            this._valuesDirty = true;\r\n        }\r\n        if (this.isDirty(\"xAxis\") || this.isDirty(\"yAxis\")) {\r\n            this._valuesDirty = true;\r\n        }\r\n        this.set(\"width\", this.get(\"xAxis\").width());\r\n        this.set(\"height\", this.get(\"yAxis\").height());\r\n        this._handleMaskBullets();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const tooltipPositionX = this.get(\"tooltipPositionX\");\r\n        let tooltipFieldX;\r\n        switch (tooltipPositionX) {\r\n            case \"open\":\r\n                tooltipFieldX = this._xOpenField;\r\n                break;\r\n            case \"low\":\r\n                tooltipFieldX = this._xLowField;\r\n                break;\r\n            case \"high\":\r\n                tooltipFieldX = this._xHighField;\r\n                break;\r\n            default:\r\n                tooltipFieldX = this._xField;\r\n        }\r\n        this._tooltipFieldX = tooltipFieldX;\r\n        const tooltipPositionY = this.get(\"tooltipPositionY\");\r\n        let tooltipFieldY;\r\n        switch (tooltipPositionY) {\r\n            case \"open\":\r\n                tooltipFieldY = this._yOpenField;\r\n                break;\r\n            case \"low\":\r\n                tooltipFieldY = this._yLowField;\r\n                break;\r\n            case \"high\":\r\n                tooltipFieldY = this._yHighField;\r\n                break;\r\n            default:\r\n                tooltipFieldY = this._yField;\r\n        }\r\n        this._tooltipFieldY = tooltipFieldY;\r\n        if (this.isDirty(\"baseAxis\")) {\r\n            this._fixVC();\r\n        }\r\n        this._fixPosition();\r\n        const stacked = this.get(\"stacked\");\r\n        if (this.isDirty(\"stacked\")) {\r\n            if (stacked) {\r\n                if (this._valuesDirty && !this._dataProcessed) {\r\n                }\r\n                else {\r\n                    this._stack();\r\n                }\r\n            }\r\n            else {\r\n                this._unstack();\r\n            }\r\n        }\r\n        if (this._valuesDirty && !this._dataProcessed) {\r\n            this._dataProcessed = true;\r\n            if (stacked) {\r\n                this._stack();\r\n            }\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                $array.each(this._valueXShowFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        if (stacked) {\r\n                            value += this.getStackedXValue(dataItem, key);\r\n                        }\r\n                        this._min(\"minX\", value);\r\n                        this._max(\"maxX\", value);\r\n                    }\r\n                });\r\n                $array.each(this._valueYShowFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        if (stacked) {\r\n                            value += this.getStackedYValue(dataItem, key);\r\n                        }\r\n                        this._min(\"minY\", value);\r\n                        this._max(\"maxY\", value);\r\n                    }\r\n                });\r\n                xAxis.processSeriesDataItem(dataItem, this._valueXFields);\r\n                yAxis.processSeriesDataItem(dataItem, this._valueYFields);\r\n            });\r\n            xAxis._seriesValuesDirty = true;\r\n            yAxis._seriesValuesDirty = true;\r\n            if (!this.get(\"ignoreMinMax\")) {\r\n                if (this.isPrivateDirty(\"minX\") || this.isPrivateDirty(\"maxX\")) {\r\n                    xAxis.markDirtyExtremes();\r\n                }\r\n                if (this.isPrivateDirty(\"minY\") || this.isPrivateDirty(\"maxY\")) {\r\n                    yAxis.markDirtyExtremes();\r\n                }\r\n            }\r\n            this._markStakedDirtyStack();\r\n            //this.updateLegendMarker(undefined); // causes legend marker to change color instantly when on\r\n            if (!this.get(\"tooltipDataItem\")) {\r\n                this.updateLegendValue(undefined);\r\n            }\r\n        }\r\n        if (this.isDirty(\"vcx\") || this.isDirty(\"vcy\")) {\r\n            this._markStakedDirtyStack();\r\n        }\r\n        if (!this._dataGrouped) {\r\n            xAxis._groupSeriesData(this);\r\n            yAxis._groupSeriesData(this);\r\n            this._dataGrouped = true;\r\n        }\r\n        if (this._valuesDirty || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"adjustedStartIndex\") || this.isPrivateDirty(\"endIndex\") || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._stackDirty || this._sizeDirty) {\r\n            let startIndex = this.startIndex();\r\n            let endIndex = this.endIndex();\r\n            let minBulletDistance = this.get(\"minBulletDistance\", 0);\r\n            if (minBulletDistance > 0 && baseAxis) {\r\n                if (baseAxis.get(\"renderer\").axisLength() / (endIndex - startIndex) > minBulletDistance) {\r\n                    this._showBullets = true;\r\n                }\r\n                else {\r\n                    this._showBullets = false;\r\n                }\r\n            }\r\n            if ((this._psi != startIndex || this._pei != endIndex || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this.isPrivateDirty(\"adjustedStartIndex\") || this._stackDirty || this._valuesDirty) && !this._selectionProcessed) {\r\n                this._selectionProcessed = true;\r\n                const vcx = this.get(\"vcx\", 1);\r\n                const vcy = this.get(\"vcy\", 1);\r\n                const stacked = this.get(\"stacked\", false);\r\n                const outOfSelection = this.getPrivate(\"outOfSelection\");\r\n                if (baseAxis === xAxis || !baseAxis) {\r\n                    yAxis._calculateTotals();\r\n                    this.setPrivateRaw(\"selectionMinY\", undefined);\r\n                    this.setPrivateRaw(\"selectionMaxY\", undefined);\r\n                    if (!outOfSelection) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            this.processYSelectionDataItem(this.dataItems[i], vcy, stacked);\r\n                        }\r\n                    }\r\n                    else {\r\n                        yAxis.markDirtySelectionExtremes();\r\n                    }\r\n                }\r\n                if (baseAxis === yAxis || !baseAxis) {\r\n                    xAxis._calculateTotals();\r\n                    this.setPrivateRaw(\"selectionMinX\", undefined);\r\n                    this.setPrivateRaw(\"selectionMaxX\", undefined);\r\n                    if (!outOfSelection) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            this.processXSelectionDataItem(this.dataItems[i], vcx, stacked);\r\n                        }\r\n                    }\r\n                    else {\r\n                        yAxis.markDirtySelectionExtremes();\r\n                    }\r\n                }\r\n                if (baseAxis === xAxis || !baseAxis) {\r\n                    if (this.get(\"valueYShow\") !== \"valueYWorking\" || this.get(\"useSelectionExtremes\")) {\r\n                        const selectionMinY = this.getPrivate(\"selectionMinY\");\r\n                        if (selectionMinY != null) {\r\n                            this.setPrivateRaw(\"minY\", selectionMinY);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                        const selectionMaxY = this.getPrivate(\"selectionMaxY\");\r\n                        if (selectionMaxY != null) {\r\n                            this.setPrivateRaw(\"maxY\", selectionMaxY);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                    }\r\n                }\r\n                if (baseAxis === yAxis || !baseAxis) {\r\n                    if (this.get(\"valueXShow\") !== \"valueXWorking\" || this.get(\"useSelectionExtremes\")) {\r\n                        const selectionMinX = this.getPrivate(\"selectionMinX\");\r\n                        if (selectionMinX != null) {\r\n                            this.setPrivateRaw(\"minX\", selectionMinX);\r\n                            yAxis.markDirtyExtremes();\r\n                        }\r\n                        const selectionMaxX = this.getPrivate(\"selectionMaxX\");\r\n                        if (selectionMaxX != null) {\r\n                            this.setPrivateRaw(\"maxX\", selectionMaxX);\r\n                            xAxis.markDirtyExtremes();\r\n                        }\r\n                    }\r\n                }\r\n                if (this.isPrivateDirty(\"selectionMinX\") || this.isPrivateDirty(\"selectionMaxX\")) {\r\n                    xAxis.markDirtySelectionExtremes();\r\n                }\r\n                if (this.isPrivateDirty(\"selectionMinY\") || this.isPrivateDirty(\"selectionMaxY\")) {\r\n                    yAxis.markDirtySelectionExtremes();\r\n                }\r\n                // this.updateLegendValue(undefined); flickers while panning\r\n            }\r\n        }\r\n    }\r\n    _makeRangeMask() {\r\n        if (this.axisRanges.length > 0) {\r\n            let mainContainerMask = this._mainContainerMask;\r\n            if (mainContainerMask == null) {\r\n                mainContainerMask = this.children.push(Graphics.new(this._root, {}));\r\n                this._mainContainerMask = mainContainerMask;\r\n                mainContainerMask.set(\"draw\", (display, target) => {\r\n                    const parent = this.parent;\r\n                    if (parent) {\r\n                        const w = this._root.container.width();\r\n                        const h = this._root.container.height();\r\n                        display.moveTo(-w, -h);\r\n                        display.lineTo(-w, h * 2);\r\n                        display.lineTo(w * 2, h * 2);\r\n                        display.lineTo(w * 2, -h);\r\n                        display.lineTo(-w, -h);\r\n                        this.axisRanges.each((axisRange) => {\r\n                            const fill = axisRange.axisDataItem.get(\"axisFill\");\r\n                            if (parent) {\r\n                                if (fill) {\r\n                                    let draw = fill.get(\"draw\");\r\n                                    if (draw) {\r\n                                        draw(display, target);\r\n                                    }\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    this.mainContainer._display.mask = mainContainerMask._display;\r\n                });\r\n            }\r\n            mainContainerMask.markDirty();\r\n            mainContainerMask._markDirtyKey(\"fill\");\r\n        }\r\n        else {\r\n            this.mainContainer._display.mask = null;\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        super._updateChildren();\r\n        // save for performance\r\n        this._x = this.x();\r\n        this._y = this.y();\r\n        this._makeRangeMask();\r\n    }\r\n    _stack() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            const seriesIndex = chart.series.indexOf(this);\r\n            this._couldStackTo = [];\r\n            if (seriesIndex > 0) {\r\n                let series;\r\n                for (let i = seriesIndex - 1; i >= 0; i--) {\r\n                    series = chart.series.getIndex(i);\r\n                    if (series.get(\"xAxis\") === this.get(\"xAxis\") && series.get(\"yAxis\") === this.get(\"yAxis\") && series.className === this.className) {\r\n                        this._couldStackTo.push(series);\r\n                        if (!series.get(\"stacked\")) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._stackDataItems();\r\n        }\r\n    }\r\n    _unstack() {\r\n        $object.each(this._reallyStackedTo, (_key, value) => {\r\n            delete (value._stackedSeries[this.uid]);\r\n        });\r\n        this._reallyStackedTo = {};\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            dataItem.setRaw(\"stackToItemY\", undefined);\r\n            dataItem.setRaw(\"stackToItemX\", undefined);\r\n        });\r\n    }\r\n    _handleRemoved() {\r\n        const xAxis = this.get(\"xAxis\");\r\n        if (xAxis) {\r\n            xAxis._handleSeriesRemoved();\r\n        }\r\n        const yAxis = this.get(\"yAxis\");\r\n        if (yAxis) {\r\n            yAxis._handleSeriesRemoved();\r\n        }\r\n    }\r\n    _stackDataItems() {\r\n        // this works only with the same number of data @todo: search by date/category?\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        let field;\r\n        let stackToItemKey;\r\n        if (baseAxis === xAxis) {\r\n            field = \"valueY\";\r\n            stackToItemKey = \"stackToItemY\";\r\n        }\r\n        else if (baseAxis === yAxis) {\r\n            field = \"valueX\";\r\n            stackToItemKey = \"stackToItemX\";\r\n        }\r\n        let len = this._couldStackTo.length;\r\n        let index = 0;\r\n        const stackToNegative = this.get(\"stackToNegative\");\r\n        this._reallyStackedTo = {};\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            for (let s = 0; s < len; s++) {\r\n                let stackToSeries = this._couldStackTo[s];\r\n                let stackToItem = stackToSeries.dataItems[index];\r\n                let value = dataItem.get(field);\r\n                if (stackToItem) {\r\n                    let stackValue = stackToItem.get(field);\r\n                    if (stackToNegative) {\r\n                        if ($type.isNumber(value)) {\r\n                            if ($type.isNumber(stackValue)) {\r\n                                if (s == len - 1) {\r\n                                    dataItem.setRaw(stackToItemKey, undefined);\r\n                                }\r\n                                if (value >= 0 && stackValue >= 0) {\r\n                                    dataItem.setRaw(stackToItemKey, stackToItem);\r\n                                    this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                                    stackToSeries._stackedSeries[this.uid] = this;\r\n                                    break;\r\n                                }\r\n                                if (value < 0 && stackValue < 0) {\r\n                                    dataItem.setRaw(stackToItemKey, stackToItem);\r\n                                    this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                                    stackToSeries._stackedSeries[this.uid] = this;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if ($type.isNumber(value) && $type.isNumber(stackValue)) {\r\n                            dataItem.setRaw(stackToItemKey, stackToItem);\r\n                            this._reallyStackedTo[stackToSeries.uid] = stackToSeries;\r\n                            stackToSeries._stackedSeries[this.uid] = this;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            index++;\r\n        });\r\n    }\r\n    processXSelectionDataItem(dataItem, vcx, stacked) {\r\n        $array.each(this.__valueXShowFields, (key) => {\r\n            let value = dataItem.get(key);\r\n            if (value != null) {\r\n                if (stacked) {\r\n                    value += this.getStackedXValueWorking(dataItem, key);\r\n                }\r\n                this._min(\"selectionMinX\", value);\r\n                this._max(\"selectionMaxX\", value * vcx);\r\n            }\r\n        });\r\n    }\r\n    processYSelectionDataItem(dataItem, vcy, stacked) {\r\n        $array.each(this.__valueYShowFields, (key) => {\r\n            let value = dataItem.get(key);\r\n            if (value != null) {\r\n                if (stacked) {\r\n                    value += this.getStackedYValueWorking(dataItem, key);\r\n                }\r\n                this._min(\"selectionMinY\", value);\r\n                this._max(\"selectionMaxY\", value * vcy);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedYValueWorking(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            const stackedToSeries = stackToItem.component;\r\n            return stackToItem.get(key, 0) * stackedToSeries.get(\"vcy\", 1) + this.getStackedYValueWorking(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedXValueWorking(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            const stackedToSeries = stackToItem.component;\r\n            return stackToItem.get(key, 0) * stackedToSeries.get(\"vcx\", 1) + this.getStackedXValueWorking(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedYValue(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            return stackToItem.get(key, 0) + this.getStackedYValue(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getStackedXValue(dataItem, key) {\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            return stackToItem.get(key, 0) + this.getStackedXValue(stackToItem, key);\r\n        }\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    createLegendMarker(_dataItem) {\r\n        this.updateLegendMarker();\r\n    }\r\n    _markDirtyAxes() {\r\n        this._axesDirty = true;\r\n        this.markDirty();\r\n    }\r\n    _markDataSetDirty() {\r\n        this._afterDataChange();\r\n        this._valuesDirty = true;\r\n        this._dataProcessed = false;\r\n        this._aggregatesCalculated = false;\r\n        this.markDirty();\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._axesDirty = false;\r\n        this._selectionProcessed = false;\r\n        this._stackDirty = false;\r\n        this._dataProcessed = false;\r\n    }\r\n    _positionBullet(bullet) {\r\n        let sprite = bullet.get(\"sprite\");\r\n        if (sprite) {\r\n            let dataItem = sprite.dataItem;\r\n            let locationX = bullet.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\r\n            let locationY = bullet.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\r\n            let xAxis = this.get(\"xAxis\");\r\n            let yAxis = this.get(\"yAxis\");\r\n            let exactLocationX = this.get(\"exactLocationX\", false);\r\n            let exactLocationY = this.get(\"exactLocationY\", false);\r\n            let positionX = xAxis.getDataItemPositionX(dataItem, this._xField, locationX, this.get(\"vcx\", 1), exactLocationX);\r\n            let positionY = yAxis.getDataItemPositionY(dataItem, this._yField, locationY, this.get(\"vcy\", 1), exactLocationY);\r\n            let point = this.getPoint(positionX, positionY);\r\n            let left = dataItem.get(\"left\", point.x);\r\n            let right = dataItem.get(\"right\", point.x);\r\n            let top = dataItem.get(\"top\", point.y);\r\n            let bottom = dataItem.get(\"bottom\", point.y);\r\n            let x = 0;\r\n            let y = 0;\r\n            let w = right - left;\r\n            let h = bottom - top;\r\n            if (this._shouldShowBullet(positionX, positionY)) {\r\n                sprite.setPrivate(\"visible\", !bullet.getPrivate(\"hidden\"));\r\n                let field = bullet.get(\"field\");\r\n                const baseAxis = this.get(\"baseAxis\");\r\n                const xAxis = this.get(\"xAxis\");\r\n                const yAxis = this.get(\"yAxis\");\r\n                if (field != undefined) {\r\n                    let realField;\r\n                    if (baseAxis == xAxis) {\r\n                        if (field == \"value\") {\r\n                            realField = this._yField;\r\n                        }\r\n                        else if (field == \"open\") {\r\n                            realField = this._yOpenField;\r\n                        }\r\n                        else if (field == \"high\") {\r\n                            realField = this._yHighField;\r\n                        }\r\n                        else if (field == \"low\") {\r\n                            realField = this._yLowField;\r\n                        }\r\n                        if (realField) {\r\n                            positionY = yAxis.getDataItemPositionY(dataItem, realField, 0, this.get(\"vcy\", 1), exactLocationY);\r\n                            point = yAxis.get(\"renderer\").positionToPoint(positionY);\r\n                            y = point.y;\r\n                            x = left + w * locationX;\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (field == \"value\") {\r\n                            realField = this._xField;\r\n                        }\r\n                        else if (field == \"open\") {\r\n                            realField = this._xOpenField;\r\n                        }\r\n                        else if (field == \"high\") {\r\n                            realField = this._xHighField;\r\n                        }\r\n                        else if (field == \"low\") {\r\n                            realField = this._xLowField;\r\n                        }\r\n                        if (realField) {\r\n                            positionX = xAxis.getDataItemPositionX(dataItem, realField, 0, this.get(\"vcx\", 1), exactLocationX);\r\n                            point = xAxis.get(\"renderer\").positionToPoint(positionX);\r\n                            x = point.x;\r\n                            y = bottom - h * locationY;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    x = left + w * locationX;\r\n                    y = bottom - h * locationY;\r\n                }\r\n                const stacked = bullet.get(\"stacked\");\r\n                if (stacked) {\r\n                    const chart = this.chart;\r\n                    if (baseAxis == xAxis) {\r\n                        let previousBullet = this._bullets[positionX + \"_\" + positionY];\r\n                        if (previousBullet) {\r\n                            let previousBounds = previousBullet.bounds();\r\n                            let bounds = sprite.localBounds();\r\n                            let yo = y;\r\n                            y = previousBounds.top;\r\n                            if (stacked == \"down\") {\r\n                                y = previousBounds.bottom - bounds.top;\r\n                            }\r\n                            else if (stacked == \"auto\") {\r\n                                if (chart) {\r\n                                    if (yo < chart.plotContainer.height() / 2) {\r\n                                        y = previousBounds.bottom - bounds.top;\r\n                                    }\r\n                                    else {\r\n                                        y += bounds.bottom;\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                y += bounds.bottom;\r\n                            }\r\n                        }\r\n                        this._bullets[positionX + \"_\" + positionY] = sprite;\r\n                    }\r\n                    else {\r\n                        let previousBullet = this._bullets[positionX + \"_\" + positionY];\r\n                        if (previousBullet) {\r\n                            let previousBounds = previousBullet.bounds();\r\n                            let bounds = sprite.localBounds();\r\n                            let xo = x;\r\n                            x = previousBounds.right;\r\n                            if (stacked == \"down\") {\r\n                                x = previousBounds.left - bounds.right;\r\n                            }\r\n                            else if (stacked == \"auto\") {\r\n                                if (chart) {\r\n                                    if (xo < chart.plotContainer.width() / 2) {\r\n                                        x = previousBounds.left - bounds.right;\r\n                                    }\r\n                                    else {\r\n                                        x -= bounds.left;\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                x -= bounds.left;\r\n                            }\r\n                        }\r\n                        this._bullets[positionX + \"_\" + positionY] = sprite;\r\n                    }\r\n                }\r\n                if (sprite.isType(\"Label\")) {\r\n                    sprite.setPrivate(\"maxWidth\", Math.abs(w));\r\n                    sprite.setPrivate(\"maxHeight\", Math.abs(h));\r\n                }\r\n                sprite.setAll({ x, y });\r\n            }\r\n            else {\r\n                sprite.setPrivate(\"visible\", false);\r\n            }\r\n        }\r\n    }\r\n    _shouldShowBullet(_positionX, _positionY) {\r\n        return this._showBullets;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    setDataSet(id) {\r\n        if (this._dataSets[id]) {\r\n            this._handleDataSetChange();\r\n            this._dataItems = this._dataSets[id];\r\n            this._markDataSetDirty();\r\n            this._dataSetId = id;\r\n            const type = \"datasetchanged\";\r\n            if (this.events.isEnabled(type)) {\r\n                this.events.dispatch(type, { type: type, target: this, id: id });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    resetGrouping() {\r\n        $object.each(this._dataSets, (_key, dataSet) => {\r\n            if (dataSet != this._mainDataItems) {\r\n                $array.each(dataSet, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n            }\r\n        });\r\n        this._dataSets = {};\r\n        this._dataItems = this.mainDataItems;\r\n    }\r\n    _handleDataSetChange() {\r\n        $array.each(this._dataItems, (dataItem) => {\r\n            let bullets = dataItem.bullets;\r\n            if (bullets) {\r\n                $array.each(bullets, (bullet) => {\r\n                    if (bullet) {\r\n                        let sprite = bullet.get(\"sprite\");\r\n                        if (sprite) {\r\n                            sprite.setPrivate(\"visible\", false);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        this._selectionProcessed = false; // for totals to be calculated\r\n    }\r\n    /**\r\n     * Shows hidden series.\r\n     *\r\n     * @param   duration  Duration of animation in milliseconds\r\n     * @return            Animation promise\r\n     */\r\n    show(duration) {\r\n        const _super = Object.create(null, {\r\n            show: { get: () => super.show }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._fixVC();\r\n            let promises = [];\r\n            promises.push(_super.show.call(this, duration).then(() => {\r\n                this._isShowing = false;\r\n                let xAxis = this.get(\"xAxis\");\r\n                let yAxis = this.get(\"yAxis\");\r\n                let baseAxis = this.get(\"baseAxis\");\r\n                if (yAxis !== baseAxis) {\r\n                    yAxis.markDirtySelectionExtremes();\r\n                }\r\n                if (xAxis !== baseAxis) {\r\n                    xAxis.markDirtySelectionExtremes();\r\n                }\r\n            }));\r\n            promises.push(this.bulletsContainer.show(duration));\r\n            promises.push(this._sequencedShowHide(true, duration));\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Hides series.\r\n     *\r\n     * @param   duration  Duration of animation in milliseconds\r\n     * @return            Animation promise\r\n     */\r\n    hide(duration) {\r\n        const _super = Object.create(null, {\r\n            hide: { get: () => super.hide }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this._fixVC();\r\n            let promises = [];\r\n            promises.push(_super.hide.call(this, duration).then(() => {\r\n                this._isHiding = false;\r\n            }));\r\n            promises.push(this.bulletsContainer.hide(duration));\r\n            promises.push(this._sequencedShowHide(false, duration));\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    showDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            showDataItem: { get: () => super.showDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.showDataItem.call(this, dataItem, duration)];\r\n            if (!$type.isNumber(duration)) {\r\n                duration = this.get(\"stateAnimationDuration\", 0);\r\n            }\r\n            const easing = this.get(\"stateAnimationEasing\");\r\n            $array.each(this._valueFields, (key) => {\r\n                promises.push(dataItem.animate({ key: key + \"Working\", to: dataItem.get(key), duration: duration, easing: easing }).waitForStop());\r\n            });\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    hideDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            hideDataItem: { get: () => super.hideDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.hideDataItem.call(this, dataItem, duration)];\r\n            let hiddenState = this.states.lookup(\"hidden\");\r\n            if (!hiddenState) {\r\n                hiddenState = this.states.create(\"hidden\", {});\r\n            }\r\n            if (!$type.isNumber(duration)) {\r\n                duration = hiddenState.get(\"stateAnimationDuration\", this.get(\"stateAnimationDuration\", 0));\r\n            }\r\n            const easing = hiddenState.get(\"stateAnimationEasing\", this.get(\"stateAnimationEasing\"));\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const baseAxis = this.get(\"baseAxis\");\r\n            const stacked = this.get(\"stacked\");\r\n            if (baseAxis === xAxis || !baseAxis) {\r\n                $array.each(this._valueYFields, (key) => {\r\n                    let min = yAxis.getPrivate(\"min\");\r\n                    let baseValue = yAxis.baseValue();\r\n                    if ($type.isNumber(min) && min > baseValue) {\r\n                        baseValue = min;\r\n                    }\r\n                    if (stacked) {\r\n                        baseValue = 0;\r\n                    }\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        promises.push(dataItem.animate({ key: key + \"Working\", to: baseValue, duration: duration, easing: easing }).waitForStop());\r\n                    }\r\n                });\r\n            }\r\n            if (baseAxis === yAxis || !baseAxis) {\r\n                let min = xAxis.getPrivate(\"min\");\r\n                let baseValue = xAxis.baseValue();\r\n                if ($type.isNumber(min) && min > baseValue) {\r\n                    baseValue = min;\r\n                }\r\n                if (stacked) {\r\n                    baseValue = 0;\r\n                }\r\n                $array.each(this._valueXFields, (key) => {\r\n                    let value = dataItem.get(key);\r\n                    if (value != null) {\r\n                        promises.push(dataItem.animate({ key: key + \"Working\", to: baseValue, duration: duration, easing: easing }).waitForStop());\r\n                    }\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    _markDirtyStack() {\r\n        this._stackDirty = true;\r\n        this.markDirty();\r\n        this._markStakedDirtyStack();\r\n    }\r\n    _markStakedDirtyStack() {\r\n        const stackedSeries = this._stackedSeries;\r\n        if (stackedSeries) {\r\n            $object.each(stackedSeries, (_key, value) => {\r\n                if (!value._stackDirty) {\r\n                    value._markDirtyStack();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        if (this._skipped) {\r\n            this._markDirtyAxes();\r\n            this._skipped = false;\r\n        }\r\n    }\r\n    /**\r\n     * Shows a tooltip for specific data item.\r\n     *\r\n     * @param  dataItem  Data item\r\n     */\r\n    showDataItemTooltip(dataItem) {\r\n        if (!this.getPrivate(\"doNotUpdateLegend\")) {\r\n            this.updateLegendMarker(dataItem);\r\n            this.updateLegendValue(dataItem);\r\n        }\r\n        const tooltip = this.get(\"tooltip\");\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        const exactLocationY = this.get(\"exactLocationY\", false);\r\n        if (tooltip) {\r\n            if (!this.isHidden() && this.get(\"visible\")) {\r\n                tooltip._setDataItem(dataItem);\r\n                if (dataItem) {\r\n                    let locationX = this.get(\"locationX\", 0);\r\n                    let locationY = this.get(\"locationY\", 1);\r\n                    let itemLocationX = dataItem.get(\"locationX\", locationX);\r\n                    let itemLocationY = dataItem.get(\"locationY\", locationY);\r\n                    const xAxis = this.get(\"xAxis\");\r\n                    const yAxis = this.get(\"yAxis\");\r\n                    const vcx = this.get(\"vcx\", 1);\r\n                    const vcy = this.get(\"vcy\", 1);\r\n                    const xPos = xAxis.getDataItemPositionX(dataItem, this._tooltipFieldX, this._aLocationX0 + (this._aLocationX1 - this._aLocationX0) * itemLocationX, vcx, exactLocationX);\r\n                    const yPos = yAxis.getDataItemPositionY(dataItem, this._tooltipFieldY, this._aLocationY0 + (this._aLocationY1 - this._aLocationY0) * itemLocationY, vcy, exactLocationY);\r\n                    const point = this.getPoint(xPos, yPos);\r\n                    let show = true;\r\n                    $array.each(this._valueFields, (field) => {\r\n                        if (dataItem.get(field) == null) {\r\n                            show = false;\r\n                        }\r\n                    });\r\n                    if (show) {\r\n                        const chart = this.chart;\r\n                        if (chart && chart.inPlot(point)) {\r\n                            tooltip.label.text.markDirtyText();\r\n                            tooltip.set(\"tooltipTarget\", this._getTooltipTarget(dataItem));\r\n                            tooltip.set(\"pointTo\", this._display.toGlobal({ x: point.x, y: point.y }));\r\n                        }\r\n                        else {\r\n                            tooltip._setDataItem(undefined);\r\n                        }\r\n                    }\r\n                    else {\r\n                        tooltip._setDataItem(undefined);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.hideTooltip();\r\n            }\r\n        }\r\n    }\r\n    hideTooltip() {\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.set(\"tooltipTarget\", this);\r\n        }\r\n        return super.hideTooltip();\r\n    }\r\n    _getTooltipTarget(dataItem) {\r\n        if (this.get(\"seriesTooltipTarget\") == \"bullet\") {\r\n            const bullets = dataItem.bullets;\r\n            if (bullets && bullets.length > 0) {\r\n                const bullet = bullets[0];\r\n                const sprite = bullet.get(\"sprite\");\r\n                if (sprite) {\r\n                    return sprite;\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendValue(dataItem) {\r\n        const legendDataItem = this.get(\"legendDataItem\");\r\n        if (legendDataItem) {\r\n            const label = legendDataItem.get(\"label\");\r\n            if (label) {\r\n                let txt = \"\";\r\n                if (dataItem) {\r\n                    label._setDataItem(dataItem);\r\n                    txt = this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\")));\r\n                }\r\n                else {\r\n                    label._setDataItem(this._emptyDataItem);\r\n                    txt = this.get(\"legendRangeLabelText\", this.get(\"legendLabelText\", label.get(\"text\", this.get(\"name\", \"\"))));\r\n                }\r\n                label.set(\"text\", txt);\r\n            }\r\n            const valueLabel = legendDataItem.get(\"valueLabel\");\r\n            if (valueLabel) {\r\n                let txt = \"\";\r\n                if (dataItem) {\r\n                    valueLabel._setDataItem(dataItem);\r\n                    txt = this.get(\"legendValueText\", valueLabel.get(\"text\", \"\"));\r\n                }\r\n                else {\r\n                    valueLabel._setDataItem(this._emptyDataItem);\r\n                    txt = this.get(\"legendRangeValueText\", valueLabel.get(\"text\", \"\"));\r\n                }\r\n                valueLabel.set(\"text\", txt);\r\n            }\r\n        }\r\n    }\r\n    _getItemReaderLabel() {\r\n        let text = \"X: {\" + this._xField;\r\n        if (this.get(\"xAxis\").isType(\"DateAxis\")) {\r\n            text += \".formatDate()\";\r\n        }\r\n        text += \"}; Y: {\" + this._yField;\r\n        if (this.get(\"yAxis\").isType(\"DateAxis\")) {\r\n            text += \".formatDate()\";\r\n        }\r\n        text += \"}\";\r\n        return text;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getPoint(positionX, positionY) {\r\n        let x = this.get(\"xAxis\").get(\"renderer\").positionToCoordinate(positionX);\r\n        let y = this.get(\"yAxis\").get(\"renderer\").positionToCoordinate(positionY);\r\n        // if coordinate is super big, canvas fails to draw line, capping to some big number (won't make any visual difference)\r\n        let max = 999999999;\r\n        if (y < -max) {\r\n            y = -max;\r\n        }\r\n        if (y > max) {\r\n            y = max;\r\n        }\r\n        if (x < -max) {\r\n            x = -max;\r\n        }\r\n        if (x > max) {\r\n            x = max;\r\n        }\r\n        return { x: x, y: y };\r\n    }\r\n    _shouldInclude(_position) {\r\n        return true;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorHide() {\r\n        this.hideTooltip();\r\n        this.updateLegendValue(undefined);\r\n        this.updateLegendMarker(undefined);\r\n    }\r\n    _afterDataChange() {\r\n        super._afterDataChange();\r\n        this.get(\"xAxis\")._markDirtyKey(\"start\");\r\n        this.get(\"yAxis\")._markDirtyKey(\"start\");\r\n        this.resetExtremes();\r\n    }\r\n    /**\r\n     * Resets cached axis scale values.\r\n     */\r\n    resetExtremes() {\r\n        this.setPrivate(\"selectionMinX\", undefined);\r\n        this.setPrivate(\"selectionMaxX\", undefined);\r\n        this.setPrivate(\"selectionMinY\", undefined);\r\n        this.setPrivate(\"selectionMaxY\", undefined);\r\n        this.setPrivate(\"minX\", undefined);\r\n        this.setPrivate(\"minY\", undefined);\r\n        this.setPrivate(\"maxX\", undefined);\r\n        this.setPrivate(\"maxY\", undefined);\r\n    }\r\n    /**\r\n     * Creates and returns an axis range object.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n     * @param   axisDataItem  Axis data item\r\n     * @return                Axis range\r\n     */\r\n    createAxisRange(axisDataItem) {\r\n        return this.axisRanges.push({\r\n            axisDataItem: axisDataItem\r\n        });\r\n    }\r\n    /**\r\n     * A list of series's main (ungrouped) data items.\r\n     *\r\n     * @return  Data items\r\n     */\r\n    get mainDataItems() {\r\n        return this._mainDataItems;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _adjustStartIndex(index) {\r\n        const xAxis = this.get(\"xAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        if (baseAxis == xAxis && xAxis.isType(\"DateAxis\")) {\r\n            const baseDuration = xAxis.baseDuration();\r\n            const minSelection = xAxis.getPrivate(\"selectionMin\", xAxis.getPrivate(\"min\", 0));\r\n            const dl = baseDuration * this.get(\"locationX\", 0.5);\r\n            let value = -Infinity;\r\n            while (value < minSelection) {\r\n                const dataItem = this.dataItems[index];\r\n                if (dataItem) {\r\n                    const open = dataItem.open;\r\n                    if (open) {\r\n                        value = open[\"valueX\"];\r\n                    }\r\n                    else {\r\n                        value = dataItem.get(\"valueX\", 0);\r\n                    }\r\n                    value += dl;\r\n                    if (value < minSelection) {\r\n                        index++;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n}\r\nObject.defineProperty(XYSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"XYSeries\"\r\n});\r\nObject.defineProperty(XYSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Series.classNames.concat([XYSeries.className])\r\n});\r\n//# sourceMappingURL=XYSeries.js.map","import { __awaiter } from \"tslib\";\r\nimport { XYSeries } from \"./XYSeries\";\r\nimport { Percent } from \"../../../core/util/Percent\";\r\nimport { visualSettings } from \"../../../core/render/Graphics\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\n/**\r\n * Base class for all \"column-based\" series\r\n */\r\nexport class BaseColumnSeries extends XYSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_ph\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_pw\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_columnsUpdated\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n    }\r\n    _makeGraphics(listTemplate, dataItem) {\r\n        return this.makeColumn(dataItem, listTemplate);\r\n    }\r\n    _makeFieldNames() {\r\n        super._makeFieldNames();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const categoryAxis = \"CategoryAxis\";\r\n        const valueAxis = \"ValueAxis\";\r\n        if (xAxis.isType(categoryAxis)) {\r\n            if (!this.get(\"openCategoryXField\")) {\r\n                this._xOpenField = this._xField;\r\n            }\r\n        }\r\n        if (xAxis.isType(valueAxis)) {\r\n            if (!this.get(\"openValueXField\")) {\r\n                this._xOpenField = this._xField;\r\n            }\r\n        }\r\n        if (yAxis.isType(categoryAxis)) {\r\n            if (!this.get(\"openCategoryYField\")) {\r\n                this._yOpenField = this._yField;\r\n            }\r\n        }\r\n        if (yAxis.isType(valueAxis)) {\r\n            if (!this.get(\"openValueYField\")) {\r\n                this._yOpenField = this._yField;\r\n            }\r\n        }\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const len = this.dataItems.length;\r\n        const startIndex = Math.max(0, this.startIndex() - 2);\r\n        const endIndex = Math.min(this.endIndex() + 2, len - 1);\r\n        if (xAxis.inited && yAxis.inited) {\r\n            for (let i = startIndex; i <= endIndex; i++) {\r\n                let dataItem = this.dataItems[i];\r\n                this._createGraphics(dataItem);\r\n            }\r\n        }\r\n    }\r\n    _updateChildren() {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            this._ph = chart.plotContainer.height();\r\n            this._pw = chart.plotContainer.width();\r\n        }\r\n        const xAxis = this.get(\"xAxis\");\r\n        const yAxis = this.get(\"yAxis\");\r\n        const baseAxis = this.get(\"baseAxis\");\r\n        const columnsTemplate = this.columns.template;\r\n        if (this.isDirty(\"fill\")) {\r\n            if (columnsTemplate.get(\"fill\") == null) {\r\n                columnsTemplate.set(\"fill\", this.get(\"fill\"));\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillPattern\")) {\r\n            if (columnsTemplate.get(\"fillPattern\") == null) {\r\n                columnsTemplate.set(\"fillPattern\", this.get(\"fillPattern\"));\r\n            }\r\n        }\r\n        if (this.isDirty(\"stroke\")) {\r\n            if (columnsTemplate.get(\"stroke\") == null) {\r\n                columnsTemplate.set(\"stroke\", this.get(\"stroke\"));\r\n            }\r\n        }\r\n        let index = 0;\r\n        let clusterCount = 0;\r\n        let i = 0;\r\n        $array.each(baseAxis.series, (series) => {\r\n            if (series instanceof BaseColumnSeries) {\r\n                const stacked = series.get(\"stacked\");\r\n                if (stacked && i == 0) {\r\n                    clusterCount++;\r\n                }\r\n                if (!stacked && series.get(\"clustered\")) {\r\n                    clusterCount++;\r\n                }\r\n            }\r\n            if (series === this) {\r\n                index = clusterCount - 1;\r\n            }\r\n            i++;\r\n        });\r\n        if (!this.get(\"clustered\")) {\r\n            index = 0;\r\n            clusterCount = 1;\r\n        }\r\n        if (clusterCount === 0) {\r\n            clusterCount = 1;\r\n            index = 0;\r\n        }\r\n        const xRenderer = xAxis.get(\"renderer\");\r\n        const yRenderer = yAxis.get(\"renderer\");\r\n        const cellStartLocation = \"cellStartLocation\";\r\n        const cellEndLocation = \"cellEndLocation\";\r\n        const cellLocationX0 = xRenderer.get(cellStartLocation, 0);\r\n        const cellLocationX1 = xRenderer.get(cellEndLocation, 1);\r\n        const cellLocationY0 = yRenderer.get(cellStartLocation, 0);\r\n        const cellLocationY1 = yRenderer.get(cellEndLocation, 1);\r\n        this._aLocationX0 = cellLocationX0 + (index / clusterCount) * (cellLocationX1 - cellLocationX0);\r\n        this._aLocationX1 = cellLocationX0 + (index + 1) / clusterCount * (cellLocationX1 - cellLocationX0);\r\n        ;\r\n        this._aLocationY0 = cellLocationY0 + (index / clusterCount) * (cellLocationY1 - cellLocationY0);\r\n        this._aLocationY1 = cellLocationY0 + (index + 1) / clusterCount * (cellLocationY1 - cellLocationY0);\r\n        if (xAxis.inited && yAxis.inited) {\r\n            if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty) {\r\n                const len = this.dataItems.length;\r\n                let startIndex = Math.max(0, this.startIndex() - 2);\r\n                let endIndex = Math.min(this.endIndex() + 2, len - 1);\r\n                for (let i = 0; i < startIndex; i++) {\r\n                    this._toggleColumn(this.dataItems[i], false);\r\n                }\r\n                let previous = this.dataItems[startIndex];\r\n                for (let i = startIndex; i <= endIndex; i++) {\r\n                    let dataItem = this.dataItems[i];\r\n                    if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                        previous = dataItem;\r\n                        if (i > 0 && startIndex > 0) {\r\n                            for (let j = i - 1; j >= 0; j--) {\r\n                                let dataItem = this.dataItems[j];\r\n                                if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                                    previous = dataItem;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                    else {\r\n                        this._toggleColumn(dataItem, false);\r\n                    }\r\n                }\r\n                this._beforeColumnsDraw();\r\n                let axisCase = 0;\r\n                if (yAxis.isType(\"CategoryAxis\") && xAxis.isType(\"CategoryAxis\")) {\r\n                    axisCase = 2;\r\n                }\r\n                else if (xAxis === baseAxis) {\r\n                    axisCase = 0;\r\n                }\r\n                else if (yAxis === baseAxis) {\r\n                    axisCase = 1;\r\n                }\r\n                for (let i = startIndex; i <= endIndex; i++) {\r\n                    let dataItem = this.dataItems[i];\r\n                    this._updateGraphics(dataItem, previous, axisCase);\r\n                    if (dataItem.get(\"valueX\") != null && dataItem.get(\"valueY\") != null) {\r\n                        previous = dataItem;\r\n                    }\r\n                }\r\n                this._afterColumnsDraw();\r\n                for (let i = endIndex + 1; i < len; i++) {\r\n                    this._toggleColumn(this.dataItems[i], false);\r\n                }\r\n                this._columnsUpdated = true;\r\n            }\r\n        }\r\n        else {\r\n            this._skipped = true;\r\n        }\r\n        if (!this.getPrivate(\"doNotUpdateLegend\")) {\r\n            this.updateLegendMarker(this.get(\"tooltipDataItem\"));\r\n        }\r\n        super._updateChildren();\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        this._columnsUpdated = false;\r\n    }\r\n    _beforeColumnsDraw() {\r\n    }\r\n    _afterColumnsDraw() {\r\n    }\r\n    _createGraphics(dataItem) {\r\n        let graphics = dataItem.get(\"graphics\");\r\n        if (!graphics) {\r\n            graphics = this._makeGraphics(this.columns, dataItem);\r\n            dataItem.set(\"graphics\", graphics);\r\n            graphics._setDataItem(dataItem);\r\n            const legendDataItem = dataItem.get(\"legendDataItem\");\r\n            if (legendDataItem) {\r\n                const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n                if (markerRectangle) {\r\n                    const ds = markerRectangle.states.lookup(\"default\");\r\n                    $array.each(visualSettings, (setting) => {\r\n                        const value = graphics.get(setting, this.get(setting));\r\n                        markerRectangle.set(setting, value);\r\n                        ds.set(setting, value);\r\n                    });\r\n                }\r\n            }\r\n            let graphicsArray = dataItem.get(\"rangeGraphics\");\r\n            if (graphicsArray) {\r\n                $array.each(graphicsArray, (graphics) => {\r\n                    graphics.dispose();\r\n                });\r\n            }\r\n            graphicsArray = [];\r\n            dataItem.setRaw(\"rangeGraphics\", graphicsArray);\r\n            this.axisRanges.each((axisRange) => {\r\n                const container = axisRange.container;\r\n                const rangeGraphics = this._makeGraphics(axisRange.columns, dataItem);\r\n                if (graphicsArray) {\r\n                    graphicsArray.push(rangeGraphics);\r\n                }\r\n                rangeGraphics.setPrivate(\"list\", axisRange.columns);\r\n                container.children.push(rangeGraphics);\r\n            });\r\n        }\r\n    }\r\n    createAxisRange(axisDataItem) {\r\n        $array.each(this.dataItems, (dataItem) => {\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                graphics.dispose();\r\n                dataItem.set(\"graphics\", undefined);\r\n            }\r\n        });\r\n        return super.createAxisRange(axisDataItem);\r\n    }\r\n    _updateGraphics(dataItem, previousDataItem, axisCase) {\r\n        let graphics = dataItem.get(\"graphics\");\r\n        //if (!graphics) {\r\n        //\tthis._createGraphics(dataItem);\r\n        //\tgraphics = dataItem.get(\"graphics\")!;\r\n        //}\r\n        const xField = this._xField;\r\n        const yField = this._yField;\r\n        const valueX = dataItem.get(xField);\r\n        const valueY = dataItem.get(yField);\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        //const exactLocationY = this.get(\"exactLocationY\", false);\t\t\r\n        if (valueX != null && valueY != null) {\r\n            const xOpenField = this._xOpenField;\r\n            const yOpenField = this._yOpenField;\r\n            const locationX = this.get(\"locationX\", dataItem.get(\"locationX\", 0.5));\r\n            const locationY = this.get(\"locationY\", dataItem.get(\"locationY\", 0.5));\r\n            const openLocationX = this.get(\"openLocationX\", dataItem.get(\"openLocationX\", locationX));\r\n            const openLocationY = this.get(\"openLocationY\", dataItem.get(\"openLocationY\", locationY));\r\n            const width = graphics.get(\"width\");\r\n            const height = graphics.get(\"height\");\r\n            const stacked = this.get(\"stacked\");\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const xStart = xAxis.get(\"start\");\r\n            const xEnd = xAxis.get(\"end\");\r\n            const yStart = yAxis.get(\"start\");\r\n            const yEnd = yAxis.get(\"end\");\r\n            let l;\r\n            let r;\r\n            let t;\r\n            let b;\r\n            let vcy = this.get(\"vcy\", 1);\r\n            let vcx = this.get(\"vcx\", 1);\r\n            let fitW = false;\r\n            let fitH = false;\r\n            if (axisCase == 0) {\r\n                let startLocation = this._aLocationX0 + openLocationX - 0.5;\r\n                let endLocation = this._aLocationX1 + locationX - 0.5;\r\n                if (width instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - width.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx, exactLocationX);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx, exactLocationX);\r\n                t = yAxis.getDataItemPositionY(dataItem, yField, locationY, vcy);\r\n                if (this._yOpenField !== this._yField) {\r\n                    b = yAxis.getDataItemPositionY(dataItem, yOpenField, openLocationY, vcy);\r\n                }\r\n                else {\r\n                    if (stacked) {\r\n                        let stackToItemY = dataItem.get(\"stackToItemY\");\r\n                        if (stackToItemY) {\r\n                            b = yAxis.getDataItemPositionY(stackToItemY, yField, openLocationY, stackToItemY.component.get(\"vcy\"));\r\n                        }\r\n                        else {\r\n                            b = yAxis.basePosition();\r\n                        }\r\n                    }\r\n                    else {\r\n                        b = yAxis.basePosition();\r\n                    }\r\n                }\r\n                dataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t });\r\n                fitH = true;\r\n            }\r\n            else if (axisCase == 1) {\r\n                let startLocation = this._aLocationY0 + openLocationY - 0.5;\r\n                let endLocation = this._aLocationY1 + locationY - 0.5;\r\n                if (height instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - height.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\r\n                b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, locationX, vcx, exactLocationX);\r\n                if (this._xOpenField !== this._xField) {\r\n                    l = xAxis.getDataItemPositionX(dataItem, xOpenField, openLocationX, vcx, exactLocationX);\r\n                }\r\n                else {\r\n                    if (stacked) {\r\n                        let stackToItemX = dataItem.get(\"stackToItemX\");\r\n                        if (stackToItemX) {\r\n                            l = xAxis.getDataItemPositionX(stackToItemX, xField, openLocationX, stackToItemX.component.get(\"vcx\"), exactLocationX);\r\n                        }\r\n                        else {\r\n                            l = xAxis.basePosition();\r\n                        }\r\n                    }\r\n                    else {\r\n                        l = xAxis.basePosition();\r\n                    }\r\n                }\r\n                fitW = true;\r\n                dataItem.setRaw(\"point\", { x: r, y: t + (b - t) / 2 });\r\n            }\r\n            else if (axisCase == 2) {\r\n                let startLocation = this._aLocationX0 + openLocationX - 0.5;\r\n                let endLocation = this._aLocationX1 + locationX - 0.5;\r\n                if (width instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - width.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                l = xAxis.getDataItemPositionX(dataItem, xOpenField, startLocation, vcx);\r\n                r = xAxis.getDataItemPositionX(dataItem, xField, endLocation, vcx);\r\n                startLocation = this._aLocationY0 + openLocationY - 0.5;\r\n                endLocation = this._aLocationY1 + locationY - 0.5;\r\n                if (height instanceof Percent) {\r\n                    let offset = (endLocation - startLocation) * (1 - height.value) / 2;\r\n                    startLocation += offset;\r\n                    endLocation -= offset;\r\n                }\r\n                t = yAxis.getDataItemPositionY(dataItem, yOpenField, startLocation, vcy);\r\n                b = yAxis.getDataItemPositionY(dataItem, yField, endLocation, vcy);\r\n                dataItem.setRaw(\"point\", { x: l + (r - l) / 2, y: t + (b - t) / 2 });\r\n            }\r\n            this._applyGraphicsStates(dataItem, previousDataItem);\r\n            this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n            if ((l < xStart && r < xStart) || (l > xEnd && r > xEnd) || (t < yStart && b <= yStart) || (t >= yEnd && b > yEnd) || $type.isNaN(l) || $type.isNaN(t)) {\r\n                this._toggleColumn(dataItem, false);\r\n            }\r\n            else {\r\n                this._toggleColumn(dataItem, true);\r\n            }\r\n            let rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    this._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this._toggleColumn(dataItem, false);\r\n        }\r\n    }\r\n    _updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH) {\r\n        const width = graphics.get(\"width\");\r\n        const height = graphics.get(\"height\");\r\n        const maxWidth = graphics.get(\"maxWidth\");\r\n        const maxHeight = graphics.get(\"maxHeight\");\r\n        const ptl = this.getPoint(l, t);\r\n        const pbr = this.getPoint(r, b);\r\n        const tooltipPoint = dataItem.get(\"point\");\r\n        if (tooltipPoint) {\r\n            const point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\r\n            tooltipPoint.x = point.x + this._x;\r\n            tooltipPoint.y = point.y + this._y;\r\n        }\r\n        l = ptl.x;\r\n        r = pbr.x;\r\n        t = ptl.y;\r\n        b = pbr.y;\r\n        if ($type.isNumber(width)) {\r\n            const offset = ((r - l) - width) / 2;\r\n            l += offset;\r\n            r -= offset;\r\n        }\r\n        if ($type.isNumber(maxWidth) && maxWidth < Math.abs(r - l)) {\r\n            const offset = ((r - l) - maxWidth) / 2;\r\n            l += offset;\r\n            r -= offset;\r\n        }\r\n        if ($type.isNumber(height)) {\r\n            const offset = ((b - t) - height) / 2;\r\n            t += offset;\r\n            b -= offset;\r\n        }\r\n        if ($type.isNumber(maxHeight) && maxHeight < Math.abs(b - t)) {\r\n            const offset = ((b - t) - maxHeight) / 2;\r\n            t += offset;\r\n            b -= offset;\r\n        }\r\n        if (this.get(\"adjustBulletPosition\")) {\r\n            if (fitW) {\r\n                r = Math.min(Math.max(0, r), this._pw);\r\n                l = Math.min(Math.max(0, l), this._pw);\r\n            }\r\n            if (fitH) {\r\n                t = Math.min(Math.max(0, t), this._ph);\r\n                b = Math.min(Math.max(0, b), this._ph);\r\n            }\r\n        }\r\n        dataItem.setRaw(\"left\", l);\r\n        dataItem.setRaw(\"right\", r);\r\n        dataItem.setRaw(\"top\", t);\r\n        dataItem.setRaw(\"bottom\", b);\r\n        graphics.setPrivate(\"width\", r - l);\r\n        graphics.setPrivate(\"height\", b - t);\r\n        graphics.set(\"x\", l);\r\n        graphics.set(\"y\", b - (b - t));\r\n    }\r\n    _handleDataSetChange() {\r\n        super._handleDataSetChange();\r\n        $array.each(this._dataItems, (dataItem) => {\r\n            this._toggleColumn(dataItem, false);\r\n        });\r\n    }\r\n    _applyGraphicsStates(dataItem, previousDataItem) {\r\n        const graphics = dataItem.get(\"graphics\");\r\n        const dropFromOpen = graphics.states.lookup(\"dropFromOpen\");\r\n        const riseFromOpen = graphics.states.lookup(\"riseFromOpen\");\r\n        const dropFromPrevious = graphics.states.lookup(\"dropFromPrevious\");\r\n        const riseFromPrevious = graphics.states.lookup(\"riseFromPrevious\");\r\n        if (dropFromOpen || dropFromPrevious || riseFromOpen || riseFromPrevious) {\r\n            const xAxis = this.get(\"xAxis\");\r\n            const yAxis = this.get(\"yAxis\");\r\n            const baseAxis = this.get(\"baseAxis\");\r\n            let open;\r\n            let close;\r\n            let previousClose;\r\n            if (baseAxis === xAxis && yAxis.isType(\"ValueAxis\")) {\r\n                open = dataItem.get(this._yOpenField);\r\n                close = dataItem.get(this._yField);\r\n                previousClose = previousDataItem.get(this._yField);\r\n            }\r\n            else if (baseAxis === yAxis && xAxis.isType(\"ValueAxis\")) {\r\n                open = dataItem.get(this._xOpenField);\r\n                close = dataItem.get(this._xField);\r\n                previousClose = previousDataItem.get(this._xField);\r\n            }\r\n            if ($type.isNumber(open) && $type.isNumber(close)) {\r\n                if (close < open) {\r\n                    if (dropFromOpen) {\r\n                        dropFromOpen.apply();\r\n                    }\r\n                }\r\n                else {\r\n                    if (riseFromOpen) {\r\n                        riseFromOpen.apply();\r\n                    }\r\n                }\r\n                if ($type.isNumber(previousClose)) {\r\n                    if (close < previousClose) {\r\n                        if (dropFromPrevious) {\r\n                            dropFromPrevious.apply();\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (riseFromPrevious) {\r\n                            riseFromPrevious.apply();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        super.disposeDataItem(dataItem);\r\n        const graphics = dataItem.get(\"graphics\");\r\n        if (graphics) {\r\n            this.columns.removeValue(graphics);\r\n            graphics.dispose();\r\n        }\r\n        const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n        if (rangeGraphics) {\r\n            $array.each(rangeGraphics, (graphics) => {\r\n                const list = graphics.getPrivate(\"list\");\r\n                if (list) {\r\n                    list.removeValue(graphics);\r\n                }\r\n                graphics.dispose();\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Hides series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    hideDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            hideDataItem: { get: () => super.hideDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.hideDataItem.call(this, dataItem, duration)];\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                promises.push(graphics.hide(duration));\r\n            }\r\n            const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    promises.push(graphics.hide(duration));\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    _toggleColumn(dataItem, visible) {\r\n        const graphics = dataItem.get(\"graphics\");\r\n        if (graphics) {\r\n            graphics.setPrivate(\"visible\", visible);\r\n        }\r\n        const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n        if (rangeGraphics) {\r\n            $array.each(rangeGraphics, (graphics) => {\r\n                graphics.setPrivate(\"visible\", visible);\r\n            });\r\n        }\r\n        const bullets = dataItem.bullets;\r\n        if (bullets) {\r\n            $array.each(bullets, (bullet) => {\r\n                bullet.setPrivate(\"hidden\", !visible);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Shows series's data item.\r\n     *\r\n     * @param   dataItem  Data item\r\n     * @param   duration  Animation duration in milliseconds\r\n     * @return            Promise\r\n     */\r\n    showDataItem(dataItem, duration) {\r\n        const _super = Object.create(null, {\r\n            showDataItem: { get: () => super.showDataItem }\r\n        });\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = [_super.showDataItem.call(this, dataItem, duration)];\r\n            const graphics = dataItem.get(\"graphics\");\r\n            if (graphics) {\r\n                promises.push(graphics.show(duration));\r\n            }\r\n            const rangeGraphics = dataItem.get(\"rangeGraphics\");\r\n            if (rangeGraphics) {\r\n                $array.each(rangeGraphics, (graphics) => {\r\n                    promises.push(graphics.show(duration));\r\n                });\r\n            }\r\n            yield Promise.all(promises);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLegendMarker(dataItem) {\r\n        let legendDataItem = this.get(\"legendDataItem\");\r\n        if (this.get(\"useLastColorForLegendMarker\")) {\r\n            if (!dataItem) {\r\n                const lastDataItem = this.dataItems[this.endIndex() - 1];\r\n                if (lastDataItem) {\r\n                    dataItem = lastDataItem;\r\n                }\r\n            }\r\n        }\r\n        if (legendDataItem) {\r\n            let graphics = this.columns.template;\r\n            if (dataItem) {\r\n                let column = dataItem.get(\"graphics\");\r\n                if (column) {\r\n                    graphics = column;\r\n                }\r\n            }\r\n            const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n            if (markerRectangle) {\r\n                if (!legendDataItem.get(\"itemContainer\").get(\"disabled\")) {\r\n                    const ds = markerRectangle.states.lookup(\"default\");\r\n                    $array.each(visualSettings, (setting) => {\r\n                        const value = graphics.get(setting, this.get(setting));\r\n                        markerRectangle.set(setting, value);\r\n                        ds.set(setting, value);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getTooltipTarget(dataItem) {\r\n        if (this.get(\"seriesTooltipTarget\") == \"bullet\") {\r\n            return super._getTooltipTarget(dataItem);\r\n        }\r\n        let column = dataItem.get(\"graphics\");\r\n        if (column) {\r\n            return column;\r\n        }\r\n        return this;\r\n    }\r\n}\r\nObject.defineProperty(BaseColumnSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"BaseColumnSeries\"\r\n});\r\nObject.defineProperty(BaseColumnSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: XYSeries.classNames.concat([BaseColumnSeries.className])\r\n});\r\n//# sourceMappingURL=BaseColumnSeries.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Component } from \"../../../core/render/Component\";\r\nimport { Container } from \"../../../core/render/Container\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { List } from \"../../../core/util/List\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * A base class for all axes.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Adding_axes} for more info\r\n */\r\nexport class Axis extends Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_series\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        Object.defineProperty(this, \"_isPanning\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * Array of minor data items.\r\n         */\r\n        Object.defineProperty(this, \"minorDataItems\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis label elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"labelsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {}))\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis grid and fill elements.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"gridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds axis grid elements which goes above the series.\r\n         *\r\n         * @default Container.new()\r\n         */\r\n        Object.defineProperty(this, \"topGridContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Container.new(this._root, { width: p100, height: p100 })\r\n        });\r\n        /**\r\n         * A [[Container]] that holds all the axis bullet elements.\r\n         *\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"bulletsContainer\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, { isMeasured: false, width: p100, height: p100, position: \"absolute\" }))\r\n        });\r\n        /**\r\n         * A referenece to the the chart the axis belongs to.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_rangesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_panStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_panEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_sAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_eAnimation\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_skipSync\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A list of axis ranges.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n         * @default new List()\r\n         */\r\n        Object.defineProperty(this, \"axisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: new List()\r\n        });\r\n        Object.defineProperty(this, \"_seriesAxisRanges\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A control label that is invisible but is used to keep width the width of\r\n         * the axis constant.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/#Ghost_label} for more info\r\n         */\r\n        Object.defineProperty(this, \"ghostLabel\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_cursorPosition\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: -1\r\n        });\r\n        Object.defineProperty(this, \"_snapToSeries\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_seriesValuesDirty\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_seriesAdded\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        /**\r\n         * A container above the axis that can be used to add additional stuff into\r\n         * it. For example a legend, label, or an icon.\r\n         *\r\n         * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-headers/} for more info\r\n         * @default new Container\r\n         */\r\n        Object.defineProperty(this, \"axisHeader\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Container.new(this._root, {\r\n                themeTags: [\"axis\", \"header\"],\r\n                position: \"absolute\",\r\n                background: Rectangle.new(this._root, {\r\n                    themeTags: [\"header\", \"background\"],\r\n                    fill: this._root.interfaceColors.get(\"background\")\r\n                })\r\n            }))\r\n        });\r\n        Object.defineProperty(this, \"_bullets\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    _dispose() {\r\n        // these could be in other parents, so disposing just in case\r\n        this.gridContainer.dispose();\r\n        this.topGridContainer.dispose();\r\n        this.bulletsContainer.dispose();\r\n        this.labelsContainer.dispose();\r\n        this.axisHeader.dispose();\r\n        super._dispose();\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.setPrivate(\"updateScrollbar\", true);\r\n        this._disposers.push(this.axisRanges.events.onAll((change) => {\r\n            if (change.type === \"clear\") {\r\n                $array.each(change.oldValues, (dataItem) => {\r\n                    dataItem.dispose();\r\n                });\r\n            }\r\n            else if (change.type === \"push\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"setIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"insertIndex\") {\r\n                this._processAxisRange(change.newValue, [\"range\"]);\r\n            }\r\n            else if (change.type === \"removeIndex\") {\r\n                this.disposeDataItem(change.oldValue);\r\n            }\r\n            else if (change.type === \"moveIndex\") {\r\n                this._processAxisRange(change.value, [\"range\"]);\r\n            }\r\n            else {\r\n                throw new Error(\"Unknown IStreamEvent type\");\r\n            }\r\n        }));\r\n        const renderer = this.get(\"renderer\");\r\n        if (renderer) {\r\n            renderer.axis = this;\r\n            renderer.processAxis();\r\n        }\r\n        this.children.push(renderer);\r\n        this._createGhostLabel();\r\n    }\r\n    _createGhostLabel() {\r\n        const renderer = this.get(\"renderer\");\r\n        const ghostLabel = renderer.makeLabel(new DataItem(this, undefined, {}), []);\r\n        ghostLabel.adapters.disable(\"text\");\r\n        ghostLabel.setAll({ opacity: 0, tooltipText: undefined, tooltipHTML: undefined, interactive: false });\r\n        ghostLabel.events.disable();\r\n        this.ghostLabel = ghostLabel;\r\n    }\r\n    _updateFinals(_start, _end) {\r\n    }\r\n    /**\r\n     * Zooms the axis to relative locations.\r\n     *\r\n     * Both `start` and `end` are relative: 0 means start of the axis, 1 - end.\r\n     *\r\n     * @param   start     Relative start\r\n     * @param   end       Relative end\r\n     * @param   duration  Duration of the zoom animation in milliseconds\r\n     * @return            Zoom animation\r\n     */\r\n    zoom(start, end, duration, priority) {\r\n        if (this.get(\"zoomable\", true)) {\r\n            this._updateFinals(start, end);\r\n            if (this.get(\"start\") !== start || this.get(\"end\") != end) {\r\n                let sAnimation = this._sAnimation;\r\n                let eAnimation = this._eAnimation;\r\n                if (start > end) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n                if (start < -maxDeviation) {\r\n                    start = -maxDeviation;\r\n                }\r\n                if (end > 1 + maxDeviation) {\r\n                    end = 1 + maxDeviation;\r\n                }\r\n                let maxZoomFactor = this.getPrivate(\"maxZoomFactor\", this.get(\"maxZoomFactor\", 100));\r\n                let maxZoomFactorReal = maxZoomFactor;\r\n                if (!$type.isNumber(duration)) {\r\n                    duration = this.get(\"interpolationDuration\", 0);\r\n                }\r\n                if (!priority) {\r\n                    priority = \"end\";\r\n                }\r\n                if (end === 1 && start !== 0) {\r\n                    if (start < this.get(\"start\", 0)) {\r\n                        priority = \"start\";\r\n                    }\r\n                    else {\r\n                        priority = \"end\";\r\n                    }\r\n                }\r\n                if (start === 0 && end !== 1) {\r\n                    if (end > this.get(\"end\", 1)) {\r\n                        priority = \"end\";\r\n                    }\r\n                    else {\r\n                        priority = \"start\";\r\n                    }\r\n                }\r\n                let minZoomCount = this.get(\"minZoomCount\", 0);\r\n                const dataItems = this.dataItems;\r\n                if (dataItems && dataItems.length < minZoomCount) {\r\n                    minZoomCount = dataItems.length;\r\n                }\r\n                let maxZoomCount = this.get(\"maxZoomCount\", Infinity);\r\n                if ($type.isNumber(minZoomCount)) {\r\n                    maxZoomFactor = maxZoomFactorReal / minZoomCount;\r\n                }\r\n                let minZoomFactor = 1;\r\n                if ($type.isNumber(maxZoomCount)) {\r\n                    minZoomFactor = maxZoomFactorReal / maxZoomCount;\r\n                }\r\n                // need one more\r\n                if (start > end) {\r\n                    [start, end] = [end, start];\r\n                }\r\n                // most likely we are dragging left scrollbar grip here, so we tend to modify end\r\n                if (priority === \"start\") {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            end = start + 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // add to the end\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                    //unless end is > 0\r\n                    if (end > 1 && end - start < 1 / maxZoomFactor) {\r\n                        //end = 1;\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                // most likely we are dragging right, so we modify left\r\n                else {\r\n                    if (maxZoomCount > 0) {\r\n                        // add to the end\r\n                        if (1 / (end - start) < minZoomFactor) {\r\n                            start = end - 1 / minZoomFactor;\r\n                        }\r\n                    }\r\n                    // remove from start\r\n                    if (1 / (end - start) > maxZoomFactor) {\r\n                        start = end - 1 / maxZoomFactor;\r\n                    }\r\n                    if (start < 0 && end - start < 1 / maxZoomFactor) {\r\n                        //start = 0;\r\n                        end = start + 1 / maxZoomFactor;\r\n                    }\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    end = start + 1 / maxZoomFactor;\r\n                }\r\n                if (1 / (end - start) > maxZoomFactor) {\r\n                    start = end - 1 / maxZoomFactor;\r\n                }\r\n                if (maxZoomCount != null && minZoomCount != null && (start == this.get(\"start\") && end == this.get(\"end\"))) {\r\n                    const chart = this.chart;\r\n                    if (chart) {\r\n                        chart._handleAxisSelection(this, true);\r\n                    }\r\n                }\r\n                if (((sAnimation && sAnimation.playing && sAnimation.to == start) || this.get(\"start\") == start) && ((eAnimation && eAnimation.playing && eAnimation.to == end) || this.get(\"end\") == end)) {\r\n                    return;\r\n                }\r\n                if (duration > 0) {\r\n                    let easing = this.get(\"interpolationEasing\");\r\n                    let sAnimation, eAnimation;\r\n                    if (this.get(\"start\") != start) {\r\n                        sAnimation = this.animate({ key: \"start\", to: start, duration: duration, easing: easing });\r\n                    }\r\n                    if (this.get(\"end\") != end) {\r\n                        eAnimation = this.animate({ key: \"end\", to: end, duration: duration, easing: easing });\r\n                    }\r\n                    this._sAnimation = sAnimation;\r\n                    this._eAnimation = eAnimation;\r\n                    if (sAnimation) {\r\n                        return sAnimation;\r\n                    }\r\n                    else if (eAnimation) {\r\n                        return eAnimation;\r\n                    }\r\n                }\r\n                else {\r\n                    this.set(\"start\", start);\r\n                    this.set(\"end\", end);\r\n                    this.root.events.once(\"frameended\", () => {\r\n                        this.markDirtyKey(\"start\");\r\n                    });\r\n                }\r\n            }\r\n            else {\r\n                if (this._sAnimation) {\r\n                    this._sAnimation.stop();\r\n                }\r\n                if (this._eAnimation) {\r\n                    this._eAnimation.stop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A list of series using this axis.\r\n     *\r\n     * @return Series\r\n     */\r\n    get series() {\r\n        return this._series;\r\n    }\r\n    _processAxisRange(dataItem, themeTags) {\r\n        dataItem.setRaw(\"isRange\", true);\r\n        this._createAssets(dataItem, themeTags);\r\n        this._rangesDirty = true;\r\n        this._prepareDataItem(dataItem);\r\n        const above = dataItem.get(\"above\");\r\n        const container = this.topGridContainer;\r\n        const grid = dataItem.get(\"grid\");\r\n        if (above && grid) {\r\n            container.children.moveValue(grid);\r\n        }\r\n        const fill = dataItem.get(\"axisFill\");\r\n        if (above && fill) {\r\n            container.children.moveValue(fill);\r\n        }\r\n    }\r\n    _prepareDataItem(_dataItem, _index) { }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n    }\r\n    _calculateTotals() {\r\n    }\r\n    _updateAxisRanges() {\r\n        this._bullets = {};\r\n        this.axisRanges.each((axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n        $array.each(this._seriesAxisRanges, (axisRange) => {\r\n            this._prepareDataItem(axisRange);\r\n        });\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const ghostLabel = this.ghostLabel;\r\n        if (ghostLabel) {\r\n            if (this.get(\"fixAxisSize\")) {\r\n                ghostLabel.set(\"visible\", true);\r\n            }\r\n            else {\r\n                ghostLabel.set(\"visible\", false);\r\n            }\r\n        }\r\n        if (this.isDirty(\"start\") || this.isDirty(\"end\")) {\r\n            const chart = this.chart;\r\n            if (chart) {\r\n                chart._updateCursor();\r\n            }\r\n            let start = this.get(\"start\", 0);\r\n            let end = this.get(\"end\", 1);\r\n            let maxDeviation = this.get(\"maxDeviation\", 0.5) * Math.min(1, (end - start));\r\n            if (start < -maxDeviation) {\r\n                let delta = start + maxDeviation;\r\n                start = -maxDeviation;\r\n                this.setRaw(\"start\", start);\r\n                if (this.isDirty(\"end\")) {\r\n                    this.setRaw(\"end\", end - delta);\r\n                }\r\n            }\r\n            if (end > 1 + maxDeviation) {\r\n                let delta = end - 1 - maxDeviation;\r\n                end = 1 + maxDeviation;\r\n                this.setRaw(\"end\", end);\r\n                if (this.isDirty(\"start\")) {\r\n                    this.setRaw(\"start\", start - delta);\r\n                }\r\n            }\r\n        }\r\n        const renderer = this.get(\"renderer\");\r\n        renderer._start = this.get(\"start\");\r\n        renderer._end = this.get(\"end\");\r\n        renderer._inversed = renderer.get(\"inversed\", false);\r\n        renderer._axisLength = renderer.axisLength() / (renderer._end - renderer._start);\r\n        renderer._updateLC();\r\n        if (this.isDirty(\"tooltip\")) {\r\n            const tooltip = this.get(\"tooltip\");\r\n            if (tooltip) {\r\n                const rendererTags = renderer.get(\"themeTags\");\r\n                tooltip.addTag(\"axis\");\r\n                tooltip.addTag(this.className.toLowerCase());\r\n                tooltip._applyThemes();\r\n                if (rendererTags) {\r\n                    tooltip.set(\"themeTags\", $utils.mergeTags(tooltip.get(\"themeTags\"), rendererTags));\r\n                    tooltip.label._applyThemes();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipBounds() {\r\n        const tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            this.get(\"renderer\").updateTooltipBounds(tooltip);\r\n        }\r\n    }\r\n    _updateBounds() {\r\n        super._updateBounds();\r\n        this._updateTooltipBounds();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processChart(chart) {\r\n        this.chart = chart;\r\n        const renderer = this.get(\"renderer\");\r\n        renderer.chart = chart;\r\n        chart.gridContainer.children.push(this.gridContainer);\r\n        chart.topGridContainer.children.push(this.topGridContainer);\r\n        chart.axisHeadersContainer.children.push(this.axisHeader);\r\n        this.on(\"start\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        this.on(\"end\", () => {\r\n            chart._handleAxisSelection(this);\r\n        });\r\n        chart.plotContainer.onPrivate(\"width\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.plotContainer.onPrivate(\"height\", () => {\r\n            this.markDirtySize();\r\n        });\r\n        chart.processAxis(this);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    hideDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, true);\r\n        return super.hideDataItem(dataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    showDataItem(dataItem) {\r\n        this._toggleFHDataItem(dataItem, false);\r\n        return super.showDataItem(dataItem);\r\n    }\r\n    _toggleFHDataItem(dataItem, forceHidden) {\r\n        const fh = \"forceHidden\";\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            label.set(fh, forceHidden);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.set(fh, forceHidden);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.set(fh, forceHidden);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.set(fh, forceHidden);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.set(fh, forceHidden);\r\n            }\r\n        }\r\n    }\r\n    _toggleDataItem(dataItem, visible) {\r\n        const label = dataItem.get(\"label\");\r\n        const v = \"visible\";\r\n        if (label) {\r\n            label.setPrivate(v, visible);\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            grid.setPrivate(v, visible);\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            tick.setPrivate(v, visible);\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            axisFill.setPrivate(v, visible);\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite.setPrivate(v, visible);\r\n            }\r\n        }\r\n    }\r\n    _createAssets(dataItem, tags, minor) {\r\n        var _a, _b, _c;\r\n        const renderer = this.get(\"renderer\");\r\n        let m = \"minor\";\r\n        const label = dataItem.get(\"label\");\r\n        if (!label) {\r\n            renderer.makeLabel(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = label.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_a = label.parent) === null || _a === void 0 ? void 0 : _a.children.removeValue(label);\r\n                renderer.makeLabel(dataItem, tags);\r\n                label.dispose();\r\n                renderer.labels.removeValue(label);\r\n            }\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (!grid) {\r\n            renderer.makeGrid(dataItem, tags);\r\n        }\r\n        else {\r\n            let themeTags = grid.get(\"themeTags\");\r\n            let remove = false;\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_b = grid.parent) === null || _b === void 0 ? void 0 : _b.children.removeValue(grid);\r\n                renderer.makeGrid(dataItem, tags);\r\n                grid.dispose();\r\n                renderer.grid.removeValue(grid);\r\n            }\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (!tick) {\r\n            renderer.makeTick(dataItem, tags);\r\n        }\r\n        else {\r\n            let remove = false;\r\n            let themeTags = tick.get(\"themeTags\");\r\n            if (minor) {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) == -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            else {\r\n                if ((themeTags === null || themeTags === void 0 ? void 0 : themeTags.indexOf(m)) != -1) {\r\n                    remove = true;\r\n                }\r\n            }\r\n            if (remove) {\r\n                (_c = tick.parent) === null || _c === void 0 ? void 0 : _c.children.removeValue(tick);\r\n                renderer.makeTick(dataItem, tags);\r\n                tick.dispose();\r\n                renderer.ticks.removeValue(tick);\r\n            }\r\n        }\r\n        if (!minor && !dataItem.get(\"axisFill\")) {\r\n            renderer.makeAxisFill(dataItem, tags);\r\n        }\r\n        else if (minor && !dataItem.get(\"axisFill\") && this.get(\"minorAxisFillsEnabled\")) {\r\n            renderer.makeAxisFill(dataItem, tags);\r\n        }\r\n        this._processBullet(dataItem);\r\n    }\r\n    _processBullet(dataItem) {\r\n        let bullet = dataItem.get(\"bullet\");\r\n        let axisBullet = this.get(\"bullet\");\r\n        if (!bullet && axisBullet && !dataItem.get(\"isRange\")) {\r\n            bullet = axisBullet(this._root, this, dataItem);\r\n        }\r\n        if (bullet) {\r\n            bullet.axis = this;\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                sprite._setDataItem(dataItem);\r\n                dataItem.setRaw(\"bullet\", bullet);\r\n                if (!sprite.parent) {\r\n                    this.bulletsContainer.children.push(sprite);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _afterChanged() {\r\n        super._afterChanged();\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            chart._updateChartLayout();\r\n            chart.axisHeadersContainer.markDirtySize();\r\n        }\r\n        this.get(\"renderer\")._updatePositions();\r\n        this._seriesAdded = false;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    disposeDataItem(dataItem) {\r\n        super.disposeDataItem(dataItem);\r\n        const renderer = this.get(\"renderer\");\r\n        const label = dataItem.get(\"label\");\r\n        if (label) {\r\n            renderer.labels.removeValue(label);\r\n            label.dispose();\r\n        }\r\n        const tick = dataItem.get(\"tick\");\r\n        if (tick) {\r\n            renderer.ticks.removeValue(tick);\r\n            tick.dispose();\r\n        }\r\n        const grid = dataItem.get(\"grid\");\r\n        if (grid) {\r\n            renderer.grid.removeValue(grid);\r\n            grid.dispose();\r\n        }\r\n        const axisFill = dataItem.get(\"axisFill\");\r\n        if (axisFill) {\r\n            renderer.axisFills.removeValue(axisFill);\r\n            axisFill.dispose();\r\n        }\r\n        const bullet = dataItem.get(\"bullet\");\r\n        if (bullet) {\r\n            bullet.dispose();\r\n        }\r\n    }\r\n    _updateGhost() {\r\n        this.setPrivate(\"cellWidth\", this.getCellWidthPosition() * this.get(\"renderer\").axisLength());\r\n        const ghostLabel = this.ghostLabel;\r\n        if (ghostLabel) {\r\n            if (!ghostLabel.isHidden()) {\r\n                const bounds = ghostLabel.localBounds();\r\n                const gWidth = Math.ceil(bounds.right - bounds.left);\r\n                let text = ghostLabel.get(\"text\");\r\n                $array.each(this.dataItems, (dataItem) => {\r\n                    const label = dataItem.get(\"label\");\r\n                    if (label && !label.isHidden()) {\r\n                        const bounds = label.localBounds();\r\n                        const w = Math.ceil(bounds.right - bounds.left);\r\n                        if (w > gWidth) {\r\n                            text = label.text._getText();\r\n                        }\r\n                    }\r\n                });\r\n                ghostLabel.set(\"text\", text);\r\n            }\r\n            let start = this.get(\"start\", 0);\r\n            let end = this.get(\"end\", 1);\r\n            this.get(\"renderer\").updateLabel(ghostLabel, start + (end - start) * 0.5);\r\n        }\r\n    }\r\n    _handleCursorPosition(position, snapToSeries) {\r\n        const renderer = this.get(\"renderer\");\r\n        position = renderer.toAxisPosition(position);\r\n        this._cursorPosition = position;\r\n        this._snapToSeries = snapToSeries;\r\n        this.updateTooltip();\r\n    }\r\n    /**\r\n     * Can be called when axis zoom changes and you need to update tooltip\r\n     * position.\r\n     */\r\n    updateTooltip() {\r\n        const snapToSeries = this._snapToSeries;\r\n        let position = this._cursorPosition;\r\n        const tooltip = this.get(\"tooltip\");\r\n        const renderer = this.get(\"renderer\");\r\n        if ($type.isNumber(position)) {\r\n            $array.each(this.series, (series) => {\r\n                if (series.get(\"baseAxis\") === this) {\r\n                    const dataItem = this.getSeriesItem(series, position, this.get(\"tooltipLocation\"));\r\n                    if (snapToSeries && snapToSeries.indexOf(series) != -1) {\r\n                        series.updateLegendMarker(dataItem);\r\n                        series.updateLegendValue(dataItem);\r\n                        series._settings.tooltipDataItem = dataItem;\r\n                    }\r\n                    else {\r\n                        series.showDataItemTooltip(dataItem);\r\n                        series.setRaw(\"tooltipDataItem\", dataItem);\r\n                    }\r\n                }\r\n            });\r\n            if (this.get(\"snapTooltip\")) {\r\n                position = this.roundAxisPosition(position, this.get(\"tooltipLocation\", 0.5));\r\n            }\r\n            this.setPrivateRaw(\"tooltipPosition\", position);\r\n            if (tooltip) {\r\n                renderer.updateTooltipBounds(tooltip);\r\n                if (!$type.isNaN(position)) {\r\n                    this._updateTooltipText(tooltip, position);\r\n                    renderer.positionTooltip(tooltip, position);\r\n                    if (position < this.get(\"start\", 0) || position > this.get(\"end\", 1)) {\r\n                        tooltip.hide(0);\r\n                    }\r\n                    else {\r\n                        tooltip.show(0);\r\n                    }\r\n                }\r\n                else {\r\n                    tooltip.hide(0);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipText(tooltip, position) {\r\n        tooltip.label.set(\"text\", this.getTooltipText(position));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    roundAxisPosition(position, _location) {\r\n        return position;\r\n    }\r\n    _handleSeriesRemoved() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorShow() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.show();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    handleCursorHide() {\r\n        let tooltip = this.get(\"tooltip\");\r\n        if (tooltip) {\r\n            tooltip.hide();\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processSeriesDataItem(_dataItem, _fields) {\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._sizeDirty = false;\r\n        this._rangesDirty = false;\r\n    }\r\n    /**\r\n     * Converts pixel coordinate to a relative position on axis.\r\n     *\r\n     * @param   coordinate  Coordinate\r\n     * @return              Relative position\r\n     */\r\n    coordinateToPosition(coordinate) {\r\n        const renderer = this.get(\"renderer\");\r\n        return renderer.toAxisPosition(coordinate / renderer.axisLength());\r\n    }\r\n    /**\r\n     * Converts relative position of the plot area to relative position of the\r\n     * axis with zoom taken into account.\r\n     *\r\n     * @param position Position\r\n     * @return Relative position\r\n     */\r\n    toAxisPosition(position) {\r\n        return this.get(\"renderer\").toAxisPosition(position);\r\n    }\r\n    /**\r\n     * Converts relative position of the axis to a global position taking current\r\n     * zoom into account (opposite to what `toAxisPosition` does).\r\n     *\r\n     * @since 5.4.2\r\n     * @param position Position\r\n     * @return Global position\r\n     */\r\n    toGlobalPosition(position) {\r\n        return this.get(\"renderer\").toGlobalPosition(position);\r\n    }\r\n    /**\r\n     * Adjusts position with inversed taken into account.\r\n     *\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        return this.get(\"renderer\").fixPosition(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    shouldGap(_dataItem, _nextItem, _autoGapCount, _fieldName) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Creates and returns an axis range object.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/axis-ranges/} for more info\r\n     * @param   axisDataItem  Axis data item\r\n     * @return                Axis range\r\n     */\r\n    createAxisRange(axisDataItem) {\r\n        return this.axisRanges.push(axisDataItem);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _groupSeriesData(_series) { }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        return 0.05;\r\n    }\r\n}\r\nObject.defineProperty(Axis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"Axis\"\r\n});\r\nObject.defineProperty(Axis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Component.classNames.concat([Axis.className])\r\n});\r\n//# sourceMappingURL=Axis.js.map","import { DataItem } from \"../../../core/render/Component\";\r\nimport { Axis } from \"./Axis\";\r\nimport { MultiDisposer } from \"../../../core/util/Disposer\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Creates a value axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/value-axis/} for more info\r\n * @important\r\n */\r\nexport class ValueAxis extends Axis {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_dirtyExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dirtySelectionExtremes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_dseHandled\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_deltaMinMax\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_minReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_maxReal\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minRealLog\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_baseValue\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_syncDp\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_minLogAdjusted\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtyExtremes() {\r\n        this._dirtyExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    markDirtySelectionExtremes() {\r\n        this._dirtySelectionExtremes = true;\r\n        this.markDirty();\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\r\n        this.setPrivateRaw(\"name\", \"value\");\r\n        this.addTag(\"value\");\r\n        super._afterNew();\r\n    }\r\n    _prepareChildren() {\r\n        var _a;\r\n        super._prepareChildren();\r\n        if (this.isDirty(\"syncWithAxis\")) {\r\n            let previousValue = this._prevSettings.syncWithAxis;\r\n            if (previousValue) {\r\n                if (this._syncDp) {\r\n                    this._syncDp.dispose();\r\n                }\r\n            }\r\n            let syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                this._syncDp = new MultiDisposer([\r\n                    syncWithAxis.onPrivate(\"selectionMinFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    }),\r\n                    syncWithAxis.onPrivate(\"selectionMaxFinal\", () => {\r\n                        this._dirtySelectionExtremes = true;\r\n                    })\r\n                ]);\r\n            }\r\n        }\r\n        let someDirty = false;\r\n        if (this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"maxPrecision\") || this.isDirty(\"numberFormat\")) {\r\n            someDirty = true;\r\n            (_a = this.ghostLabel) === null || _a === void 0 ? void 0 : _a.set(\"text\", \"\");\r\n        }\r\n        //if (this._dirtyExtremes || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"min\") || this.isDirty(\"max\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"maxPrecision\")) {\r\n        if (this._sizeDirty || this._dirtyExtremes || this._valuesDirty || someDirty || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"extraMin\") || this.isDirty(\"extraMax\") || this.isDirty(\"logarithmic\") || this.isDirty(\"treatZeroAs\") || this.isDirty(\"baseValue\") || this.isDirty(\"strictMinMax\") || this.isDirty(\"strictMinMaxSelection\")) {\r\n            this._getMinMax();\r\n            this._dirtyExtremes = false;\r\n        }\r\n        this._handleSizeDirty();\r\n        if (this._dirtySelectionExtremes && !this._isPanning && this.get(\"autoZoom\", true)) {\r\n            const chart = this.chart;\r\n            let getMM = false;\r\n            // #1563\r\n            if (chart) {\r\n                const letter = this.get(\"renderer\").getPrivate(\"letter\");\r\n                if (letter == \"Y\") {\r\n                    chart.xAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n                else if (letter == \"X\") {\r\n                    chart.yAxes.each((axis) => {\r\n                        if (axis.className != \"ValueAxis\") {\r\n                            getMM = true;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            if (getMM) {\r\n                this._getSelectionMinMax();\r\n            }\r\n            this._dirtySelectionExtremes = false;\r\n        }\r\n        this._groupData();\r\n        if (this._sizeDirty || this._valuesDirty || this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"min\") || this.isPrivateDirty(\"selectionMax\") || this.isPrivateDirty(\"selectionMin\") || this.isPrivateDirty(\"max\") || this.isPrivateDirty(\"step\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\") || this.isDirty(\"logarithmic\")) {\r\n            this._handleRangeChange();\r\n            this._prepareAxisItems();\r\n            this._updateAxisRanges();\r\n        }\r\n        this._baseValue = this.baseValue();\r\n    }\r\n    _handleSizeDirty() {\r\n        if (this._sizeDirty && !this._dseHandled) {\r\n            this._dirtySelectionExtremes = true;\r\n            this._dseHandled = true;\r\n            if (this.getPrivate(\"selectionMinFinal\") != this.getPrivate(\"selectionMin\") || this.getPrivate(\"selectionMaxFinal\") != this.getPrivate(\"selectionMax\")) {\r\n                this._dirtySelectionExtremes = false;\r\n            }\r\n        }\r\n    }\r\n    _clearDirty() {\r\n        super._clearDirty();\r\n        this._dseHandled = false;\r\n    }\r\n    _groupData() {\r\n    }\r\n    _formatText(value) {\r\n        const numberFormat = this.get(\"numberFormat\");\r\n        const formatter = this.getNumberFormatter();\r\n        let text = \"\";\r\n        if (numberFormat) {\r\n            text = formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            text = formatter.format(value, undefined, this.getPrivate(\"stepDecimalPlaces\"));\r\n        }\r\n        return text;\r\n    }\r\n    _prepareAxisItems() {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            const logarithmic = this.get(\"logarithmic\");\r\n            const step = this.getPrivate(\"step\");\r\n            const selectionMin = this.getPrivate(\"selectionMin\");\r\n            const selectionMax = this.getPrivate(\"selectionMax\") + step;\r\n            let value = selectionMin - step;\r\n            let differencePower = 1;\r\n            let minLog = min;\r\n            if (logarithmic) {\r\n                value = this._minLogAdjusted;\r\n                if (value < selectionMin) {\r\n                    while (value < selectionMin) {\r\n                        value += step;\r\n                    }\r\n                }\r\n                minLog = value;\r\n                if (minLog <= 0) {\r\n                    let minRealLog = this._minRealLog;\r\n                    if (!$type.isNumber(minRealLog)) {\r\n                        minRealLog = 1;\r\n                    }\r\n                    minLog = Math.pow(10, Math.log(minRealLog) * Math.LOG10E);\r\n                    if (step < 1) {\r\n                        if ($type.isNumber(this._minRealLog)) {\r\n                            minLog = this._minRealLog;\r\n                        }\r\n                        else {\r\n                            minLog = Math.pow(10, -50);\r\n                        }\r\n                    }\r\n                }\r\n                differencePower = Math.log(selectionMax - step) * Math.LOG10E - Math.log(minLog) * Math.LOG10E;\r\n                if (differencePower > 2) {\r\n                    value = Math.pow(10, Math.log(minLog) * Math.LOG10E - 50);\r\n                }\r\n            }\r\n            /// minor grid\r\n            const renderer = this.get(\"renderer\");\r\n            const minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\r\n            const minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\r\n            let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n            const stepAdjusted = Math.round(step / stepPower);\r\n            let minorGridCount = 2;\r\n            if ($math.round(stepAdjusted / 5, 10) % 1 == 0) {\r\n                minorGridCount = 5;\r\n            }\r\n            if ($math.round(stepAdjusted / 10, 10) % 1 == 0) {\r\n                minorGridCount = 10;\r\n            }\r\n            let minorStep = step / minorGridCount;\r\n            // end of minor grid\r\n            let i = 0;\r\n            let m = 0;\r\n            let previous = -Infinity;\r\n            while (value < selectionMax) {\r\n                let dataItem;\r\n                if (this.dataItems.length < i + 1) {\r\n                    dataItem = new DataItem(this, undefined, {});\r\n                    this._dataItems.push(dataItem);\r\n                    this.processDataItem(dataItem);\r\n                }\r\n                else {\r\n                    dataItem = this.dataItems[i];\r\n                }\r\n                this._createAssets(dataItem, []);\r\n                this._toggleDataItem(dataItem, true);\r\n                dataItem.setRaw(\"value\", value);\r\n                const label = dataItem.get(\"label\");\r\n                if (label) {\r\n                    label.set(\"text\", this._formatText(value));\r\n                }\r\n                this._prepareDataItem(dataItem);\r\n                let nextValue = value;\r\n                if (!logarithmic) {\r\n                    nextValue += step;\r\n                }\r\n                else {\r\n                    if (differencePower > 2) {\r\n                        nextValue = Math.pow(10, Math.log(minLog) * Math.LOG10E + i - 50);\r\n                    }\r\n                    else {\r\n                        nextValue += step;\r\n                    }\r\n                }\r\n                // minor grid\r\n                if (minorGridEnabled) {\r\n                    let minorValue = value + minorStep;\r\n                    if (logarithmic) {\r\n                        if (differencePower > 2) {\r\n                            let minorMinMaxStep = this._adjustMinMax(value, nextValue, 10);\r\n                            minorStep = minorMinMaxStep.step;\r\n                        }\r\n                        minorValue = value + minorStep;\r\n                    }\r\n                    while (minorValue < nextValue - step * 0.00000000001) {\r\n                        let minorDataItem;\r\n                        if (this.minorDataItems.length < m + 1) {\r\n                            minorDataItem = new DataItem(this, undefined, {});\r\n                            this.minorDataItems.push(minorDataItem);\r\n                            this.processDataItem(minorDataItem);\r\n                        }\r\n                        else {\r\n                            minorDataItem = this.minorDataItems[m];\r\n                        }\r\n                        this._createAssets(minorDataItem, [\"minor\"], true);\r\n                        this._toggleDataItem(minorDataItem, true);\r\n                        minorDataItem.setRaw(\"value\", minorValue);\r\n                        const minorLabel = minorDataItem.get(\"label\");\r\n                        if (minorLabel) {\r\n                            if (minorLabelsEnabled) {\r\n                                minorLabel.set(\"text\", this._formatText(minorValue));\r\n                            }\r\n                            else {\r\n                                minorLabel.setPrivate(\"visible\", false);\r\n                            }\r\n                        }\r\n                        this._prepareDataItem(minorDataItem);\r\n                        minorValue += minorStep;\r\n                        m++;\r\n                    }\r\n                }\r\n                value = nextValue;\r\n                if (previous == value) {\r\n                    break;\r\n                }\r\n                let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n                if (stepPower < 1 && !logarithmic) {\r\n                    // exponent is less then 1 too. Count decimals of exponent\r\n                    let decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 2;\r\n                    // round value to avoid floating point issues\r\n                    value = $math.round(value, decCount);\r\n                }\r\n                i++;\r\n                // #103520\r\n                if (logarithmic && differencePower <= 2) {\r\n                    if (value - step < step) {\r\n                        value = step;\r\n                    }\r\n                }\r\n                previous = value;\r\n            }\r\n            for (let j = i; j < this.dataItems.length; j++) {\r\n                this._toggleDataItem(this.dataItems[j], false);\r\n            }\r\n            for (let j = m; j < this.minorDataItems.length; j++) {\r\n                this._toggleDataItem(this.minorDataItems[j], false);\r\n            }\r\n            $array.each(this.series, (series) => {\r\n                if (series.inited) {\r\n                    series._markDirtyAxes();\r\n                }\r\n            });\r\n            this._updateGhost();\r\n        }\r\n    }\r\n    _prepareDataItem(dataItem, count) {\r\n        let renderer = this.get(\"renderer\");\r\n        let value = dataItem.get(\"value\");\r\n        let endValue = dataItem.get(\"endValue\");\r\n        let position = this.valueToPosition(value);\r\n        let endPosition = position;\r\n        let fillEndPosition = this.valueToPosition(value + this.getPrivate(\"step\"));\r\n        if ($type.isNumber(endValue)) {\r\n            endPosition = this.valueToPosition(endValue);\r\n            fillEndPosition = endPosition;\r\n        }\r\n        if (dataItem.get(\"isRange\")) {\r\n            if (endValue == null) {\r\n                fillEndPosition = position;\r\n            }\r\n        }\r\n        let labelEndPosition = endPosition;\r\n        let labelEndValue = dataItem.get(\"labelEndValue\");\r\n        if (labelEndValue != null) {\r\n            labelEndPosition = this.valueToPosition(labelEndValue);\r\n        }\r\n        renderer.updateLabel(dataItem.get(\"label\"), position, labelEndPosition, count);\r\n        const grid = dataItem.get(\"grid\");\r\n        renderer.updateGrid(grid, position, endPosition);\r\n        if (grid) {\r\n            if (value == this.get(\"baseValue\", 0)) {\r\n                grid.addTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n            else if (grid.hasTag(\"base\")) {\r\n                grid.removeTag(\"base\");\r\n                grid._applyThemes();\r\n            }\r\n        }\r\n        renderer.updateTick(dataItem.get(\"tick\"), position, labelEndPosition, count);\r\n        renderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\r\n        this._processBullet(dataItem);\r\n        renderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\r\n        if (!dataItem.get(\"isRange\")) {\r\n            const fillRule = this.get(\"fillRule\");\r\n            if (fillRule) {\r\n                fillRule(dataItem);\r\n            }\r\n        }\r\n    }\r\n    _handleRangeChange() {\r\n        let selectionMin = this.positionToValue(this.get(\"start\", 0));\r\n        let selectionMax = this.positionToValue(this.get(\"end\", 1));\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let stepDecimalPlaces = $utils.decimalPlaces(minMaxStep.step);\r\n        this.setPrivateRaw(\"stepDecimalPlaces\", stepDecimalPlaces);\r\n        selectionMin = $math.round(selectionMin, stepDecimalPlaces);\r\n        selectionMax = $math.round(selectionMax, stepDecimalPlaces);\r\n        minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n        let step = minMaxStep.step;\r\n        selectionMin = minMaxStep.min;\r\n        selectionMax = minMaxStep.max;\r\n        if (this.getPrivate(\"selectionMin\") !== selectionMin || this.getPrivate(\"selectionMax\") !== selectionMax || this.getPrivate(\"step\") !== step) {\r\n            // do not change to setPrivate, will cause SO\r\n            this.setPrivateRaw(\"selectionMin\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMax\", selectionMax);\r\n            this.setPrivateRaw(\"step\", step);\r\n        }\r\n    }\r\n    /**\r\n     * Converts a relative position to a corresponding numeric value from axis\r\n     * scale.\r\n     *\r\n     * @param   position  Relative position\r\n     * @return            Value\r\n     */\r\n    positionToValue(position) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return position * (max - min) + min;\r\n        }\r\n        else {\r\n            return Math.pow(Math.E, (position * ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E)) + Math.log(min) * Math.LOG10E) / Math.LOG10E);\r\n        }\r\n    }\r\n    /**\r\n     * Convers value to a relative position on axis.\r\n     *\r\n     * @param   value  Value\r\n     * @return         Relative position\r\n     */\r\n    valueToPosition(value) {\r\n        const min = this.getPrivate(\"min\");\r\n        const max = this.getPrivate(\"max\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    valueToFinalPosition(value) {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        if (!this.get(\"logarithmic\")) {\r\n            return (value - min) / (max - min);\r\n        }\r\n        else {\r\n            if (value <= 0) {\r\n                let treatZeroAs = this.get(\"treatZeroAs\");\r\n                if ($type.isNumber(treatZeroAs)) {\r\n                    value = treatZeroAs;\r\n                }\r\n            }\r\n            return (Math.log(value) * Math.LOG10E - Math.log(min) * Math.LOG10E) / ((Math.log(max) * Math.LOG10E - Math.log(min) * Math.LOG10E));\r\n        }\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getX(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific value.\r\n     *\r\n     * @param   value     Numeric value\r\n     * @param   location  Location\r\n     * @param   baseValue Base value\r\n     * @return            X coordinate\r\n     */\r\n    getY(value, location, baseValue) {\r\n        value = baseValue + (value - baseValue) * location;\r\n        const position = this.valueToPosition(value);\r\n        return this._settings.renderer.positionToCoordinate(position);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateX(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionX(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemX\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedXValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateY(dataItem, field, _cellLocation, axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, _cellLocation, axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionY(dataItem, field, _cellLocation, axisLocation) {\r\n        let value = dataItem.get(field);\r\n        const stackToItem = dataItem.get(\"stackToItemY\");\r\n        if (stackToItem) {\r\n            const series = dataItem.component;\r\n            value = value * axisLocation + series.getStackedYValueWorking(dataItem, field);\r\n        }\r\n        else {\r\n            value = this._baseValue + (value - this._baseValue) * axisLocation;\r\n        }\r\n        return this.valueToPosition(value);\r\n    }\r\n    /**\r\n     * Returns relative position of axis' `baseValue`.\r\n     *\r\n     * @return  Base value position\r\n     */\r\n    basePosition() {\r\n        return this.valueToPosition(this.baseValue());\r\n    }\r\n    /**\r\n     * Base value of the [[ValueAxis]], which determines positive and negative\r\n     * values.\r\n     *\r\n     * @return Base value\r\n     */\r\n    baseValue() {\r\n        const min = Math.min(this.getPrivate(\"minFinal\", -Infinity), this.getPrivate(\"selectionMin\", -Infinity));\r\n        const max = Math.max(this.getPrivate(\"maxFinal\", Infinity), this.getPrivate(\"selectionMax\", Infinity));\r\n        let baseValue = this.get(\"baseValue\", 0);\r\n        if (baseValue < min) {\r\n            baseValue = min;\r\n        }\r\n        if (baseValue > max) {\r\n            baseValue = max;\r\n        }\r\n        return baseValue;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    cellEndValue(value) {\r\n        return value;\r\n    }\r\n    fixSmallStep(step) {\r\n        // happens because of floating point error\r\n        if (1 + step === 1) {\r\n            step *= 2;\r\n            return this.fixSmallStep(step);\r\n        }\r\n        return step;\r\n    }\r\n    _fixMin(min) {\r\n        return min;\r\n    }\r\n    _fixMax(max) {\r\n        return max;\r\n    }\r\n    _calculateTotals() {\r\n        if (this.get(\"calculateTotals\")) {\r\n            let series = this.series[0];\r\n            if (series) {\r\n                let startIndex = series.startIndex();\r\n                if (series.dataItems.length > 0) {\r\n                    if (startIndex > 0) {\r\n                        startIndex--;\r\n                    }\r\n                    let endIndex = series.endIndex();\r\n                    if (endIndex < series.dataItems.length) {\r\n                        endIndex++;\r\n                    }\r\n                    let field;\r\n                    let vc;\r\n                    if (series.get(\"yAxis\") == this) {\r\n                        field = \"valueY\";\r\n                        vc = \"vcy\";\r\n                    }\r\n                    else if (series.get(\"xAxis\") == this) {\r\n                        field = \"valueX\";\r\n                        vc = \"vcx\";\r\n                    }\r\n                    let fieldWorking = field + \"Working\";\r\n                    if (field) {\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            let sum = 0;\r\n                            let total = 0;\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            sum += value;\r\n                                            total += Math.abs(value);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                            $array.each(this.series, (series) => {\r\n                                if (!series.get(\"excludeFromTotal\")) {\r\n                                    let dataItem = series.dataItems[i];\r\n                                    if (dataItem) {\r\n                                        let value = dataItem.get(fieldWorking) * series.get(vc);\r\n                                        if (!$type.isNaN(value)) {\r\n                                            dataItem.set((field + \"Total\"), total);\r\n                                            dataItem.set((field + \"Sum\"), sum);\r\n                                            let totalPercent = value / total * 100;\r\n                                            if (total == 0) {\r\n                                                totalPercent = 0;\r\n                                            }\r\n                                            dataItem.set((field + \"TotalPercent\"), totalPercent);\r\n                                        }\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getSelectionMinMax() {\r\n        const min = this.getPrivate(\"minFinal\");\r\n        const max = this.getPrivate(\"maxFinal\");\r\n        const minDefined = this.get(\"min\");\r\n        const maxDefined = this.get(\"max\");\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (this.get(\"extraMin\") == null) {\r\n                extraMin = 0.1;\r\n            }\r\n            if (this.get(\"extraMax\") == null) {\r\n                extraMax = 0.2;\r\n            }\r\n        }\r\n        const gridCount = this.get(\"renderer\").gridCount();\r\n        const selectionStrictMinMax = this.get(\"strictMinMaxSelection\");\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            let selectionMin = max;\r\n            let selectionMax = min;\r\n            $array.each(this.series, (series) => {\r\n                if (!series.get(\"ignoreMinMax\")) {\r\n                    let seriesMin;\r\n                    let seriesMax;\r\n                    const outOfSelection = series.getPrivate(\"outOfSelection\");\r\n                    if (series.get(\"xAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minX = series.getPrivate(\"minX\");\r\n                            let maxX = series.getPrivate(\"maxX\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minX = undefined;\r\n                                maxX = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinX\", minX);\r\n                            seriesMax = series.getPrivate(\"selectionMaxX\", maxX);\r\n                        }\r\n                    }\r\n                    else if (series.get(\"yAxis\") === this) {\r\n                        if (!outOfSelection) {\r\n                            let minY = series.getPrivate(\"minY\");\r\n                            let maxY = series.getPrivate(\"maxY\");\r\n                            // solves #90085\r\n                            if (series.startIndex() != 0 || series.endIndex() != series.dataItems.length) {\r\n                                minY = undefined;\r\n                                maxY = undefined;\r\n                            }\r\n                            seriesMin = series.getPrivate(\"selectionMinY\", minY);\r\n                            seriesMax = series.getPrivate(\"selectionMaxY\", maxY);\r\n                        }\r\n                    }\r\n                    if (!series.isHidden() && !series.isShowing()) {\r\n                        if ($type.isNumber(seriesMin)) {\r\n                            selectionMin = Math.min(selectionMin, seriesMin);\r\n                        }\r\n                        if ($type.isNumber(seriesMax)) {\r\n                            selectionMax = Math.max(selectionMax, seriesMax);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.axisRanges.each((range) => {\r\n                if (range.get(\"affectsMinMax\")) {\r\n                    let value = range.get(\"value\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                    value = range.get(\"endValue\");\r\n                    if (value != null) {\r\n                        selectionMin = Math.min(selectionMin, value);\r\n                        selectionMax = Math.max(selectionMax, value);\r\n                    }\r\n                }\r\n            });\r\n            if (selectionMin > selectionMax) {\r\n                [selectionMin, selectionMax] = [selectionMax, selectionMin];\r\n            }\r\n            if ($type.isNumber(minDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = min;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._minReal)) {\r\n                    selectionMin = this._minReal;\r\n                }\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                if (strictMinMax) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            else if (strictMinMax) {\r\n                if ($type.isNumber(this._maxReal)) {\r\n                    selectionMax = this._maxReal;\r\n                }\r\n            }\r\n            if (selectionMin === selectionMax) {\r\n                let smin = selectionMin;\r\n                selectionMin -= this._deltaMinMax;\r\n                selectionMax += this._deltaMinMax;\r\n                if (selectionMin < min) {\r\n                    let d = smin - min;\r\n                    if (d == 0) {\r\n                        d = this._deltaMinMax;\r\n                    }\r\n                    selectionMin = smin - d;\r\n                    selectionMax = smin + d;\r\n                    strictMinMax = true;\r\n                }\r\n                let minMaxStep2 = this._adjustMinMax(selectionMin, selectionMax, gridCount, strictMinMax);\r\n                selectionMin = minMaxStep2.min;\r\n                selectionMax = minMaxStep2.max;\r\n            }\r\n            let selectionMinReal = selectionMin;\r\n            let selectionMaxReal = selectionMax;\r\n            let delta = selectionMax - selectionMin;\r\n            selectionMin -= delta * extraMin;\r\n            selectionMax += delta * extraMax;\r\n            let minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount);\r\n            selectionMin = minMaxStep.min;\r\n            selectionMax = minMaxStep.max;\r\n            selectionMin = $math.fitToRange(selectionMin, min, max);\r\n            selectionMax = $math.fitToRange(selectionMax, min, max);\r\n            // do it for the second time !important\t\t\t\r\n            minMaxStep = this._adjustMinMax(selectionMin, selectionMax, gridCount, true);\r\n            if (!strictMinMax) {\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            const syncWithAxis = this.get(\"syncWithAxis\");\r\n            if (syncWithAxis) {\r\n                minMaxStep = this._syncAxes(selectionMin, selectionMax, minMaxStep.step, syncWithAxis.getPrivate(\"selectionMinFinal\", syncWithAxis.getPrivate(\"minFinal\", 0)), syncWithAxis.getPrivate(\"selectionMaxFinal\", syncWithAxis.getPrivate(\"maxFinal\", 1)), syncWithAxis.getPrivate(\"selectionStepFinal\", syncWithAxis.getPrivate(\"step\", 1)));\r\n                if (minMaxStep.min < min) {\r\n                    minMaxStep.min = min;\r\n                }\r\n                if (minMaxStep.max > max) {\r\n                    minMaxStep.max = max;\r\n                }\r\n                selectionMin = minMaxStep.min;\r\n                selectionMax = minMaxStep.max;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = Math.max(selectionMin, minDefined);\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = Math.min(selectionMax, maxDefined);\r\n                }\r\n            }\r\n            if (selectionStrictMinMax) {\r\n                selectionMin = selectionMinReal - (selectionMaxReal - selectionMinReal) * extraMin;\r\n                selectionMax = selectionMaxReal + (selectionMaxReal - selectionMinReal) * extraMax;\r\n            }\r\n            if (strictMinMax) {\r\n                if ($type.isNumber(minDefined)) {\r\n                    selectionMin = minDefined;\r\n                }\r\n                else {\r\n                    selectionMin = selectionMinReal;\r\n                }\r\n                if ($type.isNumber(maxDefined)) {\r\n                    selectionMax = maxDefined;\r\n                }\r\n                else {\r\n                    selectionMax = selectionMaxReal;\r\n                }\r\n                if (selectionMax - selectionMin <= 0.00000001) {\r\n                    selectionMin -= this._deltaMinMax;\r\n                    selectionMax += this._deltaMinMax;\r\n                }\r\n                let delta = selectionMax - selectionMin;\r\n                selectionMin -= delta * extraMin;\r\n                selectionMax += delta * extraMax;\r\n            }\r\n            if (this.get(\"logarithmic\")) {\r\n                if (selectionMin <= 0) {\r\n                    selectionMin = selectionMinReal * (1 - Math.min(extraMin, 0.99));\r\n                }\r\n                if (selectionMin < min) {\r\n                    selectionMin = min;\r\n                }\r\n                if (selectionMax > max) {\r\n                    selectionMax = max;\r\n                }\r\n            }\r\n            let len = Math.min(20, Math.ceil(Math.log(this.getPrivate(\"maxZoomFactor\", 100) + 1) / Math.LN10) + 2);\r\n            let start = $math.round(this.valueToFinalPosition(selectionMin), len);\r\n            let end = $math.round(this.valueToFinalPosition(selectionMax), len);\r\n            this.setPrivateRaw(\"selectionMinFinal\", selectionMin);\r\n            this.setPrivateRaw(\"selectionMaxFinal\", selectionMax);\r\n            this.setPrivateRaw(\"selectionStepFinal\", minMaxStep.step);\r\n            this.zoom(start, end);\r\n        }\r\n    }\r\n    _getMinMax() {\r\n        let minDefined = this.get(\"min\");\r\n        let maxDefined = this.get(\"max\");\r\n        let min = Infinity;\r\n        let max = -Infinity;\r\n        let extraMin = this.get(\"extraMin\", 0);\r\n        let extraMax = this.get(\"extraMax\", 0);\r\n        if (this.get(\"logarithmic\")) {\r\n            if (!this.get(\"strictMinMax\")) {\r\n                if (this.get(\"extraMin\") == null) {\r\n                    extraMin = 0.1;\r\n                }\r\n                if (this.get(\"extraMax\") == null) {\r\n                    extraMax = 0.2;\r\n                }\r\n            }\r\n        }\r\n        let minDiff = Infinity;\r\n        $array.each(this.series, (series) => {\r\n            if (!series.get(\"ignoreMinMax\")) {\r\n                let seriesMin;\r\n                let seriesMax;\r\n                if (series.get(\"xAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minX\");\r\n                    seriesMax = series.getPrivate(\"maxX\");\r\n                }\r\n                else if (series.get(\"yAxis\") === this) {\r\n                    seriesMin = series.getPrivate(\"minY\");\r\n                    seriesMax = series.getPrivate(\"maxY\");\r\n                }\r\n                if ($type.isNumber(seriesMin) && $type.isNumber(seriesMax)) {\r\n                    min = Math.min(min, seriesMin);\r\n                    max = Math.max(max, seriesMax);\r\n                    let diff = seriesMax - seriesMin;\r\n                    if (diff <= 0) {\r\n                        diff = Math.abs(seriesMax / 100);\r\n                    }\r\n                    if (diff < minDiff) {\r\n                        minDiff = diff;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        this.axisRanges.each((range) => {\r\n            if (range.get(\"affectsMinMax\")) {\r\n                let value = range.get(\"value\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n                value = range.get(\"endValue\");\r\n                if (value != null) {\r\n                    min = Math.min(min, value);\r\n                    max = Math.max(max, value);\r\n                }\r\n            }\r\n        });\r\n        if (this.get(\"logarithmic\")) {\r\n            let treatZeroAs = this.get(\"treatZeroAs\");\r\n            if ($type.isNumber(treatZeroAs)) {\r\n                if (min <= 0) {\r\n                    min = treatZeroAs;\r\n                }\r\n            }\r\n            if (min <= 0) {\r\n                new Error(\"Logarithmic value axis can not have values <= 0.\");\r\n            }\r\n        }\r\n        if (min === 0 && max === 0) {\r\n            max = 0.9;\r\n            min = -0.9;\r\n        }\r\n        if ($type.isNumber(minDefined)) {\r\n            min = minDefined;\r\n        }\r\n        if ($type.isNumber(maxDefined)) {\r\n            max = maxDefined;\r\n        }\r\n        // meaning no min/max found on series/ranges and no min/max was defined\r\n        if (min === Infinity || max === -Infinity) {\r\n            this.setPrivate(\"minFinal\", undefined);\r\n            this.setPrivate(\"maxFinal\", undefined);\r\n            return;\r\n        }\r\n        if (min > max) {\r\n            [min, max] = [max, min];\r\n        }\r\n        const initialMin = min;\r\n        const initialMax = max;\r\n        // adapter\r\n        let minAdapted = this.adapters.fold(\"min\", min);\r\n        let maxAdapted = this.adapters.fold(\"max\", max);\r\n        this._minRealLog = min;\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        // DateAxis does some magic here\r\n        min = this._fixMin(min);\r\n        max = this._fixMax(max);\r\n        // this happens if starLocation and endLocation are 0.5 and DateAxis has only one date\t\t\r\n        if (max - min <= 1 / Math.pow(10, 15)) {\r\n            if (max - min !== 0) {\r\n                this._deltaMinMax = (max - min) / 2;\r\n            }\r\n            else {\r\n                this._getDelta(max);\r\n            }\r\n            min -= this._deltaMinMax;\r\n            max += this._deltaMinMax;\r\n        }\r\n        // add extras\r\n        min -= (max - min) * extraMin;\r\n        max += (max - min) * extraMax;\r\n        if (this.get(\"logarithmic\")) {\r\n            // don't let min go below 0 if real min is >= 0\r\n            if (min < 0 && initialMin >= 0) {\r\n                min = 0;\r\n            }\r\n            // don't let max go above 0 if real max is <= 0\r\n            if (max > 0 && initialMax <= 0) {\r\n                max = 0;\r\n            }\r\n        }\r\n        this._minReal = min;\r\n        this._maxReal = max;\r\n        let strictMinMax = this.get(\"strictMinMax\");\r\n        let strictMinMaxSelection = this.get(\"strictMinMaxSelection\", false);\r\n        if (strictMinMaxSelection) {\r\n            strictMinMax = strictMinMaxSelection;\r\n        }\r\n        let strict = strictMinMax;\r\n        if ($type.isNumber(maxDefined)) {\r\n            strict = true;\r\n        }\r\n        let gridCount = this.get(\"renderer\").gridCount();\r\n        let minMaxStep = this._adjustMinMax(min, max, gridCount, strict);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // do it for the second time with strict true (importat!)\r\n        minMaxStep = this._adjustMinMax(min, max, gridCount, true);\r\n        min = minMaxStep.min;\r\n        max = minMaxStep.max;\r\n        // return min max if strict\r\n        if (strictMinMax) {\r\n            if ($type.isNumber(minDefined)) {\r\n                min = minDefined;\r\n            }\r\n            else {\r\n                min = this._minReal;\r\n            }\r\n            if ($type.isNumber(maxDefined)) {\r\n                max = maxDefined;\r\n            }\r\n            else {\r\n                max = this._maxReal;\r\n            }\r\n            if (max - min <= 0.00000001) {\r\n                min -= this._deltaMinMax;\r\n                max += this._deltaMinMax;\r\n            }\r\n            let delta = max - min;\r\n            min -= delta * extraMin;\r\n            max += delta * extraMax;\r\n        }\r\n        minAdapted = this.adapters.fold(\"min\", min);\r\n        maxAdapted = this.adapters.fold(\"max\", max);\r\n        if ($type.isNumber(minAdapted)) {\r\n            min = minAdapted;\r\n        }\r\n        if ($type.isNumber(maxAdapted)) {\r\n            max = maxAdapted;\r\n        }\r\n        if (minDiff == Infinity) {\r\n            minDiff = (max - min);\r\n        }\r\n        // this is to avoid floating point number error\r\n        let decCount = Math.round(Math.abs(Math.log(Math.abs(max - min)) * Math.LOG10E)) + 5;\r\n        min = $math.round(min, decCount);\r\n        max = $math.round(max, decCount);\r\n        const syncWithAxis = this.get(\"syncWithAxis\");\r\n        if (syncWithAxis) {\r\n            minMaxStep = this._syncAxes(min, max, minMaxStep.step, syncWithAxis.getPrivate(\"minFinal\", syncWithAxis.getPrivate(\"min\", 0)), syncWithAxis.getPrivate(\"maxFinal\", syncWithAxis.getPrivate(\"max\", 1)), syncWithAxis.getPrivate(\"step\", 1));\r\n            min = minMaxStep.min;\r\n            max = minMaxStep.max;\r\n        }\r\n        this.setPrivateRaw(\"maxZoomFactor\", Math.max(1, Math.ceil((max - min) / minDiff * this.get(\"maxZoomFactor\", 100))));\r\n        this._fixZoomFactor();\r\n        if (this.get(\"logarithmic\")) {\r\n            this._minLogAdjusted = min;\r\n            min = this._minReal;\r\n            max = this._maxReal;\r\n            if (min <= 0) {\r\n                min = initialMin * (1 - Math.min(extraMin, 0.99));\r\n            }\r\n        }\r\n        if ($type.isNumber(min) && $type.isNumber(max)) {\r\n            if (this.getPrivate(\"minFinal\") !== min || this.getPrivate(\"maxFinal\") !== max) {\r\n                this.setPrivate(\"minFinal\", min);\r\n                this.setPrivate(\"maxFinal\", max);\r\n                this._saveMinMax(min, max);\r\n                const duration = this.get(\"interpolationDuration\", 0);\r\n                const easing = this.get(\"interpolationEasing\");\r\n                this.animatePrivate({ key: \"min\", to: min, duration, easing });\r\n                this.animatePrivate({ key: \"max\", to: max, duration, easing });\r\n            }\r\n        }\r\n    }\r\n    _fixZoomFactor() {\r\n    }\r\n    _getDelta(max) {\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(max)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        this._deltaMinMax = power;\r\n    }\r\n    _saveMinMax(_min, _max) {\r\n    }\r\n    _adjustMinMax(min, max, gridCount, strictMode) {\r\n        // will fail if 0\r\n        if (gridCount <= 1) {\r\n            gridCount = 1;\r\n        }\r\n        gridCount = Math.round(gridCount);\r\n        let initialMin = min;\r\n        let initialMax = max;\r\n        let difference = max - min;\r\n        // in case min and max is the same, use max\r\n        if (difference === 0) {\r\n            difference = Math.abs(max);\r\n        }\r\n        // the number by which we need to raise 10 to get difference\r\n        let exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        // here we find a number which is power of 10 and has the same count of numbers as difference has\r\n        let power = Math.pow(10, Math.floor(exponent));\r\n        // reduce this number by 10 times\r\n        power = power / 10;\r\n        let extra = power;\r\n        if (strictMode) {\r\n            extra = 0;\r\n        }\r\n        // round down min\r\n        if (strictMode) {\r\n            min = Math.floor(min / power) * power;\r\n            // round up max\r\n            max = Math.ceil(max / power) * power;\r\n        }\r\n        else {\r\n            min = Math.ceil(min / power) * power - extra;\r\n            // round up max\r\n            max = Math.floor(max / power) * power + extra;\r\n        }\r\n        // don't let min go below 0 if real min is >= 0\r\n        if (min < 0 && initialMin >= 0) {\r\n            min = 0;\r\n        }\r\n        // don't let max go above 0 if real max is <= 0\r\n        if (max > 0 && initialMax <= 0) {\r\n            max = 0;\r\n        }\r\n        exponent = Math.log(Math.abs(difference)) * Math.LOG10E;\r\n        power = Math.pow(10, Math.floor(exponent));\r\n        power = power / 100; // used to be 10 in v4, but this caused issue that there could be limited number of grids with even very small minGridDistance\r\n        // approximate difference between two grid lines\r\n        let step = Math.ceil((difference / gridCount) / power) * power;\r\n        let stepPower = Math.pow(10, Math.floor(Math.log(Math.abs(step)) * Math.LOG10E));\r\n        // the step should divide by  2, 5, and 10.\r\n        let stepDivisor = Math.ceil(step / stepPower); // number 0 - 10\r\n        if (stepDivisor > 5) {\r\n            stepDivisor = 10;\r\n        }\r\n        else if (stepDivisor <= 5 && stepDivisor > 2) {\r\n            stepDivisor = 5;\r\n        }\r\n        // now get real step\r\n        step = Math.ceil(step / (stepPower * stepDivisor)) * stepPower * stepDivisor;\r\n        let maxPrecision = this.get(\"maxPrecision\");\r\n        if ($type.isNumber(maxPrecision)) {\r\n            let ceiledStep = $math.ceil(step, maxPrecision);\r\n            if (maxPrecision < Number.MAX_VALUE && step !== ceiledStep) {\r\n                step = ceiledStep;\r\n                if (step == 0) {\r\n                    step = 1;\r\n                }\r\n            }\r\n        }\r\n        let decCount = 0;\r\n        // in case numbers are smaller than 1\r\n        if (stepPower < 1) {\r\n            // exponent is less then 1 too. Count decimals of exponent\r\n            decCount = Math.round(Math.abs(Math.log(Math.abs(stepPower)) * Math.LOG10E)) + 1;\r\n            // round step\r\n            step = $math.round(step, decCount);\r\n        }\r\n        // final min and max\r\n        let minCount = Math.floor(min / step);\r\n        min = $math.round(step * minCount, decCount);\r\n        let maxCount;\r\n        if (!strictMode) {\r\n            maxCount = Math.ceil(max / step);\r\n        }\r\n        else {\r\n            maxCount = Math.floor(max / step);\r\n        }\r\n        if (maxCount === minCount) {\r\n            maxCount++;\r\n        }\r\n        max = $math.round(step * maxCount, decCount);\r\n        if (max < initialMax) {\r\n            max = max + step;\r\n        }\r\n        if (min > initialMin) {\r\n            min = min - step;\r\n        }\r\n        step = this.fixSmallStep(step);\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns text to be used in an axis tooltip for specific relative position.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Tooltip text\r\n     */\r\n    getTooltipText(position, _adjustPosition) {\r\n        const numberFormat = this.get(\"tooltipNumberFormat\", this.get(\"numberFormat\"));\r\n        const formatter = this.getNumberFormatter();\r\n        const extraDecimals = this.get(\"extraTooltipPrecision\", 0);\r\n        const decimals = this.getPrivate(\"stepDecimalPlaces\", 0) + extraDecimals;\r\n        const value = $math.round(this.positionToValue(position), decimals);\r\n        if (numberFormat) {\r\n            return formatter.format(value, numberFormat);\r\n        }\r\n        else {\r\n            return formatter.format(value, undefined, decimals);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a data item from series that is closest to the `position`.\r\n     *\r\n     * @param   series    Series\r\n     * @param   position  Relative position\r\n     * @return            Data item\r\n     */\r\n    getSeriesItem(series, position) {\r\n        let fieldName = (this.getPrivate(\"name\") + this.get(\"renderer\").getPrivate(\"letter\"));\r\n        let value = this.positionToValue(position);\r\n        let index = undefined;\r\n        let oldDiff;\r\n        $array.each(series.dataItems, (dataItem, i) => {\r\n            const diff = Math.abs(dataItem.get(fieldName) - value);\r\n            if (index === undefined || diff < oldDiff) {\r\n                index = i;\r\n                oldDiff = diff;\r\n            }\r\n        });\r\n        if (index != null) {\r\n            return series.dataItems[index];\r\n        }\r\n    }\r\n    /**\r\n     * Zooms the axis to specific `start` and `end` values.\r\n     *\r\n     * Optional `duration` specifies duration of zoom animation in milliseconds.\r\n     *\r\n     * @param  start     Start value\r\n     * @param  end       End value\r\n     * @param  duration  Duration in milliseconds\r\n     */\r\n    zoomToValues(start, end, duration) {\r\n        const min = this.getPrivate(\"minFinal\", this.getPrivate(\"min\", 0));\r\n        const max = this.getPrivate(\"maxFinal\", this.getPrivate(\"max\", 1));\r\n        if (this.getPrivate(\"min\") != null && this.getPrivate(\"max\") != null) {\r\n            this.zoom((start - min) / (max - min), (end - min) / (max - min), duration);\r\n        }\r\n    }\r\n    /**\r\n     * Syncs with a target axis.\r\n     *\r\n     * @param  min  Min\r\n     * @param  max  Max\r\n     * @param  step Step\r\n     */\r\n    _syncAxes(min, max, step, syncMin, syncMax, syncStep) {\r\n        let axis = this.get(\"syncWithAxis\");\r\n        if (axis) {\r\n            let count = Math.round(syncMax - syncMin) / syncStep;\r\n            let currentCount = Math.round((max - min) / step);\r\n            let gridCount = this.get(\"renderer\").gridCount();\r\n            if ($type.isNumber(count) && $type.isNumber(currentCount)) {\r\n                let synced = false;\r\n                let c = 0;\r\n                let diff = (max - min) * 0.01;\r\n                let omin = min;\r\n                let omax = max;\r\n                let ostep = step;\r\n                while (synced != true) {\r\n                    synced = this._checkSync(omin, omax, ostep, count);\r\n                    c++;\r\n                    if (c > 500) {\r\n                        synced = true;\r\n                    }\r\n                    if (!synced) {\r\n                        if (c / 3 == Math.round(c / 3)) {\r\n                            omin = min - diff * c;\r\n                            if (min >= 0 && omin < 0) {\r\n                                omin = 0;\r\n                            }\r\n                        }\r\n                        else {\r\n                            omax = max + diff * c;\r\n                            if (omax <= 0 && omax > 0) {\r\n                                omax = 0;\r\n                            }\r\n                        }\r\n                        let minMaxStep = this._adjustMinMax(omin, omax, gridCount, true);\r\n                        omin = minMaxStep.min;\r\n                        omax = minMaxStep.max;\r\n                        ostep = minMaxStep.step;\r\n                    }\r\n                    else {\r\n                        min = omin;\r\n                        max = omax;\r\n                        step = ostep;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return { min: min, max: max, step: step };\r\n    }\r\n    /**\r\n     * Returns `true` if axis needs to be resunced with some other axis.\r\n     */\r\n    _checkSync(min, max, step, count) {\r\n        let currentCount = (max - min) / step;\r\n        for (let i = 1; i < count; i++) {\r\n            if ($math.round(currentCount / i, 1) == count || currentCount * i == count) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns relative position between two grid lines of the axis.\r\n     *\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        let max = this.getPrivate(\"selectionMax\", this.getPrivate(\"max\"));\r\n        let min = this.getPrivate(\"selectionMin\", this.getPrivate(\"min\"));\r\n        if ($type.isNumber(max) && $type.isNumber(min)) {\r\n            return this.getPrivate(\"step\", 1) / (max - min);\r\n        }\r\n        return 0.05;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    nextPosition(count) {\r\n        if (count == null) {\r\n            count = 1;\r\n        }\r\n        if (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\r\n            count *= -1;\r\n        }\r\n        let value = this.positionToValue(this.getPrivate(\"tooltipPosition\", 0));\r\n        value += this.getPrivate(\"step\", 1) * count;\r\n        value = $math.fitToRange(value, this.getPrivate(\"selectionMin\", 0), this.getPrivate(\"selectionMax\", 1));\r\n        return this.toGlobalPosition(this.valueToPosition(value));\r\n    }\r\n}\r\nObject.defineProperty(ValueAxis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ValueAxis\"\r\n});\r\nObject.defineProperty(ValueAxis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Axis.classNames.concat([ValueAxis.className])\r\n});\r\n//# sourceMappingURL=ValueAxis.js.map","import { Axis } from \"./Axis\";\r\nimport { populateString } from \"../../../core/util/PopulateString\";\r\nimport { ValueAxis } from \"./ValueAxis\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $math from \"../../../core/util/Math\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Creates a category axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/category-axis/} for more info\r\n * @important\r\n */\r\nexport class CategoryAxis extends Axis {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_frequency\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_itemMap\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: {}\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"axis\"]);\r\n        this.fields.push(\"category\", \"id\", \"cellSize\");\r\n        this.setPrivateRaw(\"name\", \"category\");\r\n        this.addTag(\"category\");\r\n        super._afterNew();\r\n    }\r\n    _afterDataChange() {\r\n        super._afterDataChange();\r\n        const len = this.dataItems.length;\r\n        if (len > 0) {\r\n            this.setPrivateRaw(\"maxZoomFactor\", len);\r\n        }\r\n        // fix final indexes\t\t\r\n        this.setPrivateRaw(\"startIndex\", Math.min(this.getPrivate(\"startIndex\", 0), len));\r\n        this.setPrivateRaw(\"endIndex\", Math.min(this.getPrivate(\"endIndex\", len), 1));\r\n    }\r\n    _prepareChildren() {\r\n        super._prepareChildren();\r\n        const len = this.dataItems.length;\r\n        let i = 0;\r\n        if (this._valuesDirty) {\r\n            this._itemMap = {};\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                dataItem.setRaw(\"index\", i);\r\n                this._itemMap[dataItem.get(\"category\")] = dataItem;\r\n                i++;\r\n            });\r\n            this.setPrivateRaw(\"maxZoomFactor\", len);\r\n        }\r\n        let start = this.get(\"start\", 0);\r\n        let end = this.get(\"end\", 1);\r\n        let indices = this._getIndices(start, end);\r\n        this.setPrivateRaw(\"startIndex\", indices.startIndex);\r\n        this.setPrivateRaw(\"endIndex\", indices.endIndex);\r\n        if (this._sizeDirty || this._valuesDirty || (this.isDirty(\"start\") || this.isDirty(\"end\") || this.isPrivateDirty(\"endIndex\") || this.isPrivateDirty(\"startIndex\") || this.isPrivateDirty(\"width\") || this.isPrivateDirty(\"height\"))) {\r\n            if (this.dataItems.length > 0) {\r\n                this._handleRangeChange();\r\n                this._prepareAxisItems();\r\n                this._updateAxisRanges();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    adjustZoom() {\r\n        const len = this.dataItems.length;\r\n        if (len > 1) {\r\n            let maxZoomCount = this.get(\"maxZoomCount\", this.dataItems.length);\r\n            let minZoomCount = this.get(\"minZoomCount\", 1);\r\n            let count = 0;\r\n            let startIndex = this.getPrivate(\"startIndex\", 0);\r\n            let endIndex = this.getPrivate(\"endIndex\", 0);\r\n            const sAnimation = this._sAnimation;\r\n            const eAnimation = this._eAnimation;\r\n            let start = this.get(\"start\", 0);\r\n            let getIndices = false;\r\n            if (sAnimation && !sAnimation.stopped) {\r\n                start = Number(sAnimation.to);\r\n                getIndices = true;\r\n            }\r\n            let end = this.get(\"end\", 1);\r\n            if (eAnimation && !eAnimation.stopped) {\r\n                end = Number(eAnimation.to);\r\n                getIndices = true;\r\n            }\r\n            if (getIndices) {\r\n                const indices = this._getIndices(start, end);\r\n                startIndex = indices.startIndex;\r\n                endIndex = indices.endIndex;\r\n            }\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                const dataItem = this.dataItems[i];\r\n                count += dataItem.get(\"finalCellSize\", 1);\r\n            }\r\n            ;\r\n            if (count <= minZoomCount) {\r\n                // need to zoom out\r\n                let c = 0;\r\n                for (let i = startIndex; i < len; i++) {\r\n                    const dataItem = this.dataItems[i];\r\n                    c += dataItem.get(\"finalCellSize\", 1);\r\n                    endIndex = i + 1;\r\n                    if (c >= minZoomCount) {\r\n                        break;\r\n                    }\r\n                }\r\n                if (c < minZoomCount) {\r\n                    // still not enough, try to extend at the start\r\n                    for (let i = startIndex - 1; i >= 0; i--) {\r\n                        const dataItem = this.dataItems[i];\r\n                        c += dataItem.get(\"finalCellSize\", 1);\r\n                        startIndex = i;\r\n                        if (c >= minZoomCount) {\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                this.zoomToIndexes(startIndex, endIndex);\r\n            }\r\n            else if (count >= maxZoomCount) {\r\n                let c = count;\r\n                for (let i = endIndex - 1; i >= startIndex; i--) {\r\n                    const dataItem = this.dataItems[i];\r\n                    c -= dataItem.get(\"finalCellSize\", 1);\r\n                    if (c <= maxZoomCount) {\r\n                        endIndex = i + 1;\r\n                        break;\r\n                    }\r\n                }\r\n                this.zoomToIndexes(startIndex, endIndex);\r\n            }\r\n        }\r\n    }\r\n    _handleRangeChange() {\r\n        $array.each(this.series, (series) => {\r\n            let startCategory = this.dataItems[this.startIndex()].get(\"category\");\r\n            let endCategory = this.dataItems[this.endIndex() - 1].get(\"category\");\r\n            let baseAxis = series.get(\"baseAxis\");\r\n            let xAxis = series.get(\"xAxis\");\r\n            let yAxis = series.get(\"yAxis\");\r\n            if (xAxis instanceof CategoryAxis && yAxis instanceof CategoryAxis) {\r\n                series._markDirtyAxes();\r\n            }\r\n            else if (baseAxis === this) {\r\n                let key;\r\n                let openKey;\r\n                let otherAxis = yAxis;\r\n                if (xAxis === baseAxis) {\r\n                    if (series.get(\"categoryXField\")) {\r\n                        key = \"categoryX\";\r\n                    }\r\n                    if (series.get(\"openCategoryXField\")) {\r\n                        openKey = \"openCategoryX\";\r\n                    }\r\n                }\r\n                else if (yAxis === baseAxis) {\r\n                    if (series.get(\"categoryYField\")) {\r\n                        key = \"categoryY\";\r\n                    }\r\n                    if (series.get(\"openCategoryYField\")) {\r\n                        openKey = \"openCategoryY\";\r\n                    }\r\n                    otherAxis = xAxis;\r\n                }\r\n                if (otherAxis instanceof ValueAxis) {\r\n                    if (key || openKey) {\r\n                        let startDataItem;\r\n                        let endDataItem;\r\n                        function findDataItem(series, categoryAxis, key, openKey, category, direction) {\r\n                            let dataItem;\r\n                            let idx = categoryAxis.categoryToIndex(category);\r\n                            while (!dataItem && idx >= 0 && idx < categoryAxis.dataItems.length) {\r\n                                let searchCategory = categoryAxis.dataItems[idx].get(\"category\");\r\n                                if (direction == \"previous\") {\r\n                                    for (let i = series.dataItems.length - 1; i >= 0; i--) {\r\n                                        let item = series.dataItems[i];\r\n                                        if (key && item.get(key) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                        if (openKey && item.get(openKey) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                else {\r\n                                    for (let i = 0, len = series.dataItems.length; i < len; i++) {\r\n                                        let item = series.dataItems[i];\r\n                                        if (key && item.get(key) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                        if (openKey && item.get(openKey) === searchCategory) {\r\n                                            dataItem = item;\r\n                                            break;\r\n                                        }\r\n                                    }\r\n                                }\r\n                                if (!dataItem) {\r\n                                    idx += direction === \"previous\" ? -1 : 1;\r\n                                }\r\n                            }\r\n                            return dataItem;\r\n                        }\r\n                        startDataItem = findDataItem(series, this, key, openKey, startCategory, \"next\");\r\n                        endDataItem = findDataItem(series, this, key, openKey, endCategory, \"previous\");\r\n                        let startIndex = 0;\r\n                        let endIndex = series.dataItems.length;\r\n                        if (startDataItem) {\r\n                            startIndex = series.dataItems.indexOf(startDataItem);\r\n                        }\r\n                        if (endDataItem) {\r\n                            endIndex = series.dataItems.indexOf(endDataItem) + 1;\r\n                        }\r\n                        series.setPrivate(\"startIndex\", startIndex);\r\n                        series.setPrivate(\"endIndex\", endIndex);\r\n                        let hasValue = false;\r\n                        for (let i = startIndex; i < endIndex; i++) {\r\n                            const dataItem = series.dataItems[i];\r\n                            $array.each(series.__valueXShowFields, (key) => {\r\n                                let value = dataItem.get(key);\r\n                                if (value != null) {\r\n                                    hasValue = true;\r\n                                }\r\n                            });\r\n                            $array.each(series.__valueYShowFields, (key) => {\r\n                                let value = dataItem.get(key);\r\n                                if (value != null) {\r\n                                    hasValue = true;\r\n                                }\r\n                            });\r\n                            if (hasValue) {\r\n                                break;\r\n                            }\r\n                        }\r\n                        series.setPrivate(\"outOfSelection\", !hasValue);\r\n                    }\r\n                }\r\n                series._markDirtyAxes(); // must be outside\r\n            }\r\n        });\r\n    }\r\n    _prepareAxisItems() {\r\n        var _a;\r\n        const renderer = this.get(\"renderer\");\r\n        const len = this.dataItems.length;\r\n        let startIndex = this.startIndex();\r\n        if (startIndex > 0) {\r\n            startIndex--;\r\n        }\r\n        let endIndex = this.endIndex();\r\n        if (endIndex < len) {\r\n            endIndex++;\r\n        }\r\n        const minorLabelsEnabled = renderer.get(\"minorLabelsEnabled\");\r\n        const minorGridEnabled = renderer.get(\"minorGridEnabled\", minorLabelsEnabled);\r\n        let maxCount = renderer.axisLength() / Math.max(renderer.get(\"minGridDistance\"), 1);\r\n        let frequency = Math.max(1, Math.min(len, Math.ceil((endIndex - startIndex) / maxCount)));\r\n        startIndex = Math.floor(startIndex / frequency) * frequency;\r\n        this._frequency = frequency;\r\n        for (let j = 0; j < len; j++) {\r\n            this._toggleDataItem(this.dataItems[j], false);\r\n        }\r\n        let f = this.dataItems[startIndex].get(\"index\", 0);\r\n        for (let i = startIndex; i < endIndex; i = i + frequency) {\r\n            let dataItem = this.dataItems[i];\r\n            this._createAssets(dataItem, []);\r\n            this._toggleDataItem(dataItem, true);\r\n            let count = frequency;\r\n            if (minorGridEnabled) {\r\n                count = 1;\r\n            }\r\n            this._prepareDataItem(dataItem, f, count);\r\n            f++;\r\n        }\r\n        if (renderer.get(\"minorGridEnabled\")) {\r\n            for (let i = startIndex; i < endIndex; i++) {\r\n                let dataItem = this.dataItems[i];\r\n                if (i % frequency != 0) {\r\n                    this._createAssets(dataItem, [\"minor\"], true);\r\n                    this._toggleDataItem(dataItem, true);\r\n                    this._prepareDataItem(dataItem, 0, 1);\r\n                    if (!minorLabelsEnabled) {\r\n                        (_a = dataItem.get(\"label\")) === null || _a === void 0 ? void 0 : _a.setPrivate(\"visible\", false);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this._updateGhost();\r\n    }\r\n    _prepareDataItem(dataItem, fillIndex, count) {\r\n        let renderer = this.get(\"renderer\");\r\n        let categoryLocation = dataItem.get(\"categoryLocation\", 0);\r\n        let endCategoryLocation = dataItem.get(\"endCategoryLocation\", 1);\r\n        let index = dataItem.get(\"index\");\r\n        if (!$type.isNumber(index)) {\r\n            index = this.categoryToIndex(dataItem.get(\"category\"));\r\n        }\r\n        let position = this.indexToPosition(index, categoryLocation);\r\n        let endCategory = dataItem.get(\"endCategory\");\r\n        let endIndex;\r\n        if (endCategory) {\r\n            endIndex = this.categoryToIndex(endCategory);\r\n            if (!$type.isNumber(endIndex)) {\r\n                endIndex = index;\r\n            }\r\n        }\r\n        else {\r\n            endIndex = index;\r\n        }\r\n        let endPosition = this.indexToPosition(endIndex, endCategoryLocation);\r\n        let fillEndIndex;\r\n        let fillEndPosition;\r\n        if (dataItem.get(\"isRange\")) {\r\n            fillEndIndex = endIndex;\r\n            if (!$type.isNumber(index)) {\r\n                this._toggleDataItem(dataItem, false);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            fillEndIndex = index + this._frequency - 1;\r\n        }\r\n        fillEndPosition = this.indexToPosition(fillEndIndex, endCategoryLocation);\r\n        renderer.updateLabel(dataItem.get(\"label\"), position, endPosition, count);\r\n        renderer.updateGrid(dataItem.get(\"grid\"), position, endPosition);\r\n        renderer.updateTick(dataItem.get(\"tick\"), position, endPosition, count);\r\n        renderer.updateFill(dataItem.get(\"axisFill\"), position, fillEndPosition);\r\n        this._processBullet(dataItem);\r\n        renderer.updateBullet(dataItem.get(\"bullet\"), position, endPosition);\r\n        const fillRule = this.get(\"fillRule\");\r\n        if (fillRule) {\r\n            fillRule(dataItem, fillIndex);\r\n        }\r\n    }\r\n    startIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.min(Math.max(this.getPrivate(\"startIndex\", 0), 0), len - 1);\r\n    }\r\n    endIndex() {\r\n        let len = this.dataItems.length;\r\n        return Math.max(1, Math.min(this.getPrivate(\"endIndex\", len), len));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    baseValue() {\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    basePosition() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * Returns X coordinate in pixels corresponding to specific category index.\r\n     *\r\n     * @param   value  Index\r\n     * @return         X coordinate\r\n     */\r\n    getX(value) {\r\n        let axisDataItem = this._itemMap[value];\r\n        if (axisDataItem) {\r\n            return this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * Returns Y coordinate in pixels corresponding to specific category index.\r\n     *\r\n     * @param   value  Index\r\n     * @return         Y coordinate\r\n     */\r\n    getY(value) {\r\n        let axisDataItem = this._itemMap[value];\r\n        if (axisDataItem) {\r\n            return this._settings.renderer.positionToCoordinate(this.indexToPosition(axisDataItem.get(\"index\", 0)));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionX(dataItem, field, cellLocation, _axisLocation) {\r\n        const category = dataItem.get(field);\r\n        const axisDataItem = this._itemMap[category];\r\n        if (axisDataItem) {\r\n            return this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateX(dataItem, field, cellLocation, _axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(dataItem, field, cellLocation, _axisLocation));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemPositionY(dataItem, field, cellLocation, _axisLocation) {\r\n        const category = dataItem.get(field);\r\n        const axisDataItem = this._itemMap[category];\r\n        if (axisDataItem) {\r\n            return this.indexToPosition(axisDataItem.get(\"index\", 0), cellLocation);\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    getDataItemCoordinateY(dataItem, field, cellLocation, _axisLocation) {\r\n        return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(dataItem, field, cellLocation, _axisLocation));\r\n    }\r\n    /**\r\n     * Converts category index to a relative position.\r\n     *\r\n     * `location` indicates relative position within category: 0 - start, 1 - end.\r\n     *\r\n     * If not set, will use middle (0.5) of the category.\r\n     *\r\n     * @param   index     Index\r\n     * @param   location  Location\r\n     * @return            Index\r\n     */\r\n    indexToPosition(index, location, final) {\r\n        let len = this.dataItems.length;\r\n        let position = 0;\r\n        if (len == 0) {\r\n            return 0;\r\n        }\r\n        if (index >= len) {\r\n            index = len - 1;\r\n            location = 1;\r\n        }\r\n        if (!$type.isNumber(location)) {\r\n            location = 0.5;\r\n        }\r\n        if (!$type.isNumber(index)) {\r\n            return 0;\r\n        }\r\n        let startLocation = this.get(\"startLocation\", 0);\r\n        let endLocation = this.get(\"endLocation\", 1);\r\n        if (!this.get(\"cellSizeField\")) {\r\n            len -= startLocation;\r\n            len -= (1 - endLocation);\r\n            position = (index + location - startLocation) / len;\r\n        }\r\n        else {\r\n            let name = final ? \"finalCellSize\" : \"cellSize\";\r\n            const dataItems = this.dataItems;\r\n            // Calculate total modified count (sum of cell sizes)\r\n            let modCount = 0;\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                modCount += dataItem.get(name, 1);\r\n            });\r\n            modCount -= startLocation * dataItems[0].get(name, 1);\r\n            modCount -= (1 - endLocation) * dataItems[dataItems.length - 1].get(name, 1);\r\n            // Calculate the position based on cell sizes\r\n            let acc = 0;\r\n            for (let i = 0; i < index; i++) {\r\n                acc += dataItems[i].get(name, 1);\r\n            }\r\n            let cellSizeAtIndex = dataItems[index].get(name, 1);\r\n            position = (acc + location * cellSizeAtIndex - startLocation * dataItems[0].get(name, 1)) / modCount;\r\n        }\r\n        if (!final) {\r\n            let dataItem = this.dataItems[index];\r\n            if (dataItem) {\r\n                position += dataItem.get(\"deltaPosition\", 0);\r\n            }\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * Returns a position of a category.\r\n     *\r\n     * @param   category  Category to look up\r\n     * @return            Position\r\n     */\r\n    categoryToPosition(category) {\r\n        let dataItem = this._itemMap[category];\r\n        if (dataItem) {\r\n            return this.indexToPosition(dataItem.get(\"index\"));\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * Returns an index of a category.\r\n     *\r\n     * @param   category  Category to look up\r\n     * @return            Index\r\n     */\r\n    categoryToIndex(category) {\r\n        let dataItem = this._itemMap[category];\r\n        if (dataItem) {\r\n            return dataItem.get(\"index\");\r\n        }\r\n        return NaN;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    dataItemToPosition(dataItem) {\r\n        return this.indexToPosition(dataItem.get(\"index\"));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    roundAxisPosition(position, location) {\r\n        position += (0.5 - location) / this.dataItems.length;\r\n        return this.indexToPosition(this.axisPositionToIndex(position), location);\r\n    }\r\n    /**\r\n     * Returns an index of the category that corresponds to specific pixel\r\n     * position within axis.\r\n     *\r\n     * @param position  Position (px)\r\n     * @return Category index\r\n     */\r\n    axisPositionToIndex(position) {\r\n        let len = this.dataItems.length;\r\n        if (len === 0) {\r\n            return 0;\r\n        }\r\n        // Calculate total modified length (sum of cell sizes)\r\n        if (this.get(\"cellSizeField\")) {\r\n            let modifiedLen = 0;\r\n            let cellSizes = [];\r\n            $array.each(this.dataItems, (dataItem) => {\r\n                const cellSize = dataItem.get(\"cellSize\", 1);\r\n                cellSizes.push(cellSize);\r\n                modifiedLen += cellSize;\r\n            });\r\n            // Adjust for startLocation and endLocation\r\n            let startLocation = this.get(\"startLocation\", 0);\r\n            let endLocation = this.get(\"endLocation\", 1);\r\n            modifiedLen -= startLocation;\r\n            modifiedLen -= (1 - endLocation);\r\n            // Find which cell the position falls into\r\n            let rel = position * modifiedLen + startLocation;\r\n            let acc = 0;\r\n            for (let i = 0; i < len; i++) {\r\n                const cellSize = cellSizes[i];\r\n                if (rel < acc + cellSize) {\r\n                    return i;\r\n                }\r\n                acc += cellSize;\r\n            }\r\n            return len - 1;\r\n        }\r\n        else {\r\n            return $math.fitToRange(Math.floor(position * len), 0, len - 1);\r\n        }\r\n    }\r\n    /**\r\n     * Returns text to be used in an axis tooltip for specific relative position.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Tooltip text\r\n     */\r\n    getTooltipText(position, _adjustPosition) {\r\n        //@todo number formatter + tag\r\n        const dataItem = this.dataItems[this.axisPositionToIndex(position)];\r\n        if (dataItem) {\r\n            const label = dataItem.get(\"label\");\r\n            if (label) {\r\n                return populateString(label, this.get(\"tooltipText\", \"\"));\r\n            }\r\n        }\r\n    }\r\n    _updateTooltipText(tooltip, position) {\r\n        tooltip._setDataItem(this.dataItems[this.axisPositionToIndex(position)]);\r\n        tooltip.label.text.markDirtyText();\r\n    }\r\n    /**\r\n     * Returns a data item from series that is closest to the `position`.\r\n     *\r\n     * @param   series    Series\r\n     * @param   position  Relative position\r\n     * @return            Data item\r\n     */\r\n    getSeriesItem(series, position) {\r\n        if (this.dataItems.length > 0) {\r\n            let fieldName = (this.getPrivate(\"name\") + this.get(\"renderer\").getPrivate(\"letter\"));\r\n            let index = this.axisPositionToIndex(position);\r\n            // try simple first\r\n            let seriesDataItem = series.dataItems[index];\r\n            let axisDataItem = this.dataItems[index];\r\n            let category = axisDataItem.get(\"category\");\r\n            if (seriesDataItem && axisDataItem) {\r\n                if (seriesDataItem.get(fieldName) === category) {\r\n                    return seriesDataItem;\r\n                }\r\n            }\r\n            // if not found, try looking\r\n            for (let i = 0, len = series.dataItems.length; i < len; i++) {\r\n                let dataItem = series.dataItems[i];\r\n                if (dataItem.get(fieldName) === category) {\r\n                    return dataItem;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _getIndices(start, end) {\r\n        let len = this.dataItems.length;\r\n        let startIndex = 0;\r\n        let endIndex = len;\r\n        let name = \"cellSize\";\r\n        if (this.get(\"cellSizeField\")) {\r\n            let count = 0;\r\n            const dataItems = this.dataItems;\r\n            if (dataItems.length == 0) {\r\n                return { startIndex: 0, endIndex: 0 };\r\n            }\r\n            $array.each(dataItems, (dataItem) => {\r\n                count += dataItem.get(name, 1);\r\n            });\r\n            count -= this.get(\"startLocation\", 0) * dataItems[0].get(name, 1);\r\n            count -= (1 - this.get(\"endLocation\", 1)) * dataItems[dataItems.length - 1].get(name, 1);\r\n            let c = 0;\r\n            for (let i = 0; i < len; i++) {\r\n                c += this.dataItems[i].get(name, 1);\r\n                if (Math.round(c) > Math.round(start * count)) {\r\n                    startIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            for (let i = startIndex + 1; i < len; i++) {\r\n                c += this.dataItems[i].get(name, 1);\r\n                if (Math.round(c) >= Math.round(end * count)) {\r\n                    endIndex = i + 1;\r\n                    break;\r\n                }\r\n            }\r\n            startIndex = Math.max(startIndex, 0);\r\n            endIndex = Math.min(endIndex, len);\r\n        }\r\n        else {\r\n            startIndex = Math.max(Math.round(this.get(\"start\", 0) * len), 0);\r\n            endIndex = Math.min(Math.round(this.get(\"end\", 1) * len), len);\r\n        }\r\n        return { startIndex, endIndex };\r\n    }\r\n    /**\r\n     * Zooms the axis to specific `start` and `end` indexes.\r\n     *\r\n     * Optional `duration` specifies duration of zoom animation in milliseconds.\r\n     *\r\n     * @param  start     Start index\r\n     * @param  end       End index\r\n     * @param  duration  Duration in milliseconds\r\n     */\r\n    zoomToIndexes(start, end, duration) {\r\n        let len = this.dataItems.length;\r\n        if (this.get(\"cellSizeField\")) {\r\n            start = Math.min(Math.max(start, 0), len);\r\n            end = Math.max(Math.min(end, len), 1);\r\n            this.setPrivateRaw(\"startIndex\", start);\r\n            this.setPrivateRaw(\"endIndex\", end);\r\n            this.zoom(this.indexToPosition(start, 0, true), this.indexToPosition(end, 0, true), duration);\r\n        }\r\n        else {\r\n            this.zoom(start / len, end / len, duration);\r\n        }\r\n    }\r\n    zoomToCategories(startCategory, endCategory, duration) {\r\n        this.zoomToIndexes(this.categoryToIndex(startCategory), this.categoryToIndex(endCategory) + 1, duration);\r\n    }\r\n    /**\r\n     * Returns position span between start and end of a single cell in axis.\r\n     *\r\n     * @since 5.2.30\r\n     * @return Position\r\n     */\r\n    getCellWidthPosition() {\r\n        return this._frequency / this.dataItems.length / (this.get(\"end\", 1) - this.get(\"start\", 0));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    nextPosition(count) {\r\n        if (count == null) {\r\n            count = 1;\r\n        }\r\n        if (this.get(\"renderer\").getPrivate(\"letter\") == \"Y\") {\r\n            count *= -1;\r\n        }\r\n        const position = this.getPrivate(\"tooltipPosition\", 0);\r\n        const index = $math.fitToRange(this.axisPositionToIndex(position) + count, 0, this.dataItems.length - 1);\r\n        return this.toGlobalPosition(this.indexToPosition(index));\r\n    }\r\n}\r\nObject.defineProperty(CategoryAxis, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"CategoryAxis\"\r\n});\r\nObject.defineProperty(CategoryAxis, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Axis.classNames.concat([CategoryAxis.className])\r\n});\r\n//# sourceMappingURL=CategoryAxis.js.map","import { Label } from \"../../../core/render/Label\";\r\n/**\r\n * Draws an axis label.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Labels} for more info\r\n * @important\r\n */\r\nexport class AxisLabel extends Label {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisLabel, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisLabel\"\r\n});\r\nObject.defineProperty(AxisLabel, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Label.classNames.concat([AxisLabel.className])\r\n});\r\n//# sourceMappingURL=AxisLabel.js.map","import { Tick } from \"../../../core/render/Tick\";\r\n/**\r\n * Draws an axis tick.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/axes/#Ticks} for more info\r\n * @important\r\n */\r\nexport class AxisTick extends Tick {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_tickPoints\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n    }\r\n}\r\nObject.defineProperty(AxisTick, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisTick\"\r\n});\r\nObject.defineProperty(AxisTick, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Tick.classNames.concat([AxisTick.className])\r\n});\r\n//# sourceMappingURL=AxisTick.js.map","import { Graphics } from \"../../../core/render/Graphics\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { AxisTick } from \"./AxisTick\";\r\nimport { Grid } from \"./Grid\";\r\nimport { AxisLabel } from \"./AxisLabel\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Base class for an axis renderer.\r\n *\r\n * Should not be used on its own.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n */\r\nexport class AxisRenderer extends Graphics {\r\n    constructor() {\r\n        super(...arguments);\r\n        // save for quick access\r\n        Object.defineProperty(this, \"_axisLength\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 100\r\n        });\r\n        Object.defineProperty(this, \"_start\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_end\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_inversed\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: false\r\n        });\r\n        Object.defineProperty(this, \"_minSize\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        /**\r\n         * Chart the renderer is used in.\r\n         */\r\n        Object.defineProperty(this, \"chart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_lc\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 1\r\n        });\r\n        Object.defineProperty(this, \"_ls\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_thumbDownPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downStart\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_downEnd\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A list of ticks in the axis.\r\n         *\r\n         * `ticks.template` can be used to configure ticks.\r\n         *\r\n         * @default new ListTemplate<AxisTick>\r\n         */\r\n        Object.defineProperty(this, \"ticks\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => AxisTick._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.ticks.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.ticks.template])))\r\n        });\r\n        /**\r\n         * A list of grid elements in the axis.\r\n         *\r\n         * `grid.template` can be used to configure grid.\r\n         *\r\n         * @default new ListTemplate<Grid>\r\n         */\r\n        Object.defineProperty(this, \"grid\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Grid._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.grid.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.grid.template])))\r\n        });\r\n        /**\r\n         * A list of fills in the axis.\r\n         *\r\n         * `axisFills.template` can be used to configure axis fills.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"axisFills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.axisFills.template.get(\"themeTags\", [\"axis\", \"fill\"]), this.get(\"themeTags\", []))\r\n            }, [this.axisFills.template])))\r\n        });\r\n        /**\r\n         * A list of labels in the axis.\r\n         *\r\n         * `labels.template` can be used to configure axis labels.\r\n         *\r\n         * @default new ListTemplate<AxisLabel>\r\n         */\r\n        Object.defineProperty(this, \"labels\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => AxisLabel._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.labels.template.get(\"themeTags\", []), this.get(\"themeTags\", []))\r\n            }, [this.labels.template])))\r\n        });\r\n        /**\r\n         * An [[Axis]] renderer is for.\r\n         */\r\n        Object.defineProperty(this, \"axis\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A thumb Graphics to be used for panning the axis (the one which shows under the labels when hovered)\r\n         */\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeTick(dataItem, themeTags) {\r\n        const tick = this.ticks.make();\r\n        tick._setDataItem(dataItem);\r\n        dataItem.setRaw(\"tick\", tick);\r\n        tick.set(\"themeTags\", $utils.mergeTags(tick.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.push(tick);\r\n        this.ticks.push(tick);\r\n        return tick;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeGrid(dataItem, themeTags) {\r\n        const grid = this.grid.make();\r\n        grid._setDataItem(dataItem);\r\n        dataItem.setRaw(\"grid\", grid);\r\n        grid.set(\"themeTags\", $utils.mergeTags(grid.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(grid);\r\n        this.grid.push(grid);\r\n        return grid;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeAxisFill(dataItem, themeTags) {\r\n        const axisFill = this.axisFills.make();\r\n        axisFill._setDataItem(dataItem);\r\n        axisFill.set(\"themeTags\", $utils.mergeTags(axisFill.get(\"themeTags\"), themeTags));\r\n        this.axis.gridContainer.children.push(axisFill);\r\n        dataItem.setRaw(\"axisFill\", axisFill);\r\n        this.axisFills.push(axisFill);\r\n        return axisFill;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeLabel(dataItem, themeTags) {\r\n        const label = this.labels.make();\r\n        label.set(\"themeTags\", $utils.mergeTags(label.get(\"themeTags\"), themeTags));\r\n        this.axis.labelsContainer.children.moveValue(label, 0);\r\n        label._setDataItem(dataItem);\r\n        dataItem.setRaw(\"label\", label);\r\n        this.labels.push(label);\r\n        return label;\r\n    }\r\n    axisLength() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    gridCount() {\r\n        return this.axisLength() / this.get(\"minGridDistance\", 50);\r\n    }\r\n    _updatePositions() {\r\n    }\r\n    _afterNew() {\r\n        super._afterNew();\r\n        this.set(\"isMeasured\", false);\r\n        const thumb = this.thumb;\r\n        if (thumb) {\r\n            this._disposers.push(thumb.events.on(\"pointerdown\", (event) => {\r\n                this._handleThumbDown(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointerup\", (event) => {\r\n                this._handleThumbUp(event);\r\n            }));\r\n            this._disposers.push(thumb.events.on(\"globalpointermove\", (event) => {\r\n                this._handleThumbMove(event);\r\n            }));\r\n        }\r\n    }\r\n    _beforeChanged() {\r\n        super._beforeChanged();\r\n        if (this.isDirty(\"minGridDistance\")) {\r\n            this.root.events.once(\"frameended\", () => {\r\n                this.axis.markDirtySize();\r\n            });\r\n        }\r\n    }\r\n    _changed() {\r\n        super._changed();\r\n        if (this.isDirty(\"pan\")) {\r\n            const thumb = this.thumb;\r\n            if (thumb) {\r\n                const labelsContainer = this.axis.labelsContainer;\r\n                const pan = this.get(\"pan\");\r\n                if (pan == \"zoom\") {\r\n                    labelsContainer.children.push(thumb);\r\n                }\r\n                else if (pan == \"none\") {\r\n                    labelsContainer.children.removeValue(thumb);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    _handleThumbDown(event) {\r\n        this._thumbDownPoint = this.toLocal(event.point);\r\n        const axis = this.axis;\r\n        this._downStart = axis.get(\"start\");\r\n        this._downEnd = axis.get(\"end\");\r\n    }\r\n    _handleThumbUp(_event) {\r\n        this._thumbDownPoint = undefined;\r\n    }\r\n    _handleThumbMove(event) {\r\n        const downPoint = this._thumbDownPoint;\r\n        if (downPoint) {\r\n            const point = this.toLocal(event.point);\r\n            const downStart = this._downStart;\r\n            const downEnd = this._downEnd;\r\n            const extra = this._getPan(point, downPoint) * Math.min(1, (downEnd - downStart)) / 2 * this.get(\"panSensitivity\", 1);\r\n            this.axis.zoom(downStart - extra, downEnd + extra, 0);\r\n        }\r\n    }\r\n    _getPan(_point1, _point2) {\r\n        return 0;\r\n    }\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    positionToCoordinate(position) {\r\n        if (this._inversed) {\r\n            return (this._end - position) * this._axisLength;\r\n        }\r\n        else {\r\n            return (position - this._start) * this._axisLength;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(_tooltip) { }\r\n    _updateSize() {\r\n        this.markDirty();\r\n        this._clear = true;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position = position * (end - start);\r\n        if (!this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (!this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start);\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        if (this.get(\"inversed\")) {\r\n            return 1 - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n    }\r\n    toggleVisibility(sprite, position, minPosition, maxPosition) {\r\n        let axis = this.axis;\r\n        const start = axis.get(\"start\", 0);\r\n        const end = axis.get(\"end\", 1);\r\n        let updatedStart = start + (end - start) * (minPosition - 0.0001);\r\n        let updatedEnd = start + (end - start) * (maxPosition + 0.0001);\r\n        if (position < updatedStart || position > updatedEnd) {\r\n            sprite.setPrivate(\"visible\", false);\r\n        }\r\n        else {\r\n            sprite.setPrivate(\"visible\", true);\r\n        }\r\n    }\r\n    _positionTooltip(tooltip, point) {\r\n        const chart = this.chart;\r\n        if (chart) {\r\n            tooltip.set(\"pointTo\", this._display.toGlobal(point));\r\n            if (!chart.inPlot(point)) {\r\n                tooltip.hide();\r\n            }\r\n        }\r\n    }\r\n    processAxis() { }\r\n}\r\nObject.defineProperty(AxisRenderer, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRenderer\"\r\n});\r\nObject.defineProperty(AxisRenderer, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: Graphics.classNames.concat([AxisRenderer.className])\r\n});\r\n//# sourceMappingURL=AxisRenderer.js.map","import { AxisRenderer } from \"./AxisRenderer\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to render horizontal axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n * @important\r\n */\r\nexport class AxisRendererX extends AxisRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Rectangle.new(this._root, { width: p100, isMeasured: false, themeTags: [\"axis\", \"x\", \"thumb\", \"zoomgrip\"] })\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"x\"]);\r\n        super._afterNew();\r\n        this.setPrivateRaw(\"letter\", \"X\");\r\n        const gridTemplate = this.grid.template;\r\n        gridTemplate.set(\"height\", p100);\r\n        gridTemplate.set(\"width\", 0);\r\n        gridTemplate.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, graphics.height());\r\n        });\r\n        this.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(graphics.width(), 0);\r\n        });\r\n    }\r\n    _changed() {\r\n        var _a;\r\n        super._changed();\r\n        const axis = this.axis;\r\n        const ghostLabel = axis.ghostLabel;\r\n        if (ghostLabel) {\r\n            ghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\r\n            ghostLabel.set(\"x\", -1000);\r\n        }\r\n        const opposite = \"opposite\";\r\n        const inside = \"inside\";\r\n        if (this.isDirty(opposite) || this.isDirty(inside)) {\r\n            const chart = this.chart;\r\n            const axisChildren = axis.children;\r\n            if (this.get(inside)) {\r\n                axis.addTag(inside);\r\n            }\r\n            else {\r\n                axis.removeTag(inside);\r\n            }\r\n            if (chart) {\r\n                if (this.get(opposite)) {\r\n                    const children = chart.topAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.insertIndex(0, axis);\r\n                    }\r\n                    axis.addTag(opposite);\r\n                    axisChildren.moveValue(this);\r\n                }\r\n                else {\r\n                    const children = chart.bottomAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis);\r\n                    }\r\n                    axis.removeTag(opposite);\r\n                    axisChildren.moveValue(this, 0);\r\n                }\r\n                (_a = axis.ghostLabel) === null || _a === void 0 ? void 0 : _a._applyThemes();\r\n                this.labels.each((label) => {\r\n                    label._applyThemes();\r\n                });\r\n                this.root._markDirtyRedraw();\r\n            }\r\n            axis.markDirtySize();\r\n        }\r\n        this.thumb.setPrivate(\"height\", axis.labelsContainer.height());\r\n    }\r\n    _getPan(point1, point2) {\r\n        return (point2.x - point1.x) / this.width();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position -= this._ls;\r\n        position = position * (end - start) / this._lc;\r\n        if (!this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (!this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start) * this._lc;\r\n        position += this._ls;\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n        const axis = this.axis;\r\n        const parent = axis.parent;\r\n        if (parent) {\r\n            const w = parent.innerWidth();\r\n            this._lc = this.axisLength() / w;\r\n            this._ls = (axis.x() - parent.get(\"paddingLeft\", 0)) / w;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updatePositions() {\r\n        const axis = this.axis;\r\n        const x = axis.x() - $utils.relativeToValue(axis.get(\"centerX\", 0), axis.width()) - axis.parent.get(\"paddingLeft\", 0);\r\n        axis.gridContainer.set(\"x\", x);\r\n        axis.topGridContainer.set(\"x\", x);\r\n        axis.bulletsContainer.set(\"y\", this.y());\r\n        const chart = axis.chart;\r\n        if (chart) {\r\n            const plotContainer = chart.plotContainer;\r\n            const axisHeader = axis.axisHeader;\r\n            let width = axis.get(\"marginLeft\", 0);\r\n            let x = axis.x() - width;\r\n            const parent = axis.parent;\r\n            if (parent) {\r\n                x -= parent.get(\"paddingLeft\", 0);\r\n            }\r\n            if (axisHeader.children.length > 0) {\r\n                width = axis.axisHeader.width();\r\n                axis.set(\"marginLeft\", width + 1);\r\n            }\r\n            else {\r\n                axisHeader.set(\"width\", width);\r\n            }\r\n            axisHeader.setAll({ x: x, y: -1, height: plotContainer.height() + 2 });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis() {\r\n        super.processAxis();\r\n        const axis = this.axis;\r\n        if (axis.get(\"width\") == null) {\r\n            axis.set(\"width\", p100);\r\n        }\r\n        ;\r\n        const verticalLayout = this._root.verticalLayout;\r\n        axis.set(\"layout\", verticalLayout);\r\n        axis.labelsContainer.set(\"width\", p100);\r\n        axis.axisHeader.setAll({ layout: verticalLayout });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    axisLength() {\r\n        return this.axis.width();\r\n    }\r\n    /**\r\n     * Converts axis relative position to actual coordinate in pixels.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Point\r\n     */\r\n    positionToPoint(position) {\r\n        return { x: this.positionToCoordinate(position), y: 0 };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTick(tick, position, endPosition, count) {\r\n        if (tick) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = tick.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = tick.get(\"location\", location);\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            tick.set(\"x\", this.positionToCoordinate(position));\r\n            let length = tick.get(\"length\", 0);\r\n            const inside = tick.get(\"inside\", this.get(\"inside\", false));\r\n            if (this.get(\"opposite\")) {\r\n                tick.set(\"y\", p100);\r\n                if (!inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            else {\r\n                tick.set(\"y\", 0);\r\n                if (inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            tick.set(\"draw\", (display) => {\r\n                display.moveTo(0, 0);\r\n                display.lineTo(0, length);\r\n            });\r\n            this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLabel(label, position, endPosition, count) {\r\n        if (label) {\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = label.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = label.get(\"location\", location);\r\n            }\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            const inside = label.get(\"inside\", this.get(\"inside\", false));\r\n            const opposite = this.get(\"opposite\");\r\n            if (opposite) {\r\n                if (!inside) {\r\n                    label.set(\"position\", \"relative\");\r\n                    label.set(\"y\", p100);\r\n                }\r\n                else {\r\n                    label.set(\"position\", \"absolute\");\r\n                    label.set(\"y\", 0);\r\n                }\r\n            }\r\n            else {\r\n                if (!inside) {\r\n                    label.set(\"y\", undefined);\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n                else {\r\n                    label.set(\"y\", 0);\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            label.set(\"x\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateGrid(grid, position, endPosition) {\r\n        if (grid) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = grid.get(\"location\", 0.5);\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            grid.set(\"x\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(grid, position, 0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateBullet(bullet, position, endPosition) {\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                if (!$type.isNumber(position)) {\r\n                    position = 0;\r\n                }\r\n                let location = bullet.get(\"location\", 0.5);\r\n                if ($type.isNumber(endPosition) && endPosition != position) {\r\n                    position = position + (endPosition - position) * location;\r\n                }\r\n                let bulletPosition = this.axis.roundAxisPosition(position, location);\r\n                let previousBullet = this.axis._bullets[bulletPosition];\r\n                let d = -1;\r\n                if (this.get(\"opposite\")) {\r\n                    d = 1;\r\n                }\r\n                if (bullet.get(\"stacked\")) {\r\n                    if (previousBullet) {\r\n                        let previousSprite = previousBullet.get(\"sprite\");\r\n                        if (previousSprite) {\r\n                            sprite.set(\"y\", previousSprite.y() + previousSprite.height() * d);\r\n                        }\r\n                    }\r\n                    else {\r\n                        sprite.set(\"y\", 0);\r\n                    }\r\n                }\r\n                this.axis._bullets[bulletPosition] = bullet;\r\n                sprite.set(\"x\", this.positionToCoordinate(position));\r\n                this.toggleVisibility(sprite, position, 0, 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateFill(fill, position, endPosition) {\r\n        if (fill) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            if (!$type.isNumber(endPosition)) {\r\n                endPosition = 1;\r\n            }\r\n            let x0 = this.positionToCoordinate(position);\r\n            let x1 = this.positionToCoordinate(endPosition);\r\n            this.fillDrawMethod(fill, x0, x1);\r\n        }\r\n    }\r\n    fillDrawMethod(fill, x0, x1) {\r\n        fill.set(\"draw\", (display) => {\r\n            //display.drawRect(x0, 0, x1 - x0, this.axis!.gridContainer.height());\r\n            // using for holes, so can not be rectangle\r\n            const h = this.axis.gridContainer.height();\r\n            const w = this.width();\r\n            if (x1 < x0) {\r\n                [x1, x0] = [x0, x1];\r\n            }\r\n            if (x0 > w || x1 < 0) {\r\n                return;\r\n            }\r\n            /*\r\n            const limit = 10000;\r\n\r\n            x0 = Math.max(-limit, x0);\r\n            x1 = Math.min(limit, x1);\r\n            */\r\n            display.moveTo(x0, 0);\r\n            display.lineTo(x1, 0);\r\n            display.lineTo(x1, h);\r\n            display.lineTo(x0, h);\r\n            display.lineTo(x0, 0);\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    positionTooltip(tooltip, position) {\r\n        this._positionTooltip(tooltip, { x: this.positionToCoordinate(position), y: 0 });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(tooltip) {\r\n        const inside = this.get(\"inside\");\r\n        const num = 100000;\r\n        let global = this._display.toGlobal({ x: 0, y: 0 });\r\n        let x = global.x;\r\n        let y = 0;\r\n        let w = this.axisLength();\r\n        let h = num;\r\n        let pointerOrientation = \"up\";\r\n        if (this.get(\"opposite\")) {\r\n            if (inside) {\r\n                pointerOrientation = \"up\";\r\n                y = global.y;\r\n                h = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"down\";\r\n                y = global.y - num;\r\n                h = num;\r\n            }\r\n        }\r\n        else {\r\n            if (inside) {\r\n                pointerOrientation = \"down\";\r\n                y = global.y - num;\r\n                h = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"up\";\r\n                y = global.y;\r\n                h = num;\r\n            }\r\n        }\r\n        const bounds = { left: x, right: x + w, top: y, bottom: y + h };\r\n        const oldBounds = tooltip.get(\"bounds\");\r\n        if (!$utils.sameBounds(bounds, oldBounds)) {\r\n            tooltip.set(\"bounds\", bounds);\r\n            tooltip.set(\"pointerOrientation\", pointerOrientation);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(AxisRendererX, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRendererX\"\r\n});\r\nObject.defineProperty(AxisRendererX, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: AxisRenderer.classNames.concat([AxisRendererX.className])\r\n});\r\n//# sourceMappingURL=AxisRendererX.js.map","import { AxisRenderer } from \"./AxisRenderer\";\r\nimport { p100 } from \"../../../core/util/Percent\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to render vertical axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n * @important\r\n */\r\nexport class AxisRendererY extends AxisRenderer {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_downY\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"thumb\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: Rectangle.new(this._root, { height: p100, isMeasured: false, themeTags: [\"axis\", \"y\", \"thumb\", \"zoomgrip\"] })\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"y\"]);\r\n        if (this._settings.opposite) {\r\n            this._settings.themeTags.push(\"opposite\");\r\n        }\r\n        super._afterNew();\r\n        this.setPrivateRaw(\"letter\", \"Y\");\r\n        const gridTemplate = this.grid.template;\r\n        gridTemplate.set(\"width\", p100);\r\n        gridTemplate.set(\"height\", 0);\r\n        gridTemplate.set(\"draw\", (display, graphics) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(graphics.width(), 0);\r\n        });\r\n        this.set(\"draw\", (display, renderer) => {\r\n            display.moveTo(0, 0);\r\n            display.lineTo(0, renderer.height());\r\n        });\r\n    }\r\n    _getPan(point1, point2) {\r\n        return (point1.y - point2.y) / this.height();\r\n    }\r\n    _changed() {\r\n        var _a;\r\n        super._changed();\r\n        const axis = this.axis;\r\n        const ghostLabel = axis.ghostLabel;\r\n        if (ghostLabel) {\r\n            ghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\r\n            ghostLabel.set(\"y\", -1000);\r\n        }\r\n        const thumb = this.thumb;\r\n        const opposite = \"opposite\";\r\n        const inside = \"inside\";\r\n        const chart = this.chart;\r\n        if (this.isDirty(opposite) || this.isDirty(inside)) {\r\n            const axisChildren = axis.children;\r\n            if (this.get(inside)) {\r\n                axis.addTag(inside);\r\n            }\r\n            else {\r\n                axis.removeTag(inside);\r\n            }\r\n            if (chart) {\r\n                if (this.get(opposite)) {\r\n                    const children = chart.rightAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis, 0);\r\n                    }\r\n                    axis.addTag(opposite);\r\n                    axisChildren.moveValue(this, 0);\r\n                }\r\n                else {\r\n                    const children = chart.leftAxesContainer.children;\r\n                    if (children.indexOf(axis) == -1) {\r\n                        children.moveValue(axis);\r\n                    }\r\n                    axis.removeTag(opposite);\r\n                    axisChildren.moveValue(this);\r\n                }\r\n                (_a = axis.ghostLabel) === null || _a === void 0 ? void 0 : _a._applyThemes();\r\n                this.labels.each((label) => {\r\n                    label._applyThemes();\r\n                });\r\n                this.root._markDirtyRedraw();\r\n            }\r\n            axis.markDirtySize();\r\n        }\r\n        const w = axis.labelsContainer.width();\r\n        if (chart) {\r\n            if (this.get(opposite)) {\r\n                thumb.set(\"centerX\", 0);\r\n            }\r\n            else {\r\n                thumb.set(\"centerX\", w);\r\n            }\r\n        }\r\n        thumb.setPrivate(\"width\", w);\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    processAxis() {\r\n        super.processAxis();\r\n        const axis = this.axis;\r\n        if (axis.get(\"height\") == null) {\r\n            axis.set(\"height\", p100);\r\n        }\r\n        const horizontalLayout = this._root.horizontalLayout;\r\n        axis.set(\"layout\", horizontalLayout);\r\n        axis.labelsContainer.set(\"height\", p100);\r\n        axis.axisHeader.set(\"layout\", horizontalLayout);\r\n    }\r\n    _updatePositions() {\r\n        const axis = this.axis;\r\n        const y = axis.y() - $utils.relativeToValue(axis.get(\"centerY\", 0), axis.height());\r\n        axis.gridContainer.set(\"y\", y);\r\n        axis.topGridContainer.set(\"y\", y);\r\n        axis.bulletsContainer.set(\"x\", this.x());\r\n        const chart = axis.chart;\r\n        if (chart) {\r\n            const plotContainer = chart.plotContainer;\r\n            const axisHeader = axis.axisHeader;\r\n            let height = axis.get(\"marginTop\", 0);\r\n            if (axisHeader.children.length > 0) {\r\n                height = axis.axisHeader.height();\r\n                axis.set(\"marginTop\", height + 1);\r\n            }\r\n            else {\r\n                axisHeader.set(\"height\", height);\r\n            }\r\n            axisHeader.setAll({ y: axis.y() - height, x: -1, width: plotContainer.width() + 2 });\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    axisLength() {\r\n        return this.axis.innerHeight();\r\n    }\r\n    /**\r\n     * Converts axis relative position to actual coordinate in pixels.\r\n     *\r\n     * @param   position  Position\r\n     * @return            Point\r\n     */\r\n    positionToPoint(position) {\r\n        return { x: 0, y: this.positionToCoordinate(position) };\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateLabel(label, position, endPosition, count) {\r\n        if (label) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = label.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = label.get(\"location\", location);\r\n            }\r\n            const opposite = this.get(\"opposite\");\r\n            const inside = label.get(\"inside\", this.get(\"inside\", false));\r\n            if (opposite) {\r\n                label.set(\"x\", 0);\r\n                if (inside) {\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n                else {\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n            }\r\n            else {\r\n                if (inside) {\r\n                    label.set(\"x\", 0);\r\n                    label.set(\"position\", \"absolute\");\r\n                }\r\n                else {\r\n                    label.set(\"x\", undefined);\r\n                    label.set(\"position\", \"relative\");\r\n                }\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            label.set(\"y\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateGrid(grid, position, endPosition) {\r\n        if (grid) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = grid.get(\"location\", 0.5);\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            grid.set(\"y\", this.positionToCoordinate(position));\r\n            this.toggleVisibility(grid, position, 0, 1);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTick(tick, position, endPosition, count) {\r\n        if (tick) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            let location = 0.5;\r\n            if ($type.isNumber(count) && count > 1) {\r\n                location = tick.get(\"multiLocation\", location);\r\n            }\r\n            else {\r\n                location = tick.get(\"location\", location);\r\n            }\r\n            if ($type.isNumber(endPosition) && endPosition != position) {\r\n                position = position + (endPosition - position) * location;\r\n            }\r\n            tick.set(\"y\", this.positionToCoordinate(position));\r\n            let length = tick.get(\"length\", 0);\r\n            const inside = tick.get(\"inside\", this.get(\"inside\", false));\r\n            if (this.get(\"opposite\")) {\r\n                tick.set(\"x\", 0);\r\n                if (inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            else {\r\n                if (!inside) {\r\n                    length *= -1;\r\n                }\r\n            }\r\n            tick.set(\"draw\", (display) => {\r\n                display.moveTo(0, 0);\r\n                display.lineTo(length, 0);\r\n            });\r\n            this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateBullet(bullet, position, endPosition) {\r\n        if (bullet) {\r\n            const sprite = bullet.get(\"sprite\");\r\n            if (sprite) {\r\n                if (!$type.isNumber(position)) {\r\n                    position = 0;\r\n                }\r\n                let location = bullet.get(\"location\", 0.5);\r\n                if ($type.isNumber(endPosition) && endPosition != position) {\r\n                    position = position + (endPosition - position) * location;\r\n                }\r\n                let bulletPosition = this.axis.roundAxisPosition(position, location);\r\n                let previousBullet = this.axis._bullets[bulletPosition];\r\n                let d = 1;\r\n                if (this.get(\"opposite\")) {\r\n                    d = -1;\r\n                }\r\n                if (bullet.get(\"stacked\")) {\r\n                    if (previousBullet) {\r\n                        let previousSprite = previousBullet.get(\"sprite\");\r\n                        if (previousSprite) {\r\n                            sprite.set(\"x\", previousSprite.x() + previousSprite.width() * d);\r\n                        }\r\n                    }\r\n                    else {\r\n                        sprite.set(\"x\", 0);\r\n                    }\r\n                }\r\n                this.axis._bullets[bulletPosition] = bullet;\r\n                sprite.set(\"y\", this.positionToCoordinate(position));\r\n                this.toggleVisibility(sprite, position, 0, 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateFill(fill, position, endPosition) {\r\n        if (fill) {\r\n            if (!$type.isNumber(position)) {\r\n                position = 0;\r\n            }\r\n            if (!$type.isNumber(endPosition)) {\r\n                endPosition = 1;\r\n            }\r\n            let y0 = this.positionToCoordinate(position);\r\n            let y1 = this.positionToCoordinate(endPosition);\r\n            this.fillDrawMethod(fill, y0, y1);\r\n        }\r\n    }\r\n    fillDrawMethod(fill, y0, y1) {\r\n        fill.set(\"draw\", (display) => {\r\n            // using for holes, so can not be rectangle\r\n            const w = this.axis.gridContainer.width();\r\n            const h = this.height();\r\n            if (y1 < y0) {\r\n                [y1, y0] = [y0, y1];\r\n            }\r\n            if (y0 > h || y1 < 0) {\r\n                return;\r\n            }\r\n            //y0 = Math.max(0, y0);\r\n            //y1 = Math.min(h, y1);\r\n            display.moveTo(0, y0);\r\n            display.lineTo(w, y0);\r\n            display.lineTo(w, y1);\r\n            display.lineTo(0, y1);\r\n            display.lineTo(0, y0);\r\n        });\r\n    }\r\n    /**\r\n     * Converts relative position (0-1) on axis to a pixel coordinate.\r\n     *\r\n     * @param position  Position (0-1)\r\n     * @return Coordinate (px)\r\n     */\r\n    positionToCoordinate(position) {\r\n        if (!this._inversed) {\r\n            return (this._end - position) * this._axisLength;\r\n        }\r\n        else {\r\n            return (position - this._start) * this._axisLength;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    positionTooltip(tooltip, position) {\r\n        this._positionTooltip(tooltip, { x: 0, y: this.positionToCoordinate(position) });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    updateTooltipBounds(tooltip) {\r\n        const inside = this.get(\"inside\");\r\n        const num = 100000;\r\n        let global = this._display.toGlobal({ x: 0, y: 0 });\r\n        let y = global.y;\r\n        let x = 0;\r\n        let h = this.axisLength();\r\n        let w = num;\r\n        let pointerOrientation = \"right\";\r\n        if (this.get(\"opposite\")) {\r\n            if (inside) {\r\n                pointerOrientation = \"right\";\r\n                x = global.x - num;\r\n                w = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"left\";\r\n                x = global.x;\r\n                w = num;\r\n            }\r\n        }\r\n        else {\r\n            if (inside) {\r\n                pointerOrientation = \"left\";\r\n                x = global.x;\r\n                w = num;\r\n            }\r\n            else {\r\n                pointerOrientation = \"right\";\r\n                x = global.x - num;\r\n                w = num;\r\n            }\r\n        }\r\n        const bounds = { left: x, right: x + w, top: y, bottom: y + h };\r\n        const oldBounds = tooltip.get(\"bounds\");\r\n        if (!$utils.sameBounds(bounds, oldBounds)) {\r\n            tooltip.set(\"bounds\", bounds);\r\n            tooltip.set(\"pointerOrientation\", pointerOrientation);\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    _updateLC() {\r\n        const axis = this.axis;\r\n        const parent = axis.parent;\r\n        if (parent) {\r\n            const h = parent.innerHeight();\r\n            this._lc = this.axisLength() / h;\r\n            this._ls = axis.y() / h;\r\n        }\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toAxisPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        position -= this._ls;\r\n        position = position * (end - start) / this._lc;\r\n        if (this.get(\"inversed\")) {\r\n            position = start + position;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    toGlobalPosition(position) {\r\n        const start = this._start || 0;\r\n        const end = this._end || 1;\r\n        if (this.get(\"inversed\")) {\r\n            position = position - start;\r\n        }\r\n        else {\r\n            position = end - position;\r\n        }\r\n        position = position / (end - start) * this._lc;\r\n        position += this._ls;\r\n        return position;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    fixPosition(position) {\r\n        if (!this.get(\"inversed\")) {\r\n            return 1 - position;\r\n        }\r\n        return position;\r\n    }\r\n}\r\nObject.defineProperty(AxisRendererY, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"AxisRendererY\"\r\n});\r\nObject.defineProperty(AxisRendererY, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: AxisRenderer.classNames.concat([AxisRendererY.className])\r\n});\r\n//# sourceMappingURL=AxisRendererY.js.map","import { BaseColumnSeries } from \"./BaseColumnSeries\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { RoundedRectangle } from \"../../../core/render/RoundedRectangle\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nexport class ColumnSeries extends BaseColumnSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"allColumns\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.children.push(Graphics.new(this._root, {}))\r\n        });\r\n        Object.defineProperty(this, \"allColumnsData\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: []\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all columns in series.\r\n         *\r\n         * `columns.template` can be used to set default settings for all columns,\r\n         * or to change on existing ones.\r\n         */\r\n        Object.defineProperty(this, \"columns\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => RoundedRectangle._new(this._root, {\r\n                position: \"absolute\",\r\n                themeTags: $utils.mergeTags(this.columns.template.get(\"themeTags\", []), [\"series\", \"column\"])\r\n            }, [this.columns.template])))\r\n        });\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeColumn(dataItem, listTemplate) {\r\n        const column = listTemplate.make();\r\n        if (!this.get(\"turboMode\")) {\r\n            this.mainContainer.children.push(column);\r\n        }\r\n        else {\r\n            column.virtualParent = this.chart;\r\n        }\r\n        column._setDataItem(dataItem);\r\n        listTemplate.push(column);\r\n        return column;\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        super._processAxisRange(axisRange);\r\n        axisRange.columns = new ListTemplate(Template.new({}), () => RoundedRectangle._new(this._root, {\r\n            position: \"absolute\",\r\n            themeTags: $utils.mergeTags(axisRange.columns.template.get(\"themeTags\", []), [\"series\", \"column\"]),\r\n        }, [this.columns.template, axisRange.columns.template]));\r\n    }\r\n    _beforeColumnsDraw() {\r\n        this.allColumnsData = [];\r\n    }\r\n    _afterColumnsDraw() {\r\n        if (this.get(\"turboMode\")) {\r\n            this.allColumns.set(\"draw\", (display) => {\r\n                display.clear();\r\n                $array.each(this.allColumnsData, (column) => {\r\n                    const w = column.width;\r\n                    const h = column.height;\r\n                    const x = column.x;\r\n                    const y = column.y;\r\n                    const stroke = column.stroke;\r\n                    const fill = column.fill;\r\n                    const strokeWidth = column.strokeWidth;\r\n                    const strokeOpacity = column.strokeOpacity;\r\n                    const fillOpacity = column.fillOpacity;\r\n                    display.beginFill(fill, fillOpacity);\r\n                    display.beginPath();\r\n                    display.lineStyle(strokeWidth, stroke, strokeOpacity);\r\n                    display.drawRect(x, y, w, h);\r\n                    display.endStroke();\r\n                    display.endFill();\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH) {\r\n        if (this.get(\"turboMode\")) {\r\n            const stroke = graphics.get(\"stroke\");\r\n            const fillOpacity = graphics.get(\"fillOpacity\", 1);\r\n            const strokeOpacity = graphics.get(\"strokeOpacity\", 1);\r\n            const strokWidth = graphics.get(\"strokeWidth\", 1);\r\n            const fill = graphics.get(\"fill\");\r\n            const ptl = this.getPoint(l, t);\r\n            const pbr = this.getPoint(r, b);\r\n            const tooltipPoint = dataItem.get(\"point\");\r\n            if (tooltipPoint) {\r\n                const point = this.getPoint(tooltipPoint.x, tooltipPoint.y);\r\n                tooltipPoint.x = point.x + this._x;\r\n                tooltipPoint.y = point.y + this._y;\r\n            }\r\n            l = ptl.x;\r\n            r = pbr.x;\r\n            t = ptl.y;\r\n            b = pbr.y;\r\n            dataItem.setRaw(\"left\", l);\r\n            dataItem.setRaw(\"right\", r);\r\n            dataItem.setRaw(\"top\", t);\r\n            dataItem.setRaw(\"bottom\", b);\r\n            this.allColumnsData.push({ width: r - l, height: b - t, x: l, y: t, stroke: stroke, fill: fill, strokeWidth: strokWidth, strokeOpacity: strokeOpacity, fillOpacity: fillOpacity });\r\n        }\r\n        else {\r\n            super._updateSeriesGraphics(dataItem, graphics, l, r, t, b, fitW, fitH);\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(ColumnSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"ColumnSeries\"\r\n});\r\nObject.defineProperty(ColumnSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: BaseColumnSeries.classNames.concat([ColumnSeries.className])\r\n});\r\n//# sourceMappingURL=ColumnSeries.js.map","import { XYSeries } from \"./XYSeries\";\r\nimport { Graphics } from \"../../../core/render/Graphics\";\r\nimport { line, area } from \"d3-shape\";\r\nimport { Template } from \"../../../core/util/Template\";\r\nimport { ListTemplate } from \"../../../core/util/List\";\r\nimport { color } from \"../../../core/util/Color\";\r\nimport { DataItem } from \"../../../core/render/Component\";\r\nimport { Rectangle } from \"../../../core/render/Rectangle\";\r\nimport * as $type from \"../../../core/util/Type\";\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n/**\r\n * Used to plot line and/or area series.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/series/line-series/} for more info\r\n * @important\r\n */\r\nexport class LineSeries extends XYSeries {\r\n    constructor() {\r\n        super(...arguments);\r\n        Object.defineProperty(this, \"_endIndex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: line()\r\n        });\r\n        Object.defineProperty(this, \"_fillGenerator\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: area()\r\n        });\r\n        Object.defineProperty(this, \"_legendStroke\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_legendFill\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all line segments in series.\r\n         *\r\n         * `strokes.template` can be used to set default settings for all line\r\n         * segments, or to change on existing ones.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"strokes\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"])\r\n            }, [this.strokes.template])))\r\n        });\r\n        /**\r\n         * A [[TemplateList]] of all segment fills in series.\r\n         *\r\n         * `fills.template` can be used to set default settings for all segment\r\n         * fills, or to change on existing ones.\r\n         *\r\n         * @default new ListTemplate<Graphics>\r\n         */\r\n        Object.defineProperty(this, \"fills\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: this.addDisposer(new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n                themeTags: $utils.mergeTags(this.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"])\r\n            }, [this.fills.template])))\r\n        });\r\n        // custom set from data\r\n        Object.defineProperty(this, \"_fillTemplate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_strokeTemplate\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: void 0\r\n        });\r\n        Object.defineProperty(this, \"_previousPoint\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: [0, 0, 0, 0]\r\n        });\r\n        Object.defineProperty(this, \"_dindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n        Object.defineProperty(this, \"_sindex\", {\r\n            enumerable: true,\r\n            configurable: true,\r\n            writable: true,\r\n            value: 0\r\n        });\r\n    }\r\n    _afterNew() {\r\n        this._fillGenerator.y0(function (p) {\r\n            return p[3];\r\n        });\r\n        this._fillGenerator.x0(function (p) {\r\n            return p[2];\r\n        });\r\n        this._fillGenerator.y1(function (p) {\r\n            return p[1];\r\n        });\r\n        this._fillGenerator.x1(function (p) {\r\n            return p[0];\r\n        });\r\n        super._afterNew();\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeStroke(strokes) {\r\n        const stroke = this.mainContainer.children.push(strokes.make());\r\n        strokes.push(stroke);\r\n        return stroke;\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    makeFill(fills) {\r\n        const fill = this.mainContainer.children.push(fills.make());\r\n        fills.push(fill);\r\n        return fill;\r\n    }\r\n    _updateChildren() {\r\n        this._strokeTemplate = undefined;\r\n        this._fillTemplate = undefined;\r\n        let xAxis = this.get(\"xAxis\");\r\n        let yAxis = this.get(\"yAxis\");\r\n        if (this.isDirty(\"stroke\")) {\r\n            const stroke = this.get(\"stroke\");\r\n            this.strokes.template.set(\"stroke\", stroke);\r\n            const legendStroke = this._legendStroke;\r\n            if (legendStroke) {\r\n                legendStroke.states.lookup(\"default\").set(\"stroke\", stroke);\r\n            }\r\n        }\r\n        if (this.isDirty(\"fill\")) {\r\n            const fill = this.get(\"fill\");\r\n            this.fills.template.set(\"fill\", fill);\r\n            const legendFill = this._legendFill;\r\n            if (legendFill) {\r\n                legendFill.states.lookup(\"default\").set(\"fill\", fill);\r\n            }\r\n        }\r\n        if (this.isDirty(\"fillPattern\")) {\r\n            const fillPattern = this.get(\"fillPattern\");\r\n            this.fills.template.set(\"fillPattern\", fillPattern);\r\n            const legendFill = this._legendFill;\r\n            if (legendFill) {\r\n                legendFill.states.lookup(\"default\").set(\"fillPattern\", fillPattern);\r\n            }\r\n        }\r\n        if (this.isDirty(\"curveFactory\")) {\r\n            const curveFactory = this.get(\"curveFactory\");\r\n            if (curveFactory) {\r\n                this._strokeGenerator.curve(curveFactory);\r\n                this._fillGenerator.curve(curveFactory);\r\n            }\r\n        }\r\n        if (xAxis.inited && yAxis.inited) {\r\n            if (this._axesDirty || this._valuesDirty || this._stackDirty || this.isDirty(\"vcx\") || this.isDirty(\"vcy\") || this._sizeDirty || this.isDirty(\"connect\") || this.isDirty(\"curveFactory\")) {\r\n                this.fills.each((fill) => {\r\n                    fill.setPrivate(\"visible\", false);\r\n                });\r\n                this.strokes.each((stroke) => {\r\n                    stroke.setPrivate(\"visible\", false);\r\n                });\r\n                this.axisRanges.each((axisRange) => {\r\n                    let fills = axisRange.fills;\r\n                    if (fills) {\r\n                        fills.each((fill) => {\r\n                            fill.setPrivate(\"visible\", false);\r\n                        });\r\n                    }\r\n                    let strokes = axisRange.strokes;\r\n                    if (strokes) {\r\n                        strokes.each((stroke) => {\r\n                            stroke.setPrivate(\"visible\", false);\r\n                        });\r\n                    }\r\n                });\r\n                let startIndex = this.startIndex();\r\n                let strokeTemplateField = this.strokes.template.get(\"templateField\");\r\n                let fillTemplateField = this.fills.template.get(\"templateField\");\r\n                let strokeTemplateFound = true;\r\n                let fillTemplateFound = true;\r\n                if (strokeTemplateField) {\r\n                    strokeTemplateFound = false;\r\n                }\r\n                if (fillTemplateField) {\r\n                    fillTemplateFound = false;\r\n                }\r\n                for (let i = startIndex - 1; i >= 0; i--) {\r\n                    let dataItem = this.dataItems[i];\r\n                    let hasValues = true;\r\n                    let dataContext = dataItem.dataContext;\r\n                    if (strokeTemplateField) {\r\n                        if (dataContext[strokeTemplateField]) {\r\n                            strokeTemplateFound = true;\r\n                        }\r\n                    }\r\n                    if (fillTemplateField) {\r\n                        if (dataContext[fillTemplateField]) {\r\n                            fillTemplateFound = true;\r\n                        }\r\n                    }\r\n                    $array.each(this._valueFields, (field) => {\r\n                        if (!$type.isNumber(dataItem.get(field))) {\r\n                            hasValues = false;\r\n                        }\r\n                    });\r\n                    if (hasValues && strokeTemplateFound && fillTemplateFound) {\r\n                        startIndex = i;\r\n                        break;\r\n                    }\r\n                }\r\n                let len = this.dataItems.length;\r\n                let endIndex = this.endIndex();\r\n                if (endIndex < len) {\r\n                    endIndex++;\r\n                    for (let i = endIndex; i < len; i++) {\r\n                        let dataItem = this.dataItems[i];\r\n                        let hasValues = true;\r\n                        $array.each(this._valueFields, (field) => {\r\n                            if (!$type.isNumber(dataItem.get(field))) {\r\n                                hasValues = false;\r\n                            }\r\n                        });\r\n                        if (hasValues) {\r\n                            endIndex = i + 1;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (startIndex > 0) {\r\n                    startIndex--;\r\n                }\r\n                this._endIndex = endIndex;\r\n                this._clearGraphics();\r\n                this._sindex = 0;\r\n                this._dindex = startIndex;\r\n                if (this.dataItems.length == 1) {\r\n                    this._startSegment(0);\r\n                }\r\n                else {\r\n                    // this is done to avoid recursion with a lot of segments\r\n                    while (this._dindex < endIndex - 1) {\r\n                        this._startSegment(this._dindex);\r\n                        this._sindex++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._skipped = true;\r\n        }\r\n        super._updateChildren();\r\n    }\r\n    _clearGraphics() {\r\n        this.strokes.clear();\r\n        this.fills.clear();\r\n        this.axisRanges.each((axisRange) => {\r\n            axisRange.fills.clear();\r\n            axisRange.strokes.clear();\r\n        });\r\n    }\r\n    _startSegment(dataItemIndex) {\r\n        let endIndex = this._endIndex;\r\n        let currentEndIndex = endIndex;\r\n        const autoGapCount = this.get(\"autoGapCount\");\r\n        const connect = this.get(\"connect\");\r\n        const fill = this.makeFill(this.fills);\r\n        const fillTemplate = this._fillTemplate;\r\n        const originalTemplate = this.fills.template;\r\n        if (fillTemplate && fillTemplate != originalTemplate) {\r\n            fill.template = fillTemplate;\r\n        }\r\n        fill.setPrivate(\"visible\", true);\r\n        const stroke = this.makeStroke(this.strokes);\r\n        const strokeTemplate = this._strokeTemplate;\r\n        if (strokeTemplate && strokeTemplate != this.strokes.template) {\r\n            stroke.template = strokeTemplate;\r\n        }\r\n        stroke.setPrivate(\"visible\", true);\r\n        let xAxis = this.get(\"xAxis\");\r\n        let yAxis = this.get(\"yAxis\");\r\n        let baseAxis = this.get(\"baseAxis\");\r\n        let vcx = this.get(\"vcx\", 1);\r\n        let vcy = this.get(\"vcy\", 1);\r\n        let xField = this._xField;\r\n        let yField = this._yField;\r\n        let xOpenField = this._xOpenField;\r\n        let yOpenField = this._yOpenField;\r\n        const xOpenFieldValue = this.get(\"openValueXField\");\r\n        const yOpenFieldValue = this.get(\"openValueYField\");\r\n        if (!xOpenFieldValue) {\r\n            xOpenField = this._xField;\r\n        }\r\n        if (!yOpenFieldValue) {\r\n            yOpenField = this._yField;\r\n        }\r\n        const stacked = this.get(\"stacked\");\r\n        const basePosX = xAxis.basePosition();\r\n        const basePosY = yAxis.basePosition();\r\n        let baseField;\r\n        if (baseAxis === yAxis) {\r\n            baseField = this._yField;\r\n        }\r\n        else {\r\n            baseField = this._xField;\r\n        }\r\n        const segments = [];\r\n        let points = [];\r\n        segments.push(points);\r\n        const strokeTemplateField = this.strokes.template.get(\"templateField\");\r\n        const fillTemplateField = this.fills.template.get(\"templateField\");\r\n        let locationX = this.get(\"locationX\", 0.5);\r\n        let locationY = this.get(\"locationY\", 0.5);\r\n        let openLocationX = this.get(\"openLocationX\", locationX);\r\n        let openLocationY = this.get(\"openLocationY\", locationY);\r\n        const minDistance = this.get(\"minDistance\", 0);\r\n        let i;\r\n        let fillVisible = this.fills.template.get(\"visible\");\r\n        if (this.axisRanges.length > 0) {\r\n            fillVisible = true;\r\n        }\r\n        let getOpen = false;\r\n        if (stacked || xOpenFieldValue || yOpenFieldValue) {\r\n            getOpen = true;\r\n        }\r\n        const o = {\r\n            points, segments, stacked, getOpen, basePosX, basePosY, fillVisible, xField, yField, xOpenField, yOpenField, vcx, vcy, baseAxis, xAxis, yAxis, locationX, locationY, openLocationX, openLocationY, minDistance\r\n        };\r\n        let rangeStrokeTemplate = this._strokeTemplate;\r\n        let rangeFillTemplate = this._fillTemplate;\r\n        for (i = dataItemIndex; i < currentEndIndex; i++) {\r\n            this._dindex = i;\r\n            const dataItem = this._dataItems[i];\r\n            let valueX = dataItem.get(xField);\r\n            let valueY = dataItem.get(yField);\r\n            if (valueX == null || valueY == null) {\r\n                if (!connect) {\r\n                    points = [];\r\n                    segments.push(points);\r\n                    o.points = points;\r\n                }\r\n            }\r\n            else {\r\n                this._getPoints(dataItem, o);\r\n            }\r\n            if (strokeTemplateField) {\r\n                let strokeTemplate = dataItem.dataContext[strokeTemplateField];\r\n                if (strokeTemplate) {\r\n                    if (!(strokeTemplate instanceof Template)) {\r\n                        strokeTemplate = Template.new(strokeTemplate);\r\n                    }\r\n                    this._strokeTemplate = strokeTemplate;\r\n                    if (i > dataItemIndex) {\r\n                        currentEndIndex = i;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        rangeStrokeTemplate = strokeTemplate;\r\n                        stroke.template = strokeTemplate;\r\n                    }\r\n                }\r\n            }\r\n            if (fillTemplateField) {\r\n                let fillTemplate = dataItem.dataContext[fillTemplateField];\r\n                if (fillTemplate) {\r\n                    if (!(fillTemplate instanceof Template)) {\r\n                        fillTemplate = Template.new(fillTemplate);\r\n                    }\r\n                    this._fillTemplate = fillTemplate;\r\n                    if (i > dataItemIndex) {\r\n                        currentEndIndex = i;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        rangeFillTemplate = fillTemplate;\r\n                        fill.template = fillTemplate;\r\n                    }\r\n                }\r\n            }\r\n            if (!connect) {\r\n                let nextItem = this.dataItems[i + 1];\r\n                if (nextItem) {\r\n                    if (baseAxis.shouldGap(dataItem, nextItem, autoGapCount, baseField)) {\r\n                        points = [];\r\n                        segments.push(points);\r\n                        o.points = points;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        fill.setRaw(\"userData\", [dataItemIndex, i]);\r\n        stroke.setRaw(\"userData\", [dataItemIndex, i]);\r\n        if (i === endIndex) {\r\n            this._endLine(points, segments[0][0]);\r\n        }\r\n        if (stroke) {\r\n            this._drawStroke(stroke, segments);\r\n        }\r\n        if (fill) {\r\n            this._drawFill(fill, segments);\r\n        }\r\n        this.axisRanges.each((axisRange) => {\r\n            const container = axisRange.container;\r\n            const fills = axisRange.fills;\r\n            const fill = this.makeFill(fills);\r\n            if (container) {\r\n                container.children.push(fill);\r\n            }\r\n            fill.setPrivate(\"visible\", true);\r\n            this._drawFill(fill, segments);\r\n            const strokes = axisRange.strokes;\r\n            const stroke = this.makeStroke(strokes);\r\n            if (container) {\r\n                container.children.push(stroke);\r\n            }\r\n            if (rangeStrokeTemplate && rangeStrokeTemplate != this.strokes.template) {\r\n                stroke.template = rangeStrokeTemplate;\r\n            }\r\n            if (rangeFillTemplate && rangeFillTemplate != this.fills.template) {\r\n                fill.template = rangeFillTemplate;\r\n            }\r\n            stroke.setPrivate(\"visible\", true);\r\n            this._drawStroke(stroke, segments);\r\n            fill.setRaw(\"userData\", [dataItemIndex, i]);\r\n            stroke.setRaw(\"userData\", [dataItemIndex, i]);\r\n        });\r\n    }\r\n    _getPoints(dataItem, o) {\r\n        let points = o.points;\r\n        let itemLocationX = dataItem.get(\"locationX\", o.locationX);\r\n        let itemLocationY = dataItem.get(\"locationY\", o.locationY);\r\n        const exactLocationX = this.get(\"exactLocationX\", false);\r\n        const exactLocationY = this.get(\"exactLocationY\", false);\r\n        let xPos = o.xAxis.getDataItemPositionX(dataItem, o.xField, itemLocationX, o.vcx, exactLocationX);\r\n        let yPos = o.yAxis.getDataItemPositionY(dataItem, o.yField, itemLocationY, o.vcy, exactLocationY);\r\n        if (this._shouldInclude(xPos)) {\r\n            const iPoint = this.getPoint(xPos, yPos);\r\n            const point = [iPoint.x, iPoint.y];\r\n            iPoint.x += this._x;\r\n            iPoint.y += this._y;\r\n            dataItem.set(\"point\", iPoint);\r\n            if (o.fillVisible) {\r\n                let xPos0 = xPos;\r\n                let yPos0 = yPos;\r\n                if (o.baseAxis === o.xAxis) {\r\n                    yPos0 = o.basePosY;\r\n                }\r\n                else if (o.baseAxis === o.yAxis) {\r\n                    xPos0 = o.basePosX;\r\n                }\r\n                if (o.getOpen) {\r\n                    let valueX = dataItem.get(o.xOpenField);\r\n                    let valueY = dataItem.get(o.yOpenField);\r\n                    if (valueX != null && valueY != null) {\r\n                        let itemLocationX = dataItem.get(\"openLocationX\", o.openLocationX);\r\n                        let itemLocationY = dataItem.get(\"openLocationY\", o.openLocationY);\r\n                        if (o.stacked) {\r\n                            let stackToItemX = dataItem.get(\"stackToItemX\");\r\n                            let stackToItemY = dataItem.get(\"stackToItemY\");\r\n                            if (stackToItemX) {\r\n                                xPos0 = o.xAxis.getDataItemPositionX(stackToItemX, o.xField, itemLocationX, stackToItemX.component.get(\"vcx\"), exactLocationX);\r\n                                if ($type.isNaN(xPos0)) {\r\n                                    xPos0 = o.basePosX;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (o.yAxis === o.baseAxis) {\r\n                                    xPos0 = o.basePosX;\r\n                                }\r\n                                else {\r\n                                    xPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\r\n                                }\r\n                            }\r\n                            if (stackToItemY) {\r\n                                yPos0 = o.yAxis.getDataItemPositionY(stackToItemY, o.yField, itemLocationY, stackToItemY.component.get(\"vcy\"), exactLocationY);\r\n                                if ($type.isNaN(yPos0)) {\r\n                                    yPos0 = o.basePosY;\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (o.xAxis === o.baseAxis) {\r\n                                    yPos0 = o.basePosY;\r\n                                }\r\n                                else {\r\n                                    yPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            xPos0 = o.xAxis.getDataItemPositionX(dataItem, o.xOpenField, itemLocationX, o.vcx, exactLocationX);\r\n                            yPos0 = o.yAxis.getDataItemPositionY(dataItem, o.yOpenField, itemLocationY, o.vcy, exactLocationY);\r\n                        }\r\n                    }\r\n                }\r\n                let closeIPoint = this.getPoint(xPos0, yPos0);\r\n                point[2] = closeIPoint.x;\r\n                point[3] = closeIPoint.y;\r\n            }\r\n            if (o.minDistance > 0) {\r\n                const p0 = point[0];\r\n                const p1 = point[1];\r\n                const p2 = point[2];\r\n                const p3 = point[3];\r\n                const prev = this._previousPoint;\r\n                const pp0 = prev[0];\r\n                const pp1 = prev[1];\r\n                const pp2 = prev[2];\r\n                const pp3 = prev[3];\r\n                if (Math.hypot(p0 - pp0, p1 - pp1) > o.minDistance || (p2 && p3 && Math.hypot(p2 - pp2, p3 - pp3) > o.minDistance)) {\r\n                    points.push(point);\r\n                    this._previousPoint = point;\r\n                }\r\n            }\r\n            else {\r\n                points.push(point);\r\n            }\r\n        }\r\n    }\r\n    _endLine(_points, _firstPoint) {\r\n    }\r\n    _drawStroke(graphics, segments) {\r\n        if (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\r\n            graphics.set(\"draw\", (display) => {\r\n                $array.each(segments, (segment) => {\r\n                    this._strokeGenerator.context(display);\r\n                    this._strokeGenerator(segment);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _drawFill(graphics, segments) {\r\n        if (graphics.get(\"visible\") && !graphics.get(\"forceHidden\")) {\r\n            graphics.set(\"draw\", (display) => {\r\n                $array.each(segments, (segment) => {\r\n                    this._fillGenerator.context(display);\r\n                    this._fillGenerator(segment);\r\n                });\r\n            });\r\n        }\r\n    }\r\n    _processAxisRange(axisRange) {\r\n        super._processAxisRange(axisRange);\r\n        axisRange.fills = new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n            themeTags: $utils.mergeTags(axisRange.fills.template.get(\"themeTags\", []), [\"line\", \"series\", \"fill\"]),\r\n        }, [this.fills.template, axisRange.fills.template]));\r\n        axisRange.strokes = new ListTemplate(Template.new({}), () => Graphics._new(this._root, {\r\n            themeTags: $utils.mergeTags(axisRange.strokes.template.get(\"themeTags\", []), [\"line\", \"series\", \"stroke\"]),\r\n        }, [this.strokes.template, axisRange.strokes.template]));\r\n    }\r\n    /**\r\n     * @ignore\r\n     */\r\n    createLegendMarker(_dataItem) {\r\n        const legendDataItem = this.get(\"legendDataItem\");\r\n        if (legendDataItem) {\r\n            const marker = legendDataItem.get(\"marker\");\r\n            const markerRectangle = legendDataItem.get(\"markerRectangle\");\r\n            if (markerRectangle) {\r\n                markerRectangle.setPrivate(\"visible\", false);\r\n            }\r\n            marker.set(\"background\", Rectangle.new(marker._root, { fillOpacity: 0, fill: color(0x000000) }));\r\n            const legendStroke = marker.children.push(Graphics._new(marker._root, {\r\n                themeTags: [\"line\", \"series\", \"legend\", \"marker\", \"stroke\"], interactive: false\r\n            }, [this.strokes.template]));\r\n            this._legendStroke = legendStroke;\r\n            const legendFill = marker.children.push(Graphics._new(marker._root, {\r\n                themeTags: [\"line\", \"series\", \"legend\", \"marker\", \"fill\"]\r\n            }, [this.fills.template]));\r\n            this._legendFill = legendFill;\r\n            const disabledColor = this._root.interfaceColors.get(\"disabled\");\r\n            legendStroke.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n            legendFill.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n            if (this.bullets.length > 0) {\r\n                const bulletFunction = this.bullets.getIndex(0);\r\n                if (bulletFunction) {\r\n                    const bullet = bulletFunction(marker._root, this, new DataItem(this, { legend: true }, {}));\r\n                    if (bullet) {\r\n                        const sprite = bullet.get(\"sprite\");\r\n                        if (sprite instanceof Graphics) {\r\n                            sprite.states.create(\"disabled\", { fill: disabledColor, stroke: disabledColor });\r\n                        }\r\n                        if (sprite) {\r\n                            sprite.setAll({\r\n                                tooltipText: undefined,\r\n                                tooltipHTML: undefined,\r\n                                focusable: undefined,\r\n                                focusableGroup: undefined,\r\n                                ariaLabel: undefined\r\n                            });\r\n                            marker.children.push(sprite);\r\n                            sprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\r\n                            marker.events.on(\"boundschanged\", () => {\r\n                                sprite.setAll({ x: marker.width() / 2, y: marker.height() / 2 });\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nObject.defineProperty(LineSeries, \"className\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: \"LineSeries\"\r\n});\r\nObject.defineProperty(LineSeries, \"classNames\", {\r\n    enumerable: true,\r\n    configurable: true,\r\n    writable: true,\r\n    value: XYSeries.classNames.concat([LineSeries.className])\r\n});\r\n//# sourceMappingURL=LineSeries.js.map"],"names":["array","x","Linear","context","y","curveLinear","p","line","defined","constant","curve","output","path","withPath","pointX","pointY","data","i","n","d","defined0","buffer","_","area","x0","y0","y1","x1","j","k","x0z","y0z","arealine","XYChartDefaultTheme","Theme","ic","language","r","ColorSet","Color","rule","setColor","p100","p50","dataItem","index","axisFill","$type.isNumber","gridIntervals","dateFormats","periodChangeDateFormats","tooltipDateFormats","$array.copy","$object.copy","axis","value","endValue","intervalDuration","baseInterval","gridInterval","min","$time.round","val","visible","step","$math.round","percent","display","sprite","parent","h","w","XYChart","SerialChart","ListAutoDispose","Container","Button","Graphics","root","verticalLayout","zoomOutButton","plotContainer","Rectangle","event","series","xAxis","$array.remove","yAxis","cursor","snapToSeries","wheelX","wheelY","wheelEvent","prevent","$utils.isLocalEvent","plotPoint","wheelStep","shiftY","shiftX","wheelZoomPositionX","wheelZoomPositionY","start","end","position","maxDeviation","newStart","newEnd","delta","se","sign","diff","originalEvent","local","$object.keys","panX","panY","eventType","animation","downPoint","pointerId","scrollbarX","panStart","panEnd","deltaX","scrollbarY","deltaY","downPoints","movePoints","$object.each","point","movePoint","downPoint0","downPoint1","movePoint0","movePoint1","downStartX","downEndX","downPos0","downPos1","movePos0","movePos1","initialDistance","currentDistance","s","e","sa","ea","downStartY","downEndY","cursorPoint","snapToSeriesBy","dataItems","$array.each","startIndex","endIndex","tooltipDataItem","minDistance","closestItem","distance","tooltip","previous","$array.move","colorSet","color","patternSet","pattern","behavior","downPositionX","downPositionY","positionX","positionY","position0","position1","axes","priority","axisStart","axisEnd","zoomAnimation","updateScrollbar","container","change","axisParent","gridContainer","gridParent","topGridContainer","topGridParent","left","right","bottomAxesContainer","topAxesContainer","force","otherCharts","global","chart","chartPlotContainer","documentPoint","chartRoot","hh","bounds","plotT","plotB","tooltips","sum","maxTooltipDistance","maxTooltipDistanceBy","closest","closestPoint","tooltipSeries","hidden","totalTooltipH","tooltipCount","tooltipContainer","count","a","b","$order.compareNumber","prevY","height","centerY","Percent","prevBottom","top","bottom","Grid","XYCursor","$utils.mergeTags","$utils.supports","$utils.addEventListener","ev","$utils.getEventKey","key","ctrlKey","dir","m","inversed","syncWith","$utils.isTouchEvent","rootPoint","type","moveThreshold","dispatch","lastPoint","skipEvent","alwaysShow","xyPos","userPositionX","userPositionY","xy","selection","max","XYSeries","Series","List","DataItem","axisRange","axisDataItem","bullet","_key","field","$array.removeFirst","newValue","baseAxis","minBulletDistance","xName","xCapName","$utils.capitalizeFirst","yName","yCapName","xLetter","yLetter","open","low","high","show","hiddenState","sequencedInterpolation","$utils.relativeToValue","tooltipPositionX","tooltipFieldX","tooltipPositionY","tooltipFieldY","stacked","vcx","vcy","outOfSelection","selectionMinY","selectionMaxY","selectionMinX","selectionMaxX","mainContainerMask","target","fill","draw","seriesIndex","stackToItemKey","len","stackToNegative","stackToSeries","stackToItem","stackValue","stackedToSeries","_dataItem","locationX","locationY","exactLocationX","exactLocationY","realField","previousBullet","previousBounds","yo","xo","_positionX","_positionY","id","dataSet","bullets","duration","_super","__awaiter","promises","easing","baseValue","stackedSeries","itemLocationX","itemLocationY","xPos","yPos","legendDataItem","label","txt","valueLabel","text","_position","baseDuration","minSelection","dl","BaseColumnSeries","listTemplate","categoryAxis","valueAxis","columnsTemplate","clusterCount","xRenderer","yRenderer","cellStartLocation","cellEndLocation","cellLocationX0","cellLocationX1","cellLocationY0","cellLocationY1","axisCase","graphics","markerRectangle","ds","visualSettings","setting","graphicsArray","rangeGraphics","previousDataItem","xField","yField","valueX","valueY","xOpenField","yOpenField","openLocationX","openLocationY","width","xStart","xEnd","yStart","yEnd","l","t","fitW","fitH","startLocation","endLocation","offset","stackToItemY","stackToItemX","$type.isNaN","maxWidth","maxHeight","ptl","pbr","tooltipPoint","dropFromOpen","riseFromOpen","dropFromPrevious","riseFromPrevious","close","previousClose","list","lastDataItem","column","Axis","Component","renderer","ghostLabel","_start","_end","sAnimation","eAnimation","maxZoomFactor","maxZoomFactorReal","minZoomCount","maxZoomCount","minZoomFactor","themeTags","above","grid","_index","rendererTags","forceHidden","fh","tick","v","tags","minor","_a","_b","_c","remove","axisBullet","gWidth","_location","_fields","coordinate","_nextItem","_autoGapCount","_fieldName","_series","ValueAxis","syncWithAxis","MultiDisposer","someDirty","getMM","letter","numberFormat","formatter","logarithmic","selectionMin","selectionMax","differencePower","minLog","minRealLog","minorLabelsEnabled","minorGridEnabled","stepPower","stepAdjusted","minorGridCount","minorStep","nextValue","minorValue","minorDataItem","minorLabel","decCount","endPosition","fillEndPosition","labelEndPosition","labelEndValue","fillRule","gridCount","minMaxStep","stepDecimalPlaces","$utils.decimalPlaces","treatZeroAs","location","_cellLocation","axisLocation","vc","fieldWorking","total","totalPercent","minDefined","maxDefined","extraMin","extraMax","selectionStrictMinMax","strictMinMax","seriesMin","seriesMax","minX","maxX","minY","maxY","range","smin","minMaxStep2","selectionMinReal","selectionMaxReal","$math.fitToRange","minDiff","initialMin","initialMax","minAdapted","maxAdapted","strictMinMaxSelection","strict","exponent","power","_min","_max","strictMode","difference","extra","stepDivisor","maxPrecision","ceiledStep","$math.ceil","minCount","maxCount","_adjustPosition","extraDecimals","decimals","fieldName","oldDiff","syncMin","syncMax","syncStep","currentCount","synced","omin","omax","ostep","CategoryAxis","indices","getIndices","startCategory","endCategory","openKey","otherAxis","findDataItem","category","direction","idx","searchCategory","item","startDataItem","endDataItem","hasValue","frequency","f","fillIndex","categoryLocation","endCategoryLocation","fillEndIndex","cellLocation","_axisLocation","final","name","modCount","acc","cellSizeAtIndex","modifiedLen","cellSizes","cellSize","rel","populateString","seriesDataItem","c","AxisLabel","Label","AxisTick","Tick","AxisRenderer","ListTemplate","Template","thumb","labelsContainer","pan","_event","downStart","downEnd","_point1","_point2","_tooltip","minPosition","maxPosition","updatedStart","updatedEnd","AxisRendererX","gridTemplate","opposite","inside","axisChildren","children","point1","point2","axisHeader","length","bulletPosition","previousSprite","num","pointerOrientation","oldBounds","$utils.sameBounds","AxisRendererY","horizontalLayout","ColumnSeries","RoundedRectangle","stroke","strokeWidth","strokeOpacity","fillOpacity","strokWidth","LineSeries","strokes","fills","legendStroke","legendFill","fillPattern","curveFactory","strokeTemplateField","fillTemplateField","strokeTemplateFound","fillTemplateFound","hasValues","dataContext","dataItemIndex","currentEndIndex","autoGapCount","connect","fillTemplate","originalTemplate","strokeTemplate","xOpenFieldValue","yOpenFieldValue","basePosX","basePosY","baseField","segments","points","fillVisible","getOpen","o","rangeStrokeTemplate","rangeFillTemplate","nextItem","iPoint","xPos0","yPos0","closeIPoint","p0","p1","p2","p3","prev","pp0","pp1","pp2","pp3","_points","_firstPoint","segment","marker","disabledColor","bulletFunction"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]}